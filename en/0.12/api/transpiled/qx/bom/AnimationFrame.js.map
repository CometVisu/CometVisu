{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/bom/AnimationFrame.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "event",
    "Emitter",
    "events",
    "undefined",
    "members",
    "__canceled",
    "startSequence",
    "duration",
    "start",
    "window",
    "performance",
    "now",
    "bom",
    "AnimationFrame",
    "__start",
    "Date",
    "cb",
    "time",
    "id",
    "emit",
    "timePassed",
    "Math",
    "max",
    "request",
    "cancelSequence",
    "statics",
    "TIMEOUT",
    "calculateTiming",
    "func",
    "x",
    "a",
    "y",
    "i",
    "length",
    "pow",
    "callback",
    "context",
    "req",
    "core",
    "Environment",
    "get",
    "call",
    "setTimeout",
    "defer",
    "timing",
    "navigationStart"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (wittemann)\n\n************************************************************************ */\n\n/**\n * This is a cross browser wrapper for requestAnimationFrame. For further\n * information about the feature, take a look at spec:\n * http://www.w3.org/TR/animation-timing/\n *\n * This class offers two ways of using this feature. First, the plain\n * API the spec describes.\n *\n * Here is a sample usage:\n * <pre class='javascript'>var start = Date.now();\n * var cb = function(time) {\n *   if (time >= start + duration) {\n *     // ... do some last tasks\n *   } else {\n *     var timePassed = time - start;\n *     // ... calculate the current step and apply it\n *     qx.bom.AnimationFrame.request(cb, this);\n *   }\n * };\n * qx.bom.AnimationFrame.request(cb, this);\n * </pre>\n *\n * Another way of using it is to use it as an instance emitting events.\n *\n * Here is a sample usage of that API:\n * <pre class='javascript'>var frame = new qx.bom.AnimationFrame();\n * frame.on(\"end\", function() {\n *   // ... do some last tasks\n * }, this);\n * frame.on(\"frame\", function(timePassed) {\n *   // ... calculate the current step and apply it\n * }, this);\n * frame.startSequence(duration);\n * </pre>\n *\n * @require(qx.lang.normalize.Date)\n */\nqx.Bootstrap.define(\"qx.bom.AnimationFrame\",\n{\n  extend : qx.event.Emitter,\n\n  events : {\n    /** Fired as soon as the animation has ended. */\n    \"end\" : undefined,\n\n    /**\n     * Fired on every frame having the passed time as value\n     * (might be a float for higher precision).\n     */\n    \"frame\" : \"Number\"\n  },\n\n  members : {\n    __canceled : false,\n\n    /**\n     * Method used to start a series of animation frames. The series will end as\n     * soon as the given duration is over.\n     *\n     * @param duration {Number} The duration the sequence should take.\n     *\n     * @ignore(performance.*)\n     */\n    startSequence : function(duration) {\n      this.__canceled = false;\n\n      var start = (window.performance && performance.now) ? (performance.now() + qx.bom.AnimationFrame.__start) : Date.now();\n      var cb = function(time) {\n        if (this.__canceled) {\n          this.id = null;\n          return;\n        }\n\n        // final call\n        if (time >= start + duration) {\n          this.emit(\"end\");\n          this.id = null;\n        } else {\n          var timePassed = Math.max(time - start, 0);\n          this.emit(\"frame\", timePassed);\n          this.id = qx.bom.AnimationFrame.request(cb, this);\n        }\n      };\n\n      this.id = qx.bom.AnimationFrame.request(cb, this);\n    },\n\n\n    /**\n     * Cancels a started sequence of frames. It will do nothing if no\n     * sequence is running.\n     */\n    cancelSequence : function() {\n      this.__canceled = true;\n    }\n  },\n\n  statics :\n  {\n    /**\n     * The default time in ms the timeout fallback implementation uses.\n     */\n    TIMEOUT : 30,\n\n\n    /**\n     * Calculation of the predefined timing functions. Approximation of the real\n     * bezier curves has been used for easier calculation. This is good and close\n     * enough for the predefined functions like <code>ease</code> or\n     * <code>linear</code>.\n     *\n     * @param func {String} The defined timing function. One of the following values:\n     *   <code>\"ease-in\"</code>, <code>\"ease-out\"</code>, <code>\"linear\"</code>,\n     *   <code>\"ease-in-out\"</code>, <code>\"ease\"</code>.\n     * @param x {Integer} The percent value of the function.\n     * @return {Integer} The calculated value\n     */\n    calculateTiming : function(func, x) {\n      if (func == \"ease-in\") {\n        var a = [3.1223e-7, 0.0757, 1.2646, -0.167, -0.4387, 0.2654];\n      } else if (func == \"ease-out\") {\n        var a = [-7.0198e-8, 1.652, -0.551, -0.0458, 0.1255, -0.1807];\n      } else if (func == \"linear\") {\n        return x;\n      } else if (func == \"ease-in-out\") {\n        var a = [2.482e-7, -0.2289, 3.3466, -1.0857, -1.7354, 0.7034];\n      } else {\n        // default is 'ease'\n        var a = [-0.0021, 0.2472, 9.8054, -21.6869, 17.7611, -5.1226];\n      }\n\n      // A 6th grade polynomial has been used as approximation of the original\n      // bezier curves  described in the transition spec\n      // http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n      // (the same is used for animations as well)\n      var y = 0;\n      for (var i=0; i < a.length; i++) {\n        y += a[i] * Math.pow(x, i);\n      };\n      return y;\n    },\n\n\n    /**\n     * Request for an animation frame. If the native <code>requestAnimationFrame</code>\n     * method is supported, it will be used. Otherwise, we use timeouts with a\n     * 30ms delay. The HighResolutionTime will be used if supported but the time given\n     * to the callback will still be a timestamp starting at 1 January 1970 00:00:00 UTC.\n     *\n     * @param callback {Function} The callback function which will get the current\n     *   time as argument (which could be a float for higher precision).\n     * @param context {var} The context of the callback.\n     * @return {Number} The id of the request.\n     */\n    request : function(callback, context) {\n      var req = qx.core.Environment.get(\"css.animation.requestframe\");\n\n      var cb = function(time) {\n        // check for high resolution time\n        if (time < 1e10) {\n          time = qx.bom.AnimationFrame.__start + time;\n        }\n\n        time = time || Date.now();\n        callback.call(context, time);\n      };\n      if (req) {\n        return window[req](cb);\n      } else {\n        // make sure to use an indirection because setTimeout passes a\n        // number as first argument as well\n        return window.setTimeout(function() {\n          cb();\n        }, qx.bom.AnimationFrame.TIMEOUT);\n      }\n    }\n  },\n\n  /**\n   * @ignore(performance.timing.*)\n   */\n  defer : function(statics) {\n    // check and use the high resolution start time if available\n    statics.__start = window.performance && performance.timing && performance.timing.navigationStart;\n    // if not, simply use the current time\n    if (!statics.__start) {\n      statics.__start = Date.now();\n    }\n  }\n});\n"
  ]
}