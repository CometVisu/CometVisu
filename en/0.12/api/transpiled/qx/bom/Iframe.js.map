{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/external/qooxdoo/framework/source/class/qx/bom/Iframe.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "statics",
    "DEFAULT_ATTRIBUTES",
    "onload",
    "frameBorder",
    "frameSpacing",
    "marginWidth",
    "marginHeight",
    "hspace",
    "vspace",
    "border",
    "allowTransparency",
    "create",
    "attributes",
    "win",
    "lang",
    "Object",
    "clone",
    "initValues",
    "bom",
    "Iframe",
    "key",
    "dom",
    "Element",
    "getWindow",
    "iframe",
    "contentWindow",
    "ex",
    "getDocument",
    "contentDocument",
    "document",
    "getBody",
    "doc",
    "getElementsByTagName",
    "setSource",
    "source",
    "Hierarchy",
    "isRendered",
    "core",
    "Environment",
    "get",
    "stop",
    "location",
    "replace",
    "src",
    "__rememberUrl",
    "log",
    "Logger",
    "warn",
    "queryCurrentUrl",
    "href",
    "callback",
    "Event",
    "removeNativeListener",
    "$$url",
    "addNativeListener"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Jonathan Wei√ü (jonathan_rass)\n     * Christian Hagendorn (Chris_schmidt)\n\n************************************************************************ */\n\n/**\n * Cross browser abstractions to work with iframes.\n *\n * @require(qx.event.handler.Iframe)\n */\nqx.Class.define(\"qx.bom.Iframe\",\n{\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /**\n     * @type {Map} Default attributes for creation {@link #create}.\n     */\n    DEFAULT_ATTRIBUTES :\n    {\n      onload : \"qx.event.handler.Iframe.onevent(this)\",\n      frameBorder: 0,\n      frameSpacing: 0,\n      marginWidth: 0,\n      marginHeight: 0,\n      hspace: 0,\n      vspace: 0,\n      border: 0,\n      allowTransparency: true\n    },\n\n    /**\n     * Creates an DOM element.\n     *\n     * Attributes may be given directly with this call. This is critical\n     * for some attributes e.g. name, type, ... in many clients.\n     *\n     * @param attributes {Map?null} Map of attributes to apply\n     * @param win {Window?null} Window to create the element for\n     * @return {Element} The created iframe node\n     */\n    create : function(attributes, win)\n    {\n      // Work on a copy to not modify given attributes map\n      var attributes = attributes ? qx.lang.Object.clone(attributes) : {};\n      var initValues = qx.bom.Iframe.DEFAULT_ATTRIBUTES;\n\n      for (var key in initValues)\n      {\n        if (attributes[key] == null) {\n          attributes[key] = initValues[key];\n        }\n      }\n\n      return qx.dom.Element.create(\"iframe\", attributes, win);\n    },\n\n\n    /**\n     * Get the DOM window object of an iframe.\n     *\n     * @param iframe {Element} DOM element of the iframe.\n     * @return {Window?null} The DOM window object of the iframe or null.\n     * @signature function(iframe)\n     */\n    getWindow : function(iframe)\n    {\n      try {\n        return iframe.contentWindow;\n      } catch(ex) {\n        return null;\n      }\n    },\n\n\n    /**\n     * Get the DOM document object of an iframe.\n     *\n     * @param iframe {Element} DOM element of the iframe.\n     * @return {Document} The DOM document object of the iframe.\n     */\n    getDocument : function(iframe)\n    {\n      if (\"contentDocument\" in iframe) {\n        try {\n          return iframe.contentDocument;\n        } catch(ex) {\n          return null;\n        }\n      }\n\n      try {\n        var win = this.getWindow(iframe);\n        return win ? win.document : null;\n      } catch(ex) {\n        return null;\n      }\n    },\n\n\n    /**\n     * Get the HTML body element of the iframe.\n     *\n     * @param iframe {Element} DOM element of the iframe.\n     * @return {Element} The DOM node of the <code>body</code> element of the iframe.\n     */\n    getBody : function(iframe)\n    {\n      try\n      {\n        var doc = this.getDocument(iframe);\n        return doc ? doc.getElementsByTagName(\"body\")[0] : null;\n      }\n      catch(ex)\n      {\n        return null;\n      }\n    },\n\n\n    /**\n     * Sets iframe's source attribute to given value\n     *\n     * @param iframe {Element} DOM element of the iframe.\n     * @param source {String} URL to be set.\n     * @signature function(iframe, source)\n     */\n    setSource : function(iframe, source)\n    {\n      try\n      {\n        // the guru says ...\n        // it is better to use 'replace' than 'src'-attribute, since 'replace'\n        // does not interfere with the history (which is taken care of by the\n        // history manager), but there has to be a loaded document\n        if (this.getWindow(iframe) && qx.dom.Hierarchy.isRendered(iframe))\n        {\n          /*\n            Some gecko users might have an exception here:\n            Exception... \"Component returned failure code: 0x805e000a\n            [nsIDOMLocation.replace]\"  nsresult: \"0x805e000a (<unknown>)\"\n          */\n          try\n          {\n            // Webkit on Mac can't set the source when the iframe is still\n            // loading its current page\n            if ((qx.core.Environment.get(\"engine.name\") == \"webkit\") &&\n                qx.core.Environment.get(\"os.name\") == \"osx\")\n            {\n              var contentWindow = this.getWindow(iframe);\n              if (contentWindow) {\n                contentWindow.stop();\n              }\n            }\n            this.getWindow(iframe).location.replace(source);\n          }\n          catch(ex)\n          {\n            iframe.src = source;\n          }\n        }\n        else\n        {\n          iframe.src = source;\n        }\n\n      // This is a programmer provided source. Remember URL for this source\n      // for later comparison with current URL. The current URL can diverge\n      // if the end-user navigates in the Iframe.\n      this.__rememberUrl(iframe);\n\n      }\n      catch(ex) {\n        qx.log.Logger.warn(\"Iframe source could not be set!\");\n      }\n    },\n\n\n    /**\n     * Returns the current (served) URL inside the iframe\n     *\n     * @param iframe {Element} DOM element of the iframe.\n     * @return {String} Returns the location href or null (if a query is not possible/allowed)\n     */\n    queryCurrentUrl : function(iframe)\n    {\n      var doc = this.getDocument(iframe);\n\n      try\n      {\n        if (doc && doc.location) {\n          return doc.location.href;\n        }\n      }\n      catch(ex) {};\n\n      return \"\";\n    },\n\n\n    /**\n    * Remember actual URL of iframe.\n    *\n    * @param iframe {Element} DOM element of the iframe.\n    */\n    __rememberUrl: function(iframe)\n    {\n\n      // URL can only be detected after load. Retrieve and store URL once.\n      var callback = function() {\n        qx.bom.Event.removeNativeListener(iframe, \"load\", callback);\n        iframe.$$url = qx.bom.Iframe.queryCurrentUrl(iframe);\n      };\n\n      qx.bom.Event.addNativeListener(iframe, \"load\", callback);\n    }\n\n  }\n});\n"
  ]
}