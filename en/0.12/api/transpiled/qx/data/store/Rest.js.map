{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/data/store/Rest.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "resource",
    "actionName",
    "delegate",
    "setResource",
    "setActionName",
    "e",
    "dispose",
    "_delegate",
    "_marshaler",
    "data",
    "marshal",
    "Json",
    "lang",
    "Type",
    "isFunction",
    "configureRequest",
    "__configureRequest",
    "__onActionSuccessBound",
    "Function",
    "bind",
    "__onActionSuccess",
    "__addListeners",
    "properties",
    "check",
    "model",
    "nullable",
    "event",
    "members",
    "getResource",
    "getActionName",
    "addListener",
    "getData",
    "marshaler",
    "oldModel",
    "getModel",
    "manipulateData",
    "toClass",
    "toModel",
    "setModel",
    "destruct",
    "store",
    "Rest"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n************************************************************************ */\n\n/**\n * Handles response associated to a resource's action. The model property is\n * populated with the marshaled response. Note the action is invoked on the\n * resource, not the store.\n */\nqx.Class.define(\"qx.data.store.Rest\",\n{\n  extend: qx.core.Object,\n\n  /**\n   * @param resource {qx.io.rest.Resource} The resource.\n   * @param actionName {String} The name of the resource's action to retrieve\n   *  the response from.\n   * @param delegate {Object?null} The delegate containing one of the methods\n   *  specified in {@link qx.data.store.IStoreDelegate}.\n   */\n  construct: function(resource, actionName, delegate)\n  {\n    this.base(arguments);\n\n    try {\n      this.setResource(resource);\n      this.setActionName(actionName);\n    } catch(e) {\n      this.dispose();\n      throw e;\n    }\n\n    this._delegate = delegate;\n    this._marshaler = new qx.data.marshal.Json(delegate);\n\n    if (delegate && qx.lang.Type.isFunction(delegate.configureRequest)) {\n      this.__configureRequest();\n    }\n\n    this.__onActionSuccessBound = qx.lang.Function.bind(this.__onActionSuccess, this);\n    this.__addListeners();\n  },\n\n  properties:\n  {\n    /**\n     * The resource.\n     */\n    resource: {\n      check: \"qx.io.rest.Resource\"\n    },\n\n    /**\n     * The name of the resource's action to retrieve the response from.\n     */\n    actionName: {\n      check: \"String\"\n    },\n\n    /**\n     * Populated with the marshaled response.\n     */\n    model: {\n      nullable: true,\n      event: \"changeModel\"\n    }\n  },\n\n  members:\n  {\n    _marshaler: null,\n    _delegate: null,\n\n    __onActionSuccessBound: null,\n\n    /**\n     * Configure the resource's request by processing the delegate.\n     */\n    __configureRequest: function() {\n      var resource = this.getResource(),\n          delegate = this._delegate;\n\n      // Overrides existing callback, if any\n      resource.configureRequest(delegate.configureRequest);\n    },\n\n    /**\n     * Listen to events fired by the resource.\n     */\n    __addListeners: function() {\n      var resource = this.getResource(),\n          actionName = this.getActionName();\n\n      if (resource && actionName) {\n        resource.addListener(this.getActionName() + \"Success\", this.__onActionSuccessBound);\n      }\n    },\n\n    /**\n     * Handle actionSuccess event.\n     *\n     * Updates model with marshaled response.\n     *\n     * @param e {qx.event.type.Rest} Rest event.\n     */\n    __onActionSuccess: function(e) {\n      var data = e.getData(),\n          marshaler = this._marshaler,\n          model,\n          oldModel = this.getModel(),\n          delegate = this._delegate;\n\n      // Skip if data is empty\n      if (data) {\n\n        // Manipulate received data\n        if (delegate && delegate.manipulateData) {\n          data = delegate.manipulateData(data);\n        }\n\n        // Create class suiting data and assign instance\n        // initialized with data to model property\n        marshaler.toClass(data, true);\n        model = marshaler.toModel(data);\n        if (model) {\n          this.setModel(model);\n        }\n      }\n\n      // Dispose instance marshaled before\n      if (oldModel && oldModel.dispose) {\n        oldModel.dispose();\n      }\n    }\n  },\n\n  destruct: function() {\n    var model = this.getModel();\n    if (model && typeof model.dispose === \"function\") {\n      model.dispose();\n    }\n\n    this._marshaler && this._marshaler.dispose();\n  }\n});\n"
  ]
}