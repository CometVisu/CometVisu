{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/event/GlobalError.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "statics",
    "__callback",
    "__originalOnError",
    "__context",
    "__isGlobalErrorHandlingEnabled",
    "core",
    "Environment",
    "getEnvironmentSetting",
    "setErrorHandler",
    "callback",
    "context",
    "window",
    "onerror",
    "wrappedHandler",
    "bind",
    "__onErrorWindow",
    "self",
    "msg",
    "uri",
    "lineNumber",
    "columnNumber",
    "exception",
    "handleError",
    "WindowError",
    "observeMethod",
    "method",
    "apply",
    "arguments",
    "ex",
    "GlobalError",
    "call",
    "defer",
    "add",
    "setEnvironmentSetting",
    "event"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * The GlobalError class stores a reference to a global error handler function.\n *\n *  This function is called for each uncatched JavaScript exception. To enable\n *  global error handling the setting <code>qx.globalErrorHandling</code> must\n *  be enabled and an error handler must be registered.\n *  Further each JavaScript \"entry point\" must be wrapped with a call to\n *  {@link qx.event.GlobalError#observeMethod}.\n *\n * @ignore(qx.core, qx.core.Environment)\n */\nqx.Bootstrap.define(\"qx.event.GlobalError\",\n{\n  statics :\n  {\n    __callback : null,\n\n    __originalOnError : null,\n\n    __context : null,\n\n    /**\n     * Little helper to check if the global error handling is enabled.\n     * @return {Boolean} <code>true</code>, if it is enabled.\n     */\n    __isGlobalErrorHandlingEnabled : function() {\n      if (qx.core && qx.core.Environment) {\n        return qx.core.Environment.get(\"qx.globalErrorHandling\");\n      } else {\n        return !!qx.Bootstrap.getEnvironmentSetting(\"qx.globalErrorHandling\");\n      }\n    },\n\n\n    /**\n     * Set the global fallback error handler\n     *\n     * @param callback {Function?null} The error handler. The first argument is the\n     *    exception, which caused the error\n     * @param context {Object?window} The \"this\" context of the callback function\n     */\n    setErrorHandler : function(callback, context)\n    {\n      this.__callback = callback || null;\n      this.__context = context || window;\n\n      if (this.__isGlobalErrorHandlingEnabled())\n      {\n        // wrap the original onerror\n        if (callback && window.onerror) {\n          var wrappedHandler = qx.Bootstrap.bind(this.__onErrorWindow, this);\n          if (this.__originalOnError == null) {\n            this.__originalOnError = window.onerror;\n          }\n          var self = this;\n          window.onerror = function(msg, uri, lineNumber) {\n            self.__originalOnError(msg, uri, lineNumber);\n            wrappedHandler(msg, uri, lineNumber);\n          };\n        }\n\n        if (callback && !window.onerror) {\n          window.onerror = qx.Bootstrap.bind(this.__onErrorWindow, this);\n        }\n\n        // reset\n        if (this.__callback == null) {\n          if (this.__originalOnError != null) {\n            window.onerror = this.__originalOnError;\n            this.__originalOnError = null;\n          } else {\n            window.onerror = null;\n          }\n        }\n      }\n    },\n\n\n    /**\n     * Catches all errors of the <code>window.onerror</code> handler\n     * and passes an {@link qx.core.WindowError} object to the error\n     * handling.\n     *\n     * @param msg {String} browser error message\n     * @param uri {String} uri to erroneous script\n     * @param lineNumber {Integer} line number of error\n     * @param columnNumber {Integer} column number of error\n     * @param exception {Error} orginal error\n     */\n    __onErrorWindow : function(msg, uri, lineNumber, columnNumber, exception)\n    {\n      if (this.__callback)\n      {\n        this.handleError(new qx.core.WindowError(msg, uri, lineNumber, columnNumber, exception));\n      }\n    },\n\n\n    /**\n     * Wraps a method with error handling code. Only methods, which are called\n     * directly by the browser (e.g. event handler) should be wrapped.\n     *\n     * @param method {Function} method to wrap\n     * @return {Function} The function wrapped with error handling code\n     */\n    observeMethod : function(method)\n    {\n      if (this.__isGlobalErrorHandlingEnabled())\n      {\n        var self = this;\n        return function()\n        {\n          if (!self.__callback) {\n            return method.apply(this, arguments);\n          }\n\n          try {\n            return method.apply(this, arguments);\n          } catch(ex) {\n            self.handleError(new qx.core.GlobalError(ex, arguments));\n         }\n        };\n      }\n      else\n      {\n        return method;\n      }\n    },\n\n\n    /**\n     * Delegates every given exception to the registered error handler\n     *\n     * @param ex {qx.core.WindowError|Error} Exception to delegate\n     */\n    handleError : function(ex)\n    {\n      if (this.__callback) {\n        this.__callback.call(this.__context, ex);\n      }\n    }\n  },\n\n\n  defer : function(statics)\n  {\n    // only use the environment class if already loaded\n    if (qx.core && qx.core.Environment) {\n      qx.core.Environment.add(\"qx.globalErrorHandling\", true);\n    } else {\n      qx.Bootstrap.setEnvironmentSetting(\"qx.globalErrorHandling\", true);\n    }\n\n    statics.setErrorHandler(null, null);\n  }\n});\n"
  ]
}