{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/table/selection/Manager.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "properties",
    "selectionModel",
    "check",
    "members",
    "__lastPointerDownHandled",
    "handleTap",
    "index",
    "evt",
    "isLeftPressed",
    "getSelectionModel",
    "isSelectedIndex",
    "_handleSelectEvent",
    "isRightPressed",
    "getModifiers",
    "setSelectionInterval",
    "handleSelectKeyDown",
    "handleMoveKeyDown",
    "event",
    "type",
    "Dom",
    "SHIFT_MASK",
    "anchor",
    "getAnchorSelectionIndex",
    "leadIndex",
    "getLeadSelectionIndex",
    "anchorIndex",
    "isShiftPressed",
    "isSelectionEmpty",
    "isCtrlOrCommandPressed",
    "addSelectionInterval",
    "removeSelectionInterval",
    "ui",
    "table",
    "selection",
    "Manager"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2006 STZ-IDA, Germany, http://www.stz-ida.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Til Schneider (til132)\n\n************************************************************************ */\n\n/**\n * A selection manager. This is a helper class that handles all selection\n * related events and updates a SelectionModel.\n * <p>\n * Widgets that support selection should use this manager. This way the only\n * thing the widget has to do is mapping pointer or key events to indexes and\n * call the corresponding handler method.\n *\n * @see SelectionModel\n */\nqx.Class.define(\"qx.ui.table.selection.Manager\",\n{\n  extend : qx.core.Object,\n\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct : function() {\n    this.base(arguments);\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties :\n  {\n    /**\n     * The selection model where to set the selection changes.\n     */\n    selectionModel :\n    {\n      check : \"qx.ui.table.selection.Model\"\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __lastPointerDownHandled : null,\n\n\n    /**\n     * Handles the tap event.\n     *\n     * @param index {Integer} the index the pointer is pointing at.\n     * @param evt {qx.event.type.Tap} the pointer event.\n     */\n    handleTap : function(index, evt)\n    {\n      if (evt.isLeftPressed())\n      {\n        var selectionModel = this.getSelectionModel();\n\n        if (!selectionModel.isSelectedIndex(index))\n        {\n          // This index is not selected -> We react when the pointer is pressed (because of drag and drop)\n          this._handleSelectEvent(index, evt);\n          this.__lastPointerDownHandled = true;\n        }\n        else\n        {\n          // This index is already selected -> We react when the pointer is released (because of drag and drop)\n          this.__lastPointerDownHandled = false;\n        }\n      }\n      else if (evt.isRightPressed() && evt.getModifiers() == 0)\n      {\n        var selectionModel = this.getSelectionModel();\n\n        if (!selectionModel.isSelectedIndex(index))\n        {\n          // This index is not selected -> Set the selection to this index\n          selectionModel.setSelectionInterval(index, index);\n        }\n      }\n\n      if (evt.isLeftPressed() && !this.__lastPointerDownHandled) {\n        this._handleSelectEvent(index, evt);\n      }\n    },\n\n\n    /**\n     * Handles the key down event that is used as replacement for pointer taps\n     * (Normally space).\n     *\n     * @param index {Integer} the index that is currently focused.\n     * @param evt {Map} the key event.\n     */\n    handleSelectKeyDown : function(index, evt) {\n      this._handleSelectEvent(index, evt);\n    },\n\n\n    /**\n     * Handles a key down event that moved the focus (E.g. up, down, home, end, ...).\n     *\n     * @param index {Integer} the index that is currently focused.\n     * @param evt {Map} the key event.\n     */\n    handleMoveKeyDown : function(index, evt)\n    {\n      var selectionModel = this.getSelectionModel();\n\n      switch(evt.getModifiers())\n      {\n        case 0:\n          selectionModel.setSelectionInterval(index, index);\n          break;\n\n        case qx.event.type.Dom.SHIFT_MASK:\n          var anchor = selectionModel.getAnchorSelectionIndex();\n\n          if (anchor == -1) {\n            selectionModel.setSelectionInterval(index, index);\n          } else {\n            selectionModel.setSelectionInterval(anchor, index);\n          }\n\n          break;\n      }\n    },\n\n\n    /**\n     * Handles a select event.\n     *\n     * @param index {Integer} the index the event is pointing at.\n     * @param evt {Map} the pointer event.\n     */\n    _handleSelectEvent : function(index, evt)\n    {\n      var selectionModel = this.getSelectionModel();\n\n      var leadIndex = selectionModel.getLeadSelectionIndex();\n      var anchorIndex = selectionModel.getAnchorSelectionIndex();\n\n      if (evt.isShiftPressed())\n      {\n        if (index != leadIndex || selectionModel.isSelectionEmpty())\n        {\n          // The lead selection index was changed\n          if (anchorIndex == -1) {\n            anchorIndex = index;\n          }\n\n          if (evt.isCtrlOrCommandPressed()) {\n            selectionModel.addSelectionInterval(anchorIndex, index);\n          } else {\n            selectionModel.setSelectionInterval(anchorIndex, index);\n          }\n        }\n      }\n      else if (evt.isCtrlOrCommandPressed())\n      {\n        if (selectionModel.isSelectedIndex(index)) {\n          selectionModel.removeSelectionInterval(index, index);\n        } else {\n          selectionModel.addSelectionInterval(index, index);\n        }\n      }\n      else\n      {\n        // setSelectionInterval checks to see if the change is really necessary\n        selectionModel.setSelectionInterval(index, index);\n      }\n    }\n  }\n});\n"
  ]
}