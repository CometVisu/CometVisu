{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/embed/Iframe.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "embed",
    "AbstractIframe",
    "construct",
    "source",
    "__source",
    "event",
    "Registration",
    "addListener",
    "document",
    "body",
    "block",
    "release",
    "__blockerElement",
    "_createBlockerElement",
    "core",
    "Environment",
    "get",
    "addListenerOnce",
    "element",
    "getContentElement",
    "getDomElement",
    "isDOMNodeInserted",
    "mutationRecord",
    "i",
    "addedNodes",
    "length",
    "removedNodes",
    "observer",
    "MutationObserver",
    "mutationRecords",
    "some",
    "_syncSourceAfterDOMMove",
    "bind",
    "parent",
    "getLayoutParent",
    "observe",
    "childList",
    "subtree",
    "bom",
    "Event",
    "addNativeListener",
    "_onDOMNodeInserted",
    "lang",
    "Function",
    "listener",
    "properties",
    "appearance",
    "refine",
    "init",
    "nativeContextMenu",
    "nativeHelp",
    "check",
    "apply",
    "scrollbar",
    "nullable",
    "themeable",
    "members",
    "renderLayout",
    "left",
    "top",
    "width",
    "height",
    "pixel",
    "insets",
    "getInsets",
    "setStyles",
    "right",
    "bottom",
    "_createContentElement",
    "iframe",
    "html",
    "Iframe",
    "_onIframeLoad",
    "_getIframeElement",
    "el",
    "Blocker",
    "e",
    "_applyNativeContextMenu",
    "getNativeContextMenu",
    "_applyNativeHelp",
    "getNativeHelp",
    "fireNonBubblingEvent",
    "setStyle",
    "value",
    "old",
    "doc",
    "getDocument",
    "documentElement",
    "removeListener",
    "_onNativeContextMenu",
    "preventDefault",
    "removeNativeListener",
    "iframeDomElement",
    "iframeSource",
    "src",
    "charAt",
    "substring",
    "getSource",
    "getWindow",
    "stop",
    "_applyScrollbar",
    "setAttribute",
    "setLayoutParent",
    "add",
    "destruct",
    "getParent",
    "remove",
    "_disposeObjects"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Til Schneider (til132)\n     * Jonathan Weiß (jonathan_rass)\n\n************************************************************************ */\n\n/**\n * Container widget for internal frames (iframes).\n * An iframe can display any HTML page inside the widget.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n * var document = this.getRoot();\n * var iframe = new qx.ui.embed.Iframe(\"http://www.qooxdoo.org\");\n * document.add(iframe);\n * </pre>\n *\n *\n * *External Documentation*\n *\n * <a href='http://qooxdoo.org/docs/#desktop/widget/iframe.md' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n *\n *\n * *Notes*\n * When modifying this file, note that the test qx.test.ui.embed.Iframe.testSyncSourceAfterDOMMove\n * has been disabled under Chrome because of problems with Travis and Github.  Changes to this file\n * should be tested manually against that test.\n */\nqx.Class.define(\"qx.ui.embed.Iframe\",\n{\n  extend : qx.ui.embed.AbstractIframe,\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @ignore(MutationObserver)\n   * @param source {String} URL which should initially set.\n   */\n  construct : function(source)\n  {\n    if (source != null) {\n      this.__source = source;\n    }\n\n    this.base(arguments, source);\n\n    qx.event.Registration.addListener(document.body, \"pointerdown\", this.block, this, true);\n    qx.event.Registration.addListener(document.body, \"pointerup\", this.release, this, true);\n    qx.event.Registration.addListener(document.body, \"losecapture\", this.release, this, true);\n\n    this.__blockerElement = this._createBlockerElement();\n\n    if ( qx.core.Environment.get(\"ecmascript.mutationobserver\") )\n    {\n      this.addListenerOnce(\"appear\", function ()\n      {\n        var element = this.getContentElement().getDomElement();\n\n        // Mutation record check callback\n        var isDOMNodeInserted = function (mutationRecord)\n        {\n          var i;\n          // 'our' iframe was either added...\n          if (mutationRecord.addedNodes)\n          {\n            for (i = mutationRecord.addedNodes.length; i>=0; --i) {\n              if (mutationRecord.addedNodes[i] == element) {\n                return true;\n              }\n            }\n          }\n          // ...or removed\n          if (mutationRecord.removedNodes)\n          {\n            for (i = mutationRecord.removedNodes.length; i>=0; --i) {\n              if (mutationRecord.removedNodes[i] == element) {\n                return true;\n              }\n            }\n          }\n          return false;\n        };\n\n        var observer = new MutationObserver(function (mutationRecords)\n        {\n          if (mutationRecords.some(isDOMNodeInserted)) {\n            this._syncSourceAfterDOMMove();\n          }\n        }.bind(this));\n\n        // Observe parent element\n        var parent = this.getLayoutParent().getContentElement().getDomElement();\n        observer.observe(parent, { childList: true, subtree: true });\n\n      }, this);\n    }\n    else // !qx.core.Environment.get(\"ecmascript.mutationobserver\")\n    {\n      this.addListenerOnce(\"appear\", function ()\n      {\n        var element = this.getContentElement().getDomElement();\n        qx.bom.Event.addNativeListener(element, \"DOMNodeInserted\", this._onDOMNodeInserted);\n      }, this);\n      this._onDOMNodeInserted = qx.lang.Function.listener(this._syncSourceAfterDOMMove, this);\n    }\n  },\n\n\n  properties :\n  {\n    // overridden\n    appearance :\n    {\n      refine : true,\n      init : \"iframe\"\n    },\n\n\n    /**\n     * Whether to show the frame's native context menu.\n     *\n     * Note: This only works if the iframe source is served from the same domain\n     * as the main application.\n     */\n    nativeContextMenu :\n    {\n      refine: true,\n      init : false\n    },\n\n\n    /**\n     * If the user presses F1 in IE by default the onhelp event is fired and\n     * IE’s help window is opened. Setting this property to <code>false</code>\n     * prevents this behavior.\n     *\n     * Note: This only works if the iframe source is served from the same domain\n     * as the main application.\n     */\n    nativeHelp :\n    {\n      check : \"Boolean\",\n      init : false,\n      apply : \"_applyNativeHelp\"\n    },\n\n    /**\n     * Whether the widget should have scrollbars.\n     */\n    scrollbar :\n    {\n      check : [\"auto\", \"no\", \"yes\"],\n      nullable : true,\n      themeable : true,\n      apply : \"_applyScrollbar\"\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __source : null,\n    __blockerElement : null,\n\n\n    // overridden\n    renderLayout : function(left, top, width, height)\n    {\n      this.base(arguments, left, top, width, height);\n\n      var pixel = \"px\";\n      var insets = this.getInsets();\n\n      this.__blockerElement.setStyles({\n        \"left\": (left + insets.left) + pixel,\n        \"top\": (top + insets.top) + pixel,\n        \"width\": (width - insets.left - insets.right) + pixel,\n        \"height\": (height - insets.top - insets.bottom) + pixel\n      });\n    },\n\n\n    // overridden\n    _createContentElement : function()\n    {\n      var iframe = new qx.html.Iframe(this.__source);\n      iframe.addListener(\"load\", this._onIframeLoad, this);\n      return iframe;\n    },\n\n\n    // overridden\n    _getIframeElement : function() {\n      return this.getContentElement();\n    },\n\n\n    /**\n     * Creates <div> element which is aligned over iframe node to avoid losing pointer events.\n     *\n     * @return {Object} Blocker element node\n     */\n    _createBlockerElement : function()\n    {\n      var el = new qx.html.Blocker();\n      el.setStyles({\n        \"zIndex\": 20,\n        \"display\": \"none\"\n      });\n\n      return el;\n    },\n\n\n    /**\n     * Reacts on native load event and redirects it to the widget.\n     *\n     * @param e {qx.event.type.Event} Native load event\n     */\n    _onIframeLoad : function(e)\n    {\n      this._applyNativeContextMenu(this.getNativeContextMenu(), null);\n      this._applyNativeHelp(this.getNativeHelp(), null);\n\n      this.fireNonBubblingEvent(\"load\");\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Cover the iframe with a transparent blocker div element. This prevents\n     * pointer or key events to be handled by the iframe. To release the blocker\n     * use {@link #release}.\n     *\n     */\n    block : function() {\n      this.__blockerElement.setStyle(\"display\", \"block\");\n    },\n\n\n    /**\n     * Release the blocker set by {@link #block}.\n     *\n     */\n    release : function() {\n      this.__blockerElement.setStyle(\"display\", \"none\");\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT HANDLER\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply\n    _applyNativeContextMenu : function(value, old)\n    {\n      if (value !== false && old !== false) {\n        return;\n      }\n\n      var doc = this.getDocument();\n      if (!doc) {\n        return;\n      }\n\n      try {\n        var documentElement = doc.documentElement;\n      } catch(e) {\n        // this may fail due to security restrictions\n        return;\n      }\n\n      if (old === false)\n      {\n        qx.event.Registration.removeListener(\n          documentElement, \"contextmenu\",\n          this._onNativeContextMenu, this, true\n        );\n      }\n\n      if (value === false)\n      {\n        qx.event.Registration.addListener(\n          documentElement, \"contextmenu\",\n          this._onNativeContextMenu, this, true\n        );\n      }\n    },\n\n\n    /**\n     * Stops the <code>contextmenu</code> event from showing the native context menu\n     *\n     * @param e {qx.event.type.Mouse} The event object\n     */\n    _onNativeContextMenu : function(e) {\n      e.preventDefault();\n    },\n\n\n    // property apply\n    _applyNativeHelp : function(value, old)\n    {\n      if (qx.core.Environment.get(\"event.help\")) {\n        var document = this.getDocument();\n        if (!document) {\n          return;\n        }\n\n        try\n        {\n          if (old === false) {\n            qx.bom.Event.removeNativeListener(document, \"help\", (function() {return false;}));\n          }\n\n          if (value === false) {\n            qx.bom.Event.addNativeListener(document, \"help\", (function() {return false;}));\n          }\n        } catch (e) {\n          if (qx.core.Environment.get(\"qx.debug\")) {\n            this.warn(\n              \"Unable to set 'nativeHelp' property, possibly due to security restrictions\"\n            );\n          }\n        }\n      }\n    },\n\n\n    /**\n     * Checks if the iframe element is out of sync. This can happen in Firefox\n     * if the iframe is moved around and the source is changed right after.\n     * The root cause is that Firefox is reloading the iframe when its position\n     * in DOM has changed.\n     */\n    _syncSourceAfterDOMMove : function()\n    {\n      var iframeDomElement = this.getContentElement() && this.getContentElement().getDomElement();\n      if (!iframeDomElement) {\n        return;\n      }\n      var iframeSource = iframeDomElement.src;\n\n      // remove trailing \"/\"\n      if (iframeSource.charAt(iframeSource.length-1) == \"/\") {\n        iframeSource = iframeSource.substring(0, iframeSource.length-1);\n      }\n\n      if (iframeSource != this.getSource())\n      {\n        if ( qx.core.Environment.get(\"browser.name\") != \"edge\" &&\n             qx.core.Environment.get(\"browser.name\") != \"ie\" )\n        {\n          qx.bom.Iframe.getWindow(iframeDomElement).stop();\n        }\n        iframeDomElement.src = this.getSource();\n      }\n    },\n\n\n    // property apply\n    _applyScrollbar : function(value) {\n      this.getContentElement().setAttribute(\"scrolling\", value);\n    },\n\n\n    // overridden\n    setLayoutParent : function(parent)\n    {\n      this.base(arguments, parent);\n      if (parent) {\n        this.getLayoutParent().getContentElement().add(this.__blockerElement);\n      }\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function()\n  {\n    if (this.getLayoutParent() && this.__blockerElement.getParent()) {\n      this.getLayoutParent().getContentElement().remove(this.__blockerElement);\n    }\n    this._disposeObjects(\"__blockerElement\");\n\n    qx.event.Registration.removeListener(document.body, \"pointerdown\", this.block, this, true);\n    qx.event.Registration.removeListener(document.body, \"pointerup\", this.release, this, true);\n    qx.event.Registration.removeListener(document.body, \"losecapture\", this.release, this, true);\n  }\n});\n"
  ]
}