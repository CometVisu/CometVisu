{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/mobile/basic/Image.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "mobile",
    "core",
    "Widget",
    "construct",
    "source",
    "basic",
    "Image",
    "ROOT",
    "Init",
    "getApplication",
    "getRoot",
    "setSource",
    "initSource",
    "addListener",
    "_onChangeAppScale",
    "events",
    "loadingFailed",
    "loaded",
    "statics",
    "PLACEHOLDER_IMAGE",
    "properties",
    "check",
    "nullable",
    "init",
    "apply",
    "members",
    "_getTagName",
    "_applySource",
    "value",
    "old",
    "resourceManager",
    "util",
    "ResourceManager",
    "getInstance",
    "indexOf",
    "uri",
    "toUri",
    "has",
    "highResSource",
    "findHighResolutionSource",
    "getAppScale",
    "_createHighResolutionOverlay",
    "io",
    "ImageLoader",
    "isFailed",
    "isLoaded",
    "load",
    "__loaderCallback",
    "_setSource",
    "getSource",
    "lowResSource",
    "_setStyle",
    "getImageWidth",
    "getImageHeight",
    "imageInfo",
    "$$disposed",
    "failed",
    "warn",
    "fireEvent",
    "aborted",
    "_domUpdated",
    "_setAttribute",
    "setDraggable",
    "isDraggable",
    "defer",
    "destruct",
    "removeListener"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2013 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tino Butz (tbtz)\n\n************************************************************************ */\n\n/**\n * The image widget displays an image file.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.mobile.basic.Image(\"path/to/icon.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>path/to/icon.png</code>.\n *\n */\nqx.Class.define(\"qx.ui.mobile.basic.Image\",\n{\n  extend : qx.ui.mobile.core.Widget,\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param source {String?null} The URL of the image to display.\n   */\n  construct : function(source)\n  {\n    this.base(arguments);\n\n    if (qx.ui.mobile.basic.Image.ROOT === null) {\n      qx.ui.mobile.basic.Image.ROOT = qx.core.Init.getApplication().getRoot();\n    }\n\n    if (source) {\n      this.setSource(source);\n    } else {\n      this.initSource();\n    }\n\n    qx.ui.mobile.basic.Image.ROOT.addListener(\"changeAppScale\", this._onChangeAppScale, this);\n  },\n\n\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events :\n  {\n    /**\n     * Fired if the image source can not be loaded.\n     */\n    loadingFailed : \"qx.event.type.Event\",\n\n\n    /**\n     * Fired if the image has been loaded.\n     */\n    loaded : \"qx.event.type.Event\"\n  },\n\n\n  statics :\n  {\n    /** @type {qx.ui.mobile.core.Root} the mobile application root */\n    ROOT : null,\n\n\n    /** @type {String} a 1px*1px sized transparent image. */\n    PLACEHOLDER_IMAGE : null\n  },\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties :\n  {\n    /**\n     * The URL of the image to display.\n     */\n    source :\n    {\n      check : \"String\",\n      nullable : true,\n      init : null,\n      apply : \"_applySource\"\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    // overridden\n    _getTagName : function() {\n      return \"img\";\n    },\n\n\n    // property apply\n    _applySource: function(value, old) {\n      var resourceManager = qx.util.ResourceManager.getInstance();\n      var source = value;\n\n      if (source && source.indexOf('data:') != 0) {\n        var uri = resourceManager.toUri(source);\n\n        if (resourceManager.has(source)) {\n          var highResSource = resourceManager.findHighResolutionSource(source, qx.ui.mobile.basic.Image.ROOT.getAppScale());\n          if (highResSource) {\n            this._createHighResolutionOverlay(highResSource,source);\n            source = qx.ui.mobile.basic.Image.PLACEHOLDER_IMAGE;\n            uri = resourceManager.toUri(highResSource);\n          } else {\n            source = uri;\n          }\n        }\n\n        if (!qx.io.ImageLoader.isFailed(uri) && !qx.io.ImageLoader.isLoaded(uri)) {\n          qx.io.ImageLoader.load(uri, this.__loaderCallback, this);\n        }\n      }\n\n      this._setSource(source);\n    },\n\n\n    /**\n    * Event handler for \"changeAppScale\" on application root.\n    * Reloads the image source.\n    */\n    _onChangeAppScale : function() {\n      this._applySource(this.getSource());\n    },\n\n\n    /**\n    * Creates an overlay for this image which shows the image defined by the parameter 'highResSource',\n    * but has the same size and position as the source image.\n    * The original image widget is hidden by this method.\n    *\n    * @param highResSource {String} Image source of the high-resolution image.\n    * @param lowResSource {String} Image source of the low-resolution image.\n    */\n    _createHighResolutionOverlay : function(highResSource, lowResSource) {\n      // Replace the source through transparent pixel for making the high-resolution background image visible.\n      var resourceManager = qx.util.ResourceManager.getInstance();\n      this._setStyle(\"backgroundImage\",\"url(\"+resourceManager.toUri(highResSource)+\")\");\n      this._setStyle(\"backgroundSize\",\"100%\");\n      this._setStyle(\"backgroundRepeat\",\"no-repeat\");\n      this._setStyle(\"backgroundPosition\",\"50% 50%\");\n      this._setStyle(\"width\", resourceManager.getImageWidth(lowResSource) / 16 + \"rem\");\n      this._setStyle(\"height\", resourceManager.getImageHeight(lowResSource) / 16 + \"rem\");\n    },\n\n\n    /**\n     * Event handler fired after the preloader has finished loading the icon\n     *\n     * @param source {String} Image source which was loaded\n     * @param imageInfo {Map} Dimensions of the loaded image\n     */\n    __loaderCallback : function(source, imageInfo)\n    {\n      // Ignore the callback on already disposed images\n      if (this.$$disposed === true) {\n        return;\n      }\n\n      // Output a warning if the image could not loaded and quit\n      if (imageInfo.failed)\n      {\n        this.warn(\"Image could not be loaded: \" + source);\n        this.fireEvent(\"loadingFailed\");\n      }\n      else if (imageInfo.aborted)\n      {\n        // ignore the rest because it is aborted\n        return;\n      }\n      else\n      {\n        this.fireEvent(\"loaded\");\n      }\n      this._domUpdated();\n    },\n\n\n    /**\n     * Sets the source attribute of the image tag.\n     *\n     * @param source {String} Image source which was loaded\n     */\n    _setSource : function(source)\n    {\n      this._setAttribute(\"src\", source);\n    },\n\n\n    /**\n     * Sets the attribute draggable to the given value \"isDraggable\".\n     * @param isDraggable {Boolean} target value.\n     */\n    setDraggable : function(isDraggable) {\n      if(isDraggable){\n        this._setAttribute(\"draggable\", \"true\");\n      } else {\n        this._setAttribute(\"draggable\", \"false\");\n      }\n    }\n  },\n\n\n  defer : function(statics) {\n    statics.PLACEHOLDER_IMAGE = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n  },\n\n\n  destruct : function() {\n    qx.ui.mobile.basic.Image.ROOT.removeListener(\"changeAppScale\", this._onChangeAppScale, this);\n  }\n});\n"
  ]
}