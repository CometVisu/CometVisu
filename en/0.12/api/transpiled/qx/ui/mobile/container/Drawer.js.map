{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/mobile/container/Drawer.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "mobile",
    "container",
    "Composite",
    "construct",
    "parent",
    "layout",
    "setLayout",
    "initOrientation",
    "initPositionZ",
    "add",
    "core",
    "Init",
    "getApplication",
    "getRoot",
    "addListener",
    "_onBack",
    "__parent",
    "getLayoutParent",
    "addCssClass",
    "_onParentSwipe",
    "_onParentPointerDown",
    "__pointerStartPosition",
    "forceHide",
    "events",
    "resize",
    "properties",
    "defaultCssClass",
    "refine",
    "init",
    "orientation",
    "check",
    "apply",
    "size",
    "event",
    "hideOnParentTap",
    "hideOnBack",
    "tapOffset",
    "transitionDuration",
    "positionZ",
    "members",
    "__transitionEnabled",
    "__inTransition",
    "_applyOrientation",
    "value",
    "old",
    "removeCssClass",
    "_applySize",
    "getSize",
    "_applyPositionZ",
    "setTranslateX",
    "setTranslateY",
    "height",
    "width",
    "remSize",
    "getOrientation",
    "_setStyle",
    "_applyTransitionDuration",
    "show",
    "isHidden",
    "getPositionZ",
    "getTransitionDuration",
    "_enableTransition",
    "callArguments",
    "arguments",
    "transitionTarget",
    "_getTransitionTarget",
    "getContentElement",
    "listenerId",
    "bom",
    "Element",
    "evt",
    "_disableTransition",
    "removeListenerById",
    "setTimeout",
    "bind",
    "hide",
    "hasCssClass",
    "element",
    "Style",
    "set",
    "toggleVisibility",
    "triggeredByKeyEvent",
    "getData",
    "getHideOnBack",
    "preventDefault",
    "getViewportLeft",
    "getViewportTop",
    "isShown",
    "isHideOnParentTap",
    "location",
    "Location",
    "get",
    "getContainerElement",
    "right",
    "bottom",
    "top",
    "left",
    "direction",
    "getDirection",
    "getTapOffset",
    "destruct",
    "removeListener",
    "util",
    "DisposeUtil",
    "destroyContainer",
    "Drawer"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christopher Zuendorf (czuendorf)\n\n************************************************************************ */\n\n/**\n * Creates a drawer widget inside the given parent widget. The parent widget can\n * be assigned as a constructor argument. If no parent is set, the application's\n * root will be assumed as parent. A drawer widget can be assigned to left, right,\n * top or bottom edge of its parent by property <code>orientation</code>. The drawer floats\n * in on <code>show()</code> and floats out on <code>hide()</code>. Additionally the drawer is shown by\n * swiping in reverse direction on the parent edge to where the drawer is placed\n * to: Orientation: <code>left</code>, Swipe: <code>right</code> on parents edge: Drawer is shown etc.\n * The drawer is hidden when user taps the parent area outside of the drawer.\n * This behaviour can be deactivated by the property <code>hideOnParentTap</code>.\n *\n * <pre class='javascript'>\n *\n *  var drawer = new qx.ui.mobile.container.Drawer();\n *  drawer.setOrientation(\"right\");\n *  drawer.setTapOffset(100);\n *\n *  var button = new qx.ui.mobile.form.Button(\"A Button\");\n *  drawer.add(button);\n * </pre>\n *\n *\n */\nqx.Class.define(\"qx.ui.mobile.container.Drawer\",\n{\n  extend : qx.ui.mobile.container.Composite,\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param parent {qx.ui.mobile.container.Composite?null} The widget to which\n   * the drawer should be added, if null it is added to app root.\n   * @param layout {qx.ui.mobile.layout.Abstract?null} The layout that should be\n   * used for this container.\n   */\n  construct : function(parent, layout)\n  {\n    this.base(arguments);\n\n    if (layout) {\n      this.setLayout(layout);\n    }\n\n    this.initOrientation();\n    this.initPositionZ();\n\n    if (parent) {\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        this.assertInstance(parent, qx.ui.mobile.container.Composite);\n      }\n\n      parent.add(this);\n    } else {\n      qx.core.Init.getApplication().getRoot().add(this);\n    }\n\n    qx.core.Init.getApplication().addListener(\"back\", this._onBack, this);\n\n    this.__parent = this.getLayoutParent();\n    this.__parent.addCssClass(\"drawer-parent\");\n\n    this.__parent.addListener(\"swipe\", this._onParentSwipe,this);\n    this.__parent.addListener(\"pointerdown\", this._onParentPointerDown,this);\n\n    this.__pointerStartPosition = [0,0];\n\n    this.forceHide();\n  },\n\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events :\n  {\n    /**\n     * Fired when the drawer changes its size.\n     */\n    resize : \"qx.event.type.Data\"\n  },\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n  properties : {\n    // overridden\n    defaultCssClass : {\n      refine : true,\n      init : \"drawer\"\n    },\n\n\n    /** Property for setting the orientation of the drawer.\n     * Allowed values are: <code>left</code>,<code>right</code>,<code>top</code>,<code>bottom</code> */\n    orientation : {\n      check : \"String\",\n      init : \"left\",\n      apply : \"_applyOrientation\"\n    },\n\n\n    /** The size of the drawer in <code>px</code>. This value is interpreted as width if\n    * orientation is <code>left | right</code>, as height if orientation is\n    * <code>top | bottom</code>. */\n    size : {\n      check : \"Integer\",\n      init : 300,\n      apply : \"_applySize\",\n      event : \"resize\"\n    },\n\n\n    /** Indicates whether the drawer should hide when the parent area of it is tapped.  */\n    hideOnParentTap : {\n      check : \"Boolean\",\n      init : true\n    },\n\n\n    /**\n     * Indicates whether the drawer should hide when a back action appear form a key event.\n     */\n    hideOnBack :\n    {\n      check : \"Boolean\",\n      init : true\n    },\n\n\n    /** Sets the size of the tapping area, where the drawer reacts on swipes for opening itself. */\n    tapOffset : {\n      check : \"Integer\",\n      init : 20\n    },\n\n\n    /** The duration time of the transition between shown/hidden state in ms. */\n    transitionDuration : {\n      check : \"Integer\",\n      init : 500,\n      apply : \"_applyTransitionDuration\"\n    },\n\n\n    /** Sets the drawer zIndex position relative to its parent. */\n    positionZ : {\n      check : [ \"above\", \"below\"],\n      init : \"above\",\n      apply : \"_applyPositionZ\"\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n  members :\n  {\n    __pointerStartPosition : null,\n    __parent : null,\n    __transitionEnabled : null,\n    __inTransition : null,\n\n\n    // property apply\n    _applyOrientation : function(value, old) {\n      this.removeCssClass(old);\n      this.addCssClass(value);\n\n      // Reapply width of height size depending on orientation.\n      this._applySize(this.getSize());\n    },\n\n\n    // property apply\n    _applyPositionZ : function(value,old) {\n      this.removeCssClass(old);\n      this.addCssClass(value);\n\n      if(this.__parent) {\n        this.__parent.setTranslateX(0);\n        this.__parent.setTranslateY(0);\n      }\n    },\n\n\n    // property apply\n    _applySize : function(value) {\n      var height = null;\n      var width = null;\n\n      var remSize = (value / 16);\n\n      if (this.getOrientation() == \"left\" || this.getOrientation() == \"right\") {\n        width = remSize + \"rem\";\n      } else {\n        height = remSize + \"rem\";\n      }\n\n      this._setStyle(\"height\", height);\n      this._setStyle(\"width\", width);\n    },\n\n\n    // property apply\n    _applyTransitionDuration : function(value,old) {\n      this.__transitionEnabled = value > 0;\n    },\n\n\n    /**\n     * Shows the drawer.\n     */\n    show : function()\n    {\n      if(!this.isHidden() || this.__inTransition === true) {\n        return;\n      }\n\n      this.__inTransition = true;\n\n      // Make drawer visible before \"changeVisibility\" event is fired, after transition.\n      this._setStyle(\"visibility\", \"visible\");\n\n      this.__parent.addCssClass(\"blocked\");\n\n      if (this.getPositionZ() == \"below\") {\n        if (this.getOrientation() == \"left\") {\n          this.__parent.setTranslateX(this.getSize());\n        } else if (this.getOrientation() == \"right\") {\n          this.__parent.setTranslateX(-this.getSize());\n        } else if (this.getOrientation() == \"top\") {\n          this.__parent.setTranslateY(this.getSize());\n        } else if (this.getOrientation() == \"bottom\") {\n          this.__parent.setTranslateY(-this.getSize());\n        }\n      }\n\n      if (this.getTransitionDuration() > 0) {\n        this._enableTransition();\n\n        var callArguments = arguments;\n        var transitionTarget = this._getTransitionTarget().getContentElement();\n        var listenerId = qx.bom.Element.addListener(transitionTarget, \"transitionEnd\", function(evt) {\n          this.base(callArguments);\n          this._disableTransition();\n          this.__inTransition = false;\n          qx.bom.Element.removeListenerById(transitionTarget, listenerId);\n        }, this);\n\n        setTimeout(function() {\n          this.removeCssClass(\"hidden\");\n        }.bind(this), 0);\n      } else {\n        this.base(arguments);\n        this.__inTransition = false;\n        this.removeCssClass(\"hidden\");\n      }\n    },\n\n\n    /**\n     * Hides the drawer.\n     */\n    hide : function() {\n      if(this.isHidden() || this.__inTransition === true) {\n        return;\n      }\n\n      this.__inTransition = true;\n\n      if (this.getPositionZ() == \"below\") {\n        this.__parent.setTranslateX(0);\n        this.__parent.setTranslateY(0);\n      }\n\n      if (this.getTransitionDuration() > 0) {\n        this._enableTransition();\n\n        var callArguments = arguments;\n        var transitionTarget = this._getTransitionTarget().getContentElement();\n        var listenerId = qx.bom.Element.addListener(transitionTarget, \"transitionEnd\", function(evt) {\n          this.base(callArguments);\n          this._disableTransition();\n          this.__parent.removeCssClass(\"blocked\");\n          this.__inTransition = false;\n          qx.bom.Element.removeListenerById(transitionTarget, listenerId);\n        }, this);\n\n        setTimeout(function() {\n          this.addCssClass(\"hidden\");\n        }.bind(this), 0);\n      } else {\n        this.base(arguments);\n        this.addCssClass(\"hidden\");\n        this.__inTransition = false;\n        this.__parent.removeCssClass(\"blocked\");\n      }\n    },\n\n\n    /**\n     * Strict way to hide this drawer. Removes the blocker from the parent,\n     * and hides the drawer without any animation. Should be called when drawer's\n     * parent is animated and drawer should hide immediately.\n     */\n    forceHide : function() {\n      this._disableTransition();\n\n      if (this.getPositionZ() == \"below\") {\n        this.__parent.setTranslateX(0);\n        this.__parent.setTranslateY(0);\n      }\n\n      this.__parent.removeCssClass(\"blocked\");\n\n      this.addCssClass(\"hidden\");\n    },\n\n\n    // overridden\n    isHidden : function() {\n      return this.hasCssClass(\"hidden\");\n    },\n\n\n    /**\n     * Enables the transition on this drawer.\n     */\n    _enableTransition : function() {\n      qx.bom.element.Style.set(this._getTransitionTarget().getContentElement(), \"transition\", \"all \"+this.getTransitionDuration()+\"ms ease-in-out\");\n    },\n\n\n   /**\n     * Disables the transition on this drawer.\n     */\n    _disableTransition : function() {\n      qx.bom.element.Style.set(this._getTransitionTarget().getContentElement(),\"transition\", null);\n    },\n\n\n    /**\n    * Returns the target widget which is responsible for the transition handling.\n    * @return {qx.ui.mobile.core.Widget} the transition target widget.\n    */\n    _getTransitionTarget : function() {\n      if (this.getPositionZ() == \"below\") {\n        return this.__parent;\n      } else {\n        return this;\n      }\n    },\n\n\n    /**\n     * Toggle the visibility of the drawer.\n     * @return {Boolean} the new visibility state.\n     */\n    toggleVisibility : function() {\n      if(this.isHidden()) {\n        this.show();\n        return true;\n      } else {\n        this.hide();\n        return false;\n      }\n    },\n\n\n    /**\n     * Handles a back event which appears on the application.\n     *\n     * @param evt {qx.event.type.Data} The back event.\n     */\n    _onBack : function(evt)\n    {\n      var triggeredByKeyEvent = !!evt.getData();\n      if (triggeredByKeyEvent && !this.isHidden() && this.getHideOnBack())\n      {\n        evt.preventDefault();\n        this.hide();\n      }\n    },\n\n\n    /**\n     * Handles a tap on drawers' root.\n     * @param evt {qx.module.event.Pointer} Handled pointer event.\n     */\n    _onParentPointerDown : function(evt) {\n      this.__pointerStartPosition = [evt.getViewportLeft(),evt.getViewportTop()];\n\n      var isShown = !this.hasCssClass(\"hidden\");\n      if(isShown && this.isHideOnParentTap()) {\n        var location = qx.bom.element.Location.get(this.getContainerElement());\n        var orientation = this.getOrientation();\n        if (orientation == \"left\" && this.__pointerStartPosition[0] > location.right\n        || orientation == \"top\" && this.__pointerStartPosition[1] > location.bottom\n        || orientation == \"bottom\" && this.__pointerStartPosition[1] < location.top\n        || orientation == \"right\" && this.__pointerStartPosition[0] < location.left)\n        {\n          // First event on overlayed page should be ignored.\n          evt.preventDefault();\n\n          this.hide();\n        }\n      }\n    },\n\n\n    /**\n     * Handles a swipe on layout parent.\n     * @param evt {qx.module.event.Pointer} Handled pointer event.\n     */\n    _onParentSwipe : function(evt) {\n      var direction = evt.getDirection();\n      var isHidden = this.hasCssClass(\"hidden\");\n      if(isHidden) {\n        var location = qx.bom.element.Location.get(this.getContainerElement());\n\n        if (\n          (direction == \"right\"\n          && this.getOrientation() == \"left\"\n          && this.__pointerStartPosition[0] < location.right + this.getTapOffset()\n          && this.__pointerStartPosition[0] > location.right)\n          ||\n          (direction == \"left\"\n          && this.getOrientation() == \"right\"\n          && this.__pointerStartPosition[0] > location.left - this.getTapOffset()\n          && this.__pointerStartPosition[0] < location.left)\n          ||\n          (direction == \"down\"\n          && this.getOrientation() == \"top\"\n          && this.__pointerStartPosition[1] < this.getTapOffset() + location.bottom\n          && this.__pointerStartPosition[1] > location.bottom)\n          ||\n          (direction == \"up\"\n          && this.getOrientation() == \"bottom\"\n          && this.__pointerStartPosition[1] > location.top - this.getTapOffset()\n          && this.__pointerStartPosition[1] < location.top)\n        )\n        {\n          this.show();\n        }\n      }\n    }\n  },\n\n\n  destruct : function()\n  {\n    qx.core.Init.getApplication().removeListener(\"back\", this._onBack, this);\n\n    this.__parent.removeListener(\"swipe\", this._onParentSwipe, this);\n    this.__parent.removeListener(\"pointerdown\", this._onParentPointerDown, this);\n\n    qx.util.DisposeUtil.destroyContainer(this);\n\n    this.__pointerStartPosition = this.__parent = this.__transitionEnabled = null;\n  }\n});\n"
  ]
}