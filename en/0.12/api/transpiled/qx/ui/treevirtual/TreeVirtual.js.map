{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/treevirtual/TreeVirtual.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "table",
    "Table",
    "construct",
    "headings",
    "custom",
    "dataModel",
    "treevirtual",
    "SimpleTreeDataModel",
    "treeColumn",
    "undefined",
    "setTreeColumn",
    "treeDataCellRenderer",
    "SimpleTreeDataCellRenderer",
    "defaultDataCellRenderer",
    "DefaultDataCellRenderer",
    "dataRowRenderer",
    "SimpleTreeDataRowRenderer",
    "selectionManager",
    "obj",
    "SelectionManager",
    "tableColumnModel",
    "columnmodel",
    "Resize",
    "tablePaneScroller",
    "pane",
    "Scroller",
    "lang",
    "Type",
    "isString",
    "setColumns",
    "setTree",
    "addListener",
    "e",
    "getDataModel",
    "setData",
    "setColumnVisibilityButtonVisible",
    "length",
    "setRowHeight",
    "setMetaColumnCounts",
    "setOverflow",
    "stdcr",
    "ddcr",
    "tcm",
    "getTableColumnModel",
    "treeCol",
    "getTreeColumn",
    "i",
    "setDataCellRenderer",
    "setDataRowRenderer",
    "setCellEditorFactory",
    "celleditor",
    "NodeEditor",
    "setFocusCellOnPointerMove",
    "setShowCellFocusIndicator",
    "scrollers",
    "_getPaneScrollerArr",
    "setSelectBeforeFocus",
    "events",
    "statics",
    "SelectionMode",
    "NONE",
    "selection",
    "Model",
    "NO_SELECTION",
    "SINGLE",
    "SINGLE_SELECTION",
    "SINGLE_INTERVAL",
    "SINGLE_INTERVAL_SELECTION",
    "MULTIPLE_INTERVAL",
    "MULTIPLE_INTERVAL_SELECTION",
    "MULTIPLE_INTERVAL_TOGGLE",
    "MULTIPLE_INTERVAL_SELECTION_TOGGLE",
    "properties",
    "openCloseClickSelectsRow",
    "check",
    "init",
    "appearance",
    "refine",
    "allowNodeEdit",
    "members",
    "getTableModel",
    "setUseTreeLines",
    "b",
    "dcr",
    "getDataCellRenderer",
    "hasListener",
    "data",
    "firstRow",
    "lastRow",
    "getRowCount",
    "firstColumn",
    "lastColumn",
    "getColumnCount",
    "fireDataEvent",
    "getUseTreeLines",
    "setAlwaysShowOpenCloseSymbol",
    "setExcludeFirstLevelTreeLines",
    "getExcludeFirstLevelTreeLines",
    "getAlwaysShowOpenCloseSymbol",
    "getOpenCloseButtonPosition",
    "node",
    "rowPos",
    "columnPositions",
    "_getColToXPosMap",
    "left",
    "bom",
    "element",
    "Location",
    "getLeft",
    "getContentElement",
    "getDomElement",
    "visX",
    "getColumnWidth",
    "setSelectionMode",
    "mode",
    "getSelectionModel",
    "getSelectionMode",
    "getHierarchy",
    "nodeReference",
    "_this",
    "components",
    "nodeId",
    "Error",
    "addHierarchy",
    "getData",
    "unshift",
    "label",
    "parentNodeId",
    "getSelectedNodes",
    "_onKeyDown",
    "evt",
    "getEnabled",
    "identifier",
    "getKeyIdentifier",
    "consumed",
    "modifiers",
    "getModifiers",
    "dm",
    "focusedCol",
    "getFocusedColumn",
    "focusedRow",
    "getFocusedRow",
    "getNode",
    "bHideOpenClose",
    "type",
    "LEAF",
    "setState",
    "bOpened",
    "moveFocusedCell",
    "event",
    "Dom",
    "CTRL_MASK",
    "BRANCH",
    "setFocusedCell",
    "SHIFT_MASK",
    "rowIndex",
    "getRowFromNodeId",
    "_focusedCol",
    "children",
    "preventDefault",
    "stopPropagation",
    "_onSelectionChanged",
    "_clearSelections",
    "TreeVirtual",
    "selectedNodes",
    "_calculateSelectedNodes",
    "stdcm",
    "selectedRanges",
    "getSelectedRanges",
    "j",
    "minIndex",
    "maxIndex",
    "bSelected",
    "push",
    "s"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,+BAAhB,EACA;AACEC,IAAAA,MAAM,EAAGN,EAAE,CAACO,EAAH,CAAMC,KAAN,CAAYC,KADvB;;AAME;AACF;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,SAAS,EAAG,mBAASC,QAAT,EAAmBC,MAAnB,EACZ;AACE;AACA;AACA;AACA,UAAI,CAAEA,MAAN,EACA;AACEA,QAAAA,MAAM,GAAG,EAAT;AACD;;AAED,UAAI,CAAEA,MAAM,CAACC,SAAb,EACA;AACED,QAAAA,MAAM,CAACC,SAAP,GACE,IAAIb,EAAE,CAACO,EAAH,CAAMO,WAAN,CAAkBC,mBAAtB,EADF;AAED;;AAED,UAAIH,MAAM,CAACI,UAAP,KAAsBC,SAA1B,EACA;AACEL,QAAAA,MAAM,CAACI,UAAP,GAAoB,CAApB;AACAJ,QAAAA,MAAM,CAACC,SAAP,CAAiBK,aAAjB,CAA+BN,MAAM,CAACI,UAAtC;AACD;;AAED,UAAI,CAAEJ,MAAM,CAACO,oBAAb,EACA;AACEP,QAAAA,MAAM,CAACO,o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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007 Derrell Lipman\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Derrell Lipman (derrell)\n\n************************************************************************ */\n\n/**\n * A \"virtual\" tree\n * <p>\n *   A number of convenience methods are available in the following mixins:\n *   <ul>\n *     <li>{@link qx.ui.treevirtual.MNode}</li>\n *     <li>{@link qx.ui.treevirtual.MFamily}</li>\n *   </ul>\n * </p>\n */\nqx.Class.define(\"qx.ui.treevirtual.TreeVirtual\",\n{\n  extend : qx.ui.table.Table,\n\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param headings {Array | String}\n   *   An array containing a list of strings, one for each column, representing\n   *   the headings for each column.  As a special case, if only one column is\n   *   to exist, the string representing its heading need not be enclosed in an\n   *   array.\n   *\n   * @param custom {Map ? null}\n   *   A map provided (typically) by subclasses, to override the various\n   *   supplemental classes allocated within this constructor.  For normal\n   *   usage, this parameter may be omitted.  Each property must be an object\n   *   instance or a function which returns an object instance, as indicated by\n   *   the defaults listed here:\n   *\n   *   <dl>\n   *     <dt>initiallyHiddenColumns</dt>\n   *       <dd>\n   *         {Array?}\n   *         A list of column numbers that should be initially invisible. Any\n   *         column not mentioned will be initially visible, and if no array\n   *         is provided, all columns will be initially visible.\n   *       </dd>\n   *     <dt>dataModel</dt>\n   *       <dd>new qx.ui.treevirtual.SimpleTreeDataModel()</dd>\n   *     <dt>treeDataCellRenderer</dt>\n   *       <dd>\n   *         Instance of {@link qx.ui.treevirtual.SimpleTreeDataCellRenderer}.\n   *         Custom data cell renderer for the tree column.\n   *       </dd>\n   *     <dt>treeColumn</dt>\n   *       <dd>\n   *         The column number in which the tree is to reside, i.e., which\n   *         column uses the SimpleTreeDataCellRenderer or a subclass of it.\n   *       </dd>\n   *     <dt>defaultDataCellRenderer</dt>\n   *       <dd>\n   *         Instance of {@link qx.ui.treevirtual.DefaultDataCellRenderer}.\n   *         Custom data cell renderer for all columns other than the tree\n   *         column.\n   *       </dd>\n   *     <dt>dataRowRenderer</dt>\n   *       <dd>new qx.ui.treevirtual.SimpleTreeDataRowRenderer()</dd>\n   *     <dt>selectionManager</dt>\n   *       <dd><pre class='javascript'>\n   *         function(obj)\n   *         {\n   *           return new qx.ui.treevirtual.SelectionManager(obj);\n   *         }\n   *       </pre></dd>\n   *     <dt>tableColumnModel</dt>\n   *       <dd><pre class='javascript'>\n   *         function(obj)\n   *         {\n   *           return new qx.ui.table.columnmodel.Resize(obj);\n   *         }\n   *       </pre></dd>\n   *     <dt>tablePaneScroller</dt>\n   *       <dd>\n   *         Instance of {@link qx.ui.treevirtual.pane.Scroller}.\n   *         Custom table pane scroller for the tree\n   *         <pre class='javascript'>\n   *         function(obj)\n   *         {\n   *           return new qx.ui.table.columnmodel.Resize(obj);\n   *         }\n   *       </pre>\n   *       </dd>\n   *   </dl>\n   */\n  construct : function(headings, custom)\n  {\n    //\n    // Allocate default objects if custom objects are not specified\n    //\n    if (! custom)\n    {\n      custom = { };\n    }\n\n    if (! custom.dataModel)\n    {\n      custom.dataModel =\n        new qx.ui.treevirtual.SimpleTreeDataModel();\n    }\n\n    if (custom.treeColumn === undefined)\n    {\n      custom.treeColumn = 0;\n      custom.dataModel.setTreeColumn(custom.treeColumn);\n    }\n\n    if (! custom.treeDataCellRenderer)\n    {\n      custom.treeDataCellRenderer =\n        new qx.ui.treevirtual.SimpleTreeDataCellRenderer();\n    }\n\n    if (! custom.defaultDataCellRenderer)\n    {\n      custom.defaultDataCellRenderer =\n        new qx.ui.treevirtual.DefaultDataCellRenderer();\n    }\n\n    if (! custom.dataRowRenderer)\n    {\n      custom.dataRowRenderer =\n        new qx.ui.treevirtual.SimpleTreeDataRowRenderer();\n    }\n\n    if (! custom.selectionManager)\n    {\n      custom.selectionManager =\n        function(obj)\n        {\n          return new qx.ui.treevirtual.SelectionManager(obj);\n        };\n    }\n\n    if (! custom.tableColumnModel)\n    {\n      custom.tableColumnModel =\n        function(obj)\n        {\n          return new qx.ui.table.columnmodel.Resize(obj);\n        };\n    }\n\n    if (!custom.tablePaneScroller) {\n      custom.tablePaneScroller = function(obj) {\n        return new qx.ui.treevirtual.pane.Scroller(obj);\n      };\n    }\n\n    // Specify the column headings.  We accept a single string (one single\n    // column) or an array of strings (one or more columns).\n    if (qx.lang.Type.isString(headings)) {\n      headings = [ headings ];\n    }\n\n    custom.dataModel.setColumns(headings);\n    custom.dataModel.setTreeColumn(custom.treeColumn);\n\n    // Save a reference to the tree with the data model\n    custom.dataModel.setTree(this);\n\n    // Call our superclass constructor\n    this.base(arguments, custom.dataModel, custom);\n\n    // Arrange to redisplay edited data following editing\n    this.addListener(\"dataEdited\",\n                     function(e)\n                     {\n                       this.getDataModel().setData();\n                     },\n                     this);\n\n    // By default, present the column visibility button only if there are\n    // multiple columns.\n    this.setColumnVisibilityButtonVisible(headings.length > 1);\n\n    // Set sizes\n    this.setRowHeight(16);\n    this.setMetaColumnCounts(headings.length > 1 ? [ 1, -1 ] : [ 1 ]);\n\n    // Overflow on trees is always hidden.  The internal elements scroll.\n    this.setOverflow(\"hidden\");\n\n    // Set the data cell render.  We use the SimpleTreeDataCellRenderer for the\n    // tree column, and our DefaultDataCellRenderer for all other columns.\n    var stdcr = custom.treeDataCellRenderer;\n    var ddcr = custom.defaultDataCellRenderer;\n    var tcm = this.getTableColumnModel();\n    var treeCol = this.getDataModel().getTreeColumn();\n\n    for (var i=0; i<headings.length; i++)\n    {\n      tcm.setDataCellRenderer(i, i == treeCol ? stdcr : ddcr);\n    }\n\n    // Set the data row renderer.\n    this.setDataRowRenderer(custom.dataRowRenderer);\n\n    // Set the editor for the tree column, for use if allowNodeEdit is true\n    tcm.setCellEditorFactory(treeCol, new qx.ui.treevirtual.celleditor.NodeEditor());\n\n    // Move the focus with the mouse.  This controls the ROW focus indicator.\n    this.setFocusCellOnPointerMove(true);\n\n    // In a tree we don't typically want a visible cell focus indicator\n    this.setShowCellFocusIndicator(false);\n\n    // Get the list of pane scrollers\n    var scrollers = this._getPaneScrollerArr();\n\n    // For each scroller...\n    for (var i=0; i<scrollers.length; i++)\n    {\n      // Set the pane scrollers to handle the selection before\n      // displaying the focus, so we can manipulate the selected icon.\n      scrollers[i].setSelectBeforeFocus(true);\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events :\n  {\n    /**\n     * Fired when a tree branch which already has content is opened.\n     *\n     * Event data: the node object from the data model (of the node\n     * being opened) as described in\n     * {@link qx.ui.treevirtual.SimpleTreeDataModel}\n     */\n    \"treeOpenWithContent\" : \"qx.event.type.Data\",\n\n    /**\n     * Fired when an empty tree branch is opened.\n     *\n     * Event data: the node object from the data model (of the node\n     * being opened) as described in\n     * {@link qx.ui.treevirtual.SimpleTreeDataModel}\n     */\n    \"treeOpenWhileEmpty\"  : \"qx.event.type.Data\",\n\n    /**\n     * Fired when a tree branch is closed.\n     *\n     * Event data: the node object from the data model (of the node\n     * being closed) as described in\n     * {@link qx.ui.treevirtual.SimpleTreeDataModel}\n     */\n    \"treeClose\"           : \"qx.event.type.Data\",\n\n    /**\n     * Fired when the selected rows change.\n     *\n     * Event data: An array of node objects (the selected rows' nodes)\n     * from the data model.  Each node object is described in\n     * {@link qx.ui.treevirtual.SimpleTreeDataModel}\n     */\n    \"changeSelection\"     : \"qx.event.type.Data\"\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /**\n     * Selection Modes {int}\n     *\n     *   NONE\n     *     Nothing can ever be selected.\n     *\n     *   SINGLE\n     *     Allow only one selected item.\n     *\n     *   SINGLE_INTERVAL\n     *     Allow one contiguous interval of selected items.\n     *\n     *   MULTIPLE_INTERVAL\n     *     Allow any set of selected items, whether contiguous or not.\n     *\n     *   MULTIPLE_INTERVAL_TOGGLE\n     *     Like MULTIPLE_INTERVAL, but clicking on an item toggles its selection state.\n     */\n    SelectionMode :\n    {\n      NONE :\n        qx.ui.table.selection.Model.NO_SELECTION,\n      SINGLE :\n        qx.ui.table.selection.Model.SINGLE_SELECTION,\n      SINGLE_INTERVAL :\n        qx.ui.table.selection.Model.SINGLE_INTERVAL_SELECTION,\n      MULTIPLE_INTERVAL :\n        qx.ui.table.selection.Model.MULTIPLE_INTERVAL_SELECTION,\n      MULTIPLE_INTERVAL_TOGGLE :\n        qx.ui.table.selection.Model.MULTIPLE_INTERVAL_SELECTION_TOGGLE\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties :\n  {\n    /**\n     * Whether a click on the open/close button should also cause selection of\n     * the row.\n     */\n    openCloseClickSelectsRow :\n    {\n      check : \"Boolean\",\n      init : false\n    },\n\n    appearance :\n    {\n      refine : true,\n      init : \"treevirtual\"\n    },\n\n    allowNodeEdit :\n    {\n      check: \"Boolean\",\n      init: false\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    /**\n     * Return the data model for this tree.\n     *\n     * @return {qx.ui.table.ITableModel} The data model.\n     */\n    getDataModel : function()\n    {\n      return this.getTableModel();\n    },\n\n\n    /**\n     * Set whether lines linking tree children shall be drawn on the tree.\n     * Note that not all themes support tree lines.  As of the time of this\n     * writing, the Classic theme supports tree lines (and uses +/- icons\n     * which lend themselves to tree lines), while the Modern theme, which\n     * uses right-facing and downward-facing arrows instead of +/-, does not.\n     *\n     * @param b {Boolean}\n     *   <i>true</i> if tree lines should be shown; <i>false</i> otherwise.\n     *\n     */\n    setUseTreeLines : function(b)\n    {\n      var dataModel = this.getDataModel();\n      var treeCol = dataModel.getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      dcr.setUseTreeLines(b);\n\n      // Inform the listeners\n      if (dataModel.hasListener(\"dataChanged\"))\n      {\n        var data =\n        {\n          firstRow    : 0,\n          lastRow     : dataModel.getRowCount() - 1,\n          firstColumn : 0,\n          lastColumn  : dataModel.getColumnCount() - 1\n        };\n\n        dataModel.fireDataEvent(\"dataChanged\", data);\n      }\n    },\n\n\n    /**\n     * Get whether lines linking tree children shall be drawn on the tree.\n     *\n     * @return {Boolean}\n     *   <i>true</i> if tree lines are in use;\n     *   <i>false</i> otherwise.\n     */\n    getUseTreeLines : function()\n    {\n      var treeCol = this.getDataModel().getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      return dcr.getUseTreeLines();\n    },\n\n\n    /**\n     * Set whether the open/close button should be displayed on a branch,\n     * even if the branch has no children.\n     *\n     * @param b {Boolean}\n     *   <i>true</i> if the open/close button should be shown;\n     *   <i>false</i> otherwise.\n     *\n     */\n    setAlwaysShowOpenCloseSymbol : function(b)\n    {\n      var dataModel = this.getDataModel();\n      var treeCol = dataModel.getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      dcr.setAlwaysShowOpenCloseSymbol(b);\n\n      // Inform the listeners\n      if (dataModel.hasListener(\"dataChanged\"))\n      {\n        var data =\n        {\n          firstRow    : 0,\n          lastRow     : dataModel.getRowCount() - 1,\n          firstColumn : 0,\n          lastColumn  : dataModel.getColumnCount() - 1\n        };\n\n        dataModel.fireDataEvent(\"dataChanged\", data);\n      }\n    },\n\n\n    /**\n     * Set whether drawing of first-level tree-node lines are disabled even\n     * if drawing of tree lines is enabled.\n     *\n     * @param b {Boolean}\n     *   <i>true</i> if first-level tree lines should be disabled;\n     *   <i>false</i> for normal operation.\n     *\n     */\n    setExcludeFirstLevelTreeLines : function(b)\n    {\n      var dataModel = this.getDataModel();\n      var treeCol = dataModel.getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      dcr.setExcludeFirstLevelTreeLines(b);\n\n      // Inform the listeners\n      if (dataModel.hasListener(\"dataChanged\"))\n      {\n        var data =\n        {\n          firstRow    : 0,\n          lastRow     : dataModel.getRowCount() - 1,\n          firstColumn : 0,\n          lastColumn  : dataModel.getColumnCount() - 1\n        };\n\n        dataModel.fireDataEvent(\"dataChanged\", data);\n      }\n    },\n\n\n    /**\n     * Get whether drawing of first-level tree lines should be disabled even\n     * if drawing of tree lines is enabled.\n     * (See also {@link #getUseTreeLines})\n     *\n     * @return {Boolean}\n     *   <i>true</i> if tree lines are in use;\n     *   <i>false</i> otherwise.\n     */\n    getExcludeFirstLevelTreeLines : function()\n    {\n      var treeCol = this.getDataModel().getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      return dcr.getExcludeFirstLevelTreeLines();\n    },\n\n\n    /**\n     * Set whether the open/close button should be displayed on a branch,\n     * even if the branch has no children.\n     *\n     * @return {Boolean}\n     *   <i>true</i> if tree lines are in use;\n     *   <i>false</i> otherwise.\n     */\n    getAlwaysShowOpenCloseSymbol : function()\n    {\n      var treeCol = this.getDataModel().getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      return dcr.getAlwaysShowOpenCloseSymbol();\n    },\n\n\n    /**\n     * Returns the position of the open/close button for a node\n     *\n     * @return {Object} The position of the open/close button within the tree row\n     */\n    getOpenCloseButtonPosition : function(node)\n    {\n      var treeCol = this.getDataModel().getTreeColumn();\n      var dcr = this.getTableColumnModel().getDataCellRenderer(treeCol);\n      var rowPos = dcr.getOpenCloseButtonPosition(this, node);\n\n      // Get the order of the columns\n      var tcm = this.getTableColumnModel();\n      var columnPositions = tcm._getColToXPosMap();\n\n      // Calculate the position of the beginning of the tree column\n      var left = qx.bom.element.Location.getLeft(this.getContentElement().getDomElement());\n      for (var i=0; i<columnPositions[treeCol].visX; i++) {\n        left += tcm.getColumnWidth(columnPositions[i].visX);\n      }\n      rowPos.left += left;\n      return rowPos;\n    },\n\n\n    /**\n     * Set the selection mode.\n     *\n     * @param mode {Integer}\n     *   The selection mode to be used.  It may be any of:\n     *     <pre>\n     *       qx.ui.treevirtual.TreeVirtual.SelectionMode.NONE:\n     *          Nothing can ever be selected.\n     *\n     *       qx.ui.treevirtual.TreeVirtual.SelectionMode.SINGLE\n     *          Allow only one selected item.\n     *\n     *       qx.ui.treevirtual.TreeVirtual.SelectionMode.SINGLE_INTERVAL\n     *          Allow one contiguous interval of selected items.\n     *\n     *       qx.ui.treevirtual.TreeVirtual.SelectionMode.MULTIPLE_INTERVAL\n     *          Allow any selected items, whether contiguous or not.\n     *     </pre>\n     *\n     */\n    setSelectionMode : function(mode)\n    {\n      this.getSelectionModel().setSelectionMode(mode);\n    },\n\n\n    /**\n     * Get the selection mode currently in use.\n     *\n     * @return {Integer}\n     *   One of the values documented in {@link #setSelectionMode}\n     */\n    getSelectionMode : function()\n    {\n      return this.getSelectionModel().getSelectionMode();\n    },\n\n\n    /**\n     * Obtain the entire hierarchy of labels from the root down to the\n     * specified node.\n     *\n     * @param nodeReference {Object | Integer}\n     *   The node for which the hierarchy is desired.  The node can be\n     *   represented either by the node object, or the node id (as would have\n     *   been returned by addBranch(), addLeaf(), etc.)\n     *\n     * @return {Array}\n     *   The returned array contains one string for each label in the\n     *   hierarchy of the node specified by the parameter.  Element 0 of the\n     *   array contains the label of the root node, element 1 contains the\n     *   label of the node immediately below root in the specified node's\n     *   hierarchy, etc., down to the last element in the array contain the\n     *   label of the node referenced by the parameter.\n     */\n    getHierarchy : function(nodeReference)\n    {\n      var _this = this;\n      var components = [];\n      var node;\n      var nodeId;\n\n      if (typeof(nodeReference) == \"object\")\n      {\n        node = nodeReference;\n        nodeId = node.nodeId;\n      }\n      else if (typeof(nodeReference) == \"number\")\n      {\n        nodeId = nodeReference;\n      }\n      else\n      {\n        throw new Error(\"Expected node object or node id\");\n      }\n\n      function addHierarchy(nodeId)\n      {\n        // If we're at the root...\n        if (! nodeId)\n        {\n          // ... then we're done\n          return ;\n        }\n\n        // Get the requested node\n        var node = _this.getDataModel().getData()[nodeId];\n\n        // Add its label to the hierarchy components\n        components.unshift(node.label);\n\n        // Call recursively to our parent node.\n        addHierarchy(node.parentNodeId);\n      }\n\n      addHierarchy(nodeId);\n      return components;\n    },\n\n\n    /**\n     * Return the nodes that are currently selected.\n     *\n     * @return {Array}\n     *   An array containing the nodes that are currently selected.\n     */\n    getSelectedNodes : function()\n    {\n      return this.getDataModel().getSelectedNodes();\n    },\n\n\n    /**\n     * Event handler. Called when a key was pressed.\n     *\n     * We handle the Enter key to toggle opened/closed tree state.  All\n     * other keydown events are passed to our superclass.\n     *\n     * @param evt {Map}\n     *   The event.\n     *\n     */\n    _onKeyDown : function(evt)\n    {\n      if (!this.getEnabled())\n      {\n        return;\n      }\n\n      var identifier = evt.getKeyIdentifier();\n\n      var consumed = false;\n      var modifiers = evt.getModifiers();\n\n      if (modifiers == 0)\n      {\n        switch(identifier)\n        {\n          case \"Enter\":\n            // Get the data model\n            var dm = this.getDataModel();\n\n            var focusedCol = this.getFocusedColumn();\n            var treeCol = dm.getTreeColumn();\n\n            if (focusedCol == treeCol)\n            {\n              // Get the focused node\n              var focusedRow = this.getFocusedRow();\n              var node = dm.getNode(focusedRow);\n\n              if (! node.bHideOpenClose &&\n                  node.type != qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF)\n              {\n                dm.setState(node, { bOpened : ! node.bOpened });\n              }\n\n              consumed = true;\n            }\n            break;\n\n          case \"Left\":\n            this.moveFocusedCell(-1, 0);\n            break;\n\n          case \"Right\":\n            this.moveFocusedCell(1, 0);\n            break;\n        }\n      }\n      else if (modifiers == qx.event.type.Dom.CTRL_MASK)\n      {\n        switch(identifier)\n        {\n          case \"Left\":\n            // Get the data model\n            var dm = this.getDataModel();\n\n            // Get the focused node\n            var focusedRow = this.getFocusedRow();\n            var treeCol = dm.getTreeColumn();\n            var node = dm.getNode(focusedRow);\n\n            // If it's an open branch and open/close is allowed...\n            if ((node.type ==\n                 qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH) &&\n                ! node.bHideOpenClose &&\n                node.bOpened)\n            {\n              // ... then close it\n              dm.setState(node, { bOpened : ! node.bOpened });\n            }\n\n            // Reset the focus to the current node\n            this.setFocusedCell(treeCol, focusedRow, true);\n\n            consumed = true;\n            break;\n\n          case \"Right\":\n            // Get the data model\n            var dm = this.getDataModel();\n\n            // Get the focused node\n            focusedRow = this.getFocusedRow();\n            treeCol = dm.getTreeColumn();\n            node = dm.getNode(focusedRow);\n\n            // If it's a closed branch and open/close is allowed...\n            if ((node.type ==\n                 qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH) &&\n                ! node.bHideOpenClose &&\n                ! node.bOpened)\n            {\n              // ... then open it\n              dm.setState(node, { bOpened : ! node.bOpened });\n            }\n\n            // Reset the focus to the current node\n            this.setFocusedCell(treeCol, focusedRow, true);\n\n            consumed = true;\n            break;\n        }\n      }\n      else if (modifiers == qx.event.type.Dom.SHIFT_MASK)\n      {\n        switch(identifier)\n        {\n          case \"Left\":\n            // Get the data model\n            var dm = this.getDataModel();\n\n            // Get the focused node\n            var focusedRow = this.getFocusedRow();\n            var treeCol = dm.getTreeColumn();\n            var node = dm.getNode(focusedRow);\n\n            // If we're not at the top-level already...\n            if (node.parentNodeId)\n            {\n              // Find out what rendered row our parent node is at\n              var rowIndex = dm.getRowFromNodeId(node.parentNodeId);\n\n              // Set the focus to our parent\n              this.setFocusedCell(this._focusedCol, rowIndex, true);\n            }\n\n            consumed = true;\n            break;\n\n          case \"Right\":\n            // Get the data model\n            var dm = this.getDataModel();\n\n            // Get the focused node\n            focusedRow = this.getFocusedRow();\n            treeCol = dm.getTreeColumn();\n            node = dm.getNode(focusedRow);\n\n            // If we're on a branch and open/close is allowed...\n            if ((node.type ==\n                 qx.ui.treevirtual.SimpleTreeDataModel.Type.BRANCH) &&\n                ! node.bHideOpenClose)\n            {\n              // ... then first ensure the branch is open\n              if (! node.bOpened)\n              {\n                dm.setState(node, { bOpened : ! node.bOpened });\n              }\n\n              // If this node has children...\n              if (node.children.length > 0)\n              {\n                // ... then move the focus to the first child\n                this.moveFocusedCell(0, 1);\n              }\n            }\n\n            consumed = true;\n            break;\n        }\n      }\n\n      // Was this one of our events that we handled?\n      if (consumed)\n      {\n        // Yup.  Don't propagate it.\n        evt.preventDefault();\n        evt.stopPropagation();\n      }\n      else\n      {\n        // It's not one of ours.  Let our superclass handle this event\n        this.base(arguments, evt);\n      }\n    },\n\n\n    /**\n     * Event handler. Called when the selection has changed.\n     *\n     * @param evt {Map}\n     *   The event.\n     *\n     */\n    _onSelectionChanged : function(evt)\n    {\n      // Clear the old list of selected nodes\n      this.getDataModel()._clearSelections();\n\n      // If selections are allowed, pass an event to our listeners\n      if (this.getSelectionMode() !=\n          qx.ui.treevirtual.TreeVirtual.SelectionMode.NONE)\n      {\n        var selectedNodes = this._calculateSelectedNodes();\n\n        // Get the now-focused\n        this.fireDataEvent(\"changeSelection\", selectedNodes);\n      }\n\n      // Call the superclass method\n      this.base(arguments, evt);\n    },\n\n\n    /**\n     * Calculate and return the set of nodes which are currently selected by\n     * the user, on the screen.  In the process of calculating which nodes\n     * are selected, the nodes corresponding to the selected rows on the\n     * screen are marked as selected by setting their <i>bSelected</i>\n     * property to true, and all previously-selected nodes have their\n     * <i>bSelected</i> property reset to false.\n     *\n     * @return {Array}\n     *   An array of nodes matching the set of rows which are selected on the\n     *   screen.\n     */\n    _calculateSelectedNodes : function()\n    {\n      // Create an array of nodes that are now selected\n      var stdcm = this.getDataModel();\n      var selectedRanges = this.getSelectionModel().getSelectedRanges();\n      var selectedNodes = [];\n      var node;\n\n      for (var i=0;\n           i<selectedRanges.length;\n           i++)\n      {\n        for (var j=selectedRanges[i].minIndex;\n             j<=selectedRanges[i].maxIndex;\n             j++)\n        {\n          node = stdcm.getNode(j);\n          stdcm.setState(node, { bSelected : true });\n          selectedNodes.push(node);\n        }\n      }\n\n      return selectedNodes;\n    },\n\n\n    /**\n     * Set the overflow mode.\n     *\n     * @param s {String}\n     *   Overflow mode.  The only allowable mode is \"hidden\".\n     *\n     *\n     * @throws {Error}\n     *   Error if tree overflow mode is other than \"hidden\"\n     */\n    setOverflow : function(s)\n    {\n      if (s != \"hidden\")\n      {\n        throw new Error(\"Tree overflow must be hidden.  \" +\n                        \"The internal elements of it will scroll.\");\n      }\n    }\n  }\n});\n"
  ]
}