{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/basic/Image.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "source",
    "__contentElements",
    "setSource",
    "properties",
    "check",
    "init",
    "nullable",
    "event",
    "apply",
    "themeable",
    "scale",
    "forceRatio",
    "allowScaleUp",
    "appearance",
    "refine",
    "allowShrinkX",
    "allowShrinkY",
    "allowGrowX",
    "allowGrowY",
    "events",
    "loadingFailed",
    "loaded",
    "aborted",
    "statics",
    "PLACEHOLDER_IMAGE",
    "members",
    "__width",
    "__height",
    "__mode",
    "__currentContentElement",
    "__wrapper",
    "__requestId",
    "_onChangeTheme",
    "_styleSource",
    "getContentElement",
    "__getSuitableContentElement",
    "_createContentElement",
    "_getContentHint",
    "width",
    "height",
    "_applyDecorator",
    "value",
    "old",
    "getSource",
    "util",
    "AliasManager",
    "getInstance",
    "resolve",
    "el",
    "getChild",
    "__setSource",
    "_applyTextColor",
    "__getMode",
    "setStyle",
    "theme",
    "manager",
    "Color",
    "removeStyle",
    "_applyPadding",
    "name",
    "element",
    "setStyles",
    "top",
    "getPaddingTop",
    "left",
    "getPaddingLeft",
    "setPadding",
    "renderLayout",
    "getPaddingRight",
    "getPaddingBottom",
    "_applyEnabled",
    "_applySource",
    "io",
    "ImageLoader",
    "isLoading",
    "abort",
    "_applyScale",
    "__setMode",
    "mode",
    "lang",
    "String",
    "startsWith",
    "isPng",
    "endsWith",
    "getScale",
    "Environment",
    "get",
    "__createSuitableContentElement",
    "tagName",
    "clazz",
    "html",
    "Image",
    "Label",
    "connectWidget",
    "setRich",
    "setScale",
    "wrapper",
    "Element",
    "add",
    "$$disposed",
    "ResourceManager",
    "__resetSource",
    "__checkForContentElementSwitch",
    "parseInt",
    "repeat",
    "tagNameHint",
    "bom",
    "Decoration",
    "getTagName",
    "contentEl",
    "__getContentElement",
    "isFontUri",
    "__setManagedImage",
    "color",
    "getTextColor",
    "Type",
    "isString",
    "has",
    "highResolutionSource",
    "findHighResolutionSource",
    "imageWidth",
    "getImageWidth",
    "imageHeight",
    "getImageHeight",
    "setWidth",
    "setHeight",
    "backgroundSize",
    "__fireLoadEvent",
    "isLoaded",
    "__setUnmanagedImage",
    "__loadUnmanagedImage",
    "AnimationFrame",
    "request",
    "rId",
    "fireEvent",
    "bind",
    "select",
    "alphaImageLoader",
    "isFont",
    "__checkForContentElementReplacement",
    "elementToAdd",
    "currentContentElement",
    "pixel",
    "styles",
    "currentStyles",
    "getAllStyles",
    "prop",
    "backgroundImage",
    "bounds",
    "getBounds",
    "insets",
    "getInsets",
    "getStyle",
    "zIndex",
    "newEl",
    "setSelectable",
    "getSelectable",
    "isVisible",
    "hide",
    "show",
    "isIncluded",
    "exclude",
    "include",
    "container",
    "getParent",
    "index",
    "getChildren",
    "indexOf",
    "removeAt",
    "addAt",
    "hint",
    "getNodeName",
    "setValue",
    "currentEl",
    "setAttribute",
    "getAttribute",
    "flush",
    "currentDomEl",
    "getDomElement",
    "newDomEl",
    "listeners",
    "getListeners",
    "forEach",
    "listenerData",
    "addListener",
    "type",
    "handler",
    "self",
    "capture",
    "currentHash",
    "$$hash",
    "getEnabled",
    "disabled",
    "replace",
    "addState",
    "removeState",
    "split",
    "getSizeHint",
    "getWidth",
    "getHeight",
    "font",
    "Font",
    "match",
    "size",
    "getSize",
    "__updateContentHint",
    "_applyDimension",
    "isFailed",
    "load",
    "__loaderCallback",
    "resetSource",
    "resetValue",
    "sparts",
    "fontSource",
    "length",
    "fontStyles",
    "Object",
    "clone",
    "getStyles",
    "resource",
    "getData",
    "fromCharCode",
    "charCode",
    "decorator",
    "getDecorator",
    "hasGradient",
    "getStartColor",
    "getEndColor",
    "hasBackground",
    "getBackgroundImage",
    "attr",
    "getAttributes",
    "decoratorStyle",
    "combinedStyles",
    "style",
    "backgroundPosition",
    "backgroundRepeat",
    "getBackgroundRepeat",
    "imageInfo",
    "failed",
    "warn",
    "undefined",
    "_recalc",
    "queue",
    "Layout",
    "originalWidth",
    "originalHeight",
    "maxWidth",
    "getMaxWidth",
    "maxHeight",
    "getMaxHeight",
    "minWidth",
    "getMinWidth",
    "minHeight",
    "getMinHeight",
    "ratio",
    "getForceRatio",
    "isAllowScaleUp",
    "Math",
    "round",
    "destruct",
    "hasOwnProperty",
    "disconnectWidget",
    "_disposeMap",
    "basic"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Sebastian Werner (wpbasti)\n\n************************************************************************ */\n\n/**\n * The image class displays an image file\n *\n * This class supports image clipping, which means that multiple images can be combined\n * into one large image and only the relevant part is shown.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.basic.Image(\"icon/32/actions/format-justify-left.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>icon/32/actions/format-justify-left.png</code>.\n *\n * *External Documentation*\n *\n * <a href='http://qooxdoo.org/docs/#desktop/widget/image.md' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n */\nqx.Class.define(\"qx.ui.basic.Image\",\n{\n  extend : qx.ui.core.Widget,\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param source {String?null} The URL of the image to display.\n   */\n  construct : function(source)\n  {\n    this.__contentElements = {};\n\n    this.base(arguments);\n\n    if (source) {\n      this.setSource(source);\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties :\n  {\n    /** The URL of the image. Setting it will possibly abort loading of current image. */\n    source :\n    {\n      check : \"String\",\n      init : null,\n      nullable : true,\n      event : \"changeSource\",\n      apply : \"_applySource\",\n      themeable : true\n    },\n\n\n    /**\n     * Whether the image should be scaled to the given dimensions\n     *\n     * This is disabled by default because it prevents the usage\n     * of image clipping when enabled.\n     */\n    scale :\n    {\n      check : \"Boolean\",\n      init : false,\n      event : \"changeScale\",\n      themeable : true,\n      apply : \"_applyScale\"\n    },\n\n    /**\n     * Whether to preserve the image ratio (ie prevent distortion), and which dimension\n     * to prioritise\n     */\n    forceRatio : {\n      init : \"auto\",\n      check : [ \"disabled\", \"height\", \"width\", \"auto\" ],\n      apply : \"_applyDimension\"\n    },\n\n    /**\n     * Whether to allow scaling the image up\n     */\n    allowScaleUp : {\n      init : false,\n      check : \"Boolean\",\n      apply : \"_applyDimension\"\n    },\n\n    // overridden\n    appearance :\n    {\n      refine : true,\n      init : \"image\"\n    },\n\n\n    // overridden\n    allowShrinkX :\n    {\n      refine : true,\n      init : false\n    },\n\n\n    // overridden\n    allowShrinkY :\n    {\n      refine : true,\n      init : false\n    },\n\n\n    // overridden\n    allowGrowX :\n    {\n      refine : true,\n      init : false\n    },\n\n\n    // overridden\n    allowGrowY :\n    {\n      refine : true,\n      init : false\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events :\n  {\n    /**\n     * Fired if the image source can not be loaded. This event can only be\n     * fired for the first loading of an unmanaged resource (external image).\n     */\n    loadingFailed : \"qx.event.type.Event\",\n\n\n    /**\n     * Fired if the image has been loaded. This is even true for managed\n     * resources (images known by generator).\n     */\n    loaded : \"qx.event.type.Event\",\n\n\n    /** Fired when the pending request has been aborted. */\n    aborted : \"qx.event.type.Event\"\n  },\n\n\n  statics:\n  {\n    PLACEHOLDER_IMAGE: \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __width : null,\n    __height : null,\n    __mode : null,\n    __contentElements : null,\n    __currentContentElement : null,\n    __wrapper : null,\n    __requestId : 0,\n\n\n    // overridden\n    _onChangeTheme : function() {\n      this.base(arguments);\n      // restyle source (theme change might have changed the resolved url)\n      this._styleSource();\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      WIDGET API\n    ---------------------------------------------------------------------------\n    */\n\n    // overridden\n    getContentElement : function() {\n      return this.__getSuitableContentElement();\n    },\n\n\n    // overridden\n    _createContentElement : function() {\n      return this.__getSuitableContentElement();\n    },\n\n\n    // overridden\n    _getContentHint : function()\n    {\n      return {\n        width : this.__width || 0,\n        height : this.__height || 0\n      };\n    },\n\n    // overridden\n    _applyDecorator : function(value, old) {\n      this.base(arguments, value, old);\n\n      var source = this.getSource();\n      source = qx.util.AliasManager.getInstance().resolve(source);\n      var el = this.getContentElement();\n      if (this.__wrapper) {\n        el = el.getChild(0);\n      }\n      this.__setSource(el, source);\n    },\n\n    // overridden\n    _applyTextColor : function(value)\n    {\n      if (this.__getMode() === \"font\") {\n        var el = this.getContentElement();\n        if (this.__wrapper) {\n          el = el.getChild(0);\n        }\n\n        if (value) {\n          el.setStyle(\"color\", qx.theme.manager.Color.getInstance().resolve(value));\n        } else {\n          el.removeStyle(\"color\");\n        }\n      }\n    },\n\n    // overridden\n    _applyPadding : function(value, old, name)\n    {\n      this.base(arguments, value, old, name);\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else if (this.__getMode() === 'font') {\n        element.setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else {\n        element.setPadding(\n          this.getPaddingLeft() || 0, this.getPaddingTop() || 0\n        );\n      }\n\n    },\n\n    renderLayout : function(left, top, width, height) {\n      this.base(arguments, left, top, width, height);\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          width: width - (this.getPaddingLeft() || 0) - (this.getPaddingRight() || 0),\n          height: height - (this.getPaddingTop() || 0) - (this.getPaddingBottom() || 0),\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      }\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      IMAGE API\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply, overridden\n    _applyEnabled : function(value, old)\n    {\n      this.base(arguments, value, old);\n\n      if (this.getSource()) {\n        this._styleSource();\n      }\n    },\n\n\n    // property apply\n    _applySource : function(value, old)\n    {\n      // abort loading current image\n      if (old) {\n        if (qx.io.ImageLoader.isLoading(old)) {\n          qx.io.ImageLoader.abort(old);\n        }\n      }\n\n      this._styleSource();\n    },\n\n\n    // property apply\n    _applyScale : function(value) {\n      this._styleSource();\n    },\n\n\n    /**\n     * Remembers the mode to keep track which contentElement is currently in use.\n     * @param mode {String} internal mode (alphaScaled|scaled|nonScaled)\n     */\n    __setMode : function(mode) {\n      this.__mode = mode;\n    },\n\n\n    /**\n     * Returns the current mode if set. Otherwise checks the current source and\n     * the current scaling to determine the current mode.\n     *\n     * @return {String} current internal mode\n     */\n    __getMode : function()\n    {\n      if (this.__mode == null)\n      {\n        var source = this.getSource();\n\n        if (source && qx.lang.String.startsWith(source, \"@\")) {\n          this.__mode = \"font\";\n        }\n\n        var isPng = false;\n        if (source != null) {\n          isPng = source.endsWith(\".png\");\n        }\n\n        if (this.getScale() && isPng && qx.core.Environment.get(\"css.alphaimageloaderneeded\")) {\n          this.__mode = \"alphaScaled\";\n        } else if (this.getScale()) {\n          this.__mode = \"scaled\";\n        } else {\n          this.__mode = \"nonScaled\";\n        }\n      }\n\n      return this.__mode;\n    },\n\n\n    /**\n     * Creates a contentElement suitable for the current mode\n     *\n     * @param mode {String} internal mode\n     * @return {qx.html.Image} suitable image content element\n     */\n    __createSuitableContentElement : function(mode)\n    {\n      var scale;\n      var tagName;\n      var clazz = qx.html.Image;\n\n      switch (mode) {\n        case \"font\":\n          clazz = qx.html.Label;\n          scale = true;\n          tagName = \"div\";\n          break;\n        case \"alphaScaled\":\n          scale = true;\n          tagName = \"div\";\n          break;\n        case \"nonScaled\":\n          scale = false;\n          tagName = \"div\";\n          break;\n        default:\n          scale = true;\n          tagName = \"img\";\n          break;\n      }\n\n      var element = new (clazz)(tagName);\n      element.connectWidget(this);\n      element.setStyles({\n        \"overflowX\": \"hidden\",\n        \"overflowY\": \"hidden\",\n        \"boxSizing\": \"border-box\"\n      });\n\n      if (mode == \"font\") {\n        element.setRich(true);\n      }\n      else {\n        element.setScale(scale);\n\n        if (qx.core.Environment.get(\"css.alphaimageloaderneeded\")) {\n          var wrapper = this.__wrapper = new qx.html.Element(\"div\");\n          element.connectWidget(this);\n          wrapper.setStyle(\"position\", \"absolute\");\n          wrapper.add(element);\n          return wrapper;\n        }\n      }\n\n      return element;\n    },\n\n\n    /**\n     * Returns a contentElement suitable for the current mode\n     *\n     * @return {qx.html.Image} suitable image contentElement\n     */\n    __getSuitableContentElement : function()\n    {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      var mode = this.__getMode();\n\n      if (this.__contentElements[mode] == null) {\n        this.__contentElements[mode] = this.__createSuitableContentElement(mode);\n      }\n\n      var element = this.__contentElements[mode];\n\n      if (!this.__currentContentElement) {\n        this.__currentContentElement = element;\n      }\n\n      return element;\n    },\n\n\n    /**\n     * Applies the source to the clipped image instance or preload\n     * an image to detect sizes and apply it afterwards.\n     *\n     */\n    _styleSource : function()\n    {\n      var AliasManager = qx.util.AliasManager.getInstance();\n      var ResourceManager = qx.util.ResourceManager.getInstance();\n\n      var source = AliasManager.resolve(this.getSource());\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element = element.getChild(0);\n      }\n\n      if (!source)\n      {\n        this.__resetSource(element);\n        return;\n      }\n\n      this.__checkForContentElementSwitch(source);\n\n      if ((qx.core.Environment.get(\"engine.name\") == \"mshtml\") &&\n        (parseInt(qx.core.Environment.get(\"engine.version\"), 10) < 9 ||\n         qx.core.Environment.get(\"browser.documentmode\") < 9))\n      {\n        var repeat = this.getScale() ? \"scale\" : \"no-repeat\";\n        element.tagNameHint = qx.bom.element.Decoration.getTagName(repeat, source);\n      }\n\n      var contentEl = this.__getContentElement();\n\n      // Detect if the image registry knows this image\n      if (ResourceManager.isFontUri(source)) {\n        this.__setManagedImage(contentEl, source);\n        var color = this.getTextColor();\n        if (qx.lang.Type.isString(color)) {\n          this._applyTextColor(color, null);\n        }\n      }\n      else if (ResourceManager.has(source)) {\n        var highResolutionSource = ResourceManager.findHighResolutionSource(source);\n        if (highResolutionSource) {\n          var imageWidth = ResourceManager.getImageWidth(source);\n          var imageHeight = ResourceManager.getImageHeight(source);\n          this.setWidth(imageWidth);\n          this.setHeight(imageHeight);\n\n          // set background size on current element (div or img)\n          var backgroundSize = imageWidth + \"px, \" + imageHeight + \"px\";\n          this.__currentContentElement.setStyle(\"background-size\", backgroundSize);\n\n          this.setSource(highResolutionSource);\n          source = highResolutionSource;\n        }\n        this.__setManagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else if (qx.io.ImageLoader.isLoaded(source)) {\n        this.__setUnmanagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else {\n        this.__loadUnmanagedImage(contentEl, source);\n      }\n    },\n\n\n    /**\n     * Helper function, which fires <code>loaded</code> event asynchronously.\n     * It emulates native <code>loaded</code> event of an image object. This\n     * helper will be called, if you try to load a managed image or an\n     * previously loaded unmanaged image.\n     */\n    __fireLoadEvent : function()\n    {\n      this.__requestId++;\n      qx.bom.AnimationFrame.request(function(rId){\n        // prevent firing of the event if source changed in the meantime\n        if (rId === this.__requestId) {\n          this.fireEvent(\"loaded\");\n        } else {\n          this.fireEvent(\"aborted\");\n        }\n      }.bind(this, this.__requestId));\n    },\n\n\n    /**\n     * Returns the content element.\n     * @return {qx.html.Image} content element\n     */\n    __getContentElement : function()\n    {\n      var contentEl = this.__currentContentElement;\n      if (this.__wrapper) {\n        contentEl = contentEl.getChild(0);\n      }\n\n      return contentEl;\n    },\n\n\n    /**\n     * Checks if the current content element is capable to display the image\n     * with the current settings (scaling, alpha PNG)\n     *\n     * @param source {String} source of the image\n     */\n    __checkForContentElementSwitch : qx.core.Environment.select(\"engine.name\",\n    {\n      \"mshtml\" : function(source)\n      {\n        var alphaImageLoader = qx.core.Environment.get(\"css.alphaimageloaderneeded\");\n        var isPng = source.endsWith(\".png\");\n        var isFont = source.startsWith(\"@\");\n\n        if (isFont) {\n          this.__setMode(\"font\");\n        } else if (alphaImageLoader && isPng)\n        {\n          if (this.getScale() && this.__getMode() != \"alphaScaled\") {\n            this.__setMode(\"alphaScaled\");\n          } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n            this.__setMode(\"nonScaled\");\n          }\n        }\n        else\n        {\n          if (this.getScale() && this.__getMode() != \"scaled\") {\n            this.__setMode(\"scaled\");\n          } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n            this.__setMode(\"nonScaled\");\n          }\n        }\n\n        this.__checkForContentElementReplacement(this.__getSuitableContentElement());\n      },\n\n      \"default\" : function(source)\n      {\n        var isFont = source && qx.lang.String.startsWith(source, \"@\");\n\n        if (isFont) {\n          this.__setMode(\"font\");\n        } else if (this.getScale() && this.__getMode() != \"scaled\") {\n          this.__setMode(\"scaled\");\n        } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n          this.__setMode(\"nonScaled\");\n        }\n\n        this.__checkForContentElementReplacement(this.__getSuitableContentElement());\n      }\n    }),\n\n\n    /**\n     * Checks the current child and replaces it if necessary\n     *\n     * @param elementToAdd {qx.html.Image} content element to add\n     */\n    __checkForContentElementReplacement : function(elementToAdd)\n    {\n      var currentContentElement = this.__currentContentElement;\n\n      if (currentContentElement != elementToAdd)\n      {\n        if (currentContentElement != null)\n        {\n          var pixel = \"px\";\n          var styles = {};\n\n          //inherit styles from current element\n          var currentStyles = currentContentElement.getAllStyles();\n          if(currentStyles) {\n            for(var prop in currentStyles) {\n                styles[prop] = currentStyles[prop];\n            }\n          }\n\n          // Don't transfer background image when switching from image to icon font\n          if (this.__getMode() === \"font\") {\n            delete styles.backgroundImage;\n          }\n\n          // Copy dimension and location of the current content element\n          var bounds = this.getBounds();\n          if (bounds != null)\n          {\n            styles.width = bounds.width + pixel;\n            styles.height = bounds.height + pixel;\n          }\n\n          var insets = this.getInsets();\n          styles.left = parseInt(currentContentElement.getStyle(\"left\") || insets.left) + pixel;\n          styles.top = parseInt(currentContentElement.getStyle(\"top\") || insets.top) + pixel;\n\n          styles.zIndex = 10;\n\n          var newEl = this.__wrapper ? elementToAdd.getChild(0) : elementToAdd;\n          newEl.setStyles(styles, true);\n          newEl.setSelectable(this.getSelectable());\n\n          if (!currentContentElement.isVisible()) {\n            elementToAdd.hide();\n          } else if (!elementToAdd.isVisible()) {\n            elementToAdd.show();\n          }\n\n          if (!currentContentElement.isIncluded()) {\n            elementToAdd.exclude();\n          } else if (!elementToAdd.isIncluded()) {\n            elementToAdd.include();\n          }\n\n          var container = currentContentElement.getParent();\n\n          if (container) {\n            var index = container.getChildren().indexOf(currentContentElement);\n            container.removeAt(index);\n            container.addAt(elementToAdd, index);\n          }\n          // force re-application of source so __setSource is called again\n          var hint = newEl.getNodeName();\n          if (newEl.setSource) {\n            newEl.setSource(null);\n          }\n          else {\n            newEl.setValue(\"\");\n          }\n          var currentEl = this.__getContentElement();\n          newEl.tagNameHint = hint;\n          newEl.setAttribute(\"class\", currentEl.getAttribute(\"class\"));\n\n          // Flush elements to make sure the DOM elements are created.\n          qx.html.Element.flush();\n          var currentDomEl = currentEl.getDomElement();\n          var newDomEl = elementToAdd.getDomElement();\n\n          // copy event listeners\n          var listeners = currentContentElement.getListeners() || [];\n          listeners.forEach(function(listenerData) {\n            elementToAdd.addListener(listenerData.type, listenerData.handler, listenerData.self, listenerData.capture);\n          });\n\n          if (currentDomEl && newDomEl) {\n            // Switch the DOM elements' hash codes. This is required for the event\n            // layer to work [BUG #7447]\n            var currentHash = currentDomEl.$$hash;\n            currentDomEl.$$hash = newDomEl.$$hash;\n            newDomEl.$$hash = currentHash;\n          }\n\n          this.__currentContentElement = elementToAdd;\n        }\n      }\n    },\n\n\n    /**\n     * Use the ResourceManager to set a managed image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setManagedImage : function(el, source)\n    {\n      var ResourceManager = qx.util.ResourceManager.getInstance();\n      var isFont = ResourceManager.isFontUri(source);\n\n      // Try to find a disabled image in registry\n      if (!this.getEnabled())\n      {\n        var disabled = source.replace(/\\.([a-z]+)$/, \"-disabled.$1\");\n        if (!isFont && ResourceManager.has(disabled))\n        {\n          source = disabled;\n          this.addState(\"replacement\");\n        }\n        else\n        {\n          this.removeState(\"replacement\");\n        }\n      }\n\n      // Optimize case for enabled changes when no disabled image was found\n      if (!isFont && el.getSource() === source) {\n        return;\n      }\n\n      // Special case for non resource manager handled font icons\n      if (isFont) {\n\n        // Don't use scale if size is set via postfix\n        if (this.getScale() && parseInt(source.split(\"/\")[2], 10)) {\n          this.setScale(false);\n        }\n\n        // Adjust size if scaling is applied\n        var width;\n        var height;\n        if (this.getScale()) {\n          var hint = this.getSizeHint();\n          width = this.getWidth() || hint.width;\n          height = this.getHeight() || hint.height;\n        }\n        else {\n          var font = qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]);\n          if (qx.core.Environment.get(\"qx.debug\")) {\n            this.assertObject(font, \"Virtual image source contains unkown font descriptor\");\n          }\n          var size = parseInt(source.split(\"/\")[2] || font.getSize(), 10);\n          width = ResourceManager.getImageWidth(source) || size;\n          height = ResourceManager.getImageHeight(source) || size;\n        }\n\n        this.__updateContentHint(width, height);\n        this.__setSource(el, source);\n\n\n        // Apply source\n      }\n      else {\n        // Apply source\n        this.__setSource(el, source);\n\n        // Compare with old sizes and relayout if necessary\n        this.__updateContentHint(\n          ResourceManager.getImageWidth(source),\n          ResourceManager.getImageHeight(source)\n        );\n      }\n    },\n\n    _applyDimension : function()\n    {\n      this.base(arguments);\n\n      var isFont = this.getSource() && qx.lang.String.startsWith(this.getSource(), \"@\");\n      if (isFont) {\n        var el = this.getContentElement();\n        if (el) {\n          if (this.getScale()) {\n            var hint = this.getSizeHint();\n            var width = this.getWidth() || hint.width || 40;\n            var height = this.getHeight() || hint.height || 40;\n            el.setStyle(\"fontSize\", (width > height ? height : width) + \"px\");\n          }\n          else {\n            var font = qx.theme.manager.Font.getInstance().resolve(this.getSource().match(/@([^/]+)/)[1]);\n            el.setStyle(\"fontSize\", font.getSize() + \"px\");\n          }\n        }\n      } else {\n        this.__updateContentHint();\n      }\n    },\n\n    /**\n     * Use the infos of the ImageLoader to set an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setUnmanagedImage : function(el, source)\n    {\n      var ImageLoader = qx.io.ImageLoader;\n\n      // Apply source\n      this.__setSource(el, source);\n\n      // Compare with old sizes and relayout if necessary\n      var width = ImageLoader.getWidth(source);\n      var height = ImageLoader.getHeight(source);\n      this.__updateContentHint(width, height);\n    },\n\n\n    /**\n     * Use the ImageLoader to load an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __loadUnmanagedImage : function(el, source)\n    {\n      var ImageLoader = qx.io.ImageLoader;\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        // loading external images via HTTP/HTTPS is a common usecase, as is\n        // using data URLs.\n        var sourceLC = source.toLowerCase();\n        if (!sourceLC.startsWith(\"http\") &&\n            !sourceLC.startsWith(\"data:image/\"))\n        {\n          var self = this.self(arguments);\n\n          if (!self.__warned) {\n            self.__warned = {};\n          }\n\n          if (!self.__warned[source])\n          {\n            this.debug(\"try to load an unmanaged relative image: \" + source);\n            self.__warned[source] = true;\n          }\n        }\n      }\n\n      // only try to load the image if it not already failed\n      if(!ImageLoader.isFailed(source)) {\n        ImageLoader.load(source, this.__loaderCallback, this);\n      } else {\n        this.__resetSource(el);\n      }\n    },\n\n    /**\n     * Reset source displayed by the DOM element.\n     *\n     * @param el {Element} image DOM element\n     */\n    __resetSource : function(el)\n    {\n      if (el != null) {\n        if (el instanceof qx.html.Image) {\n          el.resetSource();\n        }\n        else {\n          el.resetValue();\n        }\n      }\n    },\n\n    /**\n     * Combines the decorator's image styles with our own image to make sure\n     * gradient and backgroundImage decorators work on Images.\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setSource: function (el, source) {\n      var isFont = source && qx.lang.String.startsWith(source, \"@\");\n\n      if (isFont) {\n        var sparts = source.split(\"/\");\n        var fontSource = source;\n        if (sparts.length > 2) {\n          fontSource = sparts[0] + \"/\" + sparts[1];\n        }\n\n\n        var ResourceManager = qx.util.ResourceManager.getInstance();\n        var font = qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]);\n        var fontStyles = qx.lang.Object.clone(font.getStyles());\n        delete fontStyles.color;\n        el.setStyles(fontStyles);\n        el.setStyle(\"font\");\n        el.setStyle(\"display\", \"table-cell\");\n        el.setStyle(\"verticalAlign\", \"middle\");\n        el.setStyle(\"textAlign\", \"center\");\n\n        if (this.getScale()) {\n          el.setStyle(\"fontSize\", (this.__width > this.__height ? this.__height : this.__width) + \"px\");\n        }\n        else {\n          var size = parseInt(sparts[2] || qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]).getSize());\n          el.setStyle(\"fontSize\", size + \"px\");\n        }\n\n        var resource = ResourceManager.getData(fontSource);\n        if (resource) {\n          el.setValue(String.fromCharCode(resource[2]));\n        }\n        else {\n          var charCode = parseInt(qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)\\/(.*)$/)[2]), 16);\n          if (qx.core.Environment.get(\"qx.debug\")) {\n            this.assertNumber(charCode, \"Font source needs either a glyph name or the unicode number in hex\");\n          }\n          el.setValue(String.fromCharCode(charCode));\n        }\n\n        return;\n      }\n      else if (el.getNodeName() == \"div\") {\n\n        // checks if a decorator already set.\n        // In this case we have to merge background styles\n        var decorator = qx.theme.manager.Decoration.getInstance().resolve(this.getDecorator());\n        if (decorator) {\n          var hasGradient = (decorator.getStartColor() && decorator.getEndColor());\n          var hasBackground = decorator.getBackgroundImage();\n          if (hasGradient || hasBackground) {\n            var repeat = this.getScale() ? \"scale\" : \"no-repeat\";\n\n            // get the style attributes for the given source\n            var attr = qx.bom.element.Decoration.getAttributes(source, repeat);\n            // get the background image(s) defined by the decorator\n            var decoratorStyle = decorator.getStyles(true);\n\n            var combinedStyles = {\n              \"backgroundImage\": attr.style.backgroundImage,\n              \"backgroundPosition\": (attr.style.backgroundPosition || \"0 0\"),\n              \"backgroundRepeat\": (attr.style.backgroundRepeat || \"no-repeat\")\n            };\n\n            if (hasBackground) {\n              combinedStyles[\"backgroundPosition\"] += \",\" + decoratorStyle[\"background-position\"] || \"0 0\";\n              combinedStyles[\"backgroundRepeat\"] += \", \" + decorator.getBackgroundRepeat();\n            }\n\n            if (hasGradient) {\n              combinedStyles[\"backgroundPosition\"] += \", 0 0\";\n              combinedStyles[\"backgroundRepeat\"] += \", no-repeat\";\n            }\n\n            combinedStyles[\"backgroundImage\"] += \",\" + (decoratorStyle[\"background-image\"] || decoratorStyle[\"background\"]);\n\n            // apply combined background images\n            el.setStyles(combinedStyles);\n\n            return;\n          }\n        } else {\n          // force re-apply to remove old decorator styles\n          if (el.setSource){\n            el.setSource(null);\n          }\n        }\n      }\n      if (el.setSource){\n        el.setSource(source);\n      }\n    },\n\n    /**\n     * Event handler fired after the preloader has finished loading the icon\n     *\n     * @param source {String} Image source which was loaded\n     * @param imageInfo {Map} Dimensions of the loaded image\n     */\n    __loaderCallback : function(source, imageInfo)\n    {\n      // Ignore the callback on already disposed images\n      if (this.$$disposed === true) {\n        return;\n      }\n\n      // Ignore when the source has already been modified\n      if (source !== qx.util.AliasManager.getInstance().resolve(this.getSource())) {\n        this.fireEvent(\"aborted\");\n        return;\n      }\n\n      /// Output a warning if the image could not loaded and quit\n      if (imageInfo.failed) {\n        this.warn(\"Image could not be loaded: \" + source);\n        this.fireEvent(\"loadingFailed\");\n      } else if (imageInfo.aborted) {\n        this.fireEvent(\"aborted\");\n        return;\n      } else {\n        this.fireEvent(\"loaded\");\n      }\n\n      // Update image\n      this.__setUnmanagedImage(this.__getContentElement(), source);\n    },\n\n\n    /**\n     * Updates the content hint when the image size has been changed\n     *\n     * @param width {Integer} width of the image\n     * @param height {Integer} height of the image\n     */\n    __updateContentHint : function(width, height) {\n      if (width === undefined ) {\n        width = this.__width;\n      }\n      if (height === undefined) {\n        height = this.__height;\n      }\n      if (this._recalc(width, height)) {\n        qx.ui.core.queue.Layout.add(this);\n      }\n    },\n    \n    \n    /**\n     * Recalculates the size of the image, according to scaling parameters\n     * @param maxWidth {Integer?} maximum width restriction\n     * @param maxHeight {Integer?} minimum height restriction\n     */\n    _recalc: function(originalWidth, originalHeight) {\n      var maxWidth = this.getMaxWidth();\n      var maxHeight = this.getMaxHeight();\n      var minWidth = this.getMinWidth();\n      var minHeight = this.getMinHeight();\n      \n      var width = originalWidth;\n      var height = originalHeight;\n      \n      var ratio = originalHeight / originalWidth;\n\n      switch(this.getForceRatio()) {\n      case 'height':\n        if (maxHeight !== null && height > maxHeight) {\n          height = maxHeight;\n          width = height / ratio;\n        } else if (height < minHeight) {\n          height = minHeight;\n          width = height / ratio;\n        }\n        if (height < maxHeight && this.isAllowScaleUp()) {\n          height = maxHeight;\n          width = height / ratio;\n        }\n        break;\n        \n      case 'width':\n        if (maxWidth !== null && width > maxWidth) {\n          width = maxWidth;\n          height = width * ratio;\n        } else if (width < minWidth) {\n          width = minWidth;\n          height = width * ratio;\n        }\n        if (width < maxWidth && this.isAllowScaleUp()) {\n          width = maxWidth;\n          height = width * ratio;\n        }\n        break;\n      \n      case 'auto':\n      case 'bestfit':\n        if (maxWidth !== null && width > maxWidth) {\n          width = maxWidth;\n          height = width * ratio;\n        } else if (width < minWidth) {\n          width = minWidth;\n          height = width * ratio;\n        }\n        if (width < maxWidth && this.isAllowScaleUp()) {\n          width = maxWidth;\n          height = width * ratio;\n        }\n        if (maxHeight !== null && height > maxHeight) {\n          height = maxHeight;\n          width = height / ratio;\n        }\n        break;\n      }\n      \n      width = Math.round(width);\n      height = Math.round(height);\n      if (width != this.__width || height != this.__height) {\n        this.__width = width;\n        this.__height = height;\n        return true;\n      }\n      return false;\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function() {\n    for (var mode in this.__contentElements) {\n      if (this.__contentElements.hasOwnProperty(mode)) {\n        this.__contentElements[mode].disconnectWidget(this);\n      }\n    }\n\n    delete this.__currentContentElement;\n    if (this.__wrapper) {\n      delete this.__wrapper;\n    }\n\n    this._disposeMap(\"__contentElements\");\n  }\n});\n"
  ]
}