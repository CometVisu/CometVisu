{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/dev/unit/MTestLoader.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "properties",
    "suite",
    "check",
    "nullable",
    "init",
    "members",
    "_getClassNameFromUrl",
    "params",
    "window",
    "location",
    "search",
    "className",
    "match",
    "setTestNamespace",
    "namespace",
    "dev",
    "unit",
    "TestSuite",
    "add",
    "setSuite",
    "runJsUnit",
    "testResult",
    "JsUnitTestResult",
    "getSuite",
    "run",
    "exportToJsUnit",
    "runStandAlone",
    "TestResult",
    "addListener",
    "e",
    "ex",
    "getData",
    "exception",
    "test",
    "error",
    "getFullName",
    "message",
    "getComment",
    "getStackTrace",
    "join",
    "getTestDescriptions",
    "desc",
    "classes",
    "getTestClasses",
    "i",
    "length",
    "cls",
    "clsDesc",
    "classname",
    "getName",
    "tests",
    "methods",
    "getTestMethods",
    "j",
    "push",
    "lang",
    "Json",
    "stringify",
    "runTests",
    "methodName",
    "runTestsFromNamespace",
    "namespaceName",
    "indexOf",
    "MTestLoader"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Daniel Wagner (d_wagner)\n\n************************************************************************ */\n\n/**\n * This mixin contains the methods needed to implement a loader that will\n * create a suite of unit tests from a given namespace and run it directly or\n * provide the necessary information to a more advanced runner application\n */\nqx.Mixin.define(\"qx.dev.unit.MTestLoader\", {\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties :\n  {\n    /** The test suite */\n    suite : {\n      check    : \"qx.dev.unit.TestSuite\",\n      nullable : true,\n      init : null\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  members :\n  {\n    /**\n     * Parses the url parameters and tries to find the classes to test.\n     * The pattern is like <code>index.html?testclass=qx.test</code>\n     *\n     * @return {String} the class/namespace to test\n     */\n    _getClassNameFromUrl : function()\n    {\n      var params = window.location.search;\n      var className = params.match(/[\\?&]testclass=([A-Za-z0-9_\\.]+)/);\n\n      if (className) {\n        className = className[1];\n      } else {\n        className = \"__unknown_class__\";\n      }\n\n      return className;\n    },\n\n\n    /**\n     * Sets the top level namespace of the test cases to test. All classes\n     * below this namespace extending {@link TestCase} will be tested.\n     *\n     * @param namespace {Object} Namespace to add\n     */\n    setTestNamespace : function(namespace)\n    {\n      var suite = new qx.dev.unit.TestSuite();\n      suite.add(namespace);\n      this.setSuite(suite);\n    },\n\n\n    /**\n     * Run all tests and export the results to JSUnit\n     */\n    runJsUnit : function()\n    {\n      var testResult = new qx.dev.unit.JsUnitTestResult();\n      this.getSuite().run(testResult);\n      testResult.exportToJsUnit();\n    },\n\n\n    /**\n     * Run tests as standalone application\n     */\n    runStandAlone : function()\n    {\n      var testResult = new qx.dev.unit.TestResult();\n\n      testResult.addListener(\"failure\", function(e)\n      {\n        var ex = e.getData()[0].exception;\n        var test = e.getData()[0].test;\n        this.error(\"Test '\" + test.getFullName() + \"' failed: \" + ex.message + \" - \" + ex.getComment());\n        if (ex.getStackTrace) {\n          this.error(\"Stack trace: \" + ex.getStackTrace().join(\"\\n\"));\n        }\n      }, this);\n\n      testResult.addListener(\"error\", function(e)\n      {\n        var ex = e.getData()[0].exception;\n        var test = e.getData()[0].test;\n        this.error(\"The test '\" + test.getFullName() + \"' had an error: \" + ex, ex);\n      }, this);\n\n      this.getSuite().run(testResult);\n    },\n\n\n    /**\n     * Get a list of test descriptions\n     *\n     * @return {String} A description of all tests.\n     */\n    getTestDescriptions : function()\n    {\n      var desc = [];\n      var classes = this.getSuite().getTestClasses();\n\n      for (var i=0; i<classes.length; i++)\n      {\n        var cls = classes[i];\n        var clsDesc = {};\n        clsDesc.classname = cls.getName();\n        clsDesc.tests = [];\n        var methods = cls.getTestMethods();\n\n        for (var j=0; j<methods.length; j++) {\n          clsDesc.tests.push(methods[j].getName());\n        }\n\n        desc.push(clsDesc);\n      }\n\n      return qx.lang.Json.stringify(desc);\n    },\n\n\n    /**\n     * Runs exactly one test from the test suite\n     *\n     * @param testResult {qx.dev.unit.TestResult} the result logger\n     * @param className {String} Name of the test class\n     * @param methodName {String} Name of the test method\n     */\n    runTests : function(testResult, className, methodName)\n    {\n      var classes = this.getSuite().getTestClasses();\n\n      for (var i=0; i<classes.length; i++)\n      {\n        if (className == classes[i].getName())\n        {\n          var methods = classes[i].getTestMethods();\n\n          for (var j=0; j<methods.length; j++)\n          {\n            if (methodName && methods[j].getName() != methodName) {\n              continue;\n            }\n\n            methods[j].run(testResult);\n          }\n\n          return;\n        }\n      }\n    },\n\n\n    /**\n     * Runs all tests inside of the given namespace\n     *\n     * @param testResult {qx.dev.unit.TestResult} the result logger\n     * @param namespaceName {String} Namespace of the tests to run\n     */\n    runTestsFromNamespace : function(testResult, namespaceName)\n    {\n      var classes = this.getSuite().getTestClasses();\n\n      for (var i=0; i<classes.length; i++)\n      {\n        if (classes[i].getName().indexOf(namespaceName) == 0) {\n          classes[i].run(testResult);\n        }\n      }\n    }\n  }\n});\n"
  ]
}