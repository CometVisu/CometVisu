{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/io/remote/transport/XmlHttp.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "io",
    "remote",
    "transport",
    "Abstract",
    "implement",
    "core",
    "IDisposable",
    "statics",
    "handles",
    "synchronous",
    "asynchronous",
    "crossDomain",
    "fileUpload",
    "programmaticFormFields",
    "responseTypes",
    "createRequestObject",
    "Environment",
    "select",
    "XMLHttpRequest",
    "window",
    "ActiveXObject",
    "xml",
    "Document",
    "XMLHTTP",
    "isSupported",
    "__timeout",
    "setTimeout",
    "timeout",
    "getTimeout",
    "properties",
    "parseJson",
    "check",
    "init",
    "members",
    "__localRequest",
    "__lastReadyState",
    "__request",
    "getRequest",
    "XmlHttp",
    "onreadystatechange",
    "lang",
    "Function",
    "bind",
    "_onreadystatechange",
    "send",
    "vRequest",
    "vMethod",
    "getMethod",
    "vAsynchronous",
    "getAsynchronous",
    "vUrl",
    "getUrl",
    "vLocalRequest",
    "location",
    "protocol",
    "test",
    "vParameters",
    "getParameters",
    "vParametersList",
    "vId",
    "value",
    "Array",
    "i",
    "length",
    "push",
    "encodeURIComponent",
    "indexOf",
    "join",
    "getData",
    "setData",
    "encode64",
    "input",
    "keyStr",
    "output",
    "chr1",
    "chr2",
    "chr3",
    "enc1",
    "enc2",
    "enc3",
    "enc4",
    "charCodeAt",
    "isNaN",
    "charAt",
    "getUsername",
    "getUseBasicHttpAuth",
    "open",
    "setRequestHeader",
    "getPassword",
    "ex",
    "error",
    "failed",
    "vRequestHeaders",
    "getRequestHeaders",
    "get",
    "event",
    "Timer",
    "once",
    "failedLocally",
    "getState",
    "warn",
    "GlobalError",
    "observeMethod",
    "e",
    "vReadyState",
    "getReadyState",
    "Exchange",
    "wasSuccessful",
    "getStatusCode",
    "setState",
    "_nativeMap",
    "readyState",
    "vLabel",
    "vValue",
    "getResponseHeader",
    "vResponseHeader",
    "getStringResponseHeaders",
    "vSourceHeader",
    "vLoadHeader",
    "getAllResponseHeaders",
    "getResponseHeaders",
    "vHeader",
    "vValues",
    "split",
    "l",
    "vPair",
    "match",
    "vStatusCode",
    "status",
    "getStatusText",
    "vStatusText",
    "statusText",
    "getResponseText",
    "vResponseText",
    "responseText",
    "getResponseXml",
    "vResponseXML",
    "vStatus",
    "responseXML",
    "documentElement",
    "s",
    "String",
    "replace",
    "loadXML",
    "Error",
    "tagName",
    "getFetchedLength",
    "vText",
    "getResponseContent",
    "state",
    "getResponseType",
    "ret",
    "getParseJson",
    "Json",
    "parse",
    "eval",
    "_applyState",
    "old",
    "fireEvent",
    "abort",
    "defer",
    "registerType",
    "destruct"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n     2006 Derrell Lipman\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Derrell Lipman (derrell)\n\n************************************************************************ */\n\n/**\n * Transports requests to a server using the native XmlHttpRequest object.\n *\n * This class should not be used directly by client programmers.\n */\nqx.Class.define(\"qx.io.remote.transport.XmlHttp\",\n{\n  extend : qx.io.remote.transport.Abstract,\n  implement: [ qx.core.IDisposable ],\n\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /**\n     * Capabilities of this transport type.\n     *\n     * @internal\n     */\n    handles :\n    {\n      synchronous           : true,\n      asynchronous          : true,\n      crossDomain           : false,\n      fileUpload            : false,\n      programmaticFormFields : false,\n      responseTypes         : [ \"text/plain\", \"text/javascript\", \"application/json\", \"application/xml\", \"text/html\" ]\n    },\n\n\n    /**\n     * Return a new XMLHttpRequest object suitable for the client browser.\n     *\n     * @return {Object} native XMLHttpRequest object\n     * @signature function()\n     */\n    createRequestObject : qx.core.Environment.select(\"engine.name\",\n    {\n      \"default\" : function() {\n        return new XMLHttpRequest;\n      },\n\n      // IE7's native XmlHttp does not care about trusted zones. To make this\n      // work in the localhost scenario, you can use the following registry setting:\n      //\n      // [HKEY_CURRENT_USER\\Software\\Microsoft\\Internet Explorer\\Main\\\n      // FeatureControl\\FEATURE_XMLHTTP_RESPECT_ZONEPOLICY]\n      // \"Iexplore.exe\"=dword:00000001\n      //\n      // Generally it seems that the ActiveXObject is more stable. jQuery\n      // seems to use it always. We prefer the ActiveXObject for the moment, but allow\n      // fallback to XMLHTTP if ActiveX is disabled.\n      \"mshtml\" : function()\n      {\n        if (window.ActiveXObject && qx.xml.Document.XMLHTTP) {\n          return new ActiveXObject(qx.xml.Document.XMLHTTP);\n        }\n\n        if (window.XMLHttpRequest) {\n          return new XMLHttpRequest;\n        }\n      }\n    }),\n\n\n    /**\n     * Whether the transport type is supported by the client.\n     *\n     * @return {Boolean} supported or not\n     */\n    isSupported : function() {\n      return !!this.createRequestObject();\n    },\n    \n    \n    /** The timeout for Xhr requests */\n    __timeout: 0,\n    \n    \n    /**\n     * Sets the timeout for requests\n     * @deprecated {6.0} This method is deprecated from the start because synchronous I/O itself is deprecated\n     *  in the W3C spec {@link https://xhr.spec.whatwg.org/} and timeouts are indicative of synchronous I/O and/or\n     *  other server issues.  However, this API is still supported by many browsers and this API is useful\n     *  for code which has not made the transition to asynchronous I/O   \n     */\n    setTimeout: function(timeout) {\n      this.__timeout = timeout;\n    },\n    \n    \n    /**\n     * Returns the timeout for requests\n     */\n    getTimeout: function() {\n      return this.__timeout;\n    }\n  },\n\n\n  /*\n   *****************************************************************************\n      PROPERTIES\n   *****************************************************************************\n   */\n\n   properties :\n   {\n    /**\n     * If true and the responseType property is set to \"application/json\", getResponseContent() will\n     * return a Javascript map containing the JSON contents, i. e. the result qx.lang.Json.parse().\n     * If false, the raw string data will be returned and the parsing must be done manually.\n     * This is useful for special JSON dialects / extensions which are not supported by\n     * qx.lang.Json.\n     */\n    parseJson :\n    {\n      check : \"Boolean\",\n      init : true\n    }\n   },\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    /*\n    ---------------------------------------------------------------------------\n      CORE METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    __localRequest : false,\n    __lastReadyState : 0,\n    __request : null,\n\n\n    /**\n     * Returns the native request object\n     *\n     * @return {Object} native XmlHTTPRequest object\n     */\n    getRequest : function()\n    {\n      if (this.__request === null)\n      {\n        this.__request = qx.io.remote.transport.XmlHttp.createRequestObject();\n        this.__request.onreadystatechange = qx.lang.Function.bind(this._onreadystatechange, this);\n      }\n\n      return this.__request;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      USER METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Implementation for sending the request\n     *\n     */\n    send : function()\n    {\n      this.__lastReadyState = 0;\n\n      var vRequest = this.getRequest();\n      var vMethod = this.getMethod();\n      var vAsynchronous = this.getAsynchronous();\n      var vUrl = this.getUrl();\n\n      // --------------------------------------\n      //   Local handling\n      // --------------------------------------\n      var vLocalRequest = (window.location.protocol === \"file:\" && !(/^http(s){0,1}\\:/.test(vUrl)));\n      this.__localRequest = vLocalRequest;\n\n      // --------------------------------------\n      //   Adding URL parameters\n      // --------------------------------------\n      var vParameters = this.getParameters(false);\n      var vParametersList = [];\n\n      for (var vId in vParameters)\n      {\n        var value = vParameters[vId];\n\n        if (value instanceof Array)\n        {\n          for (var i=0; i<value.length; i++) {\n            vParametersList.push(encodeURIComponent(vId) + \"=\" + encodeURIComponent(value[i]));\n          }\n        }\n        else\n        {\n          vParametersList.push(encodeURIComponent(vId) + \"=\" + encodeURIComponent(value));\n        }\n      }\n\n      if (vParametersList.length > 0) {\n        vUrl += (vUrl.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + vParametersList.join(\"&\");\n      }\n\n      // --------------------------------------------------------\n      //   Adding data parameters (if no data is already present)\n      // --------------------------------------------------------\n      if (this.getData() === null)\n      {\n        var vParameters = this.getParameters(true);\n        var vParametersList = [];\n\n        for (var vId in vParameters)\n        {\n          var value = vParameters[vId];\n\n          if (value instanceof Array)\n          {\n            for (var i=0; i<value.length; i++)\n            {\n              vParametersList.push(encodeURIComponent(vId) +\n                                   \"=\" +\n                                   encodeURIComponent(value[i]));\n            }\n          }\n          else\n          {\n            vParametersList.push(encodeURIComponent(vId) +\n                                 \"=\" +\n                                 encodeURIComponent(value));\n          }\n        }\n\n        if (vParametersList.length > 0)\n        {\n          this.setData(vParametersList.join(\"&\"));\n        }\n      }\n\n      var encode64 = function(input)\n      {\n        var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n\n        do\n        {\n          chr1 = input.charCodeAt(i++);\n          chr2 = input.charCodeAt(i++);\n          chr3 = input.charCodeAt(i++);\n\n          enc1 = chr1 >> 2;\n          enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n          enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n          enc4 = chr3 & 63;\n\n          if (isNaN(chr2)) {\n            enc3 = enc4 = 64;\n          } else if (isNaN(chr3)) {\n            enc4 = 64;\n          }\n\n          output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n        }\n        while (i < input.length);\n\n        return output;\n      };\n\n      // --------------------------------------\n      //   Opening connection\n      // --------------------------------------\n      try\n      {\n        if (this.getUsername())\n        {\n          if (this.getUseBasicHttpAuth())\n          {\n            vRequest.open(vMethod, vUrl, vAsynchronous);\n            vRequest.setRequestHeader('Authorization', 'Basic ' + encode64(this.getUsername() + ':' + this.getPassword()));\n          }\n          else\n          {\n            vRequest.open(vMethod, vUrl, vAsynchronous, this.getUsername(), this.getPassword());\n          }\n        }\n        else\n        {\n          vRequest.open(vMethod, vUrl, vAsynchronous);\n        }\n      }\n      catch(ex)\n      {\n        this.error(\"Failed with exception: \" + ex);\n        this.failed();\n        return;\n      }\n\n      // Apply timeout\n      var timeout = qx.io.remote.transport.XmlHttp.getTimeout();\n      if (timeout && vAsynchronous) {\n        vRequest.timeout = timeout;\n      }\n\n      // --------------------------------------\n      //   Applying request header\n      // --------------------------------------\n      // Removed adding a referer header as this is not allowed anymore on most\n      // browsers\n      // See issue https://github.com/qooxdoo/qooxdoo/issues/9298\n\n      var vRequestHeaders = this.getRequestHeaders();\n\n      for (var vId in vRequestHeaders) {\n        vRequest.setRequestHeader(vId, vRequestHeaders[vId]);\n      }\n\n      // --------------------------------------\n      //   Sending data\n      // --------------------------------------\n      try {\n        if (qx.core.Environment.get(\"qx.debug\"))\n        {\n          if (qx.core.Environment.get(\"qx.debug.io.remote.data\"))\n          {\n            this.debug(\"Request: \" + this.getData());\n          }\n        }\n\n        // IE9 executes the call synchronous when the call is to file protocol\n        // See [BUG #4762] for details\n        if (\n          vLocalRequest && vAsynchronous &&\n          qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n          (qx.core.Environment.get(\"engine.version\") == 9 &&\n           qx.core.Environment.get(\"browser.documentmode\") == 9)\n        ) {\n          qx.event.Timer.once(function() {\n            vRequest.send(this.getData());\n          }, this, 0);\n        } else {\n          vRequest.send(this.getData());\n        }\n      }\n      catch(ex)\n      {\n        if (vLocalRequest) {\n          this.failedLocally();\n        }\n        else\n        {\n          this.error(\"Failed to send data to URL '\" + vUrl + \"': \" + ex, \"send\");\n          this.failed();\n        }\n\n        return;\n      }\n\n      // --------------------------------------\n      //   Readystate for sync requests\n      // --------------------------------------\n      if (!vAsynchronous) {\n        this._onreadystatechange();\n      }\n    },\n\n\n    /**\n     * Force the transport into the failed state (\"failed\").\n     *\n     * This method should be used only if the requests URI was local\n     * access. I.e. it started with \"file://\".\n     *\n     */\n    failedLocally : function()\n    {\n      if (this.getState() === \"failed\") {\n        return;\n      }\n\n      // should only occur on \"file://\" access\n      this.warn(\"Could not load from file: \" + this.getUrl());\n\n      this.failed();\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT HANDLER\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Listener method for change of the \"readystate\".\n     * Sets the internal state and informs the transport layer.\n     *\n     * @signature function(e)\n     * @param e {Event} native event\n     */\n    _onreadystatechange : qx.event.GlobalError.observeMethod(function(e)\n    {\n      // Ignoring already stopped requests\n      switch(this.getState())\n      {\n        case \"completed\":\n        case \"aborted\":\n        case \"failed\":\n        case \"timeout\":\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n              this.warn(\"Ignore Ready State Change\");\n            }\n          }\n\n          return;\n      }\n\n      // Checking status code\n      var vReadyState = this.getReadyState();\n\n      if (vReadyState == 4)\n      {\n        // The status code is only meaningful when we reach ready state 4.\n        // (Important for Opera since it goes through other states before\n        // reaching 4, and the status code is not valid before 4 is reached.)\n        if (!qx.io.remote.Exchange.wasSuccessful(this.getStatusCode(), vReadyState, this.__localRequest)) {\n          // Fix for bug #2272\n          // The IE doesn't set the state to 'sending' even though the send method\n          // is called. This only occurs if the server (which is called) goes\n          // down or a network failure occurs.\n          if (this.getState() === \"configured\") {\n            this.setState(\"sending\");\n          }\n\n          this.failed();\n          return;\n        }\n      }\n\n      // Sometimes the xhr call skips the send state\n      if (vReadyState == 3 && this.__lastReadyState == 1) {\n        this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState]);\n      }\n\n      // Updating internal state\n      while (this.__lastReadyState < vReadyState) {\n        this.setState(qx.io.remote.Exchange._nativeMap[++this.__lastReadyState]);\n      }\n    }),\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      READY STATE\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Get the ready state of this transports request.\n     *\n     * For qx.io.remote.transport.XmlHttp, ready state is a number between 1 to 4.\n     *\n     * @return {Integer} ready state number\n     */\n    getReadyState : function()\n    {\n      var vReadyState = null;\n\n      try {\n        vReadyState = this.getRequest().readyState;\n      } catch(ex) {}\n\n      return vReadyState;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      REQUEST HEADER SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Set a request header to this transports request.\n     *\n     * @param vLabel {String} Request header name\n     * @param vValue {var} Request header value\n     */\n    setRequestHeader : function(vLabel, vValue) {\n      this.getRequestHeaders()[vLabel] = vValue;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      RESPONSE HEADER SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Returns a specific header provided by the server upon sending a request,\n     * with header name determined by the argument headerName.\n     *\n     * Only available at readyState 3 and 4 universally and in readyState 2\n     * in Gecko.\n     *\n     * Please note: Some servers/proxies (such as Selenium RC) will capitalize\n     * response header names. This is in accordance with RFC 2616[1], which\n     * states that HTTP 1.1 header names are case-insensitive, so your\n     * application should be case-agnostic when dealing with response headers.\n     *\n     * [1]<a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2\">RFC 2616: HTTP Message Headers</a>\n     *\n     * @param vLabel {String} Response header name\n     * @return {String|null} Response header value\n     */\n    getResponseHeader : function(vLabel)\n    {\n      var vResponseHeader = null;\n\n      try {\n        vResponseHeader = this.getRequest().getResponseHeader(vLabel) || null;\n      } catch(ex) {}\n\n      return vResponseHeader;\n    },\n\n\n    /**\n     * Returns all response headers of the request.\n     *\n     * @return {var} response headers\n     */\n    getStringResponseHeaders : function()\n    {\n      var vSourceHeader = null;\n\n      try\n      {\n        var vLoadHeader = this.getRequest().getAllResponseHeaders();\n\n        if (vLoadHeader) {\n          vSourceHeader = vLoadHeader;\n        }\n      }\n      catch(ex) {}\n\n      return vSourceHeader;\n    },\n\n\n    /**\n     * Provides a hash of all response headers.\n     *\n     * @return {var} hash of all response headers\n     */\n    getResponseHeaders : function()\n    {\n      var vSourceHeader = this.getStringResponseHeaders();\n      var vHeader = {};\n\n      if (vSourceHeader)\n      {\n        var vValues = vSourceHeader.split(/[\\r\\n]+/g);\n\n        for (var i=0, l=vValues.length; i<l; i++)\n        {\n          var vPair = vValues[i].match(/^([^:]+)\\s*:\\s*(.+)$/i);\n\n          if (vPair) {\n            vHeader[vPair[1]] = vPair[2];\n          }\n        }\n      }\n\n      return vHeader;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      STATUS SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Returns the current status code of the request if available or -1 if not.\n     *\n     * @return {Integer} current status code\n     */\n    getStatusCode : function()\n    {\n      var vStatusCode = -1;\n\n      try {\n        vStatusCode = this.getRequest().status;\n\n        // [BUG #4476]\n        // IE sometimes tells 1223 when it should be 204\n        if (vStatusCode === 1223) {\n          vStatusCode = 204;\n        }\n\n      } catch(ex) {}\n\n      return vStatusCode;\n    },\n\n\n    /**\n     * Provides the status text for the current request if available and null\n     * otherwise.\n     *\n     * @return {String} current status code text\n     */\n    getStatusText : function()\n    {\n      var vStatusText = \"\";\n\n      try {\n        vStatusText = this.getRequest().statusText;\n      } catch(ex) {}\n\n      return vStatusText;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      RESPONSE DATA SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Provides the response text from the request when available and null\n     * otherwise.  By passing true as the \"partial\" parameter of this method,\n     * incomplete data will be made available to the caller.\n     *\n     * @return {String} Content of the response as string\n     */\n    getResponseText : function()\n    {\n      var vResponseText = null;\n\n      try\n      {\n        vResponseText = this.getRequest().responseText;\n      }\n      catch(ex)\n      {\n        vResponseText = null;\n      }\n\n      return vResponseText;\n    },\n\n\n    /**\n     * Provides the XML provided by the response if any and null otherwise.  By\n     * passing true as the \"partial\" parameter of this method, incomplete data will\n     * be made available to the caller.\n     *\n     * @return {String} Content of the response as XML\n     * @throws {Error} If an error within the response occurs.\n     */\n    getResponseXml : function()\n    {\n      var vResponseXML = null;\n\n      var vStatus = this.getStatusCode();\n      var vReadyState = this.getReadyState();\n\n      if (qx.io.remote.Exchange.wasSuccessful(vStatus, vReadyState, this.__localRequest))\n      {\n        try {\n          vResponseXML = this.getRequest().responseXML;\n        } catch(ex) {}\n      }\n\n      // Typical behaviour on file:// on mshtml\n      // Could we check this with something like: /^file\\:/.test(path); ?\n      // No browser check here, because it doesn't seem to break other browsers\n      //    * test for this.req.responseXML's objecthood added by *\n      //    * FRM, 20050816                                       *\n      if (typeof vResponseXML == \"object\" && vResponseXML != null)\n      {\n        if (!vResponseXML.documentElement)\n        {\n          // Clear xml file declaration, this breaks non unicode files (like ones with Umlauts)\n          var s = String(this.getRequest().responseText).replace(/<\\?xml[^\\?]*\\?>/, \"\");\n          vResponseXML.loadXML(s);\n        }\n\n        // Re-check if fixed...\n        if (!vResponseXML.documentElement) {\n          throw new Error(\"Missing Document Element!\");\n        }\n\n        if (vResponseXML.documentElement.tagName == \"parseerror\") {\n          throw new Error(\"XML-File is not well-formed!\");\n        }\n      }\n      else\n      {\n        throw new Error(\"Response was not a valid xml document [\" + this.getRequest().responseText + \"]\");\n      }\n\n      return vResponseXML;\n    },\n\n\n    /**\n     * Returns the length of the content as fetched thus far\n     *\n     * @return {Integer} Length of the response text.\n     */\n    getFetchedLength : function()\n    {\n      var vText = this.getResponseText();\n      return typeof vText == \"string\" ? vText.length : 0;\n    },\n\n\n    /**\n     * Returns the content of the response\n     *\n     * @return {null | String} Response content if available\n     */\n    getResponseContent : function()\n    {\n      var state = this.getState();\n      if (state !== \"completed\" && state != \"failed\")\n      {\n        if (qx.core.Environment.get(\"qx.debug\"))\n        {\n          if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n            this.warn(\"Transfer not complete or failed, ignoring content!\");\n          }\n        }\n\n        return null;\n      }\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n          this.debug(\"Returning content for responseType: \" + this.getResponseType());\n        }\n      }\n\n      var vText = this.getResponseText();\n\n      if (state == \"failed\")\n      {\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (qx.core.Environment.get(\"qx.debug.io.remote.data\"))\n            {\n              this.debug(\"Failed: \" + vText);\n            }\n          }\n\n          return vText;\n      }\n\n      switch(this.getResponseType())\n      {\n        case \"text/plain\":\n        case \"text/html\":\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (qx.core.Environment.get(\"qx.debug.io.remote.data\"))\n            {\n              this.debug(\"Response: \" + vText);\n            }\n          }\n\n          return vText;\n\n        case \"application/json\":\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (qx.core.Environment.get(\"qx.debug.io.remote.data\"))\n            {\n              this.debug(\"Response: \" + vText);\n            }\n          }\n\n          try {\n            if (vText && vText.length > 0)\n            {\n              var ret;\n              if (this.getParseJson()){\n                ret = qx.lang.Json.parse(vText);\n                ret = (ret === 0 ? 0 : (ret || null));\n              } else {\n                ret = vText;\n              }\n              return ret;\n            }\n            else\n            {\n              return null;\n            }\n          }\n          catch(ex)\n          {\n            this.error(\"Could not execute json: [\" + vText + \"]\", ex);\n            return \"<pre>Could not execute json: \\n\" + vText + \"\\n</pre>\";\n          }\n\n        case \"text/javascript\":\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (qx.core.Environment.get(\"qx.debug.io.remote.data\"))\n            {\n              this.debug(\"Response: \" + vText);\n            }\n          }\n\n          try {\n            if(vText && vText.length > 0)\n            {\n              var ret = window.eval(vText);\n              return (ret === 0 ? 0 : (ret || null));\n            }\n            else\n            {\n              return null;\n            }\n          } catch(ex) {\n            this.error(\"Could not execute javascript: [\" + vText + \"]\", ex);\n            return null;\n          }\n\n        case \"application/xml\":\n          vText = this.getResponseXml();\n\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (qx.core.Environment.get(\"qx.debug.io.remote.data\"))\n            {\n              this.debug(\"Response: \" + vText);\n            }\n          }\n\n          return (vText === 0 ? 0 : (vText || null));\n\n        default:\n          this.warn(\"No valid responseType specified (\" + this.getResponseType() + \")!\");\n          return null;\n      }\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      APPLY ROUTINES\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Apply method for the \"state\" property.\n     * Fires an event for each state value to inform the listeners.\n     *\n     * @param value {var} Current value\n     * @param old {var} Previous value\n     */\n    _applyState : function(value, old)\n    {\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n          this.debug(\"State: \" + value);\n        }\n      }\n\n      switch(value)\n      {\n        case \"created\":\n          this.fireEvent(\"created\");\n          break;\n\n        case \"configured\":\n          this.fireEvent(\"configured\");\n          break;\n\n        case \"sending\":\n          this.fireEvent(\"sending\");\n          break;\n\n        case \"receiving\":\n          this.fireEvent(\"receiving\");\n          break;\n\n        case \"completed\":\n          this.fireEvent(\"completed\");\n          break;\n\n        case \"failed\":\n          this.fireEvent(\"failed\");\n          break;\n\n        case \"aborted\":\n          this.getRequest().abort();\n          this.fireEvent(\"aborted\");\n          break;\n\n        case \"timeout\":\n          this.getRequest().abort();\n          this.fireEvent(\"timeout\");\n          break;\n      }\n    }\n  },\n\n\n\n  /*\n  *****************************************************************************\n     DEFER\n  *****************************************************************************\n  */\n\n  defer : function()\n  {\n    // basic registration to qx.io.remote.Exchange\n    // the real availability check (activeX stuff and so on) follows at the first real request\n    qx.io.remote.Exchange.registerType(qx.io.remote.transport.XmlHttp, \"qx.io.remote.transport.XmlHttp\");\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function()\n  {\n    var vRequest = this.getRequest();\n\n    if (vRequest)\n    {\n      // Clean up state change handler\n      // Note that for IE the proper way to do this is to set it to a\n      // dummy function, not null (Google on \"onreadystatechange dummy IE unhook\")\n      // http://groups.google.com/group/Google-Web-Toolkit-Contributors/browse_thread/thread/7e7ee67c191a6324\n      vRequest.onreadystatechange = (function() {});\n      // Aborting\n      switch(vRequest.readyState)\n      {\n        case 1:\n        case 2:\n        case 3:\n          vRequest.abort();\n      }\n    }\n\n    this.__request = null;\n  }\n});\n"
  ]
}