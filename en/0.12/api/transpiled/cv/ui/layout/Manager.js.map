{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/layout/Manager.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "lastBodyWidth",
    "currentPageUnavailableWidth",
    "currentPageUnavailableHeight",
    "currentPageNavbarVisibility",
    "oldWidth",
    "LAYOUT_MODE",
    "COLSPAN_CLASS",
    "getCurrentPageNavbarVisibility",
    "left",
    "right",
    "top",
    "bottom",
    "cv",
    "TemplateEngine",
    "getInstance",
    "pagePartsHandler",
    "getNavbarsVisibility",
    "currentPage",
    "getColspanClass",
    "width",
    "Config",
    "maxScreenWidthColspanS",
    "maxScreenWidthColspanM",
    "adjustColumns",
    "getAvailableWidth",
    "oldClass",
    "newClass",
    "bodyWidth",
    "document",
    "documentElement",
    "clientWidth",
    "navbarVisibility",
    "querySelector",
    "widthNavbarLeft",
    "leftRect",
    "getBoundingClientRect",
    "window",
    "getComputedStyle",
    "Math",
    "round",
    "core",
    "Init",
    "getApplication",
    "getMobile",
    "widthNavbarRight",
    "rightRect",
    "getAvailableHeight",
    "windowHeight",
    "clientHeight",
    "emptyRect",
    "topNav",
    "bottomNav",
    "topNavDisplay",
    "topDisplay",
    "bottomNavDisplay",
    "bottomDisplay",
    "topRect",
    "topHeight",
    "topNavRect",
    "topNavHeight",
    "bottomNavRect",
    "bottomNavHeight",
    "bottomRect",
    "bottomHeight",
    "nav_pathRect",
    "navPathHeight",
    "max",
    "rowspanClass",
    "rowspan",
    "configSettings",
    "usedRowspans",
    "getWidgetColspan",
    "widget",
    "getColspan",
    "getColspanS",
    "getColspanM",
    "getLayoutSuffix",
    "suffix",
    "applyColumnWidths",
    "selector",
    "includeNavbars",
    "mainAreaColumns",
    "dataset",
    "mainAreaColspan",
    "parseInt",
    "defaultColumns",
    "pageSelector",
    "selectors",
    "forEach",
    "area",
    "allContainer",
    "querySelectorAll",
    "length",
    "areaColumns",
    "areaColspan",
    "child",
    "ui",
    "structure",
    "WidgetFactory",
    "getInstanceByElement",
    "ourColspan",
    "w",
    "min",
    "__applyWidthClass",
    "adjustableElements",
    "e",
    "groupChild",
    "util",
    "Tree",
    "getChildWidgets",
    "groupColspan",
    "parentGroupElement",
    "getParent",
    "parentGroupWidget",
    "parentNode",
    "elem",
    "widthClassSuffix",
    "style",
    "classList",
    "cssClass",
    "startsWith",
    "remove",
    "add",
    "layout",
    "Manager"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Manager.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n */\nqx.Class.define('cv.ui.layout.Manager', {\n\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    // use to recognize if the screen width has crossed the maxMobileScreenWidth\n    lastBodyWidth: 0,\n    currentPageUnavailableWidth: -1,\n    currentPageUnavailableHeight: -1,\n    currentPageNavbarVisibility: null,\n    oldWidth: -1,\n\n    LAYOUT_MODE: 'DEFAULT',\n\n    COLSPAN_CLASS: null,\n\n    getCurrentPageNavbarVisibility: function () {\n      if (this.currentPageNavbarVisibility === null ||\n        this.currentPageNavbarVisibility.left === null ||\n        this.currentPageNavbarVisibility.right === null ||\n        this.currentPageNavbarVisibility.top === null ||\n        this.currentPageNavbarVisibility.bottom === null\n      ) {\n        this.currentPageNavbarVisibility = cv.TemplateEngine.getInstance().pagePartsHandler.getNavbarsVisibility(cv.TemplateEngine.getInstance().currentPage);\n      }\n      return this.currentPageNavbarVisibility;\n    },\n\n    // return S, M or L depening on the passed width\n    getColspanClass: function (width) {\n      if (width <= cv.Config.maxScreenWidthColspanS) {\n        return 'S';\n      }\n      if (width <= cv.Config.maxScreenWidthColspanM) {\n        return 'M';\n      }\n      return 'L';\n    },\n\n    adjustColumns: function () {\n      const width = this.getAvailableWidth();\n      const oldClass = this.getColspanClass(this.oldWidth);\n      const newClass = this.getColspanClass(width);\n\n      this.oldWidth = width;\n      this.COLSPAN_CLASS = newClass;\n      return oldClass !== newClass;\n    },\n\n    /**\n     * return the available width for a the currently visible page\n     * the available width is calculated by subtracting the following elements widths (if they are visible) from the body width\n     * - Left-Navbar\n     * - Right-Navbar\n     */\n    getAvailableWidth: function () {\n      // currently this calculation is done once after every page scroll (where cv.TemplateEngine.getInstance()currentPageUnavailableWidth is reseted)\n      // if the screen width falls below the threshold which activates/deactivates the mobile.css\n      // the calculation has to be done again, even if the page hasn´t changed (e.g. switching between portrait and landscape mode on a mobile can cause that)\n      const bodyWidth = document.documentElement.clientWidth;\n      //      console.log(\"Mobile.css use changed \"+mobileUseChanged);\n      this.currentPageUnavailableWidth = 0;\n      const navbarVisibility = this.getCurrentPageNavbarVisibility();\n\n      const left = document.querySelector('#navbarLeft');\n      let widthNavbarLeft = 0;\n      if (left) {\n        const leftRect = left.getBoundingClientRect();\n        widthNavbarLeft = navbarVisibility.left === true && window.getComputedStyle(left)['display'] !== 'none' ? Math.round(leftRect.right - leftRect.left) : 0;\n      }\n      if (widthNavbarLeft >= bodyWidth || qx.core.Init.getApplication().getMobile()) {\n        // Left-Navbar has the same size as the complete body, this can happen, when the navbar has no content\n        // maybe there is a better solution to solve this problem\n        // OR: we have a mobile device where the nav bar is floating above the other content\n        widthNavbarLeft = 0;\n      }\n      const right = document.querySelector('#navbarRight');\n      let widthNavbarRight = 0;\n      if (right) {\n        const rightRect = right.getBoundingClientRect();\n        widthNavbarRight = navbarVisibility.right === true && window.getComputedStyle(right)['display'] !== 'none' ? Math.round(rightRect.right - rightRect.left) : 0;\n      }\n      if (widthNavbarRight >= bodyWidth || qx.core.Init.getApplication().getMobile()) {\n        // Right-Navbar has the same size as the complete body, this can happen, when the navbar has no content\n        // maybe there is a better solution to solve this problem\n        // OR: we have a mobile device where the nav bar is floating above the other content\n        widthNavbarRight = 0;\n      }\n      this.currentPageUnavailableWidth = widthNavbarLeft + widthNavbarRight + 1; // remove an additional pixel for Firefox\n      //      console.log(\"Width: \"+bodyWidth+\" - \"+widthNavbarLeft+\" - \"+widthNavbarRight);\n\n      this.lastBodyWidth = bodyWidth;\n      return bodyWidth - this.currentPageUnavailableWidth;\n    },\n\n    /**\n     * return the available height for a the currently visible page\n     * the available height is calculated by subtracting the following elements heights (if they are visible) from the window height\n     * - Top-Navigation\n     * - Top-Navbar\n     * - Bottom-Navbar\n     * - Statusbar\n     *\n     * Notice: the former way to use the subtract the main.position().top value from the total height leads to errors in certain cases\n     *         because the value of main.position().top is not reliable all the time\n     */\n    getAvailableHeight: function () {\n      const windowHeight = document.documentElement.clientHeight;\n      this.currentPageUnavailableHeight = 0;\n      const emptyRect = {\n        top: 0,\n        bottom: 0\n      };\n      const navbarVisibility = this.getCurrentPageNavbarVisibility();\n      const topNav = document.querySelector('#navbarTop');\n      const top = document.querySelector('#top');\n      const bottomNav = document.querySelector('#navbarBottom');\n      const bottom = document.querySelector('#bottom');\n      const topNavDisplay = topNav ? window.getComputedStyle(topNav)['display'] : 'none';\n      const topDisplay = top ? window.getComputedStyle(top)['display'] : 'none';\n      const bottomNavDisplay = bottomNav ? window.getComputedStyle(bottomNav)['display'] : 'none';\n      const bottomDisplay = bottom ? window.getComputedStyle(bottom)['display'] : 'none';\n      const topRect = top ? top.getBoundingClientRect() : emptyRect;\n      const topHeight = Math.round(topRect.bottom - topRect.top);\n      const topNavRect = topNav ? topNav.getBoundingClientRect() : emptyRect;\n      const topNavHeight = Math.round(topNavRect.bottom - topNavRect.top);\n      const bottomNavRect = bottomNav ? bottomNav.getBoundingClientRect() : emptyRect;\n      const bottomNavHeight = Math.round(bottomNavRect.bottom - bottomNavRect.top);\n      const bottomRect = bottom ? bottom.getBoundingClientRect() : emptyRect;\n      const bottomHeight = Math.round(bottomRect.bottom - bottomRect.top);\n      const nav_pathRect = document.querySelector('.nav_path').getBoundingClientRect();\n      const navPathHeight = Math.round(nav_pathRect.bottom - nav_pathRect.top);\n\n      if (topDisplay !== 'none' && topHeight > 0) {\n        this.currentPageUnavailableHeight += Math.max(topHeight, navPathHeight);\n      }\n      if (topNavDisplay !== 'none' && navbarVisibility.top === true && topNavHeight > 0) {\n        this.currentPageUnavailableHeight += topNavHeight;\n      }\n      if (bottomNavDisplay !== 'none' && navbarVisibility.bottom === true && bottomNavHeight > 0) {\n        this.currentPageUnavailableHeight += bottomNavHeight;\n      }\n      if (bottomDisplay !== 'none' && bottomHeight > 0) {\n        this.currentPageUnavailableHeight += bottomHeight;\n      }\n      if (this.currentPageUnavailableHeight > 0) {\n        this.currentPageUnavailableHeight += 1;// remove an additional pixel for Firefox\n      }\n      return windowHeight - this.currentPageUnavailableHeight;\n    },\n\n    rowspanClass: function (rowspan) {\n      cv.Config.configSettings.usedRowspans[rowspan] = true;\n      return 'rowspan rowspan' + rowspan;\n    },\n\n    getWidgetColspan: function(widget, width) {\n      if (widget.getColspan) {\n        if (width <= cv.Config.maxScreenWidthColspanS) {\n          return widget.getColspanS();\n        }\n        if (width <= cv.Config.maxScreenWidthColspanM) {\n          return widget.getColspanM();\n        }\n        return widget.getColspan();\n      }\n      return 0;\n    },\n\n    getLayoutSuffix: function (width) {\n      let suffix = '';\n      if (width <= cv.Config.maxScreenWidthColspanS) {\n        suffix = '-s';\n      } else if (width <= cv.Config.maxScreenWidthColspanM) {\n        suffix = '-m';\n      }\n      return suffix;\n    },\n\n    /**\n     * applies the correct width to the widgets corresponding to the given colspan setting\n     *\n     * @param selector {String?} only update elements found by the given selector\n     * @param includeNavbars {Boolean?} also update navbar elements (default: true)\n     */\n    applyColumnWidths: function (selector, includeNavbars) {\n      const width = this.getAvailableWidth();\n      const mainAreaColumns = document.querySelector('#main').dataset['columns'];\n      const mainAreaColspan = parseInt(mainAreaColumns || cv.Config.defaultColumns);\n\n      const pageSelector = selector ? selector : '#main .activePage';\n      let selectors = [];\n\n      if (includeNavbars === true) {\n        selectors = ['#navbarTop', '#navbarLeft', pageSelector, '#navbarRight', '#navbarBottom'];\n      } else {\n        selectors = [pageSelector];\n      }\n\n      selectors.forEach(function (area) {\n        const allContainer = document.querySelectorAll(area + ' .widget_container');\n        if (allContainer.length > 0) {\n          const areaColumns = document.querySelector(area).dataset['columns'];\n          const areaColspan = areaColumns || cv.Config.defaultColumns;\n          allContainer.forEach(function(child) {\n            const widget = cv.ui.structure.WidgetFactory.getInstanceByElement(child);\n            const ourColspan = this.getWidgetColspan(widget, width);\n\n            let w = 'auto';\n            if (ourColspan > 0) {\n              w = Math.min(100, ourColspan / areaColspan * 100) + '%';\n            }\n            this.__applyWidthClass(child, w);\n          }, this);\n        }\n\n        // and elements inside groups\n        const adjustableElements = document.querySelectorAll(area + ' .group .widget_container');\n        adjustableElements.forEach(function (e) {\n          const widget = cv.ui.structure.WidgetFactory.getInstanceByElement(e);\n          let ourColspan = this.getWidgetColspan(widget, width);\n          if (ourColspan === null) {\n            // workaround for nowidget groups\n            const groupChild = cv.util.Tree.getChildWidgets(widget, 'group')[0];\n            ourColspan = this.getWidgetColspan(groupChild, width);\n          }\n          let w = 'auto';\n          if (ourColspan > 0) {\n            let groupColspan = mainAreaColspan;\n            const parentGroupElement = cv.util.Tree.getParent(e, '.widget_container', '.group', 1)[0];\n            if (parentGroupElement) {\n              const parentGroupWidget = cv.ui.structure.WidgetFactory.getInstanceByElement(parentGroupElement.parentNode);\n              if (parentGroupWidget) {\n                groupColspan = Math.min(mainAreaColspan, this.getWidgetColspan(parentGroupWidget, width));\n              }\n            }\n            w = Math.min(100, ourColspan / groupColspan * 100) + '%'; // in percent\n          }\n          this.__applyWidthClass(e, w);\n        }, this);\n      }, this);\n    },\n\n    __applyWidthClass: function (elem, widthClassSuffix) {\n      if (widthClassSuffix === 'auto') {\n        elem.style.width = widthClassSuffix;\n      } else {\n        switch (this.LAYOUT_MODE) {\n          case 'GRID':\n            // remove all old width related classes\n            elem.classList.forEach(function (cssClass) {\n              if (cssClass.startsWith('width-')) {\n                elem.classList.remove(cssClass);\n              }\n            }, this);\n            elem.classList.add('width-' + parseInt(widthClassSuffix));\n            break;\n\n          default:\n            elem.style.width = widthClassSuffix;\n            break;\n        }\n      }\n    }\n  }\n});\n"
  ]
}