{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/ui/Popup.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "type",
    "setType",
    "__deactivateSelectors",
    "__elementMap",
    "events",
    "properties",
    "check",
    "init",
    "members",
    "__counter",
    "__domElement",
    "getCurrentDomElement",
    "create",
    "attributes",
    "cv",
    "ui",
    "BodyBlocker",
    "getInstance",
    "block",
    "unique",
    "topic",
    "closable",
    "hasOwnProperty",
    "body",
    "document",
    "querySelector",
    "ret_val",
    "classes",
    "getType",
    "isNew",
    "addCloseListeners",
    "push",
    "dom",
    "Element",
    "id",
    "join",
    "style",
    "html",
    "appendChild",
    "close",
    "setAttribute",
    "insertBegin",
    "destroyElement",
    "$$topic",
    "$$page",
    "page",
    "title",
    "lang",
    "Type",
    "isString",
    "innerHTML",
    "content",
    "icon",
    "progress",
    "messageContent",
    "parentNode",
    "replaceChild",
    "iconClasses",
    "util",
    "IconTools",
    "svgKUF",
    "use",
    "currentIconPath",
    "getAttribute",
    "endsWith",
    "parts",
    "split",
    "bar",
    "ProgressBar",
    "getDomElement",
    "$$widget",
    "setValue",
    "actions",
    "getOwnPropertyNames",
    "length",
    "actionTypes",
    "forEach",
    "index",
    "typeActions",
    "Array",
    "isArray",
    "target",
    "wrapper",
    "notifications",
    "charAt",
    "toUpperCase",
    "substr",
    "getWrapper",
    "action",
    "actionButton",
    "ActionRegistry",
    "createActionElement",
    "$$handler",
    "addListener",
    "width",
    "height",
    "anchor",
    "x",
    "y",
    "w",
    "h",
    "align",
    "position",
    "offset",
    "left",
    "top",
    "undefined",
    "ret_valRect",
    "getBoundingClientRect",
    "placement",
    "PopupHandler",
    "placementStrategy",
    "Math",
    "round",
    "right",
    "bottom",
    "documentElement",
    "clientWidth",
    "clientHeight",
    "reload",
    "locale",
    "Manager",
    "tr",
    "toString",
    "insertAdjacentHTML",
    "event",
    "Registration",
    "fireEvent",
    "display",
    "name",
    "removeChild",
    "unblock",
    "isClosed",
    "destruct",
    "Popup"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Popup.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n//noinspection JSUnusedGlobalSymbols\nqx.Class.define('cv.ui.Popup', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(type) {\n    if (type) {\n      this.setType(type);\n    }\n    this.__deactivateSelectors = ['#top', '#navbarTop', '#centerContainer', '#navbarBottom', '#bottom'];\n    this.__elementMap = {};\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    \"close\": \"qx.event.type.Event\"\n  },\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    type: {\n      check: \"String\",\n      init: \"\"\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __counter: 0,\n    __deactivateSelectors: null,\n    __domElement: null,\n    __elementMap: null,\n\n    getCurrentDomElement: function() {\n      return this.__domElement;\n    },\n\n    /**\n     * Create the popup element\n     *\n     * @param attributes {Map} content of the popup like title, content, position, styling etc.\n     * @return {Element} Popup as DOM Element\n     */\n    create: function (attributes) {\n      cv.ui.BodyBlocker.getInstance().block(attributes.unique, attributes.topic);\n      var closable = !attributes.hasOwnProperty(\"closable\") || attributes.closable;\n      var body = document.querySelector('body');\n      var ret_val;\n      var classes = [\"popup\", \"popup_background\", this.getType()];\n      var isNew = true;\n      var addCloseListeners = false;\n      if (attributes.type) {\n        classes.push(attributes.type);\n      }\n\n      if (!this.__domElement) {\n        ret_val = this.__domElement = qx.dom.Element.create(\"div\", {\n          id: \"popup_\" + this.__counter,\n          \"class\": classes.join(\" \"),\n          style: \"display:none\",\n          html: closable ? '<div class=\"popup_close\">X</div>' : \"\"\n        });\n        body.appendChild(ret_val);\n        this.__elementMap.close = ret_val.querySelector(\"div.popup_close\");\n        addCloseListeners = true;\n      } else {\n        isNew = false;\n        ret_val = this.__domElement;\n        ret_val.setAttribute(\"class\", classes.join(\" \"));\n        if (closable && !this.__elementMap.close) {\n          this.__domElement.close = qx.dom.Element.create(\"div\", {\"class\": \"popup_close\", \"html\": \"X\"});\n          qx.dom.Element.insertBegin(this.__domElement.close, body);\n          addCloseListeners = true;\n        } else if (!closable) {\n          this.destroyElement(\"close\");\n        }\n      }\n\n      this.__domElement.$$topic = attributes.topic;\n      this.__domElement.$$page = attributes.page;\n\n      if (attributes.title) {\n        if (!this.__elementMap.title) {\n          this.__elementMap.title = qx.dom.Element.create(\"div\", {\"class\": \"head\"});\n          ret_val.appendChild(this.__elementMap.title);\n        }\n\n        if (qx.lang.Type.isString(attributes.title)) {\n          this.__elementMap.title.innerHTML = \"\" + attributes.title;\n        } else {\n          this.__elementMap.title.appendChild(attributes.title);\n        }\n\n      }\n\n      if (attributes.content || attributes.icon || attributes.progress) {\n        if (!this.__elementMap.content) {\n          this.__elementMap.content = qx.dom.Element.create(\"div\", {\"class\": \"main\"});\n          ret_val.appendChild(this.__elementMap.content);\n        }\n\n        if (attributes.content) {\n          if (!this.__elementMap.messageContent) {\n            this.__elementMap.messageContent = qx.dom.Element.create(\"div\", {\"class\": \"message\"});\n            qx.dom.Element.insertBegin(this.__elementMap.messageContent, this.__elementMap.content);\n          }\n          if (qx.lang.Type.isString(attributes.content)) {\n            this.__elementMap.messageContent.innerHTML = attributes.content;\n          } else {\n            this.__elementMap.messageContent.parentNode.replaceChild(attributes.content, this.__elementMap.messageContent);\n            this.__elementMap.messageContent = attributes.content;\n          }\n        } else {\n          this.destroyElement(\"messageContent\");\n        }\n        \n        if (attributes.icon) {\n          if (!this.__elementMap.icon) {\n            var iconClasses = attributes.iconClasses ? \" \"+attributes.iconClasses : \"\";\n            this.__elementMap.icon = qx.dom.Element.create(\"div\", {\"html\": cv.util.IconTools.svgKUF(attributes.icon)(null, null, \"icon\" + iconClasses)});\n            qx.dom.Element.insertBegin(this.__elementMap.icon, this.__elementMap.content);\n          } else {\n            var use = this.__elementMap.icon.querySelector(\"use\");\n            var currentIconPath = use.getAttribute(\"xlink:href\");\n            if (!currentIconPath.endsWith(\"#kuf-\"+attributes.icon)) {\n              var parts = currentIconPath.split(\"#\");\n              use.setAttribute(\"xlink:href\", parts[0]+\"#kuf-\"+attributes.icon);\n            }\n          }\n        } else  {\n          this.destroyElement(\"icon\");\n        }\n\n        if (attributes.progress) {\n          if (!this.__elementMap.progress) {\n            var bar = new cv.ui.util.ProgressBar();\n            this.__elementMap.progress = bar.getDomElement();\n            this.__elementMap.content.appendChild(this.__elementMap.progress);\n          }\n          this.__elementMap.progress.$$widget.setValue(attributes.progress);\n        } else {\n          this.destroyElement(\"progress\");\n        }\n      }\n\n      if (attributes.actions && Object.getOwnPropertyNames(attributes.actions).length > 0) {\n        if (!this.__elementMap.actions) {\n          this.__elementMap.actions = qx.dom.Element.create(\"div\", {\"class\": \"actions\"});\n          ret_val.appendChild(this.__elementMap.actions);\n        } else {\n          // clear content\n          this.__elementMap.actions.innerHTML = \"\";\n        }\n        var actionTypes = Object.getOwnPropertyNames(attributes.actions).length;\n        Object.getOwnPropertyNames(attributes.actions).forEach(function (type, index) {\n          var typeActions = Array.isArray(attributes.actions[type]) ? attributes.actions[type] : [attributes.actions[type]];\n\n          var target = this.__elementMap.actions;\n          var wrapper = null;\n          if (cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)] && cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper) {\n            wrapper = cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper();\n          } else {\n            wrapper = qx.dom.Element.create('div', (actionTypes > index + 1) ? {style: \"margin-bottom: 20px\"} : {});\n          }\n          target.appendChild(wrapper);\n          target = wrapper;\n          typeActions.forEach(function (action) {\n            var actionButton = cv.core.notifications.ActionRegistry.createActionElement(type, action);\n            if (actionButton) {\n              actionButton.$$handler && actionButton.$$handler.addListener('close', function () {\n                this.close();\n              }, this);\n              target.appendChild(actionButton);\n            }\n          }, this);\n        }, this);\n      } else {\n        this.destroyElement(\"actions\");\n      }\n\n      if (attributes.width) {\n        ret_val.style.width = attributes.width;\n      }\n\n      if (attributes.height) {\n        ret_val.style.height = attributes.height;\n      }\n\n      var anchor = {x: -1, y: -1, w: 0, h: 0};\n      var align;\n      if (attributes.position) {\n        if (attributes.position.offset) {\n          var offset = attributes.position.offset();\n          anchor.x = offset.left;\n          anchor.y = offset.top;\n          anchor.w = attributes.position.width();\n          anchor.h = attributes.position.height();\n        } else {\n          if (attributes.position.hasOwnProperty('x')) {\n            anchor.x = attributes.position.x;\n          }\n          if (attributes.position.hasOwnProperty('y')) {\n            anchor.y = attributes.position.y;\n          }\n          if (attributes.position.hasOwnProperty('w')) {\n            anchor.w = attributes.position.w;\n          }\n          if (attributes.position.hasOwnProperty('h')) {\n            anchor.h = attributes.position.h;\n          }\n          if (anchor.w === 0 && anchor.h === 0) {\n            align = 5;\n          }\n        }\n      }\n      if (attributes.align !== undefined) {\n        align = attributes.align;\n      }\n      var\n        ret_valRect = ret_val.getBoundingClientRect(),\n        placement = cv.ui.PopupHandler.placementStrategy(\n        anchor,\n        {w: Math.round(ret_valRect.right - ret_valRect.left), h: Math.round(ret_valRect.bottom - ret_valRect.top)},\n        {w: document.documentElement.clientWidth, h: document.documentElement.clientHeight},\n        align\n      );\n\n      ret_val.style.left = placement.x;\n      ret_val.style.top  = placement.y;\n\n      if (!closable) {\n        var reload = '<div class=\"reload\">' +\n          '<a href=\"javascript:location.reload(true);\">' +\n          qx.locale.Manager.tr('Reload').toString() +\n          '</a>' +\n          '</div>';\n        ret_val.insertAdjacentHTML('beforeend', reload);\n      }\n\n      if (closable && addCloseListeners) {\n        this.addListener('close', this.close, this);\n        qx.event.Registration.addListener(ret_val, 'tap', function () {\n          // note: this will call two events - one for the popup itself and\n          //       one for the popup_background.\n          this.fireEvent('close');\n        }, this);\n        var close = ret_val.querySelector(\".popup_close\");\n        qx.event.Registration.addListener(close, 'tap', function () {\n          this.fireEvent('close');\n        }, this);\n      }\n\n      attributes.id = this.__counter;\n      if (isNew) {\n        ret_val.style.display = 'block';\n        this.__counter++;\n      }\n      return ret_val;\n    },\n\n    destroyElement: function(name) {\n      if (this.__elementMap[name]) {\n        this.__elementMap[name].parentNode.removeChild(this.__elementMap[name]);\n        delete this.__elementMap[name];\n      }\n    },\n\n    /**\n     * Closes this popup\n     */\n    close: function () {\n      if (this.__domElement) {\n        cv.ui.BodyBlocker.getInstance().unblock(this.__domElement.$$topic);\n        this.__domElement.parentNode.removeChild(this.__domElement);\n        this.__domElement = null;\n        this.__elementMap = {};\n      } else {\n        cv.ui.BodyBlocker.getInstance().unblock();\n      }\n    },\n\n    isClosed: function(){\n      return this.__domElement === null;\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this.close();\n  }\n});"
  ]
}