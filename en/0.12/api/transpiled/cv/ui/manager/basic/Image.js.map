{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/basic/Image.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "source",
    "__contentElements",
    "setSource",
    "properties",
    "check",
    "init",
    "nullable",
    "event",
    "apply",
    "themeable",
    "scale",
    "forceRatio",
    "allowScaleUp",
    "appearance",
    "refine",
    "allowShrinkX",
    "allowShrinkY",
    "allowGrowX",
    "allowGrowY",
    "events",
    "loadingFailed",
    "loaded",
    "aborted",
    "statics",
    "PLACEHOLDER_IMAGE",
    "members",
    "__width",
    "__height",
    "__mode",
    "__currentContentElement",
    "__wrapper",
    "__requestId",
    "_onChangeTheme",
    "_styleSource",
    "getContentElement",
    "__getSuitableContentElement",
    "_createContentElement",
    "_getContentHint",
    "width",
    "height",
    "_applyDecorator",
    "value",
    "old",
    "getSource",
    "util",
    "AliasManager",
    "getInstance",
    "resolve",
    "el",
    "getChild",
    "__setSource",
    "_applyTextColor",
    "__getMode",
    "setStyle",
    "theme",
    "manager",
    "Color",
    "removeStyle",
    "_applyPadding",
    "name",
    "element",
    "setStyles",
    "top",
    "getPaddingTop",
    "left",
    "getPaddingLeft",
    "setPadding",
    "renderLayout",
    "getPaddingRight",
    "getPaddingBottom",
    "_applyEnabled",
    "_applySource",
    "io",
    "ImageLoader",
    "isLoading",
    "abort",
    "_applyScale",
    "__setMode",
    "mode",
    "lang",
    "String",
    "startsWith",
    "isPng",
    "endsWith",
    "getScale",
    "Environment",
    "get",
    "__createSuitableContentElement",
    "tagName",
    "Clazz",
    "html",
    "Image",
    "Element",
    "Label",
    "connectWidget",
    "setRich",
    "setScale",
    "wrapper",
    "add",
    "$$disposed",
    "ResourceManager",
    "__resetSource",
    "__checkForContentElementSwitch",
    "parseInt",
    "repeat",
    "tagNameHint",
    "bom",
    "Decoration",
    "getTagName",
    "contentEl",
    "__getContentElement",
    "isFontUri",
    "__setManagedImage",
    "color",
    "getTextColor",
    "Type",
    "isString",
    "has",
    "highResolutionSource",
    "findHighResolutionSource",
    "imageWidth",
    "getImageWidth",
    "imageHeight",
    "getImageHeight",
    "setWidth",
    "setHeight",
    "backgroundSize",
    "__fireLoadEvent",
    "isLoaded",
    "__setUnmanagedImage",
    "__loadUnmanagedImage",
    "AnimationFrame",
    "request",
    "rId",
    "fireEvent",
    "bind",
    "select",
    "alphaImageLoader",
    "isFont",
    "isSvg",
    "__checkForContentElementReplacement",
    "elementToAdd",
    "currentContentElement",
    "pixel",
    "styles",
    "currentStyles",
    "getAllStyles",
    "prop",
    "backgroundImage",
    "bounds",
    "getBounds",
    "insets",
    "getInsets",
    "getStyle",
    "zIndex",
    "newEl",
    "setSelectable",
    "getSelectable",
    "isVisible",
    "hide",
    "show",
    "isIncluded",
    "exclude",
    "include",
    "container",
    "getParent",
    "index",
    "getChildren",
    "indexOf",
    "removeAt",
    "addAt",
    "hint",
    "getNodeName",
    "setValue",
    "removeAll",
    "currentEl",
    "setAttribute",
    "getAttribute",
    "flush",
    "currentDomEl",
    "getDomElement",
    "newDomEl",
    "listeners",
    "getListeners",
    "forEach",
    "listenerData",
    "addListener",
    "type",
    "handler",
    "self",
    "capture",
    "currentHash",
    "$$hash",
    "getEnabled",
    "disabled",
    "replace",
    "addState",
    "removeState",
    "split",
    "getSizeHint",
    "getWidth",
    "getHeight",
    "font",
    "Font",
    "match",
    "size",
    "getSize",
    "__updateContentHint",
    "_applyDimension",
    "isFailed",
    "load",
    "__loaderCallback",
    "resetSource",
    "resetValue",
    "child",
    "useMarkup",
    "sparts",
    "fontSource",
    "length",
    "fontStyles",
    "Object",
    "clone",
    "getStyles",
    "resource",
    "getData",
    "fromCharCode",
    "charCode",
    "decorator",
    "getDecorator",
    "hasGradient",
    "getStartColor",
    "getEndColor",
    "hasBackground",
    "getBackgroundImage",
    "attr",
    "getAttributes",
    "decoratorStyle",
    "combinedStyles",
    "style",
    "backgroundPosition",
    "backgroundRepeat",
    "getBackgroundRepeat",
    "imageInfo",
    "failed",
    "warn",
    "undefined",
    "_recalc",
    "queue",
    "Layout",
    "originalWidth",
    "originalHeight",
    "maxWidth",
    "getMaxWidth",
    "maxHeight",
    "getMaxHeight",
    "minWidth",
    "getMinWidth",
    "minHeight",
    "getMinHeight",
    "ratio",
    "getForceRatio",
    "isAllowScaleUp",
    "Math",
    "round",
    "destruct",
    "prototype",
    "hasOwnProperty",
    "call",
    "disconnectWidget",
    "_disposeMap",
    "cv",
    "basic"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Sebastian Werner (wpbasti)\n\n************************************************************************ */\n\n/**\n * The image class displays an image file\n *\n * This class supports image clipping, which means that multiple images can be combined\n * into one large image and only the relevant part is shown.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.basic.Image(\"icon/32/actions/format-justify-left.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>icon/32/actions/format-justify-left.png</code>.\n *\n * *External Documentation*\n *\n * <a href='http://qooxdoo.org/docs/#desktop/widget/image.md' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n */\nqx.Class.define('cv.ui.manager.basic.Image',\n  {\n    extend : qx.ui.core.Widget,\n\n\n\n    /*\n    *****************************************************************************\n       CONSTRUCTOR\n    *****************************************************************************\n    */\n\n    /**\n     * @param source {String?null} The URL of the image to display.\n     */\n    construct : function(source) {\n      this.__contentElements = {};\n\n      this.base(arguments);\n\n      if (source) {\n        this.setSource(source);\n      }\n    },\n\n\n\n\n    /*\n    *****************************************************************************\n       PROPERTIES\n    *****************************************************************************\n    */\n\n    properties :\n      {\n        /** The URL of the image. Setting it will possibly abort loading of current image. */\n        source :\n          {\n            check : 'String',\n            init : null,\n            nullable : true,\n            event : 'changeSource',\n            apply : '_applySource',\n            themeable : true\n          },\n\n\n        /**\n         * Whether the image should be scaled to the given dimensions\n         *\n         * This is disabled by default because it prevents the usage\n         * of image clipping when enabled.\n         */\n        scale :\n          {\n            check : 'Boolean',\n            init : false,\n            event : 'changeScale',\n            themeable : true,\n            apply : '_applyScale'\n          },\n\n        /**\n         * Whether to preserve the image ratio (ie prevent distortion), and which dimension\n         * to prioritise\n         */\n        forceRatio : {\n          init : 'auto',\n          check : [ 'disabled', 'height', 'width', 'auto' ],\n          apply : '_applyDimension'\n        },\n\n        /**\n         * Whether to allow scaling the image up\n         */\n        allowScaleUp : {\n          init : false,\n          check : 'Boolean',\n          apply : '_applyDimension'\n        },\n\n        // overridden\n        appearance :\n          {\n            refine : true,\n            init : 'image'\n          },\n\n\n        // overridden\n        allowShrinkX :\n          {\n            refine : true,\n            init : false\n          },\n\n\n        // overridden\n        allowShrinkY :\n          {\n            refine : true,\n            init : false\n          },\n\n\n        // overridden\n        allowGrowX :\n          {\n            refine : true,\n            init : false\n          },\n\n\n        // overridden\n        allowGrowY :\n          {\n            refine : true,\n            init : false\n          }\n      },\n\n\n    /*\n    *****************************************************************************\n       EVENTS\n    *****************************************************************************\n    */\n\n    events :\n      {\n        /**\n         * Fired if the image source can not be loaded. This event can only be\n         * fired for the first loading of an unmanaged resource (external image).\n         */\n        loadingFailed : 'qx.event.type.Event',\n\n\n        /**\n         * Fired if the image has been loaded. This is even true for managed\n         * resources (images known by generator).\n         */\n        loaded : 'qx.event.type.Event',\n\n\n        /** Fired when the pending request has been aborted. */\n        aborted : 'qx.event.type.Event'\n      },\n\n\n    statics:\n      {\n        PLACEHOLDER_IMAGE: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n      },\n\n    /*\n    *****************************************************************************\n       MEMBERS\n    *****************************************************************************\n    */\n\n    members :\n      {\n        __width : null,\n        __height : null,\n        __mode : null,\n        __contentElements : null,\n        __currentContentElement : null,\n        __wrapper : null,\n        __requestId : 0,\n\n\n        // overridden\n        _onChangeTheme : function() {\n          this.base(arguments);\n          // restyle source (theme change might have changed the resolved url)\n          this._styleSource();\n        },\n\n        /*\n        ---------------------------------------------------------------------------\n          WIDGET API\n        ---------------------------------------------------------------------------\n        */\n\n        // overridden\n        getContentElement : function() {\n          return this.__getSuitableContentElement();\n        },\n\n\n        // overridden\n        _createContentElement : function() {\n          return this.__getSuitableContentElement();\n        },\n\n\n        // overridden\n        _getContentHint : function() {\n          return {\n            width : this.__width || 0,\n            height : this.__height || 0\n          };\n        },\n\n        // overridden\n        _applyDecorator : function(value, old) {\n          this.base(arguments, value, old);\n\n          let source = this.getSource();\n          source = qx.util.AliasManager.getInstance().resolve(source);\n          let el = this.getContentElement();\n          if (this.__wrapper) {\n            el = el.getChild(0);\n          }\n          this.__setSource(el, source);\n        },\n\n        // overridden\n        _applyTextColor : function(value) {\n          if (this.__getMode() === 'font') {\n            let el = this.getContentElement();\n            if (this.__wrapper) {\n              el = el.getChild(0);\n            }\n\n            if (value) {\n              el.setStyle('color', qx.theme.manager.Color.getInstance().resolve(value));\n            } else {\n              el.removeStyle('color');\n            }\n          }\n        },\n\n        // overridden\n        _applyPadding : function(value, old, name) {\n          this.base(arguments, value, old, name);\n\n          const element = this.getContentElement();\n          if (this.__wrapper) {\n            element.getChild(0).setStyles({\n              top: this.getPaddingTop() || 0,\n              left: this.getPaddingLeft() || 0\n            });\n          } else if (this.__getMode() === 'font') {\n            element.setStyles({\n              top: this.getPaddingTop() || 0,\n              left: this.getPaddingLeft() || 0\n            });\n          } else {\n            element.setPadding(\n              this.getPaddingLeft() || 0, this.getPaddingTop() || 0\n            );\n          }\n        },\n\n        renderLayout : function(left, top, width, height) {\n          this.base(arguments, left, top, width, height);\n\n          const element = this.getContentElement();\n          if (this.__wrapper) {\n            element.getChild(0).setStyles({\n              width: width - (this.getPaddingLeft() || 0) - (this.getPaddingRight() || 0),\n              height: height - (this.getPaddingTop() || 0) - (this.getPaddingBottom() || 0),\n              top: this.getPaddingTop() || 0,\n              left: this.getPaddingLeft() || 0\n            });\n          }\n        },\n\n\n\n\n        /*\n        ---------------------------------------------------------------------------\n          IMAGE API\n        ---------------------------------------------------------------------------\n        */\n\n        // property apply, overridden\n        _applyEnabled : function(value, old) {\n          this.base(arguments, value, old);\n\n          if (this.getSource()) {\n            this._styleSource();\n          }\n        },\n\n\n        // property apply\n        _applySource : function(value, old) {\n          // abort loading current image\n          if (old) {\n            if (qx.io.ImageLoader.isLoading(old)) {\n              qx.io.ImageLoader.abort(old);\n            }\n          }\n\n          this._styleSource();\n        },\n\n\n        // property apply\n        _applyScale : function(value) {\n          this._styleSource();\n        },\n\n\n        /**\n         * Remembers the mode to keep track which contentElement is currently in use.\n         * @param mode {String} internal mode (alphaScaled|scaled|nonScaled)\n         */\n        __setMode : function(mode) {\n          this.__mode = mode;\n        },\n\n\n        /**\n         * Returns the current mode if set. Otherwise checks the current source and\n         * the current scaling to determine the current mode.\n         *\n         * @return {String} current internal mode\n         */\n        __getMode : function() {\n          if (this.__mode === null) {\n            const source = this.getSource();\n\n            if (source && qx.lang.String.startsWith(source, '@')) {\n              this.__mode = 'font';\n            } else if (source && qx.lang.String.startsWith(source, '<svg')) {\n              this.__mode = 'svg';\n            } else {\n              let isPng = false;\n              if (source !== null) {\n                isPng = source.endsWith('.png');\n              }\n\n              if (this.getScale() && isPng && qx.core.Environment.get('css.alphaimageloaderneeded')) {\n                this.__mode = 'alphaScaled';\n              } else if (this.getScale()) {\n                this.__mode = 'scaled';\n              } else {\n                this.__mode = 'nonScaled';\n              }\n            }\n          }\n\n          return this.__mode;\n        },\n\n\n        /**\n         * Creates a contentElement suitable for the current mode\n         *\n         * @param mode {String} internal mode\n         * @return {qx.html.Image} suitable image content element\n         */\n        __createSuitableContentElement : function(mode) {\n          let scale;\n          let tagName;\n          let Clazz = qx.html.Image;\n\n          switch (mode) {\n            case 'svg':\n              Clazz = qx.html.Element;\n              tagName = 'div';\n              break;\n            case 'font':\n              Clazz = qx.html.Label;\n              scale = true;\n              tagName = 'div';\n              break;\n            case 'alphaScaled':\n              scale = true;\n              tagName = 'div';\n              break;\n            case 'nonScaled':\n              scale = false;\n              tagName = 'div';\n              break;\n            default:\n              scale = true;\n              tagName = 'img';\n              break;\n          }\n\n          const element = new (Clazz)(tagName);\n          element.connectWidget(this);\n          element.setStyles({\n            'overflowX': 'hidden',\n            'overflowY': 'hidden',\n            'boxSizing': 'border-box'\n          });\n\n          if (mode === 'font') {\n            element.setRich(true);\n          } else if (mode !== 'svg') {\n            element.setScale(scale);\n\n            if (qx.core.Environment.get('css.alphaimageloaderneeded')) {\n              const wrapper = this.__wrapper = new qx.html.Element('div');\n              element.connectWidget(this);\n              wrapper.setStyle('position', 'absolute');\n              wrapper.add(element);\n              return wrapper;\n            }\n          }\n\n          return element;\n        },\n\n\n        /**\n         * Returns a contentElement suitable for the current mode\n         *\n         * @return {qx.html.Image} suitable image contentElement\n         */\n        __getSuitableContentElement : function() {\n          if (this.$$disposed) {\n            return null;\n          }\n\n          const mode = this.__getMode();\n\n          if (!this.__contentElements[mode]) {\n            this.__contentElements[mode] = this.__createSuitableContentElement(mode);\n          }\n\n          const element = this.__contentElements[mode];\n\n          if (!this.__currentContentElement) {\n            this.__currentContentElement = element;\n          }\n\n          return element;\n        },\n\n\n        /**\n         * Applies the source to the clipped image instance or preload\n         * an image to detect sizes and apply it afterwards.\n         *\n         */\n        _styleSource : function() {\n          const AliasManager = qx.util.AliasManager.getInstance();\n          const ResourceManager = qx.util.ResourceManager.getInstance();\n\n          let source = AliasManager.resolve(this.getSource());\n\n          let element = this.getContentElement();\n          if (this.__wrapper) {\n            element = element.getChild(0);\n          }\n\n          if (!source) {\n            this.__resetSource(element);\n            return;\n          }\n\n          this.__checkForContentElementSwitch(source);\n\n          if ((qx.core.Environment.get('engine.name') == 'mshtml') &&\n            (parseInt(qx.core.Environment.get('engine.version'), 10) < 9 ||\n              qx.core.Environment.get('browser.documentmode') < 9)) {\n            const repeat = this.getScale() ? 'scale' : 'no-repeat';\n            element.tagNameHint = qx.bom.element.Decoration.getTagName(repeat, source);\n          }\n\n          const contentEl = this.__getContentElement();\n\n          // Detect if the image registry knows this image\n          if (ResourceManager.isFontUri(source)) {\n            this.__setManagedImage(contentEl, source);\n            const color = this.getTextColor();\n            if (qx.lang.Type.isString(color)) {\n              this._applyTextColor(color, null);\n            }\n          } else if (source && source.startsWith('<svg')) {\n            this.__setManagedImage(contentEl, source);\n          } else if (ResourceManager.has(source)) {\n            const highResolutionSource = ResourceManager.findHighResolutionSource(source);\n            if (highResolutionSource) {\n              const imageWidth = ResourceManager.getImageWidth(source);\n              const imageHeight = ResourceManager.getImageHeight(source);\n              this.setWidth(imageWidth);\n              this.setHeight(imageHeight);\n\n              // set background size on current element (div or img)\n              const backgroundSize = imageWidth + 'px, ' + imageHeight + 'px';\n              this.__currentContentElement.setStyle('background-size', backgroundSize);\n\n              this.setSource(highResolutionSource);\n              source = highResolutionSource;\n            }\n            this.__setManagedImage(contentEl, source);\n            this.__fireLoadEvent();\n          } else if (qx.io.ImageLoader.isLoaded(source)) {\n            this.__setUnmanagedImage(contentEl, source);\n            this.__fireLoadEvent();\n          } else {\n            this.__loadUnmanagedImage(contentEl, source);\n          }\n        },\n\n\n        /**\n         * Helper function, which fires <code>loaded</code> event asynchronously.\n         * It emulates native <code>loaded</code> event of an image object. This\n         * helper will be called, if you try to load a managed image or an\n         * previously loaded unmanaged image.\n         */\n        __fireLoadEvent : function() {\n          this.__requestId++;\n          qx.bom.AnimationFrame.request(function(rId) {\n            // prevent firing of the event if source changed in the meantime\n            if (rId === this.__requestId) {\n              this.fireEvent('loaded');\n            } else {\n              this.fireEvent('aborted');\n            }\n          }.bind(this, this.__requestId));\n        },\n\n\n        /**\n         * Returns the content element.\n         * @return {qx.html.Image} content element\n         */\n        __getContentElement : function() {\n          let contentEl = this.__currentContentElement;\n          if (this.__wrapper) {\n            contentEl = contentEl.getChild(0);\n          }\n\n          return contentEl;\n        },\n\n\n        /**\n         * Checks if the current content element is capable to display the image\n         * with the current settings (scaling, alpha PNG)\n         *\n         * @param source {String} source of the image\n         */\n        __checkForContentElementSwitch : qx.core.Environment.select('engine.name',\n          {\n            'mshtml' : function(source) {\n              const alphaImageLoader = qx.core.Environment.get('css.alphaimageloaderneeded');\n              const isPng = source.endsWith('.png');\n              const isFont = source.startsWith('@');\n              const isSvg = source.startsWith('<svg');\n\n              if (isFont) {\n                this.__setMode('font');\n              } else if (isSvg) {\n                this.__setMode('svg');\n              } else if (alphaImageLoader && isPng) {\n                if (this.getScale() && this.__getMode() != 'alphaScaled') {\n                  this.__setMode('alphaScaled');\n                } else if (!this.getScale() && this.__getMode() != 'nonScaled') {\n                  this.__setMode('nonScaled');\n                }\n              } else if (this.getScale() && this.__getMode() != 'scaled') {\n                  this.__setMode('scaled');\n                } else if (!this.getScale() && this.__getMode() != 'nonScaled') {\n                  this.__setMode('nonScaled');\n                }\n\n              this.__checkForContentElementReplacement(this.__getSuitableContentElement());\n            },\n\n            'default' : function(source) {\n              const isFont = source && qx.lang.String.startsWith(source, '@');\n              const isSvg = source.startsWith('<svg');\n\n              if (isFont) {\n                this.__setMode('font');\n              } else if (isSvg) {\n                this.__setMode('svg');\n              } else if (this.getScale() && this.__getMode() != 'scaled') {\n                this.__setMode('scaled');\n              } else if (!this.getScale() && this.__getMode() != 'nonScaled') {\n                this.__setMode('nonScaled');\n              }\n\n              this.__checkForContentElementReplacement(this.__getSuitableContentElement());\n            }\n          }),\n\n\n        /**\n         * Checks the current child and replaces it if necessary\n         *\n         * @param elementToAdd {qx.html.Image} content element to add\n         */\n        __checkForContentElementReplacement : function(elementToAdd) {\n          const currentContentElement = this.__currentContentElement;\n\n          if (currentContentElement !== elementToAdd) {\n            if (currentContentElement !== null) {\n              const pixel = 'px';\n              const styles = {};\n\n              //inherit styles from current element\n              const currentStyles = currentContentElement.getAllStyles();\n              if (currentStyles) {\n                for (let prop in currentStyles) {\n                  styles[prop] = currentStyles[prop];\n                }\n              }\n\n              // Don't transfer background image when switching from image to icon font\n              if (this.__getMode() === 'font' || this.__getMode() === 'svg') {\n                delete styles.backgroundImage;\n              }\n\n              // Copy dimension and location of the current content element\n              const bounds = this.getBounds();\n              if (bounds !== null) {\n                styles.width = bounds.width + pixel;\n                styles.height = bounds.height + pixel;\n              }\n\n              const insets = this.getInsets();\n              styles.left = parseInt(currentContentElement.getStyle('left') || insets.left) + pixel;\n              styles.top = parseInt(currentContentElement.getStyle('top') || insets.top) + pixel;\n\n              styles.zIndex = 10;\n\n              const newEl = this.__wrapper ? elementToAdd.getChild(0) : elementToAdd;\n              newEl.setStyles(styles, true);\n              newEl.setSelectable(this.getSelectable());\n\n              if (!currentContentElement.isVisible()) {\n                elementToAdd.hide();\n              } else if (!elementToAdd.isVisible()) {\n                elementToAdd.show();\n              }\n\n              if (!currentContentElement.isIncluded()) {\n                elementToAdd.exclude();\n              } else if (!elementToAdd.isIncluded()) {\n                elementToAdd.include();\n              }\n\n              const container = currentContentElement.getParent();\n\n              if (container) {\n                const index = container.getChildren().indexOf(currentContentElement);\n                container.removeAt(index);\n                container.addAt(elementToAdd, index);\n              }\n              // force re-application of source so __setSource is called again\n              const hint = newEl.getNodeName();\n              if (newEl.setSource) {\n                newEl.setSource(null);\n              } else if (newEl.setValue) {\n                newEl.setValue('');\n              } else {\n                newEl.removeAll();\n              }\n              const currentEl = this.__getContentElement();\n              newEl.tagNameHint = hint;\n              newEl.setAttribute('class', currentEl.getAttribute('class'));\n\n              // Flush elements to make sure the DOM elements are created.\n              qx.html.Element.flush();\n              const currentDomEl = currentEl.getDomElement();\n              const newDomEl = elementToAdd.getDomElement();\n\n              // copy event listeners\n              const listeners = currentContentElement.getListeners() || [];\n              listeners.forEach(function(listenerData) {\n                elementToAdd.addListener(listenerData.type, listenerData.handler, listenerData.self, listenerData.capture);\n              });\n\n              if (currentDomEl && newDomEl) {\n                // Switch the DOM elements' hash codes. This is required for the event\n                // layer to work [BUG #7447]\n                const currentHash = currentDomEl.$$hash;\n                currentDomEl.$$hash = newDomEl.$$hash;\n                newDomEl.$$hash = currentHash;\n              }\n\n              this.__currentContentElement = elementToAdd;\n            }\n          }\n        },\n\n\n        /**\n         * Use the ResourceManager to set a managed image\n         *\n         * @param el {Element} image DOM element\n         * @param source {String} source path\n         */\n        __setManagedImage : function(el, source) {\n          const ResourceManager = qx.util.ResourceManager.getInstance();\n          const isFont = ResourceManager.isFontUri(source);\n          const isSvg = source.startsWith('<svg');\n\n          // Try to find a disabled image in registry\n          if (!this.getEnabled()) {\n            const disabled = source.replace(/\\.([a-z]+)$/, '-disabled.$1');\n            if (!isFont && ResourceManager.has(disabled)) {\n              source = disabled;\n              this.addState('replacement');\n            } else {\n              this.removeState('replacement');\n            }\n          }\n\n          // Optimize case for enabled changes when no disabled image was found\n          if (!isFont && !isSvg && el.getSource() === source) {\n            return;\n          }\n\n          // Special case for non resource manager handled font icons\n          if (isFont) {\n            // Don't use scale if size is set via postfix\n            if (this.getScale() && parseInt(source.split('/')[2], 10)) {\n              this.setScale(false);\n            }\n\n            // Adjust size if scaling is applied\n            let width;\n            let height;\n            if (this.getScale()) {\n              const hint = this.getSizeHint();\n              width = this.getWidth() || hint.width;\n              height = this.getHeight() || hint.height;\n            } else {\n              const font = qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]);\n              if (qx.core.Environment.get('qx.debug')) {\n                this.assertObject(font, 'Virtual image source contains unkown font descriptor');\n              }\n              const size = parseInt(source.split('/')[2] || font.getSize(), 10);\n              width = ResourceManager.getImageWidth(source) || size;\n              height = ResourceManager.getImageHeight(source) || size;\n            }\n\n            this.__updateContentHint(width, height);\n            this.__setSource(el, source);\n          } else if (isSvg) {\n            // Apply source\n            this.__setSource(el, source);\n\n            // Adjust size\n            this.__updateContentHint(40, 40);\n          } else {\n            // Apply source\n            this.__setSource(el, source);\n\n            // Compare with old sizes and relayout if necessary\n            this.__updateContentHint(\n              ResourceManager.getImageWidth(source),\n              ResourceManager.getImageHeight(source)\n            );\n          }\n        },\n\n        _applyDimension : function() {\n          this.base(arguments);\n\n          const isFont = this.getSource() && qx.lang.String.startsWith(this.getSource(), '@');\n          if (isFont) {\n            const el = this.getContentElement();\n            if (el) {\n              if (this.getScale()) {\n                const hint = this.getSizeHint();\n                const width = this.getWidth() || hint.width || 40;\n                const height = this.getHeight() || hint.height || 40;\n                el.setStyle('fontSize', (width > height ? height : width) + 'px');\n              } else {\n                const font = qx.theme.manager.Font.getInstance().resolve(this.getSource().match(/@([^/]+)/)[1]);\n                el.setStyle('fontSize', font.getSize() + 'px');\n              }\n            }\n          } else {\n            this.__updateContentHint();\n          }\n        },\n\n        /**\n         * Use the infos of the ImageLoader to set an unmanaged image\n         *\n         * @param el {Element} image DOM element\n         * @param source {String} source path\n         */\n        __setUnmanagedImage : function(el, source) {\n          const ImageLoader = qx.io.ImageLoader;\n\n          // Apply source\n          this.__setSource(el, source);\n\n          // Compare with old sizes and relayout if necessary\n          const width = ImageLoader.getWidth(source);\n          const height = ImageLoader.getHeight(source);\n          this.__updateContentHint(width, height);\n        },\n\n\n        /**\n         * Use the ImageLoader to load an unmanaged image\n         *\n         * @param el {Element} image DOM element\n         * @param source {String} source path\n         */\n        __loadUnmanagedImage : function(el, source) {\n          const ImageLoader = qx.io.ImageLoader;\n\n          if (qx.core.Environment.get('qx.debug')) {\n            // loading external images via HTTP/HTTPS is a common usecase, as is\n            // using data URLs.\n            const sourceLC = source.toLowerCase();\n            if (!sourceLC.startsWith('http') &&\n              !sourceLC.startsWith('data:image/')) {\n              const self = this.self(arguments);\n\n              if (!self.__warned) {\n                self.__warned = {};\n              }\n\n              if (!self.__warned[source]) {\n                this.debug('try to load an unmanaged relative image: ' + source);\n                self.__warned[source] = true;\n              }\n            }\n          }\n\n          // only try to load the image if it not already failed\n          if (!ImageLoader.isFailed(source)) {\n            ImageLoader.load(source, this.__loaderCallback, this);\n          } else {\n            this.__resetSource(el);\n          }\n        },\n\n        /**\n         * Reset source displayed by the DOM element.\n         *\n         * @param el {Element} image DOM element\n         */\n        __resetSource : function(el) {\n          if (el !== null) {\n            if (el instanceof qx.html.Image) {\n              el.resetSource();\n            } else if (el instanceof qx.html.Label) {\n              el.resetValue();\n            } else {\n              el.removeAll();\n            }\n          }\n        },\n\n        /**\n         * Combines the decorator's image styles with our own image to make sure\n         * gradient and backgroundImage decorators work on Images.\n         *\n         * @param el {Element} image DOM element\n         * @param source {String} source path\n         */\n        __setSource: function (el, source) {\n          const isFont = source && qx.lang.String.startsWith(source, '@');\n          const isSvg = source && qx.lang.String.startsWith(source, '<svg');\n\n          if (isSvg) {\n            const child = new qx.html.Element('svg');\n            child.useMarkup(source);\n            el.removeAll();\n            el.add(child);\n          } else if (isFont) {\n            const sparts = source.split('/');\n            let fontSource = source;\n            if (sparts.length > 2) {\n              fontSource = sparts[0] + '/' + sparts[1];\n            }\n\n\n            const ResourceManager = qx.util.ResourceManager.getInstance();\n            const font = qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]);\n            const fontStyles = qx.lang.Object.clone(font.getStyles());\n            delete fontStyles.color;\n            el.setStyles(fontStyles);\n            el.setStyle('font');\n            el.setStyle('display', 'table-cell');\n            el.setStyle('verticalAlign', 'middle');\n            el.setStyle('textAlign', 'center');\n\n            if (this.getScale()) {\n              el.setStyle('fontSize', (this.__width > this.__height ? this.__height : this.__width) + 'px');\n            } else {\n              const size = parseInt(sparts[2] || qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]).getSize());\n              el.setStyle('fontSize', size + 'px');\n            }\n\n            const resource = ResourceManager.getData(fontSource);\n            if (resource) {\n              el.setValue(String.fromCharCode(resource[2]));\n            } else {\n              const charCode = parseInt(qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)\\/(.*)$/)[2]), 16);\n              if (qx.core.Environment.get('qx.debug')) {\n                this.assertNumber(charCode, 'Font source needs either a glyph name or the unicode number in hex');\n              }\n              el.setValue(String.fromCharCode(charCode));\n            }\n\n            return;\n          } else if (el.getNodeName() == 'div') {\n            // checks if a decorator already set.\n            // In this case we have to merge background styles\n            const decorator = qx.theme.manager.Decoration.getInstance().resolve(this.getDecorator());\n            if (decorator) {\n              const hasGradient = (decorator.getStartColor() && decorator.getEndColor());\n              const hasBackground = decorator.getBackgroundImage();\n              if (hasGradient || hasBackground) {\n                const repeat = this.getScale() ? 'scale' : 'no-repeat';\n\n                // get the style attributes for the given source\n                const attr = qx.bom.element.Decoration.getAttributes(source, repeat);\n                // get the background image(s) defined by the decorator\n                const decoratorStyle = decorator.getStyles(true);\n\n                const combinedStyles = {\n                  'backgroundImage': attr.style.backgroundImage,\n                  'backgroundPosition': (attr.style.backgroundPosition || '0 0'),\n                  'backgroundRepeat': (attr.style.backgroundRepeat || 'no-repeat')\n                };\n\n                if (hasBackground) {\n                  combinedStyles['backgroundPosition'] += ',' + decoratorStyle['background-position'] || '0 0';\n                  combinedStyles['backgroundRepeat'] += ', ' + decorator.getBackgroundRepeat();\n                }\n\n                if (hasGradient) {\n                  combinedStyles['backgroundPosition'] += ', 0 0';\n                  combinedStyles['backgroundRepeat'] += ', no-repeat';\n                }\n\n                combinedStyles['backgroundImage'] += ',' + (decoratorStyle['background-image'] || decoratorStyle['background']);\n\n                // apply combined background images\n                el.setStyles(combinedStyles);\n\n                return;\n              }\n            } else if (el.setSource) {\n              // force re-apply to remove old decorator styles\n              el.setSource(null);\n            }\n          }\n          if (el.setSource) {\n            el.setSource(source);\n          }\n        },\n\n        /**\n         * Event handler fired after the preloader has finished loading the icon\n         *\n         * @param source {String} Image source which was loaded\n         * @param imageInfo {Map} Dimensions of the loaded image\n         */\n        __loaderCallback : function(source, imageInfo) {\n          // Ignore the callback on already disposed images\n          if (this.$$disposed === true) {\n            return;\n          }\n\n          // Ignore when the source has already been modified\n          if (source !== qx.util.AliasManager.getInstance().resolve(this.getSource())) {\n            this.fireEvent('aborted');\n            return;\n          }\n\n          /// Output a warning if the image could not loaded and quit\n          if (imageInfo.failed) {\n            this.warn('Image could not be loaded: ' + source);\n            this.fireEvent('loadingFailed');\n          } else if (imageInfo.aborted) {\n            this.fireEvent('aborted');\n            return;\n          } else {\n            this.fireEvent('loaded');\n          }\n\n          // Update image\n          this.__setUnmanagedImage(this.__getContentElement(), source);\n        },\n\n\n        /**\n         * Updates the content hint when the image size has been changed\n         *\n         * @param width {Integer} width of the image\n         * @param height {Integer} height of the image\n         */\n        __updateContentHint : function(width, height) {\n          if (width === undefined) {\n            width = this.__width;\n          }\n          if (height === undefined) {\n            height = this.__height;\n          }\n          if (this._recalc(width, height)) {\n            qx.ui.core.queue.Layout.add(this);\n          }\n        },\n\n\n        /**\n         * Recalculates the size of the image, according to scaling parameters\n         * @param originalWidth\n         * @param originalHeight\n         */\n        _recalc: function(originalWidth, originalHeight) {\n          const maxWidth = this.getMaxWidth();\n          const maxHeight = this.getMaxHeight();\n          const minWidth = this.getMinWidth();\n          const minHeight = this.getMinHeight();\n\n          let width = originalWidth;\n          let height = originalHeight;\n\n          const ratio = originalHeight / originalWidth;\n\n          switch (this.getForceRatio()) {\n            case 'height':\n              if (maxHeight !== null && height > maxHeight) {\n                height = maxHeight;\n                width = height / ratio;\n              } else if (height < minHeight) {\n                height = minHeight;\n                width = height / ratio;\n              }\n              if (height < maxHeight && this.isAllowScaleUp()) {\n                height = maxHeight;\n                width = height / ratio;\n              }\n              break;\n\n            case 'width':\n              if (maxWidth !== null && width > maxWidth) {\n                width = maxWidth;\n                height = width * ratio;\n              } else if (width < minWidth) {\n                width = minWidth;\n                height = width * ratio;\n              }\n              if (width < maxWidth && this.isAllowScaleUp()) {\n                width = maxWidth;\n                height = width * ratio;\n              }\n              break;\n\n            case 'auto':\n            case 'bestfit':\n              if (maxWidth !== null && width > maxWidth) {\n                width = maxWidth;\n                height = width * ratio;\n              } else if (width < minWidth) {\n                width = minWidth;\n                height = width * ratio;\n              }\n              if (width < maxWidth && this.isAllowScaleUp()) {\n                width = maxWidth;\n                height = width * ratio;\n              }\n              if (maxHeight !== null && height > maxHeight) {\n                height = maxHeight;\n                width = height / ratio;\n              }\n              break;\n          }\n\n          width = Math.round(width);\n          height = Math.round(height);\n          if (width != this.__width || height != this.__height) {\n            this.__width = width;\n            this.__height = height;\n            return true;\n          }\n          return false;\n        }\n      },\n\n\n    /*\n    *****************************************************************************\n       DESTRUCTOR\n    *****************************************************************************\n    */\n\n    destruct : function() {\n      for (let mode in this.__contentElements) {\n        if (Object.prototype.hasOwnProperty.call(this.__contentElements, mode)) {\n          this.__contentElements[mode].disconnectWidget(this);\n        }\n      }\n\n      delete this.__currentContentElement;\n      if (this.__wrapper) {\n        delete this.__wrapper;\n      }\n\n      this._disposeMap('__contentElements');\n    }\n  });\n"
  ]
}