{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/upload/UploadMgr.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "com",
    "zenesis",
    "upload",
    "UploadMgr",
    "construct",
    "widget",
    "uploadUrl",
    "_init",
    "statics",
    "LAST_ID",
    "properties",
    "multiple",
    "refine",
    "init",
    "folder",
    "check",
    "nullable",
    "apply",
    "filename",
    "force",
    "members",
    "_updateUploadUrl",
    "getFolder",
    "path",
    "getFullPath",
    "url",
    "cv",
    "io",
    "rest",
    "Client",
    "getBaseUrl",
    "setUploadUrl",
    "addListener",
    "evt",
    "file",
    "getData",
    "getFilename",
    "setParam",
    "isForce",
    "progressListenerId",
    "getTarget",
    "uploadedSize",
    "debug",
    "getSize",
    "Math",
    "round",
    "stateListenerId",
    "state",
    "getStatus",
    "ui",
    "manager",
    "snackbar",
    "Controller",
    "error",
    "locale",
    "Manager",
    "tr",
    "qxl",
    "dialog",
    "Dialog",
    "confirm",
    "confirmed",
    "forceUpload",
    "err",
    "getResponse",
    "lang",
    "Json",
    "parse",
    "message",
    "e",
    "info",
    "event",
    "Bus",
    "dispatchByName",
    "action",
    "removeListenerById",
    "_getUniqueFileId",
    "setForce",
    "newFile",
    "File",
    "getBrowserObject",
    "getId",
    "set",
    "size",
    "uploadWidget",
    "getUploadWidget",
    "getUploadHandler",
    "_addFile",
    "getAutoUpload",
    "beginUploads",
    "uploadFile",
    "bomFile",
    "id",
    "name",
    "fileName",
    "fileSize",
    "setSize",
    "setUploadWidget",
    "UploadButton",
    "replaceFile",
    "replacedFile",
    "setFolder",
    "getParent",
    "getName"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* UploadMgr.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Extend {com.zenesis.qx.upload.UploadMgr} to allow files to e uploaded via HTML5 drop\n */\nqx.Class.define('cv.ui.manager.upload.UploadMgr', {\n  extend : com.zenesis.qx.upload.UploadMgr,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (widget, uploadUrl) {\n    this.base(arguments, widget, uploadUrl);\n    this._init();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    LAST_ID: 0\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    multiple: {\n      refine: true,\n      init: false\n    },\n\n    folder: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_updateUploadUrl'\n    },\n\n    filename: {\n      check: 'String',\n      nullable: true\n    },\n\n    force: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  members : {\n\n    _updateUploadUrl: function () {\n      const folder = this.getFolder();\n      const path = folder ? folder.getFullPath() : '.';\n      const url = cv.io.rest.Client.getBaseUrl() + '/fs?type=file&path=' + path;\n      this.setUploadUrl(url);\n    },\n\n    _init: function () {\n      this.addListener('addFile', function(evt) {\n        const file = evt.getData();\n        const filename = this.getFilename();\n        if (filename) {\n          file.setParam('filename', filename);\n        }\n        if (this.isForce()) {\n          file.setParam('force', true);\n        }\n        const progressListenerId = file.addListener('changeProgress', function (evt) {\n          const file = evt.getTarget();\n          const uploadedSize = evt.getData();\n\n          this.debug('Upload ' + file.getFilename() + ': ' +\n            uploadedSize + ' / ' + file.getSize() + ' - ' +\n            Math.round(uploadedSize / file.getSize() * 100) + '%');\n        }, this);\n\n        const stateListenerId = file.addListener('changeState', function (evt) {\n          const state = evt.getData();\n          const file = evt.getTarget();\n\n          if (state === 'uploading') {\n            this.debug(file.getFilename() + ' (Uploading...)');\n          } else if (state === 'uploaded') {\n            this.debug(file.getFilename() + ' (Complete)');\n            if (file.getStatus() !== 200) {\n              // something went wrong\n              switch (file.getStatus()) {\n                case 406:\n                  if (this.isForce()) {\n                    cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Replacing the file failed.'));\n                  } else {\n                    qxl.dialog.Dialog.confirm(qx.locale.Manager.tr('This file already exists, do you want to replace it?'), function (confirmed) {\n                      if (confirmed) {\n                        this.forceUpload(file);\n                      }\n                    }, this, qx.locale.Manager.tr('File already exists'));\n                  }\n                  break;\n\n                case 403:\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Uploading this file is not allowed here.'));\n                  break;\n\n                default: {\n                  let err = file.getResponse();\n                  try {\n                    err = qx.lang.Json.parse(err).message;\n                  } catch (e) {\n                  }\n                  this.error(err);\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('File upload stopped with an error: %1', err));\n                  break;\n                }\n              }\n            } else {\n              cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('File has been uploaded'));\n              qx.event.message.Bus.dispatchByName('cv.manager.file', {\n                action: 'uploaded',\n                path: this.getFolder().getFullPath() + '/' + file.getFilename()\n              });\n            }\n          } else if (state === 'cancelled') {\n            this.debug(file.getFilename() + ' (Cancelled)');\n          }\n          // Remove the listeners\n          if (state === 'uploaded' || state === 'cancelled') {\n            file.removeListenerById(progressListenerId);\n            file.removeListenerById(stateListenerId);\n          }\n        }, this);\n      }, this);\n    },\n\n    /**\n     * Allocates a unique ID\n     *\n     * @return {Number}\n     */\n    _getUniqueFileId: function() {\n      return ++cv.ui.manager.upload.UploadMgr.LAST_ID;\n    },\n\n    /**\n     * Re-upload a file in forced mode\n     * @param file {com.zenesis.qx.upload.File}\n     */\n    forceUpload: function (file) {\n      this.setForce(true);\n      const newFile = new com.zenesis.qx.upload.File(file.getBrowserObject(), file.getFilename(), file.getId());\n      newFile.set({\n        size: file.getSize(),\n        uploadWidget: file.getUploadWidget()\n      });\n      newFile.setParam('force', true);\n      this.getUploadHandler()._addFile(newFile);\n      if (this.getAutoUpload()) {\n        this.getUploadHandler().beginUploads();\n      }\n    },\n\n    /**\n     * Upload file directly to the backend\n     *\n     * @param bomFile {File}\n     */\n    uploadFile: function(bomFile) {\n      const id = 'upload-' + this._getUniqueFileId();\n      const filename = typeof bomFile.name !== 'undefined' ? bomFile.name : bomFile.fileName;\n      const file = new com.zenesis.qx.upload.File(bomFile, filename, id);\n      const fileSize = typeof bomFile.size !== 'undefined' ? bomFile.size : bomFile.fileSize;\n      file.setSize(fileSize);\n      if (this.isForce()) {\n        file.setParam('force', true);\n      }\n      file.setUploadWidget(new com.zenesis.qx.upload.UploadButton());\n\n      this.getUploadHandler()._addFile(file);\n      if (this.getAutoUpload()) {\n        this.getUploadHandler().beginUploads();\n      }\n    },\n\n    /**\n     * Replace content of existing file with the upload\n     * @param bomFile {File}\n     * @param replacedFile {cv.ui.manager.model.FileItem}\n     */\n    replaceFile: function(bomFile, replacedFile) {\n      this.setFolder(replacedFile.getParent());\n      const id = 'upload-' + this._getUniqueFileId();\n      const filename = replacedFile.getName();\n      const file = new com.zenesis.qx.upload.File(bomFile, filename, id);\n      file.setParam('force', true);\n      file.setParam('filename', filename);\n      const fileSize = typeof bomFile.size !== 'undefined' ? bomFile.size : bomFile.fileSize;\n      file.setSize(fileSize);\n      file.setUploadWidget(new com.zenesis.qx.upload.UploadButton());\n\n      this.getUploadHandler()._addFile(file);\n      if (this.getAutoUpload()) {\n        this.getUploadHandler().beginUploads();\n      }\n    }\n  }\n});\n"
  ]
}