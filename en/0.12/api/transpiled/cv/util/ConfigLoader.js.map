{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ConfigLoader.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "__loadQueue",
    "data",
    "Array",
    "members",
    "__doneCallback",
    "__doneCallbackContext",
    "__xml",
    "load",
    "callback",
    "context",
    "uri",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "cv",
    "Config",
    "configSuffix",
    "testMode",
    "indexOf",
    "replace",
    "debug",
    "ajaxRequest",
    "io",
    "request",
    "Xhr",
    "push",
    "set",
    "accept",
    "cache",
    "forceReload",
    "setUserData",
    "addListenerOnce",
    "e",
    "Init",
    "getApplication",
    "block",
    "req",
    "getTarget",
    "configServer",
    "getResponseHeader",
    "xml",
    "getResponse",
    "Document",
    "fromString",
    "querySelectorAll",
    "forEach",
    "loadInclude",
    "remove",
    "getUrl",
    "documentElement",
    "getElementsByTagName",
    "length",
    "configError",
    "xmlLibVersion",
    "querySelector",
    "getAttribute",
    "undefined",
    "Version",
    "LIBRARY_VERSION",
    "parseInt",
    "libraryCheck",
    "backendName",
    "backendUrl",
    "endsWith",
    "startsWith",
    "backend",
    "_checkQueue",
    "addListener",
    "status",
    "getTransport",
    "Request",
    "isSuccessful",
    "getUserData",
    "demoUrl",
    "setUrl",
    "send",
    "includeElem",
    "url",
    "LibraryManager",
    "get",
    "xhr",
    "async",
    "getResponseText",
    "replaceWith",
    "firstChild",
    "childNodes",
    "call",
    "dispose",
    "textStatus",
    "additionalErrorInfo",
    "title",
    "locale",
    "Manager",
    "tr",
    "translate",
    "toString",
    "message",
    "link",
    "window",
    "location",
    "href",
    "split",
    "notification",
    "topic",
    "severity",
    "unique",
    "deletable",
    "notifications",
    "Router",
    "dispatchMessage",
    "error",
    "destruct",
    "ConfigLoader"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/**\n * The ConfigLoader loads CometVisu config files from the backend. If the loaded config file contains\n * <include> elements those config parts are loaded and add to the XML-Document.\n *\n * @author Tobias Bräutigam <tbraeutigam@gmail.com>\n * @since 2018\n */\n\nqx.Class.define('cv.util.ConfigLoader', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this.__loadQueue = new qx.data.Array();\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __loadQueue: null,\n    __doneCallback: null,\n    __doneCallbackContext: null,\n    __xml: null,\n\n    /**\n     * Load a config file\n     */\n    load: function (callback, context) {\n      this.__doneCallback = callback;\n      this.__doneCallbackContext = context;\n      // get the data once the page was loaded\n      var uri = qx.util.ResourceManager.getInstance().toUri('config/visu_config' + (cv.Config.configSuffix ? '_' + cv.Config.configSuffix : '') + '.xml');\n      if (cv.Config.testMode) {\n        // workaround for e2e-tests\n        uri = 'resource/config/visu_config' + (cv.Config.configSuffix ? '_' + cv.Config.configSuffix : '') + '.xml';\n      } else if (uri.indexOf(\"resource/\") === -1) {\n        // unknown config, try to add the resource part manually\n        uri = uri.replace(\"config/\", \"resource/config/\");\n      }\n      this.debug(\"Requesting \"+uri);\n      var ajaxRequest = new qx.io.request.Xhr(uri);\n      this.__loadQueue.push(uri);\n      ajaxRequest.set({\n        accept: \"application/xml\",\n        cache: !cv.Config.forceReload\n      });\n      ajaxRequest.setUserData(\"noDemo\", true);\n      ajaxRequest.addListenerOnce(\"success\", function (e) {\n        qx.core.Init.getApplication().block(false);\n        var req = e.getTarget();\n        cv.Config.configServer = req.getResponseHeader(\"Server\");\n        // Response parsed according to the server's response content type\n        var xml = req.getResponse();\n        if (xml && (typeof xml === 'string')) {\n          xml = qx.xml.Document.fromString(xml);\n        }\n        this.__xml = xml;\n        xml.querySelectorAll('include').forEach(this.loadInclude, this);\n        this.__loadQueue.remove(ajaxRequest.getUrl());\n\n        if (!xml || !xml.documentElement || xml.getElementsByTagName(\"parsererror\").length) {\n          this.configError(\"parsererror\");\n        }\n        else {\n          // check the library version\n          var xmlLibVersion = xml.querySelector('pages').getAttribute(\"lib_version\");\n          if (xmlLibVersion === undefined) {\n            xmlLibVersion = -1;\n          } else if (xmlLibVersion === '0') {\n            // special wildcard mode used in screenshot generation fixtures\n            xmlLibVersion = cv.Version.LIBRARY_VERSION;\n          } else {\n            xmlLibVersion = parseInt(xmlLibVersion);\n          }\n          if (cv.Config.libraryCheck && xmlLibVersion < cv.Version.LIBRARY_VERSION) {\n            this.configError(\"libraryerror\");\n          }\n          else {\n            let backendName = \"\"\n            if (req.getResponseHeader(\"X-CometVisu-Backend-Name\")) {\n              backendName = req.getResponseHeader(\"X-CometVisu-Backend-Name\");\n            }\n            if (req.getResponseHeader(\"X-CometVisu-Backend-LoginUrl\")) {\n              cv.Config.backendUrl = req.getResponseHeader(\"X-CometVisu-Backend-LoginUrl\");\n              if (!cv.Config.backendUrl.endsWith('/')) {\n                cv.Config.backendUrl += '/';\n              }\n              if (!backendName && cv.Config.backendUrl.startsWith(\"/rest/\")) {\n                backendName = \"openhab\";\n              }\n            }\n            if (backendName) {\n              cv.Config.backend = backendName;\n            }\n            this._checkQueue();\n          }\n        }\n      }, this);\n\n      ajaxRequest.addListener(\"statusError\", function (e) {\n        var status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status) && ajaxRequest.getUserData(\"noDemo\")) {\n          ajaxRequest.setUserData(\"noDemo\", false);\n          ajaxRequest.setUserData(\"origUrl\", ajaxRequest.getUrl());\n          this.__loadQueue.remove(ajaxRequest.getUrl());\n          var demoUrl = ajaxRequest.getUrl().replace('config/', 'demo/');\n          ajaxRequest.setUrl(demoUrl);\n          this.__loadQueue.push(demoUrl);\n          ajaxRequest.send();\n        } else if (!qx.util.Request.isSuccessful(status)) {\n          this.configError(\"filenotfound\", [ajaxRequest.getUserData(\"origUrl\"), ajaxRequest.getUrl()]);\n        }\n        else {\n          this.configError(status, null);\n        }\n      }, this);\n\n      ajaxRequest.send();\n    },\n\n    /**\n     * Load an include source and replace it with the loaded content\n     * @param includeElem {Element}\n     */\n    loadInclude: function (includeElem) {\n      var url = includeElem.getAttribute('src');\n      if (!url.startsWith('/')) {\n        url = qx.util.LibraryManager.getInstance().get('cv', 'resourceUri') + '/' + url;\n      }\n      this.__loadQueue.push(url);\n      var xhr = new qx.io.request.Xhr(url);\n      xhr.set({\n        accept: \"text/plain\",\n        async: false\n      });\n      xhr.addListenerOnce(\"success\", function(e) {\n        var req = e.getTarget();\n        var xml = qx.xml.Document.fromString('<root>' + req.getResponseText() + '</root>');\n        includeElem.replaceWith(...xml.firstChild.childNodes);\n        this.__loadQueue.remove(url);\n        this._checkQueue();\n      }, this);\n      xhr.addListener(\"statusError\", function (e) {\n        var status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.configError(\"filenotfound\", [xhr.getUrl(), '']);\n        } else {\n          this.configError(status, null);\n        }\n      }, this);\n      xhr.send();\n    },\n\n    /**\n     * Check if everything is loaded and call the callback in this case\n     * @private\n     */\n    _checkQueue: function () {\n      if (this.__loadQueue.length === 0) {\n        this.__doneCallback.call(this.__doneCallbackContext, this.__xml);\n        this.dispose();\n      }\n    },\n\n    /**\n     * Handle errors that occur during loading ot the config file\n     * @param textStatus {String} error status\n     * @param additionalErrorInfo {String} error message\n     */\n    configError: function( textStatus, additionalErrorInfo ) {\n      var configSuffix = (cv.Config.configSuffix ? cv.Config.configSuffix : '');\n      var title = qx.locale.Manager.tr('Config-File Error!').translate().toString();\n      var message = '';\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr(\"Invalid config file!\")+'<br/><a href=\"#\" onclick=\"showConfigErrors(\\'' + configSuffix + '\\')\">'+qx.locale.Manager.tr(\"Please check!\")+'</a>';\n          break;\n        case 'libraryerror':\n          var link = window.location.href.split('#')[0];\n          if (link.indexOf('?') <= 0) {\n            link = link + '?';\n          }\n          link = link + '&libraryCheck=false';\n          message = qx.locale.Manager.tr('Config file has wrong library version!').translate().toString()+'<br/>' +\n            qx.locale.Manager.tr('This can cause problems with your configuration').translate().toString()+'</br>' +\n            '<p>'+qx.locale.Manager.tr(\"You can run the %1Configuration Upgrader%2.\", '<a href=\"#\" onclick=\"showConfigErrors(\\'' + configSuffix + '\\', {upgradeVersion: true})\">', '</a>').translate().toString() +'</br>' +\n            qx.locale.Manager.tr('Or you can start without upgrading %1with possible configuration problems%2', '<a href=\"' + link + '\">', '</a>').translate().toString()+'</p>';\n          break;\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: Config file not found. Neither as normal config (%1) nor as demo config (%2).', additionalErrorInfo[0], additionalErrorInfo[1]).translate().toString();\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if( additionalErrorInfo ) {\n            message += ': ' + additionalErrorInfo;\n          }\n          else {\n            message += '.';\n          }\n      }\n      var notification = {\n        topic: \"cv.config.error\",\n        title: title,\n        message: message,\n        severity: \"urgent\",\n        unique: true,\n        deletable: false\n      };\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n      this.error(this, message.toString());\n      qx.core.Init.getApplication().block(false);\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function () {\n    // remove references\n    this.__xml = null;\n    this.__doneCallback = null;\n    this.__doneCallbackContext = null;\n  }\n});"
  ]
}