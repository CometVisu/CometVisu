{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/Color.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "statics",
    "solve2d",
    "A00",
    "A10",
    "A01",
    "A11",
    "y0",
    "y1",
    "detInv",
    "solve3d",
    "A20",
    "A21",
    "A02",
    "A12",
    "A22",
    "y2",
    "det",
    "intersect",
    "p1",
    "p2",
    "p3",
    "p4",
    "x12",
    "x",
    "y12",
    "y",
    "x34",
    "y34",
    "x31",
    "y31",
    "factors",
    "cv",
    "util",
    "Color",
    "wavelength2xy",
    "wave",
    "x_t1",
    "x_t2",
    "x_t3",
    "X",
    "Math",
    "exp",
    "y_t1",
    "y_t2",
    "Y",
    "z_t1",
    "z_t2",
    "Z",
    "temperature2xy",
    "T",
    "max",
    "min",
    "xy2sRGB",
    "xy",
    "R",
    "G",
    "B",
    "scale",
    "gamma",
    "u",
    "r",
    "g",
    "b",
    "curve",
    "component",
    "Array",
    "isArray",
    "length",
    "log10",
    "spacing",
    "position",
    "lower",
    "floor",
    "higher",
    "ceil",
    "alpha",
    "invCurve",
    "value",
    "normalized",
    "findIndex",
    "ratio",
    "construct",
    "Rxy",
    "undefined",
    "Gxy",
    "Bxy",
    "Wxy",
    "__R",
    "__G",
    "__B",
    "normFac",
    "__W",
    "__hsv",
    "h",
    "s",
    "v",
    "__syncHSV2xy",
    "members",
    "__x",
    "__y",
    "__Y",
    "__HSV_h_last",
    "__LCh_h_last",
    "__rbg",
    "__rbgw",
    "__T",
    "__Lab",
    "__LCh",
    "__getXYZ",
    "__setXYZ",
    "XYZ",
    "__gamutMap",
    "iRG",
    "iGB",
    "iBR",
    "__validateHSV",
    "force",
    "solve",
    "A1",
    "A2",
    "A3",
    "B1",
    "B2",
    "B3",
    "C1",
    "C2",
    "C3",
    "D1",
    "D2",
    "D3",
    "colorAdd",
    "a",
    "hues",
    "thisXYZ",
    "i",
    "inter1",
    "inter2",
    "fac",
    "fac2",
    "__validateRGB",
    "__rgb",
    "__validateRGBW",
    "__rgbw",
    "w2rgb",
    "w",
    "__validateT",
    "n",
    "__validateLab",
    "Xn",
    "Yn",
    "Zn",
    "f",
    "t",
    "L",
    "__validateLCh",
    "C",
    "sqrt",
    "atan2",
    "PI",
    "__invalidateBut",
    "keep",
    "keep2",
    "forEach",
    "cache",
    "d",
    "__syncRGB2xy",
    "__syncRGBW2xy",
    "__syncT2xy",
    "__syncY2xy",
    "__syncLab2xy",
    "keepLCh",
    "fInv",
    "Lab",
    "L16",
    "__syncLCh2xy",
    "cos",
    "sin",
    "changeComponent",
    "clamp",
    "split",
    "_forceHSV",
    "hsv",
    "_forceLCh",
    "LCh",
    "getComponent",
    "gamutMap",
    "Number",
    "isFinite",
    "map",
    "copy",
    "assign",
    "delta",
    "otherColor",
    "dL",
    "da",
    "db",
    "blend",
    "c",
    "c1",
    "c2",
    "abs",
    "e"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AAEAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,eAAhB,EAAiC;AAC/BC,IAAAA,MAAM,EAAEN,EAAE,CAACO,IAAH,CAAQC,MADe;;AAG/B;AACF;AACA;AACA;AACA;AACEC,IAAAA,OAAO,EAAE;AACP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsC;AAC7C,YAAMC,MAAM,GAAG,KAAKN,GAAG,GAAGG,GAAN,GAAYD,GAAG,GAAGD,GAAvB,CAAf;AACA,eAAO,CAAE,CAACG,EAAE,GAAGD,GAAL,GAAWD,GAAG,GAAGG,EAAlB,IAAwBC,MAA1B,EAAkC,CAACN,GAAG,GAAGK,EAAN,GAAWD,EAAE,GAAGH,GAAjB,IAAwBK,MAA1D,CAAP;AACD,OAlBM;;AAoBP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,OAAO,EAAE,iBAAUP,GAAV,EAAeC,GAAf,EAAoBO,GAApB,EAAyBN,GAAzB,EAA8BC,GAA9B,EAAmCM,GAAnC,EAAwCC,GAAxC,EAA6CC,GAA7C,EAAkDC,GAAlD,EAAuDR,EAAvD,EAA2DC,EAA3D,EAA+DQ,EAA/D,EAAmE;AAC1E,iBAASC,GAAT,CAAad,GAAb,EAAkBC,GAAlB,EAAuBO,GAAvB,EAA4BN,GAA5B,EAAiCC,GAAjC,EAAsCM,GAAtC,EAA2CC,GAA3C,EAAgDC,GAAhD,EAAqDC,GAArD,EAA0D;AAAE;AAC1D,iBAAOZ,GAAG,GAACG,GAAJ,GAAQS,GAAR,GAAcV,GAAG,GAACS,GAAJ,GAAQH,GAAtB,GAA4BE,GAAG,GAACT,GAAJ,GAAQQ,GAApC,GAA0CD,GAAG,GAACL,GAAJ,GAAQO,GAAlD,GAAwDD,GAAG,GAACE,GAAJ,GAAQX,GAAhE,GAAsEY,GAAG,GAACX,GAAJ,GAAQC,GAArF;AACD;;AACD,YAAMI,MAAM,GAAG,IAAEQ,GAAG,CAACd,GAAD,EAAMC,GAAN,EAAWO,GAAX,EAAgBN,GAAhB,EAAqBC,GAArB,EAA0BM,GAA1B,EAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,CAApB;AACA,eAAO,CACLE,GAAG,CAACV,EAAD,EAAMC,EAAN,EAAWQ,EAAX,EAAgBX,GAAhB,EAAqBC,GAArB,EAA0BM,GAA1B,EAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,CAAH,GAAmDN,MAD9C,EACsD;AAC3DQ,QAAAA,GAAG,CAACd,GAAD,EAAMC,GAAN,EAAWO,GAAX,EAAgBJ,EAAhB,EAAqBC,EAArB,EAA0BQ,EAA1B,EAA+BH,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,CAAH,GAAmDN,MAF9C,EAEsD;AAC3DQ,QAAAA,GAAG,CAACd,GAAD,EAAMC,GAAN,EAAWO,GAAX,EAAgBN,GAAhB,EAAqBC,GAArB,EAA0BM,GAA1B,EAA+BL,EAA/B,EAAoCC,EAApC,EAAyCQ,EAAzC,CAAH,GAAmDP,MAH9C,CAGsD;AAHtD,SAAP;AAKD,OAnDM;;AAqDP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIS,MAAAA,SAAS,EAAE,mBAASC,EAAT,EAAaC,EAAb,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyB;AAClC,YAAMC,GAAG,GAAGH,EAAE,CAACI,CAAH,GAAKL,EAAE,CAACK,CAApB;AACA,YAAMC,GAAG,GAAGL,EAAE,CAACM,CAAH,GAAKP,EAAE,CAACO,CAApB;AACA,YAAMC,GAAG,GAAGL,EAAE,CAACE,CAAH,GAAKH,EAAE,CAACG,CAApB;AACA,YAAMI,GAAG,GAAGN,EAAE,CAACI,CAAH,GAAKL,EAAE,CAACK,CAApB;AACA,YAAMG,GAAG,GAAGV,EAAE,CAACK,CAAH,GAAKH,EAAE,CAACG,CAApB;AACA,YAAMM,GAAG,GAAGX,EAAE,CAACO,CAAH,GAAKL,EAAE,CAACK,CAApB;AACA,YAAMK,OAAO,GAAGC,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAchC,OAAd,CAAsByB,GAAtB,EAA2BC,GAA3B,EAAgC,CAACL,GAAjC,EAAsC,CAACE,GAAvC,EAA4CI,GAA5C,EAAiDC,GAAjD,CAAhB;AACA,eAAO;AAACN,UAAAA,CAAC,EAACH,EAAE,CAACG,CAAH,GAAKO,OAAO,CAAC,CAAD,CAAP,GAAWJ,GAAnB;AAAwBD,UAAAA,CAAC,EAACL,EAAE,CAACK,CAAH,GAAKK,OAAO,CAAC,CAAD,CAAP,GAAWH,GAA1C;AAA+CG,UAAAA,OAAO,EAACA;AAAvD,SAAP;AACD,OAvEM;;AAyEP;AACJ;AACA;AACA;AACA;AACA;AACII,MAAAA,aAAa,EAAE,uBAAUC,IAAV,EAAgB;AAC7B,YAAMC,IAAI,GAAG,CAACD,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAME,IAAI,GAAG,CAACF,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAMG,IAAI,GAAG,CAACH,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAMI,CAAC,GAAG,QAAMC,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKL,IAAL,GAAUA,IAAnB,CAAN,GAAiC,QAAMI,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKJ,IAAL,GAAUA,IAAnB,CAAvC,GAAkE,QAAMG,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKH,IAAL,GAAUA,IAAnB,CAAlF;AACA,YAAMI,IAAI,GAAG,CAACP,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAMQ,IAAI,GAAG,CAACR,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAMS,CAAC,GAAG,QAAMJ,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKC,IAAL,GAAUA,IAAnB,CAAN,GAAiC,QAAMF,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKE,IAAL,GAAUA,IAAnB,CAAjD;AACA,YAAME,IAAI,GAAG,CAACV,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAMW,IAAI,GAAG,CAACX,IAAI,GAAC,KAAN,KAAeA,IAAI,GAAC,KAAN,GAAa,MAAb,GAAoB,MAAlC,CAAb;AACA,YAAMY,CAAC,GAAE,QAAMP,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKI,IAAL,GAAUA,IAAnB,CAAN,GAAiC,QAAML,IAAI,CAACC,GAAL,CAAS,CAAC,GAAD,GAAKK,IAAL,GAAUA,IAAnB,CAAhD;AACA,eAAO;AAAEvB,UAAAA,CAAC,EAAEgB,CAAC,IAAEA,CAAC,GAACK,CAAF,GAAIG,CAAN,CAAN;AAAgBtB,UAAAA,CAAC,EAAEmB,CAAC,IAAEL,CAAC,GAACK,CAAF,GAAIG,CAAN;AAApB,SAAP;AACD,OA3FM;;AA6FP;AACJ;AACA;AACA;AACA;AACIC,MAAAA,cAAc,EAAE,wBAAUC,CAAV,EAAa;AAC3BA,QAAAA,CAAC,GAAGT,IAAI,CAACU,GAAL,CAAS,IAAT,EAAeV,IAAI,CAACW,GAAL,CAASF,CAAT,EAAY,KAAZ,CAAf,CAAJ;AACA,YAAI1B,CAAC,GAAG0B,CAAC,IAAI,IAAL,GACJ,CAAC,CAAC,CAAC,WAAD,GAAeA,CAAf,GAAmB,WAApB,IAAmCA,CAAnC,GAAuC,WAAxC,IAAuDA,CAAvD,GAA2D,QADvD,GAEJ,CAAC,CAAC,CAAC,WAAD,GAAeA,CAAf,GAAmB,WAApB,IAAmCA,CAAnC,GAAuC,WAAxC,IAAuDA,CAAvD,GAA2D,QAF/D;AAGA,eAAO;AACL1B,UAAAA,CAAC,EAAEA,CADE;AAELE,UAAAA,CAAC,EAAEwB,CAAC,IAAI,IAAL,GACC,CAAC,CAAC,CAAC,SAAD,GAAa1B,CAAb,GAAiB,UAAlB,IAAgCA,CAAhC,GAAoC,UAArC,IAAmDA,CAAnD,GAAuD,UADxD,GAEC0B,CAAC,IAAI,IAAL,GACA,CAAC,CAAC,CAAC,SAAD,GAAa1B,CAAb,GAAiB,UAAlB,IAAgCA,CAAhC,GAAoC,UAArC,IAAmDA,CAAnD,GAAuD,UADvD,GAEA,CAAC,CAAE,YAAYA,CAAZ,GAAgB,UAAlB,IAAgCA,CAAhC,GAAoC,UAArC,IAAmDA,CAAnD,GAAuD,UANtD,CAMiE;;AANjE,SAAP;AAQD,OA/GM;;AAiHP;AACJ;AACA;AACA;AACA;AACA;AACA;AACI6B,MAAAA,OAAO,EAAE,iBAAUC,EAAV,EAAqB;AAAA,YAAPT,CAAO,uEAAH,CAAG;AAC5B,YAAML,CAAC,GAAGK,CAAC,GAAGS,EAAE,CAAC9B,CAAP,GAAW8B,EAAE,CAAC5B,CAAxB;AACA,YAAMsB,CAAC,GAAGH,CAAC,IAAI,IAAES,EAAE,CAAC9B,CAAL,GAAO8B,EAAE,CAAC5B,CAAd,CAAD,GAAoB4B,EAAE,CAAC5B,CAAjC;AACA,YAAM6B,CAAC,GAAI,YAAUf,CAAV,GAAa,YAAUK,CAAvB,GAA0B,YAAUG,CAA/C;AACA,YAAMQ,CAAC,GAAG,CAAC,SAAD,GAAWhB,CAAX,GAAc,YAAUK,CAAxB,GAA2B,YAAUG,CAA/C;AACA,YAAMS,CAAC,GAAI,YAAUjB,CAAV,GAAa,YAAUK,CAAvB,GAA0B,YAAUG,CAA/C;AACA,YAAMU,KAAK,GAAG,IAAIjB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAYI,CAAZ,EAAeC,CAAf,EAAkBC,CAAlB,CAAlB,CAN4B,CAMY;;AACxC,YAAME,KAAK,GAAG,SAARA,KAAQ,CAAAC,CAAC;AAAA,iBAAIA,CAAC,IAAE,SAAH,GAAgB,QAAMA,CAAtB,GAA4B,iBAAMA,CAAN,wBAAmB,KAAnD;AAAA,SAAf;;AACA,eAAO;AACLC,UAAAA,CAAC,EAAEF,KAAK,CAAClB,IAAI,CAACU,GAAL,CAASI,CAAC,GAAGG,KAAb,EAAoB,CAApB,CAAD,CADH;AAELI,UAAAA,CAAC,EAAEH,KAAK,CAAClB,IAAI,CAACU,GAAL,CAASK,CAAC,GAAGE,KAAb,EAAoB,CAApB,CAAD,CAFH;AAGLK,UAAAA,CAAC,EAAEJ,KAAK,CAAClB,IAAI,CAACU,GAAL,CAASM,CAAC,GAAGC,KAAb,EAAoB,CAApB,CAAD;AAHH,SAAP;AAKD,OArIM;;AAuIP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIM,MAAAA,KAAK,EAAE,eAAUC,SAAV,EAAqBD,MAArB,EAA4BN,KAA5B,EAAmC;AACxC,YAAIO,SAAS,IAAI,CAAjB,EAAoB;AAClB,iBAAQC,KAAK,CAACC,OAAN,CAAcH,MAAd,KAAwBA,MAAK,CAACI,MAAN,GAAe,CAAxC,GAA6CJ,MAAK,CAAC,CAAD,CAAL,GAASN,KAAtD,GAA8D,CAArE;AACD;;AACD,YAAIO,SAAS,IAAI,CAAjB,EAAoB;AAClB,iBAAQC,KAAK,CAACC,OAAN,CAAcH,MAAd,KAAwBA,MAAK,CAACI,MAAN,GAAe,CAAxC,GAA6CJ,MAAK,CAACA,MAAK,CAACI,MAAN,GAAa,CAAd,CAAL,GAAsBV,KAAnE,GAA2EA,KAAlF;AACD;;AACD,YAAIM,MAAK,KAAK,KAAd,EAAqB;AACnB,iBAAON,KAAK,GAAGjB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAYV,IAAI,CAACW,GAAL,CAAS,IAAEX,IAAI,CAAC4B,KAAL,CAAWJ,SAAX,IAAuB,CAAC,CAAnC,EAAuC,CAAvC,CAAZ,CAAf;AACD;;AACD,YAAID,MAAK,KAAK,KAAd,EAAqB;AACnB,iBAAON,KAAK,GAAGjB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAYV,IAAI,CAACW,GAAL,UAAS,EAAT,EAAgB,CAAC,CAAD,IAAM,IAAEa,SAAR,CAAhB,GAAqC,CAArC,CAAZ,CAAf;AACD;;AACD,YAAID,MAAK,CAACI,MAAN,KAAiB,CAArB,EAAwB;AACtB,iBAAOV,KAAK,YAAGO,SAAH,EAAiB,IAAED,MAAK,CAAC,CAAD,CAAxB,CAAZ;AACD,SAfuC,CAgBxC;;;AACA,YAAMM,OAAO,GAAG,KAAKN,MAAK,CAACI,MAAN,GAAe,CAApB,CAAhB,CAjBwC,CAiBA;;AACxC,YAAMG,QAAQ,GAAGN,SAAS,GAAGK,OAA7B;AACA,YAAME,KAAK,GAAI/B,IAAI,CAACU,GAAL,CAASV,IAAI,CAACgC,KAAL,CAAWF,QAAX,CAAT,EAA+B,CAA/B,CAAf;AACA,YAAMG,MAAM,GAAGjC,IAAI,CAACW,GAAL,CAASX,IAAI,CAACkC,IAAL,CAAUJ,QAAV,CAAT,EAA8BP,MAAK,CAACI,MAAN,GAAe,CAA7C,CAAf;AACA,YAAMQ,KAAK,GAAGL,QAAQ,GAAGC,KAAzB;AACA,eAAOd,KAAK,IAAIM,MAAK,CAACQ,KAAD,CAAL,IAAgB,IAAEI,KAAlB,IAA2BZ,MAAK,CAACU,MAAD,CAAL,GAAgBE,KAA/C,CAAZ;AACD,OArKM;;AAuKP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,QAAQ,EAAE,kBAAUC,KAAV,EAAiBd,KAAjB,EAAwBN,KAAxB,EAA+B;AACvC,YAAIoB,KAAK,IAAI,CAAb,EAAgB;AACd,iBAAO,CAAP;AACD;;AACD,YAAIA,KAAK,IAAIpB,KAAb,EAAoB;AAClB,iBAAO,CAAP;AACD;;AACD,YAAIM,KAAK,KAAK,KAAd,EAAqB;AACnB,iBAAOvB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAYV,IAAI,CAACW,GAAL,UAAS,EAAT,EAAgB,CAAC,CAAD,IAAM,IAAE0B,KAAK,GAACpB,KAAd,CAAhB,GAAuC,CAAvC,CAAZ,CAAP;AACD;;AACD,YAAIM,KAAK,KAAK,KAAd,EAAqB;AACnB,iBAAOvB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAYV,IAAI,CAACW,GAAL,CAAS,IAAEX,IAAI,CAAC4B,KAAL,CAAWS,KAAK,GAACpB,KAAjB,IAAyB,CAAC,CAArC,EAAyC,CAAzC,CAAZ,CAAP;AACD;;AACD,YAAIM,KAAK,CAACI,MAAN,KAAiB,CAArB,EAAwB;AACtB,iBAAOJ,KAAK,CAAC,CAAD,CAAL,GAAW,CAAX,YAAgBc,KAAK,GAACpB,KAAtB,EAAgCM,KAAK,CAAC,CAAD,CAArC,IAA2C,CAAlD;AACD,SAfsC,CAgBvC;;;AACA,YAAIe,UAAU,GAAGD,KAAK,GAACpB,KAAvB;AACA,YAAIgB,MAAM,GAAGV,KAAK,CAACgB,SAAN,CAAgB,UAAAxD,CAAC;AAAA,iBAAKA,CAAC,GAACuD,UAAP;AAAA,SAAjB,CAAb;;AACA,YAAIL,MAAM,GAAG,CAAb,EAAgB;AACd;AACAA,UAAAA,MAAM,GAAGV,KAAK,CAACI,MAAN,GAAe,CAAxB;AACD;;AACD,YAAII,KAAK,GAAG/B,IAAI,CAACU,GAAL,CAASuB,MAAM,GAAC,CAAhB,EAAmB,CAAnB,CAAZ;;AACA,YAAIF,KAAK,KAAKE,MAAd,EAAsB;AACpB,iBAAOF,KAAK,IAAIR,KAAK,CAACI,MAAN,GAAa,CAAjB,CAAZ;AACD;;AACD,YAAIa,KAAK,GAAG,CAACF,UAAU,GAACf,KAAK,CAACQ,KAAD,CAAjB,KAA6BR,KAAK,CAACU,MAAD,CAAL,GAAcV,KAAK,CAACQ,KAAD,CAAhD,CAAZ;AACA,eAAO/B,IAAI,CAACW,GAAL,CAAS,CAACoB,KAAK,GAAGS,KAAT,KAAiBjB,KAAK,CAACI,MAAN,GAAa,CAA9B,CAAT,EAA2C,CAA3C,CAAP;AACD;AA3MM,KARsB;;AAsN/B;AACF;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEc,IAAAA,SAAS,EAAE,qBAA8E;AAAA,UAApEC,GAAoE,uEAA9DC,SAA8D;AAAA,UAAnDC,GAAmD,uEAA7CD,SAA6C;AAAA,UAAlCE,GAAkC,uEAA5BF,SAA4B;AAAA,UAAjBG,GAAiB,uEAAXH,SAAW;AACvF,WAAKI,SAAL,GAAWL,GAAG,KAAKC,SAAR,GAAoB;AAAE5D,QAAAA,CAAC,EAAE,IAAL;AAAWE,QAAAA,CAAC,EAAE,IAAd;AAAoBmB,QAAAA,CAAC,EAAE;AAAvB,OAApB,GAAsDsC,GAAjE,CADuF,CACjB;;AACtE,WAAKM,SAAL,GAAWJ,GAAG,KAAKD,SAAR,GAAoB;AAAE5D,QAAAA,CAAC,EAAE,IAAL;AAAWE,QAAAA,CAAC,EAAE,IAAd;AAAoBmB,QAAAA,CAAC,EAAE;AAAvB,OAApB,GAAsDwC,GAAjE;AACA,WAAKK,SAAL,GAAWJ,GAAG,KAAKF,SAAR,GAAoB;AAAE5D,QAAAA,CAAC,EAAE,IAAL;AAAWE,QAAAA,CAAC,EAAE,IAAd;AAAoBmB,QAAAA,CAAC,EAAE;AAAvB,OAApB,GAAsDyC,GAAjE;;AAEA,UAAI,KAAKE,SAAL,CAAS3C,CAAT,KAAeuC,SAAnB,EAA8B;AAC5B,aAAKI,SAAL,CAAS3C,CAAT,GAAa,CAAb;AACD;;AACD,UAAI,KAAK4C,SAAL,CAAS5C,CAAT,KAAeuC,SAAnB,EAA8B;AAC5B,aAAKK,SAAL,CAAS5C,CAAT,GAAa,CAAb;AACD;;AACD,UAAI,KAAK6C,SAAL,CAAS7C,CAAT,KAAeuC,SAAnB,EAA8B;AAC5B,aAAKM,SAAL,CAAS7C,CAAT,GAAa,CAAb;AACD,OAbsF,CAevF;;;AACA,UAAI8C,OAAO,GAAG,KAAK,KAAKH,SAAL,CAAS3C,CAAT,GAAa,KAAK4C,SAAL,CAAS5C,CAAtB,GAA0B,KAAK6C,SAAL,CAAS7C,CAAxC,CAAd;AACA,WAAK2C,SAAL,CAAS3C,CAAT,IAAc8C,OAAd;AACA,WAAKF,SAAL,CAAS5C,CAAT,IAAc8C,OAAd;AACA,WAAKD,SAAL,CAAS7C,CAAT,IAAc8C,OAAd,CAnBuF,CAqBvF;;AACA,WAAKH,SAAL,CAAShD,CAAT,GAAa,KAAKgD,SAAL,CAAShE,CAAT,GAAa,KAAKgE,SAAL,CAAS3C,CAAtB,GAA0B,KAAK2C,SAAL,CAAS9D,CAAhD;AACA,WAAK8D,SAAL,CAASxC,CAAT,GAAa,CAAC,IAAI,KAAKwC,SAAL,CAAShE,CAAb,GAAiB,KAAKgE,SAAL,CAAS9D,CAA3B,IAAgC,KAAK8D,SAAL,CAAS3C,CAAzC,GAA6C,KAAK2C,SAAL,CAAS9D,CAAnE;AACA,WAAK+D,SAAL,CAASjD,CAAT,GAAa,KAAKiD,SAAL,CAASjE,CAAT,GAAa,KAAKiE,SAAL,CAAS5C,CAAtB,GAA0B,KAAK4C,SAAL,CAAS/D,CAAhD;AACA,WAAK+D,SAAL,CAASzC,CAAT,GAAa,CAAC,IAAI,KAAKyC,SAAL,CAASjE,CAAb,GAAiB,KAAKiE,SAAL,CAAS/D,CAA3B,IAAgC,KAAK+D,SAAL,CAAS5C,CAAzC,GAA6C,KAAK4C,SAAL,CAAS/D,CAAnE;AACA,WAAKgE,SAAL,CAASlD,CAAT,GAAa,KAAKkD,SAAL,CAASlE,CAAT,GAAa,KAAKkE,SAAL,CAAS7C,CAAtB,GAA0B,KAAK6C,SAAL,CAAShE,CAAhD;AACA,WAAKgE,SAAL,CAAS1C,CAAT,GAAa,CAAC,IAAI,KAAK0C,SAAL,CAASlE,CAAb,GAAiB,KAAKkE,SAAL,CAAShE,CAA3B,IAAgC,KAAKgE,SAAL,CAAS7C,CAAzC,GAA6C,KAAK6C,SAAL,CAAShE,CAAnE;;AAEA,UAAI0D,SAAS,KAAKG,GAAlB,EAAuB;AACrB,aAAKK,SAAL,GAAWL,GAAX;;AACA,YAAI,KAAKK,SAAL,CAAS/C,CAAT,KAAeuC,SAAnB,EAA8B;AAC5B,eAAKQ,SAAL,CAAS/C,CAAT,GAAa,CAAb;AACD;;AACD,aAAK+C,SAAL,CAASpD,CAAT,GAAa,KAAKoD,SAAL,CAASpE,CAAT,GAAa,KAAKoE,SAAL,CAAS/C,CAAtB,GAA0B,KAAK+C,SAAL,CAASlE,CAAhD;AACA,aAAKkE,SAAL,CAAS5C,CAAT,GAAa,CAAC,IAAI,KAAK4C,SAAL,CAASpE,CAAb,GAAiB,KAAKoE,SAAL,CAASlE,CAA3B,IAAgC,KAAKkE,SAAL,CAAS/C,CAAzC,GAA6C,KAAK+C,SAAL,CAASlE,CAAnE;AACD,OAPD,MAOO;AACL,aAAKkE,SAAL,GAAW;AACTpD,UAAAA,CAAC,EAAE,KAAKgD,SAAL,CAAShD,CAAT,GAAa,KAAKiD,SAAL,CAASjD,CAAtB,GAA0B,KAAKkD,SAAL,CAASlD,CAD7B;AAETK,UAAAA,CAAC,EAAE,KAAK2C,SAAL,CAAS3C,CAAT,GAAa,KAAK4C,SAAL,CAAS5C,CAAtB,GAA0B,KAAK6C,SAAL,CAAS7C,CAF7B;AAGTG,UAAAA,CAAC,EAAE,KAAKwC,SAAL,CAASxC,CAAT,GAAa,KAAKyC,SAAL,CAASzC,CAAtB,GAA0B,KAAK0C,SAAL,CAAS1C;AAH7B,SAAX;AAKA,aAAK4C,SAAL,CAASpE,CAAT,GAAa,KAAKoE,SAAL,CAASpD,CAAT,IAAc,KAAKoD,SAAL,CAASpD,CAAT,GAAa,KAAKoD,SAAL,CAAS/C,CAAtB,GAA0B,KAAK+C,SAAL,CAAS5C,CAAjD,CAAb;AACA,aAAK4C,SAAL,CAASlE,CAAT,GAAa,KAAKkE,SAAL,CAAS/C,CAAT,IAAc,KAAK+C,SAAL,CAASpD,CAAT,GAAa,KAAKoD,SAAL,CAAS/C,CAAtB,GAA0B,KAAK+C,SAAL,CAAS5C,CAAjD,CAAb;AACD,OA5CsF,CA8CvF;;;AACA,WAAK6C,SAAL,GAAa;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAcC,QAAAA,CAAC,EAAE;AAAjB,OAAb;;AACA,WAAKC,SAAL;AACD,KAtR8B;;AAuR/B;AACF;AACA;AACA;AACA;AACEC,IAAAA,OAAO,EAAE;AACP;AACAV,MAAAA,SAAG,EAAEJ,SAFE;AAGPK,MAAAA,SAAG,EAAEL,SAHE;AAIPM,MAAAA,SAAG,EAAEN,SAJE;AAKPQ,MAAAA,SAAG,EAAER,SALE;AAOP;;AACA;AACJ;AACA;AACA;AACIe,MAAAA,SAAG,oBAZI;;AAaP;AACJ;AACA;AACA;AACIC,MAAAA,SAAG,oBAjBI;;AAkBP;AACJ;AACA;AACA;AACIC,MAAAA,SAAG,EAAE,CAtBE;AAwBP;;AACA;AACJ;AACA;AACA;AACIR,MAAAA,SAAK,EAAET,SA7BA;;AA8BP;AACJ;AACA;AACA;AACIkB,MAAAA,SAAY,EAAE,CAlCP;;AAmCP;AACJ;AACA;AACA;AACIC,MAAAA,UAAY,EAAE,CAvCP;;AAwCP;AACJ;AACA;AACA;AACIC,MAAAA,UAAK,EAAEpB,SA5CA;;AA6CP;AACJ;AACA;AACA;AACIqB,MAAAA,UAAM,EAAErB,SAjDD;;AAkDP;AACJ;AACA;AACA;AACIsB,MAAAA,UAAG,EAAEtB,SAtDE;;AAuDP;AACJ;AACA;AACA;AACIuB,MAAAA,UAAK,EAAEvB,SA3DA;;AA4DP;AACJ;AACA;AACA;AACIwB,MAAAA,UAAK,EAAExB,SAhEA;;AAkEP;AACJ;AACA;AACA;AACA;AACIyB,MAAAA,UAAQ,EAAE,sBAAW;AAClB,eAAO;AACLrE,UAAAA,CAAC,EAAE,KAAK2D,SAAL,IAAY,KAAKE,SAAL,GAAW5D,IAAI,CAACU,GAAL,CAAS,KAAT,EAAgB,KAAKiD,SAArB,CAAvB,CADE;AAELvD,UAAAA,CAAC,EAAE,KAAKwD,SAFH;AAGLrD,UAAAA,CAAC,EAAE,CAAC,IAAI,KAAKmD,SAAT,GAAe,KAAKC,SAArB,KAA6B,KAAKC,SAAL,GAAW5D,IAAI,CAACU,GAAL,CAAS,KAAT,EAAgB,KAAKiD,SAArB,CAAxC;AAHE,SAAP;AAKF,OA7EM;;AA8EP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIU,MAAAA,UAAQ,EAAE,oBAAStE,CAAT,EAAYK,CAAZ,EAAeG,CAAf,EAAkB;AAC1B,YAAM+D,GAAG,GAAGvE,CAAC,GAAGK,CAAJ,GAAQG,CAApB,CAD0B,CAE1B;;AACA,aAAKmD,SAAL,GAAWY,GAAG,GAAG,CAAN,GAAUvE,CAAC,GAAGuE,GAAd,GAAoB,KAAKnB,SAAL,CAASpE,CAAxC;AACA,aAAK4E,SAAL,GAAWW,GAAG,GAAG,CAAN,GAAUlE,CAAC,GAAGkE,GAAd,GAAoB,KAAKnB,SAAL,CAASlE,CAAxC;AACA,aAAK2E,SAAL,GAAWxD,CAAX;AACD,OA3FM;;AA6FP;AACJ;AACA;AACA;AACA;AACA;AACA;AACImE,MAAAA,UAAU,EAAE,sBAAqC;AAAA,YAA5BxF,CAA4B,uEAAxB,KAAK2E,SAAmB;AAAA,YAAdzE,CAAc,uEAAV,KAAK0E,SAAK;AAC/C;AACA,YAAIa,GAAG,GAAGjF,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAchB,SAAd,CAAwB,KAAKsE,SAA7B,EAAkC,KAAKC,SAAvC,EAA4C,KAAKG,SAAjD,EAAsD;AAACpE,UAAAA,CAAC,EAACA,CAAH;AAAME,UAAAA,CAAC,EAACA;AAAR,SAAtD,CAAV;;AACA,YAAIuF,GAAG,CAAClF,OAAJ,CAAY,CAAZ,KAAiB,CAAjB,IAAsBkF,GAAG,CAAClF,OAAJ,CAAY,CAAZ,KAAkB,CAA5C,EAA+C;AAC7C;AACAP,UAAAA,CAAC,GAAGyF,GAAG,CAACzF,CAAR;AACAE,UAAAA,CAAC,GAAGuF,GAAG,CAACvF,CAAR;AACD,SAP8C,CAQ/C;;;AACA,YAAIwF,GAAG,GAAGlF,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAchB,SAAd,CAAwB,KAAKuE,SAA7B,EAAkC,KAAKC,SAAvC,EAA4C,KAAKE,SAAjD,EAAsD;AAACpE,UAAAA,CAAC,EAACA,CAAH;AAAME,UAAAA,CAAC,EAACA;AAAR,SAAtD,CAAV;;AACA,YAAIwF,GAAG,CAACnF,OAAJ,CAAY,CAAZ,KAAiB,CAAjB,IAAsBmF,GAAG,CAACnF,OAAJ,CAAY,CAAZ,KAAkB,CAA5C,EAA+C;AAC7C;AACAP,UAAAA,CAAC,GAAG0F,GAAG,CAAC1F,CAAR;AACAE,UAAAA,CAAC,GAAGwF,GAAG,CAACxF,CAAR;AACD,SAd8C,CAe/C;;;AACA,YAAIyF,GAAG,GAAGnF,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAchB,SAAd,CAAwB,KAAKwE,SAA7B,EAAkC,KAAKF,SAAvC,EAA4C,KAAKI,SAAjD,EAAsD;AAACpE,UAAAA,CAAC,EAACA,CAAH;AAAME,UAAAA,CAAC,EAACA;AAAR,SAAtD,CAAV;;AACA,YAAIyF,GAAG,CAACpF,OAAJ,CAAY,CAAZ,KAAiB,CAAjB,IAAsBoF,GAAG,CAACpF,OAAJ,CAAY,CAAZ,KAAkB,CAA5C,EAA+C;AAC7C;AACAP,UAAAA,CAAC,GAAG2F,GAAG,CAAC3F,CAAR;AACAE,UAAAA,CAAC,GAAGyF,GAAG,CAACzF,CAAR;AACD;;AACD,eAAO;AAACF,UAAAA,CAAC,EAAEA,CAAJ;AAAOE,UAAAA,CAAC,EAAEA;AAAV,SAAP;AACD,OA3HM;AA6HP;AACA0F,MAAAA,UAAa,EAAE,oBAAUC,KAAV,EAAiB;AAC9B;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACM,iBAASC,KAAT,CAAeC,EAAf,EAAmBC,EAAnB,EAAuBC,EAAvB,EAA2BC,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+CC,EAA/C,EAAmDC,EAAnD,EAAuDC,EAAvD,EAA2DC,EAA3D,EAA+D;AAC7D,iBAAO,CACL,CAAER,EAAE,GAACI,EAAH,GAAMI,EAAN,GAAWR,EAAE,GAACK,EAAH,GAAME,EAAjB,GAAsBN,EAAE,GAACE,EAAH,GAAMK,EAA5B,GAAiCP,EAAE,GAACI,EAAH,GAAMC,EAAvC,GAA4CJ,EAAE,GAACC,EAAH,GAAMI,EAAlD,GAAuDL,EAAE,GAACE,EAAH,GAAME,EAA/D,KAAoE,CAACT,EAAD,GAAIO,EAAJ,GAAOI,EAAP,GAAYX,EAAE,GAACQ,EAAH,GAAME,EAAlB,GAAuBT,EAAE,GAACK,EAAH,GAAMK,EAA7B,GAAkCV,EAAE,GAACO,EAAH,GAAMC,EAAxC,GAA6CP,EAAE,GAACI,EAAH,GAAMI,EAAnD,GAAwDR,EAAE,GAACK,EAAH,GAAME,EAAlI,CADK,EACkI;AACvI,WAAET,EAAE,GAACO,EAAH,GAAMI,EAAN,GAAWX,EAAE,GAACQ,EAAH,GAAME,EAAjB,GAAsBT,EAAE,GAACK,EAAH,GAAMK,EAA5B,GAAiCV,EAAE,GAACO,EAAH,GAAMC,EAAvC,GAA4CP,EAAE,GAACI,EAAH,GAAMI,EAAlD,GAAuDR,EAAE,GAACK,EAAH,GAAME,EAA/D,KAAoE,CAACT,EAAD,GAAII,EAAJ,GAAOO,EAAP,GAAYX,EAAE,GAACK,EAAH,GAAMK,EAAlB,GAAuBT,EAAE,GAACE,EAAH,GAAMQ,EAA7B,GAAkCV,EAAE,GAACI,EAAH,GAAMI,EAAxC,GAA6CP,EAAE,GAACC,EAAH,GAAMO,EAAnD,GAAwDR,EAAE,GAACE,EAAH,GAAMK,EAAlI,CAFK,EAEkI;AACvI,WAAC,CAACT,EAAD,GAAII,EAAJ,GAAOO,EAAP,GAAYX,EAAE,GAACK,EAAH,GAAMK,EAAlB,GAAuBT,EAAE,GAACE,EAAH,GAAMQ,EAA7B,GAAkCV,EAAE,GAACI,EAAH,GAAMI,EAAxC,GAA6CP,EAAE,GAACC,EAAH,GAAMO,EAAnD,GAAwDR,EAAE,GAACE,EAAH,GAAMK,EAA/D,KAAoE,CAACT,EAAD,GAAII,EAAJ,GAAOI,EAAP,GAAYR,EAAE,GAACK,EAAH,GAAME,EAAlB,GAAuBN,EAAE,GAACE,EAAH,GAAMK,EAA7B,GAAkCP,EAAE,GAACI,EAAH,GAAMC,EAAxC,GAA6CJ,EAAE,GAACC,EAAH,GAAMI,EAAnD,GAAwDL,EAAE,GAACE,EAAH,GAAME,EAAlI,CAHK,CAGkI;AAHlI,WAAP;AAKD;;AAED,YAAI,KAAKhC,SAAL,KAAeT,SAAf,IAA4BiC,KAAhC,EAAuC;AACrC,cAAI,KAAKhB,SAAL,GAAW,IAAf,EAAqB;AACnB,iBAAKR,SAAL,GAAa;AAAEC,cAAAA,CAAC,EAAE,KAAKQ,SAAV;AAAwBP,cAAAA,CAAC,EAAE,CAA3B;AAA8BC,cAAAA,CAAC,EAAE,KAAKK;AAAtC,aAAb;AACA;AACD;;AAED,cAAM8B,QAAQ,GAAG,SAAXA,QAAW,CAASC,CAAT,EAAYrE,CAAZ,EAAe;AAC9B,gBAAMvB,CAAC,GAAG4F,CAAC,CAAC5F,CAAF,GAAMuB,CAAC,CAACvB,CAAlB;AACA,gBAAMK,CAAC,GAAGuF,CAAC,CAACvF,CAAF,GAAMkB,CAAC,CAAClB,CAAlB;AACA,gBAAMG,CAAC,GAAGoF,CAAC,CAACpF,CAAF,GAAMe,CAAC,CAACf,CAAlB;AACA,mBAAO;AAACxB,cAAAA,CAAC,EAAEgB,CAAC,IAAEA,CAAC,GAACK,CAAF,GAAIG,CAAN,CAAL;AAAetB,cAAAA,CAAC,EAAEmB,CAAC,IAAEL,CAAC,GAACK,CAAF,GAAIG,CAAN,CAAnB;AAA6BR,cAAAA,CAAC,EAACA,CAA/B;AAAkCK,cAAAA,CAAC,EAACA,CAApC;AAAuCG,cAAAA,CAAC,EAACA;AAAzC,aAAP;AACD,WALD;;AAMA,cAAMqF,IAAI,GAAG,CAAC,KAAK7C,SAAN,EAAW,KAAKC,SAAhB,EAAqB,KAAKC,SAA1B,EAA+B,KAAKF,SAApC,CAAb;AACA,cAAM8C,OAAO,GAAG;AAAC9F,YAAAA,CAAC,EAAC,KAAK2D,SAAL,GAAS,KAAKE,SAAd,GAAkB,KAAKD,SAA1B;AAA+BvD,YAAAA,CAAC,EAAC,KAAKwD,SAAtC;AAA2CrD,YAAAA,CAAC,EAAE,CAAC,IAAE,KAAKmD,SAAP,GAAW,KAAKC,SAAjB,IAAsB,KAAKC,SAA3B,GAA+B,KAAKD;AAAlF,WAAhB;;AAEA,cAAI,SAAC,KAAKD,SAAL,GAAS,KAAKP,SAAL,CAASpE,CAAnB,EAAuB,CAAvB,aAA4B,KAAK4E,SAAL,GAAS,KAAKR,SAAL,CAASlE,CAA9C,EAAkD,CAAlD,IAAsD,IAA1D,EAAgE;AAC9D;AACA,iBAAKmE,SAAL,GAAa;AAAEC,cAAAA,CAAC,EAAE,KAAKQ,SAAV;AAAwBP,cAAAA,CAAC,EAAC,CAA1B;AAA6BC,cAAAA,CAAC,EAAE,KAAKK;AAArC,aAAb;AACA;AACD;;AACD,eAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAC,CAAlB,EAAqBA,CAAC,EAAtB,EAA0B;AACxB,gBAAMC,MAAM,GAAGxG,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAchB,SAAd,CAAwBmH,IAAI,CAACE,CAAD,CAA5B,EAAiCJ,QAAQ,CAACE,IAAI,CAACE,CAAD,CAAL,EAAUF,IAAI,CAACE,CAAC,GAAC,CAAH,CAAd,CAAzC,EAA+D,KAAK3C,SAApE,EAAyE;AAACpE,cAAAA,CAAC,EAAC,KAAK2E,SAAR;AAAazE,cAAAA,CAAC,EAAC,KAAK0E;AAApB,aAAzE,CAAf;AACA,gBAAMqC,MAAM,GAAGzG,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAchB,SAAd,CAAwBiH,QAAQ,CAACE,IAAI,CAACE,CAAD,CAAL,EAAUF,IAAI,CAACE,CAAC,GAAC,CAAH,CAAd,CAAhC,EAAsDF,IAAI,CAACE,CAAC,GAAC,CAAH,CAA1D,EAAiE,KAAK3C,SAAtE,EAA2E;AAACpE,cAAAA,CAAC,EAAC,KAAK2E,SAAR;AAAazE,cAAAA,CAAC,EAAC,KAAK0E;AAApB,aAA3E,CAAf,CAFwB,CAGxB;;AACA,gBAAMsC,GAAG,GAAGpB,KAAK,CACfe,IAAI,CAACE,CAAC,GAAC,CAAH,CAAJ,CAAU/F,CADK,EACF6F,IAAI,CAACE,CAAC,GAAC,CAAH,CAAJ,CAAU1F,CADR,EACWwF,IAAI,CAACE,CAAC,GAAC,CAAH,CAAJ,CAAUvF,CADrB,EAEfqF,IAAI,CAACE,CAAD,CAAJ,CAAQ/F,CAAR,GAAY,KAAKoD,SAAL,CAASpD,CAFN,EAES6F,IAAI,CAACE,CAAD,CAAJ,CAAQ1F,CAAR,GAAY,KAAK+C,SAAL,CAAS/C,CAF9B,EAEiCwF,IAAI,CAACE,CAAD,CAAJ,CAAQvF,CAAR,GAAY,KAAK4C,SAAL,CAAS5C,CAFtD,EAGf,KAAK4C,SAAL,CAASpD,CAHM,EAGH,KAAKoD,SAAL,CAAS/C,CAHN,EAGS,KAAK+C,SAAL,CAAS5C,CAHlB,EAIfsF,OAAO,CAAC9F,CAJO,EAIJ8F,OAAO,CAACzF,CAJJ,EAIOyF,OAAO,CAACtF,CAJf,CAAjB;;AAMA,gBAAIwF,MAAM,CAACzG,OAAP,CAAe,CAAf,KAAmB,CAAnB,IAAwByG,MAAM,CAACzG,OAAP,CAAe,CAAf,KAAmB,CAA3C,IAAgDyG,MAAM,CAACzG,OAAP,CAAe,CAAf,KAAmB,CAAvE,EAA0E;AACxE,mBAAK8D,SAAL,GAAa;AAAEC,gBAAAA,CAAC,EAAE,IAAEyC,CAAF,GAAI,CAAJ,GAAMG,GAAG,CAAC,CAAD,CAAH,GAAO,CAAlB;AAAqB3C,gBAAAA,CAAC,EAAE2C,GAAG,CAAC,CAAD,CAA3B;AAAgC1C,gBAAAA,CAAC,EAAE0C,GAAG,CAAC,CAAD;AAAtC,eAAb;AACA,mBAAKpC,SAAL,GAAoB,KAAKT,SAAL,CAAWC,CAA/B;AACA;AACD,aAduB,CAgBxB;;;AACA,gBAAM6C,IAAI,GAAGrB,KAAK,CAChB,CAACe,IAAI,CAACE,CAAD,CAAJ,CAAQ/F,CADO,EACJ,CAAC6F,IAAI,CAACE,CAAD,CAAJ,CAAQ1F,CADL,EACQ,CAACwF,IAAI,CAACE,CAAD,CAAJ,CAAQvF,CADjB,EAEhBqF,IAAI,CAACE,CAAD,CAAJ,CAAQ/F,CAAR,GAAY6F,IAAI,CAACE,CAAC,GAAC,CAAH,CAAJ,CAAU/F,CAAtB,GAA0B,KAAKoD,SAAL,CAASpD,CAFnB,EAEsB6F,IAAI,CAACE,CAAD,CAAJ,CAAQ1F,CAAR,GAAYwF,IAAI,CAACE,CAAC,GAAC,CAAH,CAAJ,CAAU1F,CAAtB,GAA0B,KAAK+C,SAAL,CAAS/C,CAFzD,EAE4DwF,IAAI,CAACE,CAAD,CAAJ,CAAQvF,CAAR,GAAYqF,IAAI,CAACE,CAAC,GAAC,CAAH,CAAJ,CAAUvF,CAAtB,GAA0B,KAAK4C,SAAL,CAAS5C,CAF/F,EAGhB,KAAK4C,SAAL,CAASpD,CAHO,EAGJ,KAAKoD,SAAL,CAAS/C,CAHL,EAGQ,KAAK+C,SAAL,CAAS5C,CAHjB,EAIhBsF,OAAO,CAAC9F,CAJQ,EAIL8F,OAAO,CAACzF,CAJH,EAIMyF,OAAO,CAACtF,CAJd,CAAlB;;AAMF,gBAAIyF,MAAM,CAAC1G,OAAP,CAAe,CAAf,KAAmB,CAAnB,IAAwB0G,MAAM,CAAC1G,OAAP,CAAe,CAAf,KAAmB,CAA3C,IAAgD0G,MAAM,CAAC1G,OAAP,CAAe,CAAf,KAAmB,CAAvE,EAA0E;AACxE,mBAAK8D,SAAL,GAAa;AAAEC,gBAAAA,CAAC,EAAE,CAAC,IAAEyC,CAAF,GAAI,CAAL,IAAQ,CAAR,GAAUI,IAAI,CAAC,CAAD,CAAJ,GAAQ,CAAvB;AAA0B5C,gBAAAA,CAAC,EAAE4C,IAAI,CAAC,CAAD,CAAjC;AAAsC3C,gBAAAA,CAAC,EAAE2C,IAAI,CAAC,CAAD;AAA7C,eAAb;AACA,mBAAKrC,SAAL,GAAoB,KAAKT,SAAL,CAAWC,CAA/B;AACA;AACD;;AACD,iBAAKD,SAAL,GAAa;AAAEC,cAAAA,CAAC,EAAE,CAAL;AAAQC,cAAAA,CAAC,EAAE,CAAX;AAAcC,cAAAA,CAAC,EAAE,KAAKK;AAAtB,aAAb;AACA,iBAAKC,SAAL,GAAoB,KAAKT,SAAL,CAAWC,CAA/B;AACC;AACF;AACF,OAlNM;AAoNP8C,MAAAA,UAAa,EAAE,oBAAUvB,KAAV,EAAiB;AAC9B,YAAI,KAAKwB,UAAL,KAAezD,SAAf,IAA4BiC,KAAhC,EAAuC;AACrC,eAAKwB,UAAL,GAAa,EAAb;;AADqC,+BAEnB,KAAKhC,UAAL,EAFmB;AAAA,cAE9BrE,CAF8B,kBAE9BA,CAF8B;AAAA,cAE3BK,CAF2B,kBAE3BA,CAF2B;AAAA,cAExBG,CAFwB,kBAExBA,CAFwB;;AAAA,qCAGQhB,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAcxB,OAAd,CAC3C,KAAK8E,SAAL,CAAShD,CADkC,EAC/B,KAAKgD,SAAL,CAAS3C,CADsB,EACnB,KAAK2C,SAAL,CAASxC,CADU,EAE3C,KAAKyC,SAAL,CAASjD,CAFkC,EAE/B,KAAKiD,SAAL,CAAS5C,CAFsB,EAEnB,KAAK4C,SAAL,CAASzC,CAFU,EAG3C,KAAK0C,SAAL,CAASlD,CAHkC,EAG/B,KAAKkD,SAAL,CAAS7C,CAHsB,EAGnB,KAAK6C,SAAL,CAAS1C,CAHU,EAI3CR,CAJ2C,EAIxCK,CAJwC,EAIrCG,CAJqC,CAHR;;AAAA;;AAGpC,eAAK6F,UAAL,CAAWhF,CAHyB;AAGtB,eAAKgF,UAAL,CAAW/E,CAHW;AAGR,eAAK+E,UAAL,CAAW9E,CAHH;AASrC;AACA,cAAIZ,GAAG,GAAGV,IAAI,CAACU,GAAL,CAAS,KAAK0F,UAAL,CAAWhF,CAApB,EAAuB,KAAKgF,UAAL,CAAW/E,CAAlC,EAAqC,KAAK+E,UAAL,CAAW9E,CAAhD,CAAV;;AACA,cAAIZ,GAAG,GAAG,CAAV,EAAa;AACXA,YAAAA,GAAG,GAAG,CAAN;AACD;;AACD,eAAK0F,UAAL,CAAWhF,CAAX,GAAepB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK0F,UAAL,CAAWhF,CAAX,GAAeV,GAA3B,CAAf;AACA,eAAK0F,UAAL,CAAW/E,CAAX,GAAerB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK0F,UAAL,CAAW/E,CAAX,GAAeX,GAA3B,CAAf;AACA,eAAK0F,UAAL,CAAW9E,CAAX,GAAetB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK0F,UAAL,CAAW9E,CAAX,GAAeZ,GAA3B,CAAf;AACD;AACF,OAvOM;AAyOP2F,MAAAA,UAAc,EAAE,oBAAUzB,KAAV,EAAiB;AAC/B,YAAI,KAAK0B,UAAL,KAAgB3D,SAAhB,IAA6BiC,KAAjC,EAAwC;AAAA,gCACpB,KAAKR,UAAL,EADoB;AAAA,cAC/BrE,CAD+B,mBAC/BA,CAD+B;AAAA,cAC5BK,CAD4B,mBAC5BA,CAD4B;AAAA,cACzBG,CADyB,mBACzBA,CADyB;;AAEtC,cAAIgG,KAAK,GAAGhH,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAcxB,OAAd,CACV,KAAK8E,SAAL,CAAShD,CADC,EACE,KAAKgD,SAAL,CAAS3C,CADX,EACc,KAAK2C,SAAL,CAASxC,CADvB,EAEV,KAAKyC,SAAL,CAASjD,CAFC,EAEE,KAAKiD,SAAL,CAAS5C,CAFX,EAEc,KAAK4C,SAAL,CAASzC,CAFvB,EAGV,KAAK0C,SAAL,CAASlD,CAHC,EAGE,KAAKkD,SAAL,CAAS7C,CAHX,EAGc,KAAK6C,SAAL,CAAS1C,CAHvB,EAIV,KAAK4C,SAAL,CAASpD,CAJC,EAIE,KAAKoD,SAAL,CAAS/C,CAJX,EAIc,KAAK+C,SAAL,CAAS5C,CAJvB,CAAZ;AAMA,eAAK+F,UAAL,GAAc,EAAd;;AARsC,sCASU/G,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAcxB,OAAd,CAC9C,KAAK8E,SAAL,CAAShD,CADqC,EAClC,KAAKgD,SAAL,CAAS3C,CADyB,EACtB,KAAK2C,SAAL,CAASxC,CADa,EAE9C,KAAKyC,SAAL,CAASjD,CAFqC,EAElC,KAAKiD,SAAL,CAAS5C,CAFyB,EAEtB,KAAK4C,SAAL,CAASzC,CAFa,EAG9C,KAAK0C,SAAL,CAASlD,CAHqC,EAGlC,KAAKkD,SAAL,CAAS7C,CAHyB,EAGtB,KAAK6C,SAAL,CAAS1C,CAHa,EAI9CR,CAJ8C,EAI3CK,CAJ2C,EAIxCG,CAJwC,CATV;;AAAA;;AASrC,eAAK+F,UAAL,CAAYlF,CATyB;AAStB,eAAKkF,UAAL,CAAYjF,CATU;AASP,eAAKiF,UAAL,CAAYhF,CATL;AAetC,eAAKgF,UAAL,CAAYE,CAAZ,GAAgBxG,IAAI,CAACW,GAAL,CAAS,KAAK2F,UAAL,CAAYlF,CAAZ,GAAcmF,KAAK,CAAC,CAAD,CAA5B,EAAiC,KAAKD,UAAL,CAAYjF,CAAZ,GAAckF,KAAK,CAAC,CAAD,CAApD,EAAyD,KAAKD,UAAL,CAAYhF,CAAZ,GAAciF,KAAK,CAAC,CAAD,CAA5E,CAAhB;AACA,eAAKD,UAAL,CAAYlF,CAAZ,IAAiB,KAAKkF,UAAL,CAAYE,CAAZ,GAAgBD,KAAK,CAAC,CAAD,CAAtC;AACA,eAAKD,UAAL,CAAYjF,CAAZ,IAAiB,KAAKiF,UAAL,CAAYE,CAAZ,GAAgBD,KAAK,CAAC,CAAD,CAAtC;AACA,eAAKD,UAAL,CAAYhF,CAAZ,IAAiB,KAAKgF,UAAL,CAAYE,CAAZ,GAAgBD,KAAK,CAAC,CAAD,CAAtC,CAlBsC,CAoBtC;;AACA,cAAI7F,GAAG,GAAGV,IAAI,CAACU,GAAL,CAAS,KAAK4F,UAAL,CAAYlF,CAArB,EAAwB,KAAKkF,UAAL,CAAYjF,CAApC,EAAuC,KAAKiF,UAAL,CAAYhF,CAAnD,EAAsD,KAAKgF,UAAL,CAAYE,CAAlE,CAAV;;AACA,cAAI9F,GAAG,GAAG,CAAV,EAAa;AACXA,YAAAA,GAAG,GAAG,CAAN;AACD;;AACD,eAAK4F,UAAL,CAAYlF,CAAZ,GAAgBpB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK4F,UAAL,CAAYlF,CAAZ,GAAgBV,GAA5B,CAAhB;AACA,eAAK4F,UAAL,CAAYjF,CAAZ,GAAgBrB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK4F,UAAL,CAAYjF,CAAZ,GAAgBX,GAA5B,CAAhB;AACA,eAAK4F,UAAL,CAAYhF,CAAZ,GAAgBtB,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK4F,UAAL,CAAYhF,CAAZ,GAAgBZ,GAA5B,CAAhB;AACA,eAAK4F,UAAL,CAAYE,CAAZ,GAAgBxG,IAAI,CAACU,GAAL,CAAS,CAAT,EAAY,KAAK4F,UAAL,CAAYE,CAAZ,GAAgB9F,GAA5B,CAAhB;AACD;AACF,OAxQM;AA0QP+F,MAAAA,UAAW,EAAE,oBAAU7B,KAAV,EAAiB;AAC5B;AACA;AACA;AACA;AACA;AACA,YAAI,KAAKX,UAAL,KAAatB,SAAb,IAA0BiC,KAA9B,EAAqC;AACnC,cAAM8B,CAAC,GAAG,CAAC,KAAKhD,SAAL,GAAW,MAAZ,KAAuB,KAAKC,SAAL,GAAW,MAAlC,CAAV;AACA,cAAMlD,CAAC,GAAG,CAAC,CAAC,CAAC,GAAD,GAAOiG,CAAP,GAAW,IAAZ,IAAoBA,CAApB,GAAwB,MAAzB,IAAmCA,CAAnC,GAAuC,OAAjD;AACA,eAAKzC,UAAL,GAAWjE,IAAI,CAACU,GAAL,CAAS,IAAT,EAAeV,IAAI,CAACW,GAAL,CAASF,CAAT,EAAY,KAAZ,CAAf,CAAX;AACD;AACF,OArRM;AAuRPkG,MAAAA,UAAa,EAAE,oBAAU/B,KAAV,EAAiB;AAC9B,YAAI,KAAKV,UAAL,KAAevB,SAAf,IAA4BiC,KAAhC,EAAuC;AACrC,cAAMgC,EAAE,GAAG,KAAKzD,SAAL,CAASpD,CAApB;AACA,cAAM8G,EAAE,GAAG,KAAK1D,SAAL,CAAS/C,CAApB;AACA,cAAM0G,EAAE,GAAG,KAAK3D,SAAL,CAAS5C,CAApB;;AAHqC,gCAInB,KAAK6D,UAAL,EAJmB;AAAA,cAI9BrE,CAJ8B,mBAI9BA,CAJ8B;AAAA,cAI3BK,CAJ2B,mBAI3BA,CAJ2B;AAAA,cAIxBG,CAJwB,mBAIxBA,CAJwB;;AAKrC,cAAMwG,CAAC,GAAG,SAAJA,CAAI,CAASC,CAAT,EAAY;AACpB,gBAAIA,CAAC,uBAAL,EAAmB;AACjB,qBAAO,CAAC,oBAASA,CAAT,GAAW,EAAZ,IAAgB,GAAvB;AACD;;AACD,4BAAOA,CAAP;AACD,WALD;;AAMA,eAAK9C,UAAL,GAAa;AACX+C,YAAAA,CAAC,EAAE,MAAMF,CAAC,CAAC3G,CAAC,GAACyG,EAAH,CAAP,GAAgB,EADR;AAEXlB,YAAAA,CAAC,EAAE,OAAOoB,CAAC,CAAChH,CAAC,GAAC6G,EAAH,CAAD,GAAUG,CAAC,CAAC3G,CAAC,GAACyG,EAAH,CAAlB,CAFQ;AAGXvF,YAAAA,CAAC,EAAE,OAAOyF,CAAC,CAAC3G,CAAC,GAACyG,EAAH,CAAD,GAAUE,CAAC,CAACxG,CAAC,GAACuG,EAAH,CAAlB;AAHQ,WAAb;AAKD;AACF,OAzSM;AA2SPI,MAAAA,UAAa,EAAE,oBAAUtC,KAAV,EAAiB;AAC9B,aAAK+B,UAAL;;AACA,YAAI,KAAKxC,UAAL,KAAexB,SAAf,IAA4BiC,KAAhC,EAAuC;AACrC,eAAKT,UAAL,GAAa;AACX8C,YAAAA,CAAC,EAAE,KAAK/C,UAAL,CAAW+C,CAAX,GAAe,GADP;AACY;AACvBE,YAAAA,CAAC,EAAEnH,IAAI,CAACoH,IAAL,CAAU,cAAKlD,UAAL,CAAWyB,CAAX,EAAc,CAAd,aAAkB,KAAKzB,UAAL,CAAW5C,CAA7B,EAAgC,CAAhC,CAAV,IAA+C,GAFvC;AAE4C;AACvD+B,YAAAA,CAAC,EAAE,CAACrD,IAAI,CAACqH,KAAL,CAAW,KAAKnD,UAAL,CAAW5C,CAAtB,EAAyB,KAAK4C,UAAL,CAAWyB,CAApC,KAAwC,IAAE3F,IAAI,CAACsH,EAA/C,IAAmD,CAApD,IAAuD,CAH/C,CAGiD;;AAHjD,WAAb;;AAKA,cAAI,KAAKnD,UAAL,CAAWgD,CAAX,GAAe,IAAnB,EAAyB;AACvB,iBAAKhD,UAAL,CAAWd,CAAX,GAAe,KAAKS,UAApB;AACD,WAFD,MAEO;AACL,iBAAKA,UAAL,GAAoB,KAAKK,UAAL,CAAWd,CAA/B;AACD;AACF;AACF,OAzTM;;AA2TP;AACJ;AACA;AACA;AACA;AACA;AACIkE,MAAAA,UAjUO,sBAiUSC,IAjUT,EAiU2B;AAAA;;AAAA,YAAZC,KAAY,uEAAJ,EAAI;AAChC,SACE,YADF,EAEE,YAFF,EAGE,WAHF,EAIE,YAJF,EAKE,YALF,EAME,YANF,EAOEC,OAPF,CAOU,UAAAC,KAAK,EAAI;AACjB,cAAIA,KAAK,KAAKH,IAAV,IAAkBG,KAAK,KAAKF,KAAhC,EAAuC;AACrC,YAAA,KAAI,CAACE,KAAD,CAAJ,GAAchF,SAAd;AACD;AACF,SAXD;AAYD,OA9UM;AAgVP;AACAa,MAAAA,SAAY,EAAE,qBAAY;AACxB;AACA,YAAIpC,CAAJ;AAAO,YAAIC,CAAJ;AAAO,YAAIC,CAAJ;AAAO,YAAIH,CAAJ;AAAO,YAAIyG,CAAJ,CAFJ,CAEmB;;AAC3C,YAAI,KAAKxE,SAAL,CAAWC,CAAX,sBAAJ,EAAwB;AACtB,cAAIlC,EAAC,GAAG,CAAC,KAAKiC,SAAL,CAAWC,CAAX,IAAD,IAAuB,CAA/B;;AACAjC,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAGF,EAAJ;AAAOG,UAAAA,CAAC,GAAG,CAAJ,CAFQ,CAEmB;AAC1C,SAHD,MAGO,IAAI,KAAK8B,SAAL,CAAWC,CAAX,qBAAJ,EAAwB;AAC7BlC,UAAAA,CAAC,GAAG,CAAC,KAAKiC,SAAL,CAAWC,CAAX,sBAAD,IAAuB,CAA3B;AAA8BuE,UAAAA,CAAC,GAAG,IAAEzG,CAAN,CADD,CACY;;AACzCC,UAAAA,CAAC,GAAGwG,CAAJ;AAAOvG,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAG,CAAJ,CAFe,CAEY;AAC1C,SAHM,MAGA,IAAI,KAAK8B,SAAL,CAAWC,CAAX,MAAJ,EAAwB;AAC7B,cAAIlC,GAAC,GAAG,CAAC,KAAKiC,SAAL,CAAWC,CAAX,qBAAD,IAAuB,CAA/B;;AACAjC,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAGH,GAAJ,CAFe,CAEY;AAC1C,SAHM,MAGA,IAAI,KAAKiC,SAAL,CAAWC,CAAX,qBAAJ,EAAwB;AAC7BlC,UAAAA,CAAC,GAAG,CAAC,KAAKiC,SAAL,CAAWC,CAAX,MAAD,IAAuB,CAA3B;AAA8BuE,UAAAA,CAAC,GAAG,IAAEzG,CAAN,CADD,CACY;;AACzCC,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAGuG,CAAJ;AAAOtG,UAAAA,CAAC,GAAG,CAAJ,CAFe,CAEY;AAC1C,SAHM,MAGA,IAAI,KAAK8B,SAAL,CAAWC,CAAX,qBAAJ,EAAwB;AAC7BlC,UAAAA,CAAC,GAAG,CAAC,KAAKiC,SAAL,CAAWC,CAAX,qBAAD,IAAuB,CAA3B;AACAjC,UAAAA,CAAC,GAAGD,CAAJ;AAAOE,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAG,CAAJ,CAFe,CAEY;AAC1C,SAHM,MAGA;AACLH,UAAAA,CAAC,GAAG,CAAC,KAAKiC,SAAL,CAAWC,CAAX,qBAAD,IAAuB,CAA3B;AAA8BuE,UAAAA,CAAC,GAAG,IAAEzG,CAAN,CADzB,CACoC;;AACzCC,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAG,CAAJ;AAAOC,UAAAA,CAAC,GAAGsG,CAAJ,CAFT,CAEoC;AAC1C,SArBuB,CAuBxB;;;AACA,YAAM7H,CAAC,GAAG,CAAC,CAAC,KAAKgD,SAAL,CAAShD,CAAT,GAAaqB,CAAb,GAAiB,KAAK4B,SAAL,CAASjD,CAAT,GAAasB,CAA9B,GAAkC,KAAK4B,SAAL,CAASlD,CAAT,GAAauB,CAAhD,IAAqD,KAAK8B,SAAL,CAAWE,CAAhE,GAAoE,CAAC,IAAE,KAAKF,SAAL,CAAWE,CAAd,IAAmB,KAAKH,SAAL,CAASpD,CAAjG,IAAsG,KAAKqD,SAAL,CAAWG,CAA3H;AACA,YAAMnD,CAAC,GAAG,CAAC,CAAC,KAAK2C,SAAL,CAAS3C,CAAT,GAAagB,CAAb,GAAiB,KAAK4B,SAAL,CAAS5C,CAAT,GAAaiB,CAA9B,GAAkC,KAAK4B,SAAL,CAAS7C,CAAT,GAAakB,CAAhD,IAAqD,KAAK8B,SAAL,CAAWE,CAAhE,GAAoE,CAAC,IAAE,KAAKF,SAAL,CAAWE,CAAd,IAAmB,KAAKH,SAAL,CAAS/C,CAAjG,IAAsG,KAAKgD,SAAL,CAAWG,CAA3H;AACA,YAAMhD,CAAC,GAAG,CAAC,CAAC,KAAKwC,SAAL,CAASxC,CAAT,GAAaa,CAAb,GAAiB,KAAK4B,SAAL,CAASzC,CAAT,GAAac,CAA9B,GAAkC,KAAK4B,SAAL,CAAS1C,CAAT,GAAae,CAAhD,IAAqD,KAAK8B,SAAL,CAAWE,CAAhE,GAAoE,CAAC,IAAE,KAAKF,SAAL,CAAWE,CAAd,IAAmB,KAAKH,SAAL,CAAS5C,CAAjG,IAAsG,KAAK6C,SAAL,CAAWG,CAA3H;;AACA,aAAKc,UAAL,CAActE,CAAd,EAAiBK,CAAjB,EAAoBG,CAApB;;AACA,aAAKgH,UAAL,CAAqB,WAArB;AACD,OA9WM;AAgXPM,MAAAA,UAAY,EAAE,sBAAY;AACxB,aAAKjE,SAAL,GAAW5D,IAAI,CAACU,GAAL,CAAS,KAAK0F,UAAL,CAAWhF,CAApB,EAAuB,KAAKgF,UAAL,CAAW/E,CAAlC,EAAqC,KAAK+E,UAAL,CAAW9E,CAAhD,CAAX;;AACA,YAAI,KAAKsC,SAAL,GAAW,CAAf,EAAkB;AAChB,cAAM7D,CAAC,GAAG,KAAKgD,SAAL,CAAShD,CAAT,GAAa,KAAKqG,UAAL,CAAWhF,CAAxB,GAA4B,KAAK4B,SAAL,CAASjD,CAAT,GAAa,KAAKqG,UAAL,CAAW/E,CAApD,GAAwD,KAAK4B,SAAL,CAASlD,CAAT,GAAa,KAAKqG,UAAL,CAAW9E,CAA1F;AACA,cAAMlB,CAAC,GAAG,KAAK2C,SAAL,CAAS3C,CAAT,GAAa,KAAKgG,UAAL,CAAWhF,CAAxB,GAA4B,KAAK4B,SAAL,CAAS5C,CAAT,GAAa,KAAKgG,UAAL,CAAW/E,CAApD,GAAwD,KAAK4B,SAAL,CAAS7C,CAAT,GAAa,KAAKgG,UAAL,CAAW9E,CAA1F;AACA,cAAMf,CAAC,GAAG,KAAKwC,SAAL,CAASxC,CAAT,GAAa,KAAK6F,UAAL,CAAWhF,CAAxB,GAA4B,KAAK4B,SAAL,CAASzC,CAAT,GAAa,KAAK6F,UAAL,CAAW/E,CAApD,GAAwD,KAAK4B,SAAL,CAAS1C,CAAT,GAAa,KAAK6F,UAAL,CAAW9E,CAA1F;;AACA,eAAK+C,UAAL,CAActE,CAAd,EAAiBK,CAAjB,EAAoBG,CAApB;AACD,SAPuB,CAOtB;;;AACF,aAAKgH,UAAL,CAAqB,YAArB;AACD,OAzXM;AA2XPO,MAAAA,UAAa,EAAE,sBAAY;AACzB,aAAKlE,SAAL,GAAW5D,IAAI,CAACU,GAAL,CAAS,KAAK4F,UAAL,CAAYlF,CAArB,EAAwB,KAAKkF,UAAL,CAAYjF,CAApC,EAAuC,KAAKiF,UAAL,CAAYhF,CAAnD,EAAsD,KAAKgF,UAAL,CAAYE,CAAlE,CAAX;;AACA,YAAI,KAAK5C,SAAL,GAAW,CAAf,EAAkB;AAChB,cAAM7D,CAAC,GAAG,KAAKgD,SAAL,CAAShD,CAAT,GAAa,KAAKuG,UAAL,CAAYlF,CAAzB,GAA6B,KAAK4B,SAAL,CAASjD,CAAT,GAAa,KAAKuG,UAAL,CAAYjF,CAAtD,GAA0D,KAAK4B,SAAL,CAASlD,CAAT,GAAa,KAAKuG,UAAL,CAAYhF,CAAnF,GAAuF,KAAK6B,SAAL,CAASpD,CAAT,GAAa,KAAKuG,UAAL,CAAYE,CAA1H;AACA,cAAMpG,CAAC,GAAG,KAAK2C,SAAL,CAAS3C,CAAT,GAAa,KAAKkG,UAAL,CAAYlF,CAAzB,GAA6B,KAAK4B,SAAL,CAAS5C,CAAT,GAAa,KAAKkG,UAAL,CAAYjF,CAAtD,GAA0D,KAAK4B,SAAL,CAAS7C,CAAT,GAAa,KAAKkG,UAAL,CAAYhF,CAAnF,GAAuF,KAAK6B,SAAL,CAAS/C,CAAT,GAAa,KAAKkG,UAAL,CAAYE,CAA1H;AACA,cAAMjG,CAAC,GAAG,KAAKwC,SAAL,CAASxC,CAAT,GAAa,KAAK+F,UAAL,CAAYlF,CAAzB,GAA6B,KAAK4B,SAAL,CAASzC,CAAT,GAAa,KAAK+F,UAAL,CAAYjF,CAAtD,GAA0D,KAAK4B,SAAL,CAAS1C,CAAT,GAAa,KAAK+F,UAAL,CAAYhF,CAAnF,GAAuF,KAAK6B,SAAL,CAAS5C,CAAT,GAAa,KAAK+F,UAAL,CAAYE,CAA1H;;AACA,eAAKnC,UAAL,CAActE,CAAd,EAAiBK,CAAjB,EAAoBG,CAApB;AACD,SAPwB,CAOvB;;;AACF,aAAKgH,UAAL,CAAqB,YAArB;AACD,OApYM;AAsYPQ,MAAAA,UAAU,EAAE,sBAAY;AACtB,YAAIlH,EAAE,GAAGtB,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAce,cAAd,CAA6B,KAAKyD,UAAlC,CAAT;AACA,aAAKP,SAAL,GAAW7C,EAAE,CAAC9B,CAAd;AACA,aAAK4E,SAAL,GAAW9C,EAAE,CAAC5B,CAAd;;AACA,aAAKsI,UAAL,CAAqB,YAArB;AACD,OA3YM;AA6YPS,MAAAA,UAAU,EAAE,sBAAY;AACtB,aAAKT,UAAL,CAAqB,YAArB;AACD,OA/YM;AAiZPU,MAAAA,UAAY,EAAE,sBAA2B;AAAA,YAAjBC,OAAiB,uEAAP,KAAO;AACvC,YAAMtB,EAAE,GAAG,KAAKzD,SAAL,CAASpD,CAApB;AACA,YAAM8G,EAAE,GAAG,KAAK1D,SAAL,CAAS/C,CAApB;AACA,YAAM0G,EAAE,GAAG,KAAK3D,SAAL,CAAS5C,CAApB;;AACA,YAAM4H,IAAI,GAAG,SAAPA,IAAO,CAASnB,CAAT,EAAY;AACvB,cAAIA,CAAC,sBAAL,EAAc;AACZ,mBAAO,kCAAU,CAAV,KAAaA,CAAC,sBAAd,CAAP;AACD;;AACD,0BAAOA,CAAP,EAAU,CAAV;AACD,SALD;;AAMA,YAAMoB,GAAG,GAAG,KAAKlE,UAAjB;AACA,YAAMmE,GAAG,GAAG,CAACD,GAAG,CAACnB,CAAJ,GAAQ,EAAT,IAAa,GAAzB;AACA,YAAMlH,CAAC,GAAG6G,EAAE,GAAGuB,IAAI,CAACE,GAAG,GAAGD,GAAG,CAACzC,CAAJ,GAAM,GAAb,CAAnB;AACA,YAAMvF,CAAC,GAAGyG,EAAE,GAAGsB,IAAI,CAACE,GAAD,CAAnB;AACA,YAAM9H,CAAC,GAAGuG,EAAE,GAAGqB,IAAI,CAACE,GAAG,GAAGD,GAAG,CAAC9G,CAAJ,GAAM,GAAb,CAAnB;;AACA,aAAK+C,UAAL,CAActE,CAAd,EAAiBK,CAAjB,EAAoBG,CAApB;;AAEA,aAAKgH,UAAL,CAAqB,YAArB,EAA8BW,OAAO,GAAC,YAAD,GAAS,EAA9C;AACD,OAnaM;AAqaPI,MAAAA,UAAY,EAAE,sBAAY;AACxB,aAAKpE,UAAL,GAAa;AACX+C,UAAAA,CAAC,EAAE,KAAK9C,UAAL,CAAW8C,CAAX,GAAe,GADP;AAEXtB,UAAAA,CAAC,EAAE,KAAKxB,UAAL,CAAWgD,CAAX,GAAenH,IAAI,CAACuI,GAAL,CAAS,KAAKpE,UAAL,CAAWd,CAAX,GAAa,CAAb,GAAerD,IAAI,CAACsH,EAA7B,CAAf,GAAkD,GAF1C;AAGXhG,UAAAA,CAAC,EAAE,KAAK6C,UAAL,CAAWgD,CAAX,GAAenH,IAAI,CAACwI,GAAL,CAAS,KAAKrE,UAAL,CAAWd,CAAX,GAAa,CAAb,GAAerD,IAAI,CAACsH,EAA7B,CAAf,GAAkD;AAH1C,SAAb;;AAKA,aAAKW,UAAL,CAAkB,IAAlB;AACD,OA5aM;;AA8aP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIQ,MAAAA,eAAe,EAAE,yBAASjH,SAAT,EAAoBa,KAApB,EAA2B;AAC1C;AACN;AACA;AACA;AACA;AACA;AACA;AACM,iBAASqG,KAAT,CAAerG,KAAf,EAAoC;AAAA,cAAd1B,GAAc,uEAAV,CAAU;AAAA,cAAPD,GAAO,uEAAH,CAAG;AAClC,iBAAOV,IAAI,CAACW,GAAL,CAASX,IAAI,CAACU,GAAL,CAASC,GAAT,EAAc0B,KAAd,CAAT,EAA+B3B,GAA/B,CAAP;AACD;;AAED,gBAAQc,SAAR;AACE,eAAK,GAAL;AACA,eAAK,GAAL;AACA,eAAK,GAAL;AACE,iBAAKmD,UAAL;;AACA,iBAAKvB,SAAL,CAAW5B,SAAX,IAAwBkH,KAAK,CAACrG,KAAD,CAA7B;;AACA,iBAAKmB,SAAL;;AACA;;AAEF,eAAK,IAAL;AACE,iBAAKmB,UAAL;;AACA,iBAAKvB,SAAL,CAAWE,CAAX,GAAeoF,KAAK,CAACrG,KAAK,CAAC,CAAD,CAAN,CAApB;AACA,iBAAKe,SAAL,CAAWG,CAAX,GAAemF,KAAK,CAACrG,KAAK,CAAC,CAAD,CAAN,CAApB;;AACA,iBAAKmB,SAAL;;AACA;;AAEF,eAAK,KAAL;AACE,iBAAKJ,SAAL,GAAa;AACXC,cAAAA,CAAC,EAAEqF,KAAK,CAACrG,KAAK,CAACgB,CAAP,CADG;AAEXC,cAAAA,CAAC,EAAEoF,KAAK,CAACrG,KAAK,CAACiB,CAAP,CAFG;AAGXC,cAAAA,CAAC,EAAEmF,KAAK,CAACrG,KAAK,CAACkB,CAAP;AAHG,aAAb;;AAKA,iBAAKC,SAAL;;AACA;;AAEF,eAAK,OAAL;AACA,eAAK,OAAL;AACA,eAAK,OAAL;AACE,iBAAK2C,UAAL;;AACA,iBAAKC,UAAL,CAAW5E,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAX,IAAsCD,KAAK,CAACrG,KAAD,CAA3C;;AACA,iBAAKwF,UAAL;;AACA;;AAEF,eAAK,KAAL;AACE,iBAAKzB,UAAL,GAAa;AACXhF,cAAAA,CAAC,EAAEsH,KAAK,CAACrG,KAAK,CAACjB,CAAP,CADG;AAEXC,cAAAA,CAAC,EAAEqH,KAAK,CAACrG,KAAK,CAAChB,CAAP,CAFG;AAGXC,cAAAA,CAAC,EAAEoH,KAAK,CAACrG,KAAK,CAACf,CAAP;AAHG,aAAb;;AAKA,iBAAKuG,UAAL;;AACA;;AAEF,eAAK,QAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AACE,iBAAKxB,UAAL;;AACA,iBAAKC,UAAL,CAAY9E,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAZ,IAAuCD,KAAK,CAACrG,KAAD,CAA5C;;AACA,iBAAKyF,UAAL;;AACA;;AAEF,eAAK,MAAL;AACE,iBAAKxB,UAAL,GAAc;AACZlF,cAAAA,CAAC,EAAEsH,KAAK,CAACrG,KAAK,CAACjB,CAAP,CADI;AAEZC,cAAAA,CAAC,EAAEqH,KAAK,CAACrG,KAAK,CAAChB,CAAP,CAFI;AAGZC,cAAAA,CAAC,EAAEoH,KAAK,CAACrG,KAAK,CAACf,CAAP,CAHI;AAIZkF,cAAAA,CAAC,EAAEkC,KAAK,CAACrG,KAAK,CAACmE,CAAP;AAJI,aAAd;;AAMA,iBAAKsB,UAAL;;AACA;;AAEF,eAAK,GAAL;AACE,iBAAK7D,UAAL,GAAWjE,IAAI,CAACU,GAAL,CAAS,IAAT,EAAeV,IAAI,CAACW,GAAL,CAAS0B,KAAT,EAAgB,KAAhB,CAAf,CAAX;;AACA,iBAAK0F,UAAL;;AACA;;AAEF,eAAK,GAAL;AACE,iBAAKrE,SAAL,GAAWgF,KAAK,CAACrG,KAAD,CAAhB;;AACA,iBAAKkF,UAAL,CAAqB,EAArB,EAFF,CAE4B;;;AAC1B;;AAEF,eAAK,GAAL;AACE,iBAAK5D,SAAL,GAAW+E,KAAK,CAACrG,KAAD,CAAhB;;AACA,iBAAKkF,UAAL,CAAqB,EAArB,EAFF,CAE4B;;;AAC1B;;AAEF,eAAK,IAAL;AACE,iBAAK7D,SAAL,GAAWgF,KAAK,CAACrG,KAAK,CAACtD,CAAP,CAAhB;AACA,iBAAK4E,SAAL,GAAW+E,KAAK,CAACrG,KAAK,CAACpD,CAAP,CAAhB;;AACA,iBAAKsI,UAAL,CAAqB,EAArB,EAHF,CAG4B;;;AAC1B;;AAEF,eAAK,GAAL;AACE,iBAAK3D,SAAL,GAAW8E,KAAK,CAACrG,KAAD,CAAhB;;AACA,iBAAK2F,UAAL;;AACA;;AAEF,eAAK,KAAL;AACE,iBAAKtE,SAAL,GAAWgF,KAAK,CAACrG,KAAK,CAACtD,CAAP,CAAhB;AACA,iBAAK4E,SAAL,GAAW+E,KAAK,CAACrG,KAAK,CAACpD,CAAP,CAAhB;AACA,iBAAK2E,SAAL,GAAW8E,KAAK,CAACrG,KAAK,CAACjC,CAAP,CAAhB;;AACA,iBAAKmH,UAAL,CAAqB,EAArB,EAJF,CAI4B;;;AAC1B;;AAEF,eAAK,OAAL;AACA,eAAK,OAAL;AACE,iBAAKL,UAAL;;AACA,iBAAK/C,UAAL,CAAW3C,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAX,IAAsCD,KAAK,CAACrG,KAAD,CAA3C;;AACA,iBAAKiG,UAAL;;AACA;;AAEF,eAAK,OAAL;AACE,iBAAKpB,UAAL;;AACA,iBAAK/C,UAAL,CAAW3C,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAX,IAAsCD,KAAK,CAACrG,KAAD,CAA3C;AACA,iBAAKyB,UAAL,GAAoB,KAAKK,UAAL,CAAWd,CAA/B;;AACA,iBAAKiF,UAAL;;AACA;;AAEF,eAAK,QAAL;AACE,iBAAKpB,UAAL;;AACA,iBAAK/C,UAAL,CAAWgD,CAAX,GAAeuB,KAAK,CAACrG,KAAK,CAAC,CAAD,CAAN,CAApB;AACA,iBAAK8B,UAAL,CAAW8C,CAAX,GAAeyB,KAAK,CAACrG,KAAK,CAAC,CAAD,CAAN,CAApB;;AACA,iBAAKiG,UAAL;;AACA;AAjHJ;AAmHD,OA1jBM;;AA4jBP;AACJ;AACA;AACA;AACA;AACA;AACIM,MAAAA,SAAS,EAAE,mBAAUC,GAAV,EAAe;AACxB,aAAKzF,SAAL,GAAayF,GAAb;;AACA,aAAKrF,SAAL;AACD,OArkBM;AAskBPsF,MAAAA,SAAS,EAAE,mBAAUC,GAAV,EAAe;AACxB,aAAK5E,UAAL,GAAa4E,GAAb;;AACA,aAAKT,UAAL;AACD,OAzkBM;;AA2kBP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIU,MAAAA,YAAY,EAAE,sBAAUxH,SAAV,EAAqD;AAAA,YAAhCyH,QAAgC,uEAArB,IAAqB;AAAA,YAAfrE,KAAe,uEAAP,KAAO;;AACjE,YAAM8D,KAAK,GAAG,SAARA,KAAQ,CAAC/H,GAAD,EAAM5B,CAAN,EAAS2B,GAAT;AAAA,iBAAiBwI,MAAM,CAACC,QAAP,CAAgBpK,CAAhB,IAAsBkK,QAAQ,GAAGjJ,IAAI,CAACU,GAAL,CAASC,GAAT,EAAcX,IAAI,CAACW,GAAL,CAAS5B,CAAT,EAAY2B,GAAZ,CAAd,CAAH,GAAqC3B,CAAnE,GAAwE,CAAzF;AAAA,SAAd;;AAEA,gBAAQyC,SAAR;AACE,eAAK,IAAL;AACE,mBAAO;AAACzC,cAAAA,CAAC,EAAE2J,KAAK,CAAC,CAAD,EAAI,KAAKhF,SAAT,EAAc,CAAd,CAAT;AAA2BzE,cAAAA,CAAC,EAAEyJ,KAAK,CAAC,CAAD,EAAI,KAAK/E,SAAT,EAAc,CAAd;AAAnC,aAAP;;AACF,eAAK,GAAL;AACE,mBAAO+E,KAAK,CAAC,CAAD,EAAI,KAAK9E,SAAT,EAAc,CAAd,CAAZ;;AACF,eAAK,KAAL;AACE,mBAAO;AAAC7E,cAAAA,CAAC,EAAE2J,KAAK,CAAC,CAAD,EAAI,KAAKhF,SAAT,EAAc,CAAd,CAAT;AAA2BzE,cAAAA,CAAC,EAAEyJ,KAAK,CAAC,CAAD,EAAI,KAAK/E,SAAT,EAAc,CAAd,CAAnC;AAAqDvD,cAAAA,CAAC,EAAEsI,KAAK,CAAC,CAAD,EAAI,KAAK9E,SAAT,EAAc,CAAd;AAA7D,aAAP;;AAEF,eAAK,GAAL;AACA,eAAK,GAAL;AACA,eAAK,GAAL;AACE,iBAAKe,UAAL,CAAmBC,KAAnB;;AACA,mBAAO8D,KAAK,CAAC,CAAD,EAAI,KAAKtF,SAAL,CAAW5B,SAAX,CAAJ,EAA2B,CAA3B,CAAZ;;AAEF,eAAK,KAAL;AACE,iBAAKmD,UAAL,CAAmBC,KAAnB;;AACA,mBAAO;AACLvB,cAAAA,CAAC,EAAEqF,KAAK,CAAC,CAAD,EAAI,KAAKtF,SAAL,CAAWC,CAAf,EAAkB,CAAlB,CADH;AAELC,cAAAA,CAAC,EAAEoF,KAAK,CAAC,CAAD,EAAI,KAAKtF,SAAL,CAAWE,CAAf,EAAkB,CAAlB,CAFH;AAGLC,cAAAA,CAAC,EAAEmF,KAAK,CAAC,CAAD,EAAI,KAAKtF,SAAL,CAAWG,CAAf,EAAkB,CAAlB;AAHH,aAAP;;AAMF,eAAK,OAAL;AACA,eAAK,OAAL;AACA,eAAK,OAAL;AAAc;AACZ,mBAAK4C,UAAL,CAAmBvB,KAAnB;;AACA,kBAAMwE,GAAG,GAAGH,QAAQ,GAAG,IAAIjJ,IAAI,CAACU,GAAL,CAAS,KAAK0F,UAAL,CAAWhF,CAApB,EAAuB,KAAKgF,UAAL,CAAW/E,CAAlC,EAAqC,KAAK+E,UAAL,CAAW9E,CAAhD,EAAmD,CAAnD,CAAP,GAA+D,CAAnF;AACA,qBAAO8H,GAAG,GAAG,KAAKhD,UAAL,CAAW5E,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAX,CAAb;AACD;;AAED,eAAK,KAAL;AAAY;AACV,mBAAKxC,UAAL,CAAmBvB,KAAnB;;AACA,kBAAMwE,IAAG,GAAGH,QAAQ,GAAG,IAAIjJ,IAAI,CAACU,GAAL,CAAS,KAAK0F,UAAL,CAAWhF,CAApB,EAAuB,KAAKgF,UAAL,CAAW/E,CAAlC,EAAqC,KAAK+E,UAAL,CAAW9E,CAAhD,EAAmD,CAAnD,CAAP,GAA+D,CAAnF;;AACA,qBAAO;AACLF,gBAAAA,CAAC,EAAEgI,IAAG,GAAG,KAAKhD,UAAL,CAAWhF,CADf;AAELC,gBAAAA,CAAC,EAAE+H,IAAG,GAAG,KAAKhD,UAAL,CAAW/E,CAFf;AAGLC,gBAAAA,CAAC,EAAE8H,IAAG,GAAG,KAAKhD,UAAL,CAAW9E;AAHf,eAAP;AAKD;;AAED,eAAK,QAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AAAe;AACb,mBAAK+E,UAAL,CAAoBzB,KAApB;;AACA,kBAAMwE,KAAG,GAAGH,QAAQ,GAAG,IAAIjJ,IAAI,CAACU,GAAL,CAAS,KAAK4F,UAAL,CAAYlF,CAArB,EAAwB,KAAKkF,UAAL,CAAYjF,CAApC,EAAuC,KAAKiF,UAAL,CAAYhF,CAAnD,EAAsD,KAAKgF,UAAL,CAAYE,CAAlE,EAAqE,CAArE,CAAP,GAAiF,CAArG;;AACA,qBAAO4C,KAAG,GAAG,KAAK9C,UAAL,CAAY9E,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAZ,CAAb;AACD;;AAED,eAAK,MAAL;AAAa;AACX,mBAAKtC,UAAL,CAAoBzB,KAApB;;AACA,kBAAMwE,KAAG,GAAGH,QAAQ,GAAG,IAAIjJ,IAAI,CAACU,GAAL,CAAS,KAAK4F,UAAL,CAAYlF,CAArB,EAAwB,KAAKkF,UAAL,CAAYjF,CAApC,EAAuC,KAAKiF,UAAL,CAAYhF,CAAnD,EAAsD,KAAKgF,UAAL,CAAYE,CAAlE,EAAqE,CAArE,CAAP,GAAiF,CAArG;;AACA,qBAAO;AACLpF,gBAAAA,CAAC,EAAEgI,KAAG,GAAG,KAAK9C,UAAL,CAAYlF,CADhB;AAELC,gBAAAA,CAAC,EAAE+H,KAAG,GAAG,KAAK9C,UAAL,CAAYjF,CAFhB;AAGLC,gBAAAA,CAAC,EAAE8H,KAAG,GAAG,KAAK9C,UAAL,CAAYhF,CAHhB;AAILkF,gBAAAA,CAAC,EAAE4C,KAAG,GAAG,KAAK9C,UAAL,CAAYE;AAJhB,eAAP;AAMD;;AAED,eAAK,GAAL;AACE,iBAAKC,UAAL,CAAiB7B,KAAjB;;AACA,mBAAO8D,KAAK,CAAC,IAAD,EAAO,KAAKzE,UAAZ,EAAiB,KAAjB,CAAZ;;AAEF,eAAK,KAAL;AACE,iBAAK0C,UAAL,CAAmB/B,KAAnB;;AACA,mBAAO,KAAKV,UAAZ;;AAEF,eAAK,OAAL;AACA,eAAK,OAAL;AACA,eAAK,OAAL;AACE,iBAAKgD,UAAL,CAAmBtC,KAAnB;;AACA,mBAAO8D,KAAK,CAAC,CAAD,EAAI,KAAKvE,UAAL,CAAW3C,SAAS,CAACmH,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAX,CAAJ,EAAyC,CAAzC,CAAZ;;AAEF,eAAK,KAAL;AACE,iBAAKzB,UAAL,CAAmBtC,KAAnB;;AACA,mBAAO;AACLqC,cAAAA,CAAC,EAAEyB,KAAK,CAAC,CAAD,EAAI,KAAKvE,UAAL,CAAW8C,CAAf,EAAkB,CAAlB,CADH;AAELE,cAAAA,CAAC,EAAEuB,KAAK,CAAC,CAAD,EAAI,KAAKvE,UAAL,CAAWgD,CAAf,EAAkB,CAAlB,CAFH;AAGL9D,cAAAA,CAAC,EAAEqF,KAAK,CAAC,CAAD,EAAI,KAAKvE,UAAL,CAAWd,CAAf,EAAkB,CAAlB;AAHH,aAAP;AA5EJ;;AAmFA,eAAOV,SAAP,CAtFiE,CAsF/C;AACnB,OAlrBM;;AAorBP;AACJ;AACA;AACA;AACI0G,MAAAA,IAAI,EAAE,gBAAY;AAChB,eAAO9L,MAAM,CAAC+L,MAAP,CAAc,IAAI/J,EAAE,CAACC,IAAH,CAAQC,KAAZ,EAAd,EAAmC,IAAnC,CAAP;AACD,OA1rBM;;AA4rBP;AACJ;AACA;AACA;AACA;AACA;AACI8J,MAAAA,KAAK,EAAE,eAAUC,UAAV,EAAsB;AAC3B,aAAK7C,UAAL;;AACA6C,QAAAA,UAAU,CAAC7C,UAAX;;AACA,YAAMyB,GAAG,GAAGoB,UAAU,CAACtF,UAAvB;AACA,YAAMuF,EAAE,GAAG,KAAKvF,UAAL,CAAW+C,CAAX,GAAemB,GAAG,CAACnB,CAA9B;AACA,YAAMyC,EAAE,GAAG,KAAKxF,UAAL,CAAWyB,CAAX,GAAeyC,GAAG,CAACzC,CAA9B;AACA,YAAMgE,EAAE,GAAG,KAAKzF,UAAL,CAAW5C,CAAX,GAAe8G,GAAG,CAAC9G,CAA9B;AACA,eAAOtB,IAAI,CAACoH,IAAL,CAAUqC,EAAE,GAACA,EAAH,GAAQC,EAAE,GAACA,EAAX,GAAgBC,EAAE,GAACA,EAA7B,CAAP;AACD,OA1sBM;;AA4sBP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,KAAK,EAAE,eAAUJ,UAAV,EAAsBhH,KAAtB,EAA6B;AAClC,aAAK0E,UAAL;;AACAsC,QAAAA,UAAU,CAACtC,UAAX;;AACA,YAAM5F,CAAC,GAAG,SAAJA,CAAI,CAACvC,CAAD,EAAIE,CAAJ;AAAA,iBAAW,CAAC,IAAEuD,KAAH,IAAUzD,CAAV,GAAcyD,KAAK,GAACvD,CAA/B;AAAA,SAAV;;AACA,YAAM4K,CAAC,GAAG,KAAKR,IAAL,EAAV;AACA,YAAMS,EAAE,GAAG,KAAK3F,UAAhB;AACA,YAAM4F,EAAE,GAAGP,UAAU,CAACrF,UAAtB;AACA,YAAMb,CAAC,GAAGtD,IAAI,CAACgK,GAAL,CAASD,EAAE,CAAC1G,CAAH,GAAKyG,EAAE,CAACzG,CAAR,GAAU,CAAnB,IAAwBrD,IAAI,CAACgK,GAAL,CAASD,EAAE,CAAC1G,CAAH,GAAKyG,EAAE,CAACzG,CAAjB,CAAlC;AACA,YAAM4G,CAAC,GAAGjK,IAAI,CAACgK,GAAL,CAASD,EAAE,CAAC1G,CAAH,GAAKyG,EAAE,CAACzG,CAAR,GAAU,CAAnB,IAAwBrD,IAAI,CAACgK,GAAL,CAASD,EAAE,CAAC1G,CAAH,GAAKyG,EAAE,CAACzG,CAAjB,CAAlC;;AAEAwG,QAAAA,CAAC,CAACf,SAAF,CAAY;AACVzF,UAAAA,CAAC,EAAE/B,CAAC,CAACwI,EAAE,CAACzG,CAAH,GAAKC,CAAN,EAASyG,EAAE,CAAC1G,CAAH,GAAK4G,CAAd,CAAD,GAAkB,CADX;AACc;AACxBhD,UAAAA,CAAC,EAAE3F,CAAC,CAACwI,EAAE,CAAC7C,CAAJ,EAAO8C,EAAE,CAAC9C,CAAV,CAFM;AAGVE,UAAAA,CAAC,EAAE7F,CAAC,CAACwI,EAAE,CAAC3C,CAAJ,EAAO4C,EAAE,CAAC5C,CAAV;AAHM,SAAZ;;AAKA,eAAO0C,CAAP;AACD;AAtuBM;AA5RsB,GAAjC;AA3BAtK,EAAAA,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAcvC,aAAd,GAA8BA,aAA9B",
  "sourcesContent": [
    "/* Color.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Color\n *\n * @author ChristianMayer\n * @since 2021\n */\n\nqx.Class.define('cv.util.Color', {\n  extend: qx.core.Object,\n  \n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Solve the 2 dimensional linear equation\n     * <pre>\n     *    ( A00 A01 ) (x0) = (y0)\n     *    ( A10 A11 ) (x1)   (y1)\n     * </pre>\n     * @param {number} A00\n     * @param {number} A10\n     * @param {number} A01\n     * @param {number} A11\n     * @param {number} y0\n     * @param {number} y1\n     * @returns {number[]}\n     */\n    solve2d: function (A00, A10, A01, A11, y0, y1) {\n      const detInv = 1 / (A00 * A11 - A01 * A10);\n      return [ (y0 * A11 - A01 * y1) * detInv, (A00 * y1 - y0 * A10) * detInv ];\n    },\n\n    /**\n     * Solve the 3 dimensional linear equation\n     * <pre>\n     *    ( A00 A01 A02 ) (x0)   (y0)\n     *    ( A10 A11 A12 ) (x1) = (y1)\n     *    ( A20 A21 A22 ) (x2)   (y2)\n     * </pre>\n     * @param {number} A00\n     * @param {number} A10\n     * @param {number} A20\n     * @param {number} A01\n     * @param {number} A11\n     * @param {number} A21\n     * @param {number} A02\n     * @param {number} A12\n     * @param {number} A22\n     * @param {number} y0\n     * @param {number} y1\n     * @param {number} y2\n     * @returns {number[]}\n     */\n    solve3d: function (A00, A10, A20, A01, A11, A21, A02, A12, A22, y0, y1, y2) {\n      function det(A00, A10, A20, A01, A11, A21, A02, A12, A22) { // eslint-disable-line\n        return A00*A11*A22 + A01*A12*A20 + A02*A10*A21 - A20*A11*A02 - A21*A12*A00 - A22*A10*A01;\n      }\n      const detInv = 1/det(A00, A10, A20, A01, A11, A21, A02, A12, A22);\n      return [\n        det(y0 , y1 , y2 , A01, A11, A21, A02, A12, A22) * detInv, // eslint-disable-line\n        det(A00, A10, A20, y0 , y1 , y2 , A02, A12, A22) * detInv, // eslint-disable-line\n        det(A00, A10, A20, A01, A11, A21, y0 , y1 , y2 ) * detInv  // eslint-disable-line\n      ];\n    },\n\n    /**\n     * calculate the intersection point between lines 1-2 and 3-4 as well as\n     * points 3 and 4 are on different sides of the line 1-2\n     * @param {{x: number, y: number}} p1\n     * @param {{x: number, y: number}} p2\n     * @param {{x: number, y: number}} p3\n     * @param {{x: number, y: number}} p4\n     * @returns {{x: number, y: number, factors: number[]}}\n     */\n    intersect: function(p1, p2, p3, p4) {\n      const x12 = p2.x-p1.x;\n      const y12 = p2.y-p1.y;\n      const x34 = p4.x-p3.x;\n      const y34 = p4.y-p3.y;\n      const x31 = p1.x-p3.x;\n      const y31 = p1.y-p3.y;\n      const factors = cv.util.Color.solve2d(x34, y34, -x12, -y12, x31, y31);\n      return {x:p3.x+factors[0]*x34, y:p3.y+factors[0]*y34, factors:factors};\n    },\n\n    /**\n     * Get the CIE xy coordinates for a light wavelength.\n     * Algorithm as of: http://jcgt.org/published/0002/02/01/\n     * @param {number} wave wavelength in nanometers\n     * @returns {{x: number, y: number}}\n     */\n    wavelength2xy: function (wave) {\n      const x_t1 = (wave-442.0)*((wave<442.0)?0.0624:0.0374);\n      const x_t2 = (wave-599.8)*((wave<599.8)?0.0264:0.0323);\n      const x_t3 = (wave-501.1)*((wave<501.1)?0.0490:0.0382);\n      const X = 0.362*Math.exp(-0.5*x_t1*x_t1) + 1.056*Math.exp(-0.5*x_t2*x_t2) - 0.065*Math.exp(-0.5*x_t3*x_t3);\n      const y_t1 = (wave-568.8)*((wave<568.8)?0.0213:0.0247);\n      const y_t2 = (wave-530.9)*((wave<530.9)?0.0613:0.0322);\n      const Y = 0.821*Math.exp(-0.5*y_t1*y_t1) + 0.286*Math.exp(-0.5*y_t2*y_t2);\n      const z_t1 = (wave-437.0)*((wave<437.0)?0.0845:0.0278);\n      const z_t2 = (wave-459.0)*((wave<459.0)?0.0385:0.0725);\n      const Z= 1.217*Math.exp(-0.5*z_t1*z_t1) + 0.681*Math.exp(-0.5*z_t2*z_t2);\n      return { x: X/(X+Y+Z), y: Y/(X+Y+Z) };\n    },\n\n    /**\n     * Get the CIE xy coordinates for a white given its temperature\n     * @param {number} T temperature in Kelvin, 1667 K <= T <= 25000 K\n     * @returns {{x: number, y: number}}\n     */\n    temperature2xy: function (T) {\n      T = Math.max(1667, Math.min(T, 25000));\n      let x = T <= 4000\n        ? ((-0.2661239e9 / T - 0.2343589e6) / T + 0.8776956e3) / T + 0.179910\n        : ((-3.0258469e9 / T + 2.1070379e6) / T + 0.2226347e3) / T + 0.240390;\n      return {\n        x: x,\n        y: T <= 2222\n          ? ((-1.1063814 * x - 1.34811020) * x + 2.18555832) * x - 0.20219683\n          : T <= 4000\n          ? ((-0.9549476 * x - 1.37418593) * x + 2.09137015) * x - 0.16748867\n          : (( 3.0817580 * x - 5.87338670) * x + 3.75112997) * x - 0.37001483 // eslint-disable-line space-in-parens\n      };\n    },\n\n    /**\n     * Convert xy coordinates to sRGB (D65) for display on the screen, including\n     * gamma correction and simple gamut mapping\n     * @param {{x: number, y: number}} xy The `x` and `y` values of the xyY color\n     * @param {number} Y The `Y` value of the xyY color\n     * @returns {{r: number, g: number, b: number}}\n     */\n    xy2sRGB: function (xy, Y = 1) {\n      const X = Y * xy.x / xy.y;\n      const Z = Y * (1-xy.x-xy.y) / xy.y;\n      const R =  3.2404542*X -1.5371385*Y -0.4985314*Z;\n      const G = -0.9692660*X +1.8760108*Y +0.0415560*Z;\n      const B =  0.0556434*X -0.2040259*Y +1.0572252*Z;\n      const scale = 1 / Math.max(1, R, G, B); // very simple gamut mapping\n      const gamma = u => u<=0.0031308 ? (12.92*u) : (1.055*u**(1/2.4) - 0.055);\n      return {\n        r: gamma(Math.max(R * scale, 0)),\n        g: gamma(Math.max(G * scale, 0)),\n        b: gamma(Math.max(B * scale, 0))\n      };\n    },\n\n    /**\n     * Convert a color component to a real world value by applying the dim curve\n     * @param {number} component the color component (i.e. r, g or b value) to convert\n     * @param {(string|number[])} curve -the curve type (`log` or `exp`), an one element array with the gamma value or an array with the lookup table\n     * @param {number} scale the maximal number of the real world value, usually 1, 100 or 255\n     * @returns {number}\n     */\n    curve: function (component, curve, scale) {\n      if (component <= 0) {\n        return (Array.isArray(curve) && curve.length > 1) ? curve[0]*scale : 0;\n      }\n      if (component >= 1) {\n        return (Array.isArray(curve) && curve.length > 1) ? curve[curve.length-1]*scale : scale;\n      }\n      if (curve === 'log') {\n        return scale * Math.max(0, Math.min(1-Math.log10(component)/(-3), 1));\n      }\n      if (curve === 'exp') {\n        return scale * Math.max(0, Math.min(10 ** (-3 * (1-component)), 1));\n      }\n      if (curve.length === 1) {\n        return scale * component ** (1/curve[0]);\n      }\n      // otherwise: table conversion\n      const spacing = 1 / (curve.length - 1); // the distance between two values\n      const position = component / spacing;\n      const lower  = Math.max(Math.floor(position), 0);\n      const higher = Math.min(Math.ceil(position), curve.length - 1);\n      const alpha = position - lower;\n      return scale * (curve[lower] * (1-alpha) + curve[higher] * alpha);\n    },\n\n    /**\n     * Convert a real world value to a color component by applying the inverse dim curve\n     * @param {number} value\n     * @param {(string|number[])} curve -the curve type (`log` or `exp`), an one element array with the gamma value or an array with the lookup table\n     * @param {number} scale\n     * @returns {number}\n     */\n    invCurve: function (value, curve, scale) {\n      if (value <= 0) {\n        return 0;\n      }\n      if (value >= scale) {\n        return 1;\n      }\n      if (curve === 'log') {\n        return Math.max(0, Math.min(10 ** (-3 * (1-value/scale)), 1));\n      }\n      if (curve === 'exp') {\n        return Math.max(0, Math.min(1-Math.log10(value/scale)/(-3), 1));\n      }\n      if (curve.length === 1) {\n        return curve[0] > 0 ? (value/scale) ** curve[0] : 0;\n      }\n      // otherwise: table conversion\n      let normalized = value/scale;\n      let higher = curve.findIndex(x => (x>normalized));\n      if (higher < 0) {\n        // nothing found -> limit to highest index\n        higher = curve.length - 1;\n      }\n      let lower = Math.max(higher-1, 0);\n      if (lower === higher) {\n        return lower / (curve.length-1);\n      }\n      let ratio = (normalized-curve[lower]) / (curve[higher]-curve[lower]);\n      return Math.min((lower + ratio)/(curve.length-1), 1);\n    }\n  },\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n\n  /**\n   * Construct a color with given primary colors and an optional white\n   * channel.\n   * When no coordinates are give they default to the sRGB coordinates.\n   * @param {{x: number, y: number, Y: number}} [Rxy]\n   * @param {{x: number, y: number, Y: number}} [Gxy]\n   * @param {{x: number, y: number, Y: number}} [Bxy]\n   * @param {{x: number, y: number, Y: number}} [Wxy]\n   */\n  construct: function (Rxy = undefined, Gxy = undefined, Bxy = undefined, Wxy = undefined) {\n    this.__R = Rxy === undefined ? { x: 0.64, y: 0.33, Y: 0.2126 } : Rxy; // default: sRGB\n    this.__G = Gxy === undefined ? { x: 0.30, y: 0.60, Y: 0.7152 } : Gxy;\n    this.__B = Bxy === undefined ? { x: 0.15, y: 0.06, Y: 0.0722 } : Bxy;\n\n    if (this.__R.Y === undefined) {\n      this.__R.Y = 1;\n    }\n    if (this.__G.Y === undefined) {\n      this.__G.Y = 1;\n    }\n    if (this.__B.Y === undefined) {\n      this.__B.Y = 1;\n    }\n\n    // normalize luminances\n    let normFac = 1 / (this.__R.Y + this.__G.Y + this.__B.Y);\n    this.__R.Y *= normFac;\n    this.__G.Y *= normFac;\n    this.__B.Y *= normFac;\n\n    // precalculate X and Z\n    this.__R.X = this.__R.x * this.__R.Y / this.__R.y;\n    this.__R.Z = (1 - this.__R.x - this.__R.y) * this.__R.Y / this.__R.y;\n    this.__G.X = this.__G.x * this.__G.Y / this.__G.y;\n    this.__G.Z = (1 - this.__G.x - this.__G.y) * this.__G.Y / this.__G.y;\n    this.__B.X = this.__B.x * this.__B.Y / this.__B.y;\n    this.__B.Z = (1 - this.__B.x - this.__B.y) * this.__B.Y / this.__B.y;\n\n    if (undefined !== Wxy) {\n      this.__W = Wxy;\n      if (this.__W.Y === undefined) {\n        this.__W.Y = 1;\n      }\n      this.__W.X = this.__W.x * this.__W.Y / this.__W.y;\n      this.__W.Z = (1 - this.__W.x - this.__W.y) * this.__W.Y / this.__W.y;\n    } else {\n      this.__W = {\n        X: this.__R.X + this.__G.X + this.__B.X,\n        Y: this.__R.Y + this.__G.Y + this.__B.Y,\n        Z: this.__R.Z + this.__G.Z + this.__B.Z\n      };\n      this.__W.x = this.__W.X / (this.__W.X + this.__W.Y + this.__W.Z);\n      this.__W.y = this.__W.Y / (this.__W.X + this.__W.Y + this.__W.Z);\n    }\n\n    // start color is a complete unsaturated red hue that is black:\n    this.__hsv = { h: 0, s: 0, v: 0 };\n    this.__syncHSV2xy();\n  },\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // the base colors defining the color space of this color\n    __R: undefined,\n    __G: undefined,\n    __B: undefined,\n    __W: undefined,\n\n    // the color itself\n    /**\n     * CIE 1931 XYZ color space: x of xyY\n     * @type {number}\n     */\n    __x: 1/3,\n    /**\n     * CIE 1931 XYZ color space: y of xyY\n     * @type {number}\n     */\n    __y: 1/3,\n    /**\n     * CIE 1931 XYZ color space: Y of xyY or XYZ - normalized to be between 0...1\n     * @type {number}\n     */\n    __Y: 0,\n\n    // derived color representations, cached to allow partial change\n    /**\n     * HSV color space - h, s and v are normalized to the range 0...1\n     * @type {{h: number, s: number, v: number}}\n     */\n    __hsv: undefined,\n    /**\n     * HSV color space - last known value of h\n     * @type {number}\n     */\n    __HSV_h_last: 0,\n    /**\n     * LCh color space - last known value of h\n     * @type {number}\n     */\n    __LCh_h_last: 0,\n    /**\n     * RGB color space - r, g and b are normalized to the range 0...1\n     * @type {{r: number, g: number, b: number}}\n     */\n    __rbg: undefined,\n    /**\n     * RGBW color space - r, g, b and w are normalized to the range 0...1\n     * @type {{r: number, g: number, b: number, w: number}}\n     */\n    __rbgw: undefined,\n    /**\n     * Color temperature in Kelvin\n     * @type {number}\n     */\n    __T: undefined,\n    /**\n     * L*a*b* color space - with L in 0...100, a* and b* in roughly -150...150\n     * @type {{L: number, a: number, b: number}}\n     */\n    __Lab: undefined,\n    /**\n     * L*C*h° color space - with L in 0...1 instead of 0...100; C in 0...1 instead of 0...150\n     * @type {{L: number, C: number, h: number}}\n     */\n    __LCh: undefined,\n\n    /**\n     * Get X, Y, Z from this color\n     * @private\n     * @returns {{X: number, Y: number, Z: number}}\n     */\n    __getXYZ: function() {\n       return {\n         X: this.__x * (this.__Y / Math.max(0.001, this.__y)),\n         Y: this.__Y,\n         Z: (1 - this.__x - this.__y) * (this.__Y / Math.max(0.001, this.__y))\n       };\n    },\n    /**\n     * Set internal __x, __y and __Y from XYZ color\n     * @private\n     * @param {number} X\n     * @param {number} Y\n     * @param {number} Z\n     */\n    __setXYZ: function(X, Y, Z) {\n      const XYZ = X + Y + Z;\n      // best guess for a total black: completely unsaturated, i.e. the white point\n      this.__x = XYZ > 0 ? X / XYZ : this.__W.x;\n      this.__y = XYZ > 0 ? Y / XYZ : this.__W.y;\n      this.__Y = Y;\n    },\n\n    /**\n     * move x and y to be inside the color range that the R, G and B span\n     * @private\n     * @param {number} x\n     * @param {number} y\n     * @returns {{x: number, y: number}}\n     */\n    __gamutMap: function(x = this.__x, y = this.__y) {\n      // is x-y on the same side of the R-G axis as the white point?\n      let iRG = cv.util.Color.intersect(this.__R, this.__G, this.__W, {x:x, y:y});\n      if (iRG.factors[0] >=0 && iRG.factors[0] <= 1) {\n        // no -> move it to be on the line\n        x = iRG.x;\n        y = iRG.y;\n      }\n      // is x-y on the same side of the G-B axis as the white point?\n      let iGB = cv.util.Color.intersect(this.__G, this.__B, this.__W, {x:x, y:y});\n      if (iGB.factors[0] >=0 && iGB.factors[0] <= 1) {\n        // no -> move it to be on the line\n        x = iGB.x;\n        y = iGB.y;\n      }\n      // is x-y on the same side of the B-R axis as the white point?\n      let iBR = cv.util.Color.intersect(this.__B, this.__R, this.__W, {x:x, y:y});\n      if (iBR.factors[0] >=0 && iBR.factors[0] <= 1) {\n        // no -> move it to be on the line\n        x = iBR.x;\n        y = iBR.y;\n      }\n      return {x: x, y: y};\n    },\n\n    // make derived color valid\n    __validateHSV: function (force) {\n      /**\n       * solve a special set of equations:\n       * <pre>\n       *    A1 * x*y*z + B1 * y*z + C1 * z = D1\n       *    A2 * x*y*z + B2 * y*z + C2 * z = D2\n       *    A3 * x*y*z + B3 * y*z + C3 * z = D3\n       * </pre>\n       * Wolfram Language code: Solve[{C1 z + B1 y z + A1 x y z == D1, C2 z + B2 y z + A2 x y z == D2, C3 z + B3 y z + A3 x y z == D3}, {x, y, z}]\n       *\n       * @param {number} A1\n       * @param {number} A2\n       * @param {number} A3\n       * @param {number} B1\n       * @param {number} B2\n       * @param {number} B3\n       * @param {number} C1\n       * @param {number} C2\n       * @param {number} C3\n       * @param {number} D1\n       * @param {number} D2\n       * @param {number} D3\n       * @returns {number[]}\n       */\n      function solve(A1, A2, A3, B1, B2, B3, C1, C2, C3, D1, D2, D3) {\n        return [\n          ( B1*C2*D3 - B1*C3*D2 - B2*C1*D3 + B2*C3*D1 + B3*C1*D2 - B3*C2*D1)/(-A1*C2*D3 + A1*C3*D2 + A2*C1*D3 - A2*C3*D1 - A3*C1*D2 + A3*C2*D1), // eslint-disable-line\n          ( A1*C2*D3 - A1*C3*D2 - A2*C1*D3 + A2*C3*D1 + A3*C1*D2 - A3*C2*D1)/(-A1*B2*D3 + A1*B3*D2 + A2*B1*D3 - A2*B3*D1 - A3*B1*D2 + A3*B2*D1), // eslint-disable-line\n          (-A1*B2*D3 + A1*B3*D2 + A2*B1*D3 - A2*B3*D1 - A3*B1*D2 + A3*B2*D1)/(-A1*B2*C3 + A1*B3*C2 + A2*B1*C3 - A2*B3*C1 - A3*B1*C2 + A3*B2*C1)  // eslint-disable-line\n        ];\n      }\n\n      if (this.__hsv === undefined || force) {\n        if (this.__Y < 1e-4) {\n          this.__hsv = { h: this.__HSV_h_last, s: 0, v: this.__Y };\n          return;\n        }\n\n        const colorAdd = function(a, b) {\n          const X = a.X + b.X;\n          const Y = a.Y + b.Y;\n          const Z = a.Z + b.Z;\n          return {x: X/(X+Y+Z), y: Y/(X+Y+Z), X:X, Y:Y, Z:Z};\n        };\n        const hues = [this.__R, this.__G, this.__B, this.__R];\n        const thisXYZ = {X:this.__x*this.__Y/this.__y, Y:this.__Y, Z: (1-this.__x-this.__y)*this.__Y/this.__y};\n\n        if ((this.__x-this.__W.x)**2 + (this.__y-this.__W.y)**2 < 1e-6) {\n          // color is white\n          this.__hsv = { h: this.__HSV_h_last, s:0, v: this.__Y };\n          return;\n        }\n        for (let i = 0; i<3; i++) {\n          const inter1 = cv.util.Color.intersect(hues[i], colorAdd(hues[i], hues[i+1]), this.__W, {x:this.__x, y:this.__y});\n          const inter2 = cv.util.Color.intersect(colorAdd(hues[i], hues[i+1]), hues[i+1], this.__W, {x:this.__x, y:this.__y});\n          // hues[i] -> (hues[i]+hues[i+1])\n          const fac = solve(\n            hues[i+1].X, hues[i+1].Y, hues[i+1].Z,\n            hues[i].X - this.__W.X, hues[i].Y - this.__W.Y, hues[i].Z - this.__W.Z,\n            this.__W.X, this.__W.Y, this.__W.Z,\n            thisXYZ.X, thisXYZ.Y, thisXYZ.Z\n          );\n          if (inter1.factors[0]>=0 && inter1.factors[1]>=0 && inter1.factors[1]<=1) {\n            this.__hsv = { h: 2*i/6+fac[0]/6, s: fac[1], v: fac[2] };\n            this.__HSV_h_last = this.__hsv.h;\n            break;\n          }\n\n          // (hues[i]+hues[i+1]) -> hues[i+1]\n          const fac2 = solve(\n            -hues[i].X, -hues[i].Y, -hues[i].Z,\n            hues[i].X + hues[i+1].X - this.__W.X, hues[i].Y + hues[i+1].Y - this.__W.Y, hues[i].Z + hues[i+1].Z - this.__W.Z,\n            this.__W.X, this.__W.Y, this.__W.Z,\n            thisXYZ.X, thisXYZ.Y, thisXYZ.Z\n        );\n        if (inter2.factors[0]>=0 && inter2.factors[1]>=0 && inter2.factors[1]<=1) {\n          this.__hsv = { h: (2*i+1)/6+fac2[0]/6, s: fac2[1], v: fac2[2] };\n          this.__HSV_h_last = this.__hsv.h;\n          break;\n        }\n        this.__hsv = { h: 0, s: 0, v: this.__Y };\n        this.__HSV_h_last = this.__hsv.h;\n        }\n      }\n    },\n\n    __validateRGB: function (force) {\n      if (this.__rgb === undefined || force) {\n        this.__rgb = {};\n        const {X, Y, Z} = this.__getXYZ();\n        [this.__rgb.r, this.__rgb.g, this.__rgb.b] = cv.util.Color.solve3d(\n          this.__R.X, this.__R.Y, this.__R.Z,\n          this.__G.X, this.__G.Y, this.__G.Z,\n          this.__B.X, this.__B.Y, this.__B.Z,\n          X, Y, Z\n        );\n        // scale and clamp:\n        let max = Math.max(this.__rgb.r, this.__rgb.g, this.__rgb.b);\n        if (max < 1) {\n          max = 1;\n        }\n        this.__rgb.r = Math.max(0, this.__rgb.r / max);\n        this.__rgb.g = Math.max(0, this.__rgb.g / max);\n        this.__rgb.b = Math.max(0, this.__rgb.b / max);\n      }\n    },\n\n    __validateRGBW: function (force) {\n      if (this.__rgbw === undefined || force) {\n        const {X, Y, Z} = this.__getXYZ();\n        let w2rgb = cv.util.Color.solve3d(\n          this.__R.X, this.__R.Y, this.__R.Z,\n          this.__G.X, this.__G.Y, this.__G.Z,\n          this.__B.X, this.__B.Y, this.__B.Z,\n          this.__W.X, this.__W.Y, this.__W.Z\n        );\n        this.__rgbw = {};\n        [this.__rgbw.r, this.__rgbw.g, this.__rgbw.b] = cv.util.Color.solve3d(\n          this.__R.X, this.__R.Y, this.__R.Z,\n          this.__G.X, this.__G.Y, this.__G.Z,\n          this.__B.X, this.__B.Y, this.__B.Z,\n          X, Y, Z\n        );\n        this.__rgbw.w = Math.min(this.__rgbw.r/w2rgb[0], this.__rgbw.g/w2rgb[1], this.__rgbw.b/w2rgb[2]);\n        this.__rgbw.r -= this.__rgbw.w * w2rgb[0];\n        this.__rgbw.g -= this.__rgbw.w * w2rgb[1];\n        this.__rgbw.b -= this.__rgbw.w * w2rgb[2];\n\n        // scale and clamp:\n        let max = Math.max(this.__rgbw.r, this.__rgbw.g, this.__rgbw.b, this.__rgbw.w);\n        if (max < 1) {\n          max = 1;\n        }\n        this.__rgbw.r = Math.max(0, this.__rgbw.r / max);\n        this.__rgbw.g = Math.max(0, this.__rgbw.g / max);\n        this.__rgbw.b = Math.max(0, this.__rgbw.b / max);\n        this.__rgbw.w = Math.max(0, this.__rgbw.w / max);\n      }\n    },\n\n    __validateT: function (force) {\n      // getting the color temperature from xy is only giving the correlated\n      // color temperature, the temperature of the Planckian radiator whose\n      // perceived color most closely resembles that of a given stimulus at the\n      // same brightness and under specified viewing conditions\n      // This formula works for CCT between 2000 K and 12500 K.\n      if (this.__T === undefined || force) {\n        const n = (this.__x - 0.3320) / (this.__y - 0.1858);\n        const T = ((-449 * n + 3525) * n - 6823.3) * n + 5520.33;\n        this.__T = Math.max(2000, Math.min(T, 12500));\n      }\n    },\n\n    __validateLab: function (force) {\n      if (this.__Lab === undefined || force) {\n        const Xn = this.__W.X;\n        const Yn = this.__W.Y;\n        const Zn = this.__W.Z;\n        const {X, Y, Z} = this.__getXYZ();\n        const f = function(t) {\n          if (t < 216/24389) {\n            return (24389/27*t+16)/116;\n          }\n          return t**(1/3);\n        };\n        this.__Lab = {\n          L: 116 * f(Y/Yn) - 16,\n          a: 500 * (f(X/Xn) - f(Y/Yn)),\n          b: 200 * (f(Y/Yn) - f(Z/Zn))\n        };\n      }\n    },\n\n    __validateLCh: function (force) {\n      this.__validateLab();\n      if (this.__LCh === undefined || force) {\n        this.__LCh = {\n          L: this.__Lab.L / 100, // map to 0...1\n          C: Math.sqrt(this.__Lab.a**2 + this.__Lab.b**2) / 150, // map to 0...1\n          h: (Math.atan2(this.__Lab.b, this.__Lab.a)/(2*Math.PI)+1)%1 // map angle to 0...1\n        };\n        if (this.__LCh.C < 1e-5) {\n          this.__LCh.h = this.__LCh_h_last;\n        } else {\n          this.__LCh_h_last = this.__LCh.h;\n        }\n      }\n    },\n\n    /**\n     * Invalidate all cached values but the one to keep\n     * @private\n     * @param {string} keep\n     * @param {string} [keep2]\n     */\n    __invalidateBut(keep, keep2 = '') {\n      [\n        '__rgb',\n        '__rgbw',\n        '__hsv',\n        '__Lab',\n        '__LCh',\n        '__T'\n      ].forEach(cache => {\n        if (cache !== keep && cache !== keep2) {\n          this[cache] = undefined;\n        }\n      });\n    },\n\n    // synchronise xyY\n    __syncHSV2xy: function () {\n      // first step: get maximum saturated RGB values\n      let r; let g; let b; let u; let d;         // eslint-disable-line max-statements-per-line\n      if (this.__hsv.h < 1/6) {\n        let u = (this.__hsv.h - 0/6) * 6;\n        r = 1; g = u; b = 0;                     // eslint-disable-line max-statements-per-line\n      } else if (this.__hsv.h < 2/6) {\n        u = (this.__hsv.h - 1/6) * 6; d = 1-u;   // eslint-disable-line max-statements-per-line\n        r = d; g = 1; b = 0;                     // eslint-disable-line max-statements-per-line\n      } else if (this.__hsv.h < 3/6) {\n        let u = (this.__hsv.h - 2/6) * 6;\n        r = 0; g = 1; b = u;                     // eslint-disable-line max-statements-per-line\n      } else if (this.__hsv.h < 4/6) {\n        u = (this.__hsv.h - 3/6) * 6; d = 1-u;   // eslint-disable-line max-statements-per-line\n        r = 0; g = d; b = 1;                     // eslint-disable-line max-statements-per-line\n      } else if (this.__hsv.h < 5/6) {\n        u = (this.__hsv.h - 4/6) * 6;\n        r = u; g = 0; b = 1;                     // eslint-disable-line max-statements-per-line\n      } else {\n        u = (this.__hsv.h - 5/6) * 6; d = 1-u;   // eslint-disable-line max-statements-per-line\n        r = 1; g = 0; b = d;                     // eslint-disable-line max-statements-per-line\n      }\n\n      // second step: blend with white to take saturation into account and scale with brightness\n      const X = ((this.__R.X * r + this.__G.X * g + this.__B.X * b) * this.__hsv.s + (1-this.__hsv.s) * this.__W.X) * this.__hsv.v;\n      const Y = ((this.__R.Y * r + this.__G.Y * g + this.__B.Y * b) * this.__hsv.s + (1-this.__hsv.s) * this.__W.Y) * this.__hsv.v;\n      const Z = ((this.__R.Z * r + this.__G.Z * g + this.__B.Z * b) * this.__hsv.s + (1-this.__hsv.s) * this.__W.Z) * this.__hsv.v;\n      this.__setXYZ(X, Y, Z);\n      this.__invalidateBut('__hsv');\n    },\n\n    __syncRGB2xy: function () {\n      this.__Y = Math.max(this.__rgb.r, this.__rgb.g, this.__rgb.b);\n      if (this.__Y > 0) {\n        const X = this.__R.X * this.__rgb.r + this.__G.X * this.__rgb.g + this.__B.X * this.__rgb.b;\n        const Y = this.__R.Y * this.__rgb.r + this.__G.Y * this.__rgb.g + this.__B.Y * this.__rgb.b;\n        const Z = this.__R.Z * this.__rgb.r + this.__G.Z * this.__rgb.g + this.__B.Z * this.__rgb.b;\n        this.__setXYZ(X, Y, Z);\n      } // else: do nothing and keep the current x and y to be able to restore it's value when just the brightness will be increased again\n      this.__invalidateBut('__rgb');\n    },\n\n    __syncRGBW2xy: function () {\n      this.__Y = Math.max(this.__rgbw.r, this.__rgbw.g, this.__rgbw.b, this.__rgbw.w);\n      if (this.__Y > 0) {\n        const X = this.__R.X * this.__rgbw.r + this.__G.X * this.__rgbw.g + this.__B.X * this.__rgbw.b + this.__W.X * this.__rgbw.w;\n        const Y = this.__R.Y * this.__rgbw.r + this.__G.Y * this.__rgbw.g + this.__B.Y * this.__rgbw.b + this.__W.Y * this.__rgbw.w;\n        const Z = this.__R.Z * this.__rgbw.r + this.__G.Z * this.__rgbw.g + this.__B.Z * this.__rgbw.b + this.__W.Z * this.__rgbw.w;\n        this.__setXYZ(X, Y, Z);\n      } // else: do nothing and keep the current x and y to be able to restore it's value when just the brightness will be increased again\n      this.__invalidateBut('__rgbw');\n    },\n\n    __syncT2xy: function () {\n      let xy = cv.util.Color.temperature2xy(this.__T);\n      this.__x = xy.x;\n      this.__y = xy.y;\n      this.__invalidateBut('__T');\n    },\n\n    __syncY2xy: function () {\n      this.__invalidateBut('__T');\n    },\n\n    __syncLab2xy: function (keepLCh = false) {\n      const Xn = this.__W.X;\n      const Yn = this.__W.Y;\n      const Zn = this.__W.Z;\n      const fInv = function(t) {\n        if (t < 6/29) {\n          return 3*(6/29)**2*(t-4/29);\n        }\n        return t**3;\n      };\n      const Lab = this.__Lab;\n      const L16 = (Lab.L + 16)/116;\n      const X = Xn * fInv(L16 + Lab.a/500);\n      const Y = Yn * fInv(L16);\n      const Z = Zn * fInv(L16 - Lab.b/200);\n      this.__setXYZ(X, Y, Z);\n\n      this.__invalidateBut('__Lab', keepLCh?'__LCh':'');\n    },\n\n    __syncLCh2xy: function () {\n      this.__Lab = {\n        L: this.__LCh.L * 100,\n        a: this.__LCh.C * Math.cos(this.__LCh.h*2*Math.PI) * 150,\n        b: this.__LCh.C * Math.sin(this.__LCh.h*2*Math.PI) * 150\n      };\n      this.__syncLab2xy(true);\n    },\n\n    /**\n     * Change the color by changing one of it's components.\n     *\n     * Expected values are:\n     * - h, s, v: 0...1\n     * - r, g, b, w: 0...1\n     * - T: 1667...25000 Kelvin\n     * - x, y, Y: 0...1\n     * - L, C, h: 0...1\n     *\n     * @param {string} component\n     * @param {(number|number[]|{h:number,s:number,v:number}|{r:number,g:number,b:number,w:number}|{x:number,y:number,Y:number})} value\n     */\n    changeComponent: function(component, value) {\n      /**\n       * Clamp the value to the given range\n       * @param {number} value\n       * @param {number} [min]\n       * @param {number} [max]\n       * @returns {number}\n       */\n      function clamp(value, min=0, max=1) {\n        return Math.min(Math.max(min, value), max);\n      }\n\n      switch (component) {\n        case 'h':\n        case 's':\n        case 'v':\n          this.__validateHSV();\n          this.__hsv[component] = clamp(value);\n          this.__syncHSV2xy();\n          break;\n\n        case 'sv':\n          this.__validateHSV();\n          this.__hsv.s = clamp(value[0]);\n          this.__hsv.v = clamp(value[1]);\n          this.__syncHSV2xy();\n          break;\n\n        case 'hsv':\n          this.__hsv = {\n            h: clamp(value.h),\n            s: clamp(value.s),\n            v: clamp(value.v)\n          };\n          this.__syncHSV2xy();\n          break;\n\n        case 'RGB-r':\n        case 'RGB-g':\n        case 'RGB-b':\n          this.__validateRGB();\n          this.__rgb[component.split('-')[1]] = clamp(value);\n          this.__syncRGB2xy();\n          break;\n\n        case 'rgb':\n          this.__rgb = {\n            r: clamp(value.r),\n            g: clamp(value.g),\n            b: clamp(value.b)\n          };\n          this.__syncRGB2xy();\n          break;\n\n        case 'RGBW-r':\n        case 'RGBW-g':\n        case 'RGBW-b':\n        case 'RGBW-w':\n          this.__validateRGBW();\n          this.__rgbw[component.split('-')[1]] = clamp(value);\n          this.__syncRGBW2xy();\n          break;\n\n        case 'rgbw':\n          this.__rgbw = {\n            r: clamp(value.r),\n            g: clamp(value.g),\n            b: clamp(value.b),\n            w: clamp(value.w)\n          };\n          this.__syncRGBW2xy();\n          break;\n\n        case 'T':\n          this.__T = Math.max(1667, Math.min(value, 25000));\n          this.__syncT2xy();\n          break;\n\n        case 'x':\n          this.__x = clamp(value);\n          this.__invalidateBut(''); // all precalculated colors are invalid now\n          break;\n\n        case 'y':\n          this.__y = clamp(value);\n          this.__invalidateBut(''); // all precalculated colors are invalid now\n          break;\n\n        case 'xy':\n          this.__x = clamp(value.x);\n          this.__y = clamp(value.y);\n          this.__invalidateBut(''); // all precalculated colors are invalid now\n          break;\n\n        case 'Y':\n          this.__Y = clamp(value);\n          this.__syncY2xy();\n          break;\n\n        case 'xyY':\n          this.__x = clamp(value.x);\n          this.__y = clamp(value.y);\n          this.__Y = clamp(value.Y);\n          this.__invalidateBut(''); // all precalculated colors are invalid now\n          break;\n\n        case 'LCh-L':\n        case 'LCh-C':\n          this.__validateLCh();\n          this.__LCh[component.split('-')[1]] = clamp(value);\n          this.__syncLCh2xy();\n          break;\n\n        case 'LCh-h':\n          this.__validateLCh();\n          this.__LCh[component.split('-')[1]] = clamp(value);\n          this.__LCh_h_last = this.__LCh.h;\n          this.__syncLCh2xy();\n          break;\n\n        case 'LCh-CL':\n          this.__validateLCh();\n          this.__LCh.C = clamp(value[0]);\n          this.__LCh.L = clamp(value[1]);\n          this.__syncLCh2xy();\n          break;\n      }\n    },\n\n    /**\n     * Set the internal value to the given HSV value without a check.\n     * THIS IS FOR INTERNAL USE ONLY! DO NOT USE!\n     * @private\n     * @param {{h: number, s: number, v: number}} hsv\n     */\n    _forceHSV: function (hsv) {\n      this.__hsv = hsv;\n      this.__syncHSV2xy();\n    },\n    _forceLCh: function (LCh) {\n      this.__LCh = LCh;\n      this.__syncLCh2xy();\n    },\n\n    /**\n     * Get the value(s) of the specified component\n     *\n     * Value ranges are:\n     * - h, s, v: 0...1\n     * - r, g, b, w: 0...1\n     * - T: 1667...25000 Kelvin\n     * - x, y, Y: 0...1\n     * - L, a, b: 0...100 for `L` and roughly -150...150 for `a` and `b`\n     * - L, C, h: 0...1\n     *\n     * @param {string} component\n     * @param {boolean} gamutMap\n     * @param {boolean} force\n     * @returns {(number|{x:number, y:number}|{h:number,s:number,v:number}|{r:number,g:number,b:number}|{r:number,g:number,b:number,w:number}|{L:number,a:number,b:number}|{L:number,C:number,h:number})}\n     */\n    getComponent: function (component, gamutMap = true, force = false) {\n      const clamp = (min, x, max) => Number.isFinite(x) ? (gamutMap ? Math.max(min, Math.min(x, max)) : x) : 0;\n\n      switch (component) {\n        case 'xy':\n          return {x: clamp(0, this.__x, 1), y: clamp(0, this.__y, 1)};\n        case 'Y':\n          return clamp(0, this.__Y, 1);\n        case 'xyY':\n          return {x: clamp(0, this.__x, 1), y: clamp(0, this.__y, 1), Y: clamp(0, this.__Y, 1)};\n\n        case 'h':\n        case 's':\n        case 'v':\n          this.__validateHSV(force);\n          return clamp(0, this.__hsv[component], 1);\n\n        case 'hsv':\n          this.__validateHSV(force);\n          return {\n            h: clamp(0, this.__hsv.h, 1),\n            s: clamp(0, this.__hsv.s, 1),\n            v: clamp(0, this.__hsv.v, 1)\n          };\n\n        case 'RGB-r':\n        case 'RGB-g':\n        case 'RGB-b': {\n          this.__validateRGB(force);\n          const map = gamutMap ? 1 / Math.max(this.__rgb.r, this.__rgb.g, this.__rgb.b, 1) : 1;\n          return map * this.__rgb[component.split('-')[1]];\n        }\n\n        case 'rgb': {\n          this.__validateRGB(force);\n          const map = gamutMap ? 1 / Math.max(this.__rgb.r, this.__rgb.g, this.__rgb.b, 1) : 1;\n          return {\n            r: map * this.__rgb.r,\n            g: map * this.__rgb.g,\n            b: map * this.__rgb.b\n          };\n        }\n\n        case 'RGBW-r':\n        case 'RGBW-g':\n        case 'RGBW-b':\n        case 'RGBW-w': {\n          this.__validateRGBW(force);\n          const map = gamutMap ? 1 / Math.max(this.__rgbw.r, this.__rgbw.g, this.__rgbw.b, this.__rgbw.w, 1) : 1;\n          return map * this.__rgbw[component.split('-')[1]];\n        }\n\n        case 'rgbw': {\n          this.__validateRGBW(force);\n          const map = gamutMap ? 1 / Math.max(this.__rgbw.r, this.__rgbw.g, this.__rgbw.b, this.__rgbw.w, 1) : 1;\n          return {\n            r: map * this.__rgbw.r,\n            g: map * this.__rgbw.g,\n            b: map * this.__rgbw.b,\n            w: map * this.__rgbw.w\n          };\n        }\n\n        case 'T':\n          this.__validateT(force);\n          return clamp(1667, this.__T, 25000);\n\n        case 'Lab':\n          this.__validateLab(force);\n          return this.__Lab;\n\n        case 'LCh-L':\n        case 'LCh-C':\n        case 'LCh-h':\n          this.__validateLCh(force);\n          return clamp(0, this.__LCh[component.split('-')[1]], 1);\n\n        case 'LCh':\n          this.__validateLCh(force);\n          return {\n            L: clamp(0, this.__LCh.L, 1),\n            C: clamp(0, this.__LCh.C, 1),\n            h: clamp(0, this.__LCh.h, 1)\n          };\n      }\n\n      return undefined; // unknown component\n    },\n\n    /**\n     * Return a copy from this color\n     * @returns {cv.util.Color}\n     */\n    copy: function () {\n      return Object.assign(new cv.util.Color(), this);\n    },\n\n    /**\n     * Calculate the distance (difference) between this color and the otherColor\n     * in Lab color space, i.e. calculate the Delta E.\n     * @param {cv.util.Color} otherColor\n     * @returns {number}\n     */\n    delta: function (otherColor) {\n      this.__validateLab();\n      otherColor.__validateLab();\n      const Lab = otherColor.__Lab;\n      const dL = this.__Lab.L - Lab.L;\n      const da = this.__Lab.a - Lab.a;\n      const db = this.__Lab.b - Lab.b;\n      return Math.sqrt(dL*dL + da*da + db*db);\n    },\n\n    /**\n     * Create a new color by calculating (1-ratio)*thisColor + ratio*otherColor.\n     * The blending is done by mixing the LCh coordinates.\n     * otherColor must have the same base colors xy coordinates, as this\n     * is not checked or even enforced doing a blend between such different\n     * colors will create an undesired result.\n     * @param {cv.util.Color} otherColor\n     * @param {number} ratio\n     * @returns {cv.util.Color}\n     */\n    blend: function (otherColor, ratio) {\n      this.__validateLCh();\n      otherColor.__validateLCh();\n      const b = (x, y) => ((1-ratio)*x + ratio*y);\n      const c = this.copy();\n      const c1 = this.__LCh;\n      const c2 = otherColor.__LCh;\n      const s = Math.abs(c2.h-c1.h+1) > Math.abs(c2.h-c1.h);\n      const e = Math.abs(c2.h-c1.h-1) > Math.abs(c2.h-c1.h);\n\n      c._forceLCh({\n        h: b(c1.h+s, c2.h+e)%1, // handle 360° === 0° to always take shortest distance\n        L: b(c1.L, c2.L),\n        C: b(c1.C, c2.C)\n      });\n      return c;\n    }\n  }\n});\n"
  ]
}