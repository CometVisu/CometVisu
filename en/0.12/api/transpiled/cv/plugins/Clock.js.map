{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/Clock.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "construct",
    "props",
    "value",
    "Date",
    "__Elements",
    "properties",
    "src",
    "check",
    "srcPopup",
    "titlePopup",
    "hide24h",
    "init",
    "hide24hPopup",
    "hideAMPM",
    "hideAMPMPopup",
    "hideDigits",
    "hideDigitsPopup",
    "hideSeconds",
    "hideSecondsPopup",
    "sendOnFinish",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "getAttributeToPropertyMappings",
    "parseFormat",
    "parseAddress",
    "transformValueTrue",
    "target",
    "transform",
    "getElements",
    "svg",
    "elements",
    "hour24",
    "querySelector",
    "hour",
    "minute",
    "second",
    "am",
    "pm",
    "digits",
    "tspan",
    "hour24Group",
    "setAttribute",
    "members",
    "__svg",
    "__inDrag",
    "__timeToShow",
    "_getInnerDomString",
    "_onDomReady",
    "__throttled",
    "util",
    "Function",
    "throttle",
    "dragAction",
    "trailing",
    "uri",
    "ResourceManager",
    "getInstance",
    "toUri",
    "getSrc",
    "uriPopup",
    "getSrcPopup",
    "promises",
    "window",
    "fetch",
    "push",
    "Promise",
    "all",
    "then",
    "responses",
    "result",
    "ok",
    "Error",
    "text",
    "texts",
    "actor",
    "getActor",
    "innerHTML",
    "firstElementChild",
    "getAttribute",
    "width",
    "height",
    "plugins",
    "Clock",
    "getHide24h",
    "getHideAMPM",
    "getHideDigits",
    "getHideSeconds",
    "length",
    "popup",
    "document",
    "createElement",
    "title",
    "getTitlePopup",
    "addEventListener",
    "PopupHandler",
    "showPopup",
    "content",
    "getHide24hPopup",
    "getHideAMPMPopup",
    "getHideDigitsPopup",
    "getHideSecondsPopup",
    "HotSpotHour",
    "HotSpotMinute",
    "HotSpotSecond",
    "_updateHands",
    "error",
    "initListeners",
    "_update",
    "address",
    "isDataAlreadyHandled",
    "defaultValueHandling",
    "split",
    "handleEvent",
    "event",
    "dragMode",
    "none",
    "type",
    "id",
    "preventDefault",
    "stopPropagation",
    "buttons",
    "dragHelper",
    "removeEventListener",
    "getSendOnFinish",
    "call",
    "CTM",
    "getScreenCTM",
    "x",
    "clientX",
    "e",
    "a",
    "y",
    "clientY",
    "f",
    "d",
    "angle",
    "Math",
    "atan2",
    "PI",
    "time",
    "getValue",
    "minutes",
    "oldHours",
    "getHours",
    "hours",
    "floor",
    "setDate",
    "getDate",
    "setHours",
    "setMinutes",
    "round",
    "oldMinutes",
    "getMinutes",
    "setSeconds",
    "seconds",
    "oldSeconds",
    "getSeconds",
    "getAddress",
    "addr",
    "mode",
    "TemplateEngine",
    "visu",
    "write",
    "Transform",
    "encode",
    "forEach",
    "showSeconds",
    "textContent",
    "sprintf",
    "defer",
    "addHandler",
    "WidgetFactory",
    "registerClass"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Clock.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * @asset(plugins/clock/*)\n */\nqx.Class.define('cv.plugins.Clock', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Update],\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (props) {\n    props.value = new Date();\n    this.__Elements = [];\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n  PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: {\n      check: 'String'\n    },\n    srcPopup: {\n      check: 'String'\n    },\n    titlePopup: {\n      check: 'String'\n    },\n    hide24h: {\n      check: 'Boolean',\n      init: false\n    },\n    hide24hPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    hideAMPM: {\n      check: 'Boolean',\n      init: false\n    },\n    hideAMPMPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    hideDigits: {\n      check: 'Boolean',\n      init: false\n    },\n    hideDigitsPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    hideSeconds: {\n      check: 'Boolean',\n      init: false\n    },\n    hideSecondsPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse: function (xml, path, flavour, pageType) {\n      const data = cv.parser.WidgetParser.parseElement(this, xml, path, flavour, pageType, this.getAttributeToPropertyMappings());\n      cv.parser.WidgetParser.parseFormat(xml, path);\n      cv.parser.WidgetParser.parseAddress(xml, path);\n      return data;\n    },\n\n    getAttributeToPropertyMappings: function () {\n      let transformValueTrue = function(value) {\n        return value === 'true';\n      };\n\n      return {\n        'src': {\n          'default': 'plugins/clock/clock_pure.svg'\n        },\n        'src_popup': {\n          target: 'srcPopup',\n          'default': ''\n        },\n        'title_popup': {\n          target: 'titlePopup',\n          'default': ''\n        },\n        'hide_24h': {\n          target: 'hide24h',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_24h_popup': {\n          target: 'hide24hPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_am_pm': {\n          target: 'hideAMPM',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_am_pm_popup': {\n          target: 'hideAMPMPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_digits': {\n          target: 'hideDigits',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_digits_popup': {\n          target: 'hideDigitsPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_seconds': {\n          target: 'hideSeconds',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_seconds_popup': {\n          target: 'hideSecondsPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'send_on_finish': {\n          target: 'sendOnFinish',\n          'default': false,\n          transform: transformValueTrue\n        }\n      };\n    },\n\n    getElements: function(svg, hide24h, hideAMPM, hideDigits, hideSeconds) {\n      let elements = {\n        hour24: svg.querySelector('#Hour24'),\n        hour: svg.querySelector('#Hour'),\n        minute: svg.querySelector('#Minute'),\n        second: svg.querySelector('#Second'),\n        am: svg.querySelector('#AM'),\n        pm: svg.querySelector('#PM'),\n        digits: svg.querySelector('#Digits')\n      };\n      let tspan;\n      while (elements.digits !== null && (tspan = elements.digits.querySelector('tspan')) !== null) {\n        elements.digits = tspan;\n      }\n      let hour24Group = svg.querySelector('#Hour24Group');\n\n      if (hide24h && hour24Group !== null) {\n        hour24Group.setAttribute('display', 'none');\n      }\n      if (hideAMPM) {\n        if (elements.am !== null) {\n          elements.am.setAttribute('display', 'none');\n          elements.am = null;\n        }\n        if (elements.pm !== null) {\n          elements.pm.setAttribute('display', 'none');\n          elements.pm = null;\n        }\n      }\n      if (hideDigits && elements.digits !== null) {\n        elements.digits.setAttribute('display', 'none');\n      }\n      if (hideSeconds && elements.second !== null) {\n        elements.second.setAttribute('display', 'none');\n      }\n\n      return elements;\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __svg: null, // cached access to the SVG in the DOM\n    __Elements: null, // cached access to the individual clock parts\n    __inDrag: 0, // is the handle currently dragged?\n    __timeToShow: null, // time to show on the clock\n\n    _getInnerDomString: function () {\n      return '<div class=\"actor\" style=\"width:100%;height:100%\"></div>';\n    },\n\n    _onDomReady: function () {\n      this.base(arguments);\n\n      this.__throttled = cv.util.Function.throttle(this.dragAction, 250, {trailing: true}, this);\n\n      let uri = qx.util.ResourceManager.getInstance().toUri(this.getSrc());\n      let uriPopup = this.getSrcPopup();\n      let promises = [window.fetch(uri)];\n      if (uriPopup !== '') {\n        uriPopup = qx.util.ResourceManager.getInstance().toUri(uriPopup);\n        promises.push(window.fetch(uriPopup));\n      }\n      Promise.all(promises)\n        .then(responses => {\n          let result = [];\n          if (!responses[0].ok) {\n            throw new Error('Not 2xx response for URI \"' + uri + '\"');\n          } else {\n            result.push(responses[0].text());\n          }\n          if (uriPopup !== '') {\n            if (!responses[1].ok) {\n              throw new Error('Not 2xx response for popup URI \"' + uriPopup + '\"');\n            } else {\n              result.push(responses[1].text());\n            }\n          }\n          return Promise.all(result);\n        })\n        .then(texts => {\n          let actor = this.getActor();\n          actor.innerHTML = texts[0];\n          let svg = actor.firstElementChild;\n\n          // make sure that the SVG fits exactly to the available space\n          if (!svg.getAttribute('viewBox')) {\n            // fix SVGs that don't contain a viewBox\n            let width = svg.getAttribute('width') || 300;\n            let height = svg.getAttribute('height') || 150;\n            svg.setAttribute('viewBox', '0 0 ' + width + ' ' + height);\n          }\n          svg.setAttribute('width', '100%');\n          svg.setAttribute('height', '100%');\n          this.__Elements = [cv.plugins.Clock.getElements(svg, this.getHide24h(), this.getHideAMPM(), this.getHideDigits(), this.getHideSeconds())];\n\n          if (texts.length > 1) {\n            let popup = document.createElement('div');\n            let title = this.getTitlePopup();\n            popup.setAttribute('style', 'width:100%;height:100%;position:absolute;');\n            popup.innerHTML = texts[1];\n\n            svg.addEventListener('click', function() {\n              cv.ui.PopupHandler.showPopup('clock', {title: title, content: popup});\n            });\n            svg = popup.firstElementChild;\n\n           // make sure that also this SVG fits exactly to the available space\n            if (!svg.getAttribute('viewBox')) {\n              // fix SVGs that don't contain a viewBox\n              let width = svg.getAttribute('width') || 300;\n              let height = svg.getAttribute('height') || 150;\n              svg.setAttribute('viewBox', '0 0 ' + width + ' ' + height);\n            }\n            svg.setAttribute('width', '100%');\n            svg.setAttribute('height', '100%');\n\n            this.__Elements.push(cv.plugins.Clock.getElements(svg, this.getHide24hPopup(), this.getHideAMPMPopup(), this.getHideDigitsPopup(), this.getHideSecondsPopup()));\n          }\n\n          svg.setAttribute('style', 'touch-action: none'); // prevent scroll interference\n\n          let HotSpotHour = svg.querySelector('#HotSpotHour');\n          if (HotSpotHour) {\n            HotSpotHour.addEventListener('pointerdown', this);\n          }\n          let HotSpotMinute = svg.querySelector('#HotSpotMinute');\n          if (HotSpotMinute) {\n            HotSpotMinute.addEventListener('pointerdown', this);\n          }\n          let HotSpotSecond = svg.querySelector('#HotSpotSecond');\n          if (HotSpotSecond) {\n            HotSpotSecond.addEventListener('pointerdown', this);\n          }\n          this.__svg = svg;\n\n          if (this.__timeToShow !== null) {\n            // did we receive a time earlier than the SVG? => Show it now\n            this._updateHands();\n          }\n        })\n        .catch(error => {\n          this.error('There has been a problem with the reading of the clock SVG:', error);\n        });\n    },\n\n    // overridden\n    initListeners: function () {},\n\n    // overridden\n    _update: function (address, data, isDataAlreadyHandled) {\n      let value = isDataAlreadyHandled ? data : this.defaultValueHandling(address, data);\n      this.__timeToShow = value.split(':');\n      this._updateHands();\n    },\n\n    handleEvent: function (event) {\n      const dragMode = {\n        none: 0,\n        hour: 1,\n        minute: 2,\n        second: 3\n      };\n      \n      switch (event.type) {\n        case 'pointerdown':\n          switch (event.target.id) {\n            case 'HotSpotHour':\n              this.__inDrag = dragMode.hour;\n              break;\n\n            case 'HotSpotMinute':\n              this.__inDrag = dragMode.minute;\n              break;\n\n            case 'HotSpotSecond':\n              this.__inDrag = dragMode.second;\n              break;\n\n            default:\n              this.__inDrag = dragMode.none;\n              return; // early exit\n          }\n          document.addEventListener('pointermove', this);\n          document.addEventListener('pointerup', this);\n          event.preventDefault();\n          event.stopPropagation();\n          break;\n\n        case 'pointermove':\n          if (this.__inDrag === dragMode.none) {\n            return;\n          }\n          event.preventDefault();\n          event.stopPropagation();\n          if (event.buttons > 0) {\n            this.dragHelper(event);\n            break;\n          } // jshint ignore:line\n          // pass through to end drag when no buttons are pressed anymore\n\n        // eslint-disable-next-line no-fallthrough\n        case 'pointerup':\n        case 'pointercancel':\n          this.dragHelper(event);\n          this.__inDrag = dragMode.none;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          break;\n      }\n\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call();\n      }\n    },\n\n    dragHelper: function (event) {\n      const dragMode = {\n        none: 0,\n        hour: 1,\n        minute: 2,\n        second: 3\n      };\n\n      let CTM = this.__svg.getScreenCTM(); // get the Current Transformation Matrix\n      let x = (event.clientX - CTM.e) / CTM.a - 60;\n      let y = 60 - (event.clientY - CTM.f) / CTM.d;\n      let angle = (Math.atan2(x, y) * 180 / Math.PI + 360) % 360;\n\n      let time = this.getValue();\n      let minutes;\n      switch (this.__inDrag) {\n        case dragMode.hour: {\n          let oldHours = time.getHours();\n          let pm = oldHours >= 12;\n          let hours = Math.floor(angle / 30);\n          minutes = (angle % 30) * 2;\n\n          if (oldHours % 12 > 9 && hours < 3) {\n            if (pm) {\n              pm = false;\n              time.setDate(time.getDate() + 1);\n            } else {\n              pm = true;\n            }\n          } else if (hours > 9 && oldHours % 12 < 3) {\n            if (pm) {\n              pm = false;\n            } else {\n              pm = true;\n              time.setDate(time.getDate() - 1);\n            }\n          }\n\n          time.setHours(hours + pm * 12);\n          time.setMinutes(minutes);\n          break;\n        }\n\n        case dragMode.minute: {\n          if (this.getHideSeconds()) {\n            minutes = Math.round(angle / 6);\n          } else {\n            minutes = Math.floor(angle / 6);\n          }\n          let oldMinutes = time.getMinutes();\n\n          if (oldMinutes > 45 && minutes < 15) {\n            time.setHours(time.getHours() + 1);\n          } else if (minutes > 45 && oldMinutes < 15) {\n            time.setHours(time.getHours() - 1);\n          }\n          time.setMinutes(minutes);\n          time.setSeconds((angle % 6) * 10);\n          break;\n        }\n\n        case dragMode.second: {\n          let seconds = Math.round(angle / 6) % 60;\n          let oldSeconds = time.getSeconds();\n\n          if (oldSeconds > 45 && seconds < 15) {\n            time.setMinutes(time.getMinutes() + 1);\n          } else if (seconds > 45 && oldSeconds < 15) {\n            time.setMinutes(time.getMinutes() - 1);\n          }\n          time.setSeconds(seconds);\n          break;\n        }\n      }\n      if (this.getHideSeconds()) {\n        time.setSeconds(0);\n      }\n      this.__timeToShow = [time.getHours(), time.getMinutes(), time.getSeconds()];\n      this._updateHands();\n    },\n\n    dragAction: function () {\n      const address = this.getAddress();\n      for (let addr in address) {\n        if (address[addr].mode === true) {\n          continue;\n        } // skip read only\n        cv.TemplateEngine.getInstance().visu.write(addr, cv.Transform.encode(address[addr].transform, this.getValue()));\n      }\n    },\n\n    _updateHands: function () {\n      const [hour, minute, second] = this.__timeToShow;\n      this.__Elements.forEach(e => {\n        let showSeconds = true;\n        if (e.hour !== null) {\n          if (showSeconds) {\n            e.hour.setAttribute('transform', 'rotate(' + ((hour % 12) * 360 / 12 + minute * 30 / 60 + second * 30 / 60 / 60) + ',0,0)');\n          } else {\n            e.hour.setAttribute('transform', 'rotate(' + ((hour % 12) * 360 / 12 + minute * 30 / 60) + ',0,0)');\n          }\n        }\n        if (e.minute !== null) {\n          if (showSeconds) {\n            e.minute.setAttribute('transform', 'rotate(' + (minute * 6 + second * 6 / 60) + ',0,0)');\n          } else {\n            e.minute.setAttribute('transform', 'rotate(' + (minute * 6) + ',0,0)');\n          }\n        }\n        if (e.second !== null) {\n          e.second.setAttribute('transform', 'rotate(' + (second * 6) + ',0,0)');\n        }\n        if (e.hour24 !== null) {\n          e.hour24.setAttribute('transform', 'rotate(' + ((hour % 24) * 360 / 24 + minute * 15 / 60) + ',0,0)');\n        }\n        if (e.am !== null) {\n          e.am.setAttribute('display', hour < 12 ? '' : 'none');\n        }\n        if (e.pm !== null) {\n          e.pm.setAttribute('display', hour < 12 ? 'none' : '');\n        }\n        if (e.digits !== null) {\n          if (this.getHideSeconds()) {\n            e.digits.textContent = sprintf('%02d:%02d', hour, minute);\n          } else {\n            e.digits.textContent = sprintf('%02d:%02d:%02d', hour, minute, second);\n          }\n        }\n      });\n    }\n  },\n\n  defer: function(statics) {\n    cv.parser.WidgetParser.addHandler('clock', cv.plugins.Clock);\n    cv.ui.structure.WidgetFactory.registerClass('clock', statics);\n  }\n});\n"
  ]
}