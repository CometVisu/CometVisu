{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/plugins/Clock.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "construct",
    "props",
    "value",
    "Date",
    "properties",
    "src",
    "check",
    "srcPopup",
    "titlePopup",
    "hide24h",
    "init",
    "hide24hPopup",
    "hideAMPM",
    "hideAMPMPopup",
    "hideDigits",
    "hideDigitsPopup",
    "hideSeconds",
    "hideSecondsPopup",
    "sendOnFinish",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "getAttributeToPropertyMappings",
    "parseFormat",
    "parseAddress",
    "transformValueTrue",
    "target",
    "transform",
    "getElements",
    "svg",
    "elements",
    "hour24",
    "querySelector",
    "hour",
    "minute",
    "second",
    "am",
    "pm",
    "digits",
    "tspan",
    "hour24Group",
    "setAttribute",
    "members",
    "__svg",
    "__Elements",
    "__inDrag",
    "_getInnerDomString",
    "_onDomReady",
    "args",
    "arguments",
    "__throttled",
    "util",
    "Function",
    "throttle",
    "dragAction",
    "trailing",
    "uri",
    "ResourceManager",
    "getInstance",
    "toUri",
    "getSrc",
    "uriPopup",
    "getSrcPopup",
    "promises",
    "window",
    "fetch",
    "push",
    "Promise",
    "all",
    "then",
    "responses",
    "result",
    "ok",
    "Error",
    "text",
    "texts",
    "actor",
    "getActor",
    "innerHTML",
    "firstElementChild",
    "getAttribute",
    "width",
    "height",
    "plugins",
    "Clock",
    "getHide24h",
    "getHideAMPM",
    "getHideDigits",
    "getHideSeconds",
    "length",
    "popup",
    "document",
    "createElement",
    "title",
    "getTitlePopup",
    "addEventListener",
    "PopupHandler",
    "showPopup",
    "content",
    "getHide24hPopup",
    "getHideAMPMPopup",
    "getHideDigitsPopup",
    "getHideSecondsPopup",
    "HotSpotHour",
    "getElementById",
    "HotSpotMinute",
    "HotSpotSecond",
    "error",
    "console",
    "initListeners",
    "_update",
    "address",
    "isDataAlreadyHandled",
    "defaultValueHandling",
    "time",
    "split",
    "_updateHands",
    "handleEvent",
    "event",
    "dragMode",
    "none",
    "type",
    "id",
    "preventDefault",
    "stopPropagation",
    "buttons",
    "dragHelper",
    "removeEventListener",
    "getSendOnFinish",
    "call",
    "CTM",
    "getScreenCTM",
    "x",
    "clientX",
    "e",
    "a",
    "y",
    "clientY",
    "f",
    "d",
    "angle",
    "Math",
    "atan2",
    "PI",
    "getValue",
    "minutes",
    "oldHours",
    "getHours",
    "hours",
    "floor",
    "setDate",
    "getDate",
    "setHours",
    "setMinutes",
    "round",
    "oldMinutes",
    "getMinutes",
    "setSeconds",
    "seconds",
    "oldSeconds",
    "getSeconds",
    "getAddress",
    "addr",
    "TemplateEngine",
    "visu",
    "write",
    "Transform",
    "encode",
    "forEach",
    "showSeconds",
    "textContent",
    "sprintf",
    "defer",
    "addHandler",
    "WidgetFactory",
    "registerClass"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Clock.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * @asset(plugins/clock/*)\n */\nqx.Class.define('cv.plugins.Clock', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Update],\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (props) {\n    props.value = new Date();\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n  PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: {\n      check: 'String'\n    },\n    srcPopup: {\n      check: 'String'\n    },\n    titlePopup: {\n      check: 'String'\n    },\n    hide24h: {\n      check: 'Boolean',\n      init: false\n    },\n    hide24hPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    hideAMPM: {\n      check: 'Boolean',\n      init: false\n    },\n    hideAMPMPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    hideDigits: {\n      check: 'Boolean',\n      init: false\n    },\n    hideDigitsPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    hideSeconds: {\n      check: 'Boolean',\n      init: false\n    },\n    hideSecondsPopup: {\n      check: 'Boolean',\n      init: false\n    },\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse: function (xml, path, flavour, pageType) {\n      var data = cv.parser.WidgetParser.parseElement(this, xml, path, flavour, pageType, this.getAttributeToPropertyMappings());\n      cv.parser.WidgetParser.parseFormat(xml, path);\n      cv.parser.WidgetParser.parseAddress(xml, path);\n      return data;\n    },\n\n    getAttributeToPropertyMappings: function () {\n      let transformValueTrue = function(value) {\n        return value === 'true';\n      };\n\n      return {\n        'src': {\n          'default': 'plugins/clock/clock_pure.svg'\n        },\n        'src_popup': {\n          target: 'srcPopup',\n          'default': ''\n        },\n        'title_popup': {\n          target: 'titlePopup',\n          'default': ''\n        },\n        'hide_24h': {\n          target: 'hide24h',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_24h_popup': {\n          target: 'hide24hPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_am_pm': {\n          target: 'hideAMPM',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_am_pm_popup': {\n          target: 'hideAMPMPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_digits': {\n          target: 'hideDigits',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_digits_popup': {\n          target: 'hideDigitsPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_seconds': {\n          target: 'hideSeconds',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'hide_seconds_popup': {\n          target: 'hideSecondsPopup',\n          'default': false,\n          transform: transformValueTrue\n        },\n        'send_on_finish': {\n          target: 'sendOnFinish',\n          'default': false,\n          transform: transformValueTrue\n        }\n      };\n    },\n\n    getElements: function(svg, hide24h, hideAMPM, hideDigits, hideSeconds) {\n      let elements = {\n        hour24: svg.querySelector('#Hour24'),\n        hour: svg.querySelector('#Hour'),\n        minute: svg.querySelector('#Minute'),\n        second: svg.querySelector('#Second'),\n        am: svg.querySelector('#AM'),\n        pm: svg.querySelector('#PM'),\n        digits: svg.querySelector('#Digits')\n      };\n      let tspan;\n      while( elements.digits !== null && (tspan = elements.digits.querySelector('tspan')) !== null ) {\n        elements.digits = tspan;\n      }\n      let hour24Group = svg.querySelector('#Hour24Group');\n\n      if( hide24h && hour24Group !== null ) {\n        hour24Group.setAttribute( 'display', 'none' );\n      }\n      if( hideAMPM ) {\n        if( elements.am !== null ) {\n          elements.am.setAttribute( 'display', 'none' );\n          elements.am = null;\n        }\n        if( elements.pm !== null ) {\n          elements.pm.setAttribute( 'display', 'none' );\n          elements.pm = null;\n        }\n      }\n      if( hideDigits && elements.digits !== null ) {\n        elements.digits.setAttribute( 'display', 'none' );\n      }\n      if( hideSeconds && elements.second !== null ) {\n        elements.second.setAttribute( 'display', 'none' );\n      }\n\n      return elements;\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __svg: null,       // cached access to the SVG in the DOM\n    __Elements: null,  // cached access to the individual clock parts\n    __inDrag: 0,       // is the handle currently dragged?\n\n    _getInnerDomString: function () {\n      return '<div class=\"actor\" style=\"width:100%;height:100%\"></div>';\n    },\n\n    _onDomReady: function () {\n      let args = arguments;\n\n      this.__throttled = cv.util.Function.throttle(this.dragAction, 250, {trailing: true}, this);\n\n      let uri = qx.util.ResourceManager.getInstance().toUri(this.getSrc());\n      let uriPopup = this.getSrcPopup();\n      let promises = [window.fetch(uri)];\n      if( '' !== uriPopup ) {\n        uriPopup = qx.util.ResourceManager.getInstance().toUri( uriPopup );\n        promises.push(window.fetch(uriPopup));\n      }\n      Promise.all( promises )\n        .then(responses => {\n          let result = [];\n          if(!responses[0].ok)\n          {\n            throw new Error('Not 2xx response for URI \"' + uri + '\"');\n          } else {\n            result.push( responses[0].text() );\n          }\n          if( '' !== uriPopup ) {\n            if(!responses[1].ok)\n            {\n              throw new Error('Not 2xx response for popup URI \"' + uriPopup + '\"');\n            } else {\n              result.push(responses[1].text());\n            }\n          }\n          return Promise.all(result);\n        })\n        .then(texts => {\n          let actor = this.getActor();\n          actor.innerHTML = texts[0];\n          let svg = actor.firstElementChild;\n\n          // make sure that the SVG fits exactly to the available space\n          if( !svg.getAttribute('viewBox') ) {\n            // fix SVGs that don't contain a viewBox\n            let width = svg.getAttribute('width') || 300;\n            let height = svg.getAttribute('height') || 150;\n            svg.setAttribute('viewBox', '0 0 ' + width + ' ' + height );\n          }\n          svg.setAttribute('width', '100%' );\n          svg.setAttribute('height', '100%' );\n          this.__Elements = [cv.plugins.Clock.getElements(svg, this.getHide24h(), this.getHideAMPM(), this.getHideDigits(), this.getHideSeconds())];\n\n          if( texts.length > 1 ) {\n            let popup = document.createElement('div');\n            let title = this.getTitlePopup();\n            popup.setAttribute('style', 'width:100%;height:100%;position:absolute;');\n            popup.innerHTML = texts[1];\n\n            svg.addEventListener('click', function(){\n              cv.ui.PopupHandler.showPopup('clock', {title: title, content: popup});\n            });\n            svg = popup.firstElementChild;\n\n           // make sure that also this SVG fits exactly to the available space\n            if( !svg.getAttribute('viewBox') ) {\n              // fix SVGs that don't contain a viewBox\n              let width = svg.getAttribute('width') || 300;\n              let height = svg.getAttribute('height') || 150;\n              svg.setAttribute('viewBox', '0 0 ' + width + ' ' + height );\n            }\n            svg.setAttribute('width', '100%' );\n            svg.setAttribute('height', '100%' );\n\n            this.__Elements.push( cv.plugins.Clock.getElements(svg, this.getHide24hPopup(), this.getHideAMPMPopup(), this.getHideDigitsPopup(), this.getHideSecondsPopup()) );\n          }\n\n          svg.setAttribute('style', 'touch-action: none' ); // prevent scroll interference\n\n          let HotSpotHour = svg.getElementById('HotSpotHour');\n          if(HotSpotHour) { HotSpotHour.addEventListener('pointerdown', this); }\n          let HotSpotMinute = svg.getElementById('HotSpotMinute');\n          if(HotSpotMinute) { HotSpotMinute.addEventListener('pointerdown', this); }\n          let HotSpotSecond = svg.getElementById('HotSpotSecond');\n          if(HotSpotSecond) { HotSpotSecond.addEventListener('pointerdown', this); }\n          this.__svg = svg;\n\n          // call parents _onDomReady method\n          this.base(args);\n        })\n        .catch(error => {\n          console.error('There has been a problem with the reading of the clock SVG:', error);\n        });\n    },\n\n    // overridden\n    initListeners: function () {},\n\n    // overridden\n    _update: function (address, data, isDataAlreadyHandled) {\n      let value = isDataAlreadyHandled ? data : this.defaultValueHandling(address, data);\n      let time = value.split(':');\n      this._updateHands( time[0], time[1], time[2] );\n    },\n\n    handleEvent: function (event) {\n      const dragMode = {\n        none: 0,\n        hour: 1,\n        minute: 2,\n        second: 3\n      };\n\n      switch (event.type) {\n        case 'pointerdown':\n          switch(event.target.id) {\n            case 'HotSpotHour':\n              this.__inDrag = dragMode.hour;\n              break;\n\n            case 'HotSpotMinute':\n              this.__inDrag = dragMode.minute;\n              break;\n\n            case 'HotSpotSecond':\n              this.__inDrag = dragMode.second;\n              break;\n\n            default:\n              this.__inDrag = dragMode.none;\n              return; // early exit\n          }\n          document.addEventListener('pointermove', this);\n          document.addEventListener('pointerup', this);\n          event.preventDefault();\n          event.stopPropagation();\n          break;\n\n        case 'pointermove':\n          if(this.__inDrag === dragMode.none) {\n            return;\n          }\n          event.preventDefault();\n          event.stopPropagation();\n          if( event.buttons > 0 ) {\n            this.dragHelper(event);\n            break;\n          } // jshint ignore:line\n          // pass through to end drag when no buttons are pressed anymore\n\n        case 'pointerup':\n        case 'pointercancel':\n          this.dragHelper(event);\n          this.__inDrag = dragMode.none;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          break;\n      }\n\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call();\n      }\n    },\n\n    dragHelper: function (event) {\n      const dragMode = {\n        none: 0,\n        hour: 1,\n        minute: 2,\n        second: 3\n      };\n\n      let CTM = this.__svg.getScreenCTM(); // get the Current Transformation Matrix\n      let x = (event.clientX - CTM.e) / CTM.a - 60;\n      let y = 60 - (event.clientY - CTM.f) / CTM.d;\n      let angle = (Math.atan2(x, y) * 180 / Math.PI + 360) % 360;\n\n      let time = this.getValue();\n      let minutes;\n      switch( this.__inDrag )\n      {\n        case dragMode.hour:\n          let oldHours = time.getHours();\n          let pm = oldHours >= 12;\n          let hours = Math.floor(angle / 30);\n          minutes = (angle % 30) * 2;\n\n          if (oldHours % 12 > 9 && hours < 3) {\n            if (pm) {\n              pm = false;\n              time.setDate(time.getDate() + 1);\n            }\n            else {\n              pm = true;\n            }\n          } else if (hours > 9 && oldHours % 12 < 3) {\n            if (pm) {\n              pm = false;\n            }\n            else {\n              pm = true;\n              time.setDate(time.getDate() - 1);\n            }\n          }\n\n          time.setHours(hours + pm * 12);\n          time.setMinutes(minutes);\n          break;\n\n        case dragMode.minute:\n          if( this.getHideSeconds() ) {\n            minutes = Math.round(angle / 6);\n          } else {\n            minutes = Math.floor(angle / 6);\n          }\n          let oldMinutes = time.getMinutes();\n\n          if (oldMinutes > 45 && minutes < 15) {\n            time.setHours(time.getHours() + 1);\n          }\n          else if (minutes > 45 && oldMinutes < 15) {\n            time.setHours(time.getHours() - 1);\n          }\n          time.setMinutes(minutes);\n          time.setSeconds((angle % 6) * 10);\n          break;\n\n        case dragMode.second:\n          let seconds = Math.round(angle / 6) % 60;\n          let oldSeconds = time.getSeconds();\n\n          if (oldSeconds > 45 && seconds < 15) {\n            time.setMinutes(time.getMinutes() + 1);\n          }\n          else if (seconds > 45 && oldSeconds < 15) {\n            time.setMinutes(time.getMinutes() - 1);\n          }\n          time.setSeconds(seconds);\n          break;\n      }\n      if( this.getHideSeconds() ) {\n        time.setSeconds( 0 );\n      }\n      this._updateHands( time.getHours(), time.getMinutes(), time.getSeconds() );\n    },\n\n    dragAction: function () {\n      var address = this.getAddress();\n      for (var addr in address) {\n        if (address[addr][1] === true) { continue; } // skip read only\n        cv.TemplateEngine.getInstance().visu.write(addr, cv.Transform.encode(address[addr][0], this.getValue()));\n      }\n    },\n\n    _updateHands: function ( hour, minute, second ) {\n      this.__Elements.forEach(e => {\n        let showSeconds = true;\n        if (e.hour !== null) {\n          if (showSeconds) {\n            e.hour.setAttribute(\"transform\", 'rotate(' + ((hour % 12) * 360 / 12 + minute * 30 / 60 + second * 30 / 60 / 60) + ',0,0)');\n          } else {\n            e.hour.setAttribute(\"transform\", 'rotate(' + ((hour % 12) * 360 / 12 + minute * 30 / 60) + ',0,0)');\n          }\n        }\n        if (e.minute !== null) {\n          if (showSeconds) {\n            e.minute.setAttribute(\"transform\", 'rotate(' + (minute * 6 + second * 6 / 60) + ',0,0)');\n          } else {\n            e.minute.setAttribute(\"transform\", 'rotate(' + (minute * 6) + ',0,0)');\n          }\n        }\n        if (e.second !== null) {\n          e.second.setAttribute(\"transform\", 'rotate(' + (second * 6) + ',0,0)');\n        }\n        if (e.hour24 !== null) {\n          e.hour24.setAttribute(\"transform\", 'rotate(' + ((hour % 24) * 360 / 24 + minute * 15 / 60) + ',0,0)');\n        }\n        if (e.am !== null) {\n          e.am.setAttribute('display', hour < 12 ? '' : 'none');\n        }\n        if (e.pm !== null) {\n          e.pm.setAttribute('display', hour < 12 ? 'none' : '');\n        }\n        if (e.digits !== null) {\n          if (this.getHideSeconds()) {\n            e.digits.textContent = sprintf('%02d:%02d', hour, minute);\n          } else {\n            e.digits.textContent = sprintf('%02d:%02d:%02d', hour, minute, second);\n          }\n        }\n      });\n    }\n  },\n\n  defer: function(statics) {\n    cv.parser.WidgetParser.addHandler(\"clock\", cv.plugins.Clock);\n    cv.ui.structure.WidgetFactory.registerClass(\"clock\", statics);\n  }\n});"
  ]
}