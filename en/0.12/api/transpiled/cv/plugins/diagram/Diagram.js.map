{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/plugins/diagram/Diagram.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "plugins",
    "diagram",
    "AbstractDiagram",
    "construct",
    "props",
    "_init",
    "properties",
    "width",
    "check",
    "nullable",
    "height",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "getAttributeToPropertyMappings",
    "transform",
    "value",
    "parseInt",
    "members",
    "__vlid1",
    "_onDomReady",
    "$$domReady",
    "pageId",
    "getParentPage",
    "getPath",
    "broker",
    "event",
    "message",
    "Bus",
    "setRestartOnVisible",
    "subscribe",
    "loadDiagramData",
    "plot",
    "initDiagram",
    "isVisible",
    "util",
    "DeferredCall",
    "schedule",
    "addListener",
    "ev",
    "getData",
    "removeListenerById",
    "initListeners",
    "_getInnerDomString",
    "classStr",
    "getPreviewlabels",
    "styleStr",
    "getWidth",
    "getHeight",
    "defer",
    "parser",
    "WidgetParser",
    "addHandler",
    "ui",
    "structure",
    "WidgetFactory",
    "registerClass",
    "Diagram"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Diagram.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.plugins.diagram.Diagram', {\n  extend: cv.plugins.diagram.AbstractDiagram,\n\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct: function(props) {\n    this._init = true;\n    this.base(arguments, props);\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    width: {\n      check: \"String\",\n      nullable: true\n    },\n    height: {\n      check: \"String\",\n      nullable: true\n    }\n  },\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     */\n    parse: function (xml, path, flavour, pageType) {\n      return cv.plugins.diagram.AbstractDiagram.parse(xml, path, flavour, pageType, this.getAttributeToPropertyMappings());\n    },\n\n    getAttributeToPropertyMappings: function() {\n      return {\n        width: { transform: function(value) {\n          return value ? parseInt(value)+\"px\" : null;\n        }},\n        height: { transform: function(value) {\n          return value ? parseInt(value)+\"px\" : null;\n        }}\n      };\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __vlid1: null,\n\n    _onDomReady: function() {\n      if (!this.$$domReady) {\n        var pageId = this.getParentPage().getPath();\n        var broker = qx.event.message.Bus;\n\n        // let the refresh only be active when this widget is visible\n        this.setRestartOnVisible(true);\n\n        broker.subscribe(\"path.\" + pageId + \".beforePageChange\", function () {\n          if (!this._init) {\n            this.loadDiagramData(this.plot, false, false);\n          }\n        }, this);\n\n        broker.subscribe(\"page.\" + pageId + \".appear\", function () {\n          // create diagram when it's not already existing\n          if (this._init) {\n            this.initDiagram(false);\n          }\n        }, this);\n\n        // initialize the diagram but don't make the initialization process wait for it\n        // by using a deferred call\n        if (this.isVisible()) {\n          new qx.util.DeferredCall(function () {\n            if (!this._init) {\n              this.loadDiagramData(this.plot, false, false);\n            } else {\n              this.initDiagram(false);\n            }\n          }, this).schedule();\n        } else {\n          this.__vlid1 = this.addListener(\"changeVisible\", function(ev) {\n            if (ev.getData()) {\n              if (!this._init) {\n                this.loadDiagramData(this.plot, false, false);\n              } else {\n                this.initDiagram(false);\n              }\n              this.removeListenerById(this.__vlid1);\n              this.__vlid1 = null;\n            }\n          }, this);\n        }\n        this.$$domReady = true;\n        this.initListeners();\n      }\n    },\n\n    _getInnerDomString: function() {\n      var\n        classStr = this.getPreviewlabels() ? 'diagram_inline' : 'diagram_preview',\n        styleStr = 'min-height: 40px' +\n          (this.getWidth()  ? (';width:'  + this.getWidth() ) : ''             ) +\n          (this.getHeight() ? (';height:' + this.getHeight()) : ';height: 100%');\n\n      return '<div class=\"actor clickable\" style=\"height: 100%; min-height: 40px;\"><div class=\"' + classStr + '\" style=\"' + styleStr + '\">loading...</div></div>';\n    }\n  },\n\n  defer: function(statics) {\n    // register the parser\n    cv.parser.WidgetParser.addHandler(\"diagram\", statics);\n    cv.ui.structure.WidgetFactory.registerClass(\"diagram\", statics);\n  }\n});\n"
  ]
}