{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/Application.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "application",
    "Native",
    "construct",
    "__appReady",
    "initCommandManager",
    "ui",
    "command",
    "GroupManager",
    "lang",
    "locale",
    "Manager",
    "getInstance",
    "getLanguage",
    "io",
    "PartLoader",
    "hasPart",
    "require",
    "bom",
    "PageVisibility",
    "addListener",
    "setActive",
    "getVisibilityState",
    "window",
    "parent",
    "showManager",
    "bind",
    "showConfigErrors",
    "xhr",
    "request",
    "Xhr",
    "set",
    "method",
    "check",
    "e",
    "req",
    "getTarget",
    "server",
    "getResponseHeader",
    "isOpenHAB",
    "startsWith",
    "setServedByOpenhab",
    "setServerChecked",
    "addListenerOnce",
    "error",
    "getStatus",
    "send",
    "statics",
    "HTML_STRUCT",
    "consoleCommands",
    "__commandManager",
    "_relResourcePath",
    "_fullResourcePath",
    "getRelativeResourcePath",
    "fullPath",
    "baseUrl",
    "location",
    "origin",
    "pathname",
    "split",
    "slice",
    "join",
    "util",
    "Uri",
    "getAbsolute",
    "LibraryManager",
    "get",
    "substring",
    "length",
    "createClient",
    "Client",
    "cv",
    "args",
    "Config",
    "testMode",
    "cvTestMode",
    "Mockup",
    "openhab",
    "Rest",
    "pluginsToLoad",
    "includes",
    "push",
    "endsWith",
    "indexOf",
    "mqtt",
    "unshift",
    "Function",
    "prototype",
    "apply",
    "registerConsoleCommand",
    "shortcutName",
    "help",
    "properties",
    "root",
    "nullable",
    "structureLoaded",
    "init",
    "event",
    "commandManager",
    "deferredInit",
    "active",
    "inManager",
    "managerDisabled",
    "managerDisabledReason",
    "managerChecked",
    "mobile",
    "serverChecked",
    "servedByOpenhab",
    "serverHasPhpSupport",
    "members",
    "_blocker",
    "block",
    "val",
    "Blocker",
    "setBlockerColor",
    "setBlockerOpacity",
    "unblock",
    "_applyMobile",
    "value",
    "document",
    "body",
    "classList",
    "contains",
    "add",
    "remove",
    "layout",
    "ResizeHandler",
    "invalidateNavbar",
    "_applyManagerChecked",
    "loadManager",
    "managerOptions",
    "action",
    "data",
    "main",
    "ConfigCache",
    "isServerChecked",
    "_checkBackend",
    "GlobalError",
    "setErrorHandler",
    "__globalErrorHandler",
    "report",
    "Record",
    "prepare",
    "info",
    "Date",
    "getFullYear",
    "Version",
    "VERSION",
    "Application",
    "console",
    "log",
    "manCommand",
    "Command",
    "TemplateEngine",
    "getCommands",
    "registerServiceWorker",
    "svg4everybody",
    "appender",
    "Stylesheet",
    "includeFile",
    "ResourceManager",
    "toUri",
    "forceReload",
    "now",
    "__init",
    "mobileDevice",
    "setMobile",
    "_onResize",
    "Registration",
    "hideManager",
    "Object",
    "hasOwnProperty",
    "call",
    "ManagerMain",
    "constructor",
    "$$instance",
    "setVisible",
    "isManagerDisabled",
    "notification",
    "topic",
    "target",
    "title",
    "tr",
    "message",
    "getManagerDisabledReason",
    "severity",
    "deletable",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "firstCall",
    "manager",
    "getVisible",
    "Timer",
    "once",
    "Bus",
    "dispatchByName",
    "_applyInManager",
    "History",
    "addToHistory",
    "configName",
    "options",
    "handlerId",
    "upgradeVersion",
    "file",
    "handler",
    "handlerOptions",
    "assign",
    "jumpToError",
    "isInManager",
    "condition",
    "validateConfig",
    "worker",
    "FileWorker",
    "displayConfigName",
    "unique",
    "res",
    "configPath",
    "url",
    "has",
    "then",
    "icon",
    "Logger",
    "actions",
    "link",
    "Init",
    "getApplication",
    "err",
    "ex",
    "exString",
    "maxTraceLength",
    "getSourceException",
    "WindowError",
    "toString",
    "getUri",
    "getLineNumber",
    "name",
    "fileName",
    "lineNumber",
    "description",
    "lastLine",
    "repeated",
    "nStack",
    "dev",
    "StackTrace",
    "getStackTraceFromError",
    "forEach",
    "entry",
    "stack",
    "exc",
    "PopupHandler",
    "optionGroup",
    "type",
    "ev",
    "parentNode",
    "id",
    "box",
    "querySelector",
    "href",
    "shift",
    "checked",
    "appendParamsToUrl",
    "Location",
    "setHref",
    "needsConfirmation",
    "reporting",
    "Sentry",
    "captureException",
    "deleteMessageAfterExecution",
    "style",
    "throwError",
    "onerror",
    "Error",
    "undefined",
    "innerWidth",
    "maxMobileScreenWidth",
    "invalidateScreensize",
    "stopAll",
    "Lifecycle",
    "onReady",
    "isCached",
    "enableCache",
    "debug",
    "restore",
    "NotificationCenter",
    "ToastManager",
    "innerHTML",
    "configLoader",
    "ConfigLoader",
    "load",
    "bootstrap",
    "anchor",
    "getData",
    "scrollToPage",
    "xml",
    "engine",
    "loader",
    "ScriptLoader",
    "setScriptsLoaded",
    "xmlHash",
    "toHash",
    "isValid",
    "cacheValid",
    "cacheUsed",
    "clear",
    "Model",
    "resetWidgetDataModel",
    "resetAddressList",
    "logCache",
    "lazyLoading",
    "initBackendClient",
    "__detectInitialPage",
    "structure",
    "getStructure",
    "loadParts",
    "states",
    "setStructureLoaded",
    "treePath",
    "initialPage",
    "getWidgetData",
    "WidgetFactory",
    "createInstance",
    "$$type",
    "loadPlugins",
    "clientDesign",
    "configSettings",
    "styles",
    "stylesToLoad",
    "replace",
    "loadStyles",
    "scripts",
    "scriptsToLoad",
    "loadScripts",
    "parseXML",
    "subscribe",
    "dump",
    "addStyles",
    "addScripts",
    "plugins",
    "standalonePlugins",
    "partsLoaded",
    "allPluginsQueued",
    "setAllQueued",
    "parts",
    "Part",
    "getParts",
    "partPlugins",
    "path",
    "plugin",
    "getStructureLoaded",
    "lid",
    "removeListenerById",
    "startpage",
    "Environment",
    "localStorage",
    "getItem",
    "rememberLastPage",
    "substr",
    "removeItem",
    "parseUri",
    "match",
    "getPageIdByPath",
    "setManagerChecked",
    "isOpenHab",
    "isServedByOpenhab",
    "rest",
    "getBaseUrl",
    "accept",
    "env",
    "getResponse",
    "setServerHasPhpSupport",
    "setManagerDisabled",
    "setManagerDisabledReason",
    "serverVersionId",
    "PHP_VERSION_ID",
    "disable",
    "required_php_version",
    "some",
    "constraint",
    "exec",
    "operator",
    "majorConstraint",
    "parseInt",
    "hasMinorVersion",
    "minorConstraint",
    "hasPatchVersion",
    "patchConstraint",
    "constraintId",
    "maxId",
    "phpversion",
    "configureScope",
    "scope",
    "setTag",
    "server_release",
    "server_branch",
    "server_id",
    "close",
    "client",
    "getClient",
    "terminate",
    "useServiceWorker",
    "workerFile",
    "navigator",
    "serviceWorker",
    "register",
    "reg",
    "configMessage",
    "postMessage",
    "ready",
    "getRegistrations",
    "registrations",
    "registration",
    "unregister"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Application.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * This is the main application class of the CometVisu.\n *\n * @asset(demo/*)\n * @asset(designs/*)\n * @asset(icons/*)\n * @asset(sentry/bundle.min.js)\n * @asset(sentry/bundle.tracing.min.js)\n * @asset(test/*)\n *\n * @require(qx.bom.Html,cv.ui.PopupHandler)\n */\nqx.Class.define('cv.Application',\n{\n  extend : qx.application.Native,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this.__appReady = false;\n    this.initCommandManager(new qx.ui.command.GroupManager());\n    const lang = qx.locale.Manager.getInstance().getLanguage();\n    if (qx.io.PartLoader.getInstance().hasPart(lang)) {\n      qx.io.PartLoader.require([lang]);\n    }\n\n    qx.bom.PageVisibility.getInstance().addListener('change', function () {\n      this.setActive(qx.bom.PageVisibility.getInstance().getVisibilityState() === 'visible');\n    }, this);\n\n    // install global shortcut for opening the manager\n    if (window.parent && typeof window.parent.showManager === 'function') {\n      window.showManager = window.parent.showManager;\n    } else {\n      window.showManager = this.showManager.bind(this);\n    }\n    if (window.parent && typeof window.parent.showConfigErrors === 'function') {\n      window.showConfigErrors = window.parent.showConfigErrors;\n    } else {\n      window.showConfigErrors = this.showConfigErrors.bind(this);\n    }\n\n    // check HTTP server by requesting a small file\n    const xhr = new qx.io.request.Xhr('version');\n    xhr.set({ method: 'GET'});\n\n    const check = e => {\n      const req = e.getTarget();\n      const server = req.getResponseHeader('Server');\n      const isOpenHAB = server ? server.startsWith('Jetty') : false;\n      this.setServedByOpenhab(isOpenHAB);\n      this.setServerChecked(true);\n    };\n    xhr.addListenerOnce('success', check, this);\n    xhr.addListenerOnce('statusError', check, this);\n    xhr.addListenerOnce('error', e => {\n      const req = e.getTarget();\n      this.error('error checking server environment needed to setup the REST url', req.getStatus());\n    });\n    xhr.send();\n  },\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n    HTML_STRUCT: '<div id=\"top\" class=\"loading\"><div class=\"nav_path\">-</div></div><div id=\"navbarTop\" class=\"loading\"></div><div id=\"centerContainer\" class=\"clearfix\"><div id=\"navbarLeft\" class=\"loading page\"></div><div id=\"main\" style=\"position:relative; overflow: hidden;\" class=\"loading\"><div id=\"pages\" style=\"position:relative;clear:both;\"><!-- all pages will be inserted here --></div></div><div id=\"navbarRight\" class=\"loading page\"></div></div><div id=\"navbarBottom\" class=\"loading\"></div><div id=\"bottom\" class=\"loading\"><hr /><div class=\"footer\"></div></div>',\n    consoleCommands: [],\n    __commandManager: null,\n    _relResourcePath: null,\n    _fullResourcePath: null,\n\n    getRelativeResourcePath(fullPath) {\n      if (!this._relResourcePath) {\n        const baseUrl = window.location.origin + window.location.pathname.split('/').slice(0, -1).join('/');\n        this._relResourcePath = qx.util.Uri.getAbsolute(qx.util.LibraryManager.getInstance().get('cv', 'resourceUri')).substring(baseUrl.length+1) + '/';\n      }\n      if (fullPath === true) {\n        if (!this._fullResourcePath) {\n          this._fullResourcePath = window.location.pathname.split('/').slice(0, -1).join('/') + '/' + this._relResourcePath;\n        }\n        return this._fullResourcePath;\n      }\n      return this._relResourcePath;\n    },\n\n    /**\n     * Client factory method -> create a client\n     * @param {...any} args\n     * @return {cv.io.Client|cv.io.Mockup}\n     */\n    createClient: function(...args) {\n      let Client = cv.io.Client;\n      if (cv.Config.testMode === true || window.cvTestMode === true) {\n        Client = cv.io.Mockup;\n      } else if (args[0] === 'openhab') {\n        Client = cv.io.openhab.Rest;\n        if (!cv.Config.pluginsToLoad.includes('plugin-openhab')) {\n          cv.Config.pluginsToLoad.push('plugin-openhab');\n        }\n        if (args[1] && args[1].endsWith('/cv/l/')) {\n          // we only need the rest path not the login resource\n          args[1] = args[1].substring(0, args[1].indexOf('cv/'));\n        }\n      } else if (args[0] === 'mqtt') {\n        Client = cv.io.mqtt.Client;\n      }\n      args.unshift(null);\n      return new (Function.prototype.bind.apply(Client, args))(); // jshint ignore:line\n    },\n\n    /**\n     * Register shortcuts to usefull commands the user can execute in the browser console\n     * @param shortcutName {String} command name used to install the command in the global namespace\n     * @param command {Function} command to execute\n     * @param help {String} some documentation about the command\n     */\n    registerConsoleCommand: function(shortcutName, command, help) {\n      // install command\n      if (!(shortcutName in window)) {\n        window[shortcutName] = command;\n        this.consoleCommands.push(shortcutName + '() - ' + help);\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    root: {\n      nullable: true\n    },\n\n    /**\n     * true when structure part has been loaded\n     */\n    structureLoaded: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeStructureLoaded'\n    },\n\n    commandManager: {\n      check: 'qx.ui.command.GroupManager',\n      deferredInit: true\n    },\n\n    active: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeActive'\n    },\n\n    inManager: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyInManager'\n    },\n\n    managerDisabled: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeManagerDisabled'\n    },\n\n    managerDisabledReason: {\n      check: 'String',\n      nullable: true\n    },\n    managerChecked: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyManagerChecked'\n    },\n    /**\n     * Mobile device detection (small screen)\n     */\n    mobile: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeMobile',\n      apply: '_applyMobile'\n    },\n\n    serverChecked: {\n      check: 'Boolean',\n      init: false,\n      event: 'serverCheckedChanged'\n    },\n\n    servedByOpenhab: {\n      check: 'Boolean',\n      init: false\n    },\n\n    serverHasPhpSupport: {\n      check: 'Boolean',\n      init: false,\n      event: 'serverHasPhpSupportChanged'\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    _blocker: null,\n    __appReady: null,\n\n    /**\n     * Toggle the {@link qx.bom.Blocker} visibility\n     * @param val {Boolean}\n     */\n    block: function(val) {\n      if (val) {\n        if (!this._blocker) {\n          this._blocker = new qx.bom.Blocker();\n          this._blocker.setBlockerColor('#000000');\n          this._blocker.setBlockerOpacity('0.2');\n        }\n        this._blocker.block();\n      } else if (this._blocker) {\n        this._blocker.unblock();\n      }\n    },\n\n    _applyMobile: function (value) {\n      // maintain old value for compatibility\n      if (value && !document.body.classList.contains('mobile')) {\n        document.body.classList.add('mobile');\n      } else if (!value && document.body.classList.contains('mobile')) {\n        document.body.classList.remove('mobile');\n      }\n      if (this.__appReady) {\n        cv.ui.layout.ResizeHandler.invalidateNavbar();\n      }\n    },\n\n    _applyManagerChecked: function(value) {\n      if (value && cv.Config.loadManager) {\n        this.showManager(cv.Config.managerOptions.action, cv.Config.managerOptions.data);\n      }\n    },\n\n    /**\n     * This method contains the initial application code and gets called\n     * during startup of the application\n     */\n    main : function() {\n      cv.ConfigCache.init();\n      if (this.isServerChecked()) {\n        this._checkBackend();\n      } else {\n        this.addListenerOnce('serverCheckedChanged', this._checkBackend, this);\n      }\n      qx.event.GlobalError.setErrorHandler(this.__globalErrorHandler, this);\n      if (qx.core.Environment.get('qx.debug')) {\n        if (typeof replayLog !== 'undefined' && replayLog) {\n          cv.report.Replay.prepare(replayLog);\n        }\n      }\n      cv.report.Record.prepare();\n\n      let info = '\\n' +\n        '  _____                     ___      ___\\n' +\n        ' / ____|                   | \\\\ \\\\    / (_)\\n' +\n        '| |     ___  _ __ ___   ___| |\\\\ \\\\  / / _ ___ _   _\\n' +\n        '| |    / _ \\\\| \\'_ ` _ \\\\ / _ \\\\ __\\\\ \\\\/ / | / __| | | |\\n' +\n        '| |___| (_) | | | | | |  __/ |_ \\\\  /  | \\\\__ \\\\ |_| |\\n' +\n        ' \\\\_____\\\\___/|_| |_| |_|\\\\___|\\\\__| \\\\/   |_|___/\\\\__,_|\\n' +\n        '-----------------------------------------------------------\\n' +\n        ' ©2010-' + (new Date().getFullYear()) + ' Christian Mayer and the CometVisu contributers.\\n' +\n        ' Version: ' + cv.Version.VERSION + '\\n';\n\n      if (cv.Application.consoleCommands.length) {\n        info += '\\n Available commands:\\n'+\n          '    '+cv.Application.consoleCommands.join('\\n    ')+'\\n';\n      }\n\n      info += '-----------------------------------------------------------\\n\\n';\n\n      // eslint-disable-next-line no-console\n      console.log(info);\n\n      // add command to load and open the manager\n      const manCommand = new qx.ui.command.Command('Ctrl+M');\n      cv.TemplateEngine.getInstance().getCommands().add('open-manager', manCommand);\n      manCommand.addListener('execute', () => this.showManager(), this);\n      this.registerServiceWorker();\n\n      if (qx.core.Environment.get('qx.aspects')) {\n        qx.dev.Profile.stop();\n        qx.dev.Profile.start();\n      }\n      // Call super class\n      this.base(arguments);\n      this.block(true);\n\n      // run svg4everybody to support SVG sprites in older browsers\n      svg4everybody();\n\n      // support native logging capabilities, e.g. Firebug for Firefox\n      //noinspection BadExpressionStatementJS,JSHint\n      cv.log.appender.Native;\n\n      // Enable logging in debug variant\n      if (qx.core.Environment.get('qx.debug')) {\n        // support additional cross-browser console. Press F7 to toggle visibility\n        //noinspection BadExpressionStatementJS,JSHint\n        qx.log.appender.Console;\n      }\n\n      /*\n       -------------------------------------------------------------------------\n       Below is your actual application code...\n       -------------------------------------------------------------------------\n       */\n      // in debug mode load the uncompressed unobfuscated scripts\n      qx.bom.Stylesheet.includeFile(qx.util.ResourceManager.getInstance().toUri('designs/designglobals.css') + (cv.Config.forceReload === true ? '?'+Date.now() : ''));\n\n      this.__init();\n      if (typeof cv.Config.mobileDevice === 'boolean') {\n        this.setMobile(cv.Config.mobileDevice);\n      }\n      this._onResize(null, true);\n      qx.event.Registration.addListener(window, 'resize', this._onResize, this);\n    },\n\n    hideManager: function () {\n      if (Object.prototype.hasOwnProperty.call(cv.ui, 'manager')) {\n        const ManagerMain = cv.ui['manager']['Main'];\n        // only do something when the singleton is already created\n        if (ManagerMain.constructor.$$instance) {\n          ManagerMain.getInstance().setVisible(false);\n        }\n      }\n    },\n\n    /**\n     * @param action {String} manager event that can be handled by cv.ui.manager.Main._onManagerEvent()\n     * @param data {String|Map} path of file that action should executed on or a Map of options\n     */\n    showManager: function (action, data) {\n      if (this.isManagerDisabled()) {\n        const notification = {\n          topic: 'cv.manager.error',\n          target: 'popup',\n          title: qx.locale.Manager.tr('Manager is not available'),\n          message: this.getManagerDisabledReason(),\n          severity: 'high',\n          deletable: true\n        };\n        cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n      } else {\n        qx.io.PartLoader.require(['manager'], function () {\n          // break dependency\n          const ManagerMain = cv.ui['manager']['Main'];\n          const firstCall = !ManagerMain.constructor.$$instance;\n          const manager = ManagerMain.getInstance();\n          if (!firstCall) {\n            manager.setVisible(!manager.getVisible());\n          } else {\n            // initially bind manager visibility\n            manager.bind('visible', this, 'inManager');\n          }\n\n          if (manager.getVisible() && action && data) {\n            // delay this a little bit, give the manager some time to settle\n            qx.event.Timer.once(() => {\n              qx.event.message.Bus.dispatchByName('cv.manager.' + action, data);\n            }, this, 1000);\n          }\n        }, this);\n      }\n    },\n\n    _applyInManager: function (value) {\n      if (value) {\n        qx.bom.History.getInstance().addToHistory('manager', qx.locale.Manager.tr('Manager') + ' - CometVisu');\n      } else {\n        qx.bom.History.getInstance().addToHistory('', 'CometVisu');\n      }\n    },\n\n    showConfigErrors: function(configName, options) {\n      configName = configName ? 'visu_config_'+configName+'.xml' : 'visu_config.xml';\n      const handlerId = options && options.upgradeVersion ? 'cv.ui.manager.editor.Diff' : 'cv.ui.manager.editor.Source';\n      const data = {\n        file: configName,\n        handler: handlerId,\n        handlerOptions: Object.assign({\n          jumpToError: true\n        }, options ? options : {})\n      };\n      if (this.isInManager()) {\n        qx.event.message.Bus.dispatchByName('cv.manager.openWith', data);\n      } else {\n        this.showManager('openWith', data);\n      }\n      // remove any config error messages shown\n      cv.core.notifications.Router.dispatchMessage('cv.config.error', {\n        topic: 'cv.config.error',\n        condition: false\n      });\n    },\n\n    validateConfig: function (configName) {\n      const worker = cv.data.FileWorker.getInstance();\n      let displayConfigName = configName;\n      if (configName) {\n        configName = '_' + configName;\n      } else {\n        configName = '';\n        displayConfigName = 'default';\n      }\n      let notification = {\n        topic: 'cv.config.validation',\n        severity: 'normal',\n        deletable: true,\n        unique: true\n      };\n      cv.core.notifications.Router.dispatchMessage(notification.topic, Object.assign({}, notification, {\n        target: 'toast',\n        message: qx.locale.Manager.tr('Validating configuration file...')\n      }));\n      const res = qx.util.ResourceManager.getInstance();\n      let configPath = `config/visu_config${configName}.xml`;\n      let url = '';\n      if (!res.has(configPath) && res.has(`demo/visu_config${configName}.xml`)) {\n        url = res.toUri(`demo/visu_config${configName}.xml`);\n      }\n      if (!url) {\n        url = res.toUri(configPath);\n      }\n      worker.validateConfig(url).then(res => {\n        // remove the toast information\n        cv.core.notifications.Router.dispatchMessage(notification.topic, Object.assign({}, notification, {\n          target: 'toast',\n          condition: false\n        }));\n        if (res === true) {\n          // show result message as dialog\n          cv.core.notifications.Router.dispatchMessage(notification.topic, Object.assign({}, notification, {\n            target: 'popup',\n            message: qx.locale.Manager.tr('The %1 configuration has no errors!', displayConfigName),\n            icon: 'message_ok'\n          }));\n        } else {\n          // show result message as dialog\n          qx.log.Logger.error(this, res);\n          cv.core.notifications.Router.dispatchMessage(notification.topic, Object.assign({}, notification, {\n            target: 'popup',\n            message: qx.locale.Manager.tr('The %1 configuration has %2 errors!', displayConfigName, res.length),\n            actions: {\n              link: [\n                {\n                  title: qx.locale.Manager.tr('Show errors'),\n                  action: function () {\n                    qx.core.Init.getApplication().showConfigErrors(configName);\n                  }\n                }]\n            },\n            severity: 'high',\n            icon: 'message_attention'\n          }));\n        }\n      }).catch(err => {\n        this.error(err);\n      });\n    },\n\n    __globalErrorHandler: function(ex) {\n      // connect client data for Bug-Report\n      let exString = '';\n      const maxTraceLength = 2000;\n      if (ex.getSourceException && ex.getSourceException()) {\n        ex = ex.getSourceException();\n      } else if (ex instanceof qx.core.WindowError) {\n        exString = ex.toString() + '\\nin ' + ex.getUri() + ' line ' + ex.getLineNumber();\n      }\n      if (!exString) {\n        exString = ex.name + ': ' + ex.message;\n        if (ex.fileName) {\n          exString += '\\n in file ' + ex.fileName;\n        }\n        if (ex.lineNumber) {\n          exString += '\\n line ' + ex.lineNumber;\n        }\n        if (ex.description) {\n          exString += '\\n Description: ' + ex.description;\n        }\n        try {\n          let lastLine = '';\n          let repeated = 0;\n          let nStack = '';\n          qx.dev.StackTrace.getStackTraceFromError(ex).forEach(function (entry) {\n            if (lastLine === entry) {\n              if (repeated === 0) {\n                // count first occurance too\n                repeated = 2;\n              } else {\n                repeated++;\n              }\n            } else if (repeated > 0) {\n              nStack += ' [repeated ' + repeated + ' times]';\n              nStack += '\\n\\t' + entry;\n              repeated = 0;\n            } else {\n              nStack += '\\n\\t' + entry;\n              lastLine = entry;\n            }\n          }, this);\n          if (repeated > 0) {\n            nStack += ' [repeated ' + repeated + ' times]';\n          }\n          if (nStack) {\n            exString += '\\nNormalized Stack: ' + nStack.substring(0, maxTraceLength) + '\\n';\n            if (nStack.length > maxTraceLength) {\n              exString += 'Stacktrace has been cut off\\n';\n            }\n          }\n          if (exString.length + ex.stack.length < maxTraceLength) {\n            exString += '\\nOriginal Stack: ' + ex.stack + '\\n';\n          }\n        } catch (exc) {\n          if (ex.stack) {\n            exString += '\\nStack: ' + ex.stack.substring(0, maxTraceLength) + '\\n';\n            if (ex.stack.length > maxTraceLength) {\n              exString += 'Stacktrace has been cut off\\n';\n            }\n          }\n        }\n      }\n\n      const notification = {\n        topic: 'cv.error',\n        target: cv.ui.PopupHandler,\n        title: qx.locale.Manager.tr('An error occured'),\n        message: '<pre>' + (exString || ex.stack) + '</pre>',\n        severity: 'urgent',\n        deletable: false,\n        actions: {\n          optionGroup: {\n            title: qx.locale.Manager.tr('Enable on reload:'),\n            options: []\n          },\n          link: [\n            {\n              title: qx.locale.Manager.tr('Reload'),\n              type: 'reload',\n              action: function (ev) {\n                let parent = ev.getTarget().parentNode;\n                while (parent) {\n                  if (parent.id === 'notification-center' || parent.classList.contains('popup')) {\n                    break;\n                  }\n                  parent = parent.parentNode;\n                }\n                let box = parent.querySelector('#enableReporting');\n                let url = window.location.href.split('#').shift();\n                if (box && box.checked) {\n                  // reload with reporting enabled\n                  url = qx.util.Uri.appendParamsToUrl(url, 'reporting=true');\n                }\n                box = parent.querySelector('#reportErrors');\n                if (box && box.checked) {\n                  // reload with automatic error reporting enabled\n                  url = qx.util.Uri.appendParamsToUrl(url, 'reportErrors=true');\n                }\n                cv.util.Location.setHref(url);\n              },\n              needsConfirmation: false\n            }\n          ]\n        }\n      };\n      // reload with reporting checkbox\n      let link = '';\n      if (!cv.Config.reporting) {\n        if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n          link = ' <a href=\"https://cometvisu.org/CometVisu/de/latest/manual/config/url-params.html#reporting-session-aufzeichnen\" target=\"_blank\" title=\"Hilfe\">(?)</a>';\n        }\n        notification.actions.optionGroup.options.push({\n          title: qx.locale.Manager.tr('Action recording') + link,\n          name: 'enableReporting'\n        });\n      }\n\n      if (qx.core.Environment.get('cv.sentry')) {\n        if (window.Sentry) {\n          // Sentry has been loaded -> add option to send the error\n          notification.actions.link.push(\n            {\n              title: qx.locale.Manager.tr('Send error to sentry.io'),\n              type: 'sentry',\n              action: function () {\n                Sentry.captureException(ex);\n              },\n              needsConfirmation: false,\n              deleteMessageAfterExecution: true\n            }\n          );\n        } else {\n          link = '';\n          if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n            link = ' <a href=\"https://cometvisu.org/CometVisu/de/latest/manual/config/url-params.html#reportErrors\" target=\"_blank\" title=\"Hilfe\">(?)</a>';\n          }\n          notification.actions.optionGroup.options.push({\n            title: qx.locale.Manager.tr('Error reporting (on sentry.io)') + link,\n            name: 'reportErrors',\n            style: 'margin-left: 18px'\n          });\n        }\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n    },\n\n    throwError: qx.core.Environment.select('qx.globalErrorHandling', {\n      'true':  function () {\n        window.onerror(new Error('test error'));\n      },\n      'false': null\n    }),\n\n    _onResize: function (ev, init) {\n      if (cv.Config.mobileDevice === undefined) {\n        this.setMobile(window.innerWidth < cv.Config.maxMobileScreenWidth);\n      }\n      if (!init && this.__appReady) {\n        cv.ui.layout.ResizeHandler.invalidateScreensize();\n      }\n    },\n\n    /**\n     * Internal initialization method\n     */\n    __init: function() {\n      qx.event.Registration.addListener(window, 'unload', function () {\n        cv.io.Client.stopAll();\n      }, this);\n      qx.bom.Lifecycle.onReady(async function () {\n        // init notification router\n        cv.core.notifications.Router.getInstance();\n        let body = document.querySelector('body');\n        let isCached = false;\n        if (cv.Config.enableCache) {\n          isCached = await cv.ConfigCache.isCached();\n        }\n        if (isCached) {\n          // load settings\n          this.debug('using cache');\n          cv.ConfigCache.restore();\n          // initialize NotificationCenter\n          cv.ui.NotificationCenter.getInstance();\n          cv.ui.ToastManager.getInstance();\n        } else {\n          // load empty HTML structure\n          body.innerHTML = cv.Application.HTML_STRUCT;\n          // initialize NotificationCenter\n          cv.ui.NotificationCenter.getInstance();\n          cv.ui.ToastManager.getInstance();\n        }\n        if (!cv.Config.loadManager) {\n          let configLoader = new cv.util.ConfigLoader();\n          configLoader.load(this.bootstrap, this);\n        }\n      }, this);\n\n      // reaction on browser back button\n      qx.bom.History.getInstance().addListener('request', function(e) {\n        const anchor = e.getData();\n        if (this.isInManager() && anchor !== 'manager') {\n          this.hideManager();\n        } else if (!this.isInManager() && anchor === 'manager') {\n          this.showManager();\n        } else if (anchor) {\n          cv.TemplateEngine.getInstance().scrollToPage(anchor, 0, true);\n        }\n      }, this);\n    },\n\n    /**\n     * Initialize the content\n     * @param xml {Document} XML configuration retrieved from backend\n     */\n    bootstrap: async function(xml) {\n      this.debug('bootstrapping');\n      const engine = cv.TemplateEngine.getInstance();\n      const loader = cv.util.ScriptLoader.getInstance();\n\n      engine.xml = xml;\n      loader.addListenerOnce('finished', function() {\n        engine.setScriptsLoaded(true);\n      }, this);\n      let isCached = false;\n      let xmlHash;\n      if (cv.Config.enableCache) {\n        isCached = await cv.ConfigCache.isCached();\n        xmlHash = cv.ConfigCache.toHash(xml);\n      }\n\n      if (isCached) {\n        // check if cache is still valid\n        const cacheValid = await cv.ConfigCache.isValid(null, xmlHash);\n        if (!cacheValid) {\n          this.debug('cache is invalid re-parse xml');\n          // cache invalid\n          cv.Config.cacheUsed = false;\n          cv.ConfigCache.clear();\n\n          // load empty HTML structure\n          document.body.innerHTML = cv.Application.HTML_STRUCT;\n\n          //empty model\n          cv.data.Model.getInstance().resetWidgetDataModel();\n          cv.data.Model.getInstance().resetAddressList();\n        } else {\n          // loaded cache is still valid\n          cv.report.Record.logCache();\n          cv.Config.cacheUsed = true;\n          cv.Config.lazyLoading = true;\n          engine.initBackendClient();\n          this.__detectInitialPage();\n\n          // load part for structure\n          const structure = cv.Config.getStructure();\n          this.debug('loading structure '+structure);\n          engine.loadParts([structure], function(states) {\n            if (states === 'complete') {\n              this.debug(structure + ' has been loaded');\n              this.setStructureLoaded(true);\n            } else {\n              this.error(structure + ' could not be loaded');\n              this.setStructureLoaded(false);\n            }\n          }, this);\n\n          engine.addListenerOnce('changeReady', function() {\n            // create the objects\n            cv.Config.treePath = cv.Config.initialPage;\n            const data = cv.data.Model.getInstance().getWidgetData('id_');\n            cv.ui.structure.WidgetFactory.createInstance(data.$$type, data);\n          }, this);\n          // check if the current design settings overrides the cache one\n          this.loadPlugins();\n          if (cv.Config.clientDesign && cv.Config.clientDesign !== cv.Config.configSettings.clientDesign) {\n            // we have to replace the cached design scripts styles to load\n            const styles = [];\n            cv.Config.configSettings.stylesToLoad.forEach(function(style) {\n              styles.push(style.replace('designs/'+cv.Config.configSettings.clientDesign, 'designs/'+cv.Config.clientDesign));\n            }, this);\n            this.loadStyles(styles);\n\n            const scripts = [];\n            cv.Config.configSettings.scriptsToLoad.forEach(function(style) {\n              scripts.push(style.replace('designs/'+cv.Config.configSettings.clientDesign, 'designs/'+cv.Config.clientDesign));\n            }, this);\n            this.loadScripts(scripts);\n          } else {\n            this.loadStyles();\n            this.loadScripts();\n          }\n        }\n      }\n      if (!cv.Config.cacheUsed) {\n        this.debug('starting');\n        this.__detectInitialPage();\n        engine.parseXML(xml, function () {\n          this.loadPlugins();\n          this.loadStyles();\n          this.loadScripts();\n          this.debug('done');\n\n          if (cv.Config.enableCache) {\n            // cache dom + data when everything is ready\n            qx.event.message.Bus.subscribe('setup.dom.finished', function() {\n              cv.ConfigCache.dump(xml, xmlHash);\n            }, this);\n          }\n          this.__appReady = true;\n        }.bind(this));\n      } else {\n        this.__appReady = true;\n      }\n    },\n\n    /**\n     * Load CSS styles\n     * @param styles {Array?}\n     */\n    loadStyles: function(styles) {\n      if (!styles) {\n        styles = cv.Config.configSettings.stylesToLoad;\n      }\n      if (styles.length) {\n        cv.util.ScriptLoader.getInstance().addStyles(styles);\n      }\n    },\n\n    /**\n     * Load Javascript source files\n     * @param scripts {Array?}\n     */\n    loadScripts: function(scripts) {\n      if (!scripts) {\n        scripts = cv.Config.configSettings.scriptsToLoad;\n      }\n      if (scripts.length > 0) {\n        cv.util.ScriptLoader.getInstance().addScripts(scripts);\n      }\n    },\n\n    /**\n     * Load plugins\n     */\n    loadPlugins: function() {\n      const plugins = cv.Config.configSettings.pluginsToLoad.slice();\n      cv.Config.pluginsToLoad.forEach(name => {\n        if (!plugins.includes(name)) {\n          plugins.push(name);\n        }\n      });\n      if (plugins.length > 0) {\n        const standalonePlugins = [];\n        let partsLoaded = false;\n        let allPluginsQueued = false;\n        this.debug('loading plugins');\n        const engine = cv.TemplateEngine.getInstance();\n        engine.addListener('changePartsLoaded', function(ev) {\n          if (ev.getData() === true) {\n            this.debug('plugins loaded');\n            partsLoaded = true;\n            if (allPluginsQueued) {\n              qx.event.Timer.once(function () {\n                cv.util.ScriptLoader.getInstance().setAllQueued(true);\n              }, this, 0);\n            }\n          }\n        }, this);\n        const parts = qx.Part.getInstance().getParts();\n        const partPlugins = [];\n        const path = cv.Application.getRelativeResourcePath();\n        plugins.forEach(function(plugin) {\n          if (Object.prototype.hasOwnProperty.call(parts, plugin)) {\n            partPlugins.push(plugin);\n          } else if (!plugin.startsWith('plugin-')) {\n            // a real path\n            standalonePlugins.push(plugin);\n          } else {\n            standalonePlugins.push(path + '/plugins/' + plugin.replace('plugin-', '') + '/index.js');\n          }\n        });\n        // load part plugins\n        engine.loadParts(partPlugins);\n\n        if (standalonePlugins.length > 0) {\n          // load standalone plugins after the structure parts has been loaded\n          // because they use need the classes provided by it\n          if (this.getStructureLoaded()) {\n            cv.util.ScriptLoader.getInstance().addScripts(standalonePlugins);\n          } else {\n            const lid = this.addListener('changeStructureLoaded', function (ev) {\n              if (ev.getData() === true) {\n                allPluginsQueued = true;\n                this.debug('loading standalone plugins');\n                cv.util.ScriptLoader.getInstance().addScripts(standalonePlugins);\n                if (partsLoaded) {\n                  cv.util.ScriptLoader.getInstance().setAllQueued(true);\n                }\n                this.removeListenerById(lid);\n              }\n            }, this);\n          }\n        } else {\n          allPluginsQueued = true;\n        }\n      } else {\n        this.debug('no plugins to load => all scripts queued');\n        cv.util.ScriptLoader.getInstance().setAllQueued(true);\n      }\n    },\n\n    __detectInitialPage: function() {\n      let startpage = 'id_';\n      if (cv.Config.startpage) {\n        startpage = cv.Config.startpage;\n        if (qx.core.Environment.get('html.storage.local') === true) {\n          if (startpage === 'remember') {\n            startpage = localStorage.getItem('lastpage');\n            cv.Config.rememberLastPage = true;\n            if (typeof (startpage) !== 'string' || startpage.substr(0, 3) !== 'id_') {\n              startpage = 'id_'; // fix obvious wrong data\n            }\n          } else if (startpage === 'noremember') {\n            localStorage.removeItem('lastpage');\n            startpage = 'id_';\n            cv.Config.rememberLastPage = false;\n          }\n        }\n      } else {\n        const req = qx.util.Uri.parseUri(window.location.href);\n        if (req.anchor && req.anchor.substring(0, 3) === 'id_') {\n          startpage = req.anchor;\n        }\n      }\n      if (startpage.match(/^id_[0-9_]*$/) !== null) {\n        cv.Config.initialPage = startpage;\n      } else {\n        // wait for DOM to be ready and detect the page id then\n        qx.event.message.Bus.subscribe('setup.dom.finished.before', function() {\n          cv.Config.initialPage = cv.TemplateEngine.getInstance().getPageIdByPath(startpage) || 'id_';\n        });\n      }\n    },\n\n    _checkBackend: function () {\n      if (cv.Config.testMode === true) {\n        this.setManagerChecked(true);\n      } else {\n        const isOpenHab = this.isServedByOpenhab();\n        const url = isOpenHab ? cv.io.rest.Client.getBaseUrl() + '/environment'\n          : cv.io.rest.Client.getBaseUrl().split('/').slice(0, -1).join('/') + '/environment.php';\n        const xhr = new qx.io.request.Xhr(url);\n        xhr.set({\n          method: 'GET',\n          accept: 'application/json'\n        });\n        xhr.addListenerOnce('success', function (e) {\n          const req = e.getTarget();\n          const env = req.getResponse();\n          if (typeof env === 'string' && env.startsWith('<?php')) {\n            // no php support\n            this.setServerHasPhpSupport(false);\n            this.error('Disabling manager due to missing PHP support.');\n\n            this.setManagerDisabled(true);\n            this.setManagerDisabledReason(qx.locale.Manager.tr('Your server does not support PHP'));\n            this.setManagerChecked(true);\n          } else {\n            // is this is served by native openHAB server, we do not have native PHP support, only the basic\n            // rest api is available, but nothing else that needs PHP (like some plugin backend code)\n            this.setServerHasPhpSupport(!isOpenHab);\n            const serverVersionId = env.PHP_VERSION_ID;\n            //const [major, minor] = env.phpversion.split('.').map(ver => parseInt(ver));\n            let disable = false;\n            if (Object.prototype.hasOwnProperty.call(env, 'required_php_version')) {\n              const parts = env.required_php_version.split(' ');\n              disable = parts.some(constraint => {\n                const match = /^(>=|<|>|<=|\\^)(\\d+)\\.(\\d+)\\.?(\\d+)?$/.exec(constraint);\n                if (match) {\n                  const operator = match[1];\n                  const majorConstraint = parseInt(match[2]);\n                  const hasMinorVersion = match[3] !== undefined;\n                  const minorConstraint = hasMinorVersion ? parseInt(match[3]) : 0;\n                  const hasPatchVersion = match[4] !== undefined;\n                  const patchConstraint = hasPatchVersion ? parseInt(match[4]) : 0;\n                  const constraintId = 10000 * majorConstraint + 100 * minorConstraint + patchConstraint;\n                  const maxId = 10000 * majorConstraint + (hasMinorVersion ? 100 * minorConstraint : 999) + (hasPatchVersion ? patchConstraint : 99);\n                  // incomplete implementation of: https://getcomposer.org/doc/articles/versions.md#writing-version-constraints\n                  switch (operator) {\n                    case '>=':\n                      if (serverVersionId < constraintId) {\n                        return true;\n                      }\n                      break;\n                    case '>':\n                      if (serverVersionId <= constraintId) {\n                        return true;\n                      }\n                      break;\n                    case '<=':\n                      if (serverVersionId > maxId) {\n                        return true;\n                      }\n                      break;\n                    case '<':\n                      if (serverVersionId >= maxId) {\n                        return true;\n                      }\n                      break;\n                    case '^':\n                      if (serverVersionId < constraintId || serverVersionId > 10000 * (majorConstraint + 1)) {\n                        return true;\n                      }\n                      break;\n                    case '~':\n                      if (serverVersionId < constraintId || hasPatchVersion ? serverVersionId > 10000 * (majorConstraint + 1) : serverVersionId > (10000 * (majorConstraint) + 100 * (patchConstraint + 1))) {\n                        return true;\n                      }\n                      break;\n                  }\n                }\n                return false;\n              });\n              if (disable) {\n                this.error('Disabling manager due to PHP version mismatch. Installed:', env.phpversion, 'required:', env.required_php_version);\n                this.setManagerDisabled(true);\n                this.setManagerDisabledReason(qx.locale.Manager.tr('Your system does not provide the required PHP version for the manager. Installed: %1, required: %2', env.phpversion, env.required_php_version));\n              } else {\n                this.info('Manager available for PHP version', env.phpversion);\n              }\n            }\n          }\n          this.setManagerChecked(true);\n\n          if (window.Sentry) {\n            Sentry.configureScope(function (scope) {\n              if ('server_release' in env) {\n                scope.setTag('server.release', env.server_release);\n              }\n              if ('server_branch' in env) {\n                scope.setTag('server.branch', env.server_branch);\n              }\n              if ('server_id' in env) {\n                scope.setTag('server.id', env.server_id);\n              }\n            });\n          }\n        }, this);\n        xhr.addListener('statusError', e => {\n          this.setManagerChecked(true);\n        });\n        xhr.send();\n      }\n    },\n\n    close: function () {\n      this.setActive(false);\n      const client = cv.TemplateEngine.getClient();\n      if (client) {\n        client.terminate();\n      }\n    },\n\n    /**\n     * Install the service-worker if possible\n     */\n    registerServiceWorker: function() {\n      if (cv.Config.useServiceWorker === true) {\n        const workerFile = 'ServiceWorker.js';\n        navigator.serviceWorker.register(workerFile).then(function(reg) {\n          this.debug('ServiceWorker successfully registered for scope '+reg.scope);\n\n          // configure service worker\n          var configMessage = {\n            'command': 'configure',\n            'message': {\n              forceReload: cv.Config.forceReload,\n              debug: qx.core.Environment.get('qx.debug')\n            }\n          };\n\n          if (reg.active) {\n            reg.active.postMessage(configMessage);\n          } else {\n            navigator.serviceWorker.ready.then(function(ev) {\n              ev.active.postMessage(configMessage);\n            });\n          }\n        }.bind(this)).catch(function(err) {\n          this.error('Error registering service-worker: ', err);\n        }.bind(this));\n      } else if (navigator.serviceWorker) {\n        navigator.serviceWorker.getRegistrations().then(function(registrations) {\n          this.debug('unregistering existing service workers');\n          registrations.forEach(function (registration) {\n            registration.unregister();\n          });\n        }.bind(this));\n      }\n    }\n  }\n});\n"
  ]
}