{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/io/Mockup.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "cv",
    "io",
    "Client",
    "CLIENTS",
    "push",
    "window",
    "_receive",
    "receive",
    "bind",
    "model",
    "data",
    "Model",
    "getInstance",
    "_widgetDataGet",
    "getWidgetData",
    "_getWidgetDataModel",
    "getWidgetDataModel",
    "writeHistory",
    "Config",
    "initialDemoData",
    "xhr",
    "__xhr",
    "dev",
    "FakeServer",
    "addFilter",
    "method",
    "url",
    "startsWith",
    "server",
    "getFakeServer",
    "respondWith",
    "request",
    "report",
    "Record",
    "normalizeUrl",
    "indexOf",
    "replace",
    "length",
    "log",
    "Logger",
    "error",
    "debug",
    "response",
    "shift",
    "readyState",
    "status",
    "respond",
    "headers",
    "JSON",
    "stringify",
    "body",
    "addresses",
    "properties",
    "dataReceived",
    "check",
    "init",
    "connected",
    "event",
    "members",
    "__sequence",
    "__sequenceIndex",
    "__simulations",
    "json",
    "forEach",
    "client",
    "update",
    "d",
    "login",
    "loginOnly",
    "callback",
    "context",
    "call",
    "_registerSimulations",
    "simulations",
    "keys",
    "mainAddress",
    "simulation",
    "hasOwnProperty",
    "additionalAddresses",
    "addr",
    "_startSequence",
    "Timer",
    "once",
    "i",
    "Date",
    "getTime",
    "delay",
    "_processSimulation",
    "address",
    "value",
    "start",
    "stop",
    "startValues",
    "stopValues",
    "type",
    "direction",
    "initValue",
    "getState",
    "targetAddress",
    "undefined",
    "timer",
    "interval",
    "stepSize",
    "addListener",
    "newValue",
    "subscribe",
    "write",
    "REPLAYING",
    "ts",
    "answer",
    "restart",
    "getResourcePath",
    "name",
    "Mockup"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Mockup.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Mockup simulating a backend + client for the Cometvisu protocol\n *\n * @author Tobias Bräutigam\n * @since 2016\n */\n/* istanbul ignore next */\nqx.Class.define('cv.io.Mockup', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function() {\n    this.base(arguments);\n    cv.io.Client.CLIENTS.push(this);\n    // make some functions accessible for the protactor runner\n    window._receive = this.receive.bind(this);\n    var model = cv.data.Model.getInstance();\n    window._widgetDataGet = model.getWidgetData.bind(model);\n    window._getWidgetDataModel = model.getWidgetDataModel.bind(model);\n    window.writeHistory = [];\n\n    if (qx.core.Environment.get('cv.testMode') && cv.Config.initialDemoData && cv.Config.initialDemoData.xhr) {\n      this.__xhr = cv.Config.initialDemoData.xhr;\n      // configure server\n      qx.dev.FakeServer.getInstance().addFilter(function (method, url) {\n        return url.startsWith('https://sentry.io');\n      }, this);\n      var server = qx.dev.FakeServer.getInstance().getFakeServer();\n      server.respondWith(function (request) {\n        var url = cv.report.Record.normalizeUrl(request.url);\n        if (url.indexOf(\"nocache=\") >= 0) {\n          url = url.replace(/[\\?|&]nocache=[0-9]+/, \"\");\n        }\n        if (!this.__xhr[url] || this.__xhr[url].length === 0) {\n          qx.log.Logger.error(this, \"404: no logged responses for URI \" + url + \" found\");\n        } else {\n          qx.log.Logger.debug(this, \"faking response for \" + url);\n          var response = \"\";\n          if (this.__xhr[url].length === 1) {\n            response = this.__xhr[url][0];\n          } else {\n            // multiple responses recorded use them as LIFO stack\n            response = this.__xhr[url].shift();\n          }\n\n          if (request.readyState === 4 && request.status === 404) {\n            // This is a hack, sometimes the request has a 404 status and send readystate\n            // the respond would fail if we do not override it here\n            request.readyState = 1;\n          }\n          request.respond(response.status, response.headers, JSON.stringify(response.body));\n        }\n      }.bind(this));\n    }\n\n    this.addresses = [];\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    dataReceived : {\n      check: \"Boolean\",\n      init: true\n    },\n    server: {\n      check: \"String\",\n      init: \"Mockup\"\n    },\n    connected: {\n      check: \"Boolean\",\n      init: true,\n      event: \"changeConnected\"\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    addresses: null,\n    __xhr: null,\n    __sequence: null,\n    __sequenceIndex: 0,\n    __simulations: null,\n\n    /**\n     * This function gets called once the communication is established and session information is available\n     *\n     */\n    receive: function (json) {\n      if (json) {\n        cv.io.Client.CLIENTS.forEach(function (client) {\n          client.update(json.d);\n        });\n      }\n    },\n\n    login: function (loginOnly, callback, context) {\n      if (callback) {\n        callback.call(context);\n        if (qx.core.Environment.get('cv.testMode')) {\n          if (cv.Config.initialDemoData) {\n            this.receive({\n              i: new Date().getTime(),\n              d: cv.Config.initialDemoData.states\n            });\n\n            if (cv.Config.initialDemoData.sequence) {\n              this.__sequence = cv.Config.initialDemoData.sequence;\n              this._startSequence();\n            }\n            if (cv.Config.initialDemoData.simulations) {\n              this._registerSimulations(cv.Config.initialDemoData.simulations);\n            }\n            cv.Config.initialDemoData = null;\n          }\n        }\n      }\n    },\n\n    _registerSimulations: function (simulations) {\n      this.__simulations = {};\n      Object.keys(simulations).forEach(function (mainAddress) {\n        var simulation = simulations[mainAddress];\n        this.__simulations[mainAddress] = simulation;\n        if (simulation.hasOwnProperty(\"additionalAddresses\")) {\n          simulation.additionalAddresses.forEach(function (addr) {\n            this.__simulations[addr] = simulation;\n          }, this);\n        }\n      }, this);\n    },\n\n    _startSequence: function () {\n      if (this.__sequence.length <= this.__sequenceIndex) {\n        // start again\n        this.__sequenceIndex = 0;\n      }\n      qx.event.Timer.once(function () {\n        this.receive({\n          i: new Date().getTime(),\n          d: this.__sequence[this.__sequenceIndex].data\n        });\n        this.__sequenceIndex++;\n        this._startSequence();\n      }, this, this.__sequence[this.__sequenceIndex].delay);\n    },\n\n    _processSimulation: function (address, value) {\n      var simulation = this.__simulations[address];\n      if (!simulation) {\n        return;\n      }\n      var start = false;\n      var stop = false;\n      if (simulation.hasOwnProperty('startValues')) {\n        // try the more specific matches with address included\n        start = simulation.startValues.indexOf(address + \"|\" + value) >= 0;\n        if (simulation.hasOwnProperty('stopValues')) {\n          stop = simulation.stopValues.indexOf(address + \"|\" + value) >= 0;\n        }\n        if (!stop) {\n          // the the more general ones\n          start = simulation.startValues.indexOf(value) >= 0;\n          stop = simulation.startValues.indexOf(value) >= 0;\n        }\n      }\n      if (start) {\n        // start simulation\n        if (simulation.type === \"shutter\") {\n          simulation.direction = value === \"0\" ? \"up\" : \"down\";\n          var initValue = cv.data.Model.getInstance().getState(simulation.targetAddress);\n          if (initValue === undefined) {\n            initValue = 0;\n          }\n          simulation.value = initValue;\n\n          if (simulation.timer) {\n            simulation.timer.stop();\n          } else {\n            simulation.timer = new qx.event.Timer(simulation.interval || 100);\n            var stepSize = simulation.stepSize || 10;\n            simulation.timer.addListener(\"interval\", function () {\n              var newValue = simulation.value;\n              if (simulation.direction === \"up\") {\n                // drive up\n                newValue = simulation.value + stepSize;\n                if (newValue > 100) {\n                  simulation.timer.stop();\n                  return;\n                }\n              } else {\n                // drive down\n                newValue = simulation.value - stepSize;\n                if (newValue < 0) {\n                  simulation.timer.stop();\n                  return;\n                }\n              }\n              var update = {\n                i: new Date().getTime(),\n                d: {}\n              };\n              update.d[simulation.targetAddress] = newValue;\n              this.receive(update);\n              if (simulation.value !== newValue) {\n                simulation.value = newValue;\n              }\n            }, this);\n          }\n          simulation.timer.start();\n        }\n      } else if (stop) {\n        // stop simulation\n        if (simulation.timer) {\n          simulation.timer.stop();\n        }\n      }\n    },\n\n    /**\n     * Subscribe to the addresses in the parameter\n     *\n     */\n    subscribe: function (addresses) {\n      this.addresses = addresses ? addresses : [];\n    },\n\n    /**\n     * This function sends a value\n     *\n     */\n    write: function (address, value) {\n      if (cv.report.Record.REPLAYING === true) {\n        // do nothing in replay mode\n        return;\n      }\n      var ts = new Date().getTime();\n      // store in window, to make it accessible for protractor\n      window.writeHistory.push({\n        address: address,\n        value: value,\n        ts: ts\n      });\n\n      if (this.__simulations && this.__simulations.hasOwnProperty(address)) {\n        this._processSimulation(address, value);\n      } else {\n        // send update\n        var answer = {\n          i: ts,\n          d: {}\n        };\n        answer.d[address] = value;\n        this.debug('sending value: ' + value + ' to address: ' + address);\n        this.receive(answer);\n      }\n    },\n\n    restart: function() {},\n\n    stop: function () {},\n\n    getResourcePath: function (name) {\n      return name;\n    }\n  }\n});\n"
  ]
}