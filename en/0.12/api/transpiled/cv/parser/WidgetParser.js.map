{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/parser/WidgetParser.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "__handlers",
    "lookupM",
    "lookupS",
    "model",
    "cv",
    "data",
    "Model",
    "getInstance",
    "__templates",
    "addTemplate",
    "name",
    "templateData",
    "addHandler",
    "tagName",
    "handler",
    "toLowerCase",
    "getHandler",
    "unknown",
    "renderTemplates",
    "rootPage",
    "querySelectorAll",
    "forEach",
    "elem",
    "templateName",
    "getAttribute",
    "variables",
    "Array",
    "prototype",
    "call",
    "children",
    "variable",
    "innerHTML",
    "hasOwnProperty",
    "renderedString",
    "bom",
    "Template",
    "render",
    "replace",
    "trim",
    "helperNode",
    "ownerDocument",
    "createElement",
    "substring",
    "length",
    "replacement",
    "firstElementChild",
    "next",
    "nextElementSibling",
    "parent",
    "parentNode",
    "replaceChild",
    "insertBefore",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "tag",
    "nodeName",
    "parser",
    "result",
    "log",
    "Logger",
    "debug",
    "parseBasicElement",
    "element",
    "setWidgetData",
    "WidgetParser",
    "getElementType",
    "parseElement",
    "mappings",
    "createDefaultWidget",
    "key",
    "map",
    "value",
    "undefined",
    "transform",
    "target",
    "parseStyling",
    "__getAttributeToPropertyMappings",
    "getAttributeToPropertyMappings",
    "getDefaultClasses",
    "widgetType",
    "layout",
    "parseLayout",
    "from",
    "filter",
    "m",
    "matches",
    "style",
    "Object",
    "keys",
    "extractLayout",
    "classes",
    "setWidgetLayout",
    "label",
    "parseLabel",
    "querySelector",
    "bindClickToWidget",
    "TemplateEngine",
    "prop",
    "responsive",
    "find",
    "endsWith",
    "defaultValues",
    "ret_val",
    "__extractLayoutAttribute",
    "property",
    "x",
    "y",
    "width",
    "height",
    "extractLayout3d",
    "z",
    "floor",
    "floorFilter",
    "roomFilter",
    "labelClass",
    "childNodes",
    "IconHandler",
    "getIconText",
    "textContent",
    "elementData",
    "getWidgetData",
    "rowspan",
    "colspan",
    "Element",
    "getAttributeNS",
    "colspanM",
    "colspanS",
    "parseFloat",
    "document",
    "dataset",
    "Math",
    "rowspanClass",
    "ui",
    "Manager",
    "parseFormat",
    "format",
    "parseAddress",
    "makeAddressListFn",
    "address",
    "makeAddressList",
    "id",
    "skipAdding",
    "src",
    "formatPos",
    "mode",
    "error",
    "outerHTML",
    "variantInfo",
    "addAddress",
    "console",
    "parseRefresh",
    "doCacheControl",
    "refresh",
    "parseInt",
    "cachecontrol",
    "styling",
    "parseChildren",
    "getStoragePath",
    "childs",
    "child",
    "indexOf",
    "idx",
    "childData",
    "isArray",
    "i",
    "l",
    "push"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;;;;;;;;;;;;;;;;;;AAoBA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,wBAAhB,EAA0C;AACxCC,IAAAA,IAAI,EAAE,QADkC;;AAGxC;;;;;AAKAC,IAAAA,OAAO,EAAE;AACPC,MAAAA,UAAU,EAAE,EADL;AAEPC,MAAAA,OAAO,EAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAY,CAAZ,EAAgB,CAAhB,EAAoB,CAApB,EAAwB,CAAxB,EAA2B,EAA3B,EAA+B,EAA/B,EAAmC,EAAnC,EAAuC,EAAvC,EAA2C,EAA3C,EAA+C,EAA/C,CAFH;AAGPC,MAAAA,OAAO,EAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,EAAX,EAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B,EAA+B,EAA/B,EAAmC,EAAnC,EAAuC,EAAvC,EAA2C,EAA3C,EAA+C,EAA/C,CAHH;AAIPC,MAAAA,KAAK,EAAEC,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAcC,WAAd,EAJA;AAKPC,MAAAA,WAAW,EAAE,EALN;AAOPC,MAAAA,WAAW,EAAE,qBAASC,IAAT,EAAeC,YAAf,EAA6B;AACxC,aAAKH,WAAL,CAAiBE,IAAjB,IAAyBC,YAAzB;AACD,OATM;AAWPC,MAAAA,UAAU,EAAE,oBAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACtC,aAAKd,UAAL,CAAgBa,OAAO,CAACE,WAAR,EAAhB,IAAyCD,OAAzC;AACD,OAbM;AAePE,MAAAA,UAAU,EAAE,oBAAUH,OAAV,EAAmB;AAC7B,eAAO,KAAKb,UAAL,CAAgBa,OAAO,CAACE,WAAR,EAAhB,KAA0C,KAAKf,UAAL,CAAgBiB,OAAjE;AACD,OAjBM;;AAmBP;;;;AAIAC,MAAAA,eAAe,EAAE,yBAAUC,QAAV,EAAoB;AACnCA,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCC,OAAtC,CAA8C,UAAUC,IAAV,EAAgB;AAC5D,cAAIC,YAAY,GAAGD,IAAI,CAACE,YAAL,CAAkB,MAAlB,CAAnB;AACA,cAAIC,SAAS,GAAG,EAAhB;AACAC,UAAAA,KAAK,CAACC,SAAN,CAAgBN,OAAhB,CAAwBO,IAAxB,CAA6BN,IAAI,CAACO,QAAlC,EAA4C,UAAUC,QAAV,EAAoB;AAC9DL,YAAAA,SAAS,CAACK,QAAQ,CAACN,YAAT,CAAsB,MAAtB,CAAD,CAAT,GAA2CM,QAAQ,CAACC,SAApD;AACD,WAFD;;AAIA,cAAI,KAAKvB,WAAL,CAAiBwB,cAAjB,CAAgCT,YAAhC,CAAJ,EAAmD;AACjD,gBAAIU,cAAc,GAAGzC,EAAE,CAAC0C,GAAH,CAAOC,QAAP,CAAgBC,MAAhB,CAAuB,KAAK5B,WAAL,CAAiBe,YAAjB,CAAvB,EAAuDE,SAAvD,EAAkEY,OAAlE,CAA0E,IAA1E,EAAgF,EAAhF,EAAoFC,IAApF,EAArB;AACA,gBAAIC,UAAU,GAAGjB,IAAI,CAACkB,aAAL,CAAmBC,aAAnB,CAAiC,UAAjC,CAAjB;AACAF,YAAAA,UAAU,CAACR,SAAX,GAAuBE,cAAc,CAACS,SAAf,CAAyB,CAAzB,EAA4BT,cAAc,CAACU,MAAf,GAAwB,CAApD,EAAuDL,IAAvD,EAAvB,CAHiD,CAIjD;;AACA,gBAAIM,WAAW,GAAGL,UAAU,CAACM,iBAA7B;AACA,gBAAIC,IAAI,GAAGxB,IAAI,CAACyB,kBAAhB;AACA,gBAAIC,MAAM,GAAG1B,IAAI,CAAC2B,UAAlB;AACAD,YAAAA,MAAM,CAACE,YAAP,CAAoBN,WAApB,EAAiCtB,IAAjC;;AACA,mBAAOiB,UAAU,CAACV,QAAX,CAAoBc,MAApB,GAA6B,CAApC,EAAuC;AACrC;AACAK,cAAAA,MAAM,CAACG,YAAP,CAAoBZ,UAAU,CAACV,QAAX,CAAoB,CAApB,CAApB,EAA4CiB,IAA5C;AACD;AACF;AACF,SArBD,EAqBG,IArBH;AAsBD,OA9CM;;AAgDP;;;;;;;;;;AAUAM,MAAAA,KAAK,EAAE,eAAUC,GAAV,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,QAA9B,EAAwC;AAC7C,YAAIC,GAAG,GAAGJ,GAAG,CAACK,QAAJ,CAAa3C,WAAb,EAAV;;AACA,YAAI0C,GAAG,KAAK,QAAZ,EAAsB;AACpB;AACAJ,UAAAA,GAAG,GAAGA,GAAG,CAACxB,QAAJ,CAAa,CAAb,CAAN;AACA4B,UAAAA,GAAG,GAAGJ,GAAG,CAACK,QAAJ,CAAa3C,WAAb,EAAN;AACD;;AACD,YAAI4C,MAAM,GAAG,KAAK3C,UAAL,CAAgByC,GAAhB,CAAb;AACA,YAAIG,MAAM,GAAG,IAAb;;AACA,YAAID,MAAJ,EAAY;AACVC,UAAAA,MAAM,GAAGD,MAAM,CAACP,KAAP,CAAaC,GAAb,EAAkBC,IAAlB,EAAwBC,OAAxB,EAAiCC,QAAjC,CAAT;AACD,SAFD,MAEO;AACLhE,UAAAA,EAAE,CAACqE,GAAH,CAAOC,MAAP,CAAcC,KAAd,CAAoB,IAApB,EAA0B,2CAA0CN,GAAG,CAAC1C,WAAJ,EAApE;AACD;;AACD,eAAO6C,MAAP;AACD,OAzEM;AA2EPI,MAAAA,iBAAiB,EAAE,2BAAUC,OAAV,EAAmBX,IAAnB,EAAyBC,OAAzB,EAAkCC,QAAlC,EAA4C;AAC7D,eAAO,KAAKrD,KAAL,CAAW+D,aAAX,CAA0BZ,IAA1B,EAAgC;AACrC,kBAAQA,IAD6B;AAErC,oBAAUlD,EAAE,CAACuD,MAAH,CAAUQ,YAAV,CAAuBC,cAAvB,CAAsCH,OAAtC,CAF2B;AAGrC,sBAAYT;AAHyB,SAAhC,CAAP;AAKD,OAjFM;;AAmFP;;;;;;;;;;;AAWAa,MAAAA,YAAY,EAAE,sBAAUvD,OAAV,EAAmBmD,OAAnB,EAA4BX,IAA5B,EAAkCC,OAAlC,EAA2CC,QAA3C,EAAqDc,QAArD,EAA+D;AAC3E;AACA,YAAIjE,IAAI,GAAG,KAAKkE,mBAAL,CAAyBzD,OAAzB,EAAkC,KAAKsD,cAAL,CAAoBH,OAApB,CAAlC,EAAgEA,OAAhE,EAAyEX,IAAzE,EAA+EC,OAA/E,EAAwFC,QAAxF,CAAX;;AACA,YAAIc,QAAJ,EAAc;AACZ,eAAK,IAAIE,GAAT,IAAgBF,QAAhB,EAA0B;AACxB,gBAAIA,QAAQ,CAACtC,cAAT,CAAwBwC,GAAxB,CAAJ,EAAkC;AAChC,kBAAIC,GAAG,GAAGH,QAAQ,CAACE,GAAD,CAAlB;AACA,kBAAIE,KAAK,GAAGT,OAAO,CAACzC,YAAR,CAAqBgD,GAArB,CAAZ;;AACA,kBAAIC,GAAG,CAAC,SAAD,CAAH,KAAmBE,SAAnB,KAAiCD,KAAK,KAAKC,SAAV,IAAuBD,KAAK,KAAK,IAAlE,CAAJ,EAA6E;AAC3EA,gBAAAA,KAAK,GAAGD,GAAG,CAAC,SAAD,CAAX;AACD;;AACD,kBAAIA,GAAG,CAACG,SAAR,EAAmB;AACjBF,gBAAAA,KAAK,GAAGD,GAAG,CAACG,SAAJ,CAAcF,KAAd,CAAR;AACD;;AACDrE,cAAAA,IAAI,CAACoE,GAAG,CAACI,MAAJ,IAAcL,GAAf,CAAJ,GAA0BE,KAA1B;AACD;AACF;AACF;;AACD,aAAKI,YAAL,CAAkBb,OAAlB,EAA2BX,IAA3B;AACA,eAAOjD,IAAP;AACD,OAlHM;;AAoHP;;;;;;AAMA0E,MAAAA,gCAAgC,EAAE,0CAASjE,OAAT,EAAkB;AAClD,eAAOA,OAAO,IAAIA,OAAO,CAACkE,8BAAnB,GAAoDlE,OAAO,CAACkE,8BAAR,EAApD,GAA+F,EAAtG;AACD,OA5HM;AA8HPZ,MAAAA,cAAc,EAAE,wBAASH,OAAT,EAAkB;AAChC,YAAInE,IAAI,GAAGmE,OAAO,CAACP,QAAR,CAAiB3C,WAAjB,EAAX;;AACA,YAAIjB,IAAI,KAAK,KAAb,EAAoB;AAClB;AACAA,UAAAA,IAAI,GAAG,OAAP;AACD;;AACD,eAAOA,IAAP;AACD,OArIM;AAuIPmF,MAAAA,iBAAiB,EAAE,2BAASnF,IAAT,EAAe;AAChC,eAAO,qBAAqBA,IAAI,CAACiB,WAAL,EAA5B;AACD,OAzIM;;AA2IP;;;;;;;;;;;;AAYAwD,MAAAA,mBAAmB,EAAE,6BAASzD,OAAT,EAAkBoE,UAAlB,EAA8BjB,OAA9B,EAAuCX,IAAvC,EAA6CC,OAA7C,EAAsDC,QAAtD,EAAgE;AACnF,YAAI1C,OAAO,CAACyD,mBAAZ,EAAiC;AAC/B,iBAAOzD,OAAO,CAACyD,mBAAR,CAA4BW,UAA5B,EAAwCjB,OAAxC,EAAiDX,IAAjD,EAAuDC,OAAvD,EAAgEC,QAAhE,CAAP;AACD;;AAED,YAAI2B,MAAM,GAAG,KAAKC,WAAL,CAAkB1D,KAAK,CAAC2D,IAAN,CAAWpB,OAAO,CAACpC,QAAnB,EAA6ByD,MAA7B,CAAoC,UAASC,CAAT,EAAW;AAAC,iBAAOA,CAAC,CAACC,OAAF,CAAU,QAAV,CAAP;AAA4B,SAA5E,EAA8E,CAA9E,CAAlB,CAAb;AACA,YAAIC,KAAK,GAAGC,MAAM,CAACC,IAAP,CAAYR,MAAZ,EAAoBxC,MAApB,KAA+B,CAA/B,GAAmC,EAAnC,GAAwC,YAAY,KAAKiD,aAAL,CAAoBT,MAApB,EAA4B3B,QAA5B,CAAZ,GAAqD,GAAzG;AACA,YAAIqC,OAAO,GAAG/E,OAAO,CAACmE,iBAAR,GAA4BnE,OAAO,CAACmE,iBAAR,CAA0BC,UAA1B,CAA5B,GAAoE,KAAKD,iBAAL,CAAuBC,UAAvB,CAAlF,CAPmF,CAQnF;;AACA,YAAKjB,OAAO,CAACzC,YAAR,CAAqB,OAArB,KAAiC0D,UAAU,KAAK,OAArD,EAA+D;AAC7DW,UAAAA,OAAO,IAAE,MAAI5B,OAAO,CAACzC,YAAR,CAAqB,OAArB,CAAb;AACD;;AACDqE,QAAAA,OAAO,IAAI,MAAM,KAAKC,eAAL,CAAqB7B,OAArB,EAA8BX,IAA9B,CAAjB;;AACA,YAAIW,OAAO,CAACzC,YAAR,CAAqB,SAArB,CAAJ,EAAsC;AACpC+B,UAAAA,OAAO,GAAGU,OAAO,CAACzC,YAAR,CAAqB,SAArB,CAAV;AACD,SAfkF,CAelF;;;AACD,YAAI+B,OAAJ,EAAc;AACZsC,UAAAA,OAAO,IAAI,cAActC,OAAzB;AACD;;AACD,YAAIU,OAAO,CAACzC,YAAR,CAAqB,OAArB,CAAJ,EAAmC;AACjCqE,UAAAA,OAAO,IAAI,aAAa5B,OAAO,CAACzC,YAAR,CAAqB,OAArB,CAAxB;AACD;;AACD,YAAIuE,KAAK,GAAIb,UAAU,KAAG,MAAd,GAAwB,KAAKc,UAAL,CAAiB/B,OAAO,CAACgC,aAAR,CAAsB,OAAtB,CAAjB,EAAiD1C,OAAjD,EAA0D,EAA1D,CAAxB,GAAyF,KAAKyC,UAAL,CAAiB/B,OAAO,CAACgC,aAAR,CAAsB,OAAtB,CAAjB,EAAiD1C,OAAjD,CAArG;AAEA,YAAI2C,iBAAiB,GAAG9F,EAAE,CAAC+F,cAAH,CAAkB5F,WAAlB,GAAgC2F,iBAAxD;;AACA,YAAIjC,OAAO,CAACzC,YAAR,CAAqB,sBAArB,CAAJ,EAAkD;AAChD0E,UAAAA,iBAAiB,GAAGjC,OAAO,CAACzC,YAAR,CAAqB,sBAArB,MAAiD,MAArE;AACD;;AAED,YAAInB,IAAI,GAAG;AACT,kBAAYiD,IADH;AAET,oBAAY4B,UAAU,CAACnE,WAAX,EAFH;AAGT,sBAAYyC;AAHH,SAAX;AAKAnD,QAAAA,IAAI,CAAC6F,iBAAL,GAAyBA,iBAAzB;AACA,SAAC,SAAD,EAAY,OAAZ,EAAqB,OAArB,EAA8B7E,OAA9B,CAAsC,UAAS+E,IAAT,EAAe;AACnD/F,UAAAA,IAAI,CAAC+F,IAAD,CAAJ,GAAanC,OAAO,CAACzC,YAAR,CAAqB4E,IAArB,KAA8B,IAA3C;AACD,SAFD,EAEG,IAFH;AAIA/F,QAAAA,IAAI,CAAC8E,MAAL,GAAcA,MAAM,IAAI,IAAxB;AACA9E,QAAAA,IAAI,CAAC0F,KAAL,GAAaA,KAAK,IAAI,EAAtB;AACA1F,QAAAA,IAAI,CAACwF,OAAL,GAAeA,OAAO,IAAI,EAA1B;AACAxF,QAAAA,IAAI,CAACoF,KAAL,GAAaA,KAAK,IAAI,EAAtB;AACApF,QAAAA,IAAI,CAACgG,UAAL,GAAkB,CAAC,CAACX,MAAM,CAACC,IAAP,CAAYR,MAAZ,EAAoBmB,IAApB,CAAyB,UAAUF,IAAV,EAAgB;AAC3D,iBAAOA,IAAI,CAACG,QAAL,CAAc,IAAd,KAAuBH,IAAI,CAACG,QAAL,CAAc,IAAd,CAA9B;AACD,SAFmB,CAApB;AAIA,eAAO,KAAKpG,KAAL,CAAW+D,aAAX,CAA0BZ,IAA1B,EAAgCjD,IAAhC,CAAP;AACD,OAvMM;;AAyMP;;;;;;;AAOA+E,MAAAA,WAAW,EAAE,qBAAUD,MAAV,EAAkBqB,aAAlB,EACb;AACE,YAAIC,OAAO,GAAG,EAAd;;AAEA,YAAI,CAACtB,MAAL,EAAc;AACZ,iBAAOsB,OAAP;AACD;;AAED,YAAI9B,SAAS,KAAK6B,aAAlB,EAAkC;AAChCA,UAAAA,aAAa,GAAG,EAAhB;AACD;;AACD,SAAC,GAAD,EAAM,GAAN,EAAW,OAAX,EAAoB,QAApB,EAA8B,OAA9B,EAAuCnF,OAAvC,CAA+C,UAAU+E,IAAV,EAAgB;AAC7D,eAAKM,wBAAL,CAA8BD,OAA9B,EAAuCL,IAAvC,EAA6CjB,MAA7C,EAAqDqB,aAArD;;AACA,eAAKE,wBAAL,CAA8BD,OAA9B,EAAuCL,IAAI,GAAG,IAA9C,EAAoDjB,MAApD,EAA4DqB,aAA5D;;AACA,eAAKE,wBAAL,CAA8BD,OAA9B,EAAuCL,IAAI,GAAG,IAA9C,EAAoDjB,MAApD,EAA4DqB,aAA5D;AACD,SAJD,EAIG,IAJH;AAKA,eAAOC,OAAP;AACD,OAjOM;AAmOPC,MAAAA,wBAAwB,EAAE,kCAAUD,OAAV,EAAmBE,QAAnB,EAA6BxB,MAA7B,EAAqCqB,aAArC,EAAoD;AAC5E,YAAIrB,MAAM,CAAC3D,YAAP,CAAoBmF,QAApB,CAAJ,EAAoC;AAClCF,UAAAA,OAAO,CAACE,QAAD,CAAP,GAAoBxB,MAAM,CAAC3D,YAAP,CAAoBmF,QAApB,CAApB;AACD,SAFD,MAGK,IAAIH,aAAa,CAACG,QAAD,CAAjB,EAAkC;AACrCF,UAAAA,OAAO,CAACE,QAAD,CAAP,GAAoBH,aAAa,CAACG,QAAD,CAAjC;AACD;AACF,OA1OM;AA4OPf,MAAAA,aAAa,EAAE,uBAAUT,MAAV,EAAkB3B,QAAlB,EACf;AAEE,YAAIiD,OAAO,GAAIjD,QAAQ,KAAK,IAAd,GAAsB,oBAAtB,GAA6C,EAA3D;;AACA,YAAI2B,MAAM,CAACyB,CAAX,EAAoB;AAClBH,UAAAA,OAAO,IAAI,UAAYtB,MAAM,CAACyB,CAAnB,GAA4B,GAAvC;AACD;;AACD,YAAIzB,MAAM,CAAC0B,CAAX,EAAoB;AAClBJ,UAAAA,OAAO,IAAI,SAAYtB,MAAM,CAAC0B,CAAnB,GAA4B,GAAvC;AACD;;AACD,YAAI1B,MAAM,CAAC2B,KAAX,EAAoB;AAClBL,UAAAA,OAAO,IAAI,WAAYtB,MAAM,CAAC2B,KAAnB,GAA4B,GAAvC;AACD;;AACD,YAAI3B,MAAM,CAAC4B,MAAX,EAAoB;AAClBN,UAAAA,OAAO,IAAI,YAAYtB,MAAM,CAAC4B,MAAnB,GAA4B,GAAvC;AACD;;AAED,eAAON,OAAP;AACD,OA9PM;AAgQPO,MAAAA,eAAe,EAAE,yBAAU7B,MAAV,EACjB;AACE,YAAIsB,OAAO,GAAG,EAAd;;AACA,YAAItB,MAAM,CAAC3D,YAAP,CAAoB,GAApB,CAAJ,EAA+B;AAC7BiF,UAAAA,OAAO,CAACG,CAAR,GAAgBzB,MAAM,CAAC3D,YAAP,CAAoB,GAApB,CAAhB;AACD;;AACD,YAAI2D,MAAM,CAAC3D,YAAP,CAAoB,GAApB,CAAJ,EAA+B;AAC7BiF,UAAAA,OAAO,CAACI,CAAR,GAAgB1B,MAAM,CAAC3D,YAAP,CAAoB,GAApB,CAAhB;AACD;;AACD,YAAI2D,MAAM,CAAC3D,YAAP,CAAoB,GAApB,CAAJ,EAA+B;AAC7BiF,UAAAA,OAAO,CAACQ,CAAR,GAAgB9B,MAAM,CAAC3D,YAAP,CAAoB,GAApB,CAAhB;AACD;;AACD,YAAI2D,MAAM,CAAC3D,YAAP,CAAoB,OAApB,CAAJ,EAAmC;AACjCiF,UAAAA,OAAO,CAACS,KAAR,GAAgB/B,MAAM,CAAC3D,YAAP,CAAoB,OAApB,CAAhB;AACD;;AACD,YAAI2D,MAAM,CAAC3D,YAAP,CAAoB,aAApB,CAAJ,EAAyC;AACvCiF,UAAAA,OAAO,CAACU,WAAR,GAAsBhC,MAAM,CAAC3D,YAAP,CAAoB,aAApB,CAAtB;AACD;;AACD,YAAI2D,MAAM,CAAC3D,YAAP,CAAoB,YAApB,CAAJ,EAAyC;AACvCiF,UAAAA,OAAO,CAACW,UAAR,GAAsBjC,MAAM,CAAC3D,YAAP,CAAoB,YAApB,CAAtB;AACD;;AACD,eAAOiF,OAAP;AACD,OAtRM;AAwRPT,MAAAA,UAAU,EAAE,oBAASD,KAAT,EAAgBxC,OAAhB,EAAyB8D,UAAzB,EAAqC5B,KAArC,EACZ;AACE,YAAI,CAACM,KAAL,EAAa;AACX,iBAAO,EAAP;AACD;;AACD,YAAIU,OAAO,GAAG,kBAAkBY,UAAU,KAAK1C,SAAf,GAA2B0C,UAA3B,GAAwC,OAA1D,IAAqE,GAArE,IACV5B,KAAK,GAAI,aAAaA,KAAb,GAAqB,GAAzB,GAAgC,EAD3B,IACkC,GADhD;AAGA/D,QAAAA,KAAK,CAACC,SAAN,CAAgBN,OAAhB,CAAwBO,IAAxB,CAA6BmE,KAAK,CAACuB,UAAnC,EAA+C,UAAShG,IAAT,EAAe;AAC5D,cAAIA,IAAI,CAACoC,QAAL,CAAc3C,WAAd,OAA+B,MAAnC,EAA4C;AAC1C0F,YAAAA,OAAO,IAAIrG,EAAE,CAACmH,WAAH,CAAehH,WAAf,GAA6BiH,WAA7B,CACTlG,IAAI,CAACE,YAAL,CAAkB,MAAlB,CADS,EAETF,IAAI,CAACE,YAAL,CAAkB,MAAlB,CAFS,EAGTF,IAAI,CAACE,YAAL,CAAkB,SAAlB,KAAgC+B,OAHvB,EAITjC,IAAI,CAACE,YAAL,CAAkB,OAAlB,CAJS,EAKTF,IAAI,CAACE,YAAL,CAAkB,SAAlB,CALS,CAAX;AAMD,WAPD,MAOO;AACLiF,YAAAA,OAAO,IAAInF,IAAI,CAACmG,WAAhB;AACD;AACF,SAXD;AAYA,eAAOhB,OAAO,GAAG,QAAjB;AACD,OA7SM;;AA+SP;;;;;;;;AAQAX,MAAAA,eAAe,EAAE,yBAAU7B,OAAV,EAAmBX,IAAnB,EAA0B;AACzC,YACEoE,WAAW,GAAG,KAAKvH,KAAL,CAAWwH,aAAX,CAA0BrE,IAA1B,CADhB;AAAA,YAEE6B,MAAM,GAAQzD,KAAK,CAAC2D,IAAN,CAAWpB,OAAO,CAACpC,QAAnB,EAA6ByD,MAA7B,CAAoC,UAASC,CAAT,EAAW;AAAC,iBAAOA,CAAC,CAACC,OAAF,CAAU,QAAV,CAAP;AAA4B,SAA5E,EAA8E,CAA9E,CAFhB;AAAA,YAGEiB,OAAO,GAAG,EAHZ;AAAA,YAIEmB,OAAO,GAAG,IAJZ;;AAMA,YAAIzC,MAAJ,EAAY;AACVuC,UAAAA,WAAW,CAACG,OAAZ,GAAsBrI,EAAE,CAAC6D,GAAH,CAAOyE,OAAP,CAAeC,cAAf,CAA8B5C,MAA9B,EAAsC,EAAtC,EAA0C,SAA1C,CAAtB;AACAuC,UAAAA,WAAW,CAACM,QAAZ,GAAuBxI,EAAE,CAAC6D,GAAH,CAAOyE,OAAP,CAAeC,cAAf,CAA8B5C,MAA9B,EAAsC,EAAtC,EAA0C,WAA1C,CAAvB;AACAuC,UAAAA,WAAW,CAACO,QAAZ,GAAuBzI,EAAE,CAAC6D,GAAH,CAAOyE,OAAP,CAAeC,cAAf,CAA8B5C,MAA9B,EAAsC,EAAtC,EAA0C,WAA1C,CAAvB;AACAyC,UAAAA,OAAO,GAAGpI,EAAE,CAAC6D,GAAH,CAAOyE,OAAP,CAAeC,cAAf,CAA8B5C,MAA9B,EAAsC,EAAtC,EAA0C,SAA1C,CAAV;AACD;;AACDuC,QAAAA,WAAW,CAACG,OAAZ,GAAsBK,UAAU,CAACR,WAAW,CAACG,OAAZ,IAAuBM,QAAQ,CAAClC,aAAT,CAAuB,MAAvB,EAA+BmC,OAA/B,CAAuC,gBAAvC,CAAvB,IAAmF,CAApF,CAAhC;AACAV,QAAAA,WAAW,CAACM,QAAZ,GAAuBE,UAAU,CAACR,WAAW,CAACM,QAAZ,IAAwB5H,EAAE,CAACuD,MAAH,CAAUQ,YAAV,CAAuBlE,OAAvB,CAA+BoI,IAAI,CAACnB,KAAL,CAAWQ,WAAW,CAACG,OAAvB,CAA/B,CAAxB,IAA2FH,WAAW,CAACG,OAAxG,CAAjC;AACAH,QAAAA,WAAW,CAACO,QAAZ,GAAuBC,UAAU,CAACR,WAAW,CAACO,QAAZ,IAAwB7H,EAAE,CAACuD,MAAH,CAAUQ,YAAV,CAAuBjE,OAAvB,CAA+BmI,IAAI,CAACnB,KAAL,CAAWQ,WAAW,CAACG,OAAvB,CAA/B,CAAxB,IAA2FH,WAAW,CAACG,OAAxG,CAAjC;;AAEA,YAAID,OAAJ,EAAa;AACXF,UAAAA,WAAW,CAACY,YAAZ,GAA2BlI,EAAE,CAACmI,EAAH,CAAMpD,MAAN,CAAaqD,OAAb,CAAqBF,YAArB,CAAkCJ,UAAU,CAACN,OAAO,IAAI,CAAZ,CAA5C,CAA3B;AACAnB,UAAAA,OAAO,GAAG,cAAV;AACD;;AACD,eAAOA,OAAP;AACD,OA7UM;;AA+UP;;;;;AAKAgC,MAAAA,WAAW,EAAE,qBAAUpF,GAAV,EAAeC,IAAf,EAAqB;AAChC,YAAIjD,IAAI,GAAG,KAAKF,KAAL,CAAWwH,aAAX,CAAyBrE,IAAzB,CAAX;AACA,YAAIoB,KAAK,GAAGrB,GAAG,CAAC7B,YAAJ,CAAiB,QAAjB,CAAZ;;AACA,YAAIkD,KAAJ,EAAW;AACTrE,UAAAA,IAAI,CAACqI,MAAL,GAAchE,KAAd;AACD;AACF,OA1VM;;AA4VP;;;;;;AAMAiE,MAAAA,YAAY,EAAE,sBAAUtF,GAAV,EAAeC,IAAf,EAAqBsF,iBAArB,EAAwC;AACpD,YAAIvF,GAAG,CAACK,QAAJ,CAAa3C,WAAb,OAA+B,MAAnC,EAA2C;AACzC,cAAIV,IAAI,GAAG,KAAKF,KAAL,CAAWwH,aAAX,CAAyBrE,IAAzB,CAAX;AACAjD,UAAAA,IAAI,CAACwI,OAAL,GAAezI,EAAE,CAACuD,MAAH,CAAUQ,YAAV,CAAuB2E,eAAvB,CAAuCzF,GAAvC,EAA4CC,IAA5C,EAAkDsF,iBAAlD,CAAf;AACD;AACF,OAvWM;;AAyWP;;;;;;;;;;;;AAYAE,MAAAA,eAAe,EAAE,yBAAU7E,OAAV,EAAmB8E,EAAnB,EAAuBH,iBAAvB,EAA0CI,UAA1C,EAAsD;AACrE,YAAIH,OAAO,GAAG,EAAd;AACA5E,QAAAA,OAAO,CAAC7C,gBAAR,CAAyB,SAAzB,EAAoCC,OAApC,CAA4C,UAAUC,IAAV,EAAgB;AAC1D,cACE2H,GAAG,GAAG3H,IAAI,CAACmG,WADb;AAAA,cAEE7C,SAAS,GAAGtD,IAAI,CAACE,YAAL,CAAkB,WAAlB,CAFd;AAAA,cAGE0H,SAAS,GAAG,EAAE5H,IAAI,CAACE,YAAL,CAAkB,YAAlB,KAAmC,CAArC,IAA0C,CAHxD;AAAA,cAG2D;AACzD2H,UAAAA,IAAI,GAAG,IAAI,CAJb,CAD0D,CAK1C;;AAEhB,cAAK,CAACF,GAAF,IAAW,CAACrE,SAAhB,EAA4B;AAAC;AAC3BpF,YAAAA,EAAE,CAACqE,GAAH,CAAOC,MAAP,CAAcsF,KAAd,CAAoB,IAApB,EAA0B,8DAA1B,EAA0FnF,OAAO,CAACoF,SAAlG;AACA;AACD;;AACD,kBAAQ/H,IAAI,CAACE,YAAL,CAAkB,MAAlB,CAAR;AACE,iBAAK,SAAL;AACE2H,cAAAA,IAAI,GAAG,CAAP;AACA;;AACF,iBAAK,MAAL;AACEA,cAAAA,IAAI,GAAG,CAAP;AACA;;AACF,iBAAK,OAAL;AACEA,cAAAA,IAAI,GAAG,CAAP;AACA;;AACF,iBAAK,WAAL;AACEA,cAAAA,IAAI,GAAG,IAAI,CAAX;AACA;AAZJ;;AAcA,cAAIG,WAAW,GAAGV,iBAAiB,GAAGA,iBAAiB,CAACK,GAAD,EAAMrE,SAAN,EAAiBuE,IAAjB,EAAuB7H,IAAI,CAACE,YAAL,CAAkB,SAAlB,CAAvB,CAApB,GAA2E,CAAC,IAAD,EAAOmD,SAAP,CAA9G;;AACA,cAAI,CAACqE,UAAD,IAAgBG,IAAI,GAAG,CAAvB,IAA6BG,WAAW,CAAC,CAAD,CAA5C,EAAiD;AAAC;AAChD,iBAAKnJ,KAAL,CAAWoJ,UAAX,CAAsBN,GAAtB,EAA2BF,EAA3B;AACD;;AACD,cAAIF,OAAO,CAACI,GAAD,CAAX,EAAkB;AAChB;AACA,gBAAIJ,OAAO,CAACI,GAAD,CAAP,CAAa,CAAb,MAAoBrE,SAApB,IAAiCiE,OAAO,CAACI,GAAD,CAAP,CAAa,CAAb,MAAoBK,WAAW,CAAC,CAAD,CAAhE,IAAuET,OAAO,CAACI,GAAD,CAAP,CAAa,CAAb,MAAoBC,SAA/F,EAA0G;AACxGC,cAAAA,IAAI,IAAIN,OAAO,CAACI,GAAD,CAAP,CAAa,CAAb,CAAR;AACD,aAFD,MAEO;AACLO,cAAAA,OAAO,CAACJ,KAAR,CAAc,wDAAd,EAAwEP,OAAO,CAACI,GAAD,CAA/E,EAAsF,CAACrE,SAAD,EAAYuE,IAAZ,EAAkBG,WAAW,CAAC,CAAD,CAA7B,EAAkCJ,SAAlC,CAAtF,EAAoI,yCAApI;AACD;AACF;;AACDL,UAAAA,OAAO,CAACI,GAAD,CAAP,GAAe,CAACrE,SAAD,EAAYuE,IAAZ,EAAkBG,WAAW,CAAC,CAAD,CAA7B,EAAkCJ,SAAlC,CAAf;AACD,SAtCD,EAsCG,IAtCH;AAuCA,eAAOL,OAAP;AACD,OA/ZM;AAiaPY,MAAAA,YAAY,EAAE,sBAAUpG,GAAV,EAAeC,IAAf,EAAqBoG,cAArB,EAAqC;AACjD,YAAIrJ,IAAI,GAAG,KAAKF,KAAL,CAAWwH,aAAX,CAAyBrE,IAAzB,CAAX;AACAjD,QAAAA,IAAI,CAACsJ,OAAL,GAAetG,GAAG,CAAC7B,YAAJ,CAAiB,SAAjB,IAA8BoI,QAAQ,CAACvG,GAAG,CAAC7B,YAAJ,CAAiB,SAAjB,CAAD,CAAR,GAAwC,IAAtE,GAA6E,CAA5F;;AACA,YAAIkI,cAAJ,EACA;AACErJ,UAAAA,IAAI,CAACwJ,YAAL,GAAoB,UAASjD,CAAT,EAAW;AAC7B,oBAAOA,CAAP;AACE,mBAAK,MAAL;AACA,mBAAK,OAAL;AACA,mBAAK,MAAL;AACA,mBAAK,MAAL;AACE,uBAAOA,CAAP;;AAEF,mBAAK,OAAL;AACE,uBAAO,MAAP;;AAEF,mBAAK,MAAL;AACA;AACE,uBAAO,MAAP;AAZJ;AAcD,WAfmB,CAejBvD,GAAG,CAAC7B,YAAJ,CAAiB,cAAjB,CAfiB,CAApB;AAgBD;AACF,OAvbM;AAybPsD,MAAAA,YAAY,EAAE,sBAAUzB,GAAV,EAAeC,IAAf,EAAqB;AACjC,YAAIjD,IAAI,GAAG,KAAKF,KAAL,CAAWwH,aAAX,CAAyBrE,IAAzB,CAAX;AACAjD,QAAAA,IAAI,CAACyJ,OAAL,GAAezG,GAAG,CAAC7B,YAAJ,CAAiB,SAAjB,CAAf;AACD,OA5bM;AA8bP;AACAuI,MAAAA,aAAa,EAAE,uBAAU1G,GAAV,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,QAA9B,EAAwC;AACrD,YAAInD,IAAI,GAAG,KAAKF,KAAL,CAAWwH,aAAX,CAAyB,KAAKqC,cAAL,CAAoB3G,GAApB,EAAyBC,IAAzB,CAAzB,CAAX;;AAEA,YAAI,CAACjD,IAAI,CAACwB,QAAV,EAAoB;AAClBxB,UAAAA,IAAI,CAACwB,QAAL,GAAgB,EAAhB;AACD;;AACD,YAAIoI,MAAM,GAAGvI,KAAK,CAAC2D,IAAN,CAAWhC,GAAG,CAACxB,QAAf,EAAyByD,MAAzB,CAAgC,UAAS4E,KAAT,EAAgB;AAC3D,iBAAO,CAAC,QAAD,EAAW,OAAX,EAAoB,SAApB,EAA+BC,OAA/B,CAAuCD,KAAK,CAACxG,QAAN,CAAe3C,WAAf,EAAvC,MAAyE,CAAC,CAAjF;AACD,SAFY,EAEV,IAFU,CAAb;AAGAkJ,QAAAA,MAAM,CAAC5I,OAAP,CAAe,UAAU6I,KAAV,EAAiBE,GAAjB,EAAsB;AACnC,cAAIC,SAAS,GAAGjK,EAAE,CAACuD,MAAH,CAAUQ,YAAV,CAAuBf,KAAvB,CAA6B8G,KAA7B,EAAoC5G,IAAI,GAAG,GAAP,GAAa8G,GAAjD,EAAsD7G,OAAtD,EAA+DC,QAA/D,CAAhB;;AACA,cAAI6G,SAAJ,EAAe;AACb,gBAAI3I,KAAK,CAAC4I,OAAN,CAAcD,SAAd,CAAJ,EAA8B;AAC5B,mBAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,SAAS,CAAC1H,MAA9B,EAAsC4H,CAAC,GAAGC,CAA1C,EAA6CD,CAAC,EAA9C,EAAkD;AAChDlK,gBAAAA,IAAI,CAACwB,QAAL,CAAc4I,IAAd,CAAmBJ,SAAS,CAACE,CAAD,CAAT,CAAajH,IAAhC;AACD;AACF,aAJD,MAIO,IAAI+G,SAAS,CAAC/G,IAAd,EAAoB;AACzBjD,cAAAA,IAAI,CAACwB,QAAL,CAAc4I,IAAd,CAAmBJ,SAAS,CAAC/G,IAA7B;AACD;AACF;AACF,SAXD,EAWG,IAXH;AAYA,eAAOjD,IAAP;AACD,OArdM;;AAudP;;;;;;;AAOA2J,MAAAA,cAAc,EAAE,wBAAU3G,GAAV,EAAeC,IAAf,EAAqB;AACnC,YAAID,GAAG,CAACV,MAAJ,KAAe,CAAnB,EAAsB;AACpBU,UAAAA,GAAG,GAAGA,GAAG,CAAC,CAAD,CAAT;AACD;;AACD,gBAAQA,GAAG,CAACK,QAAJ,CAAa3C,WAAb,EAAR;AACE,eAAK,MAAL;AACE,mBAAOuC,IAAI,GAAG,GAAd;;AACF;AACE,mBAAOA,IAAP;AAJJ;AAMD;AAxeM;AAR+B,GAA1C;AArBAlD,EAAAA,EAAE,CAACuD,MAAH,CAAUQ,YAAV,CAAuBxE,aAAvB,GAAuCA,aAAvC",
  "sourcesContent": [
    "/* WidgetParser.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n//noinspection JSUnusedGlobalSymbols\nqx.Class.define('cv.parser.WidgetParser', {\n  type: \"static\",\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n    __handlers: {},\n    lookupM : [ 0, 2, 4,  6,  6,  6,  6, 12, 12, 12, 12, 12, 12 ],\n    lookupS : [ 0, 3, 6, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12 ],\n    model: cv.data.Model.getInstance(),\n    __templates: {},\n\n    addTemplate: function(name, templateData) {\n      this.__templates[name] = templateData;\n    },\n\n    addHandler: function (tagName, handler) {\n      this.__handlers[tagName.toLowerCase()] = handler;\n    },\n\n    getHandler: function (tagName) {\n      return this.__handlers[tagName.toLowerCase()] || this.__handlers.unknown;\n    },\n\n    /**\n     * Renders templates into the config file, if they are used\n     * @param rootPage\n     */\n    renderTemplates: function (rootPage) {\n      rootPage.querySelectorAll('template').forEach(function (elem) {\n        var templateName = elem.getAttribute('name');\n        var variables = {};\n        Array.prototype.forEach.call(elem.children, function (variable) {\n          variables[variable.getAttribute('name')] = variable.innerHTML;\n        });\n\n        if (this.__templates.hasOwnProperty(templateName)) {\n          var renderedString = qx.bom.Template.render(this.__templates[templateName], variables).replace('\\n', '').trim();\n          var helperNode = elem.ownerDocument.createElement('template');\n          helperNode.innerHTML = renderedString.substring(6, renderedString.length - 7).trim();\n          // replace existing element with the rendered templates child\n          var replacement = helperNode.firstElementChild;\n          var next = elem.nextElementSibling;\n          var parent = elem.parentNode;\n          parent.replaceChild(replacement, elem);\n          while (helperNode.children.length > 0) {\n            // append the rest\n            parent.insertBefore(helperNode.children[0], next);\n          }\n        }\n      }, this);\n    },\n\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} widget data\n     */\n    parse: function (xml, path, flavour, pageType) {\n      var tag = xml.nodeName.toLowerCase();\n      if (tag === 'custom') {\n        // use the child of the custom element\n        xml = xml.children[0];\n        tag = xml.nodeName.toLowerCase();\n      }\n      var parser = this.getHandler(tag);\n      var result = null;\n      if (parser) {\n        result = parser.parse(xml, path, flavour, pageType);\n      } else {\n        qx.log.Logger.debug(this, \"no parse handler registered for type: \"+ tag.toLowerCase());\n      }\n      return result;\n    },\n\n    parseBasicElement: function (element, path, flavour, pageType) {\n      return this.model.setWidgetData( path, {\n        'path': path,\n        '$$type': cv.parser.WidgetParser.getElementType(element),\n        'pageType': pageType\n      });\n    },\n\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param handler {Class} Handler class that parses this element\n     * @param element {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} HTML code\n     */\n    parseElement: function (handler, element, path, flavour, pageType, mappings) {\n      // and fill in widget specific data\n      var data = this.createDefaultWidget(handler, this.getElementType(element), element, path, flavour, pageType);\n      if (mappings) {\n        for (var key in mappings) {\n          if (mappings.hasOwnProperty(key)) {\n            var map = mappings[key];\n            var value = element.getAttribute(key);\n            if (map['default'] !== undefined && (value === undefined || value === null)) {\n              value = map['default'];\n            }\n            if (map.transform) {\n              value = map.transform(value);\n            }\n            data[map.target || key] = value;\n          }\n        }\n      }\n      this.parseStyling(element, path);\n      return data;\n    },\n\n    /**\n     * Get the mappings needed for parsing from the handler\n     *\n     * @param handler {Class} parser handler\n     * @return {Map} parser configuration: describes how Attributes are mapped to properties\n     */\n    __getAttributeToPropertyMappings: function(handler) {\n      return handler && handler.getAttributeToPropertyMappings ? handler.getAttributeToPropertyMappings() : {};\n    },\n\n    getElementType: function(element) {\n      var type = element.nodeName.toLowerCase();\n      if (type === \"img\") {\n        // workaround for unittests (<image> gets replaced by <img>\n        type = \"image\";\n      }\n      return type;\n    },\n\n    getDefaultClasses: function(type) {\n      return 'widget clearfix ' + type.toLowerCase();\n    },\n\n    /**\n     * Create a default widget to be filled by the creator afterwards.\n     * Note: the receiver of the returned string must add an </div> closing element!\n     *\n     * @param handler {cv.parser.widgets} the parser that can parse this element\n     * @param widgetType {String} of the widget type\n     * @param element   {Object} the XML element\n     * @param path       {String} of the path ID\n     * @param flavour   {String} Flavour\n     * @param pageType  {String} one of text, 2d and 3d\n     * @return {Map} parsed widget data\n     */\n    createDefaultWidget: function(handler, widgetType, element, path, flavour, pageType) {\n      if (handler.createDefaultWidget) {\n        return handler.createDefaultWidget(widgetType, element, path, flavour, pageType);\n      }\n\n      var layout = this.parseLayout( Array.from(element.children).filter(function(m){return m.matches('layout');})[0] );\n      var style = Object.keys(layout).length === 0 ? '' : 'style=\"' + this.extractLayout( layout, pageType ) + '\"';\n      var classes = handler.getDefaultClasses ? handler.getDefaultClasses(widgetType) : this.getDefaultClasses(widgetType);\n      // the group widgets align attribute is just targeting the group header and is handled by the widget itself, so we skip it here\n      if ( element.getAttribute('align') && widgetType !== \"group\" ) {\n        classes+=\" \"+element.getAttribute('align') ;\n      }\n      classes += ' ' + this.setWidgetLayout(element, path);\n      if( element.getAttribute('flavour') ) {\n        flavour = element.getAttribute('flavour');\n      }// sub design choice\n      if( flavour ) {\n        classes += ' flavour_' + flavour;\n      }\n      if (element.getAttribute('class')) {\n        classes += ' custom_' + element.getAttribute('class');\n      }\n      var label = (widgetType==='text') ? this.parseLabel( element.querySelector(\"label\"), flavour, '' ) : this.parseLabel( element.querySelector(\"label\"), flavour );\n\n      var bindClickToWidget = cv.TemplateEngine.getInstance().bindClickToWidget;\n      if (element.getAttribute(\"bind_click_to_widget\")) {\n        bindClickToWidget = element.getAttribute(\"bind_click_to_widget\") === \"true\";\n      }\n\n      var data = {\n        'path'    : path,\n        '$$type'  : widgetType.toLowerCase(),\n        'pageType': pageType\n      };\n      data.bindClickToWidget = bindClickToWidget;\n      ['mapping', 'align', 'align'].forEach(function(prop) {\n        data[prop] = element.getAttribute(prop) || null;\n      }, this);\n\n      data.layout = layout || null;\n      data.label = label || '';\n      data.classes = classes || '';\n      data.style = style || '';\n      data.responsive = !!Object.keys(layout).find(function (prop) {\n        return prop.endsWith('-m') || prop.endsWith('-s');\n      });\n\n      return this.model.setWidgetData( path, data);\n    },\n\n    /**\n     * Parse config file layout element and convert it to an object\n     *\n     * @param layout {Element} XML config element &lt;layout&gt;\n     * @param defaultValues {Map} default layout values\n     * @return {Map}\n     */\n    parseLayout: function( layout, defaultValues )\n    {\n      var ret_val = {};\n\n      if( !layout ) {\n        return ret_val;\n      }\n\n      if( undefined === defaultValues ) {\n        defaultValues = {};\n      }\n      ['x', 'y', 'width', 'height', 'scale'].forEach(function (prop) {\n        this.__extractLayoutAttribute(ret_val, prop, layout, defaultValues);\n        this.__extractLayoutAttribute(ret_val, prop + '-m', layout, defaultValues);\n        this.__extractLayoutAttribute(ret_val, prop + '-s', layout, defaultValues);\n      }, this);\n      return ret_val;\n    },\n\n    __extractLayoutAttribute: function (ret_val, property, layout, defaultValues) {\n      if( layout.getAttribute(property) ) {\n        ret_val[property] = layout.getAttribute(property);\n      }\n      else if( defaultValues[property]     ) {\n        ret_val[property] = defaultValues[property];\n      }\n    },\n\n    extractLayout: function( layout, pageType )\n    {\n\n      var ret_val = (pageType === '2d') ? 'position:absolute;' : '';\n      if( layout.x      ) {\n        ret_val += 'left:'   + layout.x      + ';';\n      }\n      if( layout.y      ) {\n        ret_val += 'top:'    + layout.y      + ';';\n      }\n      if( layout.width  ) {\n        ret_val += 'width:'  + layout.width  + ';';\n      }\n      if( layout.height ) {\n        ret_val += 'height:' + layout.height + ';';\n      }\n\n      return ret_val;\n    },\n\n    extractLayout3d: function( layout )\n    {\n      var ret_val = {};\n      if( layout.getAttribute('x') ) {\n        ret_val.x     = layout.getAttribute('x');\n      }\n      if( layout.getAttribute('y') ) {\n        ret_val.y     = layout.getAttribute('y');\n      }\n      if( layout.getAttribute('z') ) {\n        ret_val.z     = layout.getAttribute('z');\n      }\n      if( layout.getAttribute('floor') ) {\n        ret_val.floor = layout.getAttribute('floor');\n      }\n      if( layout.getAttribute('floorFilter') ) {\n        ret_val.floorFilter = layout.getAttribute('floorFilter');\n      }\n      if( layout.getAttribute('roomFilter')  ) {\n        ret_val.roomFilter  = layout.getAttribute('roomFilter' );\n      }\n      return ret_val;\n    },\n\n    parseLabel: function(label, flavour, labelClass, style )\n    {\n      if( !label ) {\n        return '';\n      }\n      var ret_val = '<div class=\"' + (labelClass !== undefined ? labelClass : 'label') + '\"' +\n        ( style ? (' style=\"' + style + '\"') : '' ) + '>';\n\n      Array.prototype.forEach.call(label.childNodes, function(elem) {\n        if( elem.nodeName.toLowerCase() ==='icon' ) {\n          ret_val += cv.IconHandler.getInstance().getIconText(\n            elem.getAttribute('name'),\n            elem.getAttribute('type'),\n            elem.getAttribute('flavour') || flavour,\n            elem.getAttribute('color'),\n            elem.getAttribute('styling') );\n        } else {\n          ret_val += elem.textContent;\n        }\n      });\n      return ret_val + '</div>';\n    },\n\n    /**\n     * this function implements all widget layouts that are identical (JNK)\n     * implemented: rowspan, colspan\n     *\n     * @param element {Element} XML-Element from the config file for this widget\n     * @param path {String}\n     * @return {String} rowspan class or empty string\n     */\n    setWidgetLayout: function( element, path ) {\n      var\n        elementData = this.model.getWidgetData( path ),\n        layout      = Array.from(element.children).filter(function(m){return m.matches('layout');})[0],\n        ret_val = '',\n        rowspan = null;\n\n      if (layout) {\n        elementData.colspan = qx.xml.Element.getAttributeNS(layout, '', 'colspan');\n        elementData.colspanM = qx.xml.Element.getAttributeNS(layout, '', 'colspan-m');\n        elementData.colspanS = qx.xml.Element.getAttributeNS(layout, '', 'colspan-s');\n        rowspan = qx.xml.Element.getAttributeNS(layout, '', 'rowspan');\n      }\n      elementData.colspan = parseFloat(elementData.colspan || document.querySelector('head').dataset['colspanDefault'] || 6);\n      elementData.colspanM = parseFloat(elementData.colspanM || cv.parser.WidgetParser.lookupM[Math.floor(elementData.colspan)] || elementData.colspan);\n      elementData.colspanS = parseFloat(elementData.colspanS || cv.parser.WidgetParser.lookupS[Math.floor(elementData.colspan)] || elementData.colspan);\n\n      if (rowspan) {\n        elementData.rowspanClass = cv.ui.layout.Manager.rowspanClass(parseFloat(rowspan || 1));\n        ret_val = 'innerrowspan';\n      }\n      return ret_val;\n    },\n\n    /**\n     * Parse the format setting\n     * @param xml {Element} XML-Element from config\n     * @param path {String} path to the widget\n     */\n    parseFormat: function (xml, path) {\n      var data = this.model.getWidgetData(path);\n      var value = xml.getAttribute('format');\n      if (value) {\n        data.format = value;\n      }\n    },\n\n    /**\n     * Parses the address element\n     * @param xml {Element} address XML-Element from config\n     * @param path {String} path to the widget\n     * @param makeAddressListFn {Function?} callback for parsing address variants\n     */\n    parseAddress: function (xml, path, makeAddressListFn) {\n      if (xml.nodeName.toLowerCase() !== \"page\") {\n        var data = this.model.getWidgetData(path);\n        data.address = cv.parser.WidgetParser.makeAddressList(xml, path, makeAddressListFn);\n      }\n    },\n\n    /**\n     * this function extracts all addresses with attributes (JNK)\n     *                       elements. The first is a boolean that determins if\n     *                       the visu should listen for that address. The second\n     *                       is added as it is to the returned object.\n     *\n     * @param element {Element} address XML-Element from the config file\n     * @param id {String} id / path to the widget\n     * @param makeAddressListFn {Function?} callback for parsing address variants\n     * @param skipAdding {Boolean?} do not add address to model if true\n     * @return {Object} address\n     */\n    makeAddressList: function (element, id, makeAddressListFn, skipAdding) {\n      var address = {};\n      element.querySelectorAll('address').forEach(function (elem) {\n        var\n          src = elem.textContent,\n          transform = elem.getAttribute('transform'),\n          formatPos = +(elem.getAttribute('format-pos') || 1) | 0, // force integer\n          mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n\n        if ((!src) || (!transform)) {// fix broken address-entries in config\n          qx.log.Logger.error(this, \"Either address or transform is missing in address element %1\", element.outerHTML);\n          return;\n        }\n        switch (elem.getAttribute('mode')) {\n          case 'disable':\n            mode = 0;\n            break;\n          case 'read':\n            mode = 1;\n            break;\n          case 'write':\n            mode = 2;\n            break;\n          case 'readwrite':\n            mode = 1 | 2;\n            break;\n        }\n        var variantInfo = makeAddressListFn ? makeAddressListFn(src, transform, mode, elem.getAttribute('variant')) : [true, undefined];\n        if (!skipAdding && (mode & 1) && variantInfo[0]) {// add only addresses when reading from them\n          this.model.addAddress(src, id);\n        }\n        if (address[src]) {\n          // we already have an entry for this address, merge the modes if the other attribute values are equal\n          if (address[src][0] === transform && address[src][2] === variantInfo[1] && address[src][3] === formatPos) {\n            mode |= address[src][1];\n          } else {\n            console.error('multiple address entries with different configuration:', address[src], [transform, mode, variantInfo[1], formatPos], 'they are only allowed to differ in mode');\n          }\n        }\n        address[src] = [transform, mode, variantInfo[1], formatPos];\n      }, this);\n      return address;\n    },\n\n    parseRefresh: function (xml, path, doCacheControl) {\n      var data = this.model.getWidgetData(path);\n      data.refresh = xml.getAttribute('refresh') ? parseInt(xml.getAttribute('refresh')) * 1000 : 0;\n      if( doCacheControl )\n      {\n        data.cachecontrol = function(x){\n          switch(x) {\n            case 'full':\n            case 'force':\n            case 'weak':\n            case 'none':\n              return x;\n              \n            case 'false':\n              return 'none';\n              \n            case 'true':\n            default:\n              return 'full';\n          }\n        }( xml.getAttribute('cachecontrol') );\n      }\n    },\n\n    parseStyling: function (xml, path) {\n      var data = this.model.getWidgetData(path);\n      data.styling = xml.getAttribute('styling');\n    },\n\n    // this might have been called from the cv.parser.WidgetParser with the including class as context\n    parseChildren: function (xml, path, flavour, pageType) {\n      var data = this.model.getWidgetData(this.getStoragePath(xml, path));\n\n      if (!data.children) {\n        data.children = [];\n      }\n      var childs = Array.from(xml.children).filter(function(child) {\n        return ['layout', 'label', 'address'].indexOf(child.nodeName.toLowerCase()) === -1;\n      }, this);\n      childs.forEach(function (child, idx) {\n        var childData = cv.parser.WidgetParser.parse(child, path + '_' + idx, flavour, pageType);\n        if (childData) {\n          if (Array.isArray(childData)) {\n            for (var i = 0, l = childData.length; i < l; i++) {\n              data.children.push(childData[i].path);\n            }\n          } else if (childData.path) {\n            data.children.push(childData.path);\n          }\n        }\n      }, this);\n      return data;\n    },\n\n    /**\n     * Returns the path where the widget data is stored, usually this is the same path, but there are\n     * exceptions for pages which are handled here\n     *\n     * @param xml {Element} widgets XML config element\n     * @param path {String} internal widget path e.g. id_0_2\n     */\n    getStoragePath: function (xml, path) {\n      if (xml.length === 1) {\n        xml = xml[0];\n      }\n      switch (xml.nodeName.toLowerCase()) {\n        case \"page\":\n          return path + \"_\";\n        default:\n          return path;\n      }\n    }\n  }\n});\n"
  ]
}