{"attributes": {"fullName": "qx.bom.webfonts.Validator", "packageName": "qx.bom.webfonts", "type": "class", "name": "Validator", "superClass": "qx.core.Object"}, "type": "class", "children": [{"attributes": {"text": "<p>Checks whether a given font is available on the document and fires events\naccordingly.</p>\n\n<p>This class does not need to be disposed, unless you want to abort the validation\nearly</p>"}, "type": "desc"}, {"attributes": {}, "type": "constructor", "children": [{"attributes": {"line": 39, "isCtor": true, "overriddenFrom": "qx.core.Object", "name": "ctor"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "fontFamily"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the font to be verified</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"optional": true, "name": "comparisonString"}, "type": "param", "children": [{"attributes": {"text": "<p>String to be used to detect whether a font was loaded or not whether the font has loaded properly</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": ""}, "type": "desc"}]}]}, {"attributes": {}, "type": "constants", "children": [{"attributes": {"type": "String", "name": "COMPARISON_STRING", "value": "WEei"}, "type": "constant", "children": [{"attributes": {"text": "<p>The string to be used in the size comparison elements. This is the default string\nwhich is used for the {@link #COMPARISON_FONTS} and the font to be validated. It\ncan be overridden for the font to be validated using the {@link #comparisonString}\nproperty.</p>"}, "type": "desc"}]}, {"attributes": {"name": "HELPER_CSS"}, "type": "constant", "children": [{"attributes": {"text": "<p>Map of common <span class=\"caps\">CSS</span> attributes to be used for all  size comparison elements</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "type": "Null", "name": "__defaultSizes", "value": "null"}, "type": "constant"}, {"attributes": {"name": "COMPARISON_FONTS"}, "type": "constant", "children": [{"attributes": {"text": "<p>Sets of serif and sans-serif fonts to be used for size comparisons.\nAt least one of these fonts should be present on any system.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "type": "Null", "name": "__defaultHelpers", "value": "null"}, "type": "constant"}]}, {"attributes": {}, "type": "methods-static", "children": [{"attributes": {"line": 106, "isStatic": true, "name": "removeDefaultHelperElements"}, "type": "method", "children": [{"attributes": {"text": "<p>Removes the two common helper elements used for all size comparisons from\nthe <span class=\"caps\">DOM</span></p>"}, "type": "desc"}]}]}, {"attributes": {}, "type": "methods", "children": [{"attributes": {"access": "private", "line": 343, "name": "__init"}, "type": "method", "children": [{"attributes": {"text": "<p>Creates the default helper elements and gets their widths</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 364, "name": "__onTimerInterval"}, "type": "method", "children": [{"attributes": {"text": "<p>Triggers helper element size comparison and fires a ({@link #changeStatus})\nevent with the result.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 325, "name": "_applyFontFamily"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>new value of the property</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}, {"attributes": {"name": "old"}, "type": "param", "children": [{"attributes": {"text": "<p>previous value of the property (null if it was not yet set).</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {}, "type": "apply", "children": [{"attributes": {"applies": "qx.bom.webfonts.Validator#fontFamily"}, "type": "entry"}]}, {"attributes": {"text": "<p>Applies changes of the property value of the property <code>fontFamily</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #fontFamily}.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 304, "name": "_getHelperElement"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "fontFamily"}, "type": "param", "children": [{"attributes": {"text": "<p>font-family string</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"optional": true, "name": "comparisonString"}, "type": "param", "children": [{"attributes": {"text": "<p>String to be used to detect whether a font was loaded or not</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Creates a span element with the comparison text (either {@link #COMPARISON_STRING} or\n{@link #comparisonString}) and styled with the default <span class=\"caps\">CSS</span> ({@link #HELPER_CSS}) plus\nthe given font-family value and appends it to the <span class=\"caps\">DOM</span></p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>the created <span class=\"caps\">DOM</span> element</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Element"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 284, "name": "_getRequestedHelpers"}, "type": "method", "children": [{"attributes": {"text": "<p>Creates the two helper elements styled with the font to be checked</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>A map with the keys</p>\n\n<pre>sans</pre>\n\n<p>and</p>\n\n<pre>serif</pre>\n\n<p>and the created span elements as values</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Map"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 249, "name": "_isFontValid"}, "type": "method", "children": [{"attributes": {"text": "<p>Checks if the font is available by comparing the widths of the elements\nusing the generic fonts to the widths of the elements using the font to\nbe validated</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Whether or not the font caused the elements to differ in size</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 229, "name": "_reset"}, "type": "method", "children": [{"attributes": {"text": "<p>Removes the helper elements from the <span class=\"caps\">DOM</span></p>"}, "type": "desc"}]}, {"attributes": {"name": "getComparisonString", "fromProperty": "comparisonString"}, "type": "method", "children": [{"attributes": {"text": "<p>Returns the (computed) value of the property <code>comparisonString</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #comparisonString}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>(Computed) value of <code>comparisonString</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"name": "getFontFamily", "fromProperty": "fontFamily"}, "type": "method", "children": [{"attributes": {"text": "<p>Returns the (computed) value of the property <code>fontFamily</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #fontFamily}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>(Computed) value of <code>fontFamily</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"name": "getTimeout", "fromProperty": "timeout"}, "type": "method", "children": [{"attributes": {"text": "<p>Returns the (computed) value of the property <code>timeout</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #timeout}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>(Computed) value of <code>timeout</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "name": "initComparisonString", "fromProperty": "comparisonString"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>Initial value for property <code>comparisonString</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Calls the apply method and dispatches the change event of the property <code>comparisonString</code>\nwith the default value defined by the class developer. This function can\nonly be called from the constructor of a class.</p>\n\n<p>For further details take a look at the property definition: {@link #comparisonString}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>the default value</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "name": "initFontFamily", "fromProperty": "fontFamily"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>Initial value for property <code>fontFamily</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Calls the apply method and dispatches the change event of the property <code>fontFamily</code>\nwith the default value defined by the class developer. This function can\nonly be called from the constructor of a class.</p>\n\n<p>For further details take a look at the property definition: {@link #fontFamily}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>the default value</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "name": "initTimeout", "fromProperty": "timeout"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>Initial value for property <code>timeout</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Calls the apply method and dispatches the change event of the property <code>timeout</code>\nwith the default value defined by the class developer. This function can\nonly be called from the constructor of a class.</p>\n\n<p>For further details take a look at the property definition: {@link #timeout}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>the default value</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"name": "resetComparisonString", "fromProperty": "comparisonString"}, "type": "method", "children": [{"attributes": {"text": "<p>Resets the user value of the property <code>comparisonString</code>.</p>\n\n<p>The computed value falls back to the next available value e.g. appearance, init or\ninheritance value depeneding on the property configuration and value availability.</p>\n\n<p>For further details take a look at the property definition: {@link #comparisonString}.</p>"}, "type": "desc"}]}, {"attributes": {"name": "resetFontFamily", "fromProperty": "fontFamily"}, "type": "method", "children": [{"attributes": {"text": "<p>Resets the user value of the property <code>fontFamily</code>.</p>\n\n<p>The computed value falls back to the next available value e.g. appearance, init or\ninheritance value depeneding on the property configuration and value availability.</p>\n\n<p>For further details take a look at the property definition: {@link #fontFamily}.</p>"}, "type": "desc"}]}, {"attributes": {"name": "resetTimeout", "fromProperty": "timeout"}, "type": "method", "children": [{"attributes": {"text": "<p>Resets the user value of the property <code>timeout</code>.</p>\n\n<p>The computed value falls back to the next available value e.g. appearance, init or\ninheritance value depeneding on the property configuration and value availability.</p>\n\n<p>For further details take a look at the property definition: {@link #timeout}.</p>"}, "type": "desc"}]}, {"attributes": {"name": "setComparisonString", "fromProperty": "comparisonString"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>New value for property <code>comparisonString</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Sets the user value of the property <code>comparisonString</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #comparisonString}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The unmodified incoming value.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"name": "setFontFamily", "fromProperty": "fontFamily"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>New value for property <code>fontFamily</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Sets the user value of the property <code>fontFamily</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #fontFamily}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The unmodified incoming value.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"name": "setTimeout", "fromProperty": "timeout"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>New value for property <code>timeout</code>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Sets the user value of the property <code>timeout</code>.</p>\n\n<p>For further details take a look at the property definition: {@link #timeout}.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The unmodified incoming value.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"line": 201, "name": "validate"}, "type": "method", "children": [{"attributes": {"text": "<p>Validates the font</p>"}, "type": "desc"}]}]}, {"attributes": {}, "type": "properties", "children": [{"attributes": {"allowNull": "true", "defaultValue": "null", "name": "comparisonString", "propertyType": "new"}, "type": "property", "children": [{"attributes": {"text": "<p>Comparison string used to check whether the font has loaded or not.</p>"}, "type": "desc"}]}, {"attributes": {"allowNull": "true", "defaultValue": "null", "apply": "_applyFontFamily", "name": "fontFamily", "propertyType": "new"}, "type": "property", "children": [{"attributes": {"text": "<p>The font-family this validator should check</p>"}, "type": "desc"}]}, {"attributes": {"check": "Integer", "defaultValue": "5000", "name": "timeout", "propertyType": "new"}, "type": "property", "children": [{"attributes": {"text": "<p>Time in milliseconds from the beginning of the check until it is assumed\nthat a font is not available</p>"}, "type": "desc"}]}]}, {"attributes": {}, "type": "events", "children": [{"attributes": {"name": "changeStatus"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired when the status of a web font has been determined. The event data\nis a map with the keys &#8220;family&#8221; (the font-family name) and &#8220;valid&#8221;\n(Boolean).</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.event.type.Data"}, "type": "entry"}]}]}]}]}