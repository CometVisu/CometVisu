{"attributes": {"group": "IO", "name": "Xhr", "packageName": "qx.bom.request", "superClass": "Object", "fullName": "qx.bom.request.Xhr", "type": "bootstrap", "interfaces": "qx.core.IDisposable"}, "type": "class", "children": [{"attributes": {"text": "<p>A wrapper of the XMLHttpRequest host object (or equivalent). The interface is\nsimilar to <a href=\"http://www.w3.org/TR/XMLHttpRequest/\">XmlHttpRequest</a>.</p>\n\n<p>Hides browser inconsistencies and works around bugs found in popular\nimplementations.</p>\n\n<div class=\"desktop\">\nExample:\n\n<pre class=\"javascript\">\n var req = new qx.bom.request.Xhr();\n req.onload = function() {\n   // Handle data received\n   req.responseText;\n }\n\n req.open(\"GET\", url);\n req.send();\n</pre>\n\n<p>Example for binary data:</p>\n\n<pre class=\"javascript\">\n var req = new qx.bom.request.Xhr();\n req.onload = function() {\n   // Handle data received\n   var blob = req.response;\n   img.src = URL.createObjectURL(blob);\n }\n\n req.open(\"GET\", url);\n req.responseType = \"blob\";\n req.send();\n</pre>\n\n</div>"}, "type": "desc"}, {"attributes": {}, "type": "constructor", "children": [{"attributes": {"line": 84, "isCtor": true, "name": "ctor"}, "type": "method"}]}, {"attributes": {}, "type": "constants", "children": [{"attributes": {"type": "Number", "name": "HEADERS_RECEIVED", "value": "2"}, "type": "constant"}, {"attributes": {"type": "Number", "name": "UNSENT", "value": "0"}, "type": "constant"}, {"attributes": {"type": "Number", "name": "LOADING", "value": "3"}, "type": "constant"}, {"attributes": {"type": "Number", "name": "DONE", "value": "4"}, "type": "constant"}, {"attributes": {"type": "Number", "name": "OPENED", "value": "1"}, "type": "constant"}]}, {"attributes": {}, "type": "events", "children": [{"attributes": {"name": "abort"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired when the request is aborted.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}, {"attributes": {"name": "error"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on error.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}, {"attributes": {"name": "load"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on successful retrieval.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}, {"attributes": {"name": "loadend"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired at loadend.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}, {"attributes": {"name": "progress"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on progress.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}, {"attributes": {"name": "readystatechange"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired at ready state changes.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}, {"attributes": {"name": "timeout"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on timeouts.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}]}, {"attributes": {}, "type": "methods", "children": [{"attributes": {"access": "private", "line": 1176, "name": "__checkDisposed"}, "type": "method", "children": [{"attributes": {"text": "<p>Throw when already disposed.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 857, "name": "__initNativeXhr"}, "type": "method", "children": [{"attributes": {"text": "<p>Init native <span class=\"caps\">XHR</span>.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 1053, "name": "__isNetworkError"}, "type": "method", "children": [{"attributes": {"text": "<p>Check for network error.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Whether a network error occurred.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 1131, "name": "__normalizeResponseXML"}, "type": "method", "children": [{"attributes": {"text": "<p>Normalize responseXML property across browsers.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 1095, "name": "__normalizeStatus"}, "type": "method", "children": [{"attributes": {"text": "<p>Normalize status property across browsers.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 893, "name": "__onNativeAbort"}, "type": "method", "children": [{"attributes": {"text": "<p>Track native abort.</p>\n\n<p>In case the end user cancels the request by other\nmeans than calling abort().</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 905, "name": "__onNativeProgress"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "e"}, "type": "param", "children": [{"attributes": {"text": "<p>The native progress event.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Event"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Track native progress event.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 918, "name": "__onNativeReadyStateChange"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle native onreadystatechange.</p>\n\n<p>Calls user-defined function onreadystatechange on each\nstate change and syncs the <span class=\"caps\">XHR</span> status properties.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 1074, "name": "__onTimeout"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle faked timeout.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 1151, "name": "__onUnload"}, "type": "method", "children": [{"attributes": {"text": "<p>Handler for native unload event.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 999, "name": "__readyStateChange"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle readystatechange. Called internally when readyState is changed.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 1017, "name": "__readyStateChangeDone"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle readystatechange. Called internally by\n{@link #__readyStateChange} when readyState is <span class=\"caps\">DONE</span>.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 1165, "name": "__supportsManyRequests"}, "type": "method", "children": [{"attributes": {"text": "<p>Helper method to determine whether browser supports reusing the\nsame native <span class=\"caps\">XHR</span> to send more requests.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<code>true</code> if request object reuse is supported"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 734, "name": "_createNativeXhr"}, "type": "method", "children": [{"attributes": {"text": "<p>Create XMLHttpRequest (or equivalent).</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>XMLHttpRequest or equivalent.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 513, "name": "_emit"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "event"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the event.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Helper to emit events and call the callback methods.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 753, "name": "_getProtocol"}, "type": "method", "children": [{"attributes": {"text": "<p>Get protocol of requested <span class=\"caps\">URL</span>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The used protocol.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"line": 496, "name": "abort"}, "type": "method", "children": [{"attributes": {"text": "<p>Abort request &#8211; i.e. cancels any network activity.</p>\n\n<p>Note:\n On Windows 7 every browser strangely skips the loading phase\n when this method is called (because readyState never gets 3).</p>\n\n<p>So keep this in mind if you rely on the phases which are\n passed through. They will be &#8220;opened&#8221;, &#8220;sent&#8221;, &#8220;abort&#8221;\n instead of normally &#8220;opened&#8221;, &#8220;sent&#8221;, &#8220;loading&#8221;, &#8220;abort&#8221;.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}]}, {"attributes": {"line": 676, "name": "dispose"}, "type": "method", "children": [{"attributes": {"text": "<p>Dispose object and wrapped native <span class=\"caps\">XHR</span>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<code>true</code> if the object was successfully disposed"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"line": 616, "name": "getAllResponseHeaders"}, "type": "method", "children": [{"attributes": {"text": "<p>Get all response headers from response.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>All response headers.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"line": 662, "name": "getRequest"}, "type": "method", "children": [{"attributes": {"text": "<p>Get wrapped native XMLHttpRequest (or equivalent).</p>\n\n<p>Can be XMLHttpRequest or ActiveX.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>XMLHttpRequest or equivalent.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"line": 599, "name": "getResponseHeader"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "header"}, "type": "param", "children": [{"attributes": {"text": "<p>Key of the header to get the value from.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Get a single response header from response.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Response header.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"line": 718, "name": "isDisposed"}, "type": "method", "children": [{"attributes": {"text": "<p>Check if the request has already beed disposed.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<code>true</code>, if the request has been disposed."}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"line": 585, "name": "on"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "name"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the event to listen to.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "listener"}, "type": "param", "children": [{"attributes": {"text": "<p>The function to execute when the event is fired</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Function"}, "type": "entry"}]}]}, {"attributes": {"optional": true, "name": "ctx"}, "type": "param", "children": [{"attributes": {"text": "<p>The context of the listener.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Add an event listener for the given event name.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}]}, {"attributes": {"line": 559, "name": "onabort"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;abort&#8221; that is fired when request\nis aborted.</p>\n\n<p>Replace with custom method to listen to the &#8220;abort&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 551, "name": "onerror"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;error&#8221; that is fired on a network error.</p>\n\n<p>Replace with custom method to listen to the &#8220;error&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 534, "name": "onload"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;load&#8221; that is fired on successful retrieval.</p>\n\n<p>Note: This handler is called even when the <span class=\"caps\">HTTP</span> status indicates an error.</p>\n\n<p>Replace with custom method to listen to the &#8220;load&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 544, "name": "onloadend"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;loadend&#8221; that is fired on retrieval.</p>\n\n<p>Note: This handler is called even when a network error (or similar)\noccurred.</p>\n\n<p>Replace with custom method to listen to the &#8220;loadend&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 574, "name": "onprogress"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;progress&#8221;.</p>\n\n<p>Replace with custom method to listen to the &#8220;progress&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 525, "name": "onreadystatechange"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event that fires at every state change.</p>\n\n<p>Replace with custom method to get informed about the communication progress.</p>"}, "type": "desc"}]}, {"attributes": {"line": 567, "name": "ontimeout"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;timeout&#8221; that is fired when timeout\ninterval has passed.</p>\n\n<p>Replace with custom method to listen to the &#8220;timeout&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 223, "name": "open"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"defaultValue": "\"GET\"", "optional": true, "name": "method"}, "type": "param", "children": [{"attributes": {"text": "<p>The <span class=\"caps\">HTTP</span> method to use.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "url"}, "type": "param", "children": [{"attributes": {"text": "<p>The <span class=\"caps\">URL</span> to which to send the request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"defaultValue": "true", "optional": true, "name": "async"}, "type": "param", "children": [{"attributes": {"text": "<p>Whether or not to perform the operation asynchronously.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}, {"attributes": {"defaultValue": "null", "optional": true, "name": "user"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional user name to use for authentication purposes.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"defaultValue": "null", "optional": true, "name": "password"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional password to use for authentication purposes.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Initializes (prepares) request.</p>"}, "type": "desc"}]}, {"attributes": {"line": 643, "name": "overrideMimeType"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "mimeType"}, "type": "param", "children": [{"attributes": {"text": "<p>The mimeType for overriding.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Overrides the <span class=\"caps\">MIME</span> type returned by the server\nand must be called before <code>send()</code>.</p>\n\n<p>Note:</p>\n\n<ul>\n<li>IE doesn&#8217;t support this method so in this case an Error is thrown.</li>\n<li>after calling this method <code>getResponseHeader(&#8220;Content-Type&#8221;)</code><br />\n  may return the original (Firefox 23, IE 10, Safari 6) or<br />\n  the overridden content type (Chrome 28+, Opera 15+).</li>\n</ul>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}]}, {"attributes": {"line": 389, "name": "send"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"defaultValue": "null", "optional": true, "name": "data"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional data to send.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}, {"attributes": {"type": "Document"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Sends request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}]}, {"attributes": {"line": 369, "name": "setRequestHeader"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "key"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the header whose value is to be set.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>The value to set as the body of the header.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Sets an <span class=\"caps\">HTTP</span> request header to be used by the request.</p>\n\n<p>Note: The request must be initialized before using this method.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Xhr"}, "type": "entry"}]}]}]}]}]}