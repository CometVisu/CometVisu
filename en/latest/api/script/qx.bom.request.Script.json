{"attributes": {"group": "IO", "name": "Script", "interfaces": "qx.core.IDisposable", "childClasses": "qx.bom.request.Jsonp", "fullName": "qx.bom.request.Script", "type": "bootstrap", "packageName": "qx.bom.request"}, "type": "class", "children": [{"attributes": {"text": "<p>Script loader with interface similar to\n<a href=\"http://www.w3.org/TR/XMLHttpRequest/\">XmlHttpRequest</a>.</p>\n\n<p>The script loader can be used to load scripts from arbitrary sources.\n<span class=\"desktop\">\nFor <span class=\"caps\">JSONP</span> requests, consider the {@link qx.bom.request.Jsonp} transport\nthat derives from the script loader.\n</span></p>\n\n<div class=\"desktop\">\nExample:\n\n<pre class=\"javascript\">\n var req = new qx.bom.request.Script();\n req.onload = function() {\n   // Script is loaded and parsed and\n   // globals set are available\n }\n\n req.open(\"GET\", url);\n req.send();\n</pre>\n\n</div>"}, "type": "desc"}, {"attributes": {}, "type": "constructor", "children": [{"attributes": {"line": 61, "isCtor": true, "name": "ctor"}, "type": "method"}]}, {"attributes": {}, "type": "events", "children": [{"attributes": {"name": "abort"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired when the request is aborted.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}, {"attributes": {"name": "error"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on error.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}, {"attributes": {"name": "load"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on successful retrieval.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}, {"attributes": {"name": "loadend"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired at loadend.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}, {"attributes": {"name": "readystatechange"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired at ready state changes.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}, {"attributes": {"name": "timeout"}, "type": "event", "children": [{"attributes": {"text": "<p>Fired on timeouts.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}]}, {"attributes": {}, "type": "methods", "children": [{"attributes": {"access": "private", "line": 661, "name": "__createScriptElement"}, "type": "method", "children": [{"attributes": {"text": "<p>Create and configure script element.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Configured script element.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Element"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 682, "name": "__disposeScriptElement"}, "type": "method", "children": [{"attributes": {"text": "<p>Remove script element from <span class=\"caps\">DOM</span>.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 697, "name": "__environmentGet"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "key"}, "type": "param", "children": [{"attributes": {"text": "<p>Environment key.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Proxy Environment.get to guard against env not being present yet.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Value of the queried environment key</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 635, "name": "__failure"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle failure.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 601, "name": "__initXhrProperties"}, "type": "method", "children": [{"attributes": {"text": "<p>Initialize properties.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 647, "name": "__supportsErrorHandler"}, "type": "method", "children": [{"attributes": {"text": "<p>Looks up whether browser supports error handler.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Whether browser supports error handler.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 277, "name": "_emit"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "event"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the event.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Helper to emit events and call the callback methods.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 452, "name": "_getScriptElement"}, "type": "method", "children": [{"attributes": {"text": "<p>Get script element used for request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Script element.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Element"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 443, "name": "_getUrl"}, "type": "method", "children": [{"attributes": {"text": "<p>Get <span class=\"caps\">URL</span> of request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p><span class=\"caps\">URL</span> of request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "line": 535, "name": "_onNativeError"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle native error.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 476, "name": "_onNativeLoad"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle native load.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 459, "name": "_onTimeout"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle timeout.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 612, "name": "_readyStateChange"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "readyState"}, "type": "param", "children": [{"attributes": {"text": "<p>The desired readyState</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Number"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Change readyState.</p>"}, "type": "desc"}]}, {"attributes": {"access": "protected", "line": 620, "name": "_success"}, "type": "method", "children": [{"attributes": {"text": "<p>Handle success.</p>"}, "type": "desc"}]}, {"attributes": {"line": 261, "name": "abort"}, "type": "method", "children": [{"attributes": {"text": "<p>Aborts request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}]}, {"attributes": {"line": 403, "name": "dispose"}, "type": "method", "children": [{"attributes": {"text": "<p>Dispose object.</p>"}, "type": "desc"}]}, {"attributes": {"line": 374, "name": "getAllResponseHeaders"}, "type": "method", "children": [{"attributes": {"text": "<p>Get all response headers from response.</p>\n\n<p>Note: This method exists for compatibility reasons. The script\ntransport does not receive response headers.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Warning message or <code>null</code> if the request is disposed</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}, {"attributes": {"type": "null"}, "type": "entry"}]}]}]}, {"attributes": {"line": 354, "name": "getResponseHeader"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "key"}, "type": "param", "children": [{"attributes": {"text": "<p>Key of the header to get the value from.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Get a single response header from response.</p>\n\n<p>Note: This method exists for compatibility reasons. The script\ntransport does not receive response headers.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Warning message or <code>null</code> if the request is disposed</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}, {"attributes": {"type": "null"}, "type": "entry"}]}]}]}, {"attributes": {"line": 427, "name": "isDisposed"}, "type": "method", "children": [{"attributes": {"text": "<p>Check if the request has already beed disposed.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<code>true</code>, if the request has been disposed."}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"line": 158, "name": "on"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "name"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the event to listen to.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "listener"}, "type": "param", "children": [{"attributes": {"text": "<p>The function to execute when the event is fired</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Function"}, "type": "entry"}]}]}, {"attributes": {"optional": true, "name": "ctx"}, "type": "param", "children": [{"attributes": {"text": "<p>The context of the listener.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "var"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Add an event listener for the given event name.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}]}, {"attributes": {"line": 333, "name": "onabort"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;abort&#8221; that is fired when request\nis aborted.</p>\n\n<p>Replace with custom method to listen to the &#8220;abort&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 325, "name": "onerror"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;error&#8221; that is fired on a network error.</p>\n\n<p>Note: Some browsers do not support the &#8220;error&#8221; event.</p>\n\n<p>Replace with custom method to listen to the &#8220;error&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 306, "name": "onload"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;load&#8221; that is fired on successful retrieval.</p>\n\n<p>Note: This handler is called even when an invalid script is returned.</p>\n\n<p>Warning: Internet Explorer < 9 receives a false &#8220;load&#8221; for invalid URLs.\nThis &#8220;load&#8221; is fired about 2 seconds after sending the request. To\ndistinguish from a real &#8220;load&#8221;, consider defining a custom check\nfunction using {@link #setDetermineSuccess} and query the status\nproperty. However, the script loaded needs to have a known impact on\nthe global namespace. If this does not work for you, you may be able\nto set a timeout lower than 2 seconds, depending on script size,\ncomplexity and execution time.</p>\n\n<p>Replace with custom method to listen to the &#8220;load&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 316, "name": "onloadend"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;loadend&#8221; that is fired on retrieval.</p>\n\n<p>Note: This handler is called even when a network error (or similar)\noccurred.</p>\n\n<p>Replace with custom method to listen to the &#8220;loadend&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 288, "name": "onreadystatechange"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for an event that fires at every state change.</p>\n\n<p>Replace with custom method to get informed about the communication progress.</p>"}, "type": "desc"}]}, {"attributes": {"line": 341, "name": "ontimeout"}, "type": "method", "children": [{"attributes": {"text": "<p>Event handler for <span class=\"caps\">XHR</span> event &#8220;timeout&#8221; that is fired when timeout\ninterval has passed.</p>\n\n<p>Replace with custom method to listen to the &#8220;timeout&#8221; event.</p>"}, "type": "desc"}]}, {"attributes": {"line": 174, "name": "open"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "method"}, "type": "param", "children": [{"attributes": {"text": "<p>The <span class=\"caps\">HTTP</span> method to use. This parameter exists for compatibility reasons. The script transport does not support methods other than <span class=\"caps\">GET</span>.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "url"}, "type": "param", "children": [{"attributes": {"text": "<p>The <span class=\"caps\">URL</span> to which to send the request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Initializes (prepares) request.</p>"}, "type": "desc"}]}, {"attributes": {"line": 228, "name": "send"}, "type": "method", "children": [{"attributes": {"text": "<p>Sends request.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}]}, {"attributes": {"line": 396, "name": "setDetermineSuccess"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "check"}, "type": "param", "children": [{"attributes": {"text": "<p>Function executed once the script was loaded.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Function"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Determine if loaded script has expected impact on global namespace.</p>\n\n<p>The function is called once the script was loaded and must return a\nboolean indicating if the response is to be considered successful.</p>"}, "type": "desc"}]}, {"attributes": {"line": 208, "name": "setRequestHeader"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "key"}, "type": "param", "children": [{"attributes": {"text": "<p>The name of the header whose value is to be set.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>The value to set as the body of the header.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Appends a query parameter to <span class=\"caps\">URL</span>.</p>\n\n<p>This method exists for compatibility reasons. The script transport\ndoes not support request headers. However, many services parse query\nparameters like request headers.</p>\n\n<p>Note: The request must be initialized before using this method.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Self for chaining.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.request.Script"}, "type": "entry"}]}]}]}]}]}