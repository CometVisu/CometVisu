<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Internet-Bandwidth &mdash; CometVisu</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_override.css" type="text/css" />
    <link rel="canonical" href="https://www.cometvisu.org/CometVisu/en/0.13/manual/config/rrd/ifHCoctets.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/versions.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Temperature from KNX with linknx" href="knx_linknx.html" />
    <link rel="prev" title="CPU load for Linux Systeme" href="cpuload.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> CometVisu
            <img src="../../_static/comet_webapp_icon_android_48.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.13.0-dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Installation of the CometVisu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Usage of the CometVisu</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration of the CometVisu</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../manager.html">The CometVisu Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editor.html">Graphical editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hidden-config.html">Hidden configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../url-params.html">URL-Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#pages-and-structure-of-cometvisu">Pages and structure of CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#navigation-elements-in-the-cometvisu">Navigation elements in the CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#the-available-designs">The available designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#changes-of-the-metal-design">Changes of the metal design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-elements-for-designing-the-layout">Basic elements for designing the layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#elements-for-conversion-and-formatting-in-the-cometvisu">Elements for conversion and formatting in the CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#widgets-in-the-cometvisu">Widgets in the CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#cometvisu-examples">CometVisu - Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#miscellaneous">Miscellaneous</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../notifications.html">Notifications</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../rrd_examples.html">RRD introduction &amp; examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#general-information-about-rrd">General information about RRD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#rrd-and-the-cometvisu">RRD and the CometVisu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#create-the-rrd-database">Create the RRD database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#filling-the-rrd-database">“Filling” the RRD database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../rrd_examples.html#examples-of-rrds">Examples of RRDs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hydraulik.html">Instructions for creating an animated hydraulic plan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../customizing.html">Customize CometVisu</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../colab/index.html">Help the CometVisu project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devel/index.html">Information for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CometVisu</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Configuration of the CometVisu</a> &raquo;</li>
          <li><a href="../rrd_examples.html">RRD introduction &amp; examples</a> &raquo;</li>
      <li>Internet-Bandwidth</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>This is the documentation for the current development branch of the CometVisu.
It is possible that some of the described features are not yet available in the current release.</p>
<p>Also there might be lots of errors in this documentation as some parts of the content have been translated
by an online translation service.</p>
</div>
<section id="internet-bandwidth">
<h1>Internet-Bandwidth<a class="headerlink" href="#internet-bandwidth" title="Permalink to this headline">¶</a></h1>
<p>The used Internet bandwidth can be filled with this script in
an RRD database:</p>
<p>The 64-bit counters of the interface statistics are read out
via the SNMP protocol and written in both directions in an RRD
database. This must be considered later during the visualization
(the datasourceIndex must be set)</p>
<p>To use this script, the router must support SNMP and a READ
community must be configured. In addition, the router must
support the IF-MIB RFC2233, but this should be the case today
for all devices.</p>
<p>It needs to be adjusted:</p>
<ul class="simple">
<li><p>SNMP community (in the example GEHEIMECOMMUNITY)</p></li>
<li><p>IP address of the router (in the example 192.168.1.1)</p></li>
<li><p>evt. the interface index (in the example.1 in IF-MIB::ifHCInOctets.1, here other numbers may be required - if necessary try)</p></li>
</ul>
<p>This script works like this if it is saved (and executable)
under /var/www/rrd/xxx.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>

<span class="nb">cd</span><span class="w"> </span>/var/www/rrd

<span class="c1"># create database if not exists</span>
<span class="o">[</span><span class="w"> </span>-f<span class="w"> </span>network_internet.rrd<span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
/usr/bin/rrdtool<span class="w"> </span>create<span class="w"> </span>network_internet.rrd<span class="w"> </span>--step<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="se">\</span>
DS:Internet_IN:COUNTER:1200:U:U<span class="w"> </span><span class="se">\</span>
DS:Internet_OUT:COUNTER:1200:U:U<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:1:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:6:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:36:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:144:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:1008:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:4320:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:52560:3200<span class="w"> </span><span class="se">\</span>
RRA:AVERAGE:0.5:525600:3200
<span class="o">}</span>

<span class="nv">NET_INTERNET_IN</span><span class="o">=</span><span class="k">$(</span>expr<span class="w"> </span><span class="k">$(</span>snmpget<span class="w"> </span>-Oqv<span class="w"> </span>-v<span class="w"> </span>2c<span class="w"> </span>-c<span class="w"> </span>GEHEIMECOMMUNITY<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span>IF-MIB::ifHCInOctets.1<span class="k">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="se">\*</span><span class="w"> </span><span class="m">8</span><span class="k">)</span>
<span class="nv">NET_INTERNET_OUT</span><span class="o">=</span><span class="k">$(</span>expr<span class="w"> </span><span class="k">$(</span>snmpget<span class="w"> </span>-Oqv<span class="w"> </span>-v<span class="w"> </span>2c<span class="w"> </span>-c<span class="w"> </span>GEHEIMECOMMUNITY<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span>IF-MIB::ifHCOutOctets.1<span class="k">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="se">\*</span><span class="w"> </span><span class="m">8</span><span class="k">)</span>

/usr/bin/rrdtool<span class="w"> </span>update<span class="w"> </span>network_internet.rrd<span class="w"> </span><span class="sb">`</span>date<span class="w"> </span>+%s<span class="sb">`</span>:<span class="nv">$NET_INTERNET_IN</span>:<span class="nv">$NET_INTERNET_OUT</span>
</pre></div>
</div>
<p>The following line must be added in /etc/crontab to call the
script every 5 minutes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>*/5<span class="w"> </span>*<span class="w">   </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w">   </span>root<span class="w">    </span>/var/www/rrd/network_internet
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cpuload.html" class="btn btn-neutral float-left" title="CPU load for Linux Systeme" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="knx_linknx.html" class="btn btn-neutral float-right" title="Temperature from KNX with linknx" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010-2023 Christian Mayer and the CometVisu contributers.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Version</span>
      v: 0.13.0-dev
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../0.10.2|0.10/manual">0.10.2|0.10</a></dd>
        
          <dd><a href="../../0.11.2|0.11/manual">0.11.2|0.11</a></dd>
        
          <dd><a href="../../0.12.0|0.12/manual">0.12.0|0.12</a></dd>
        
          <dd><a href="../../0.13.0-dev|0.13/manual">0.13.0-dev|0.13</a></dd>
        
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>