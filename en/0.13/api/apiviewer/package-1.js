!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.LogManager":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.Logger",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.set({id:t,minLevel:e})},properties:{id:{check:"String"},minLevel:{check:"Integer"}},members:{is:function(t){"string"==typeof t&&(t=qx.tool.utils.LogManager.getInstance()._levels[t]);return this.getMinLevel()<=t},log:function(t,e){this.is(t)&&this._output(t,e)},_output:function(t,e){qx.tool.utils.LogManager.getInstance().output(this,t,e)},trace:function(t){return this.log("trace",t)},debug:function(t){return this.log("debug",t)},info:function(t){return this.log("info",t)},warn:function(t){return this.log("warn",t)},error:function(t){return this.log("error",t)},fatal:function(t){return this.log("fatal",t)}}});qx.tool.utils.Logger.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Logger":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Json":{}}};qx.Bootstrap.executePendingDefers(t);var e=["trace","debug","info","warn","error","fatal"];function r(t){return t<10?"0"+t:String(t)}var n="";function o(t,e){(t=String(t)).length<e&&(t=(t+function(t){for(;n.length<t;)n+="     ";return n}(e)).substring(0,e));return t}qx.Class.define("qx.tool.utils.LogManager",{extend:qx.core.Object,construct:function(){qx.core.Object.constructor.call(this);var t=this;this._loggers={};this._levels={};this._sinks=[];this._config={};this._defaultSink=qx.tool.utils.LogManager.consoleSink;this.addSink(this._defaultSink);e.forEach((function(e,r){t._levels[e]=r}));this._defaultLevel=this._levels.info},statics:{__P_514_0:null,createLog:function(t){t||(t="generic");return this.getInstance().getLogger(t)},getInstance:function(){this.__P_514_0||(this.__P_514_0=new qx.tool.utils.LogManager);return this.__P_514_0},nullSink:function(t,e,r){},consoleSink:function(t,e,n){var i,a=new Date,c=a.getFullYear()+"-"+r(a.getMonth()+1)+"-"+r(a.getDate())+" "+r(a.getHours())+":"+r(a.getMinutes())+":"+r(a.getSeconds())+"."+((i=a.getMilliseconds())<10?"00"+i:i<100?"0"+i:String(i));console.log(c+" ["+o(e,5)+"] "+o(t.getId(),15)+" "+n)}},members:{loadConfig:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("string"!=typeof t){r.next=4;break}r.next=3;return qx.tool.utils.Json.loadJsonAsync(t);case 3:t=r.sent;case 4:n=e;e._config=t;e._defaultLevel=e.getLoggerLevel("__default__","info");for(o in e._loggers)(i=e._loggers[o]).setMinLevel(n.getLoggerLevel(i.getId()));case 8:case"end":return r.stop()}}),r)})))()},getLogger:function(t){var e=this._loggers[t];e||(e=this._loggers[t]=new qx.tool.utils.Logger(t,this.getLoggerLevel(t)));return e},getLoggerLevel:function(t,e){var r=this._config&&this._config.categories&&this._config.categories[t],n=r&&r.level;n&&(n=this._levels[n]);return"number"==typeof n?n:e?this._levels[e]:this._defaultLevel},addSink:function(t){this._sinks.push(t)},removeSink:function(t){var e=this._sinks.indexOf(t);e>-1&&this._sinks.splice(e,1)},output:function(t,r,n){"string"!=typeof r&&(r=e[r]);this._sinks.forEach((function(e){e.call(this,t,r,n)}))},setDefaultSink:function(t){var e=this._defaultSink;this._defaultSink&&this.removeSink(this._defaultSink);this._defaultSink=t;t&&this.addSink(t);return e}}});qx.tool.utils.LogManager.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.Console":{},"qx.tool.utils.files.Utils":{},"qx.tool.utils.Json":{},"qx.tool.compiler.app.WebFont":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("path"),r=require("fs"),n=require("async"),o=qx.tool.utils.LogManager.createLog("library");qx.Class.define("qx.tool.compiler.app.Library",{extend:qx.core.Object,construct:function(){qx.core.Object.constructor.call(this);this.__P_485_0={};this.__P_485_1={};this.__P_485_2={}},properties:{namespace:{check:"String"},version:{check:"String"},rootDir:{check:"String",transform:"_transformRootDir"},sourcePath:{init:"source/class",check:"String"},transpiledPath:{init:"source/transpiled",check:"String"},libraryInfo:{check:"Map"},resourcePath:{init:"source/resource",check:"String"},themePath:{init:"source/theme",check:"String"},translationPath:{init:"source/translation",check:"String"},webFonts:{init:null,nullable:!0,check:"Array"},addScript:{init:null},addCss:{init:null},requires:{init:null}},members:{__P_485_0:null,__P_485_1:null,__P_485_3:null,__P_485_2:null,__P_485_4:null,_transformRootDir:function(t){return t},loadManifest:function(t){return this.__P_485_3?this.__P_485_3:this.__P_485_3=this.__P_485_5(t)},__P_485_5:function(t){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=qx.tool.compiler.Console.getInstance();a=t;o.next=4;return qx.tool.utils.files.Utils.correctCase(e.resolve(t));case 4:a=o.sent;n.setRootDir(a);o.next=8;return qx.tool.utils.Json.loadJsonAsync(a+"/Manifest.json");case 8:if(c=o.sent){o.next=11;break}throw new Error(i.decode("qx.tool.compiler.library.emptyManifest",a));case 11:n.setNamespace(c.provides.namespace);n.setVersion(c.info.version);if(c.provides.environmentChecks)for(s in c.provides.environmentChecks){u=c.provides.environmentChecks[s];l=s.indexOf("*");n.__P_485_2[s]=l>-1?{matchString:s.substring(0,l),startsWith:!0,className:u}:{matchString:s,className:u}}f=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(o){var c,s;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=e.resolve(a,o);if(r.existsSync(c)){t.next=4;break}n.warn(i.decode("qx.tool.compiler.library.cannotFindPath",n.getNamespace(),o));return t.abrupt("return",o);case 4:t.next=6;return qx.tool.utils.files.Utils.correctCase(c);case 6:if((s=t.sent).substring(0,a.length+1)==a+e.sep){t.next=10;break}n.warn(i.decode("qx.tool.compiler.library.cannotCorrectCase",a));return t.abrupt("return",o);case 10:s=s.substring(a.length+1);return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();o.next=17;return f(c.provides.class);case 17:p=o.sent;n.setSourcePath(p);if(!c.provides.resource){o.next=24;break}o.next=22;return f(c.provides.resource);case 22:h=o.sent;n.setResourcePath(h);case 24:n.setLibraryInfo(c.info);c.provides.transpiled?n.setTranspiledPath(c.provides.transpiled):(y=p.match(/^(.*)\/([^/]+)$/))&&3==y.length?n.setTranspiledPath(y[1]+"/transpiled"):n.setTranspiledPath("transpiled");c.provides.translation&&n.setTranslationPath(c.provides.translation);if(c.provides.webfonts){d=[];c.provides.webfonts.length&&qx.tool.compiler.Console.print("qx.tool.compiler.webfonts.deprecated");c.provides.webfonts.forEach((function(t){var e=new qx.tool.compiler.app.WebFont(n).set(t);d.push(e)}));n.setWebFonts(d)}n.__P_485_4=c.provides.fonts||{};if(c.externalResources){c.externalResources.script&&n.setAddScript(c.externalResources.script);c.externalResources.css&&n.setAddCss(c.externalResources.css)}c.requires&&n.setRequires(c.requires);c.provides&&c.provides.boot&&qx.tool.compiler.Console.print("qx.tool.cli.compile.deprecatedProvidesBoot",a);case 32:case"end":return o.stop()}}),o)})))()},getFontsData:function(){return this.__P_485_4},scanForClasses:function(t){var i=this,a=[];var c=e.join(i.getRootDir(),i.getSourcePath());if(r.existsSync(c))!function t(c,s,u){r.readdir(c,(function(l,f){l?u(l):n.each(f,(function(n,u){"."!=n[0]?r.stat(e.join(c,n),(function(r,l){if(!r&&l)if(l.isDirectory()){var f=s;f.length&&(f+=".");f+=n;t(e.join(c,n),f,u)}else{var p=n.match(/(.*)(\.\w+)$/);if(p){var h=p[1],y=p[2];s.length&&(h=s+"."+h);if(h.match(/__init__/))u();else{if(".js"==y||".ts"==y){i.__P_485_0[h]="class";i.__P_485_1[h]=y;a.push(h)}else i.__P_485_0[n]="resource";if(Boolean(s)&&!i.__P_485_0[s]){i.__P_485_0[s]="package";var d;f=s;for(;(d=f.lastIndexOf("."))>-1;){f=f.substring(0,d);i.__P_485_0[f]="package"}}u()}}else{o.trace("Skipping file "+c+"/"+n);u()}}else u(r)})):u()}),u)}))}(c,"",(function(e){t(e,a)}));else{var s=qx.tool.compiler.Console.getInstance();qx.tool.compiler.Console.warn(s.decode("qx.tool.compiler.library.cannotFindPath",i.getNamespace(),c));t(null,[])}},isFontAsset:function(t){var e=!1;if(t.endsWith("svg")){if(!(e=(this.getWebFonts()||[]).find((function(e){return e.getResources().find((function(e){return e==t}))}))))for(var r in this.__P_485_4){if(e=(this.__P_485_4[r].fontFaces||[]).find((function(e){return(e.paths||[]).find((function(e){return e==t}))})))break}}return e},getSymbolType:function(t){if(!t.length)return null;var e=this.__P_485_0[t];if(e)return{symbolType:this.__P_485_0[t],className:"class"==e?t:null,name:t};function r(e){if(!e)return null;return(e.startsWith?t.startsWith(e.matchString):t==e.matchString)?{symbolType:"environment",className:e.className,name:t}:null}var n=r(this.__P_485_2[t]);if(n)return n;for(var o in this.__P_485_2){var i=this.__P_485_2[o];if(i.startsWith&&null!==(n=r(i)))return n}for(var a,c=t;(a=c.lastIndexOf("."))>-1;){c=c.substring(0,a);if(e=this.__P_485_0[c])return"class"==e?{symbolType:"member",className:c,name:t}:null}return null},isClass:function(t){return"class"===this.__P_485_0[t]},getKnownSymbols:function(){return this.__P_485_0},getSourceFileExtension:function(t){return this.__P_485_1[t]},getFilename:function(t){return e.join(this.getRootDir(),this.getSourcePath(),t)},getResourceFilename:function(t){return e.join(this.getRootDir(),this.getResourcePath(),t)},getThemeFilename:function(t){return e.join(this.getRootDir(),this.getThemePath(),t)}},statics:{createLibrary:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new qx.tool.compiler.app.Library;e.next=3;return r.loadManifest(t);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()}}});qx.tool.compiler.app.Library.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.IndexedArray":{construct:!0},"qx.tool.compiler.resources.Manager":{},"qx.tool.utils.Json":{},"qx.tool.utils.Promisify":{},"qx.tool.compiler.Console":{},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.ClassFile":{},"qx.tool.compiler.app.Cldr":{},"qx.tool.compiler.app.Translation":{},"qx.Promise":{},"qx.lang.Type":{},"qx.tool.compiler.app.ManifestFont":{},"qx.tool.config.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("path"),n=require("async"),o=require("object-hash"),i=require("util").promisify,a=(i(e.readFile),i(e.writeFile),qx.tool.utils.LogManager.createLog("analyser"));qx.Class.define("qx.tool.compiler.Analyser",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_477_0=t||"db.json";this.__P_477_1=[];this.__P_477_2={};this.__P_477_3=new qx.tool.utils.IndexedArray;this.__P_477_4={};this.__P_477_5={};this.__P_477_6={};this.__P_477_7={};this.__P_477_8={}},properties:{outputDir:{nullable:!0,check:"String"},proxySourcePath:{init:null,nullable:!0,check:"String"},applicationTypes:{init:["node","browser"],check:"Array"},trackLineNumbers:{check:"Boolean",init:!1,nullable:!1},processResources:{init:!0,nullable:!1,check:"Boolean"},addCreatedAt:{init:!1,nullable:!1,check:"Boolean"},verboseCreatedAt:{init:!1,nullable:!1,check:"Boolean"},environment:{init:null,check:"Map",apply:"_applyEnvironment"},babelConfig:{init:null,nullable:!0,check:"Object"},ignores:{init:[],nullable:!1,check:"Array"},globalSymbols:{init:[],nullable:!1,check:"Array"},manglePrivates:{init:"readable",check:["off","readable","unreadable"]},writePoLineNumbers:{init:!1,check:"Boolean"}},events:{compilingClass:"qx.event.type.Data",compiledClass:"qx.event.type.Data",alreadyCompiledClass:"qx.event.type.Data",saveDatabase:"qx.event.type.Data"},members:{__P_477_9:!1,__P_477_10:null,__P_477_0:null,__P_477_11:null,__P_477_1:null,__P_477_2:null,__P_477_12:null,__P_477_3:null,__P_477_4:null,__P_477_5:null,__P_477_8:null,__P_477_6:null,__P_477_7:null,__P_477_13:!1,__P_477_14:null,__P_477_15:null,open:function(){var t;if(this.__P_477_9)t=Promise.resolve();else{this.__P_477_9=!0;var e=null;this.isProcessResources()&&(e=new qx.tool.compiler.resources.Manager(this));this.__P_477_10=e;t=Promise.all([this.loadDatabase(),e&&e.loadDatabase()])}return t},initialScan:function(t){var e=this;this.__P_477_11||(this.__P_477_11={});a.debug("Scanning source code");n.parallel([function(t){e.__P_477_10?e.__P_477_10.findAllResources().then((function(){return t()})).catch(t):t(null)},function(t){n.each(e.__P_477_1,(function(t,e){t.scanForClasses((function(r){a.debug("Finished scanning for "+t.getNamespace());e(r)}))}),(function(e){a.debug("Finished scanning for all libraries");t(e)}))}],(function(e){a.debug("processed source and resources");t(e)}))},loadDatabase:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Json.loadJsonAsync(t.getDbFilename());case 2:e.t0=e.sent;if(e.t0){e.next=5;break}e.t0={};case 5:t.__P_477_11=e.t0;case 6:case"end":return e.stop()}}),e)})))()},resetDatabase:function(){this.__P_477_11=null;if(this.__P_477_10){this.__P_477_10.dispose();this.__P_477_10=null}this.__P_477_9=!1;return this.open()},saveDatabase:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.debug("saving generator database");e.next=3;return t.fireDataEventAsync("saveDatabase",t.__P_477_11);case 3:e.next=5;return qx.tool.utils.Json.saveJsonAsync(t.getDbFilename(),t.__P_477_11).then((function(){return t.__P_477_10&&t.__P_477_10.saveDatabase()}));case 5:case"end":return e.stop()}}),e)})))()},getDatabase:function(){return this.__P_477_11},analyseClasses:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c,s,u,l,f,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(t){var e=[],n=r.__P_477_11.classInfo[t];if(n&&n.dependsOn)for(var o in n.dependsOn)n.dependsOn[o].load&&c(o).forEach((function(t){e.push(t)}));return e};c=function(t){var e=[],n=r.__P_477_11.classInfo[t];if(n.dependsOn)for(var o in n.dependsOn)n.dependsOn[o].construct&&e.push(o);return e};r=t;t.__P_477_11||(t.__P_477_11={});t.__P_477_11;({});n={};o={};i=t.addListener("compiledClass",(function(t){var e=t.getData();if(e.oldDbClassInfo){e.oldDbClassInfo.extends&&(o[e.oldDbClassInfo.extends]=!0);e.oldDbClassInfo.implement&&e.oldDbClassInfo.implement.forEach((function(t){return o[t]=!0}));e.oldDbClassInfo.include&&e.oldDbClassInfo.include.forEach((function(t){return o[t]=!0}))}e.dbClassInfo.extends&&(o[e.dbClassInfo.extends]=!0);e.dbClassInfo.implement&&e.dbClassInfo.implement.forEach((function(t){return o[t]=!0}));e.dbClassInfo.include&&e.dbClassInfo.include.forEach((function(t){return o[t]=!0}));n[e.classFile.getClassName()]=e}));e.next=11;return qx.tool.utils.Promisify.map(t.__P_477_1,function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",qx.tool.utils.Promisify.call((function(t){return e.scanForClasses(t)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:a=r.__P_477_12=r.__P_477_3.toArray();u=0;case 13:if(!(u<a.length)){e.next=31;break}e.prev=14;e.next=17;return qx.tool.utils.Promisify.call((function(t){return r.getClassInfo(a[u],t)}));case 17:if(l=e.sent){f=l.dependsOn;for(p in f)r._addRequiredClass(p)}e.next=28;break;case 21:e.prev=21;e.t0=e.catch(14);if("ENOCLASSFILE"!==e.t0.code){e.next=27;break}qx.tool.compiler.Console.error(e.t0.message);e.next=28;break;case 27:throw e.t0;case 28:u++;e.next=13;break;case 31:a.forEach((function(t){var e=r.__P_477_11.classInfo[t];s(t).forEach((function(t){e.dependsOn||(e.dependsOn={});e.dependsOn[t]||(e.dependsOn[t]={});e.dependsOn[t].load=!0}))}));r.removeListenerById(i);case 33:case"end":return e.stop()}}),e,null,[[14,21]])})))()},_addRequiredClass:function(t){var e=this;e.__P_477_12||(e.__P_477_12=[]);-1==e.__P_477_12.indexOf(t)&&e.__P_477_12.push(t)},getDependentClasses:function(){return this.__P_477_12},getCachedClassInfo:function(t){return this.__P_477_11?this.__P_477_11.classInfo[t]:null},getClassInfo:function(t,e,r){var n=this;this.__P_477_11||(this.__P_477_11={});var o=this.__P_477_11;if("function"==typeof e){r=e;e=!1}o.classInfo||(o.classInfo={});var i=n.getLibraryFromClassname(t);if(i){var a=this.getClassSourcePath(i,t),c=this.getClassOutputPath(t),s=function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function r(){var s,u,l,f,p,h;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.utils.files.Utils.safeStat(a);case 2:if(s=r.sent){r.next=5;break}throw new Error("Cannot find "+a);case 5:(u=o.classInfo[t])&&(e||u.filename==a)||(e=!0);if(e){r.next=19;break}r.next=10;return qx.tool.utils.files.Utils.safeStat(c);case 10:l=r.sent;if(!u||!l){r.next=19;break}f=null;try{f=u.mtime&&new Date(u.mtime)}catch(t){}if(!f||f.getTime()!=s.mtime.getTime()){r.next=19;break}if(!(l.mtime.getTime()>=s.mtime.getTime())){r.next=19;break}r.next=18;return n.fireDataEventAsync("alreadyCompiledClass",{className:t,dbClassInfo:u});case 18:case 29:return r.abrupt("return",u);case 19:p=o.classInfo[t]?Object.assign({},o.classInfo[t]):null;u=o.classInfo[t]={mtime:s.mtime,libraryName:i.getNamespace(),filename:a};h=new qx.tool.compiler.ClassFile(n,t,i);r.next=24;return n.fireDataEventAsync("compilingClass",{dbClassInfo:u,oldDbClassInfo:p,classFile:h});case 24:r.next=26;return qx.tool.utils.Promisify.call((function(t){return h.load(t)}));case 26:h.writeDbInfo(u);r.next=29;return n.fireDataEventAsync("compiledClass",{dbClassInfo:u,oldDbClassInfo:p,classFile:h});case 30:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();qx.tool.utils.Promisify.callback(s(),r)}else{var u=new Error("Cannot find class file "+t);u.code="ENOCLASSFILE";r&&r(u)}},getClassSourcePath:function(t,n){var o=n.replace(/\./g,r.sep)+t.getSourceFileExtension(n);if(this.getProxySourcePath()){var i=r.join(this.getProxySourcePath(),o);if(e.existsSync(i))return r.resolve(i)}return r.join(t.getRootDir(),t.getSourcePath(),n.replace(/\./g,r.sep)+t.getSourceFileExtension(n))},getClassOutputPath:function(t){return r.join(this.getOutputDir(),"transpiled",t.replace(/\./g,r.sep)+".js")},getCldr:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e;if(!(o=e.__P_477_4[t])){r.next=4;break}return r.abrupt("return",o);case 4:return r.abrupt("return",qx.tool.compiler.app.Cldr.loadCLDR(t).then((function(e){return n.__P_477_4[t]=e})));case 5:case"end":return r.stop()}}),r)})))()},getTranslation:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=r;i=e+":"+t.getNamespace();if(a=o.__P_477_5[i]){n.next=8;break}(a=o.__P_477_5[i]=new qx.tool.compiler.app.Translation(t,e)).setWriteLineNumbers(r.isWritePoLineNumbers());n.next=8;return a.checkRead();case 8:return n.abrupt("return",a);case 9:case"end":return n.stop()}}),n)})))()},updateTranslations:function(t,e,r,n){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r||(r=[]);r=r.filter((function(e){return e!=t}));i.next=4;return qx.Promise.all(e.map(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(i){var a,c,s,u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={};e.next=3;return qx.Promise.all(r.map(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new qx.tool.compiler.app.Translation(e,i);t.next=3;return r.read();case 3:a[e.toHashCode()]=r;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:(c=new qx.tool.compiler.app.Translation(t,i)).setWriteLineNumbers(o.isWritePoLineNumbers());e.next=7;return c.read();case 7:s={};for(u in c.getEntries())s[u]=!0;e.next=11;return qx.Promise.all(o.__P_477_12.map(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(i){var u,l,f,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p=function(t){return!t||(qx.lang.Type.isArray(t.msgstr)?t.msgstr.every((function(t){return!t})):!t.msgstr)};u=t.isClass(i);l=!u&&r.find((function(t){return t.isClass(i)}))||null;if(u||l){e.next=5;break}return e.abrupt("return");case 5:e.next=7;return qx.tool.utils.Promisify.call((function(t){return o.getClassInfo(i,t)}));case 7:if((f=e.sent).translations){e.next=10;break}return e.abrupt("return");case 10:f.translations.forEach((function(t){delete s[t.msgid];if(l){var e=c.getEntry(t.msgid);if(!p(e))return;var r=a[l.toHashCode()].getEntry(t.msgid);if(p(r)||n){e||(e=c.getOrCreateEntry(t.msgid));null!==r&&Object.assign(e,r)}}else{var o=c.getOrCreateEntry(t.msgid);t.msgid_plural&&(o.msgid_plural=t.msgid_plural);o.comments||(o.comments={});o.comments.extracted=t.comment;o.comments.reference={};var u=o.comments.reference,f=i.replace(/\./g,"/")+".js",h=function(e){var r=u[f];r||(r=u[f]=[]);r.includes(t.lineNo)||r.push(e)};qx.lang.Type.isArray(t.lineNo)?t.lineNo.forEach(h):h(t.lineNo)}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:Object.keys(s).forEach((function(t){var e=c.getEntry(t);if(e){e.comments||(e.comments={});if(0==Object.keys(e.comments).length&&""===e.msgstr)c.deleteEntry(t);else{e.comments.extracted="NO LONGER USED";e.comments.reference={}}}}));e.next=14;return c.write();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return i.stop()}}),i)})))()},getQooxdooPath:function(){var t=this.findLibrary("qx");return null!==t?t.getRootDir():null},findLibrary:function(t){return this.__P_477_2[t]},getLibraries:function(){return this.__P_477_1},addLibrary:function(t){var e=this.__P_477_2[t.getNamespace()];if(e)throw new Error("Multiple libraries with namespace "+t.getNamespace()+" found "+t.getRootDir()+" and "+e.getRootDir());this.__P_477_1.push(t);this.__P_477_2[t.getNamespace()]=t},getFont:function(t,e){var r=this.__P_477_8[t]||null;!r&&e&&(r=this.__P_477_8[t]=new qx.tool.compiler.app.ManifestFont(t));return r},isFontAsset:function(t){var e=!1;if(t.endsWith("svg"))for(var r in this.__P_477_8){e=(this.__P_477_8[r].getSources()||[]).find((function(e){return e==t}))}return e},getFonts:function(){return this.__P_477_8},addClass:function(t){this.__P_477_3.push(t)},removeClass:function(t){this.__P_477_3.remove(t)},getSymbolType:function(t){for(var e=0;e<this.__P_477_1.length;e++){var r=this.__P_477_1[e].getSymbolType(t);if(r)return r}return null},getLibraryFromClassname:function(t){var e=this.__P_477_6[t];if(e)return e.library;for(var r=0;r<this.__P_477_1.length;r++){var n=this.__P_477_1[r];if((e=n.getSymbolType(t))&&("class"==e.symbolType||"member"==e.symbolType))return n}return null},getClassFilename:function(t){var e=this.getLibraryFromClassname(t);return e?e.getRootDir()+"/"+e.getSourcePath()+"/"+t.replace(/\./g,"/")+".js":null},setEnvironmentCheck:function(t,e){if("object"==_typeof(t)){var r=t;for(t in r)this.__P_477_7[t]=r[t]}else void 0===e?delete this.__P_477_7[t]:this.__P_477_7[t]=e},getEnvironmentCheck:function(t){return this.__P_477_7[t]},getResourceManager:function(){return this.__P_477_10},getQooxdooVersion:function(){if(this.__P_477_14)return this.__P_477_14;if(!this.__P_477_14){var t=this.findLibrary("qx");t&&(this.__P_477_14=t.getVersion())}return this.__P_477_14},getDbFilename:function(){return this.__P_477_0},getResDbFilename:function(){var t=this.__P_477_0.match(/(^.*)\/([^/]+)$/);return t&&3==t.length?t[1]+"/resource-db.json":"resource-db.json"},_applyEnvironment:function(t){this.__P_477_15=o(t)},isContextChanged:function(){var t=this.getDatabase();return!(!this.__P_477_15||this.__P_477_15===t.environmentHash)||t.compilerVersion!==qx.tool.config.Utils.getCompilerVersion()},updateEnvironmentData:function(){var t=this.getLibraries().reduce((function(t,e){t[e.getNamespace()]=e.getVersion();return t}),{}),e=this.getDatabase();e.libraries=t;e.environmentHash=this.__P_477_15;e.compilerVersion=qx.tool.config.Utils.getCompilerVersion()}}});qx.tool.compiler.Analyser.$$dbClassInfo=t}();function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.lang.Type":{},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.Console":{construct:!0},"qx.lang.Object":{},"qx.tool.utils.Utils":{},"qx.lang.Array":{},"qx.tool.compiler.jsdoc.Parser":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("@babel/core"),n=require("@babel/types"),o=require("@babel/parser"),i=require("async"),a=qx.tool.utils.LogManager.createLog("analyser");function c(t){var e=!1;return function t(r){if("ThisExpression"==r.type)return"this";if("Super"==r.type)return"super";if("Identifier"==r.type)return r.name;if("ArrayExpression"==r.type){var o=[];r.elements.forEach((function(e){return o.push(t(e))}));return o}if("MemberExpression"!=r.type)return"("+r.type+")";if(n.isIdentifier(r.object)){var i=r.object.name;r.property.name?i+="."+r.property.name:e=!0;return i}var a;a="ArrayExpression"==r.object.type?"[]":t(r.object);if(e)return a;r.computed?e=!0:r.property.name?a+="."+r.property.name:e=!0;return a}(t)}function s(t){var e=t.type;return"Literal"===e||"StringLiteral"===e||"NumericLiteral"===e||"BooleanLiteral"===e||"BigIntLiteral"===e}function u(t){for(var e=t.split("."),r=n.memberExpression(n.identifier(e[0]),n.identifier(e[1])),o=2;o<e.length;o++)r=n.memberExpression(r,n.identifier(e[o]));return r}function l(t){if(null==t)return n.nullLiteral();if("boolean"==typeof t)return n.booleanLiteral(t);if("number"==typeof t)return n.numericLiteral(t);if("string"==typeof t)return n.stringLiteral(t);if(qx.lang.Type.isRegExp(t))return n.regExpLiteral(t.toString());if(qx.lang.Type.isDate(t))return n.stringLiteral(t.toString());if(qx.lang.Type.isArray(t)){var e=[];t.forEach((function(t){e.push(l(t))}));return n.arrayExpression(e)}if("object"!=_typeof(t)){a.error("Cannot serialise value "+t+" into AST");return n.nullLiteral()}var r=[];for(var o in t){var i=l(t[o]),c=n.objectProperty(n.stringLiteral(o),i);r.push(c)}return n.objectExpression(r)}function f(t){return void 0===t?"undefined":null===t?"null":"string"==typeof t?JSON.stringify(t):"object"===_typeof(t)&&t instanceof Date?"new Date("+t.getTime()+")":qx.lang.Type.isArray(t)?"["+t.map(f).join(", ")+"]":t.toString()}qx.Class.define("qx.tool.compiler.ClassFile",{extend:qx.core.Object,construct:function(t,e,r){var n=this;qx.core.Object.constructor.call(this);this.__P_478_0=t;this.__P_478_1=e;this.__P_478_2=[];this.__P_478_3={};this.__P_478_4=r;this.__P_478_5=t.getClassSourcePath(r,e);this.__P_478_6={};this.__P_478_7={provided:{},required:{}};this.__P_478_8=[];this.__P_478_9={};this.__P_478_10=[];this.__P_478_11=[];this.__P_478_12={};this.__P_478_13={parent:null,vars:{},unresolved:{}};this.__P_478_14=[];this.__P_478_15={};this.__P_478_16=[];this.__P_478_17=i.queue((function(t,e){t(e)}));this.__P_478_17.drain=this._onTaskQueueDrain;this.__P_478_17.error=function(t){qx.tool.compiler.Console.error(t.stack||t)};t.getIgnores().forEach((function(t){return n.addIgnore(t)}));this.__P_478_18={};this.__P_478_19={};this.__P_478_20={};this.__P_478_21=t.getManglePrivates();var o=qx.tool.compiler.ClassFile,a=function(t){return t.forEach((function(t){return n.__P_478_18[t]=!0}))};if(t.getGlobalSymbols().length)a(t.getGlobalSymbols());else{a(o.QX_GLOBALS);a(o.COMMON_GLOBALS);a(o.BROWSER_GLOBALS)}},members:{__P_478_0:null,__P_478_1:null,__P_478_22:0,__P_478_4:null,__P_478_6:null,__P_478_7:null,__P_478_8:null,__P_478_9:null,__P_478_23:null,__P_478_13:null,__P_478_24:!1,__P_478_25:!1,__P_478_17:null,__P_478_16:null,__P_478_11:null,__P_478_12:null,__P_478_26:null,__P_478_2:null,__P_478_3:null,__P_478_27:!1,__P_478_10:null,__P_478_28:null,__P_478_29:null,__P_478_30:null,__P_478_5:null,__P_478_31:null,__P_478_18:null,__P_478_19:null,__P_478_20:null,__P_478_14:null,__P_478_15:null,_onTaskQueueDrain:function(){var t=this.__P_478_31;this.__P_478_31=[];t.forEach((function(t){t()}))},_waitForTaskQueueDrain:function(t){0==this.__P_478_17.length()?t():this.__P_478_16.push(t)},_queueTask:function(t){this.__P_478_17.push(t)},getSourcePath:function(){return this.__P_478_5},getOutputPath:function(){return this.__P_478_0.getClassOutputPath(this.__P_478_1)},load:function(t){var n=this,o=this.__P_478_1;n.__P_478_27=!1;n.__P_478_22=0;e.readFile(this.getSourcePath(),{encoding:"utf-8"},(function(i,a){if(i)t(i);else{var c;try{var s=n.__P_478_0.getBabelConfig()||{},u=qx.lang.Object.clone(s.options||{},!0);u.modules=!1;var l=[{plugins:[]}];if(s.plugins)for(var f in s.plugins)!0===s.plugins[f]?l[0].plugins.push(require.resolve(f)):s.plugins[f]&&l[0].plugins.push([require.resolve(f),s.plugins[f]]);var p=n._babelClassPlugins(),h={babelrc:!1,sourceFileName:n.getSourcePath(),filename:n.getSourcePath(),sourceMaps:!0,presets:[[{plugins:[p.CodeElimination]}],[{plugins:[p.Compiler]}],[require.resolve("@babel/preset-env"),u],[require.resolve("@babel/preset-typescript")],[require.resolve("@babel/preset-react"),qx.tool.compiler.ClassFile.JSX_OPTIONS]],generatorOpts:{compact:!1},parserOpts:{allowSuperOutsideMethod:!0,sourceType:"script"},passPerPreset:!0};l[0].plugins.length&&h.presets.push(l);"unreadable"==this.__P_478_21&&(h.blacklist=["spec.functionName"]);c=r.transform(a,h)}catch(e){qx.tool.compiler.Console.log(e);n.addMarker("compiler.syntaxError",e.loc,e.message);n.__P_478_27=!0;n._compileDbClassInfo();t();return}if(n.__P_478_22){if(!n.__P_478_3[o]){n.addMarker("compiler.wrongClassName",null,o,Object.keys(n.__P_478_3).join(", "));n._compileDbClassInfo()}var y=o.lastIndexOf("."),d=y>-1?o.substring(y+1):o,m=n.getOutputPath();qx.tool.utils.Utils.mkParentPath(m,(function(r){if(r)t(r);else{var o=d+".js.map";qx.lang.Array.contains(n.__P_478_0.getApplicationTypes(),"browser")&&(o+="?dt="+(new Date).getTime());e.writeFile(m,c.code+"\n\n//# sourceMappingURL="+o,{encoding:"utf-8"},(function(r){r?t(r):e.writeFile(m+".map",JSON.stringify(c.map,null,2),{encoding:"utf-8"},(function(e){e?t(e):n._waitForTaskQueueDrain((function(){t()}))}))}))}}))}else{n.addMarker("compiler.missingClassDef");n.__P_478_27=!0;n._compileDbClassInfo();t()}}}))},writeDbInfo:function(t){delete t.unresolved;delete t.dependsOn;delete t.assets;delete t.translations;delete t.markers;delete t.fatalCompileError;delete t.commonjsModules;for(var e in this.__P_478_28)t[e]=this.__P_478_28[e]},_compileDbClassInfo:function(){var t=this,e=this.__P_478_28={},r=this.getRequiredClasses();if(t.__P_478_32){var n=qx.tool.compiler.ClassFile.JSX_OPTIONS.pragma,o=n.lastIndexOf(".");r[n=n.substring(0,o)]||(r[n]={})}for(var i in r){var a=r[i];if(!a.ignore){e.dependsOn||(e.dependsOn={});e.dependsOn[i]=a}}function c(t){t&&Object.keys(t).forEach((function(e){if("@"==e[0]){var r=t[e];delete t[e];e=e.substring(1);var n=t[e];if(n){n.annotations||(n.annotations=[]);n.annotations.push(r)}}}))}var s=this.getOuterClassMeta();if(s){c(s.events);c(s.members);c(s.statics);s.properties&&s.members&&Object.keys(s.properties).forEach((function(t){var e=s.properties[t];if(e.apply){var r=s.members[e.apply];if(r){r.applyFor||(r.applyFor=[]);r.applyFor.push(t)}}}));e.extends=s.superClass;e.include=s.mixins.slice(0);e.implement=s.interfaces.slice(0)}if(Object.keys(this.__P_478_7.provided).length||Object.keys(this.__P_478_7.required).length){e.environment={provided:[],required:{}};for(var u in this.__P_478_7.provided)e.environment.provided.push(u);for(var l in this.__P_478_7.required)e.environment.required[l]=this.__P_478_7.required[l]}e.hasDefer=this.hasDefer();e.unresolved=[];for(var f in this.__P_478_13.unresolved){var p=this.__P_478_13.unresolved[f];if(void 0!==p&&!this.__P_478_3[f]){var h=t.__P_478_0.getSymbolType(f);if(h&&h.className)t._requireClass(h.className,{load:p.load,defer:p.defer});else if(h&&"package"==h.symbolType)t.deleteReference(f);else{e.unresolved.push(p);for(var y=0;y<p.locations.length;y++)t.addMarker("symbol.unresolved#"+f,p.locations[y].start,f)}}}e.unresolved.length||delete e.unresolved;var d=this.getAssets();d.length&&(e.assets=d);var m=Object.keys(this.__P_478_9);if(m.length){e.fonts=m;for(var v in this.__P_478_9)this.__P_478_0.getFont(v)||t.addMarker("fonts.unresolved#"+v,this.__P_478_9[v].loc.start,v)}if(s){if(s.aliases){e.aliases={};for(var g in s.aliases.aliasMap)e.aliases[g]=s.aliases.aliasMap[g]}if(s.themeMeta){e.themeMeta={};for(var _ in s.themeMeta.themeMetaMap)e.themeMeta[_]=s.themeMeta.themeMetaMap[_]}}this.__P_478_14.length&&(e.externals=this.__P_478_14);this.__P_478_10.length&&(e.translations=this.__P_478_10.slice(0));this.__P_478_11.length&&(e.markers=qx.lang.Array.clone(this.__P_478_11));this.__P_478_27&&(e.fatalCompileError=!0);if(Object.keys(this.__P_478_15).length>0){e.commonjsModules={};for(var x in this.__P_478_15)e.commonjsModules[x]=_toConsumableArray(this.__P_478_15[x])}return e},getOuterClassMeta:function(){var t=this.__P_478_3[this.__P_478_1]||null;if(!t)return t;var e={};Object.keys(t).filter((function(t){return"_"!=t[0]})).forEach((function(r){return e[r]=t[r]}));return e},_babelClassPlugins:function(){var t=this;function e(t){return"StringLiteral"==t.type?t.value:t.name}function r(t){var e=function(t){if(!t)return null;qx.lang.Type.isArray(t)||(t=[t]);var e={};t.forEach((function(t){var r=qx.tool.compiler.jsdoc.Parser.parseComment(t.value);for(var n in r){var o=r[n];e[n]?qx.lang.Array.append(e[n],o):e[n]=o}}));return e}(t.leadingComments);e&&i(e,t.loc);return e}function i(e,r){if(!e)return e;e["@use"]&&e["@use"].forEach((function(e){t._requireClass(e.body,{where:"use",load:!1,location:r})}));e["@require"]&&e["@require"].forEach((function(e){t._requireClass(e.body,{where:"require",load:!1,location:r})}));e["@optional"]&&e["@optional"].forEach((function(e){t.addIgnore(e.body)}));e["@ignore"]&&e["@ignore"].forEach((function(e){t.addIgnore(e.body)}));e["@external"]&&e["@external"].forEach((function(e){t.addExternal(e.body);t._requireAsset(e.body)}));e["@asset"]&&e["@asset"].forEach((function(e){t._requireAsset(e.body)}));e["@usefont"]&&e["@usefont"].forEach((function(e){t._requireFont(e.body,r)}));return e}function p(e,n,i){var a;n=n||e.node;i=i||n.id||null;var c=t.__P_478_26&&t.__P_478_26._topLevel&&"members"==t.__P_478_26._topLevel.keyName&&e.parentPath.parentPath.parentPath==t.__P_478_26._topLevel.path;i&&t.addDeclaration(i.name);t.pushScope(i?i.name:null,n,c);function s(e){"AssignmentPattern"==e.type?s(e.left):"RestElement"==e.type?t.addDeclaration(e.argument.name):"Identifier"==e.type?t.addDeclaration(e.name):"ArrayPattern"==e.type?e.elements.forEach((function(t){return s(t)})):"ObjectPattern"==e.type?e.properties.forEach((function(t){return s(t.value)})):t.addMarker("testForFunctionParameterType",n.loc,e.type)}n.params.forEach((function(t){s(t)}));r(n);if("_createQxObjectImpl"===(null===(a=n.key)||void 0===a?void 0:a.name)&&"interface"!==t.__P_478_26.type){var u;if("mixin"===t.__P_478_26.type){if("qx.core.MObjectId"===t.__P_478_26.className)return;qx.tool.compiler.Console.print("qx.tool.compiler.compiler.mixinQxObjectImpl",t.__P_478_26.className)}var l="{\n            let object = qx.core.MObjectId.handleObjects(".concat(null!==(u=t.__P_478_26.className)&&void 0!==u?u:"this.constructor",", this, ...arguments);\n            if (object !== undefined) {\n              return object;\n            }\n          }"),f=o.parse(l,{errorRecovery:!0}).program.body[0],p=n.body.body;n.body.body=[f].concat(p);e.skip()}}function h(e,r){r=r||e.node;t.popScope(r)}var y={enter:function(t){return p(t)},exit:function(t){return h(t)}};function d(e,n,o){var i;if(n){var a=t.__P_478_26[e];void 0===a&&(a=t.__P_478_26[e]={});void 0===(i=a[n])&&(i=a[n]={})}else void 0===(i=t.__P_478_26[e])&&(i=t.__P_478_26[e]={});i.location=o.loc;if(o.leadingComments){var c=r(o);c&&(i.jsdoc=c)}if("members"===e||"statics"===e){"ObjectMethod"==o.type||"FunctionExpression"===o.value.type||"MemberExpression"===o.value.type?i.type="function":i.type="variable";o.async&&(i.async=!0);n.startsWith("__")?i.access="private":n.startsWith("_")?i.access="protected":i.access="public"}return i}var m=0,v=!1,g={MemberExpression:function(e){var r=c(e.node);t._requireClass(r,{location:e.node.loc});var n=t.__P_478_0.getSymbolType(r);n&&"class"==n.symbolType&&this.collectedClasses.push(r)}};function _(e,r,n){var o;if("ObjectExpression"==e.type){o={};var i=n?n+".":"";e.properties.forEach((function(t){var e=t.key.name;if("ObjectMethod"==t.type)o[e]="[[ ObjectMethod Function ]]";else{var n=_(t.value,r,i+e);o[e]=n}}))}else if("Literal"==e.type||"StringLiteral"==e.type||"BooleanLiteral"==e.type||"NumericLiteral"==e.type||"NullLiteral"==e.type){if("string"==typeof e.value){var a=!1;!r||"apply"!==n&&"transform"!==n&&"isEqual"!==n||(a=!0);e.value=t.encodePrivate(e.value,a,e.loc)}o=e.value}else if("ArrayExpression"==e.type){o=[];e.elements.forEach((function(t){o.push(_(t,r))}))}else if("Identifier"==e.type){e.name=t.encodePrivate(e.name,!0,e.loc);o=e.name}else if("CallExpression"==e.type||"FunctionExpression"==e.type||"ArrowFunctionExpression"==e.type)o=new Function("[[ Function ]]");else if("MemberExpression"==e.type)o=c(e);else if("UnaryExpression"==e.type){if("-"==e.operator){var s=_(e.argument,r);if("number"==typeof s)return-1*s}else if("!"==e.operator){var u=_(e.argument,r);if("boolean"==typeof u)return!u}o="[[ UnaryExpression ]]"}else if("NewExpression"==e.type||"BinaryExpression"==e.type)o="[[ "+e.type+" ]]";else{t.warn("Cannot interpret AST "+e.type+" at "+t.__P_478_1+(e.loc?" ["+e.loc.start.line+","+e.loc.start.column+"]":""));o=null}return o}var x={class:{static:{"@":"object",type:"string",statics:"object",environment:"object",defer:"function"},normal:{"@":"object","@construct":"object","@destruct":"object",type:"string",extend:"function",implement:"object",include:"object",construct:"function",statics:"object",properties:"object",members:"object",environment:"object",events:"object",defer:"function",destruct:"function",objects:"object"}},interface:{extend:"object",statics:"object",members:"object",properties:"object",events:"object"},mixin:{include:"object",statics:"object",members:"object",properties:"object",events:"object",destruct:"function",construct:"function",objects:"object"},theme:{title:"string",aliases:"object",type:"string",extend:"object",colors:"object",borders:"object",decorations:"object",fonts:"object",icons:"object",widgets:"object",appearances:"object",meta:"object",include:"object",patch:"object",boot:"function"}};var b={construct:"$$constructor",destruct:"$$destructor",defer:null};function w(r){var n=r.node,o=e(n.key),i=x[t.__P_478_26.type];"class"===t.__P_478_26.type&&(i=i[t.__P_478_26.isStatic?"static":"normal"]);void 0===i[o]&&t.addMarker("compiler.invalidClassDefinitionEntry",n.loc,t.__P_478_26.type,o)}function q(e,r,n){if("defer"==r){t.__P_478_29=!0;t.__P_478_24=!0}var o=Object.keys(b).includes(r);t.__P_478_26.functionName=o?b[r]:r;o&&d(r,null,n);p(e,n);e.traverse(E);h(e,n);e.skip();t.__P_478_26.functionName=null}var P={ClassBody:{enter:function(t){m++},exit:function(t){m--}},ObjectMethod:function(t){var r=t.node;if(t.parentPath.parentPath==this.classDefPath){var n=e(t.node.key);w(t);q(t,n,r)}else{t.skip();p(t,r);t.traverse(E);h(t,r)}},ObjectProperty:function(r){var i=r.node;if(r.parentPath.parentPath==this.classDefPath){var a=e(i.key);w(r);if(Object.keys(b).includes(a)){var s=r.node.value;s.leadingComments=(r.node.leadingComments||[]).concat(s.leadingComments||[]);q(r,a,s)}else if("extend"==a)if(function(e){return"MemberExpression"==e.value.type||"Identifier"==e.value.type||"NullLiteral"==e.value.type||"class"!==t.__P_478_26.type&&"ArrayExpression"==e.value.type&&e.value.elements.every((function(t){return"MemberExpression"==t.type||"Identifier"==t.type}))}(i)){t.__P_478_26.superClass=c(i.value);t._requireClass(t.__P_478_26.superClass,{location:r.node.loc})}else{t.addMarker("compiler.invalidExtendClause",i.value.loc);t.__P_478_27=!0}else if("type"==a){var u=i.value.value;t.__P_478_26.isAbstract="abstract"===u;t.__P_478_26.isStatic="static"===u;t.__P_478_26.isSingleton="singleton"===u}else if("implement"==a){r.skip();r.traverse(g,{collectedClasses:t.__P_478_26.interfaces})}else if("include"==a||"patch"==a){r.skip();r.traverse(g,{collectedClasses:t.__P_478_26.mixins})}else if("members"==a||"statics"==a||"objects"==a||"@"==a){t.__P_478_26._topLevel={path:r,keyName:a};r.skip();"members"===a&&"class"===t.__P_478_26.type&&function(e){var r;if(e.parent.properties.some((function(t){var e;return"objects"===(null===(e=t.key)||void 0===e?void 0:e.name)}))){var i=e.node,a=null==i||null===(r=i.value)||void 0===r||null===(r=r.properties)||void 0===r?void 0:r.map((function(t){return t.key.name}));if(a){if(!a.includes("_createQxObjectImpl")){var c=o.parse("{\n          return super._createQxObjectImpl(...arguments);\n        }",{errorRecovery:!0}).program.body[0];i.value.properties.push(n.objectMethod("method",n.identifier("_createQxObjectImpl"),[],c))}}else t.addMarker("compiler.membersNotAnObject",e.loc,t.__P_478_26.type)}}(r);r.traverse(E);t.__P_478_26._topLevel=null}else if("properties"==a){r.skip();i.value.properties?i.value.properties.forEach((function(n){var o=e(n.key),i=d("properties",o,n),a=_(n.value,!0);i.name=o;i.propertyType="new";["refine","themeable","event","inheritable","apply","async","group","nullable","init","transform"].forEach((function(t){return i[t]=a[t]}));void 0!==a.nullable&&(i.allowNull=a.nullable);if(void 0!==a.check){var c;if(qx.lang.Type.isArray(a.check))c=i.possibleValues=a.check;else{i.check=a.check;c=[a.check]}c.forEach((function(e){if(!qx.tool.compiler.ClassFile.SYSTEM_CHECKS[e]){var n=t.__P_478_0.getSymbolType(e);"class"==(null==n?void 0:n.symbolType)&&t._requireClass(e,{load:!1,usage:"dynamic",location:r.node.loc})}}))}void 0!==a.init&&(i.defaultValue=a.init)})):t.addMarker("class.invalidProperties",i.loc||null);r.traverse(E)}else if("events"==a){r.skip();i.value.properties&&i.value.properties.forEach((function(t){var r=e(t.key),n=d("events",r,t);n.name=r;n.type=_(t.value)}));r.traverse(E)}else if("aliases"==a){r.skip();if(i.value.properties){var l=d("aliases",null,i);l.aliasMap={};i.value.properties.forEach((function(t){var r=e(t.key),n=e(t.value);l.aliasMap[r]=n}))}else t.addMarker("class.invalidAliases",i.loc||null)}else if("meta"==a){r.skip();if(i.value.properties){var f=d("themeMeta",null,i);f.themeMetaMap={};i.value.properties.forEach((function(t){var r=e(t.key),n=c(t.value);f.themeMetaMap[r]=n}))}else t.addMarker("class.invalidThemeMeta",i.loc||null);r.traverse(E)}}else{r.skip();r.traverse(E)}}},L={"qx.Class.define":"class","qx.Mixin.define":"mixin","qx.Theme.define":"theme","qx.Interface.define":"interface","qx.Bootstrap.define":"class"},E={NewExpression:{enter:function(e){var r=c(e.node.callee);t._requireClass(r,{usage:"dynamic",location:e.node.loc})},exit:function(e){if(t.__P_478_0.isAddCreatedAt()){var r=n.memberExpression(n.identifier("qx"),n.identifier("$$createdAt")),o=n.callExpression(r,[e.node,n.stringLiteral(t.__P_478_1.replace(/\./g,"/")+".js"),n.numericLiteral(e.node.loc?e.node.loc.start.line:0),n.numericLiteral(e.node.loc?e.node.loc.start.column:0),n.booleanLiteral(t.__P_478_0.isVerboseCreatedAt())]);e.replaceWith(o);e.skip()}}},ExpressionStatement:{enter:function(t){r(t.node)},exit:function(t){r(t.node)}},EmptyStatement:function(t){r(t.node)},JSXElement:function(e){t.__P_478_32=!0},Program:{exit:function(e){var r=t._compileDbClassInfo(),i={},a=!1;if(r.dependsOn){i.dependsOn={};Object.keys(r.dependsOn).forEach((function(t){var e=i.dependsOn[t]=Object.assign({},r.dependsOn[t]);if(e.load){delete e.load;e.require=!0;a=!0}}))}if(r.environment){i.environment=r.environment;var c=r.environment.required;if(c)for(var s in c)if(c[s].load){a=!0;break}}var u=n.variableDeclaration("var",[n.variableDeclarator(n.identifier("$$dbClassInfo"),l(i))]),f=[u];if(a){u=o.parse("qx.Bootstrap.executePendingDefers($$dbClassInfo);").program.body;f.push(u[0])}e.node.body.forEach((function(t){return f.push(t)}));u=o.parse(t.__P_478_1+".$$dbClassInfo = $$dbClassInfo;").program.body;f.push(u[0]);var p=n.blockStatement(f),h=n.expressionStatement(n.callExpression(n.functionExpression(null,[],p),[]));e.node.body.splice(0,e.node.body.length,h)}},ClassBody:{enter:function(t){m++},exit:function(t){m--}},Literal:function(e){"string"==typeof e.node.value&&(e.node.value=t.encodePrivate(e.node.value,!1,e.loc))},Identifier:function(e){e.node.name=t.encodePrivate(e.node.name,!0,e.loc);for(var r={ObjectProperty:1,ObjectMethod:1,FunctionExpression:1,FunctionStatement:1,ArrowFunctionExpression:1,VariableDeclarator:1,FunctionDeclaration:1,CatchClause:1,AssignmentPattern:1,RestElement:1,ArrayPattern:1,SpreadElement:1,ClassDeclaration:1,ClassMethod:1,LabeledStatement:1,BreakStatement:1},n={AssignmentExpression:1,BooleanExpression:1,CallExpression:1,BinaryExpression:1,UnaryExpression:1,WhileStatement:1,IfStatement:1,NewExpression:1,ReturnStatement:1,ConditionalExpression:1,LogicalExpression:1,ForInStatement:1,ArrayExpression:1,SwitchStatement:1,SwitchCase:1,ThrowStatement:1,ExpressionStatement:1,UpdateExpression:1,SequenceExpression:1,ContinueStatement:1,ForStatement:1,TemplateLiteral:1,AwaitExpression:1,DoWhileStatement:1,ForOfStatement:1,TaggedTemplateExpression:1,ClassExpression:1,OptionalCallExpression:1,JSXExpressionContainer:1,JSXSpreadAttribute:1},o=e;o;){var i=o.parentPath.node.type;if("MemberExpression"!=i&&"OptionalMemberExpression"!=i){if(r[i])return;n[i]||t.addMarker("testForUnresolved",e.node.loc,i);break}o=o.parentPath}var a=c(o.node);if(!a.startsWith("(")){var s=a.split(".");t.addReference(s,o.node.loc)}},CallExpression:{enter:function(e){var r,o,s,l;function f(t){if(t>=e.node.arguments.length)return null;var r=e.node.arguments[t];return"StringLiteral"==r.type?r.value:null}function p(r){var n=e.node.loc?e.node.loc.start.line:0,o=t.__P_478_10[r.msgid];if(o){qx.lang.Type.isArray(o.lineNo)||(o.lineNo=[o.lineNo]);o.lineNo.push(n)}else{r.lineNo=n;t.__P_478_10.push(r)}}var h=t.__P_478_0.getApplicationTypes();if("Identifier"==e.node.callee.type&&"require"==(null===(r=e.node)||void 0===r||null===(r=r.callee)||void 0===r?void 0:r.name)&&1==(null===(o=e.node.arguments)||void 0===o?void 0:o.length)&&h.includes("browser")){for(l=t.__P_478_13;l&&!l.vars.require;l=l.parent);if(!l){var y=e.node.arguments[0];if(n.isLiteral(y))if("string"!=typeof y.value)t.addMarker("compiler.requireLiteralArguments",e.node.loc,y.value);else{qx.tool.compiler.Console.getInstance().getVerbose()&&qx.tool.compiler.Console.log("".concat(t.__P_478_1,":").concat(e.node.loc.start.line,":")+" automatically detected 'require(".concat(y.value,")`"));t.addCommonjsModule(y.value,t.__P_478_1,e.node.loc.start.line);t.addIgnore("require")}}}if(n.isMemberExpression(e.node.callee)||0==m&&("Super"==(null===(s=e.node.callee.object)||void 0===s?void 0:s.type)||"Super"==e.node.callee.type)){var g,_=c(e.node.callee),x=null;if("Identifier"==(null===(g=e.node.callee.object)||void 0===g?void 0:g.type)){for(var b=e.node.callee.object.name,w=b,q=!1,k=t.__P_478_13;k;k=k.parent){for(;!q;){var S=k.vars[w];if("this"===S){q=!0;break}if("string"!=typeof S)break;w=S}if(q||k.isClassMember)break}if(q){_="this"+_.substring(b.length);x=b}}if(L[_]){t.__P_478_30=_.match(/\.([a-zA-Z]+)\./)[1];var O=e.node,j=O.arguments[0].value,T=O.arguments[1];if("ObjectExpression"!=T.type)return;t.__P_478_33(j);v&&t._requireClass("qx.core.Environment",{location:v,defer:!0});var C=d("clazz",null,e.parent);t.__P_478_26.type=L[_];if("Class"==t.__P_478_30||"Bootstrap"==t.__P_478_30){var A=T.properties.find((function(t){return"Identifier"==t.key.type&&"type"==t.key.value}));A&&t.__P_478_26.isStatic==A.value.type=="Literal"&&A.value.value}i(C.jsdoc,e.node.loc);t._requireClass(_,{usage:"dynamic",location:e.node.loc});e.skip();var G=e.node.arguments[1];if(G.properties.find((function(t){return"objects"==t.key.name}))){if(!G.properties.find((function(t){return"members"==t.key.name}))){var R=n.objectProperty(n.identifier("members"),n.objectExpression([]));G.properties.push(R)}}e.traverse(P,{classDefPath:e});t.__P_478_34(j)}else if("qx.core.Environment.add"==_){var I=e.node.arguments[0];if(n.isLiteral(I))if("string"!=typeof I.value)a.error("Invalid argument to qx.core.Environment.add: "+I.value);else{t.__P_478_7.provided[I.value]=!0;if(!I.value.startsWith(t.__P_478_1)&&!Object.prototype.hasOwnProperty.call(qx.tool.compiler.ClassFile.ENVIRONMENT_CONSTANTS,I.value)){var N=t.__P_478_4.getSymbolType(I.value);N&&"environment"==N.symbolType||t.addMarker("environment.unreachable",e.node.loc,I.value)}}t._requireClass("qx.core.Environment",{usage:"dynamic",location:e.node.loc})}else if("qx.core.Environment.get"==_){var F=e.node.arguments[0];n.isLiteral(F)&&("string"!=typeof F.value?a.error("Invalid argument to qx.core.Environment.get: "+F.value):t.addEnvCheck(F.value,e.node.loc));t._requireClass("qx.core.Environment",{usage:"dynamic",location:e.node.loc});e.skip();e.traverse(E)}else if("qx.core.Environment.select"==_){var D=e.node.arguments[0];n.isLiteral(D)&&("string"!=typeof D.value?a.error("Invalid argument to qx.core.Environment.select: "+D.value):t.addEnvCheck(D.value,e.node.loc));t._requireClass("qx.core.Environment",{usage:"dynamic",location:e.node.loc});e.skip();e.traverse(E)}else if("this.base"==_||0==m&&("super"==_||_.startsWith("super."))){var M;if("Mixin"==t.__P_478_30){M=n.callExpression(u("qx.Mixin.baseClassMethod"),[u("this.constructor"),n.identifier(t.__P_478_26.className),n.stringLiteral(t.__P_478_26.functionName)]);M=n.memberExpression(M,n.identifier("call"))}else M="$$constructor"==t.__P_478_26.functionName?u(t.__P_478_26.superClass+".constructor.call"):t.__P_478_26.className?u(t.__P_478_26.className+".superclass.prototype."+t.__P_478_26.functionName+".call"):u(t.__P_478_26.superClass+".prototype."+t.__P_478_26.functionName+".call");var U=x?n.identifier(x):n.thisExpression();_.startsWith("super")?e.node.arguments.unshift(U):e.node.arguments[0]=U;var B=n.callExpression(M,e.node.arguments);e.replaceWith(B)}else if("this.base.apply"==_||"this.base.call"==_){var $,W="this.base.apply"==_?"apply":"call";$="Mixin"==t.__P_478_30?u("this.constructor.superclass.prototype."+t.__P_478_26.functionName+".call"):"$$constructor"==t.__P_478_26.functionName?u(t.__P_478_26.superClass+".constructor."+W):u(t.__P_478_1+".prototype."+t.__P_478_26.functionName+".base."+W);var J=n.callExpression(n.memberExpression(e.node.arguments[1],n.identifier("slice")),[]),Y=n.callExpression(n.memberExpression(J,n.identifier("shift")),[]),H=n.callExpression($,[e.node.arguments[0],Y]);e.replaceWith(H)}else if("this.self"==_){var V=u(t.__P_478_26.className);e.replaceWith(V)}else if("this.tr"==_||"this.marktr"==_||"qx.locale.Manager.tr"==_||"qx.locale.Manager.marktr"==_){var z=f(0);z?p({msgid:z}):t.addMarker("translate.invalidMessageId",e.node.loc,z)}else if("this.trn"==_||"qx.locale.Manager.trn"==_){var Q=f(0),K=f(1);Q&&K?p({msgid:Q,msgid_plural:K}):t.addMarker("translate.invalidMessageIds",e.node.loc,Q,K)}else if("this.trc"==_||"qx.locale.Manager.trc"==_){var X=f(0),Z=f(1);X&&Z?p({msgid:Z,comment:X}):t.addMarker("translate.invalidMessageIds",e.node.loc,X,Z)}else if("this.trnc"==_||"qx.locale.Manager.trnc"==_){var tt=f(0),et=f(1),rt=f(2);tt&&et&&rt?p({msgid:et,msgid_plural:rt,comment:tt}):t.addMarker("translate.invalidMessageIds3",e.node.loc,tt,et,rt)}else{var nt=_.lastIndexOf(".");if(nt>0){var ot=_.substring(0,nt);t.hasDeclaration(ot)||t._requireClass(ot,{usage:"dynamic",location:e.node.loc})}}}}},MemberExpression:{exit:function(e){if("Literal"!=e.node.object.type&&"ArrayExpression"!=e.node.object.type&&("MemberExpression"!=e.node.object.type||"ArrayExpression"!=e.node.object.object.type)){var r=c(e.node);if(!r.startsWith("(")){var n=r.split(".");if("this"!==n[0]&&!t.__P_478_18[n[0]]&&!t.hasDeclaration(n[0])){var o=t._requireClass(r,{location:e.node.loc});if(!o||!o.className){if("MemberExpression"==e.container.type)return;t.addReference(n,e.node.loc)}}}}}},ObjectProperty:{exit:function(t){if("readable"==this.__P_478_21&&"FunctionExpression"==t.node.value.type&&null===t.node.value.id){var e="string"==typeof t.node.key.value?t.node.key.value:t.node.key.name;qx.tool.compiler.ClassFile.RESERVED_WORDS[e]||(t.node.value.id=n.identifier(e))}}},Property:function(r){if(t.__P_478_26&&t.__P_478_26._topLevel&&t.__P_478_26._topLevel.path==r.parentPath.parentPath){t.__P_478_26.functionName=e(r.node.key);d(t.__P_478_26._topLevel.keyName,t.__P_478_26.functionName,r.node);r.skip();var o=null;if("readable"==this.__P_478_21&&"FunctionExpression"==r.node.value.type&&null===r.node.value.id){var i="string"==typeof r.node.key.value?r.node.key.value:r.node.key.name;qx.tool.compiler.ClassFile.RESERVED_WORDS[i]||(o=n.identifier(i))}r.traverse(E);o&&(r.node.value.id=o);t.__P_478_26.functionName=null}},ObjectMethod:function(r){if(t.__P_478_26&&t.__P_478_26._topLevel&&t.__P_478_26._topLevel.path==r.parentPath.parentPath){t.__P_478_26.functionName="objects"==t.__P_478_26._topLevel.keyName?"_createQxObjectImpl":e(r.node.key);d(t.__P_478_26._topLevel.keyName,t.__P_478_26.functionName,r.node);r.skip();p(r);r.traverse(E);h(r);t.__P_478_26.functionName=null}else{r.skip();p(r);r.traverse(E);h(r)}},FunctionDeclaration:y,FunctionExpression:y,ArrowFunctionExpression:y,VariableDeclaration:{exit:function(e){r(e.node);e.node.declarations.forEach((function(e){if("Identifier"==e.id.type){var r=null;e.init&&("Identifier"==e.init.type?r=e.init.name:"ThisExpression"==e.init.type&&(r="this"));t.addDeclaration(e.id.name,r)}else"ObjectPattern"==e.id.type?e.id.properties.forEach((function(e){"AssignmentPattern"==e.value.type?t.addDeclaration(e.value.left.name):t.addDeclaration(e.value.name)})):"ArrayPattern"==e.id.type&&e.id.elements.forEach((function(e){e&&("AssignmentPattern"==e.type?t.addDeclaration(e.left.name):"RestElement"==e.type?t.addDeclaration(e.argument.name):t.addDeclaration(e.name))}))}))}},ClassDeclaration:function(e){t.addDeclaration(e.node.id.name)},ClassMethod:{enter:function(t){p(t,t.node.value,t.node.key)},exit:function(t){h(t,t.node.value,t.node.key)}},CatchClause:{enter:function(e){t.pushScope(null,e.node);e.node.param&&t.addDeclaration(e.node.param.name)},exit:function(e){t.popScope(e.node)}}};return{CodeElimination:{visitor:{ClassBody:{enter:function(t){m++},exit:function(t){m--}},CallExpression:function(e){var r=c(e.node.callee);if(("qx.core.Environment.select"===r||"qx.core.Environment.get"===r)&&n.isLiteral(e.node.arguments[0])){var o=e.node.arguments[0],i=t.__P_478_0.getEnvironment()[o.value];if(void 0!==i){if("qx.core.Environment.get"===r){e.skip();e.replaceWithSourceString(f(i));return}if("qx.core.Environment.select"===r){var a=e.get("arguments.1"),s=a.node.properties.find((function(t){return t.key.value===i.toString()}));s||(s=a.node.properties.find((function(t){return"default"===t.key.value})));if(s){e.replaceWith(s.value);return}}}v=e.node.loc}},IfStatement:{exit:function(t){var e=t.node;n.isLiteral(e.test)&&(e.test.value?t.replaceWith(e.consequent):e.alternate?t.replaceWith(e.alternate):t.remove())}},LogicalExpression:{exit:function(t){var e=t.node;if(n.isLiteral(e.left)&&n.isLiteral(e.right)){var r="&&"==e.operator&&e.left.value&&e.right.value||"||"==e.operator&&(e.left.value||e.right.value);t.replaceWith(l(r))}}},BinaryExpression:{exit:function(t){var e=t.node;if(s(e.left)&&s(e.right))if("+-*/".indexOf(e.operator)>-1){var r;switch(e.operator){case"+":r=e.left.value+e.right.value;break;case"-":r=e.left.value-e.right.value;break;case"/":r=e.left.value/e.right.value;break;case"*":r=e.left.value*e.right.value}t.skip();t.replaceWithSourceString(f(r))}else{var o;switch(e.operator){case"==":o=e.left.value==e.right.value;break;case"===":o=e.left.value===e.right.value;break;case"!=":o=e.left.value!=e.right.value;break;case"!==":o=e.left.value!==e.right.value}void 0!==o&&t.replaceWith(n.booleanLiteral(Boolean(o)))}}},UnaryExpression:{exit:function(t){"!"===t.node.operator&&n.isLiteral(t.node.argument)&&t.replaceWith(n.booleanLiteral(!t.node.argument.value))}}}},Compiler:{visitor:E}}},__P_478_33:function(t){var e=(t||"").lastIndexOf("."),r={className:t,packageName:e>-1?t.substring(0,e):null,name:e>-1?t.substring(e+1):t,superClass:null,interfaces:[],mixins:[],functionName:null};this.__P_478_2.push(r);this.__P_478_26=r;this.__P_478_3[t]=r;this.__P_478_22++},__P_478_34:function(t){if(!this.__P_478_2.length)throw new Error("No __metaStack entries to pop");var e=this.__P_478_2[this.__P_478_2.length-1];if(t&&e.className!=t)throw new Error("Wrong __metaStack entries to pop, expected "+t+" found "+e.className);this.__P_478_2.pop();e=this.__P_478_2[this.__P_478_2.length-1]||null;this.__P_478_26=e},pushScope:function(t,e,r){this.__P_478_13={functionName:t,parent:this.__P_478_13,loc:e.loc,vars:{},unresolved:{},isClassMember:Boolean(r)}},popScope:function(t){var e=this.__P_478_13,r=this.__P_478_13=this.__P_478_13.parent,n=r.unresolved;for(var o in e.unresolved)if(!r.vars[o]){var i=n[o];i||(i=n[o]={name:o,locations:[]});i.locations.push.apply(i.locations,e.unresolved[o].locations)}},isLoadScope:function(){return!this.__P_478_13.parent},hasDefer:function(){return this.__P_478_29},addDeclaration:function(t,e){if(void 0===this.__P_478_13.vars[t]){this.__P_478_13.vars[t]=e||!0;var r=this.__P_478_13.unresolved;delete r[t];var n=new RegExp(t+"\\.");for(var o in r)n.test(o)&&delete r[o]}},hasDeclaration:function(t){var e=t.indexOf(".");e>-1&&(t=t.substring(0,e));for(var r=this.__P_478_13;r;r=r.parent)if(void 0!==r.vars[t])return!0;return!1},addReference:function(t,e){qx.lang.Type.isArray(t)||(t=t.split("."));var r=this.__P_478_13;if(void 0===r.vars[t[0]]&&"this"!==t[0]&&"[]"!==t[0]&&!this.__P_478_18[t[0]]&&!this.hasDeclaration(t[0])){for(var n="",o=0;o<t.length;o++){o&&(n+=".");n+=t[o];if(this.__P_478_18[n]||this.isIgnored(n))return}(t=n)==this.__P_478_1||t.startsWith(this.__P_478_1+".")||t.startsWith("(")||(r.unresolved[t]?e&&r.unresolved[t].locations.push(e):r.unresolved[t]={name:t,locations:e?[e]:[],load:this.isLoadScope(),defer:this.__P_478_24})}},encodePrivate:function(t,e,r){if({__proto__:1,__iterator__:1,__dirname:1,__filename:1}[t]||"off"==this.__P_478_21||!t.startsWith("__")||!t.match(/^[0-9a-z_$]+$/i))return t;if(t.indexOf("__P_")>-1)return t;var n=this.__P_478_19[t];if(!n){if(!e){this.__P_478_20[t]=!0;return t}if(this.__P_478_20[t]){this.addMarker("class.blockedMangle",r,t);return t}var o=this.__P_478_0.getDatabase();o.manglePrefixes||(o.manglePrefixes={nextPrefix:1,classPrefixes:{}});var i=o.manglePrefixes,a=i.classPrefixes[this.__P_478_1];if(!a){a="__P_"+ ++i.nextPrefix+"_";i.classPrefixes[this.__P_478_1]=a}n="readable"==this.__P_478_21?this.__P_478_19[t]=t+a+Object.keys(this.__P_478_19).length:this.__P_478_19[t]=a+Object.keys(this.__P_478_19).length}return n},deleteReference:function(t){delete this.__P_478_13.unresolved[t];var e=t+".";for(var r in this.__P_478_13.unresolved)r.startsWith(e)&&delete this.__P_478_13.unresolved[r]},addExternal:function(t){this.__P_478_14.indexOf(t)<0&&this.__P_478_14.push(t)},addCommonjsModule:function(t,e,r){this.__P_478_15[t]||(this.__P_478_15[t]=new Set);this.__P_478_15[t].add("".concat(e,":").concat(r))},addIgnore:function(t){var e=this.__P_478_13;e.ignore||(e.ignore={});t.split(",").forEach((function(t){(t=t.trim()).length&&(t.endsWith(".*")?e.ignore[t]=t.substring(0,t.length-2):t.endsWith("*")?e.ignore[t]=t.substring(0,t.length-1):e.ignore[t]=!0)}))},isIgnored:function(t){for(var e=this.__P_478_13;e;e=e.parent)if(e.ignore){if(e.ignore[t])return!0;for(var r in e.ignore)if(!0!==e.ignore[r]&&t.startsWith(e.ignore[r]))return!0}return!1},removeIgnore:function(t){var e=this.__P_478_13;if(e){t.split(",").forEach((function(t){return delete e.ignore[t]}))}},addEnvCheck:function(t,e){var r=this,n=r.isLoadScope(),o=r.__P_478_24,i=r.__P_478_26&&"$$constructor"==r.__P_478_26.functionName,a=r.__P_478_7.required[t];a||(a=r.__P_478_7.required[t]={});n&&(a.load=!0);o&&(a.defer=!0);i&&(a.construct=!0);r._requireClass("qx.core.Environment",{location:e});var c=r.__P_478_0.getSymbolType(t);if(!Object.prototype.hasOwnProperty.call(qx.tool.compiler.ClassFile.ENVIRONMENT_CONSTANTS,t)){var s=a.load;c&&"environment"==c.symbolType&&(s=!0);r._requireClass(t,{load:s,location:e});c&&"environment"==c.symbolType&&(a.className=c.className)}},addMarker:function(t,e){var r=t="qx.tool.compiler."+t,n=t.indexOf("#");if(n>-1)t=t.substring(0,n);else{r+="#";e&&(e.line?r+=e.line:e.start&&e.start.line&&(r+=e.start.line))}if(!this.__P_478_12[r]){this.__P_478_12[r]=!0;var o={msgId:t};if(e){e.line&&(e={start:e});if(e.start){var i={line:e.start.line};e.start.column&&(i.column=e.start.column);o.pos={start:i};if(e.end&&e.end.line){var a={line:e.end.line};e.end.column&&(a.column=e.end.column);o.pos.end=a}}}var c=qx.lang.Array.fromArguments(arguments,2);c.length&&(o.args=c);this.__P_478_11.push(o)}},_requireClass:function(t,e){var r=this;if(qx.lang.Type.isArray(t)){t.forEach((function(t){return r._requireClass(t)}));return null}var n=this;if(t==this.__P_478_1)return null;if(!t)throw new Error("No classname");if(this.isIgnored(t))return null;var o={load:n.isLoadScope(),defer:n.__P_478_24,construct:n.__P_478_26&&"$$constructor"==n.__P_478_26.functionName};if(e)for(var i in e)o[i]=e[i];var a=n.__P_478_0.getSymbolType(t),c=a?a.symbolType:null,s=a?a.className:null;if("package"!=c&&s&&s!=n.__P_478_1){if("member"==c&&n.isIgnored(s))return null;var u=n.__P_478_6[s];u||(u=n.__P_478_6[s]={});void 0!==o.where&&("ignore"==o.where?u.ignore=!0:"require"==o.where&&(u.require=!0));if(o.load){u.load=!0;if("dynamic"===o.usage){"static"!==u.usage&&(u.usage="dynamic");u.load=!0}else if(!u.load){u.load=!0;u.usage="static"}}if(o.defer){o.load?u.defer="load":"load"!==u.defer&&(u.defer="runtime");t.startsWith(n.__P_478_1)||qx.tool.compiler.ClassFile.DEFER_SAFE_SYMBOLS.some((function(e){return t.startsWith(e)}))}o.construct&&(u.construct=!0);n.deleteReference(s)}return a},_requireAsset:function(t){t.indexOf("/")<0&&t.indexOf(".")>-1&&(t=t.replace(/\./g,"/"));qx.lang.Array.contains(this.__P_478_8,t)||this.__P_478_8.push(t)},getAssets:function(){return this.__P_478_8},_requireFont:function(t,e){this.__P_478_9[t]={name:t,loc:e}},__P_478_35:function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if("Property"==n.type){if("Identifier"==n.key.type&&n.key.name==e)return n;if("StringLiteral"==n.key.type&&n.key.value==e)return n}}return null},getRequiredClasses:function(){return this.__P_478_6},getUnresolvedSymbols:function(){return this.__P_478_13.unresolved},getClassName:function(){return this.__P_478_1}},defer:function(t){t.RESERVED_WORDS={};"abstract  arguments await  boolean break byte  case  catch char  class  const continue debugger  default delete  do double  else  enum eval export extends  false final finally float for function goto  if  implements  import in  instanceof  int interface let  long  native  new null  package private protected public  return  short static super  switch  synchronized  this throw throws  transient true try typeof  var void volatile  while with  yield".split(/\s+/).forEach((function(e){return t.RESERVED_WORDS[e]=!0}));t.SYSTEM_CHECKS={};"Boolean,String,Number,Integer,PositiveNumber,PositiveInteger,Error,RegExp,Object,Array,Map,Function,Date,Node,Element,Document,Window,Event,Class,Mixin,Interface,Theme,Color,Decorator,Font".split(",").forEach((function(e){return t.SYSTEM_CHECKS[e]=!0}))},statics:{getNamespace:function(t){var e=t.match(/^([^.]+)\./);return e&&e[1]||null},JSX_OPTIONS:{pragma:"qx.html.Jsx.createElement",pragmaFrag:"qx.html.Jsx.FRAGMENT",throwIfNamespace:!1},DEFER_SAFE_SYMBOLS:["qx.core.Environment","qx.Bootstrap","qx.core.Aspect"],QX_GLOBALS:["qx.$$domReady","qx.$$environment","qx.$$libraries","qx.$$loader","qx.$$locales","qx.$$namespaceRoot","qx.$$resources","qx.$$packageData","qx.$$start","qx.$$translations"],COMMON_GLOBALS:["Array","ArrayBuffer","Boolean","Date","DataView","EvalError","Error","Float32Array","Float64Array","Function","GeneratorFunction","Generator","Infinity","Int8Array","Int16Array","Int32Array","JSON","Map","Math","NaN","Number","Object","Proxy","Promise","RangeError","ReferenceError","Reflect","RegExp","Set","String","Symbol","SyntaxError","TypedArray","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","URL","WeakMap","WeakSet","arguments","atob","btoa","console","clearInterval","clearTimeout","decodeURI","decodeURIComponent","document","encodeURI","encodeURIComponent","escape","error","eval","isNaN","isFinite","navigator","parseInt","parseFloat","setInterval","setTimeout","undefined","unescape","window"],BROWSER_GLOBALS:["ActiveXObject","Blob","CustomEvent","DOMParser","DOMException","Event","FileReader","FormData","Image","MutationObserver","XPathResult","XMLHttpRequest","XMLSerializer","XPathEvaluator","alert","document","history","location","navigator","performance","getComputedStyle","localStorage"],NODE_GLOBALS:["Module","Buffer","require","module","process","setImmediate","__dirname","__filename"],RHINO_GLOBALS:["Packages","java"],RESERVED_WORDS:null,ENVIRONMENT_CONSTANTS:{true:!0,"qx.allowUrlSettings":!1,"qx.allowUrlVariants":!1,"qx.debug.property.level":0,"qx.debug":!0,"qx.debug.ui.queue":!0,"qx.debug.touchpad.detection":!1,"qx.aspects":!1,"qx.dynlocale":!0,"qx.dyntheme":!0,"qx.blankpage":"qx/static/blank.html","qx.debug.databinding":!1,"qx.debug.dispose":!1,"qx.optimization.basecalls":!1,"qx.optimization.comments":!1,"qx.optimization.privates":!1,"qx.optimization.strings":!1,"qx.optimization.variables":!1,"qx.optimization.variants":!1,"module.databinding":!0,"module.logger":!0,"module.property":!0,"module.events":!0,"qx.nativeScrollBars":!1,"qx.automaticMemoryManagement":!0,"qx.promise":!0,"qx.promise.warnings":!0,"qx.promise.longStackTraces":!0},SYSTEM_CHECKS:null}});qx.tool.compiler.ClassFile.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.Promise":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("util").promisify,r=require("es6-promise-pool");qx.Class.define("qx.tool.utils.Promisify",{statics:{MAGIC_KEY:"__isPromisified__",IGNORED_PROPS:/^(?:promises|length|name|arguments|caller|callee|prototype|__isPromisified__)$/,promisifyAll:function(t,e){var r=this;Object.getOwnPropertyNames(t).forEach((function(n){if(!(r.IGNORED_PROPS.test(n)||e&&!1===e(n,t)||"function"!=typeof t[n]||r.isPromisified(t[n]))){var o=n+"Async";t[o]=r.promisify(t[n]);[n,o].forEach((function(e){Object.defineProperty(t[e],r.MAGIC_KEY,{value:!0,configurable:!0,enumerable:!1,writable:!0})}))}}));return t},isPromisified:function(t){try{return!0===t[this.MAGIC_KEY]}catch(t){return!1}},promisify:function(t,r){t=e(t);r&&(t=t.bind(r));return t},poolEachOf:function(t,e,n){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;i=new r((function(){if(o>=t.length)return null;var e=t[o++];return n(e)}),10);e.next=4;return i.start();case 4:case"end":return e.stop()}}),e)})))()},map:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.Promise.all(t.map(e));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},some:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return new qx.Promise((function(r,n){var o=0;t.forEach((function(){qx.Promise.resolve(e.apply(void 0,arguments)).then((function(e){o++;if(e&&r){r(!0);r=null}o==t.length&&r&&r(!1);return null}))}))}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},someEach:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0;o=function r(){if(n>=t.length)return qx.Promise.resolve(!1);var o=t[n++];return qx.Promise.resolve(e(o)).then((function(t){return!!t||r()}))};r.next=4;return o();case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))()},somePool:function(t,e,n){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return new qx.Promise((function(e,o){var i=0;new r((function(){if(!e)return null;if(i>=t.length){e(!1);return null}var r=t[i++];return n(r).then((function(t){if(t&&e){e(!0);e=null}}))}),10).start()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},call:function(t){return new Promise((function(e,r){t((function(t){if(t)r(t);else{for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e.apply(void 0,o)}}))}))},callback:function(t,e){e&&(t=t.then((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[null].concat(r))})).catch((function(t){return e(t)})));return t},fs:null,each:function(t,e){return qx.tool.utils.Promisify.eachOf(t,e)},forEachOf:function(t,e){return qx.tool.utils.Promisify.eachOf(t,e)},eachOf:function(t,e){var r=Object.keys(t).map((function(r){return e(t[r],r)}));return qx.Promise.all(r)},eachSeries:function(t,e){return qx.tool.utils.Promisify.eachOfSeries(t,e)},forEachOfSeries:function(t,e){return qx.tool.utils.Promisify.eachOfSeries(t,e)},eachOfSeries:function(t,e){var r=Object.keys(t),n=0;return function o(){if(n==r.length)return qx.Promise.resolve();var i=r[n];n++;var a=e(t[i],i);return qx.Promise.resolve(a).then(o)}()}},defer:function(t){t.fs=t.promisifyAll(require("fs"),(function(t,e){return"SyncWriteStream"!==t}))}});qx.tool.utils.Promisify.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.utils.json.Parser":{},"qx.tool.utils.json.Stringify":{},"qx.lang.Type":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("ajv"),r=require("better-ajv-errors").default,n=qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.utils.Json",{statics:{parseJson:function(t){if(null===t||!t.trim())return null;var e=qx.tool.utils.json.Parser.parseToAst(t.trim());return qx.tool.utils.json.Stringify.astToObject(e)},validate:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new e({allErrors:!0,strict:!1});if(qx.lang.Type.isArray(n)){i.addSchema(n);n=n[0].$id}if(i.validate(n,t))return!0;if(o){var a=r(n.$id,t,i.errors,{format:"cli",indent:2});qx.tool.compiler.Console.warn("JSON data does not validate against "+n.$id+":\n"+a);return!1}var c,s=r(n.$id,t,i.errors,{format:"js"});c=Array.isArray(s)&&s.length?s.reduce((function(t,e,r){return"".concat(t," ").concat(r+1,") ").concat(e.error)}),"").trim():Array.isArray(i.errors)?i.errors.reduce((function(t,e,r){return"".concat(t," ").concat(r+1,") ").concat(e.dataPath," ").concat(e.message)}),"").trim():"Unknown error during validation.";throw new Error(c)},getSchemaInfo:function(t){var e={};if(t.$schema){var r=t.$schema.match(/\/([^-]+)-([^.]+)\.json$/);if(r){e.type=r[1].toLocaleLowerCase();e.version=r[2].replace(/-/g,".")}else{var n=t.$schema.match(/\/v([^/]+)\/([^.]+)\.json$/);if(n){e.type=n[2].toLocaleLowerCase();e.version=n[1]}}}else if(t.targets){e.type="compile";e.version="0"}else if(t.info&&t.provides){e.type="manifest";e.version="0"}else if(t.libraries||t.contribs){e.type="qooxdoo";e.version="0"}return 0===Object.getOwnPropertyNames(e).length?null:e},loadJsonAsync:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return n.existsAsync(t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",null);case 4:e.next=6;return n.readFileAsync(t,"utf8");case 6:r=e.sent;e.prev=7;return e.abrupt("return",qx.tool.utils.Json.parseJson(r));case 11:e.prev=11;e.t0=e.catch(7);throw new Error("Failed to load "+t+": "+e.t0);case 14:case"end":return e.stop()}}),e,null,[[7,11]])})))()},saveJsonAsync:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===e){r.next=5;break}r.next=3;return n.writeFileAsync(t,JSON.stringify(e,null,2),"utf8");case 3:r.next=9;break;case 5:r.next=7;return n.existsAsync(t);case 7:if(!r.sent){r.next=9;break}n.unlinkAsync(t);case 9:case"end":return r.stop()}}),r)})))()}}});qx.tool.utils.Json.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.lang.String":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.Console",{extend:qx.core.Object,properties:{verbose:{init:!1,check:"Boolean"},machineReadable:{init:!1,check:"Boolean"},writer:{init:null,nullable:!0,check:"Function"},colorOn:{init:"",nullable:!1,check:"String"}},members:{print:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(var o=0;o<r.length;o++){var i=r[o];"string"!=typeof i&&"number"!=typeof i&&null!==i&&(r[o]=String(i))}if(this.isMachineReadable()){var a="##"+t+":"+JSON.stringify(r);console.log(a)}else{var c=this.getWriter(),s=this.decode.apply(this,[t].concat(r));c?c.apply(void 0,[s,t].concat(r)):this.log(s)}},decode:function(t){for(var e=qx.tool.compiler.Console.MESSAGE_IDS[t],r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];if(e){return qx.lang.String.format(e.message,n||[])}return t+JSON.stringify(n)},getMessageType:function(t){var e=qx.tool.compiler.Console.MESSAGE_IDS[t];return e?e.type:null},log:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.log(this.getColorOn()+e.join(" "))},debug:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.debug(this.getColorOn()+e.join(" "))},info:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.info(this.getColorOn()+e.join(" "))},trace:function(){if(this.isVerbose()){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.warn(this.getColorOn()+e.join(" "))}},warn:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.warn(this.getColorOn()+e.join(" "))},error:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];console.error(this.getColorOn()+e.join(" "))}},defer:function(t){t.addMessageIds({"qx.tool.compiler.class.invalidProperties":"Invalid 'properties' key in class definition","qx.tool.compiler.compiler.missingClassDef":"FATAL Missing class definition - no call to qx.Class.define (or qx.Mixin.define etc)","qx.tool.compiler.compiler.syntaxError":"FATAL Syntax error: %1","qx.tool.compiler.compiler.invalidExtendClause":"FATAL Invalid `extend` clause - expected to find a class name (without quotes or `new`)","qx.tool.compiler.compiler.invalidClassDefinitionEntry":"Unexpected property %2 in %1 definition","qx.tool.compiler.compiler.wrongClassName":"Wrong class name or filename - expected to find at least %1 but only found [%2]","qx.tool.compiler.compiler.membersNotAnObject":"The members property of class %1 is not an object","qx.tool.compiler.application.partRecursive":"Part %1 has recursive dependencies on other parts","qx.tool.compiler.application.duplicatePartNames":"Duplicate parts named '%1'","qx.tool.compiler.application.noBootPart":"Cannot find a boot part","qx.tool.compiler.application.conflictingExactPart":"Conflicting exact match for %1, could be %2 or %3","qx.tool.compiler.application.conflictingBestPart":"Conflicting best match for %1, could be %2 or %3","qx.tool.compiler.application.missingRequiredLibrary":"Cannot find required library %1","qx.tool.compiler.application.missingScriptResource":"Cannot find script resource: %1","qx.tool.compiler.application.missingCssResource":"Cannot find CSS resource: %1","qx.tool.compiler.target.missingAppLibrary":"Cannot find library required to create application for %1","qx.tool.compiler.library.emptyManifest":"Empty Manifest.json in library at %1","qx.tool.compiler.library.cannotCorrectCase":"Unable to correct case for library in %1 because it uses source/resource directories which are outside the library","qx.tool.compiler.library.cannotFindPath":"Cannot find path %2 required by library %1","qx.tool.compiler.build.uglifyParseError":"Parse error in output file %4, line %1 column %2: %3","qx.tool.compiler.webfonts.error":"Error compiling webfont %1, error=%2","qx.tool.compiler.maker.appFatalError":"Cannot write application '%1' because it has fatal errors"},"error");t.addMessageIds({"qx.tool.compiler.class.blockedMangle":"The mangling of private variable '%1' has been blocked because it is referenced as a string before it is declared","qx.tool.compiler.translate.invalidMessageId":"Cannot interpret message ID %1","qx.tool.compiler.translate.invalidMessageIds":"Cannot interpret message ID %1, %2","qx.tool.compiler.translate.invalidMessageIds3":"Cannot interpret message ID %1, %2, %3","qx.tool.compiler.testForUnresolved":"Unexpected termination when testing for unresolved symbols, node type %1","qx.tool.compiler.testForFunctionParameterType":"Unexpected type of function parameter, node type %1","qx.tool.compiler.defer.unsafe":"Unsafe use of 'defer' method to access external class: %1","qx.tool.compiler.symbol.unresolved":"Unresolved use of symbol %1","qx.tool.compiler.environment.unreachable":"Environment check '%1' may be indeterminable, add to Manifest/provides/environment or use class name prefix","qx.tool.compiler.compiler.requireLiteralArguments":"Wrong class name or filename - expected to find at least %1 but only found [%2]","qx.tool.compiler.target.missingAppLibrary":"Cannot find the application library for %1","qx.tool.compiler.webfonts.noResources":"Assets required for webfont %1 are not available in application %2, consider using @asset to include %3","qx.tool.compiler.target.missingBootJs":"There is no reference to index.js script in the index.html copied from %1 (see https://git.io/fh7NI)","qx.tool.compiler.target.missingPreBootJs":"There is no reference to ${preBootJs} in the index.html copied from %1 (see https://git.io/fh7NI)","qx.tool.compiler.compiler.mixinQxObjectImpl":"%1: Mixins should not use `_createQxObjectImpl`, consider using top-level objects instead","qx.tool.compiler.maker.appNotHeadless":"Compiling application '%1' but the target supports non-headless output, you may find unwanted dependencies are loaded during startup","qx.tool.compiler.webfonts.deprecated":"Manifest uses deprecated provides.webfonts, consider switching to provides.font","qx.tool.compiler.fonts.unresolved":"Cannot find font with name %1"},"warning")},statics:{__P_479_0:null,getInstance:function(){this.__P_479_0||(this.__P_479_0=new qx.tool.compiler.Console);return this.__P_479_0},print:function(){var t;return(t=this.getInstance()).print.apply(t,arguments)},decode:function(){var t;return(t=this.getInstance()).decode.apply(t,arguments)},log:function(){var t;return(t=this.getInstance()).log.apply(t,arguments)},debug:function(){var t;return(t=this.getInstance()).debug.apply(t,arguments)},info:function(){var t;return(t=this.getInstance()).info.apply(t,arguments)},warn:function(){var t;return(t=this.getInstance()).warn.apply(t,arguments)},trace:function(){var t;return(t=this.getInstance()).trace.apply(t,arguments)},error:function(){var t;return(t=this.getInstance()).error.apply(t,arguments)},MESSAGE_IDS:{},addMessageIds:function(t,e){for(var r in t)this.MESSAGE_IDS[r]={id:r,message:t[r],type:e||"message"}},decodeMarker:function(t,e){var r=qx.tool.compiler.Console.MESSAGE_IDS[t.msgId]||t.msgId,n=r.type?r.type+": ":"",o="",i=t.pos;if(!1!==e&&i&&i.start&&i.start.line){o+="["+i.start.line;i.start.column&&(o+=","+i.start.column);if(i.end&&i.end.line&&i.end.line!==i.start.line&&i.end.column!==i.start.column){o+=" to "+i.end.line;i.end.column&&(o+=","+i.end.column)}o+="] "}try{o+=n+qx.lang.String.format(r.message,t.args||[])}catch(e){throw new Error("Unknown message id ".concat(t.msgId,"."))}return o}}});qx.tool.compiler.Console.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.Promise":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("path"),n=require("rimraf"),o=require("util").promisify,i=o(e.stat),a=o(e.mkdir),c=o(e.readdir),s=o(e.rename);qx.Class.define("qx.tool.utils.files.Utils",{extend:qx.core.Object,statics:{findAllFiles:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return c(t);case 3:o=n.sent;n.next=11;break;case 6:n.prev=6;n.t0=n.catch(0);if("ENOENT"!=n.t0.code){n.next=10;break}return n.abrupt("return");case 10:throw n.t0;case 11:n.next=13;return qx.Promise.all(o.map(function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function n(o){var a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=r.join(t,o);n.next=3;return i(a);case 3:if(!n.sent.isDirectory()){n.next=9;break}n.next=7;return qx.tool.utils.files.Utils.findAllFiles(a,e);case 7:n.next=11;break;case 9:n.next=11;return e(a);case 11:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))()},sync:function(t,e,n){var o=this;function s(i,s){if(i.isDirectory()){return(null===s?a(e):Promise.resolve()).then((function(){return c(t).then((function(i){return Promise.all(i.map((function(i){return o.sync(r.join(t,i),r.join(e,i),n)})))}))}))}if(i.isFile())return qx.Promise.resolve(!n||n(t,e)).then((function(r){return r&&o.copyFile(t,e)}))}return new Promise((function(r,n){var a=null,c=null;i(t).then((function(t){a=t;return i(e).then((function(t){return c=t})).catch((function(t){if("ENOENT"!==t.code)throw t}))})).then((function(){return c&&a.isDirectory()==c.isDirectory()?a.isDirectory()||a.mtime.getTime()>c.mtime.getTime()||a.size!=c.size?s(a,c):void 0:o.deleteRecursive(e).then((function(){return s(a,c)}))})).then(r).catch(n)}))},copyFile:function(t,r){return new Promise((function(n,o){qx.tool.utils.Utils.mkParentPath(r,(function(){var i=e.createReadStream(t,{flags:"r",encoding:"binary"}),a=e.createWriteStream(r,{flags:"w",encoding:"binary"});i.on("end",(function(){n(t,r)}));i.on("error",o);a.on("error",o);i.pipe(a)}))}))},safeStat:function(t){return new Promise((function(r,n){e.stat(t,(function(t,e){t&&"ENOENT"!=t.code?n(t):r(t?null:e)}))}))},safeUnlink:function(t){return new Promise((function(r,n){e.unlink(t,(function(t){t&&"ENOENT"!=t.code?n(t):r()}))}))},safeRename:function(t,r){return new Promise((function(n,o){e.rename(t,r,(function(t){t&&"ENOENT"!=t.code?o(t):n()}))}))},rotateUnique:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return r.safeStat(t);case 2:n.t0=n.sent;if(!n.t0){n.next=5;break}n.t0=e>1;case 5:if(!n.t0){n.next=26;break}o=null;i=e;case 8:if(!(i>0)){n.next=24;break}a=t+"."+i;if(i!=e){n.next=15;break}n.next=13;return r.safeUnlink(a);case 13:n.next=20;break;case 15:n.next=17;return r.safeStat(a);case 17:if(!n.sent){n.next=20;break}n.next=20;return s(a,o);case 20:o=a;case 21:i--;n.next=8;break;case 24:n.next=26;return s(t,o);case 26:case"end":return n.stop()}}),n)})))()},deleteRecursive:function(t){return new Promise((function(e,r){n(t,(function(t){t?r(t):e()}))}))},correctCase:function(t){var r="";if("win32"===process.platform&&t.match(/^[a-zA-Z]:/)){r=t.substring(0,2);t=t.substring(2)}var n,o,i=(t=t.replace(/\\/g,"/")).split("/");if(!i.length)return r+t;if(i[0].length){n="";o=0}else{n="/";o=1}function a(t){o++;n.length&&"/"!==n&&(n+="/");n+=t;return c()}function c(){if(o==i.length){"win32"===process.platform&&(n=n.replace(/\//g,"\\"));return Promise.resolve(r+n)}var t=i[o];return"."==t||".."==t?a(t):new Promise((function(o,i){e.readdir(0==n.length?".":r+n,{encoding:"utf8"},(function(e,r){if(e)i(e);else{for(var n=t.toLowerCase(),c=!1,s=null,u=0;u<r.length;u++){if(r[u]===t){c=!0;break}r[u].toLowerCase()===n&&(s=r[u])}!c&&s&&(t=s);a(t).then(o)}}))}))}return new Promise((function(n,o){e.stat(r+t,(function(e){e?"ENOENT"==e.code?n(r+t):o(e):c().then(n)}))}))}}});qx.tool.utils.files.Utils.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Http":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("path"),n=(require("tmp"),require("http"),require("fontkit")),o=qx.tool.utils.LogManager.createLog("font");qx.Class.define("qx.tool.compiler.app.WebFont",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_488_0=t},properties:{name:{check:"String"},defaultSize:{check:"Integer",init:40},mapping:{init:null,nullable:!0,check:"String"},comparisonString:{init:null,nullable:!0,check:"String"},resources:{check:"Array"}},members:{__P_488_0:null,__P_488_1:null,_loadLocalFont:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=r.join(e.__P_488_0.getRootDir(),r.join(e.__P_488_0.getResourcePath(),t));n.next=3;return e.__P_488_2(o);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},_loadRemoteFont:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return qx.tool.utils.Http.downloadToTempFile(t,/^font\/(ttf|svg|eot|woff|woff2)$/);case 2:o=n.sent;n.next=5;return r.__P_488_2(o);case 5:i=n.sent;e.unlink(o);return n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()},__P_488_2:function(t){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function a(){var c,s,u,l,f,p,h,y,d;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return n.open(t);case 2:s=a.sent;u={};if(!i.getMapping()){a.next=19;break}l=r.join(i.__P_488_0.getRootDir(),r.join(i.__P_488_0.getResourcePath(),i.getMapping()));a.prev=6;a.next=9;return e.promises.readFile(l,{encoding:"utf-8"});case 9:f=a.sent;a.next=16;break;case 12:a.prev=12;a.t0=a.catch(6);o.error("Cannot read mapping file '".concat(l,"': ").concat(a.t0.code));throw a.t0;case 16:p=JSON.parse(f);Object.keys(p).forEach((function(e){var r=parseInt(p[e],16),n=s.glyphForCodePoint(r);n.id?u["@"+i.getName()+"/"+e]=[Math.ceil(i.getDefaultSize()*n.advanceWidth/n.advanceHeight),i.getDefaultSize(),r]:qx.tool.compiler.Console.trace("WARN: no glyph found in ".concat(t," ").concat(e,": ").concat(r))}),i);return a.abrupt("return",u);case 19:if(null!==(c=s.GSUB)&&void 0!==c&&null!==(c=c.lookupList)&&void 0!==c&&null!==(c=c.toArray())&&void 0!==c&&c.length){a.next=22;break}qx.tool.compiler.Console.error("The webfont in ".concat(t," does not have any ligatures"));return a.abrupt("return",u);case 22:h={};y=s.GSUB.lookupList.toArray();s.GSUB.featureList[0].feature.lookupListIndexes.forEach((function(t){var e,r,n=y[t].subTables[0],o=[];null!=n&&null!==(e=n.coverage)&&void 0!==e&&e.rangeRecords&&n.coverage.rangeRecords.forEach((function(t){for(var e=t.start;e<=t.end;e++){var r=s.stringsForGlyph(e)[0];o.push(r)}}));((null==n||null===(r=n.ligatureSets)||void 0===r?void 0:r.toArray())||[]).forEach((function(t,e){var r=o[e];t.forEach((function(t){var e=s.stringsForGlyph(t.glyph)[0];if(e){var n=r+t.components.map((function(t){return s.stringsForGlyph(t)[0]})).join(""),o=e.charCodeAt(0).toString(16);null==h[o]?h[o]=[n]:h[o].push(n)}}))}))}));d=i.getDefaultSize();s.characterSet.forEach((function(t){var e,r=s.glyphForCodePoint(t),n=null;try{var o;n=null==r||null===(o=r.path)||void 0===o?void 0:o.commands}catch(t){n=null}if(null!==(e=n)&&void 0!==e&&e.length||r.layers){var a=function(e){u["@"+i.getName()+"/"+e]=[Math.ceil(i.getDefaultSize()*r.advanceWidth/r.advanceHeight),d,t]};r.name&&a(r.name);var c=h[t.toString(16)];c&&c.forEach(a)}}),i);return a.abrupt("return",u);case 29:case"end":return a.stop()}}),a,null,[[6,12]])})))()},getBootstrapCode:function(t,e){var r="",n={defaultSize:this.getDefaultSize(),lineHeight:1,family:[this.getName()],fontFaces:[{paths:this.getResources()}]};this.getComparisonString()&&(n.comparisonString=this.getComparisonString());return r+"qx.$$fontBootstrap['"+this.getName()+"']="+JSON.stringify(n,null,2)+";"},generateForTarget:function(t){var e=this;if(this.__P_488_3)return this.__P_488_3;var r=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var r,n,o;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=_createForOfIteratorHelper(e.getResources());t.prev=1;r.s();case 3:if((n=r.n()).done){t.next=20;break}o=n.value;if(o.match(/^.*[/\\]([^/\\\?#]+).*$/)[1].match(/\.(ttf|otf|woff|woff2)$/)){t.next=8;break}return t.abrupt("continue",18);case 8:if(!o.match(/^https?:\/\//)){t.next=14;break}t.next=11;return e._loadRemoteFont(o);case 11:e.__P_488_1=t.sent;t.next=17;break;case 14:t.next=16;return e._loadLocalFont(o);case 16:e.__P_488_1=t.sent;case 17:return t.abrupt("return",e.__P_488_1);case 18:t.next=3;break;case 20:t.next=25;break;case 22:t.prev=22;t.t0=t.catch(1);r.e(t.t0);case 25:t.prev=25;r.f();return t.finish(25);case 28:throw new Error("Failed to load/validate FontMap for webfont (expected ttf, otf, woff or woff2) ".concat(e.getName()));case 29:case"end":return t.stop()}}),t,null,[[1,22,25,28]])})));return function(){return t.apply(this,arguments)}}();this.__P_488_3=r();return this.__P_488_3},generateForApplication:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.__P_488_1||null);case 1:case"end":return t.stop()}}),t)})))()},toString:function(){var t=this.getName();t||(t=JSON.stringify(this.getResources()));return t}}});qx.tool.compiler.app.WebFont.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.IndexedArray",{extend:qx.core.Object,construct:function(){qx.core.Object.constructor.call(this);this.__P_513_0=[];this.__P_513_1={};this.__P_513_2=!1},properties:{keepSorted:{init:!1,nullable:!1,check:"Boolean"}},members:{__P_513_3:!1,__P_513_0:null,__P_513_1:null,__P_513_2:!1,push:function(t){if(void 0===this.__P_513_1[t]){this.__P_513_0.push(t);this.__P_513_1[t]=this.__P_513_0.length-1;this.__P_513_3=!0}},sort:function(t){var e=this;this.__P_513_0.sort(t);for(var r=this.__P_513_0,n=r.length,o=n-1;o>-1;o--)if(void 0!==r[o]){o<n-1&&r.splice(o+1);break}for(var i=this.__P_513_0,a=i.length,c=0;c<a;c++)if(void 0!==i[c]){c>0&&i.splice(0,c);break}this.__P_513_0.forEach((function(t,r){e.__P_513_1[t]=r}));this.__P_513_3=!1},contains:function(t){return void 0!==this.__P_513_1[t]},remove:function(t){var e=this.__P_513_1[t];if(void 0!==e){delete this.__P_513_0[e];delete this.__P_513_1[t];this.__P_513_2=!0}},pop:function(){if(0!=this.__P_513_0.length){this.__P_513_3&&this.isKeepSorted()&&this.sort();do{var t=this.__P_513_0.pop();if(void 0!==t){delete this.__P_513_1[t];return t}}while(this.__P_513_0.length>0)}},shift:function(){if(0!=this.__P_513_0.length){this.__P_513_3&&this.isKeepSorted()&&this.sort();do{var t=this.__P_513_0.shift();if(void 0!==t){delete this.__P_513_1[t];return t}}while(this.__P_513_0.length>0)}},getLength:function(){return this.__P_513_0.length},getItem:function(t){this.__P_513_3&&this.isKeepSorted()&&this.sort();return this.__P_513_0[t]},isEmpty:function(){return this.__P_513_0.length>0},toArray:function(){this.__P_513_3&&this.isKeepSorted()&&this.sort();if(this.__P_513_2){var t=[];this.__P_513_0.forEach((function(e){e&&t.push(e)}));return t}return this.__P_513_0.slice()},toObject:function(){this.__P_513_3&&this.isKeepSorted()&&this.sort();var t={};this.__P_513_0.forEach((function(e){t[e]=!0}));return t}}});qx.tool.utils.IndexedArray.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.resources.ImageLoader":{construct:!0},"qx.tool.compiler.resources.MetaLoader":{construct:!0},"qx.tool.compiler.resources.ScssConverter":{construct:!0},"qx.tool.compiler.resources.ScssIncludeConverter":{construct:!0},"qx.tool.utils.Json":{},"qx.tool.compiler.Console":{},"qx.tool.utils.Values":{},"qx.lang.Type":{},"qx.Promise":{},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.resources.Asset":{},"qx.tool.utils.Promisify":{},"qx.lang.Array":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=qx.tool.utils.LogManager.createLog("resource-manager");qx.Class.define("qx.tool.compiler.resources.Manager",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_495_0=t;this.__P_495_1=t.getResDbFilename()||"resource-db.json";this.__P_495_2=[new qx.tool.compiler.resources.ImageLoader(this),new qx.tool.compiler.resources.MetaLoader(this)];this.__P_495_3=[new qx.tool.compiler.resources.ScssConverter,new qx.tool.compiler.resources.ScssIncludeConverter]},members:{__P_495_1:null,__P_495_4:null,__P_495_0:null,__P_495_5:null,__P_495_6:null,__P_495_2:null,__P_495_3:null,loadDatabase:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Json.loadJsonAsync(t.__P_495_1);case 2:e.t0=e.sent;if(e.t0){e.next=5;break}e.t0={};case 5:t.__P_495_4=e.t0;case 6:case"end":return e.stop()}}),e)})))()},saveDatabase:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.debug("saving resource manager database");return e.abrupt("return",qx.tool.utils.Json.saveJsonAsync(t.__P_495_1,t.__P_495_4));case 2:case"end":return e.stop()}}),e)})))()},getDatabase:function(){return this.__P_495_4},findLibraryForResource:function(t){var e=this.findLibrariesForResource(t);if(0==e.length)return null;e.length>1&&qx.tool.compiler.Console.error("Cannot determine a single library for the URI '".concat(t,"'; ")+"found ".concat(e.map((function(t){return t.getNamespace()})).join(",")," returning first library"));return e[0]},findLibrariesForResource:function(t){var r=this,n=function(){var n,o;if(e.isAbsolute(t)){return r.__P_495_0.getLibraries().find((function(r){return t.startsWith(e.resolve(r.getRootDir()))}))||null}if(-1!==(o=t.indexOf(":"))){n=t.substring(0,o);return r.__P_495_0.findLibrary(n)||null}var i=t.indexOf("$"),a=t.indexOf("*");if(-1===(o=-1===i?a:-1===a?i:Math.min(i,a))){return r.__P_495_5[t]||null}var c="/"===t[o-1];t=t.substring(0,o-1);if(c){return r.__P_495_5[t]||null}r.__P_495_6||(r.__P_495_6=Object.keys(r.__P_495_5).sort());var s=qx.tool.utils.Values.binaryStartsWith(r.__P_495_6,t);if(s>-1){for(var u={};s<r.__P_495_6.length;s++){if(!r.__P_495_6[s].startsWith(t))break;-1!==(o=t.indexOf(":"))&&(u[n=t.substring(0,o)]||(u[n]=r.__P_495_0.findLibrary(n)))}return Object.values(u)}return null}();return n?qx.lang.Type.isArray(n)?n:[n]:[]},findAllResources:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t;(o=t.__P_495_4).resources||(o.resources={});n.__P_495_5={};t.__P_495_6=null;t.__P_495_7={};r.next=8;return qx.Promise.all(n.__P_495_0.getLibraries().map(function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function r(n){var i,a,c,s;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(i=o.resources[n.getNamespace()])||(o.resources[n.getNamespace()]=i={});a={};for(c in i)a[c]=!0;s=function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function r(o){var c;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=e.join(n.getRootDir(),n.get(o));r.next=3;return qx.tool.utils.files.Utils.findAllFiles(c,function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var s,u,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=r.substring(c.length+1).replace(/\\/g,"/");u=i[s];delete a[s];u||(u=i[s]={});u.resourcePath=o;e.next=7;return qx.tool.utils.files.Utils.safeStat(r).mtime;case 7:u.mtime=e.sent;l=new qx.tool.compiler.resources.Asset(n,s,u);t.__P_495_8(l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}();r.next=7;return s("resourcePath");case 7:r.next=9;return s("themePath");case 9:r.next=11;return qx.Promise.all(Object.keys(a).map(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i[e]){t.next=5;break}delete i[e];t.next=9;break;case 5:t.next=7;return qx.tool.utils.files.Utils.safeStat(e);case 7:t.sent||delete i[e];case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()));case 8:r.next=10;return qx.tool.utils.Promisify.poolEachOf(Object.values(t.__P_495_7),10,function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var n,o,i,a,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return r.load();case 2:if((n=r.getFileInfo()).meta)for(o in n.meta){(i=t.findLibraryForResource(o))||(i=r.getLibrary());if(a=t.__P_495_7[i.getNamespace()+":"+o]){a.addMetaReferee(r);r.addMetaReferTo(a)}else qx.tool.compiler.Console.warn("Cannot find asset "+o+" referenced in "+r)}if(n.dependsOn){c=[];n.dependsOn.forEach((function(e){var n=t.__P_495_7[e];n?c.push(n):qx.tool.compiler.Console.warn("Cannot find asset "+e+" depended on by "+r)}));c.length&&r.setDependsOn(c)}return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return r.stop()}}),r)})))()},__P_495_8:function(t){var e=this;this.__P_495_7[t.toUri()]=t;var r=t.getLibrary(),n=t.getFilename(),o="";n.split("/").forEach((function(t,n){n&&(o+="/");o+=t;var i=e.__P_495_5[o];i?qx.lang.Type.isArray(i)?qx.lang.Array.contains(i,r)||i.push(r):i!==r&&(i=e.__P_495_5[o]=[i,r]):e.__P_495_5[o]=r}));t.setLoaders(this.__P_495_2.filter((function(t){return t.matches(n,r)})));t.setConverters(this.__P_495_3.filter((function(t){return t.matches(n,r)})))},getAsset:function(t,r,n){var o=this.findLibraryForResource(t);if(!o){qx.tool.compiler.Console.warn("Cannot find library for "+t);return null}var i=e.join(o.getRootDir(),n?o.getThemePath():o.getResourcePath());t=e.relative(i,e.isAbsolute(t)?t:e.join(i,t));var a=this.__P_495_7[o.getNamespace()+":"+t];if(!a&&r){a=new qx.tool.compiler.resources.Asset(o,t,{resourcePath:"resourcePath"});this.__P_495_8(a)}return a},getAssetsForPaths:function(t){var e=this,r=this.__P_495_4,n={};for(var o in r.resources){var i=r.resources[o];for(var a in i){var c=i[a];if(c.meta)for(var s in c.meta)n[s]=a}}var u=[],l={};t.forEach((function(t){var n=t.indexOf(":"),o=null;if(n>-1){var i=t.substring(0,n),a=e.__P_495_0.findLibrary(i);o=a?[a]:[];t=t.substring(n+1)}else o=e.findLibrariesForResource(t);0!=o.length?o.forEach((function(o){var i=r.resources[o.getNamespace()],a=[];if((n=t.indexOf("*"))>-1){t=t.substring(0,n);a=Object.keys(i).filter((function(e){return e.substring(0,t.length)===t}))}else i[t]&&(a=[t]);a.forEach((function(t){if(void 0===l[t]){var r=e.__P_495_7[o.getNamespace()+":"+t],n=r.getFileInfo();if(!0!==n.doNotCopy){(r.getMetaReferees()||[]).forEach((function(e){var r=e.getFileInfo().meta[t];n.composite=r[3];n.x=r[4];n.y=r[5]}));u.push(r);l[t]=u.length-1}}}))})):qx.tool.compiler.Console.warn("Cannot find library for "+t)}));return u}}});qx.tool.compiler.resources.Manager.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.tool.compiler.Console":{},"qx.tool.utils.Utils":{},"qx.lang.Type":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("path"),n=require("xml2js"),o=require("cldr"),i=require("util").promisify,a=require("process"),c=i(e.readFile),s=i(e.readdir),u=qx.tool.utils.LogManager.createLog("cldr");qx.Class.define("qx.tool.compiler.app.Cldr",{extend:qx.core.Object,statics:{getParentLocale:function(t){return o.resolveParentLocaleId(t.toLowerCase())},loadCLDR:function(t){var e=new n.Parser,o=r.dirname(require.resolve("cldr"));if(!o)throw new Error("Cannot find cldr path");u.debug("Loading CLDR "+o);var i=r.join(o,"../3rdparty/cldr/common/main");return s(i).then((function(e){return new Promise((function(r,n){var o=t.toLowerCase()+".xml",i=e.find((function(t){return t.toLowerCase()===o}));i?r(i):n(new Error('Cannot find XML file for locale "'+t+'" in CLDR folder'))}))})).then((function(t){return c(r.join(i,t),{encoding:"utf-8"})})).catch((function(t){qx.tool.compiler.Console.error(t);a.exit(1)})).then((function(t){return qx.tool.utils.Utils.promisifyThis(e.parseString,e,t)})).then((function(t){function e(t,e,r,n){if(!t)return null;for(var o=0;o<t.length;o++){var i=t[o];if(i.$&&i.$[e]==r)return"function"==typeof n?n(i):i}return null}function r(e,r){void 0===r&&(r=t);for(var n=e.split("."),o=0;o<n.length;o++){var i=n[o],a=i.indexOf("["),c=null;if(a>-1){c=i.substring(a+1,i.length-1);i=i.substring(0,a)}var s=r[i];if(!s)return null;if(null!==c){if(!qx.lang.Type.isArray(s))return null;if(void 0===(s=s[c]))return null}r=s}return r}function n(t,e){var n=r(t,e);return n&&"string"!=typeof n&&void 0!==n._?n._:n}var o=e(r("ldml.dates[0].calendars[0].calendar"),"type","gregorian"),i={};i.alternateQuotationEnd=r("ldml.delimiters[0].alternateQuotationEnd[0]");i.alternateQuotationStart=r("ldml.delimiters[0].alternateQuotationStart[0]");i.quotationEnd=r("ldml.delimiters[0].quotationEnd[0]");i.quotationStart=r("ldml.delimiters[0].quotationStart[0]");function a(t){return"string"==typeof t?t:t&&void 0!==t._?t._:""}function c(t){return t.dateFormat[0].pattern[0]}if(null!==o){var s=function(t){return t.timeFormat.pattern};e(r("dayPeriods[0].dayPeriodContext[0].dayPeriodWidth",o),"type","wide",(function(t){i.cldr_am=e(t.dayPeriod,"type","am",a);i.cldr_pm=e(t.dayPeriod,"type","pm",a)}));var u=r("dateFormats[0].dateFormatLength",o),l=r("dateTimeFormats[0].availableFormats[0].dateFormatItem",o);i.cldr_date_format_full=e(u,"type","full",c);i.cldr_date_format_long=e(u,"type","long",c);i.cldr_date_format_medium=e(u,"type","medium",c);i.cldr_date_format_short=e(u,"type","short",c);i.cldr_date_time_format_Ed=e(l,"id","Ed",a);i.cldr_date_time_format_Hm=e(l,"id","Hm",a);i.cldr_date_time_format_Hms=e(l,"id","Hms",a);i.cldr_date_time_format_M=e(l,"id","M",a);i.cldr_date_time_format_MEd=e(l,"id","MEd",a);i.cldr_date_time_format_MMM=e(l,"id","MMM",a);i.cldr_date_time_format_MMMEd=e(l,"id","MMMEd",a);i.cldr_date_time_format_MMMd=e(l,"id","MMMd",a);i.cldr_date_time_format_Md=e(l,"id","Md",a);i.cldr_date_time_format_d=e(l,"id","d",a);i.cldr_date_time_format_hm=e(l,"id","hm",a);i.cldr_date_time_format_hms=e(l,"id","hms",a);i.cldr_date_time_format_ms=e(l,"id","ms",a);i.cldr_date_time_format_y=e(l,"id","y",a);i.cldr_date_time_format_yM=e(l,"id","yM",a);i.cldr_date_time_format_yMEd=e(l,"id","yMEd",a);i.cldr_date_time_format_yMMM=e(l,"id","yMMM",a);i.cldr_date_time_format_yMMMEd=e(l,"id","yMMMEd",a);i.cldr_date_time_format_yMMMd=e(l,"id","yMMMd",a);i.cldr_date_time_format_yMd=e(l,"id","yMd",a);i.cldr_date_time_format_yQ=e(l,"id","yQ",a);i.cldr_date_time_format_yQQQ=e(l,"id","yQQQ",a);var f=r("days[0].dayContext",o);e(f,"type","format",(function(t){e(t.dayWidth,"type","abbreviated",(function(t){i.cldr_day_format_abbreviated_fri=e(t.day,"type","fri",a);i.cldr_day_format_abbreviated_mon=e(t.day,"type","mon",a);i.cldr_day_format_abbreviated_sat=e(t.day,"type","sat",a);i.cldr_day_format_abbreviated_sun=e(t.day,"type","sun",a);i.cldr_day_format_abbreviated_thu=e(t.day,"type","thu",a);i.cldr_day_format_abbreviated_tue=e(t.day,"type","tue",a);i.cldr_day_format_abbreviated_wed=e(t.day,"type","wed",a)}))}));e(f,"type","format",(function(t){e(t.dayWidth,"type","wide",(function(t){i.cldr_day_format_wide_fri=e(t.day,"type","fri",a);i.cldr_day_format_wide_mon=e(t.day,"type","mon",a);i.cldr_day_format_wide_sat=e(t.day,"type","sat",a);i.cldr_day_format_wide_sun=e(t.day,"type","sun",a);i.cldr_day_format_wide_thu=e(t.day,"type","thu",a);i.cldr_day_format_wide_tue=e(t.day,"type","tue",a);i.cldr_day_format_wide_wed=e(t.day,"type","wed",a)}))}));e(f,"type","stand-alone",(function(t){i["cldr_day_stand-alone_narrow_fri"]=e(t.dayWidth[0].day,"type","fri",a);i["cldr_day_stand-alone_narrow_mon"]=e(t.dayWidth[0].day,"type","mon",a);i["cldr_day_stand-alone_narrow_sat"]=e(t.dayWidth[0].day,"type","sat",a);i["cldr_day_stand-alone_narrow_sun"]=e(t.dayWidth[0].day,"type","sun",a);i["cldr_day_stand-alone_narrow_thu"]=e(t.dayWidth[0].day,"type","thu",a);i["cldr_day_stand-alone_narrow_tue"]=e(t.dayWidth[0].day,"type","tue",a);i["cldr_day_stand-alone_narrow_wed"]=e(t.dayWidth[0].day,"type","wed",a)}));var p=r("months[0].monthContext",o),h=function(t,e){t&&t.forEach((function(t){i[e+"_"+t.$.type]=a(t)}))},y=function(t){e(p,"type","format",(function(r){return e(r.monthWidth,"type",t,(function(e){return h(e.month,"cldr_month_format_"+t)}))}))};y("abbreviated");y("wide");e(p,"type","stand-alone",(function(t){return h(t.monthWidth[0].month,"cldr_month_stand-alone_narrow")}));var d=r("timeFormats[0].timeFormatLength",o);i.cldr_time_format_full=e(d,"type","full",s);i.cldr_time_format_long=e(d,"type","long",s);i.cldr_time_format_medium=e(d,"type","medium",s);i.cldr_time_format_short=e(d,"type","short",s)}var m=a(r("ldml.numbers[0].defaultNumberingSystem[0]"));if(m)e(r("ldml.numbers[0].symbols"),"numberSystem",m,(function(t){i.cldr_number_decimal_separator=t.decimal[0];i.cldr_number_group_separator=t.group[0]}));else{i.cldr_number_decimal_separator=n("ldml.numbers[0].symbols[0].decimal[0]");i.cldr_number_group_separator=n("ldml.numbers[0].symbols[0].group[0]")}i.cldr_number_percent_format=n("ldml.numbers[0].percentFormats[0].percentFormatLength[0].percentFormat[0].pattern[0]");function v(t){return qx.lang.Type.isArray(t.displayName)?t.displayName.map((function(t){return a(t)})):a(t.displayName)}var g=r("ldml.dates[0].fields[0].field");i.day=e(g,"type","day",v);i.dayperiod=e(g,"type","dayperiod",v);i.era=e(g,"type","era",v);i.hour=e(g,"type","hour",v);i.minute=e(g,"type","minute",v);i.month=e(g,"type","month",v);i.second=e(g,"type","second",v);i.week=e(g,"type","week",v);i.weekday=e(g,"type","weekday",v);i.year=e(g,"type","year",v);i.zone=e(g,"type","zone",v);return i}))}}});qx.tool.compiler.app.Cldr.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.app.Library":{},"qx.tool.utils.files.Utils":{},"qx.lang.Type":{},"qx.tool.utils.Promisify":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=(0,require("util").promisify)(e.readFile),n=qx.tool.utils.LogManager.createLog("translation");qx.Class.define("qx.tool.compiler.app.Translation",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.setLibrary(t);e&&this.setLocale(e);this.__P_487_0={};this.__P_487_1={}},properties:{library:{nullable:!1,check:"qx.tool.compiler.app.Library"},locale:{init:"en",nullable:!1,check:"String"},writeLineNumbers:{init:!1,check:"Boolean"}},members:{__P_487_0:null,__P_487_1:null,__P_487_2:0,__P_487_3:null,getPoFilename:function(){var t=this.getLibrary();return t.getRootDir()+"/"+t.getTranslationPath()+"/"+this.getLocale()+".po"},checkRead:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.__P_487_2){e.next=2;break}return e.abrupt("return",t.read());case 2:r=t.getPoFilename();e.next=5;return qx.tool.utils.files.Utils.safeStat(r);case 5:if(!(n=e.sent)||t.__P_487_2!=n.mtime){e.next=8;break}return e.abrupt("return",void 0);case 8:return e.abrupt("return",t.read());case 9:case"end":return e.stop()}}),e)})))()},read:function(){var t=this,o=this;return o.__P_487_3?o.__P_487_3:o.__P_487_3=new Promise((function(i,a){o.__P_487_0={};o.__P_487_1={};var c=t.getPoFilename();e.stat(c,(function(t,e){if(!t){o.__P_487_2=e.mtime;return r(c,{encoding:"utf8"}).then((function(t){var e=null,r=null;function a(){if(e){var t;t=e.msgctxt?e.msgctxt+":"+e.msgid:e.msgid;o.__P_487_0[t]=e}e=null;r=null}function c(t,r,n){var o=null,i=t.match(/^([^[]+)\[([0-9]+)\]$/);r=r.replace(/\\t/g,"\t").replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\"/g,'"');if(i){t=i[1];o=parseInt(i[2]);void 0===e[t]&&(e[t]=[]);n&&"string"==typeof e[t][o]?e[t][o]+=r:e[t][o]=r}else n&&"string"==typeof e[t]?e[t]+=r:e[t]=r}t.split("\n").forEach((function(t,o){if(t=t.trim()){e||(e={});var i=t.match(/^#([^ ]?) (.*)$/);if(i){var s,u=i[1],l=i[2];e.comments||(e.comments={});switch(u){case"":e.comments.translator=l;break;case".":e.comments.extracted=l;break;case":":e.comments.reference||(e.comments.reference={});var f=e.comments.reference;(l&&l.match(/[\w/\.]+:\d+/g)||[]).forEach((function(t){var e=t.split(":"),r=e[0],n=parseInt(e[1],10);f[r]?f[r].includes(n)||f[r].push(n):f[r]=[n]}));break;case",":e.comments.flags=l.split(",");break;case"|":if(i=l.match(/^([^\s]+)\s+(.*)$/)){e.previous||(e.previous={});var p=i[1];"msgctxt"==p||"msgid"==p?e[p]=i[2]:n.warn("Cannot interpret line "+(o+1))}else n.warn("Cannot interpret line "+(o+1))}}else if('"'!=t[0]||'"'!=t[t.length-1]){if("#"!=t)if(i=t.match(/^([^\s]+)\s+(.*)$/)){s=r=i[1];var h=i[2];h.length>=2&&'"'==h[0]&&'"'==h[h.length-1]&&c(s,h=h.substring(1,h.length-1))}else n.warn("Cannot interpret line "+(o+1))}else{t=t.substring(1,t.length-1);r.match(/^.*\[\d+\]$/)||null!==r&&void 0!==e[r]?c(r,t,!0):n.error("Cannot interpret line because there is no key to append to, line "+(o+1))}}else a()}));e&&a();i()}))}"ENOENT"!=t.code?a(t):i()}))}))},write:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.writeTo(t.getPoFilename());case 1:case"end":return e.stop()}}),e)})))()},writeTo:function(t,e){var r=[];function n(t,e){if(null!=e){e=e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/"/g,'\\"');r.push(t+' "'+e+'"')}}for(var o in this.__P_487_0){var i=this.__P_487_0[o];if(i.comments){i.comments.translator&&r.push("# "+i.comments.translator);i.comments.extracted&&r.push("#. "+i.comments.extracted);if(i.comments.reference){var a="#:",c=i.comments.reference;for(var s in c)if(c[s])if(this.isWriteLineNumbers()){var u,l=_createForOfIteratorHelper(c[s]);try{for(l.s();!(u=l.n()).done;){var f=" "+s+":"+u.value;if(a.length+f.length>78){r.push(a);a="#:"+f}else a+=f}}catch(t){l.e(t)}finally{l.f()}}else{var p=" "+s;if(a.length+p.length>78){r.push(a);a="#:"+p}else a+=p}a.length>3&&r.push(a)}i.comments.flags&&r.push("#, "+i.comments.flags.join(","))}else r.push("#");i.msgctxt&&r.push('msgctxt "'+i.msgctxt+'"');n("msgid",i.msgid);n("msgid_plural",i.msgid_plural);if(qx.lang.Type.isArray(i.msgstr))i.msgstr.forEach((function(t,e){n("msgstr["+e+"]",t)}));else if(i.msgid_plural){n("msgstr[0]","");n("msgstr[1]","")}else n("msgstr",i.msgstr||"");r.push("")}var h=r.join("\n");return qx.tool.utils.Promisify.fs.writeFileAsync(t,h,{encoding:"utf8"})},hasEntryValue:function(t){var e=this.getEntry(t);return!!e&&(qx.lang.Type.isArray(e.msgstr)?e.msgstr.every((function(t){return Boolean(t)})):Boolean(e.msgstr))},getEntry:function(t){return this.__P_487_0[t]||null},deleteEntry:function(t){var e=this.__P_487_0[t]||null;delete this.__P_487_0[t];return e},getOrCreateEntry:function(t){var e=this.__P_487_0[t];e||(e=this.__P_487_0[t]={msgid:t});return e},getEntries:function(){return this.__P_487_0},getHeaders:function(){return this.__P_487_1}}});qx.tool.compiler.app.Translation.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs");require("path");qx.Class.define("qx.tool.compiler.app.ManifestFont",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.setName(t)},properties:{name:{check:"String"},defaultSize:{init:null,nullable:!0,check:"Integer"},comparisonString:{init:null,nullable:!0,check:"String"},css:{init:null,check:"Array",nullable:!0},fontFaces:{init:null,check:"Array",nullable:!0},glyphs:{init:null,nullable:!0,check:"String"},family:{init:null,nullable:!0,check:"Array"}},members:{__P_486_0:null,updateFromManifest:function(t,r){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i={};["defaultSize","comparisonString","css","fontFaces","glyphs","family"].forEach((function(e){t.hasOwnProperty(e)&&(i[e]=t[e])}));n.set(i);if(void 0===t.glyphs){o.next=13;break}a=r.getResourceFilename(t.glyphs);o.next=7;return e.promises.readFile(a,"utf8");case 7:c=o.sent;c=JSON.parse(c);n.__P_486_0={};s=n.getName();u=n.getDefaultSize();for(l in c){f=c[l];n.__P_486_0["@"+s+"/"+l]=[Math.ceil(u*f.advanceWidth/f.advanceHeight)||u,u,f.codePoint]}case 13:case"end":return o.stop()}}),o)})))()},getApplicationFontData:function(){return this.__P_486_0},getBootstrapCode:function(t,e,r){var n="",o={family:this.getFamily()||[this.getName()]};r?o.fontFaces=this.getFontFaces():this.getCss()&&(o.css=this.getCss());null!==this.getDefaultSize()&&(o.defaultSize=this.getDefaultSize());null!==this.getComparisonString()&&(o.comparisonString=this.getComparisonString());return n+"qx.$$fontBootstrap['"+this.getName()+"']="+JSON.stringify(o,null,2)+";"}}});qx.tool.compiler.app.ManifestFont.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.config.Registry":{},"qx.tool.utils.Json":{},"qx.lang.Type":{},"qx.tool.config.Manifest":{},"qx.tool.config.Compile":{},"qx.tool.utils.Utils":{},"qx.log.Logger":{},"qx.tool.config.Abstract":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("process"),n=require("upath"),o=require("semver");qx.Class.define("qx.tool.config.Utils",{type:"static",statics:{__P_511_0:null,getProjectData:function(){var t=arguments;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=(i=t.length>0&&void 0!==t[0]?t[0]:null)||r.cwd();a=n.join(i,qx.tool.config.Registry.config.fileName);c={libraries:[],applications:[]};o.next=6;return e.existsAsync(a);case 6:if(!o.sent){o.next=12;break}o.next=9;return qx.tool.utils.Json.loadJsonAsync(a);case 9:s=o.sent;qx.lang.Type.isArray(s.libraries)&&(c.libraries=s.libraries);qx.lang.Type.isArray(s.applications)&&(c.applications=s.applications);case 12:o.next=14;return e.existsAsync(n.join(i,qx.tool.config.Manifest.config.fileName));case 14:if(!o.sent){o.next=16;break}c.libraries.find((function(t){return"."===t.path}))||c.libraries.push({path:"."});case 16:o.next=18;return e.existsAsync(n.join(i,qx.tool.config.Compile.config.fileName));case 18:if(!o.sent){o.next=20;break}c.applications.find((function(t){return"."===t.path}))||c.applications.push({path:"."});case 20:return o.abrupt("return",c);case 21:case"end":return o.stop()}}),o)})))()},getLibraryPath:function(){var t=arguments,e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=(i=t.length>0&&void 0!==t[0]?t[0]:null)||r.cwd();o.next=4;return e.getProjectData(i);case 4:a=o.sent;if(!((c=a.libraries)instanceof Array&&c.length)){o.next=8;break}return o.abrupt("return",n.resolve(r.cwd(),c[0].path));case 8:throw new qx.tool.utils.Utils.UserError("Cannot find library path - are you in the right directory?");case 9:case"end":return o.stop()}}),o)})))()},getApplicationPath:function(){var t=arguments,e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=(i=t.length>0&&void 0!==t[0]?t[0]:null)||r.cwd();o.next=4;return e.getProjectData(i);case 4:a=o.sent;if(!((c=a.applications)instanceof Array&&c.length)){o.next=8;break}return o.abrupt("return",n.resolve(r.cwd(),c[0].path));case 8:throw new qx.tool.utils.Utils.UserError("Cannot find application path - are you in the right directory?");case 9:case"end":return o.stop()}}),o)})))()},getQxPath:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.__P_511_0){e.next=4;break}e.next=3;return t.__P_511_0;case 3:case 9:return e.abrupt("return",e.sent);case 4:o=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.parse(r).root;case 1:if(r===o){e.next=14;break}e.next=4;return t.isQxLibrary(r);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",r);case 6:i=n.join(r,"node_modules","@qooxdoo","framework");e.next=9;return t.isQxLibrary(i);case 9:if(!e.sent){e.next=11;break}return e.abrupt("return",i);case 11:r=n.resolve(n.join(r,".."));e.next=1;break;case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var i,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return o(n.parse(require.main.filename).dir);case 2:if(!(i=e.sent)){e.next=5;break}return e.abrupt("return",i);case 5:e.next=7;return o(n.resolve(r.cwd()));case 7:if(!(i=e.sent)){e.next=10;break}return e.abrupt("return",i);case 10:e.next=12;return o(__dirname);case 12:if(!(i=e.sent)){e.next=15;break}return e.abrupt("return",i);case 15:e.next=17;return qx.tool.utils.Utils.exec("npm root -g");case 17:a=e.sent.trim();i=n.join(a,"@qooxdoo","framework");e.next=21;return t.isQxLibrary(i);case 21:if(!e.sent){e.next=23;break}return e.abrupt("return",i);case 23:throw new qx.tool.utils.Utils.UserError("Path to the qx library cannot be determined.");case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.__P_511_0=i();e.next=9;return t.__P_511_0;case 10:case"end":return e.stop()}}),e)})))()},applicationExists:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return e.existsAsync(n.join(t,qx.tool.config.Compile.config.fileName));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},getQxVersion:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.getQxPath();case 2:r=e.sent;return e.abrupt("return",qx.tool.config.Utils.getLibraryVersion(r));case 4:case"end":return e.stop()}}),e)})))()},getCompilerVersion:function(){return"7.7.2"},getAppQxVersion:function(){var t=arguments;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var n,i,a,c,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(n=t.length>0&&void 0!==t[0]?t[0]:null)||r.cwd();i="@qooxdoo/framework";e.next=5;return qx.tool.config.Manifest.getInstance().set({baseDir:n,warnOnly:!0,validate:!1}).load();case 5:a=e.sent;s=a.getValue("requires.".concat(i));qx.log.Logger.debug("Manifest in ".concat(n," requires ").concat(i,": ").concat(s));if(s&&!s.match(/[<>]/))try{c=s.match(/[\^~]?([-0-9a-z._]+)/g).sort().reverse()[0].slice(1)}catch(t){}if(c&&o.valid(c)){e.next=11;break}throw new Error("Cannot determine the qooxdoo version used to compile the application. "+"Please specify a caret or tilde range for the requires.".concat(i,' key in the Manifest")'));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})))()},isQxLibrary:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var o,i;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=n.join(t,qx.tool.config.Manifest.config.fileName);r.next=3;return e.existsAsync(o);case 3:if(r.sent){r.next=5;break}return r.abrupt("return",!1);case 5:r.prev=5;r.next=8;return qx.tool.utils.Json.loadJsonAsync(o);case 8:if(!(i=r.sent).provides||"qx"!==i.provides.namespace){r.next=11;break}return r.abrupt("return",!0);case 11:r.next=16;break;case 13:r.prev=13;r.t0=r.catch(5);throw new qx.tool.utils.Utils.UserError("Invalid manifest file ".concat(o,"."));case 16:return r.abrupt("return",!1);case 17:case"end":return r.stop()}}),r,null,[[5,13]])})))()},getManifestModels:function(){var t=arguments;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=(i=t.length>0&&void 0!==t[0]?t[0]:null)||r.cwd();a=qx.tool.config.Registry.getInstance();c=[];o.next=6;return a.exists();case 6:if(!o.sent){o.next=14;break}o.next=9;return a.load();case 9:s=a.getLibraries();u=_createForOfIteratorHelper(s);try{for(u.s();!(l=u.n()).done;){f=l.value;c.push(new qx.tool.config.Abstract(qx.tool.config.Manifest.config).set({baseDir:n.join(i,f.path)}))}}catch(t){u.e(t)}finally{u.f()}o.next=18;break;case 14:o.next=16;return e.existsAsync(qx.tool.config.Manifest.config.fileName);case 16:if(!o.sent){o.next=18;break}c.push(qx.tool.config.Manifest.getInstance());case 18:return o.abrupt("return",c);case 19:case"end":return o.stop()}}),o)})))()},getLibraryVersion:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,i,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.join(t,qx.tool.config.Manifest.config.fileName);e.next=3;return qx.tool.utils.Json.loadJsonAsync(r);case 3:if(i=e.sent){e.next=6;break}throw new Error("No Manifest exists at ".concat(r,"."));case 6:e.prev=6;a=i.info.version;e.next=13;break;case 10:e.prev=10;e.t0=e.catch(6);throw new Error("No valid version data in ".concat(r,"."));case 13:if(o.valid(a)){e.next=15;break}throw new qx.tool.utils.Utils.UserError("Manifest at ".concat(r,' contains invalid version number "').concat(a,'". Please use a semver compatible version.'));case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[6,10]])})))()}}});qx.tool.config.Utils.$$dbClassInfo=t}();function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _callSuper(t,e,r){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,r||[],_getPrototypeOf(t).constructor):e.apply(t,r))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,t)},_wrapNativeSuper(t)}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&_setPrototypeOf(o,r.prototype),o}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.log.Logger":{},"qx.Promise":{},"qx.util.ResourceManager":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=require("fs"),n=require("async"),o=require("util").promisify,i=require("child_process"),a=require("ps-tree");qx.Class.define("qx.tool.utils.Utils",{extend:qx.core.Object,statics:{newExternalPromise:function(){var t,e,r=new Promise((function(r,n){t=r;e=n}));r.resolve=t;r.reject=e;return r},promisifyThis:function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return new Promise((function(r,o){(n=n.slice()).push((function(t,e){t?o(t):r(e)}));try{t.apply(e,n)}catch(t){o(t)}}))},UserError:function(t){"use strict";function e(t){var r;_classCallCheck(this,e);(r=_callSuper(this,e,[t])).name="UserError";r.stack=null;return r}_inherits(e,t);return _createClass(e)}(_wrapNativeSuper(Error)),formatTime:function(t){var e=Math.floor(t/1e3);t%=1e3;var r=Math.floor(e/60);e%=60;var n=Math.floor(r/60);r%=60;var o="";n&&(o+=(n>9?n:"0"+n)+"h ");(n||r)&&(o+=(r>9?r:"0"+r)+"m ");e>9||!n&&!r?o+=e:(n||r)&&(o+="0"+e);return o+="."+(t>99?"":t>9?"0":"00")+t+"s"},mkpath:function(t,o){var i=(t=e.normalize(t)).split(e.sep),a="";n.eachSeries(i,(function(e,n){!a.length&&e.length||(a+="/");a+=e;r.exists(a,(function(e){e?r.stat(a,(function(e,r){e?n(e):r.isDirectory()?n(null):n(new Error("Cannot create "+a+" (in "+t+") because it exists and is not a directory","ENOENT"))})):r.mkdir(a,(function(t){t&&"EEXIST"===t.code&&(t=null);n(t)}))}))}),(function(t){o(t)}))},mkParentPath:function(t,r){var n=t.split(/[\\\/]/);n.pop();if(!n.length)return r&&r();t=n.join(e.sep);return this.mkpath(t,r)},makeParentDir:function(t){return o(this.mkParentPath).bind(this)(t)},makeDirs:function(t){return o(this.mkpath)(t)},LineCountingTransform:null,StripSourceMapTransform:null,ToStringWriteStream:null,isPlainObject:function(t){if("object"==_typeof(t)&&null!==t){if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"==Object.prototype.toString.call(t)}return!1},runCommand:function(t){var e=arguments;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,a,c;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=e.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=e[a];c={};if("object"==_typeof(t))c=t;else{o=o.filter((function(t){if("string"==typeof t)return!0;c||(c=t);return!1}));c.cwd||(c.cwd=t);c.cmd||(c.cmd=o.shift());c.args||(c.args=o)}c.error||(c.error=console.error);c.log||(c.log=console.log);r.next=7;return new Promise((function(t,e){var r=process.env;if(c.env){r=Object.assign({},r);Object.assign(r,c.env)}var n=i.spawn(c.cmd,c.args,{cwd:c.cwd,shell:!0,env:r}),o={exitCode:null,output:"",error:"",messages:null};n.stdout.on("data",(function(t){t=t.toString().trim();c.log(t);o.output+=t}));n.stderr.on("data",(function(t){t=t.toString().trim();c.error(t);o.error+=t}));n.on("close",(function(e){o.exitCode=e;t(o)}));n.on("error",(function(t){e(t)}))}));case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})))()},run:function(t,e){var r={env:process.env};return new Promise((function(n,o){var a=i.spawn(t,e,r);a.stdout.on("data",(function(t){qx.log.Logger.debug(t.toString())}));a.stderr.on("data",(function(t){qx.log.Logger.error(t.toString())}));a.on("close",(function(r){if(0!==r){var i="Error executing '".concat(t," ").concat(e.join(" "),"'. Use --verbose to see what went wrong.");o(new qx.tool.utils.Utils.UserError(i))}else n(0)}));a.on("error",o)}))},exec:function(t){return new Promise((function(e,r){i.exec(t,(function(t,n,o){t&&r(t);o&&r(new Error(o));e(n)}))}))},parseCommand:function(t){for(var e=null,r=!1,n=0,o=[],i=0;i<t.length;i++){var a=t[i];if(e)a==e&&(e=null);else if('"'!=a&&"'"!=a){if(" "==a||"\t"==a){if(r){var c=t.substring(n,i);o.push(c);r=!1}}else if(!r){r=!0;n=i}}else{e=a;if(!r){r=!0;n=i}}}if(r){var s=t.substring(n);o.push(s)}return o},quoteCommand:function(t){var e='&*?;# "';return t=t.map((function(t){var r=t[0];if(("'"==r||'"'==r)&&r==t[t.length-1])return t;if(t.indexOf("'")>-1)return t.indexOf('"')>-1?"$'"+t.replace(/'/g,"\\'")+"'":'"'+t+'"';for(var n=0;n<7;n++)if(t.indexOf(e[n])>-1)return"'"+t+"'";return t}))},formatCommand:function(t){return qx.tool.utils.Utils.quoteCommand(t).join(" ")},killTree:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return new qx.Promise((function(e,r){a(t,(function(n,o){if(n)r(n);else{o.forEach((function(t){try{process.kill(t.PID)}catch(t){}}));try{process.kill(t)}catch(t){}e()}}))}));case 2:case"end":return e.stop()}}),e)})))()},getTemplateDir:function(){var t=qx.util.ResourceManager.getInstance().toUri("qx/tool/cli/templates/template_vars.js");return t=e.dirname(t)},isExplicitArg:function(t){function e(t){return process.argv.indexOf(t)>-1}return e("-".concat(t))||e("--".concat(t))}},defer:function(t){var e=require("stream"),r=e.Writable,n=e.Transform,o=function(t){"use strict";function e(t){var r;_classCallCheck(this,e);(r=_callSuper(this,e,[t])).__P_515_0=1;return r}_inherits(e,t);return _createClass(e,[{key:"_write",value:function(t,e,r){for(var n=t.toString(),o=0;o<n.length;o++)"\n"==n[o]&&this.__P_515_0++;this.push(n);r()}},{key:"getLineNumber",value:function(){return this.__P_515_0}}])}(n);t.LineCountingTransform=o;var i=function(t){"use strict";function e(t){var r;_classCallCheck(this,e);(r=_callSuper(this,e,[t])).__P_515_1="";return r}_inherits(e,t);return _createClass(e,[{key:"_transform",value:function(t,e,r){var n=this.__P_515_1+t.toString(),o=n.lastIndexOf("\n");if(o>-1){this.__P_515_1=n.substring(o);n=n.substring(0,o)}else{this.__P_515_1=n;n=""}n=n.replace(/\n\/\/\#\s*sourceMappingURL=.*$/m,"");this.push(n);r()}},{key:"_flush",value:function(t){var e=this.__P_515_1;this.__P_515_1=null;e=e.replace(/\n\/\/\#\s*sourceMappingURL=.*$/m,"");this.push(e);t()}}])}(n);t.StripSourceMapTransform=i;var a=function(t){"use strict";function e(t,r){var n;_classCallCheck(this,e);(n=_callSuper(this,e,[r])).__P_515_2=t;n.__P_515_3="";return n}_inherits(e,t);return _createClass(e,[{key:"_write",value:function(t,e,r){this.__P_515_3+=t.toString();this.__P_515_2?this.__P_515_2.write(t,e,r):r&&r()}},{key:"toString",value:function(){return this.__P_515_3}}])}(r);t.ToStringWriteStream=a}});qx.tool.utils.Utils.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.jsdoc.CommandParser",{extend:qx.core.Object,type:"abstract",members:{parseCommand:function(t,e){throw new Error("No implementation for "+this.classname+".parseCommand")}}});qx.tool.compiler.jsdoc.CommandParser.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.CommandParser":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.jsdoc.ParamParser",{extend:qx.tool.compiler.jsdoc.CommandParser,members:{parseCommand:function(t,e){var r,n=t.body.match(/^([\S]+)(\s+\{([^}]+)\}([\s\S]+)?)??$/);if(n){t.paramName=n[1].trim();r=e.resolveType((n[3]||"").trim());t.description=n[4]}else if(n=t.body.match(/^(\{([^}]+)\}([\s]+))(\S+)(\s+[\s\S]*)?$/)){var o,i;t.paramName=n[4].trim();r=e.resolveType((n[2]||"").trim());t.description=null!==(o=null===(i=n[5])||void 0===i?void 0:i.trim())&&void 0!==o?o:""}if(n){var a=r.indexOf("?");if(a>-1){t.optional=!0;var c=r.substring(a+1).trim();c&&(t.defaultValue=c);r=r.substring(0,a).trim()}var s=r.split("|");s.length>1&&(r=s.map((function(t){var e,r=(t=t.trim()).indexOf("[]");if(r>-1){var n=t.substring(r);e={type:t.substring(0,r)};var o=1;r=0;for(;n.length&&"[]"==n.substring(r,2);){r+=2;o++}e.dimensions=o}else e=t;return e})));t.type=r}else{delete t.paramName;delete t.type;delete t.description}}}});qx.tool.compiler.jsdoc.ParamParser.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.CommandParser":{require:!0},"qx.tool.compiler.jsdoc.Parser":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.jsdoc.ReturnParser",{extend:qx.tool.compiler.jsdoc.CommandParser,members:{parseCommand:function(t,e){var r=qx.tool.compiler.jsdoc.Parser.getTypeExpression(t.body);if(r){t.type=e.resolveType(r.expr.trim());t.description=t.body.slice(r.end+1).replace(/^\s/,"")}else{delete t.type;delete t.description}}}});qx.tool.compiler.jsdoc.ReturnParser.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.CommandParser":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.jsdoc.ThrowsParser",{extend:qx.tool.compiler.jsdoc.CommandParser,members:{parseCommand:function(t,e){var r=t.body.match(/^(\{([^}]+)\}([\s\S]+)?)?$/);if(r){t.type=e.resolveType((r[2]||"").trim());t.description=r[3]||""}else{delete t.type;delete t.description}}}});qx.tool.compiler.jsdoc.ThrowsParser.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.CommandParser":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.jsdoc.ChildControlParser",{extend:qx.tool.compiler.jsdoc.CommandParser,members:{parseCommand:function(t,e){var r=t.body.match(/^([\S]+)(\s+\{([^}]+)\}([\s\S]+))??$/);if(r){t.controlName=r[1].trim();var n=this.resolveType((r[3]||"").trim(),e);t.description=(r[4]||"").trim();t.type=n}else{delete t.controlName;delete t.type;delete t.description}}}});qx.tool.compiler.jsdoc.ChildControlParser.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.tool.compiler.Console":{},"qx.tool.compiler.jsdoc.ParamParser":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.ReturnParser":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.ThrowsParser":{usage:"dynamic",require:!0},"qx.tool.compiler.jsdoc.ChildControlParser":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=require("showdown");qx.Class.define("qx.tool.compiler.jsdoc.Parser",{extend:qx.core.Object,statics:{parseComment:function(t){if(!((t=t.trim()).startsWith("* ")||t.startsWith("*\n")||t.startsWith("*\r")))return{};var r={name:"@description",body:""},n=[r];(t=(t=(t=(t=(t=(t=(t=t.replace(/`([^`]*)`/gm,"<code>$1</code>")).replace(/^[ \t]*\*/gm,"")).replace(/^\s*\*/gm,"*")).replace(/^\s*\*\*\*\*/gm,"\t\t\t*")).replace(/^\s*\*\*\*/gm,"\t\t*")).replace(/^\s*\*\*/gm,"\t*")).split("\n")).forEach((function(t){if(t=t.trimRight()){var e=t.match(/(^.*)([^:]\/\/.*)$/);e&&(t=e[1].trimRight());if(e=t.match(/^\s*(\@[a-zA-Z0-9_]+)(.*)$/)){var o=e[1],i=e[2];"@returns"==o&&(o="@return");"@throw"==o&&(o="@throws");r={name:o,body:i};n.push(r)}else{r.body.length&&(r.body+="\n");r.body+=t}}}));var o={},i=new e.Converter;n.forEach((function(t){if("@description"===t.name)try{t.body=i.makeHtml(t.body)}catch(e){qx.tool.compiler.Console.getInstance().isVerbose()&&qx.tool.compiler.Console.info('\n              Markdown conversion problem: \n              Error "'.concat(e.message,'" was thrown parsing \n              "').concat(t.body.trim(),'". \n              Please review your doc comments for compatibility with Markdown syntax.\n              '))}else{var e=t.body.match(/^\s*\(([\s\S]*)\)\s*$/m);e&&(t.body=e[1]);t.body=t.body.trim()}o[t.name]?o[t.name].push(t):o[t.name]=[t]}));return o},parseJsDoc:function(t,e){for(var r in t){var n=this.__P_489_0[r];n&&t[r].forEach((function(t){return n.parseCommand(t,e)}))}},__P_489_0:{"@param":new qx.tool.compiler.jsdoc.ParamParser,"@return":new qx.tool.compiler.jsdoc.ReturnParser,"@throws":new qx.tool.compiler.jsdoc.ThrowsParser,"@throw":new qx.tool.compiler.jsdoc.ThrowsParser,"@childControl":new qx.tool.compiler.jsdoc.ChildControlParser},getTypeExpression:function(t){for(var e,r,n=t.split(""),o=0,i=0;i<n.length;i++){var a=n[i];if("{"==a){o++;e||(e=i+1)}if("}"==a&&0===--o&&!r){r=i;break}}return e&&r?{expr:t.slice(e,r),start:e,end:r}:null}}});qx.tool.compiler.jsdoc.Parser.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.json.Parser":{}}};qx.Bootstrap.executePendingDefers(t);var e={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10,COMMENT:11,WHITESPACE:12};qx.Class.define("qx.tool.utils.json.Tokenizer",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.input=t;this.settings=e||{};this.tokens=null;this.tokenIndex=-1},members:{token:function(){if(null===this.tokens)throw new Error("No tokens to return (have you called tokenize?)");if(this.tokenIndex>=this.tokens.length)throw new Error("No more tokens available");return this.tokenIndex<0?this.next():this.tokens[this.tokenIndex]},hasMore:function(){var t=qx.tool.utils.json.Tokenizer.tokenTypes;if(null===this.tokens)throw new Error("No tokens to return (have you called tokenize?)");if(this.settings.returnWhitespace)return this.tokenIndex<this.tokens.length;var e=this.tokenIndex;e<0&&(e=0);for(;e<this.tokens.length;e++){var r=this.tokens[e];if(r.type!=t.COMMENT&&r.type!=t.WHITESPACE)return!0}return!1},next:function(){var t=qx.tool.utils.json.Tokenizer.tokenTypes;if(null===this.tokens)throw new Error("No tokens to return (have you called tokenize?)");if(this.tokenIndex>=this.tokens.length)throw new Error("No more tokens to get");if(this.settings.returnWhitespace){if(this.tokenIndex<this.tokens.length)return this.tokens[++this.tokenIndex]}else for(++this.tokenIndex;this.tokenIndex<this.tokens.length;this.tokenIndex++){var e=this.tokens[this.tokenIndex];if(e.type!=t.COMMENT&&e.type!=t.WHITESPACE)return e}return null},tokenize:function(){for(var t=qx.tool.utils.json.Tokenizer,e=1,r=1,n=0,o=this.tokens=[],i=this.input;n<i.length;){var a=[i,n,e,r,this.settings],c=t.parseWhitespace.apply(t,a)||t.parseComment.apply(t,a)||t.parseChar.apply(t,a)||t.parseKeyword.apply(t,a)||t.parseString.apply(t,a)||t.parseNumber.apply(t,a);if(c){var s={type:c.type,value:c.value,loc:qx.tool.utils.json.Parser.location(e,r,n,c.line,c.column,c.index,this.settings.source)};c.rawValue&&(s.rawValue=c.rawValue);o.push(s);n=c.index;e=c.line;r=c.column}else qx.tool.utils.json.Parser.error(t.cannotTokenizeSymbol(i.charAt(n),e,r),i,e,r)}return o}},statics:{tokenTypes:e,punctuatorTokensMap:{"{":e.LEFT_BRACE,"}":e.RIGHT_BRACE,"[":e.LEFT_BRACKET,"]":e.RIGHT_BRACKET,":":e.COLON,",":e.COMMA},keywordTokensMap:{true:{type:e.TRUE,value:!0},false:{type:e.FALSE,value:!1},null:{type:e.NULL,value:null}},stringStates:{_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},escapes:{'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",u:"u"},numberStates:{_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7},isDigit1to9:function(t){return t>="1"&&t<="9"},isDigit:function(t){return t>="0"&&t<="9"},isHex:function(t){return qx.tool.utils.json.Tokenizer.isDigit(t)||t>="a"&&t<="f"||t>="A"&&t<="F"},isExp:function(t){return"e"===t||"E"===t},cannotTokenizeSymbol:function(t,e,r){return"Cannot tokenize symbol <".concat(t,"> at ").concat(e,":").concat(r)},parseWhitespace:function(t,e,r,n){for(var o="";;){var i=t.charAt(e);if("\r"===i){e++;r++;n=1;o+=i;if("\n"===t.charAt(e)){e++;o+="\n"}}else if("\n"===i){e++;r++;n=1;o+=i}else{if("\t"!==i&&" "!==i)break;e++;n++;o+=i}}return 0==o.length?null:{index:e,line:r,column:n,type:qx.tool.utils.json.Tokenizer.tokenTypes.WHITESPACE,value:o}},parseComment:function(t,e,r,n){var o=t.substring(e,e+2),i=e;if("/*"===o){for(e+=2;e<t.length;e++){if("*"===(a=t[e])&&"/"===t[e+1]){e+=2;n+=2;break}if("\r"===a){e++;r++;n=1;"\n"===t.charAt(e)&&e++}else if("\n"===a){e++;r++;n=1}else n++}return{index:e,line:r,column:n,type:qx.tool.utils.json.Tokenizer.tokenTypes.COMMENT,value:t.substring(i,e)}}if("//"===o){for(e+=2;e<t.length;e++){var a;if("\r"===(a=t[e])){e++;r++;n=1;"\n"===t.charAt(e)&&e++;break}if("\n"===a){e++;r++;n=1;break}}return{index:e,line:r,column:n,type:qx.tool.utils.json.Tokenizer.tokenTypes.COMMENT,value:t.substring(i,e)}}return null},parseChar:function(t,e,r,n){var o=t.charAt(e),i=qx.tool.utils.json.Tokenizer.punctuatorTokensMap;return o in i?{type:i[o],line:r,column:n+1,index:e+1,value:o}:null},parseKeyword:function(t,e,r,n){var o=qx.tool.utils.json.Tokenizer.keywordTokensMap;for(var i in o)if(o.hasOwnProperty(i)&&t.substr(e,i.length)===i){var a=o[i],c=a.type,s=a.value;return{type:c,line:r,column:n+i.length,index:e+i.length,value:s}}return null},parseString:function(t,e,r,n,o){for(var i=qx.tool.utils.json.Tokenizer,a=i.stringStates,c=i.tokenTypes,s=i.escapes,u=e,l="",f=a._START_;e<t.length;){var p=t.charAt(e);switch(f){case a._START_:if('"'!==p)return null;f=a.START_QUOTE_OR_CHAR;e++;break;case a.START_QUOTE_OR_CHAR:if("\\"===p){f=a.ESCAPE;e++}else{if('"'===p){e++;var h={type:c.STRING,line:r,column:n+e-u,index:e,value:l};o.verbose&&(h.rawValue=t.substring(u,e));return h}l+=p;e++}break;case a.ESCAPE:if(!(p in s))return null;if("u"===p){e++;for(var y=0;y<4;y++){var d=t.charAt(e);if(!d||!qx.tool.utils.json.Tokenizer.isHex(d))return null;l+=d;e++}}else{l+=s[p];e++}f=a.START_QUOTE_OR_CHAR}}return null},parseNumber:function(t,e,r,n){var o=qx.tool.utils.json.Tokenizer.numberStates,i=e,a=e,c=o._START_;t:for(;e<t.length;){var s=t.charAt(e);switch(c){case o._START_:if("-"===s)c=o.MINUS;else if("0"===s){a=e+1;c=o.ZERO}else{if(!qx.tool.utils.json.Tokenizer.isDigit1to9(s))return null;a=e+1;c=o.DIGIT}break;case o.MINUS:if("0"===s){a=e+1;c=o.ZERO}else{if(!qx.tool.utils.json.Tokenizer.isDigit1to9(s))return null;a=e+1;c=o.DIGIT}break;case o.ZERO:if("."===s)c=o.POINT;else{if(!qx.tool.utils.json.Tokenizer.isExp(s))break t;c=o.EXP}break;case o.DIGIT:if(qx.tool.utils.json.Tokenizer.isDigit(s))a=e+1;else if("."===s)c=o.POINT;else{if(!qx.tool.utils.json.Tokenizer.isExp(s))break t;c=o.EXP}break;case o.POINT:if(!qx.tool.utils.json.Tokenizer.isDigit(s))break t;a=e+1;c=o.DIGIT_FRACTION;break;case o.DIGIT_FRACTION:if(qx.tool.utils.json.Tokenizer.isDigit(s))a=e+1;else{if(!qx.tool.utils.json.Tokenizer.isExp(s))break t;c=o.EXP}break;case o.EXP:if("+"===s||"-"===s)c=o.EXP_DIGIT_OR_SIGN;else{if(!qx.tool.utils.json.Tokenizer.isDigit(s))break t;a=e+1;c=o.EXP_DIGIT_OR_SIGN}break;case o.EXP_DIGIT_OR_SIGN:if(!qx.tool.utils.json.Tokenizer.isDigit(s))break t;a=e+1}e++}return a>0?{type:qx.tool.utils.json.Tokenizer.tokenTypes.NUMBER,line:r,column:n+a-i,index:a,value:parseFloat(t.substring(i,a))}:null}}});qx.tool.utils.json.Tokenizer.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _callSuper(t,e,r){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,r||[],_getPrototypeOf(t).constructor):e.apply(t,r))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,t)},_wrapNativeSuper(t)}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&_setPrototypeOf(o,r.prototype),o}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.utils.json.Tokenizer":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.json.Parser",{statics:{literals:[qx.tool.utils.json.Tokenizer.tokenTypes.STRING,qx.tool.utils.json.Tokenizer.tokenTypes.NUMBER,qx.tool.utils.json.Tokenizer.tokenTypes.TRUE,qx.tool.utils.json.Tokenizer.tokenTypes.FALSE,qx.tool.utils.json.Tokenizer.tokenTypes.NULL],objectStates:{_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},propertyStates:{_START_:0,KEY:1,COLON:2},arrayStates:{_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},defaultSettings:{verbose:!0,source:null},location:function(t,e,r,n,o,i,a){return{start:{line:t,column:e,offset:r},end:{line:n,column:o,offset:i},source:a||null}},comment:function(t,e,r){if(void 0!==r.comments){var n=t[e];void 0===n&&(n=t[e]=[]);r.comments.forEach((function(t){n.push({loc:t.loc,source:t.value})}))}},parseObject:function(t,e,r){for(var n,o=qx.tool.utils.json.Parser.objectStates,i=qx.tool.utils.json.Tokenizer.tokenTypes,a={type:"object",children:[]},c=o._START_;e.hasMore();){var s=e.token();switch(c){case o._START_:if(s.type!==i.LEFT_BRACE)return null;n=s;c=o.OPEN_OBJECT;if(r.verbose){a.startToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(a,"leadingComments",s)}e.next();break;case o.OPEN_OBJECT:if(s.type===i.RIGHT_BRACE){if(r.verbose){a.loc=qx.tool.utils.json.Parser.location(n.loc.start.line,n.loc.start.column,n.loc.start.offset,s.loc.end.line,s.loc.end.column,s.loc.end.offset,r.source);a.endToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(a,"trailingComments",s)}e.next();return{value:a}}var u=qx.tool.utils.json.Parser.parseProperty(t,e,r);a.children.push(u.value);c=o.PROPERTY;break;case o.PROPERTY:if(s.type===i.RIGHT_BRACE){if(r.verbose){a.loc=qx.tool.utils.json.Parser.location(n.loc.start.line,n.loc.start.column,n.loc.start.offset,s.loc.end.line,s.loc.end.column,s.loc.end.offset,r.source);a.endToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(a,"trailingComments",s)}e.next();return{value:a}}if(s.type===i.COMMA){qx.tool.utils.json.Parser.comment(a.children[a.children.length-1],"trailingComments",s);c=o.COMMA;e.next()}else qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedToken(t.substring(s.loc.start.offset,s.loc.end.offset),s.loc.start.line,s.loc.start.column),t,s.loc.start.line,s.loc.start.column);break;case o.COMMA:var l=qx.tool.utils.json.Parser.parseProperty(t,e,r);if(l){a.children.push(l.value);c=o.PROPERTY}else qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedToken(t.substring(s.loc.start.offset,s.loc.end.offset),s.loc.start.line,s.loc.start.column),t,s.loc.start.line,s.loc.start.column)}}qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedEnd());return null},parseProperty:function(t,e,r){for(var n,o=qx.tool.utils.json.Parser,i=o.objectStates,a=o.propertyStates,c=qx.tool.utils.json.Tokenizer.tokenTypes,s={type:"property",key:null,value:null},u=i._START_;e.hasMore();){var l=e.token();switch(u){case a._START_:if(l.type!==c.STRING)return null;var f={type:"identifier",value:l.value};if(r.verbose){f.loc=l.loc;s.startToken=f.startToken=f.endToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(f,"leadingComments",l)}n=l;s.key=f;u=a.KEY;e.next();break;case a.KEY:if(l.type===c.COLON){if(r.verbose){qx.tool.utils.json.Parser.comment(s.key,"trailingComments",l);s.colonToken=l}u=a.COLON;e.next()}else qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedToken(t.substring(l.loc.start.offset,l.loc.end.offset),l.loc.start.line,l.loc.start.column),t,l.loc.start.line,l.loc.start.column);break;case a.COLON:var p=qx.tool.utils.json.Parser.parseValue(t,e,r);s.value=p.value;if(r.verbose){s.endToken=p.value.endToken;s.loc=qx.tool.utils.json.Parser.location(n.loc.start.line,n.loc.start.column,n.loc.start.offset,p.value.loc.end.line,p.value.loc.end.column,p.value.loc.end.offset,r.source)}return{value:s}}}return null},parseArray:function(t,e,r){for(var n,o,i=qx.tool.utils.json.Parser.arrayStates,a=qx.tool.utils.json.Tokenizer.tokenTypes,c={type:"array",children:[]},s=i._START_;e.hasMore();){o=e.token();switch(s){case i._START_:if(o.type!==a.LEFT_BRACKET)return null;n=o;if(r.verbose){c.startToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(c,"leadingComments",o)}s=i.OPEN_ARRAY;e.next();break;case i.OPEN_ARRAY:if(o.type===a.RIGHT_BRACKET){if(r.verbose){c.loc=qx.tool.utils.json.Parser.location(n.loc.start.line,n.loc.start.column,n.loc.start.offset,o.loc.end.line,o.loc.end.column,o.loc.end.offset,r.source);c.endToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(c,"trailingComments",o)}e.next();return{value:c}}var u=qx.tool.utils.json.Parser.parseValue(t,e,r);c.children.push(u.value);s=i.VALUE;break;case i.VALUE:if(o.type===a.RIGHT_BRACKET){if(r.verbose){c.loc=qx.tool.utils.json.Parser.location(n.loc.start.line,n.loc.start.column,n.loc.start.offset,o.loc.end.line,o.loc.end.column,o.loc.end.offset,r.source);c.endToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(c,"trailingComments",o)}e.next();return{value:c}}if(o.type===a.COMMA){s=i.COMMA;e.next()}else qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedToken(t.substring(o.loc.start.offset,o.loc.end.offset),o.loc.start.line,o.loc.start.column),t,o.loc.start.line,o.loc.start.column);break;case i.COMMA:var l=qx.tool.utils.json.Parser.parseValue(t,e,r);c.children.push(l.value);s=i.VALUE}}qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedEnd());return null},parseLiteral:function(t,e,r){var n=e.token();if(-1!==qx.tool.utils.json.Parser.literals.indexOf(n.type)){var o=n.value;n.type==qx.tool.utils.json.Tokenizer.tokenTypes.STRING&&(o=o.replace(/\\(.)/g,"$1"));var i={type:"literal",value:o,rawValue:t.substring(n.loc.start.offset,n.loc.end.offset)};if(r.verbose){i.loc=n.loc;i.startToken=i.endToken=e.tokenIndex;qx.tool.utils.json.Parser.comment(i,"leadingComments",n)}e.next();return{value:i}}return null},parseValue:function(t,e,r){var n,o,i,a=e.token(),c=(n=qx.tool.utils.json.Parser).parseLiteral.apply(n,arguments)||(o=qx.tool.utils.json.Parser).parseObject.apply(o,arguments)||(i=qx.tool.utils.json.Parser).parseArray.apply(i,arguments);if(c)return c;qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedToken(t.substring(a.loc.start.offset,a.loc.end.offset),a.loc.start.line,a.loc.start.column),t,a.loc.start.line,a.loc.start.column);return null},parseToAst:function(t,e){e=Object.assign({},qx.tool.utils.json.Parser.defaultSettings,e);var r=new qx.tool.utils.json.Tokenizer(t,e);r.tokenize();r.hasMore()||qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedEnd());var n=qx.tool.utils.json.Parser.parseValue(t,r,e);if(!r.hasMore()){var o=n.value;e.verbose&&(o.tokenizer=r);return o}var i=r.next();qx.tool.utils.json.Parser.error(qx.tool.utils.json.Parser.unexpectedToken(t.substring(i.loc.start.offset,i.loc.end.offset),i.loc.start.line,i.loc.start.column),t,i.loc.start.line,i.loc.start.column);return null},parse:function(t,e){return qx.tool.utils.json.Parser.parseToAst(t,e)},unexpectedEnd:function(){return"Unexpected end of JSON input"},unexpectedToken:function(t,e,r){return"Unexpected token <".concat(t,"> at ").concat(e,":").concat(r)},error:function(t,e,r,n){var o=function(t){"use strict";function e(t,r,n,o){var i;_classCallCheck(this,e);var a=n?t+"\n"+function(t,e,r){return t.split(/\n|\r\n?|\f/)[e-1]+"\n"+new Array(r).join(" ")+"^"}(r,n,o):t;(i=_callSuper(this,e,[a])).rawMessage=t;return i}_inherits(e,t);return _createClass(e)}(_wrapNativeSuper(SyntaxError));throw new o(t,e,r,n)}}});qx.tool.utils.json.Parser.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.tool.utils.json.Writer":{},"qx.lang.Type":{},"qx.tool.utils.json.Tokenizer":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.json.Stringify",{extend:qx.core.Object,statics:{prettyPrint:function(t){var e=new qx.tool.utils.json.Writer;!function t(r){switch(r.type){case"object":e.comments(r.leadingComments);e.write("{\n").indent(1);r.children.forEach((function(r,n){n>0&&e.write(",\n");e.write('"'+r.key.value+'" : ');t(r.value)}));r.children.length&&e.write("\n");e.comments(r.trailingComments);e.indent(-1).write("}");break;case"array":e.comments(r.leadingComments);e.write("[\n").indent(1);r.children.forEach((function(r,n){n>0&&e.write(",\n");t(r.value)}));r.children.length&&e.write("\n");e.comments(r.trailingComments);e.indent(-1).write("]\n");break;case"property":t(r.key);e.write(" : ");t(r.value);break;case"identifier":e.write('"'+r.value+'"');break;case"literal":e.comments(r.leadingComments);e.write(r.rawValue);e.comments(r.trailingComments);break;default:throw new Error("Unexpected node type '"+r.type+"'")}}(t);return e.buffer},reprint:function(t,e){var r=new qx.tool.utils.json.Writer;if(!e){o(t);return r.buffer}var n=e.tokenizer;function o(t){if("string"==typeof t)r.write('"'+t+'"');else if("number"==typeof t)r.write(t);else if("boolean"==typeof t)r.write(t?"true":"false");else if(qx.lang.Type.isArray(t)){r.write("[ ");t.forEach((function(t,e){0!=e&&r.write(", ");o(t)}));r.write(" ]")}else{var e=!0,n=r.matchIndent();r.write("{\n").indent(1);for(var i in t){e||r.write(",\n");r.write('"'+i+'": ');o(t[i]);e=!1}r.write("\n").indent(-1).write("}");r.resetIndent(n)}}function i(t,e){r.write('"'+t+'": ');o(e)}var a=0;function c(t){if(a>-1)for(;a<t;){var e=n.tokens[a];r.write(e.rawValue||e.value);a++}}!function t(e,s){function u(t,e){var r;if(void 0!==e.endToken)r=e.endToken;else{if(void 0===e.startToken)return t;r=e.startToken}return t>r?t:r}if(void 0!==s.startToken)switch(s.type){case"object":if(!qx.tool.utils.json.Stringify.isPlainObject(e)){o(e);return}var l={};s.children.forEach((function(t,e){l[t.key.value]=t}));var f={};for(var p in e)f[p]=e[p];c(s.startToken+1);for(var h=-1,y=!0,d=0;d<s.children.length;d++){var m=(_=s.children[d]).key.value,v=e[m];if(void 0!==v){y=!1;h=u(h,_.value);c(_.value.startToken);t(v,_.value);delete f[m]}else{c(_.key.startToken);a=_.value.endToken+1;if(y&&d<s.children.length-1){for(;n.tokens[a].type!=qx.tool.utils.json.Tokenizer.tokenTypes.COMMA;)a++;a++}}}y=0===s.children.length;var g=r.matchIndent();for(var p in f){if(!y){r.write(",\n");y=!1}i(p,f[p])}r.resetIndent(g);a=-1===h?s.endToken:h+1;c(s.endToken+1);break;case"array":if(!qx.lang.Type.isArray(e)){o(e);return}c(s.startToken+1);for(d=0;d<e.length;d++){var _;if(void 0!==(_=d<s.children.length?s.children[d]:void 0)){c(_.startToken);t(e[d],_);a=_.endToken+1}else{g=r.matchIndent();0!=d&&r.write(",\n");o(e[d]);r.resetIndent(g)}}c(s.endToken+1);break;case"property":break;case"literal":if(!qx.tool.utils.json.Stringify.isLiteral(e)){o(e);a=s.endToken+1;return}if(qx.tool.utils.json.Stringify.isSameLiteral(s,e))c(s.startToken+1);else{c(s.startToken);"string"==typeof e?r.write('"'+e+'"'):r.write(e);a=s.startToken+1}break;default:throw new Error("Unexpected node type '"+s.type+"'")}else!function(t){var e=qx.tool.utils.json.Stringify.prettyPrint(t);r.write(e);a=-1}(s)}(t,e);if(a>-1)for(;a<n.tokens.length;){var s=n.tokens[a++];if(s.type!=qx.tool.utils.json.Tokenizer.tokenTypes.COMMENT&&s.type!=qx.tool.utils.json.Tokenizer.tokenTypes.WHITESPACE)break;r.write(s.rawValue||s.value)}return r.buffer},astToObject:function(t,e){return function t(e){var r;switch(e.type){case"object":r={};e.children.forEach((function(e,n){r[e.key.value]=t(e.value)}));break;case"array":r=[];e.children.forEach((function(e,n){r.push(t(e))}));break;case"literal":r=e.value;break;default:throw new Error("Unexpected node type '"+e.type+"'")}return r}(t)},isPlainObject:function(t){if("object"===_typeof(t)&&null!==t){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return!1},isLiteral:function(t){return null===t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t},isSameLiteral:function(t,e){return null===t.rawValue&&null===e||!(null!==t.rawValue&&null===e||null===t.rawValue&&null!==e)&&(_typeof(t.value)===_typeof(e)&&("string"==typeof t.value?t.value===e:t.rawValue==e))}}});qx.tool.utils.json.Stringify.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.tool.utils.Promisify":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=(require("path"),require("tmp")),n=require("http");qx.Class.define("qx.tool.utils.Http",{extend:qx.core.Object,statics:{downloadToTempfile:function(t,o){return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return qx.tool.utils.Promisify.call((function(t){return r.tmpName(t)}));case 2:a=i.sent;i.next=5;return new Promise((function(r,i){n.get(t,(function(t){var n,c=t.statusCode,s=t.headers["content-type"];200!==c?n=new Error("Request Failed.\nStatus Code: ".concat(c)):o&&!o.test(s)&&(n=new Error("Invalid content-type, received ".concat(s)));if(n){t.resume();i(n)}else{var u=e.createWriteStream(a);u.on("close",(function(){return r(a)}));t.on("data",(function(t){return u.write(t)}));t.on("end",(function(){return u.end()}))}}))}));case 5:case"end":return i.stop()}}),i)})))()}}});qx.tool.utils.Http.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.lang.Type":{construct:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.resources.AbstractMatcher",{extend:qx.core.Object,type:"abstract",construct:function(t){qx.core.Object.constructor.call(this);if(t)if(qx.lang.Type.isArray(t)){t=t.map((function(t){"."!=t[0]&&(t="."+t);return t}));this.__P_493_0=function(e){return t.some((function(t){return e.endsWith(t)}))}}else if("string"==typeof t){"."!=t[0]&&(t="."+t);this.__P_493_0=function(e){return e.endsWith(t)}}else this.__P_493_0=function(e){return t.test(e)}},members:{__P_493_0:null,matches:function(t,e){return null!==this.__P_493_0&&this.__P_493_0(t)}}});qx.tool.compiler.resources.AbstractMatcher.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.resources.AbstractMatcher":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.resources.ResourceLoader",{extend:qx.tool.compiler.resources.AbstractMatcher,type:"abstract",construct:function(t,e){qx.tool.compiler.resources.AbstractMatcher.constructor.call(this,t);this.__P_496_0=e},members:{__P_496_0:null,needsLoad:function(t,e,r){var n=null;try{n=e.mtime&&new Date(e.mtime)}catch(t){}return!n||n.getTime()!=r.mtime.getTime()},load:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("No implementation for "+e.classname+".compile");case 1:case"end":return t.stop()}}),t)})))()},getManager:function(){return this.__P_496_0}}});qx.tool.compiler.resources.ResourceLoader.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{usage:"dynamic",require:!0},"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.resources.ResourceLoader":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.promisify(require("image-size")),r=qx.tool.utils.LogManager.createLog("resource-manager");qx.Class.define("qx.tool.compiler.resources.ImageLoader",{extend:qx.tool.compiler.resources.ResourceLoader,construct:function(t){qx.tool.compiler.resources.ResourceLoader.constructor.call(this,[".png",".gif",".jpg",".jpeg",".svg"],t)},members:{needsLoad:function(t,e,r){return!e||void 0===e.width||void 0===e.height||qx.tool.compiler.resources.ImageLoader.superclass.prototype.needsLoad.call(this,t,e,r)},matches:function(t,e){if(e.isFontAsset(t))return!1;if(t.endsWith(".svg")){var r=t.substring(0,t.length-3),n=this.getManager();if(["eot","woff2","woff","ttf"].find((function(t){return!!n.findLibraryForResource(r+t)})))return!1}return qx.tool.compiler.resources.ImageLoader.superclass.prototype.matches.call(this,t,e)},load:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.getSourceFilename();i=t.getFileInfo();r.trace("Getting size of "+o);n.prev=3;n.next=6;return e(o);case 6:a=n.sent;i.width=a.width;i.height=a.height;n.next=15;break;case 11:n.prev=11;n.t0=n.catch(3);delete i.width;delete i.height;case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))()}}});qx.tool.compiler.resources.ImageLoader.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.resources.ResourceLoader":{construct:!0,require:!0},"qx.tool.utils.Json":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.resources.MetaLoader",{extend:qx.tool.compiler.resources.ResourceLoader,construct:function(t){qx.tool.compiler.resources.ResourceLoader.constructor.call(this,".meta",t)},members:{load:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Json.loadJsonAsync(t.getSourceFilename());case 2:t.getFileInfo().meta=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}});qx.tool.compiler.resources.MetaLoader.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.resources.AbstractMatcher":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.resources.ResourceConverter",{extend:qx.tool.compiler.resources.AbstractMatcher,type:"abstract",members:{isDoNotCopy:function(t){return!1},needsConvert:function(t,e,r,n,o){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})))()},getDestFilename:function(t,e){return null},compile:function(t,e,r,n,o){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("No implementation for "+i.classname+".convert");case 1:case"end":return t.stop()}}),t)})))()}}});qx.tool.compiler.resources.ResourceConverter.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.resources.ResourceConverter":{construct:!0,require:!0},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.resources.ScssFile":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=loadSass(),n=qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.compiler.resources.ScssConverter",{extend:qx.tool.compiler.resources.ResourceConverter,construct:function(){qx.tool.compiler.resources.ResourceConverter.constructor.call(this)},members:{matches:function(t){return"_"!=(t=e.basename(t))[0]&&t.endsWith(".scss")},getDestFilename:function(t,r){return qx.tool.compiler.resources.ScssConverter.isNewCompiler()?e.join(t.getOutputDir(),"resource",r.getFilename().replace(/\.scss$/,".css")):e.join(t.getOutputDir(),"resource",r.getFilename().replace(/\bscss\b/g,"css"))},convert:function(t,r,n,o,i){var a=this;return _asyncToGenerator(_regeneratorRuntime().mark((function c(){var s,u;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!qx.tool.compiler.resources.ScssConverter.COPY_ORIGINAL_FILES){c.next=4;break}s=e.join(t.getOutputDir(),"resource",r.getFilename());c.next=4;return qx.tool.utils.files.Utils.copyFile(n,s);case 4:if(qx.tool.compiler.resources.ScssConverter.isNewCompiler()){c.next=6;break}return c.abrupt("return",a.legacyMobileSassConvert(t,r,n,o));case 6:(u=new qx.tool.compiler.resources.ScssFile(t,r.getLibrary(),r.getFilename())).setThemeFile(i);return c.abrupt("return",u.compile(o));case 9:case"end":return c.stop()}}),c)})))()},legacyMobileSassConvert:function(t,o,i,a){return _asyncToGenerator(_regeneratorRuntime().mark((function c(){var s,u,l,f,p;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!qx.tool.compiler.resources.ScssConverter.COPY_ORIGINAL_FILES){c.next=4;break}s=e.join(t.getOutputDir(),"resource",o.getFilename());c.next=4;return qx.tool.utils.files.Utils.copyFile(i,s);case 4:u=t.getAnalyser().getQooxdooPath();c.next=7;return n.readFileAsync(i,"utf8");case 7:if((l=c.sent)&&l.trim()){c.next=15;break}c.next=11;return n.writeFileAsync(a,"");case 11:c.next=13;return n.unlinkAsync(a+".map");case 13:c.next=23;break;case 15:f={data:l,includePaths:[e.dirname(i),e.join(u,"source/resource/qx/mobile/scss"),e.join(u,"source/resource/qx/scss")],outFile:a,sourceMap:a+".map",outputStyle:"compressed"};c.next=18;return qx.tool.utils.Promisify.call((function(t){return r.render(f,(function(e,r){e?t(new Error(e.message)):t(null,r)}))}));case 18:p=c.sent;c.next=21;return n.writeFileAsync(a,p.css);case 21:c.next=23;return n.writeFileAsync(a+".map",p.map);case 23:case"end":return c.stop()}}),c)})))()}},statics:{USE_V6_COMPILER:!0,COPY_ORIGINAL_FILES:!1,isNewCompiler:function(){if(null===qx.tool.compiler.resources.ScssConverter.USE_V6_COMPILER){console.warn("DEPRECATED: Using the Qooxdoo v5 style of SASS Compilation; this is backwards compatible but the default will change in v7 to use the new style (see https://git.io/JfTPV for details, and how to disable this warning).");qx.tool.compiler.resources.ScssConverter.USE_V6_COMPILER=!1}return qx.tool.compiler.resources.ScssConverter.USE_V6_COMPILER}}});qx.tool.compiler.resources.ScssConverter.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.resources.ResourceConverter":{require:!0},"qx.tool.compiler.resources.ScssConverter":{},"qx.tool.utils.files.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath");qx.Class.define("qx.tool.compiler.resources.ScssIncludeConverter",{extend:qx.tool.compiler.resources.ResourceConverter,members:{matches:function(t){return"_"==(t=e.basename(t))[0]&&t.endsWith(".scss")},isDoNotCopy:function(t){return!qx.tool.compiler.resources.ScssConverter.COPY_ORIGINAL_FILES},convert:function(t,e,r,n,o){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return qx.tool.utils.files.Utils.copyFile(r,n);case 2:case"end":return t.stop()}}),t)})))()}}});qx.tool.compiler.resources.ScssIncludeConverter.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.Values",{statics:{binaryIndexOf:function(t,e){for(var r,n,o=0,i=t.length-1;o<=i;)if((n=t[r=(o+i)/2|0])<e)o=r+1;else{if(!(n>e))return r;i=r-1}return-1},binaryStartsWith:function(t,e){for(var r,n,o=0,i=t.length-1;o<=i;){if((n=t[r=(o+i)/2|0]).startsWith(e)){for(;r>0&&t[r-1].startsWith(e);)r--;return r}n<e?o=r+1:n>e&&(i=r-1)}return-1},merge:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r&&r.forEach((function(e){for(var r in e)t[r]=e[r]}));return t}}});qx.tool.utils.Values.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.lang.Array":{},"qx.tool.utils.Promisify":{},"qx.tool.utils.files.Utils":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath");qx.Class.define("qx.tool.compiler.resources.Asset",{extend:qx.core.Object,construct:function(t,e,r){qx.core.Object.constructor.call(this);this.__P_494_0=t;this.__filename=e;this.__P_494_1=r},members:{__P_494_0:null,__filename:null,__P_494_1:null,__P_494_2:null,__P_494_3:null,__P_494_4:null,__P_494_5:null,__P_494_6:null,__P_494_7:null,getLibrary:function(){return this.__P_494_0},getFilename:function(){return this.__filename},getFileInfo:function(){return this.__P_494_1},isThemeFile:function(){return"themePath"==this.__P_494_1.resourcePath},getSourceFilename:function(){return e.relative(process.cwd(),this.isThemeFile()?this.__P_494_0.getThemeFilename(this.__filename):this.__P_494_0.getResourceFilename(this.__filename))},getDestFilename:function(t){var r=null;this.__P_494_3&&(r=this.__P_494_3[this.__P_494_3.length-1].getDestFilename(t,this));return r||e.relative(process.cwd(),e.join(t.getOutputDir(),"resource",this.__filename))},setLoaders:function(t){this.__P_494_2=t.length?t:null},setConverters:function(t){this.__P_494_3=t.length?t:null},addMetaReferee:function(t){this.__P_494_4||(this.__P_494_4=[]);qx.lang.Array.contains(this.__P_494_4,t)||this.__P_494_4.push(t)},getMetaReferees:function(){return this.__P_494_4},addMetaReferTo:function(t){this.__P_494_5||(this.__P_494_5=[]);qx.lang.Array.contains(this.__P_494_5,t)||this.__P_494_5.push(t)},getMetaReferTo:function(){return this.__P_494_5},setDependsOn:function(t){var e=this;this.__P_494_6&&this.__P_494_6.forEach((function(t){return delete t.__P_494_7[e.getFilename]}));if(t&&t.length){this.__P_494_6=t;this.__P_494_1.dependsOn=t.map((function(t){return t.toUri()}));t.forEach((function(t){t.__P_494_7||(t.__P_494_7={});t.__P_494_7[e.getFilename()]=e}))}else{this.__P_494_6=null;delete this.__P_494_1.dependsOn}},getDependsOn:function(){return this.__P_494_6},getDependsOnThisAsset:function(){return this.__P_494_7?Object.values(this.__P_494_7):null},load:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.__P_494_2&&t.__P_494_2.forEach((function(e){return e.load(t)}));case 1:case"end":return e.stop()}}),e)})))()},sync:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=r.getDestFilename(t);i=r.getSourceFilename();if(!r.__P_494_3){n.next=8;break}n.next=5;return qx.tool.utils.Promisify.some(r.__P_494_3,(function(t){return t.isDoNotCopy(i)}));case 5:if(!n.sent){n.next=8;break}return n.abrupt("return");case 8:n.next=10;return qx.tool.utils.files.Utils.safeStat(o);case 10:if(!(a=n.sent)){n.next=23;break}c=[r.getSourceFilename()];r.__P_494_6&&r.__P_494_6.forEach((function(t){return c.push(t.getSourceFilename())}));n.next=16;return qx.tool.utils.Promisify.some(c,function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return qx.tool.utils.files.Utils.safeStat(e);case 2:r=t.sent;return t.abrupt("return",r&&r.mtime.getTime()>a.mtime.getTime());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:if((s=n.sent)||!r.__P_494_3){n.next=21;break}n.next=20;return qx.tool.utils.Promisify.some(r.__P_494_3,(function(e){return e.needsConvert(t,r,i,o,r.isThemeFile())}));case 20:s=n.sent;case 21:if(s){n.next=23;break}return n.abrupt("return");case 23:n.next=25;return qx.tool.utils.Utils.makeParentDir(o);case 25:if(!r.__P_494_3){n.next=43;break}u=[];if(1!=r.__P_494_3.length){n.next=36;break}n.next=30;return r.__P_494_3[0].convert(t,r,i,o,r.isThemeFile());case 30:n.t0=n.sent;if(n.t0){n.next=33;break}n.t0=[];case 33:u=n.t0;n.next=38;break;case 36:l=null;qx.tool.utils.Promisify.each(r.__P_494_3,function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function n(a,c){var s,f;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=l||i;f=c===r.__P_494_3.length-1?o:e.join(require("os").tmpdir(),e.basename(i)+"-pass"+(c+1)+"-");n.next=4;return a.convert(t,r,s,f,r.isThemeFile());case 4:n.t0=n.sent;if(n.t0){n.next=7;break}n.t0=[];case 7:n.t0.forEach((function(t){return u.push(t)}));l=f;case 10:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}());case 38:f=t.getAnalyser().getResourceManager();u=u.map((function(t){return f.getAsset(e.resolve(t),!0,r.isThemeFile())})).filter((function(t){return t!==r}));r.setDependsOn(u);n.next=45;break;case 43:n.next=45;return qx.tool.utils.files.Utils.copyFile(i,o);case 45:case"end":return n.stop()}}),n)})))()},toUri:function(){return this.__P_494_0.getNamespace()+":"+this.__filename},toString:function(){return this.toUri()}}});qx.tool.compiler.resources.Asset.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.lang.Type":{construct:!0},"qx.tool.utils.Json":{},"qx.tool.compiler.Console":{},"qx.tool.utils.Utils":{},"qx.util.ResourceManager":{},"qx.tool.config.Manifest":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("process"),n=require("upath"),o=require("semver"),i=require("get-value"),a=require("set-value"),c=require("unset-value");qx.Class.define("qx.tool.config.Abstract",{extend:qx.core.Object,statics:{schemaBaseUrl:"https://qooxdoo.org/schema"},construct:function(t){qx.core.Object.constructor.call(this);qx.lang.Type.isObject(t)&&this.set(t);for(var e=0,n=["fileName","version"];e<n.length;e++){var o=n[e];if(!this.get(o))throw new Error("Property ".concat(o," must be set when instantiating ").concat(this.classname))}t.baseDir||this.setBaseDir(r.cwd())},properties:{fileName:{check:"String"},baseDir:{check:"String"},version:{validate:function(t){return null!==o.coerce(t)},check:"String",nullable:!0},data:{check:"Object",event:"changeData",validate:"_validateData",nullable:!1},dirty:{check:"Boolean",init:!1,event:"changeDirty"},loaded:{check:"Boolean",init:!1,event:"changeLoaded"},warnOnly:{check:"Boolean",init:!1},validate:{check:"Boolean",init:!0},createIfNotExists:{check:"Boolean",init:!1},templateFunction:{check:"Function",nullable:!1}},members:{__P_510_0:null,_validateData:function(t){if(this.isValidate()&&null!==this.getVersion()){if(!this.__P_510_0)throw new Error("Cannot validate - no schema available! Please load the model first.");try{qx.tool.utils.Json.validate(t,this.__P_510_0)}catch(t){var e="Error validating data for ".concat(this.getRelativeDataPath(),": ").concat(t.message);if(!this.isWarnOnly())throw new qx.tool.utils.Utils.UserError(e);qx.tool.compiler.Console.warn(e)}}},getDataPath:function(){return n.join(this.getBaseDir(),this.getFileName())},getRelativeDataPath:function(){return n.relative(r.cwd(),this.getDataPath())},_getSchemaFileName:function(){var t=this.getFileName().split(/\./),e=_slicedToArray(t,2),r=e[0],n=e[1],i=String(o.coerce(this.getVersion())).replace(/\./g,"-");return"".concat(r,"-").concat(i,".").concat(n)},getSchemaPath:function(){return qx.util.ResourceManager.getInstance().toUri("qx/tool/schema/".concat(this._getSchemaFileName()))},getSchemaUri:function(){return qx.tool.config.Abstract.schemaBaseUrl+"/"+this._getSchemaFileName()},getSchema:function(){return this.__P_510_0},exists:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return e.existsAsync(t.getDataPath());case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},load:function(){var t=arguments,r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var i,a,c,s,u,l;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(i=t.length>0&&void 0!==t[0]?t[0]:void 0)){n.next=32;break}if(!r.isLoaded()){n.next=4;break}return n.abrupt("return",r);case 4:n.next=6;return e.existsAsync(r.getDataPath());case 6:if(!n.sent){n.next=14;break}n.t0=qx.tool.utils.Json;n.next=10;return e.readFileAsync(r.getDataPath(),"utf8");case 10:n.t1=n.sent;i=n.t0.parseJson.call(n.t0,n.t1);n.next=32;break;case 14:if(!r.isCreateIfNotExists()){n.next=31;break}n.next=17;return qx.tool.config.Manifest.getInstance().exists();case 17:if(!n.sent){n.next=28;break}if(!(a=r.getTemplateFunction())){n.next=25;break}i=a.bind(r)();if(qx.lang.Type.isObject(i)){n.next=23;break}throw new Error("Template for config file ".concat(r.getRelativeDataPath()," is invalid. Must be an object."));case 23:n.next=26;break;case 25:throw new Error("Cannot create config file ".concat(r.getRelativeDataPath()," without a template."));case 26:n.next=29;break;case 28:throw new Error("Cannot create config file ".concat(r.getRelativeDataPath()," since no Manifest exists. Are you in the library root?"));case 29:n.next=32;break;case 31:throw new Error("Cannot load config file: ".concat(r.getRelativeDataPath()," does not exist. Are you in the library root?"));case 32:void 0===i.$schema&&r.setValidate(!1);if(!r.isValidate()||null===r.getVersion()){n.next=49;break}if(c=qx.tool.utils.Json.getSchemaInfo(i)){n.next=37;break}throw new Error("Invalid data: no schema found, must be of schema ".concat(r.getSchemaUri(),"!"));case 37:s=o.major(o.coerce(c.version));u=o.major(o.coerce(r.getVersion()));if(s!==u){r.warn("Possible schema version mismatch in ".concat(r.getDataPath(),": expected v").concat(u,", found v").concat(s,"."));s?r.setVersion(c.version):r.setValidate(!1)}if(r.__P_510_0){n.next=49;break}l=r.getSchemaPath();n.next=44;return e.existsAsync(l);case 44:if(n.sent){n.next=46;break}throw new Error("No schema file exists at ".concat(r.getSchemaPath()));case 46:n.next=48;return qx.tool.utils.Json.loadJsonAsync(l);case 48:r.__P_510_0=n.sent;case 49:r.setData(i);r.setLoaded(!0);return n.abrupt("return",r);case 52:case"end":return n.stop()}}),n)})))()},getValue:function(t,e){return i(this.getData(),t,e)},setValue:function(t,e,r){var n=this.getValue(t,r);a(this.getData(),t,e,{preservePaths:!1});try{this.validate()}catch(e){void 0===n?c(this.getData(),t):a(this.getData(),t,n,{preservePaths:!1});throw e}this.setDirty(!0);return this},unset:function(t,e){var r=this.getValue(t,e);c(this.getData(),t);try{this.validate()}catch(e){a(this.getData(),t,r,{preservePaths:!1});throw e}this.setDirty(!0);return this},transform:function(t,e,r){var n=e(this.getValue(t,r));if(void 0===n)throw new Error("Return value of transformation fuction must not be undefined.");this.setValue(t,n,r);return this},keyExists:function(t){if(qx.lang.Type.isString(t))return void 0!==this.getValue(t);if(qx.lang.Type.isObject(t)){var e,r=!1,n=_createForOfIteratorHelper(Object.getOwnPropertyNames(t));try{for(n.s();!(e=n.n()).done;){var o=e.value;t[o]=this.keyExists(o);r=r||t[o]}}catch(t){n.e(t)}finally{n.f()}return r}throw new TypeError("Invalid argument")},validate:function(){this._validateData(this.getData())},save:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.validate();e.next=3;return qx.tool.utils.Json.saveJsonAsync(t.getDataPath(),t.getData());case 3:case"end":return e.stop()}}),e)})))()}}});qx.tool.config.Abstract.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.config.Abstract":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.config.Registry",{extend:qx.tool.config.Abstract,type:"singleton",statics:{config:{fileName:"qooxdoo.json",version:"1.0.0"}},construct:function(){qx.tool.config.Abstract.constructor.call(this,qx.tool.config.Registry.config)},members:{getLibraries:function(){return this.getValue("libraries")}}});qx.tool.config.Registry.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.config.Abstract":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.config.Manifest",{extend:qx.tool.config.Abstract,type:"singleton",statics:{config:{fileName:"Manifest.json",version:"2.0.0"}},construct:function(){qx.tool.config.Abstract.constructor.call(this,qx.tool.config.Manifest.config)}});qx.tool.config.Manifest.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.config.Abstract":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.config.Compile",{extend:qx.tool.config.Abstract,type:"singleton",statics:{config:{fileName:"compile.json",version:"^1.0.0"}},construct:function(){qx.tool.config.Abstract.constructor.call(this,qx.tool.config.Compile.config)}});qx.tool.config.Compile.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.json.Writer",{extend:qx.core.Object,construct:function(){qx.core.Object.constructor.call(this);this.buffer="";this.__P_519_0=0;this.__P_519_1="";this.__P_519_2=0},members:{write:function(t){if(null===t)t="null";else if(void 0===t)t="undefined";else if("number"==typeof t)t=t.toString();else if("boolean"==typeof t)t=t?"true":"false";else if("string"!=typeof t)throw new Error("Can only write strings and numbers");for(var e=0;;){var r=t.indexOf("\n",e);if(!(r>-1)){this.buffer+=t.substring(e);break}this.buffer+=t.substring(e,r+1);this.__P_519_2=this.buffer.length;this.buffer+=this.__P_519_1;e=r+1}return this},comments:function(t){var e=this;t&&t.forEach((function(t){e.write(t.source+"\n")}))},indent:function(t){if(this.__P_519_0+t<0)throw new Error("Unbalanced indent");this.__P_519_0+=t;var e=this.__P_519_1;if(t>0){for(var r="",n=0;n<t;n++)r+="  ";e+=r}else e=e.substring(0,e.length+2*t);this.buffer.substring(this.__P_519_2).match(/[^\s]/)||(this.buffer=this.buffer.substring(0,this.__P_519_2)+e);this.__P_519_1=e;return this},matchIndent:function(){var t=this.buffer.substring(this.__P_519_2).match(/^([\s]*)/)[0],e=this.__P_519_1;this.__P_519_1=t;return e},resetIndent:function(t){this.__P_519_1=t}}});qx.tool.utils.json.Writer.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.Promise":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath"),n=loadSass();qx.Class.define("qx.tool.compiler.resources.ScssFile",{extend:qx.core.Object,construct:function(t,e,r){qx.core.Object.constructor.call(this);this.__P_497_0=e;this.__filename=r;this.__P_497_1=t;this.__P_497_2={};this.__P_497_3={}},properties:{file:{nullable:!1,check:"String",event:"changeFile"},themeFile:{init:!1,check:"Boolean"}},members:{__P_497_0:null,__filename:null,__P_497_4:null,__P_497_5:null,__P_497_2:null,__P_497_3:null,compile:function(t){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o.__P_497_4=r.dirname(t);o.__P_497_5={};i.next=4;return o.loadSource(o.__filename,o.__P_497_0);case 4:a=i.sent;i.next=7;return new qx.Promise((function(i,c){n.render({file:o.__filename,data:a,outputStyle:"compressed",sourceMap:!0,outFile:r.basename(t),importer:function(t,e,r){var n=o.__P_497_2[t];if(!n){var i=o.__P_497_3[t];i&&(n=o.__P_497_2[i])}return n?{contents:n}:null},functions:{"qooxdooUrl($filename, $url)":function(t,e,r){return o.__P_497_6(t,e,r)}}},(function(r,n){if(r){qx.tool.compiler.Console.error("Error status "+r.status+" in "+o.__filename+"["+r.line+","+r.column+"]: "+r.message);i(r)}else e.writeFileAsync(t,n.css.toString(),"utf8").then((function(){return e.writeFileAsync(t+".map",n.map.toString(),"utf8")})).then((function(){return i(null)})).catch(c)}))}));case 7:return i.abrupt("return",Object.keys(o.__P_497_2));case 8:case"end":return i.stop()}}),i)})))()},_analyseFilename:function(t,e){var n=t.match(/^([a-z0-9_.]+):(\/?[^\/].*)/);if(n)return{namespace:n[1],filename:n[2],externalUrl:null};if(t.match(/^[a-z0-9_]+:\/\//))return{externalUrl:t};if("/"==t[0])return{namespace:null,filename:t};var o=r.dirname(e),i=r.resolve(o,t),a=this.__P_497_1.getAnalyser().getLibraries().find((function(t){return i.startsWith(r.resolve(t.getRootDir()))}));if(!a){qx.tool.compiler.Console.error("Cannot find library for "+t+" in "+e);return null}var c=r.join(a.getRootDir(),this.isThemeFile()?a.getThemePath():a.getResourcePath());return{namespace:a.getNamespace(),filename:r.relative(c,i),externalUrl:null}},reloadSource:function(t){t=r.resolve(t);delete this.__P_497_2[t];return this.loadSource(t)},loadSource:function(t,n){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=r.relative(process.cwd(),r.resolve(o.isThemeFile()?n.getThemeFilename(t):n.getResourceFilename(t)));a=t;""==r.extname(a)&&(a+=".scss");if(!(c=e.existsSync(a))&&"_"!=(s=r.basename(a))[0]){u=r.join(r.dirname(a),"_"+s);(c=e.existsSync(u))&&(a=u)}if(c){i.next=8;break}o.__P_497_2[a]=null;return i.abrupt("return",null);case 8:if(void 0===o.__P_497_2[a]){i.next=10;break}return i.abrupt("return",qx.Promise.resolve(o.__P_497_2[a]));case 10:i.next=12;return e.readFileAsync(a,"utf8");case 12:l=i.sent;f=[];l=l.replace(/@import\s+["']([^;]+)["']/gi,(function(t,e,n){var i=o._analyseFilename(e,a);if(i.externalUrl)return'@import "'+i.externalUrl+'"';var c=o.__P_497_1.getAnalyser().findLibrary(i.namespace);if(!c){qx.tool.compiler.Console.error("Cannot find file to import, url="+e+" in file "+a);return null}f.push(o.loadSource(i.filename,c));var s=o.isThemeFile()?c.getThemeFilename(i.filename):c.getResourceFilename(i.filename);return'@import "'+r.relative(process.cwd(),s)+'"'}));l=l.replace(/\burl\s*\(\s*([^\)]+)*\)/gi,(function(e,n){var i=n[0];"'"!==i&&'"'!==i||(n=n.substring(1));"'"!==(i=n[n.length-1])&&'"'!==i||(n=n.substring(0,n.length-1));var a=o._analyseFilename(n,t);if(a){if(a.externalUrl)return'url("'.concat(a.externalUrl,'")');if(a.namespace){var c=r.relative(process.cwd(),r.join(o.__P_497_1.getOutputDir(),"resource",a.filename)),s=r.relative(o.__P_497_4,c);return'url("'.concat(s,'")')}}return'url("'.concat(n,'")')}));o.__P_497_2[a]=l;o.__P_497_3[t]=a;i.next=20;return qx.Promise.all(f);case 20:return i.abrupt("return",l);case 21:case"end":return i.stop()}}),i)})))()},getSourceFilenames:function(){return Object.keys(this.__P_497_2)},__P_497_6:function(t,e,o){var i=t.getValue(),a=e.getValue(),c=this._analyseFilename(a,i);if(c){if(c.externalUrl)return n.types.String("url("+c.externalUrl+")");if(c.namespace){var s=r.relative(process.cwd(),r.join(this.__P_497_1.getOutputDir(),"resource",c.filename)),u=r.relative(this.__P_497_4,s);return n.types.String("url("+u+")")}}return n.types.String("url("+a+")")}}});qx.tool.compiler.resources.ScssFile.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.application.Basic":{require:!0},"qx.tool.cli.Cli":{},"qx.tool.compiler.Console":{},"qx.log.Logger":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.Application",{extend:qx.application.Basic,members:{main:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:process.exitCode=0;t.prev=1;t.next=4;return(new qx.tool.cli.Cli).run();case 4:t.next=10;break;case 6:t.prev=6;t.t0=t.catch(1);qx.tool.compiler.Console.error("Error: "+(t.t0.stack||t.t0.message));process.exitCode=1;case 10:t.prev=10;process.exit();return t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,6,10,13]])})))()}},defer:function(t){qx.log.Logger.setLevel("error")}});qx.tool.cli.Application.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.log.appender.NodeConsole":{construct:!0},"qx.tool.config.Utils":{},"qx.log.Logger":{},"qx.tool.compiler.Console":{},"qx.lang.Array":{},"qx.tool.config.Compile":{},"qx.tool.config.Lockfile":{},"qx.tool.cli.api.CompilerApi":{},"qx.tool.utils.Json":{},"qx.tool.cli.commands.package.Install":{},"qx.tool.utils.Utils":{},"qx.lang.Type":{},"qx.tool.config.Manifest":{},"qx.tool.cli.api.LibraryApi":{},"qx.lang.Object":{},"qx.tool.compiler.resources.ScssConverter":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=qx.tool.utils.Promisify.fs,n=require("semver");qx.Class.define("qx.tool.cli.Cli",{extend:qx.core.Object,properties:{command:{apply:"__P_460_0"}},construct:function(){qx.core.Object.constructor.call(this);if(qx.tool.cli.Cli.__P_460_1)throw new Error("qx.tool.cli.Cli has already been initialized!");this.__P_460_2=!1;qx.tool.cli.Cli.__P_460_1=this;qx.log.appender.NodeConsole},members:{yargs:null,argv:null,_compilerApi:null,_compileJsFilename:null,_compileJsonFilename:null,__P_460_3:null,__P_460_4:!1,__P_460_0:function(t){t.setCompilerApi(this._compilerApi);this._compilerApi.setCommand(t)},__P_460_5:function(){return this.yargs=require("yargs").locale("en").version().strict(!1).showHelpOnFail().help(!1).option("force",{describe:"Override warnings",type:"boolean",default:!1,alias:"F"}).option("config-file",{describe:"Specify the config file to use",type:"string",alias:"c"}).option("verbose",{alias:"v",describe:"enables additional progress output to console",default:!1,type:"boolean"}).option("debug",{describe:"enables debug output",default:!1,type:"boolean"}).option("quiet",{alias:"q",describe:"suppresses normal progress output to console",type:"boolean"}).option("colorize",{describe:"colorize log output to the console using ANSI color codes",default:!0,type:"boolean"})},__P_460_6:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="\n"+(r="qooxdoo command line interface")+"\n"+"=".repeat(r.length);e.t0=r;e.t1="\nVersion: v";e.next=6;return qx.tool.config.Utils.getQxVersion();case 6:e.t2=e.sent;r=e.t0+=e.t1.concat.call(e.t1,e.t2,"\n");r+="\n";r+="Typical usage:\n        qx <commands> [options]\n\n      Type qx <command> --help for options and subcommands.";n=t.__P_460_5().usage(r);t.argv=n.argv;t.argv.debug?qx.log.Logger.setLevel("debug"):t.argv.quiet?qx.log.Logger.setLevel("error"):qx.log.Logger.setLevel("info");qx.log.appender.NodeConsole.setUseColors(t.argv.colorize);case 14:case"end":return e.stop()}}),e)})))()},__P_460_7:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.__P_460_5().help(!0).option("set",{describe:"sets an environment value for the compiler",nargs:1,requiresArg:!0,type:"string",array:!0}).option("set-env",{describe:"sets an environment value for the application",nargs:1,requiresArg:!0,type:"string",array:!0}).check((function(t){var e=/^[^=\s]+=.+$/,r=t["set-env"];if(void 0!==r&&r.some((function(t){return!e.test(t)})))throw new Error("Argument check failed: --set-env must be a key=value pair.");return!0}));qx.tool.cli.Cli.addYargsCommands(r,["Add","Clean","Compile","Config","Deploy","Es6ify","ExportGlyphs","Package","Pkg","Create","Lint","Run","Test","Typescript","Serve","Migrate"],"qx.tool.cli.commands");e.next=4;return r.demandCommand().strict().argv;case 4:t.argv=e.sent;e.next=7;return t.__P_460_8();case 7:case"end":return e.stop()}}),e)})))()},__P_460_9:function(){this._compilerApi.getCommand()&&this._compilerApi.getCommand().processArgs(this.argv)},__P_460_8:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.__P_460_4){e.next=2;break}return e.abrupt("return");case 2:t.__P_460_4=!0;r=0,n=t._compilerApi.getLibraryApis();case 4:if(!(r<n.length)){e.next=11;break}o=n[r];e.next=8;return o.load();case 8:r++;e.next=4;break;case 11:e.next=13;return t._compilerApi.afterLibrariesLoaded();case 13:case"end":return e.stop()}}),e)})))()},processCommand:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:qx.tool.compiler.Console.getInstance().setVerbose(e.argv.verbose);r.next=3;return e.__P_460_8();case 3:r.next=5;return t.process();case 5:n=r.sent;r.next=8;return e._compilerApi.afterProcessFinished(t,n);case 8:return r.abrupt("return",n);case 9:case"end":return r.stop()}}),r)})))()},getParsedArgs:function(){return this.__P_460_3},run:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=qx.lang.Array.clone(process.argv)).shift();process.title=r.join(" ");e.next=5;return t.__P_460_10();case 5:return e.abrupt("return",t.processCommand(t.getCommand()));case 6:case"end":return e.stop()}}),e)})))()},__P_460_10:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k,S,O,j,T,C,A,G,R,I;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return t.__P_460_6();case 2:i=qx.tool.config.Compile.config.fileName;if(t.argv.configFile){process.chdir(e.dirname(t.argv.configFile));t.argv.configFile=e.basename(t.argv.configFile);i=t.argv.configFile}a={version:qx.tool.config.Lockfile.getInstance().getVersion()};c=qx.tool.cli.Cli.compileJsFilename;s=qx.tool.config.Compile.config.fileName;i&&(i.match(/\.js$/)?c=i:s=i);o.next=10;return r.existsAsync(s);case 10:if(!o.sent){o.next=12;break}t._compileJsonFilename=s;case 12:u=qx.tool.cli.api.CompilerApi;o.next=15;return r.existsAsync(c);case 15:if(!o.sent){o.next=22;break}t.__P_460_2=!0;o.next=19;return t.__P_460_11(c);case 19:l=o.sent;t._compileJsFilename=c;l.CompilerApi&&(u=l.CompilerApi);case 22:f=t._compilerApi=new u(t).set({rootDir:".",configFilename:s});o.next=25;return f.load();case 25:p=f.getConfiguration();o.next=28;return qx.tool.config.Compile.getInstance().load(p);case 28:if(!i){o.next=90;break}h=qx.tool.config.Lockfile.config.fileName;o.prev=30;y=e.join(e.dirname(i),h);o.next=34;return qx.tool.utils.Json.loadJsonAsync(y);case 34:o.t0=o.sent;if(o.t0){o.next=37;break}o.t0=a;case 37:a=o.t0;o.next=42;break;case 40:o.prev=40;o.t1=o.catch(30);case 42:d=n.coerce(qx.tool.config.Lockfile.getInstance().getVersion(),!0).raw;m=a&&a.version?n.coerce(a.version,!0).raw:"1.0.0";if(!(n.major(d)>n.major(m))){o.next=90;break}if(!t.argv.force){o.next=89;break}v={verbose:t.argv.verbose,quiet:t.argv.quiet,save:!1};g=new qx.tool.cli.commands.package.Install(v);_=g.getLockfilePath();x=_+".old";o.next=52;return r.copyFileAsync(_,x);case 52:t.argv.quiet||qx.tool.compiler.Console.warn("*** A backup of ".concat(h," has been saved to ").concat(x,", in case you need to revert to it. ***"));o.next=55;return g.deleteLockfile();case 55:b=_createForOfIteratorHelper(a.libraries);o.prev=56;b.s();case 58:if((w=b.n()).done){o.next=76;break}q=w.value;o.next=62;return g.isInstalled(q.uri,q.repo_tag);case 62:if(o.sent){o.next=73;break}if(!q.repo_tag){o.next=68;break}o.next=66;return g.install(q.uri,q.repo_tag);case 66:o.next=71;break;case 68:if(!q.path||!r.existsSync(q.path)){o.next=71;break}o.next=71;return g.installFromLocaPath(q.path,q.uri);case 71:o.next=74;break;case 73:t.argv.verbose&&qx.tool.compiler.Console.info(">>> ".concat(q.uri,"@").concat(q.repo_tag," is already installed."));case 74:o.next=58;break;case 76:o.next=81;break;case 78:o.prev=78;o.t2=o.catch(56);b.e(o.t2);case 81:o.prev=81;b.f();return o.finish(81);case 84:o.next=86;return g.getLockfileData();case 86:a=o.sent;o.next=90;break;case 89:throw new qx.tool.utils.Utils.UserError("*** Warning ***\n"+"The schema of '".concat(h,"' has changed. Execute 'qx clean && qx compile --force' to delete and regenerate it.\n")+"You might have to re-apply manual modifications to '".concat(h,"'."));case 90:p.libraries||r.existsSync("Manifest.json")&&(p.libraries=["."]);if(a.libraries){p.packages={};a.libraries.forEach((function(t){if("qooxdoo/qxl.apiviewer"==t.uri){var e=t.repo_tag.match(/^v([0-9]+)\.([0-9]+)\.([0-9]+)$/);if(e){e.shift();(e=e.map((function(t){return parseInt(t,10)})))[0]<=1&&0==e[1]&&e[2]<15&&qx.tool.compiler.Console.warn("***********\n*********** API Viewer is out of date and must be upgraded - please run 'qx package update' and then 'qx package upgrade'\n***********")}}p.libraries.push(t.path);p.packages[t.uri]=t.path}))}P=qx.lang.Type.isArray(t.argv._)&&"clean"!==t.argv._[0];if(!p.libraries||!P){o.next=129;break}if(!(L=p.libraries.filter((function(t){return!r.existsSync(t+"/Manifest.json")}))).length){o.next=101;break}if(!r.existsSync(qx.tool.config.Manifest.config.fileName)){qx.tool.compiler.Console.error("Libraries are missing and there is no Manifest.json in the current directory so we cannot attempt to install them; the missing libraries are: \n     "+L.join("\n     "));process.exit(1)}qx.tool.compiler.Console.info("One or more libraries not found - trying to install them from library repository...");E=new qx.tool.cli.commands.package.Install({quiet:!0,save:!1});o.next=101;return E.process();case 101:k=_createForOfIteratorHelper(p.libraries);o.prev=102;k.s();case 104:if((S=k.n()).done){o.next=121;break}O=S.value;j=e.join(O,qx.tool.cli.Cli.compileJsFilename);T=qx.tool.cli.api.LibraryApi;o.next=110;return r.existsAsync(j);case 110:if(!o.sent){o.next=115;break}o.next=113;return t.__P_460_11(j);case 113:(C=o.sent).LibraryApi&&(T=C.LibraryApi);case 115:A=(new T).set({rootDir:O,compilerApi:f});f.addLibraryApi(A);o.next=119;return A.initialize();case 119:o.next=104;break;case 121:o.next=126;break;case 123:o.prev=123;o.t3=o.catch(102);k.e(o.t3);case 126:o.prev=126;k.f();return o.finish(126);case 129:o.next=131;return t.__P_460_7();case 131:t.__P_460_9();G={target:t.argv.target,outputPath:null,locales:null,writeAllTranslations:t.argv.writeAllTranslations,environment:{},verbose:t.argv.verbose};t.argv.locale&&t.argv.locale.length&&(G.locales=t.argv.locale);t.argv["set-env"]&&t.argv["set-env"].forEach((function(t){var e=t.match(/^([^=\s]+)(=(.+))?$/),r=e[1],n=e[3];G.environment[r]=n}));R=t._compilerApi.getCommand().getTargetType();p.locales||(p.locales=[]);"boolean"==typeof G.writeAllTranslations&&(p.writeAllTranslations=G.writeAllTranslations);p.environment||(p.environment={});if(p.targets){(I=p.targets.find((function(t){return t.type===R}))).environment=I.environment||{};qx.lang.Object.mergeWith(I.environment,G.environment,!0)}p.sass&&void 0!==p.sass.compiler?qx.tool.compiler.resources.ScssConverter.USE_V6_COMPILER="latest"==p.sass.compiler:qx.tool.compiler.resources.ScssConverter.USE_V6_COMPILER=null;p.sass&&p.sass.copyOriginal&&(qx.tool.compiler.resources.ScssConverter.COPY_ORIGINAL_FILES=!0);p.serve||(p.serve={});t.isExplicitArg("listen-port")?p.serve.listenPort=t.argv.listenPort:p.serve.listenPort=p.serve.listenPort||t.argv.listenPort;o.next=146;return f.getConfiguration();case 146:t.__P_460_3=o.sent;return o.abrupt("return",t.__P_460_3);case 148:case"end":return o.stop()}}),o,null,[[30,40],[56,78,81,84],[102,123,126,129]])})))()},__P_460_11:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0;n=require(e.resolve(t));return r.abrupt("return",n);case 5:r.prev=5;r.t0=r.catch(0);o=r.t0.stack.split("\n");for(i=0;i<o.length;i++)o[i].match(/^\s+at/)&&o.splice(i);if(void 0===(a=o[0].split("evalmachine.<anonymous>:")[1])){r.next=15;break}o.shift();throw new Error("Error while reading "+t+" at line "+a+"\n"+o.join("\n"));case 15:throw new Error("Error while reading "+t+"\n"+o.join("\n"));case 16:case"end":return r.stop()}}),r,null,[[0,5]])})))()},compileJsExists:function(){return this.__P_460_2},getCompilerApi:function(){return this._compilerApi},getCompileJsFilename:function(){return this._compileJsFilename},getCompileJsonFilename:function(){return this._compileJsonFilename},isExplicitArg:function(t){function e(t){return process.argv.indexOf(t)>-1}return e("-".concat(t))||e("--".concat(t))}},statics:{compileJsFilename:"compile.js",__P_460_1:null,getInstance:function(){if(!qx.tool.cli.Cli.__P_460_1)throw new Error("CompileJs has not been initialized yet!");return qx.tool.cli.Cli.__P_460_1},addYargsCommands:function(t,e,r){var n=null;r.split(".").forEach((function(t){n=null===n?window[t]:n[t]}));e.forEach((function(e){var r=n[e],o=r.getYargsCommand();if(o){void 0===o.handler&&(o.handler=function(t){return qx.tool.cli.Cli.getInstance().setCommand(new r(t))});t.command(o)}}))}}});qx.tool.cli.Cli.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.cli.api.CompilerApi":{},"qx.tool.cli.ConfigDb":{},"qx.tool.utils.Utils":{},"qx.tool.migration.Runner":{},"qx.tool.compiler.Console":{},"qx.tool.config.Utils":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=require("path"),r=require("fs").promises,n=require("process");qx.Class.define("qx.tool.cli.commands.Command",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.argv=t},properties:{compilerApi:{check:"qx.tool.cli.api.CompilerApi",nullable:!0}},members:{argv:null,compileJs:null,process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.argv).set){e.next=6;break}e.next=4;return qx.tool.cli.ConfigDb.getInstance();case 4:n=e.sent;r.set.forEach((function(t){var e=t.match(/^([^=\s]+)(=(.+))?$/);if(!e)throw new qx.tool.utils.Utils.UserError("Failed to parse environment setting commandline option '--set ".concat(t,"'"));var r=e[1],o=e[3];n.setOverride(r,o)}));case 6:case"end":return e.stop()}}),e)})))()},processArgs:function(t){},getArgs:function(){return this.argv},checkMigrations:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.prev=0;o.next=3;return t.getAppQxVersion();case 3:o.sent;o.next=9;break;case 6:o.prev=6;o.t0=o.catch(0);return o.abrupt("return");case 9:i=e.join(n.cwd(),".qxmigrationcheck");o.prev=10;o.next=13;return r.stat(i);case 13:t.debug("Not checking migration because check is already in progress.");o.next=33;break;case 16:o.prev=16;o.t1=o.catch(10);o.next=20;return r.writeFile(i,"");case 20:a=(new qx.tool.migration.Runner).set({dryRun:!0});o.next=23;return a.runMigrations();case 23:c=o.sent;s=c.pending;c.applied;o.next=28;return r.unlink(i);case 28:if(!s){o.next=32;break}qx.tool.compiler.Console.warn("*** There are ".concat(s," pending migrations. \n")+"*** Please run '(npx) qx migrate --dry-run --verbose' for details, \n*** and '(npx) qx migrate' to apply the changes.");n.env.IGNORE_MIGRATION_WARNING||n.exit(1);return o.abrupt("return");case 32:t.debug("No migrations necessary.");case 33:case"end":return o.stop()}}),o,null,[[0,6],[10,16]])})))()},getQxPath:qx.tool.config.Utils.getQxPath.bind(qx.tool.config.Utils),getCompilerVersion:function(){return qx.tool.config.Utils.getCompilerVersion()},getQxVersion:function(){try{return this.argv.qxVersion||qx.tool.config.Utils.getQxVersion()}catch(t){throw new qx.tool.utils.Utils.UserError(t.message)}},getAppQxVersion:function(){try{return this.argv.qxVersion||qx.tool.config.Utils.getAppQxVersion()}catch(t){throw new qx.tool.utils.Utils.UserError(t.message)}},getTargetType:function(){return this.argv.target||this.getCompilerApi().getConfiguration().defaultTarget||"source"}}});qx.tool.cli.commands.Command.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.cli.Cli":{},"qx.tool.config.Lockfile":{},"qx.tool.config.Manifest":{},"qx.tool.compiler.Console":{},"qx.tool.cli.ConfigDb":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath"),n=require("process"),o=require("json-stable-stringify");qx.Class.define("qx.tool.cli.commands.Package",{extend:qx.tool.cli.commands.Command,statics:{cache_dir:"qx_packages",package_cache_name:"package-cache.json",lockfile:{filename:"qx-lock.json"},repository_cache_url:"https://raw.githubusercontent.com/qooxdoo/package-cache/master/cache.json",getYargsCommand:function(){return{command:"package <command> [options]",desc:"manages qooxdoo packages",builder:function(t){qx.tool.cli.Cli.addYargsCommands(t,["Install","List","Publish","Remove","Update","Upgrade","Migrate"],"qx.tool.cli.commands.package");return t.showHelpOnFail().help()},handler:function(){}}}},members:{__P_468_0:null,checkMigrations:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},getLockfilePath:function(){return r.join(n.cwd(),qx.tool.config.Lockfile.config.fileName)},deleteLockfile:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return e.unlinkAsync(t.getLockfilePath());case 2:case"end":return r.stop()}}),r)})))()},getLockfileData:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.getLockfileModel();case 2:return e.abrupt("return",e.sent.getData());case 3:case"end":return e.stop()}}),e)})))()},getLockfileModel:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",qx.tool.config.Lockfile.getInstance().load());case 1:case"end":return t.stop()}}),t)})))()},getManifestModel:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",qx.tool.config.Manifest.getInstance().load());case 1:case"end":return t.stop()}}),t)})))()},_getConfigData:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.getManifestModel();case 2:e.t0=e.sent;e.next=5;return t.getLockfileModel();case 5:e.t1=e.sent;return e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})))()},_saveConfigData:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t._getConfigData();case 2:r=e.sent;n=_slicedToArray(r,2);o=n[0];i=n[1];if(!t.argv.save||!o.isDirty()){e.next=10;break}e.next=9;return o.save();case 9:t.argv.verbose&&qx.tool.compiler.Console.info(">>> Saved dependency data to ".concat(o.getRelativeDataPath()));case 10:if(!i.isDirty()){e.next=14;break}e.next=13;return i.save();case 13:t.argv.verbose&&qx.tool.compiler.Console.info(">>> Saved library data to ".concat(i.getRelativeDataPath()));case 14:case"end":return e.stop()}}),e)})))()},getInstalledLibraryTag:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return r.getLockfileModel();case 2:o=n.sent.getValue("libraries").find((function(r){return r.repo_name===t&&r.library_name===e}));return n.abrupt("return",!!o&&o.repo_tag);case 4:case"end":return n.stop()}}),n)})))()},getInstalledLibraryData:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return e.getLockfileModel();case 2:return r.abrupt("return",r.sent.getValue("libraries").find((function(e){return e.library_name===t})));case 3:case"end":return r.stop()}}),r)})))()},getCachePath:function(){return r.join(qx.tool.cli.ConfigDb.getDirectory(),qx.tool.cli.commands.Package.package_cache_name)},getRepositoryCacheUrl:function(){return qx.tool.cli.commands.Package.repository_cache_url},getCache:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.__P_468_0&&"object"==_typeof(this.__P_468_0))return this.__P_468_0;try{this.__P_468_0=JSON.parse(e.readFileSync(this.getCachePath(),"UTF-8"))}catch(t){this.__P_468_0={repos:{list:[],data:{}},compat:{}}}return this.__P_468_0},setCache:function(t){this.__P_468_0=t},saveCache:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.utils.Utils.makeParentDir(t.getCachePath());case 2:r.next=4;return e.writeFileAsync(t.getCachePath(),JSON.stringify(t.__P_468_0,null,2),"UTF-8");case 4:case"end":return r.stop()}}),r)})))()},exportCache:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.prev=0;a=r.__P_468_0||r.getCache(!0);c=o(a,{space:2});i.next=5;return e.writeFileAsync(t,c,"UTF-8");case 5:i.next=11;break;case 7:i.prev=7;i.t0=i.catch(0);qx.tool.compiler.Console.error("Error exporting cache to ".concat(t,":")+i.t0.message);n.exit(1);case 11:case"end":return i.stop()}}),i,null,[[0,7]])})))()},clearCache:function(){this.__P_468_0=null;try{e.unlinkSync(this.getCachePath())}catch(t){}}}});qx.tool.cli.commands.Package.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.config.Abstract":{construct:!0,require:!0},"qx.tool.cli.commands.Package":{require:!0}}};qx.Bootstrap.executePendingDefers(t);var e="2.1.0";qx.Class.define("qx.tool.config.Lockfile",{extend:qx.tool.config.Abstract,type:"singleton",statics:{config:{fileName:qx.tool.cli.commands.Package.lockfile.filename,version:e,validate:!1,createIfNotExists:!0,templateFunction:function(){return{libraries:[],version:e}}}},construct:function(){qx.tool.config.Abstract.constructor.call(this,qx.tool.config.Lockfile.config)}});qx.tool.config.Lockfile.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("path"),r=require("fs");qx.Class.define("qx.tool.cli.api.AbstractApi",{extend:qx.core.Object,properties:{rootDir:{check:"String",nullable:!1},configuration:{init:{}}},members:{load:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getConfiguration());case 1:case"end":return e.stop()}}),e)})))()},initialize:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},require:function(t){function e(e){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(t){var n=e.join(process.cwd(),"node_modules");r.existsSync(n)||r.mkdirSync(n);n=e.join(n,t);r.existsSync(n)||this.loadNpmModule(t);return require(n)})),loadNpmModule:function(t){var e=require("child_process").execSync,r="npm install --no-package-lock ".concat(t);qx.tool.compiler.Console.info(r);e(r,{stdio:"inherit"})}}});qx.tool.cli.api.AbstractApi.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.api.AbstractApi":{construct:!0,require:!0},"qx.tool.cli.commands.Command":{},"qx.tool.utils.Json":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("path"),r=qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.cli.api.CompilerApi",{extend:qx.tool.cli.api.AbstractApi,construct:function(){var t=this;qx.tool.cli.api.AbstractApi.constructor.call(this);this.__P_463_0={};this.__P_463_1=!0;this.addListener("changeCommand",(function(){t.afterCommandLoaded(t.getCommand())}))},properties:{configFilename:{check:"String",nullable:!1},command:{init:null,nullable:!0,check:"qx.tool.cli.commands.Command",event:"changeCommand"}},members:{__P_463_0:null,afterCommandLoaded:function(t){},beforeTests:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},afterDeploy:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},load:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.join(t.getRootDir(),t.getConfigFilename());i={};n.next=4;return r.existsAsync(o);case 4:if(!n.sent){n.next=10;break}n.next=7;return qx.tool.utils.Json.loadJsonAsync(o);case 7:i=n.sent;n.next=11;break;case 10:t.__P_463_1=!1;case 11:t.setConfiguration(i);return n.abrupt("return",qx.tool.cli.api.CompilerApi.superclass.prototype.load.call(t));case 13:case"end":return n.stop()}}),n)})))()},compileJsonExists:function(){return this.__P_463_1},afterProcessFinished:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},afterLibrariesLoaded:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getLibraryApis(),n=0;case 1:if(!(n<r.length)){e.next=7;break}e.next=4;return r[n].afterLibrariesLoaded();case 4:n++;e.next=1;break;case 7:case"end":return e.stop()}}),e)})))()},addLibraryApi:function(t){var r=e.resolve(t.getRootDir());this.__P_463_0[r]=t},getLibraryApis:function(){return Object.values(this.__P_463_0)}}});qx.tool.cli.api.CompilerApi.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.compiler.Console":{},"qx.tool.utils.Utils":{},"qx.lang.Type":{},"qx.tool.cli.commands.package.Update":{},"qx.tool.cli.commands.package.List":{},"qx.tool.config.Manifest":{},"qx.tool.utils.Json":{},"qx.tool.config.Compile":{},"qx.tool.config.Lockfile":{},"qx.Promise":{},"qx.core.Assert":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("download"),r=qx.tool.utils.Promisify.fs,n=require("upath"),o=require("process"),i=require("semver"),a=require("rimraf");qx.Class.define("qx.tool.cli.commands.package.Install",{extend:qx.tool.cli.commands.Package,statics:{getYargsCommand:function(){return{command:"install [uri[@release_tag]]",describe:'installs the latest compatible release of package (as per Manifest.json). Use "-r <release tag>" or @<release tag> to install a particular release.\n        examples:\n           * qx package install name: Install latest published version\n           * qx package install name@v0.0.2: Install version 0.0.2,\n           * qx package install name@master: Install current master branch from github',builder:{release:{alias:"r",describe:"Use a specific release tag instead of the tag of the latest compatible release",nargs:1,requiresArg:!0,type:"string"},ignore:{alias:"i",describe:"Ignore unmatch of qooxdoo"},verbose:{alias:"v",describe:"Verbose logging"},quiet:{alias:"q",describe:"No output"},save:{alias:"s",default:!1,describe:"Save the libraries as permanent dependencies"},"from-path":{alias:"p",nargs:1,describe:"Install a library/the given library from a local path"},"qx-version":{check:function(t){return i.valid(t.qxVersion)},describe:"A semver string. If given, the maximum qooxdoo version for which to install a package"}}}}},members:{__P_472_0:!1,install:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t+(e?"@"+e:"");r.argv.verbose&&qx.tool.compiler.Console.info(">>> To be installed: ".concat(o));r.argv.uri=o;r.argv.fromPath=!1;n.next=6;return r.process();case 6:case"end":return n.stop()}}),n)})))()},installFromLocaPath:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n.isAbsolute(t)||(t=n.join(o.cwd(),t));r.argv.verbose&&qx.tool.compiler.Console.info(">>> To be installed: ".concat(e||"local libarary"," from ").concat(t));r.argv.uri=e;r.argv.fromPath=t;i.next=6;return r.process();case 6:case"end":return i.stop()}}),i)})))()},isInstalled:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return r.getLockfileModel();case 2:return n.abrupt("return",n.sent.getValue("libraries").some((function(r){return r.uri===t&&(void 0===e||e===r.repo_tag)})));case 3:case"end":return n.stop()}}),n)})))()},process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.cli.commands.package.Install.superclass.prototype.process.call(t);case 2:e.next=4;return t.__P_472_1();case 4:e.next=6;return t._getConfigData();case 6:r=e.sent;n=_slicedToArray(r,2);o=n[0];a=n[1];t.argv.uri=t.argv.uri||t.argv["uri@release_tag"];if(t.argv.uri||t.argv.fromPath){e.next=22;break}if(!a.getValue("libraries").length){e.next=17;break}e.next=15;return t.__P_472_2();case 15:e.next=21;break;case 17:e.next=19;return t.__P_472_3(o.getData());case 19:e.next=21;return t._saveConfigData();case 21:return e.abrupt("return");case 22:c=t.argv.uri;if(t.argv.release)s=t.argv.release;else if(c){u=c.split(/@/);l=_slicedToArray(u,2);c=l[0];s=l[1]}if(i.valid(s)&&"v"!==s[0]){t.argv.verbose&&qx.tool.compiler.Console.info('>>> Prepending "v" to '.concat(s,"."));s="v".concat(s)}if(!t.argv.fromPath){e.next=33;break}if(!s){e.next=28;break}throw new qx.tool.utils.Utils.UserError("Version identifier cannot be used when installing from local path.");case 28:f=!!c&&t.argv.save;e.next=31;return t.__P_472_4(c,t.argv.fromPath,f);case 31:e.next=40;break;case 33:if(!(!s||qx.lang.Type.isString(s)&&s.startsWith("v"))){e.next=38;break}e.next=36;return t.__P_472_5(c,s,t.argv.save);case 36:e.next=40;break;case 38:e.next=40;return t.__P_472_6(c,s,t.argv.save);case 40:e.next=42;return t._saveConfigData();case 42:t.argv.verbose&&qx.tool.compiler.Console.info(">>> Done.");case 43:case"end":return e.stop()}}),e)})))()},__P_472_1:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.getCache().repos.list.length){e.next=8;break}t.argv.quiet||qx.tool.compiler.Console.info(">>> Updating cache...");t.clearCache();e.next=6;return new qx.tool.cli.commands.package.Update({quiet:!0}).process();case 6:e.next=8;return new qx.tool.cli.commands.package.List({quiet:!0}).process();case 8:case"end":return e.stop()}}),e)})))()},__P_472_7:function(t){if(!t)throw new qx.tool.utils.Utils.UserError("No package resource identifier given");var e=t.split(/\//),r=e.slice(0,2).join("/"),n=e.length>2?e.slice(2).join("/"):"";if(!this.getCache().repos.data[r])throw new qx.tool.utils.Utils.UserError("A repository '".concat(r,"' cannot be found."));return{repo_name:r,package_path:n}},__P_472_5:function(t,e,r){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f,p,h,y,d,m,v,g,_,x;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return o.getAppQxVersion();case 2:a=i.sent.replace("-beta","");c=o.__P_472_7(t),s=c.repo_name,u=c.package_path;if(e){i.next=16;break}if(void 0!==(l=o.getCache()).compat[a]){i.next=12;break}o.argv.verbose&&!o.argv.quiet&&qx.tool.compiler.Console.info(">>> Updating cache...");f={quiet:!0,all:!0,qxVersion:a};i.next=11;return new qx.tool.cli.commands.package.List(f).process();case 11:l=o.getCache(!0);case 12:if(e=l.compat[a]&&l.compat[a][s]){i.next=16;break}qx.tool.compiler.Console.warn("'".concat(s,"' has no (stable) release compatible with qooxdoo version ").concat(a,".\n             To install anyways, use '--release <release>' or 'qx install ").concat(s,"@<release>'.\n             Please ask the library maintainer to release a compatible version."));return i.abrupt("return");case 16:o.argv.verbose&&qx.tool.compiler.Console.info(">>> Installing '".concat(t,"', release '").concat(e,"' for qooxdoo version: ").concat(a));i.next=19;return o.__P_472_8(s,e);case 19:p=i.sent;h=p.download_path;y=!1;if(d=o.getCache().repos.data[s]){i.next=25;break}throw new qx.tool.utils.Utils.UserError("A repository '".concat(s,"' cannot be found."));case 25:if(m=d.releases.data[e]){i.next=28;break}throw new qx.tool.utils.Utils.UserError("'".concat(s,"' has no release '").concat(e,"'."));case 28:v=_createForOfIteratorHelper(m.manifests);i.prev=29;v.s();case 31:if((g=v.n()).done){i.next=41;break}_=g.value.path;if(!u||n.dirname(_)===u){i.next=35;break}return i.abrupt("continue",39);case 35:x=n.join(s,n.dirname(_));y=!0;i.next=39;return o.__P_472_9(x,e,h,r);case 39:i.next=31;break;case 41:i.next=46;break;case 43:i.prev=43;i.t0=i.catch(29);v.e(i.t0);case 46:i.prev=46;v.f();return i.finish(46);case 49:if(y){i.next=51;break}throw new qx.tool.utils.Utils.UserError("The package/library identified by '".concat(t,"' could not be found."));case 51:case"end":return i.stop()}}),i,null,[[29,43,46,49]])})))()},__P_472_6:function(t,e,r){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return n.getAppQxVersion();case 2:i=o.sent;n.argv.verbose&&qx.tool.compiler.Console.info(">>> Installing '".concat(t,"' from tree hash '").concat(e,"' for qooxdoo version ").concat(i));a=n.__P_472_7(t),c=a.repo_name;o.next=7;return n.__P_472_8(c,e);case 7:s=o.sent;u=s.download_path;o.next=11;return n.__P_472_9(t,e,u,r);case 11:case"end":return o.stop()}}),o)})))()},__P_472_4:function(t,e){var r=arguments,n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=r.length>2&&void 0!==r[2]&&r[2];o.next=3;return n.getAppQxVersion();case 3:a=o.sent;n.argv.verbose&&qx.tool.compiler.Console.info(">>> Installing '".concat(t,"' from '").concat(e,"' for qooxdoo version ").concat(a));o.next=7;return n.__P_472_9(t,void 0,e,i);case 7:case"end":return o.stop()}}),o)})))()},__P_472_9:function(t,e,i,a){var c=this;return _asyncToGenerator(_regeneratorRuntime().mark((function s(){var u,l,f,p,h,y,d,m,v,g,_,x,b,w;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=t?c.__P_472_7(t):{repo_name:"",package_path:""},l=u.repo_name,f=u.package_path;s.next=3;return c._getConfigData();case 3:p=s.sent;h=_slicedToArray(p,2);y=h[0];d=h[1];m=n.join(i,f);v=n.join(m,qx.tool.config.Manifest.config.fileName);if(r.existsSync(v)){s.next=11;break}throw new qx.tool.utils.Utils.UserError("No manifest file in '".concat(m,"'."));case 11:g=qx.tool.utils.Json.parseJson(r.readFileSync(v,"utf-8")),_=g.info;x=n.relative(o.cwd(),m);b={library_name:_.name,library_version:_.version,path:x};t&&(b.uri=t);if(l){b.repo_name=l;e&&(b.repo_tag=e)}if((w=d.getValue("libraries").findIndex((function(e){return t&&e.uri===t||!t&&e.path===x})))>=0){d.setValue(["libraries",w],b);c.argv.verbose&&qx.tool.compiler.Console.info(">>> Updating already existing lockfile entry for ".concat(_.name,", ").concat(_.version,", installed from '").concat(t||x,"'."))}else{d.transform("libraries",(function(t){return t.push(b)&&t}));c.argv.verbose&&qx.tool.compiler.Console.info(">>> Added new lockfile entry for ".concat(_.name,", ").concat(_.version,", installed from '").concat(t||x,"'."))}a&&y.setValue(["requires",t],"^"+_.version);s.next=21;return c.__P_472_10(m);case 21:!s.sent&&c.argv.verbose&&qx.tool.compiler.Console.info(">>> No applications installed for ".concat(t,"."));s.next=25;return c.__P_472_11(m);case 25:!s.sent&&c.argv.verbose&&qx.tool.compiler.Console.info(">>> No dependencies installed for ".concat(t,"."));c.argv.quiet||qx.tool.compiler.Console.info("Installed ".concat(_.name," (").concat(t,", ").concat(_.version,")"));case 28:case"end":return s.stop()}}),s)})))()},__P_472_11:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var o,i;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=n.join(t,qx.tool.config.Manifest.config.fileName);r.next=3;return qx.tool.utils.Json.loadJsonAsync(o);case 3:if((i=r.sent).requires){r.next=7;break}e.argv.verbose&&qx.tool.compiler.Console.info(">>> ".concat(o," does not contain library dependencies."));return r.abrupt("return",!1);case 7:e.argv.verbose&&qx.tool.compiler.Console.info(">>> Installing libraries from ".concat(o,"."));return r.abrupt("return",e.__P_472_3(i));case 9:case"end":return r.stop()}}),r)})))()},__P_472_3:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,a,c,s,u,l;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.requires){r.next=2;break}return r.abrupt("return",!1);case 2:n=_createForOfIteratorHelper(Object.getOwnPropertyNames(t.requires));r.prev=3;n.s();case 5:if((o=n.n()).done){r.next=45;break}a=o.value;c=t.requires[a];r.t0=a;r.next="@qooxdoo/compiler"===r.t0||"qooxdoo-sdk"===r.t0||"qooxdoo-compiler"===r.t0?11:"@qooxdoo/framework"===r.t0?12:18;break;case 11:return r.abrupt("break",43);case 12:r.next=14;return e.getAppQxVersion();case 14:s=r.sent;if(i.satisfies(s,c,{loose:!0})||!e.argv.ignore){r.next=17;break}throw new qx.tool.utils.Utils.UserError("Library '".concat(a,"' needs @qooxdoo/framework version ").concat(c,", found ").concat(s));case 17:return r.abrupt("break",43);case 18:if(!i.validRange(c)){r.next=30;break}u=e.__P_472_12(a,c);if(l=u.tag){r.next=22;break}throw new qx.tool.utils.Utils.UserError("No satisfying release found for ".concat(a,"@").concat(c,"!"));case 22:r.next=24;return e.isInstalled(a,l);case 24:if(r.sent){r.next=28;break}r.next=27;return e.__P_472_5(a,l,!1);case 27:return r.abrupt("break",43);case 28:e.argv.verbose&&qx.tool.compiler.Console.info(">>> ".concat(a,"@").concat(l," is already installed."));return r.abrupt("break",43);case 30:r.next=32;return e.isInstalled(a,c);case 32:if(r.sent){r.next=42;break}r.prev=33;r.next=36;return e.__P_472_6(a,c,!1);case 36:return r.abrupt("break",43);case 39:r.prev=39;r.t1=r.catch(33);throw new qx.tool.utils.Utils.UserError("Could not install ".concat(a,"@").concat(c,": ").concat(r.t1.message));case 42:e.argv.verbose&&qx.tool.compiler.Console.info(">>> ".concat(a,"@").concat(c," is already installed."));case 43:r.next=5;break;case 45:r.next=50;break;case 47:r.prev=47;r.t2=r.catch(3);n.e(r.t2);case 50:r.prev=50;n.f();return r.finish(50);case 53:return r.abrupt("return",!0);case 54:case"end":return r.stop()}}),r,null,[[3,47,50,53],[33,39]])})))()},__P_472_12:function(t,e){var r=this,n=this.__P_472_7(t).repo_name,o=this.getCache().repos.data[n];if(!o)throw new qx.tool.utils.Utils.UserError("".concat(t," is not in the library registry!"));var a={},c=o.releases.list.map((function(t){var e=o.releases.data[t].manifests[0];if(!qx.lang.Type.isObject(e)||!qx.lang.Type.isObject(e.info)||!e.info.version){r.debug("".concat(n,"/").concat(t,": Invalid Manifest!"));return null}var i=e.info.version;a[i]=t;return i})).filter((function(t){return Boolean(t)})),s=i.maxSatisfying(c,e,{loose:!0});return{version:s,tag:a[s]}},__P_472_10:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var o,i,a,c;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.utils.Json.loadJsonAsync(n.join(t,qx.tool.config.Manifest.config.fileName));case 2:if((o=r.sent).provides&&o.provides.application){r.next=5;break}return r.abrupt("return",!1);case 5:i=o.provides.application;r.next=8;return qx.tool.config.Compile.getInstance();case 8:a=r.sent;r.next=11;return a.exists();case 11:if(r.sent){r.next=14;break}qx.tool.compiler.Console.info(">>> Cannot install application "+(i.name||i.class)+" because compile.json does not exist (you must manually add it)");return r.abrupt("return",!1);case 14:a.setLoaded(!1);r.next=17;return a.load();case 17:if(!(c=a.getValue("applications").find((function(t){return i.name&&t.name?i.name===t.name:i.class===t.class})))){a.transform("applications",(function(t){return t.concat([i])}));c=i}if(!a.isDirty()){r.next=22;break}r.next=22;return a.save();case 22:e.argv.verbose&&qx.tool.compiler.Console.info(">>> Installed application "+(c.name||c.class));return r.abrupt("return",!0);case 24:case"end":return r.stop()}}),r)})))()},__P_472_2:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.argv.verbose&&qx.tool.compiler.Console.info(">>> Downloading libraries listed in ".concat(qx.tool.config.Lockfile.config.fileName,"..."));e.next=3;return t.getLockfileData();case 3:r=e.sent.libraries;return e.abrupt("return",qx.Promise.all(r.filter((function(t){return t.repo_name&&t.repo_tag})).map((function(e){return t.__P_472_8(e.repo_name,e.repo_tag)}))));case 5:case"end":return e.stop()}}),e)})))()},__P_472_8:function(t){var i=arguments,c=this;return _asyncToGenerator(_regeneratorRuntime().mark((function s(){var u,l,f,p,h,y,d;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=i.length>1&&void 0!==i[1]?i[1]:null;l=i.length>2&&void 0!==i[2]&&i[2];qx.core.Assert.assertNotNull(u,"Empty tree-ish id is not allowed");f="https://github.com/".concat(t,"/archive/").concat(u,".zip");p="".concat(t,"_").concat(u).replace(/[\^./*?"'<>:]/g,"_");h=[o.cwd(),qx.tool.cli.commands.Package.cache_dir,p];d=h.reduce((function(t,e){var o=t+n.sep+e;if(r.existsSync(o))y=!0;else{r.mkdirSync(o);y=!1}return o}));if(l||!y){s.next=11;break}c.argv.verbose&&qx.tool.compiler.Console.info(">>> Repository '".concat(t,"', '").concat(u,"' has already been downloaded to ").concat(d,". To download again, execute 'qx clean'."));s.next=23;break;case 11:c.argv.verbose&&qx.tool.compiler.Console.info(">>> Downloading repository '".concat(t,"', '").concat(u,"' from ").concat(f," to ").concat(d));s.prev=12;s.next=15;return e(f,d,{extract:!0,strip:1});case 15:s.next=23;break;case 17:s.prev=17;s.t0=s.catch(12);c.argv.verbose&&qx.tool.compiler.Console.info(">>> Download failed: ".concat(s.t0.message,". Removing download folder."));a.sync(d);qx.tool.compiler.Console.error("Could not install '".concat(t,"@").concat(u,"'. Use the --verbose flag for more information."));o.exit(1);case 23:return s.abrupt("return",{download_path:d,dir_exists:y});case 24:case"end":return s.stop()}}),s,null,[[12,17]])})))()}}});qx.tool.cli.commands.package.Install.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.api.AbstractApi":{require:!0},"qx.tool.cli.api.CompilerApi":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.api.LibraryApi",{extend:qx.tool.cli.api.AbstractApi,properties:{compilerApi:{nullable:!1,check:"qx.tool.cli.api.CompilerApi"}},members:{load:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qx.tool.cli.api.LibraryApi.superclass.prototype.load.call(t));case 1:case"end":return e.stop()}}),e)})))()},afterLibrariesLoaded:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}}});qx.tool.cli.api.LibraryApi.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Json":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("path");qx.Class.define("qx.tool.cli.ConfigDb",{extend:qx.core.Object,construct:function(){qx.core.Object.constructor.call(this);this.__P_461_0={}},properties:{path:{nullable:!1,check:"String",apply:"_applyPath"}},members:{__P_461_1:null,__P_461_0:null,_applyPath:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.__P_461_1={};case 1:case"end":return t.stop()}}),t)})))()},load:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Json.loadJsonAsync(t.getPath());case 2:e.t0=e.sent;if(e.t0){e.next=5;break}e.t0={};case 5:t.__P_461_1=e.t0;case 6:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Utils.makeParentDir(t.getPath());case 2:e.next=4;return qx.tool.utils.Json.saveJsonAsync(t.getPath(),t.__P_461_1);case 4:case"end":return e.stop()}}),e)})))()},setOverride:function(t,e){void 0===e?delete this.__P_461_0[t]:this.__P_461_0[t]=e},db:function(t,e){if(t){var r=this.__P_461_0[t];if(r)return r;for(var n=this.__P_461_1,o=t.split("."),i=0;i<o.length;i++){var a=o[i],c=n[a];if(void 0===c){if(void 0===e)return;c=i==o.length-1?n[a]=e:n[a]={}}n=c}return n}return this.__P_461_1}},defer:function(t){t.__P_461_2=e.join(require("os").homedir(),".qooxdoo/")},statics:{__P_461_3:null,__P_461_2:null,getInstance:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=qx.tool.cli.ConfigDb.__P_461_3){t.next=6;break}(r=qx.tool.cli.ConfigDb.__P_461_3=new qx.tool.cli.ConfigDb).setPath(e.join(qx.tool.cli.ConfigDb.getDirectory(),"config.json"));t.next=6;return r.load();case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},getDirectory:function(){return this.__P_461_2},db:function(t,e){return qx.tool.cli.ConfigDb.getInstance().db(t,e)}}});qx.tool.cli.ConfigDb.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.tool.config.Utils":{}}};qx.Bootstrap.executePendingDefers(t);require("process");var e=require("semver");qx.Class.define("qx.tool.migration.Runner",{extend:qx.core.Object,properties:{dryRun:{check:"Boolean",init:!1},verbose:{check:"Boolean",init:!1},qxVersion:{check:"String",validate:function(t){return e.valid(t)},nullable:!0}},members:{runMigrations:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a,c,s,u,l;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.config.Utils.getQxVersion();case 2:n=r.sent;r.next=5;return qx.tool.config.Utils.getAppQxVersion();case 5:o=r.sent;t.debug("".concat(t.getDryRun()?"Checking":"Running"," migrations for app qx version ").concat(o," and current qooxdoo version ").concat(n));i=Object.getOwnPropertyNames(qx.tool.migration).filter((function(t){return t.match(/^M[0-9_]+$/)})).map((function(t){return qx.Class.getByName("qx.tool.migration."+t)}));a=0;c=0;s=_createForOfIteratorHelper(i);r.prev=11;l=_regeneratorRuntime().mark((function r(){var n,i,s,l,f,p,h,y,d,m,v;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=u.value;i=new n(t);s=i.getVersion();l=t.getQxVersion();t.debug(">>> Migration version: ".concat(s,", maximum qx version: ").concat(l));(f=o&&!e.lt(o,s)||l&&e.gt(s,l))?t.debug(">>> Skipping migration ".concat(n.classname,".")):t.debug(">>> Running migration ".concat(n.classname,"..."));if(!f){r.next=9;break}return r.abrupt("return",1);case 9:p=Object.getOwnPropertyNames(n.prototype).filter((function(t){return t.startsWith("migrate")})).filter((function(t){return"function"==typeof n.prototype[t]}));h=_createForOfIteratorHelper(p);r.prev=11;h.s();case 13:if((y=h.n()).done){r.next=22;break}d=y.value;m=i.getApplied();v=i.getPending();r.next=19;return i[d]();case 19:t.debug(">>> - ".concat(d,": ").concat(i.getApplied()-m," applied/").concat(i.getPending()-v," pending"));case 20:r.next=13;break;case 22:r.next=27;break;case 24:r.prev=24;r.t0=r.catch(11);h.e(r.t0);case 27:r.prev=27;h.f();return r.finish(27);case 30:a+=i.getApplied();c+=i.getPending();t.debug(">>> Done with ".concat(n.classname,": ").concat(a," migrations applied, ").concat(c," migrations pending."));case 33:case"end":return r.stop()}}),r,null,[[11,24,27,30]])}));s.s();case 14:if((u=s.n()).done){r.next=20;break}return r.delegateYield(l(),"t0",16);case 16:if(!r.t0){r.next=18;break}return r.abrupt("continue",18);case 18:r.next=14;break;case 20:r.next=25;break;case 22:r.prev=22;r.t1=r.catch(11);s.e(r.t1);case 25:r.prev=25;s.f();return r.finish(25);case 28:return r.abrupt("return",{applied:a,pending:c});case 29:case"end":return r.stop()}}),r,null,[[11,22,25,28]])})))()}}});qx.tool.migration.Runner.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.compiler.Console":{},"qx.tool.cli.ConfigDb":{},"qx.tool.utils.Utils":{},"qx.tool.utils.Json":{},"qx.tool.config.Manifest":{},"qx.tool.config.Lockfile":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("process"),r=require("github-api/dist/components/Search"),n=require("github-api/dist/components/Repository"),o=require("semver"),i=require("inquirer"),a=require("upath");qx.Class.define("qx.tool.cli.commands.package.Update",{extend:qx.tool.cli.commands.Package,statics:{getYargsCommand:function(){return{command:"update [repository]",describe:"updates information on packages from github. Has to be called before the other commands. If a package URI is supplied, only update information on that package",builder:{file:{alias:"f",describe:"Output result to a file"},search:{alias:"S",describe:"Search GitHub for repos (as opposed to using the cached nightly data)"},"all-versions":{alias:"a",describe:"Retrieve all releases (as opposed to the latest minor/patch release of each major release)"},verbose:{alias:"v",describe:"Verbose logging"},quiet:{alias:"q",describe:"No output"},"export-only":{alias:"E",describe:"Export the current cache without updating it first (requires --file)"}}}}},members:{__P_476_0:null,process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,a,c;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:qx.tool.cli.commands.package.Update.superclass.prototype.process.call(t);t.__P_476_0=[];if(!t.argv.exportOnly){r.next=6;break}if(!t.argv.file){qx.tool.compiler.Console.error("Path required via --file argument.");e.exit(1)}t.exportCache(t.argv.file);return r.abrupt("return");case 6:t.argv.repository||t.clearCache();r.next=9;return qx.tool.cli.ConfigDb.getInstance();case 9:n=r.sent;o=n.db("github",{});if(t.argv.search){r.next=16;break}r.next=14;return t.updateFromRepository();case 14:r.next=27;break;case 16:if(o.token){r.next=25;break}r.next=19;return i.prompt([{type:"input",name:"token",message:"Searching GitHub requires an API token - visit https://github.com/settings/tokens to obtain one (you do not need to assign any permissions, just create a token);\nWhat is your GitHub API Token ? "}]);case 19:if((a=r.sent).token){r.next=23;break}qx.tool.compiler.Console.error("You have not provided a GitHub token.");return r.abrupt("return");case 23:o.token=a.token;n.save();case 25:r.next=27;return t.updateFromGitHubAPI(o.token);case 27:if((c=t.getCache().num_libraries)&&!t.argv.quiet){qx.tool.compiler.Console.info("Found ".concat(c," releases of libraries."));qx.tool.compiler.Console.info("Run 'qx package list' in the root dir of your project to see which versions of these libraries are compatible.")}r.next=31;return t.saveCache();case 31:if(!t.argv.file){r.next=34;break}r.next=34;return t.exportCache(t.argv.file);case 34:case"end":return r.stop()}}),r)})))()},updateFromRepository:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.argv.quiet||qx.tool.compiler.Console.info("Downloading cache from GitHub ...");r=t.getRepositoryCacheUrl();e.prev=2;e.next=5;return import("node-fetch");case 5:n=e.sent.default;e.next=8;return n(r);case 8:o=e.sent;e.next=11;return o.json();case 11:i=e.sent;t.setCache(i);e.next=18;break;case 15:e.prev=15;e.t0=e.catch(2);throw new qx.tool.utils.Utils.UserError(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))()},updateFromGitHubAPI:function(t){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function c(){var s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k,S,O,j,T,C,A,G,R,I,N,F,D,M,U,B;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:u=new r({},s={token:t});l=0;i.argv.quiet||qx.tool.compiler.Console.info("Searching for package repositories on GitHub...");f="topic:qooxdoo-package fork:true";i.argv.repository&&(f+=" "+i.argv.repository);c.next=8;return u.forRepositories({q:f});case 8:p=c.sent;f="topic:qooxdoo-contrib fork:true";i.argv.repository&&(f+=" "+i.argv.repository);c.next=13;return u.forRepositories({q:f});case 13:h=c.sent;y=p.data.concat(h.data);d={};m=i.getCache().repos.data;v=_createForOfIteratorHelper(y);c.prev=18;v.s();case 20:if((g=v.n()).done){c.next=131;break}_=g.value;x=_.full_name;if(!d[x]){c.next=25;break}return c.abrupt("continue",129);case 25:d[x]=_;if(!i.argv.repository||x===i.argv.repository){c.next=28;break}return c.abrupt("continue",129);case 28:i.argv.verbose&&qx.tool.compiler.Console.info("### Found ".concat(x," ..."));i.__P_476_0.push(x);b=new n(x,s);m[x]={description:_.description,url:_.url,releases:{list:[],data:{}}};c.prev=32;c.next=35;return b.listReleases();case 35:w=c.sent;c.next=42;break;case 38:c.prev=38;c.t0=c.catch(32);qx.tool.compiler.Console.error("Error retrieving releases: "+c.t0);return c.abrupt("continue",129);case 42:q=w.data.filter((function(t){return!!i.argv["all-versions"]||o.valid(t.tag_name,!0)})).map((function(t){t.version=o.valid(t.tag_name,!0)||"0.0.0";return t})).sort((function(t,e){return o.compare(t.version,e.version)})).filter((function(t,e,r){return"0.0.0"!==t.version&&(!!i.argv["all-versions"]||(e===r.length-1||o.major(r[e+1].version)>o.major(t.version)))}));P=q.map((function(t){return t.version}));i.argv.verbose&&qx.tool.compiler.Console.info(">>> Retrieved ".concat(q.length," release(s) of ").concat(x,": ").concat(P.join(", "),"."));L=_createForOfIteratorHelper(q);c.prev=46;L.s();case 48:if((E=L.n()).done){c.next=121;break}k=E.value;S=k.tag_name;O=m[x].releases;j=[{path:"."}];T=void 0;i.argv.verbose&&i.debug(">>> Trying to retrieve 'qooxdoo.json' for ".concat(x," ").concat(S,"..."));c.prev=55;c.next=58;return b.getContents(S,"qooxdoo.json",!0);case 58:T=c.sent;i.argv.verbose&&i.debug(">>>  File exists, checking for libraries...");if("string"==typeof(C=T.data))try{C=qx.tool.utils.Json.parseJson(C)}catch(t){i.argv.verbose&&qx.tool.compiler.Console.warn("!!!  Parse error: ".concat(t.message))}j=C.libraries||C.contribs;c.next=68;break;case 65:c.prev=65;c.t1=c.catch(55);c.t1.message.match(/404/)?i.argv.verbose&&i.debug(">>> No qooxdoo.json"):i.argv.verbose&&qx.tool.compiler.Console.warn("!!! Error: ".concat(c.t1.message));case 68:A=_createForOfIteratorHelper(j.entries());c.prev=69;A.s();case 71:if((G=A.n()).done){c.next=108;break}R=_slicedToArray(G.value,2),I=R[0],N=R[1];F=void 0;D=a.join(N.path,qx.tool.config.Manifest.config.fileName);c.prev=75;i.argv.verbose&&i.debug(">>> Retrieving Manifest file '".concat(D,"' for ").concat(x," ").concat(S,"..."));c.next=79;return b.getContents(S,D,!0);case 79:F=c.sent;c.next=86;break;case 82:c.prev=82;c.t2=c.catch(75);c.t2.message.match(/404/)?i.argv.verbose&&qx.tool.compiler.Console.warn("!!!  File does not exist."):i.argv.verbose&&qx.tool.compiler.Console.warn("!!! Error: ".concat(c.t2.message));return c.abrupt("continue",106);case 86:if("string"!=typeof(M=F.data)){c.next=96;break}c.prev=88;M=qx.tool.utils.Json.parseJson(M);c.next=96;break;case 92:c.prev=92;c.t3=c.catch(88);if(i.argv.verbose){qx.tool.compiler.Console.warn("!!! Parse error: ".concat(c.t3.message));i.debug(M)}return c.abrupt("continue",106);case 96:if(U=M.requires&&M.requires["@qooxdoo/framework"]){c.next=100;break}i.argv.verbose&&qx.tool.compiler.Console.warn("!!! No valid qooxdoo version information in the manifest, skipping...");return c.abrupt("continue",106);case 100:if(o.validRange(U,{loose:!0})){c.next=103;break}i.argv.verbose&&qx.tool.compiler.Console.warn("!!! Invalid qooxdoo version information in the Manifest, skipping...");return c.abrupt("continue",106);case 103:j[I]={path:D,qx_versions:U,info:M.info,requires:M.requires,provides:M.provides};l++;i.argv.verbose?i.debug(">>> ".concat(x," ").concat(S,": Found package '").concat(M.info.name,"' (compatible with ").concat(U,")")):i.argv.quiet||e.stdout.write(".");case 106:c.next=71;break;case 108:c.next=113;break;case 110:c.prev=110;c.t4=c.catch(69);A.e(c.t4);case 113:c.prev=113;A.f();return c.finish(113);case 116:B="https://github.com/".concat(x,"/archive/").concat(S,".zip");O.list.push(S);O.data[S]={id:k.id,published_at:k.published_at,comment:k.body,title:k.name,prerelease:k.prerelease,manifests:j,zip_url:B};case 119:c.next=48;break;case 121:c.next=126;break;case 123:c.prev=123;c.t5=c.catch(46);L.e(c.t5);case 126:c.prev=126;L.f();return c.finish(126);case 129:c.next=20;break;case 131:c.next=136;break;case 133:c.prev=133;c.t6=c.catch(18);v.e(c.t6);case 136:c.prev=136;v.f();return c.finish(136);case 139:i.getCache().version=qx.tool.config.Lockfile.getInstance().getVersion();i.getCache().num_libraries=l;i.argv.repository||(i.getCache().repos.list=i.__P_476_0.sort());i.argv.quiet||i.argv.verbose||e.stdout.write("\n");case 143:case"end":return c.stop()}}),c,null,[[18,133,136,139],[32,38],[46,123,126,129],[55,65],[69,110,113,116],[75,82],[88,92]])})))()}}});qx.tool.cli.commands.package.Update.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.compiler.Console":{},"qx.tool.utils.Utils":{},"qx.lang.Type":{},"qx.tool.config.Manifest":{},"qx.tool.utils.Json":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("semver"),r=require("columnify"),n=require("upath");qx.Class.define("qx.tool.cli.commands.package.List",{extend:qx.tool.cli.commands.Package,statics:{localPathRepoName:"_local_",getYargsCommand:function(){return{command:"list [repository]",describe:'if no repository name is given, lists all available packages that are compatible with the project\'s qooxdoo version ("--all" lists incompatible ones as well). Otherwise, list all compatible packages.',builder:{all:{alias:"a",describe:"Show all versions, including incompatible ones"},verbose:{alias:"v",describe:"Verbose logging"},quiet:{alias:"q",describe:"No output"},json:{alias:"j",describe:"Output list as JSON literal"},installed:{alias:"i",describe:"Show only installed libraries"},namespace:{alias:"n",describe:"Display library namespace"},match:{alias:"m",describe:"Filter by regular expression (case-insensitive)"},libraries:{alias:"l",describe:"List libraries only (no repositories)"},short:{alias:"s",describe:"Omit title and description to make list more compact"},noheaders:{alias:"H",describe:"Omit header and footer"},prereleases:{alias:"p",describe:"Include prereleases into latest compatible releases"},"uris-only":{alias:"u",describe:"Output only the GitHub URIs of the packages which are used to install the packages. Implies --noheaders and --libraries."},"qx-version":{check:function(t){return e.valid(t.qxVersion)},describe:"A semver string. If given, the qooxdoo version for which to generate the listings"}}}}},members:{process:function(t){function e(){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return qx.tool.cli.commands.package.List.superclass.prototype.process.call(t);case 2:t.__P_473_0=[];t.__P_473_1={};t.__P_473_2={};i=qx.tool.cli.commands.package.List.localPathRepoName;a=t.getCache().repos;o.prev=7;o.next=10;return t.getAppQxVersion();case 10:c=o.sent;o.next=17;break;case 13:o.prev=13;o.t0=o.catch(7);qx.tool.compiler.Console.error("Cannot determine a qooxdoo version to show packages only for this version, because you are not in a project directory.");process.exit(1);case 17:o.next=19;return t.__P_473_3(c);case 19:s=o.sent;t.argv.verbose&&t.debug(">>> We have ".concat(s," packages compatible with qooxdoo version ").concat(c));if(0!==s||t.argv.all||t.argv.quiet){o.next=24;break}qx.tool.compiler.Console.info("Currently, no packages compatible with qooxdoo version ".concat(c," exist."));return o.abrupt("return");case 24:if(!(u=t.argv.repository)){o.next=30;break}if(a.list.includes(u)){o.next=28;break}throw new qx.tool.utils.Utils.UserError("Repository ".concat(u," does not exist or is not a qooxdoo package repo."));case 28:if(t.__P_473_1[u]&&t.__P_473_1[u].length){l={columnSplitter:"   ",config:{description:{maxWidth:60},compatibility:{dataTransform:function(t){switch(t){case"false":return"not compatible / untested";case"true":return"";default:return""}}},installedVersion:{dataTransform:function(t){return"false"===t?"-":t}}}};if(!t.argv.quiet){f=t.__P_473_1[u].map((function(t){return Object.assign({},t)})).sort((function(t,e){return t.name.localeCompare(e.name)}));p=f.map((function(t){return Object.assign({},t)})).map((function(t,e){delete t.manifest;if(e){var r,n=f[e-1],o=_createForOfIteratorHelper(Object.getOwnPropertyNames(t).reverse());try{for(o.s();!(r=o.n()).done;){var i=r.value;["compatibility","required_qx_version"].indexOf(i)>-1||t[i]===n[i]&&t.name===n.name&&(t[i]="")}}catch(t){o.e(t)}finally{o.f()}}return t}));t.argv.json?qx.tool.compiler.Console.info(JSON.stringify(f,null,2)):qx.tool.compiler.Console.info(r(p,l))}}else t.argv.verbose&&qx.tool.compiler.Console.info("Repository ".concat(u," does not contain suitable qooxdoo libraries."));return o.abrupt("return");case 30:if(t.argv.urisOnly){h=["uri"];t.argv.noheaders=!0;t.argv.libraries=!0}else h=t.argv.short?["uri","installedVersion","latestVersion","latestCompatible"]:["uri","name","description","installedVersion","latestVersion","latestCompatible"];(t.argv.namespace||t.argv.installed)&&h.splice(1,0,"namespace");y={showHeaders:!t.argv.noheaders,columnSplitter:"   ",columns:h,config:{name:{maxWidth:25},description:{maxWidth:60},installedVersion:{headingTransform:function(){return"INSTALLED"},dataTransform:function(t){return"false"===t?"":t}},latestVersion:{headingTransform:function(){return"LATEST"},dataTransform:function(t){return"false"===t?"-":t}},latestCompatible:{headingTransform:function(){return"COMPATIBLE"},dataTransform:function(t){return"false"===t?"-":t}}}};(d=t.argv.all?t.__P_473_0:t.__P_473_0.filter((function(e){return e.latestCompatible||t.argv.installed&&e.name===i}))).sort((function(t,e){return(t=t.name.toLowerCase())<(e=e.name.toLowerCase())?-1:t>e?1:0}));m=[];v=_createForOfIteratorHelper(d);o.prev=37;v.s();case 39:if((g=v.n()).done){o.next=67;break}_=g.value;x=[];if(qx.lang.Type.isArray(t.__P_473_1[_.name])){o.next=44;break}return o.abrupt("continue",65);case 44:b=_createForOfIteratorHelper(t.__P_473_1[_.name]);o.prev=45;b.s();case 47:if((w=b.n()).done){o.next=55;break}q=w.value;if(e.valid(q.version)){o.next=52;break}t.argv.verbose&&qx.tool.compiler.Console.warn(">>> Ignoring '".concat(_.name,"' ").concat(q.name,"': invalid version format '").concat(q.version,"'."));return o.abrupt("continue",53);case 52:if(_.name===i||e.eq(q.version,_.latestVersion)){P=_.name===qx.tool.cli.commands.package.List.localPathRepoName?q.path:n.join(_.name,q.path||"");x.push({type:"library",uri:P,namespace:q.namespace,name:q.name,description:q.summary||_.description,installedVersion:q.installedVersion,latestVersion:_.latestVersion,latestCompatible:_.latestCompatible,manifest:q.manifest})}case 53:o.next=47;break;case 55:o.next=60;break;case 57:o.prev=57;o.t1=o.catch(45);b.e(o.t1);case 60:o.prev=60;b.f();return o.finish(60);case 63:if(x.length>1&&!t.argv.libraries&&!t.argv.short&&_.name!==i){m.push({type:"repository",uri:_.name,name:"",description:_.description,installedVersion:"",latestVersion:_.latestVersion,latestCompatible:_.latestCompatible});t.argv.json||t.argv.installed||t.argv.match||t.argv.urisOnly||(x=x.map((function(t){t.uri="| "+t.uri;return t})))}m=m.concat(x);case 65:o.next=39;break;case 67:o.next=72;break;case 69:o.prev=69;o.t2=o.catch(37);v.e(o.t2);case 72:o.prev=72;v.f();return o.finish(72);case 75:if(t.argv.match){L=new RegExp(t.argv.match,"i");m=m.filter((function(t){return t.uri.match(L)||t.name.match(L)||t.description.match(L)}))}t.argv.installed&&(m=m.filter((function(t){return Boolean(t.installedVersion)})));if(t.argv.json)qx.tool.compiler.Console.info(JSON.stringify(m,null,2));else if(!t.argv.quiet){qx.tool.compiler.Console.info(r(m,y));if(!t.argv.noheaders){qx.tool.compiler.Console.info();qx.tool.compiler.Console.info("Note on columns: LATEST: Latest release that can be installed with this CLI;");qx.tool.compiler.Console.info("                 COMPATIBLE: Latest release that is semver-compatible with the qooxdoo version used.");t.argv.all||qx.tool.compiler.Console.info("To see all libraries, including potentially incompatible ones, use 'qx package list --all'.")}}t.getCache().compat[c]=t.__P_473_2[c];o.next=81;return t.saveCache();case 81:case"end":return o.stop()}}),o,null,[[7,13],[37,69,72,75],[45,57,60,63]])})))()})),__P_473_0:null,__P_473_1:null,__P_473_2:null,__P_473_3:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k,S,O,j,T,C,A,G,R,I,N,F,D,M,U,B,$,W,J,Y;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.argv.installed){o.next=29;break}i=qx.tool.cli.commands.package.List.localPathRepoName;r.__P_473_0.push({name:i,description:"Libraries on local filesystem"});r.__P_473_1[i]=[];o.next=6;return r.getLockfileData();case 6:a=o.sent;c=_createForOfIteratorHelper(a.libraries);o.prev=8;c.s();case 10:if((s=c.n()).done){o.next=21;break}if((u=s.value).repo_name){o.next=19;break}l=n.join(process.cwd(),u.path,qx.tool.config.Manifest.config.fileName);o.next=16;return qx.tool.utils.Json.loadJsonAsync(l);case 16:f=o.sent;p=f.info;r.__P_473_1[i].push({name:p.name,namespace:f.provides.namespace,summary:p.summary,version:"v"+p.version,compatibility:e.satisfies(t,f.requires["qooxdoo-sdk"],!0),path:n.relative(process.cwd(),n.dirname(l)),installedVersion:"v"+p.version,manifest:f});case 19:o.next=10;break;case 21:o.next=26;break;case 23:o.prev=23;o.t0=o.catch(8);c.e(o.t0);case 26:o.prev=26;c.f();return o.finish(26);case 29:h=r.getCache().repos;y=0;void 0===r.__P_473_2[t]&&(r.__P_473_2[t]={});d=_createForOfIteratorHelper(h.list);o.prev=33;d.s();case 35:if((m=d.n()).done){o.next=113;break}v=m.value;g=h.data[v];_=g.description;if(r.argv.all||!_||!_.includes("(deprecated)")&&!_.includes("(unlisted)")){o.next=42;break}r.argv.verbose&&qx.tool.compiler.Console.warn(">>> Ignoring ".concat(v,": Deprecated or unlisted. "));return o.abrupt("continue",111);case 42:x=g.releases.list;b=g.description;w=!1;q=!1;P=!1;L=_createForOfIteratorHelper(x);o.prev=48;L.s();case 50:if((E=L.n()).done){o.next=101;break}k=E.value;S=g.releases.data[k];O=S.prerelease,j=S.manifests;T=_createForOfIteratorHelper(j);o.prev=55;T.s();case 57:if((C=T.n()).done){o.next=91;break}A=C.value;G=A.qx_versions,R=A.info,I=A.provides,N=A.path;F=!1;if(void 0!==R){o.next=64;break}r.argv.verbose&&qx.tool.compiler.Console.warn(">>> Ignoring ".concat(v," ").concat(k,": Undefined info field. "));return o.abrupt("continue",89);case 64:D=R.name;M=R.version;U=k.replace(/v/,"");if(M===U.substr(0,M.length)){o.next=70;break}r.argv.verbose&&qx.tool.compiler.Console.warn(">>> Ignoring ".concat(v," ").concat(k,", library '").concat(D,"': mismatch between tag version '").concat(U,"' and library version '").concat(M,"'."));return o.abrupt("continue",89);case 70:try{q&&!e.gt(M,q,!0)||(q=k)}catch(t){r.argv.verbose&&qx.tool.compiler.Console.warn(">>> Ignoring ".concat(v," ").concat(k,", library '").concat(D,"': invalid version format '").concat(M,"'."))}o.next=73;return r.getInstalledLibraryTag(v,D);case 73:if(!(B=o.sent)){o.next=79;break}F=B;P=B;o.next=83;break;case 79:o.next=81;return r.getInstalledLibraryData(D);case 81:($=o.sent)&&(F="v"+$.library_version);case 83:W=e.satisfies(t,G,!0);void 0===r.__P_473_1[v]&&(r.__P_473_1[v]=[]);J=r.__P_473_2[t][v];Y=J?J.replace(/v/,""):void 0;if(!0===W&&(void 0===J||e.gt(U,Y,!1)&&(!O||r.argv.prereleases))){r.__P_473_2[t][v]=k;w=!0}r.__P_473_1[v].push({name:R.name,namespace:I?I.namespace:"",summary:R.summary,version:M,compatibility:W,required_qx_version:G,path:n.dirname(N),installedVersion:F,manifest:A});case 89:o.next=57;break;case 91:o.next=96;break;case 93:o.prev=93;o.t1=o.catch(55);T.e(o.t1);case 96:o.prev=96;T.f();return o.finish(96);case 99:o.next=50;break;case 101:o.next=106;break;case 103:o.prev=103;o.t2=o.catch(48);L.e(o.t2);case 106:o.prev=106;L.f();return o.finish(106);case 109:w&&y++;r.__P_473_0.push({name:v,description:b,installedVersion:P,latestVersion:q,latestCompatible:!!w&&r.__P_473_2[t][v]});case 111:o.next=35;break;case 113:o.next=118;break;case 115:o.prev=115;o.t3=o.catch(33);d.e(o.t3);case 118:o.prev=118;d.f();return o.finish(118);case 121:return o.abrupt("return",y);case 122:case"end":return o.stop()}}),o,null,[[8,23,26,29],[33,115,118,121],[48,103,106,109],[55,93,96,99]])})))()}}});qx.tool.cli.commands.package.List.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.tool.cli.Cli":{},"qx.Class":{usage:"dynamic",require:!0},"qx.application.Basic":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.LibraryApplication",{extend:qx.application.Basic,members:{main:function(){}}});qx.tool.cli.LibraryApplication.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Utils":{},"qx.Promise":{},"qx.tool.compiler.Console":{defer:"runtime"},"qx.tool.config.Compile":{},"qx.tool.utils.files.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath"),n=require("chokidar");qx.Class.define("qx.tool.cli.Watch",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_462_0=t;this.__P_462_1={classesCompiled:0};this.__P_462_2={};this.__P_462_3=[];this.__P_462_4={};t.addListener("writtenApplication",this._onWrittenApplication,this)},properties:{debug:{init:!1,check:"Boolean"}},events:{making:"qx.event.type.Event",remaking:"qx.event.type.Event",made:"qx.event.type.Event",configChanged:"qx.event.type.Event",fileChanged:"qx.event.type.Data"},members:{__P_462_5:null,__P_462_6:null,__P_462_7:!1,__P_462_0:null,__P_462_1:null,__P_462_8:null,__P_462_9:!1,__P_462_10:null,__P_462_11:null,__P_462_2:null,__P_462_3:null,__P_462_12:null,__P_462_4:null,setConfigFilenames:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.__P_462_3=t?t.map((function(t){return r.resolve(t)})):[];case 1:case"end":return n.stop()}}),n)})))()},setRunWhenWatching:function(t,e){this.__P_462_4[t]=e;var r=qx.tool.utils.Utils.parseCommand(e.command);e._cmd=r.shift();e._args=r},_onWrittenApplication:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.getData();o=n.application.getName();if(i=e.__P_462_4[o]){r.next=5;break}return r.abrupt("return");case 5:if(!i._process){r.next=17;break}r.prev=6;r.next=9;return qx.tool.utils.Utils.killTree(i._process.pid);case 9:r.next=13;break;case 11:r.prev=11;r.t0=r.catch(6);case 13:if(!i._processPromise){r.next=16;break}r.next=16;return i._processPromise;case 16:i._process=null;case 17:console.log("Starting application: "+i._cmd+" "+i._args.join(" "));i._processPromise=new qx.Promise((function(t,e){var r=i._process=require("child_process").spawn(i._cmd,i._args);r.stdout.setEncoding("utf8");r.stdout.on("data",(function(t){return console.log(t)}));r.stderr.setEncoding("utf8");r.stderr.on("data",(function(t){return console.log(t)}));r.on("close",(function(e){console.log("Application has terminated");i._process=null;t()}));r.on("error",(function(t){return console.error("Application has failed: "+t)}))}));case 19:case"end":return r.stop()}}),r,null,[[6,11]])})))()},start:function(){var t=this;this.isDebug()&&qx.tool.compiler.Console.debug("DEBUG: Starting watch");if(this.__P_462_5)throw new Error("Cannot start watching more than once");this.__P_462_5=qx.tool.utils.Utils.newExternalPromise();var o=[],i=this.__P_462_0.getAnalyser();i.addListener("compiledClass",(function(){t.__P_462_1.classesCompiled++}));o.push(qx.tool.config.Compile.config.fileName);o.push("compile.js");i.getLibraries().forEach((function(t){var e=r.join(t.getRootDir(),t.getSourcePath());o.push(e);e=r.join(t.getRootDir(),t.getResourcePath());o.push(e);e=r.join(t.getRootDir(),t.getThemePath());o.push(e)}));i.getProxySourcePath()&&o.push(r.resolve(i.getProxySourcePath()));var a=this.__P_462_6=[];this.__P_462_0.getApplications().forEach((function(t){var e={application:t,dependsOn:{},outOfDate:!1};a.push(e);var r=t.getBootPath();r&&!o.includes(r)&&o.push(r);var n=t.getLocalModules();for(var i in n){var c=n[i];c&&!o.includes(c)&&o.push(c)}}));if(this.isDebug()){qx.tool.compiler.Console.debug("DEBUG: applications=".concat(JSON.stringify(a.map((function(t){return t.application.getName()})),2)));qx.tool.compiler.Console.debug("DEBUG: dirs=".concat(JSON.stringify(o,2)))}var c=[];Promise.all(o.map((function(t){return new Promise((function(n,o){t=r.resolve(t);e.stat(t,(function(e){e?"ENOENT"==e.code?n():o(e):qx.tool.utils.files.Utils.correctCase(t).then((function(t){c.push(t);n()}))}))}))}))).then((function(){t.isDebug()&&qx.tool.compiler.Console.debug("DEBUG: confirmed=".concat(JSON.stringify(c,2)));t.__P_462_13().then((function(){var e=t._watcher=n.watch(c,{});e.on("change",(function(e){return t.__P_462_14("change",e)}));e.on("add",(function(e){return t.__P_462_14("add",e)}));e.on("unlink",(function(e){return t.__P_462_14("unlink",e)}));e.on("ready",(function(){qx.tool.compiler.Console.log("Start watching ...");t.__P_462_7=!0}));e.on("error",(function(t){qx.tool.compiler.Console.print("ENOSPC"==t.code?"qx.tool.cli.watch.enospcError":"qx.tool.cli.watch.watchError",t)}))}))}));process.on("beforeExit",this.__P_462_15.bind(this));process.on("exit",this.__P_462_15.bind(this));return this.__P_462_5},stop:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.__P_462_9=!0;t._watcher.close();if(!t.__P_462_8){e.next=5;break}e.next=5;return t.__P_462_8;case 5:case"end":return e.stop()}}),e)})))()},__P_462_13:function(){var t=this;if(this.__P_462_8){this.__P_462_16=!0;return this.__P_462_8}this.fireEvent("making");var e=this,n=qx.tool.compiler.Console;function o(){n.print("qx.tool.cli.watch.makingApplications");e.__P_462_12=null;var t=(new Date).getTime();e.__P_462_1.classesCompiled=0;e.__P_462_10=!1;return e.__P_462_0.make().then((function(){if(e.__P_462_9){n.print("qx.tool.cli.watch.makeStopping");return null}if(e.__P_462_10)return new qx.Promise((function(t){setImmediate((function(){n.print("qx.tool.cli.watch.restartingMake");e.fireEvent("remaking");o().then(t)}))}));var i=e.__P_462_0.getAnalyser(),a=i.getDatabase(),c=[];e.__P_462_6.forEach((function(t){t.dependsOn={};t.application.getDependencies().forEach((function(e){var n=a.classInfo[e],o=i.findLibrary(n.libraryName),c=[o.getRootDir(),o.getSourcePath()].concat(e.split(".")),s=r.resolve.apply(r,c)+".js";t.dependsOn[s]=!0}));var e=t.application.getLocalModules();for(var n in e){var o=r.resolve(e[n]);t.dependsOn[o]=!0}var s=r.resolve(t.application.getLoaderTemplate());c.push(qx.tool.utils.files.Utils.correctCase(s).then((function(e){return t.dependsOn[e]=!0})))}));return Promise.all(c).then((function(){var r=(new Date).getTime();n.print("qx.tool.cli.watch.compiledClasses",e.__P_462_1.classesCompiled,qx.tool.utils.Utils.formatTime(r-t));e.fireEvent("made")}))})).then((function(){e.__P_462_8=null})).catch((function(t){n.print("qx.tool.cli.watch.compileFailed",t);e.__P_462_8=null;e.fireEvent("made")}))}this.__P_462_8=function e(){return o().then((function(){if(t.__P_462_16){delete t.__P_462_16;return e()}return null}))}();return this.__P_462_8},__P_462_17:function(){var t=this;if(this.__P_462_8){this.__P_462_16=!0;return this.__P_462_8}this.__P_462_11&&clearTimeout(this.__P_462_11);this.__P_462_11=setTimeout((function(){return t.__P_462_13()}));return null},__P_462_14:function(t,e){var n=this,o=qx.tool.compiler.Console;if(!this.__P_462_7)return null;e=r.normalize(e);var i=function(){var i=_asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f,p,h,y,d,m,v,g,_,x;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=!1;if(!n.__P_462_3.find((function(t){return t==e}))){i.next=5;break}n.isDebug()&&o.debug("DEBUG: onFileChange: configChanged");n.fireEvent("configChanged");return i.abrupt("return");case 5:c={};n.__P_462_6.forEach((function(t){if(t.dependsOn[e]){c[t.application.getName()]=t.application;a=!0}else{var n=t.application.getBootPath();if(n){n=r.resolve(n);if(e.startsWith(n)){c[t.application.getName()]=!0;a=!0}}}}));s=Object.keys(c);n.isDebug()&&s.length&&o.debug("DEBUG: onFileChange: ".concat(e," impacted applications: ").concat(JSON.stringify(s,2)));u=n.__P_462_0.getAnalyser();l="";f=null;p=null;h=_createForOfIteratorHelper(u.getLibraries());i.prev=14;h.s();case 16:if((y=h.n()).done){i.next=38;break}d=y.value;m=r.resolve(r.join(d.getRootDir(),d.getResourcePath()));if(!e.startsWith(m)){i.next=24;break}l=r.relative(m,e);f="resource";p=d;return i.abrupt("break",38);case 24:m=r.resolve(r.join(d.getRootDir(),d.getThemePath()));if(!e.startsWith(m)){i.next=30;break}l=r.relative(m,e);f="theme";p=d;return i.abrupt("break",38);case 30:m=r.resolve(r.join(d.getRootDir(),d.getSourcePath()));if(!e.startsWith(m)){i.next=36;break}l=r.relative(m,e);f="source";p=d;return i.abrupt("break",38);case 36:i.next=16;break;case 38:i.next=43;break;case 40:i.prev=40;i.t0=i.catch(14);h.e(i.t0);case 43:i.prev=43;h.f();return i.finish(43);case 46:n.fireDataEvent("fileChanged",{filename:l,fileType:f,library:p});if("resource"!=f&&"theme"!=f){i.next=59;break}v=u.getResourceManager();g=n.__P_462_0.getTarget();n.isDebug()&&o.debug("DEBUG: onFileChange: ".concat(e," is a resource"));if(!(_=v.getAsset(l,"unlink"!=t))||"unlink"==t){i.next=59;break}i.next=55;return _.sync(g);case 55:if(!(x=_.getDependsOnThisAsset())){i.next=59;break}i.next=59;return qx.Promise.all(x.map((function(t){return t.sync(g)})));case 59:if(a){n.__P_462_10=!0;n.__P_462_17()}case 60:case"end":return i.stop()}}),i,null,[[14,40,43,46]])})));return function(){return i.apply(this,arguments)}}(),a=function t(e){return i().then((function(){if(e.restart){delete e.restart;return t(e)}return null}))},c=this.__P_462_2[e];c||(c=this.__P_462_2[e]={types:{}});c.types[t]=!0;if(c.promise){this.isDebug()&&o.debug("DEBUG: onFileChange: seen '".concat(e,"', but restarting promise"));c.restart=1;return c.promise}if(c.timerId){clearTimeout(c.timerId);c.timerId=null}this.isDebug()&&o.debug("DEBUG: onFileChange: seen '".concat(e,"', queuing"));c.timerId=setTimeout((function(){c.promise=a(c).then((function(){return delete n.__P_462_2[e]}))}),150);return null},__P_462_15:function(){this.__P_462_5.resolve()}},defer:function(){qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.watch.makingApplications":">>> Making the applications...","qx.tool.cli.watch.restartingMake":">>> Code changed during make, restarting...","qx.tool.cli.watch.makeStopping":">>> Not restarting make because make is stopping...","qx.tool.cli.watch.compiledClasses":">>> Compiled %1 classes in %2"});qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.watch.compileFailed":">>> Fatal error during compile: %1","qx.tool.cli.watch.enospcError":">>> ENOSPC error occured - try increasing fs.inotify.max_user_watches","qx.tool.cli.watch.watchError":">>> Error occured while watching files - file modifications may not be detected; error: %1"},"error")}});qx.tool.cli.Watch.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.Promise":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.api.Test",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.setName(t);e&&this.setTestFunction(e)},properties:{name:{check:"String"},description:{check:"String",event:"changeDescription"},exitCode:{check:"Number",event:"changeExitCode",nullable:!0,init:null},needsServer:{check:"Boolean",nullable:!1,init:!0},testFunction:{check:"Function",nullable:!1,init:function(){}}},members:{execute:function(){var t=this.getTestFunction();return qx.Promise.resolve(t.call(this,this))}}});qx.tool.cli.api.Test.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.cli.Cli":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.Add",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"add <command> [options]",desc:"adds new elements to an existing qooxdoo application/library",builder:function(t){qx.tool.cli.Cli.addYargsCommands(t,["Class","Script"],"qx.tool.cli.commands.add");return t.demandCommand().showHelpOnFail().help()},handler:function(){}}}},members:{}});qx.tool.cli.commands.Add.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.config.Compile":{},"qx.tool.cli.commands.Package":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("process"),n=require("upath"),o=require("rimraf");qx.Class.define("qx.tool.cli.commands.Clean",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"clean",describe:"cleans generated files and caches.",builder:{verbose:{alias:"v",describe:"Verbose logging"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var o,i,a,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qx.tool.cli.commands.Clean.superclass.prototype.process.call(t);e.next=3;return qx.tool.config.Compile.getInstance().load();case 3:o=e.sent;i=_createForOfIteratorHelper(o.getValue("targets"));e.prev=5;i.s();case 7:if((a=i.n()).done){e.next=16;break}c=a.value;e.next=11;return t.__P_464_0(n.join(r.cwd(),c.outputPath));case 11:if(!c.deployPath){e.next=14;break}e.next=14;return t.__P_464_0(n.join(r.cwd(),c.deployPath));case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18;e.t0=e.catch(5);i.e(e.t0);case 21:e.prev=21;i.f();return e.finish(21);case 24:e.next=26;return t.__P_464_0(n.join(r.cwd(),qx.tool.cli.commands.Package.cache_dir));case 26:e.next=28;return t.checkMigrations();case 28:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})))()},__P_464_0:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return e.existsAsync(t);case 2:if(!n.sent){n.next=6;break}r.argv.verbose&&qx.tool.compiler.Console.info("Removing ".concat(t,"..."));n.next=6;return new Promise((function(e,r){o(t,{},(function(t){t?r(t):e()}))}));case 6:case"end":return n.stop()}}),n)})))()}}});qx.tool.cli.commands.Clean.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.cli.ConfigDb":{},"qx.tool.compiler.Console":{defer:"runtime"},"qx.tool.cli.Cli":{},"qx.tool.utils.Utils":{},"qx.Promise":{},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.targets.BuildTarget":{},"qx.tool.cli.Watch":{},"qx.tool.compiler.targets.SourceTarget":{},"qx.tool.compiler.MetaDatabase":{},"qx.tool.compiler.targets.TypeScriptWriter":{},"qx.tool.utils.Debounce":{},"qx.lang.Type":{},"qx.lang.Array":{},"qx.tool.compiler.app.Library":{},"qx.tool.config.Utils":{},"qx.tool.compiler.makers.AppMaker":{},"qx.lang.Object":{},"qx.tool.compiler.app.Application":{},"qx.lang.String":{},"qx.tool.compiler.app.Part":{},"qx.tool.compiler.ClassFile":{},"qx.tool.config.Manifest":{},"qx.tool.cli.commands.package.Install":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("process"),r=require("gauge"),n=require("semver"),o=require("upath"),i=require("console-control-strings"),a=qx.tool.utils.Promisify.fs;require("app-module-path").addPath(e.cwd()+"/node_modules");qx.Class.define("qx.tool.cli.commands.Compile",{extend:qx.tool.cli.commands.Command,statics:{YARGS_BUILDER:{target:{alias:"t",describe:"Set the target type: source or build or class name. Default is first target in config file",requiresArg:!0,type:"string"},"output-path-prefix":{describe:"Sets a prefix for the output path of the target - used to compile a version into a non-standard directory",type:"string"},download:{alias:"d",describe:"Whether to automatically download missing libraries",type:"boolean",default:!0},locale:{alias:"l",describe:"Compile for a given locale",nargs:1,requiresArg:!0,type:"string",array:!0},"update-po-files":{alias:"u",describe:"enables detection of translations and writing them out into .po files",type:"boolean",default:!1},"library-po":{describe:"The policy for updating translations in libraries",type:["ignore","untranslated","all"],default:"ignore"},"write-all-translations":{describe:"enables output of all translations, not just those that are explicitly referenced",type:"boolean"},"app-class":{describe:"sets the application class",nargs:1,requiresArg:!0,type:"string"},"app-theme":{describe:"sets the theme class for the current application",nargs:1,requiresArg:!0,type:"string"},"app-name":{describe:"sets the name of the current application",nargs:1,requiresArg:!0,type:"string"},"app-group":{describe:"which application groups to compile (defaults to all)",nargs:1,requiresArg:!0,type:"string"},"local-fonts":{describe:"whether to prefer local font files over CDN",type:"boolean"},watch:{describe:"enables watching for changes and continuous compilation",type:"boolean",alias:"w"},"watch-debug":{describe:"enables debug messages for watching",type:"boolean"},"machine-readable":{alias:"M",describe:"output compiler messages in machine-readable format",type:"boolean"},minify:{alias:"m",describe:"disables minification (build targets only)",choices:["off","minify","mangle","beautify"],default:"mangle"},"mangle-privates":{describe:"Whether to mangle private variables",default:!0,type:"boolean"},"save-source-in-map":{describe:"Saves the source code in the map file (build target only)",type:"boolean",default:!1},"source-map-relative-paths":{describe:"If true, the source file will be saved in the map file if the target supports it. Can be overridden on a per application basis.",type:"boolean",default:!1},"save-unminified":{alias:"u",describe:"Saves a copy of the unminified version of output files (build target only)",type:"boolean",default:!1},"inline-external-scripts":{describe:"Inlines external Javascript",type:"boolean"},erase:{alias:"e",describe:"Enabled automatic deletion of the output directory when compiler version or environment variables change",type:"boolean",default:!0},feedback:{describe:"Shows gas-gauge feedback",type:"boolean",alias:"f"},typescript:{alias:"T",describe:"Outputs typescript definitions in qooxdoo.d.ts",type:"boolean",default:null},"add-created-at":{describe:"Adds code to populate object's $$createdAt",type:"boolean"},"verbose-created-at":{describe:"Adds additional detail to $$createdAt",type:"boolean"},clean:{alias:"D",describe:"Deletes the target dir before compile",type:"boolean"},"warn-as-error":{alias:"E",describe:"Handle compiler warnings as error",type:"boolean",default:!1},"write-library-info":{alias:"I",describe:"Write library information to the script, for reflection",type:"boolean",default:!0},"write-compile-info":{describe:"Write application summary information to the script, used mostly for unit tests",type:"boolean",default:!1},bundling:{alias:"b",describe:"Whether bundling is enabled",type:"boolean",default:!0}},getYargsCommand:function(){return{command:"compile",describe:"compiles the current application, using compile.json",builder:qx.tool.cli.commands.Compile.YARGS_BUILDER}}},events:{writingApplications:"qx.event.type.Event",writingApplication:"qx.event.type.Data",writtenApplication:"qx.event.type.Data",writtenApplications:"qx.event.type.Data",writtenMetaData:"qx.event.type.Data",compilingClass:"qx.event.type.Data",compiledClass:"qx.event.type.Data",saveDatabase:"qx.event.type.Data",checkEnvironment:"qx.event.type.Data",making:"qx.event.type.Event",made:"qx.event.type.Event",minifyingApplication:"qx.event.type.Data",minifiedApplication:"qx.event.type.Data"},members:{__P_465_0:null,__P_465_1:null,__P_465_2:null,__P_465_3:!1,__P_465_4:null,__P_465_5:!1,__P_465_6:null,process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,a,c,s,u,l,f,p,h,y,d;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return qx.tool.cli.commands.Compile.superclass.prototype.process.call(t);case 2:n.next=4;return qx.tool.cli.ConfigDb.getInstance();case 4:o=n.sent;null===t.argv.feedback&&(t.argv.feedback=o.db("qx.default.feedback",!0));if(!t.argv.verbose){n.next=18;break}n.t0=console;n.t2="\nCompiler:  v".concat(t.getCompilerVersion()," in ").concat(require.main.filename,"\nFramework: v");n.next=11;return t.getQxVersion();case 11:n.t3=n.sent;n.t1=n.t2.concat.call(n.t2,n.t3," in ");n.next=15;return t.getQxPath();case 15:n.t4=n.sent;n.t5=n.t1.concat.call(n.t1,n.t4);n.t0.log.call(n.t0,n.t5);case 18:if(!t.argv["machine-readable"]){n.next=22;break}qx.tool.compiler.Console.getInstance().setMachineReadable(!0);n.next=28;break;case 22:n.next=24;return qx.tool.cli.ConfigDb.getInstance();case 24:a=n.sent;if(c=a.db("qx.default.color",null)){s=i.color(c.split(" "));e.stdout.write(s+i.eraseLine());u=i.color("reset");e.on("exit",(function(){return e.stdout.write(u+i.eraseLine())}));qx.tool.compiler.Console.getInstance().setColorOn(s)}if(t.argv.feedback){l=require("gauge/themes");f=l.newTheme(l({hasUnicode:!0,hasColor:!0}));p=qx.tool.compiler.Console.getInstance().getColorOn();f.preProgressbar=p+f.preProgressbar;f.preSubsection=p+f.preSubsection;f.progressbarTheme.postComplete+=p;f.progressbarTheme.postRemaining+=p;t.__P_465_0=new r;t.__P_465_0.setTheme(f);t.__P_465_0.show("Compiling",0);h={error:"ERROR",warning:"Warning"};qx.tool.compiler.Console.getInstance().setWriter((function(e,r){if((r=qx.tool.compiler.Console.MESSAGE_IDS[r])&&"message"===r.type)t.__P_465_0.show(p+e);else{t.__P_465_0.hide();qx.tool.compiler.Console.log(p+h[(r||{}).type||"error"]+": "+e);t.__P_465_0.show()}}))}case 28:if(t.__P_465_0){t.addListener("writingApplications",(function(){return t.__P_465_0.show("Writing Applications",0)}));t.addListener("writtenApplications",(function(){return t.__P_465_0.show("Writing Applications",1)}));t.addListener("writingApplication",(function(e){return t.__P_465_0.pulse("Writing Application "+e.getData().appMeta.getApplication().getName())}));t.addListener("compilingClass",(function(e){return t.__P_465_0.pulse("Compiling "+e.getData().classFile.getClassName())}));t.addListener("minifyingApplication",(function(e){return t.__P_465_0.pulse("Minifying "+e.getData().application.getName()+" "+e.getData().filename)}))}else{t.addListener("writingApplication",(function(t){var e=t.getData();qx.tool.compiler.Console.print("qx.tool.cli.compile.writingApplication",e.appMeta.getApplication().getName())}));t.addListener("minifyingApplication",(function(t){return qx.tool.compiler.Console.print("qx.tool.cli.compile.minifyingApplication",t.getData().application.getName(),t.getData().filename)}))}t.addListener("making",(function(e){t.__P_465_0?t.__P_465_0.show("Compiling",1):qx.tool.compiler.Console.print("qx.tool.cli.compile.makeBegins")}));t.addListener("made",(function(e){t.__P_465_0?t.__P_465_0.show("Compiling",1):qx.tool.compiler.Console.print("qx.tool.cli.compile.makeEnds")}));t.addListener("writtenApplications",(function(e){if(t.argv.verbose){qx.tool.compiler.Console.log("\nCompleted all applications, libraries used are:");Object.values(t.__P_465_2).forEach((function(t){return qx.tool.compiler.Console.log("   ".concat(t.getNamespace()," (").concat(t.getRootDir(),")"))}))}}));n.next=34;return t._loadConfigAndStartMaking();case 34:if(!t.argv.watch){y=t.__P_465_1.every((function(t){return t.getSuccess()}));d=t.__P_465_1.every((function(t){return t.getHasWarnings()}));y&&d&&t.argv.warnAsError&&(y=!1);!t.argv.deploying&&!t.argv["machine-readable"]&&t.argv.feedback&&t.__P_465_3&&"build"===t.argv.target&&qx.tool.compiler.Console.warn("   *******************************************************************************************\n   **                                                                                       **\n   **  Your compilation will include temporary files that are only necessary during         **\n   **  development; these files speed up the compilation, but take up space that you would  **\n   **  probably not want to put on a production server.                                     **\n   **                                                                                       **\n   **  When you are ready to deploy, try running `qx deploy` to get a minimised version     **\n   **                                                                                       **\n   *******************************************************************************************");e.exitCode=y?0:1}case 35:case"end":return n.stop()}}),n)})))()},_loadConfigAndStartMaking:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,c,s;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.getCompilerApi().compileJsonExists()&&!qx.tool.cli.Cli.getInstance().compileJsExists()){qx.tool.compiler.Console.error("Cannot find either compile.json nor compile.js");e.exit(1)}n=t.getCompilerApi().getConfiguration();r.next=4;return t.createMakersFromConfig(n);case 4:if((o=t.__P_465_1=r.sent)&&o.length){r.next=7;break}throw new qx.tool.utils.Utils.UserError("Error: Cannot find anything to make");case 7:i=0;c=function(e){1==i&&t.dispatchEvent(e.clone())};s=!0;r.next=12;return qx.Promise.all(o.map(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var o,u,l,f,p,h;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.getAnalyser();e.next=3;return qx.tool.cli.ConfigDb.getInstance();case 3:u=e.sent;o.setWritePoLineNumbers(u.db("qx.translation.strictPoCompatibility",!1));e.next=7;return a.existsAsync(r.getOutputDir());case 7:if(e.sent){e.next=9;break}t.__P_465_3=!0;case 9:if(!t.argv.clean){e.next=16;break}e.next=12;return r.eraseOutputDir();case 12:e.next=14;return qx.tool.utils.files.Utils.safeUnlink(o.getDbFilename());case 14:e.next=16;return qx.tool.utils.files.Utils.safeUnlink(o.getResDbFilename());case 16:n.ignores&&o.setIgnores(n.ignores);l=r.getTarget();o.addListener("compilingClass",(function(e){return t.dispatchEvent(e.clone())}));o.addListener("compiledClass",(function(e){return t.dispatchEvent(e.clone())}));o.addListener("saveDatabase",(function(e){return t.dispatchEvent(e.clone())}));l.addListener("checkEnvironment",(function(e){return t.dispatchEvent(e.clone())}));f=[];l.addListener("writingApplication",_asyncToGenerator(_regeneratorRuntime().mark((function e(){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={maker:r,target:l,appMeta:l.getAppMeta()};f.push(n);e.next=4;return t.fireDataEventAsync("writingApplication",n);case 4:case"end":return e.stop()}}),e)}))));l.addListener("writtenApplication",_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.fireDataEventAsync("writtenApplication",{maker:r,target:l,appMeta:l.getAppMeta()});case 2:case"end":return e.stop()}}),e)}))));r.addListener("writingApplications",c);r.addListener("writtenApplications",_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.fireDataEventAsync("writtenApplications",f);case 2:case"end":return e.stop()}}),e)}))));if(l instanceof qx.tool.compiler.targets.BuildTarget){l.addListener("minifyingApplication",(function(e){return t.dispatchEvent(e.clone())}));l.addListener("minifiedApplication",(function(e){return t.dispatchEvent(e.clone())}))}e.next=30;return qx.tool.utils.files.Utils.safeStat("source/index.html");case 30:e.sent&&qx.tool.compiler.Console.print("qx.tool.cli.compile.legacyFiles","source/index.html");if(t.argv.watch){e.next=38;break}r.addListener("making",(function(){1==++i&&t.fireEvent("making")}));r.addListener("made",(function(){0==--i&&t.fireEvent("made")}));e.next=37;return r.make();case 37:return e.abrupt("return",e.sent);case 38:p=new qx.tool.cli.Watch(r);n.applications.forEach((function(t){t.runWhenWatching&&p.setRunWhenWatching(t.name,t.runWhenWatching)}));t.argv["watch-debug"]&&p.setDebug(!0);p.addListener("making",(function(){1==++i&&t.fireEvent("making")}));p.addListener("made",(function(){0==--i&&t.fireEvent("made")}));p.addListener("configChanged",_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return p.stop();case 2:setImmediate((function(){return t._loadConfigAndStartMaking()}));case 3:case"end":return e.stop()}}),e)}))));h=[t._compileJsFilename,t._compileJsonFilename].filter((function(t){return Boolean(t)}));p.setConfigFilenames(h);if(!(l instanceof qx.tool.compiler.targets.SourceTarget&&s)){e.next=56;break}s=!1;e.prev=48;e.next=51;return t.__P_465_7(p);case 51:e.next=56;break;case 53:e.prev=53;e.t0=e.catch(48);qx.tool.compiler.Console.error(e.t0);case 56:return e.abrupt("return",p.start());case 57:case"end":return e.stop()}}),e,null,[[48,53]])})));return function(t){return e.apply(this,arguments)}}()));case 12:if(t.argv.watch){r.next=21;break}r.prev=13;r.next=16;return t.__P_465_7(null);case 16:r.next=21;break;case 18:r.prev=18;r.t0=r.catch(13);qx.tool.compiler.Console.error(r.t0);case 21:case"end":return r.stop()}}),r,null,[[13,18]])})))()},__P_465_7:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,i,c,s,u,l,f,p,h,y,d,m;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=[];i=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r,c,s,u,l;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=o.basename(e);t.next=3;return a.promises.stat(e);case 3:if(!(c=t.sent).isFile()||!r.match(/\.js$/)){t.next=8;break}n.push(e);t.next=20;break;case 8:if(!c.isDirectory()||"."!=r&&"."==r[0]){t.next=20;break}t.next=11;return a.promises.readdir(e);case 11:s=t.sent;u=0;case 13:if(!(u<s.length)){t.next=20;break}l=o.join(e,s[u]);t.next=17;return i(l);case 17:u++;t.next=13;break;case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();qx.tool.compiler.Console.info("Loading meta data ...");c=(new qx.tool.compiler.MetaDatabase).set({rootDir:e.__P_465_4});r.next=6;return c.load();case 6:c.getDatabase().libraries={};s=0,u=Object.values(e.__P_465_2);case 8:if(!(s<u.length)){r.next=17;break}l=u[s];f=o.join(l.getRootDir(),l.getSourcePath());c.getDatabase().libraries[l.getNamespace()]={sourceDir:f};r.next=14;return i(f);case 14:s++;r.next=8;break;case 17:p=_createForOfIteratorHelper(n);r.prev=18;p.s();case 20:if((h=p.n()).done){r.next=26;break}y=h.value;r.next=24;return c.addFile(y,!!e.argv.clean);case 24:r.next=20;break;case 26:r.next=31;break;case 28:r.prev=28;r.t0=r.catch(18);p.e(r.t0);case 31:r.prev=31;p.f();return r.finish(31);case 34:r.next=36;return c.reparseAll();case 36:r.next=38;return c.save();case 38:r.next=40;return e.fireDataEventAsync("writtenMetaData",c);case 40:d=null;if(!e.__P_465_5){r.next=47;break}qx.tool.compiler.Console.info("Generating typescript output ...");d=new qx.tool.compiler.targets.TypeScriptWriter(c);e.__P_465_6?d.setOutputTo(e.__P_465_6):d.setOutputTo(o.join(e.__P_465_4,"..","qooxdoo.d.ts"));r.next=47;return d.process();case 47:if(t){r.next=49;break}return r.abrupt("return");case 49:n={};m=new qx.tool.utils.Debounce(_asyncToGenerator(_regeneratorRuntime().mark((function t(){var r,o,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1;qx.tool.compiler.Console.info("Loading meta data ...");o=[];case 3:0;if(0!=(i=Object.keys(n)).length){t.next=7;break}return t.abrupt("break",12);case 7:r=!0;n={};i.forEach((function(t){e.argv.verbose&&qx.tool.compiler.Console.info("Processing meta for ".concat(t," ..."));o.push(c.addFile(t))}));t.next=3;break;case 12:if(!r){t.next=23;break}qx.tool.compiler.Console.info("Generating typescript output ...");t.next=16;return Promise.all(o);case 16:t.next=18;return c.reparseAll();case 18:t.next=20;return c.save();case 20:if(!e.__P_465_5){t.next=23;break}t.next=23;return d.process();case 23:case"end":return t.stop()}}),t)}))));t.addListener("fileChanged",(function(t){var e=t.getData();if("source"==e.fileType){var r=e.library.getFilename(e.filename);n[r]=!0;m.run()}}));case 52:case"end":return r.stop()}}),r,null,[[18,28,31,34]])})))()},createMakersFromConfig:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k,S;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=qx.tool.compiler.Console.getInstance();u=r;if(t.babelOptions){if(null!=t&&null!==(l=t.babel)&&void 0!==l&&l.options)qx.tool.compiler.Console.print("qx.tool.cli.compile.deprecatedBabelOptionsConflicting");else{t.babel=t.babel||{};t.babel.options=t.babelOptions;qx.tool.compiler.Console.print("qx.tool.cli.compile.deprecatedBabelOptions")}delete t.babelOptions}if(qx.lang.Type.isBoolean(null==t||null===(i=t.meta)||void 0===i?void 0:i.typescript))r.__P_465_5=t.meta.typescript;else if(qx.lang.Type.isString(null==t||null===(a=t.meta)||void 0===a?void 0:a.typescript)){r.__P_465_5=!0;r.__P_465_6=o.relative(e.cwd(),o.resolve(null==t||null===(f=t.meta)||void 0===f?void 0:f.typescript))}qx.lang.Type.isBoolean(r.argv.typescript)&&(r.__P_465_5=r.argv.typescript);p=null;if(u.argv["app-name"]){p={};u.argv["app-name"].split(",").forEach((function(t){return p[t]=!0}))}h=null;if(u.argv["app-group"]){h={};u.argv["app-group"].split(",").forEach((function(t){return h[t]=!0}))}t.targets.forEach((function(t,e){return t.index=e}));y=[];d=null;t.targets.forEach((function(t){t.type===r.getTargetType()&&(t["application-names"]||t["application-types"]?y.push(t):d?qx.tool.compiler.Console.print("qx.tool.cli.compile.multipleDefaultTargets"):d=t)}));m={};t.applications.forEach((function(t,e){if(t.name){if(m[t.name])throw new qx.tool.utils.Utils.UserError("Multiple applications with the same name '".concat(t.name,"'"));m[t.name]=t}t.group&&"string"==typeof t.group&&(t.group=[t.group]);t.index=e;var r=t.type||"browser",n=y.filter((function(e){var n=e["application-types"];if(n&&!qx.lang.Array.contains(n,r))return!1;var o=e["application-names"];return!(t.name&&o&&!qx.lang.Array.contains(o,t.name))}));if(0==n.length){if(!d)throw new qx.tool.utils.Utils.UserError("Cannot find any suitable targets for application #".concat(e," (named ").concat(t.name||"unnamed",")"));n=[d]}n.forEach((function(e){e.appConfigs||(e.appConfigs=[]);e.appConfigs.push(t);t.targetConfigs||(t.targetConfigs=[]);t.targetConfigs.push(e)}))}));d&&d.appConfigs&&y.push(d);v=r.__P_465_2={};g=[];_=_createForOfIteratorHelper(t.libraries);n.prev=19;_.s();case 21:if((x=_.n()).done){n.next=30;break}b=x.value;n.next=25;return qx.tool.compiler.app.Library.createLibrary(b);case 25:w=n.sent;v[w.getNamespace()]=w;g.push(w);case 28:n.next=21;break;case 30:n.next=35;break;case 32:n.prev=32;n.t0=n.catch(19);_.e(n.t0);case 35:n.prev=35;_.f();return n.finish(35);case 38:if(q=v.qx){n.next=49;break}n.next=42;return qx.tool.config.Utils.getQxPath();case 42:P=n.sent;n.next=45;return qx.tool.compiler.app.Library.createLibrary(P);case 45:L=n.sent;v[L.getNamespace()]=L;g.push(L);q=v.qx;case 49:r.argv.verbose&&s.log("Qooxdoo found in "+q.getRootDir());n.next=52;return r.__P_465_8(Object.values(v),t.packages);case 52:if(!((E=n.sent).length>0)){n.next=59;break}if(!r.argv.warnAsError){n.next=58;break}throw new qx.tool.utils.Utils.UserError(E.join("\n"));case 58:qx.tool.compiler.Console.log(E.join("\n"));case 59:y.forEach((function(t){var e=!1;t.defaultAppConfig=null;if(t.appConfigs){t.appConfigs.forEach((function(r){if(!r.type||"browser"==r.type){var n;if(void 0!==r.writeIndexHtmlToRoot){qx.tool.compiler.Console.print("qx.tool.cli.compile.deprecatedCompileSeeOther","application.writeIndexHtmlToRoot","application.default");n=r.writeIndexHtmlToRoot}else void 0!==r.default&&(n=r.default);if(void 0!==n){if(n){if(e)throw new qx.tool.utils.Utils.UserError("Error: Can only set one application to be the default application!");e=!0;t.defaultAppConfig=r}}else t.defaultAppConfig||(t.defaultAppConfig=r)}}));!e&&t.appConfigs.length>1&&(t.defaultAppConfig=t.appConfigs[0])}}));k={};S=[];r.__P_465_4=null===(c=t.meta)||void 0===c?void 0:c.output;r.__P_465_4||(r.__P_465_4=o.relative(e.cwd(),o.resolve(y[0].outputPath,"../meta")));y.forEach((function(n){if(n.appConfigs){var i=n.appConfigs.filter((function(t){if(h){if(!(t.group||[]).find((function(t){return!!h[t]})))return!1}return!(p&&t.name&&!p[t.name])}));if(i.length){var a=n.outputPath;r.argv.outputPathPrefix&&(a=o.join(r.argv.outputPathPrefix,a));if(!a)throw new qx.tool.utils.Utils.UserError("Missing output-path for target "+n.type);var c=o.resolve(a);if(k[c])throw new qx.tool.utils.Utils.UserError("Multiple output targets share the same target directory ".concat(a," - each target output must be unique"));k[c]=!0;var l=new qx.tool.compiler.makers.AppMaker;r.argv.erase||l.setNoErase(!0);var f=n.targetClass?r.resolveTargetClass(n.targetClass):null;!f&&n.type&&(f=r.resolveTargetClass(n.type));if(!f)throw new qx.tool.utils.Utils.UserError("Cannot find target class: "+(n.targetClass||n.type));var y=new f(a);n.uri&&qx.tool.compiler.Console.print("qx.tool.cli.compile.deprecatedUri","target.uri",n.uri);void 0!==n.addTimestampsToUrls?y.setAddTimestampsToUrls(n.addTimestampsToUrls):y.setAddTimestampsToUrls(y instanceof qx.tool.compiler.targets.BuildTarget);(n.writeCompileInfo||r.argv.writeCompileInfo)&&y.setWriteCompileInfo(!0);t.i18nAsParts&&y.setI18nAsParts(!0);y.setWriteLibraryInfo(r.argv.writeLibraryInfo);y.setUpdatePoFiles(r.argv.updatePoFiles);y.setLibraryPoPolicy(r.argv.libraryPo);var d,m=n.fonts||{},v=!0;void 0!==r.argv.localFonts?v=r.argv.localFonts:void 0!==m.local&&(v=m.local);y.setPreferLocalFonts(v);void 0!==m.fontTypes&&y.setFontTypes(m.fontTypes);e.argv.indexOf("--minify")>-1&&(d=u.argv.minify);"boolean"==typeof(d=d||n.minify||u.argv.minify)&&(d=d?"minify":"off");d||(d="mangle");"function"==typeof y.setMinify&&y.setMinify(d);var _=D(n["save-source-in-map"],u.argv.saveSourceInMap);"boolean"==typeof _&&"function"==typeof y.setSaveSourceInMap&&y.setSaveSourceInMap(_);var x=D(n["source-map-relative-paths"],u.argv.sourceMapRelativePaths);"boolean"==typeof x&&"function"==typeof y.setSourceMapRelativePaths&&y.setSourceMapRelativePaths(x);var b=D(n["save-unminified"],u.argv["save-unminified"]);"boolean"==typeof b&&"function"==typeof y.setSaveUnminified&&y.setSaveUnminified(b);var w=D(n["inline-external-scripts"],u.argv["inline-external-scripts"]);"boolean"==typeof w?y.setInlineExternalScripts(w):y instanceof qx.tool.compiler.targets.BuildTarget&&y.setInlineExternalScripts(!0);var q=n.deployPath;q&&"function"==typeof y.setDeployDir&&y.setDeployDir(q);var P=n["deploy-source-maps"];"boolean"==typeof P&&"function"==typeof y.setDeployDir&&y.setDeployMap(P);l.setTarget(y);var L=D(n["mangle-privates"],u.argv["mangle-privates"]);"string"==typeof L?l.getAnalyser().setManglePrivates(L):"boolean"==typeof L&&(L?l.getAnalyser().setManglePrivates(y instanceof qx.tool.compiler.targets.BuildTarget?"unreadable":"readable"):l.getAnalyser().setManglePrivates("off"));n["application-types"]&&l.getAnalyser().setApplicationTypes(n["application-types"]);n.proxySourcePath&&l.getAnalyser().setProxySourcePath(n.proxySourcePath);l.setLocales(t.locales||["en"]);t.writeAllTranslations&&l.setWriteAllTranslations(t.writeAllTranslations);if("string"==typeof n.typescript){s.warn("The 'typescript' property inside a target definition is deprecated - please see top level 'meta.typescript' property");if(r.__P_465_6)s.warn("Multiple conflicting locations for the Typescript output - choosing to write to "+r.__P_465_6+" and NOT "+n.typescript);else{r.__P_465_5=!0;r.__P_465_6=o.relative(e.cwd(),o.resolve(n.typescript))}}t.environment&&l.setEnvironment(t.environment);var E={"qx.version":l.getAnalyser().getQooxdooVersion(),"qx.compiler.targetType":y.getType(),"qx.compiler.outputDir":y.getOutputDir(),"qx.target.privateArtifacts":!!t["private-artifacts"]};t["private-artifacts"]&&y.setPrivateArtifacts(!0);qx.lang.Object.mergeWith(E,n.environment,!1);y.setEnvironment(E);n.preserveEnvironment&&y.setPreserveEnvironment(n.preserveEnvironment);if(t["path-mappings"])for(var O in t["path-mappings"]){var j=t["path-mappings"][O];y.addPathMapping(O,j)}var T=qx.lang.Object.clone(t.babel||{},!0);T.options=T.options||{};qx.lang.Object.mergeWith(T.options,n.babelOptions||{});l.getAnalyser().setBabelConfig(T);(n.addCreatedAt||u.argv.addCreatedAt)&&l.getAnalyser().setAddCreatedAt(!0);(n.verboseCreatedAt||u.argv.verboseCreatedAt)&&l.getAnalyser().setVerboseCreatedAt(!0);for(var C=0,A=g;C<A.length;C++){var G=A[C];l.getAnalyser().addLibrary(G)}var R={};i.forEach((function(e){var r=e.app=new qx.tool.compiler.app.Application(e.class);r.setTemplatePath(qx.tool.utils.Utils.getTemplateDir());["type","theme","name","environment","outputPath","bootPath","loaderTemplate","publish","deploy","standalone","localModules"].forEach((function(t){if(void 0!==e[t]){var n="set"+qx.lang.String.firstUp(t);r[n](e[t])}}));R[r.getType()]=!0;e.uri&&qx.tool.compiler.Console.print("qx.tool.cli.compile.deprecatedUri","application.uri",e.uri);e.title&&r.setTitle(e.title);e.description&&r.setDescription(e.description);e.localModules=e.localModules||{};qx.lang.Object.mergeWith(e.localModules,t.localModules||{},!1);qx.lang.Object.isEmpty(e.localModules)||r.setLocalModules(e.localModules);var o=e.parts||n.parts||t.parts;if(o){if(!o.boot)throw new qx.tool.utils.Utils.UserError("Cannot determine a boot part for application "+(e.index+1)+" "+(e.name||""));for(var i in o){var a=o[i],c="string"==typeof a.include?[a.include]:a.include,s="string"==typeof a.exclude?[a.exclude]:a.exclude,f=new qx.tool.compiler.app.Part(i,c,s).set({combine:Boolean(a.combine),minify:Boolean(a.minify)});r.addPart(f)}}if("source"==y.getType()&&u.argv.bundling){var p=e.bundle||n.bundle||t.bundle;if(p){p.include&&r.setBundleInclude(p.include);p.exclude&&r.setBundleExclude(p.exclude)}}r.set({exclude:M([],t.exclude,n.exclude,e.exclude),include:M([],t.include,n.include,e.include)});l.addApplication(r)}));var I=qx.tool.compiler.ClassFile,N=[];qx.lang.Array.append(N,I.QX_GLOBALS);qx.lang.Array.append(N,I.COMMON_GLOBALS);R.browser&&qx.lang.Array.append(N,I.BROWSER_GLOBALS);R.node&&qx.lang.Array.append(N,I.NODE_GLOBALS);R.rhino&&qx.lang.Array.append(N,I.RHINO_GLOBALS);l.getAnalyser().setGlobalSymbols(N);n.defaultAppConfig&&n.defaultAppConfig.app&&"browser"===(n.defaultAppConfig.type||"browser")?n.defaultAppConfig.app.setWriteIndexHtmlToRoot(!0):qx.tool.utils.files.Utils.safeUnlink(y.getOutputDir()+"index.html");var F=function(t,e){e&&e.forEach((function(e){var r=qx.tool.compiler.Console.decodeMarker(e);s.warn(t+": "+r)}))};l.getAnalyser().addListener("compiledClass",(function(t){var e=t.getData();F(e.classFile.getClassName(),e.dbClassInfo.markers)}));l.getAnalyser().addListener("alreadyCompiledClass",(function(t){var e=t.getData();F(e.className,e.dbClassInfo.markers)}));S.push(l)}}else qx.tool.compiler.Console.print("qx.tool.cli.compile.unusedTarget",n.type,n.index);function D(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++)if(void 0!==e[n])return e[n]}function M(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(e){e&&e.forEach((function(r){qx.lang.Array.contains(t,e)||t.push(r)}))}));return t}}));return n.abrupt("return",S);case 66:case"end":return n.stop()}}),n,null,[[19,32,35,38]])})))()},__P_465_8:function(t,r){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function c(){var s,u,l,f,p,h,y,d,m,v,g,_,x,b;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:s=qx.tool.compiler.Console.getInstance();u=[];l=_createForOfIteratorHelper(t);c.prev=3;l.s();case 5:if((f=l.n()).done){c.next=44;break}p=f.value;(h=p.getRequires())||(h={});r||(r={});if(y=p.getLibraryInfo()["qooxdoo-range"]){i.argv.verbose&&s.warn("".concat(p.getNamespace(),': The configuration setting "qooxdoo-range" in Manifest.json has been deprecated in favor of "requires.@qooxdoo/framework".'));h["@qooxdoo/framework"]||(h["@qooxdoo/framework"]=y)}d=Object.getOwnPropertyNames(h).filter((function(e){return!t.find((function(t){return t.getLibraryInfo().name===e}))}));m=d.filter((function(t){return"@qooxdoo/framework"!==t&&"@qooxdoo/compiler"!==t}));v=Object.getOwnPropertyNames(r);if(!(m.length>0&&0===v.length)){c.next=26;break}if(!i.argv.download){c.next=25;break}if(!a.existsSync(qx.tool.config.Manifest.config.fileName)){s.error("Libraries are missing and there is no Manifest.json in the current directory so we cannot attempt to install them; the missing libraries are: \n     "+m.join("\n     ")+"\nThe library which refers to the missing libraries is "+p.getNamespace()+" in "+p.getRootDir());e.exit(1)}i.argv.verbose&&s.info(">>> Installing latest compatible version of libraries ".concat(m.join(", "),"..."));g=new qx.tool.cli.commands.package.Install({verbose:i.argv.verbose,save:!1});c.next=22;return g.process();case 22:throw new qx.tool.utils.Utils.UserError("Library ".concat(p.getNamespace()," requires ").concat(m.join(",")," - we have tried to download and install these additional libraries, please restart the compilation."));case 25:throw new qx.tool.utils.Utils.UserError("No library information available. Try 'qx compile --download'");case 26:_=_createForOfIteratorHelper(d);c.prev=27;b=_regeneratorRuntime().mark((function e(){var a,c,l,f,y,d;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=x.value;c=h[a];l=/^[0-9a-f]{40}$/.test(c);e.t0=a;e.next="@qooxdoo/compiler"===e.t0?6:"@qooxdoo/framework"===e.t0?7:12;break;case 6:return e.abrupt("break",19);case 7:e.next=9;return i.getQxVersion();case 9:f=e.sent;n.satisfies(f,c,{loose:!0})||u.push("".concat(p.getNamespace(),": Needs @qooxdoo/framework version ").concat(c,", found ").concat(f));return e.abrupt("break",19);case 12:if(y=t.find((function(t){return o.relative("",t.getRootDir())===r[a]}))){e.next=16;break}u.push("".concat(p.getNamespace(),": Cannot find required library '").concat(a,"'"));return e.abrupt("break",19);case 16:d=y.getLibraryInfo().version;n.valid(d,{loose:!0})?l?i.argv.quiet||s.warn("".concat(a,": Cannot check whether commit hash ").concat(c," corresponds to version ").concat(d)):n.satisfies(d,c,{loose:!0})||u.push("".concat(p.getNamespace(),": Needs ").concat(a," version ").concat(c,", found ").concat(d)):i.argv.quiet||s.warn("".concat(a,": Version is not valid: ").concat(d));return e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)}));_.s();case 30:if((x=_.n()).done){c.next=34;break}return c.delegateYield(b(),"t0",32);case 32:c.next=30;break;case 34:c.next=39;break;case 36:c.prev=36;c.t1=c.catch(27);_.e(c.t1);case 39:c.prev=39;_.f();return c.finish(39);case 42:c.next=5;break;case 44:c.next=49;break;case 46:c.prev=46;c.t2=c.catch(3);l.e(c.t2);case 49:c.prev=49;l.f();return c.finish(49);case 52:return c.abrupt("return",u);case 53:case"end":return c.stop()}}),c,null,[[3,46,49,52],[27,36,39,42]])})))()},resolveTargetClass:function(t){if(!t)return null;if("Class"==t.$$type)return t;if("build"==t)return qx.tool.compiler.targets.BuildTarget;if("source"==t)return qx.tool.compiler.targets.SourceTarget;if(t){return t.indexOf(".")<0?qx.Class.getByName("qx.tool.compiler.targets."+t):qx.Class.getByName(t)}return null},getMakers:function(){return this.__P_465_1},getMaker:function(){if(1==this.__P_465_1.length)return this.__P_465_1[0];throw new Error("Cannot get a single maker - there are "+this.__P_465_1.length+" available")},getMakersForApp:function(t){return this.__P_465_1.filter((function(e){return e.getApplications().find((function(e){return e.getName()==t}))}))},getLibraries:function(){return this.__P_465_2}},defer:function(t){qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.compile.writingApplication":"Writing application %1","qx.tool.cli.compile.minifyingApplication":"Minifying %1 %2","qx.tool.cli.compile.compilingClass":"Compiling class %1","qx.tool.cli.compile.compiledClass":"Compiled class %1 in %2s","qx.tool.cli.compile.makeBegins":"Making applications...","qx.tool.cli.compile.makeEnds":"Applications are made"});qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.compile.multipleDefaultTargets":"Multiple default targets found!","qx.tool.cli.compile.unusedTarget":"Target type %1, index %2 is unused","qx.tool.cli.compile.selectingDefaultApp":"You have multiple applications, none of which are marked as 'default'; the first application named %1 has been chosen as the default application","qx.tool.cli.compile.legacyFiles":"File %1 exists but is no longer used","qx.tool.cli.compile.deprecatedCompile":"The configuration setting %1 in compile.json is deprecated","qx.tool.cli.compile.deprecatedCompileSeeOther":"The configuration setting %1 in compile.json is deprecated (see %2)","qx.tool.cli.compile.deprecatedUri":"URIs are no longer set in compile.json, the configuration setting %1=%2 in compile.json is ignored (it's auto detected)","qx.tool.cli.compile.deprecatedProvidesBoot":"Manifest.Json no longer supports provides.boot - only Applications can have boot; specified in %1","qx.tool.cli.compile.deprecatedBabelOptions":"Deprecated use of `babelOptions` - these should be moved to `babel.options`","qx.tool.cli.compile.deprecatedBabelOptionsConflicting":"Conflicting use of `babel.options` and the deprecated `babelOptions` (ignored)"},"warning")}});qx.tool.cli.commands.Compile.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.targets.meta.ApplicationMeta":{},"qx.tool.utils.Utils":{},"qx.tool.compiler.targets.meta.BootJs":{},"qx.tool.compiler.targets.meta.PolyfillJs":{},"qx.tool.compiler.targets.meta.Browserify":{},"qx.tool.compiler.app.Application":{},"qx.tool.compiler.targets.meta.Javascript":{},"qx.tool.compiler.Console":{},"qx.tool.compiler.app.Cldr":{},"qx.Promise":{},"qx.tool.utils.files.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath");qx.Class.define("qx.tool.compiler.targets.Target",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.setOutputDir(t)},properties:{type:{init:"source",nullable:!1,check:["source","build"]},outputDir:{init:"output",nullable:!1,check:"String",transform:"_transformOutputDir"},generateIndexHtml:{init:!0,check:"Boolean"},privateArtifacts:{init:!1,check:"Boolean"},environment:{init:null,nullable:!0},defaultEnvironment:{init:null,inheritable:!0,nullable:!0},preserveEnvironment:{init:null,nullable:!0,check:"Array"},analyser:{nullable:!1},inlineExternalScripts:{init:!1,check:"Boolean"},preferLocalFonts:{init:!1,check:"Boolean"},fontTypes:{init:["woff"],check:"Array"},addTimestampsToUrls:{init:!0,check:"Boolean"},locales:{nullable:!1,init:["en"],transform:"_transformLocales"},i18nAsParts:{init:!1,nullable:!1,check:"Boolean"},writeAllTranslations:{init:!1,nullable:!1,check:"Boolean"},updatePoFiles:{init:!1,nullable:!1,check:"Boolean"},libraryPoPolicy:{init:"ignore",check:["ignore","untranslated","all"]},writeCompileInfo:{init:!1,nullable:!1,check:"Boolean"},writeLibraryInfo:{init:!0,nullable:!1,check:"Boolean"},sourceMapRelativePaths:{init:!1,nullable:!1,check:"Boolean"}},events:{checkEnvironment:"qx.event.type.Data",writingApplication:"qx.event.type.Event",writtenApplication:"qx.event.type.Event"},members:{__P_499_0:null,__P_499_1:null,open:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},_transformOutputDir:function(t){t&&"/"!=t[t.length-1]&&(t+="/");return t},getApplicationRoot:function(t){return r.join(this.getOutputDir(),this.getProjectDir(t))+"/"},getProjectDir:function(t){return t.getOutputPath()||t.getName()},_getOutputRootUri:function(t){if(this.isPrivateArtifacts())return"";var e=this.getApplicationRoot(t);return r.relative(e,this.getOutputDir())+"/"},addPathMapping:function(t,e){t=r.resolve(t);null===this.__P_499_0&&(this.__P_499_0={});this.__P_499_0[t]=e},getPathMapping:function(t){if(this.__P_499_0){var e=r.resolve(t);for(var n in this.__P_499_0)if(e.startsWith(n)){return t=this.__P_499_0[n]+e.substring(n.length)}}return null},mapToUri:function(t,e){var n=this.getPathMapping(t);if(null!==n)return n;e&&(t=r.relative(e,t));return t},generateApplication:function(t,e){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=n;a=t.getAnalyser();c=a.getResourceManager();(s=n.__P_499_1=new qx.tool.compiler.targets.meta.ApplicationMeta(n,t)).setAddTimestampsToUrls(n.getAddTimestampsToUrls());u="";if(!n.isPrivateArtifacts()||"browser"!=t.getType()){l=n.getApplicationRoot(t);u=r.relative(l,n.getOutputDir())+"/"}f=n.getApplicationRoot(t);p=n.getPathMapping(r.join(f,n.getOutputDir(),"transpiled/"));s.setSourceUri(p||u+"transpiled/");p=n.getPathMapping(r.join(f,n.getOutputDir(),"resource"));s.setResourceUri(p||u+"resource");h=t.getRequiredLibraries();o.next=15;return qx.tool.utils.Utils.makeDirs(f);case 15:s.setEnvironment({"qx.application":t.getClassName(),"qx.revision":"","qx.theme":t.getTheme()});y={};d=function(t,e){t&&t.forEach((function(t){if(!y[t.toLowerCase()]){y[t.toLowerCase()]=!0;var n=e||(t.endsWith(".js")?"urisBefore":"cssBefore");if(t.match(/^https?:/))s.addExternal(n,t);else{var o=c.getAsset(t);if(o){var a=o.getDestFilename(i);a=r.relative(f,a);s.addPreload(n,a)}}}}))};h.forEach((function(t){var e=a.findLibrary(t);s.addLibrary(e);if(n.isWriteLibraryInfo()){s.getEnvironmentValue("qx.libraryInfoMap",{})[t]=e.getLibraryInfo()}d(e.getAddScript(),"urisBefore");d(e.getAddCss(),"cssBefore")}));for(m in e)s.setEnvironmentValue(m,e[m]);o.next=22;return i.fireDataEventAsync("checkEnvironment",{application:t,environment:s.getEnvironment()});case 22:v=new qx.tool.compiler.targets.meta.BootJs(s);g=s.createPackage();s.setBootMetaJs(v);g.addJavascriptMeta(new qx.tool.compiler.targets.meta.PolyfillJs(s));"browser"==s.getEnvironmentValue("qx.compiler.applicationType")&&g.addJavascriptMeta(new qx.tool.compiler.targets.meta.Browserify(s));_=t.getPartsDependencies();x=qx.tool.compiler.app.Application.createWildcardMatchFunction(t.getBundleInclude(),t.getBundleExclude());b=g;w={boot:g};_.forEach((function(t,e){var o=s.createPart(t.name);0==e&&o.addPackage(g);t.classes.forEach((function(e){var i=e.replace(/\./g,"/")+".js",c=r.join(n.getOutputDir(),"transpiled",i),u=a.getDatabase().classInfo[e],l=a.findLibrary(u.libraryName).getFilename(i),f=new qx.tool.compiler.targets.meta.Javascript(s,c,l),p=x(e)?"__bundle":t.name,h=w[p];if(!h||h!==b){h=w[p]=s.createPackage();"__bundle"==p&&h.setEmbedAllJavascript(!0);o.addPackage(h)}u.externals&&d(u.externals);h.addJavascriptMeta(f);h.addClassname(e);b=h}))}));q=t.getAssetUris(i,c,s.getEnvironment());o.next=35;return c.saveDatabase();case 35:o.next=37;return a.getCldr("en");case 37:P=o.sent;o.next=40;return g.addLocale("C",P);case 40:o.next=42;return n._writeTranslations();case 42:L={};c.getAssetsForPaths(q).forEach((function(t){g.addAsset(t);L[t.getFilename()]=t.toString()}));if(!(a.getApplicationTypes().indexOf("browser")>-1)){o.next=50;break}s.addPreBootCode("qx.$$fontBootstrap={};\n");o.next=48;return n.__P_499_2(t,s,L);case 48:o.next=50;return n.__P_499_3(t,s,L,g);case 50:o.next=52;return n._writeApplication();case 52:n.__P_499_1=null;case 53:case"end":return o.stop()}}),o)})))()},__P_499_2:function(t,e,r){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=t.getAnalyser();a=t.getRequiredLibraries();c=e.getAppLibrary();s={};u=function(t){var e=t.getWebFonts();e&&e.forEach((function(e){s[e.getName()]={font:e,library:t}}))};a.forEach((function(t){var e=i.findLibrary(t);e!=c&&u(e)}));if(u){o.next=8;break}return o.abrupt("return");case 8:u(c);l=function(){var o=_asyncToGenerator(_regeneratorRuntime().mark((function o(i,a){var c,s,u,l;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.prev=0;if(0!==(c=a.getResources().filter((function(t){return r[t]}))).length){o.next=5;break}qx.tool.compiler.Console.print("qx.tool.compiler.webfonts.noResources",a.toString(),t.getName(),a.getResources().join(","));return o.abrupt("return");case 5:a.setResources(c);o.next=8;return a.generateForTarget(n);case 8:o.next=10;return a.generateForApplication(n,t);case 10:s=o.sent;for(u in s)e.addResource(u,s[u]);(l=a.getBootstrapCode(n,t))&&e.addPreBootCode(l);o.next=19;break;case 16:o.prev=16;o.t0=o.catch(0);qx.tool.compiler.Console.print("qx.tool.compiler.webfonts.error",a.toString(),o.t0.toString());case 19:case"end":return o.stop()}}),o,null,[[0,16]])})));return function(t,e){return o.apply(this,arguments)}}();f=0,p=Object.keys(s);case 11:if(!(f<p.length)){o.next=19;break}h=p[f];y=s[h],d=y.font,m=y.library;o.next=16;return l(m,d);case 16:f++;o.next=11;break;case 19:case"end":return o.stop()}}),o)})))()},__P_499_3:function(t,e,r,n){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f,p,h,y,d;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=t.getAnalyser();c=a.getResourceManager();s=function(t){var e,o=_createForOfIteratorHelper(c.getAssetsForPaths(t));try{for(o.s();!(e=o.n()).done;){var i=e.value;n.addAsset(i);r[i.getFilename()]=i.toString()}}catch(t){o.e(t)}finally{o.f()}};u=t.getFonts();l=_createForOfIteratorHelper(u);i.prev=5;p=_regeneratorRuntime().mark((function r(){var n,i,c,u,l,p,d,m,v,g,_,x,b,w,q,P,L,E,k,S;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=f.value;if(i=a.getFont(n)){r.next=4;break}return r.abrupt("return",{v:void 0});case 4:c=i.getApplicationFontData();for(h in c)e.addResource(h,c[h]);u=i.getFontFaces()||[];l=i.getCss()||[];p=[];d=[];m=_createForOfIteratorHelper(l);try{for(m.s();!(v=m.n()).done;)(g=v.value).match(/^https?:/)?p.push(g):d.push(g)}catch(t){m.e(t)}finally{m.f()}_=o.getFontTypes();x=!1;b=!1;if(_.length){w=_createForOfIteratorHelper(u);try{for(w.s();!(q=w.n()).done;)(P=q.value).paths=P.paths.filter((function(t){var e=t.lastIndexOf(".");if(e>-1){var r=t.substring(e+1);if(_.indexOf(r)>-1)return!0}t.match(/^https?:/)?b=!0:x=!0;return!1}))}catch(t){w.e(t)}finally{w.f()}}L=0==p.length&&!b;o.isPreferLocalFonts()&&(d.length>0||x)&&(L=!0);if(L){s(d);E=_createForOfIteratorHelper(u);try{for(E.s();!(k=E.n()).done;){S=k.value;s(S.paths)}}catch(t){E.e(t)}finally{E.f()}}(y=i.getBootstrapCode(o,t,L))&&e.addPreBootCode(y);case 21:case"end":return r.stop()}}),r)}));l.s();case 8:if((f=l.n()).done){i.next=15;break}return i.delegateYield(p(),"t0",10);case 10:if(!(d=i.t0)){i.next=13;break}return i.abrupt("return",d.v);case 13:i.next=8;break;case 15:i.next=20;break;case 17:i.prev=17;i.t1=i.catch(5);l.e(i.t1);case 20:i.prev=20;l.f();return i.finish(20);case 23:case"end":return i.stop()}}),i,null,[[5,17,20,23]])})))()},_writeTranslations:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getAppMeta();n=r.getAnalyser();if(!t.isUpdatePoFiles()){e.next=11;break}if("ignore"==(o=t.getLibraryPoPolicy())){e.next=9;break}e.next=7;return n.updateTranslations(r.getAppLibrary(),t.getLocales(),r.getLibraries(),"all"==o);case 7:e.next=11;break;case 9:e.next=11;return n.updateTranslations(r.getAppLibrary(),t.getLocales(),null,!1);case 11:e.next=13;return t._writeLocales();case 13:if(!t.getWriteAllTranslations()){e.next=18;break}e.next=16;return t._writeAllTranslations();case 16:e.next=20;break;case 18:e.next=20;return t._writeRequiredTranslations();case 20:case"end":return e.stop()}}),e)})))()},_transformLocales:function(t){return t?t.map((function(t){var e=(t=t.toLowerCase()).indexOf("_");e>-1&&(t=t.substring(0,e)+t.substring(e).toUpperCase());return t})):t},_writeLocales:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(t){var e=null;return function t(r){return o.getCldr(r).then((function(n){if(e)for(var o in n){var i=e[o];null==i&&(e[o]=n[o])}else e=n;var a=qx.tool.compiler.app.Cldr.getParentLocale(r);return a?t(a):e}))}(t)};r=t;n=t.getAppMeta();o=n.getAnalyser();i=n.getPackages()[0];c=r.getLocales().map(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return a(r);case 2:o=e.sent;(t.isI18nAsParts()?n.getLocalePackage(r):i).addLocale(r,o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());e.next=8;return qx.Promise.all(c);case 8:case"end":return e.stop()}}),e)})))()},_writeAllTranslations:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;n=t.getAppMeta();o=n.getAnalyser();i=n.getPackages()[0];a={};c=[];r.getLocales().forEach((function(e){var r=t.isI18nAsParts()?n.getLocalePackage(e):i;function s(t,e){return o.getTranslation(t,e).then((function(n){var o=t.getNamespace()+":"+e;a[o]=n;var i=n.getEntries();for(var c in i)r.addTranslationEntry(e,i[c])}))}n.getLibraries().forEach((function(t){t!==n.getAppLibrary()&&c.push(s(t,e))}));c.push(s(n.getAppLibrary(),e))}));e.next=9;return qx.Promise.all(c);case 9:case"end":return e.stop()}}),e)})))()},_writeRequiredTranslations:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t;n=t.getAppMeta();o=n.getAnalyser();i=o.getDatabase();a=n.getPackages()[0];c={};s=[];r.getLocales().forEach((function(e){var r=t.isI18nAsParts()?n.getLocalePackage(e):a;n.getLibraries().forEach((function(t){s.push(o.getTranslation(t,e).then((function(n){var o=t.getNamespace()+":"+e;c[o]=n;var i=n.getEntry("");i&&r.addTranslationEntry(e,i)})))}))}));e.next=10;return qx.Promise.all(s);case 10:n.getPackages().forEach((function(e){e.getClassnames().forEach((function(o){var a=i.classInfo[o];a.translations&&r.getLocales().forEach((function(r){var o=t.isI18nAsParts()?n.getLocalePackage(r):e;a.translations.forEach((function(t){var e,i=n.getAppLibrary().getNamespace()+":"+r,s=c[i];s&&(e=s.getEntry(t.msgid));var u=a.libraryName+":"+r;if(!e&&i!==u){var l=c[u];l&&(e=l.getEntry(t.msgid))}e&&o.addTranslationEntry(r,e)}))}))}))}));case 11:case"end":return e.stop()}}),e)})))()},_writeApplication:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a,c,s,u,l,f,p;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t;r.next=3;return t.fireEventAsync("writingApplication");case 3:o=t.getAppMeta();i=o.getApplication();a=o.getApplicationRoot();if(o.getAppLibrary()){r.next=9;break}qx.tool.compiler.Console.print("qx.tool.compiler.target.missingAppLibrary",i.getName());return r.abrupt("return");case 9:c=o.getBootMetaJs();s=o.getPackages(),u=0;case 11:if(!(u<s.length)){r.next=19;break}if((l=s[u]).isEmpty()){l.setNeedsWriteToDisk(!1);c.addEmbeddedJs(l.getJavascript())}r.next=16;return l.getJavascript().unwrap().writeToDisk();case 16:u++;r.next=11;break;case 19:r.next=21;return o.getBootMetaJs().unwrap().writeToDisk();case 21:r.next=23;return t._writeIndexHtml();case 23:if(n.isWriteCompileInfo()){r.next=27;break}r.next=26;return t.fireEventAsync("writtenApplication");case 26:return r.abrupt("return");case 27:f=o.getPackages()[0];p={appClass:i.getClassName(),libraries:o.getLibraries().map((function(t){return t.getNamespace()})),parts:[],resources:f.getAssets().map((function(t){return t.getFilename()})),locales:t.getLocales(),environment:o.getEnvironment(),urisBefore:o.getPreloads().urisBefore,cssBefore:o.getPreloads().cssBefore};i.getPartsDependencies().forEach((function(t){p.parts.push({classes:t.classes,include:t.include,exclude:t.exclude,minify:t.minify,name:t.name})}));r.next=32;return e.writeFileAsync(a+"/compile-info.json",JSON.stringify(p,null,2)+"\n",{encoding:"utf8"});case 32:r.next=34;return t.fireEventAsync("writtenApplication");case 34:case"end":return r.stop()}}),r)})))()},_writeIndexHtml:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u,l,f,p,h,y,d,m,v;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h=function(t){for(var e in p)t=t.replace(new RegExp("\\${".concat(e,"}"),"g"),p[e]);return t};o=t;i=t.getAppMeta();if((a=i.getApplication()).isBrowserApp()){n.next=6;break}return n.abrupt("return");case 6:if(t.isGenerateIndexHtml()){n.next=8;break}return n.abrupt("return");case 8:c=t.getApplicationRoot(a);s=(new Date).getTime();u=r.relative(r.join(o.getOutputDir(),o.getProjectDir(a)),o.getOutputDir())+"/";l="";if(t.isAddTimestampsToUrls()){f=r.join(i.getApplicationRoot(),"index.js");l="?"+e.statSync(f).mtimeMs}p={resourcePath:u+"resource/",targetPath:u,appPath:"",preBootJs:"",appTitle:a.getTitle()||"Qooxdoo Application",timeStamp:s,indexJsTimestamp:l};y='<!DOCTYPE html>\n<html>\n<head>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <title>${appTitle}</title>\n</head>\n<body>\n  \x3c!-- This index.html can be customised by creating a boot/index.html (do not include Qooxdoo application script tags like\n       the one below because they will be added automatically)\n    --\x3e\n${preBootJs}\n  <script type="text/javascript" src="${appPath}index.js${indexJsTimestamp}"><\/script>\n</body>\n</html>\n';d=a.getBootPath();m=null;if(!d){n.next=25;break}d=r.join(i.getAppLibrary().getRootDir(),a.getBootPath());n.next=21;return qx.tool.utils.files.Utils.safeStat(d);case 21:if(!(v=n.sent)||!v.isDirectory()){n.next=25;break}n.next=25;return qx.tool.utils.files.Utils.sync(d,c,function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n,o){var i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.endsWith(".html")){t.next=2;break}return t.abrupt("return",!0);case 2:t.next=4;return e.readFileAsync(n,"utf8");case 4:i=t.sent;if("index.html"==r.basename(n)){if(!i.match(/\$\{\s*preBootJs\s*\}/)){i=i.replace("</body>","\n${preBootJs}\n</body>");qx.tool.compiler.Console.print("qx.tool.compiler.target.missingPreBootJs",n)}if(!i.match(/\s*index.js\s*/)){i=i.replace("</body>",'\n  <script type="text/javascript" src="${appPath}index.js${indexJsTimestamp}"><\/script>\n</body>');qx.tool.compiler.Console.print("qx.tool.compiler.target.missingBootJs",n)}m=i}i=h(i);t.next=9;return e.writeFileAsync(o,i,"utf8");case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 25:if(m){n.next=29;break}m=y;n.next=29;return e.writeFileAsync(c+"index.html",h(m),{encoding:"utf8"});case 29:if(!a.getWriteIndexHtmlToRoot()){n.next=34;break}u="";p={resourcePath:"resource/",targetPath:"",appPath:o.getProjectDir(a)+"/",preBootJs:"",appTitle:a.getTitle()||"Qooxdoo Application",timeStamp:s,indexJsTimestamp:l};n.next=34;return e.writeFileAsync(o.getOutputDir()+"index.html",h(m),{encoding:"utf8"});case 34:case"end":return n.stop()}}),n)})))()},getAppMeta:function(){return this.__P_499_1}}});qx.tool.compiler.targets.Target.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.Target":{require:!0},"qx.tool.compiler.targets.meta.Uglify":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.targets.BuildTarget",{extend:qx.tool.compiler.targets.Target,properties:{minify:{init:"mangle",check:["off","minify","mangle","beautify"],nullable:!1},saveUnminified:{init:!1,check:"Boolean",nullable:!1},saveSourceInMap:{init:!1,check:"Boolean",nullable:!1},deployDir:{init:null,nullable:!0,check:"String",transform:"_transformOutputDir"},deployMap:{init:!1,check:"Boolean",nullable:!1},defaultEnvironment:{init:{"qx.debug":!1},refine:!0}},events:{minifyingApplication:"qx.event.type.Data",minifiedApplication:"qx.event.type.Data"},members:{_writeApplication:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.getAppMeta()).setSourceUri(".");e.next=4;return r.syncAssets();case 4:n="off"!=r.getTarget().getMinify();o=r.getBootMetaJs();i=r.getParts()[0];r.getPackages().forEach((function(t){t.setEmbedAllJavascript(!0);if(i.hasPackage(t)){t.setNeedsWriteToDisk(!1);o.addEmbeddedJs(t.getJavascript())}n&&t.isNeedsWriteToDisk()&&t.getJavascript().wrap(new qx.tool.compiler.targets.meta.Uglify(r,t.getJavascript()))}));n&&r.getBootMetaJs().wrap(new qx.tool.compiler.targets.meta.Uglify(r,o));e.next=11;return qx.tool.compiler.targets.BuildTarget.superclass.prototype._writeApplication.call(t);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))()},toString:function(){return"Build Target: "+this.getOutputDir()}}});qx.tool.compiler.targets.BuildTarget.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.Target":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.targets.SourceTarget",{extend:qx.tool.compiler.targets.Target,properties:{copyResources:{check:"Boolean",init:!0}},members:{_writeApplication:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.getCopyResources()){e.next=4;break}r=t.getAppMeta();e.next=4;return r.syncAssets();case 4:e.next=6;return qx.tool.compiler.targets.SourceTarget.superclass.prototype._writeApplication.call(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},toString:function(){return"Source Target: "+this.getOutputDir()}}});qx.tool.compiler.targets.SourceTarget.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){_defineProperty(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Utils":{},"qx.tool.utils.Json":{},"qx.tool.compiler.MetaExtraction":{},"qx.tool.utils.files.Utils":{},"qx.lang.Object":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath");qx.Class.define("qx.tool.compiler.MetaDatabase",{extend:qx.core.Object,construct:function(){qx.core.Object.constructor.call(this);this.__P_481_0={};this.__P_481_1={};this.__P_481_2={};this.__P_481_3={};this.__P_481_4={}},properties:{rootDir:{init:"compiled/meta",check:"String"}},members:{__P_481_0:null,__P_481_3:null,__P_481_4:null,save:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Utils.makeDirs(t.getRootDir());case 2:t.__P_481_4.classnames=Object.keys(t.__P_481_0);e.next=5;return qx.tool.utils.Json.saveJsonAsync(t.getRootDir()+"/db.json",t.__P_481_4);case 5:case"end":return e.stop()}}),e)})))()},getDatabase:function(){return this.__P_481_4},load:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.getRootDir()+"/db.json";if(e.existsSync(o)){n.next=3;break}return n.abrupt("return");case 3:t.__P_481_0={};t.__P_481_3={};n.next=7;return qx.tool.utils.Json.loadJsonAsync(o);case 7:i=n.sent;t.__P_481_4=i;a=_createForOfIteratorHelper(i.classnames);n.prev=10;a.s();case 12:if((c=a.n()).done){n.next=27;break}s=c.value;u=t.getRootDir()+"/"+s.replace(/\./g,"/")+".json";if(!e.existsSync(u)){n.next=25;break}n.next=18;return qx.tool.utils.Utils.makeParentDir(u);case 18:l=new qx.tool.compiler.MetaExtraction(t.getRootDir());n.next=21;return l.loadMeta(u);case 21:t.__P_481_0[s]=l;f=l.getMetaData().classFilename;f=r.resolve(r.join(t.getRootDir(),f));t.__P_481_1[f]=l;case 25:n.next=12;break;case 27:n.next=32;break;case 29:n.prev=29;n.t0=n.catch(10);a.e(n.t0);case 32:n.prev=32;a.f();return n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[10,29,32,35]])})))()},resolveType:function(t,e){if(!e)return e;var r={string:"string",number:"number",boolean:"boolean",object:"Record<any, any>",array:"Array<any>",function:"((...args: any[]) => any)",map:"Map<any, any>",set:"Set<any>",regexp:"RegExp",date:"Date",error:"Error",promise:"Promise<any>"};if(r[e.toLowerCase()])return r[e.toLowerCase()];var n=t.className.lastIndexOf("."),o=n>-1?t.className.substring(0,n):null;return o&&(n=e.indexOf("."))<0&&this.__P_481_0[o+"."+e]?o+"."+e:e},addFile:function(t,e){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return qx.tool.utils.files.Utils.correctCase(t);case 2:t=o.sent;t=r.resolve(t);i=n.__P_481_1[t];o.t0=i&&!e;if(!o.t0){o.next=10;break}o.next=9;return i.isOutOfDate();case 9:o.t0=!o.sent;case 10:if(!o.t0){o.next=12;break}return o.abrupt("return");case 12:i=new qx.tool.compiler.MetaExtraction(n.getRootDir());o.next=15;return i.parse(t);case 15:if(void 0!==(a=o.sent).className){o.next=18;break}return o.abrupt("return");case 18:n.__P_481_0[a.className]=i;n.__P_481_1[t]=i;n.__P_481_3[a.className]=!0;case 21:case"end":return o.stop()}}),o)})))()},getClassnames:function(){return Object.keys(this.__P_481_0)},getMetaData:function(t){var e;return(null===(e=this.__P_481_0[t])||void 0===e?void 0:e.getMetaData())||null},reparseAll:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c,s,u,l,f,p,h,y,d,m;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object.keys(t.__P_481_3);t.__P_481_3={};n=t.__P_481_5();for(o=0;o<r.length;o++){i=r[o];a=n[i];c=_createForOfIteratorHelper(a.values());try{for(c.s();!(s=c.n()).done;){u=s.value;r.includes(u)||r.push(u)}}catch(t){c.e(t)}finally{c.f()}}l=0,f=r;case 5:if(!(l<f.length)){e.next=21;break}p=f[l];h=t.__P_481_0[p];y=h.getMetaData();d={resolveType:t.resolveType.bind(t,y)};h.fixupJsDoc(d);t.__P_481_6(y);t.__P_481_7(y,"members");t.__P_481_7(y,"statics");t.__P_481_7(y,"properties");m=t.getRootDir()+"/"+p.replace(/\./g,"/")+".json";e.next=18;return h.saveMeta(m);case 18:l++;e.next=5;break;case 21:case"end":return e.stop()}}),e)})))()},__P_481_5:function(){var t={},e=function(e,r){var n;null!==(n=t[e])&&void 0!==n||(t[e]=new Set);t[e].add(r)};for(var r in this.__P_481_0){var n,o,i;null!==(n=t[r])&&void 0!==n||(t[r]=new Set);var a=this.__P_481_0[r].getMetaData();a.superClass&&e(a.superClass,r);var c,s=_createForOfIteratorHelper(null!==(o=a.mixins)&&void 0!==o?o:[]);try{for(s.s();!(c=s.n()).done;){e(c.value,r)}}catch(t){s.e(t)}finally{s.f()}var u,l=_createForOfIteratorHelper(null!==(i=a.interfaces)&&void 0!==i?i:[]);try{for(l.s();!(u=l.n()).done;){e(u.value,r)}}catch(t){l.e(t)}finally{l.f()}}return t},__P_481_8:function(t,e,r){if(!r){var n;if(null===(n=t.members)||void 0===n?void 0:n[e])return{overriddenFrom:t.className}}if(t.mixins){var o,i=_createForOfIteratorHelper(t.mixins);try{for(i.s();!(o=i.n()).done;){var a=o.value,c=this.__P_481_0[a];if(c){var s;if(null===(s=c.getMetaData().members)||void 0===s?void 0:s[e])return{mixin:a}}}}catch(t){i.e(t)}finally{i.f()}}if(!t.superClass)return null;var u=this.__P_481_0[t.superClass];return u?this.__P_481_8(u.getMetaData(),e,!1):null},__P_481_9:function(t,e,r){for(var n,o,i=function(t){var e,r;return[].concat(_toConsumableArray(null!==(e=t.mixins)&&void 0!==e?e:[]),_toConsumableArray(t.superClass?[t.superClass]:[]),_toConsumableArray(null!==(r=t.interfaces)&&void 0!==r?r:[]))},a=[],c=i(t);c.length;){var s=this.__P_481_0[c.shift()];if(s){n=s.getMetaData(),o=void 0,null!==(o=n[e])&&void 0!==o&&o[r]&&a.push(n.className);c.push.apply(c,_toConsumableArray(i(s.getMetaData())))}}return a},__P_481_6:function(t){if(t.members){if(t.abstract){var e,r,n=_createForOfIteratorHelper(null!==(e=t.interfaces)&&void 0!==e?e:[]);try{for(n.s();!(r=n.n()).done;){var o,i=r.value,a=null===(o=this.__P_481_0[i])||void 0===o?void 0:o.getMetaData().members;for(var c in null!=a?a:{}){var s=a[c];t.members[c]||(t.members[c]=_objectSpread(_objectSpread({},s),{},{abstract:!0,fromInterface:i}))}}}catch(t){n.e(t)}finally{n.f()}}for(var u in t.members){var l=t.members[u],f=this.__P_481_8(t,u,!0);if(f)for(var p in f)l[p]=f[p]}}},__P_481_7:function(t,e){var r,n;null!==(r=t[e])&&void 0!==r||(t[e]={});var o,i=_createForOfIteratorHelper(null!==(n=t.mixins)&&void 0!==n?n:[]);try{for(i.s();!(o=i.n()).done;){var a,c=o.value,s=null===(a=this.__P_481_0[c])||void 0===a?void 0:a.getMetaData();for(var u in null!==(l=null==s?void 0:s[e])&&void 0!==l?l:{}){var l,f=this.__P_481_9(t,e,u),p=qx.lang.Object.clone(s[e][u]);p.mixin=c;p.appearsIn=f;t[e][u]=p}}}catch(t){i.e(t)}finally{i.f()}for(var h in null!==(y=t[e])&&void 0!==y?y:{}){var y;t[e][h].appearsIn=this.__P_481_9(t,e,h)}},getHierarchyFlat:function(t){for(var e="string"==typeof t?this.getMetaData(t):t,r={className:e.className,superClasses:{},mixins:{},interfaces:{}},n=[e];n.length;){var o=n.shift();if(o.superClass){var i=this.getMetaData(o.superClass);if(i){r.superClasses[i.className]=i;n.push(i)}}if(o.mixins){var a,c=_createForOfIteratorHelper(o.mixins);try{for(c.s();!(a=c.n()).done;){var s=a.value,u=this.getMetaData(s);if(u){r.mixins[u.className]=u;n.push(u)}}}catch(t){c.e(t)}finally{c.f()}}if(o.interfaces){var l,f=_createForOfIteratorHelper(o.interfaces);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=this.getMetaData(p);if(h){r.interfaces[h.className]=h;n.push(h)}}}catch(t){f.e(t)}finally{f.f()}}}return r}}});qx.tool.compiler.MetaDatabase.$$dbClassInfo=t}();function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.Promise":{},"qx.tool.utils.Utils":{},"qx.lang.String":{},"qx.tool.compiler.jsdoc.Parser":{},"qx.lang.Type":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=require("fs");(0,require("util").promisify)(r.readFile);qx.Class.define("qx.tool.compiler.targets.TypeScriptWriter",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_500_0=t},properties:{outputTo:{init:"qooxdoo.d.ts",check:"String"}},members:{__P_500_0:null,__P_500_1:null,__P_500_2:null,__P_500_3:null,__P_500_4:null,__P_500_5:"    ",open:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=new Date;t.__P_500_1=r.createWriteStream(t.getOutputTo());t.__P_500_2=new qx.Promise;t.__P_500_1.on("close",(function(){return t.__P_500_2.resolve()}));t.write("// Generated declaration file at ".concat(o,"\n"));i=e.join(qx.tool.utils.Utils.getTemplateDir(),"TypeScriptWriter-base_declaration.d.ts");n.next=8;return r.promises.readFile(i,"utf8");case 8:a=n.sent;t.write(a+"\n");case 10:case"end":return n.stop()}}),n)})))()},close:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return t.__P_500_1.end();case 2:t.__P_500_1=null;n.next=5;return t.__P_500_2;case 5:t.__P_500_2=null;o=e.join(process.cwd(),"source","global.d.ts");r.existsSync(o)||r.writeFileSync(o,["// the reference directive enables tooling to discover the generated type definitions",'/// <reference path="../'.concat(t.getOutputTo(),'" />'),"","// add custom global declarations here"].join("\n"));case 8:case"end":return n.stop()}}),n)})))()},process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c,s,u,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.open();case 2:(r=t.__P_500_0.getClassnames()).sort();n=null;o=!1;i=_createForOfIteratorHelper(r);e.prev=7;i.s();case 9:if((a=i.n()).done){e.next=20;break}c=a.value;s=t.__P_500_0.getMetaData(c);u=c.lastIndexOf(".");l="";u>-1&&(l=c.substring(0,u));if(n!=l){n&&t.write("}\n\n");if(l){t.write("declare module "+l+" {\n");o=!0}else o=!1;n=l}else t.write("\n");e.next=18;return t.writeClass(s,o);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22;e.t0=e.catch(7);i.e(e.t0);case 25:e.prev=25;i.f();return e.finish(25);case 28:n&&t.write("}\n");e.next=31;return t.close();case 31:case"end":return e.stop()}}),e,null,[[7,22,25,28]])})))()},write:function(t){this.__P_500_1.write(t)},writeClass:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u,l;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.className){n.next=2;break}return n.abrupt("return");case 2:r.__P_500_3=t;r.__P_500_4=r.__P_500_0.getHierarchyFlat(t);i="";if(t.superClass&&"Object"!==t.superClass&&"Array"!==t.superClass&&"Error"!==t.superClass)if("interface"===t.type&&Array.isArray(t.superClass)){(a=t.superClass.map((function(t){return r.getType(t)}))).filter((function(t){return"any"!=t}));a.length&&(i=" extends "+a.join(", "))}else"any"!=(c=r.getType(t.superClass))&&(i=" extends "+c);s="class ";"interface"===t.type?s="interface ":t.abstract&&(s="abstract "+s);e||(s="declare "+s);r.__P_500_6(null===(o=t.jsdoc)||void 0===o?void 0:o.raw,t.location);r.write("  // "+t.className+"\n");u=t.className;(l=u.lastIndexOf("."))>-1&&(u=u.substring(l+1));r.write("  "+s+u+i);t.interfaces&&t.interfaces.length&&r.write(" implements "+t.interfaces.map((function(t){return r.getType(t)})).join(", "));r.write(" {\n");"class"==t.type&&t.construct&&r.writeConstructor(t.construct);r.writeClassBody(t);r.write("\n  }\n");r.__P_500_3=null;r.__P_500_4=null;case 22:case"end":return n.stop()}}),n)})))()},writeClassBody:function(t){t.isSingleton&&this.writeMembers({getInstance:{type:"function",access:"public",returnType:t.className,appearsIn:[]}},t,!0);"interface"!==t.type&&this.writeMembers(t.statics,t,!0);this.writeMembers(t.members,t);t.properties&&this.writeProperties(t)},writeProperties:function(t){var e=[],r=[];for(var n in t.properties){var o,i,a,c,s;e.push(n);var u=t.properties[n];if(null!==(o=u.appearsIn)&&void 0!==o&&o.length){var l=u.appearsIn.slice(-1)[0],f=this.__P_500_0.getMetaData(l).properties[n];f.jsdoc=u.jsdoc;u=f}var p=qx.lang.String.firstUp(n),h=null!==(i=null===(a=u.json)||void 0===a?void 0:a.check)&&void 0!==i?i:"any";Array.isArray(h)?h=JSON.stringify(h).replace(/,/g,"|").slice(1,-1):"string"==typeof h&&h.match(/^[a-z\d\s.\|\<\>\&\(\)\[\]]+$/i)&&"[[ ObjectMethod Function ]]"!==h||(h="any");r.push(h);if(null===(c=u.json)||void 0===c||!c.group){this.__P_500_7("get"+p,{location:u.location,returnType:h,jsdoc:{raw:["Gets the ".concat(n," property")]},override:u.override});"string"==typeof h&&"boolean"===h.toLowerCase()&&this.__P_500_7("is"+p,{location:u.location,returnType:h,jsdoc:{raw:["Gets the ".concat(n," property")]},override:u.override})}this.__P_500_7("set"+p,{location:u.location,parameters:[{name:"value",type:h}],returnType:h,jsdoc:{raw:["Sets the ".concat(n," property")]},override:u.override});this.__P_500_7("reset"+p,{location:u.location,jsdoc:{raw:["Resets the ".concat(n," property")]},override:u.override});if(null!==(s=u.json)&&void 0!==s&&s.async){this.__P_500_7("get"+p+"Async",{location:u.location,returnType:"Promise<".concat(h,">"),jsdoc:{raw:["Gets the ".concat(n," property, asynchronously")]},override:u.override});"string"==typeof h&&"boolean"===h.toLowerCase()&&this.__P_500_7("is"+p+"Async",{location:u.location,returnType:"Promise<".concat(h,">"),jsdoc:{raw:["Gets the ".concat(n," property, asynchronously")]},override:u.override});this.__P_500_7("set"+p+"Async",{location:u.location,parameters:[{name:"value",type:h}],returnType:"Promise<".concat(h,">"),jsdoc:{raw:["Sets the ".concat(n," property")]},override:u.override})}}if(e.length){for(var y=this.__P_500_8(t),d=!!this.__P_500_0.getMetaData(t.superClass),m="{",v=0;v<Math.min(e.length,r.length);v++)m+="\n".concat(this.__P_500_5,"  ").concat(e[v],"?: ").concat(r[v],";");m+="\n".concat(this.__P_500_5,"}");this.__P_500_7("set",{parameters:[{name:"data",type:m+(d?" & Parameters<globalThis.".concat(t.superClass,'["set"]>[0]'):"")}],returnType:"this",jsdoc:{raw:["Sets several properties at once"]},override:y});this.__P_500_7("get",{parameters:[{name:"prop",type:e.map((function(t){return'"'.concat(t,'"')})).join(" | ")+(d?" | Parameters<globalThis.".concat(t.superClass,'["get"]>[0]'):"")}],returnType:"this",jsdoc:{raw:["Gets a property by name"]},override:y})}},__P_500_8:function(t){var e,r=this;if(!(null===(e=arguments[1])||void 0===e||e)){var n;if(Object.keys(null!==(n=null==t?void 0:t.properties)&&void 0!==n?n:{}).length)return!0;if(null!=t&&t.mixins)return t.mixins.some((function(t){var e=r.__P_500_0.getMetaData(t);return r.__P_500_8(e,!1)}))}if(null!=t&&t.superClass){var o=this.__P_500_0.getMetaData(t.superClass);return this.__P_500_8(o,!1)}return!1},getType:function(t){var e=this;if(Array.isArray(t))return t.map((function(t){return e.getType(t)})).join("|");if(!t||"[[ Function ]]"==t)return"any";if("object"==_typeof(t))if("type"in t){var r,n=null!==(r=t.dimensions)&&void 0!==r?r:1;t=t.type+"[]".repeat(n-1)}else t=this.getType(t.name);if("Array"===t)return"any[]";for(var o=Object.keys(qx.tool.compiler.targets.TypeScriptWriter.TYPE_MAPPINGS),i=new RegExp("(^|[^.a-zA-Z0-9])(".concat(o.join("|").replace("*","\\*"),")($|[^.a-zA-Z0-9<])"));t.match(i);)t=t.replace(i,(function(t,e,r,n){return"".concat(e).concat(qx.tool.compiler.targets.TypeScriptWriter.TYPE_MAPPINGS[r]).concat(n)}));t=t.replace(/\?.*$/,"");return this.__P_500_0.getMetaData(t)&&-1!=t.indexOf(".")||this.__P_500_0.getMetaData(t.replace(/\[\]/g,""))&&-1!=t.replace(/\[\]/g,"").indexOf(".")?"globalThis."+t:t=(t=(t=t.replace("Promise<","globalThis.Promise<")).replace(/(^|[^.a-zA-Z])(var|\*)([^.a-zA-Z]|$)/g,"$1any$3")).replace(/(?<!qx\.data\.)Array<([^>]+)>/g,"($1)[]")},writeConstructor:function(t){this.write(this.__P_500_5+"constructor ("+this.__P_500_9(t.params)+");\n")},__P_500_7:function(t,e){var r,n="";if("protected"===e.access||"public"===e.access)n+=e.access+" ";else if("private"===e.access)return;e.static&&(n+="static ");e.abstract&&(n+="abstract ");e.override&&(n+="override ");n+=this.__P_500_10(t)+"(";e.parameters&&(n+=this.__P_500_9(e.parameters));n+=")";var o="void";e.returnType&&(o=this.getType(e.returnType));n+=": "+o;this.__P_500_6(null===(r=e.jsdoc)||void 0===r?void 0:r.raw,e.location);this.write(this.__P_500_5+"// ".concat(this.__P_500_3.className).concat(e.static?"#":".").concat(t,"\n"));this.write(this.__P_500_5+n+";\n")},__P_500_11:function(t,e){var r,n="";if("protected"===e.access||"public"===e.access)n+=e.access+" ";else if("private"===e.access)return;e.static&&(n+="static ");e.abstract&&(n+="abstract ");e.override&&(n+="override ");n+=this.__P_500_10(t)+": "+e.type;this.__P_500_6(null===(r=e.jsdoc)||void 0===r?void 0:r.raw,e.location);this.write(this.__P_500_5+"// ".concat(this.__P_500_3.className).concat(e.static?"#":".").concat(t,"\n"));this.write(this.__P_500_5+n+";\n")},__P_500_6:function(t,r){var n,o=this;(t=(null!==(n=t)&&void 0!==n?n:[]).map((function(t){if((t=t.replace(/\{@link #([^}]+)\}/g,"{@link ".concat(o.__P_500_3.className,".$1}"))).match(/@param|@return/)){var e=qx.tool.compiler.jsdoc.Parser.getTypeExpression(t);e&&(t=t.slice(0,e.start-1).trim()+" "+t.slice(e.end+1,t.length).trim());if(t.trim().match(/^\*\s*(@param|@return(s?))$/))return""}return t.trim()})).filter((function(t){return t.trim().length}))).length&&t.push("*");var i=e.join(process.cwd(),this.__P_500_0.getRootDir(),this.__P_500_3.classFilename);this.write("".concat(this.__P_500_5,"/**\n")+[].concat(_toConsumableArray(t),["* [source code](".concat(i).concat("",")"),"*/\n"]).map((function(t){return"".concat(o.__P_500_5," ").concat(t)})).join("\n"))},__P_500_9:function(t){var e=this,r=!1;return t.map((function(t){var n=t.name,o=t.optional;"varargs"==t.name&&(o=!0);if(o||r){n+="?";r=!0}n+=": ";var i="any";if(t.type){var a=null;qx.lang.Type.isArray(t.type)?1==t.type.length&&(a=t.type[0]):a=t.type;if(a){i=e.getType(a);a.dimensions&&(i+="[]")}}return n+=i})).join(", ")},writeMembers:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&Object.keys(t).length){var o=n?"statics":"members";for(var i in t){var a,c,s=Object.getOwnPropertyDescriptor(t,i).value;if("get"!==i&&"set"!==i||null===(a=e.mixins)||void 0===a||!a.includes("qx.core.MProperty")){if(null!==(c=s.appearsIn)&&void 0!==c&&c.length){var u=s.appearsIn.slice(-1)[0],l=this.__P_500_0.getMetaData(u)[o][i];l.jsdoc=s.jsdoc;s=l}if("function"===s.type){var f;this.__P_500_7(i,{location:s.location,access:"interface"!==e.type&&s.access,abstract:"interface"!==e.type&&s.abstract,async:s.async,static:n,parameters:s.params,returnType:"object"===_typeof(s.returnType)&&"type"in s.returnType?s.returnType.type:s.returnType,jsdoc:null!==(f=s.jsdoc)&&void 0!==f?f:{},override:s.override})}else{var p,h,y,d,m="any";if(null!==(p=s.jsdoc)&&void 0!==p&&p["@return"]||null!==(h=s.jsdoc)&&void 0!==h&&h["@param"]){var v,g,_,x=this.getType(null===(v=s.jsdoc)||void 0===v||null===(v=v["@return"])||void 0===v?void 0:v[0].type),b=null!==(g=null===(_=s.jsdoc["@param"])||void 0===_?void 0:_.map((function(t){return"".concat(t.paramName).concat(t.optional?"?":"",": ").concat(r.getType(t.type))})))&&void 0!==g?g:[];m="((".concat(b.join(", "),") => ").concat(x,")")}else null!==(y=s.jsdoc)&&void 0!==y&&y["@type"]&&(m=this.getType(s.jsdoc["@type"][0].type));this.__P_500_11(i,{location:s.location,access:"interface"!==e.type&&s.access,abstract:"interface"!==e.type&&s.abstract,static:n,type:m,jsdoc:null!==(d=s.jsdoc)&&void 0!==d?d:{},override:s.override})}}}}},__P_500_10:function(t){return t.match(/^[$a-zA-Z_][$a-zA-Z0-9_]*$/)?t:'"'+t+'"'}},statics:{TYPE_MAPPINGS:{Event:"qx.event.type.Event",LocalizedString:"qx.locale.LocalizedString",LayoutItem:"qx.ui.core.LayoutItem",Widget:"qx.ui.core.Widget",Decorator:"qx.ui.decoration.Decorator",MWidgetController:"qx.ui.list.core.MWidgetController",AbstractTreeItem:"qx.ui.tree.core.AbstractTreeItem",Axis:"qx.ui.virtual.core.Axis",ILayer:"qx.ui.virtual.core.ILayer",Pane:"qx.ui.virtual.core.Pane",IDesktop:"qx.ui.window.IDesktop",IWindowManager:"qx.ui.window.IWindowManager",DateFormat:"qx.util.format.DateFormat",Class:"qx.Class",Interface:"qx.Interface",Mixin:"qx.Mixin",Theme:"qx.Theme",Boolean:"boolean",Number:"number",String:"string",document:"Document",Stylesheet:"StyleSheet",Element:"HTMLElement",Object:"object",Map:"Record<string, any>",Iterable:"Iterable<any>",Iterator:"Iterator<any>",Array:"Array<any>",RegEx:"RegExp",var:"any","*":"any",arguments:"any"}}});qx.tool.compiler.targets.TypeScriptWriter.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.Promise":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.Debounce",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.__P_512_0=t;e&&this.setTimeout(e)},properties:{timeout:{init:250,nullable:!1,check:"Integer",event:"changeTimeout"},repeatedTrigger:{init:"ignored",nullable:!1,check:["ignore","restart","repeat","queue"],apply:"_applyRepeatedTrigger",event:"changeRepeatedTrgger"}},members:{__P_512_0:null,__P_512_1:!1,_applyQueueRepeats:function(t){!t&&this.__P_512_1&&(this.__P_512_1=!1)},run:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.__P_512_2)){e.next=7;break}if("restart"==(n=t.getRepeatedTrigger())){if(t.__P_512_3){t._cancelTimer();t._startTimer()}}else"queue"!=n&&"immediate"!=n||(t.__P_512_1=!0);e.next=6;return r;case 6:case 11:return e.abrupt("return",e.sent);case 7:t._startTimer();r=t.__P_512_2=new qx.Promise;e.next=11;return r;case 12:case"end":return e.stop()}}),e)})))()},_startTimer:function(){var t=this;this.__P_512_3=setTimeout((function(){return t._onTimeout()}),this.getTimeout())},_cancelTimer:function(){if(this.__P_512_3){clearTimeout(this.__P_512_3);this.__P_512_3=null}},_onTimeout:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.__P_512_3=null;r=t.__P_512_2;e.prev=2;n=null;case 4:0;e.next=7;return t._runImpl();case 7:n=e.sent;if(!t.__P_512_1){e.next=14;break}if("queue"!=t.getRepeatedTrigger()){e.next=12;break}t._startTimer();return e.abrupt("return");case 12:e.next=15;break;case 14:return e.abrupt("break",17);case 15:e.next=4;break;case 17:t.__P_512_2=null;r.resolve(n);e.next=24;break;case 21:e.prev=21;e.t0=e.catch(2);r.reject(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})))()},_runImpl:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.__P_512_0();case 2:case"end":return e.stop()}}),e)})))()}}});qx.tool.utils.Debounce.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.Analyser":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath");qx.Class.define("qx.tool.compiler.makers.Maker",{extend:qx.core.Object,type:"abstract",construct:function(){qx.core.Object.constructor.call(this);this._compiledClasses={}},properties:{dbFilename:{init:null,nullable:!0,check:"String",apply:"__P_492_0"},environment:{init:null,nullable:!0},noErase:{init:!1,check:"Boolean"},success:{init:null,nullable:!0,check:"Boolean"},hasWarnings:{init:null,nullable:!0,check:"Boolean"}},events:{making:"qx.event.type.Event",made:"qx.event.type.Event",writingApplications:"qx.event.type.Event",writingApplication:"qx.event.type.Data",writtenApplication:"qx.event.type.Data",writtenApplications:"qx.event.type.Event"},members:{_analyser:null,_compiledClasses:null,make:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("No implementation for "+t.classname+".make");case 1:case"end":return e.stop()}}),e)})))()},getOutputDir:function(){throw new Error("No implementation for "+this.classname+".getOutputDir")},eraseOutputDir:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e.resolve(t.getOutputDir());if(!((o=e.resolve(process.cwd())).startsWith(n)&&n.length<=o.length)){r.next=4;break}throw new Error("Output directory ("+n+") is a parent directory of PWD");case 4:r.next=6;return qx.tool.utils.files.Utils.deleteRecursive(t.getOutputDir());case 6:case"end":return r.stop()}}),r)})))()},__P_492_0:function(t,e){if(this._analyser)throw new Error("Cannot change the database filename once an Analyser has been created")},getAnalyser:function(){var t=this;if(this._analyser)return this._analyser;this._analyser=this._createAnalyser();this._analyser.addListener("compiledClass",(function(e){var r=e.getData();t._compiledClasses[r.classFile.getClassName()]=!0}));return this._analyser},getRecentlyCompiledClasses:function(t){var e=this._compiledClasses;t&&(this._compiledClasses={});return e},_createAnalyser:function(){var t=this._analyser=new qx.tool.compiler.Analyser(e.join(this.getOutputDir(),this.getDbFilename()||"db.json"));t.setOutputDir(this.getOutputDir());return t}}});qx.tool.compiler.makers.Maker.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.makers.Maker":{require:!0},"qx.tool.compiler.targets.Target":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.makers.AbstractAppMaker",{extend:qx.tool.compiler.makers.Maker,type:"abstract",properties:{target:{nullable:!1,check:"qx.tool.compiler.targets.Target",apply:"__P_490_0"},locales:{nullable:!1,init:["en"],apply:"_applyLocales"},writeAllTranslations:{init:!1,nullable:!1,check:"Boolean",apply:"__P_490_1"}},members:{getOutputDir:function(){return this.getTarget().getOutputDir()},__P_490_0:function(t,e){this._analyser&&this._analyser.setOutputDir(t?t.getOutputDir():null);t&&t.set({locales:this.getLocales(),writeAllTranslations:this.getWriteAllTranslations()})},__P_490_1:function(t,e){this.getTarget()&&this.getTarget().setWriteAllTranslations(t)},_applyLocales:function(t,e){this.getTarget()&&this.getTarget().setLocales(t)}}});qx.tool.compiler.makers.AbstractAppMaker.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.LogManager":{usage:"dynamic",require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.makers.AbstractAppMaker":{construct:!0,require:!0},"qx.tool.compiler.app.Application":{construct:!0},"qx.tool.utils.Values":{},"qx.tool.compiler.ClassFile":{},"qx.tool.config.Utils":{},"qx.tool.utils.Utils":{},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.LogManager.createLog("analyser");qx.Class.define("qx.tool.compiler.makers.AppMaker",{extend:qx.tool.compiler.makers.AbstractAppMaker,construct:function(t,e){qx.tool.compiler.makers.AbstractAppMaker.constructor.call(this);this.__P_491_0=[];if(t){var r=new qx.tool.compiler.app.Application(t);e&&r.setTheme(e);this.addApplication(r)}},members:{__P_491_0:null,addApplication:function(t){this.__P_491_0.push(t)},getApplications:function(){return this.__P_491_0},make:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.getAnalyser();o=t.getTarget();r.next=4;return t.fireEventAsync("making");case 4:t.setSuccess(null);t.setHasWarnings(null);i=!0;a=!1;c=qx.tool.utils.Values.merge({},qx.tool.compiler.ClassFile.ENVIRONMENT_CONSTANTS,{"qx.compiler":!0,"qx.compiler.version":qx.tool.config.Utils.getCompilerVersion()},t.getEnvironment(),o.getDefaultEnvironment(),o.getEnvironment());if(s=o.getPreserveEnvironment()){u={};s.forEach((function(t){return u[t]=!0}));s=u}else s={};l={};t.getApplications().forEach((function(t){l[t.toHashCode()]=qx.tool.utils.Values.merge({},c,t.getCalculatedEnvironment())}));f={};t.getApplications().forEach((function(t){var e=l[t.toHashCode()];Object.keys(e).forEach((function(t){f[t]?f[t].value!==e[t]&&(f[t].same=!1):f[t]={value:e[t],same:!0}}))}));t.getApplications().forEach((function(t){var e=l[t.toHashCode()];Object.keys(f).forEach((function(t){s[t]?e[t]=c[t]:f[t].same?delete e[t]:void 0===e[t]&&(e[t]=c[t])}))}));Object.keys(f).forEach((function(t){!s[t]&&f[t].same?c[t]=f[t].value:delete c[t]}));r.next=19;return n.open();case 19:n.setEnvironment(c);if(t.isNoErase()||!n.isContextChanged()){r.next=28;break}e.log("enviroment changed - delete output dir");r.next=24;return t.eraseOutputDir();case 24:r.next=26;return qx.tool.utils.Utils.makeParentDir(t.getOutputDir());case 26:r.next=28;return n.resetDatabase();case 28:r.next=30;return qx.tool.utils.Utils.promisifyThis(n.initialScan,n);case 30:r.next=32;return n.updateEnvironmentData();case 32:o.setAnalyser(n);t.__P_491_0.forEach((function(t){return t.setAnalyser(n)}));r.next=36;return o.open();case 36:p=_createForOfIteratorHelper(n.getLibraries());r.prev=37;p.s();case 39:if((h=p.n()).done){r.next=55;break}y=h.value;d=y.getFontsData();r.t0=_regeneratorRuntime().keys(d);case 43:if((r.t1=r.t0()).done){r.next=53;break}m=r.t1.value;v=d[m];if(g=n.getFont(m)){r.next=51;break}g=n.getFont(m,!0);r.next=51;return g.updateFromManifest(v,y);case 51:r.next=43;break;case 53:r.next=39;break;case 55:r.next=60;break;case 57:r.prev=57;r.t2=r.catch(37);p.e(r.t2);case 60:r.prev=60;p.f();return r.finish(60);case 63:t.__P_491_0.forEach((function(t){t.getRequiredClasses().forEach((function(t){n.addClass(t)}));t.getTheme()&&n.addClass(t.getTheme())}));r.next=66;return n.analyseClasses();case 66:r.next=68;return n.saveDatabase();case 68:r.next=70;return t.fireEventAsync("writingApplications");case 70:_=t.getRecentlyCompiledClasses(!0);x=n.getDatabase();r.next=74;return t.__P_491_0.filter(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r,n,o,i,a,c;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e.getDependencies())&&r.length){t.next=3;break}return t.abrupt("return",!0);case 3:n=r.some((function(t){return Boolean(_[t])}));o=e.getLocalModules();t.t0=_regeneratorRuntime().keys(o);case 6:if((t.t1=t.t0()).done){t.next=14;break}i=t.t1.value;t.next=10;return qx.tool.utils.files.Utils.safeStat(o[i]);case 10:c=t.sent;n||(n=c.mtime.getTime()>((null==x||null===(a=x.modulesInfo)||void 0===a?void 0:a.localModules[i])||0));t.next=6;break;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 74:b=r.sent;w=[];q=0;case 77:if(!(q<b.length)){r.next=98;break}"browser"==(P=b[q]).getType()||c["qx.headless"]||qx.tool.compiler.Console.print("qx.tool.compiler.maker.appNotHeadless",P.getName());L=qx.tool.utils.Values.merge({},c,l[P.toHashCode()]);P.calcDependencies();if(!P.getFatalCompileErrors()){r.next=86;break}qx.tool.compiler.Console.print("qx.tool.compiler.maker.appFatalError",P.getName());i=!1;return r.abrupt("continue",95);case 86:a||P.getDependencies().forEach((function(t){x.classInfo[t]&&x.classInfo[t].markers&&x.classInfo[t].markers.forEach((function(t){"warning"==qx.tool.compiler.Console.getInstance().getMessageType(t.msgId)&&(a=!0)}))}));E={application:P,analyser:n,maker:t};w.push(E);r.next=91;return t.fireDataEventAsync("writingApplication",E);case 91:r.next=93;return o.generateApplication(P,L);case 93:r.next=95;return t.fireDataEventAsync("writtenApplication",E);case 95:q++;r.next=77;break;case 98:r.next=100;return t.fireDataEventAsync("writtenApplications",w);case 100:r.next=102;return n.saveDatabase();case 102:r.next=104;return t.fireEventAsync("made");case 104:t.setSuccess(i);t.setHasWarnings(a);case 106:case"end":return r.stop()}}),r,null,[[37,57,60,63]])})))()}}});qx.tool.compiler.makers.AppMaker.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.lang.Array":{construct:!0},"qx.lang.Type":{construct:!0},"qx.tool.compiler.Console":{},"qx.tool.utils.IndexedArray":{},"qx.core.Assert":{},"qx.tool.utils.Values":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath");qx.Class.define("qx.tool.compiler.app.Application",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.initType();var e=qx.lang.Array.fromArguments(arguments),r=this;this.__P_484_0=[];e.forEach((function(t){qx.lang.Type.isArray(t)?qx.lang.Array.append(r.__P_484_0,t):r.__P_484_0.push(t)}));this.set({include:[],exclude:[]})},properties:{type:{init:"browser",check:["browser","rhino","node"],apply:"_applyType"},environment:{init:null,nullable:!0},analyser:{init:null,nullable:!0},theme:{init:"qx.theme.Simple",check:"String"},name:{init:"index",nullable:!1,check:"String"},title:{init:null,nullable:!0,check:"String"},description:{init:null,nullable:!0,check:"String"},outputPath:{init:null,nullable:!0,check:"String"},bootPath:{init:null,nullable:!0,check:"String"},templatePath:{init:"",nullable:!1,check:"String",apply:"_applyType"},publish:{check:"Boolean",init:!0},deploy:{check:"Boolean",init:!0},standalone:{check:"Boolean",init:!0},include:{nullable:!1,check:"Array",transform:"__P_484_1"},exclude:{nullable:!1,check:"Array",transform:"__P_484_1"},bundleInclude:{init:null,nullable:!0,check:"Array",transform:"__P_484_1"},bundleExclude:{init:null,nullable:!0,check:"Array",transform:"__P_484_1"},loaderTemplate:{nullable:!1,check:"String"},writeIndexHtmlToRoot:{init:!1,check:"Boolean"},localModules:{init:null,check:"Object"}},members:{__P_484_2:null,__P_484_3:null,__P_484_4:null,__P_484_5:null,__P_484_0:null,__P_484_6:null,isBrowserApp:function(){return"browser"===this.getType()},calcDependencies:function(){var t=this,e=qx.tool.compiler.Console.getInstance(),r=this.getAnalyser(),n=r.getDatabase(),o=new qx.tool.utils.IndexedArray,i={},a=[];this.__P_484_2=null;var c={},s=[],u=null,l={};if(this.__P_484_3&&this.__P_484_3.length){s=[];t.__P_484_3.forEach((function(t){if(c[t.getName()])throw new Error(e.decode("qx.tool.compiler.application.duplicatePartNames",t.getName()));var r={name:t.getName(),include:t.getInclude(),exclude:t.getExclude(),classes:[],dependsOn:{},combine:t.getCombine(),minify:t.getMinify()};r.match=qx.tool.compiler.app.Application.createWildcardMatchFunction(t.getInclude(),t.getExclude());c[t.getName()]=r;s.push(r)}));if(!(u=c.boot))throw new Error(e.decode("qx.tool.compiler.application.noBootPart"))}else{u={name:"boot",include:["*"],exclude:[],classes:[],dependsOn:{},combine:!1,minify:!1,match:function(){return!0}};c.boot=u;s.push(u)}var f=new qx.tool.utils.IndexedArray,p=0,h=new qx.tool.utils.IndexedArray;var y=0;function d(t){if(!i[t]&&!o.contains(t)&&!h.contains(t)){var r=n.classInfo[t];if(r){r.fatalCompileError&&a.push(t);y++;var c={};if(r.environment&&r.environment.required)for(var m in r.environment.required){var v=r.environment.required[m];v.defer&&(c[v.className]=!0)}var g=[];if(r.dependsOn){h.push(t);for(var _ in r.dependsOn){var x=r.dependsOn[_];x.load||x.require||c[_]?d(_):x.defer?g.push(_):o.contains(_)||f.push(_)}h.remove(t)}if(s&&!o.contains(t)){var b=function(t){if(l[t])return l[t];var r=l[t]={classname:t,parts:{},best:null,actual:null};s.forEach((function(n){if(n!==u){var o=n.match(t);if(null!==o){r.parts[n.name]=o;var i=r.best&&r.parts[r.best.name];if(null==i)r.best=n;else if("exact"===i)"exact"===o&&e.print("qx.tool.compiler.application.conflictingExactPart",t,n.name,r.best.name);else{qx.core.Assert.assertTrue("number"==typeof i);if("exact"===o){r.best=n;r.exact=!0}else{qx.core.Assert.assertTrue("number"==typeof o);i===o?e.print("qx.tool.compiler.application.conflictingBestPart",t,n.name,r.best.name):i<o&&(r.best=n)}}}}}));return r}(t),w=b.best||u;w.classes.push(t);b.actual=w;if(r.externals){void 0===w.externals&&(w.externals=[]);r.externals.forEach((function(t){w.externals.indexOf(t)<0&&w.externals.push(t)}))}}o.push(t);g.forEach((function(t){var e=[];!function(t,e){var r={},i={};i[t]=!0;!function t(e){if(!r[e]){r[e]=!0;var a=n.classInfo[e];if(a&&a.dependsOn)for(var c in a.dependsOn){var s=a.dependsOn[c];if(s.load||s.require||s.defer||s.construct){o.contains(c)||(i[c]=!0);t(c)}}}}(t);for(var a in i)e.push(a)}(t,e);e.forEach(d)}));if(1===y)for(;p<f.getLength();)d(t=f.getItem(p++));y--}}}i={};t.__P_484_7(t.getExclude()).forEach((function(t){return i[t]=!0}));d("qx.core.Object");t.getRequiredClasses().forEach((function(t){d(t)}));t.getTheme()&&d(t.getTheme());for(;p<f.length;){d(f[p++])}if(s&&s.length>1){s.forEach((function(t){var e={};t.classes.forEach((function r(o){if(!e[o]){e[o]=!0;var i=l[o];i.actual!==t&&(t.dependsOn[i.actual.name]=!0);for(var a in n.classInfo.dependsOn)r(a)}}));t.dependsOn=Object.keys(t.dependsOn)}));s.forEach((function(t){var r={};t.dependsOn.some((function e(n){if(r[n])return!1;r[n]=!0;return c[n]===t||t.dependsOn.some(e)}))&&e.print("qx.tool.compiler.application.partRecursive",t.name)}))}this.__P_484_2=o.toArray();var m={};this.__P_484_2.forEach((function(t){var e=n.classInfo[t];e.assets&&e.assets.forEach((function(t){var e=t.indexOf("/");if(e>-1){var n=t.substring(0,e);r.findLibrary(n)&&(m[n]=!0)}}));m[e.libraryName]=!0}));this.__P_484_4=[];for(var v in m)r.findLibrary(v)?this.__P_484_4.push(v):e.print("qx.tool.compiler.application.missingRequiredLibrary",v);this.__P_484_6=s;this.__P_484_5=a.length?a:null},getFatalCompileErrors:function(){return this.__P_484_5},getUris:function(){var t=[],e=this.getAnalyser().getDatabase();this.__P_484_2.forEach((function(r){var n=e.classInfo[r];t.push(n.libraryName+":"+r.replace(/\./g,"/")+".js")}));return t},getDependencies:function(){return this.__P_484_2},getPartsDependencies:function(){return this.__P_484_6},getRequiredLibraries:function(){return this.__P_484_4},getAssetUris:function(t,r,n){var o=[],i=this.getAnalyser(),a=i.getDatabase(),c={};function s(t){var e=a.classInfo[t];if(e){if(e.aliases)for(var r in e.aliases)c[r]=e.aliases[r];e.extends&&s(e.extends)}}var u=a.classInfo[this.getTheme()];if(u&&u.themeMeta)for(var l in u.themeMeta)s(u.themeMeta[l]);for(var f={},p=this.__P_484_2.slice(),h=0;h<p.length;h++){var y=p[h],d=a.classInfo[y],m=d.assets;m&&m.forEach((function(t){var e=t.indexOf("/");if(e>-1){var n=t.substring(0,e),i=c[n];i&&(t=i+t.substring(e))}r.findLibrariesForResource(t).forEach((function(e){return o.push(e.getNamespace()+":"+t)}))}));f[d.libraryName]||(f[d.libraryName]=i.findLibrary(d.libraryName))}var v=i.getResourceManager();function g(r,n){r&&r.forEach((function(r){if(!r.match(/^https?:/)){var i=v.getAsset(r);if(i){var a=i.getDestFilename(t);a=e.relative(e.join(t.getOutputDir(),"resource"),a);o.push(i.getLibrary().getNamespace()+":"+a)}else qx.tool.compiler.Console.print(n,r)}}))}for(var _ in f){var x=f[_];if(x){g(x.getAddScript(),"qx.tool.compiler.application.missingScriptResource");g(x.getAddCss(),"qx.tool.compiler.application.missingCssResource")}}for(var b=0;b<o.length;b++){var w=o[b],q=w.match(/\$\{([^}]+)\}/);if(q){var P=q[0],L=q[1],E=w.indexOf(P),k=w.substring(0,E),S=w.substring(E+P.length),O=n[L];void 0!==O&&(qx.lang.Type.isArray(O)?O.forEach((function(t){o.push(k+t+S)})):o.push(k+O+S));qx.lang.Array.removeAt(o,b--)}}o.sort();for(var j=1;j<o.length;j++){var T=o[j],C=o[j-1];if(T!=C){if("*"==C[C.length-1]){var A=C.substring(0,C.length-1);if(T.substring(0,A.length)==A){o.splice(j--,1);continue}}}else o.splice(j--,1)}return o},getFonts:function(){var t={},e=this.getAnalyser().getDatabase();this.__P_484_2.forEach((function(r){var n=e.classInfo[r];n.fonts&&n.fonts.forEach((function(e){return t[e]=!0}))}));return Object.keys(t)},getClassName:function(){return this.__P_484_0[0]},getRequiredClasses:function(){var t={};this.__P_484_0.forEach((function(e){return t[e]=!0}));this.__P_484_7(this.getInclude()).forEach((function(e){return t[e]=!0}));this.__P_484_7(this.getExclude()).forEach((function(e){return delete t[e]}));return Object.keys(t).sort()},addPart:function(t){this.__P_484_3||(this.__P_484_3=[]);this.__P_484_3.push(t)},getParts:function(){return this.__P_484_3||[]},getCalculatedEnvironment:function(){return qx.tool.utils.Values.merge({"qx.headless":"browser"!=this.getType(),"qx.compiler.applicationName":this.getName(),"qx.compiler.applicationType":this.getType()},this.getEnvironment())},__P_484_7:function(t){var e=this,r={};t.forEach((function(t){var n=t.indexOf("*");if(n<0)r[t]=!0;else{var o=t.substring(0,n);o&&e.getAnalyser().getLibraries().forEach((function(t){var e=t.getKnownSymbols();for(var n in e)"class"==e[n]&&n.startsWith(o)&&(r[n]=!0)}));var i=t.substring(n+1);i&&e.getAnalyser().getLibraries().forEach((function(t){var e=t.getKnownSymbols();for(var n in e)"class"==e[n]&&n.endsWith(i)&&(r[n]=!0)}))}}));return Object.keys(r)},_applyType:function(t,r){var n=e.join(this.getTemplatePath(),"loader","loader-"+this.getType()+".tmpl.js");this.setLoaderTemplate(n)},__P_484_1:function(t){return t?qx.lang.Type.isArray(t)?t:[t]:null}},statics:{createWildcardMatchFunction:function(t,e){var r=[];e&&e.forEach((function(t){var e;(e=t.indexOf("*"))>-1?r.push('  if (value.startsWith("'+t.substring(0,e)+'"))\n    return null; // '+t):r.push('  if (value === "'+t+'")\n  return null;')}));t&&t.forEach((function(t){var e;e=-1;for(var n=0;(e=t.indexOf(".",e+1))>-1;)n++;(e=t.indexOf("*"))>-1?r.push('  if (value.startsWith("'+t.substring(0,e)+'"))\n    return '+n+"; // "+t):r.push('  if (value === "'+t+'")\n  return "exact";')}));r.push("  return null;");return new Function("value",r.join("\n"))}}});qx.tool.compiler.app.Application.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.app.Part",{extend:qx.core.Object,construct:function(t,e,r){qx.core.Object.constructor.call(this);this.set({name:t,include:e,exclude:r||[]})},properties:{name:{nullable:!1,check:"String"},combine:{init:!1,nullable:!1,check:"Boolean"},minify:{init:!1,nullable:!1,check:"Boolean"},include:{nullable:!1,check:"Array"},exclude:{nullable:!1,check:"Array"}}});qx.tool.compiler.app.Part.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.app.Library":{},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{},"qx.tool.utils.Promisify":{},"qx.tool.compiler.targets.meta.Part":{},"qx.tool.compiler.targets.meta.Package":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.targets.meta.ApplicationMeta",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.__P_502_0=t;this.__P_502_1=e;this.__P_502_2=[];this.__P_502_3={urisBefore:[],cssBefore:[]};this.__P_502_4=[];this.__P_502_5={};this.__P_502_6=[];this.__P_502_7=[];this.__P_502_8={}},properties:{environment:{},addTimestampsToUrls:{init:!0,check:"Boolean"},appLibrary:{check:"qx.tool.compiler.app.Library"},bootMetaJs:{check:"qx.tool.compiler.targets.meta.AbstractJavascriptMeta"},sourceUri:{check:"String"},resourceUri:{check:"String"}},members:{__P_502_0:null,__P_502_1:null,__P_502_2:null,__P_502_3:null,__P_502_4:null,__P_502_5:null,__P_502_6:null,__P_502_7:null,setEnvironmentValue:function(t,e){var r=this.getEnvironment();void 0===e?delete r[t]:r[t]=e},getEnvironmentValue:function(t,e){var r=this.getEnvironment(),n=r[t];if(void 0===n){void 0!==e&&(r[t]=e);n=e}return n},getApplication:function(){return this.__P_502_1},getTarget:function(){return this.__P_502_0},getApplicationRoot:function(){return this.__P_502_0.getApplicationRoot(this.__P_502_1)},getAnalyser:function(){return this.__P_502_1.getAnalyser()},syncAssets:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.__P_502_6.length)){e.next=8;break}n=t.__P_502_6[r];e.next=5;return qx.tool.utils.Promisify.poolEachOf(n.getAssets(),10,(function(e){return e.sync(t.__P_502_0)}));case 5:r++;e.next=1;break;case 8:case"end":return e.stop()}}),e)})))()},addLibrary:function(t){this.__P_502_2.push(t)},getAppLibrary:function(){return this.__P_502_1.getAnalyser().getLibraryFromClassname(this.__P_502_1.getClassName())},getLibraries:function(){return this.__P_502_2},addExternal:function(t,e){this.__P_502_3[t].push("__external__:"+e)},addPreload:function(t,e){this.__P_502_3[t].push(e)},getPreloads:function(){return this.__P_502_3},addPreBootCode:function(t){this.__P_502_4.push(t)},getPreBootCode:function(){return this.__P_502_4.join("\n")},createPart:function(t){var e=new qx.tool.compiler.targets.meta.Part(this.getTarget(),t,this.__P_502_7.length);this.__P_502_7.push(e);this.__P_502_8[t]=e;return e},getParts:function(){return this.__P_502_7},getPart:function(t){return this.__P_502_8[t]||null},getPackages:function(){return this.__P_502_6},createPackage:function(){var t=new qx.tool.compiler.targets.meta.Package(this,this.__P_502_6.length);this.__P_502_6.push(t);return t},getLocalePackage:function(t){var e=this.getPart(t);e||(e=this.createPart(t)).addPackage(this.createPackage());return e.getDefaultPackage()},addResource:function(t,e){this.__P_502_5[t]=e},getResources:function(){return this.__P_502_5}}});qx.tool.compiler.targets.meta.ApplicationMeta.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath"),n=require("source-map-js");qx.Class.define("qx.tool.compiler.targets.meta.AbstractJavascriptMeta",{extend:qx.core.Object,construct:function(t,e,r){qx.core.Object.constructor.call(this);this._appMeta=t;this.__filename=e;this.__P_501_0=r},properties:{needsWriteToDisk:{init:!1,check:"Boolean"}},members:{_appMeta:null,__filename:null,__P_501_0:null,__P_501_1:null,getAppMeta:function(){return this._appMeta},getFilename:function(){return this.__filename},wrap:function(t){this.__P_501_1=t},getWrapper:function(){return this.__P_501_1},unwrap:function(){return this.__P_501_1?this.__P_501_1.unwrap():this},writeToDisk:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isNeedsWriteToDisk()){r.next=11;break}(n=new qx.tool.utils.Utils.LineCountingTransform).pipe(e.createWriteStream(t.__filename,"utf8"));r.next=5;return new Promise(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.on("finish",r);e.next=3;return t.writeSourceCodeToStream(n);case 3:n.end();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:r.next=7;return t.getSourceMap();case 7:if(!(o=r.sent)){r.next=11;break}r.next=11;return e.writeFileAsync(t.__filename+".map",JSON.stringify(o,null,2),"utf8");case 11:case"end":return r.stop()}}),r)})))()},writeSourceCodeToStream:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("No implementation for ".concat(e.classname,".writeSourceCodeToStream"));case 1:case"end":return t.stop()}}),t)})))()},getSourceMap:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})))()},_copySourceMap:function(t,e){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=new n.SourceMapGenerator({file:o.getFilename()+".map"});c=_regeneratorRuntime().mark((function r(){var i,c,l;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=t[u];c=e[u];r.next=4;return i.getSourceMap();case 4:if(l=r.sent){(s=new n.SourceMapConsumer(l)).eachMapping((function(t){t={generated:{line:t.generatedLine+c,column:t.generatedColumn},original:{line:t.originalLine||1,column:t.originalColumn||1},source:t.source||i.getFilename()};a.addMapping(t)}));o._appMeta.getTarget().getSaveSourceInMap&&o._appMeta.getTarget().getSaveSourceInMap()&&s.sources.forEach((function(t){return a.setSourceContent(t,s.sourceContentFor(t))}))}case 6:case"end":return r.stop()}}),r)}));u=0;case 3:if(!(u<t.length)){i.next=8;break}return i.delegateYield(c(),"t0",5);case 5:u++;i.next=3;break;case 8:l=JSON.parse(a.toString());if(o._appMeta.getTarget().getSourceMapRelativePaths&&o._appMeta.getTarget().getSourceMapRelativePaths())for(f=0;f<l.sources.length;f++)l.sources[f]=r.relative("",l.sources[f]);return i.abrupt("return",l);case 11:case"end":return i.stop()}}),i)})))()}}});qx.tool.compiler.targets.meta.AbstractJavascriptMeta.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath");qx.Class.define("qx.tool.compiler.targets.meta.BootJs",{extend:qx.tool.compiler.targets.meta.AbstractJavascriptMeta,construct:function(t){qx.tool.compiler.targets.meta.AbstractJavascriptMeta.constructor.call(this,t,"".concat(t.getApplicationRoot(),"index.js"));this.__P_503_0=[];this.__P_503_1={}},properties:{needsWriteToDisk:{init:!0,refine:!0}},members:{__P_503_0:null,__P_503_2:null,addEmbeddedJs:function(t){if(!this.__P_503_1[t.toHashCode()]){this.__P_503_0.push(t);this.__P_503_1[t.toHashCode()]=t}},writeSourceCodeToStream:function(t){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=n._appMeta;a=i.getApplication();c=i.getTarget();s=i.getApplicationRoot();u=[];if(c.isInlineExternalScripts()){o.next=9;break}u=i.getPreloads().urisBefore;o.next=30;break;case 9:l=[];u=i.getPreloads().urisBefore.filter((function(t){if(t.startsWith("__external__:"))return!0;l.push(t);return!1}));f=0;case 12:if(!(f<l.length)){o.next=30;break}p=l[f];h=r.join(c.getOutputDir(),"resources",p);o.prev=15;o.next=18;return e.readFileAsync(h,{encoding:"utf-8"});case 18:y=o.sent;t.write(y);t.write("\n");o.next=27;break;case 23:o.prev=23;o.t0=o.catch(15);if("ENOENT"==o.t0.code){o.next=27;break}throw o.t0;case 27:f++;o.next=12;break;case 30:d={EnvSettings:i.getEnvironment(),Libraries:i.getLibraries().map((function(t){return t.getNamespace()})),SourceUri:i.getSourceUri(),ResourceUri:i.getResourceUri(),Resources:i.getResources(),Translations:{C:null},Locales:{C:null},Parts:{},Packages:{},UrisBefore:u,CssBefore:i.getPreloads().cssBefore,Boot:"boot",ClosureParts:{},BootIsInline:!1,NoCacheParam:!1,DecodeUrisPlug:void 0,BootPart:void 0,TranspiledPath:void 0,PreBootCode:i.getPreBootCode()};i.getParts().forEach((function(t){return t.serializeInto(d.Parts)}));i.getPackages().forEach((function(t){return t.serializeInto(d.Packages)}));"browser"!==a.getType()&&(d.TranspiledPath=r.relative(s,r.join(c.getOutputDir(),"transpiled")));i.getTarget().getLocales().forEach((function(t){d.Translations[t]=null;d.Locales[t]=null}));n.__P_503_2=[];o.next=38;return e.readFileAsync(a.getLoaderTemplate(),{encoding:"utf-8"});case 38:y=o.sent;m=y.split("\n");v=0;case 41:if(!(v<m.length)){o.next=68;break}g=m[v];case 43:if(!(_=g.match(/\%\{([^}]+)\}/))){o.next=63;break}x=_[1];b="";if("BootPart"!=x){o.next=58;break}w=0;case 48:if(!(w<n.__P_503_0.length)){o.next=56;break}n.__P_503_2.push(t.getLineNumber());o.next=52;return n.__P_503_0[w].unwrap().writeSourceCodeToStream(t);case 52:t.write("\n");case 53:w++;o.next=48;break;case 56:o.next=59;break;case 58:void 0!==d[x]&&(b="PreBootCode"==x?d[x]:JSON.stringify(d[x],null,2));case 59:q=g.substring(0,_.index)+b+g.substring(_.index+x.length+3);g=q;o.next=43;break;case 63:g.match(/^\s*delayDefer:\s*false\b/)&&(g=g.replace(/false/,"true"));t.write(g+"\n");case 65:v++;o.next=41;break;case 68:case"end":return o.stop()}}),o,null,[[15,23]])})))()},getSourceMap:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var n,o,i,a,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.__P_503_2){e.next=2;break}throw new Error("Cannot get the source map for ".concat(t," until the stream has been written"));case 2:e.next=4;return t._copySourceMap(t.__P_503_0,t.__P_503_2);case 4:n=e.sent;o=t._appMeta.getTarget();for(i=0;i<n.sources.length;i++){a=r.relative("",n.sources[i]);c=o.getPathMapping(a);n.sources[i]=c||n.sources[i]}return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()}}});qx.tool.compiler.targets.meta.BootJs.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath");qx.Class.define("qx.tool.compiler.targets.meta.PolyfillJs",{extend:qx.tool.compiler.targets.meta.AbstractJavascriptMeta,construct:function(t){qx.tool.compiler.targets.meta.AbstractJavascriptMeta.constructor.call(this,t,"".concat(t.getApplicationRoot(),"polyfill.js"))},properties:{needsWriteToDisk:{init:!0,refine:!0}},members:{writeSourceCodeToStream:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return e.__P_508_0(r.join(require.resolve("core-js-bundle"),"../minified.js"),t);case 2:n.next=4;return new Promise((function(e){t.write("\n",e)}));case 4:n.next=6;return e.__P_508_0(r.join(require.resolve("regenerator-runtime"),"../runtime.js"),t);case 6:case"end":return n.stop()}}),n)})))()},__P_508_0:function(t,r){return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.createReadStream(t,"utf8");n.next=3;return new Promise((function(t,e){o.on("end",t);o.on("error",e);o.pipe(r,{end:!1})}));case 3:case"end":return n.stop()}}),n)})))()},getSourceMap:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})))()}}});qx.tool.compiler.targets.meta.PolyfillJs.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{construct:!0,require:!0},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("object-hash");qx.Class.define("qx.tool.compiler.targets.meta.Browserify",{extend:qx.tool.compiler.targets.meta.AbstractJavascriptMeta,construct:function(t){qx.tool.compiler.targets.meta.AbstractJavascriptMeta.constructor.call(this,t,"".concat(t.getApplicationRoot(),"commonjs-browserify.js"));this.setNeedsWriteToDisk(!0)},members:{__P_504_0:null,__P_504_1:null,__P_504_2:function(){if(null===this.__P_504_0){var t=new Set,e={},r=this.getAppMeta().getAnalyser().getDatabase(),n=this.getAppMeta().getApplication().getLocalModules()||{},o=function(){var o=r.classInfo[i];o.commonjsModules&&Object.keys(o.commonjsModules).forEach((function(r){r in n||t.add(r);e[r]||(e[r]=new Set);e[r].add(_toConsumableArray(o.commonjsModules[r]))}))};for(var i in r.classInfo)o();this.__P_504_0=_toConsumableArray(t);this.__P_504_1=e}return{commonjsModules:this.__P_504_0,references:this.__P_504_1}},writeToDisk:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a,c,s,u,l,f,p,h;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=t.getAppMeta().getApplication().getLocalModules();i=t.getAppMeta().getAnalyser().getDatabase();a=t.__P_504_2(),c=a.commonjsModules;s=[];u={};r.next=7;return qx.tool.utils.files.Utils.safeStat(t.getFilename());case 7:l=!r.sent;c.length>0&&s.push(c);if(!o){r.next=22;break}u.localModules={};r.t0=_regeneratorRuntime().keys(o);case 12:if((r.t1=r.t0()).done){r.next=22;break}f=r.t1.value;s.push(f);r.next=17;return qx.tool.utils.files.Utils.safeStat(o[f]);case 17:h=r.sent;u.localModules[f]=h.mtime.getTime();l||(l=u.localModules[f]>((null==i||null===(p=i.modulesInfo)||void 0===p?void 0:p.localModules[f])||0));r.next=12;break;case 22:u.modulesHash=e(s);l||(l=u.modulesHash!==((null==i||null===(n=i.modulesInfo)||void 0===n?void 0:n.modulesHash)||""));if(!l){r.next=28;break}i.modulesInfo=u;r.next=28;return t.getAppMeta().getAnalyser().saveDatabase();case 28:t.setNeedsWriteToDisk(l);return r.abrupt("return",qx.tool.compiler.targets.meta.Browserify.superclass.prototype.writeToDisk.call(t));case 30:case"end":return r.stop()}}),r)})))()},writeSourceCodeToStream:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("browser"!=e.getAppMeta().getEnvironmentValue("qx.compiler.applicationType")){r.next=6;break}n=e.getAppMeta().getApplication().getLocalModules();o=e.__P_504_2(),i=o.commonjsModules,a=o.references;if(!(i.length>0||n)){r.next=6;break}r.next=6;return e.__P_504_3(i,a,n,t);case 6:r.next=8;return new Promise((function(e){t.write("\n",e)}));case 8:case"end":return r.stop()}}),r)})))()},__P_504_3:function(t,e,r,n){var o=require("babelify"),i=require("@babel/preset-env"),a=require("browserify"),c=require("browserify/lib/builtins.js");c.process=c._process;return new Promise((function(s,u){var l=a([],{builtins:c,ignoreMissing:!0,insertGlobals:!0,detectGlobals:!0});l._mdeps.on("missing",(function(t,r){var n=[];n.push('ERROR: could not locate require()d module: "'.concat(t,'"'));n.push("  required from:");try{_toConsumableArray(e[t]).forEach((function(t){t.forEach((function(t){n.push("    ".concat(t))}))}))}catch(t){n.push("    <compile.json:application.localModules'>")}qx.tool.compiler.Console.error(n.join("\n"))}));t.length>0&&l.require(t);if(r)for(var f in r)l.require(r[f],{expose:f});l.transform(o,{presets:[i],sourceMaps:!1,global:!0});l.bundle((function(t,e){var r=this;if(t){l.pipeline.get("deps").get(0).inputPending=0;qx.tool.compiler.Console.error("Unable to browserify - this is probably because a module is being require()'d which is not compatible with Browserify:\n".concat(t.message));setTimeout((function(){r.emit("end")}))}else{try{n.write(e)}catch(t){}s(null)}}))}))},getSourceMap:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})))()}}});qx.tool.compiler.targets.meta.Browserify.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.compiler.targets.meta.Javascript",{extend:qx.tool.compiler.targets.meta.AbstractJavascriptMeta,construct:function(t,e,r){qx.tool.compiler.targets.meta.AbstractJavascriptMeta.constructor.call(this,t,e,r)},members:{compile:function(){},writeSourceCodeToStream:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.createReadStream(r.getFilename(),"utf8");n.next=3;return new Promise((function(e,r){o.on("end",e);o.on("error",r);o.pipe(t,{end:!1})}));case 3:case"end":return n.stop()}}),n)})))()},getSourceMap:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.existsSync(t.getFilename()+".map")){r.next=2;break}return r.abrupt("return",null);case 2:r.next=4;return e.readFileAsync(t.getFilename()+".map","utf8");case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))()}}});qx.tool.compiler.targets.meta.Javascript.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{construct:!0,require:!0},"qx.tool.utils.Utils":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath"),n=require("terser");qx.Class.define("qx.tool.compiler.targets.meta.Uglify",{extend:qx.tool.compiler.targets.meta.AbstractJavascriptMeta,construct:function(t,e){qx.tool.compiler.targets.meta.AbstractJavascriptMeta.constructor.call(this,t,e.getFilename());this.__P_509_0=e},properties:{needsWriteToDisk:{init:!0,refine:!0}},members:{__P_509_0:null,writeSourceCodeToStream:function(t){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){var i,a,c,s,u,l,f,p;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={compress:{sequences:!1},output:{comments:"some"}};t.t0=o._appMeta.getTarget().getMinify();t.next="off"===t.t0?4:"minify"===t.t0?5:"beautify"===t.t0?7:"mangle"===t.t0?10:12;break;case 4:return t.abrupt("return");case 5:i.mangle=!1;return t.abrupt("break",12);case 7:i.mangle=!1;i.output.beautify=!0;return t.abrupt("break",12);case 10:i.mangle=!0;return t.abrupt("break",12);case 12:a=o._appMeta.getApplication();c=o.__P_509_0.getFilename();s=r.basename(c);t.next=17;return _asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new qx.tool.utils.Utils.ToStringWriteStream;(r=new qx.tool.utils.Utils.LineCountingTransform).pipe(e);t.next=5;return new Promise(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.on("finish",e);t.next=3;return o.__P_509_0.writeSourceCodeToStream(r);case 3:r.end();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:return t.abrupt("return",e.toString());case 6:case"end":return t.stop()}}),t)})))();case 17:u=t.sent;t.next=20;return o.__P_509_0.getSourceMap();case 20:l=t.sent;o.fireDataEvent("minifyingApplication",{application:a,filename:s});i.sourceMap={content:l,url:s+".map",includeSources:!0};t.next=25;return n.minify(u,i);case 25:f=t.sent;if(!(p=f.error)){t.next=30;break}"SyntaxError"==p.name&&qx.tool.compiler.Console.print("qx.tool.compiler.build.uglifyParseError",p.line,p.col,p.message,s);throw new Error("UglifyJS failed to minimise: "+(p.message||p));case 30:t.next=32;return e.writeFileAsync(c,f.code,{encoding:"utf8"});case 32:t.next=34;return e.writeFileAsync(c+".map",f.map,{encoding:"utf8"});case 34:if(!o._appMeta.getTarget().isSaveUnminified()){t.next=39;break}t.next=37;return e.writeFileAsync(c+".unminified",u,{encoding:"utf8"});case 37:t.next=39;return e.writeFileAsync(c+".unminified.map",JSON.stringify(l,null,2),{encoding:"utf8"});case 39:o.fireDataEvent("minifiedApplication",{application:a,filename:s});case 40:case"end":return t.stop()}}),t)})))()}}});qx.tool.compiler.targets.meta.Uglify.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.Json":{},"qx.tool.utils.Utils":{},"qx.tool.utils.files.Utils":{},"qx.tool.utils.BabelHelpers":{},"qx.tool.compiler.Console":{},"qx.tool.compiler.jsdoc.Parser":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath");qx.Class.define("qx.tool.compiler.MetaExtraction",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.setMetaRootDir(t||null)},properties:{metaRootDir:{init:null,nullable:!0,check:"String"}},statics:{VERSION:.3},members:{__P_482_0:null,loadMeta:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.utils.Json.loadJsonAsync(t);case 2:(null==(n=r.sent)?void 0:n.version)===qx.tool.compiler.MetaExtraction.VERSION?e.__P_482_0=n:e.__P_482_0=null;case 4:case"end":return r.stop()}}),r)})))()},saveMeta:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.utils.Utils.makeParentDir(t);case 2:r.next=4;return qx.tool.utils.Json.saveJsonAsync(t,e.__P_482_0);case 4:case"end":return r.stop()}}),r)})))()},getMetaData:function(){return this.__P_482_0},isOutOfDate:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.__P_482_0.classFilename;t.getMetaRootDir()&&(i=r.join(t.getMetaRootDir(),i));n.next=4;return e.promises.stat(i);case 4:a=n.sent;if(!(c=null===(o=t.__P_482_0)||void 0===o?void 0:o.lastModified)||c!=a.mtime.getTime()){n.next=8;break}return n.abrupt("return",!1);case 8:return n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})))()},parse:function(t){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return qx.tool.utils.files.Utils.correctCase(t);case 2:t=o.sent;o.next=5;return e.promises.stat(t);case 5:i=o.sent;n.__P_482_0={version:qx.tool.compiler.MetaExtraction.VERSION,lastModified:i.mtime.getTime(),lastModifiedIso:i.mtime.toISOString()};n.getMetaRootDir()?n.__P_482_0.classFilename=r.relative(n.getMetaRootDir(),t):n.__P_482_0.classFilename=r.resolve(t);a=require("@babel/core");o.next=11;return e.promises.readFile(t,"utf8");case 11:c=o.sent;({options:{modules:!1}});s=[require("@babel/plugin-syntax-jsx"),n.__P_482_1()];u={ast:!0,babelrc:!1,sourceFileName:t,filename:t,sourceMaps:!1,presets:[[{plugins:s}]],parserOpts:{allowSuperOutsideMethod:!0,sourceType:"script"},generatorOpts:{retainLines:!0,compact:!1},passPerPreset:!0};a.transform(c,u);return o.abrupt("return",n.__P_482_0);case 17:case"end":return o.stop()}}),o)})))()},__P_482_1:function(){var t=this.__P_482_0,e=this;return{visitor:{Program:function(r){r.skip();var n=!1;r.get("body").forEach((function(r){var o=r.node;if("ExpressionStatement"==o.type&&"CallExpression"==o.expression.type){var i=qx.tool.utils.BabelHelpers.collapseMemberExpression(o.expression.callee).match(/^qx\.([a-z]+)\.define$/i),a=i&&i[1];if(a){if(n){qx.tool.compiler.Console.warn("Ignoring class '".concat(o.expression.arguments[0].value,"' in file '").concat(t.classFilename,"' because a class, mixin, or interface was already found in this file."));return}n=!0;t.type=a.toLowerCase();t.location={start:o.loc.start,end:o.loc.end};t.className=o.expression.arguments[0].value;"string"!=typeof t.className&&(t.className=null);t.jsdoc=qx.tool.utils.BabelHelpers.getJsDoc(o.leadingComments);e.__P_482_2(r.get("expression.arguments")[1])}}}))}}}},__P_482_2:function(t){var e=this,r=this.__P_482_0,n=function(t,e){(function(t){if("ObjectMethod"==t.type)return t.params;if("FunctionExpression"==t.value.type)return t.value.params;throw new Error("Don't know how to get parameters from "+t.type)})(t).forEach((function(t,r){var n=qx.tool.utils.BabelHelpers.collapseParam(t,r);e.params.push({name:n})}))};t.skip();var o={};t.get("properties").forEach((function(t){var i,a=t.node;"Identifier"===a.key.type?i=a.key.name:"StringLiteral"===a.key.type&&(i=a.key.value);if("extend"==i)r.superClass=qx.tool.utils.BabelHelpers.collapseMemberExpression(a.value);else if("@"==i)r.annotation=t.get("value").toString();else if("implement"==i||"include"==i){var c="include"==i?"mixins":"interfaces";r[c]=[];if("ArrayExpression"==a.value.type)a.value.elements.forEach((function(t){r[c].push(qx.tool.utils.BabelHelpers.collapseMemberExpression(t))}));else if("MemberExpression"==a.value.type)r[c].push(qx.tool.utils.BabelHelpers.collapseMemberExpression(a.value));else if("CallExpression"===a.value.type){for(var s="",u=a.value.callee;u;){var l=s?".".concat(s):"";if("MemberExpression"!==u.type){if("Identifier"===u.type){s=u.name+l;break}throw new Error("".concat(r.className,": error parsing mixin types: cannot resolve ").concat(a.value.callee.type," in CallExpression"))}s=u.property.name+l;u=u.object}if("qx.core.Environment.filter"===s){var f,p=null===(f=a.value.arguments[0])||void 0===f?void 0:f.properties;null==p||p.forEach((function(t){return r[c].push(qx.tool.utils.BabelHelpers.collapseMemberExpression(t.value))}))}else e.warn("".concat(r.className,": could not determine mixin types from call `").concat(s,"`. Type support for this class may be limited."))}}else if("type"==i){r.isSingleton="singleton"==a.value.value;r.abstract="abstract"==a.value.value}else if("@construct"==i||"@destruct"==i)o[i]=t.get("value").toString();else if("construct"==i||"destruct"==i){var h=r[i]={type:"function",params:[],location:{start:t.node.loc.start,end:t.node.loc.end}};n(a,h)}else if("events"==i){r.events={};a.value.properties.forEach((function(t){var e=t.key.name;r.events[e]={type:null,jsdoc:qx.tool.utils.BabelHelpers.getJsDoc(t.leadingComments)};if("StringLiteral"==t.value.type){r.events[e].type=t.value.value;r.events[e].location={start:t.loc.start,end:t.loc.end}}}))}else if("properties"==i)e.__P_482_3(t.get("value.properties"));else if("members"==i||"statics"==i){var y=i,d={};r[y]={};t.get("value.properties").forEach((function(t){var e=t.node,o=qx.tool.utils.BabelHelpers.collapseMemberExpression(e.key);if("@"!=o[0]){var i=r[y][o]={jsdoc:qx.tool.utils.BabelHelpers.getJsDoc(e.leadingComments)};i.access=o.startsWith("__")?"private":o.startsWith("_")?"protected":"public";i.location={start:e.loc.start,end:e.loc.end};if("ObjectMethod"===e.type||"ObjectProperty"===e.type&&"FunctionExpression"===e.value.type){i.type="function";i.params=[];n(e,i)}}else d[o]=t.get("value").toString()}));for(var m in d){var v=m.substring(1),g=r[y][v];g&&(g.annotation=d[m])}}}));o["@construct"]&&r.construct&&(r.construct.annotation=o["@construct"]);o["@destruct"]&&r.destruct&&(r.destruct.annotation=o["@destruct"])},__P_482_3:function(t){var e=this.__P_482_0;e.properties||(e.properties={});t.forEach((function(t){t.skip();var r=t.node,n=qx.tool.utils.BabelHelpers.collapseMemberExpression(r.key);e.properties[n]={location:{start:t.node.loc.start,end:t.node.loc.end},json:qx.tool.utils.BabelHelpers.collectJson(r.value,!0),jsdoc:qx.tool.utils.BabelHelpers.getJsDoc(r.leadingComments)}}))},fixupJsDoc:function(t){var e=this.__P_482_0,r=function(e){if(e&&e.jsdoc){var r;qx.tool.compiler.jsdoc.Parser.parseJsDoc(e.jsdoc,t);if(e.jsdoc["@param"]&&e.params){var n={};e.params.forEach((function(t){n[t.name]=t}));e.jsdoc["@param"].forEach((function(t){var e=n[t.paramName];if(e){t.type&&(e.type=t.type);void 0!==t.optional&&(e.optional=t.optional);void 0!==t.defaultValue&&(e.defaultValue=t.defaultValue)}}))}var o=null===(r=e.jsdoc["@return"])||void 0===r?void 0:r[0];if(o){e.returnType={type:o.type};void 0!==o.optional&&(e.returnType.optional=o.optional);void 0!==o.defaultValue&&(e.returnType.defaultValue=o.defaultValue)}}},n=function(t){var n=e[t];if(n)for(var o in n)r(n[o])};n("properties");n("events");n("members");n("statics");r(e.clazz);r(e.construct);r(e.destruct);r(e.defer)}}});qx.tool.compiler.MetaExtraction.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.targets.meta.Part",{extend:qx.core.Object,construct:function(t,e,r){qx.core.Object.constructor.call(this);this.__P_507_0=t;this.__P_507_1=e;this.__P_507_2=r;this.__P_507_3=[];this.__P_507_4={}},members:{__P_507_0:null,__P_507_1:null,__P_507_2:-1,__P_507_3:null,__P_507_4:null,addPackage:function(t){if(!this.__P_507_4[t.toHashCode()]){this.__P_507_3.push(t);this.__P_507_4[t.toHashCode()]=t}},hasPackage:function(t){return Boolean(this.__P_507_4[t.toHashCode()])},getDefaultPackage:function(){return this.__P_507_3[0]||null},serializeInto:function(t){var e=t[this.__P_507_1]=[];this.__P_507_3.forEach((function(t){return e.push(String(t.getPackageIndex()))}))}}});qx.tool.compiler.targets.meta.Part.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.compiler.targets.meta.PackageJavascript":{construct:!0},"qx.lang.Type":{},"qx.lang.Array":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=require("fs");qx.Class.define("qx.tool.compiler.targets.meta.Package",{extend:qx.core.Object,construct:function(t,e){qx.core.Object.constructor.call(this);this.__P_505_0=t;this.__P_505_1=e;this.__P_505_2=[];this.__P_505_3={};this.__P_505_4={};this.__P_505_5=[];this.__P_505_6=[];this.__P_505_7=new qx.tool.compiler.targets.meta.PackageJavascript(this.__P_505_0,this)},properties:{embedAllJavascript:{init:!1,check:"Boolean"},needsWriteToDisk:{init:!0,check:"Boolean",apply:"_applyNeedsWriteToDisk"}},members:{__P_505_0:null,__P_505_1:-1,__P_505_2:null,__P_505_3:null,__P_505_4:null,__P_505_6:null,__P_505_5:null,__P_505_7:null,isEmpty:function(){if(this.__P_505_2.length>0)return!1;for(var t in this.__P_505_3)if(this.__P_505_3[t])return!1;for(var e in this.__P_505_4)if(this.__P_505_4[e])return!1;return!(this.isEmbedAllJavascript()&&this.__P_505_5.length>0)},getPackageIndex:function(){return this.__P_505_1},addAsset:function(t){this.__P_505_2.push(t)},getAssets:function(){return this.__P_505_2},addLocale:function(t,e){this.__P_505_3[t]=e},getLocales:function(){return this.__P_505_3},addTranslationEntry:function(t,e){var r=this.__P_505_4[t];r||(this.__P_505_4[t]=r={});var n=e.msgstr;qx.lang.Type.isArray(n)||(n=[n]);n[0]&&(r[e.msgid]=n[0]);e.msgid_plural&&n[1]&&(r[e.msgid_plural]=n[1])},getTranslations:function(){return this.__P_505_4},addJavascriptMeta:function(t){this.__P_505_5.push(t)},getJavascriptMetas:function(){return this.__P_505_5},removeJavascriptMeta:function(t){qx.lang.Array.remove(this.__P_505_5,t)},addClassname:function(t){this.__P_505_6.push(t)},getClassnames:function(){return this.__P_505_6},getJavascript:function(){return this.__P_505_7},serializeInto:function(t){var n=this,o=t[String(this.__P_505_1)]={uris:[]},i=this.__P_505_0.getApplicationRoot(),a=this.__P_505_0.getTarget(),c=a.isPrivateArtifacts()&&"browser"==this.__P_505_0.getApplication().getType(),s=e.join(a.getOutputDir(),"transpiled"),u=e.join(a.getOutputDir(),"resource"),l=function(t){if(c&&(t.startsWith(s)||t.startsWith(u))){return e.relative(a.getOutputDir(),t)}var o=e.relative(i,t);if(n.__P_505_0.isAddTimestampsToUrls()){var l=r.statSync(t,{throwIfNoEntry:!1});l&&(o+="?"+l.mtimeMs);return o}return o};this.isEmbedAllJavascript()||(o.uris=this.__P_505_5.map((function(t){return l(t.getFilename())})));this.isNeedsWriteToDisk()&&o.uris.unshift(l(this.__P_505_7.getFilename()))},_applyNeedsWriteToDisk:function(t){this.__P_505_7.setNeedsWriteToDisk(t)}}});qx.tool.compiler.targets.meta.Package.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0},"qx.lang.Type":{},"qx.tool.compiler.jsdoc.Parser":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.utils.BabelHelpers",{extend:qx.core.Object,statics:{collapseMemberExpression:function(t){var e=require("@babel/types"),r=!1;return function t(n){if("ThisExpression"==n.type)return"this";if("Identifier"==n.type)return n.name;if("RestElement"==n.type)return"..."+t(n.argument);if("ArrayExpression"==n.type){var o=[];n.elements.forEach((function(e){return o.push(t(e))}));return o}if("StringLiteral"===n.type)return n.value;if("MemberExpression"!=n.type)return"("+n.type+")";if(e.isIdentifier(n.object)){var i=n.object.name;n.property.name?i+="."+n.property.name:r=!0;return i}var a;a="ArrayExpression"==n.object.type?"[]":t(n.object);if(r)return a;n.computed?r=!0:n.property.name?a+="."+n.property.name:r=!0;return a}(t)},collapseParam:function(t,e){switch(t.type){case"Identifier":return t.name;case"AssignmentPattern":return qx.tool.utils.BabelHelpers.collapseParam(t.left,e);case"RestElement":return"..."+qx.tool.utils.BabelHelpers.collapseParam(t.argument,e);case"ObjectPattern":case"ArrayPattern":return"arg".concat(e)}throw new Error("collapseParam: ".concat(t.type," not useable as a parameter"))},collectJson:function(t,e,r){var n;if("ObjectExpression"==t.type){n={};var o=r?r+".":"";t.properties.forEach((function(t){var r=t.key.name;if("ObjectMethod"==t.type)n[r]="[[ ObjectMethod Function ]]";else{var i=qx.tool.utils.BabelHelpers.collectJson(t.value,e,o+r);n[r]=i}}))}else if("Literal"==t.type||"StringLiteral"==t.type||"BooleanLiteral"==t.type||"NumericLiteral"==t.type||"NullLiteral"==t.type){if("string"==typeof t.value){!e||"apply"!==r&&"transform"!==r&&"isEqual"!==r||!0}n=t.value}else if("ArrayExpression"==t.type){n=[];t.elements.forEach((function(t){n.push(qx.tool.utils.BabelHelpers.collectJson(t,e))}))}else if("Identifier"==t.type)n=t.name;else if("CallExpression"==t.type||"FunctionExpression"==t.type||"ArrowFunctionExpression"==t.type)n=new Function("[[ Function ]]");else if("MemberExpression"==t.type)n=qx.tool.utils.BabelHelpers.collapseMemberExpression(t);else if("UnaryExpression"==t.type){if("-"==t.operator){var i=qx.tool.utils.BabelHelpers.collectJson(t.argument,e);if("number"==typeof i)return-1*i}else if("!"==t.operator){var a=qx.tool.utils.BabelHelpers.collectJson(t.argument,e);if("boolean"==typeof a)return!a}n="[[ UnaryExpression ]]"}else if("NewExpression"==t.type||"BinaryExpression"==t.type)n="[[ "+t.type+" ]]";else{console.warn("Cannot interpret AST "+t.type+" at "+(t.loc?" ["+t.loc.start.line+","+t.loc.start.column+"]":""));n=null}return n},getJsDoc:function(t){var e;if(!t)return null;qx.lang.Type.isArray(t)&&(t=t.slice(-1)[0]);var r={raw:null===(e=t.value)||void 0===e?void 0:e.split("\n")},n=qx.tool.compiler.jsdoc.Parser.parseComment(t.value);for(var o in n)r[o]=n[o];return r}}});qx.tool.utils.BabelHelpers.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.compiler.targets.meta.AbstractJavascriptMeta":{construct:!0,require:!0},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath");qx.Class.define("qx.tool.compiler.targets.meta.PackageJavascript",{extend:qx.tool.compiler.targets.meta.AbstractJavascriptMeta,construct:function(t,e){qx.tool.compiler.targets.meta.AbstractJavascriptMeta.constructor.call(this,t,"".concat(t.getApplicationRoot(),"package-").concat(e.getPackageIndex(),".js"));this.__P_506_0=e},properties:{needsWriteToDisk:{init:!0,refine:!0}},members:{__P_506_1:null,writeSourceCodeToStream:function(t){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=r.__P_506_0;i={locales:o.getLocales(),resources:{},translations:o.getTranslations()};o.getAssets().forEach((function(t){var r=e.extname(t.getFilename());r.length&&(r=r.substring(1));var n=t.getFileInfo(),o=i.resources[t.getFilename()]=[n.width,n.height,r,t.getLibrary().getNamespace()];if(void 0!==n.composite){o.push(n.composite);o.push(n.x);o.push(n.y)}}));if(!o.isEmbedAllJavascript()){n.next=10;break}r.__P_506_1=[];(a=new qx.tool.utils.Utils.StripSourceMapTransform).pipe(t);n.next=9;return new Promise(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(n){var i,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<o.getJavascriptMetas().length)){e.next=10;break}c=o.getJavascriptMetas()[i];r.__P_506_1.push(t.getLineNumber());e.next=6;return c.unwrap().writeSourceCodeToStream(a);case 6:a.write("\n");case 7:i++;e.next=1;break;case 10:n();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:t.write("//# sourceMappingURL=".concat(e.basename(r.getFilename()),".map?dt=").concat((new Date).getTime(),"\n"));case 10:t.write("qx.$$packageData['".concat(r.__P_506_0.getPackageIndex(),"'] = ").concat(JSON.stringify(i,null,2),";\n"));case 11:case"end":return n.stop()}}),n)})))()},writeToDisk:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.compiler.targets.meta.PackageJavascript.superclass.prototype.writeToDisk.call(t);case 2:if(t.__P_506_0.isEmbedAllJavascript()){e.next=10;break}r=0;case 4:if(!(r<t.__P_506_0.getJavascriptMetas().length)){e.next=10;break}e.next=7;return t.__P_506_0.getJavascriptMetas()[r].unwrap().writeToDisk();case 7:r++;e.next=4;break;case 10:case"end":return e.stop()}}),e)})))()},getSourceMap:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.__P_506_0.isEmbedAllJavascript()){e.next=2;break}return e.abrupt("return",null);case 2:if(null!==t.__P_506_1){e.next=4;break}throw new Error("Cannot get the source map for ".concat(t," until the stream has been written"));case 4:return e.abrupt("return",t._copySourceMap(t.__P_506_0.getJavascriptMetas(),t.__P_506_1));case 5:case"end":return e.stop()}}),e)})))()}}});qx.tool.compiler.targets.meta.PackageJavascript.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.cli.Cli":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.Config",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"config <command> [options]",desc:"handles persistent configuration",builder:function(t){qx.tool.cli.Cli.addYargsCommands(t,["List","Set","Get","Delete"],"qx.tool.cli.commands.config");return t.demandCommand().showHelpOnFail().help()},handler:function(){}}},KNOWN_VALUES:{"github.token":{desc:"The API token used to connect to GitHub"},"qx.translation.strictPoCompatibility":{desc:"Whether to write PO files with strict compatibility, i.e. include line numbers in output",set:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","true"===t||"false"!==t&&Boolean(t));case 1:case"end":return e.stop()}}),e)})))()}},"qx.default.color":{desc:'The default color for console output (eg "white bgRed bold")'},"qx.default.feedback":{desc:"Default value for compiler feedback (override with --[no-]feedback)",set:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","true"===t||"false"!==t&&void 0);case 1:case"end":return e.stop()}}),e)})))()}}}},members:{_describe:function(t){var e=qx.tool.cli.commands.Config.KNOWN_VALUES[t];return e&&e.desc},_checkKey:function(t){if(!t.quiet){this._describe(t.key)||qx.tool.compiler.Console.warn("Warning: Unrecognised configuration key "+t.key)}},_breakout:function(t){var e=t.lastIndexOf("."),r=e>-1?t.substring(0,e):"",n=t.substring(e+1);return{key:t,parentKey:r,childKey:n}}}});qx.tool.cli.commands.Config.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.utils.Utils":{},"qx.tool.config.Utils":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath"),n=require("inquirer");qx.Class.define("qx.tool.cli.commands.Create",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"create <application namespace> [options]",describe:"create a new qooxdoo project",builder:{type:{alias:"t",describe:"Type of the application to create. Must be one of "+this.getSkeletonNames().join(", "),nargs:1,requiresArg:!0,type:"string"},out:{alias:"o",describe:"Output directory for the application content."},namespace:{alias:"s",describe:"Top-level namespace."},name:{alias:"n",describe:"Name of application/library (defaults to namespace)."},theme:{describe:"The name of the theme to be used.",default:"indigo"},icontheme:{describe:"The name of the icon theme to be used.",default:"Tango"},noninteractive:{alias:"I",describe:"Do not prompt for missing values"},verbose:{alias:"v",describe:"Verbose logging"}}}},getSkeletonNames:function(){var t=r.join(qx.tool.utils.Utils.getTemplateDir(),"skeleton");return e.readdirSync(t).filter((function(r){try{return e.existsSync("".concat(t,"/").concat(r,"/Manifest.tmpl.json"))}catch(t){return!1}}))}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:k=function(t,n){var o,a=e.readdirSync(t),c=_createForOfIteratorHelper(a);try{for(c.s();!(o=c.n()).done;){var u=o.value,l=r.join(t,u),f=e.statSync(l);if(f.isFile()){var p=r.join(n,u.replace(/\.tmpl/,""));if(l.includes(".tmpl")){var h=e.readFileSync(l,"utf-8");for(var y in s)h=h.replace(new RegExp("\\${".concat(y,"}"),"g"),s[y]);i.verbose&&qx.tool.compiler.Console.info(">>> Creating ".concat(p," from template ").concat(l,"..."));if(e.existsSync(p))throw new qx.tool.utils.Utils.UserError("".concat(p," already exists."));e.writeFileSync(p,h,"utf-8")}else{i.verbose&&qx.tool.compiler.Console.info(">>> Copying ".concat(l," to ").concat(p,"..."));e.copyFileSync(l,p)}}else if(f.isDirectory()){var d,m=n,v="custom"===u?s.namespace.split(/\./):[u],g=_createForOfIteratorHelper(v);try{for(g.s();!(d=g.n()).done;){var _=d.value;m=r.join(m,_);e.mkdirSync(m)}}catch(t){g.e(t)}finally{g.f()}k(l,m)}}}catch(t){c.e(t)}finally{c.f()}};i=t.argv;a={};c=[];s={};o.next=7;return t.getQxPath();case 7:a.qooxdoo_path=o.sent;o.prev=8;o.next=11;return qx.tool.config.Utils.getLibraryVersion(a.qooxdoo_path);case 11:a.qooxdoo_version=o.sent;o.next=18;break;case 14:o.prev=14;o.t0=o.catch(8);qx.tool.compiler.Console.error(o.t0.message);throw new qx.tool.utils.Utils.UserError("Cannot find qooxdoo framework folder.");case 18:a.template_dir=qx.tool.utils.Utils.getTemplateDir();a.getLibraryVersion=qx.tool.config.Utils.getLibraryVersion.bind(qx.tool.config.Utils);l=r.join(qx.tool.utils.Utils.getTemplateDir(),"template_vars");u=require(l)(i,a);f=_createForOfIteratorHelper(Object.getOwnPropertyNames(u));o.prev=23;f.s();case 25:if((p=f.n()).done){o.next=41;break}h=p.value;y=u[h];d="function"==typeof y.default?y.default():y.default;if(void 0===y.value){o.next=32;break}s[h]="function"==typeof y.value?y.value.call(s):y.value;return o.abrupt("continue",39);case 32:if(!i.noninteractive){o.next=37;break}if(!y.optional&&!d){o.next=36;break}s[h]=d;return o.abrupt("continue",39);case 36:throw new qx.tool.utils.Utils.UserError("Cannot skip required value for '".concat(h,"'."));case 37:m="Please enter ".concat(y.description," ").concat(y.optional?"(optional)":"",":");c.push({type:y.type||"input",choices:y.choices,name:h,message:m,default:y.default,validate:y.validate||function(t,e){return!0}});case 39:o.next=25;break;case 41:o.next=46;break;case 43:o.prev=43;o.t1=o.catch(23);f.e(o.t1);case 46:o.prev=46;f.f();return o.finish(46);case 49:o.prev=49;o.next=52;return n.prompt(c);case 52:v=o.sent;o.next=58;break;case 55:o.prev=55;o.t2=o.catch(49);throw new qx.tool.utils.Utils.UserError(o.t2.message);case 58:g=_createForOfIteratorHelper(Object.getOwnPropertyNames(u));o.prev=59;g.s();case 61:if((_=g.n()).done){o.next=83;break}x=_.value;b=s[x];void 0!==v[x]&&(b=v[x]);o.t3=x;o.next="namespace"===o.t3?68:"locales"===o.t3?71:"authors"===o.t3?73:80;break;case 68:if(b.match(/^([a-zA-Z_$][0-9a-zA-Z_$]*\.?)+$/)){o.next=70;break}throw new qx.tool.utils.Utils.UserError('Illegal characters in namespace "'.concat(b,'."'));case 70:return o.abrupt("break",80);case 71:b=JSON.stringify(b.split(/,/).map((function(t){return t.trim()})));return o.abrupt("break",80);case 73:if(void 0!==b){o.next=76;break}s.author_map="[]";return o.abrupt("break",80);case 76:w=b.split(/,/).map((function(t){return t.trim()}));s.author_map=JSON.stringify(w.map((function(t){var e=t.split(/ /),r=e.pop();return{name:e.join(" "),email:r}})),null,2);b=w.join("\n"+" ".repeat(12));return o.abrupt("break",80);case 80:s[x]=b;case 81:o.next=61;break;case 83:o.next=88;break;case 85:o.prev=85;o.t4=o.catch(59);g.e(o.t4);case 88:o.prev=88;g.f();return o.finish(88);case 91:q=r.normalize(s.out);if(e.existsSync(q)){o.next=104;break}P=r.dirname(q);if(e.existsSync(P)){o.next=96;break}throw new qx.tool.utils.Utils.UserError("Invalid directory ".concat(q));case 96:o.prev=96;e.accessSync(P,e.constants.W_OK);o.next=103;break;case 100:o.prev=100;o.t5=o.catch(96);throw new qx.tool.utils.Utils.UserError("Directory ".concat(P," is not writable."));case 103:e.mkdirSync(q);case 104:L=i.type||s.type;E=r.join(a.template_dir,"skeleton",L);if(!i.type||e.existsSync(E)){o.next=108;break}throw new qx.tool.utils.Utils.UserError("Application type '".concat(i.type,"' does not exist or has not been implemented yet."));case 108:t;k.bind(t)(E,q);case 110:case"end":return o.stop()}}),o,null,[[8,14],[23,43,46,49],[49,55],[59,85,88,91],[96,100]])})))()}}});qx.tool.cli.commands.Create.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Compile":{require:!0},"qx.tool.compiler.Console":{defer:"runtime"},"qx.lang.Object":{},"qx.tool.utils.Promisify":{},"qx.tool.utils.files.Utils":{},"qx.tool.utils.Utils":{},"qx.Promise":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath");qx.Class.define("qx.tool.cli.commands.Deploy",{extend:qx.tool.cli.commands.Compile,statics:{YARGS_BUILDER:{out:{describe:"Output directory for the deployment",alias:"o"},"app-name":{describe:"The name of the application to deploy (default is all apps), can be comma separated list",nargs:1,type:"string"},"source-maps":{describe:"Enable source maps",type:"boolean",default:!1,alias:"m"}},getYargsCommand:function(){return{command:"deploy [options]",describe:"deploys qooxdoo application(s)",builder:function(){var t=Object.assign({},qx.tool.cli.commands.Compile.YARGS_BUILDER,qx.tool.cli.commands.Deploy.YARGS_BUILDER);delete t.watch;delete t["write-library-info"];delete t.download;delete t["update-po-files"];delete t["save-unminified"];delete t.bundling;delete t.minify;return t}()}}},events:{afterDeploy:"qx.event.type.Data"},members:{processArgs:function(t){qx.tool.cli.commands.Deploy.superclass.prototype.processArgs.call(this,t);t.clean||qx.tool.compiler.Console.print("qx.tool.cli.deploy.notClean");qx.lang.Object.mergeWith(t,{writeLibraryInfo:!1,download:!1,updatePoFiles:!1,saveUnminified:!1,bundling:!0,minify:"mangle",target:"build",deploying:!0})},process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return qx.tool.cli.commands.Deploy.superclass.prototype.process.call(t);case 2:o=t.argv;i=null;if(o.appName){i={};o.appName.split(",").forEach((function(t){return i[t]=!0}))}if(!o.clean){n.next=8;break}n.next=8;return qx.tool.utils.Promisify.eachOfSeries(t.getMakers(),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getTarget();t.next=3;return qx.tool.utils.Promisify.eachOfSeries(e.getApplications(),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i||i[e.getName()]){t.next=2;break}return t.abrupt("return");case 2:if(!1!==e.getDeploy()){t.next=4;break}return t.abrupt("return");case 4:if(!(n=o.out||"function"==typeof r.getDeployDir&&r.getDeployDir())){t.next=8;break}t.next=8;return qx.tool.utils.files.Utils.deleteRecursive(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:n.next=10;return qx.tool.utils.Promisify.eachOfSeries(t.getMakers(),function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function n(a,c){var s;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=a.getTarget();n.next=3;return qx.tool.utils.Promisify.eachOfSeries(a.getApplications(),function(){var n=_asyncToGenerator(_regeneratorRuntime().mark((function n(a){var u,l,f,p,h,y,d,m,v;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i||i[a.getName()]){n.next=2;break}return n.abrupt("return");case 2:if(!1!==a.getDeploy()){n.next=4;break}return n.abrupt("return");case 4:if(u=o.out||"function"==typeof s.getDeployDir&&s.getDeployDir()){n.next=8;break}qx.tool.compiler.Console.print("qx.tool.cli.deploy.deployDirNotSpecified",s.getType());return n.abrupt("return");case 8:l=o.sourceMaps||"function"==typeof s.getDeployMap&&s.getDeployMap()||"function"==typeof s.getSaveSourceInMap&&s.getSaveSourceInMap();f=s.getApplicationRoot(a);p=r.join(u,a.getName());n.next=13;return t.__P_466_0(f,p,l);case 13:h=r.join(s.getOutputDir(),"resource");if(!e.existsSync(h)){n.next=21;break}y=r.join(u,"resource");if(0!=c||!o.clean){n.next=19;break}n.next=19;return qx.tool.utils.files.Utils.deleteRecursive(y);case 19:n.next=21;return qx.tool.utils.files.Utils.sync(h,y);case 21:d=r.join(s.getOutputDir(),"index.html");m=r.join(u,"index.html");e.existsSync(d)&&e.copyFileSync(d,m);v={targetDir:s.getOutputDir(),deployDir:u,argv:o,application:a};n.next=27;return t.fireDataEventAsync("afterDeploy",v);case 27:if(!t.getCompilerApi()||"function"!=typeof t.getCompilerApi().afterDeploy){n.next=30;break}n.next=30;return t.getCompilerApi().afterDeploy(v);case 30:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}());case 10:case"end":return n.stop()}}),n)})))()},__P_466_0:function(t,n,o){var i=this;return _asyncToGenerator(_regeneratorRuntime().mark((function a(){var c;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return qx.tool.utils.Utils.makeDirs(n);case 2:a.next=4;return e.readdirAsync(t);case 4:c=a.sent;a.next=7;return qx.tool.utils.Promisify.eachOf(c,function(){var a=_asyncToGenerator(_regeneratorRuntime().mark((function a(c){var s,u,l,f,p,h;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=r.join(t,c);u=r.join(n,c);a.next=4;return e.statAsync(s);case 4:if(a.sent.isFile()){a.next=9;break}a.next=8;return i.__P_466_0(s,u,o);case 8:return a.abrupt("return");case 9:if(".map"!=(l=r.extname(c))||o){a.next=12;break}return a.abrupt("return");case 12:if(".js"!=l||o){a.next=22;break}a.next=15;return qx.tool.utils.Utils.makeParentDir(u);case 15:f=e.createReadStream(s,{encoding:"utf8",emitClose:!0});p=e.createWriteStream(u,{encoding:"utf8",emitClose:!0});h=new qx.tool.utils.Utils.StripSourceMapTransform;a.next=20;return new qx.Promise((function(t,e){f.on("error",e);p.on("error",e);p.on("finish",t);f.pipe(h);h.pipe(p)}));case 20:a.next=24;break;case 22:a.next=24;return qx.tool.utils.files.Utils.copyFile(s,u);case 24:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 7:case"end":return a.stop()}}),a)})))()}},defer:function(t){qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.deploy.deployDirNotSpecified":"No deploy dir for target <%1> configured! Use --out parameter or deployPath target property in compile.json."},"error");qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.deploy.notClean":"Incremental build compilation - this is faster but may preserve old artifacts, it is recommended to use --clean command line option"},"warning")}});qx.tool.cli.commands.Deploy.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _asyncIterator(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new AsyncFromSyncIterator(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return AsyncFromSyncIterator=function(t){this.s=t,this.n=t.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new AsyncFromSyncIterator(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.lang.Type":{},"qx.tool.compiler.Console":{},"qx.tool.compiler.Es6ify":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath"),n=require("ignore");qx.Class.define("qx.tool.cli.commands.Es6ify",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"es6ify [files...]",describe:"help migrate code to ES6",builder:{verbose:{alias:"v",describe:"Verbose logging"},gitPreCommit:{describe:"When used as a Git pre-commit hook"},overwrite:{type:"boolean",default:!0,describe:"Overwrite source files"},exclude:{type:"array",describe:"Paths to exclude"},arrowFunctions:{choices:["never","always","careful","aggressive"],default:"careful"},singleLineBlocks:{type:"boolean",default:!1,describe:"Force braces around single line bodies for if, for, while, and do while"}}}}},members:{process:function(t){function e(){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return qx.tool.cli.commands.Es6ify.superclass.prototype.process.call(t);case 2:".prettierignore";i=n();o.prev=4;o.t0=i;o.next=8;return e.promises.readFile(".prettierignore");case 8:o.t1=o.sent.toString();o.t0.add.call(o.t0,o.t1);o.next=16;break;case 12:o.prev=12;o.t2=o.catch(4);if("ENOENT"===o.t2.code){o.next=16;break}throw o.t2;case 16:if(a=t.argv.exclude){qx.lang.Type.isArray(a)||(a=[a]);i.add(a)}c=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.ignores(r)){e.next=2;break}return e.abrupt("return");case 2:qx.tool.compiler.Console.info("Processing ".concat(r,"..."));(n=new qx.tool.compiler.Es6ify(r)).set({arrowFunctions:t.argv.arrowFunctions,overwrite:t.argv.overwrite,singleLineBlocks:t.argv.singleLineBlocks});e.next=7;return n.transform();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!t.argv.gitPreCommit){o.next=53;break}o.next=22;return qx.tool.utils.Utils.runCommand(process.cwd(),"git","diff","--cached","--name-only","--diff-filter=ACMR");case 22:if(0==(s=o.sent).exitCode){o.next=27;break}qx.tool.compiler.Console.error("Failed to run 'git diff': ".concat(JSON.stringify(s,null,2)));process.exit(1);return o.abrupt("return");case 27:u=s.output.split(/\n/).filter((function(t){return!!t.match(/^source\/class\/.*\.js$/)}));l=_createForOfIteratorHelper(u);o.prev=29;l.s();case 31:if((f=l.n()).done){o.next=44;break}p=f.value;o.next=35;return c(p);case 35:o.next=37;return qx.tool.utils.Utils.runCommand(process.cwd(),"git","add",p);case 37:if(0==(s=o.sent).exitCode){o.next=42;break}qx.tool.compiler.Console.error("Failed to run 'git add ".concat(p,"': ").concat(JSON.stringify(s,null,2)));process.exit(1);return o.abrupt("return");case 42:o.next=31;break;case 44:o.next=49;break;case 46:o.prev=46;o.t3=o.catch(29);l.e(o.t3);case 49:o.prev=49;l.f();return o.finish(49);case 52:process.exit(0);case 53:h=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n){var o,i,a,s,u;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r.basename(n);t.next=3;return e.promises.stat(n);case 3:if(!(i=t.sent).isFile()||!o.match(/\.js$/)){t.next=9;break}t.next=7;return c(n);case 7:t.next=21;break;case 9:if(!i.isDirectory()||"."!=o&&"."==o[0]){t.next=21;break}t.next=12;return e.promises.readdir(n);case 12:a=t.sent;s=0;case 14:if(!(s<a.length)){t.next=21;break}u=r.join(n,a[s]);t.next=18;return h(u);case 18:s++;t.next=14;break;case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();0===(y=t.argv.files||[]).length&&y.push("source");d=!1;m=!1;o.prev=58;g=_asyncIterator(y);case 60:o.next=62;return g.next();case 62:if(!(d=!(_=o.sent).done)){o.next=69;break}x=_.value;o.next=66;return h(x);case 66:d=!1;o.next=60;break;case 69:o.next=75;break;case 71:o.prev=71;o.t4=o.catch(58);m=!0;v=o.t4;case 75:o.prev=75;o.prev=76;if(!d||null==g.return){o.next=80;break}o.next=80;return g.return();case 80:o.prev=80;if(!m){o.next=83;break}throw v;case 83:return o.finish(80);case 84:return o.finish(75);case 85:case"end":return o.stop()}}),o,null,[[4,12],[29,46,49,52],[58,71,75,85],[76,,80,84]])})))()}))}});qx.tool.cli.commands.Es6ify.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.lang.Object":{},"qx.tool.compiler.Console":{},"qx.lang.Array":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("@babel/core"),n=require("@babel/types"),o=require("prettier");qx.Class.define("qx.tool.compiler.Es6ify",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__filename=t;this.__P_480_0=["addListener","addListenerOnce"]},properties:{arrowFunctions:{init:"careful",check:["never","always","careful","aggressive"],nullable:!0},singleLineBlocks:{init:!1,check:"Boolean"},overwrite:{init:!1,check:"Boolean"}},members:{__filename:null,__P_480_0:null,transform:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var i,a,c,s,u,l,f,p,h;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return e.promises.readFile(t.__filename,"utf8");case 2:i=n.sent;a={};qx.lang.Object.clone(a.options||{},!0).modules=!1;c=[require("@babel/plugin-syntax-jsx"),t.__P_480_1()];"never"!=t.getArrowFunctions()&&c.push(t.__P_480_2());c.push(t.__P_480_3());c.push(t.__P_480_4());t.getSingleLineBlocks()&&c.push(t.__P_480_5());s={ast:!0,babelrc:!1,sourceFileName:t.__filename,filename:t.__filename,sourceMaps:!1,presets:[[{plugins:c}]],parserOpts:{allowSuperOutsideMethod:!0,sourceType:"script"},generatorOpts:{retainLines:!0,compact:!1},passPerPreset:!0};l=0;case 13:0;if(!(++l>10)){n.next=18;break}qx.tool.compiler.Console.warn("Can not find a stable format for ".concat(t.__filename));return n.abrupt("break",24);case 18:if((u=r.transform(i,s)).code!==i){n.next=21;break}return n.abrupt("break",24);case 21:i=u.code;n.next=13;break;case 24:n.next=26;return o.resolveConfig(t.__filename,{editorConfig:!0});case 26:n.t0=n.sent;if(n.t0){n.next=29;break}n.t0={};case 29:(f=n.t0).parser="babel";p=o.format(u.code,f);h=t.__filename+(t.isOverwrite()?"":".es6ify");n.next=35;return e.promises.writeFile(h,p,"utf8");case 35:case"end":return n.stop()}}),n)})))()},__P_480_1:function(){return{visitor:{ObjectExpression:function(t){for(var e={Identifier:1,StringLiteral:1,NumericLiteral:1},r=0;r<t.node.properties.length;r++){var o=t.node.properties[r];if("ObjectProperty"==o.type&&"FunctionExpression"==o.value.type&&e[o.key.type]){var i=n.objectMethod("method",o.key,o.value.params,o.value.body,o.value.computed,o.value.generator,o.value.async);i.loc=o.loc;i.start=o.start;i.end=o.end;i.leadingComments=o.leadingComments;t.node.properties[r]=i}}}}}},__P_480_6:function(t){var e=t.body;1==e.body.length&&"ReturnStatement"==e.body[0].type&&(e=e.body[0].argument);var r=n.arrowFunctionExpression(t.params,e,t.async);r.loc=t.loc;r.start=t.start;r.end=t.end;r.leadingComments=t.leadingComments;return r},__P_480_5:function(){function t(t){if("BlockStatement"!=t.node.body.type){var e=n.blockStatement([t.node.body]);t.node.body=e}}return{visitor:{IfStatement:function(t){if("BlockStatement"!=t.node.consequent.type){var e=n.blockStatement([t.node.consequent]);t.node.consequent=e}},DoWhileStatement:t,ForStatement:t,WhileStatement:t}}},__P_480_2:function(){var t=this,e=this.__filename.indexOf("/test/")>-1,r=this.getArrowFunctions(),o=this.__P_480_0;return{visitor:{CallExpression:function(i){if("MemberExpression"==i.node.callee.type){var a=(c=i.node.callee,s=!1,function t(e){if("ThisExpression"==e.type)return"this";if("Identifier"==e.type)return e.name;if("ArrayExpression"==e.type){var r=[];e.elements.forEach((function(e){return r.push(t(e))}));return r}if("MemberExpression"!=e.type)return"("+e.type+")";if(n.isIdentifier(e.object)){var o=e.object.name;e.property.name?o+="."+e.property.name:s=!0;return o}var i;i="ArrayExpression"==e.object.type?"[]":t(e.object);if(s)return i;e.computed?s=!0:e.property.name?i+="."+e.property.name:s=!0;return i}(c));if("careful"==r){if(!o.some((function(t){return a.endsWith("."+t)})))return;if(3!=i.node.arguments.length||"StringLiteral"!=i.node.arguments[0].type||"FunctionExpression"!=i.node.arguments[1].type||"ThisExpression"!=i.node.arguments[2].type)return}else if("aggressive"==r&&("qx.event.GlobalError.observeMethod"==a||"this.assertException"==a||"this.assertEventFired"==a||"qx.core.Assert.assertEventFired"==a||e&&a.endsWith(".resume")))return}else if("careful"==r)return;for(var c,s,u=0;u<i.node.arguments.length;u++){var l=i.node.arguments[u];"FunctionExpression"==l.type&&(i.node.arguments[u]=t.__P_480_6(l))}}}}},__P_480_3:function(){var t=this.__P_480_0;return{visitor:{CallExpression:function(e){"MemberExpression"==e.node.callee.type&&"Identifier"==e.node.callee.property.type&&t.includes(e.node.callee.property.name)&&3==e.node.arguments.length&&"StringLiteral"==e.node.arguments[0].type&&"ArrowFunctionExpression"==e.node.arguments[1].type&&"ThisExpression"==e.node.arguments[2].type&&qx.lang.Array.removeAt(e.node.arguments,2)}}}},__P_480_4:function(){var t=[];return{visitor:{ObjectMethod:{enter:function(e){t.push(e.node.key.name||null)},exit:function(e){t.pop()}},CallExpression:function(e){if("MemberExpression"==e.node.callee.type&&"ThisExpression"==e.node.callee.object.type&&"Identifier"==e.node.callee.property.type&&"base"==e.node.callee.property.name&&e.node.arguments.length>=1){var r=qx.lang.Array.clone(e.node.arguments);r.shift();var o=function(){for(var e=t.length-1;e>=0;e--){var r=t[e];if(r)return r}return null}();if("construct"==o){e.node.callee=n.super();e.node.arguments=r}else if(o){var i=n.memberExpression(n.super(),n.identifier(o),!1,!1);e.node.callee=i;e.node.arguments=r}}}}}}}});qx.tool.compiler.Es6ify.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.utils.Http":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=(require("upath"),require("fontkit"));require("tmp");qx.Class.define("qx.tool.cli.commands.ExportGlyphs",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"export-glyphs font-file glyph-file",describe:"export font glyphs & ligatures"}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=t.argv.fontFile).match(/^https?:\/\//)){n.next=5;break}n.next=4;return qx.tool.utils.Http.downloadToTempFile(i,/^font\/(ttf|svg|eot|woff|woff2)$/);case 4:i=n.sent;case 5:n.next=7;return r.open(i);case 7:a=n.sent;if(null!==(o=a.GSUB)&&void 0!==o&&null!==(o=o.lookupList)&&void 0!==o&&null!==(o=o.toArray())&&void 0!==o&&o.length){n.next=11;break}qx.tool.compiler.Console.error("The webfont in ".concat(i," does not have any ligatures"));return n.abrupt("return");case 11:c={};s={};u=a.GSUB.lookupList.toArray();a.GSUB.featureList[0].feature.lookupListIndexes.forEach((function(t){var e,r,n=u[t].subTables[0],o=[];null!=n&&null!==(e=n.coverage)&&void 0!==e&&e.rangeRecords&&n.coverage.rangeRecords.forEach((function(t){for(var e=t.start;e<=t.end;e++){var r=a.stringsForGlyph(e)[0];o.push(r)}}));((null==n||null===(r=n.ligatureSets)||void 0===r?void 0:r.toArray())||[]).forEach((function(t,e){var r=o[e];t.forEach((function(t){var e=a.stringsForGlyph(t.glyph)[0];if(e){var n=r+t.components.map((function(t){return a.stringsForGlyph(t)[0]})).join(""),o=e.charCodeAt(0).toString(16);null==s[o]?s[o]=[n]:s[o].push(n)}}))}))}));a.characterSet.forEach((function(t){var e,r=a.glyphForCodePoint(t),n=null;try{var o;n=null==r||null===(o=r.path)||void 0===o?void 0:o.commands}catch(t){n=null}if(null!==(e=n)&&void 0!==e&&e.length||r.layers){var i=function(e){c[e]={advanceWidth:r.advanceWidth,advanceHeight:r.advanceHeight,codePoint:t}};r.name&&i(r.name);var u=s[t.toString(16)];u&&u.forEach(i)}}));n.next=19;return e.promises.writeFile(t.argv.glyphFile,JSON.stringify(c,null,2),"utf8");case 19:case"end":return n.stop()}}),n)})))()}}});qx.tool.cli.commands.ExportGlyphs.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.cli.Cli":{},"qx.tool.compiler.Console":{},"qx.tool.utils.Utils":{},"qx.Promise":{},"qx.tool.compiler.app.Library":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("eslint").ESLint,r=qx.tool.utils.Promisify.fs,n=require("path"),o=require("replace-in-file");qx.Class.define("qx.tool.cli.commands.Lint",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"lint [files...]",describe:"runs eslint on the current application or as set of single files.",builder:{fix:{describe:"runs eslint with --fix"},"fix-jsdoc-params":{describe:"changes the order or @param name and {Type} to make it compatible for the generator ('name-first') or with JSDoc linting ('type-first').",choices:["off","name-first","type-first"],default:"off"},"use-eslintrc":{describe:"Use the .eslintrc file for configuration, if it exists",type:"boolean",default:!0},cache:{describe:"operate only on changed files",type:"boolean",default:!1},warnAsError:{alias:"w",describe:"handle warnings as error"},"print-config":{alias:"p",describe:"print the eslint configuration"},format:{alias:"f",describe:"use a specific output format",default:"codeframe"},outputFile:{alias:"o",describe:"specify file to which the report will be written",nargs:1,requiresArg:!0,type:"string"},verbose:{alias:"v",describe:"enables additional progress output to console",type:"boolean"},quiet:{alias:"q",describe:"No output"}}}}},members:{process:function(t){function e(){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:0===(i=t.argv.files||[]).length&&i.push("source/class/**/*.js");for(a=0;a<i.length;a++)i[a]=n.join(process.cwd(),i[a]);o.next=5;return t.__P_467_0(i);case 5:c=require.main.path;case 6:0;o.next=9;return r.existsAsync(n.join(c,"node_modules"));case 9:if(!o.sent){o.next=11;break}return o.abrupt("break",14);case 11:c=n.dirname(c);o.next=6;break;case 14:s=qx.tool.cli.Cli.getInstance().getParsedArgs();(u=s.eslintConfig||{}).extends=u.extends||["@qooxdoo/qx/browser"];o.t0=Object;o.t1=u.globals||{};o.next=21;return t.__P_467_1(s);case 21:o.t2=o.sent;u.globals=o.t0.assign.call(o.t0,o.t1,o.t2);u.parser="@babel/eslint-parser";u.parserOptions=u.parserOptions||{};u.parserOptions.requireConfigFile=!1;u.parserOptions.babelOptions={cwd:c,plugins:["@babel/plugin-syntax-jsx"],parserOpts:{allowSuperOutsideMethod:!0}};u.parserOptions.sourceType="script";l=new e({cwd:c,cache:t.argv.cache||!1,baseConfig:u,useEslintrc:t.argv.useEslintrc,fix:t.argv.fix});if(!t.argv.printConfig){o.next=36;break}o.next=32;return l.calculateConfigForFile(i[0]);case 32:f=o.sent;qx.tool.compiler.Console.info(JSON.stringify(f,null,"  "));o.next=68;break;case 36:o.next=38;return l.lintFiles(i);case 38:(p=o.sent).errorCount=0;p.warningCount=0;h=_createForOfIteratorHelper(p);try{for(h.s();!(y=h.n()).done;){d=y.value;p.errorCount+=d.errorCount;p.warningCount+=d.warningCount}}catch(t){h.e(t)}finally{h.f()}if(!t.argv.fix){o.next=46;break}o.next=46;return e.outputFixes(p);case 46:if(!(p.errorCount>0||p.warningCount>0)){o.next=67;break}m=t.argv.format||"codeframe";o.next=50;return l.loadFormatter(m);case 50:v=o.sent;g=v.format(p);150;if(p.errorCount+p.warningCount>150)if(t.argv.format)qx.tool.compiler.Console.info("Total errors and warnings exceed ".concat(150,", the report may take some time to generate."));else{qx.tool.compiler.Console.info("Total errors and warnings exceed ".concat(150,', switching to "compact" style report'));m="compact"}if(!t.argv.outputFile){o.next=60;break}t.argv.verbose&&qx.tool.compiler.Console.info("Report to be written to ".concat(t.argv.outputFile));o.next=58;return r.writeFileAsync(t.argv.outputFile,g,"UTF-8").then((function(){t.argv.verbose&&qx.tool.compiler.Console.info("Report written to ".concat(t.argv.outputFile))})).catch((function(e){return qx.tool.compiler.Console.error("Error writing report to ".concat(t.argv.outputFile,":")+e.message)}));case 58:o.next=65;break;case 60:if(!(p.errorCount>0||t.argv.warnAsError)){o.next=64;break}throw new qx.tool.utils.Utils.UserError(g);case 64:qx.tool.compiler.Console.info(g);case 65:o.next=68;break;case 67:qx.tool.compiler.Console.info("No errors found!");case 68:case"end":return o.stop()}}),o)})))()})),__P_467_1:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={};if(!t.libraries){e.next=4;break}e.next=4;return qx.Promise.all(t.libraries.map(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var n,o,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return qx.tool.compiler.app.Library.createLibrary(e);case 2:n=t.sent;o=n.getNamespace();i=o.split(".");r[i[0]]=!1;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},__P_467_0:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,i;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=e.argv.fixJsdocParams)||"off"===n){r.next=6;break}i={files:t,from:"type-first"===n?/@param\s+([\w$]+)\s+({[\w|[\]{}<>?. ]+})/g:/@param\s+({[\w|[\]{}<>?. ]+})\s+([\w$]+)/g,to:"@param $2 $1"};r.next=6;return o(i);case 6:case"end":return r.stop()}}),r)})))()}}});qx.tool.cli.commands.Lint.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.migration.Runner":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);require("process");var e=require("semver");qx.Class.define("qx.tool.cli.commands.Migrate",{extend:qx.tool.cli.commands.Package,statics:{migrationInProcess:!1,getYargsCommand:function(){return{command:"migrate",describe:"migrate a library/application to a newer qooxdoo version",builder:{"dry-run":{describe:"Do not apply migrations"},"qx-version":{check:function(t){return e.valid(t.qxVersion)},describe:"A semver string. If given, the maximum qooxdoo version for which to run migrations"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(new qx.tool.migration.Runner).set({dryRun:Boolean(t.argv.dryRun),verbose:Boolean(t.argv.verbose),qxVersion:t.argv.qxVersion||null});e.next=3;return r.runMigrations();case 3:n=e.sent;o=n.applied;i=n.pending;qx.tool.compiler.Console.info("Finished ".concat(t.argv.dryRun?"checking":"running"," migrations: ").concat(o," migrations applied, ").concat(i," migrations pending."));case 7:case"end":return e.stop()}}),e)})))()},checkMigrations:function(){return _asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}}});qx.tool.cli.commands.Migrate.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.cli.Cli":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.Pkg",{extend:qx.tool.cli.commands.Package,statics:{getYargsCommand:function(){return{command:"pkg <command> [options]",desc:"alias for 'qx package'",builder:function(t){qx.tool.cli.Cli.addYargsCommands(t,["Install","List","Publish","Remove","Update","Upgrade","Migrate"],"qx.tool.cli.commands.package");return t.demandCommand().showHelpOnFail().help()},handler:function(){}}}}});qx.tool.cli.commands.Pkg.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Compile":{require:!0},"qx.tool.compiler.Console":{defer:"runtime"},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=require("process");qx.Class.define("qx.tool.cli.commands.Run",{extend:qx.tool.cli.commands.Compile,statics:{YARGS_BUILDER:{inspect:{describe:"Whether to start node for debugging (ie with the --inspect argument)",type:"boolean",default:!1},"inspect-brk":{describe:"Whether to start node for debugging and break immediately (ie with the --inspect-brk argument)",type:"boolean",default:!1}},getYargsCommand:function(){return{command:"run [configFile]",describe:"runs a server application (written in node) with continuous compilation, using compile.json",builder:Object.assign({},qx.tool.cli.commands.Compile.YARGS_BUILDER,qx.tool.cli.commands.Run.YARGS_BUILDER)}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u,l,f,p;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.argv.watch=!0;t.argv["machine-readable"]=!1;t.argv.feedback=!1;n.next=5;return qx.tool.cli.commands.Run.superclass.prototype.process.call(t);case 5:if(!(o=t.getCompilerApi().getConfiguration()).run){qx.tool.compiler.Console.print("qx.tool.cli.run.noRunConfig");r.exit(1)}if(!o.run.application){qx.tool.compiler.Console.print("qx.tool.cli.run.noAppName");r.exit(1)}i=null;a=null;t.getMakers().forEach((function(t){var e=t.getApplications().filter((function(t){return t.getName()==o.run.application}));if(e.length){if(i){qx.tool.compiler.Console.print("qx.tool.cli.run.tooManyMakers");r.exit(1)}if(1!=e.length){qx.tool.compiler.Console.print("qx.tool.cli.run.tooManyApplications");r.exit(1)}i=t;a=e[0]}}));if(!a){qx.tool.compiler.Console.print("qx.tool.cli.run.noAppName");r.exit(1)}if("node"!=a.getType()){qx.tool.compiler.Console.print("qx.tool.cli.run.mustBeNode");r.exit(1)}c=i.getTarget();s=e.join(c.getApplicationRoot(a),"index.js");u=o.run.arguments||"";l="";t.argv["inspect-brk"]?l=" --inspect-brk":t.argv.inspect&&(l=" --inspect");f="node".concat(l," ").concat(s," ").concat(u);p=!0;t.addListener("making",(function(t){p=!1}));t.addListener("writtenApplication",(function(t){a===t.getData()&&(p=!0)}));t.addListener("made",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.__P_469_0){e.next=11;break}if(p){e.next=3;break}return e.abrupt("return");case 3:e.prev=3;e.next=6;return qx.tool.utils.Utils.killTree(t.__P_469_0.pid);case 6:e.next=10;break;case 8:e.prev=8;e.t0=e.catch(3);case 10:t.__P_469_0=null;case 11:console.log("Starting application: "+f);(n=t.__P_469_0=require("child_process").exec(f)).stdout.setEncoding("utf8");n.stdout.on("data",(function(t){console.log(t)}));n.stderr.setEncoding("utf8");n.stderr.on("data",(function(t){console.error(t)}));n.on("close",(function(t){console.log("Application has terminated");this.__P_469_0=null}));n.on("error",(function(t){console.error("Application has failed: "+t)}));case 19:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}());case 23:case"end":return n.stop()}}),n)})))()}},defer:function(t){qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.run.noRunConfig":"Cannot run anything because the config.json does not have a `run` configuration","qx.tool.cli.run.noAppName":"Cannot run anything because the config.json does not specify a unique application name","qx.tool.cli.run.mustBeNode":"The application %1 is not a node application (only node applications are supported)","qx.tool.cli.run.tooManyMakers":"Cannot run anything because multiple targets are detected","qx.tool.cli.run.tooManyApplications":"Cannot run anything because multiple applications are detected"},"error")}});qx.tool.cli.commands.Run.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Compile":{require:!0},"qx.tool.utils.Website":{},"qx.tool.compiler.Console":{defer:"runtime"},"qx.tool.config.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("upath"),r=require("process"),n=require("express"),o=require("http"),i=qx.tool.utils.Promisify.fs;require("app-module-path").addPath(r.cwd()+"/node_modules");qx.Class.define("qx.tool.cli.commands.Serve",{extend:qx.tool.cli.commands.Compile,statics:{YARGS_BUILDER:{"listen-port":{alias:"p",describe:"The port for the web browser to listen on",type:"number",default:8080},"show-startpage":{alias:"S",describe:"Show the startpage with the list of applications and additional information",type:"boolean",default:null},"rebuild-startpage":{alias:"R",describe:"Rebuild the startpage with the list of applications and additional information",type:"boolean",default:!1}},getYargsCommand:function(){return{command:"serve",describe:"runs a webserver to run the current application with continuous compilation, using compile.json",builder:function(){var t=Object.assign({},qx.tool.cli.commands.Compile.YARGS_BUILDER,qx.tool.cli.commands.Serve.YARGS_BUILDER);delete t.watch;return t}()}}},events:{beforeStart:"qx.event.type.Data",afterStart:"qx.event.type.Event"},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.argv.watch=!0;t.argv["machine-readable"]=!1;t.argv.feedback=!1;r=new qx.tool.utils.Website;e.next=6;return i.existsAsync(r.getTargetDir());case 6:if(e.sent){e.next=12;break}qx.tool.compiler.Console.info(">>> Building startpage...");e.next=10;return r.rebuildAll();case 10:e.next=13;break;case 12:t.argv.rebuildStartpage&&r.startWatcher();case 13:t.addListenerOnce("made",(function(){t.runWebServer()}));return e.abrupt("return",qx.tool.cli.commands.Serve.superclass.prototype.process.call(t));case 15:case"end":return e.stop()}}),e)})))()},showStartpage:function(){return this.__P_470_0},runWebServer:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function a(){var c,s,u,l,f,p,h,y,d,m;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=t.getMakers().filter((function(t){return t.getApplications().some((function(t){return t.getStandalone()}))}));s=[];u=null;l=null;c.forEach((function(t){t.getApplications().forEach((function(e){if(e.isBrowserApp()&&e.getStandalone()){s.push(e);null===l&&(l=t);null===u&&e.getWriteIndexHtmlToRoot()&&(u=t)}}))}));u||1!==s.length||(u=l);t.__P_470_0=t.argv.showStartpage;void 0!==t.__P_470_0&&null!==t.__P_470_0||(t.__P_470_0=null===u);f=t.getCompilerApi().getConfiguration();(p=n()).use((function(t,e,r){e.set({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, OPTIONS","Content-Security-Policy":"default-src *  data: blob: filesystem: about: ws: wss: 'unsafe-inline' 'unsafe-eval'; script-src * data: blob: 'unsafe-inline' 'unsafe-eval'; connect-src * data: blob: 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src * data: blob: ; style-src * data: blob: 'unsafe-inline'; font-src * data: blob: 'unsafe-inline';"});r()}));h=new qx.tool.utils.Website;if(t.__P_470_0){a.next=16;break}p.use("/",n.static(u.getTarget().getOutputDir()));a.next=29;break;case 16:a.next=18;return qx.tool.config.Utils.getQxPath();case 18:y=a.sent;a.next=21;return i.existsAsync(e.join(y,"docs"));case 21:if(a.sent){a.next=23;break}y=e.dirname(y);case 23:p.use("/docs",n.static(e.join(y,"docs")));p.use("/apps",n.static(e.join(y,"apps")));p.use("/",n.static(h.getTargetDir()));d=[];c.forEach((function(t){var r=t.getTarget(),o=e.normalize("/"+r.getOutputDir());p.use(o,n.static(r.getOutputDir()));d.push({target:{type:r.getType(),outputDir:o},apps:t.getApplications().filter((function(t){return t.getStandalone()})).map((function(t){return{isBrowser:t.isBrowserApp(),name:t.getName(),type:t.getType(),title:t.getTitle()||t.getName(),appClass:t.getClassName(),description:t.getDescription(),outputPath:r.getProjectDir(t)}}))})}));p.get("/serve.api/apps.json",(function(t,e){e.set("Content-Type","application/json");e.send(JSON.stringify(d,null,2))}));case 29:m=o.createServer(p);t.fireDataEvent("beforeStart",{server:m,application:p,outputdir:u.getTarget().getOutputDir()});m.on("error",(function(t){if("EADDRINUSE"===t.code){qx.tool.compiler.Console.print("qx.tool.cli.serve.webAddrInUse",f.serve.listenPort);r.exit(1)}else qx.tool.compiler.Console.log("Error when starting web server: "+t)}));m.listen(f.serve.listenPort,(function(){qx.tool.compiler.Console.print("qx.tool.cli.serve.webStarted","http://localhost:"+f.serve.listenPort);t.fireEvent("afterStart")}));case 33:case"end":return a.stop()}}),a)})))()},__P_470_0:null},defer:function(t){qx.tool.compiler.Console.addMessageIds({"qx.tool.cli.serve.webStarted":"Web server started, please browse to %1","qx.tool.cli.serve.webAddrInUse":"Web server cannot start because port %1 is already in use"})}});qx.tool.cli.commands.Serve.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.util.ResourceManager":{construct:!0},"qx.tool.utils.files.Utils":{},"qx.tool.compiler.Console":{},"qx.tool.cli.commands.Create":{},"qx.tool.cli.commands.package.Install":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("process"),n=require("upath"),o=require("rimraf"),i=require("dot");require("jstransformer-dot");var a=require("metalsmith"),c=require("@metalsmith/layouts"),s=require("@metalsmith/markdown"),u=loadSass(),l=require("chokidar");i.templateSettings.strip=!1;qx.Class.define("qx.tool.utils.Website",{extend:qx.core.Object,statics:{APP_NAMESPACE:"apps"},construct:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qx.core.Object.apply(this,arguments);var e=qx.tool.utils.Website,r=qx.util.ResourceManager.getInstance().toUri("qx/tool/website/.gitignore");r=n.dirname(r);this.initSourceDir(r);this.initTargetDir(n.join(r,"build"));this.initAppsNamespace(e.APP_NAMESPACE);var o,i=_createForOfIteratorHelper(Object.getOwnPropertyNames(t));try{for(i.s();!(o=i.n()).done;){var a=o.value;this.set(a,t[a])}}catch(t){i.e(t)}finally{i.f()}},properties:{appsNamespace:{check:"String",deferredInit:!0},sourceDir:{check:"String",deferredInit:!0},targetDir:{check:"String",deferredInit:!0}},members:{__P_516_0:null,__P_516_1:!1,__P_516_2:null,__P_516_3:!1,__P_516_4:!1,startWatcher:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.stopWatcher();case 2:e.next=4;return qx.tool.utils.files.Utils.correctCase(t.getSourceDir());case 4:r=e.sent;t._watcher=l.watch([r],{});t._watcher.on("change",(function(e){return t.__P_516_5("change",e)}));t._watcher.on("add",(function(e){return t.__P_516_5("add",e)}));t._watcher.on("unlink",(function(e){return t.__P_516_5("unlink",e)}));t._watcher.on("ready",_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.triggerRebuild(!0);case 2:t.__P_516_1=!0;case 3:case"end":return e.stop()}}),e)}))));t._watcher.on("error",(function(t){qx.tool.compiler.Console.print("ENOSPC"==t.code?"qx.tool.cli.watch.enospcError":"qx.tool.cli.watch.watchError",t)}));case 11:case"end":return e.stop()}}),e)})))()},stopWatcher:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._watcher){e.next=5;break}e.next=3;return t._watcher.stop();case 3:t._watcher=null;t.__P_516_1=!1;case 5:case"end":return e.stop()}}),e)})))()},isWatching:function(){return Boolean(this._watcher)},waitForRebuildComplete:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.__P_516_6){e.next=3;break}e.next=3;return t.__P_516_6;case 3:case"end":return e.stop()}}),e)})))()},rebuildAll:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.generateSite();case 2:e.next=4;return t.compileScss();case 4:case"end":return e.stop()}}),e)})))()},__P_516_5:function(t,e){this.__P_516_1&&(e.toLowerCase().startsWith(this.getTargetDir().toLowerCase())||this.triggerRebuild(!1))},triggerRebuild:function(t){var e=this;if(this.__P_516_3)this.__P_516_4=!0;else{var r=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return e.rebuildAll();case 2:if(!e.__P_516_4){t.next=6;break}e.__P_516_4=!1;t.next=6;return r();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.__P_516_3=!0;t.prev=1;e.__P_516_6=r();t.next=5;return e.__P_516_6;case 5:e.__P_516_6=null;case 6:t.prev=6;e.__P_516_3=!1;return t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})));return function(){return t.apply(this,arguments)}}();if(this.__P_516_2){clearTimeout(this.__P_516_2);this.__P_516_2=null}this.__P_516_2=setTimeout(n,t?1:250)}},getPages:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=function(t,e){var r={url:t,title:e},n=i[t];void 0!==n?o[n]=r:a.push(r)};n=e.metadata();o=[];i={};n.site.pages&&n.site.pages.forEach((function(t,e){return"string"==typeof t?i[t]=e:null}));a=[];s=_createForOfIteratorHelper(Object.getOwnPropertyNames(t));try{for(s.s();!(u=s.n()).done;){l=u.value;f=t[l];"index.html"===l?c("/",f.title||"Home Page"):(f.permalink||f.navigation)&&c(f.permalink||l,f.title||"Home Page")}}catch(t){s.e(t)}finally{s.f()}a.forEach((function(t){return o.push(t)}));n.site.pages=o;case 10:case"end":return r.stop()}}),r)})))()},loadPartials:function(t,r){var o=this;return _asyncToGenerator(_regeneratorRuntime().mark((function a(){var c,s,u,l,f,p,h,y,d,m,v;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=r.metadata();s=n.join(o.getSourceDir(),"partials");a.next=4;return e.readdirAsync(s,"utf8");case 4:t=a.sent;u=_createForOfIteratorHelper(t);a.prev=6;u.s();case 8:if((l=u.n()).done){a.next=32;break}f=l.value;if(p=f.match(/^(.+)\.([^.]+)$/)){a.next=13;break}return a.abrupt("continue",30);case 13:h=_slicedToArray(p,3),h[0],y=h[1],d=h[2];a.next=17;return e.readFileAsync(n.join(s,f),"utf8");case 17:m=a.sent;v=void 0;a.prev=19;v=i.template(m);a.next=27;break;case 23:a.prev=23;a.t0=a.catch(19);qx.tool.compiler.Console.log("Failed to load partial "+f+": "+a.t0);return a.abrupt("continue",30);case 27:v.name=f;c.partials[f]=v;"html"===d&&(c.partials[y]=v);case 30:a.next=8;break;case 32:a.next=37;break;case 34:a.prev=34;a.t1=a.catch(6);u.e(a.t1);case 37:a.prev=37;u.f();return a.finish(37);case 40:case"end":return a.stop()}}),a,null,[[6,34,37,40],[19,23]])})))()},generateSite:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return new Promise((function(e,r){a(t.getSourceDir()).metadata({site:{title:"Qooxdoo Application Server",description:'Mini website used by "qx serve"',email:"info@qooxdoo.org",twitter_username:"qooxdoo",github_username:"qooxdoo",pages:["/","/about/"]},baseurl:"",url:"",lang:"en",partials:{}}).source(n.join(t.getSourceDir(),"src")).destination(t.getTargetDir()).clean(!0).use(t.loadPartials.bind(t)).use(s()).use(t.getPages.bind(t)).use(c({engine:"dot"})).build((function(t){t?r(t):e()}))}));case 2:case"end":return e.stop()}}),e)})))()},compileScss:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return new Promise((function(e,r){u.render({file:n.join(t.getSourceDir(),"sass","qooxdoo.scss"),outFile:n.join(t.getTargetDir(),"qooxdoo.css")},(function(t,n){t?r(t):e(n)}))}));case 2:o=r.sent;r.next=5;return e.writeFileAsync(n.join(t.getTargetDir(),"qooxdoo.css"),o.css,"utf8");case 5:case"end":return r.stop()}}),r)})))()},buildDevtools:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=t.getAppsNamespace();r.chdir(t.getTargetDir());c=n.join(t.getTargetDir(),a);i.next=5;return e.existsAsync(c);case 5:if(!i.sent){i.next=7;break}o.sync(c);case 7:s={noninteractive:!0,namespace:a,theme:"indigo",icontheme:"Tango"};i.next=10;return new qx.tool.cli.commands.Create(s).process();case 10:r.chdir(c);u=0,l=["apiviewer","widgetbrowser","playground","demobrowser"];case 12:if(!(u<l.length)){i.next=19;break}f=l[u];i.next=16;return new qx.tool.cli.commands.package.Install({}).install("qooxdoo/qxl."+f);case 16:u++;i.next=12;break;case 19:case"end":return i.stop()}}),i)})))()}}});qx.tool.utils.Website.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Serve":{construct:!0,require:!0},"qx.tool.cli.commands.Compile":{},"qx.core.Assert":{},"qx.tool.cli.api.Test":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("path"),n=require("process");qx.Class.define("qx.tool.cli.commands.Test",{extend:qx.tool.cli.commands.Serve,statics:{CONFIG_FILENAME:"compile-test.json",YARGS_BUILDER:{"fail-fast":{describe:"Exit on first failing test",default:!1,type:"boolean"},"disable-webserver":{describe:"Disables the start of the webserver",default:!1,type:"boolean"}},getYargsCommand:function(){return{command:"test",describe:"run test for current project",builder:function(){var t=Object.assign({},qx.tool.cli.commands.Compile.YARGS_BUILDER,qx.tool.cli.commands.Serve.YARGS_BUILDER,qx.tool.cli.commands.Test.YARGS_BUILDER);delete t.watch;delete t["machine-readable"];delete t.feedback;delete t["show-startpage"];delete t["rebuild-startpage"];return t}()}}},events:{runTests:"qx.event.type.Data"},construct:function(t){qx.tool.cli.commands.Serve.constructor.call(this,t);this.__P_471_0=[];this.addListener("changeExitCode",(function(e){var r=e.getData();0!==r&&t.failFast&&n.exit(r)}))},properties:{exitCode:{check:"Number",event:"changeExitCode",nullable:!1,init:0},needsServer:{check:"Boolean",nullable:!1,init:!1}},members:{__P_471_0:null,addTest:function(t){var e=this;qx.core.Assert.assertInstance(t,qx.tool.cli.api.Test);t.addListenerOnce("changeExitCode",(function(r){var n=r.getData();0===n?t.getName()&&!e.argv.quiet&&qx.tool.compiler.Console.info("Test '".concat(t.getName(),"' passed.")):t.getName()&&qx.tool.compiler.Console.error("Test '".concat(t.getName(),"' failed with exit code ").concat(n,"."));0!==n&&e.setExitCode(n)}));this.__P_471_0.push(t);return t},process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t.argv.watch=!1;t.argv["machine-readable"]=!1;t.argv.feedback=!1;t.argv["show-startpage"]=!1;!t.argv.configFile&&e.existsSync(r.join(n.cwd(),qx.tool.cli.commands.Test.CONFIG_FILENAME))&&(t.argv.configFile=qx.tool.cli.commands.Test.CONFIG_FILENAME);t.addListener("making",(function(){if(!(t.hasListener("runTests")||0!==t.__P_471_0.length||t.getCompilerApi()&&"function"==typeof t.getCompilerApi().beforeTests)){qx.tool.compiler.Console.error("No tests are registered! You need to either register tests, or install a testrunner.\n             See documentation at https://qooxdoo.org/docs/#/development/testing/");n.exit(1)}}));t.addListener("afterStart",_asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qx.tool.compiler.Console.info("Running unit tests");e.next=3;return t.fireDataEventAsync("runTests",t);case 3:if(!t.getCompilerApi()||"function"!=typeof t.getCompilerApi().beforeTests){e.next=6;break}e.next=6;return t.getCompilerApi().beforeTests(t);case 6:r=_createForOfIteratorHelper(t.__P_471_0);e.prev=7;r.s();case 9:if((o=r.n()).done){e.next=16;break}i=o.value;qx.tool.compiler.Console.info("Running ".concat(i.getName()));e.next=14;return i.execute();case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18;e.t0=e.catch(7);r.e(e.t0);case 21:e.prev=21;r.f();return e.finish(21);case 24:n.exit(Math.min(255,t.getExitCode()));case 25:case"end":return e.stop()}}),e,null,[[7,18,21,24]])}))));if(!t.__P_471_1()){o.next=12;break}o.next=10;return qx.tool.cli.commands.Test.superclass.prototype.process.call(t);case 10:o.next=16;break;case 12:o.next=14;return qx.tool.cli.commands.Compile.prototype.process.call(t);case 14:o.next=16;return t.fireDataEventAsync("afterStart");case 16:case"end":return o.stop()}}),o)})))()},__P_471_1:function(){return!this.argv.disableWebserver&&(this.getNeedsServer()||this.__P_471_0.some((function(t){return t.getNeedsServer()})))}}});qx.tool.cli.commands.Test.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.lang.Type":{},"qx.tool.utils.Json":{},"qx.tool.compiler.Console":{},"qx.tool.compiler.MetaDatabase":{},"qx.tool.compiler.targets.TypeScriptWriter":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath"),n=require("ignore");qx.Class.define("qx.tool.cli.commands.Typescript",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"typescript [files...]",describe:"generate typescript definitions",builder:{outputFilename:{describe:"Output filename",type:"string",default:"qooxdoo.d.ts"},verbose:{alias:"v",describe:"Verbose logging"},exclude:{type:"array",describe:"Paths to exclude"}}}}},members:{process:function(t){function e(){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return qx.tool.cli.commands.Typescript.superclass.prototype.process.call(t);case 2:".typescriptignore";i=n();o.prev=4;o.t0=i;o.next=8;return e.promises.readFile(".typescriptignore");case 8:o.t1=o.sent.toString();o.t0.add.call(o.t0,o.t1);o.next=16;break;case 12:o.prev=12;o.t2=o.catch(4);if("ENOENT"===o.t2.code){o.next=16;break}throw o.t2;case 16:if(a=t.argv.exclude){qx.lang.Type.isArray(a)||(a=[a]);i.add(a)}c=[];s=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(n){var o,i,a,u,l;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r.basename(n);t.next=3;return e.promises.stat(n);case 3:if(!(i=t.sent).isFile()||!o.match(/\.js$/)){t.next=8;break}c.push(n);t.next=20;break;case 8:if(!i.isDirectory()||"."!=o&&"."==o[0]){t.next=20;break}t.next=11;return e.promises.readdir(n);case 11:a=t.sent;u=0;case 13:if(!(u<a.length)){t.next=20;break}l=r.join(n,a[u]);t.next=17;return s(l);case 17:u++;t.next=13;break;case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(0!==(u=t.argv.files||[]).length){o.next=29;break}if(!e.existsSync("Manifest.json")){o.next=28;break}o.next=25;return qx.tool.utils.Json.loadJsonAsync("Manifest.json");case 25:f=o.sent;(p=null==f||null===(l=f.provides)||void 0===l?void 0:l.class)&&u.push(p);case 28:0===u.length&&e.existsSync("source/class")&&u.push("source/class");case 29:if(0===u.length){qx.tool.compiler.Console.error("No files to process");process.exit(1)}h=_createForOfIteratorHelper(u);o.prev=31;h.s();case 33:if((y=h.n()).done){o.next=39;break}d=y.value;o.next=37;return s(d);case 37:o.next=33;break;case 39:o.next=44;break;case 41:o.prev=41;o.t3=o.catch(31);h.e(o.t3);case 44:o.prev=44;h.f();return o.finish(44);case 47:m=new qx.tool.compiler.MetaDatabase;o.next=50;return m.load();case 50:v=0,g=c;case 51:if(!(v<g.length)){o.next=59;break}_=g[v];t.argv.verbose&&qx.tool.compiler.Console.info("Processing ".concat(_," ..."));o.next=56;return m.addFile(_);case 56:v++;o.next=51;break;case 59:o.next=61;return m.reparseAll();case 61:x=new qx.tool.compiler.targets.TypeScriptWriter(m);o.next=64;return x.process();case 64:case"end":return o.stop()}}),o,null,[[4,12],[31,41,44,47]])})))()}))}});qx.tool.cli.commands.Typescript.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.config.Manifest":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("process"),n=require("upath");qx.Class.define("qx.tool.cli.commands.add.Class",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"class <classname> [options]",describe:"adds a new class file to the current project, based on a template.",builder:{type:{alias:"t",describe:"the type of the class (optional).",default:"default"},extend:{alias:"e",describe:"the base class of the new class"},import:{describe:"import the template to the `templates/class` folder of the current project, where it can be customized"},force:{alias:"f",describe:"overwrite an existing file"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k,S;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=t.argv;o.next=3;return qx.tool.config.Manifest.getInstance().load();case 3:a=o.sent;c=a.getData();(s=Object.assign({},c.info,c.provides)).authors="";s.classname=i.classname;s.extend=i.extend?i.extend:"qx.core.Object";s.copyright=(new Date).getFullYear();u=i.classname.split(/\./);l=s.namespace.split(/\./);if(u[0]===l[0]){o.next=14;break}throw new qx.tool.utils.Utils.UserError("Invalid top namespace '".concat(u[0],"'. Must be '").concat(l[0],"'."));case 14:f=i.type;h=[n.join(r.cwd(),"templates"),qx.tool.utils.Utils.getTemplateDir()];y=!1;d=0,m=h;case 18:if(!(d<m.length)){o.next=29;break}v=m[d];p=n.join(v,"class",f+".tmpl.js");o.next=23;return e.existsAsync(p);case 23:if(!o.sent){o.next=26;break}y=!0;return o.abrupt("break",29);case 26:d++;o.next=18;break;case 29:if(y){o.next=31;break}throw new qx.tool.utils.Utils.UserError("Template ".concat(f," does not exist."));case 31:o.next=33;return e.readFileAsync(p,"utf-8");case 33:g=o.sent;x=n.join(r.cwd(),"header.js");try{_=e.readFileSync(x,"utf-8")}catch(t){x=n.join(n.dirname(p),"header.tmpl.js");try{_=e.readFileSync(x,"utf-8")}catch(t){}}if(_){if(x.includes(".tmpl.js"))for(b in s)_=_.replace(new RegExp("\\${".concat(b,"}"),"g"),s[b]);s.header=_}w=g;for(q in s)w=w.replace(new RegExp("\\${".concat(q,"}"),"g"),s[q]);P=n.join.apply(n,["source","class"].concat(_toConsumableArray(u)))+".js";L=n.join(r.cwd(),P);E=!1;try{e.accessSync(L);E=!0}catch(t){}if(!E||i.force){o.next=45;break}throw new qx.tool.utils.Utils.UserError("Class file ".concat(P," already exists. Use --force to overwrite it"));case 45:o.prev=45;e.mkdirSync(n.dirname(L),{recursive:!0,mode:493});o.next=49;return e.writeFileAsync(L,w,"utf-8");case 49:o.next=54;break;case 51:o.prev=51;o.t0=o.catch(45);throw new qx.tool.utils.Utils.UserError("Cannot write to ".concat(L,": ").concat(o.t0.message));case 54:if(!i.import){o.next=66;break}k=n.join(r.cwd(),"templates","class");S=n.join(k,n.basename(p));o.prev=57;e.mkdirSync(n.dirname(k),{recursive:!0,mode:493});o.next=61;return e.writeFileAsync(S,g,"utf-8");case 61:o.next=66;break;case 63:o.prev=63;o.t1=o.catch(57);throw new qx.tool.utils.Utils.UserError("Cannot copy template to ".concat(k,": ").concat(o.t1.message));case 66:case"end":return o.stop()}}),o,null,[[45,51],[57,63]])})))()}}});qx.tool.cli.commands.add.Class.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Command":{require:!0},"qx.tool.config.Manifest":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("process"),n=require("upath"),o=require("inquirer");qx.Class.define("qx.tool.cli.commands.add.Script",{extend:qx.tool.cli.commands.Command,statics:{getYargsCommand:function(){return{command:"script <scriptpath> [options]",describe:"adds a new script file to the current project, to be loaded before application startup.",builder:{resourcedir:{describe:"The subdirectory of the resource folder in which to place the file",alias:"d",default:"js"},rename:{describe:"Rename the file to the given name",alias:"r"},undo:{describe:"Removes the file that would normally be added with the given arguments",alias:"z"},noninteractive:{alias:"I",describe:"Do not prompt user"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f,p,h,y;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return qx.tool.config.Manifest.getInstance().load();case 2:a=i.sent;c=a.getValue("provides.namespace");s=t.argv.scriptpath;u=n.basename(s);l=n.join(r.cwd(),"source","resource",c,t.argv.resourcedir);f=n.join(l,t.argv.rename||u);p=n.join(c,t.argv.resourcedir,t.argv.rename||u);if(s.endsWith(".js")){i.next=11;break}throw new qx.tool.utils.Utils.UserError("File doesn't seem to be a javascript file.");case 11:i.next=13;return e.existsAsync(s);case 13:i.t0=!i.sent;if(!i.t0){i.next=16;break}i.t0=!t.argv.undo;case 16:if(!i.t0){i.next=18;break}throw new qx.tool.utils.Utils.UserError("File does not exist: ".concat(s));case 18:i.next=20;return e.existsAsync(f);case 20:i.t1=i.sent;if(!i.t1){i.next=23;break}i.t1=!t.argv.undo;case 23:if(!i.t1){i.next=30;break}if(t.argv.noninteractive){i.next=30;break}h={type:"confirm",name:"doOverwrite",message:"Script already exists and will be overwritten. Do you want to proceed?",default:"y"};i.next=28;return o.prompt(h);case 28:i.sent.doOverwrite||r.exit(0);case 30:y=a.getValue("externalResources.script")||[];if(!t.argv.undo){i.next=40;break}y.includes(p)&&(y=y.filter((function(t){return t!==p})));i.next=35;return e.existsAsync(f);case 35:if(!i.sent){i.next=38;break}i.next=38;return e.unlinkAsync(f);case 38:i.next=47;break;case 40:i.next=42;return e.existsAsync(l);case 42:if(i.sent){i.next=44;break}e.mkdirSync(l,{recursive:!0,mode:493});case 44:i.next=46;return e.copyFileAsync(s,f);case 46:y.includes(p)||y.push(p);case 47:t.debug(y);i.next=50;return a.setValue("externalResources.script",y).save();case 50:case"end":return i.stop()}}),i)})))()}}});qx.tool.cli.commands.add.Script.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Config":{require:!0},"qx.tool.cli.ConfigDb":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.config.Delete",{extend:qx.tool.cli.commands.Config,statics:{getYargsCommand:function(){return{command:"delete <key>",describe:"Deletes a configuration value"}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.cli.commands.config.Delete.superclass.prototype.process.call(t);case 2:t._checkKey(t.argv);e.next=5;return qx.tool.cli.ConfigDb.getInstance();case 5:r=e.sent;n=t._breakout(t.argv.key);(o=r.db(n.parentKey))&&delete o[n.childKey];e.next=11;return r.save();case 11:case"end":return e.stop()}}),e)})))()}}});qx.tool.cli.commands.config.Delete.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Config":{require:!0},"qx.tool.cli.ConfigDb":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.config.Get",{extend:qx.tool.cli.commands.Config,statics:{getYargsCommand:function(){return{command:"get <key> [options]",describe:"Gets a configuration value"}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.cli.commands.config.Get.superclass.prototype.process.call(t);case 2:t._checkKey(t.argv);e.next=5;return qx.tool.cli.ConfigDb.getInstance();case 5:r=e.sent;n=r.db(t.argv.key);t.argv.bare?qx.tool.compiler.Console.info(n||""):void 0!==n?qx.tool.compiler.Console.info(t.argv.key+"="+n):qx.tool.compiler.Console.info(t.argv.key+" is not set");case 8:case"end":return e.stop()}}),e)})))()}}});qx.tool.cli.commands.config.Get.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Config":{require:!0},"qx.tool.cli.ConfigDb":{},"qx.tool.utils.Utils":{},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("columnify");qx.Class.define("qx.tool.cli.commands.config.List",{extend:qx.tool.cli.commands.Config,statics:{getYargsCommand:function(){return{command:"list",describe:"Lists all known configuration values",builder:{all:{type:"boolean",describe:"Shows all keys, including unset"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o,i,a;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=function(t,e){for(var r=0,n=Object.entries(t);r<n.length;r++){var a=_slicedToArray(n[r],2),c=a[0],s=a[1],u=e+(e.length?".":"")+c;qx.tool.utils.Utils.isPlainObject(s)?i(s,u):o[u]=!0}};r.next=3;return qx.tool.cli.commands.config.List.superclass.prototype.process.call(t);case 3:r.next=5;return qx.tool.cli.ConfigDb.getInstance();case 5:n=r.sent;o={};if(t.argv.all)for(a in qx.tool.cli.commands.Config.KNOWN_VALUES)o[a]=!0;i(n.db(),"");(o=Object.keys(o)).sort();o=o.map((function(e){return{key:e,value:n.db(e),description:t._describe(e)||"Unrecognised key"}}));qx.tool.compiler.Console.info(e(o));case 13:case"end":return r.stop()}}),r)})))()}}});qx.tool.cli.commands.config.List.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Config":{require:!0},"qx.tool.cli.ConfigDb":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.config.Set",{extend:qx.tool.cli.commands.Config,statics:{getYargsCommand:function(){return{command:"set <key> <value>",describe:"Sets a configuration value",builder:{all:{type:"boolean",describe:"Shows all keys, including unset"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.cli.commands.config.Set.superclass.prototype.process.call(t);case 2:t._checkKey(t.argv);e.next=5;return qx.tool.cli.ConfigDb.getInstance();case 5:r=e.sent;n=qx.tool.cli.commands.Config.KNOWN_VALUES[t.argv.key];o=t.argv.value;if(!n||"function"!=typeof n.set){e.next=12;break}e.next=11;return n.set(o);case 11:o=e.sent;case 12:i=t._breakout(t.argv.key);a=r.db(i.parentKey,{});void 0===o?delete a[i.childKey]:a[i.childKey]=o;e.next=17;return r.save();case 17:case"end":return e.stop()}}),e)})))()}}});qx.tool.cli.commands.config.Set.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Migrate":{require:!0},"qx.tool.compiler.Console":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.cli.commands.package.Migrate",{extend:qx.tool.cli.commands.Migrate,statics:{getYargsCommand:qx.tool.cli.commands.Migrate.getYargsCommand},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qx.tool.compiler.Console.warn("`qx package migrate` has been deprecated in favor of `qx migrate`.");qx.tool.cli.commands.package.Migrate.superclass.prototype.process.call(t);case 2:case"end":return e.stop()}}),e)})))()}}});qx.tool.cli.commands.package.Migrate.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.compiler.Console":{},"qx.tool.utils.Utils":{},"qx.tool.cli.ConfigDb":{},"qx.tool.config.Registry":{},"qx.tool.config.Abstract":{},"qx.tool.config.Manifest":{},"qx.tool.utils.Json":{}}};qx.Bootstrap.executePendingDefers(t);var e,r=require("fs"),n=require("upath"),o=require("process"),i=require("@octokit/rest").Octokit,a=require("semver"),c=require("inquirer"),s=require("glob");qx.Class.define("qx.tool.cli.commands.package.Publish",{extend:qx.tool.cli.commands.Package,statics:{getYargsCommand:function(){return{command:"publish",describe:"publishes a new release of the package on GitHub. Requires a GitHub access token. By default, makes a patch release.",builder:{type:{alias:"t",describe:"Set the release type",nargs:1,choices:"major,premajor,minor,preminor,patch,prepatch,prerelease".split(/,/),type:"string"},noninteractive:{alias:"I",type:"boolean",describe:"Do not prompt user"},"use-version":{alias:"V",type:"string",describe:"Use given version number"},prerelease:{type:"boolean",alias:"p",describe:"Publish as a prerelease (as opposed to a stable release)"},quiet:{type:"boolean",alias:"q",describe:"No output"},message:{alias:"m",type:"string",describe:"Set commit/release message"},dryrun:{type:"boolean",describe:"Deprecated. Use --dry-run"},"dry-run":{type:"boolean",alias:"d",describe:"Show result only, do not publish to GitHub"},force:{type:"boolean",alias:"f",describe:"Ignore warnings (such as demo check)"},"create-index":{type:"boolean",alias:"i",describe:"Create an index file (qooxdoo.json) with paths to Manifest.json files"},"qx-version":{type:"string",check:function(t){return a.valid(t.qxVersion)},describe:"A semver string. If given, the qooxdoo version for which to publish the package"},breaking:{type:"boolean",describe:"Do not create a backwards-compatible release, i.e. allow compatibility with current version only"},"qx-version-range":{type:"string",describe:"A semver range. If given, it overrides --qx-version and --breaking and sets this specific version range"}}}}},events:{beforeCommit:"qx.event.type.Data"},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var s,u,l,f,p,h,y,d,m,v,g,_,x,b,w,q,P,L,E,k,S,O,j,T,C,A,G,R,I,N,F,D,M,U,B,$,W,J,Y,H,V,z,Q,K,X;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.cli.commands.package.Publish.superclass.prototype.process.call(t);case 2:if((s=t.argv).dryrun){qx.tool.compiler.Console.info('The "--dryrun" option is deprecated. Please use "--dry-run" instead.');s.dryRun=!0}e.next=6;return t.getQxVersion();case 6:u=e.sent;if(!r.existsSync("Manifest.json")){e.next=11;break}e.next=10;return t.getAppQxVersion();case 10:u=e.sent;case 11:s.verbose&&t.info("Using qooxdoo version:  ".concat(u));e.prev=12;e.next=15;return qx.tool.utils.Utils.exec("git status --porcelain");case 15:l=e.sent;e.next=21;break;case 18:e.prev=18;e.t0=e.catch(12);throw new qx.tool.utils.Utils.UserError("Cannot determine remote repository.");case 21:t.debug(l);if(""===l.trim()){e.next=24;break}throw new qx.tool.utils.Utils.UserError("Please commit or stash all remaining changes first.");case 24:e.next=26;return qx.tool.utils.Utils.exec("git status --porcelain --branch");case 26:l=e.sent;t.debug(l);if(!l.includes("ahead")){e.next=30;break}throw new qx.tool.utils.Utils.UserError("Please push all local commits to GitHub first.");case 30:e.next=32;return qx.tool.cli.ConfigDb.getInstance();case 32:f=e.sent;if((p=f.db("github",{})).token){e.next=43;break}e.next=37;return c.prompt([{type:"input",name:"token",message:"Publishing to GitHub requires an API token - visit https://github.com/settings/tokens to obtain one (you must assign permission to publish);\nWhat is your GitHub API Token ? "}]);case 37:if((h=e.sent).token){e.next=41;break}qx.tool.compiler.Console.error("You have not provided a GitHub token.");return e.abrupt("return");case 41:p.token=h.token;f.save();case 43:if(y=p.token){e.next=46;break}throw new qx.tool.utils.Utils.UserError("GitHub access token required.");case 46:d=new i({auth:y});if(!s.i){e.next=50;break}e.next=50;return t.__P_474_0(s);case 50:g=[];x=o.cwd();b=qx.tool.config.Registry.getInstance();e.next=55;return b.exists();case 55:if(!e.sent){e.next=81;break}e.next=58;return b.load();case 58:m=b.getValue("libraries");w=_createForOfIteratorHelper(m);e.prev=60;w.s();case 62:if((q=w.n()).done){e.next=71;break}P=q.value;e.next=66;return new qx.tool.config.Abstract(qx.tool.config.Manifest.config).set({baseDir:n.join(x,P.path)}).load();case 66:L=e.sent;g.push(L);if(!v||P.main){v=L.getValue("info.version");_=L}case 69:e.next=62;break;case 71:e.next=76;break;case 73:e.prev=73;e.t1=e.catch(60);w.e(e.t1);case 76:e.prev=76;w.f();return e.finish(76);case 79:e.next=88;break;case 81:e.next=83;return qx.tool.config.Manifest.getInstance().load();case 83:_=e.sent;g.push(_);if(s.force||!_.getValue("provides.namespace").includes(".demo")){e.next=87;break}throw new qx.tool.utils.Utils.UserError("This seems to be the library demo. Please go into the library root directory to publish the library.");case 87:m=[{path:"."}];case 88:E=_.getValue("info.version");if(!s.useVersion){e.next=96;break}if(k=a.coerce(s.useVersion)){e.next=93;break}throw new qx.tool.utils.Utils.UserError("".concat(s.useVersion," is not a valid version number."));case 93:k=k.toString();e.next=101;break;case 96:if(a.valid(E)){e.next=98;break}throw new qx.tool.utils.Utils.UserError("Invalid version number in Manifest. Must be a valid semver version (x.y.z).");case 98:s.type||(s.type=a.prerelease(E)?"prerelease":"patch");s.prerelease=Boolean(s.prerelease)||"prerelease"===s.type||"prepatch"===s.type||"preminor"===s.type||"premajor"===s.type;k=a.inc(E,s.type);case 101:S="v".concat(k);e.prev=102;e.next=105;return qx.tool.utils.Utils.exec("git config --get remote.origin.url");case 105:O=e.sent.trim();e.next=111;break;case 108:e.prev=108;e.t2=e.catch(102);throw new qx.tool.utils.Utils.UserError("Cannot determine remote repository.");case 111:j=O.replace(/(https:\/\/github.com\/|git@github.com:)/,"").replace(/\.git/,"");T=j.split(/\//),C=_slicedToArray(T,2),A=C[0],G=C[1];s.verbose&&t.debug(">>> Repository:  ".concat(j));R=!1;e.prev=115;e.next=118;return d.repos.getReleaseByTag({owner:A,repo:G,tag:S});case 118:R=!0;e.next=123;break;case 121:e.prev=121;e.t3=e.catch(115);case 123:if(!R){e.next=125;break}throw new qx.tool.utils.Utils.UserError("A release with tag '".concat(S," already exists.'"));case 125:e.prev=125;e.next=128;return d.repos.getAllTopics({owner:A,repo:G});case 128:I=e.sent;N=I.data.names;e.next=137;break;case 132:e.prev=132;e.t4=e.catch(125);if(!e.t4.message.includes("Bad credentials")){e.next=136;break}throw new qx.tool.utils.Utils.UserError("Your token is invalid.");case 136:throw e.t4;case 137:if(!(F=t.argv.qxVersionRange))if(t.argv.breaking)F="^"+u;else{F=_.getValue("requires.@qooxdoo/framework");a.satisfies(u,F,{loose:!0})||(F="^".concat(u," || ").concat(F))}D=!0;if(s.noninteractive){e.next=146;break}M={type:"confirm",name:"doRelease",message:"This will ".concat(s.version?"set":"increment"," the version from ").concat(E," to ").concat(k,", having a dependency on qooxdoo ").concat(F,", and create a release of the current master on GitHub. Do you want to proceed?"),default:"y"};e.next=144;return c.prompt(M);case 144:U=e.sent;D=U.doRelease;case 146:D||o.exit(0);for(B=0,$=g;B<$.length;B++){(W=$[B]).setValue("requires.@qooxdoo/framework",F).setValue("info.version",k);if(s.dryRun){if(!s.quiet){qx.tool.compiler.Console.info("Dry run: Not committing ".concat(W.getRelativeDataPath()," with the following content:"));qx.tool.compiler.Console.info(JSON.stringify(W.getData(),null,2))}}else W.save()}J=n.join(o.cwd(),"package.json");e.next=151;return r.existsAsync(J);case 151:if(!e.sent){e.next=163;break}e.next=154;return qx.tool.utils.Json.loadJsonAsync(J);case 154:(Y=e.sent).version=k;if(!t.argv.dryRun){e.next=160;break}qx.tool.compiler.Console.info("Dry run: Not changing package.json version...");e.next=163;break;case 160:e.next=162;return qx.tool.utils.Json.saveJsonAsync(J,Y);case 162:t.argv.quiet||qx.tool.compiler.Console.info("Updated version in package.json.");case 163:e.next=165;return t.fireDataEventAsync("beforeCommit",{version:k,argv:t.argv});case 165:if(!s.dryRun){e.next=168;break}qx.tool.compiler.Console.info("Dry run: not creating tag and release '".concat(S,"' of ").concat(j,"..."));return e.abrupt("return");case 168:if(!s.message){e.next=172;break}H=s.message.replace(/"/g,'\\"');e.next=178;break;case 172:if(s.noninteractive){e.next=178;break}V={type:"input",name:"message",message:"Please enter a commit message:"};e.next=176;return c.prompt([V]);case 176:z=e.sent;H=z.message;case 178:H||(H="Release v".concat(k));s.quiet||qx.tool.compiler.Console.info("Creating tag and release '".concat(S,"' of ").concat(j,"..."));Q=qx.tool.utils.Utils.run;e.prev=181;e.next=184;return Q("git",["add","--all"]);case 184:e.next=186;return Q("git",["commit",'-m "'.concat(H,'"'),"--allow-empty"]);case 186:e.next=188;return Q("git",["push"]);case 188:K={owner:A,repo:G,tag_name:S,target_commitish:"master",name:S,body:H,draft:!1,prerelease:s.prerelease};e.next=191;return d.repos.createRelease(K);case 191:s.quiet||qx.tool.compiler.Console.info("Published new version '".concat(S,"'."));e.next=197;break;case 194:e.prev=194;e.t5=e.catch(181);throw new qx.tool.utils.Utils.UserError(e.t5.message);case 197:X="qooxdoo-package";if(N.includes(X)){e.next=203;break}N.push(X);e.next=202;return d.repos.replaceAllTopics({owner:A,repo:G,names:N});case 202:s.quiet||qx.tool.compiler.Console.info("Added GitHub topic '".concat(X,"'."));case 203:Q("git",["pull"]);case 204:case"end":return e.stop()}}),e,null,[[12,18],[60,73,76,79],[102,108],[115,121],[125,132],[181,194]])})))()},__P_474_0:(e=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){e.verbose&&!e.quiet&&qx.tool.compiler.Console.info("Creating index file...");s(qx.tool.config.Manifest.config.fileName,{matchBase:!0},function(){var a=_asyncToGenerator(_regeneratorRuntime().mark((function a(s,u){var l,f,p,h,y;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s&&i(s);u&&u.length||i(new qx.tool.utils.Utils.UserError("No Manifest.json files could be found"));if(!(u.length>1)){a.next=8;break}f=u.map((function(t){var e=qx.tool.utils.Json.parseJson(r.readFileSync(n.join(o.cwd(),t),"utf-8"));return{name:e.info.name+(e.info.summary?": "+e.info.summary:""),value:t}}));a.next=6;return c.prompt({name:"mainpath",message:"Please choose the main library",type:"list",choices:f});case 6:p=a.sent;l=p.mainpath;case 8:h={libraries:u.map((function(t){return u.length>1&&t===l?{path:n.dirname(t),main:!0}:{path:n.dirname(t)}}))};y=qx.tool.config.Registry.getInstance();if(!e.dryRun){a.next=15;break}qx.tool.compiler.Console.info("Dry run: not creating index file ".concat(y.getRelativeDataPath()," with the following content:"));qx.tool.compiler.Console.info(h);a.next=20;break;case 15:a.next=17;return y.load(h);case 17:a.next=19;return y.save();case 19:e.quiet||qx.tool.compiler.Console.info("Created index file ".concat(y.getRelativeDataPath(),"'."));case 20:t();case 21:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}});qx.tool.cli.commands.package.Publish.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.utils.Utils":{},"qx.tool.compiler.Console":{},"qx.tool.utils.Json":{},"qx.tool.config.Manifest":{},"qx.tool.config.Compile":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("upath"),n=require("rimraf");qx.Class.define("qx.tool.cli.commands.package.Remove",{extend:qx.tool.cli.commands.Package,statics:{getYargsCommand:function(){return{command:"remove [uri]",describe:"removes a package from the configuration.",builder:{verbose:{alias:"v",describe:"Verbose logging"},quiet:{alias:"q",describe:"No output"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m,v;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return qx.tool.cli.commands.package.Remove.superclass.prototype.process.call(t);case 2:if(t.argv.uri){o.next=4;break}throw new qx.tool.utils.Utils.UserError("No repository name given.");case 4:o.next=6;return t.getLockfileData();case 6:i=o.sent;a=t.argv.uri.split(/\//);c=a.length>2?"uri":"repo_name";s=[];u=[];l=_createForOfIteratorHelper(i.libraries);o.prev=12;l.s();case 14:if((f=l.n()).done){o.next=30;break}if((p=f.value)[c]!==t.argv.uri){o.next=27;break}o.next=19;return t.__P_475_0(p.uri);case 19:o.next=21;return t.__P_475_1(p.uri);case 21:h=p.path.split(/\//).length;y=p.path;h>a.length&&(y=r.dirname(y));s.includes(y)||s.push(y);o.next=28;break;case 27:u.push(p);case 28:o.next=14;break;case 30:o.next=35;break;case 32:o.prev=32;o.t0=o.catch(12);l.e(o.t0);case 35:o.prev=35;l.f();return o.finish(35);case 38:if(s.length){d=_createForOfIteratorHelper(s);try{for(d.s();!(m=d.n()).done;){v=m.value;n.sync(v)}}catch(t){d.e(t)}finally{d.f()}t.argv.quiet||qx.tool.compiler.Console.info("Deleted ".concat(s.length," entries for ").concat(t.argv.uri))}else t.argv.verbose&&qx.tool.compiler.Console.warn("No entry for ".concat(t.argv.uri));i.libraries=u;e.writeFileSync(t.getLockfilePath(),JSON.stringify(i,null,2),"utf-8");t.argv.verbose&&qx.tool.compiler.Console.info(">>> Done.");case 42:case"end":return o.stop()}}),o,null,[[12,32,35,38]])})))()},__P_475_1:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.utils.Json.loadJsonAsync(qx.tool.config.Manifest.config.fileName);case 2:if(!(r=e.sent).requires||!r.requires[t]){e.next=7;break}delete r.requires[t];e.next=7;return qx.tool.utils.Json.saveJsonAsync(qx.tool.config.Manifest.config.fileName,r);case 7:case"end":return e.stop()}}),e)})))()},__P_475_0:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c,s,u,l;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return e.getLockfileData();case 2:o=n.sent;if(i=o.libraries.find((function(e){return e.uri===t}))){n.next=6;break}throw new Error("Repo for "+t+" is not an installed package");case 6:n.next=8;return qx.tool.utils.Json.loadJsonAsync(r.join(i.path,qx.tool.config.Manifest.config.fileName));case 8:if((a=n.sent)&&a.provides&&a.provides.application){n.next=12;break}e.argv.verbose&&qx.tool.compiler.Console.info(">>> No application to remove.");return n.abrupt("return");case 12:n.next=14;return qx.tool.utils.Json.loadJsonAsync(qx.tool.config.Compile.config.fileName);case 14:c=n.sent;s=a.provides.application;if(!(u=c.applications.find((function(t){return s.name&&t.name?s.name===t.name:s.class===t.class})))){n.next=23;break}l=c.applications.indexOf(u);c.applications.splice(l,1);e.argv.verbose&&qx.tool.compiler.Console.info(">>> Removed application "+(u.name||u.class));n.next=23;return qx.tool.utils.Json.saveJsonAsync(qx.tool.config.Compile.config.fileName,c);case 23:case"end":return n.stop()}}),n)})))()}}});qx.tool.cli.commands.package.Remove.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.tool.cli.commands.Package":{require:!0},"qx.tool.cli.commands.package.Update":{},"qx.tool.cli.commands.package.List":{},"qx.tool.compiler.Console":{},"qx.tool.cli.commands.package.Install":{},"qx.lang.Type":{},"qx.tool.utils.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("semver");qx.Class.define("qx.tool.cli.commands.package.Upgrade",{extend:qx.tool.cli.commands.Package,statics:{getYargsCommand:function(){return{command:"upgrade [library_uri]",describe:"if no library URI is given, upgrades all available libraries to the latest compatible version, otherwise upgrade only the package identified by the URI.",builder:{quiet:{alias:"q",describe:"No output"},verbose:{alias:"v",describe:"Verbose logging"},"releases-only":{alias:"r",describe:"Upgrade regular releases only (this leaves versions based on branches, commits etc. untouched)",default:!0},reinstall:{alias:"R",describe:"Do not upgrade, reinstall current version"},prereleases:{alias:"p",describe:"Use prereleases if available"},"dry-run":{alias:"d",describe:"Show result only, do not actually upgrade"},"qx-version":{check:function(t){return e.valid(t.qxVersion)},describe:"A semver string. If given, the qooxdoo version for which to upgrade the package"}}}}},members:{process:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,c,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return qx.tool.cli.commands.package.Upgrade.superclass.prototype.process.call(t);case 2:e.next=4;return t.getAppQxVersion();case 4:r=e.sent;e.next=7;return new qx.tool.cli.commands.package.Update({quiet:!0,prereleases:t.argv.prereleases}).process();case 7:e.next=9;return new qx.tool.cli.commands.package.List({quiet:!0,prereleases:t.argv.prereleases,qxVersion:r}).process();case 9:t.argv.quiet||qx.tool.compiler.Console.info("Upgrading project dependencies to the latest available release for qooxdoo version ".concat(r,":"));e.next=12;return t.getLockfileData();case 12:n=e.sent;o=!1;i=new qx.tool.cli.commands.package.Install({quiet:t.argv.quiet,verbose:t.argv.verbose,qxVersion:r});a=_createForOfIteratorHelper(n.libraries);e.prev=16;a.s();case 18:if((c=a.n()).done){e.next=41;break}if((s=c.value).repo_name&&s.repo_tag){e.next=22;break}return e.abrupt("continue",39);case 22:s.uri||(s.uri=s.repo_name);if(!t.argv.library_uri||s.uri===t.argv.library_uri){e.next=25;break}return e.abrupt("continue",39);case 25:o=!0;if(!t.argv.releasesOnly||qx.lang.Type.isString(s.repo_tag)&&s.repo_tag.startsWith("v")){e.next=29;break}t.argv.quiet||qx.tool.compiler.Console.info("Skipping ".concat(s.library_name," (").concat(s.uri,"@").concat(s.repo_tag,") since it is not a release."));return e.abrupt("continue",39);case 29:if(!t.argv.dryRun){e.next=32;break}qx.tool.compiler.Console.info("Dry run. Not upgrading ".concat(s.library_name," (").concat(s.uri,"@").concat(s.repo_tag,")."));return e.abrupt("continue",39);case 32:if(!s.repo_tag||!t.argv.reinstall){e.next=37;break}e.next=35;return i.install(s.uri,s.repo_tag);case 35:e.next=39;break;case 37:e.next=39;return i.install(s.uri);case 39:e.next=18;break;case 41:e.next=46;break;case 43:e.prev=43;e.t0=e.catch(16);a.e(e.t0);case 46:e.prev=46;a.f();return e.finish(46);case 49:if(o){e.next=55;break}if(!t.argv.library_uri){e.next=54;break}throw new qx.tool.utils.Utils.UserError("Library '".concat(t.argv.library_uri,"' is not installed."));case 54:qx.tool.compiler.Console.info("No packages to upgrade.");case 55:case"end":return e.stop()}}),e,null,[[16,43,46,49]])})))()}}});qx.tool.cli.commands.package.Upgrade.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs");qx.Class.define("qx.tool.compiler.Preprocess",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_483_0=t},members:{__P_483_0:null,run:function(t,r){var n=this;e.readFile(this.__P_483_0,{encoding:"utf8"},(function(o,i){o?r(o):n._process(i,(function(n){"string"==typeof t?e.writeFile(t,n,{encoding:"utf8"},r):"function"==typeof t?t(n,r):r(null,n)}))}))},_process:function(t,e){e(t=t.replace(/(''|"")?\/\*#([^\n]+)([\s\S]*)\*\//gm,(function(t,e,r,n){var o=e[0];n="'"==o?n.replace(/'/gm,"\\'"):n.replace(/"/gm,'\\"');var i="";n.split("\n").forEach((function(t,e){if(0!=e){e>1&&(i+=" + \n");i+=o+t+"\\n"+o}}));return i})))}}});qx.tool.compiler.Preprocess.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("qx.tool.compiler.TargetError",{extend:Error});qx.tool.compiler.TargetError.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Interface":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Interface.define("qx.tool.compiler.jsdoc.ITypeResolver",{members:{resolveType:function(t){}}});qx.tool.compiler.jsdoc.ITypeResolver.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.utils.files.Utils":{}}};qx.Bootstrap.executePendingDefers(t);var e=qx.tool.utils.Promisify.fs,r=require("upath"),n=require("crypto"),o=require("source-map-js");qx.Class.define("qx.tool.compiler.targets.SourceCodeCopier",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);var r=t.lastIndexOf("."),i=t.substring(0,r);this.__P_498_0=i+"-tmp.js";this.__P_498_1=i+".js";this.__P_498_2=i+".js.map";this.__P_498_3=e.createWriteStream(this.__P_498_0);this.__P_498_4=n.createHash("sha256");this.__P_498_4.setEncoding("hex");this.__P_498_5=new o.SourceMapGenerator({file:this.__P_498_2});this.__P_498_6=0},members:{__P_498_1:null,__P_498_0:null,__P_498_2:null,__P_498_3:null,__P_498_4:null,__P_498_7:null,__P_498_5:null,__P_498_6:null,getOutputFilename:function(){return this.__P_498_1},open:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var o,i;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return qx.tool.utils.files.Utils.safeStat(t.__P_498_1);case 2:if(!r.sent){r.next=11;break}(o=n.createHash("sha256")).setEncoding("hex");r.next=8;return e.readFileAsync(t.__P_498_1,"utf8");case 8:i=r.sent;o.write(i);t.__P_498_7=t.__P_498_4.read();case 11:case"end":return r.stop()}}),r)})))()},__P_498_8:function(t){this.__P_498_4.write(t);this.__P_498_3.write(t)},addSourceFile:function(t,r){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function i(){var a,c,s,u,l,f;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=t+".map";c=0;i.next=4;return e.readFileAsync(t,"utf8");case 4:s=(s=i.sent).replace(/\/\/[@#]\ssourceMappingURL[^\r\n]*/g,"//");s+="\n";n.__P_498_8(s);for(u=0;u<s.length;u++)"\n"===s[u]&&c++;i.next=11;return qx.tool.utils.files.Utils.safeStat(a);case 11:if(!i.sent){i.next=20;break}l=r||t;i.next=16;return e.readFileAsync(a,"utf8");case 16:s=i.sent;(f=new o.SourceMapConsumer(s)).eachMapping((function(t){t={generated:{line:t.generatedLine+n.__P_498_6,column:t.generatedColumn},original:{line:t.originalLine||1,column:t.originalColumn||1},source:l};n.__P_498_5.addMapping(t)}));f.sources.forEach((function(t){return n.__P_498_5.setSourceContent(l,f.sourceContentFor(t))}));case 20:n.__P_498_6+=c;case 21:case"end":return i.stop()}}),i)})))()},close:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.__P_498_8("\n//# sourceMappingURL="+r.basename(t.__P_498_2)+"\n");t.__P_498_3.end();t.__P_498_4.end();o=t.__P_498_4.read();if(t.__P_498_7&&o===t.__P_498_7){n.next=10;break}n.next=7;return e.renameAsync(t.__P_498_0,t.__P_498_1);case 7:n.next=9;return e.writeFileAsync(t.__P_498_2,JSON.stringify(JSON.parse(t.__P_498_5.toString()),null,2),"utf8");case 9:return n.abrupt("return",!0);case 10:n.next=12;return e.unlinkAsync(t.__P_498_0);case 12:return n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n)})))()}}});qx.tool.compiler.targets.SourceCodeCopier.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"qx.tool.migration.Runner":{},"qx.tool.config.Utils":{},"qx.tool.compiler.Console":{},"qx.core.Assert":{},"qx.tool.config.Abstract":{},"qx.tool.cli.commands.package.Upgrade":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("process"),r=qx.tool.utils.Promisify.fs,n=require("fs").promises,o=require("replace-in-file"),i=require("semver");qx.Class.define("qx.tool.migration.BaseMigration",{type:"abstract",extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.setRunner(t)},properties:{runner:{check:"qx.tool.migration.Runner"},applied:{check:"Number",init:0},pending:{check:"Number",init:0}},members:{getVersion:function(){return this.classname.match(/\.M([0-9_]+)$/)[1].replace(/_/g,".")},getQxVersion:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return t.getRunner().getQxVersion();case 2:e.t0=e.sent;if(e.t0){e.next=5;break}e.t0=qx.tool.config.Utils.getQxVersion();case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))()},announce:function(t){this.getRunner().getVerbose()&&qx.tool.compiler.Console.info("*** "+t)},markAsApplied:function(t){var e=1;if("string"==typeof t)this.getRunner().getVerbose()&&qx.tool.compiler.Console.info(t);else if("number"==typeof t)e=t;else if(void 0!==t)throw new TypeError("Argument must be string or number");this.setApplied(this.getApplied()+e)},markAsPending:function(t){var e=1;if("string"==typeof t)this.getRunner().getVerbose()&&this.announce(t);else if("number"==typeof t)e=t;else if(void 0!==t)throw new TypeError("Argument must be string or number");this.setPending(this.getPending()+e)},renameFilesUnlessDryRun:function(t){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i,a,c,s,u,l,f,p,h,y,d,m;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=n.getRunner().getDryRun();qx.core.Assert.assertArray(t);o.next=4;return n.checkFilesToRename(t);case 4:if(!(a=o.sent).length){o.next=39;break}if(!i){o.next=13;break}n.announce("The following files will be renamed:");c=_createForOfIteratorHelper(a);try{for(c.s();!(s=c.n()).done;){u=_slicedToArray(s.value,2),l=u[0],f=u[1];n.announce("'".concat(f,"' => '").concat(l,"'."))}}catch(t){c.e(t)}finally{c.f()}n.markAsPending();o.next=39;break;case 13:p=_createForOfIteratorHelper(a);o.prev=14;p.s();case 16:if((h=p.n()).done){o.next=30;break}y=_slicedToArray(h.value,2),d=y[0],m=y[1];o.prev=18;o.next=21;return r.renameAsync(m,d);case 21:n.debug("Renamed '".concat(m,"' to '").concat(d,"'."));o.next=28;break;case 24:o.prev=24;o.t0=o.catch(18);qx.tool.compiler.Console.error("Renaming '".concat(m,"' to '").concat(d,"' failed: ").concat(o.t0.message,"."));e.exit(1);case 28:o.next=16;break;case 30:o.next=35;break;case 32:o.prev=32;o.t1=o.catch(14);p.e(o.t1);case 35:o.prev=35;p.f();return o.finish(35);case 38:n.markAsApplied();case 39:case"end":return o.stop()}}),o,null,[[14,32,35,38],[18,24]])})))()},checkFilesToRename:function(t){return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var n,o,i,a,c,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[];o=_createForOfIteratorHelper(t);e.prev=2;o.s();case 4:if((i=o.n()).done){e.next=17;break}a=_slicedToArray(i.value,2),c=a[0],s=a[1];e.next=8;return r.existsAsync(c);case 8:e.t0=!e.sent;if(!e.t0){e.next=13;break}e.next=12;return r.existsAsync(s);case 12:e.t0=e.sent;case 13:if(!e.t0){e.next=15;break}n.push([c,s]);case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19;e.t1=e.catch(2);o.e(e.t1);case 22:e.prev=22;o.f();return e.finish(22);case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))()},checkFilesContain:function(t,e){return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var o,i,a;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=Array.isArray(t)?t:[t];o=_createForOfIteratorHelper(t);r.prev=2;o.s();case 4:if((i=o.n()).done){r.next=17;break}a=i.value;r.next=8;return n.stat(a);case 8:r.t0=r.sent.isFile();if(!r.t0){r.next=13;break}r.next=12;return n.readFile(a,"utf8");case 12:r.t0=r.sent.includes(e);case 13:if(!r.t0){r.next=15;break}return r.abrupt("return",!0);case 15:r.next=4;break;case 17:r.next=22;break;case 19:r.prev=19;r.t1=r.catch(2);o.e(r.t1);case 22:r.prev=22;o.f();return r.finish(22);case 25:return r.abrupt("return",!1);case 26:case"end":return r.stop()}}),r,null,[[2,19,22,25]])})))()},replaceInFilesUnlessDryRun:function(){var t=arguments,r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var i,a,c,s,u;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:[];qx.core.Assert.assertArray(i);a=r.getRunner().getDryRun();c=_createForOfIteratorHelper(i);n.prev=4;c.s();case 6:if((s=c.n()).done){n.next=28;break}u=s.value;n.next=10;return r.checkFilesContain(u.files,u.from);case 10:if(!n.sent){n.next=26;break}if(!a){n.next=15;break}r.announce("In the file(s) ".concat(u.files,", '").concat(u.from,"' will be changed to '").concat(u.to,"'."));r.markAsPending();return n.abrupt("continue",26);case 15:n.prev=15;r.debug("Replacing '".concat(u.from,"' with '").concat(u.to,"' in ").concat(u.files));n.next=19;return o(u);case 19:r.markAsApplied();n.next=26;break;case 22:n.prev=22;n.t0=n.catch(15);qx.tool.compiler.Console.error("Error replacing in files: ".concat(n.t0.message));e.exit(1);case 26:n.next=6;break;case 28:n.next=33;break;case 30:n.prev=30;n.t1=n.catch(4);c.e(n.t1);case 33:n.prev=33;c.f();return n.finish(33);case 36:case"end":return n.stop()}}),n,null,[[4,30,33,36],[15,22]])})))()},updateDependencyUnlessDryRun:function(t,e,r){var n=this;return _asyncToGenerator(_regeneratorRuntime().mark((function o(){var i;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=t.getValue("requires.".concat(e));if(n.getRunner().getDryRun()){n.announce("Manifest version range for ".concat(e," will be updated from ").concat(i," to ").concat(r,"."));n.markAsPending()}else{t.setValue("requires.".concat(e),r);n.markAsApplied()}case 2:case"end":return o.stop()}}),o)})))()},updateQxDependencyUnlessDryRun:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return e.getQxVersion();case 2:n=r.sent;o=t.getValue("requires.@qooxdoo/framework");if(i.satisfies(n,o)){r.next=8;break}o="^".concat(n);r.next=8;return e.updateDependencyUnlessDryRun(t,"@qooxdoo/framework",o);case 8:case"end":return r.stop()}}),r)})))()},updateSchemaUnlessDryRun:function(t,e){var r=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:qx.core.Assert.assertInstance(t,qx.tool.config.Abstract);if(t.getValue("$schema")!==e)if(r.getRunner().getDryRun())r.markAsPending("Schema version for ".concat(t.getDataPath()," will be set to ").concat(e,"."));else{t.setValue("$schema",e);r.markAsApplied("Schema version for ".concat(t.getDataPath()," updated."))}case 2:case"end":return n.stop()}}),n)})))()},upgradePackagesUnlessDryRun:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.getRunner()).getDryRun()){e.next=6;break}t.announce("Packages will be upgraded.");t.markAsPending();e.next=10;break;case 6:n={verbose:r.getVerbose(),qxVersion:r.getQxVersion()};e.next=9;return new qx.tool.cli.commands.package.Upgrade(n).process();case 9:t.markAsApplied();case 10:case"end":return e.stop()}}),e)})))()}}});qx.tool.migration.BaseMigration.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.migration.BaseMigration":{require:!0},"qx.tool.config.Registry":{},"qx.tool.cli.commands.Package":{},"qx.tool.cli.ConfigDb":{},"qx.tool.config.Utils":{},"qx.lang.Type":{},"qx.tool.compiler.Console":{},"qx.tool.config.Compile":{}}};qx.Bootstrap.executePendingDefers(t);var e=require("process"),r=require("upath"),n=require("semver"),o=qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.migration.M6_0_0",{extend:qx.tool.migration.BaseMigration,members:{migrateCompileJs:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=r.join(e.cwd(),"compile.js");n.next=3;return o.existsAsync(i);case 3:if(!n.sent){n.next=8;break}n.next=6;return o.readFileAsync(i,"utf8");case 6:if(n.sent.indexOf("module.exports")<0){t.announce("Your compile.js appears to be missing a module.exports statement and must be manually updated - please see https://git.io/fjBqU for more details");t.markAsPending()}case 8:case"end":return n.stop()}}),n)})))()},migrateQooxdooJs:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=r.join(e.cwd(),"qooxdoo.json");n.next=3;return o.existsAsync(i);case 3:if(!n.sent){n.next=8;break}n.next=6;return qx.tool.config.Registry.getInstance().set({warnOnly:!0,validate:!1}).load();case 6:if((a=n.sent).getValue("$schema")!==a.getSchemaUri())if(t.getRunner().getDryRun())t.markAsPending("Add schema to qooxdoo.json");else{a.setValue("$schema",a.getSchemaUri());a.save();t.markAsApplied()}case 8:case"end":return n.stop()}}),n)})))()},migrateConfigFiles:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function n(){var o,i,a,c;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.getRunner().getDryRun();i=qx.tool.cli.commands.Package;a=e.cwd();c=[[r.join(a,i.lockfile.filename),r.join(a,"contrib.json")],[r.join(a,i.cache_dir),r.join(a,"contrib")],[r.join(qx.tool.cli.ConfigDb.getDirectory(),i.package_cache_name),r.join(qx.tool.cli.ConfigDb.getDirectory(),"contrib-cache.json")]];n.next=6;return t.checkFilesToRename(c);case 6:if(!n.sent.length){n.next=17;break}n.next=9;return t.renameFilesUnlessDryRun(c);case 9:if(!o){n.next=14;break}t.announce(".gitignore needs to be updated.");t.markAsPending(3);n.next=17;break;case 14:n.next=16;return t.replaceInFilesUnlessDryRun([{files:r.join(a,".gitignore"),from:"contrib/",to:"qx_packages/"},{files:r.join(a,".gitignore"),from:"contrib.json",to:"qx-lock.json"}]);case 16:t.markAsApplied();case 17:case"end":return n.stop()}}),n)})))()},migrateManifest:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,o,i,a,c,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getRunner().getDryRun();o=t.getRunner().getVerbose();i=!1;e.t0=_createForOfIteratorHelper;e.next=6;return qx.tool.config.Utils.getManifestModels();case 6:e.t1=e.sent;a=(0,e.t0)(e.t1);e.prev=8;s=_regeneratorRuntime().mark((function e(){var a,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.value;e.next=3;return a.set({warnOnly:!0,validate:!1}).load();case 3:qx.lang.Type.isArray(a.getValue("info.authors"))||(i=!0);n.valid(a.getValue("info.version"))||(i=!0);s={"info.qooxdoo-versions":null,"info.qooxdoo-range":null,"provides.type":null,"requires.qxcompiler":null,"requires.qooxdoo-sdk":null,"requires.qooxdoo-compiler":null};a.keyExists(s)&&(i=!0);if(!i){e.next=20;break}if(!r){e.next=12;break}t.markAsPending(2);e.next=20;break;case 12:a.transform("info.authors",(function(t){return""===t?[]:qx.lang.Type.isString(t)?[{name:t}]:qx.lang.Type.isObject(t)?[{name:t.name,email:t.email}]:qx.lang.Type.isArray(t)?t.map((function(t){return qx.lang.Type.isObject(t)?{name:t.name,email:t.email}:{name:t}})):[]})).transform("info.version",(function(t){var e=n.coerce(t);if(null===e){qx.tool.compiler.Console.warn("Version string '".concat(t,"' in ").concat(a.getDataPath()," is not a valid semver version, will be set to 1.0.0"));return"1.0.0"}return String(e)})).unset("info.qooxdoo-versions").unset("info.qooxdoo-range").unset("provides.type").unset("requires.qxcompiler").unset("requires.qooxdoo-compiler").unset("requires.qooxdoo-sdk");o&&qx.tool.compiler.Console.info("Updated settings in ".concat(a.getRelativeDataPath(),"."));e.next=16;return a.save();case 16:t.markAsApplied();e.next=19;return t.updateDependencyUnlessDryRun(a,"@qooxdoo/compiler","^1.0.0");case 19:o&&qx.tool.compiler.Console.info("Updated dependencies in ".concat(a.getRelativeDataPath(),"."));case 20:e.next=22;return t.updateSchemaUnlessDryRun(a,"https://qooxdoo.org/schema/Manifest-1-0-0.json");case 22:e.next=24;return t.updateQxDependencyUnlessDryRun(a);case 24:if(t.getRunner().getDryRun()){e.next=28;break}a.setValidate(!1);e.next=28;return a.save();case 28:case"end":return e.stop()}}),e)}));a.s();case 11:if((c=a.n()).done){e.next=15;break}return e.delegateYield(s(),"t2",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17;e.t3=e.catch(8);a.e(e.t3);case 20:e.prev=20;a.f();return e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,17,20,23]])})))()},migrateCompileJson:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=qx.tool.config.Compile.getInstance().set({warnOnly:!0,validate:!1});e.next=3;return r.load();case 3:if(r.getValue("eslintConfig.extends")!==(n=["@qooxdoo/qx/browser","@qooxdoo/qx","@qooxdoo/jsdoc-disable"]))if(t.getRunner().getDryRun()){t.announce("eslintConfig.extends will be updated.");t.markAsPending()}else{r.setValue("eslintConfig.extends",n);t.markAsApplied()}e.next=8;return t.updateSchemaUnlessDryRun(r,"https://qooxdoo.org/schema/compile-1-0-0.json");case 8:if(t.getRunner().getDryRun()){e.next=14;break}e.next=11;return r.save();case 11:r.set({validate:!0});e.next=14;return r.load();case 14:case"end":return e.stop()}}),e)})))()}}});qx.tool.migration.M6_0_0.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.migration.BaseMigration":{require:!0},"qx.tool.config.Utils":{}}};qx.Bootstrap.executePendingDefers(t);require("process"),require("upath"),require("semver"),qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.migration.M7_0_0",{extend:qx.tool.migration.BaseMigration,members:{migrateManifest:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getRunner().getDryRun();t.getRunner().getVerbose();!1;e.t0=_createForOfIteratorHelper;e.next=6;return qx.tool.config.Utils.getManifestModels();case 6:e.t1=e.sent;n=(0,e.t0)(e.t1);e.prev=8;n.s();case 10:if((o=n.n()).done){e.next=33;break}i=o.value;e.next=14;return i.set({warnOnly:!0}).load();case 14:if(!i.keyExists("requires.@qooxdoo/compiler")){e.next=23;break}if(!r){e.next=19;break}t.markAsPending("@qooxdoo/compiler dependency will be removed from Manifest.");e.next=23;break;case 19:i.unset("requires.@qooxdoo/compiler");t.markAsApplied();e.next=23;return i.save();case 23:e.next=25;return t.updateSchemaUnlessDryRun(i,"https://qooxdoo.org/schema/Manifest-2-0-0.json");case 25:e.next=27;return t.updateQxDependencyUnlessDryRun(i);case 27:if(r){e.next=31;break}i.setValidate(!1);e.next=31;return i.save();case 31:e.next=10;break;case 33:e.next=38;break;case 35:e.prev=35;e.t2=e.catch(8);n.e(e.t2);case 38:e.prev=38;n.f();return e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[8,35,38,41]])})))()}}});qx.tool.migration.M7_0_0.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new j(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",m={};function v(){}function g(){}function _(){}var x={};u(x,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==r&&n.call(w,a)&&(x=w);var q=_.prototype=v.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=k(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return g.prototype=_,o(q,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(q),t},e.awrap=function(t){return{__await:t}},P(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(q),u(q,s,"Generator"),u(q,a,(function(){return this})),u(q,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,c,"next",t)}function c(t){asyncGeneratorStep(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.tool.utils.Promisify":{require:!0},"qx.Class":{usage:"dynamic",require:!0},"qx.tool.migration.BaseMigration":{require:!0},"qx.tool.config.Utils":{}}};qx.Bootstrap.executePendingDefers(t);require("process"),require("upath"),require("semver"),qx.tool.utils.Promisify.fs;qx.Class.define("qx.tool.migration.M7_5_6",{extend:qx.tool.migration.BaseMigration,members:{migrateManifest:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getRunner().getDryRun();t.getRunner().getVerbose();!1;e.t0=_createForOfIteratorHelper;e.next=6;return qx.tool.config.Utils.getManifestModels();case 6:e.t1=e.sent;n=(0,e.t0)(e.t1);e.prev=8;i=_regeneratorRuntime().mark((function e(){var n,i,a,c,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=o.value).set({warnOnly:!0});e.next=4;return a.load();case 4:c=a.getData();if(void 0!==(null===(n=c.provides)||void 0===n?void 0:n.webfonts)&&void 0===(null===(i=c.provides)||void 0===i?void 0:i.fonts))if(r)t.markAsPending("provides.webfonts will be replaced with provides.fonts");else{t.markAsApplied();s={};c.provides.webfonts.forEach((function(t){var e=s[t.name]={};["defaultSize","comparisonString"].forEach((function(r){var n=t[r];void 0!==n&&(e[r]=n)}));void 0!==t.resources&&(e.sources=t.resources)}));c.provides.fonts=s;delete c.provides.webfonts}if(r){e.next=9;break}e.next=9;return a.save();case 9:case"end":return e.stop()}}),e)}));n.s();case 11:if((o=n.n()).done){e.next=15;break}return e.delegateYield(i(),"t2",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17;e.t3=e.catch(8);n.e(e.t3);case 20:e.prev=20;n.f();return e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,17,20,23]])})))()}}});qx.tool.migration.M7_5_6.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0}}};qx.Bootstrap.executePendingDefers(t);var e=require("fs"),r=require("async");qx.Class.define("qx.tool.utils.files.FindFiles",{extend:qx.core.Object,construct:function(t){qx.core.Object.constructor.call(this);this.__P_517_0=t},properties:{matchFiles:{init:null,nullable:!0,check:"RegEx"}},members:{__P_517_0:null,scan:function(t,n){n=n||function(){};var o=this;!function n(i,a){r.waterfall([function(t){e.readdir(i,t)},function(a,c){r.forEach(a,(function(r,a){e.stat(i+"/"+r,(function(e,c){e?a(e):c.isDirectory()?n(i+"/"+r,a):c.isFile()?o._onFindFile(i+"/"+r,t,a):a()}))}),c)}],a)}(this.__P_517_0,n)},_onFindFile:function(t,e,r){var n=this.getMatchFiles();n&&!n.test(t)||e(t,r)}}});qx.tool.utils.files.FindFiles.$$dbClassInfo=t}();qx.$$packageData[1]={locales:{},resources:{},translations:{}};
//# sourceMappingURL=package-1.js.map