{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/layout/ResizeHandler.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "states",
    "cv",
    "ui",
    "layout",
    "States",
    "$pageSize",
    "$navbarTop",
    "$navbarBottom",
    "width",
    "height",
    "__initial",
    "__backdropRetries",
    "validationQueue",
    "reset",
    "resetAll",
    "__request",
    "getPageSize",
    "noCache",
    "document",
    "querySelector",
    "getNavbarTop",
    "getNavbarBottom",
    "queueJob",
    "callback",
    "indexOf",
    "push",
    "bom",
    "AnimationFrame",
    "request",
    "flush",
    "length",
    "job",
    "shift",
    "apply",
    "makeAllSizesValid",
    "isPageSizeInvalid",
    "makePagesizeValid",
    "isNavbarInvalid",
    "makeNavbarValid",
    "isRowspanInvalid",
    "makeRowspanValid",
    "isBackdropInvalid",
    "makeBackdropValid",
    "__makeBackdropValid",
    "log",
    "Logger",
    "debug",
    "templateEngine",
    "TemplateEngine",
    "getInstance",
    "page",
    "getCurrentPage",
    "getPageType",
    "cssPosRegEx",
    "backdrop",
    "getDomElement",
    "getBackdropType",
    "backdropSVG",
    "getSVGDocument",
    "backdropBBox",
    "children",
    "getBBox",
    "backdropNWidth",
    "naturalWidth",
    "backdropNHeight",
    "naturalHeight",
    "backdropScale",
    "Math",
    "min",
    "backdropWidth",
    "backdropHeight",
    "backdropPos",
    "getBackdropAlign",
    "split",
    "backdropLeftRaw",
    "match",
    "backdropTopRaw",
    "backdropLeft",
    "backdropTop",
    "uagent",
    "navigator",
    "userAgent",
    "toLowerCase",
    "complete",
    "event",
    "Timer",
    "once",
    "invalidateBackdrop",
    "Object",
    "entries",
    "left",
    "top",
    "forEach",
    "key_value",
    "style",
    "querySelectorAll",
    "widgetContainer",
    "widget",
    "structure",
    "WidgetFactory",
    "getInstanceById",
    "id",
    "value",
    "getResponsiveLayout",
    "scale",
    "x",
    "y",
    "e",
    "name",
    "error",
    "setBackdropInvalid",
    "__makeNavbarValid",
    "Manager",
    "adjustColumns",
    "applyColumnWidths",
    "setNavbarInvalid",
    "__makePagesizeValid",
    "Config",
    "currentPageId",
    "isInitialized",
    "addListenerOnce",
    "getAvailableWidth",
    "getAvailableHeight",
    "pageSizeElement",
    "innerHTML",
    "setPageSizeInvalid",
    "__makeRowspanValid",
    "elem",
    "dom",
    "Element",
    "create",
    "body",
    "appendChild",
    "__updateRowHeight",
    "rect",
    "getBoundingClientRect",
    "round",
    "bottom",
    "self",
    "styles",
    "rowspan",
    "configSettings",
    "usedRowspans",
    "calcrowspan",
    "parentNode",
    "removeChild",
    "rowSpanStyle",
    "setRowspanInvalid",
    "invalidateNavbar",
    "invalidateRowspan",
    "invalidateScreensize",
    "set",
    "pageSizeInvalid",
    "rowspanInvalid",
    "navbarInvalid",
    "backdropInvalid",
    "ResizeHandler"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ResizeHandler.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/*\n * Make sure everything looks right when the window gets resized. This is\n * necessary as the scroll effect requires a fixed element size\n */\n/**\n * Manager for all resizing issues. It ensures that the real resizing\n * calculations are only done as often as really necessary.\n *\n */\nqx.Class.define('cv.ui.layout.ResizeHandler', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    states: new cv.ui.layout.States(),\n\n    $pageSize: null,\n    $navbarTop: null,\n    $navbarBottom: null,\n    width: 0,\n    height: 0,\n    __initial: true,\n\n    __backdropRetries: 0,\n\n    validationQueue: [],\n\n    reset: function() {\n      this.states.resetAll();\n      this.$pageSize = null;\n      this.$navbarTop = null;\n      this.$navbarBottom = null;\n      this.width = 0;\n      this.height = 0;\n    },\n\n    __request : null,\n\n    getPageSize: function (noCache) {\n      if (!this.$pageSize || noCache === true) {\n        this.$pageSize = document.querySelector('#pageSize');\n      }\n      return this.$pageSize;\n    },\n\n    getNavbarTop: function (noCache) {\n      if (!this.$navbarTop || noCache === true) {\n        this.$navbarTop = document.querySelector('#navbarTop');\n      }\n      return this.$navbarTop;\n    },\n\n    getNavbarBottom: function (noCache) {\n      if (!this.$navbarBottom || noCache === true) {\n        this.$navbarBottom = document.querySelector('#navbarBottom');\n      }\n      return this.$navbarBottom;\n    },\n\n    queueJob: function(callback) {\n      if (this.validationQueue.indexOf(callback) === -1) {\n        this.validationQueue.push(callback);\n      }\n      if (!this.__request) {\n        this.__request = qx.bom.AnimationFrame.request(this.flush, this);\n      }\n    },\n\n    flush: function() {\n      while (this.validationQueue.length) {\n        const job = this.validationQueue.shift();\n        job.apply(this);\n      }\n      this.__request = null;\n    },\n\n    makeAllSizesValid : function() {\n      if (this.states.isPageSizeInvalid()) {\n this.makePagesizeValid(); \n} // must be first due to dependencies\n      if (this.states.isNavbarInvalid()) {\n this.makeNavbarValid(); \n}\n      if (this.states.isRowspanInvalid()) {\n this.makeRowspanValid(); \n}\n      if (this.states.isBackdropInvalid()) {\n this.makeBackdropValid(); \n}\n    },\n\n    makeBackdropValid: function () {\n      this.queueJob(this.__makeBackdropValid);\n    },\n\n    __makeBackdropValid: function () {\n      qx.log.Logger.debug(this, 'makeBackdropValid');\n      // TODO: this is structure.pure specific and should be handled by the structure itself\n      const templateEngine = cv.TemplateEngine.getInstance();\n      const page = templateEngine.getCurrentPage();\n      if (!page) {\n        return;\n      }\n      // TODO use page object\n\n      if (page.getPageType() === '2d') {\n        const cssPosRegEx = /(\\d*)(.*)/;\n        const backdrop = page.getDomElement().querySelector('div > ' + page.getBackdropType());\n        try {\n          const backdropSVG = page.getBackdropType() === 'embed' ? backdrop.getSVGDocument() : null;\n          const backdropBBox = backdropSVG ? backdropSVG.children[0].getBBox() : {};\n          const backdropNWidth = backdrop.naturalWidth || backdropBBox.width || this.width;\n          const backdropNHeight = backdrop.naturalHeight || backdropBBox.height || this.height;\n          const backdropScale = Math.min(this.width / backdropNWidth, this.height / backdropNHeight);\n          const backdropWidth = backdropNWidth * backdropScale;\n          const backdropHeight = backdropNHeight * backdropScale;\n          const backdropPos = page.getBackdropAlign().split(' ');\n          const backdropLeftRaw = backdropPos[0].match(cssPosRegEx);\n          const backdropTopRaw = backdropPos[1].match(cssPosRegEx);\n          const backdropLeft = backdropLeftRaw[2] === '%' ? (this.width > backdropWidth ? ((this.width - backdropWidth) * (+backdropLeftRaw[1]) / 100) : 0) : +backdropLeftRaw[1];\n          const backdropTop = backdropTopRaw[2] === '%' ? (this.height > backdropHeight ? ((this.height - backdropHeight) * (+backdropTopRaw[1]) / 100) : 0) : +backdropTopRaw[1];\n          const uagent = navigator.userAgent.toLowerCase();\n\n          if (backdrop.complete === false ||\n            (page.getBackdropType() === 'embed' && backdropSVG === null) ||\n            (backdropBBox.width === 0 && backdropBBox.height === 0) ||\n            (this.width === 0 && this.height === 0)\n          ) {\n            // backdrop not available yet - reload\n            qx.event.Timer.once(this.invalidateBackdrop, this, 100);\n            return;\n          }\n\n          // Note 1: this here is a work around for older browsers that can't use\n          // the object-fit property yet.\n          // Currently (26.05.16) only Safari is known to not support\n          // object-position although object-fit itself does work\n          // Note 2: The embed element allways needs it\n          if (\n            page.getBackdropType() === 'embed' ||\n            (uagent.indexOf('safari') !== -1 && uagent.indexOf('chrome') === -1)\n          ) {\n            Object.entries({\n              width: backdropWidth + 'px',\n              height: backdropHeight + 'px',\n              left: backdropLeft + 'px',\n              top: backdropTop + 'px'\n            }).forEach(function(key_value) {\n backdrop.style[key_value[0]]=key_value[1]; \n});\n          }\n\n          page.getDomElement().querySelectorAll('.widget_container').forEach(function (widgetContainer) {\n            const widget = cv.ui.structure.WidgetFactory.getInstanceById(widgetContainer.id);\n            let value;\n            const layout = widget.getResponsiveLayout();\n            let scale = backdropScale;\n            if (layout) {\n              // this assumes that a .widget_container has only one child and this\n              // is the .widget itself\n              const style = widgetContainer.children[0].style;\n              if (layout.scale === 'false') {\n                scale = 1.0;\n              }\n\n              if ('x' in layout) {\n                value = layout.x.match(cssPosRegEx);\n                if (value[2] === 'px') {\n                  style.left = (backdropLeft + value[1] * scale) + 'px';\n                } else {\n                  style.left = layout.x;\n                }\n              }\n\n              if ('y' in layout) {\n                value = layout.y.match(cssPosRegEx);\n                if (value[2] === 'px') {\n                  style.top = (backdropTop + value[1] * scale) + 'px';\n                } else {\n                  style.top = layout.y;\n                }\n              }\n\n              if ('width' in layout) {\n                style.width = layout.width;\n              }\n\n              if ('height' in layout) {\n                style.height = layout.height;\n              }\n            }\n          }, this);\n          this.__backdropRetries = 0;\n        } catch (e) {\n          if (e.name === 'NotSupportedError') {\n            if (this.__backdropRetries <= 5) {\n              qx.bom.AnimationFrame.request(this.__makeBackdropValid, this);\n              this.__backdropRetries++;\n            }\n          }\n          qx.log.Logger.error(this, e);\n        }\n      }\n\n      this.states.setBackdropInvalid(false);\n    },\n\n    makeNavbarValid: function () {\n      this.queueJob(this.__makeNavbarValid);\n    },\n\n    __makeNavbarValid: function() {\n      qx.log.Logger.debug(this, 'makeNavbarValid');\n      if (cv.ui.layout.Manager.adjustColumns()) {\n        // the amount of columns has changed -> recalculate the widgets widths\n        cv.ui.layout.Manager.applyColumnWidths();\n      }\n      this.states.setNavbarInvalid(false);\n    },\n\n    makePagesizeValid: function () {\n      if (this.__initial === true) {\n        // do not queue -> call now\n        this.__initial = false;\n        this.__makePagesizeValid();\n      } else {\n        this.queueJob(this.__makePagesizeValid);\n      }\n    },\n\n    __makePagesizeValid: function() {\n      if (!cv.Config.currentPageId) {\n return; \n}\n      qx.log.Logger.debug(this, 'makePagesizeValid');\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.currentPageId);\n      if (page && !page.isInitialized()) {\n        page.addListenerOnce('changeInitialized', this.__makePagesizeValid, this);\n        return;\n      }\n      this.width = cv.ui.layout.Manager.getAvailableWidth();\n      this.height = cv.ui.layout.Manager.getAvailableHeight();\n      const pageSizeElement = this.getPageSize();\n\n      if (pageSizeElement) {\n        pageSizeElement.innerHTML = '#main,.page{width:' + this.width + 'px;height:' + this.height + 'px;}';\n      }\n\n      this.states.setPageSizeInvalid(false);\n    },\n\n    makeRowspanValid: function () {\n      this.queueJob(this.__makeRowspanValid);\n    },\n\n    __makeRowspanValid: function () {\n      qx.log.Logger.debug(this, 'makeRowspanValid');\n      let elem = document.querySelector('#calcrowspan');\n      if (!elem) {\n        elem = qx.dom.Element.create('div', {\n          'class': 'clearfix',\n          'id': 'calcrowspan',\n          'html': '<div id=\"containerDiv\" class=\"widget_container\"><div class=\"widget clearfix text\" id=\"innerDiv\"></div>'\n        });\n        document.body.appendChild(elem);\n      }\n      // use the internal div for height as in mobile view the elem uses the full screen height\n      this.__updateRowHeight(elem.querySelector('#containerDiv'));\n    },\n\n    __updateRowHeight: function(elem) {\n      const rect = elem.getBoundingClientRect();\n      const height = Math.round(rect.bottom - rect.top);\n      if (height === 0) {\n        // not ready try again\n        const self = this;\n        qx.bom.AnimationFrame.request(function() {\n self.__updateRowHeight(elem); \n}, this);\n        return;\n      }\n      let styles = '';\n\n      for (let rowspan in cv.Config.configSettings.usedRowspans) {\n        styles += '.rowspan.rowspan' + rowspan + ' { height: ' + Math.round(rowspan * height) + 'px;}\\n';\n      }\n      const calcrowspan = document.querySelector('#calcrowspan');\n      if (calcrowspan) {\n        calcrowspan.parentNode.removeChild(calcrowspan);\n      }\n\n      // set css style\n      const rowSpanStyle = document.querySelector('#rowspanStyle');\n      if (rowSpanStyle) {\n        rowSpanStyle.innerHTML = styles;\n      }\n      this.states.setRowspanInvalid(false);\n    },\n\n    invalidateBackdrop: function () {\n      qx.log.Logger.debug(this, 'backdrop');\n      this.states.setBackdropInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateNavbar: function () {\n      qx.log.Logger.debug(this, 'invalidateNavbar');\n      this.states.setNavbarInvalid(true);\n      this.states.setPageSizeInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateRowspan: function () {\n      this.states.setRowspanInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateScreensize: function () {\n      qx.log.Logger.debug(this, 'invalidateScreensize');\n      this.states.set({\n        pageSizeInvalid: true,\n        rowspanInvalid: true,\n        navbarInvalid: true,\n        backdropInvalid: true\n      });\n      this.makeAllSizesValid();\n    }\n  }\n});\n"
  ]
}