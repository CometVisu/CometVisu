{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "addListenerOnce",
    "__initListeners",
    "members",
    "__olid",
    "__ilid",
    "__downTarget",
    "actors",
    "__getActors",
    "isBindClickToWidget",
    "getInteractionElement",
    "forEach",
    "actor",
    "event",
    "Registration",
    "addListener",
    "buttonPressed",
    "getActor",
    "getActors",
    "a",
    "indexOf",
    "push",
    "getCurrentTarget",
    "document",
    "buttonReleased",
    "buttons",
    "__updateButtons",
    "pressed",
    "button",
    "classList",
    "add",
    "remove",
    "removeListener",
    "removeListenerById",
    "destruct",
    "cv",
    "ui",
    "common",
    "HasAnimatedButton"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/common/HasAnimatedButton.js"
  ],
  "sourcesContent": [
    "/* HasAnimatedButton.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Mixin.define('cv.ui.common.HasAnimatedButton', {\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct() {\n    this.addListenerOnce('domReady', this.__initListeners, this);\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __olid: null,\n    __ilid: null,\n    __downTarget: null,\n\n    __initListeners() {\n      let actors = this.__getActors();\n      if (this.isBindClickToWidget()) {\n        actors = [this.getInteractionElement()];\n      }\n      actors.forEach(function (actor) {\n        qx.event.Registration.addListener(actor, 'pointerdown', this.buttonPressed, this);\n      }, this);\n    },\n\n    __getActors() {\n      const actors = [this.getActor()];\n      if (this.getActors) {\n        this.getActors().forEach(function (a) {\n          if (actors.indexOf(a) === -1) {\n            actors.push(a);\n          }\n        });\n      }\n      return actors;\n    },\n\n    /**\n     * Create an action handling that shows a button press animation.\n     * When the action is not set, it will be searched for - so that widgets\n     * with bind_click_to_widget will also work.\n     *\n     * @param event {Event} pointerdown event\n     */\n    buttonPressed(event) {\n      const actor = event.getCurrentTarget();\n      this.__downTarget = actor;\n      qx.event.Registration.addListener(document, 'pointerup', this.buttonReleased, this);\n\n      const buttons = this.isBindClickToWidget() ? this.__getActors() : [actor];\n      this.__updateButtons(buttons, true);\n      this.__olid = qx.event.Registration.addListener(\n        actor,\n        'pointerout',\n        function () {\n          this.__updateButtons(buttons, false);\n        },\n        this\n      );\n\n      this.__ilid = qx.event.Registration.addListener(\n        actor,\n        'pointerover',\n        function () {\n          this.__updateButtons(buttons, true);\n        },\n        this\n      );\n    },\n\n    __updateButtons(buttons, pressed) {\n      if (pressed) {\n        buttons.forEach(function (button) {\n          if (button) {\n            button.classList.add('switchPressed');\n            button.classList.remove('switchUnpressed');\n          }\n        });\n      } else {\n        buttons.forEach(function (button) {\n          if (button) {\n            button.classList.add('switchUnpressed');\n            button.classList.remove('switchPressed');\n          }\n        });\n      }\n    },\n\n    /**\n     * Create an action handling that shows a button unpress animation.\n     * When the action is not set, it will be searched for - so that widgets\n     * with bind_click_to_widget will also work.\n     *\n     * @param event {Event} pointerup event\n     */\n    buttonReleased(event) {\n      qx.event.Registration.removeListener(document, 'pointerup', this.buttonReleased, this);\n\n      const actor = this.__downTarget;\n      const buttons = this.isBindClickToWidget() ? this.__getActors() : [actor];\n      this.__updateButtons(buttons, false);\n      if (this.__olid) {\n        qx.event.Registration.removeListenerById(actor, this.__olid);\n      }\n      if (this.__ilid) {\n        qx.event.Registration.removeListenerById(actor, this.__ilid);\n      }\n      this.__olid = null;\n      this.__ilid = null;\n      this.__downTarget = null;\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    qx.event.Registration.addListener(document, 'pointerup', this.buttonReleased, this);\n  }\n});\n"
  ],
  "mappings": "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"
}