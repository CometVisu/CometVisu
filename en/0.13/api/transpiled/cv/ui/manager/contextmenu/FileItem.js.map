{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/contextmenu/FileItem.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "menu",
    "Menu",
    "construct",
    "file",
    "noCompare",
    "_noCompare",
    "_commandGroup",
    "core",
    "Init",
    "getApplication",
    "getCommandManager",
    "getActive",
    "_init",
    "_dateFormat",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "_timeFormat",
    "getTimeFormat",
    "configure",
    "addListener",
    "setActive",
    "properties",
    "appearance",
    "refine",
    "init",
    "active",
    "check",
    "members",
    "_selectedNode",
    "_renameDialog",
    "isFolder",
    "getType",
    "folder",
    "getParent",
    "isBackup",
    "getFullPath",
    "startsWith",
    "getChildControl",
    "exclude",
    "set",
    "enabled",
    "isWriteable",
    "visibility",
    "setVisibility",
    "isConfigFile",
    "isMounted",
    "setLabel",
    "isTrash",
    "tr",
    "compareMenu",
    "removeAll",
    "show",
    "backups",
    "cv",
    "manager",
    "model",
    "BackupFolder",
    "getInstance",
    "getBackupFiles",
    "setEnabled",
    "length",
    "sort",
    "a",
    "b",
    "date",
    "getTime",
    "group",
    "forEach",
    "backupEntry",
    "add",
    "Separator",
    "groupButton",
    "Button",
    "button",
    "setUserData",
    "_onCompareWith",
    "defaultHandler",
    "control",
    "FileHandlerRegistry",
    "getFileHandler",
    "openWithMenu",
    "availableHandlers",
    "getAllFileHandlers",
    "Clazz",
    "constructor",
    "TITLE",
    "toString",
    "localeCompare",
    "handlerConf",
    "ICON",
    "setAppearance",
    "classname",
    "addState",
    "_onOpenWith",
    "_replacementManager",
    "setFilename",
    "getName",
    "setFolder",
    "controlName",
    "isFake",
    "isInTrash",
    "label",
    "_noNew",
    "sep",
    "bind",
    "ev",
    "isActive",
    "compareWith",
    "getTarget",
    "getUserData",
    "event",
    "message",
    "Bus",
    "dispatchByName",
    "CompareFiles",
    "handlerId",
    "handler",
    "_onRename",
    "dialog",
    "Prompt",
    "callback",
    "name",
    "FileController",
    "rename",
    "context",
    "value",
    "caption",
    "filter",
    "_onDownload",
    "download",
    "_onRestore",
    "restore",
    "_onValidate",
    "validate",
    "_onClone",
    "_onConvert",
    "_createChildControlImpl",
    "id",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "com",
    "zenesis",
    "upload",
    "UploadMenuButton",
    "UploadMgr",
    "setForce",
    "addWidget",
    "destruct",
    "_disposeObjects",
    "contextmenu",
    "FileItem"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* FileItem.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n *\n */\nqx.Class.define('cv.ui.manager.contextmenu.FileItem', {\n  extend: qx.ui.menu.Menu,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (file, noCompare) {\n    this.base(arguments);\n    this._noCompare = noCompare === true;\n    this._commandGroup = qx.core.Init.getApplication().getCommandManager().getActive();\n    this._init();\n    this._dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('medium'));\n    this._timeFormat = new qx.util.format.DateFormat(qx.locale.Date.getTimeFormat('medium'));\n\n    if (file) {\n      this.configure(file);\n    }\n\n    // only react to events when this menu is visible\n    this.addListener('appear', function () {\n      this.setActive(true);\n    });\n    this.addListener('disappear', function () {\n      this.setActive(false);\n    });\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'cv-file-contextmenu'\n    },\n    \n    /* This flag enables the event handling for this menu */\n    active: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _commandGroup: null,\n    _selectedNode: null,\n    _dateFormat: null,\n    _timeFormat: null,\n    _renameDialog: null,\n    _noCompare: false,\n\n    configure: function (file) {\n      this._selectedNode = file;\n      if (file) {\n        const isFolder = file.getType() === 'dir';\n        const folder = isFolder ? file : file.getParent();\n        let isBackup = false;\n        if (folder && folder.getFullPath().startsWith('backup') || file.getFullPath().startsWith('backup')) {\n          isBackup = true;\n        }\n        if (!isFolder) {\n          this.getChildControl('new-file-button').exclude();\n          this.getChildControl('new-folder-button').exclude();\n        } else {\n          this.getChildControl('new-file-button').set({\n            enabled: folder && !isBackup ? folder.isWriteable() : false,\n            visibility: 'visible'\n          });\n          this.getChildControl('new-folder-button').set({\n            enabled: folder && !isBackup ? folder.isWriteable() : false,\n            visibility: 'visible'\n          });\n        }\n        this.getChildControl('clone-file-button').setVisibility(file.isConfigFile() && !isBackup ? 'visible' : 'excluded');\n        this.getChildControl('convert-file-button').setVisibility(file.isConfigFile() && !file.isMounted() && !isBackup ? 'visible' : 'excluded');\n        this.getChildControl('delete-button').setLabel(file.isTrash()\n          ? this.tr('Clear')\n          : this.tr('Delete'));\n\n        // create compare menu\n        if (!this._noCompare) {\n          const compareMenu = this.getChildControl('compare-menu');\n          compareMenu.removeAll();\n          if (!isBackup) {\n            this.getChildControl('compare-with-button').show();\n            const backups = cv.ui.manager.model.BackupFolder.getInstance().getBackupFiles(file);\n            this.getChildControl('compare-with-button').setEnabled(backups.length > 0);\n            backups.sort(function (a, b) {\n              return b.date.getTime() - a.date.getTime();\n            });\n            let group = null;\n            backups.forEach(function (backupEntry) {\n              const date = this._dateFormat.format(backupEntry.date);\n              if (group !== date) {\n                if (group !== null) {\n                  compareMenu.add(new qx.ui.menu.Separator());\n                }\n                const groupButton = new qx.ui.menu.Button(date);\n                groupButton.setEnabled(false);\n                compareMenu.add(groupButton);\n                group = date;\n              }\n              const button = new qx.ui.menu.Button(this.tr('Backup from %1', this._timeFormat.format(backupEntry.date)));\n              button.setUserData('file', backupEntry.file);\n              button.addListener('execute', this._onCompareWith, this);\n              compareMenu.add(button);\n            }, this);\n          } else {\n            this.getChildControl('compare-with-button').exclude();\n          }\n        }\n\n        const defaultHandler = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n\n        // open with menu\n        const openWithMenu = this.getChildControl('open-with-menu');\n        openWithMenu.removeAll();\n        if (!isBackup) {\n          this.getChildControl('open-with-button').show();\n          const availableHandlers = cv.ui.manager.control.FileHandlerRegistry.getInstance().getAllFileHandlers(file);\n\n          // this menu only makes sense when there is more than one option to select from\n          this.getChildControl('open-with-button').setEnabled(availableHandlers.length > 1);\n          availableHandlers.sort(function (a, b) {\n            return a.Clazz.constructor.TITLE.toString().localeCompare(b.Clazz.constructor.TITLE.toString());\n          });\n          availableHandlers.forEach(function (handlerConf) {\n            const button = new qx.ui.menu.Button(handlerConf.Clazz.constructor.TITLE, handlerConf.Clazz.constructor.ICON);\n            button.setAppearance('open-with-button');\n            if (defaultHandler.Clazz.classname === handlerConf.Clazz.classname) {\n              button.addState('default');\n            }\n            button.setUserData('handlerId', handlerConf.Clazz.classname);\n            button.addListener('execute', this._onOpenWith, this);\n            openWithMenu.add(button);\n          }, this);\n        } else {\n          this.getChildControl('open-with-button').exclude();\n        }\n\n        // validate button\n        this.getChildControl('validate-config-button').setVisibility(file.isConfigFile() && !file.isMounted() && !isBackup ? 'visible' : 'excluded');\n\n        // replacement button\n        if (!isFolder && !isBackup) {\n          this.getChildControl('replace-button').show();\n          this._replacementManager.setFilename(file.getName());\n          this._replacementManager.setFolder(file.getParent());\n        } else {\n          this.getChildControl('replace-button').exclude();\n        }\n        // buttons that need write access\n        ['delete-button', 'replace-button', 'rename-button'].forEach(function (controlName) {\n          this.getChildControl(controlName).setEnabled(!file.isFake() && file.isWriteable() && (!isBackup || controlName === 'delete-button'));\n        }, this);\n        this.getChildControl('download-button').setEnabled(!file.isFake() && file.getType() === 'file');\n        this.getChildControl('restore-button').setVisibility(file.isInTrash() || isBackup ? 'visible' : 'excluded');\n      } else {\n        this.getChildControl('delete-button').set({\n          label: this.tr('Delete'),\n          enabled: false\n        });\n        this.getChildControl('replace-button').exclude();\n        this.getChildControl('download-button').setEnabled(false);\n        this.getChildControl('restore-button').exclude();\n      }\n    },\n\n    _init: function () {\n      if (!this._noNew) {\n        this.add(this.getChildControl('new-file-button'));\n      }\n      this.add(this.getChildControl('clone-file-button'));\n      this.add(this.getChildControl('convert-file-button'));\n      if (!this._noNew) {\n        this.add(this.getChildControl('new-folder-button'));\n      }\n      this.add(new qx.ui.menu.Separator());\n      this.add(this.getChildControl('open-button'));\n      this.add(this.getChildControl('open-with-button'));\n      if (!this._noCompare) {\n        this.add(this.getChildControl('compare-with-button'));\n      }\n      this.add(new qx.ui.menu.Separator());\n      this.add(this.getChildControl('rename-button'));\n      this.add(this.getChildControl('delete-button'));\n      this.add(this.getChildControl('restore-button'));\n      this.add(new qx.ui.menu.Separator());\n      this.add(this.getChildControl('download-button'));\n      let sep = new qx.ui.menu.Separator();\n      let button = this.getChildControl('replace-button');\n      this.add(sep);\n      this.add(button);\n      button.bind('visibility', sep, 'visibility');\n      sep = new qx.ui.menu.Separator();\n      button = this.getChildControl('validate-config-button');\n      button.bind('visibility', sep, 'visibility');\n      this.add(sep);\n      this.add(button);\n    },\n\n    _onCompareWith: function (ev) {\n      if (this.isActive()) {\n        const compareWith = ev.getTarget().getUserData('file');\n        qx.event.message.Bus.dispatchByName('cv.manager.compareFiles',\n          new cv.ui.manager.model.CompareFiles(compareWith, this._selectedNode)\n        );\n      }\n    },\n\n    _onOpenWith: function (ev) {\n      if (this.isActive()) {\n        const handlerId = ev.getTarget().getUserData('handlerId');\n        qx.event.message.Bus.dispatchByName('cv.manager.openWith', {\n          file: this._selectedNode,\n          handler: handlerId\n        });\n      }\n    },\n\n    _onRename: function () {\n      if (this._selectedNode && this.isActive()) {\n        if (!this._renameDialog) {\n          this._renameDialog = new cv.ui.manager.dialog.Prompt({\n            message: this.tr('New name'),\n            callback: function (name) {\n              if (name && name !== this._selectedNode.getName()) {\n                cv.ui.manager.control.FileController.getInstance().rename(this._selectedNode, name);\n              }\n            },\n            context: this,\n            value: this._selectedNode.getName(),\n            caption: this.tr('Rename file'),\n            filter: /[\\w\\d_\\-\\.\\s]/\n          });\n        }\n        this._renameDialog.show();\n      }\n    },\n\n    _onDownload: function () {\n      if (this._selectedNode && this.isActive()) {\n        cv.ui.manager.control.FileController.getInstance().download(this._selectedNode);\n      }\n    },\n\n    _onRestore: function () {\n      if (this._selectedNode && this.isActive()) {\n        cv.ui.manager.control.FileController.getInstance().restore(this._selectedNode);\n      }\n    },\n\n    _onValidate: function () {\n      if (this._selectedNode && this.isActive()) {\n        cv.ui.manager.control.FileController.getInstance().validate(this._selectedNode);\n      }\n    },\n\n    _onClone: function () {\n      if (this._selectedNode && this.isActive()) {\n        qx.event.message.Bus.dispatchByName('cv.manager.action.clone', {\n          file: this._selectedNode\n        });\n      }\n    },\n\n    _onConvert: function () {\n      if (this._selectedNode && this.isActive()) {\n        qx.event.message.Bus.dispatchByName('cv.manager.action.convertToTile', {\n          file: this._selectedNode\n        });\n      }\n    },\n\n    // overridden\n    _createChildControlImpl : function(id) {\n      let control;\n\n      switch (id) {\n         case 'new-file-button':\n           control = new qx.ui.menu.Button(this.tr('New file'), cv.theme.dark.Images.getIcon('new-file', 18));\n           control.addListener('execute', function () {\n             if (this._selectedNode.isConfigFile()) {\n               qx.event.message.Bus.dispatchByName('cv.manager.action.new-config-file', this._selectedNode.getParent());\n             } else {\n               qx.event.message.Bus.dispatchByName('cv.manager.action.new-file', this._selectedNode.getType() === 'dir' ? this._selectedNode : this._selectedNode.getParent());\n             }\n           }, this);\n           break;\n\n         case 'clone-file-button':\n           control = new qx.ui.menu.Button(this.tr('Clone file'), cv.theme.dark.Images.getIcon('clone-file', 18));\n           control.exclude();\n           control.addListener('execute', this._onClone, this);\n           break;\n\n         case 'new-folder-button':\n           control = new qx.ui.menu.Button(this.tr('New folder'), cv.theme.dark.Images.getIcon('new-folder', 18));\n           control.addListener('execute', function () {\n             qx.event.message.Bus.dispatchByName('cv.manager.action.new-folder', this._selectedNode.getType() === 'dir' ? this._selectedNode : this._selectedNode.getParent());\n           }, this);\n           break;\n\n         case 'rename-button':\n           control = new qx.ui.menu.Button(this.tr('Rename'), cv.theme.dark.Images.getIcon('rename', 18));\n           control.addListener('execute', this._onRename, this);\n           break;\n\n         case 'delete-button':\n           control = new qx.ui.menu.Button(this.tr('Delete'), cv.theme.dark.Images.getIcon('delete', 18));\n           control.addListener('execute', function () {\n             qx.event.message.Bus.dispatchByName('cv.manager.action.delete', this._selectedNode);\n           }, this);\n           break;\n\n         case 'download-button':\n           control = new qx.ui.menu.Button(this.tr('Download'), cv.theme.dark.Images.getIcon('download', 18));\n           control.addListener('execute', this._onDownload, this);\n           break;\n\n         case 'open-button':\n           control = new qx.ui.menu.Button(this.tr('Open'), cv.theme.dark.Images.getIcon('open', 18));\n           control.addListener('execute', function () {\n             qx.event.message.Bus.dispatchByName('cv.manager.open', this._selectedNode);\n           }, this);\n           break;\n\n         case 'restore-button':\n           control = new qx.ui.menu.Button(this.tr('Restore'), cv.theme.dark.Images.getIcon('trash', 18));\n           control.exclude();\n           control.addListener('execute', this._onRestore, this);\n           break;\n\n         case 'validate-config-button':\n           control = new qx.ui.menu.Button(this.tr('Validate'), cv.theme.dark.Images.getIcon('validate', 18));\n           control.exclude();\n           control.addListener('execute', this._onValidate, this);\n           break;\n\n         case 'replace-button':\n           control = new com.zenesis.qx.upload.UploadMenuButton(this.tr('Replace'), cv.theme.dark.Images.getIcon('upload', 18));\n           control.exclude();\n           this._replacementManager = new cv.ui.manager.upload.UploadMgr();\n           this._replacementManager.setForce(true);\n           this._replacementManager.addWidget(control);\n           break;\n\n         case 'compare-menu':\n           control = new qx.ui.menu.Menu();\n           break;\n\n         case 'compare-with-button':\n           control = new qx.ui.menu.Button(this.tr('Compare with...'), cv.theme.dark.Images.getIcon('compare', 18), null, this.getChildControl('compare-menu'));\n           break;\n\n         case 'open-with-button':\n           control = new qx.ui.menu.Button(this.tr('Open with...'), cv.theme.dark.Images.getIcon('open-with', 18), null, this.getChildControl('open-with-menu'));\n           break;\n\n         case 'open-with-menu':\n           control = new qx.ui.menu.Menu();\n           break;\n\n        case 'convert-file-button':\n          control = new qx.ui.menu.Button(this.tr('Convert to tile structure'), cv.theme.dark.Images.getIcon('convert', 18));\n          control.addListener('execute', this._onConvert, this);\n          break;\n       }\n\n       return control || this.base(arguments, id);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._commandGroup = null;\n    this._renameDialog = null;\n    this._disposeObjects('_dateFormat', '_timeFormat');\n  }\n});\n"
  ]
}