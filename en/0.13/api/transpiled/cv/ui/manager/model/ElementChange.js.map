{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "title",
    "element",
    "changes",
    "type",
    "constructor",
    "call",
    "setTitle",
    "setElement",
    "setChanges",
    "setChangeType",
    "properties",
    "check",
    "changeType",
    "init",
    "members",
    "undo",
    "getElement",
    "success",
    "change",
    "isDisposed",
    "getChangeType",
    "getChanges",
    "forEach",
    "cv",
    "ui",
    "manager",
    "model",
    "ElementChange",
    "setAttribute",
    "attribute",
    "old",
    "updateModified",
    "parent",
    "insertChild",
    "child",
    "index",
    "remove",
    "moveTo",
    "oldParent",
    "oldIndex",
    "redo",
    "value"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/model/ElementChange.js"
  ],
  "sourcesContent": [
    "/* ElementChange.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * An atomic change on an cv.ui.manager.model.XmlElement that can be undone / redone.\n */\nqx.Class.define('cv.ui.manager.model.ElementChange', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(title, element, changes, type) {\n    super();\n    this.setTitle(title);\n    this.setElement(element);\n    this.setChanges(changes);\n    this.setChangeType(type || 'content');\n  },\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    element: {\n      check: 'cv.ui.manager.model.XmlElement'\n    },\n\n    title: {\n      check: 'String'\n    },\n\n    changes: {\n      check: 'Array'\n    },\n\n    changeType: {\n      check: ['content', 'created', 'deleted', 'moved'],\n      init: ['content']\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * Undo all changes\n     * @return {Boolean} true if all changes are undone\n     */\n    undo() {\n      const element = this.getElement();\n      let success = false;\n      let change;\n      if (!element.isDisposed()) {\n        switch (this.getChangeType()) {\n          case 'content':\n            this.getChanges().forEach(change => {\n              if (change instanceof cv.ui.manager.model.ElementChange) {\n                change.undo();\n              } else {\n                element.setAttribute(change.attribute, change.old);\n              }\n            });\n            element.updateModified();\n            success = true;\n            break;\n\n          case 'deleted':\n            change = this.getChanges()[0];\n            if (change.parent) {\n              success = change.parent.insertChild(change.child, change.index, true);\n            }\n            break;\n\n          case 'created':\n            change = this.getChanges()[0];\n            if (change.child) {\n              change.child.remove(true);\n              success = true;\n            }\n            break;\n\n          case 'moved':\n            change = this.getChanges()[0];\n            success = change.child.moveTo(change.oldParent, change.oldIndex, true);\n\n            break;\n        }\n      }\n      return success;\n    },\n\n    /**\n     * Redo all change\n     *  @return {Boolean} true if all changes are redone\n     */\n    redo() {\n      const element = this.getElement();\n      let success = false;\n      let change;\n      if (!element.isDisposed()) {\n        switch (this.getChangeType()) {\n          case 'content':\n            this.getChanges().forEach(change => {\n              if (change instanceof cv.ui.manager.model.ElementChange) {\n                change.redo();\n              } else {\n                element.setAttribute(change.attribute, change.value);\n              }\n            });\n            element.updateModified();\n            success = true;\n            break;\n\n          case 'deleted':\n            if (element) {\n              element.remove(true);\n              success = true;\n            }\n            break;\n\n          case 'created':\n            change = this.getChanges()[0];\n            if (change.parent) {\n              success = change.parent.insertChild(change.child, change.index, true);\n            }\n            break;\n\n          case 'moved':\n            change = this.getChanges()[0];\n            success = change.child.moveTo(change.parent, change.index, true);\n            break;\n        }\n      }\n      return success;\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}