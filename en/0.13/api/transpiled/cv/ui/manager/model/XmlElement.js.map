{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "include",
    "data",
    "marshal",
    "MEventBubbling",
    "construct",
    "node",
    "schemaElement",
    "editor",
    "parent",
    "constructor",
    "call",
    "_node",
    "children",
    "Array",
    "$$widget",
    "setSchemaElement",
    "initName",
    "nodeName",
    "_updateShowEditButton",
    "hasChildren",
    "push",
    "cv",
    "ui",
    "manager",
    "model",
    "XmlElement",
    "setEditor",
    "setParent",
    "_maintainIcon",
    "_maintainStatus",
    "initChildren",
    "_initialAttributes",
    "Map",
    "bind",
    "statics",
    "entityMap",
    "properties",
    "check",
    "nullable",
    "event",
    "apply",
    "name",
    "deferredInit",
    "displayName",
    "init",
    "open",
    "loaded",
    "textContent",
    "validate",
    "temporary",
    "valid",
    "invalidMessage",
    "status",
    "editable",
    "sortable",
    "deletable",
    "modified",
    "showEditButton",
    "icon",
    "dragging",
    "members",
    "_schema",
    "_schemaElement",
    "_initialChildNames",
    "_initialTextContent",
    "__initializing",
    "__addableChildren",
    "_structure",
    "nodeType",
    "Node",
    "COMMENT_NODE",
    "setStatus",
    "isValid",
    "_applyValid",
    "value",
    "resetInvalidMessage",
    "convertTextNodeType",
    "newType",
    "isTextNode",
    "TEXT_NODE",
    "CDATA_SECTION_NODE",
    "content",
    "getText",
    "oldNode",
    "newTextNode",
    "ownerDocument",
    "createCDATASection",
    "createTextNode",
    "parentNode",
    "replaceChild",
    "setName",
    "load",
    "setIcon",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "getName",
    "getAttribute",
    "indexOf",
    "source",
    "IconHandler",
    "getInstance",
    "getIconSource",
    "isOpen",
    "_applyEditable",
    "updateDeletable",
    "getSchemaElement",
    "setShowEditButton",
    "isTextContentAllowed",
    "startsWith",
    "keys",
    "getAllowedAttributes",
    "length",
    "isChildElementAllowed",
    "_this",
    "isEditable",
    "setDeletable",
    "getParent",
    "isTextContentRequired",
    "existing",
    "getChildren",
    "filter",
    "child",
    "requiredFromParent",
    "getRequiredElements",
    "includes",
    "bounds",
    "getBoundsForElementName",
    "min",
    "getNode",
    "remove",
    "skipUndo",
    "changes",
    "index",
    "getEditor",
    "$$removed",
    "updateModified",
    "change",
    "ElementChange",
    "locale",
    "Manager",
    "tr",
    "getDisplayName",
    "addUndo",
    "isAncestor",
    "element",
    "_move",
    "target",
    "position",
    "targetParent",
    "targetChildren",
    "oldIndex",
    "oldParent",
    "isChildAllowedAtPosition",
    "insertChild",
    "moveTo",
    "newParent",
    "getItem",
    "moveAfter",
    "moveBefore",
    "moveInside",
    "insertAfter",
    "newIndex",
    "insertBefore",
    "getAddableChildren",
    "excludeComment",
    "allowed",
    "getAllowedElements",
    "stillAllowed",
    "countExisting",
    "isLoaded",
    "forEach",
    "prototype",
    "hasOwnProperty",
    "elementName",
    "isMixed",
    "textNodes",
    "otherNodes",
    "key",
    "childBounds",
    "max",
    "xmlElement",
    "debug",
    "areChildrenSortable",
    "allowedSorting",
    "getFirstLevelElementSorting",
    "currentPosition",
    "targetPosition",
    "previousSibling",
    "i",
    "Math",
    "findPositionForChild",
    "newChild",
    "targetIndex",
    "found",
    "some",
    "childPos",
    "internalOperation",
    "success",
    "appendChild",
    "childNodes",
    "unshift",
    "previousChild",
    "before",
    "$$added",
    "setOpen",
    "_validateTextContent",
    "isValueValid",
    "ValidationError",
    "recursive",
    "_this2",
    "setValid",
    "isElement",
    "allowedAttributes",
    "errors",
    "attributes",
    "attr",
    "item",
    "attribute",
    "error",
    "isOptional",
    "hasAttribute",
    "nodeValue",
    "trim",
    "setInvalidMessage",
    "map",
    "err",
    "join",
    "_applyTextContent",
    "updateDisplayName",
    "ELEMENT_NODE",
    "getTextContent",
    "setText",
    "text",
    "changed",
    "newValue",
    "oldValue",
    "setTextContent",
    "old",
    "setAttribute",
    "undefined",
    "replace",
    "s",
    "getDefaultValue",
    "removeAttribute",
    "isRequired",
    "setAttributes",
    "_this3",
    "parentChanges",
    "attrName",
    "dom",
    "DOMParser",
    "parseFromString",
    "getElementsByTagName",
    "outerHTML",
    "innerHTML",
    "newNode",
    "documentElement",
    "parentChange",
    "_applySchemaElement",
    "getSchema",
    "getStructure",
    "converter",
    "_onOpen",
    "_applyModified",
    "nameAttr",
    "isRoot",
    "designAttr",
    "substring",
    "isModified",
    "setDisplayName",
    "hasChildNodes",
    "childNode",
    "force",
    "removeListener",
    "_syncChildNodes",
    "removeAll",
    "childSchemaElement",
    "getSchemaElementForElementName",
    "setSortable",
    "msg",
    "getInvalidMessage",
    "clear",
    "set",
    "e",
    "appendInvalidMessage",
    "toString",
    "setLoaded",
    "addListener",
    "_updateChildrenDeletableFlags",
    "errorMsg",
    "setModified",
    "initial",
    "currentChildNames",
    "_currentChildNames",
    "size",
    "_iterator",
    "_createForOfIteratorHelper",
    "_step",
    "n",
    "done",
    "_step$value",
    "_slicedToArray",
    "f",
    "hasChildrenModified",
    "onSaved",
    "names",
    "widget",
    "ev",
    "getWidgetPath",
    "schema",
    "widgets",
    "getWidgetNames",
    "current",
    "lang",
    "String",
    "firstUp",
    "ids",
    "c",
    "id",
    "selector",
    "parentElement",
    "concat",
    "toLowerCase",
    "clone",
    "cloneNode",
    "destruct",
    "_disposeObjects"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/model/XmlElement.js"
  ],
  "sourcesContent": [
    "/* XmlElement.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Represents an Element or TextNode in an XML document\n */\nqx.Class.define('cv.ui.manager.model.XmlElement', {\n  extend: qx.core.Object,\n  include: [qx.data.marshal.MEventBubbling],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(node, schemaElement, editor, parent) {\n    super();\n    this._node = node;\n    const children = new qx.data.Array();\n    if (node) {\n      this._node.$$widget = this;\n      this.setSchemaElement(schemaElement);\n      this.initName(node.nodeName);\n      this._updateShowEditButton();\n      if (this.hasChildren()) {\n        // we have to add a fake node to the children to show the tree that this node has children\n        // it will be removed when the real children are loaded\n        children.push(new cv.ui.manager.model.XmlElement());\n      }\n      if (editor) {\n        this.setEditor(editor);\n      }\n      if (parent) {\n        this.setParent(parent);\n      }\n      this._maintainIcon();\n      this._maintainStatus();\n    } else {\n      // this is a fake node needed for children simulation\n      this.initName('#temp');\n    }\n    this.initChildren(children);\n    this._initialAttributes = new Map();\n    this.bind('editor.file.writeable', this, 'editable');\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    entityMap: {\n      '&': '&amp;',\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '`': '&#x60;'\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    // the current editor this element os shown in\n    editor: {\n      check: 'cv.ui.manager.editor.Tree',\n      nullable: true,\n      event: 'changeEditor'\n    },\n\n    schemaElement: {\n      check: 'cv.ui.manager.model.schema.Element',\n      apply: '_applySchemaElement'\n    },\n\n    name: {\n      check: 'String',\n      deferredInit: true,\n      event: 'changeName',\n      apply: 'updateDisplayName'\n    },\n\n    displayName: {\n      check: 'String',\n      init: '',\n      event: 'changeDisplayName'\n    },\n\n    open: {\n      check: 'Boolean',\n      event: 'changeOpen',\n      init: false,\n      apply: '_onOpen'\n    },\n\n    loaded: {\n      check: 'Boolean',\n      event: 'changeLoaded',\n      init: false\n    },\n\n    children: {\n      check: 'qx.data.Array',\n      event: 'changeChildren',\n      apply: '_applyEventPropagation',\n      deferredInit: true\n    },\n\n    textContent: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyTextContent',\n      event: 'changeTextContent',\n      validate: '_validateTextContent'\n    },\n\n    /**\n     * Temporary nodes are not save in the backend yet\n     */\n    temporary: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeTemporary'\n    },\n\n    /**\n     * Validation result for this nodes content\n     */\n    valid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeValid',\n      apply: '_applyValid'\n    },\n\n    invalidMessage: {\n      check: 'String',\n      init: '',\n      event: 'changeInvalidMessage'\n    },\n\n    status: {\n      check: ['error', 'valid', 'comment'],\n      init: 'valid',\n      event: 'changeStatus'\n    },\n\n    editable: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeEditable',\n      apply: '_applyEditable'\n    },\n\n    sortable: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeSortable'\n    },\n\n    /**\n     * true if this element can be deleted (either no bounds.min or more existing elements)\n     */\n    deletable: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeDeletable'\n    },\n\n    modified: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyModified'\n    },\n\n    showEditButton: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeShowEditButton'\n    },\n\n    parent: {\n      check: 'cv.ui.manager.model.XmlElement',\n      nullable: true\n    },\n\n    // icon to show in the tree\n    icon: {\n      check: 'String',\n      nullable: true,\n      event: 'changeIcon'\n    },\n\n    dragging: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeDragging'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _node: null,\n    _schema: null,\n    _schemaElement: null,\n    _initialAttributes: null,\n    _initialChildNames: null,\n    _initialTextContent: null,\n    __initializing: false,\n    __addableChildren: null,\n    _structure: null,\n\n    _maintainStatus() {\n      if (this._node.nodeType === Node.COMMENT_NODE) {\n        this.setStatus('comment');\n      } else if (!this.isValid()) {\n        this.setStatus('error');\n      } else {\n        this.setStatus('valid');\n      }\n    },\n\n    _applyValid(value) {\n      this._maintainStatus();\n      if (value) {\n        this.resetInvalidMessage();\n      }\n    },\n\n    convertTextNodeType(newType) {\n      if (\n        this.isTextNode() &&\n        this._node.nodeType !== newType &&\n        (newType === Node.TEXT_NODE || newType === Node.CDATA_SECTION_NODE)\n      ) {\n        const content = this.getText();\n        const oldNode = this._node;\n        const newTextNode =\n          newType === Node.CDATA_SECTION_NODE\n            ? this._node.ownerDocument.createCDATASection(content)\n            : this._node.ownerDocument.createTextNode(content);\n        if (oldNode.parentNode) {\n          oldNode.parentNode.replaceChild(newTextNode, oldNode);\n        }\n        this._node = newTextNode;\n        this.setName(this._node.nodeName);\n        this.load(true);\n      }\n    },\n\n    _maintainIcon() {\n      if (this._node) {\n        if (this._node.nodeType === Node.TEXT_NODE || this._node.nodeType === Node.CDATA_SECTION_NODE) {\n          this.setIcon(cv.theme.dark.Images.getIcon('text-fields', 18));\n          return;\n        } else if (this._node.nodeType === Node.COMMENT_NODE) {\n          this.setIcon(cv.theme.dark.Images.getIcon('comment-fields', 18));\n          return;\n        } else if (\n          this.getName() === 'icon' &&\n          this.getAttribute('name') &&\n          this.getAttribute('name').indexOf('{{') === -1\n        ) {\n          // try to use the configured icon (if its not set by a template variable)\n          const source = cv.IconHandler.getInstance().getIconSource(this.getAttribute('name'), 'tree-icon');\n\n          if (source) {\n            this.setIcon(source);\n          } else {\n            this.setIcon(cv.theme.dark.Images.getIcon('image', 18));\n          }\n          return;\n        }\n      }\n      if (this.isOpen()) {\n        this.setIcon(cv.theme.dark.Images.getIcon('folder-open', 18));\n      } else {\n        this.setIcon(cv.theme.dark.Images.getIcon('folder', 18));\n      }\n    },\n\n    _applyEditable() {\n      this._updateShowEditButton();\n      this.updateDeletable();\n    },\n\n    _updateShowEditButton() {\n      const schemaElement = this.getSchemaElement();\n      this.setShowEditButton(\n        (schemaElement.isTextContentAllowed() && this.getName().startsWith('#')) ||\n          Object.keys(schemaElement.getAllowedAttributes()).length > 0 ||\n          schemaElement.isChildElementAllowed('*') // any element allowed, this is edited as text (outerHTML)\n      );\n    },\n\n    updateDeletable() {\n      if (!this.isEditable()) {\n        this.setDeletable(false);\n      } else {\n        const parent = this.getParent();\n        if (this.isTextNode()) {\n          if (this.getSchemaElement().isTextContentRequired()) {\n            const existing = parent.getChildren().filter(child => child.isTextNode()).length;\n            this.setDeletable(existing > 1);\n          } else {\n            this.setDeletable(true);\n          }\n        } else {\n          let deletable = false;\n          if (parent) {\n            const schemaElement = parent.getSchemaElement();\n            const requiredFromParent = schemaElement.getRequiredElements();\n            if (requiredFromParent.includes(this.getName())) {\n              const bounds = schemaElement.getBoundsForElementName(this.getName());\n\n              if (bounds) {\n                const existing = parent.getChildren().filter(child => child.getName() === this.getName()).length;\n                // check if we can afford to delete one\n                deletable = bounds.min <= existing - 1;\n              } else {\n                deletable = true;\n              }\n            } else {\n              deletable = true;\n            }\n          } else {\n            deletable = true;\n          }\n          this.setDeletable(deletable);\n        }\n      }\n    },\n\n    getNode() {\n      return this._node;\n    },\n\n    remove(skipUndo) {\n      const parent = this.getParent();\n      if (parent) {\n        const changes = [\n          {\n            index: parent.getChildren().indexOf(this),\n            parent: parent,\n            child: this\n          }\n        ];\n\n        this._node.remove();\n        parent.getChildren().remove(this);\n        const editor = this.getEditor();\n        this.$$removed = true;\n        if (editor) {\n          // editor should not consider the modification state of removed elements\n          editor.updateModified(this);\n        }\n        parent.updateModified();\n        if (!skipUndo) {\n          if (editor) {\n            const change = new cv.ui.manager.model.ElementChange(\n              qx.locale.Manager.tr('Remove %1', this.getDisplayName()),\n              this,\n              changes,\n              'deleted'\n            );\n\n            editor.addUndo(change);\n          }\n        }\n      }\n    },\n\n    /**\n     * Check is this element is an ancestor of the given element\n     * @param element {cv.ui.manager.model.XmlElement} element to check\n     * @returns {boolean}\n     */\n    isAncestor(element) {\n      let parent = element.getParent();\n      while (parent) {\n        if (parent === this) {\n          return true;\n        }\n        parent = parent.getParent();\n      }\n      return false;\n    },\n\n    /**\n     * Move this node to a new position in relation to the target\n     * @param target {cv.ui.manager.model.XmlElement} new direct sibling\n     * @param position {String} more 'before', 'after' or 'inside' target\n     * @param skipUndo {Boolean} no not add an undo operation for this\n     * @private\n     */\n    _move(target, position, skipUndo) {\n      if (this.isAncestor(target)) {\n        // we cannot move into ourselves descendants\n        return false;\n      }\n      if (target === this) {\n        // do not move ourselves before, after or inside ourselves\n        return false;\n      }\n      const parent = this.getParent();\n      const children = parent.getChildren();\n      const targetParent = position === 'inside' ? target : target.getParent();\n      const targetChildren = targetParent.getChildren();\n      const changes = [\n        {\n          oldIndex: children.indexOf(this),\n          oldParent: parent,\n          parent: targetParent,\n          child: this,\n          index: targetChildren.indexOf(target) + (position === 'after' ? 1 : 0)\n        }\n      ];\n\n      if (\n        (position === 'inside' && targetParent.getSchemaElement().isChildElementAllowed(this.getName())) ||\n        targetParent.isChildAllowedAtPosition(this, changes[0].index)\n      ) {\n        children.remove(this);\n        this.getNode().remove();\n        if (targetParent === parent) {\n          // target index might have changed by removing\n          changes[0].index = targetChildren.indexOf(target) + (position === 'after' ? 1 : 0);\n        }\n        targetParent.insertChild(this, changes[0].index, true, 'moved');\n        if (!skipUndo) {\n          const editor = this.getEditor();\n          if (editor) {\n            const change = new cv.ui.manager.model.ElementChange(\n              qx.locale.Manager.tr('Move %1', this.getDisplayName()),\n              this,\n              changes,\n              'moved'\n            );\n\n            editor.addUndo(change);\n          }\n        }\n        return true;\n      }\n      return false;\n    },\n\n    moveTo(newParent, index, skipUndo) {\n      if (this.isAncestor(newParent)) {\n        // we cannot move into ourselves descendants\n        return false;\n      }\n      const parent = this.getParent();\n      const children = parent.getChildren();\n      const changes = [\n        {\n          oldIndex: children.indexOf(this),\n          oldParent: parent,\n          parent: newParent,\n          child: this,\n          index: index\n        }\n      ];\n\n      // save old target index because we are moving inside the same parent, and the target index might change after removing\n      const target = newParent === parent && index < children.length ? children.getItem(index) : null;\n      if (newParent.isChildAllowedAtPosition(this, index)) {\n        children.remove(this);\n        this.getNode().remove();\n\n        if (target) {\n          index = children.indexOf(target);\n          changes[0].index = index;\n        }\n        newParent.insertChild(this, index, true, 'moved');\n        if (!skipUndo) {\n          const editor = this.getEditor();\n          if (editor) {\n            const change = new cv.ui.manager.model.ElementChange(\n              qx.locale.Manager.tr('Move %1', this.getDisplayName()),\n              this,\n              changes,\n              'moved'\n            );\n\n            editor.addUndo(change);\n          }\n        }\n        return true;\n      }\n      return false;\n    },\n\n    moveAfter(target, skipUndo) {\n      return this._move(target, 'after', skipUndo);\n    },\n\n    moveBefore(target, skipUndo) {\n      return this._move(target, 'before', skipUndo);\n    },\n\n    moveInside(target, skipUndo) {\n      return this._move(target, 'inside', skipUndo);\n    },\n\n    insertAfter(target, skipUndo) {\n      const targetParent = target.getParent();\n      const newIndex = targetParent.getChildren().indexOf(target) + 1;\n      return targetParent.insertChild(this, newIndex, skipUndo, 'added');\n    },\n\n    insertBefore(target, skipUndo) {\n      const targetParent = target.getParent();\n      const newIndex = targetParent.getChildren().indexOf(target);\n      return targetParent.insertChild(this, newIndex, skipUndo, 'added');\n    },\n\n    /**\n     * Returns a list of element names that can be added to this element.\n     * Checks the allowed elements and their bounds and the existing children\n     * to find out if we can add more of them.\n     * @param excludeComment {Boolean} exclude #comment child when set to true\n     */\n    getAddableChildren(excludeComment) {\n      if (!this.__addableChildren) {\n        if (this.getName().startsWith('#')) {\n          this.__addableChildren = [];\n        } else {\n          const schemaElement = this.getSchemaElement();\n          const allowed = schemaElement.getAllowedElements();\n          const stillAllowed = [];\n          const countExisting = {};\n          if (!this.isLoaded()) {\n            this.load();\n          }\n          this.getChildren().forEach(child => {\n            if (!Object.prototype.hasOwnProperty.call(countExisting, child.getName())) {\n              countExisting[child.getName()] = 0;\n            }\n            countExisting[child.getName()]++;\n          });\n\n          Object.keys(allowed).forEach(elementName => {\n            if (excludeComment === true && elementName === '#comment') {\n              return;\n            }\n            if (elementName === '#text' || elementName === '#cdata-section') {\n              if (schemaElement.isTextContentAllowed()) {\n                if (schemaElement.isMixed()) {\n                  // is a mixed content has only one text child and no other childs, we do not allow another text child -> avoid direct text siblings\n                  let textNodes = 0;\n                  let otherNodes = 0;\n                  Object.keys(countExisting).forEach(key => {\n                    if (key === '#text' || key === '#cdata-section') {\n                      textNodes += countExisting[key];\n                    } else {\n                      otherNodes += countExisting[key];\n                    }\n                  });\n                  if (textNodes <= otherNodes) {\n                    // we do not allow more text nodes than other nodes (e.g. a sequence of #text, elem would allow another #text node after elem)\n                    stillAllowed.push(elementName);\n                  }\n                } else if (\n                  !Object.prototype.hasOwnProperty.call(countExisting, '#text') &&\n                  !Object.prototype.hasOwnProperty.call(countExisting, '#cdata-section')\n                ) {\n                  stillAllowed.push(elementName);\n                }\n              }\n              return;\n            }\n            const childBounds = schemaElement.getBoundsForElementName(elementName);\n            const existing = Object.prototype.hasOwnProperty.call(countExisting, elementName)\n              ? countExisting[elementName]\n              : 0;\n            if (childBounds && childBounds.max > existing) {\n              stillAllowed.push(elementName);\n            }\n          });\n          this.__addableChildren = stillAllowed;\n        }\n      }\n      return this.__addableChildren;\n    },\n\n    /**\n     * Checks if a new child is allowed at the given position\n     * @param xmlElement {cv.ui.manager.model.XmlElement|String} the element or an element name as string\n     * @param index {Number} position to check, use Number.POSITIVE_INFINITY to check if the child is allowed to be appended\n     * @returns {boolean}\n     */\n    isChildAllowedAtPosition(xmlElement, index) {\n      const schemaElement = this.getSchemaElement();\n      const nodeName = xmlElement instanceof cv.ui.manager.model.XmlElement ? xmlElement.getName() : xmlElement;\n      if (!schemaElement.isChildElementAllowed(nodeName)) {\n        this.debug(nodeName, 'is not allowed as child of', this.getName());\n        return false;\n      }\n      if (schemaElement.areChildrenSortable()) {\n        // allowed at any position\n        return true;\n      }\n      // check position\n      const allowedSorting = schemaElement.getFirstLevelElementSorting();\n      if (!this.isLoaded()) {\n        this.load();\n      }\n      const children = this.getChildren();\n      if (children.length === 0) {\n        // no children yet, no position problem\n        return true;\n      }\n      let currentPosition = index;\n      if (children.length > index) {\n        currentPosition = allowedSorting[children.getItem(index).getName()];\n      } else {\n        currentPosition = children.length;\n      }\n      let targetPosition = allowedSorting[nodeName];\n      if (currentPosition === targetPosition || targetPosition >= children.length) {\n        // no special position\n        return true;\n      }\n      // find the first previous sibling of a different type\n      let previousSibling;\n      if (index > 0) {\n        for (let i = Math.min(index, children.length) - 1; i >= 0; i--) {\n          if (children.getItem(i).getName() !== nodeName) {\n            previousSibling = children.getItem(i).getName();\n            break;\n          }\n        }\n      }\n      if (previousSibling) {\n        currentPosition = allowedSorting[previousSibling];\n      }\n      // only allow if it can be inserted before\n      const allowed = currentPosition + 1 >= targetPosition;\n      if (!allowed) {\n        this.debug(nodeName, 'is not allowed as child of', this.getName());\n        return false;\n      }\n\n      return true;\n    },\n\n    findPositionForChild(newChild) {\n      const schemaElement = this.getSchemaElement();\n      if (schemaElement.isChildElementAllowed(newChild.getName())) {\n        if (!this.isLoaded()) {\n          this.load();\n        }\n        if (schemaElement.areChildrenSortable()) {\n          // any position is fine, just append it to the end\n          return this.getChildren().length;\n        }\n        const allowedSorting = schemaElement.getFirstLevelElementSorting();\n        if (allowedSorting && Object.prototype.hasOwnProperty.call(allowedSorting, newChild.getName())) {\n          const position = allowedSorting[newChild.getName()];\n          // search for the first sibling with a position > than the newChilds and insert it there\n          let targetIndex = position;\n          const found = this.getChildren().some((child, index) => {\n            const childPos = allowedSorting[child.getName()];\n            if (childPos > position) {\n              targetIndex = index;\n              return true;\n            }\n            return false;\n          });\n          if (!found) {\n            // append to the end\n            targetIndex = this.getChildren().length;\n          }\n          return targetIndex;\n        }\n      }\n      return -1;\n    },\n\n    /**\n     * insert child at given index\n     * @param xmlElement {cv.ui.manager.model.XmlElement} new child\n     * @param index {Number} index to insert the child, if set to -1 insert it at any allowed position\n     * @param skipUndo {Boolean} do not add an undo operation for this change\n     * @param internalOperation\n     * @return {Boolean} true if the child has been added\n     */\n    insertChild(xmlElement, index, skipUndo, internalOperation) {\n      if (!this.isLoaded()) {\n        this.load();\n      }\n      const children = this.getChildren();\n      let success = false;\n      if (index === -1) {\n        index = this.findPositionForChild(xmlElement);\n        if (index === -1) {\n          // no valid position found\n          return false;\n        }\n      }\n      if (this.isChildAllowedAtPosition(xmlElement, index)) {\n        if (index >= children.length) {\n          // append\n          this._node.appendChild(xmlElement.getNode());\n          children.push(xmlElement);\n          success = true;\n        } else if (index === 0) {\n          // add before first child\n          this._node.insertBefore(xmlElement.getNode(), this._node.childNodes[0]);\n\n          children.unshift(xmlElement);\n          success = true;\n        } else {\n          const previousChild = children.getItem(index);\n          if (previousChild) {\n            previousChild.getNode().before(xmlElement.getNode());\n            children.insertBefore(previousChild, xmlElement);\n            success = true;\n          }\n        }\n      }\n      if (success) {\n        const editor = this.getEditor();\n        xmlElement.setParent(this);\n        if (xmlElement.$$removed) {\n          delete xmlElement.$$removed;\n          if (editor) {\n            editor.updateModified(xmlElement);\n          }\n          xmlElement.updateModified();\n        } else if (!internalOperation || internalOperation === 'added') {\n          xmlElement.$$added = true;\n          xmlElement.updateModified();\n        }\n        this.updateModified();\n        if (children.length === 1) {\n          // first child added -> open it\n          this.setOpen(true);\n        }\n        if (!skipUndo) {\n          if (editor) {\n            const changes = [\n              {\n                index: index,\n                parent: this,\n                child: xmlElement\n              }\n            ];\n\n            const change = new cv.ui.manager.model.ElementChange(\n              qx.locale.Manager.tr('Add %1', this.getDisplayName()),\n              this,\n              changes,\n              'created'\n            );\n\n            editor.addUndo(change);\n          }\n        }\n      }\n      return success;\n    },\n\n    _validateTextContent(value) {\n      // do not validate content that is loaded from the actual node\n      if (!this.__initializing) {\n        if (this._node) {\n          if (!this.getSchemaElement().isValueValid(value)) {\n            throw new qx.core.ValidationError(qx.locale.Manager.tr('Invalid text content: \\'%1\\'', value));\n          }\n        } else {\n          throw new qx.core.ValidationError(qx.locale.Manager.tr('Text content not allowed here'));\n        }\n      }\n    },\n\n    /**\n     * Validate this element (and its parent when this is a text node)\n     * @param recursive {Boolean} validate children too\n     */\n    validate(recursive) {\n      const schemaElement = this.getSchemaElement();\n      if (this.isTextNode()) {\n        this.getParent().validate(false);\n        this.setValid(schemaElement.isValueValid(this.getText()));\n      } else if (this.isElement()) {\n        const allowedAttributes = schemaElement.getAllowedAttributes();\n        const errors = [];\n        // check attribute values\n        for (let i = 0; i < this._node.attributes.length; i++) {\n          const attr = this._node.attributes.item(i);\n          if (Object.prototype.hasOwnProperty.call(allowedAttributes, attr.name)) {\n            if (!allowedAttributes[attr.name].isValueValid(attr.value)) {\n              errors.push({\n                attribute: attr.name,\n                error: qx.locale.Manager.tr('Invalid value')\n              });\n            }\n          } else {\n            errors.push({\n              attribute: attr.name,\n              error: qx.locale.Manager.tr('Attribute \\'%1\\' not allowed', attr.name)\n            });\n          }\n        }\n        // check for missing required attributes\n        Object.keys(allowedAttributes)\n          .filter(name => !allowedAttributes[name].isOptional())\n          .forEach(name => {\n            if (!this._node.hasAttribute(name)) {\n              errors.push({\n                attribute: name,\n                error: qx.locale.Manager.tr('Attribute \\'%1\\' is required but missing', name)\n              });\n            }\n          });\n        if (schemaElement.isTextContentRequired()) {\n          // check if we have at least one non empty #text child\n          const found = this.getChildren().some(child => child.isTextNode() && child.getNode().nodeValue.trim() !== '');\n\n          if (!found) {\n            errors.push({\n              attribute: '#text',\n              error: qx.locale.Manager.tr('Text content is missing')\n            });\n          }\n        }\n        if (schemaElement.isTextContentAllowed()) {\n          this.getChildren().forEach(child => {\n            if (child.isTextNode()) {\n              child.load();\n              child.setValid(schemaElement.isValueValid(child.getText()));\n              if (!child.isValid()) {\n                child.setInvalidMessage(qx.locale.Manager.tr('Text content is invalid'));\n              }\n            }\n          });\n        }\n        this.setInvalidMessage(errors.map(err => err.error).join('<br/>'));\n        this.setValid(errors.length === 0);\n      }\n    },\n\n    isTextNode() {\n      return this.getName() === '#text' || this.getName() === '#cdata-section';\n    },\n\n    _applyTextContent(value) {\n      if (!this.__initializing) {\n        if (this._node) {\n          if (\n            this._node.nodeType === Node.TEXT_NODE ||\n            this._node.nodeType === Node.COMMENT_NODE ||\n            this._node.nodeType === Node.CDATA_SECTION_NODE\n          ) {\n            this._node.nodeValue = value;\n            this.updateDisplayName();\n          } else if (this._node.nodeType === Node.ELEMENT_NODE) {\n            this._node.textContent = value;\n          }\n        }\n      }\n    },\n\n    getText() {\n      return this.getTextContent();\n    },\n\n    setText(text, nodeName) {\n      let changed = false;\n      let newValue = text;\n      let oldValue = '';\n      if (this.getSchemaElement().isTextContentAllowed()) {\n        oldValue = this.getTextContent();\n        if (this.getSchemaElement().isValueValid(text)) {\n          if (oldValue !== text) {\n            this.setTextContent(text);\n            changed = true;\n          }\n        } else {\n          this.error('\\'' + text + '\\' is no valid text content for a \\'' + this.getName() + '\\' element');\n        }\n      } else {\n        this.error('text content is not allowed for a \\'' + this.getName() + '\\' element');\n      }\n      return {\n        changed: changed,\n        attribute: nodeName || '#text',\n        value: newValue,\n        old: oldValue\n      };\n    },\n\n    getAttribute(name) {\n      return this._node.getAttribute(name);\n    },\n\n    setAttribute(name, value) {\n      if (this._node.nodeType === Node.ELEMENT_NODE) {\n        const attribute = this.getSchemaElement().getAllowedAttributes()[name];\n        let changed = false;\n        let newValue = value;\n        let oldValue = this._node.hasAttribute(name) ? this._node.getAttribute(name) : '';\n        if (attribute) {\n          if (value === null || value === undefined) {\n            value = '';\n          } else {\n            value = '' + value;\n          }\n          value = value.replace(/[&\"'`]/g, function (s) {\n            return cv.ui.manager.model.XmlElement.entityMap[s];\n          });\n          newValue = value;\n          if (attribute.isValueValid(value)) {\n            if (oldValue !== value) {\n              if (!value || value === attribute.getDefaultValue()) {\n                this._node.removeAttribute(name);\n                newValue = '';\n              } else {\n                this._node.setAttribute(name, value);\n              }\n              if (name === 'name') {\n                this.updateDisplayName();\n                if (this.getName() === 'icon') {\n                  this._maintainIcon();\n                }\n              }\n              changed = true;\n            }\n          } else {\n            this.error('\\'' + value + '\\' is not allowed for attribute \\'' + name + '\\'');\n          }\n        } else {\n          this.error('\\'' + name + '\\' is no allowed attribute for a \\'' + this.getName() + '\\' element');\n        }\n        return {\n          changed: changed,\n          attribute: name,\n          value: newValue,\n          old: oldValue\n        };\n      } else if (\n        (this._node.nodeType === Node.TEXT_NODE && name === '#text') ||\n        (this._node.nodeType === Node.CDATA_SECTION_NODE && name === '#cdata-section')\n      ) {\n        return this.setText(value, name);\n      } else if (this._node.nodeType === Node.COMMENT_NODE && name === '#comment') {\n        const oldValue = this.getTextContent();\n        const changed = value !== oldValue;\n        this.setTextContent(value);\n        return {\n          changed: changed,\n          attribute: name,\n          value: value,\n          old: oldValue\n        };\n      }\n      return null;\n    },\n\n    /**\n     * @return {Boolean} true if this element is a required child from its parent\n     */\n    isRequired() {\n      const parent = this.getParent();\n      if (parent) {\n        const requiredFromParent = parent.getSchemaElement().getRequiredElements();\n        return requiredFromParent.includes(this.getName());\n      }\n      // only root element has nor parent, and a root element is always required\n      return true;\n    },\n\n    setAttributes(data) {\n      const changes = [];\n      let change;\n      const parentChanges = [];\n      const isTextNode = this.getName() === '#text' || this.getName() === '#cdata-section';\n      const parent = this.getParent();\n      Object.keys(data).forEach(attrName => {\n        if (isTextNode && !attrName.startsWith('#')) {\n          // special mode for editing text content from a data provider with hints, those hints must be applied to the parent\n          change = parent.setAttribute(attrName, data[attrName]);\n          if (change.changed) {\n            parentChanges.push(change);\n          }\n        } else if (attrName === '#outerHTML' || attrName === '#innerHTML') {\n          if (this.getSchemaElement().isChildElementAllowed('*')) {\n            const dom = new DOMParser().parseFromString(data[attrName], 'text/xml');\n\n            if (dom.getElementsByTagName('parsererror').length === 0) {\n              const oldValue = attrName === '#outerHTML' ? this._node.outerHTML : this._node.innerHTML;\n              const newNode = dom.documentElement;\n              if (attrName === '#outerHTML') {\n                const oldNode = this._node;\n                oldNode.parentNode.replaceChild(newNode, oldNode);\n                this._node = newNode;\n                this.setName(this._node.nodeName);\n              } else {\n                this._node.innerHTML = data[attrName];\n              }\n              changes.push({\n                changed: true,\n                attribute: attrName,\n                value: data[attrName],\n                old: oldValue\n              });\n\n              this.load(true);\n            }\n          } else if (attrName === '#innerHTML' && !data[attrName]) {\n            // allow empty values\n            const oldValue = this._node.innerHTML;\n            this._node.innerHTML = data[attrName];\n            changes.push({\n              changed: true,\n              attribute: attrName,\n              value: data[attrName],\n              old: oldValue\n            });\n\n            this.load(true);\n          }\n        } else {\n          change = this.setAttribute(attrName, data[attrName]);\n          if (change.changed) {\n            changes.push(change);\n          }\n        }\n      });\n      const editor = this.getEditor();\n      if (editor && changes.length > 0) {\n        if (parentChanges.length > 0) {\n          const parentChange = new cv.ui.manager.model.ElementChange(\n            qx.locale.Manager.tr('Change %1', parent.getDisplayName()),\n            parent,\n            parentChanges\n          );\n\n          changes.push(parentChange);\n          parent.updateModified();\n        }\n        editor.addUndo(\n          new cv.ui.manager.model.ElementChange(qx.locale.Manager.tr('Change %1', this.getDisplayName()), this, changes)\n        );\n      }\n      this.updateModified();\n    },\n\n    _applySchemaElement(schemaElement) {\n      if (schemaElement) {\n        this._structure = schemaElement.getSchema().getStructure();\n      } else {\n        this._structure = null;\n      }\n      schemaElement.bind('sortable', this, 'sortable', {\n        converter: function (value) {\n          return this.isEditable() && value;\n        }.bind(this)\n      });\n    },\n\n    _onOpen(value) {\n      if (value && !this.isLoaded()) {\n        this.load();\n      }\n      this._maintainIcon();\n    },\n\n    _applyModified() {\n      this.updateDisplayName();\n    },\n\n    updateDisplayName() {\n      let displayName = this.getName();\n      if (this._node) {\n        if (this._node.nodeType === Node.ELEMENT_NODE) {\n          if (this._node.hasAttribute('name')) {\n            const nameAttr = this._node.getAttribute('name');\n            displayName += ' \"' + nameAttr + '\"';\n          } else if (this.getSchemaElement().getSchema().isRoot(this.getName()) && this._node.hasAttribute('design')) {\n            const designAttr = this._node.getAttribute('design');\n            displayName += ' \"' + designAttr + '\"';\n          }\n        } else if (\n          (this._node.nodeType === Node.TEXT_NODE ||\n            this._node.nodeType === Node.CDATA_SECTION_NODE ||\n            this._node.nodeType === Node.COMMENT_NODE) &&\n          this._node.nodeValue.trim()\n        ) {\n          let textContent = this._node.nodeValue.trim();\n          if (textContent.length > 26) {\n            textContent = textContent.substring(0, 26) + '...';\n          }\n          displayName = textContent;\n        }\n      }\n      if (this.isModified()) {\n        displayName += ' *';\n      }\n      this.setDisplayName(displayName);\n    },\n    hasChildren() {\n      if (this._node.nodeType === Node.ELEMENT_NODE) {\n        if (this._node && this._node.hasChildNodes()) {\n          for (let i = 0; i < this._node.childNodes.length; i++) {\n            const childNode = this._node.childNodes.item(i);\n            if (\n              childNode.nodeType === Node.ELEMENT_NODE ||\n              ((childNode.nodeType === Node.TEXT_NODE || childNode.nodeType === Node.CDATA_SECTION_NODE) &&\n                childNode.nodeValue.trim() !== '')\n            ) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    },\n\n    load(force) {\n      if (!this.isLoaded() || force) {\n        this.__initializing = true;\n        const children = this.getChildren();\n        children.removeListener('change', this._syncChildNodes, this);\n        children.removeAll();\n        if (this._node) {\n          if (this._node.nodeType === Node.ELEMENT_NODE) {\n            // read children\n            const schemaElement = this.getSchemaElement();\n            this._initialChildNames = [];\n            for (let i = 0; i < this._node.childNodes.length; i++) {\n              const childNode = this._node.childNodes.item(i);\n              const childSchemaElement = schemaElement.getSchemaElementForElementName(childNode.nodeName);\n\n              if (childSchemaElement) {\n                if (childNode.nodeType === Node.ELEMENT_NODE) {\n                  const child = new cv.ui.manager.model.XmlElement(\n                    childNode,\n                    childSchemaElement,\n                    this.getEditor(),\n                    this\n                  );\n\n                  children.push(child);\n                  this._initialChildNames.push(childNode.nodeName);\n                } else if (childNode.nodeType === Node.TEXT_NODE || childNode.nodeType === Node.CDATA_SECTION_NODE) {\n                  if (childNode.nodeValue.trim()) {\n                    // do not use childSchemaElement here, because our schemeElement already knows how to validate text\n                    const child = new cv.ui.manager.model.XmlElement(childNode, schemaElement, this.getEditor(), this);\n\n                    if (schemaElement.isMixed()) {\n                      // text nodes can be re-ordered in mixed content\n                      child.setSortable(true);\n                    }\n                    children.push(child);\n                    if (childNode.nodeValue.trim()) {\n                      this._initialChildNames.push(childNode.nodeName);\n                    }\n                  }\n                } else if (childNode.nodeType === Node.COMMENT_NODE) {\n                  if (childNode.nodeValue) {\n                    const child = new cv.ui.manager.model.XmlElement(\n                      childNode,\n                      childSchemaElement,\n                      this.getEditor(),\n                      this\n                    );\n\n                    // comment nodes are allowed everywhere. but we do not allow them to be moved via drag&drop now\n                    // because comments might contains template conditions, which will get invalid when moved and we cannot validate that\n                    child.setSortable(false);\n                    children.push(child);\n                    if (childNode.nodeValue.trim()) {\n                      this._initialChildNames.push(childNode.nodeName);\n                    }\n                  }\n                }\n              } else if (childNode.nodeType === Node.ELEMENT_NODE) {\n                if (schemaElement.isChildElementAllowed(childNode.nodeName)) {\n                  // allowed but no schema element\n                  const child = new cv.ui.manager.model.XmlElement(childNode, schemaElement, this.getEditor(), this);\n\n                  if (schemaElement.isMixed()) {\n                    // text nodes can be re-ordered in mixed content\n                    child.setSortable(true);\n                  }\n                  children.push(child);\n                  this._initialChildNames.push(childNode.nodeName);\n                } else {\n                  // only complain for real childs (no comments, textNodes)\n                  this.setValid(false);\n                  let msg = this.getInvalidMessage();\n                  msg =\n                    (msg ? msg + '<br/>' : '') +\n                    qx.locale.Manager.tr('Child element \\'%1\\' not allowed.', childNode.nodeName);\n\n                  this.setInvalidMessage(msg);\n                  this.setValid(false);\n                }\n              }\n            }\n\n            // read attributes\n            this._initialAttributes.clear();\n            for (let i = 0; i < this._node.attributes.length; i++) {\n              const attr = this._node.attributes.item(i);\n              this._initialAttributes.set(attr.name, attr.value);\n            }\n          } else if (\n            this._node.nodeType === Node.TEXT_NODE ||\n            this._node.nodeType === Node.COMMENT_NODE ||\n            this._node.nodeType === Node.CDATA_SECTION_NODE\n          ) {\n            this._initialTextContent = this._node.nodeValue;\n            try {\n              this.setTextContent(this._node.nodeValue);\n            } catch (e) {\n              this.appendInvalidMessage(e.toString());\n            }\n          }\n        }\n        this.setLoaded(true);\n        children.addListener('change', this._syncChildNodes, this);\n        this._updateChildrenDeletableFlags();\n        this.__initializing = false;\n      }\n    },\n\n    appendInvalidMessage(errorMsg) {\n      if (errorMsg) {\n        const existing = this.getInvalidMessage();\n        this.setInvalidMessage(existing ? existing + '<br/>' + errorMsg : errorMsg);\n      }\n    },\n\n    updateModified() {\n      if (this.$$added) {\n        this.setModified(true);\n      } else if (this._node.nodeType === Node.ELEMENT_NODE) {\n        const initial = this._initialAttributes;\n        const currentChildNames = this._currentChildNames();\n        if (this._node.attributes.length !== initial.size) {\n          this.setModified(true);\n        } else if (\n          currentChildNames.length !== this._initialChildNames.length ||\n          currentChildNames.join('') !== this._initialChildNames.join('')\n        ) {\n          this.setModified(true);\n        } else {\n          let modified = false;\n          for (const [key, value] of initial) {\n            if (!this._node.hasAttribute(key) || this._node.getAttribute(key) !== value) {\n              modified = true;\n              break;\n            }\n          }\n          this.setModified(modified);\n        }\n      } else if (\n        this._node.nodeType === Node.TEXT_NODE ||\n        this._node.nodeType === Node.COMMENT_NODE ||\n        this._node.nodeType === Node.CDATA_SECTION_NODE\n      ) {\n        this.setModified(this._initialTextContent !== this.getTextContent());\n      }\n      const editor = this.getEditor();\n      if (editor) {\n        editor.updateModified(this);\n      }\n    },\n\n    /**\n     * Special check if this element has modified children (position, of length)\n     * This is used to determine if the preview highlighting needs to be disabled because the xml structure has changed\n     * @returns {*|boolean}\n     */\n    hasChildrenModified() {\n      if (this._node.nodeType === Node.ELEMENT_NODE && this.isLoaded()) {\n        const currentChildNames = this._currentChildNames();\n        return (\n          this.isModified() &&\n          (currentChildNames.length !== this._initialChildNames.length ||\n            currentChildNames.join('') !== this._initialChildNames.join(''))\n        );\n      }\n      return false;\n    },\n\n    onSaved() {\n      if (this._node.nodeType === Node.ELEMENT_NODE) {\n        // read attributes\n        this._initialAttributes.clear();\n        for (let i = 0; i < this._node.attributes.length; i++) {\n          const attr = this._node.attributes.item(i);\n          this._initialAttributes.set(attr.name, attr.value);\n        }\n        this._initialChildNames = this._currentChildNames();\n      } else if (\n        this._node.nodeType === Node.TEXT_NODE ||\n        this._node.nodeType === Node.COMMENT_NODE ||\n        this._node.nodeType === Node.CDATA_SECTION_NODE\n      ) {\n        this._initialTextContent = this._node.nodeValue;\n      }\n      if (this.$$added) {\n        delete this.$$added;\n      }\n      this.setModified(false);\n    },\n\n    isElement() {\n      return this._node.nodeType === Node.ELEMENT_NODE;\n    },\n\n    _currentChildNames() {\n      const names = [];\n      let name;\n      let widget;\n      for (let i = 0; i < this._node.childNodes.length; i++) {\n        const childNode = this._node.childNodes.item(i);\n        if (childNode.nodeType === Node.ELEMENT_NODE) {\n          widget = this._node.$$widget;\n          name = widget ? widget.getDisplayName() : childNode.nodeName;\n          names.push(name);\n        } else if (\n          (childNode.nodeType === Node.TEXT_NODE ||\n            childNode.nodeType === Node.COMMENT_NODE ||\n            this._node.nodeType === Node.CDATA_SECTION_NODE) &&\n          childNode.nodeValue.trim()\n        ) {\n          names.push(childNode.nodeName);\n        }\n      }\n      return names;\n    },\n\n    _syncChildNodes(ev) {\n      // children have changed clear cache\n      this.__addableChildren = null;\n      // we have to update all deletable flags for this elements children, when their siblings changed\n      this._updateChildrenDeletableFlags();\n    },\n\n    _updateChildrenDeletableFlags() {\n      if (this.isEditable()) {\n        this.getChildren().forEach(child => {\n          if (child.isElement() || child.isTextNode()) {\n            child.updateDeletable();\n          }\n        });\n      }\n    },\n\n    getWidgetPath() {\n      if (this.getName() === '#comment') {\n        return '';\n      }\n      const schema = this.getSchemaElement().getSchema();\n      const widgets = schema.getWidgetNames();\n      let current = this;\n      while (current && !widgets.includes(current.getName())) {\n        current = current.getParent();\n      }\n      if (!current) {\n        return '';\n      }\n      if (this._structure === 'pure') {\n        if (current.getName() === 'navbar') {\n          return 'navbar' + qx.lang.String.firstUp(current.getAttribute('position'));\n        }\n\n        const ids = [];\n        let c = current;\n        while (c) {\n          const parent = c.getParent();\n          if (parent.getName() === 'pages') {\n            ids.unshift('id');\n            break;\n          }\n          let id = parent\n            .getChildren()\n            .filter(child => child.getNode().nodeType === Node.ELEMENT_NODE && child.getName() !== 'layout')\n            .indexOf(c);\n          ids.unshift(id);\n          c = parent;\n        }\n        if (current.getName() === 'page') {\n          // make sure that the join ends with '_'\n          ids.push('');\n        }\n        return '#' + ids.join('_');\n      } else if (this._structure === 'tile') {\n        let c = current.getNode();\n        let index = 0;\n        let selector = '';\n        while (c) {\n          const parent = c.parentElement;\n          if (c.hasAttribute('id')) {\n            selector = selector ? `#${c.getAttribute('id')} > ${selector}` : `#${c.getAttribute('id')}`;\n            break;\n          } else if (c.nodeName.toLowerCase() === 'config') {\n            selector = selector ? `config > ${selector}` : 'config';\n            break;\n          } else {\n            index = Array.prototype.indexOf.call(parent.children, c) + 1;\n            selector = selector ? `*:nth-child(${index}) > ${selector}` : `*:nth-child(${index})`;\n          }\n          c = parent;\n        }\n        return selector;\n      }\n      return '';\n    },\n\n    // overridden\n    clone() {\n      return new cv.ui.manager.model.XmlElement(this._node.cloneNode(true), this.getSchemaElement(), this.getEditor());\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._node = null;\n    this._schema = null;\n    this._initialAttributes = null;\n    this.__addableChildren = null;\n    this._disposeObjects('_schemaElement');\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}