{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "model",
    "schema",
    "Base",
    "include",
    "MAnnotation",
    "construct",
    "node",
    "parse",
    "statics",
    "getAttributeName",
    "e",
    "hasAttribute",
    "getAttribute",
    "refName",
    "ref",
    "getReferencedNode",
    "Error",
    "properties",
    "type",
    "refine",
    "init",
    "name",
    "check",
    "optional",
    "defaultValue",
    "nullable",
    "members",
    "_type",
    "getNode",
    "getSchema",
    "SimpleType",
    "setName",
    "Attribute",
    "setDefaultValue",
    "setOptional",
    "isValueValid",
    "value",
    "undefined",
    "isOptional",
    "getTypeString",
    "description",
    "getBaseType",
    "match",
    "replace",
    "tr",
    "getEnumeration",
    "destruct",
    "__appInfoCache",
    "__documentationCache"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/model/schema/Attribute.js"
  ],
  "sourcesContent": [
    "/* Attribute.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * a single attribute from the schema.\n */\nqx.Class.define('cv.ui.manager.model.schema.Attribute', {\n  extend: cv.ui.manager.model.schema.Base,\n  include: cv.ui.manager.model.schema.MAnnotation,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(node, schema) {\n    super(node, schema);\n    this.parse();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    /**\n     * Get the name of a schema-node\n     * @param e object  element to find the name of\n     * @param schema\n     * @return  string          name of the element\n     * @throws  if the name can not be found\n     */\n    getAttributeName(e, schema) {\n      if (e.hasAttribute('name')) {\n        return e.getAttribute('name');\n      }\n\n      if (e.hasAttribute('ref')) {\n        // it's a ref, seek other element!\n        const refName = e.getAttribute('ref');\n        const ref = schema.getReferencedNode('attribute', refName);\n\n        if (!ref) {\n          throw new Error('schema/xsd appears to be invalid, can not find element ' + refName);\n        }\n\n        return ref.getAttribute('name');\n      }\n\n      return 'unknown';\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      refine: true,\n      init: 'attribute'\n    },\n\n    name: {\n      check: 'String',\n      init: ''\n    },\n\n    optional: {\n      check: 'Boolean',\n      init: false\n    },\n\n    defaultValue: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _type: null,\n\n    parse() {\n      const node = this.getNode();\n      const schema = this.getSchema();\n      /**\n       * we have our own type\n       * @var object  SchemaSimpleType of the attribute, for validating purposes\n       */\n      this._type = new cv.ui.manager.model.schema.SimpleType(node, schema);\n      this.setName(cv.ui.manager.model.schema.Attribute.getAttributeName(node, schema));\n\n      if (node.hasAttribute('default')) {\n        this.setDefaultValue(node.getAttribute('default'));\n      }\n      this.setOptional(node.getAttribute('use') !== 'required');\n    },\n\n    /**\n     * check if a given value is valid for this attribute\n     *\n     * @param   value   mixed   the value to check\n     * @return  boolean         if the value is valid\n     */\n    isValueValid(value) {\n      if (value === null || value === undefined) {\n        value = '';\n      } else {\n        value = '' + value;\n      }\n      if (value === '') {\n        // empty values are valid if this node is optional!\n        return this.isOptional();\n      }\n      return this._type.isValueValid(value);\n    },\n\n    /**\n     * get a simple string telling us, what type of content is allowed\n     *\n     * @return  string  description of allowed values, almost user-readable :)\n     */\n    getTypeString() {\n      const description = this._type.getBaseType();\n\n      if (description.match(/xsd\\:/)) {\n        return description.replace(/xsd\\:/, '');\n      }\n\n      return this.tr('complex type, please see documentation');\n    },\n\n    /**\n     * get the list of values that are valid for this attribute, if it is an enumeration\n     *\n     * @return  array   list of string of valid values\n     */\n    getEnumeration() {\n      return this._type.getEnumeration();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__appInfoCache = null;\n    this.__documentationCache = null;\n  }\n});\n"
  ],
  "mappings": "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"
}