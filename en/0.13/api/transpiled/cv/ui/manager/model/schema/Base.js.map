{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/model/schema/Base.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "node",
    "schema",
    "setNode",
    "setSchema",
    "_bounds",
    "min",
    "undefined",
    "max",
    "_allowedElements",
    "_sortedContent",
    "_subGroupings",
    "properties",
    "check",
    "init",
    "elementsHaveOrder",
    "nullable",
    "subGroupings",
    "members",
    "_regexCache",
    "parse",
    "n",
    "getNode",
    "hasAttribute",
    "getAttribute",
    "parseInt",
    "Number",
    "POSITIVE_INFINITY",
    "isElementAllowed",
    "element",
    "i",
    "length",
    "getSchemaElementForElementName",
    "elementName",
    "getRequiredElements",
    "requiredElements",
    "entries",
    "name",
    "item",
    "getBounds",
    "push",
    "forEach",
    "grouping",
    "subRequiredElements",
    "getAllowedElements",
    "myAllowedElements",
    "assign",
    "getAllowedElementsSorting",
    "sortNumber",
    "getRegex",
    "separator",
    "nocapture",
    "hasMultiLevelBounds",
    "getBoundsForElementName",
    "childName",
    "regexFromString",
    "input",
    "modifiers",
    "RegExp",
    "cv",
    "ui",
    "manager",
    "model",
    "Base"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Base.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n *\n */\nqx.Class.define('cv.ui.manager.model.schema.Base', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  /**\n   * @param   node    {Node} the group-node\n   * @param   schema  {cv.ui.manager.model.Schema}  the corresponding schema\n   */\n  construct: function (node, schema) {\n    this.base(arguments);\n    this.setNode(node);\n    this.setSchema(schema);\n    this._bounds = {\n      min: undefined,\n      max: undefined\n    };\n    this._allowedElements = {};\n    this._sortedContent = [];\n    this._subGroupings = [];\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    /**\n     * type of this object\n     * @var string\n     */\n    type: {\n      check: 'String',\n      init: 'unknown'\n    },\n    elementsHaveOrder: {\n      check: 'Boolean',\n      init: false\n    },\n    schema: {\n      check: 'cv.ui.manager.model.Schema',\n      nullable: false\n    },\n    node: {\n      check: 'Node',\n      nullable: false\n    },\n    /**\n     * array of sub-choices, -sequences, -groups that are defined\n     * @var array\n     */\n    subGroupings: {\n      check: 'Array'\n    }\n  },\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * bounds for this element\n     * @var object\n     */\n    _bounds: null,\n\n    /**\n     * cache for getRegex\n     * @var string\n     */\n    _regexCache: null,\n\n    /**\n     * list of elements that are allowed as per our own definition\n     * @var object\n     */\n    _allowedElements: null,\n\n    /**\n     * the sorted listed of allowed elements and sub-groupings\n     * @var array\n     */\n    _sortedContent: null,\n\n    /**\n     * array of sub-choices, -sequences, -groups that are defined\n     * @var array\n     */\n    _subGroupings: null,\n\n    /// needs to be implemented by the inheriting classes\n    parse: function () {\n      const n = this.getNode();\n      let min = n.hasAttribute('minOccurs') ? n.getAttribute('minOccurs') : 1; // default is 1\n      let max = n.hasAttribute('maxOccurs') ? n.getAttribute('maxOccurs') : 1; // default is 1\n      this._bounds = {\n        min: parseInt(min),\n        max: max === 'unbounded' ? Number.POSITIVE_INFINITY : parseInt(max)\n      };\n    },\n\n    /**\n     * is an element (specified by its name) allowed in this group?\n     * Goes recursive.\n     * Does NOT check bounds! Does NOT check dependencies!\n     *\n     * @param   element string  the element we check for\n     * @return  boolean         is it allowed?\n     */\n    isElementAllowed: function (element) {\n      if (typeof this._allowedElements[element] !== 'undefined') {\n        // this element is immediately allowed\n        return true;\n      }\n\n      // go over the list of subGroupings and check, if the element is allowed with any of them\n      for (let i = 0; i < this._subGroupings.length; ++i) {\n        if (this._subGroupings[i].isElementAllowed(element) === true) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * get the SchemaElement-object for a certain element-name.\n     * May return undefined if no element is found, so you might be interested in checking isElementAllowed beforehand.\n     *\n     * @param   elementName string  name of the element to find the SchemaElement for\n     * @return  object              SchemaElement-object, or undefined if none is found\n     */\n    getSchemaElementForElementName: function (elementName) {\n      if (typeof this._allowedElements[elementName] != 'undefined') {\n        // this element is immediately allowed\n        return this._allowedElements[elementName];\n      }\n\n      // go over the list of sub-choices and check, if the element is allowed with them\n      for (let i = 0; i < this._subGroupings.length; ++i) {\n        if (this._subGroupings[i].isElementAllowed(elementName) === true) {\n          // this element is allowed\n          return this._subGroupings[i].getSchemaElementForElementName(elementName);\n        }\n      }\n\n      // can not find any reason why elementName is allowed with us...\n      return undefined;\n    },\n\n\n    /**\n     * get a list of required elements.\n     * if an element is required multiple times, it is listed multiple times\n     * Attention: elements are NOT sorted.\n     *\n     * @return  array   list of required elements\n     */\n    getRequiredElements: function () {\n      // we do know what we require. might not be too easy to find out, but ok\n\n      // if we have no lower bounds, then nothing is required\n      if (this._bounds.min === 0) {\n        return [];\n      }\n\n      const requiredElements = [];\n\n      // my own elements\n      for (const [name, item] of Object.entries(this._allowedElements)) {\n        if (item.getBounds().min > 0) {\n          for (let i = 0; i < item.getBounds().min; ++i) {\n            requiredElements.push(name);\n          }\n        }\n      }\n\n      // elements of our sub-groupings, if any\n      this._subGroupings.forEach(grouping => {\n        const subRequiredElements = grouping.getRequiredElements();\n\n        if (subRequiredElements.length > 0) {\n          for (let i = 0; i < subRequiredElements.length; ++i) {\n            requiredElements.push(subRequiredElements[i]);\n          }\n        }\n      });\n\n      return requiredElements;\n    },\n\n    /**\n     * get the elements allowed for this group\n     *\n     * @return  object      list of allowed elements, key is the name\n     */\n    getAllowedElements: function () {\n      const myAllowedElements = {};\n\n      for (const [name, item] of Object.entries(this._allowedElements)) {\n        myAllowedElements[name] = item;\n      }\n\n      // also the elements allowed by our sub-choices etc.\n      this._subGroupings.forEach(grouping => {\n        Object.assign(myAllowedElements, grouping.getAllowedElements());\n      });\n\n      return myAllowedElements;\n    },\n\n    /**\n     * get the sorting of the allowed elements.\n     * @param   sortNumber  integer the sort number of a parent (only used when recursive)\n     * @return  object              list of allowed elements, with their sort-number as value\n     */\n    getAllowedElementsSorting: function (sortNumber) {\n      return {};\n    },\n\n    /**\n     * get a regex (string) describing this choice\n     *\n     * @param   separator   string  the string used to separate different elements, e.g. ';'\n     * @param   nocapture   bool    when set to true non capturing groups are used\n     * @return  string  regex\n     */\n    getRegex: function (separator, nocapture) {\n      return '';\n    },\n\n\n    /**\n     * find out if this Grouping has multi-level-bounds, i.e. sub-groupings with bounds.\n     * This makes it more or less impossible to know in advance which elements might be needed\n     *\n     * @return  boolean does it?\n     */\n    hasMultiLevelBounds: function () {\n      return this._subGroupings.length > 0;\n    },\n\n\n    /**\n     * get the bounds of this very grouping\n     *\n     * @return  object  like {min: x, max: y}\n     */\n    getBounds: function () {\n      return this._bounds;\n    },\n\n\n    /**\n     * get bounds for a specific element.\n     * Take into account the bounds of the element and/or our own bounds\n     *\n     * @param   childName   string  name of the child-to-be\n     * @return  object              {max: x, min: y}, or undefined if none found\n     */\n    getBoundsForElementName: function (childName) {\n      return this._bounds;\n    },\n\n    /**\n     * create a regex-object from a pattern\n     *\n     * For some obscure reason, this may not be inside a classes method, or else that class is not instantiateable\n     *\n     * @param   input       string  the pattern to match (without //)\n     * @param   modifiers   string  modifiers, if any\n     * @return  object              RegExp-object\n     */\n    regexFromString: function (input, modifiers) {\n      if (modifiers === undefined) {\n        modifiers = '';\n      }\n\n      return new RegExp(input, modifiers);\n    }\n  }\n});\n"
  ]
}