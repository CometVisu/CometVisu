{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "filename",
    "match",
    "Error",
    "__filename",
    "setStructure",
    "endsWith",
    "__allowedRootElements",
    "__referencedNodeCache",
    "__typeNodeCache",
    "_cacheXSD",
    "statics",
    "__CACHE",
    "getInstance",
    "schemaFile",
    "prototype",
    "hasOwnProperty",
    "call",
    "cv",
    "ui",
    "manager",
    "model",
    "Schema",
    "util",
    "ResourceManager",
    "toUri",
    "properties",
    "loaded",
    "check",
    "init",
    "event",
    "structure",
    "apply",
    "members",
    "__xsd",
    "__textNodeSchemaElement",
    "__commentNodeSchemaElement",
    "_widgetNames",
    "__rootElementName",
    "__pageParentElementName",
    "__pageElementName",
    "_applyStructure",
    "onLoaded",
    "callback",
    "context",
    "isLoaded",
    "addListenerOnce",
    "ajaxRequest",
    "io",
    "request",
    "Xhr",
    "set",
    "accept",
    "e",
    "req",
    "getTarget",
    "xml",
    "getResponse",
    "Document",
    "fromString",
    "_parseXSD",
    "send",
    "querySelectorAll",
    "forEach",
    "element",
    "name",
    "getAttribute",
    "schema",
    "Element",
    "setLoaded",
    "getElementNode",
    "getReferencedNode",
    "type",
    "refName",
    "noFallback",
    "fallbackType",
    "selector",
    "ref",
    "querySelector",
    "hasAttribute",
    "getTypeNode",
    "typeNode",
    "getTextNodeSchemaElement",
    "tmpXML",
    "createElement",
    "setAttribute",
    "getCommentNodeSchemaElement",
    "getSchemaDOM",
    "getWidgetNames",
    "root",
    "pageParent",
    "getSchemaElementForElementName",
    "page",
    "keys",
    "getAllowedElements",
    "filter",
    "startsWith",
    "isRoot",
    "isPage",
    "destruct",
    "_disposeObjects",
    "_disposeMap"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/model/Schema.js"
  ],
  "sourcesContent": [
    "/* Schema.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.manager.model.Schema', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(filename) {\n    super();\n    if (!filename || !filename.match(/\\.xsd$/)) {\n      throw new Error('no, empty or invalid filename given, can not instantiate without one');\n    }\n    this.__filename = filename;\n    this.setStructure(filename.endsWith('visu_config_tile.xsd') ? 'tile' : 'pure');\n\n    this.__allowedRootElements = {};\n    this.__referencedNodeCache = {};\n    this.__typeNodeCache = {};\n    this._cacheXSD();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    __CACHE: {},\n\n    getInstance(schemaFile) {\n      if (!Object.prototype.hasOwnProperty.call(this.__CACHE, schemaFile)) {\n        this.__CACHE[schemaFile] = new cv.ui.manager.model.Schema(\n          qx.util.ResourceManager.getInstance().toUri(schemaFile)\n        );\n      }\n      return this.__CACHE[schemaFile];\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    loaded: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeLoaded'\n    },\n\n    structure: {\n      check: ['pure', 'tile'],\n      apply: '_applyStructure'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __filename: null,\n    /**\n     * object of the schema/xsd\n     * @var object\n     */\n    __xsd: null,\n\n    /**\n     * object of allowed root-level elements\n     * @var object\n     */\n    __allowedRootElements: null,\n\n    /**\n     * cache for referenced nods\n     * @var object\n     */\n    __referencedNodeCache: null,\n\n    /**\n     * cache for getTypeNode\n     * @var object\n     */\n    __typeNodeCache: null,\n\n    /**\n     * cache for #text-SchemaElement\n     * @var object\n     */\n    __textNodeSchemaElement: null,\n\n    /**\n     * cache for #comment-SchemaElement\n     * @var object\n     */\n    __commentNodeSchemaElement: null,\n\n    /**\n     * @var {Array<String>}\n     */\n    _widgetNames: null,\n\n    /**\n     * @var {String}\n     */\n    __rootElementName: null,\n\n    /**\n     * @var {String}\n     */\n    __pageParentElementName: null,\n\n    /**\n     * @var {String}\n     */\n    __pageElementName: null,\n\n    _applyStructure(structure) {\n      if (structure === 'tile') {\n        this.__rootElementName = 'config';\n        this.__pageParentElementName = 'main';\n        this.__pageElementName = 'cv-page';\n      } else {\n        this.__rootElementName = 'pages';\n        this.__pageElementName = 'page';\n      }\n    },\n\n    onLoaded(callback, context) {\n      if (this.isLoaded()) {\n        callback.call(context);\n      } else {\n        this.addListenerOnce('changeLoaded', callback, context);\n      }\n    },\n\n    /**\n     * load and cache the xsd from the server\n     */\n    _cacheXSD() {\n      const ajaxRequest = new qx.io.request.Xhr(this.__filename);\n      ajaxRequest.set({\n        accept: 'application/xml'\n      });\n\n      ajaxRequest.addListenerOnce('success', e => {\n        const req = e.getTarget();\n        // Response parsed according to the server's response content type\n        let xml = req.getResponse();\n        if (xml && typeof xml === 'string') {\n          xml = qx.xml.Document.fromString(xml);\n        }\n        this.__xsd = xml;\n\n        // parse the data, to have at least a list of root-level-elements\n        this._parseXSD();\n      });\n      ajaxRequest.send();\n    },\n\n    /**\n     * parse the schema once\n     */\n    _parseXSD() {\n      // make a list of root-level elements\n      this.__xsd.querySelectorAll('schema > element').forEach(element => {\n        const name = element.getAttribute('name');\n        this.__allowedRootElements[name] = new cv.ui.manager.model.schema.Element(element, this);\n      });\n      this.setLoaded(true);\n    },\n\n    getElementNode(name) {\n      if (Object.prototype.hasOwnProperty.call(this.__allowedRootElements, name)) {\n        return this.__allowedRootElements[name];\n      }\n      throw new Error('schema/xsd appears to be invalid, element ' + name + ' not allowed on root level');\n    },\n\n    /**\n     * dive into the schema and find the element that is being pulled in by a ref.\n     * Do so recursively.\n     * referenced nodes can be top-level-nodes only!\n     *\n     * @param   type       string  Type of the node (e.g. element, attributeGroup, ...)\n     * @param   refName    string  Name as per the ref-attribute\n     * @param   noFallback boolean Don't look up other types as fallback, if the requested type is not found\n     * @return  object          jQuery-object of the ref'ed element\n     */\n    getReferencedNode(type, refName, noFallback) {\n      if (\n        Object.prototype.hasOwnProperty.call(this.__referencedNodeCache, type) &&\n        Object.prototype.hasOwnProperty.call(this.__referencedNodeCache[type], refName)\n      ) {\n        return this.__referencedNodeCache[type][refName];\n      }\n      const fallbackType = type === 'simpleType' ? 'complexType' : 'simpleType';\n      if (!noFallback) {\n        if (\n          Object.prototype.hasOwnProperty.call(this.__referencedNodeCache, fallbackType) &&\n          Object.prototype.hasOwnProperty.call(this.__referencedNodeCache[fallbackType], refName)\n        ) {\n          return this.__referencedNodeCache[fallbackType][refName];\n        }\n      }\n\n      const selector = 'schema > ' + type + '[name=\"' + refName + '\"]';\n      let ref = this.__xsd.querySelector(selector);\n      if (!ref && !noFallback) {\n        try {\n          ref = this.getReferencedNode(fallbackType, refName, true);\n        } catch (e) {}\n      }\n      if (!ref) {\n        throw new Error('schema/xsd appears to be invalid, reference ' + type + ' \"' + refName + '\" can not be found');\n      }\n\n      if (ref.hasAttribute('ref')) {\n        // do it recursively, if necessary\n        ref = this.getReferencedNode(type, ref.getAttribute('ref'));\n      }\n\n      if (!Object.prototype.hasOwnProperty.call(this.__referencedNodeCache, type)) {\n        this.__referencedNodeCache[type] = {};\n      }\n\n      // fill the cache\n      this.__referencedNodeCache[type][refName] = ref;\n\n      return ref;\n    },\n\n    /**\n     * get the definition of a type, be it complex or simple\n     *\n     * @param   type    string  Type of type to find (either simple or complex)\n     * @param   name    string  Name of the type to find\n     */\n    getTypeNode(type, name) {\n      if (\n        Object.prototype.hasOwnProperty.call(this.__typeNodeCache, type) &&\n        Object.prototype.hasOwnProperty.call(this.__typeNodeCache[type], name)\n      ) {\n        return this.__typeNodeCache[type][name];\n      }\n      let typeNode = this.__xsd.querySelector(type + 'Type[name=\"' + name + '\"]');\n\n      if (!typeNode) {\n        throw new Error('schema/xsd appears to be invalid, ' + type + 'Type \"' + name + '\" can not be found');\n      }\n\n      if (typeof this.__typeNodeCache[type] == 'undefined') {\n        this.__typeNodeCache[type] = {};\n      }\n\n      // fill the cache\n      this.__typeNodeCache[type][name] = typeNode;\n\n      return typeNode;\n    },\n\n    /**\n     * get a SchemaElement for a #text-node\n     *\n     * @return  object  SchemaElement for #text-node\n     */\n    getTextNodeSchemaElement() {\n      if (this.__textNodeSchemaElement === null) {\n        // text-content is always a simple string\n        const tmpXML = this.__xsd.createElement('element');\n        tmpXML.setAttribute('name', '#text');\n        tmpXML.setAttribute('type', 'xsd:string');\n        this.__textNodeSchemaElement = new cv.ui.manager.model.schema.Element(tmpXML, this);\n      }\n\n      return this.__textNodeSchemaElement;\n    },\n\n    /**\n     * get a SchemaElement for a #comment-node\n     *\n     * @return  object  SchemaElement for #comment-node\n     */\n    getCommentNodeSchemaElement() {\n      if (this.__commentNodeSchemaElement === null) {\n        // text-content is always a simple string\n        const tmpXML = this.__xsd.createElement('element');\n        tmpXML.setAttribute('name', '#comment');\n        tmpXML.setAttribute('type', 'xsd:string');\n        tmpXML.setAttribute('minOccurs', '0');\n        tmpXML.setAttribute('maxOccurs', 'unbounded');\n        this.__commentNodeSchemaElement = new cv.ui.manager.model.schema.Element(tmpXML, this);\n      }\n\n      return this.__commentNodeSchemaElement;\n    },\n\n    /**\n     * get the DOM for this Schema\n     *\n     * @return  object  DOM\n     */\n    getSchemaDOM() {\n      return this.__xsd;\n    },\n\n    /**\n     * A CometVisu-Schema specific helper function that returns an array of all widget names.\n     * @returns {Array<String>}\n     */\n    getWidgetNames() {\n      if (!this._widgetNames) {\n        const root = this.getElementNode(this.__rootElementName);\n        let pageParent = root;\n        if (this.__pageParentElementName) {\n          pageParent = root.getSchemaElementForElementName(this.__pageParentElementName);\n        }\n        const page = pageParent.getSchemaElementForElementName(this.__pageElementName);\n\n        this._widgetNames = Object.keys(page.getAllowedElements()).filter(\n          name => !name.startsWith('#') && name !== 'layout'\n        );\n      }\n      return this._widgetNames;\n    },\n\n    isRoot(name) {\n      return name === this.__rootElementName;\n    },\n\n    isPage(name) {\n      return (name = this.__pageElementName);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__xsd = null;\n    this._disposeObjects('__commentNodeSchemaElement', '__textNodeSchemaElement');\n\n    this._disposeMap('__allowedRootElements');\n    this.__referencedNodeCache = null;\n    this.__typeNodeCache = null;\n    this._widgetNames = null;\n  }\n});\n"
  ],
  "mappings": "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"
}