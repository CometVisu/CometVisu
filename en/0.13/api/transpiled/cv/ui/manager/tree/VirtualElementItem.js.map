{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "tree",
    "VirtualTreeItem",
    "construct",
    "label",
    "core",
    "Environment",
    "get",
    "addState",
    "properties",
    "appearance",
    "refine",
    "init",
    "name",
    "check",
    "event",
    "apply",
    "temporary",
    "status",
    "nullable",
    "editable",
    "sortable",
    "droppable",
    "dragging",
    "events",
    "edit",
    "action",
    "members",
    "_forwardStates",
    "selected",
    "touch",
    "__labelAdded",
    "_applyName",
    "value",
    "getContentElement",
    "setAttribute",
    "_applyDragging",
    "removeState",
    "_applyModel",
    "menuButton",
    "getChildControl",
    "show",
    "menu",
    "getMenu",
    "setEditor",
    "getEditor",
    "setElement",
    "hide",
    "hasChildControl",
    "exclude",
    "_applyTemporary",
    "_applySortable",
    "_applyStatus",
    "old",
    "icon",
    "_addWidgets",
    "open",
    "addClass",
    "_createChildControlImpl",
    "id",
    "hash",
    "control",
    "cv",
    "manager",
    "basic",
    "Image",
    "set",
    "forceScale",
    "alignY",
    "anonymous",
    "source",
    "getIcon",
    "maxWidth",
    "maxHeight",
    "container",
    "Composite",
    "layout",
    "HBox",
    "setAnonymous",
    "Atom",
    "theme",
    "dark",
    "Images",
    "setToolTipText",
    "tr",
    "setShow",
    "addAt",
    "form",
    "MenuButton",
    "contextmenu",
    "ConfigElement",
    "addListener",
    "ev",
    "fireDataEvent",
    "getData",
    "addLabel",
    "text",
    "_remove",
    "setLabel",
    "setValue",
    "getLabel",
    "_add",
    "Spacer",
    "flex",
    "buttons",
    "VirtualElementItem"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/tree/VirtualElementItem.js"
  ],
  "sourcesContent": [
    "/* VirtualElementItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Widget for node items in XML-File\n */\nqx.Class.define('cv.ui.manager.tree.VirtualElementItem', {\n  extend: qx.ui.tree.VirtualTreeItem,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(label) {\n    super(label);\n    if (qx.core.Environment.get('device.touch')) {\n      this.addState('touch');\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'element-tree-item'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      event: 'changeName',\n      apply: '_applyName'\n    },\n\n    temporary: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyTemporary'\n    },\n\n    status: {\n      check: ['valid', 'error', 'comment'],\n      nullable: true,\n      apply: '_applyStatus'\n    },\n\n    editable: {\n      check: 'Boolean',\n      init: false\n    },\n\n    sortable: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applySortable'\n    },\n\n    droppable: {\n      refine: true,\n      init: true\n    },\n\n    dragging: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyDragging'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    edit: 'qx.event.type.Data',\n    action: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  /* eslint-disable @qooxdoo/qx/no-refs-in-members */\n  members: {\n    // overridden\n    /**\n     * @lint ignoreReferenceField(_forwardStates)\n     */\n    _forwardStates: {\n      selected: true,\n      touch: true\n    },\n\n    __labelAdded: false,\n\n    _applyName(value) {\n      this.getContentElement().setAttribute('data-nodename', value);\n    },\n\n    // this has to be set by model binding, because the qx way by adding a state does not survive a widget re-binding\n    _applyDragging(value) {\n      if (value) {\n        this.addState('drag');\n      } else {\n        this.removeState('drag');\n      }\n    },\n\n    _applyModel(value) {\n      if (qx.core.Environment.get('device.touch')) {\n        if (value) {\n          const menuButton = this.getChildControl('menu-button');\n          menuButton.show();\n          let menu = menuButton.getMenu();\n          menu.setEditor(value.getEditor());\n          menu.setElement(value);\n        } else {\n          this.getChildControl('menu-button').hide();\n        }\n      } else if (this.hasChildControl('menu-button')) {\n        this.getChildControl('menu-button').exclude();\n      }\n    },\n\n    _applyTemporary(value) {\n      if (value) {\n        this.addState('temporary');\n      } else {\n        this.removeState('temporary');\n      }\n    },\n\n    _applySortable(value) {\n      if (value) {\n        this.getChildControl('move-button').show();\n      } else {\n        this.getChildControl('move-button').hide();\n      }\n    },\n\n    _applyStatus(value, old) {\n      const icon = this.getChildControl('icon');\n      const label = this.getChildControl('label');\n      if (old) {\n        icon.removeState(old);\n        label.removeState(old);\n      }\n      if (value) {\n        icon.addState(value);\n        label.addState(value);\n      }\n    },\n\n    _addWidgets() {\n      super._addWidgets();\n      const open = this.getChildControl('open', true);\n      if (open && qx.core.Environment.get('device.touch')) {\n        open.getContentElement().addClass('touch-tree-open-icon');\n      }\n    },\n\n    // overridden\n    _createChildControlImpl(id, hash) {\n      let control;\n\n      switch (id) {\n        case 'icon':\n          control = new cv.ui.manager.basic.Image().set({\n            forceScale: true,\n            alignY: 'middle',\n            anonymous: true,\n            source: this.getIcon(),\n            maxWidth: 22,\n            maxHeight: 22\n          });\n\n          break;\n\n        case 'buttons':\n          control = new qx.ui.container.Composite(new qx.ui.layout.HBox(8));\n          control.setAnonymous(true);\n          break;\n\n        case 'move-button':\n          control = new qx.ui.basic.Atom(\n            '',\n            cv.theme.dark.Images.getIcon('drag-handle', qx.core.Environment.get('device.touch') ? 36 : 18)\n          );\n\n          control.setToolTipText(this.tr('Drag to move'));\n          control.setAnonymous(true);\n          control.setShow('icon');\n          this.getChildControl('buttons').addAt(control, 0);\n          break;\n\n        case 'menu-button':\n          control = new qx.ui.form.MenuButton(\n            '',\n            cv.theme.dark.Images.getIcon('menu', qx.core.Environment.get('device.touch') ? 24 : 14),\n\n            new cv.ui.manager.contextmenu.ConfigElement()\n          );\n\n          control.getMenu().addListener('action', ev => {\n            this.fireDataEvent('action', ev.getData());\n          });\n          this.getChildControl('buttons').addAt(control, 1);\n          break;\n      }\n\n      return control || super._createChildControlImpl(id);\n    },\n\n    // overridden\n    addLabel(text) {\n      const label = this.getChildControl('label');\n\n      if (this.__labelAdded) {\n        this._remove(label);\n      }\n\n      if (text) {\n        this.setLabel(text);\n      } else {\n        label.setValue(this.getLabel());\n      }\n\n      this._add(label);\n      this._add(new qx.ui.core.Spacer(), { flex: 1 });\n      const buttons = this.getChildControl('buttons');\n      this._add(buttons);\n      this.__labelAdded = true;\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}