{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "tree",
    "VirtualTreeItem",
    "properties",
    "appearance",
    "refine",
    "init",
    "editing",
    "check",
    "apply",
    "name",
    "event",
    "temporary",
    "status",
    "nullable",
    "members",
    "_applyEditing",
    "value",
    "old",
    "field",
    "getChildControl",
    "setValue",
    "getLabel",
    "show",
    "message",
    "Bus",
    "dispatchByName",
    "exclude",
    "getValue",
    "getName",
    "cv",
    "manager",
    "control",
    "FileController",
    "getInstance",
    "rename",
    "getModel",
    "_applyTemporary",
    "addState",
    "removeState",
    "_applyModel",
    "removeRelatedBindings",
    "isTrash",
    "setLabel",
    "tr",
    "bind",
    "converter",
    "getType",
    "setDroppable",
    "addListener",
    "_onDrop",
    "removeListener",
    "_applyStatus",
    "ev",
    "info",
    "getRelatedTarget",
    "__cancelEditing",
    "setEditing",
    "_onKeypress",
    "getKeyIdentifier",
    "_createChildControlImpl",
    "id",
    "form",
    "TextField",
    "getData",
    "_add",
    "VirtualFsItem"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/tree/VirtualFsItem.js"
  ],
  "sourcesContent": [
    "/* VirtualFsItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Widget for filesystem items in a virtual tree.\n */\nqx.Class.define('cv.ui.manager.tree.VirtualFsItem', {\n  extend: qx.ui.tree.VirtualTreeItem,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'fs-tree-item'\n    },\n\n    editing: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyEditing'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      event: 'changeName'\n    },\n\n    temporary: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyTemporary'\n    },\n\n    status: {\n      check: ['valid', 'error'],\n      nullable: true,\n      apply: '_applyStatus'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyEditing(value, old) {\n      if (value !== old) {\n        const field = this.getChildControl('edit');\n        if (value) {\n          field.setValue(this.getLabel());\n          field.show();\n          qx.event.message.Bus.dispatchByName('cv.manager.tree.enable', false);\n        } else {\n          qx.event.message.Bus.dispatchByName('cv.manager.tree.enable', true);\n          field.exclude();\n          // save new name\n          if (field.getValue() !== this.getName()) {\n            cv.ui.manager.control.FileController.getInstance().rename(this.getModel(), field.getValue());\n          }\n        }\n      }\n    },\n    _applyTemporary(value) {\n      if (value) {\n        this.addState('temporary');\n      } else {\n        this.removeState('temporary');\n      }\n    },\n\n    // overridden\n    _applyModel(value, old) {\n      super._applyModel(value, old);\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        if (value.isTrash()) {\n          this.setLabel(this.tr('Trash'));\n        } else {\n          value.bind('name', this, 'label');\n          value.bind('valid', this, 'status', {\n            converter(value) {\n              return value === true ? 'valid' : 'error';\n            }\n          });\n        }\n        value.bind('temporary', this, 'temporary');\n        if (value.getType() === 'dir') {\n          this.setDroppable(true);\n          this.addListener('drop', this._onDrop, this);\n        } else {\n          this.setDroppable(false);\n          this.removeListener('drop', this._onDrop, this);\n        }\n      }\n    },\n\n    _applyStatus(value) {\n      const control = this.getChildControl('icon');\n      if (value) {\n        switch (value) {\n          case 'valid':\n            control.removeState('error');\n            break;\n\n          case 'error':\n            control.addState('error');\n            break;\n        }\n      }\n    },\n\n    /**\n     * Handle drop events\n     * @param ev {Event}\n     * @private\n     */\n    _onDrop(ev) {\n      this.info(ev.getRelatedTarget());\n    },\n\n    __cancelEditing() {\n      this.getChildControl('edit').setValue(this.getName());\n      this.setEditing(false);\n    },\n\n    _onKeypress(ev) {\n      if (ev.getKeyIdentifier() === 'Enter') {\n        this.setEditing(false);\n      } else if (ev.getKeyIdentifier() === 'Esc') {\n        this.__cancelEditing();\n      }\n    },\n\n    // overridden\n    _createChildControlImpl(id) {\n      let control;\n\n      switch (id) {\n        case 'edit':\n          control = new qx.ui.form.TextField();\n          control.addListener('keypress', this._onKeypress, this);\n          control.exclude();\n          control.addListener('changeVisibility', ev => {\n            if (ev.getData() === 'visible') {\n              this.getChildControl('label').exclude();\n            } else {\n              this.getChildControl('label').show();\n            }\n          });\n          control.addListener('blur', () => {\n            this.setEditing(false);\n          });\n          this._add(control);\n          break;\n      }\n\n      return control || super._createChildControlImpl(id);\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}