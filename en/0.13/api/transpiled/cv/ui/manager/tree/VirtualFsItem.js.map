{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "tree",
    "VirtualTreeItem",
    "properties",
    "appearance",
    "refine",
    "init",
    "editing",
    "check",
    "apply",
    "name",
    "event",
    "temporary",
    "status",
    "nullable",
    "members",
    "_applyEditing",
    "value",
    "old",
    "field",
    "getChildControl",
    "setValue",
    "getLabel",
    "show",
    "message",
    "Bus",
    "dispatchByName",
    "exclude",
    "getValue",
    "getName",
    "cv",
    "manager",
    "control",
    "FileController",
    "getInstance",
    "rename",
    "getModel",
    "_applyTemporary",
    "addState",
    "removeState",
    "_applyModel",
    "removeRelatedBindings",
    "isTrash",
    "setLabel",
    "tr",
    "bind",
    "converter",
    "getType",
    "setDroppable",
    "addListener",
    "_onDrop",
    "removeListener",
    "_applyStatus",
    "ev",
    "info",
    "getRelatedTarget",
    "__cancelEditing",
    "setEditing",
    "_onKeypress",
    "getKeyIdentifier",
    "_createChildControlImpl",
    "id",
    "form",
    "TextField",
    "getData",
    "_add",
    "VirtualFsItem"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/tree/VirtualFsItem.js"
  ],
  "sourcesContent": [
    "/* VirtualFsItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Widget for filesystem items in a virtual tree.\n */\nqx.Class.define('cv.ui.manager.tree.VirtualFsItem', {\n  extend: qx.ui.tree.VirtualTreeItem,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'fs-tree-item'\n    },\n\n    editing: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyEditing'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      event: 'changeName'\n    },\n\n    temporary: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyTemporary'\n    },\n\n    status: {\n      check: ['valid', 'error'],\n      nullable: true,\n      apply: '_applyStatus'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyEditing(value, old) {\n      if (value !== old) {\n        const field = this.getChildControl('edit');\n        if (value) {\n          field.setValue(this.getLabel());\n          field.show();\n          qx.event.message.Bus.dispatchByName('cv.manager.tree.enable', false);\n        } else {\n          qx.event.message.Bus.dispatchByName('cv.manager.tree.enable', true);\n          field.exclude();\n          // save new name\n          if (field.getValue() !== this.getName()) {\n            cv.ui.manager.control.FileController.getInstance().rename(this.getModel(), field.getValue());\n          }\n        }\n      }\n    },\n    _applyTemporary(value) {\n      if (value) {\n        this.addState('temporary');\n      } else {\n        this.removeState('temporary');\n      }\n    },\n\n    // overridden\n    _applyModel(value, old) {\n      super._applyModel(value, old);\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        if (value.isTrash()) {\n          this.setLabel(this.tr('Trash'));\n        } else {\n          value.bind('name', this, 'label');\n          value.bind('valid', this, 'status', {\n            converter(value) {\n              return value === true ? 'valid' : 'error';\n            }\n          });\n        }\n        value.bind('temporary', this, 'temporary');\n        if (value.getType() === 'dir') {\n          this.setDroppable(true);\n          this.addListener('drop', this._onDrop, this);\n        } else {\n          this.setDroppable(false);\n          this.removeListener('drop', this._onDrop, this);\n        }\n      }\n    },\n\n    _applyStatus(value) {\n      const control = this.getChildControl('icon');\n      if (value) {\n        switch (value) {\n          case 'valid':\n            control.removeState('error');\n            break;\n\n          case 'error':\n            control.addState('error');\n            break;\n        }\n      }\n    },\n\n    /**\n     * Handle drop events\n     * @param ev {Event}\n     * @private\n     */\n    _onDrop(ev) {\n      this.info(ev.getRelatedTarget());\n    },\n\n    __cancelEditing() {\n      this.getChildControl('edit').setValue(this.getName());\n      this.setEditing(false);\n    },\n\n    _onKeypress(ev) {\n      if (ev.getKeyIdentifier() === 'Enter') {\n        this.setEditing(false);\n      } else if (ev.getKeyIdentifier() === 'Esc') {\n        this.__cancelEditing();\n      }\n    },\n\n    // overridden\n    _createChildControlImpl(id) {\n      let control;\n\n      switch (id) {\n        case 'edit':\n          control = new qx.ui.form.TextField();\n          control.addListener('keypress', this._onKeypress, this);\n          control.exclude();\n          control.addListener('changeVisibility', ev => {\n            if (ev.getData() === 'visible') {\n              this.getChildControl('label').exclude();\n            } else {\n              this.getChildControl('label').show();\n            }\n          });\n          control.addListener('blur', () => {\n            this.setEditing(false);\n          });\n          this._add(control);\n          break;\n      }\n\n      return control || super._createChildControlImpl(id);\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}