{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/tree/VirtualFsItem.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "tree",
    "VirtualTreeItem",
    "properties",
    "appearance",
    "refine",
    "init",
    "editing",
    "check",
    "apply",
    "name",
    "event",
    "temporary",
    "status",
    "nullable",
    "members",
    "_applyEditing",
    "value",
    "old",
    "field",
    "getChildControl",
    "setValue",
    "getLabel",
    "show",
    "message",
    "Bus",
    "dispatchByName",
    "exclude",
    "getValue",
    "getName",
    "cv",
    "manager",
    "control",
    "FileController",
    "getInstance",
    "rename",
    "getModel",
    "_applyTemporary",
    "addState",
    "removeState",
    "_applyModel",
    "removeRelatedBindings",
    "isTrash",
    "setLabel",
    "tr",
    "bind",
    "converter",
    "getType",
    "setDroppable",
    "addListener",
    "_onDrop",
    "removeListener",
    "_applyStatus",
    "ev",
    "info",
    "getRelatedTarget",
    "__cancelEditing",
    "setEditing",
    "_onKeypress",
    "getKeyIdentifier",
    "_createChildControlImpl",
    "id",
    "form",
    "TextField",
    "getData",
    "_add",
    "VirtualFsItem"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* VirtualFsItem.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Widget for filesystem items in a virtual tree.\n */\nqx.Class.define('cv.ui.manager.tree.VirtualFsItem', {\n  extend: qx.ui.tree.VirtualTreeItem,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'fs-tree-item'\n    },\n\n    editing: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyEditing'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      event: 'changeName'\n    },\n\n    temporary: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyTemporary'\n    },\n\n    status: {\n      check: ['valid', 'error'],\n      nullable: true,\n      apply: '_applyStatus'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n\n    _applyEditing: function (value, old) {\n      if (value !== old) {\n        const field = this.getChildControl('edit');\n        if (value) {\n          field.setValue(this.getLabel());\n          field.show();\n          qx.event.message.Bus.dispatchByName('cv.manager.tree.enable', false);\n        } else {\n          qx.event.message.Bus.dispatchByName('cv.manager.tree.enable', true);\n          field.exclude();\n          // save new name\n          if (field.getValue() !== this.getName()) {\n            cv.ui.manager.control.FileController.getInstance().rename(this.getModel(), field.getValue());\n          }\n        }\n      }\n    },\n    _applyTemporary: function (value) {\n      if (value) {\n        this.addState('temporary');\n      } else {\n        this.removeState('temporary');\n      }\n    },\n\n    // overridden\n    _applyModel : function(value, old) {\n      this.base(arguments, value, old);\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        if (value.isTrash()) {\n          this.setLabel(this.tr('Trash'));\n        } else {\n          value.bind('name', this, 'label');\n          value.bind('valid', this, 'status', {\n            converter: function (value) {\n              return value === true ? 'valid' : 'error';\n            }\n          });\n        }\n        value.bind('temporary', this, 'temporary');\n        if (value.getType() === 'dir') {\n          this.setDroppable(true);\n          this.addListener('drop', this._onDrop, this);\n        } else {\n          this.setDroppable(false);\n          this.removeListener('drop', this._onDrop, this);\n        }\n      }\n    },\n\n    _applyStatus: function (value) {\n      const control = this.getChildControl('icon');\n      if (value) {\n        switch (value) {\n          case 'valid':\n            control.removeState('error');\n            break;\n\n          case 'error':\n            control.addState('error');\n            break;\n        }\n      }\n    },\n\n    /**\n     * Handle drop events\n     * @param ev {Event}\n     * @private\n     */\n    _onDrop: function (ev) {\n      this.info(ev.getRelatedTarget());\n    },\n\n    __cancelEditing: function () {\n      this.getChildControl('edit').setValue(this.getName());\n      this.setEditing(false);\n    },\n\n    _onKeypress: function (ev) {\n      if (ev.getKeyIdentifier() === 'Enter') {\n        this.setEditing(false);\n      } else if (ev.getKeyIdentifier() === 'Esc') {\n        this.__cancelEditing();\n      }\n    },\n\n    // overridden\n    _createChildControlImpl : function(id) {\n      let control;\n\n      switch (id) {\n         case 'edit':\n           control = new qx.ui.form.TextField();\n           control.addListener('keypress', this._onKeypress, this);\n           control.exclude();\n           control.addListener('changeVisibility', function (ev) {\n              if (ev.getData() === 'visible') {\n                this.getChildControl('label').exclude();\n              } else {\n                this.getChildControl('label').show();\n              }\n           }, this);\n           control.addListener('blur', function () {\n             this.setEditing(false);\n           }, this);\n           this._add(control);\n           break;\n       }\n\n       return control || this.base(arguments, id);\n    }\n  }\n});\n"
  ]
}