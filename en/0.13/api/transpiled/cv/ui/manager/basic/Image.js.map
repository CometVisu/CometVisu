{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "source",
    "__contentElements",
    "setSource",
    "properties",
    "check",
    "init",
    "nullable",
    "event",
    "apply",
    "themeable",
    "transform",
    "scale",
    "forceScale",
    "forceRatio",
    "allowScaleUp",
    "appearance",
    "refine",
    "allowShrinkX",
    "allowShrinkY",
    "allowGrowX",
    "allowGrowY",
    "events",
    "loadingFailed",
    "loaded",
    "aborted",
    "statics",
    "PLACEHOLDER_IMAGE",
    "members",
    "__width",
    "__height",
    "__mode",
    "__currentContentElement",
    "__wrapper",
    "__requestId",
    "_transformSource",
    "value",
    "startsWith",
    "ResourceManager",
    "util",
    "getInstance",
    "has",
    "substring",
    "length",
    "_onChangeTheme",
    "_styleSource",
    "getContentElement",
    "__getSuitableContentElement",
    "_createContentElement",
    "_getContentHint",
    "width",
    "height",
    "_applyDecorator",
    "old",
    "getSource",
    "AliasManager",
    "resolve",
    "el",
    "getChild",
    "__setSource",
    "_applyTextColor",
    "__getMode",
    "setStyle",
    "theme",
    "manager",
    "Color",
    "removeStyle",
    "_applyPadding",
    "name",
    "element",
    "setStyles",
    "top",
    "getPaddingTop",
    "left",
    "getPaddingLeft",
    "html",
    "Image",
    "setPadding",
    "renderLayout",
    "getPaddingRight",
    "getPaddingBottom",
    "_applyEnabled",
    "_applySource",
    "io",
    "ImageLoader",
    "isLoading",
    "abort",
    "_applyScale",
    "__setMode",
    "mode",
    "lang",
    "String",
    "isPng",
    "endsWith",
    "getScale",
    "Environment",
    "get",
    "getForceScale",
    "__createSuitableContentElement",
    "tagName",
    "Clazz",
    "Element",
    "Label",
    "connectWidget",
    "overflowX",
    "overflowY",
    "boxSizing",
    "setRich",
    "setScale",
    "wrapper",
    "add",
    "$$disposed",
    "__resetSource",
    "__checkForContentElementSwitch",
    "parseInt",
    "repeat",
    "tagNameHint",
    "bom",
    "Decoration",
    "getTagName",
    "contentEl",
    "__getContentElement",
    "isFontUri",
    "__setManagedImage",
    "color",
    "getTextColor",
    "Type",
    "isString",
    "highResolutionSource",
    "findHighResolutionSource",
    "imageWidth",
    "getImageWidth",
    "imageHeight",
    "getImageHeight",
    "setWidth",
    "setHeight",
    "backgroundSize",
    "__fireLoadEvent",
    "isLoaded",
    "__setUnmanagedImage",
    "__loadUnmanagedImage",
    "AnimationFrame",
    "request",
    "rId",
    "fireEvent",
    "bind",
    "select",
    "mshtml",
    "alphaImageLoader",
    "isFont",
    "isSvg",
    "__checkForContentElementReplacement",
    "elementToAdd",
    "currentContentElement",
    "pixel",
    "styles",
    "currentStyles",
    "getAllStyles",
    "prop",
    "backgroundImage",
    "bounds",
    "getBounds",
    "insets",
    "getInsets",
    "getStyle",
    "zIndex",
    "newEl",
    "setSelectable",
    "getSelectable",
    "isVisible",
    "hide",
    "show",
    "isIncluded",
    "exclude",
    "include",
    "container",
    "getParent",
    "index",
    "getChildren",
    "indexOf",
    "removeAt",
    "addAt",
    "hint",
    "getNodeName",
    "setValue",
    "removeAll",
    "currentEl",
    "setAttribute",
    "getAttribute",
    "flush",
    "currentDomEl",
    "getDomElement",
    "newDomEl",
    "listeners",
    "getListeners",
    "forEach",
    "listenerData",
    "addListener",
    "type",
    "handler",
    "self",
    "capture",
    "currentHash",
    "$$hash",
    "getEnabled",
    "disabled",
    "replace",
    "addState",
    "removeState",
    "split",
    "getSizeHint",
    "getWidth",
    "getHeight",
    "font",
    "Font",
    "match",
    "size",
    "getSize",
    "__updateContentHint",
    "_applyDimension",
    "isFailed",
    "load",
    "__loaderCallback",
    "resetSource",
    "resetValue",
    "child",
    "useMarkup",
    "sparts",
    "fontSource",
    "fontStyles",
    "Object",
    "clone",
    "getStyles",
    "resource",
    "getData",
    "fromCharCode",
    "charCode",
    "decorator",
    "getDecorator",
    "hasGradient",
    "getStartColor",
    "getEndColor",
    "hasBackground",
    "getBackgroundImage",
    "attr",
    "getAttributes",
    "decoratorStyle",
    "combinedStyles",
    "style",
    "backgroundPosition",
    "backgroundRepeat",
    "getBackgroundRepeat",
    "imageInfo",
    "failed",
    "warn",
    "undefined",
    "_recalc",
    "queue",
    "Layout",
    "originalWidth",
    "originalHeight",
    "maxWidth",
    "getMaxWidth",
    "maxHeight",
    "getMaxHeight",
    "minWidth",
    "getMinWidth",
    "minHeight",
    "getMinHeight",
    "ratio",
    "getForceRatio",
    "isAllowScaleUp",
    "Math",
    "round",
    "destruct",
    "prototype",
    "hasOwnProperty",
    "call",
    "disconnectWidget",
    "_disposeMap",
    "cv",
    "basic"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/basic/Image.js"
  ],
  "sourcesContent": [
    "/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Sebastian Werner (wpbasti)\n\n************************************************************************ */\n\n/**\n * The image class displays an image file\n *\n * This class supports image clipping, which means that multiple images can be combined\n * into one large image and only the relevant part is shown.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.basic.Image(\"icon/32/actions/format-justify-left.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>icon/32/actions/format-justify-left.png</code>.\n *\n * *External Documentation*\n *\n * <a href='http://qooxdoo.org/docs/#desktop/widget/image.md' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n */\nqx.Class.define('cv.ui.manager.basic.Image', {\n  extend: qx.ui.core.Widget,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param source {String?null} The URL of the image to display.\n   */\n  construct(source) {\n    this.__contentElements = {};\n\n    super();\n\n    if (source) {\n      this.setSource(source);\n    }\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /** The URL of the image. Setting it will possibly abort loading of current image. */\n    source: {\n      check: 'String',\n      init: null,\n      nullable: true,\n      event: 'changeSource',\n      apply: '_applySource',\n      themeable: true,\n      transform: '_transformSource'\n    },\n\n    /**\n     * Whether the image should be scaled to the given dimensions\n     *\n     * This is disabled by default because it prevents the usage\n     * of image clipping when enabled.\n     */\n    scale: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeScale',\n      themeable: true,\n      apply: '_applyScale'\n    },\n\n    forceScale: {\n      check: 'Boolean',\n      init: false\n    },\n\n    /**\n     * Whether to preserve the image ratio (ie prevent distortion), and which dimension\n     * to prioritise\n     */\n    forceRatio: {\n      init: 'auto',\n      check: ['disabled', 'height', 'width', 'auto'],\n      apply: '_applyDimension'\n    },\n\n    /**\n     * Whether to allow scaling the image up\n     */\n    allowScaleUp: {\n      init: false,\n      check: 'Boolean',\n      apply: '_applyDimension'\n    },\n\n    // overridden\n    appearance: {\n      refine: true,\n      init: 'image'\n    },\n\n    // overridden\n    allowShrinkX: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowShrinkY: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowGrowX: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowGrowY: {\n      refine: true,\n      init: false\n    }\n  },\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events: {\n    /**\n     * Fired if the image source can not be loaded. This event can only be\n     * fired for the first loading of an unmanaged resource (external image).\n     */\n    loadingFailed: 'qx.event.type.Event',\n\n    /**\n     * Fired if the image has been loaded. This is even true for managed\n     * resources (images known by generator).\n     */\n    loaded: 'qx.event.type.Event',\n\n    /** Fired when the pending request has been aborted. */\n    aborted: 'qx.event.type.Event'\n  },\n\n  statics: {\n    PLACEHOLDER_IMAGE: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __width: null,\n    __height: null,\n    __mode: null,\n    __contentElements: null,\n    __currentContentElement: null,\n    __wrapper: null,\n    __requestId: 0,\n\n    /**\n     * Remove the \"resource/\" prefix when the ResourceManager knows the image\n     * @param value\n     * @return {*}\n     * @private\n     */\n    _transformSource(value) {\n      if (value && value.startsWith('resource/')) {\n        const ResourceManager = qx.util.ResourceManager.getInstance();\n        if (ResourceManager.has(value.substring('resource/'.length))) {\n          return value.substring('resource/'.length);\n        }\n      }\n      return value;\n    },\n\n    // overridden\n    _onChangeTheme() {\n      super._onChangeTheme();\n      // restyle source (theme change might have changed the resolved url)\n      this._styleSource();\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      WIDGET API\n    ---------------------------------------------------------------------------\n    */\n\n    // overridden\n    getContentElement() {\n      return this.__getSuitableContentElement();\n    },\n\n    // overridden\n    _createContentElement() {\n      return this.__getSuitableContentElement();\n    },\n\n    // overridden\n    _getContentHint() {\n      return {\n        width: this.__width || 0,\n        height: this.__height || 0\n      };\n    },\n\n    // overridden\n    _applyDecorator(value, old) {\n      super._applyDecorator(value, old);\n\n      let source = this.getSource();\n      source = qx.util.AliasManager.getInstance().resolve(source);\n      let el = this.getContentElement();\n      if (this.__wrapper) {\n        el = el.getChild(0);\n      }\n      this.__setSource(el, source);\n    },\n\n    // overridden\n    _applyTextColor(value) {\n      if (this.__getMode() === 'font') {\n        let el = this.getContentElement();\n        if (this.__wrapper) {\n          el = el.getChild(0);\n        }\n\n        if (value) {\n          el.setStyle('color', qx.theme.manager.Color.getInstance().resolve(value));\n        } else {\n          el.removeStyle('color');\n        }\n      }\n    },\n\n    // overridden\n    _applyPadding(value, old, name) {\n      super._applyPadding(value, old, name);\n\n      const element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else if (this.__getMode() === 'font') {\n        element.setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else if (element instanceof qx.html.Image) {\n        element.setPadding(this.getPaddingLeft() || 0, this.getPaddingTop() || 0);\n      }\n    },\n\n    renderLayout(left, top, width, height) {\n      super.renderLayout(left, top, width, height);\n\n      const element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          width: width - (this.getPaddingLeft() || 0) - (this.getPaddingRight() || 0),\n          height: height - (this.getPaddingTop() || 0) - (this.getPaddingBottom() || 0),\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      IMAGE API\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply, overridden\n    _applyEnabled(value, old) {\n      super._applyEnabled(value, old);\n\n      if (this.getSource()) {\n        this._styleSource();\n      }\n    },\n\n    // property apply\n    _applySource(value, old) {\n      // abort loading current image\n      if (old) {\n        if (qx.io.ImageLoader.isLoading(old)) {\n          qx.io.ImageLoader.abort(old);\n        }\n      }\n\n      this._styleSource();\n    },\n\n    // property apply\n    _applyScale(value) {\n      this._styleSource();\n    },\n\n    /**\n     * Remembers the mode to keep track which contentElement is currently in use.\n     * @param mode {String} internal mode (alphaScaled|scaled|nonScaled)\n     */\n    __setMode(mode) {\n      this.__mode = mode;\n    },\n\n    /**\n     * Returns the current mode if set. Otherwise checks the current source and\n     * the current scaling to determine the current mode.\n     *\n     * @return {String} current internal mode\n     */\n    __getMode() {\n      if (this.__mode === null) {\n        const source = this.getSource();\n\n        if (source && qx.lang.String.startsWith(source, '@')) {\n          this.__mode = 'font';\n        } else if (source && source.startsWith('<svg')) {\n          this.__mode = 'svg';\n        } else {\n          let isPng = false;\n          if (source !== null) {\n            isPng = source.endsWith('.png');\n          }\n\n          if (this.getScale() && isPng && qx.core.Environment.get('css.alphaimageloaderneeded')) {\n            this.__mode = 'alphaScaled';\n          } else if (this.getScale() || this.getForceScale()) {\n            this.__mode = 'scaled';\n          } else {\n            this.__mode = 'nonScaled';\n          }\n        }\n      }\n\n      return this.__mode;\n    },\n\n    /**\n     * Creates a contentElement suitable for the current mode\n     *\n     * @param mode {String} internal mode\n     * @return {qx.html.Image} suitable image content element\n     */\n    __createSuitableContentElement(mode) {\n      let scale;\n      let tagName;\n      let Clazz = qx.html.Image;\n\n      switch (mode) {\n        case 'svg':\n          Clazz = qx.html.Element;\n          tagName = 'div';\n          break;\n        case 'font':\n          Clazz = qx.html.Label;\n          scale = true;\n          tagName = 'div';\n          break;\n        case 'alphaScaled':\n          scale = true;\n          tagName = 'div';\n          break;\n        case 'nonScaled':\n          scale = false;\n          tagName = 'div';\n          break;\n        default:\n          scale = true;\n          tagName = 'img';\n          break;\n      }\n\n      const element = new Clazz(tagName);\n      element.connectWidget(this);\n      element.setStyles({\n        overflowX: 'hidden',\n        overflowY: 'hidden',\n        boxSizing: 'border-box'\n      });\n\n      if (mode === 'font') {\n        element.setRich(true);\n      } else if (mode !== 'svg') {\n        element.setScale(scale);\n\n        if (qx.core.Environment.get('css.alphaimageloaderneeded')) {\n          const wrapper = (this.__wrapper = new qx.html.Element('div'));\n          element.connectWidget(this);\n          wrapper.setStyle('position', 'absolute');\n          wrapper.add(element);\n          return wrapper;\n        }\n      }\n\n      return element;\n    },\n\n    /**\n     * Returns a contentElement suitable for the current mode\n     *\n     * @return {qx.html.Image} suitable image contentElement\n     */\n    __getSuitableContentElement() {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      const mode = this.__getMode();\n\n      if (!this.__contentElements[mode]) {\n        this.__contentElements[mode] = this.__createSuitableContentElement(mode);\n      }\n\n      const element = this.__contentElements[mode];\n\n      if (!this.__currentContentElement) {\n        this.__currentContentElement = element;\n      }\n\n      return element;\n    },\n\n    /**\n     * Applies the source to the clipped image instance or preload\n     * an image to detect sizes and apply it afterwards.\n     *\n     */\n    _styleSource() {\n      const AliasManager = qx.util.AliasManager.getInstance();\n      const ResourceManager = qx.util.ResourceManager.getInstance();\n\n      let source = AliasManager.resolve(this.getSource());\n\n      let element = this.getContentElement();\n      if (this.__wrapper) {\n        element = element.getChild(0);\n      }\n\n      if (!source) {\n        this.__resetSource(element);\n        return;\n      }\n\n      this.__checkForContentElementSwitch(source);\n\n      if (\n        qx.core.Environment.get('engine.name') == 'mshtml' &&\n        (parseInt(qx.core.Environment.get('engine.version'), 10) < 9 ||\n          qx.core.Environment.get('browser.documentmode') < 9)\n      ) {\n        const repeat = this.getScale() ? 'scale' : 'no-repeat';\n        element.tagNameHint = qx.bom.element.Decoration.getTagName(repeat, source);\n      }\n\n      const contentEl = this.__getContentElement();\n\n      // Detect if the image registry knows this image\n      if (ResourceManager.isFontUri(source)) {\n        this.__setManagedImage(contentEl, source);\n        const color = this.getTextColor();\n        if (qx.lang.Type.isString(color)) {\n          this._applyTextColor(color, null);\n        }\n      } else if (source && source.startsWith('<svg')) {\n        this.__setManagedImage(contentEl, source);\n      } else if (ResourceManager.has(source)) {\n        const highResolutionSource = ResourceManager.findHighResolutionSource(source);\n        if (highResolutionSource) {\n          const imageWidth = ResourceManager.getImageWidth(source);\n          const imageHeight = ResourceManager.getImageHeight(source);\n          this.setWidth(imageWidth);\n          this.setHeight(imageHeight);\n\n          // set background size on current element (div or img)\n          const backgroundSize = imageWidth + 'px, ' + imageHeight + 'px';\n          this.__currentContentElement.setStyle('background-size', backgroundSize);\n\n          this.setSource(highResolutionSource);\n          source = highResolutionSource;\n        }\n        this.__setManagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else if (qx.io.ImageLoader.isLoaded(source)) {\n        this.__setUnmanagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else {\n        this.__loadUnmanagedImage(contentEl, source);\n      }\n    },\n\n    /**\n     * Helper function, which fires <code>loaded</code> event asynchronously.\n     * It emulates native <code>loaded</code> event of an image object. This\n     * helper will be called, if you try to load a managed image or an\n     * previously loaded unmanaged image.\n     */\n    __fireLoadEvent() {\n      this.__requestId++;\n      qx.bom.AnimationFrame.request(\n        function (rId) {\n          // prevent firing of the event if source changed in the meantime\n          if (rId === this.__requestId) {\n            this.fireEvent('loaded');\n          } else {\n            this.fireEvent('aborted');\n          }\n        }.bind(this, this.__requestId)\n      );\n    },\n\n    /**\n     * Returns the content element.\n     * @return {qx.html.Image} content element\n     */\n    __getContentElement() {\n      let contentEl = this.__currentContentElement;\n      if (this.__wrapper) {\n        contentEl = contentEl.getChild(0);\n      }\n\n      return contentEl;\n    },\n\n    /**\n     * Checks if the current content element is capable to display the image\n     * with the current settings (scaling, alpha PNG)\n     *\n     * @param source {String} source of the image\n     */\n    __checkForContentElementSwitch: qx.core.Environment.select('engine.name', {\n      mshtml(source) {\n        const alphaImageLoader = qx.core.Environment.get('css.alphaimageloaderneeded');\n\n        const isPng = source.endsWith('.png');\n        const isFont = source.startsWith('@');\n        const isSvg = source.startsWith('<svg');\n        const scale = this.getScale() || this.getForceScale();\n\n        if (isFont) {\n          this.__setMode('font');\n        } else if (isSvg) {\n          this.__setMode('svg');\n        } else if (alphaImageLoader && isPng) {\n          if (scale && this.__getMode() !== 'alphaScaled') {\n            this.__setMode('alphaScaled');\n          } else if (!scale && this.__getMode() !== 'nonScaled') {\n            this.__setMode('nonScaled');\n          }\n        } else if (scale && this.__getMode() !== 'scaled') {\n          this.__setMode('scaled');\n        } else if (!scale && this.__getMode() !== 'nonScaled') {\n          this.__setMode('nonScaled');\n        }\n\n        this.__checkForContentElementReplacement(this.__getSuitableContentElement());\n      },\n\n      default(source) {\n        const isFont = source && qx.lang.String.startsWith(source, '@');\n        const isSvg = source.startsWith('<svg');\n        const scale = this.getScale() || this.getForceScale();\n\n        if (isFont) {\n          this.__setMode('font');\n        } else if (isSvg) {\n          this.__setMode('svg');\n        } else if (scale && this.__getMode() !== 'scaled') {\n          this.__setMode('scaled');\n        } else if (!scale && this.__getMode() !== 'nonScaled') {\n          this.__setMode('nonScaled');\n        }\n\n        this.__checkForContentElementReplacement(this.__getSuitableContentElement());\n      }\n    }),\n\n    /**\n     * Checks the current child and replaces it if necessary\n     *\n     * @param elementToAdd {qx.html.Image} content element to add\n     */\n    __checkForContentElementReplacement(elementToAdd) {\n      const currentContentElement = this.__currentContentElement;\n\n      if (currentContentElement !== elementToAdd) {\n        if (currentContentElement !== null) {\n          const pixel = 'px';\n          const styles = {};\n\n          //inherit styles from current element\n          const currentStyles = currentContentElement.getAllStyles();\n          if (currentStyles) {\n            for (let prop in currentStyles) {\n              styles[prop] = currentStyles[prop];\n            }\n          }\n\n          // Don't transfer background image when switching from image to icon font\n          if (this.__getMode() === 'font' || this.__getMode() === 'svg') {\n            delete styles.backgroundImage;\n          }\n\n          // Copy dimension and location of the current content element\n          const bounds = this.getBounds();\n          if (bounds !== null) {\n            styles.width = bounds.width + pixel;\n            styles.height = bounds.height + pixel;\n          }\n\n          const insets = this.getInsets();\n          styles.left = parseInt(currentContentElement.getStyle('left') || insets.left) + pixel;\n          styles.top = parseInt(currentContentElement.getStyle('top') || insets.top) + pixel;\n\n          styles.zIndex = 10;\n\n          const newEl = this.__wrapper ? elementToAdd.getChild(0) : elementToAdd;\n          newEl.setStyles(styles, true);\n          newEl.setSelectable(this.getSelectable());\n\n          if (!currentContentElement.isVisible()) {\n            elementToAdd.hide();\n          } else if (!elementToAdd.isVisible()) {\n            elementToAdd.show();\n          }\n\n          if (!currentContentElement.isIncluded()) {\n            elementToAdd.exclude();\n          } else if (!elementToAdd.isIncluded()) {\n            elementToAdd.include();\n          }\n\n          const container = currentContentElement.getParent();\n\n          if (container) {\n            const index = container.getChildren().indexOf(currentContentElement);\n            container.removeAt(index);\n            container.addAt(elementToAdd, index);\n          }\n          // force re-application of source so __setSource is called again\n          const hint = newEl.getNodeName();\n          if (newEl.setSource) {\n            newEl.setSource(null);\n          } else if (newEl.setValue) {\n            newEl.setValue('');\n          } else {\n            newEl.removeAll();\n          }\n          const currentEl = this.__getContentElement();\n          newEl.tagNameHint = hint;\n          newEl.setAttribute('class', currentEl.getAttribute('class'));\n\n          // Flush elements to make sure the DOM elements are created.\n          qx.html.Element.flush();\n          const currentDomEl = currentEl.getDomElement();\n          const newDomEl = elementToAdd.getDomElement();\n\n          // copy event listeners\n          const listeners = currentContentElement.getListeners() || [];\n          listeners.forEach(function (listenerData) {\n            elementToAdd.addListener(listenerData.type, listenerData.handler, listenerData.self, listenerData.capture);\n          });\n\n          if (currentDomEl && newDomEl) {\n            // Switch the DOM elements' hash codes. This is required for the event\n            // layer to work [BUG #7447]\n            const currentHash = currentDomEl.$$hash;\n            currentDomEl.$$hash = newDomEl.$$hash;\n            newDomEl.$$hash = currentHash;\n          }\n\n          this.__currentContentElement = elementToAdd;\n        }\n      }\n    },\n\n    /**\n     * Use the ResourceManager to set a managed image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setManagedImage(el, source) {\n      const ResourceManager = qx.util.ResourceManager.getInstance();\n      const isFont = ResourceManager.isFontUri(source);\n      const isSvg = source.startsWith('<svg');\n\n      // Try to find a disabled image in registry\n      if (!this.getEnabled()) {\n        const disabled = source.replace(/\\.([a-z]+)$/, '-disabled.$1');\n        if (!isFont && ResourceManager.has(disabled)) {\n          source = disabled;\n          this.addState('replacement');\n        } else {\n          this.removeState('replacement');\n        }\n      }\n\n      // Optimize case for enabled changes when no disabled image was found\n      if (!isFont && !isSvg && el.getSource() === source) {\n        return;\n      }\n\n      // Special case for non resource manager handled font icons\n      if (isFont) {\n        // Don't use scale if size is set via postfix\n        if (this.getScale() && parseInt(source.split('/')[2], 10)) {\n          this.setScale(false);\n        }\n\n        // Adjust size if scaling is applied\n        let width;\n        let height;\n        if (this.getScale()) {\n          const hint = this.getSizeHint();\n          width = this.getWidth() || hint.width;\n          height = this.getHeight() || hint.height;\n        } else {\n          const font = qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]);\n\n          if (qx.core.Environment.get('qx.debug')) {\n            this.assertObject(font, 'Virtual image source contains unkown font descriptor');\n          }\n          const size = parseInt(source.split('/')[2] || font.getSize(), 10);\n          width = ResourceManager.getImageWidth(source) || size;\n          height = ResourceManager.getImageHeight(source) || size;\n        }\n\n        this.__updateContentHint(width, height);\n        this.__setSource(el, source);\n      } else if (isSvg) {\n        // Apply source\n        this.__setSource(el, source);\n\n        // Adjust size\n        this.__updateContentHint(40, 40);\n      } else {\n        // Apply source\n        this.__setSource(el, source);\n\n        // Compare with old sizes and relayout if necessary\n        this.__updateContentHint(ResourceManager.getImageWidth(source), ResourceManager.getImageHeight(source));\n      }\n    },\n\n    _applyDimension() {\n      super._applyDimension();\n\n      const isFont = this.getSource() && qx.lang.String.startsWith(this.getSource(), '@');\n      if (isFont) {\n        const el = this.getContentElement();\n        if (el) {\n          if (this.getScale()) {\n            const hint = this.getSizeHint();\n            const width = this.getWidth() || hint.width || 40;\n            const height = this.getHeight() || hint.height || 40;\n            el.setStyle('fontSize', (width > height ? height : width) + 'px');\n          } else {\n            const font = qx.theme.manager.Font.getInstance().resolve(this.getSource().match(/@([^/]+)/)[1]);\n\n            el.setStyle('fontSize', font.getSize() + 'px');\n          }\n        }\n      } else {\n        this.__updateContentHint();\n      }\n    },\n\n    /**\n     * Use the infos of the ImageLoader to set an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setUnmanagedImage(el, source) {\n      const ImageLoader = qx.io.ImageLoader;\n\n      // Apply source\n      this.__setSource(el, source);\n\n      // Compare with old sizes and relayout if necessary\n      const width = ImageLoader.getWidth(source);\n      const height = ImageLoader.getHeight(source);\n      this.__updateContentHint(width, height);\n    },\n\n    /**\n     * Use the ImageLoader to load an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __loadUnmanagedImage(el, source) {\n      const ImageLoader = qx.io.ImageLoader;\n\n      if (qx.core.Environment.get('qx.debug')) {\n        // loading external images via HTTP/HTTPS is a common usecase, as is\n        // using data URLs.\n        const sourceLC = source.toLowerCase();\n        if (!sourceLC.startsWith('http') && !sourceLC.startsWith('data:image/')) {\n          const self = this.self(arguments);\n\n          if (!self.__warned) {\n            self.__warned = {};\n          }\n\n          if (!self.__warned[source]) {\n            this.debug('try to load an unmanaged relative image: ' + source);\n            self.__warned[source] = true;\n          }\n        }\n      }\n\n      // only try to load the image if it not already failed\n      if (!ImageLoader.isFailed(source)) {\n        ImageLoader.load(source, this.__loaderCallback, this);\n      } else {\n        this.__resetSource(el);\n      }\n    },\n\n    /**\n     * Reset source displayed by the DOM element.\n     *\n     * @param el {Element} image DOM element\n     */\n    __resetSource(el) {\n      if (el !== null) {\n        if (el instanceof qx.html.Image) {\n          el.resetSource();\n        } else if (el instanceof qx.html.Label) {\n          el.resetValue();\n        } else {\n          el.removeAll();\n        }\n      }\n    },\n\n    /**\n     * Combines the decorator's image styles with our own image to make sure\n     * gradient and backgroundImage decorators work on Images.\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setSource(el, source) {\n      const isFont = source && qx.lang.String.startsWith(source, '@');\n      const isSvg = source && qx.lang.String.startsWith(source, '<svg');\n\n      if (isSvg) {\n        const child = new qx.html.Element('svg');\n        child.useMarkup(source);\n        el.removeAll();\n        el.add(child);\n      } else if (isFont) {\n        const sparts = source.split('/');\n        let fontSource = source;\n        if (sparts.length > 2) {\n          fontSource = sparts[0] + '/' + sparts[1];\n        }\n\n        const ResourceManager = qx.util.ResourceManager.getInstance();\n        const font = qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)/)[1]);\n\n        const fontStyles = qx.lang.Object.clone(font.getStyles());\n        delete fontStyles.color;\n        el.setStyles(fontStyles);\n        el.setStyle('font');\n        el.setStyle('display', 'table-cell');\n        el.setStyle('verticalAlign', 'middle');\n        el.setStyle('textAlign', 'center');\n\n        if (this.getScale()) {\n          el.setStyle('fontSize', (this.__width > this.__height ? this.__height : this.__width) + 'px');\n        } else {\n          const size = parseInt(\n            sparts[2] ||\n              qx.theme.manager.Font.getInstance()\n                .resolve(source.match(/@([^/]+)/)[1])\n                .getSize()\n          );\n\n          el.setStyle('fontSize', size + 'px');\n        }\n\n        const resource = ResourceManager.getData(fontSource);\n        if (resource) {\n          el.setValue(String.fromCharCode(resource[2]));\n        } else {\n          const charCode = parseInt(\n            qx.theme.manager.Font.getInstance().resolve(source.match(/@([^/]+)\\/(.*)$/)[2]),\n\n            16\n          );\n\n          if (qx.core.Environment.get('qx.debug')) {\n            this.assertNumber(charCode, 'Font source needs either a glyph name or the unicode number in hex');\n          }\n          el.setValue(String.fromCharCode(charCode));\n        }\n\n        return;\n      } else if (el.getNodeName() === 'div') {\n        // checks if a decorator already set.\n        // In this case we have to merge background styles\n        const decorator = qx.theme.manager.Decoration.getInstance().resolve(this.getDecorator());\n\n        if (decorator) {\n          const hasGradient = decorator.getStartColor() && decorator.getEndColor();\n          const hasBackground = decorator.getBackgroundImage();\n          if (hasGradient || hasBackground) {\n            const repeat = this.getScale() ? 'scale' : 'no-repeat';\n\n            // get the style attributes for the given source\n            const attr = qx.bom.element.Decoration.getAttributes(source, repeat);\n\n            // get the background image(s) defined by the decorator\n            const decoratorStyle = decorator.getStyles(true);\n\n            const combinedStyles = {\n              backgroundImage: attr.style.backgroundImage,\n              backgroundPosition: attr.style.backgroundPosition || '0 0',\n              backgroundRepeat: attr.style.backgroundRepeat || 'no-repeat'\n            };\n\n            if (hasBackground) {\n              combinedStyles['backgroundPosition'] += ',' + decoratorStyle['background-position'] || '0 0';\n              combinedStyles['backgroundRepeat'] += ', ' + decorator.getBackgroundRepeat();\n            }\n\n            if (hasGradient) {\n              combinedStyles['backgroundPosition'] += ', 0 0';\n              combinedStyles['backgroundRepeat'] += ', no-repeat';\n            }\n\n            combinedStyles['backgroundImage'] +=\n              ',' + (decoratorStyle['background-image'] || decoratorStyle['background']);\n\n            // apply combined background images\n            el.setStyles(combinedStyles);\n\n            return;\n          }\n        } else if (el.setSource) {\n          // force re-apply to remove old decorator styles\n          el.setSource(null);\n        }\n      }\n      if (el.setSource) {\n        el.setSource(source);\n      }\n    },\n\n    /**\n     * Event handler fired after the preloader has finished loading the icon\n     *\n     * @param source {String} Image source which was loaded\n     * @param imageInfo {Map} Dimensions of the loaded image\n     */\n    __loaderCallback(source, imageInfo) {\n      // Ignore the callback on already disposed images\n      if (this.$$disposed === true) {\n        return;\n      }\n\n      // Ignore when the source has already been modified\n      if (source !== qx.util.AliasManager.getInstance().resolve(this.getSource())) {\n        this.fireEvent('aborted');\n        return;\n      }\n\n      /// Output a warning if the image could not loaded and quit\n      if (imageInfo.failed) {\n        this.warn('Image could not be loaded: ' + source);\n        this.fireEvent('loadingFailed');\n      } else if (imageInfo.aborted) {\n        this.fireEvent('aborted');\n        return;\n      } else {\n        this.fireEvent('loaded');\n      }\n\n      // Update image\n      this.__setUnmanagedImage(this.__getContentElement(), source);\n    },\n\n    /**\n     * Updates the content hint when the image size has been changed\n     *\n     * @param width {Integer} width of the image\n     * @param height {Integer} height of the image\n     */\n    __updateContentHint(width, height) {\n      if (width === undefined) {\n        width = this.__width;\n      }\n      if (height === undefined) {\n        height = this.__height;\n      }\n      if (this._recalc(width, height)) {\n        qx.ui.core.queue.Layout.add(this);\n      }\n    },\n\n    /**\n     * Recalculates the size of the image, according to scaling parameters\n     * @param originalWidth\n     * @param originalHeight\n     */\n    _recalc(originalWidth, originalHeight) {\n      const maxWidth = this.getMaxWidth();\n      const maxHeight = this.getMaxHeight();\n      const minWidth = this.getMinWidth();\n      const minHeight = this.getMinHeight();\n\n      let width = originalWidth;\n      let height = originalHeight;\n\n      const ratio = originalHeight / originalWidth;\n\n      switch (this.getForceRatio()) {\n        case 'height':\n          if (maxHeight !== null && height > maxHeight) {\n            height = maxHeight;\n            width = height / ratio;\n          } else if (height < minHeight) {\n            height = minHeight;\n            width = height / ratio;\n          }\n          if (height < maxHeight && this.isAllowScaleUp()) {\n            height = maxHeight;\n            width = height / ratio;\n          }\n          break;\n\n        case 'width':\n          if (maxWidth !== null && width > maxWidth) {\n            width = maxWidth;\n            height = width * ratio;\n          } else if (width < minWidth) {\n            width = minWidth;\n            height = width * ratio;\n          }\n          if (width < maxWidth && this.isAllowScaleUp()) {\n            width = maxWidth;\n            height = width * ratio;\n          }\n          break;\n\n        case 'auto':\n        case 'bestfit':\n          if (maxWidth !== null && width > maxWidth) {\n            width = maxWidth;\n            height = width * ratio;\n          } else if (width < minWidth) {\n            width = minWidth;\n            height = width * ratio;\n          }\n          if (width < maxWidth && this.isAllowScaleUp()) {\n            width = maxWidth;\n            height = width * ratio;\n          }\n          if (maxHeight !== null && height > maxHeight) {\n            height = maxHeight;\n            width = height / ratio;\n          }\n          break;\n      }\n\n      width = Math.round(width);\n      height = Math.round(height);\n      if (width != this.__width || height != this.__height) {\n        this.__width = width;\n        this.__height = height;\n        return true;\n      }\n      return false;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    for (let mode in this.__contentElements) {\n      if (Object.prototype.hasOwnProperty.call(this.__contentElements, mode)) {\n        this.__contentElements[mode].disconnectWidget(this);\n      }\n    }\n\n    delete this.__currentContentElement;\n    if (this.__wrapper) {\n      delete this.__wrapper;\n    }\n\n    this._disposeMap('__contentElements');\n  }\n});\n"
  ],
  "mappings": "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"
}