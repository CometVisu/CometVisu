{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "editor",
    "AbstractEditor",
    "construct",
    "_setLayout",
    "layout",
    "Grow",
    "_handledActions",
    "_initWorker",
    "_schemas",
    "__modifiedElements",
    "__modifiedPreviewElements",
    "data",
    "Array",
    "addListener",
    "ev",
    "getData",
    "setPreviewState",
    "structureChanges",
    "some",
    "element",
    "hasChildrenModified",
    "initUnDos",
    "initReDos",
    "__buttonListeners",
    "core",
    "Init",
    "getApplication",
    "getRoot",
    "_onElementKeyUp",
    "_maintainPreviewVisibility",
    "_draw",
    "statics",
    "SUPPORTED_FILES",
    "TITLE",
    "locale",
    "Manager",
    "tr",
    "ICON",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "Allowed",
    "NONE",
    "BEFORE",
    "AFTER",
    "INSIDE",
    "FIRST_CHILD",
    "properties",
    "appearance",
    "refine",
    "init",
    "expert",
    "check",
    "ready",
    "selected",
    "nullable",
    "event",
    "apply",
    "clipboard",
    "unDos",
    "deferredInit",
    "reDos",
    "autoRefreshPreview",
    "previewState",
    "showPreview",
    "dragging",
    "members",
    "_workerWrapper",
    "__editing",
    "__searchResults",
    "__searchResultIndex",
    "_structure",
    "getSchema",
    "file",
    "startsWith",
    "substring",
    "Object",
    "prototype",
    "hasOwnProperty",
    "call",
    "model",
    "Schema",
    "getInstance",
    "Promise",
    "resolve",
    "reject",
    "onLoaded",
    "setReady",
    "isPreviewSynced",
    "getPreviewState",
    "_applyHandlerOptions",
    "handlerOptions",
    "getHandlerOptions",
    "setShowPreview",
    "bom",
    "Viewport",
    "getWidth",
    "noPreview",
    "_applyShowPreview",
    "value",
    "getChildControl",
    "setVisibility",
    "clearLayoutProperties",
    "updateLayoutProperties",
    "noStretch",
    "setLayoutProperties",
    "flex",
    "getFile",
    "preview",
    "isWriteable",
    "setFile",
    "__getPreviewFile",
    "_updatePreview",
    "handleAction",
    "actionName",
    "canHandleAction",
    "undo",
    "redo",
    "_onCut",
    "_onCopy",
    "_onPaste",
    "_showHelp",
    "configureButton",
    "actionId",
    "button",
    "getUnDos",
    "length",
    "setEnabled",
    "setToolTipText",
    "getItem",
    "getTitle",
    "resetToolTipText",
    "getReDos",
    "bind",
    "converter",
    "isDeletable",
    "unConfigureButton",
    "removeListenerById",
    "removeRelatedBindings",
    "addUndo",
    "elementChange",
    "ElementChange",
    "push",
    "pop",
    "error",
    "clearUnDosReDos",
    "removeAll",
    "forEach",
    "elem",
    "dispose",
    "clearReDos",
    "_applyClipboard",
    "navigator",
    "writeText",
    "getNode",
    "outerHTML",
    "e",
    "CLIPBOARD",
    "Worker",
    "showErrors",
    "path",
    "errorList",
    "showDecorations",
    "decorators",
    "_loadFile",
    "old",
    "close",
    "getType",
    "isSupported",
    "hasChildControl",
    "resetFile",
    "resetPreviewState",
    "_createChildControlImpl",
    "id",
    "hash",
    "control",
    "container",
    "Composite",
    "HBox",
    "_add",
    "Canvas",
    "addAt",
    "VBox",
    "isShowPreview",
    "exclude",
    "viewer",
    "Config",
    "set",
    "target",
    "minWidth",
    "ok",
    "noSync",
    "notOk",
    "basic",
    "Atom",
    "setRich",
    "setWrap",
    "label",
    "icon",
    "removeState",
    "addState",
    "toolbar",
    "Button",
    "_onEdit",
    "add",
    "_onDelete",
    "CheckBox",
    "toggleExpert",
    "ToolBar",
    "top",
    "left",
    "right",
    "form",
    "TextField",
    "liveUpdate",
    "placeholder",
    "margin",
    "util",
    "Function",
    "debounce",
    "_onSearch",
    "getKeyIdentifier",
    "_showNextResult",
    "_showPreviousResult",
    "stopPropagation",
    "tree",
    "VirtualTree",
    "selectionMode",
    "width",
    "openMode",
    "itemHeight",
    "Environment",
    "get",
    "_initDragDrop",
    "setDelegate",
    "createItem",
    "item",
    "VirtualElementItem",
    "_onContextMenu",
    "_onContextMenuAction",
    "bindItem",
    "controller",
    "index",
    "bindProperty",
    "bindPropertyReverse",
    "getSelection",
    "_onChangeTreeSelection",
    "bottom",
    "setDraggable",
    "setMarginLeft",
    "setZIndex",
    "setAppearance",
    "getSelected",
    "_onCreate",
    "qxl",
    "dialog",
    "Dialog",
    "alert",
    "Widget",
    "setDecorator",
    "decoration",
    "Decorator",
    "widthTop",
    "styleTop",
    "colorTop",
    "setHeight",
    "setOpacity",
    "setDroppable",
    "contextmenu",
    "ConfigElement",
    "getCurrentTarget",
    "getModel",
    "replace",
    "setSelected",
    "menu",
    "setElement",
    "openAtPointer",
    "getBubbles",
    "stop",
    "action",
    "added",
    "resetSelected",
    "openByQuerySelector",
    "selector",
    "edit",
    "rootNode",
    "result",
    "querySelector",
    "__showSearchResult",
    "from",
    "querySelectorAll",
    "filter",
    "el",
    "tagName",
    "hasAttribute",
    "getAttribute",
    "firstMatch",
    "$$widget",
    "openNodeAndParents",
    "current",
    "ancestors",
    "parentElement",
    "load",
    "i",
    "p",
    "draggedXmlElement",
    "dragTarget",
    "getDragTarget",
    "setDragging",
    "isEditable",
    "preventDefault",
    "addAction",
    "addType",
    "addData",
    "addButton",
    "Tree",
    "accepted",
    "mode",
    "getCurrentAction",
    "supportsType",
    "addNew",
    "getTarget",
    "indicator",
    "debug",
    "isAncestor",
    "layerContent",
    "getPane",
    "getLayers",
    "getContentLocation",
    "getDocumentTop",
    "lastElem",
    "document",
    "elementFromPoint",
    "Math",
    "round",
    "getWidgetByElement",
    "isAnonymous",
    "getLayoutParent",
    "parent",
    "getParent",
    "parentSchemaElement",
    "getSchemaElement",
    "allowedElements",
    "getAllowedElements",
    "keys",
    "addable",
    "getAddableChildren",
    "areChildrenSortable",
    "acc",
    "allowedSorting",
    "getAllowedElementsSorting",
    "elementName",
    "__getAllowedPositions",
    "getName",
    "isChildElementAllowed",
    "lookInside",
    "getFirstLevelElementSorting",
    "targetPosition",
    "undefined",
    "getChildren",
    "firstChild",
    "maxPosition",
    "firstChildPosition",
    "expandTimer",
    "lastTreeItem",
    "treeContainer",
    "onDrag",
    "position",
    "cursor",
    "getManager",
    "getCursor",
    "DragDropCursor",
    "_native",
    "pointerType",
    "hasState",
    "origElem",
    "getDocumentLeft",
    "orig",
    "skipDetection",
    "origCoords",
    "leftPos",
    "spacer",
    "_getChildren",
    "getPaddingLeft",
    "setWidth",
    "getBounds",
    "lastCoords",
    "distance",
    "isOpen",
    "getUserData",
    "setDomPosition",
    "Timer",
    "once",
    "openNode",
    "setUserData",
    "getAction",
    "resetAction",
    "console",
    "assert",
    "setAction",
    "onDrop",
    "clone",
    "getDisplayName",
    "moveAfter",
    "snackbar",
    "Controller",
    "info",
    "insertAfter",
    "moveBefore",
    "insertBefore",
    "moveInside",
    "insertChild",
    "onDragEnd",
    "resetUserData",
    "resetDragging",
    "children",
    "sorting",
    "minPosition",
    "targetIndex",
    "indexOf",
    "found",
    "sibling",
    "name",
    "typeChooserForm",
    "ElementForm",
    "allowCancel",
    "context",
    "message",
    "formData",
    "type",
    "help",
    "options",
    "sort",
    "a",
    "b",
    "localeCompare",
    "map",
    "validation",
    "required",
    "show",
    "promise",
    "then",
    "ownerDocument",
    "isElement",
    "createComment",
    "createTextNode",
    "createCDATASection",
    "createElement",
    "schemaElement",
    "getSchemaElementForElementName",
    "initChildren",
    "requiredChildren",
    "getRequiredElements",
    "schema",
    "Element",
    "sortChildNodes",
    "childName",
    "child",
    "appendChild",
    "isTextContentRequired",
    "xmlElement",
    "XmlElement",
    "getEditor",
    "res",
    "isShowEditButton",
    "setSelection",
    "err",
    "targetName",
    "depth",
    "currentPosition",
    "split",
    "test",
    "parseInt",
    "min",
    "__checkProvider",
    "provider",
    "Provider",
    "getLive",
    "userInputAllowed",
    "includes",
    "endsWith",
    "isArray",
    "unshift",
    "__getAttributeFormDefinition",
    "attribute",
    "docs",
    "getDocumentation",
    "def",
    "join",
    "enabled",
    "getDefaultValue",
    "isOptional",
    "validator",
    "ListItem",
    "getValue",
    "isValueValid",
    "ValidationError",
    "getTypeString",
    "enums",
    "getEnumeration",
    "isNew",
    "title",
    "caption",
    "getShowEditButton",
    "typeElement",
    "nodeType",
    "Node",
    "ELEMENT_NODE",
    "allowed",
    "getAllowedAttributes",
    "getExpert",
    "appInfo",
    "getAppinfo",
    "parser",
    "DOMParser",
    "attrName",
    "nodeName",
    "lines",
    "autoSize",
    "innerHTML",
    "dom",
    "parseFromString",
    "getElementsByTagName",
    "TEXT_NODE",
    "COMMENT_NODE",
    "CDATA_SECTION_NODE",
    "getTextContent",
    "isTextNode",
    "convertTextNodeType",
    "newNodeName",
    "formDialog",
    "maxWidth",
    "setAttributes",
    "validate",
    "destroy",
    "remove",
    "execCommand",
    "setClipboard",
    "copy",
    "clipboardElement",
    "getClipboard",
    "resetClipboard",
    "updateModified",
    "previewIndex",
    "$$removed",
    "splice",
    "isModified",
    "setModified",
    "_onContentChanged",
    "_createChildControl",
    "addSeparator",
    "addSpacer",
    "_applySelected",
    "_updateHighlightWidget",
    "node",
    "openPage",
    "parentNode",
    "setHighlightWidget",
    "getWidgetPath",
    "isVisible",
    "_applyContent",
    "open",
    "initialValidation",
    "modified",
    "validateXmlConfig",
    "getPath",
    "__loadContent",
    "Main",
    "closeFile",
    "Bus",
    "dispatchByName",
    "getFullPath",
    "handler",
    "jumpToError",
    "hide",
    "resetModel",
    "FileItem",
    "ROOT",
    "f",
    "setTemporary",
    "errors",
    "doc",
    "xml",
    "Document",
    "fromString",
    "rootElement",
    "documentElement",
    "getAttributeNS",
    "getElementNode",
    "getStructure",
    "setEditable",
    "getWriteable",
    "setModel",
    "setContentPaddingBottom",
    "isTemporary",
    "parts",
    "substr",
    "part",
    "shift",
    "match",
    "exec",
    "toString",
    "setValid",
    "content",
    "getCurrentContent",
    "contentChanged",
    "isAutoRefreshPreview",
    "reset",
    "previewFile",
    "_client",
    "createSync",
    "getBusTopic",
    "source",
    "resetTemporary",
    "updateSync",
    "fast",
    "XMLSerializer",
    "serializeToString",
    "Prettifier",
    "_onSaved",
    "onSaved",
    "focusedWidget",
    "FocusHandler",
    "getFocusedWidget",
    "dialogConf",
    "modal",
    "image",
    "maxHeight",
    "getHeight",
    "BigAlert",
    "destruct",
    "_disposeArray",
    "removeListener"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/editor/Tree.js"
  ],
  "sourcesContent": [
    "/* Tree.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * New XML-Editor base on a node tree\n */\nqx.Class.define('cv.ui.manager.editor.Tree', {\n  extend: cv.ui.manager.editor.AbstractEditor,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this._setLayout(new qx.ui.layout.Grow());\n    this._handledActions = ['save', 'cut', 'copy', 'paste', 'undo', 'redo', 'help'];\n\n    this._initWorker();\n\n    // init schema\n    this._schemas = {};\n    this.__modifiedElements = [];\n    this.__modifiedPreviewElements = new qx.data.Array();\n    this.__modifiedPreviewElements.addListener('changeLength', ev => {\n      if (ev.getData() === 0) {\n        this.setPreviewState('synced');\n      } else {\n        const structureChanges = this.__modifiedPreviewElements.some(element => element.hasChildrenModified());\n\n        this.setPreviewState(structureChanges ? 'structureChanged' : 'changed');\n      }\n    });\n    this.initUnDos(new qx.data.Array());\n    this.initReDos(new qx.data.Array());\n    this.__buttonListeners = {};\n    qx.core.Init.getApplication().getRoot().addListener('keyup', this._onElementKeyUp, this);\n    this.addListener('resize', this._maintainPreviewVisibility, this);\n    this._draw();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    SUPPORTED_FILES: /^(demo|\\.)?\\/?visu_config.*\\.xml/,\n    TITLE: qx.locale.Manager.tr('Xml-editor'),\n    ICON: cv.theme.dark.Images.getIcon('xml', 18),\n\n    Allowed: {\n      NONE: 0,\n      BEFORE: 1,\n      AFTER: 2,\n      INSIDE: 4,\n      FIRST_CHILD: 8 // Is allowed to added as first child\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'tree-editor'\n    },\n\n    // show expert level settings\n    expert: {\n      check: 'Boolean',\n      init: false\n    },\n\n    ready: {\n      refine: true,\n      init: false\n    },\n\n    selected: {\n      check: 'cv.ui.manager.model.XmlElement',\n      nullable: true,\n      event: 'changeSelected',\n      apply: '_applySelected'\n    },\n\n    clipboard: {\n      check: 'cv.ui.manager.model.XmlElement',\n      nullable: true,\n      event: 'changeClipboard',\n      apply: '_applyClipboard'\n    },\n\n    unDos: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    reDos: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    autoRefreshPreview: {\n      check: 'Boolean',\n      init: false\n    },\n\n    /**\n     * Content and shown preview are equal\n     */\n    previewState: {\n      check: ['synced', 'changed', 'structureChanged'],\n      init: 'synced',\n      event: 'previewStateChanged',\n      apply: '_updateHighlightWidget'\n    },\n\n    showPreview: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowPreview',\n      event: 'showPreviewChanged'\n    },\n\n    /**\n     * true while the user is dragging something\n     */\n    dragging: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeDragging'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _schemas: null,\n    __modifiedElements: null,\n    __modifiedPreviewElements: null,\n    _workerWrapper: null,\n    __editing: false,\n    __buttonListeners: null,\n    __searchResults: null,\n    __searchResultIndex: 0,\n    _structure: null,\n\n    async getSchema(file) {\n      if (file.startsWith('../')) {\n        file = file.substring(3);\n      }\n      if (!Object.prototype.hasOwnProperty.call(this, file)) {\n        this._schemas[file] = cv.ui.manager.model.Schema.getInstance(file);\n      }\n      return new Promise((resolve, reject) => {\n        this._schemas[file].onLoaded(function () {\n          this.setReady(true);\n          resolve(this._schemas[file]);\n        }, this);\n      });\n    },\n\n    isPreviewSynced() {\n      return this.getPreviewState() === 'synced';\n    },\n\n    _applyHandlerOptions() {\n      this._maintainPreviewVisibility();\n    },\n\n    _maintainPreviewVisibility() {\n      const handlerOptions = this.getHandlerOptions();\n      this.setShowPreview(qx.bom.Viewport.getWidth() > 800 && (!handlerOptions || !handlerOptions.noPreview));\n    },\n\n    _applyShowPreview(value) {\n      this.getChildControl('right').setVisibility(value ? 'visible' : 'excluded');\n\n      if (value) {\n        this.getChildControl('left').clearLayoutProperties();\n        this.getChildControl('left').updateLayoutProperties();\n      } else {\n        const handlerOptions = this.getHandlerOptions();\n        if (!handlerOptions || !handlerOptions.noStretch) {\n          this.getChildControl('left').setLayoutProperties({ flex: 1 });\n        }\n      }\n      const file = this.getFile();\n      if (value && file) {\n        const preview = this.getChildControl('preview');\n        if (file.isWriteable()) {\n          if (!preview.getFile()) {\n            preview.setFile(this.__getPreviewFile());\n          }\n        } else {\n          // this file is not writable, we can use the real one for preview\n          preview.setFile(file);\n        }\n        this._updatePreview();\n      }\n    },\n\n    handleAction(actionName) {\n      if (this.canHandleAction(actionName)) {\n        switch (actionName) {\n          case 'undo':\n            if (!this.__editing) {\n              this.undo();\n            }\n            break;\n\n          case 'redo':\n            if (!this.__editing) {\n              this.redo();\n            }\n            break;\n\n          case 'cut':\n            this._onCut();\n            break;\n\n          case 'copy':\n            this._onCopy();\n            break;\n\n          case 'paste':\n            this._onPaste();\n            break;\n\n          case 'help':\n            if (!this.__editing) {\n              this._showHelp();\n            }\n            break;\n\n          default:\n            super.handleAction(actionName);\n            break;\n        }\n      }\n    },\n\n    configureButton(actionId, button) {\n      switch (actionId) {\n        case 'undo':\n          this.__buttonListeners[actionId] = this.getUnDos().addListener('changeLength', () => {\n            const length = this.getUnDos().length;\n            if (length > 0) {\n              button.setEnabled(true);\n              button.setToolTipText(\n                this.tr(\n                  'Undo: %1',\n                  this.getUnDos()\n                    .getItem(length - 1)\n                    .getTitle()\n                )\n              );\n            } else {\n              button.setEnabled(false);\n              button.resetToolTipText();\n            }\n          });\n\n          button.setEnabled(this.getUnDos().length > 0);\n          break;\n\n        case 'redo':\n          this.__buttonListeners[actionId] = this.getReDos().addListener('changeLength', () => {\n            const length = this.getReDos().length;\n            if (length > 0) {\n              button.setEnabled(true);\n              button.setToolTipText(\n                this.tr(\n                  'Undo: %1',\n                  this.getReDos()\n                    .getItem(length - 1)\n                    .getTitle()\n                )\n              );\n            } else {\n              button.setEnabled(false);\n              button.resetToolTipText();\n            }\n          });\n\n          button.setEnabled(this.getReDos().length > 0);\n          break;\n\n        case 'cut':\n          this.bind('selected', button, 'enabled', {\n            converter(value) {\n              return value ? !value.isDeletable() : false;\n            }\n          });\n\n          break;\n\n        case 'copy':\n          this.bind('selected', button, 'enabled', {\n            converter(value) {\n              return !!value;\n            }\n          });\n\n          break;\n\n        case 'paste':\n          this.bind('clipboard', button, 'enabled', {\n            converter(value) {\n              return !!value;\n            }\n          });\n\n          break;\n      }\n    },\n    unConfigureButton(actionId, button) {\n      switch (actionId) {\n        case 'undo':\n          if (this.__buttonListeners[actionId]) {\n            this.getUnDos().removeListenerById(this.__buttonListeners[actionId]);\n\n            delete this.__buttonListeners[actionId];\n          }\n          button.setEnabled(false);\n          break;\n\n        case 'redo':\n          if (this.__buttonListeners[actionId]) {\n            this.getReDos().removeListenerById(this.__buttonListeners[actionId]);\n\n            delete this.__buttonListeners[actionId];\n          }\n          button.setEnabled(false);\n          break;\n\n        case 'paste':\n        case 'cut':\n        case 'copy':\n          this.removeRelatedBindings(button);\n          break;\n      }\n    },\n\n    addUndo(elementChange) {\n      if (elementChange instanceof cv.ui.manager.model.ElementChange) {\n        this.getUnDos().push(elementChange);\n      }\n    },\n\n    undo() {\n      const unDos = this.getUnDos();\n      if (unDos.length > 0) {\n        const elementChange = unDos.pop();\n        if (elementChange.undo()) {\n          this.getReDos().push(elementChange);\n        } else {\n          this.error('could not undo ' + elementChange.getTitle());\n          unDos.push(elementChange);\n        }\n      }\n    },\n\n    redo() {\n      const reDos = this.getReDos();\n      if (reDos.length > 0) {\n        const elementChange = reDos.pop();\n        if (elementChange.redo()) {\n          this.getUnDos().push(elementChange);\n        } else {\n          this.error('could not redo ' + elementChange.getTitle());\n          reDos.push(elementChange);\n        }\n      }\n    },\n\n    clearUnDosReDos() {\n      this.getUnDos()\n        .removeAll()\n        .forEach(elem => elem.dispose());\n      this.clearReDos();\n    },\n\n    clearReDos() {\n      this.getReDos()\n        .removeAll()\n        .forEach(elem => elem.dispose());\n    },\n\n    _applyClipboard(value) {\n      try {\n        if (value) {\n          navigator.clipboard.writeText(value.getNode().outerHTML);\n        } else {\n          navigator.clipboard.writeText('');\n        }\n      } catch (e) {\n        // clipboard api is only available in secure environment, otherwise we have to do it ourself\n        cv.ui.manager.editor.AbstractEditor.CLIPBOARD = value ? value.getNode().outerHTML : '';\n      }\n    },\n\n    _initWorker() {\n      this._workerWrapper = cv.ui.manager.editor.Worker.getInstance();\n    },\n\n    showErrors(path, errorList) {},\n    showDecorations(path, decorators) {},\n\n    _loadFile(file, old) {\n      if (old && this._workerWrapper) {\n        this._workerWrapper.close(old);\n      }\n      if (file && file.getType() === 'file' && this.isSupported(file)) {\n        super._loadFile(file, old);\n      } else {\n        super._loadFile(null, old);\n        if (this.hasChildControl('preview')) {\n          this.getChildControl('preview').resetFile();\n        }\n        this.resetPreviewState();\n      }\n    },\n\n    // overridden\n    _createChildControlImpl(id, hash) {\n      let control;\n\n      switch (id) {\n        case 'splitpane':\n          control = new qx.ui.container.Composite(new qx.ui.layout.HBox());\n          this._add(control);\n          break;\n\n        case 'left':\n          control = new qx.ui.container.Composite(new qx.ui.layout.Canvas());\n          this.getChildControl('splitpane').addAt(control, 0);\n          break;\n\n        case 'right':\n          control = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n          if (!this.isShowPreview()) {\n            control.exclude();\n          }\n          this.getChildControl('splitpane').addAt(control, 1, { flex: 1 });\n          break;\n\n        case 'preview':\n          control = new cv.ui.manager.viewer.Config();\n          control.set({\n            target: 'iframe',\n            minWidth: 600\n          });\n\n          this.getChildControl('right').addAt(control, 1, { flex: 1 });\n          break;\n\n        case 'preview-sync-hint': {\n          const ok = this.tr('Preview shows the current state of the edited configuration.');\n\n          const noSync = this.tr('Preview is out of sync. Click here to refresh.');\n\n          const notOk = this.tr(\n            'Preview is out of sync. Highlighting of the currently selected tree element is deactivated until you refresh the preview. Click here to refresh.'\n          );\n\n          control = new qx.ui.basic.Atom(ok, cv.theme.dark.Images.getIcon('valid', 16));\n\n          control.setRich(true);\n          control.getChildControl('label').setWrap(true);\n          control.addListener('tap', () => {\n            if (!this.isPreviewSynced() && this.isShowPreview()) {\n              this._updatePreview();\n            }\n          });\n          this.getChildControl('right').addAt(control, 0);\n          this.addListener('previewStateChanged', ev => {\n            switch (ev.getData()) {\n              case 'synced':\n                control.set({\n                  label: ok,\n                  icon: cv.theme.dark.Images.getIcon('valid', 16)\n                });\n\n                control.getChildControl('icon').removeState('error');\n                control.getChildControl('icon').removeState('warning');\n                break;\n\n              case 'changed':\n                control.set({\n                  label: noSync,\n                  icon: cv.theme.dark.Images.getIcon('out-of-sync', 16)\n                });\n\n                control.getChildControl('icon').removeState('error');\n                control.getChildControl('icon').addState('warning');\n                break;\n\n              case 'structureChanged':\n                control.set({\n                  label: notOk,\n                  icon: cv.theme.dark.Images.getIcon('out-of-sync', 16)\n                });\n\n                control.getChildControl('icon').addState('error');\n                control.getChildControl('icon').removeState('warning');\n                break;\n            }\n          });\n          break;\n        }\n\n        case 'edit-button':\n          control = new qx.ui.toolbar.Button(null, cv.theme.dark.Images.getIcon('edit', 24));\n\n          control.setEnabled(false);\n          control.addListener('execute', this._onEdit, this);\n          this.bind('file.writeable', control, 'icon', {\n            converter(value) {\n              return value ? cv.theme.dark.Images.getIcon('edit', 16) : cv.theme.dark.Images.getIcon('view', 16);\n            }\n          });\n\n          this.getChildControl('toolbar').add(control);\n          break;\n\n        case 'delete-button':\n          control = new qx.ui.toolbar.Button(null, cv.theme.dark.Images.getIcon('delete', 16));\n\n          control.setEnabled(false);\n          control.addListener('execute', this._onDelete, this);\n          this.getChildControl('toolbar').add(control);\n          break;\n\n        case 'toggle-expert':\n          control = new qx.ui.toolbar.CheckBox(this.tr('Expertview'), cv.theme.dark.Images.getIcon('expert', 16));\n\n          control.addListener('execute', () => {\n            this.toggleExpert();\n          });\n          this.getChildControl('toolbar').add(control);\n          break;\n\n        case 'refresh-preview':\n          control = new qx.ui.toolbar.Button(null, cv.theme.dark.Images.getIcon('reload', 16));\n\n          control.setToolTipText(this.tr('Reload preview'));\n          control.addListener('execute', this._updatePreview, this);\n          this.bind('showPreview', control, 'visibility', {\n            converter(value) {\n              return value ? 'visible' : 'hidden';\n            }\n          });\n\n          this.bind('previewState', control, 'enabled', {\n            converter(value) {\n              return value !== 'synced';\n            }\n          });\n\n          this.getChildControl('toolbar').add(control);\n          break;\n\n        case 'toolbar':\n          control = new qx.ui.toolbar.ToolBar();\n          this.getChildControl('left').add(control, {\n            top: 0,\n            left: 0,\n            right: 0\n          });\n\n          break;\n\n        case 'searchbar-container':\n          control = new qx.ui.container.Composite(new qx.ui.layout.HBox());\n          this.getChildControl('left').add(control, {\n            top: 36,\n            left: 0,\n            right: 0\n          });\n\n          break;\n\n        case 'searchbar':\n          control = new qx.ui.form.TextField();\n          control.set({\n            liveUpdate: true,\n            placeholder: this.tr('Search...'),\n            margin: 8\n          });\n\n          control.addListener('changeValue', qx.util.Function.debounce(this._onSearch, 250), this);\n\n          control.addListener('keyup', ev => {\n            switch (ev.getKeyIdentifier()) {\n              case 'Enter':\n              case 'Down':\n                this._showNextResult();\n                break;\n              case 'Up':\n                this._showPreviousResult();\n                break;\n            }\n\n            ev.stopPropagation();\n          });\n          this.getChildControl('searchbar-container').add(control, { flex: 1 });\n          break;\n\n        case 'tree':\n          control = new qx.ui.tree.VirtualTree(null, 'displayName', 'children');\n          control.set({\n            selectionMode: 'single',\n            width: 350,\n            openMode: 'none',\n            itemHeight: qx.core.Environment.get('device.touch') ? 40 : 20\n          });\n\n          this.bind('file.writeable', control, 'droppable');\n          this.bind('file.writeable', control, 'draggable');\n          this._initDragDrop(control);\n          control.setDelegate({\n            createItem: function () {\n              const item = new cv.ui.manager.tree.VirtualElementItem();\n              if (!qx.core.Environment.get('device.touch')) {\n                item.addListener('contextmenu', this._onContextMenu, this);\n              } else {\n                item.addListener('action', this._onContextMenuAction, this);\n              }\n              item.addListener('dbltap', this._onEdit, this);\n              return item;\n            }.bind(this),\n\n            // Bind properties from the item to the tree-widget and vice versa\n            bindItem(controller, item, index) {\n              controller.bindProperty('', 'model', null, item, index);\n              controller.bindProperty('displayName', 'label', null, item, index);\n\n              controller.bindProperty('name', 'name', null, item, index);\n              controller.bindPropertyReverse('open', 'open', null, item, index);\n              controller.bindProperty('open', 'open', null, item, index);\n              controller.bindProperty('showEditButton', 'editable', null, item, index);\n\n              controller.bindProperty('sortable', 'sortable', null, item, index);\n\n              controller.bindProperty('icon', 'icon', null, item, index);\n              controller.bindProperty('status', 'status', null, item, index);\n              controller.bindProperty('invalidMessage', 'toolTipText', null, item, index);\n\n              controller.bindProperty('dragging', 'dragging', null, item, index);\n            }\n          });\n\n          control.getSelection().addListener('change', this._onChangeTreeSelection, this);\n          this.getChildControl('left').add(control, {\n            top: 72,\n            left: 0,\n            right: 0,\n            bottom: 0\n          });\n\n          break;\n\n        case 'add-button':\n          control = new qx.ui.basic.Atom(null, cv.theme.dark.Images.getIcon('add', 32));\n\n          control.setDraggable(true);\n          control.setMarginLeft(-16);\n          control.setZIndex(20);\n          this.addListener('changeDragging', ev => {\n            control.setLayoutProperties({\n              bottom: 16,\n              left: ev.getData() ? -1000 : '50%'\n            });\n          });\n          control.setAppearance('round-button');\n          control.addListener('pointerover', () => control.addState('hovered'));\n          control.addListener('pointerout', () => control.removeState('hovered'));\n\n          control.addListener('tap', () => {\n            if (this.getSelected()) {\n              this._onCreate(this.getSelected(), 'inside');\n            } else {\n              qxl.dialog.Dialog.alert(\n                this.tr(\n                  'Please create a new Element either by dragging this button to the place where the new element should be inserted or by selecting an element and pressing this button to insert a new child to this element.'\n                )\n              );\n            }\n          });\n          this.getChildControl('left').add(control, {\n            bottom: 16,\n            left: '50%'\n          });\n\n          break;\n\n        case 'drag-indicator':\n          // Create drag indicator\n          control = new qx.ui.core.Widget();\n          control.setDecorator(\n            new qx.ui.decoration.Decorator().set({\n              widthTop: 1,\n              styleTop: 'solid',\n              colorTop: 'white'\n            })\n          );\n\n          control.setHeight(0);\n          control.setOpacity(0.5);\n          control.setZIndex(100);\n          control.setDroppable(true);\n          control.setLayoutProperties({ left: -1000, top: -1000 });\n          qx.core.Init.getApplication().getRoot().add(control);\n          break;\n\n        case 'context-menu':\n          control = new cv.ui.manager.contextmenu.ConfigElement(this);\n          control.addListener('action', this._onContextMenuAction, this);\n          break;\n      }\n\n      return control || super._createChildControlImpl(id);\n    },\n\n    _onContextMenu(ev) {\n      const target = ev.getCurrentTarget();\n      if (target instanceof cv.ui.manager.tree.VirtualElementItem) {\n        const element = target.getModel();\n        this.getChildControl('tree').getSelection().replace([element]);\n        this.setSelected(element);\n        const menu = this.getChildControl('context-menu');\n        menu.setElement(element);\n        menu.openAtPointer(ev);\n      }\n\n      // Do not show native menu\n      // don't open any other contextmenus\n      if (ev.getBubbles()) {\n        ev.stop();\n      }\n    },\n\n    _onContextMenuAction(ev) {\n      const data = ev.getData();\n      if (this.canHandleAction(data.action)) {\n        this.handleAction(data.action);\n      } else {\n        switch (data.action) {\n          case 'view':\n          case 'edit':\n            this._onEdit(null, data.element);\n            break;\n\n          case 'delete':\n            this._onDelete(null, data.element);\n            break;\n\n          case 'create':\n            // add a new child\n            this._onCreate(data.element, 'inside');\n            break;\n\n          default:\n            this.error('unhandled context menu action', data.action);\n            break;\n        }\n      }\n    },\n\n    _onChangeTreeSelection(ev) {\n      const data = ev.getData();\n      if (data.added.length === 1) {\n        this.setSelected(data.added[0]);\n      } else {\n        this.resetSelected();\n      }\n    },\n\n    openByQuerySelector(selector, edit) {\n      return new Promise((resolve, reject) => {\n        const tree = this.getChildControl('tree');\n        const rootNode = tree.getModel().getNode();\n        const result = rootNode.querySelector(selector);\n        if (result) {\n          this.__searchResults = [result];\n          this.__searchResultIndex = 0;\n          this.__showSearchResult();\n          if (edit) {\n            this._onEdit();\n          }\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    },\n\n    _onSearch(ev) {\n      const value = ev.getData();\n      this.__searchResults = [];\n      this.__searchResultIndex = 0;\n      if (value.length > 2) {\n        const tree = this.getChildControl('tree');\n        const rootNode = tree.getModel().getNode();\n        this.__searchResults = Array.from(rootNode.querySelectorAll('*')).filter(function (el) {\n          return el.tagName.startsWith(value) || (el.hasAttribute('name') && el.getAttribute('name').startsWith(value));\n        });\n        this.__showSearchResult();\n      }\n    },\n\n    _showNextResult() {\n      if (this.__searchResults && this.__searchResults.length > this.__searchResultIndex + 1) {\n        this.__searchResultIndex++;\n        this.__showSearchResult();\n      }\n    },\n\n    _showPreviousResult() {\n      if (this.__searchResults && this.__searchResultIndex > 0) {\n        this.__searchResultIndex--;\n        this.__showSearchResult();\n      }\n    },\n\n    __showSearchResult() {\n      if (this.__searchResults.length > this.__searchResultIndex) {\n        // find and open the first result and save the rest for traversal (with keyboard arrows\n        const firstMatch = this.__searchResults[this.__searchResultIndex];\n        const tree = this.getChildControl('tree');\n        if (firstMatch.$$widget) {\n          tree.openNodeAndParents(firstMatch.$$widget);\n          tree.getSelection().replace([firstMatch.$$widget]);\n        } else {\n          let current = firstMatch;\n          const ancestors = [];\n          // lookup the path until we find the first one with a widget\n          while (current && !current.$$widget) {\n            current = current.parentElement;\n            if (current) {\n              ancestors.push(current);\n            }\n          }\n          if (current && current.$$widget) {\n            current.$$widget.load();\n            // now git down the path of found ancestors and load them all\n            for (let i = ancestors.length - 1; i >= 0; i--) {\n              const p = ancestors[i].$$widget;\n              if (p) {\n                p.load();\n              }\n            }\n            if (firstMatch.$$widget) {\n              tree.openNodeAndParents(firstMatch.$$widget);\n              tree.getSelection().replace([firstMatch.$$widget]);\n            }\n          }\n        }\n      }\n    },\n\n    _initDragDrop(control) {\n      let draggedXmlElement;\n      control.addListener('dragstart', ev => {\n        const dragTarget = ev.getDragTarget();\n        let element;\n        if (dragTarget instanceof cv.ui.manager.tree.VirtualElementItem) {\n          element = dragTarget.getModel();\n          element.setDragging(true);\n          if (!element.isEditable() || !element.isDeletable()) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            return;\n          }\n          ev.addAction('copy');\n          if (element.isDeletable()) {\n            ev.addAction('move');\n          }\n          ev.addType('cv/tree-element');\n          ev.addData('cv/tree-element', element);\n          draggedXmlElement = element;\n        }\n        this.setDragging(true);\n      });\n\n      const addButton = this.getChildControl('add-button');\n      addButton.addListener('dragstart', ev => {\n        ev.addAction('copy');\n        ev.addType('cv/new-tree-element');\n        this.setDragging(true);\n      });\n\n      const Allowed = cv.ui.manager.editor.Tree.Allowed;\n      const accepted = {\n        mode: 0,\n        target: null\n      };\n\n      control.addListener('dragover', ev => {\n        // add ist a custom action that cannot be detected, so we only check if its supported\n        let action = ev.getCurrentAction();\n        let element;\n        if (ev.supportsType('cv/tree-element')) {\n          element = ev.getData('cv/tree-element');\n        }\n        const addNew = action === 'copy' && !element && ev.supportsType('cv/new-tree-element');\n        let target = ev.getTarget();\n        if (target === indicator) {\n          // no change when we are dragging over the indicator\n          this.debug('dragging over indicator');\n          return;\n        }\n        if (action !== 'copy' && target && target instanceof cv.ui.manager.tree.VirtualElementItem) {\n          if (target.getModel() === element) {\n            // cannot drop on myself\n            this.debug('dropping on same element forbidden');\n            accepted.mode = Allowed.NONE;\n            ev.preventDefault();\n            return;\n          } else if (element && element.isAncestor(target.getModel())) {\n            // cannot move into myself\n            this.debug('moving inside own subtree forbidden');\n            accepted.mode = Allowed.NONE;\n            ev.preventDefault();\n            return;\n          }\n        }\n        if (target === control) {\n          const layerContent = control.getPane().getLayers()[0].getContentLocation();\n          if (layerContent && ev.getDocumentTop() - layerContent.bottom <= 20) {\n            // when we are not more than 10px away from the last tree element we use that one, otherwise dropping is forbidden\n            const lastElem = document.elementFromPoint(\n              Math.round((layerContent.left + layerContent.right) / 2),\n              layerContent.bottom - 20\n            );\n\n            target = qx.ui.core.Widget.getWidgetByElement(lastElem);\n            if (target) {\n              while (target.isAnonymous()) {\n                target = target.getLayoutParent();\n              }\n            }\n          } else {\n            target = null;\n          }\n          if (!target || target === control) {\n            accepted.mode = Allowed.NONE;\n            ev.preventDefault();\n            this.debug('drop target not found');\n            return;\n          }\n        }\n        if (!addNew && !element) {\n          // not for us\n          this.debug('drop not allowed here, no drag element');\n          accepted.mode = Allowed.NONE;\n          ev.preventDefault();\n          return;\n        }\n        const model = target.getModel();\n        const parent = model.getParent();\n        accepted.target = model;\n\n        if (parent) {\n          const parentSchemaElement = parent.getSchemaElement();\n          if (addNew) {\n            const allowedElements = parentSchemaElement.getAllowedElements();\n            if (Object.keys(allowedElements).length > 0) {\n              // check if there could be added more children\n              const addable = parent.getAddableChildren();\n              if (addable.length > 0) {\n                // check if a child could be added at this position\n                if (parentSchemaElement.areChildrenSortable()) {\n                  // children can be put anywhere\n                  // so this is allowed anywhere\n                  accepted.mode = Allowed.BEFORE | Allowed.AFTER;\n                } else {\n                  let acc = Allowed.NONE;\n                  const allowedSorting = parentSchemaElement.getAllowedElementsSorting();\n                  addable.some(elementName => {\n                    acc |= this.__getAllowedPositions(allowedSorting, elementName, model.getName());\n\n                    if (acc & Allowed.BEFORE && acc & Allowed.AFTER) {\n                      // we cannot find more\n                      return true;\n                    }\n                    return false;\n                  });\n                  accepted.mode = acc;\n                }\n              }\n            } else {\n              ev.preventDefault();\n              // not children allowed here\n              accepted.mode = Allowed.NONE;\n              this.debug('no children allowed here');\n            }\n          } else if (!parentSchemaElement.isChildElementAllowed(element.getName())) {\n            // not allowed on this level\n            accepted.mode = Allowed.NONE;\n            this.debug('not allowed as child element of', parent.getName());\n          } else if (parentSchemaElement.areChildrenSortable()) {\n            // children can be put anywhere\n            // so this is allowed anywhere\n            accepted.mode = Allowed.BEFORE | Allowed.AFTER;\n          } else {\n            // check position\n            accepted.mode = this.__getAllowedPositions(\n              parentSchemaElement.getAllowedElementsSorting(),\n              element.getName(),\n              model.getName()\n            );\n          }\n        } else {\n          accepted.mode = Allowed.NONE;\n        }\n        let lookInside;\n        if (addNew) {\n          lookInside = Object.keys(model.getSchemaElement().getAllowedElements(true)).length > 0;\n        } else {\n          lookInside = model.getSchemaElement().isChildElementAllowed(element.getName());\n        }\n        if (lookInside) {\n          // allowed inside\n          accepted.mode |= Allowed.INSIDE;\n          if (model.getSchemaElement().areChildrenSortable()) {\n            accepted.mode |= Allowed.FIRST_CHILD;\n          } else {\n            const allowedSorting = model.getSchemaElement().getFirstLevelElementSorting();\n            if (allowedSorting) {\n              if (element) {\n                let targetPosition = allowedSorting[element.getName()];\n                if (targetPosition !== undefined) {\n                  if (targetPosition === 0 || model.getChildren().length === 0) {\n                    accepted.mode |= Allowed.FIRST_CHILD;\n                  } else {\n                    // check if we can add it before the current first child\n                    const firstChild = model.getChildren().getItem(0);\n                    const maxPosition = allowedSorting[firstChild.getName()];\n                    if (maxPosition >= targetPosition) {\n                      accepted.mode |= Allowed.FIRST_CHILD;\n                    }\n                  }\n                }\n              } else if (model.getChildren().length > 0) {\n                const firstChild = model.getChildren().getItem(0);\n                let firstChildPosition = allowedSorting[firstChild.getName()];\n                if (firstChildPosition !== undefined && firstChildPosition > 0) {\n                  // first child is not on position 0\n                  accepted.mode |= Allowed.FIRST_CHILD;\n                }\n              } else if (Object.keys(allowedSorting).length > 0) {\n                // target is empty, but children are allowed\n                accepted.mode |= Allowed.FIRST_CHILD;\n              }\n            }\n          }\n        }\n        if (accepted.mode === Allowed.NONE) {\n          ev.preventDefault();\n          this.debug('dropping not accepted here');\n        }\n      });\n\n      const indicator = this.getChildControl('drag-indicator');\n\n      let expandTimer;\n\n      control.addListener('dragleave', ev => {\n        if (expandTimer) {\n          expandTimer.stop();\n          expandTimer = null;\n        }\n      });\n\n      let lastTreeItem;\n      const treeContainer = control.getPane();\n\n      const onDrag = function (ev) {\n        let left = -1000;\n        let top = -1000;\n        let position = '';\n        let cursor = ev.getManager().getCursor();\n        if (!cursor) {\n          cursor = qx.ui.core.DragDropCursor.getInstance();\n        }\n        if (ev._native.pointerType === 'touch') {\n          if (!cursor.hasState('touch')) {\n            cursor.addState('touch');\n          }\n        }\n\n        if (accepted.mode !== Allowed.NONE) {\n          const origElem = document.elementFromPoint(ev.getDocumentLeft(), ev.getDocumentTop());\n\n          let orig = qx.ui.core.Widget.getWidgetByElement(origElem);\n          let skipDetection = false;\n          if (!orig) {\n            return;\n          }\n          while (orig.isAnonymous()) {\n            orig = orig.getLayoutParent();\n          }\n\n          const origCoords = orig.getContentLocation();\n          let leftPos = origCoords.left;\n          if (orig instanceof cv.ui.manager.tree.VirtualElementItem) {\n            const spacer = orig._getChildren()[0];\n            leftPos = spacer.getWidth() + orig.getPaddingLeft();\n            indicator.setWidth(orig.getBounds().width - leftPos);\n            if (accepted.target && orig.getModel() !== accepted.target) {\n              skipDetection = true;\n            }\n            lastTreeItem = orig;\n          } else if (orig !== indicator) {\n            if (orig === treeContainer) {\n              const lastCoords = lastTreeItem.getContentLocation();\n              const distance = ev.getDocumentTop() - lastCoords.bottom;\n              if (distance <= 20 && accepted.mode & Allowed.AFTER) {\n                const spacer = lastTreeItem._getChildren()[0];\n                left = spacer.getWidth() + lastTreeItem.getPaddingLeft();\n                top = lastCoords.bottom;\n                position = 'after';\n              }\n              skipDetection = true;\n            } else {\n              skipDetection = true;\n            }\n          } else {\n            // on drag indicator, do nothing here\n            return;\n          }\n          if (!skipDetection) {\n            if (ev.getDocumentTop() - origCoords.top <= 5) {\n              // above\n              if (expandTimer) {\n                expandTimer.stop();\n                expandTimer = null;\n              }\n              // check if this item is allowed here\n              if (accepted.mode & Allowed.BEFORE) {\n                left = leftPos;\n                top = origCoords.top;\n                position = 'before';\n              } else if (accepted.mode & Allowed.INSIDE) {\n                left = -1000;\n                top = -1000;\n                position = 'inside';\n              }\n            } else if (origCoords.bottom - ev.getDocumentTop() <= 5) {\n              // below\n              if (accepted.target && !accepted.target.isOpen()) {\n                if (accepted.mode & Allowed.AFTER) {\n                  left = leftPos;\n                  top = origCoords.bottom;\n                  position = 'after';\n                } else if (accepted.mode & Allowed.INSIDE) {\n                  left = -1000;\n                  top = -1000;\n                  position = 'inside';\n                }\n              } else {\n                // when an element is opened this position is not after this element. but before its first child\n                // eslint-disable-next-line no-lonely-if\n                if (accepted.mode & Allowed.FIRST_CHILD) {\n                  left = leftPos + 19;\n                  indicator.setWidth(indicator.getWidth() - 19);\n                  top = origCoords.bottom;\n                  position = 'first-child';\n                } else {\n                  this.debug('not allowed as first child');\n                }\n              }\n              if (expandTimer) {\n                expandTimer.stop();\n                expandTimer = null;\n              }\n            } else {\n              // inside\n              // eslint-disable-next-line no-lonely-if\n              if (accepted.target && accepted.target.isOpen()) {\n                // treat dropping on an opened node as \"first-child\" position\n                if (accepted.mode & Allowed.FIRST_CHILD) {\n                  if (indicator.getUserData('position') !== 'first-child') {\n                    left = leftPos + 19;\n                    indicator.setWidth(indicator.getWidth() - 19);\n                  }\n                  top = origCoords.bottom;\n                  position = 'first-child';\n                }\n              } else {\n                indicator.setDomPosition(-1000, -1000);\n                if (accepted.mode & Allowed.INSIDE) {\n                  position = 'inside';\n                }\n                if (!expandTimer) {\n                  expandTimer = qx.event.Timer.once(\n                    function () {\n                      if (accepted.target) {\n                        control.openNode(accepted.target);\n                      }\n                    },\n                    this,\n                    1000\n                  );\n                }\n              }\n            }\n          }\n        }\n        indicator.setDomPosition(left, top);\n        indicator.setUserData('position', position);\n        if (!position && cursor.getAction()) {\n          indicator.setUserData('action', ev.getCurrentAction());\n          cursor.resetAction();\n          // eslint-disable-next-line no-console\n          console.assert(left < 0);\n          // eslint-disable-next-line no-console\n          console.assert(top < 0);\n        } else if (position && !cursor.getAction() && cursor.getAction() !== indicator.getUserData('action')) {\n          cursor.setAction(indicator.getUserData('action'));\n          indicator.setUserData('action', null);\n        }\n      };\n      control.addListener('drag', onDrag, this);\n      addButton.addListener('drag', onDrag, this);\n\n      const onDrop = function (ev) {\n        let action = ev.getCurrentAction();\n        let element = ev.supportsType('cv/tree-element') ? ev.getData('cv/tree-element') : null;\n        if (action === 'copy') {\n          if (element) {\n            element = element.clone();\n          } else {\n            action = 'add';\n          }\n        }\n        const elementName = element ? element.getDisplayName() : 'new';\n        const target = accepted.target;\n        if (action === 'move' && element === target) {\n          // cannot move before/after/inside myself\n          return;\n        }\n        switch (indicator.getUserData('position')) {\n          case 'after':\n            if (accepted.mode & Allowed.AFTER) {\n              this.debug(action, elementName, 'after', target.getDisplayName());\n              switch (action) {\n                case 'move':\n                  if (element.moveAfter(target)) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been moved after \"%2\"', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'copy':\n                  if (element.insertAfter(target)) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been copied after \"%2\"', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'add':\n                  this._onCreate(target, indicator.getUserData('position'));\n                  break;\n              }\n            } else {\n              this.debug('NOT ALLOWED', action, elementName, 'after', target.getDisplayName());\n            }\n            break;\n          case 'before':\n            if (accepted.mode & Allowed.BEFORE) {\n              this.debug(action, elementName, 'before', target.getDisplayName());\n\n              switch (action) {\n                case 'move':\n                  if (element.moveBefore(target)) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been moved before \"%2\"', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'copy':\n                  if (element.insertBefore(target)) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been copied before \"%2\"', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'add':\n                  this._onCreate(target, indicator.getUserData('position'));\n                  break;\n              }\n            } else {\n              this.debug('NOT ALLOWED', action, elementName, 'after', target.getDisplayName());\n            }\n            break;\n\n          case 'first-child':\n            if (accepted.mode & Allowed.FIRST_CHILD) {\n              this.debug(action, elementName, 'into', target.getDisplayName(), 'as first child');\n\n              switch (action) {\n                case 'move':\n                  if (element.moveBefore(target.getChildren().getItem(0))) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been moved into \"%2\" as first child', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'copy':\n                  if (element.insertBefore(target.getChildren().getItem(0))) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been copied into \"%2\" as first child', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'add':\n                  this._onCreate(target, indicator.getUserData('position'));\n                  break;\n              }\n            } else {\n              this.debug('NOT ALLOWED', elementName, 'into', target.getDisplayName() + ' as first child');\n            }\n            break;\n\n          case 'inside':\n            if (accepted.mode & Allowed.INSIDE) {\n              this.debug(action, elementName, 'into', target.getDisplayName(), 'as child');\n\n              switch (action) {\n                case 'move':\n                  if (element.moveInside(target)) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been moved into \"%2\"', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'copy':\n                  if (target.insertChild(element, -1, false, 'added')) {\n                    cv.ui.manager.snackbar.Controller.info(\n                      this.tr('\"%1\" has been copied into \"%2\"', elementName, target.getDisplayName())\n                    );\n                  }\n                  break;\n\n                case 'add':\n                  this._onCreate(target, indicator.getUserData('position'));\n                  break;\n              }\n            } else {\n              this.debug('NOT ALLOWED', elementName, 'into', target.getDisplayName(), 'as child');\n            }\n            break;\n        }\n      }.bind(this);\n\n      control.addListener('drop', onDrop, this);\n      indicator.addListener('drop', onDrop, this);\n\n      const onDragEnd = function (ev) {\n        // Move indicator away\n        indicator.setDomPosition(-1000, -1000);\n        indicator.resetUserData();\n        if (expandTimer) {\n          expandTimer.stop();\n          expandTimer = null;\n        }\n        if (draggedXmlElement) {\n          draggedXmlElement.resetDragging();\n          draggedXmlElement = null;\n        }\n        accepted.target = null;\n        accepted.mode = 0;\n        let cursor = ev.getManager().getCursor();\n        if (!cursor) {\n          cursor = qx.ui.core.DragDropCursor.getInstance();\n        }\n        if (cursor.hasState('touch')) {\n          cursor.removeState('touch');\n        }\n        this.setDragging(false);\n      };\n      control.addListener('dragend', onDragEnd, this);\n      addButton.addListener('dragend', onDragEnd, this);\n    },\n\n    /**\n     * Create a new element an insert if after target\n     *\n     * @param target {cv.ui.manager.model.XmlElement} target element\n     * @param position {String} one of \"after\", \"before\" or \"inside\"\n     * @param elementName {String?} if not set a selection of possible elements at that position will be shown\n     * @private\n     */\n    _onCreate(target, position, elementName) {\n      const parent = position === 'inside' || position === 'first-child' ? target : target.getParent();\n      const parentSchemaElement = parent.getSchemaElement();\n      let addable = parent.getAddableChildren(false);\n      if (addable.length > 0) {\n        // check if a child could be added at this position\n        const children = parent.getChildren();\n        // only check if we already have children, because otherwise we can add any child even in ordered sequences\n        if (!parentSchemaElement.areChildrenSortable() && position !== 'inside' && children.length > 0) {\n          // we only care about the first level here\n          const sorting = parentSchemaElement.getFirstLevelElementSorting();\n          let minPosition = 0;\n          let maxPosition = 0;\n          if (position === 'before') {\n            maxPosition = sorting[target.getName()];\n            const targetIndex = children.indexOf(target);\n            if (targetIndex > 0) {\n              let found = false;\n              // find the first real element before that is not from the same type\n              for (let i = targetIndex - 1; i >= 0; i--) {\n                const sibling = children.getItem(i);\n                if (!sibling.getName().startsWith('#') && sibling.getName() !== target.getName()) {\n                  minPosition = sorting[sibling.getName()];\n                  found = true;\n                  break;\n                }\n              }\n              if (!found) {\n                // only siblings of the same type\n                minPosition = maxPosition;\n              }\n            }\n          } else if (position === 'after') {\n            minPosition = sorting[target.getName()];\n            const targetIndex = children.indexOf(target);\n            if (targetIndex < children.length - 1) {\n              // find the first real element after that is not from the same type\n              let found = false;\n              for (let i = targetIndex; i < children.length; i++) {\n                const sibling = children.getItem(i);\n                if (!sibling.getName().startsWith('#') && sibling.getName() !== target.getName()) {\n                  maxPosition = sorting[sibling.getName()];\n                  found = true;\n                  break;\n                }\n              }\n              if (!found) {\n                // only siblings of the same type\n                maxPosition = minPosition;\n              }\n            } else {\n              // we want to append ot to the end\n              maxPosition = minPosition + 1;\n            }\n          } else if (position === 'first-child') {\n            // add before first child\n            const firstChild = children.getItem(0);\n            maxPosition = sorting[firstChild.getName()];\n          }\n          addable = addable.filter(\n            name =>\n              Object.prototype.hasOwnProperty.call(sorting, name) &&\n              sorting[name] <= maxPosition &&\n              sorting[name] >= minPosition\n          );\n        }\n      }\n      if (addable.length > 0) {\n        this.__editing = true;\n        let typeChooserForm;\n        if (addable.length > 1) {\n          // user has to select a type\n          typeChooserForm = new cv.ui.manager.form.ElementForm({\n            allowCancel: true,\n            context: this,\n            message: this.tr(\n              '<p style=\\'font-weight:bold\\'>Choose element</p><p>Several possible element can be created at this position, please select one to proceed.</p>'\n            ),\n\n            formData: {\n              type: {\n                type: 'SelectBox',\n                label: this.tr('Choose element'),\n                help: this.tr('Please choose the element you want to add here.'),\n\n                options: addable\n                  .sort((a, b) => {\n                    if (a.startsWith('#') && !b.startsWith('#')) {\n                      return 1;\n                    } else if (!a.startsWith('#') && b.startsWith('#')) {\n                      return -1;\n                    }\n                    return a.localeCompare(b);\n                  })\n                  .map(name => ({ label: name, value: name })),\n                validation: {\n                  required: true\n                }\n              }\n            }\n          })\n            .show()\n            .promise();\n        } else {\n          typeChooserForm = Promise.resolve({ type: addable[0] });\n        }\n        typeChooserForm.then(result => {\n          if (result) {\n            const type = result.type;\n            // create new element, open the edit dialog and insert it\n            const document = target.getNode().ownerDocument;\n            let element;\n            let isElement = false;\n            switch (type) {\n              case '#comment':\n                element = document.createComment('');\n                break;\n\n              case '#text':\n                element = document.createTextNode('');\n                break;\n\n              case '#cdata-section':\n                element = document.createCDATASection('');\n                break;\n\n              default:\n                element = document.createElement(type);\n                isElement = true;\n                break;\n            }\n\n            const schemaElement = parentSchemaElement.getSchemaElementForElementName(type);\n\n            const initChildren = function (element, schemaElement) {\n              const requiredChildren = schemaElement.getRequiredElements();\n              if (requiredChildren.length > 1) {\n                if (!schemaElement.areChildrenSortable()) {\n                  // a special order 1s required\n                  const allowedSorting = schemaElement.getAllowedElementsSorting();\n                  requiredChildren.sort(cv.ui.manager.model.schema.Element.sortChildNodes(allowedSorting));\n                }\n              }\n              requiredChildren.forEach(childName => {\n                const child = document.createElement(childName);\n                element.appendChild(child);\n                // do this recursively\n                initChildren(child, schemaElement.getSchemaElementForElementName(childName));\n              });\n              if (schemaElement.isTextContentRequired()) {\n                const child = document.createTextNode('-');\n                element.appendChild(child);\n              }\n            };\n            if (isElement) {\n              initChildren(element, schemaElement);\n            }\n\n            const xmlElement = new cv.ui.manager.model.XmlElement(element, schemaElement, target.getEditor(), parent);\n\n            // load the \"empty\" element to init the modification comparison\n            xmlElement.load();\n            let res = Promise.resolve(true);\n            if (xmlElement.isShowEditButton()) {\n              // only show edit dialog when we actually have something to edit\n              res = this._onEdit(null, xmlElement, true);\n            }\n            res\n              .then(data => {\n                if (data) {\n                  // finally insert the new node\n                  switch (position) {\n                    case 'before':\n                      xmlElement.insertBefore(target);\n                      break;\n\n                    case 'after':\n                      xmlElement.insertAfter(target);\n                      break;\n\n                    case 'inside':\n                      target.insertChild(xmlElement, -1, false, 'added');\n                      break;\n\n                    case 'first-child':\n                      target.insertChild(xmlElement, 0, false, 'added');\n                      break;\n                  }\n\n                  this.getChildControl('tree').openNodeAndParents(xmlElement);\n                  this.getChildControl('tree').setSelection([xmlElement]);\n                }\n              }, this)\n              .catch(err => this.error(err));\n          }\n        });\n      }\n    },\n\n    __getAllowedPositions(allowedSorting, elementName, targetName, depth) {\n      if (allowedSorting) {\n        let currentPosition = allowedSorting[elementName];\n        if (typeof currentPosition === 'string') {\n          currentPosition = currentPosition.split('.').map(i => (/^\\d+$/.test(i) ? parseInt(i) : i));\n        } else {\n          currentPosition = [currentPosition];\n        }\n        let targetPosition = allowedSorting[targetName];\n        if (typeof targetPosition === 'string') {\n          targetPosition = targetPosition.split('.').map(i => (/^\\d+$/.test(i) ? parseInt(i) : i));\n        } else {\n          targetPosition = [targetPosition];\n        }\n        const depth = Math.min(depth || 1, currentPosition.length, targetPosition.length);\n\n        for (let i = 0; i < depth; i++) {\n          if (currentPosition[i] === targetPosition[i]) {\n            // no special position\n            return cv.ui.manager.editor.Tree.Allowed.BEFORE | cv.ui.manager.editor.Tree.Allowed.AFTER;\n          } else if (currentPosition[i] - 1 === targetPosition[i]) {\n            return cv.ui.manager.editor.Tree.Allowed.AFTER;\n          } else if (currentPosition[i] + 1 === targetPosition[i]) {\n            return cv.ui.manager.editor.Tree.Allowed.BEFORE;\n          }\n        }\n      }\n      return cv.ui.manager.editor.Tree.Allowed.NONE;\n    },\n\n    __checkProvider(id, formData, element) {\n      const provider = cv.ui.manager.editor.data.Provider.get(id);\n      if (provider) {\n        if (typeof provider.getLive === 'function') {\n          formData.options = provider.getLive(element);\n        } else if (provider.data) {\n          formData.options = provider.data;\n        } else {\n          this.error('misconfigured provider found for ' + id);\n        }\n        formData.type = provider.userInputAllowed ? 'VirtualComboBox' : 'VirtualSelectBox';\n      } else if (['mapping', 'styling'].includes(id.split('@').pop())) {\n        const type = id.split('@').pop();\n        // these are directly filled from data inside the currently used config\n        const tree = this.getChildControl('tree');\n        const rootNode = tree.getModel().getNode();\n        formData.type = 'SelectBox';\n        formData.options = [];\n        const selector = this._structure === 'tile' ? 'cv-meta > cv-' + type : 'meta > ' + type + 's > ' + type;\n        rootNode.querySelectorAll(selector).forEach(element => {\n          const name = element.getAttribute('name');\n          formData.options.push({ label: name, value: name });\n        });\n      }\n      if (formData.type.endsWith('SelectBox')) {\n        // not allowed here\n        delete formData.placeholder;\n        if (!formData.validation.required) {\n          if (formData.options instanceof Promise) {\n            formData.options\n              .then(res => {\n                if (Array.isArray(res)) {\n                  res.unshift({\n                    label: ' - ' + this.tr('not set') + ' - ',\n                    value: ''\n                  });\n                }\n              })\n              .catch(() => {}); // ignore error here, will be handled somewhere else\n          } else {\n            formData.options.unshift({\n              label: ' - ' + this.tr('not set') + ' - ',\n              value: ''\n            });\n          }\n        }\n      }\n    },\n\n    __getAttributeFormDefinition(element, attribute) {\n      const docs = attribute.getDocumentation();\n      const def = {\n        type: 'TextField',\n        label: attribute.getName(),\n        placeholder: ' - ' + this.tr('not set') + ' - ',\n        help: docs.join('<br/>'),\n        enabled: element.isEditable(),\n        value: element.getAttribute(attribute.getName()) || attribute.getDefaultValue(),\n        validation: {\n          required: !attribute.isOptional(),\n          validator(value) {\n            if (value instanceof qx.ui.form.ListItem) {\n              value = value.getModel().getValue();\n            }\n            if (!attribute.isValueValid(value)) {\n              throw new qx.core.ValidationError(qx.locale.Manager.tr('This is not a valid value.'));\n            }\n          }\n        }\n      };\n\n      switch (attribute.getTypeString()) {\n        case 'boolean':\n          def.type = 'CheckBox';\n          def.value = def.value === '' || def.value === null || def.value === undefined ? null : def.value === 'true';\n          delete def.placeholder;\n          break;\n\n        case 'string': {\n          const enums = attribute.getEnumeration();\n          if (enums.length > 0) {\n            def.type = 'SelectBox';\n            delete def.placeholder;\n            def.options = [];\n            enums.forEach(name => {\n              def.options.push({ label: name, value: name });\n            });\n            if (attribute.isOptional()) {\n              // allow empty value\n              def.options.unshift({\n                label: ' - ' + this.tr('not set') + ' - ',\n                value: ''\n              });\n            }\n          } else {\n            // check if we have a dataprovider for this\n            this.__checkProvider(element.getName() + '@' + attribute.getName(), def, element.getNode());\n          }\n          break;\n        }\n      }\n\n      return def;\n    },\n\n    _onEdit(ev, element, isNew) {\n      if (!this.getFile() || !this.getFile().isWriteable()) {\n        return null;\n      }\n      let title;\n      let caption;\n      if (!element) {\n        if (this.getSelected()) {\n          element = this.getSelected();\n        } else {\n          return null;\n        }\n      }\n      if (!element.getShowEditButton()) {\n        return null;\n      }\n      element.load();\n      const formData = {};\n      const typeElement = element.getSchemaElement();\n      if (isNew) {\n        title = this.tr('Create new %1 element', element.getName());\n        caption = this.tr(\n          'Please edit the attributes of the new %1 element, that will be added to the chosen position.',\n          element.getName()\n        );\n      } else {\n        title = this.tr('Edit element attributes');\n        caption = element.isEditable() ? this.tr('Edit %1', element.getName()) : this.tr('Show %1', element.getName());\n      }\n      if (element.getNode().nodeType === Node.ELEMENT_NODE) {\n        const allowed = typeElement.getAllowedAttributes();\n        Object.keys(allowed).forEach(name => {\n          const attribute = allowed[name];\n          if (!this.getExpert()) {\n            const appInfo = attribute.getAppinfo();\n            if (appInfo.includes('level:expert')) {\n              // do not this this attribute\n              return;\n            }\n          }\n          formData[name] = this.__getAttributeFormDefinition(element, attribute);\n        });\n        if (typeElement.isChildElementAllowed('*')) {\n          const parser = new DOMParser();\n          const attrName = element.getNode().nodeName === 'custom' ? '#innerHTML' : '#outerHTML';\n          if (isNew) {\n            title = this.tr('Create new %1 element', element.getName());\n            caption = this.tr(\n              'Please edit the content of the new %1 element, that will be added to the chosen position.',\n              element.getName()\n            );\n          } else {\n            title = attrName === '#outerHTML' ? this.tr('Edit element and content') : this.tr('Edit element content');\n          }\n          formData[attrName] = {\n            type: 'TextArea',\n            label: '',\n            lines: 5,\n            autoSize: true,\n            width: Math.min(qx.bom.Viewport.getWidth(), 500),\n            enabled: element.isEditable(),\n            value: attrName === '#outerHTML' ? element.getNode().outerHTML : element.getNode().innerHTML,\n            validation: {\n              validator(value) {\n                if (value) {\n                  const dom = parser.parseFromString(value, 'text/xml');\n                  if (dom.getElementsByTagName('parsererror').length > 0) {\n                    throw new qx.core.ValidationError(qx.locale.Manager.tr('This is not a valid value.'));\n                  }\n                }\n              }\n            }\n          };\n        }\n      } else if (\n        element.getNode().nodeType === Node.TEXT_NODE ||\n        element.getNode().nodeType === Node.COMMENT_NODE ||\n        element.getNode().nodeType === Node.CDATA_SECTION_NODE\n      ) {\n        title = this.tr('Edit text content', element.getName());\n        caption = '';\n        let nodeName = element.getNode().nodeName;\n        // only in text-only mode we can add text editing to the form\n        const docs = typeElement.getDocumentation();\n        formData[nodeName] = {\n          type: 'TextArea',\n          label: '',\n          lines: 1,\n          autoSize: true,\n          width: Math.min(qx.bom.Viewport.getWidth(), 500),\n          placeholder: this.tr('not set'),\n          help: docs.join('<br/>'),\n          enabled: element.isEditable(),\n          value: element.getTextContent(),\n          validation: {\n            validator(value) {\n              if (value instanceof qx.ui.form.ListItem) {\n                value = value.getModel().getValue();\n              }\n              if (!typeElement.isValueValid(value)) {\n                throw new qx.core.ValidationError(qx.locale.Manager.tr('This is not a valid value.'));\n              }\n            }\n          }\n        };\n\n        if (element.isTextNode() && element.getParent().getName() === 'status') {\n          const type = element.getParent().getAttribute('type');\n          if ((type === 'html' || type === 'xml') && element.getNode().nodeType === Node.TEXT_NODE) {\n            element.convertTextNodeType(Node.CDATA_SECTION_NODE);\n            const newNodeName = element.getNode().nodeName;\n            formData[newNodeName] = formData[nodeName];\n            delete formData[nodeName];\n            nodeName = newNodeName;\n          }\n          // Due to a bug that swallowed whitespaces in the monaco editor from time to time this is disabled for now\n\n          // special handling for status content: check of source editor supports the type and use it instead of a plain TextArea\n          /*if (type && cv.ui.manager.editor.Source.SUPPORTED_FILES(\"test.\" + type)) {\n            formData[nodeName].type = \"SourceEditor\";\n            formData[nodeName].language = type;\n            formData[nodeName].width = Math.min(qx.bom.Viewport.getWidth(), 800);\n            delete formData[nodeName].placeholder;\n          }*/\n        }\n        this.__checkProvider(\n          element.getParent().getName() + '@' + element.getName(),\n          formData[nodeName],\n          element.getNode()\n        );\n      }\n      this.__editing = true;\n\n      const formDialog = new cv.ui.manager.form.ElementForm({\n        allowCancel: true,\n        context: this,\n        caption: title,\n        message: caption,\n        formData: formData,\n        minWidth: Math.min(qx.bom.Viewport.getWidth(), 400),\n        maxWidth: qx.bom.Viewport.getWidth()\n      }).show();\n      return formDialog.promise().then(data => {\n        if (data && element.isEditable()) {\n          // save changes\n          element.setAttributes(data);\n          this.clearReDos();\n          if (\n            !Object.prototype.hasOwnProperty.call(data, '#outerHTML') &&\n            !Object.prototype.hasOwnProperty.call(data, '#innerHTML')\n          ) {\n            element.validate();\n          }\n        }\n        this.__editing = false;\n        formDialog.destroy();\n        return data;\n      });\n    },\n\n    _onDelete(ev, element) {\n      if (!element) {\n        element = this.getSelected();\n      }\n      if (element && element.isDeletable()) {\n        element.remove();\n        this.clearReDos();\n        return element;\n      }\n      return null;\n    },\n\n    _onCut() {\n      if (this.__editing) {\n        document.execCommand('cut');\n      } else {\n        const element = this._onDelete();\n        if (element) {\n          this.setClipboard(element);\n        }\n      }\n    },\n\n    _onCopy() {\n      if (this.__editing) {\n        document.execCommand('copy');\n      } else {\n        const element = this.getSelected();\n        if (element) {\n          const copy = element.clone();\n          this.setClipboard(copy);\n        }\n      }\n    },\n\n    _onPaste() {\n      const target = this.getSelected();\n      const clipboardElement = this.getClipboard();\n      if (target && clipboardElement) {\n        if (target.insertChild(clipboardElement, -1, false, 'added')) {\n          // this was successful, clean the clipboard\n          this.resetClipboard();\n        }\n      }\n    },\n\n    /**\n     * Maintain global modification state.\n     * This method is called by a single cv.ui.manager.model.XmlElement when it has changed its modified state.\n     * @param element {cv.ui.manager.model.XmlElement}\n     */\n    updateModified(element) {\n      const index = this.__modifiedElements.indexOf(element);\n      const previewIndex = this.__modifiedPreviewElements.indexOf(element);\n      if (element.$$removed) {\n        // we dont care about elements that have been removed (its the parent that has changed then by loosing a child)\n        if (index >= 0) {\n          this.__modifiedElements.splice(index, 1);\n        }\n        if (previewIndex >= 0) {\n          this.__modifiedPreviewElements.splice(index, 1);\n        }\n      } else if (element.isModified()) {\n        if (index === -1) {\n          this.__modifiedElements.push(element);\n        }\n        if (previewIndex === -1) {\n          this.__modifiedPreviewElements.push(element);\n        }\n      } else {\n        if (index >= 0) {\n          this.__modifiedElements.splice(index, 1);\n        }\n        if (previewIndex >= 0) {\n          this.__modifiedPreviewElements.splice(index, 1);\n        }\n      }\n      this.getFile().setModified(this.__modifiedElements.length > 0);\n      this._onContentChanged();\n    },\n\n    _draw() {\n      const toolbar = this.getChildControl('toolbar');\n      this._createChildControl('searchbar');\n      if (!this.hasChildControl('add-button')) {\n        this._createChildControl('add-button');\n      }\n      toolbar.addSeparator();\n      this._createChildControl('edit-button');\n      this._createChildControl('delete-button');\n      toolbar.addSeparator();\n      this._createChildControl('toggle-expert');\n      toolbar.addSpacer();\n      this._createChildControl('refresh-preview');\n\n      if (!this.hasChildControl('tree')) {\n        this._createChildControl('tree');\n      }\n      if (!this.hasChildControl('right')) {\n        this._createChildControl('right');\n      }\n      if (!this.hasChildControl('preview-sync-hint')) {\n        this._createChildControl('preview-sync-hint');\n      }\n      if (!this.hasChildControl('preview')) {\n        this._createChildControl('preview');\n      }\n    },\n\n    _applySelected(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this.getChildControl('delete-button'));\n      }\n      if (value) {\n        this.getChildControl('edit-button').setEnabled(value.getShowEditButton());\n\n        if (this.getFile().isWriteable()) {\n          value.bind('deletable', this.getChildControl('delete-button'), 'enabled');\n        }\n      } else {\n        this.getChildControl('edit-button').setEnabled(false);\n        this.getChildControl('delete-button').setEnabled(false);\n      }\n      this._updateHighlightWidget();\n    },\n\n    _updateHighlightWidget() {\n      const selected = this.getSelected();\n      if (this.isShowPreview()) {\n        const preview = this.getChildControl('preview');\n        if (this.getPreviewState() !== 'structureChanged' && selected) {\n          // get page path for this node\n          let path = [];\n          let node = selected.getNode();\n          if (this._structure === 'tile') {\n            while (node && node.nodeName !== 'config') {\n              if (node.nodeName === 'cv-page') {\n                preview.openPage(node.getAttribute('id'));\n                break;\n              }\n              node = node.parentNode;\n            }\n          } else {\n            while (node && node.nodeName !== 'pages') {\n              if (node.nodeName === 'page') {\n                path.unshift(node.getAttribute('name'));\n              }\n              node = node.parentNode;\n            }\n            if (path.length > 0) {\n              preview.openPage(path.pop(), path.join('/'));\n            }\n          }\n          preview.setHighlightWidget(selected.getWidgetPath());\n        } else {\n          preview.setHighlightWidget(null);\n        }\n      }\n    },\n\n    _onElementKeyUp(ev) {\n      if (this.getSelected() && this.isVisible()) {\n        if (ev.getKeyIdentifier() === 'Enter') {\n          if (!this.__editing) {\n            this._onEdit();\n          }\n        }\n      }\n    },\n\n    _applyContent(value) {\n      const tree = this.getChildControl('tree');\n      const file = this.getFile();\n      this._updatePreview(null, null, true);\n      if (value && file) {\n        if (this._workerWrapper) {\n          this._workerWrapper.open(file, value, null, {\n            validate: false,\n            initialValidation: true,\n            modified: false\n          });\n\n          this._workerWrapper.validateXmlConfig(value).then(res => {\n            if (res === true) {\n              this.info(file.getPath() + ' is a valid config file');\n              this.__loadContent(value);\n            } else {\n              const dialog = new cv.ui.manager.dialog.ValidationError(file, value, res);\n\n              dialog.addListener('action', ev => {\n                switch (ev.getData()) {\n                  case 'proceed':\n                    this.__loadContent(value, res);\n                    break;\n\n                  case 'open-source': {\n                    const file = this.getFile();\n                    cv.ui.manager.Main.getInstance().closeFile(file);\n                    qx.event.message.Bus.dispatchByName('cv.manager.openWith', {\n                      file: file.getFullPath(),\n                      handler: 'cv.ui.manager.editor.Source',\n                      handlerOptions: {\n                        jumpToError: true\n                      }\n                    });\n\n                    break;\n                  }\n\n                  case 'cancel':\n                    // close this editor\n                    cv.ui.manager.Main.getInstance().closeFile(this.getFile());\n                    break;\n                }\n\n                dialog.hide();\n                dialog.destroy();\n              });\n              dialog.show();\n            }\n          });\n        }\n      } else {\n        tree.resetModel();\n        if (this.hasChildControl('add-button')) {\n          this.getChildControl('add-button').setEnabled(false);\n        }\n      }\n    },\n\n    __getPreviewFile() {\n      let file;\n      cv.ui.manager.model.FileItem.ROOT.getChildren().some(f => {\n        if (f.getName() === 'visu_config_previewtemp.xml') {\n          file = f;\n          return true;\n        }\n        return false;\n      });\n      if (!file) {\n        file = new cv.ui.manager.model.FileItem('visu_config_previewtemp.xml', '/', this.getFile().getParent());\n\n        file.setTemporary(true);\n      }\n      return file;\n    },\n\n    async __loadContent(value, errors) {\n      const tree = this.getChildControl('tree');\n      const file = this.getFile();\n      if (file) {\n        const doc = qx.xml.Document.fromString(value);\n        const rootElement = doc.documentElement;\n        const schema = await this.getSchema(\n          rootElement.getAttributeNS('http://www.w3.org/2001/XMLSchema-instance', 'noNamespaceSchemaLocation')\n        );\n\n        const schemaElement = schema.getElementNode(rootElement.nodeName);\n        const rootNode = new cv.ui.manager.model.XmlElement(rootElement, schemaElement, this);\n\n        this._structure = schema.getStructure();\n        rootNode.setEditable(file.getWriteable());\n        rootNode.load();\n        tree.setModel(rootNode);\n        if (this.hasChildControl('add-button')) {\n          this.getChildControl('add-button').setVisibility(file.getWriteable() ? 'visible' : 'excluded');\n\n          // extra space fr add-button\n          tree.setContentPaddingBottom(file.getWriteable() ? 80 : 0);\n        }\n        if (this.isShowPreview()) {\n          const preview = this.getChildControl('preview');\n          if (file.isWriteable()) {\n            if (!preview.getFile()) {\n              preview.setFile(this.__getPreviewFile());\n            }\n          } else {\n            preview.setFile(file);\n          }\n          this._updatePreview(null, value);\n          if (!preview.isVisible()) {\n            preview.show();\n          }\n        }\n        if (file.isTemporary()) {\n          this._onContentChanged();\n        }\n        if (errors) {\n          errors.forEach(error => {\n            if (error.path && error.path.startsWith('/pages')) {\n              let current = rootNode;\n              let parts = error.path.substr(1).split('/');\n              while (parts.length > 0) {\n                let part = parts.shift();\n                let match = /^([^[]+)\\[(\\d+)\\]$/.exec(part);\n                if (match) {\n                  current = current.getChildren().getItem(parseInt(match[2]));\n                  if (current) {\n                    try {\n                      // this can always lead to a loading error, because the element is invalid\n                      current.load();\n                    } catch (e) {\n                      this.error('Error loading ' + current.getName() + ': ' + e.toString());\n\n                      current = null;\n                      break;\n                    }\n                  } else {\n                    break;\n                  }\n                } else {\n                  this.error('patch segment format error: ' + part);\n                  current = null;\n                  break;\n                }\n              }\n              if (current) {\n                current.setValid(false);\n                current.validate(false);\n                tree.openNodeAndParents(current);\n              }\n            }\n          });\n        }\n      } else {\n        this._structure = null;\n      }\n    },\n\n    _onContentChanged() {\n      const content = this.getCurrentContent();\n      if (this._workerWrapper) {\n        this._workerWrapper.contentChanged(this.getFile(), content);\n      }\n      if (this.isAutoRefreshPreview() && this.isShowPreview()) {\n        this._updatePreview(null, content);\n      }\n    },\n\n    _updatePreview(ev, content, reset) {\n      const previewFile = this.getChildControl('preview').getFile();\n      if (previewFile) {\n        if (!content && !reset) {\n          content = this.getCurrentContent(true);\n        } else if (reset === true) {\n          this.getChildControl('preview').hide();\n          return;\n        }\n        this.getChildControl('preview').show();\n        if (previewFile.isTemporary()) {\n          this._client.createSync(\n            {\n              path: previewFile.getFullPath(),\n              hash: 'ignore'\n            },\n\n            content,\n            () => {\n              qx.event.message.Bus.dispatchByName(previewFile.getBusTopic(), {\n                type: 'contentChanged',\n                file: previewFile,\n                data: content,\n                source: this\n              });\n\n              this.__modifiedPreviewElements.removeAll();\n              this.resetPreviewState();\n              previewFile.resetTemporary();\n            },\n            this\n          );\n        } else {\n          this._client.updateSync(\n            {\n              path: previewFile.getFullPath(),\n              hash: 'ignore'\n            },\n\n            content,\n            () => {\n              qx.event.message.Bus.dispatchByName(previewFile.getBusTopic(), {\n                type: 'contentChanged',\n                file: previewFile,\n                data: content,\n                source: this\n              });\n\n              this.__modifiedPreviewElements.removeAll();\n              this.resetPreviewState();\n            },\n            this\n          );\n        }\n      }\n    },\n\n    getCurrentContent(fast) {\n      const tree = this.getChildControl('tree');\n      if (tree.getModel()) {\n        const rootNode = tree.getModel().getNode();\n        if (fast) {\n          return new XMLSerializer().serializeToString(rootNode.ownerDocument);\n        }\n        // prettify content\n        return cv.util.Prettifier.xml(rootNode.ownerDocument);\n      }\n      return null;\n    },\n\n    _onSaved() {\n      super._onSaved();\n      this.__modifiedElements.forEach(elem => elem.onSaved());\n      this.__modifiedElements = [];\n      this.clearUnDosReDos();\n    },\n\n    isSupported(file) {\n      return cv.ui.manager.editor.Tree.SUPPORTED_FILES.test(file.getName());\n    },\n\n    _showHelp() {\n      const focusedWidget = qx.ui.core.FocusHandler.getInstance().getFocusedWidget();\n      const dialogConf = {\n        caption: this.tr('Help'),\n        modal: true,\n        image: 'qxl.dialog.icon.info',\n        minWidth: Math.min(600, qx.bom.Viewport.getWidth()),\n        maxHeight: qx.bom.Viewport.getHeight(),\n        message: ''\n      };\n\n      if (focusedWidget === this.getChildControl('searchbar')) {\n        dialogConf.message = this.tr(\n          '<h3>Search for elements</h3>\\\n<p>You can search for element names (tag names or content of name attribute) by typing a search value here. \\\nAll elements whose tag name or name-attribute start with the search term will be found</p>\\\n<p>Search will start automatically when the search term is at least 2 characters long.</p>\\\n<p>The first found element will be opened and selected in the element tree. You can jump to the next \\\nfound element with \\'Enter\\' or the \\'Down\\' key. Accordingly you can jump the the previous found element \\\nwith the \\'Up\\' key.</p>'\n        );\n      } else {\n        // show general help\n        dialogConf.message = this.tr(\n          '<h3>CometVisu XML-Editor - a brief introduction</h3>\\\n<p>The CometVisu XMl-Editor shows the content of a CometVisu config file in a tree-like structure. \\\nYou can traverse through the tree by opening/closing elements with a click on the expand icon.</p>\\\n<p>The Xml-Editor will make sure that you do not create an invalid configuration file. \\\nIf you experience a change that has not been accepted / or is not allowed that is most likely due to avoid an invalid configuration.</p>\\\n<h4>Editing attributes</h4>\\\n<p>The elements attributes can be edited by double clicking on it or selecting an element and clicking on the \\'edit\\'-button in the toolbar \\\nabove the tree of by right-clicking on the element and the \\'edit\\'-button in the context menu</p>\\\n<h4>Editing elements</h4>\\\n<p>The elements in the tree support re-ordering via drag & drop. You can also cut/copy or paste them. \\\nYou can add new elements by starting a drag in the round + button on the bottom of the tree, or \\\nby right clicking on an element and choosing the \\'add child\\'-button.</p>\\\n<p>You can delete elements by the delete buttons in the toolbar</p>\\\n<h4>Expert view</h4>\\\n<p>Some attributes are hidden in the editing dialog, because they provide access to settings that usually \\\nare not needed that often. You can access these attributes by toggling to the \\'Expertview\\'-button \\\nin the toolbar directly above the tree.</p>\\\n<h4>Config preview</h4>\\\n<p>An preview of the edited config file is shown on the right part of the screen. The preview will not automatically \\\nrefresh after you have changed something. You can refresh is manually by clicking the most right button in the toolbar.</p>'\n        );\n      }\n      new cv.ui.manager.dialog.BigAlert(dialogConf).show();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._schemas = null;\n    this._workerWrapper = null;\n    this._disposeArray('__modifiedElements', '__modifiedPreviewElements');\n    qx.core.Init.getApplication().getRoot().removeListener('keyup', this._onElementKeyUp, this);\n  }\n});\n"
  ],
  "mappings": "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"
}