{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "editor",
    "AbstractEditor",
    "construct",
    "constructor",
    "call",
    "_handledActions",
    "getContentElement",
    "setAttribute",
    "set",
    "droppable",
    "focusable",
    "addListener",
    "ev",
    "preventDefault",
    "dataTransfer",
    "effectAllowed",
    "dropEffect",
    "core",
    "FocusHandler",
    "getInstance",
    "setUseTabNavigation",
    "_draw",
    "_initWorker",
    "_currentDecorations",
    "bind",
    "statics",
    "TITLE",
    "locale",
    "Manager",
    "tr",
    "COUNTER",
    "MONACO_EXTENSION_REGEX",
    "FALLBACK_EXTENSION_REGEX",
    "SUPPORTED_FILES",
    "file",
    "filename",
    "getFullPath",
    "toLowerCase",
    "extRegex",
    "Source",
    "getExtensionRegex",
    "test",
    "DEFAULT_FOR",
    "ICON",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "window",
    "monaco",
    "languages",
    "extensions",
    "getLanguages",
    "forEach",
    "lang",
    "ext",
    "replace",
    "indexOf",
    "push",
    "RegExp",
    "join",
    "load",
    "callback",
    "context",
    "_this",
    "version",
    "sourcePath",
    "util",
    "Uri",
    "getAbsolute",
    "LibraryManager",
    "get",
    "loader",
    "DynamicScriptLoader",
    "require",
    "config",
    "paths",
    "vs",
    "availableLanguages",
    "getLanguage",
    "qxLib",
    "apply",
    "typescript",
    "javascriptDefaults",
    "addExtraLib",
    "completionProvider",
    "completion",
    "Config",
    "cvCompletionProvider",
    "CometVisu",
    "registerCompletionItemProvider",
    "getProvider",
    "log",
    "Logger",
    "error",
    "getData",
    "start",
    "members",
    "_editor",
    "_workerWrapper",
    "_configClient",
    "_onDidChangeContentGuard",
    "Worker",
    "setEditor",
    "_getDefaultModelOptions",
    "tabSize",
    "indentSize",
    "insertSpaces",
    "domElement",
    "getDomElement",
    "addListenerOnce",
    "create",
    "suggestOnTriggerCharacters",
    "folding",
    "autoIndent",
    "automaticLayout",
    "dragAndDrop",
    "formatOnPaste",
    "formatOnType",
    "renderValidationDecorations",
    "minimap",
    "enabled",
    "baseVersion",
    "Version",
    "VERSION",
    "split",
    "xhr",
    "io",
    "request",
    "Xhr",
    "ResourceManager",
    "toUri",
    "method",
    "accept",
    "e",
    "req",
    "getTarget",
    "schema",
    "getResponse",
    "json",
    "jsonDefaults",
    "setDiagnosticsOptions",
    "validate",
    "allowComments",
    "schemas",
    "uri",
    "fileMatch",
    "send",
    "getFile",
    "_loadFile",
    "onDidChangeModelContent",
    "_onContentChanged",
    "handleAction",
    "actionName",
    "canHandleAction",
    "trigger",
    "_nativePasteSupported",
    "CLIPBOARD",
    "getModel",
    "getValueInRange",
    "getSelection",
    "_paste",
    "superclass",
    "prototype",
    "selection",
    "id",
    "major",
    "minor",
    "op",
    "identifier",
    "range",
    "text",
    "forceMoveMarkers",
    "executeEdits",
    "old",
    "close",
    "getType",
    "isSupported",
    "_loadFromFs",
    "_this2",
    "getName",
    "rest",
    "Client",
    "getConfigClient",
    "content",
    "Object",
    "hasOwnProperty",
    "setContent",
    "data",
    "JSON",
    "stringify",
    "_onSaved",
    "section",
    "key",
    "save",
    "overrideHash",
    "isValid",
    "snackbar",
    "Controller",
    "getHasWarnings",
    "qxl",
    "dialog",
    "Dialog",
    "confirm",
    "confirmed",
    "__saveHiddenConfig",
    "__P_34_0",
    "saveSync",
    "parse",
    "getCurrentContent",
    "err",
    "status",
    "statusText",
    "info",
    "_applyContent",
    "value",
    "model",
    "open",
    "getUri",
    "newModel",
    "xml",
    "Document",
    "isXmlDocument",
    "documentElement",
    "outerHTML",
    "_typeof",
    "createModel",
    "_getLanguage",
    "onDidChangeDecorations",
    "errors",
    "warnings",
    "getModelMarkers",
    "owner",
    "getLanguageId",
    "resource",
    "some",
    "marker",
    "severity",
    "MarkerSeverity",
    "Warning",
    "Error",
    "setValid",
    "setHasWarnings",
    "updateOptions",
    "setModel",
    "setValue",
    "readOnly",
    "isWriteable",
    "_processHandlerOptions",
    "handlerOptions",
    "getHandlerOptions",
    "upgradeVersion",
    "_this$_upgradeConfig",
    "_upgradeConfig",
    "_this$_upgradeConfig2",
    "_slicedToArray",
    "res",
    "_convertToString",
    "upgrader",
    "ConfigUpgrader",
    "upgrade",
    "getValue",
    "contentChanged",
    "parts",
    "fileType",
    "length",
    "pop",
    "typeExt",
    "showErrors",
    "path",
    "errorList",
    "markers",
    "firstErrorLine",
    "check",
    "line",
    "startLineNumber",
    "endLineNumber",
    "message",
    "startColumn",
    "endColumn",
    "setModelMarkers",
    "options",
    "jumpToError",
    "getScrollTop",
    "revealLineInCenter",
    "showDecorations",
    "decorators",
    "deltaDecorations",
    "type",
    "found",
    "destruct",
    "dispose"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/editor/Source.js"
  ],
  "sourcesContent": [
    "/* Source.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Monaco Texteditor integration\n */\nqx.Class.define('cv.ui.manager.editor.Source', {\n  extend: cv.ui.manager.editor.AbstractEditor,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this._handledActions = ['save', 'cut', 'copy', 'paste', 'undo', 'redo'];\n    this.getContentElement().setAttribute('contentEditable', 'true');\n    this.set({\n      droppable: false,\n      focusable: true\n    });\n\n    this.addListener('dragover', function (ev) {\n      ev.preventDefault();\n      ev.dataTransfer.effectAllowed = 'none';\n      ev.dataTransfer.dropEffect = 'none';\n    });\n    this.addListener('drop', function (ev) {\n      ev.preventDefault();\n    });\n    this.addListener('appear', function () {\n      qx.ui.core.FocusHandler.getInstance().setUseTabNavigation(false);\n    });\n    this.addListener('disappear', function () {\n      qx.ui.core.FocusHandler.getInstance().setUseTabNavigation(true);\n    });\n    this._draw();\n    this._initWorker();\n    this._currentDecorations = [];\n    this.bind('file.writeable', this, 'selectable');\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    TITLE: qx.locale.Manager.tr('Texteditor'),\n    COUNTER: 0,\n    MONACO_EXTENSION_REGEX: null,\n    FALLBACK_EXTENSION_REGEX: /\\.(xml|xsd|html|php|css|js|svg|json|md|yaml|conf|ts|rst|py|txt)$/i,\n    SUPPORTED_FILES(file) {\n      let filename = typeof file === 'string' ? file : file.getFullPath().toLowerCase();\n      const extRegex = cv.ui.manager.editor.Source.getExtensionRegex();\n      return extRegex.test(filename);\n    },\n    DEFAULT_FOR: /^(demo|\\.)?\\/?visu_config.*\\.xml/,\n    ICON: cv.theme.dark.Images.getIcon('text', 18),\n\n    getExtensionRegex() {\n      if (!cv.ui.manager.editor.Source.MONACO_EXTENSION_REGEX) {\n        if (window.monaco && window.monaco.languages) {\n          if (!cv.ui.manager.editor.Source.MONACO_EXTENSION_REGEX) {\n            // monaco has already been loaded, we can use its languages configuration to check if this file is supported\n            const extensions = ['\\\\.xsd'];\n            monaco.languages.getLanguages().forEach(function (lang) {\n              if (lang.extensions) {\n                lang.extensions.forEach(function (ext) {\n                  ext = ext.replace(/\\./g, '\\\\.');\n                  if (extensions.indexOf(ext) === -1) {\n                    extensions.push(ext);\n                  }\n                });\n              }\n            });\n            cv.ui.manager.editor.Source.MONACO_EXTENSION_REGEX = new RegExp('(' + extensions.join('|') + ')$');\n          }\n        }\n      }\n      return cv.ui.manager.editor.Source.MONACO_EXTENSION_REGEX || cv.ui.manager.editor.Source.FALLBACK_EXTENSION_REGEX;\n    },\n\n    load(callback, context) {\n      const version = qx.core.Environment.get('qx.debug') ? 'dev' : 'min';\n      const sourcePath = qx.util.Uri.getAbsolute(qx.util.LibraryManager.getInstance().get('cv', 'resourceUri') + '/..');\n\n      const loader = new qx.util.DynamicScriptLoader([\n        sourcePath + 'node_modules/monaco-editor/' + version + '/vs/loader.js',\n        'manager/xml.js'\n      ]);\n\n      loader.addListener('ready', () => {\n        window.require.config({\n          paths: {\n            vs: sourcePath + 'node_modules/monaco-editor/' + version + '/vs'\n          }\n        });\n\n        window.require.config({\n          'vs/nls': {\n            availableLanguages: {\n              '*':\n                qx.locale.Manager.getInstance().getLanguage() !== 'en'\n                  ? qx.locale.Manager.getInstance().getLanguage()\n                  : ''\n            }\n          }\n        });\n\n        window.require(\n          [\n            'xml!*./resource/manager/completion-libs/qooxdoo.d.ts', // the xml loader can load any file by adding * before the path,\n            'vs/editor/editor.main'\n          ],\n\n          function (qxLib) {\n            callback.apply(context);\n            window.monaco.languages.typescript.javascriptDefaults.addExtraLib(qxLib, 'qooxdoo.d.ts');\n\n            const completionProvider = new cv.ui.manager.editor.completion.Config();\n            const cvCompletionProvider = new cv.ui.manager.editor.completion.CometVisu();\n            window.monaco.languages.registerCompletionItemProvider('javascript', cvCompletionProvider.getProvider());\n\n            window.monaco.languages.registerCompletionItemProvider('xml', completionProvider.getProvider());\n          }\n        );\n      });\n      loader.addListener('failed', ev => {\n        qx.log.Logger.error(this, ev.getData());\n      });\n      loader.start();\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _editor: null,\n    _workerWrapper: null,\n    _currentDecorations: null,\n    _configClient: null,\n    _onDidChangeContentGuard: 0,\n\n    _initWorker() {\n      this._workerWrapper = cv.ui.manager.editor.Worker.getInstance();\n      this._workerWrapper.setEditor(this);\n    },\n\n    _getDefaultModelOptions() {\n      return {\n        tabSize: 2,\n        indentSize: 2,\n        insertSpaces: true\n      };\n    },\n\n    _draw() {\n      if (!window.monaco) {\n        cv.ui.manager.editor.Source.load(this._draw, this);\n      } else {\n        const domElement = this.getContentElement().getDomElement();\n        if (!domElement) {\n          this.addListenerOnce('appear', this._draw, this);\n        } else {\n          this._editor = window.monaco.editor.create(domElement, {\n            suggestOnTriggerCharacters: true,\n            folding: true,\n            autoIndent: true,\n            automaticLayout: true,\n            dragAndDrop: true,\n            formatOnPaste: true,\n            formatOnType: true,\n            renderValidationDecorations: 'on',\n            minimap: {\n              enabled: true\n            },\n\n            theme: 'vs-dark'\n          });\n\n          const baseVersion = cv.Version.VERSION.split('-')[0];\n          const xhr = new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri('hidden-schema.json'));\n\n          xhr.set({\n            method: 'GET',\n            accept: 'application/json'\n          });\n\n          xhr.addListenerOnce('success', e => {\n            const req = e.getTarget();\n            const schema = req.getResponse();\n            window.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\n              validate: true,\n              allowComments: true,\n              schemas: [\n                {\n                  uri: 'https://www.cometvisu.org/CometVisu/schemas/' + baseVersion + '/hidden-schema.json',\n                  fileMatch: ['hidden.php'],\n                  schema: schema\n                }\n              ]\n            });\n          });\n          xhr.send();\n\n          if (this.getFile()) {\n            this._loadFile(this.getFile());\n          }\n          this._editor.onDidChangeModelContent(this._onContentChanged.bind(this));\n        }\n      }\n    },\n\n    handleAction(actionName) {\n      if (this.canHandleAction(actionName)) {\n        switch (actionName) {\n          case 'cut':\n            this._editor.trigger('external', 'editor.action.clipboardCutAction');\n\n            if (!this._nativePasteSupported) {\n              // we have no access to the native clipboard for pasting, so we need to save the value to copy somewhere else\n              // and implement the pasting manually\n              cv.ui.manager.editor.AbstractEditor.CLIPBOARD = this._editor\n                .getModel()\n                .getValueInRange(this._editor.getSelection());\n            }\n            break;\n          case 'copy':\n            this._editor.trigger('external', 'editor.action.clipboardCopyAction');\n\n            if (!this._nativePasteSupported) {\n              // we have no access to the native clipboard for pasting, so we need to save the value to copy somewhere else\n              // and implement the pasting manually\n              cv.ui.manager.editor.AbstractEditor.CLIPBOARD = this._editor\n                .getModel()\n                .getValueInRange(this._editor.getSelection());\n            }\n            break;\n          case 'paste':\n            if (this._nativePasteSupported) {\n              this._editor.trigger('external', 'editor.action.clipboardPasteAction');\n            } else {\n              this._paste();\n            }\n            break;\n          case 'undo':\n          case 'redo':\n            this._editor.trigger('external', actionName);\n            break;\n\n          default:\n            super.handleAction(actionName);\n            break;\n        }\n      }\n    },\n\n    /**\n     * Manual paste into source editor is used when the native paste is not supported by the browser.\n     * This is the case when the cometvisu is not running is a safe environment (no https / localhost)\n     * @private\n     */\n    _paste() {\n      if (cv.ui.manager.editor.AbstractEditor.CLIPBOARD) {\n        const selection = this._editor.getSelection();\n        const id = { major: 1, minor: 1 };\n        const op = {\n          identifier: id,\n          range: selection,\n          text: cv.ui.manager.editor.AbstractEditor.CLIPBOARD,\n          forceMoveMarkers: true\n        };\n\n        this._editor.executeEdits('clipboard', [op]);\n      }\n    },\n\n    _loadFile(file, old) {\n      if (old && this._workerWrapper) {\n        this._workerWrapper.close(old);\n      }\n      if (this._editor) {\n        if (file && file.getType() === 'file' && this.isSupported(file)) {\n          super._loadFile(file, old);\n        } else {\n          super._loadFile(null, old);\n        }\n      }\n    },\n\n    _loadFromFs() {\n      if (this.getFile().getName() === 'hidden.php') {\n        if (!this._configClient) {\n          this._configClient = cv.io.rest.Client.getConfigClient();\n          this._configClient.addListener('getSuccess', ev => {\n            const content = ev.getData();\n            if (Object.prototype.hasOwnProperty.call(content, 'error')) {\n              // hidden config json could not be parsed, show the raw data\n              this.setContent(content.data);\n            } else {\n              this.setContent(JSON.stringify(ev.getData(), null, 2));\n            }\n          });\n          this._configClient.addListener('updateSuccess', this._onSaved, this);\n        }\n        this._configClient.get({ section: '*', key: '*' });\n      } else {\n        super._loadFromFs();\n      }\n    },\n\n    save(callback, overrideHash) {\n      if (this.getFile().getName() === 'hidden.php') {\n        if (!this.getFile().isValid()) {\n          cv.ui.manager.snackbar.Controller.error(this.tr('Hidden config is invalid, please correct the errors'));\n        } else if (this.getFile().getHasWarnings()) {\n          // ask user if he really want to save a file with warnings\n          qxl.dialog.Dialog.confirm(\n            this.tr(\n              'Hidden config content has some warnings! It is recommended to fix the warnings before saving. Save anyways?'\n            ),\n\n            function (confirmed) {\n              if (confirmed) {\n                this.__saveHiddenConfig();\n              }\n            },\n            this,\n            qx.locale.Manager.tr('Confirm saving with warnings')\n          );\n        } else {\n          this.__saveHiddenConfig();\n        }\n      } else {\n        super.save(callback, overrideHash);\n      }\n    },\n\n    __saveHiddenConfig() {\n      this._configClient.saveSync(\n        null,\n        JSON.parse(this.getCurrentContent()),\n        function (err) {\n          if (err) {\n            cv.ui.manager.snackbar.Controller.error(\n              this.tr('Saving hidden config failed with error %1 (%2)', err.status, err.statusText)\n            );\n          } else {\n            cv.ui.manager.snackbar.Controller.info(this.tr('Hidden config has been saved'));\n\n            this._onSaved();\n          }\n        },\n        this\n      );\n    },\n\n    _applyContent(value) {\n      const file = this.getFile();\n      if (!file) {\n        return;\n      }\n      const model = this._editor.getModel();\n      if (this._workerWrapper) {\n        this._workerWrapper.open(file, value);\n      }\n      const id = monaco.Uri.parse(file.getUri());\n      let newModel = window.monaco.editor.getModel(id);\n      if (!newModel) {\n        // create new model\n        if (qx.xml.Document.isXmlDocument(value)) {\n          value = value.documentElement.outerHTML;\n        } else if (typeof value === 'object') {\n          value = JSON.stringify(value, null, 2);\n        }\n        newModel = window.monaco.editor.createModel(value, this._getLanguage(file), id);\n\n        newModel.onDidChangeDecorations(function (ev) {\n          let errors = false;\n          let warnings = false;\n          monaco.editor\n            .getModelMarkers({\n              owner: newModel.getLanguageId(),\n              resource: id\n            })\n            .some(function (marker) {\n              if (marker.severity === monaco.MarkerSeverity.Warning) {\n                warnings = true;\n              } else if (marker.severity === monaco.MarkerSeverity.Error) {\n                errors = true;\n              }\n              return warnings && errors;\n            }, this);\n          file.setValid(!errors);\n          file.setHasWarnings(warnings);\n        });\n      }\n\n      if (model !== newModel) {\n        newModel.updateOptions(this._getDefaultModelOptions());\n        this._editor.setModel(newModel);\n      } else {\n        this._editor.setValue(value);\n      }\n      this._editor.updateOptions({ readOnly: !file.isWriteable() });\n      this._processHandlerOptions(value);\n    },\n\n    _processHandlerOptions(content) {\n      const handlerOptions = this.getHandlerOptions() || {};\n      if (\n        Object.prototype.hasOwnProperty.call(handlerOptions, 'upgradeVersion') &&\n        handlerOptions.upgradeVersion === true &&\n        content\n      ) {\n        const [err, res] = this._upgradeConfig(content);\n        if (err) {\n          this.error(err);\n        } else {\n          this._editor.setValue(this._convertToString(res));\n        }\n      }\n    },\n\n    _convertToString(xml) {\n      return '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n' + xml.documentElement.outerHTML;\n    },\n\n    _upgradeConfig(content) {\n      if (this.getFile()) {\n        if (this.getFile().isWriteable()) {\n          const upgrader = new cv.util.ConfigUpgrader();\n          return upgrader.upgrade(content);\n        }\n        cv.ui.manager.snackbar.Controller.error(\n          this.tr('\"%1\" is not writable. Upgrading not possible.', this.getFile().getFullPath())\n        );\n      }\n      return [null, '', []];\n    },\n\n    getCurrentContent() {\n      return this._editor.getValue();\n    },\n\n    _onContentChanged() {\n      if (this._workerWrapper) {\n        this._workerWrapper.contentChanged(this.getFile(), this._editor.getValue());\n      }\n    },\n\n    isSupported(file) {\n      const parts = file.getName().split('.');\n      const fileType = parts.length > 1 ? parts.pop() : 'txt';\n      const typeExt = '.' + fileType;\n      const extRegex = cv.ui.manager.editor.Source.getExtensionRegex();\n      return extRegex.test(typeExt);\n    },\n\n    showErrors(path, errorList) {\n      const markers = [];\n      const model = this._editor.getModel();\n      if (!model) {\n        return;\n      }\n      let firstErrorLine = -1;\n      /**\n       * @param line\n       */\n      function check(line) {\n        if (firstErrorLine < 0 || firstErrorLine > line) {\n          firstErrorLine = line;\n        }\n      }\n      if (errorList) {\n        errorList.forEach(function (error) {\n          check(error.line);\n          markers.push({\n            severity: window.monaco.MarkerSeverity.Error,\n            startLineNumber: error.line,\n            endLineNumber: error.line,\n            message: error.message,\n            startColumn: error.startColumn,\n            endColumn: error.endColumn\n          });\n        });\n      }\n      if (this.getFile().getFullPath() === path) {\n        window.monaco.editor.setModelMarkers(model, model.getLanguageId(), markers);\n\n        const options = this.getHandlerOptions();\n        if (options && options.jumpToError) {\n          // jump too first error (only when we are at the beginning\n          if (this._editor.getScrollTop() === 0) {\n            this._editor.revealLineInCenter(firstErrorLine);\n          }\n        }\n      } else {\n        // TODO: save errors for later\n      }\n    },\n\n    showDecorations(path, decorators) {\n      if (this.getFile().getFullPath() === path) {\n        this._editor.deltaDecorations(this._currentDecorations[path], decorators);\n      }\n      this._currentDecorations[path] = decorators;\n    },\n\n    _getLanguage(file) {\n      if (file.getName() === 'hidden.php') {\n        // override this setting as we are loading the hidden config from its REST endpoint as JSON\n        return 'json';\n      }\n      let type = file.getName().split('.').pop();\n      switch (type) {\n        case 'svg':\n        case 'xsd':\n          return 'xml';\n        case 'js':\n          return 'javascript';\n        case 'md':\n          return 'markdown';\n        default: {\n          if (!type) {\n            return 'txt';\n          }\n          // check if monaco knows this ending, otherwise fallback to plaintext\n          const typeExt = '.' + type;\n          const found = monaco.languages.getLanguages().some(function (lang) {\n            return lang.id === type || (lang.extensions && lang.extensions.indexOf(typeExt) >= 0);\n          });\n          if (!found) {\n            type = 'txt';\n          }\n          return type;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._workerWrapper = null;\n    if (this._editor) {\n      this._editor.dispose();\n      this._editor = null;\n    }\n    this._configClient = null;\n    qx.ui.core.FocusHandler.getInstance().setUseTabNavigation(true);\n  }\n});\n"
  ],
  "mappings": "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"
}