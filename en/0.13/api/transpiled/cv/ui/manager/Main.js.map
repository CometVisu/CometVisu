{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "include",
    "cv",
    "ui",
    "manager",
    "control",
    "MFileEventHandler",
    "implement",
    "IActionHandler",
    "IFileEventHandler",
    "construct",
    "_this",
    "constructor",
    "call",
    "model",
    "BackupFolder",
    "getInstance",
    "_checkEnvironment",
    "initOpenFiles",
    "data",
    "Array",
    "__actionDispatcher",
    "ActionDispatcher",
    "setMain",
    "__initCommands",
    "_draw",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_onManagerEvent",
    "tooltip",
    "Manager",
    "window",
    "addEventListener",
    "_onBeforeUnload",
    "statics",
    "ROOT",
    "properties",
    "openFiles",
    "check",
    "deferredInit",
    "writeableFolder",
    "init",
    "currentFolder",
    "nullable",
    "apply",
    "currentSelection",
    "deleteableSelection",
    "renameableSelection",
    "visible",
    "members",
    "__previewFileIndex",
    "__root",
    "_pane",
    "_tree",
    "_stack",
    "_oldCommandGroup",
    "_managerCommands",
    "_mainContent",
    "_openFilesController",
    "_hiddenConfigFakeFile",
    "_applyVisible",
    "value",
    "Init",
    "getApplication",
    "getCommandManager",
    "setActive",
    "bom",
    "element",
    "Style",
    "set",
    "__getRoot",
    "io",
    "rest",
    "Client",
    "getFsClient",
    "checkEnvironmentSync",
    "err",
    "res",
    "snackbar",
    "Controller",
    "error",
    "forEach",
    "env",
    "refreshActions",
    "entity",
    "state",
    "locale",
    "tr",
    "FileItem",
    "setReadable",
    "setWriteable",
    "widget",
    "getFocusedWidget",
    "resetFocusedWidget",
    "setFocusedWidget",
    "canHandleAction",
    "actionName",
    "getCurrentSelection",
    "isWriteable",
    "actions",
    "getCurrentFolder",
    "push",
    "includes",
    "_doClose",
    "document",
    "querySelector",
    "configLoader",
    "util",
    "ConfigLoader",
    "app",
    "load",
    "bootstrap",
    "setVisible",
    "handleAction",
    "unsavedFiles",
    "closeCurrentFile",
    "closeFile",
    "getOpenFiles",
    "filter",
    "openFile",
    "getFile",
    "isModified",
    "length",
    "dialog",
    "qxl",
    "Confirm",
    "callback",
    "confirmed",
    "save",
    "dispose",
    "context",
    "caption",
    "yesButtonLabel",
    "noButtonLabel",
    "useBlocker",
    "show",
    "_onCreate",
    "readSync",
    "path",
    "file",
    "getFullPath",
    "isConfigFile",
    "converter",
    "ConfigUpgrader",
    "_converter$convertPur",
    "convertPureToTile",
    "_converter$convertPur2",
    "_slicedToArray",
    "convertedContent",
    "suggestedName",
    "match",
    "exec",
    "getName",
    "_onDelete",
    "_showAbout",
    "warn",
    "ev",
    "preventDefault",
    "returnValue",
    "configureButton",
    "button",
    "unConfigureButton",
    "_handleFileEvent",
    "getData",
    "action",
    "copy",
    "some",
    "isRelated",
    "resetCurrentFolder",
    "refresh",
    "__findConfigFile",
    "__P_25_5",
    "name",
    "demoFolder",
    "getChildren",
    "child",
    "startsWith",
    "substr",
    "handler",
    "handlerOptions",
    "_onChangeTreeSelection",
    "Preferences",
    "isQuickPreview",
    "mode",
    "__openSelectedFile",
    "node",
    "getType",
    "setCurrentFolder",
    "getParent",
    "setCurrentSelection",
    "resetCurrentSelection",
    "__P_25_6",
    "setEditing",
    "_applyCurrentFolder",
    "old",
    "removeRelatedBindings",
    "bind",
    "resetWriteableFolder",
    "_applyCurrentSelection",
    "resetDeleteableSelection",
    "_onChangeFileSelection",
    "sel",
    "getSelection",
    "getItem",
    "editorConfig",
    "handlerId",
    "getHandlerId",
    "FileHandlerRegistry",
    "getFileHandlerById",
    "getFileHandler",
    "instance",
    "Clazz",
    "setFile",
    "indexOf",
    "add",
    "editor",
    "AbstractEditor",
    "setHandlerOptions",
    "getHandlerOptions",
    "setSelection",
    "GlobalState",
    "setOpenedFocusedFile",
    "resetOpenedFocusedFile",
    "preview",
    "handlerType",
    "handlerConf",
    "info",
    "classname",
    "isExternal",
    "isOpen",
    "of",
    "OpenFile",
    "resetHandlerOptions",
    "isPermanent",
    "setItem",
    "setPermanent",
    "getTarget",
    "setModelSelection",
    "checkUnsavedChanged",
    "_this2",
    "found",
    "f",
    "isTemporary",
    "resetModified",
    "dispatchByName",
    "noButtonIcon",
    "allowCancel",
    "force",
    "isCloseable",
    "resetPermanent",
    "selectionIndex",
    "remove",
    "currentHandler",
    "hasInterface",
    "IEditor",
    "Start",
    "resetFile",
    "resetSelection",
    "replace",
    "CompareFiles",
    "fileHandlerConf",
    "clear",
    "destroy",
    "monaco",
    "oldModel",
    "getModel",
    "getUri",
    "selected",
    "_onCloseFile",
    "__P_25_4",
    "dom",
    "Element",
    "create",
    "id",
    "style",
    "insertEnd",
    "body",
    "theme",
    "Meta",
    "setTheme",
    "Dark",
    "__P_25_1",
    "group",
    "command",
    "Group",
    "Command",
    "renameCommand",
    "getActive",
    "item",
    "FileController",
    "_onChangeStackSelection",
    "selection",
    "page",
    "toArray",
    "find",
    "__getFileNamePrompt",
    "__P_25_7",
    "prompt",
    "Prompt",
    "content",
    "folder",
    "existsMessage",
    "handlePrompt",
    "filename",
    "exists",
    "readable",
    "writeable",
    "loaded",
    "modified",
    "temporary",
    "parentFolder",
    "createSync",
    "getBusTopic",
    "source",
    "addChild",
    "sortElements",
    "__findDroppable",
    "__P_25_8",
    "elem",
    "nodeType",
    "getAttribute",
    "parentNode",
    "_this3",
    "domRoot",
    "root",
    "Inline",
    "addListenerOnce",
    "getContentElement",
    "getDomElement",
    "target",
    "setRoot",
    "setLayout",
    "layout",
    "Canvas",
    "bottom",
    "left",
    "resize",
    "bounds",
    "getBounds",
    "setLayoutProperties",
    "Math",
    "round",
    "width",
    "setMaxHeight",
    "height",
    "addListener",
    "innerHeight",
    "main",
    "container",
    "Composite",
    "Dock",
    "edge",
    "menuBar",
    "MenuBar",
    "uploadButton",
    "getButton",
    "uploadManager",
    "upload",
    "UploadMgr",
    "splitpane",
    "Pane",
    "rootFolder",
    "fakeIconFile",
    "getIconFile",
    "overrideIcon",
    "open",
    "fakeChildren",
    "icon",
    "dark",
    "Images",
    "getIcon",
    "tree",
    "FileSystem",
    "leftContainer",
    "VBox",
    "leftBar",
    "ToolBar",
    "reload",
    "buttonConfig",
    "getButtonConfiguration",
    "args",
    "flex",
    "list",
    "form",
    "List",
    "setAppearance",
    "controller",
    "setDelegate",
    "createItem",
    "FileTabItem",
    "bindItem",
    "index",
    "bindDefaultProperties",
    "bindProperty",
    "Stack",
    "startOpenFile",
    "setCloseable",
    "dialogConf",
    "modal",
    "minWidth",
    "min",
    "Viewport",
    "getWidth",
    "maxHeight",
    "getHeight",
    "concat",
    "Version",
    "VERSION",
    "DATE",
    "REV",
    "LIBRARY_VERSION_PURE",
    "LIBRARY_VERSION_TILE",
    "getServer",
    "getServerPhpVersion",
    "BigAlert",
    "destruct",
    "_disposeObjects",
    "application",
    "DeferredCall",
    "resetRoot",
    "schedule",
    "removeChild",
    "unsubscribe",
    "Main",
    "$$instance"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/Main.js"
  ],
  "sourcesContent": [
    "/* Main.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Main class of the CometVisu file manager.\n * @author Tobias BrÃ¤utigam\n * @since 0.12.0\n *\n * @asset(manager/*)\n */\nqx.Class.define('cv.ui.manager.Main', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  include: [cv.ui.manager.control.MFileEventHandler],\n\n  implement: [cv.ui.manager.IActionHandler, cv.ui.manager.control.IFileEventHandler],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    cv.ui.manager.model.BackupFolder.getInstance();\n    this._checkEnvironment();\n    this.initOpenFiles(new qx.data.Array());\n    this.__actionDispatcher = cv.ui.manager.control.ActionDispatcher.getInstance();\n    this.__actionDispatcher.setMain(this);\n\n    this.__initCommands();\n    this._draw();\n\n    qx.event.message.Bus.subscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // Initialize tooltip manager\n    qx.ui.tooltip.Manager.getInstance();\n\n    //qx.event.Registration.addListener(window, 'beforeunload', this._onBeforeUnload, this);\n    window.addEventListener('beforeunload', event => {\n      this._onBeforeUnload(event);\n    });\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ROOT: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    openFiles: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    /**\n     * Current selected folder (if a file is selected its parent folder) is writeable.\n     */\n    writeableFolder: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeWriteableFolder'\n    },\n\n    currentFolder: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentFolder',\n      event: 'changeCurrentFolder'\n    },\n\n    currentSelection: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentSelection',\n      event: 'changeCurrentSelection'\n    },\n\n    deleteableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeDeleteableSelection'\n    },\n\n    renameableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeRenameableSelection'\n    },\n\n    visible: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeVisible',\n      apply: '_applyVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __previewFileIndex: null,\n    __root: null,\n    _pane: null,\n    _tree: null,\n    _stack: null,\n    _oldCommandGroup: null,\n    _managerCommands: null,\n    _mainContent: null,\n    _openFilesController: null,\n    _hiddenConfigFakeFile: null,\n    __actionDispatcher: null,\n\n    _applyVisible(value) {\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      if (value) {\n        manager.setActive(this._managerCommands);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'block');\n      } else {\n        manager.setActive(this._oldCommandGroup);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'none');\n      }\n    },\n\n    _checkEnvironment() {\n      cv.io.rest.Client.getFsClient().checkEnvironmentSync(function (err, res) {\n        if (err) {\n          cv.ui.manager.snackbar.Controller.error(err);\n        } else if (res) {\n          res.forEach(function (env) {\n            let refreshActions = false;\n            switch (env.entity) {\n              case '.':\n                // config folder must be writeable\n                if ((env.state & 1) === 0) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder does not exists'));\n                } else if ((env.state & 2) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setReadable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not readable'));\n                } else if ((env.state & 4) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setWriteable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not writeable'));\n                }\n                if (refreshActions) {\n                  const widget = this.__actionDispatcher.getFocusedWidget();\n                  this.__actionDispatcher.resetFocusedWidget();\n                  this.__actionDispatcher.setFocusedWidget(widget);\n                }\n                break;\n\n              case 'backup':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('backup folder is not writeable'));\n                }\n                break;\n\n              case 'media':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('media folder is not writeable'));\n                }\n                break;\n\n              case 'hidden.php':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(\n                    qx.locale.Manager.tr('Hidden configuration file (hidden.php) not writeable')\n                  );\n                }\n                break;\n            }\n          }, this);\n        }\n      }, this);\n    },\n\n    canHandleAction(actionName) {\n      if (actionName === 'delete' && this.getCurrentSelection() && !this.getCurrentSelection().isWriteable()) {\n        // needs a writeable file\n        return false;\n      }\n      let actions = ['close', 'quit', 'about'];\n      const currentFolder = this.getCurrentFolder();\n      if (currentFolder.isWriteable()) {\n        actions.push('new-file');\n        actions.push('new-folder');\n        actions.push('delete');\n        actions.push('upload');\n        actions.push('clone');\n        actions.push('convertToTile');\n      }\n      if (cv.ui.manager.model.FileItem.ROOT.isWriteable()) {\n        actions.push('new-config-file');\n      }\n      return actions.includes(actionName);\n    },\n\n    _doClose() {\n      if (document.querySelector('#main.loading')) {\n        // there is no config file loaded, load the default one\n        let configLoader = new cv.util.ConfigLoader();\n        let app = qx.core.Init.getApplication();\n        configLoader.load(app.bootstrap, app);\n      }\n      this.setVisible(false);\n    },\n\n    handleAction(actionName, data) {\n      let unsavedFiles;\n      switch (actionName) {\n        case 'close':\n          if (!data) {\n            this.closeCurrentFile();\n          } else {\n            this.closeFile(data);\n          }\n          break;\n\n        case 'quit':\n          unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n          if (unsavedFiles.length > 0) {\n            const dialog = new qxl.dialog.Confirm({\n              message: qx.locale.Manager.tr('You have files opened with unsaved changes, you should save them now.'),\n\n              callback(confirmed) {\n                if (confirmed) {\n                  unsavedFiles.forEach(openFile => {\n                    openFile.save();\n                  });\n                }\n                dialog.dispose();\n                this._doClose();\n              },\n              context: this,\n              caption: qx.locale.Manager.tr('Unsaved changes'),\n              yesButtonLabel: qx.locale.Manager.tr('Save & quit'),\n              noButtonLabel: qx.locale.Manager.tr('Quit without saving'),\n              useBlocker: true\n            });\n\n            dialog.show();\n          } else {\n            this._doClose();\n          }\n          break;\n\n        case 'new-file':\n          this._onCreate('file', null, data);\n          break;\n\n        case 'new-config-file':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: 'demo/templates/visu_config.xml' },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load config template'));\n              } else {\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'clone':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                // config files need to be cloned in the root folder\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              } else {\n                this._onCreate('file', res);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'convertToTile':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                const converter = new cv.util.ConfigUpgrader();\n                const [err, convertedContent] = converter.convertPureToTile(res);\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  let suggestedName = 'tile';\n                  const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(data.file.getName());\n\n                  if (match) {\n                    suggestedName = 'tile-' + match[1];\n                  }\n                  // config files need to be cloned in the root folder\n                  this._onCreate(\n                    'config',\n                    convertedContent,\n                    cv.ui.manager.model.FileItem.ROOT,\n                    'cv.ui.manager.editor.Source',\n                    suggestedName\n                  );\n                }\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'new-folder':\n          this._onCreate('dir', null, data);\n          break;\n\n        case 'delete':\n          this._onDelete(data);\n          break;\n\n        case 'upload':\n          // nothing to to, this is handled in another way\n          break;\n\n        case 'about':\n          this._showAbout();\n          break;\n\n        default:\n          this.warn(actionName + ' handling is not implemented yet!');\n          break;\n      }\n    },\n\n    _onBeforeUnload(ev) {\n      const unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n      if (unsavedFiles.length > 0) {\n        ev.preventDefault();\n        ev.returnValue = '';\n      } else {\n        delete ev['returnValue'];\n      }\n    },\n\n    configureButton(button) {},\n    unConfigureButton(button) {},\n\n    _handleFileEvent(ev) {\n      const data = ev.getData();\n      if (data.action === 'deleted') {\n        // check if file is currently opened and close it\n        const openFiles = this.getOpenFiles().copy();\n        openFiles.some(function (openFile) {\n          if (openFile.getFile().isRelated(data.path)) {\n            this.closeFile(openFile);\n          }\n          return false;\n        }, this);\n        if (this.getCurrentFolder() && this.getCurrentFolder().getFullPath() === data.path) {\n          this.resetCurrentFolder();\n        }\n      } else {\n        this.warn('unhandled file event', data.action);\n      }\n      this._tree.refresh();\n    },\n\n    __findConfigFile(name) {\n      let file = null;\n      let demoFolder = null;\n      cv.ui.manager.model.FileItem.ROOT.getChildren().some(child => {\n        if (child.getName() === 'demo') {\n          demoFolder = child;\n        } else if (child.getName() === name) {\n          file = child;\n          return true;\n        }\n        return false;\n      });\n      if (!file && demoFolder) {\n        if (name.startsWith('demo/')) {\n          name = name.substr(5);\n        }\n        // check demo configs\n        demoFolder.getChildren().some(child => {\n          if (child.getName() === name) {\n            file = child;\n            return true;\n          }\n          return false;\n        });\n      }\n      return file;\n    },\n\n    _onManagerEvent(ev) {\n      let data = ev.getData();\n      switch (ev.getName()) {\n        case 'cv.manager.compareFiles':\n          this.openFile(data, false);\n          break;\n\n        case 'cv.manager.openWith':\n          if (typeof data.file === 'string') {\n            // this can only by a file in the root dir (a config)\n            data.file = this.__findConfigFile(data.file);\n          }\n          this.openFile(data.file || this.getCurrentSelection(), false, data.handler, null, data.handlerOptions);\n\n          break;\n\n        case 'cv.manager.open':\n          if (typeof data === 'string') {\n            // this can only by a file in the root dir (a config)\n            data = this.__findConfigFile(data);\n          }\n          this.openFile(data || this.getCurrentSelection(), false);\n          break;\n      }\n    },\n\n    /**\n     * open selected file in preview mode\n     * @param ev\n     * @private\n     */\n    _onChangeTreeSelection(ev) {\n      const data = ev.getData();\n      if (\n        (cv.ui.manager.model.Preferences.getInstance().isQuickPreview() && data.mode === 'tap') ||\n        data.mode === 'dbltap'\n      ) {\n        this.__openSelectedFile(data.node, data.mode);\n      }\n      const node = data.node;\n      if (node) {\n        if (data.node.getType() === 'file') {\n          this.setCurrentFolder(data.node.getParent());\n        } else {\n          this.setCurrentFolder(node);\n        }\n        this.setCurrentSelection(node);\n      } else {\n        this.resetCurrentFolder();\n        this.resetCurrentSelection();\n      }\n    },\n\n    __openSelectedFile(node, mode) {\n      if (node) {\n        if (node.getType() === 'file') {\n          this.openFile(node, mode === 'tap');\n        } else if (mode === 'dbltap') {\n          // edit folder name on dbltap\n          node.setEditing(true);\n        }\n      }\n    },\n\n    _applyCurrentFolder(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'writeableFolder');\n      } else {\n        this.resetWriteableFolder();\n      }\n    },\n\n    _applyCurrentSelection(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'deleteableSelection');\n        value.bind('inTrash', this, 'renameableSelection', {\n          converter(value) {\n            return !value;\n          }\n        });\n      } else {\n        this.resetDeleteableSelection();\n      }\n    },\n\n    _onChangeFileSelection() {\n      const sel = this._openFilesController.getSelection();\n      if (sel.length > 0) {\n        const openFile = sel.getItem(0);\n        const file = openFile.getFile();\n        let editorConfig;\n        const handlerId = openFile.getHandlerId();\n        if (handlerId) {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n        } else {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n        }\n        if (!editorConfig.instance) {\n          editorConfig.instance = new editorConfig.Clazz();\n        }\n        editorConfig.instance.setFile(file);\n        if (this._stack.indexOf(editorConfig.instance) < 0) {\n          this._stack.add(editorConfig.instance);\n        }\n        if (editorConfig.instance instanceof cv.ui.manager.editor.AbstractEditor) {\n          editorConfig.instance.setHandlerOptions(openFile.getHandlerOptions());\n        }\n        this._stack.setSelection([editorConfig.instance]);\n        this.__actionDispatcher.setFocusedWidget(editorConfig.instance);\n\n        cv.ui.manager.core.GlobalState.getInstance().setOpenedFocusedFile(file);\n      } else {\n        cv.ui.manager.core.GlobalState.getInstance().resetOpenedFocusedFile();\n      }\n    },\n\n    /**\n     * @param file {cv.ui.manager.model.FileItem} the file to open\n     * @param preview {Boolean} open the file in preview mode\n     * @param handlerId {String} use this handler to open the file (classname as string)\n     * @param handlerType {String} use a special handler type, e.g. 'edit' if you want to open the file with an editor and not a viewer\n     * @param handlerOptions\n     */\n    openFile(file, preview, handlerId, handlerType, handlerOptions) {\n      const openFiles = this.getOpenFiles();\n      let openFile;\n      let handlerConf;\n      if (!handlerId) {\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file, handlerType);\n\n        if (!handlerConf) {\n          // no handler\n          cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Cannot open file: \"%1\"', file.getName()));\n\n          return;\n        }\n        handlerId = handlerConf.Clazz.classname;\n      } else {\n        // check if this handler opens the file in a external frame that is not connected to the manager\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n\n        if (!handlerConf.instance) {\n          handlerConf.instance = new handlerConf.Clazz();\n        }\n        if (handlerConf.instance.isExternal()) {\n          handlerConf.instance.setFile(file);\n          return;\n        }\n      }\n      const isOpen = openFiles.some(function (of) {\n        if (of.getFile() === file && handlerId === of.getHandlerId()) {\n          openFile = of;\n          return true;\n        }\n        return false;\n      });\n      if (!openFile) {\n        openFile = new cv.ui.manager.model.OpenFile(file, handlerId);\n      }\n      if (handlerOptions) {\n        openFile.setHandlerOptions(handlerOptions);\n      } else {\n        openFile.resetHandlerOptions();\n      }\n      if (preview === true) {\n        if (!openFile.isPermanent()) {\n          if (\n            this.__previewFileIndex !== null &&\n            openFiles.getItem(this.__previewFileIndex) &&\n            !openFiles.getItem(this.__previewFileIndex).isPermanent()\n          ) {\n            openFiles.setItem(this.__previewFileIndex, openFile);\n          } else {\n            this.__previewFileIndex = openFiles.length;\n            openFiles.push(openFile);\n          }\n          // do not 'downgrade' the permanent state\n          openFile.setPermanent(false);\n        }\n      } else {\n        if (!isOpen && (this.__previewFileIndex === null || openFiles.indexOf(openFile) !== this.__previewFileIndex)) {\n          openFiles.push(openFile);\n        }\n        openFile.setPermanent(true);\n        this.__previewFileIndex = null;\n      }\n      this._openFilesController.getTarget().setModelSelection([openFile]);\n    },\n\n    /**\n     * Opens a confirm dialog on how to treat the unsaved changes in the file if it has been modified and not saved.\n     * @param openFile {cv.ui.manager.model.OpenFile|cv.ui.manager.model.FileItem} file to check\n     * @return {boolean} true if the confirm dialog has been shown\n     */\n    checkUnsavedChanged(openFile) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return false;\n        }\n      }\n      const file = openFile.getFile();\n      if (file.isModified()) {\n        // check if temporary\n        let message = qx.locale.Manager.tr(\n          'This file has unsaved changes that will be lost when you close it without saving.'\n        );\n\n        if (file.isTemporary()) {\n          message = qx.locale.Manager.tr(\n            'This file has not been saved on the backend yet. It will be lost when you close it without saving.'\n          );\n        }\n        const dialog = new qxl.dialog.Confirm({\n          message: message,\n          callback: confirmed => {\n            if (confirmed === true) {\n              openFile.save();\n              this.closeFile(openFile, true);\n            } else if (confirmed === false) {\n              file.resetModified();\n              if (file.isTemporary()) {\n                qx.event.message.Bus.dispatchByName('cv.manager.file', {\n                  action: 'deleted',\n                  path: file.getFullPath()\n                });\n              }\n              this.closeFile(openFile, true);\n            } else {\n              // cancel closing, do nothing\n            }\n            dialog.dispose();\n          },\n          context: this,\n          caption: qx.locale.Manager.tr('Unsaved changes'),\n          yesButtonLabel: qx.locale.Manager.tr('Save & close'),\n          noButtonLabel: qx.locale.Manager.tr('Discard & close'),\n          noButtonIcon: 'qxl.dialog.icon.delete',\n          useBlocker: true,\n          allowCancel: true\n        });\n\n        dialog.show();\n        return true;\n      }\n      return false;\n    },\n\n    closeFile(openFile, force) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return;\n        }\n      }\n      if (!openFile || !openFile.isCloseable()) {\n        return;\n      }\n      const file = openFile.getFile();\n\n      // check if this file is modified\n      if (!force && this.checkUnsavedChanged(openFile)) {\n        return;\n      }\n      if (openFile instanceof cv.ui.manager.model.OpenFile) {\n        openFile.resetPermanent();\n      }\n      const currentSelection = this._openFilesController.getSelection();\n      let selectionIndex = -1;\n      const openFiles = this.getOpenFiles();\n      if (currentSelection.length > 0 && currentSelection.getItem(0) === openFile) {\n        // we need to select another file after this one got closed\n        selectionIndex = openFiles.indexOf(openFile);\n      }\n      openFiles.remove(openFile);\n      const currentHandler = this._stack.getSelection()[0];\n      if (\n        qx.Class.hasInterface(currentHandler.constructor, cv.ui.manager.editor.IEditor) &&\n        !(currentHandler instanceof cv.ui.manager.Start)\n      ) {\n        // reset the handlers file\n        currentHandler.resetFile();\n      }\n      if (this.getOpenFiles().length === 0) {\n        this._stack.resetSelection();\n        this.__actionDispatcher.resetFocusedWidget();\n        this.__previewFileIndex = null;\n      }\n      if (selectionIndex > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(selectionIndex - 1));\n      } else if (selectionIndex === 0 && openFiles.length > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(0));\n      }\n\n      if (file instanceof cv.ui.manager.model.CompareFiles) {\n        const fileHandlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n\n        fileHandlerConf.instance.clear();\n        if (\n          openFiles.filter(function (openFile) {\n            return openFile.getFile() instanceof cv.ui.manager.model.CompareFiles;\n          }).length === 0\n        ) {\n          fileHandlerConf.instance.destroy();\n          fileHandlerConf.instance = null;\n        }\n      } else if (window.monaco && openFile.getHandlerId() === 'cv.ui.manager.editor.Source') {\n        // close textmodel in monaco editor if exists\n        const oldModel = window.monaco.editor.getModel(file.getUri());\n        if (oldModel) {\n          oldModel.dispose();\n        }\n      }\n    },\n\n    closeCurrentFile() {\n      const selected =\n        this._openFilesController.getSelection().length > 0\n          ? this._openFilesController.getSelection().getItem(0)\n          : null;\n      if (selected) {\n        this.closeFile(selected);\n      }\n    },\n\n    _onCloseFile(ev) {\n      this.closeFile(ev.getData());\n    },\n\n    __getRoot() {\n      if (!this.__root) {\n        this.__root = qx.dom.Element.create('div', {\n          id: 'manager',\n          style: 'position: absolute; top: 0; left: 0; right: 0; bottom: 0;'\n        });\n\n        qx.dom.Element.insertEnd(this.__root, document.body);\n        qx.theme.manager.Meta.getInstance().setTheme(cv.theme.Dark);\n      }\n      return this.__root;\n    },\n\n    __initCommands() {\n      const group = (this._managerCommands = new qx.ui.command.Group());\n      group.add('save', new qx.ui.command.Command('Ctrl+S'));\n      group.add('save-as', new qx.ui.command.Command('Ctrl+Shift+S'));\n      // this command will close the browser window, thats not what we want\n      // group.add('close', new qx.ui.command.Command('Ctrl+W'));\n      group.add('new-file', new qx.ui.command.Command('Ctrl+N'));\n      group.add('new-folder', new qx.ui.command.Command('Ctrl+Shift+N'));\n      group.add('quit', new qx.ui.command.Command('Ctrl+Q'));\n      // group.add('delete', new qx.ui.command.Command('Ctrl+Del'));\n\n      const renameCommand = new qx.ui.command.Command('F2');\n      group.add('rename', renameCommand);\n      this.bind('renameableSelection', renameCommand, 'enabled');\n\n      group.add('undo', new qx.ui.command.Command('Ctrl+Z'));\n      group.add('redo', new qx.ui.command.Command('Ctrl+Y'));\n\n      // edit commands (adding cut/copy/paste command will deactivate the native browser functions)\n      // and as we cannot simulate pasting from clipboard, we do not use them here\n      group.add('cut', new qx.ui.command.Command('Ctrl+X'));\n      group.add('copy', new qx.ui.command.Command('Ctrl+C'));\n      group.add('paste', new qx.ui.command.Command('Ctrl+V'));\n\n      group.add('help', new qx.ui.command.Command('F1'));\n\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      this._oldCommandGroup = manager.getActive();\n      manager.add(group);\n      manager.setActive(group);\n    },\n\n    _onDelete(file) {\n      const item = file || this.getCurrentSelection();\n      if (item) {\n        cv.ui.manager.control.FileController.getInstance().delete(item);\n      }\n    },\n\n    _onChangeStackSelection(ev) {\n      const selection = ev.getData();\n      const openFiles = [];\n      // sync tab selection with currently visible page\n      selection.forEach(function (page) {\n        const openFile = this.getOpenFiles()\n          .toArray()\n          .find(function (openFile) {\n            return openFile.getFile() === page.getFile() && openFile.getHandlerId() === page.classname;\n          });\n        if (openFile) {\n          openFiles.push(openFile);\n        }\n      }, this);\n\n      this._openFilesController.getSelection().replace(openFiles);\n    },\n\n    __getFileNamePrompt(message, callback, context, value, caption) {\n      const prompt = new cv.ui.manager.dialog.Prompt({\n        message: message,\n        callback: callback || null,\n        context: context || null,\n        value: value || null,\n        caption: caption || '',\n        filter: /[\\w\\d_\\-\\.\\s]/\n      });\n\n      prompt.show();\n      return prompt;\n    },\n\n    _onCreate(type, content, folder, handlerId, suggestedName) {\n      const currentFolder = folder || this.getCurrentFolder();\n      if (!currentFolder) {\n        return;\n      }\n      let message;\n      let existsMessage;\n      if (type === 'config') {\n        message = qx.locale.Manager.tr(\n          'Please enter the name of the new configuration (without \"visu_config_\" at the beginning and \".xml\" at the end)'\n        );\n\n        existsMessage = qx.locale.Manager.tr('A configuration with this name already exists.');\n      } else if (type === 'file') {\n        message = qx.locale.Manager.tr('Please enter the file name.');\n        existsMessage = qx.locale.Manager.tr('A file with this name already exists.');\n      } else {\n        message = qx.locale.Manager.tr('Please enter the folder name.');\n        existsMessage = qx.locale.Manager.tr('A folder with this name already exists.');\n      }\n      const handlePrompt = function (name) {\n        if (!name) {\n          // canceled\n          return;\n        }\n        let filename = name;\n        // add visu_config_..-xml\n        if (type === 'config') {\n          const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(name);\n          if (match) {\n            name = match[1];\n          }\n          filename = 'visu_config_' + name + '.xml';\n        }\n        // check if name does not exist\n        const exists = currentFolder.getChildren().some(function (child) {\n          return child.getName() === filename && child.getType() === type;\n        }, this);\n\n        if (exists) {\n          cv.ui.manager.snackbar.Controller.error(existsMessage);\n          this.__getFileNamePrompt(message, handlePrompt, this, name);\n        } else {\n          const item = new cv.ui.manager.model.FileItem(filename, currentFolder.getFullPath(), currentFolder);\n\n          item.set({\n            type: type === 'config' ? 'file' : type,\n            readable: true,\n            writeable: true,\n            loaded: true,\n            modified: true,\n            temporary: true,\n            parentFolder: currentFolder.getFullPath(),\n            content: content || ''\n          });\n\n          if (type === 'dir') {\n            // create directory directly\n            cv.io.rest.Client.getFsClient().createSync(\n              {\n                path: item.getFullPath(),\n                type: type\n              },\n\n              null,\n              function (err) {\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Folder has been created'));\n\n                  item.set({\n                    modified: false,\n                    temporary: false\n                  });\n\n                  qx.event.message.Bus.dispatchByName(item.getBusTopic(), {\n                    type: 'created',\n                    file: item,\n                    data: '',\n                    source: this\n                  });\n                }\n              },\n              this\n            );\n          }\n          currentFolder.addChild(item);\n          currentFolder.sortElements();\n          this._tree.refresh();\n          this._tree.setSelection(item);\n          // do not open new folders\n          if (type !== 'dir') {\n            // open the file in an editor\n            this.openFile(item, false, handlerId, 'edit');\n          }\n        }\n      };\n\n      this.__getFileNamePrompt(message, handlePrompt, this, suggestedName);\n    },\n\n    /**\n     * Finds next droppable parent of the given element. Maybe the element itself as well.\n     *\n     * Looks for the attribute <code>qxDroppable</code> with the value <code>on</code>.\n     *\n     * @param elem {Element} The element to query\n     * @return {Element} The next parent element which is droppable. May also be <code>null</code>\n     */\n    __findDroppable(elem) {\n      while (elem && elem.nodeType === 1) {\n        if (elem.getAttribute('qxDroppable') === 'on') {\n          return elem;\n        }\n\n        elem = elem.parentNode;\n      }\n\n      return null;\n    },\n\n    // overridden\n    _draw() {\n      const domRoot = this.__getRoot();\n      const root = new qx.ui.root.Inline(domRoot, true, true);\n      this.bind('visible', root, 'visibility', {\n        converter(visible) {\n          return visible ? 'visible' : 'excluded';\n        }\n      });\n\n      root.addListenerOnce('appear', () => {\n        // disable file drop\n        const element = root.getContentElement().getDomElement();\n        element.addEventListener(\n          'drop',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n\n        element.addEventListener(\n          'dragover',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n      });\n      qx.core.Init.getApplication().setRoot(root);\n      root.setLayout(new qx.ui.layout.Canvas());\n\n      const snackbar = cv.ui.manager.snackbar.Controller.getInstance();\n      root.add(snackbar, {\n        bottom: 10,\n        left: 200\n      });\n\n      /**\n       *\n       */\n      function resize() {\n        const bounds = root.getBounds();\n        snackbar.setLayoutProperties({\n          bottom: 10,\n          left: Math.round(bounds.width / 2) - 150\n        });\n\n        snackbar.setMaxHeight(bounds.height - 40);\n      }\n      root.addListener('resize', resize, this);\n      root.addListener('appear', resize, this);\n      window.addEventListener('resize', function () {\n        // sync window height with manager height\n        domRoot.style.height = window.innerHeight + 'px';\n      });\n\n      const main = new qx.ui.container.Composite(new qx.ui.layout.Dock());\n      root.add(main, { edge: 0 });\n      // menu on top\n      const menuBar = cv.ui.manager.MenuBar.getInstance();\n      main.add(menuBar, { edge: 'north' });\n\n      const uploadButton = menuBar.getButton('upload');\n      const uploadManager = new cv.ui.manager.upload.UploadMgr(uploadButton);\n      this.bind('currentFolder', uploadManager, 'folder');\n\n      this._pane = new qx.ui.splitpane.Pane();\n      main.add(this._pane, { edge: 'center' });\n\n      const rootFolder = (cv.ui.manager.model.FileItem.ROOT = new cv.ui.manager.model.FileItem('.'));\n      const fakeIconFile = cv.ui.manager.model.FileItem.getIconFile();\n      // TODO: needs to be verified by the backend\n      rootFolder.set({\n        overrideIcon: true,\n        writeable: true,\n        readable: true,\n        open: true,\n        fakeChildren: [fakeIconFile],\n        icon: cv.theme.dark.Images.getIcon('home', 18)\n      });\n\n      this.setCurrentFolder(rootFolder);\n      this._tree = new cv.ui.manager.tree.FileSystem(rootFolder);\n      this._tree.addListener('changeSelection', this._onChangeTreeSelection, this);\n\n      // left container\n      const leftContainer = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // left toolbar\n      const leftBar = new cv.ui.manager.ToolBar(uploadManager);\n      this.bind('currentFolder', leftBar, 'folder');\n      this.bind('currentSelection', leftBar, 'file');\n      leftBar.addListener('reload', this._tree.reload, this._tree);\n\n      // globally bind writeable folder to command for new files\n      const buttonConfig = menuBar.getButtonConfiguration();\n      this.bind('writeableFolder', buttonConfig['new-file'].args[2], 'enabled');\n      this.bind('writeableFolder', buttonConfig['new-folder'].args[2], 'enabled');\n\n      // this.bind('deleteableSelection', buttonConfig['delete'].args[2], 'enabled');\n\n      leftContainer.add(leftBar);\n      leftContainer.add(this._tree, { flex: 1 });\n      this._pane.add(leftContainer, 0);\n      cv.ui.manager.model.Preferences.getInstance().bind('expertMode', leftContainer, 'visibility', {\n        converter(value) {\n          return value ? 'visible' : 'excluded';\n        }\n      });\n\n      this._mainContent = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // tab list\n      const list = new qx.ui.form.List(true);\n      list.setAppearance('open-files-tabs');\n      this._openFilesController = new qx.data.controller.List(this.getOpenFiles(), list, 'file.name');\n\n      this._openFilesController.setDelegate({\n        createItem: function () {\n          const item = new cv.ui.manager.form.FileTabItem();\n          item.addListener('close', this._onCloseFile, this);\n          return item;\n        }.bind(this),\n\n        bindItem(controller, item, index) {\n          controller.bindDefaultProperties(item, index);\n          controller.bindProperty('file.permanent', 'permanent', null, item, index);\n\n          controller.bindProperty('file.modified', 'modified', null, item, index);\n\n          controller.bindProperty('icon', 'icon', null, item, index);\n          controller.bindProperty('closeable', 'closeable', null, item, index);\n        }\n      });\n\n      list.addListener('changeSelection', this._onChangeFileSelection, this);\n      this._mainContent.add(list);\n\n      this._stack = new qx.ui.container.Stack();\n      this._stack.addListener('changeSelection', this._onChangeStackSelection, this);\n\n      this._mainContent.add(this._stack, { flex: 1 });\n      this._pane.add(this._mainContent, 1);\n\n      const startOpenFile = new cv.ui.manager.model.OpenFile(rootFolder, 'cv.ui.manager.Start');\n\n      startOpenFile.setCloseable(false);\n      this.getOpenFiles().push(startOpenFile);\n      list.setModelSelection([startOpenFile]);\n    },\n\n    _showAbout() {\n      const app = qx.core.Init.getApplication();\n      const dialogConf = {\n        caption: qx.locale.Manager.tr('About'),\n        modal: true,\n        minWidth: Math.min(500, qx.bom.Viewport.getWidth()),\n        maxHeight: qx.bom.Viewport.getHeight(),\n        message: `\n<div class=\"about-cv\">\n <img src=\"resource/icons/comet_icon_128x128_ff8000.png\" width=\"128\" height=\"128\"/>\n <h2>CometVisu ${cv.Version.VERSION}</h2>\n <div class=\"info\">\n   <label for=\"date\">${qx.locale.Manager.tr('Build date')}: </label>\n   <span id=\"date\">${cv.Version.DATE}</span><br/>\n   <label for=\"build\">${qx.locale.Manager.tr('Build revision')}: </label>\n   <span id=\"build\">${cv.Version.REV}</span><br/>\n   <label for=\"lib-version\">${qx.locale.Manager.tr('Library version')}: </label>\n   <span id=\"lib-version\">Pure: ${cv.Version.LIBRARY_VERSION_PURE}, Tile: ${cv.Version.LIBRARY_VERSION_TILE}</span><br/>\n   <label for=\"server\">${qx.locale.Manager.tr('Server')}: </label>\n   <span id=\"server\">${app.getServer() || '?'}</span><br/>\n   <label for=\"php-version\">${qx.locale.Manager.tr('PHP version') || '?'}: </label>\n   <span id=\"php-version\">${app.getServerPhpVersion()}</span>\n </div>\n</div>`\n      };\n\n      new cv.ui.manager.dialog.BigAlert(dialogConf).show();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_pane', '_tree', '_stack', '_mainContent', '_openFilesController');\n\n    // restore former command group\n    const application = qx.core.Init.getApplication();\n    const manager = application.getCommandManager();\n    manager.setActive(this._oldCommandGroup);\n    this._oldCommandGroup = null;\n\n    // defer the reset to let the dispose queue to be emptied before removing the root\n    new qx.util.DeferredCall(function () {\n      application.resetRoot();\n    }).schedule();\n\n    document.body.removeChild(this.__root);\n    this.__root = null;\n    this.__actionDispatcher = null;\n\n    qx.event.message.Bus.unsubscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // destroy the singleton instance\n    delete cv.ui.manager.Main.$$instance;\n  }\n});\n"
  ],
  "mappings": "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"
}