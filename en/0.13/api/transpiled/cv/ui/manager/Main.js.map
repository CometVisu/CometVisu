{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "include",
    "cv",
    "ui",
    "manager",
    "control",
    "MFileEventHandler",
    "implement",
    "IActionHandler",
    "IFileEventHandler",
    "construct",
    "_this",
    "constructor",
    "call",
    "model",
    "BackupFolder",
    "getInstance",
    "_checkEnvironment",
    "initOpenFiles",
    "data",
    "Array",
    "__actionDispatcher",
    "ActionDispatcher",
    "setMain",
    "__initCommands",
    "_draw",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_onManagerEvent",
    "_initAuth",
    "tooltip",
    "Manager",
    "window",
    "addEventListener",
    "_onBeforeUnload",
    "statics",
    "ROOT",
    "properties",
    "openFiles",
    "check",
    "deferredInit",
    "writeableFolder",
    "init",
    "currentFolder",
    "nullable",
    "apply",
    "currentSelection",
    "deleteableSelection",
    "renameableSelection",
    "visible",
    "members",
    "__previewFileIndex",
    "__root",
    "_pane",
    "_tree",
    "_stack",
    "_oldCommandGroup",
    "_managerCommands",
    "_mainContent",
    "_openFilesController",
    "_hiddenConfigFakeFile",
    "_applyVisible",
    "value",
    "Init",
    "getApplication",
    "getCommandManager",
    "setActive",
    "bom",
    "element",
    "Style",
    "set",
    "__getRoot",
    "io",
    "rest",
    "Client",
    "getFsClient",
    "checkEnvironmentSync",
    "err",
    "res",
    "snackbar",
    "Controller",
    "error",
    "forEach",
    "env",
    "refreshActions",
    "entity",
    "state",
    "locale",
    "tr",
    "FileItem",
    "setReadable",
    "setWriteable",
    "widget",
    "getFocusedWidget",
    "resetFocusedWidget",
    "setFocusedWidget",
    "canHandleAction",
    "actionName",
    "getCurrentSelection",
    "isWriteable",
    "actions",
    "getCurrentFolder",
    "push",
    "includes",
    "_doClose",
    "document",
    "querySelector",
    "configLoader",
    "util",
    "ConfigLoader",
    "app",
    "load",
    "bootstrap",
    "setVisible",
    "handleAction",
    "unsavedFiles",
    "closeCurrentFile",
    "closeFile",
    "getOpenFiles",
    "filter",
    "openFile",
    "getFile",
    "isModified",
    "length",
    "dialog",
    "qxl",
    "Confirm",
    "callback",
    "confirmed",
    "save",
    "dispose",
    "context",
    "caption",
    "yesButtonLabel",
    "noButtonLabel",
    "useBlocker",
    "show",
    "_onCreate",
    "readSync",
    "path",
    "file",
    "getFullPath",
    "isConfigFile",
    "converter",
    "ConfigUpgrader",
    "_converter$convertPur",
    "convertPureToTile",
    "_converter$convertPur2",
    "_slicedToArray",
    "convertedContent",
    "suggestedName",
    "match",
    "exec",
    "getName",
    "_onDelete",
    "_showAbout",
    "warn",
    "ev",
    "preventDefault",
    "returnValue",
    "configureButton",
    "button",
    "unConfigureButton",
    "_handleFileEvent",
    "getData",
    "action",
    "copy",
    "some",
    "isRelated",
    "resetCurrentFolder",
    "refresh",
    "AUTH_REQUIRED",
    "isServedByOpenhab",
    "backend",
    "BackendConnections",
    "getClientByType",
    "canAuthorize",
    "storedToken",
    "sessionStorage",
    "getItem",
    "addBackendClient",
    "undefined",
    "login",
    "username",
    "_handleUnauthorized",
    "removeItem",
    "loginWidget",
    "Dialog",
    "prompt",
    "promise",
    "then",
    "token",
    "setItem",
    "__findConfigFile",
    "name",
    "demoFolder",
    "getChildren",
    "child",
    "startsWith",
    "substr",
    "handler",
    "handlerOptions",
    "_onChangeTreeSelection",
    "Preferences",
    "isQuickPreview",
    "mode",
    "__openSelectedFile",
    "node",
    "getType",
    "setCurrentFolder",
    "getParent",
    "setCurrentSelection",
    "resetCurrentSelection",
    "setEditing",
    "_applyCurrentFolder",
    "old",
    "removeRelatedBindings",
    "bind",
    "resetWriteableFolder",
    "_applyCurrentSelection",
    "resetDeleteableSelection",
    "_onChangeFileSelection",
    "sel",
    "getSelection",
    "editorConfig",
    "handlerId",
    "getHandlerId",
    "FileHandlerRegistry",
    "getFileHandlerById",
    "getFileHandler",
    "instance",
    "Clazz",
    "editor",
    "AbstractEditor",
    "addListener",
    "setFile",
    "indexOf",
    "add",
    "setHandlerOptions",
    "getHandlerOptions",
    "setSelection",
    "GlobalState",
    "setOpenedFocusedFile",
    "resetOpenedFocusedFile",
    "preview",
    "handlerType",
    "handlerConf",
    "info",
    "classname",
    "isExternal",
    "isOpen",
    "of",
    "OpenFile",
    "resetHandlerOptions",
    "isPermanent",
    "setPermanent",
    "getTarget",
    "setModelSelection",
    "checkUnsavedChanged",
    "_this2",
    "found",
    "f",
    "isTemporary",
    "resetModified",
    "dispatchByName",
    "noButtonIcon",
    "allowCancel",
    "force",
    "isCloseable",
    "resetPermanent",
    "selectionIndex",
    "remove",
    "currentHandler",
    "hasInterface",
    "IEditor",
    "Start",
    "resetFile",
    "resetSelection",
    "replace",
    "CompareFiles",
    "fileHandlerConf",
    "clear",
    "destroy",
    "monaco",
    "oldModel",
    "getModel",
    "getUri",
    "selected",
    "_onCloseFile",
    "dom",
    "Element",
    "create",
    "id",
    "style",
    "insertEnd",
    "body",
    "theme",
    "Meta",
    "setTheme",
    "Dark",
    "group",
    "command",
    "Group",
    "Command",
    "renameCommand",
    "getActive",
    "item",
    "FileController",
    "_onChangeStackSelection",
    "selection",
    "page",
    "toArray",
    "find",
    "__getFileNamePrompt",
    "Prompt",
    "content",
    "folder",
    "existsMessage",
    "handlePrompt",
    "filename",
    "exists",
    "readable",
    "writeable",
    "loaded",
    "modified",
    "temporary",
    "parentFolder",
    "createSync",
    "getBusTopic",
    "source",
    "addChild",
    "sortElements",
    "__findDroppable",
    "elem",
    "nodeType",
    "getAttribute",
    "parentNode",
    "_this3",
    "domRoot",
    "root",
    "Inline",
    "addListenerOnce",
    "getContentElement",
    "getDomElement",
    "target",
    "setRoot",
    "setLayout",
    "layout",
    "Canvas",
    "bottom",
    "left",
    "resize",
    "bounds",
    "getBounds",
    "setLayoutProperties",
    "Math",
    "round",
    "width",
    "setMaxHeight",
    "height",
    "innerHeight",
    "main",
    "container",
    "Composite",
    "Dock",
    "edge",
    "menuBar",
    "MenuBar",
    "uploadButton",
    "getButton",
    "uploadManager",
    "upload",
    "UploadMgr",
    "splitpane",
    "Pane",
    "rootFolder",
    "fakeIconFile",
    "getIconFile",
    "overrideIcon",
    "open",
    "fakeChildren",
    "icon",
    "dark",
    "Images",
    "getIcon",
    "tree",
    "FileSystem",
    "leftContainer",
    "VBox",
    "leftBar",
    "ToolBar",
    "reload",
    "buttonConfig",
    "getButtonConfiguration",
    "args",
    "flex",
    "list",
    "form",
    "List",
    "setAppearance",
    "controller",
    "setDelegate",
    "createItem",
    "FileTabItem",
    "bindItem",
    "index",
    "bindDefaultProperties",
    "bindProperty",
    "Stack",
    "startOpenFile",
    "setCloseable",
    "dialogConf",
    "modal",
    "minWidth",
    "min",
    "Viewport",
    "getWidth",
    "maxHeight",
    "getHeight",
    "concat",
    "Version",
    "VERSION",
    "DATE",
    "REV",
    "LIBRARY_VERSION_PURE",
    "LIBRARY_VERSION_TILE",
    "getServer",
    "getServerPhpVersion",
    "BigAlert",
    "destruct",
    "_disposeObjects",
    "application",
    "DeferredCall",
    "resetRoot",
    "schedule",
    "removeChild",
    "unsubscribe",
    "Main",
    "$$instance"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/Main.js"
  ],
  "sourcesContent": [
    "/* Main.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Main class of the CometVisu file manager.\n * @author Tobias BrÃ¤utigam\n * @since 0.12.0\n *\n * @asset(manager/*)\n * @ignore(sessionStorage)\n */\nqx.Class.define('cv.ui.manager.Main', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  include: [cv.ui.manager.control.MFileEventHandler],\n\n  implement: [cv.ui.manager.IActionHandler, cv.ui.manager.control.IFileEventHandler],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    cv.ui.manager.model.BackupFolder.getInstance();\n    this._checkEnvironment();\n    this.initOpenFiles(new qx.data.Array());\n    this.__actionDispatcher = cv.ui.manager.control.ActionDispatcher.getInstance();\n    this.__actionDispatcher.setMain(this);\n\n    this.__initCommands();\n\n    this._draw();\n    qx.event.message.Bus.subscribe('cv.manager.*', this._onManagerEvent, this);\n\n    this._initAuth();\n\n    // Initialize tooltip manager\n    qx.ui.tooltip.Manager.getInstance();\n\n    //qx.event.Registration.addListener(window, 'beforeunload', this._onBeforeUnload, this);\n    window.addEventListener('beforeunload', event => {\n      this._onBeforeUnload(event);\n    });\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ROOT: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    openFiles: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    /**\n     * Current selected folder (if a file is selected its parent folder) is writeable.\n     */\n    writeableFolder: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeWriteableFolder'\n    },\n\n    currentFolder: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentFolder',\n      event: 'changeCurrentFolder'\n    },\n\n    currentSelection: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentSelection',\n      event: 'changeCurrentSelection'\n    },\n\n    deleteableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeDeleteableSelection'\n    },\n\n    renameableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeRenameableSelection'\n    },\n\n    visible: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeVisible',\n      apply: '_applyVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __previewFileIndex: null,\n    __root: null,\n    _pane: null,\n    _tree: null,\n    _stack: null,\n    _oldCommandGroup: null,\n    _managerCommands: null,\n    _mainContent: null,\n    _openFilesController: null,\n    _hiddenConfigFakeFile: null,\n    __actionDispatcher: null,\n\n    _applyVisible(value) {\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      if (value) {\n        manager.setActive(this._managerCommands);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'block');\n      } else {\n        manager.setActive(this._oldCommandGroup);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'none');\n      }\n    },\n\n    _checkEnvironment() {\n      cv.io.rest.Client.getFsClient().checkEnvironmentSync(function (err, res) {\n        if (err) {\n          cv.ui.manager.snackbar.Controller.error(err);\n        } else if (res) {\n          res.forEach(function (env) {\n            let refreshActions = false;\n            switch (env.entity) {\n              case '.':\n                // config folder must be writeable\n                if ((env.state & 1) === 0) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder does not exists'));\n                } else if ((env.state & 2) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setReadable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not readable'));\n                } else if ((env.state & 4) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setWriteable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not writeable'));\n                }\n                if (refreshActions) {\n                  const widget = this.__actionDispatcher.getFocusedWidget();\n                  this.__actionDispatcher.resetFocusedWidget();\n                  this.__actionDispatcher.setFocusedWidget(widget);\n                }\n                break;\n\n              case 'backup':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('backup folder is not writeable'));\n                }\n                break;\n\n              case 'media':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('media folder is not writeable'));\n                }\n                break;\n\n              case 'hidden.php':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(\n                    qx.locale.Manager.tr('Hidden configuration file (hidden.php) not writeable')\n                  );\n                }\n                break;\n            }\n          }, this);\n        }\n      }, this);\n    },\n\n    canHandleAction(actionName) {\n      if (actionName === 'delete' && this.getCurrentSelection() && !this.getCurrentSelection().isWriteable()) {\n        // needs a writeable file\n        return false;\n      }\n      let actions = ['close', 'quit', 'about'];\n      const currentFolder = this.getCurrentFolder();\n      if (currentFolder.isWriteable()) {\n        actions.push('new-file');\n        actions.push('new-folder');\n        actions.push('delete');\n        actions.push('upload');\n        actions.push('clone');\n        actions.push('convertToTile');\n      }\n      if (cv.ui.manager.model.FileItem.ROOT.isWriteable()) {\n        actions.push('new-config-file');\n      }\n      return actions.includes(actionName);\n    },\n\n    _doClose() {\n      if (document.querySelector('#main.loading')) {\n        // there is no config file loaded, load the default one\n        let configLoader = new cv.util.ConfigLoader();\n        let app = qx.core.Init.getApplication();\n        configLoader.load(app.bootstrap, app);\n      }\n      this.setVisible(false);\n    },\n\n    handleAction(actionName, data) {\n      let unsavedFiles;\n      switch (actionName) {\n        case 'close':\n          if (!data) {\n            this.closeCurrentFile();\n          } else {\n            this.closeFile(data);\n          }\n          break;\n\n        case 'quit':\n          unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n          if (unsavedFiles.length > 0) {\n            const dialog = new qxl.dialog.Confirm({\n              message: qx.locale.Manager.tr('You have files opened with unsaved changes, you should save them now.'),\n\n              callback(confirmed) {\n                if (confirmed) {\n                  unsavedFiles.forEach(openFile => {\n                    openFile.save();\n                  });\n                }\n                dialog.dispose();\n                this._doClose();\n              },\n              context: this,\n              caption: qx.locale.Manager.tr('Unsaved changes'),\n              yesButtonLabel: qx.locale.Manager.tr('Save & quit'),\n              noButtonLabel: qx.locale.Manager.tr('Quit without saving'),\n              useBlocker: true\n            });\n\n            dialog.show();\n          } else {\n            this._doClose();\n          }\n          break;\n\n        case 'new-file':\n          this._onCreate('file', null, data);\n          break;\n\n        case 'new-config-file':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: 'demo/templates/visu_config.xml' },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load config template'));\n              } else {\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'clone':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                // config files need to be cloned in the root folder\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              } else {\n                this._onCreate('file', res);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'convertToTile':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                const converter = new cv.util.ConfigUpgrader();\n                const [err, convertedContent] = converter.convertPureToTile(res);\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  let suggestedName = 'tile';\n                  const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(data.file.getName());\n\n                  if (match) {\n                    suggestedName = 'tile-' + match[1];\n                  }\n                  // config files need to be cloned in the root folder\n                  this._onCreate(\n                    'config',\n                    convertedContent,\n                    cv.ui.manager.model.FileItem.ROOT,\n                    'cv.ui.manager.editor.Source',\n                    suggestedName\n                  );\n                }\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'new-folder':\n          this._onCreate('dir', null, data);\n          break;\n\n        case 'delete':\n          this._onDelete(data);\n          break;\n\n        case 'upload':\n          // nothing to to, this is handled in another way\n          break;\n\n        case 'about':\n          this._showAbout();\n          break;\n\n        default:\n          this.warn(actionName + ' handling is not implemented yet!');\n          break;\n      }\n    },\n\n    _onBeforeUnload(ev) {\n      const unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n      if (unsavedFiles.length > 0) {\n        ev.preventDefault();\n        ev.returnValue = '';\n      } else {\n        delete ev['returnValue'];\n      }\n    },\n\n    configureButton(button) {},\n    unConfigureButton(button) {},\n\n    _handleFileEvent(ev) {\n      const data = ev.getData();\n      if (data.action === 'deleted') {\n        // check if file is currently opened and close it\n        const openFiles = this.getOpenFiles().copy();\n        openFiles.some(function (openFile) {\n          if (openFile.getFile().isRelated(data.path)) {\n            this.closeFile(openFile);\n          }\n          return false;\n        }, this);\n        if (this.getCurrentFolder() && this.getCurrentFolder().getFullPath() === data.path) {\n          this.resetCurrentFolder();\n        }\n      } else {\n        this.warn('unhandled file event', data.action);\n      }\n      this._tree.refresh();\n    },\n\n    _initAuth() {\n      if (cv.io.rest.Client.AUTH_REQUIRED && qx.core.Init.getApplication().isServedByOpenhab()) {\n        let backend = cv.io.BackendConnections.getClientByType('openhab');\n        if (backend && backend.canAuthorize()) {\n          // already logged in\n          return;\n        }\n        const storedToken = sessionStorage.getItem('openhab.cv:token');\n        if (storedToken) {\n          if (!backend) {\n            backend = cv.io.BackendConnections.addBackendClient('openhab', 'openhab', undefined, 'manager');\n          }\n          backend.login(true, { username: storedToken });\n        } else {\n          this._handleUnauthorized();\n        }\n      }\n    },\n\n    _handleUnauthorized() {\n      if (cv.io.rest.Client.AUTH_REQUIRED && qx.core.Init.getApplication().isServedByOpenhab()) {\n        const storedToken = sessionStorage.getItem('openhab.cv:token');\n        if (storedToken) {\n          // remove old token, because it does not work anymore\n          sessionStorage.removeItem('openhab.cv:token');\n        }\n        let loginWidget = qxl.dialog.Dialog.prompt(qx.locale.Manager.tr('Please provide an openHAB API token. It can be generated in openHABs main UI.')).set({\n          caption: qx.locale.Manager.tr('Provide API token')\n        });\n        loginWidget.promise().then(token => {\n          if (token) {\n            sessionStorage.setItem('openhab.cv:token', token);\n            let backend = cv.io.BackendConnections.getClientByType('openhab');\n            if (!backend) {\n              backend = cv.io.BackendConnections.addBackendClient('openhab', 'openhab', undefined, 'manager');\n            }\n            backend.login(true, { username: token });\n          }\n        });\n        loginWidget.show();\n      }\n    },\n\n    __findConfigFile(name) {\n      let file = null;\n      let demoFolder = null;\n      cv.ui.manager.model.FileItem.ROOT.getChildren().some(child => {\n        if (child.getName() === 'demo') {\n          demoFolder = child;\n        } else if (child.getName() === name) {\n          file = child;\n          return true;\n        }\n        return false;\n      });\n      if (!file && demoFolder) {\n        if (name.startsWith('demo/')) {\n          name = name.substr(5);\n        }\n        // check demo configs\n        demoFolder.getChildren().some(child => {\n          if (child.getName() === name) {\n            file = child;\n            return true;\n          }\n          return false;\n        });\n      }\n      return file;\n    },\n\n    _onManagerEvent(ev) {\n      let data = ev.getData();\n      switch (ev.getName()) {\n        case 'cv.manager.compareFiles':\n          this.openFile(data, false);\n          break;\n\n        case 'cv.manager.openWith':\n          if (typeof data.file === 'string') {\n            // this can only by a file in the root dir (a config)\n            data.file = this.__findConfigFile(data.file);\n          }\n          this.openFile(data.file || this.getCurrentSelection(), false, data.handler, null, data.handlerOptions);\n\n          break;\n\n        case 'cv.manager.open':\n          if (typeof data === 'string') {\n            // this can only by a file in the root dir (a config)\n            data = this.__findConfigFile(data);\n          }\n          this.openFile(data || this.getCurrentSelection(), false);\n          break;\n      }\n    },\n\n    /**\n     * open selected file in preview mode\n     * @param ev\n     * @private\n     */\n    _onChangeTreeSelection(ev) {\n      const data = ev.getData();\n      if (\n        (cv.ui.manager.model.Preferences.getInstance().isQuickPreview() && data.mode === 'tap') ||\n        data.mode === 'dbltap'\n      ) {\n        this.__openSelectedFile(data.node, data.mode);\n      }\n      const node = data.node;\n      if (node) {\n        if (data.node.getType() === 'file') {\n          this.setCurrentFolder(data.node.getParent());\n        } else {\n          this.setCurrentFolder(node);\n        }\n        this.setCurrentSelection(node);\n      } else {\n        this.resetCurrentFolder();\n        this.resetCurrentSelection();\n      }\n    },\n\n    __openSelectedFile(node, mode) {\n      if (node) {\n        if (node.getType() === 'file') {\n          this.openFile(node, mode === 'tap');\n        } else if (mode === 'dbltap') {\n          // edit folder name on dbltap\n          node.setEditing(true);\n        }\n      }\n    },\n\n    _applyCurrentFolder(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'writeableFolder');\n      } else {\n        this.resetWriteableFolder();\n      }\n    },\n\n    _applyCurrentSelection(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'deleteableSelection');\n        value.bind('inTrash', this, 'renameableSelection', {\n          converter(value) {\n            return !value;\n          }\n        });\n      } else {\n        this.resetDeleteableSelection();\n      }\n    },\n\n    _onChangeFileSelection() {\n      const sel = this._openFilesController.getSelection();\n      if (sel.length > 0) {\n        const openFile = sel.getItem(0);\n        const file = openFile.getFile();\n        let editorConfig;\n        const handlerId = openFile.getHandlerId();\n        if (handlerId) {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n        } else {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n        }\n        if (!editorConfig.instance) {\n          editorConfig.instance = new editorConfig.Clazz();\n          if (editorConfig.instance instanceof cv.ui.manager.editor.AbstractEditor) {\n            editorConfig.instance.addListener('unauthorized', this._handleUnauthorized, this);\n          }\n        }\n        editorConfig.instance.setFile(file);\n        if (this._stack.indexOf(editorConfig.instance) < 0) {\n          this._stack.add(editorConfig.instance);\n        }\n        if (editorConfig.instance instanceof cv.ui.manager.editor.AbstractEditor) {\n          editorConfig.instance.setHandlerOptions(openFile.getHandlerOptions());\n        }\n        this._stack.setSelection([editorConfig.instance]);\n        this.__actionDispatcher.setFocusedWidget(editorConfig.instance);\n\n        cv.ui.manager.core.GlobalState.getInstance().setOpenedFocusedFile(file);\n      } else {\n        cv.ui.manager.core.GlobalState.getInstance().resetOpenedFocusedFile();\n      }\n    },\n\n    /**\n     * @param file {cv.ui.manager.model.FileItem} the file to open\n     * @param preview {Boolean} open the file in preview mode\n     * @param handlerId {String} use this handler to open the file (classname as string)\n     * @param handlerType {String} use a special handler type, e.g. 'edit' if you want to open the file with an editor and not a viewer\n     * @param handlerOptions\n     */\n    openFile(file, preview, handlerId, handlerType, handlerOptions) {\n      const openFiles = this.getOpenFiles();\n      let openFile;\n      let handlerConf;\n      if (!handlerId) {\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file, handlerType);\n\n        if (!handlerConf) {\n          // no handler\n          cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Cannot open file: \"%1\"', file.getName()));\n\n          return;\n        }\n        handlerId = handlerConf.Clazz.classname;\n      } else {\n        // check if this handler opens the file in a external frame that is not connected to the manager\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n\n        if (!handlerConf.instance) {\n          handlerConf.instance = new handlerConf.Clazz();\n        }\n        if (handlerConf.instance.isExternal()) {\n          handlerConf.instance.setFile(file);\n          return;\n        }\n      }\n      const isOpen = openFiles.some(function (of) {\n        if (of.getFile() === file && handlerId === of.getHandlerId()) {\n          openFile = of;\n          return true;\n        }\n        return false;\n      });\n      if (!openFile) {\n        openFile = new cv.ui.manager.model.OpenFile(file, handlerId);\n      }\n      if (handlerOptions) {\n        openFile.setHandlerOptions(handlerOptions);\n      } else {\n        openFile.resetHandlerOptions();\n      }\n      if (preview === true) {\n        if (!openFile.isPermanent()) {\n          if (\n            this.__previewFileIndex !== null &&\n            openFiles.getItem(this.__previewFileIndex) &&\n            !openFiles.getItem(this.__previewFileIndex).isPermanent()\n          ) {\n            openFiles.setItem(this.__previewFileIndex, openFile);\n          } else {\n            this.__previewFileIndex = openFiles.length;\n            openFiles.push(openFile);\n          }\n          // do not 'downgrade' the permanent state\n          openFile.setPermanent(false);\n        }\n      } else {\n        if (!isOpen && (this.__previewFileIndex === null || openFiles.indexOf(openFile) !== this.__previewFileIndex)) {\n          openFiles.push(openFile);\n        }\n        openFile.setPermanent(true);\n        this.__previewFileIndex = null;\n      }\n      this._openFilesController.getTarget().setModelSelection([openFile]);\n    },\n\n    /**\n     * Opens a confirm dialog on how to treat the unsaved changes in the file if it has been modified and not saved.\n     * @param openFile {cv.ui.manager.model.OpenFile|cv.ui.manager.model.FileItem} file to check\n     * @return {boolean} true if the confirm dialog has been shown\n     */\n    checkUnsavedChanged(openFile) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return false;\n        }\n      }\n      const file = openFile.getFile();\n      if (file.isModified()) {\n        // check if temporary\n        let message = qx.locale.Manager.tr(\n          'This file has unsaved changes that will be lost when you close it without saving.'\n        );\n\n        if (file.isTemporary()) {\n          message = qx.locale.Manager.tr(\n            'This file has not been saved on the backend yet. It will be lost when you close it without saving.'\n          );\n        }\n        const dialog = new qxl.dialog.Confirm({\n          message: message,\n          callback: confirmed => {\n            if (confirmed === true) {\n              openFile.save();\n              this.closeFile(openFile, true);\n            } else if (confirmed === false) {\n              file.resetModified();\n              if (file.isTemporary()) {\n                qx.event.message.Bus.dispatchByName('cv.manager.file', {\n                  action: 'deleted',\n                  path: file.getFullPath()\n                });\n              }\n              this.closeFile(openFile, true);\n            } else {\n              // cancel closing, do nothing\n            }\n            dialog.dispose();\n          },\n          context: this,\n          caption: qx.locale.Manager.tr('Unsaved changes'),\n          yesButtonLabel: qx.locale.Manager.tr('Save & close'),\n          noButtonLabel: qx.locale.Manager.tr('Discard & close'),\n          noButtonIcon: 'qxl.dialog.icon.delete',\n          useBlocker: true,\n          allowCancel: true\n        });\n\n        dialog.show();\n        return true;\n      }\n      return false;\n    },\n\n    closeFile(openFile, force) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return;\n        }\n      }\n      if (!openFile || !openFile.isCloseable()) {\n        return;\n      }\n      const file = openFile.getFile();\n\n      // check if this file is modified\n      if (!force && this.checkUnsavedChanged(openFile)) {\n        return;\n      }\n      if (openFile instanceof cv.ui.manager.model.OpenFile) {\n        openFile.resetPermanent();\n      }\n      const currentSelection = this._openFilesController.getSelection();\n      let selectionIndex = -1;\n      const openFiles = this.getOpenFiles();\n      if (currentSelection.length > 0 && currentSelection.getItem(0) === openFile) {\n        // we need to select another file after this one got closed\n        selectionIndex = openFiles.indexOf(openFile);\n      }\n      openFiles.remove(openFile);\n      const currentHandler = this._stack.getSelection()[0];\n      if (\n        qx.Class.hasInterface(currentHandler.constructor, cv.ui.manager.editor.IEditor) &&\n        !(currentHandler instanceof cv.ui.manager.Start)\n      ) {\n        // reset the handlers file\n        currentHandler.resetFile();\n      }\n      if (this.getOpenFiles().length === 0) {\n        this._stack.resetSelection();\n        this.__actionDispatcher.resetFocusedWidget();\n        this.__previewFileIndex = null;\n      }\n      if (selectionIndex > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(selectionIndex - 1));\n      } else if (selectionIndex === 0 && openFiles.length > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(0));\n      }\n\n      if (file instanceof cv.ui.manager.model.CompareFiles) {\n        const fileHandlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n\n        fileHandlerConf.instance.clear();\n        if (\n          openFiles.filter(function (openFile) {\n            return openFile.getFile() instanceof cv.ui.manager.model.CompareFiles;\n          }).length === 0\n        ) {\n          fileHandlerConf.instance.destroy();\n          fileHandlerConf.instance = null;\n        }\n      } else if (window.monaco && openFile.getHandlerId() === 'cv.ui.manager.editor.Source') {\n        // close textmodel in monaco editor if exists\n        const oldModel = window.monaco.editor.getModel(file.getUri());\n        if (oldModel) {\n          oldModel.dispose();\n        }\n      }\n    },\n\n    closeCurrentFile() {\n      const selected =\n        this._openFilesController.getSelection().length > 0\n          ? this._openFilesController.getSelection().getItem(0)\n          : null;\n      if (selected) {\n        this.closeFile(selected);\n      }\n    },\n\n    _onCloseFile(ev) {\n      this.closeFile(ev.getData());\n    },\n\n    __getRoot() {\n      if (!this.__root) {\n        this.__root = qx.dom.Element.create('div', {\n          id: 'manager',\n          style: 'position: absolute; top: 0; left: 0; right: 0; bottom: 0;'\n        });\n\n        qx.dom.Element.insertEnd(this.__root, document.body);\n        qx.theme.manager.Meta.getInstance().setTheme(cv.theme.Dark);\n      }\n      return this.__root;\n    },\n\n    __initCommands() {\n      const group = (this._managerCommands = new qx.ui.command.Group());\n      group.add('save', new qx.ui.command.Command('Ctrl+S'));\n      group.add('save-as', new qx.ui.command.Command('Ctrl+Shift+S'));\n      // this command will close the browser window, thats not what we want\n      // group.add('close', new qx.ui.command.Command('Ctrl+W'));\n      group.add('new-file', new qx.ui.command.Command('Ctrl+N'));\n      group.add('new-folder', new qx.ui.command.Command('Ctrl+Shift+N'));\n      group.add('quit', new qx.ui.command.Command('Ctrl+Q'));\n      // group.add('delete', new qx.ui.command.Command('Ctrl+Del'));\n\n      const renameCommand = new qx.ui.command.Command('F2');\n      group.add('rename', renameCommand);\n      this.bind('renameableSelection', renameCommand, 'enabled');\n\n      group.add('undo', new qx.ui.command.Command('Ctrl+Z'));\n      group.add('redo', new qx.ui.command.Command('Ctrl+Y'));\n\n      // edit commands (adding cut/copy/paste command will deactivate the native browser functions)\n      // and as we cannot simulate pasting from clipboard, we do not use them here\n      group.add('cut', new qx.ui.command.Command('Ctrl+X'));\n      group.add('copy', new qx.ui.command.Command('Ctrl+C'));\n      group.add('paste', new qx.ui.command.Command('Ctrl+V'));\n\n      group.add('help', new qx.ui.command.Command('F1'));\n\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      this._oldCommandGroup = manager.getActive();\n      manager.add(group);\n      manager.setActive(group);\n    },\n\n    _onDelete(file) {\n      const item = file || this.getCurrentSelection();\n      if (item) {\n        cv.ui.manager.control.FileController.getInstance().delete(item);\n      }\n    },\n\n    _onChangeStackSelection(ev) {\n      const selection = ev.getData();\n      const openFiles = [];\n      // sync tab selection with currently visible page\n      selection.forEach(function (page) {\n        const openFile = this.getOpenFiles()\n          .toArray()\n          .find(function (openFile) {\n            return openFile.getFile() === page.getFile() && openFile.getHandlerId() === page.classname;\n          });\n        if (openFile) {\n          openFiles.push(openFile);\n        }\n      }, this);\n\n      this._openFilesController.getSelection().replace(openFiles);\n    },\n\n    __getFileNamePrompt(message, callback, context, value, caption) {\n      const prompt = new cv.ui.manager.dialog.Prompt({\n        message: message,\n        callback: callback || null,\n        context: context || null,\n        value: value || null,\n        caption: caption || '',\n        filter: /[\\w\\d_\\-\\.\\s]/\n      });\n\n      prompt.show();\n      return prompt;\n    },\n\n    _onCreate(type, content, folder, handlerId, suggestedName) {\n      const currentFolder = folder || this.getCurrentFolder();\n      if (!currentFolder) {\n        return;\n      }\n      let message;\n      let existsMessage;\n      if (type === 'config') {\n        message = qx.locale.Manager.tr(\n          'Please enter the name of the new configuration (without \"visu_config_\" at the beginning and \".xml\" at the end)'\n        );\n\n        existsMessage = qx.locale.Manager.tr('A configuration with this name already exists.');\n      } else if (type === 'file') {\n        message = qx.locale.Manager.tr('Please enter the file name.');\n        existsMessage = qx.locale.Manager.tr('A file with this name already exists.');\n      } else {\n        message = qx.locale.Manager.tr('Please enter the folder name.');\n        existsMessage = qx.locale.Manager.tr('A folder with this name already exists.');\n      }\n      const handlePrompt = function (name) {\n        if (!name) {\n          // canceled\n          return;\n        }\n        let filename = name;\n        // add visu_config_..-xml\n        if (type === 'config') {\n          const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(name);\n          if (match) {\n            name = match[1];\n          }\n          filename = 'visu_config_' + name + '.xml';\n        }\n        // check if name does not exist\n        const exists = currentFolder.getChildren().some(function (child) {\n          return child.getName() === filename && child.getType() === type;\n        }, this);\n\n        if (exists) {\n          cv.ui.manager.snackbar.Controller.error(existsMessage);\n          this.__getFileNamePrompt(message, handlePrompt, this, name);\n        } else {\n          const item = new cv.ui.manager.model.FileItem(filename, currentFolder.getFullPath(), currentFolder);\n\n          item.set({\n            type: type === 'config' ? 'file' : type,\n            readable: true,\n            writeable: true,\n            loaded: true,\n            modified: true,\n            temporary: true,\n            parentFolder: currentFolder.getFullPath(),\n            content: content || ''\n          });\n\n          if (type === 'dir') {\n            // create directory directly\n            cv.io.rest.Client.getFsClient().createSync(\n              {\n                path: item.getFullPath(),\n                type: type\n              },\n\n              null,\n              function (err) {\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Folder has been created'));\n\n                  item.set({\n                    modified: false,\n                    temporary: false\n                  });\n\n                  qx.event.message.Bus.dispatchByName(item.getBusTopic(), {\n                    type: 'created',\n                    file: item,\n                    data: '',\n                    source: this\n                  });\n                }\n              },\n              this\n            );\n          }\n          currentFolder.addChild(item);\n          currentFolder.sortElements();\n          this._tree.refresh();\n          this._tree.setSelection(item);\n          // do not open new folders\n          if (type !== 'dir') {\n            // open the file in an editor\n            this.openFile(item, false, handlerId, 'edit');\n          }\n        }\n      };\n\n      this.__getFileNamePrompt(message, handlePrompt, this, suggestedName);\n    },\n\n    /**\n     * Finds next droppable parent of the given element. Maybe the element itself as well.\n     *\n     * Looks for the attribute <code>qxDroppable</code> with the value <code>on</code>.\n     *\n     * @param elem {Element} The element to query\n     * @return {Element} The next parent element which is droppable. May also be <code>null</code>\n     */\n    __findDroppable(elem) {\n      while (elem && elem.nodeType === 1) {\n        if (elem.getAttribute('qxDroppable') === 'on') {\n          return elem;\n        }\n\n        elem = elem.parentNode;\n      }\n\n      return null;\n    },\n\n    // overridden\n    _draw() {\n      const domRoot = this.__getRoot();\n      const root = new qx.ui.root.Inline(domRoot, true, true);\n      this.bind('visible', root, 'visibility', {\n        converter(visible) {\n          return visible ? 'visible' : 'excluded';\n        }\n      });\n\n      root.addListenerOnce('appear', () => {\n        // disable file drop\n        const element = root.getContentElement().getDomElement();\n        element.addEventListener(\n          'drop',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n\n        element.addEventListener(\n          'dragover',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n      });\n      qx.core.Init.getApplication().setRoot(root);\n      root.setLayout(new qx.ui.layout.Canvas());\n\n      const snackbar = cv.ui.manager.snackbar.Controller.getInstance();\n      root.add(snackbar, {\n        bottom: 10,\n        left: 200\n      });\n\n      /**\n       *\n       */\n      function resize() {\n        const bounds = root.getBounds();\n        snackbar.setLayoutProperties({\n          bottom: 10,\n          left: Math.round(bounds.width / 2) - 150\n        });\n\n        snackbar.setMaxHeight(bounds.height - 40);\n      }\n      root.addListener('resize', resize, this);\n      root.addListener('appear', resize, this);\n      window.addEventListener('resize', function () {\n        // sync window height with manager height\n        domRoot.style.height = window.innerHeight + 'px';\n      });\n\n      const main = new qx.ui.container.Composite(new qx.ui.layout.Dock());\n      root.add(main, { edge: 0 });\n      // menu on top\n      const menuBar = cv.ui.manager.MenuBar.getInstance();\n      main.add(menuBar, { edge: 'north' });\n\n      const uploadButton = menuBar.getButton('upload');\n      const uploadManager = new cv.ui.manager.upload.UploadMgr(uploadButton);\n      this.bind('currentFolder', uploadManager, 'folder');\n\n      this._pane = new qx.ui.splitpane.Pane();\n      main.add(this._pane, { edge: 'center' });\n\n      const rootFolder = (cv.ui.manager.model.FileItem.ROOT = new cv.ui.manager.model.FileItem('.'));\n      const fakeIconFile = cv.ui.manager.model.FileItem.getIconFile();\n      // TODO: needs to be verified by the backend\n      rootFolder.set({\n        overrideIcon: true,\n        writeable: true,\n        readable: true,\n        open: true,\n        fakeChildren: [fakeIconFile],\n        icon: cv.theme.dark.Images.getIcon('home', 18)\n      });\n\n      this.setCurrentFolder(rootFolder);\n      this._tree = new cv.ui.manager.tree.FileSystem(rootFolder);\n      this._tree.addListener('changeSelection', this._onChangeTreeSelection, this);\n\n      // left container\n      const leftContainer = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // left toolbar\n      const leftBar = new cv.ui.manager.ToolBar(uploadManager);\n      this.bind('currentFolder', leftBar, 'folder');\n      this.bind('currentSelection', leftBar, 'file');\n      leftBar.addListener('reload', this._tree.reload, this._tree);\n\n      // globally bind writeable folder to command for new files\n      const buttonConfig = menuBar.getButtonConfiguration();\n      this.bind('writeableFolder', buttonConfig['new-file'].args[2], 'enabled');\n      this.bind('writeableFolder', buttonConfig['new-folder'].args[2], 'enabled');\n\n      // this.bind('deleteableSelection', buttonConfig['delete'].args[2], 'enabled');\n\n      leftContainer.add(leftBar);\n      leftContainer.add(this._tree, { flex: 1 });\n      this._pane.add(leftContainer, 0);\n      cv.ui.manager.model.Preferences.getInstance().bind('expertMode', leftContainer, 'visibility', {\n        converter(value) {\n          return value ? 'visible' : 'excluded';\n        }\n      });\n\n      this._mainContent = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // tab list\n      const list = new qx.ui.form.List(true);\n      list.setAppearance('open-files-tabs');\n      this._openFilesController = new qx.data.controller.List(this.getOpenFiles(), list, 'file.name');\n\n      this._openFilesController.setDelegate({\n        createItem: function () {\n          const item = new cv.ui.manager.form.FileTabItem();\n          item.addListener('close', this._onCloseFile, this);\n          return item;\n        }.bind(this),\n\n        bindItem(controller, item, index) {\n          controller.bindDefaultProperties(item, index);\n          controller.bindProperty('file.permanent', 'permanent', null, item, index);\n\n          controller.bindProperty('file.modified', 'modified', null, item, index);\n\n          controller.bindProperty('icon', 'icon', null, item, index);\n          controller.bindProperty('closeable', 'closeable', null, item, index);\n        }\n      });\n\n      list.addListener('changeSelection', this._onChangeFileSelection, this);\n      this._mainContent.add(list);\n\n      this._stack = new qx.ui.container.Stack();\n      this._stack.addListener('changeSelection', this._onChangeStackSelection, this);\n\n      this._mainContent.add(this._stack, { flex: 1 });\n      this._pane.add(this._mainContent, 1);\n\n      const startOpenFile = new cv.ui.manager.model.OpenFile(rootFolder, 'cv.ui.manager.Start');\n\n      startOpenFile.setCloseable(false);\n      this.getOpenFiles().push(startOpenFile);\n      list.setModelSelection([startOpenFile]);\n    },\n\n    _showAbout() {\n      const app = qx.core.Init.getApplication();\n      const dialogConf = {\n        caption: qx.locale.Manager.tr('About'),\n        modal: true,\n        minWidth: Math.min(500, qx.bom.Viewport.getWidth()),\n        maxHeight: qx.bom.Viewport.getHeight(),\n        message: `\n<div class=\"about-cv\">\n <img src=\"resource/icons/comet_icon_128x128_ff8000.png\" width=\"128\" height=\"128\"/>\n <h2>CometVisu ${cv.Version.VERSION}</h2>\n <div class=\"info\">\n   <label for=\"date\">${qx.locale.Manager.tr('Build date')}: </label>\n   <span id=\"date\">${cv.Version.DATE}</span><br/>\n   <label for=\"build\">${qx.locale.Manager.tr('Build revision')}: </label>\n   <span id=\"build\">${cv.Version.REV}</span><br/>\n   <label for=\"lib-version\">${qx.locale.Manager.tr('Library version')}: </label>\n   <span id=\"lib-version\">Pure: ${cv.Version.LIBRARY_VERSION_PURE}, Tile: ${cv.Version.LIBRARY_VERSION_TILE}</span><br/>\n   <label for=\"server\">${qx.locale.Manager.tr('Server')}: </label>\n   <span id=\"server\">${app.getServer() || '?'}</span><br/>\n   <label for=\"php-version\">${qx.locale.Manager.tr('PHP version') || '?'}: </label>\n   <span id=\"php-version\">${app.getServerPhpVersion()}</span>\n </div>\n</div>`\n      };\n\n      new cv.ui.manager.dialog.BigAlert(dialogConf).show();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_pane', '_tree', '_stack', '_mainContent', '_openFilesController');\n\n    // restore former command group\n    const application = qx.core.Init.getApplication();\n    const manager = application.getCommandManager();\n    manager.setActive(this._oldCommandGroup);\n    this._oldCommandGroup = null;\n\n    // defer the reset to let the dispose queue to be emptied before removing the root\n    new qx.util.DeferredCall(function () {\n      application.resetRoot();\n    }).schedule();\n\n    document.body.removeChild(this.__root);\n    this.__root = null;\n    this.__actionDispatcher = null;\n\n    qx.event.message.Bus.unsubscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // destroy the singleton instance\n    delete cv.ui.manager.Main.$$instance;\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}