{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "include",
    "cv",
    "ui",
    "manager",
    "control",
    "MFileEventHandler",
    "implement",
    "IActionHandler",
    "IFileEventHandler",
    "construct",
    "model",
    "BackupFolder",
    "getInstance",
    "_checkEnvironment",
    "initOpenFiles",
    "data",
    "Array",
    "__actionDispatcher",
    "ActionDispatcher",
    "setMain",
    "__initCommands",
    "_draw",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_onManagerEvent",
    "tooltip",
    "Manager",
    "window",
    "addEventListener",
    "_onBeforeUnload",
    "statics",
    "ROOT",
    "properties",
    "openFiles",
    "check",
    "deferredInit",
    "writeableFolder",
    "init",
    "currentFolder",
    "nullable",
    "apply",
    "currentSelection",
    "deleteableSelection",
    "renameableSelection",
    "visible",
    "members",
    "__previewFileIndex",
    "__root",
    "_pane",
    "_tree",
    "_stack",
    "_oldCommandGroup",
    "_managerCommands",
    "_mainContent",
    "_openFilesController",
    "_hiddenConfigFakeFile",
    "_applyVisible",
    "value",
    "Init",
    "getApplication",
    "getCommandManager",
    "setActive",
    "bom",
    "element",
    "Style",
    "set",
    "__getRoot",
    "io",
    "rest",
    "Client",
    "getFsClient",
    "checkEnvironmentSync",
    "err",
    "res",
    "snackbar",
    "Controller",
    "error",
    "forEach",
    "env",
    "refreshActions",
    "entity",
    "state",
    "locale",
    "tr",
    "FileItem",
    "setReadable",
    "setWriteable",
    "widget",
    "getFocusedWidget",
    "resetFocusedWidget",
    "setFocusedWidget",
    "canHandleAction",
    "actionName",
    "getCurrentSelection",
    "isWriteable",
    "actions",
    "getCurrentFolder",
    "push",
    "includes",
    "_doClose",
    "document",
    "querySelector",
    "configLoader",
    "util",
    "ConfigLoader",
    "app",
    "load",
    "bootstrap",
    "setVisible",
    "handleAction",
    "unsavedFiles",
    "closeCurrentFile",
    "closeFile",
    "getOpenFiles",
    "filter",
    "openFile",
    "getFile",
    "isModified",
    "length",
    "dialog",
    "qxl",
    "Confirm",
    "callback",
    "confirmed",
    "save",
    "dispose",
    "context",
    "caption",
    "yesButtonLabel",
    "noButtonLabel",
    "useBlocker",
    "show",
    "_onCreate",
    "readSync",
    "path",
    "file",
    "getFullPath",
    "isConfigFile",
    "converter",
    "ConfigUpgrader",
    "convertPureToTile",
    "convertedContent",
    "suggestedName",
    "match",
    "exec",
    "getName",
    "_onDelete",
    "_showAbout",
    "warn",
    "ev",
    "preventDefault",
    "returnValue",
    "configureButton",
    "button",
    "unConfigureButton",
    "_handleFileEvent",
    "getData",
    "action",
    "copy",
    "some",
    "isRelated",
    "resetCurrentFolder",
    "refresh",
    "__findConfigFile",
    "name",
    "demoFolder",
    "getChildren",
    "child",
    "startsWith",
    "substr",
    "handler",
    "handlerOptions",
    "_onChangeTreeSelection",
    "Preferences",
    "isQuickPreview",
    "mode",
    "__openSelectedFile",
    "node",
    "getType",
    "setCurrentFolder",
    "getParent",
    "setCurrentSelection",
    "resetCurrentSelection",
    "setEditing",
    "_applyCurrentFolder",
    "old",
    "removeRelatedBindings",
    "bind",
    "resetWriteableFolder",
    "_applyCurrentSelection",
    "resetDeleteableSelection",
    "_onChangeFileSelection",
    "sel",
    "getSelection",
    "getItem",
    "editorConfig",
    "handlerId",
    "getHandlerId",
    "FileHandlerRegistry",
    "getFileHandlerById",
    "getFileHandler",
    "instance",
    "Clazz",
    "setFile",
    "indexOf",
    "add",
    "editor",
    "AbstractEditor",
    "setHandlerOptions",
    "getHandlerOptions",
    "setSelection",
    "GlobalState",
    "setOpenedFocusedFile",
    "resetOpenedFocusedFile",
    "preview",
    "handlerType",
    "handlerConf",
    "info",
    "classname",
    "isExternal",
    "isOpen",
    "of",
    "OpenFile",
    "resetHandlerOptions",
    "isPermanent",
    "setItem",
    "setPermanent",
    "getTarget",
    "setModelSelection",
    "checkUnsavedChanged",
    "found",
    "f",
    "isTemporary",
    "resetModified",
    "dispatchByName",
    "noButtonIcon",
    "allowCancel",
    "force",
    "isCloseable",
    "resetPermanent",
    "selectionIndex",
    "remove",
    "currentHandler",
    "hasInterface",
    "constructor",
    "IEditor",
    "Start",
    "resetFile",
    "resetSelection",
    "replace",
    "CompareFiles",
    "fileHandlerConf",
    "clear",
    "destroy",
    "monaco",
    "oldModel",
    "getModel",
    "getUri",
    "selected",
    "_onCloseFile",
    "dom",
    "Element",
    "create",
    "id",
    "style",
    "insertEnd",
    "body",
    "theme",
    "Meta",
    "setTheme",
    "Dark",
    "group",
    "command",
    "Group",
    "Command",
    "renameCommand",
    "getActive",
    "item",
    "FileController",
    "_onChangeStackSelection",
    "selection",
    "page",
    "toArray",
    "find",
    "__getFileNamePrompt",
    "prompt",
    "Prompt",
    "content",
    "folder",
    "existsMessage",
    "handlePrompt",
    "filename",
    "exists",
    "readable",
    "writeable",
    "loaded",
    "modified",
    "temporary",
    "parentFolder",
    "createSync",
    "getBusTopic",
    "source",
    "addChild",
    "sortElements",
    "__findDroppable",
    "elem",
    "nodeType",
    "getAttribute",
    "parentNode",
    "domRoot",
    "root",
    "Inline",
    "addListenerOnce",
    "getContentElement",
    "getDomElement",
    "target",
    "setRoot",
    "setLayout",
    "layout",
    "Canvas",
    "bottom",
    "left",
    "resize",
    "bounds",
    "getBounds",
    "setLayoutProperties",
    "Math",
    "round",
    "width",
    "setMaxHeight",
    "height",
    "addListener",
    "innerHeight",
    "main",
    "container",
    "Composite",
    "Dock",
    "edge",
    "menuBar",
    "MenuBar",
    "uploadButton",
    "getButton",
    "uploadManager",
    "upload",
    "UploadMgr",
    "splitpane",
    "Pane",
    "rootFolder",
    "fakeIconFile",
    "getIconFile",
    "overrideIcon",
    "open",
    "fakeChildren",
    "icon",
    "dark",
    "Images",
    "getIcon",
    "tree",
    "FileSystem",
    "leftContainer",
    "VBox",
    "leftBar",
    "ToolBar",
    "reload",
    "buttonConfig",
    "getButtonConfiguration",
    "args",
    "flex",
    "list",
    "form",
    "List",
    "setAppearance",
    "controller",
    "setDelegate",
    "createItem",
    "FileTabItem",
    "bindItem",
    "index",
    "bindDefaultProperties",
    "bindProperty",
    "Stack",
    "startOpenFile",
    "setCloseable",
    "dialogConf",
    "modal",
    "minWidth",
    "min",
    "Viewport",
    "getWidth",
    "maxHeight",
    "getHeight",
    "Version",
    "VERSION",
    "DATE",
    "REV",
    "LIBRARY_VERSION_PURE",
    "LIBRARY_VERSION_TILE",
    "getServer",
    "getServerPhpVersion",
    "BigAlert",
    "destruct",
    "_disposeObjects",
    "application",
    "DeferredCall",
    "resetRoot",
    "schedule",
    "removeChild",
    "unsubscribe",
    "Main",
    "$$instance"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/Main.js"
  ],
  "sourcesContent": [
    "/* Main.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Main class of the CometVisu file manager.\n * @author Tobias BrÃ¤utigam\n * @since 0.12.0\n *\n * @asset(manager/*)\n */\nqx.Class.define('cv.ui.manager.Main', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  include: [cv.ui.manager.control.MFileEventHandler],\n\n  implement: [cv.ui.manager.IActionHandler, cv.ui.manager.control.IFileEventHandler],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    cv.ui.manager.model.BackupFolder.getInstance();\n    this._checkEnvironment();\n    this.initOpenFiles(new qx.data.Array());\n    this.__actionDispatcher = cv.ui.manager.control.ActionDispatcher.getInstance();\n    this.__actionDispatcher.setMain(this);\n\n    this.__initCommands();\n    this._draw();\n\n    qx.event.message.Bus.subscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // Initialize tooltip manager\n    qx.ui.tooltip.Manager.getInstance();\n\n    //qx.event.Registration.addListener(window, 'beforeunload', this._onBeforeUnload, this);\n    window.addEventListener('beforeunload', event => {\n      this._onBeforeUnload(event);\n    });\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ROOT: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    openFiles: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    /**\n     * Current selected folder (if a file is selected its parent folder) is writeable.\n     */\n    writeableFolder: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeWriteableFolder'\n    },\n\n    currentFolder: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentFolder',\n      event: 'changeCurrentFolder'\n    },\n\n    currentSelection: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentSelection',\n      event: 'changeCurrentSelection'\n    },\n\n    deleteableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeDeleteableSelection'\n    },\n\n    renameableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeRenameableSelection'\n    },\n\n    visible: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeVisible',\n      apply: '_applyVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __previewFileIndex: null,\n    __root: null,\n    _pane: null,\n    _tree: null,\n    _stack: null,\n    _oldCommandGroup: null,\n    _managerCommands: null,\n    _mainContent: null,\n    _openFilesController: null,\n    _hiddenConfigFakeFile: null,\n    __actionDispatcher: null,\n\n    _applyVisible(value) {\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      if (value) {\n        manager.setActive(this._managerCommands);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'block');\n      } else {\n        manager.setActive(this._oldCommandGroup);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'none');\n      }\n    },\n\n    _checkEnvironment() {\n      cv.io.rest.Client.getFsClient().checkEnvironmentSync(function (err, res) {\n        if (err) {\n          cv.ui.manager.snackbar.Controller.error(err);\n        } else if (res) {\n          res.forEach(function (env) {\n            let refreshActions = false;\n            switch (env.entity) {\n              case '.':\n                // config folder must be writeable\n                if ((env.state & 1) === 0) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder does not exists'));\n                } else if ((env.state & 2) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setReadable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not readable'));\n                } else if ((env.state & 4) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setWriteable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not writeable'));\n                }\n                if (refreshActions) {\n                  const widget = this.__actionDispatcher.getFocusedWidget();\n                  this.__actionDispatcher.resetFocusedWidget();\n                  this.__actionDispatcher.setFocusedWidget(widget);\n                }\n                break;\n\n              case 'backup':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('backup folder is not writeable'));\n                }\n                break;\n\n              case 'media':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('media folder is not writeable'));\n                }\n                break;\n\n              case 'hidden.php':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(\n                    qx.locale.Manager.tr('Hidden configuration file (hidden.php) not writeable')\n                  );\n                }\n                break;\n            }\n          }, this);\n        }\n      }, this);\n    },\n\n    canHandleAction(actionName) {\n      if (actionName === 'delete' && this.getCurrentSelection() && !this.getCurrentSelection().isWriteable()) {\n        // needs a writeable file\n        return false;\n      }\n      let actions = ['close', 'quit', 'about'];\n      const currentFolder = this.getCurrentFolder();\n      if (currentFolder.isWriteable()) {\n        actions.push('new-file');\n        actions.push('new-folder');\n        actions.push('delete');\n        actions.push('upload');\n        actions.push('clone');\n        actions.push('convertToTile');\n      }\n      if (cv.ui.manager.model.FileItem.ROOT.isWriteable()) {\n        actions.push('new-config-file');\n      }\n      return actions.includes(actionName);\n    },\n\n    _doClose() {\n      if (document.querySelector('#main.loading')) {\n        // there is no config file loaded, load the default one\n        let configLoader = new cv.util.ConfigLoader();\n        let app = qx.core.Init.getApplication();\n        configLoader.load(app.bootstrap, app);\n      }\n      this.setVisible(false);\n    },\n\n    handleAction(actionName, data) {\n      let unsavedFiles;\n      switch (actionName) {\n        case 'close':\n          if (!data) {\n            this.closeCurrentFile();\n          } else {\n            this.closeFile(data);\n          }\n          break;\n\n        case 'quit':\n          unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n          if (unsavedFiles.length > 0) {\n            const dialog = new qxl.dialog.Confirm({\n              message: qx.locale.Manager.tr('You have files opened with unsaved changes, you should save them now.'),\n\n              callback(confirmed) {\n                if (confirmed) {\n                  unsavedFiles.forEach(openFile => {\n                    openFile.save();\n                  });\n                }\n                dialog.dispose();\n                this._doClose();\n              },\n              context: this,\n              caption: qx.locale.Manager.tr('Unsaved changes'),\n              yesButtonLabel: qx.locale.Manager.tr('Save & quit'),\n              noButtonLabel: qx.locale.Manager.tr('Quit without saving'),\n              useBlocker: true\n            });\n\n            dialog.show();\n          } else {\n            this._doClose();\n          }\n          break;\n\n        case 'new-file':\n          this._onCreate('file', null, data);\n          break;\n\n        case 'new-config-file':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: 'demo/templates/visu_config.xml' },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load config template'));\n              } else {\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'clone':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                // config files need to be cloned in the root folder\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              } else {\n                this._onCreate('file', res);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'convertToTile':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                const converter = new cv.util.ConfigUpgrader();\n                const [err, convertedContent] = converter.convertPureToTile(res);\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  let suggestedName = 'tile';\n                  const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(data.file.getName());\n\n                  if (match) {\n                    suggestedName = 'tile-' + match[1];\n                  }\n                  // config files need to be cloned in the root folder\n                  this._onCreate(\n                    'config',\n                    convertedContent,\n                    cv.ui.manager.model.FileItem.ROOT,\n                    'cv.ui.manager.editor.Source',\n                    suggestedName\n                  );\n                }\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'new-folder':\n          this._onCreate('dir', null, data);\n          break;\n\n        case 'delete':\n          this._onDelete(data);\n          break;\n\n        case 'upload':\n          // nothing to to, this is handled in another way\n          break;\n\n        case 'about':\n          this._showAbout();\n          break;\n\n        default:\n          this.warn(actionName + ' handling is not implemented yet!');\n          break;\n      }\n    },\n\n    _onBeforeUnload(ev) {\n      const unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n      if (unsavedFiles.length > 0) {\n        ev.preventDefault();\n        ev.returnValue = '';\n      } else {\n        delete ev['returnValue'];\n      }\n    },\n\n    configureButton(button) {},\n    unConfigureButton(button) {},\n\n    _handleFileEvent(ev) {\n      const data = ev.getData();\n      if (data.action === 'deleted') {\n        // check if file is currently opened and close it\n        const openFiles = this.getOpenFiles().copy();\n        openFiles.some(function (openFile) {\n          if (openFile.getFile().isRelated(data.path)) {\n            this.closeFile(openFile);\n          }\n          return false;\n        }, this);\n        if (this.getCurrentFolder() && this.getCurrentFolder().getFullPath() === data.path) {\n          this.resetCurrentFolder();\n        }\n      } else {\n        this.warn('unhandled file event', data.action);\n      }\n      this._tree.refresh();\n    },\n\n    __findConfigFile(name) {\n      let file = null;\n      let demoFolder = null;\n      cv.ui.manager.model.FileItem.ROOT.getChildren().some(child => {\n        if (child.getName() === 'demo') {\n          demoFolder = child;\n        } else if (child.getName() === name) {\n          file = child;\n          return true;\n        }\n        return false;\n      });\n      if (!file && demoFolder) {\n        if (name.startsWith('demo/')) {\n          name = name.substr(5);\n        }\n        // check demo configs\n        demoFolder.getChildren().some(child => {\n          if (child.getName() === name) {\n            file = child;\n            return true;\n          }\n          return false;\n        });\n      }\n      return file;\n    },\n\n    _onManagerEvent(ev) {\n      let data = ev.getData();\n      switch (ev.getName()) {\n        case 'cv.manager.compareFiles':\n          this.openFile(data, false);\n          break;\n\n        case 'cv.manager.openWith':\n          if (typeof data.file === 'string') {\n            // this can only by a file in the root dir (a config)\n            data.file = this.__findConfigFile(data.file);\n          }\n          this.openFile(data.file || this.getCurrentSelection(), false, data.handler, null, data.handlerOptions);\n\n          break;\n\n        case 'cv.manager.open':\n          if (typeof data === 'string') {\n            // this can only by a file in the root dir (a config)\n            data = this.__findConfigFile(data);\n          }\n          this.openFile(data || this.getCurrentSelection(), false);\n          break;\n      }\n    },\n\n    /**\n     * open selected file in preview mode\n     * @param ev\n     * @private\n     */\n    _onChangeTreeSelection(ev) {\n      const data = ev.getData();\n      if (\n        (cv.ui.manager.model.Preferences.getInstance().isQuickPreview() && data.mode === 'tap') ||\n        data.mode === 'dbltap'\n      ) {\n        this.__openSelectedFile(data.node, data.mode);\n      }\n      const node = data.node;\n      if (node) {\n        if (data.node.getType() === 'file') {\n          this.setCurrentFolder(data.node.getParent());\n        } else {\n          this.setCurrentFolder(node);\n        }\n        this.setCurrentSelection(node);\n      } else {\n        this.resetCurrentFolder();\n        this.resetCurrentSelection();\n      }\n    },\n\n    __openSelectedFile(node, mode) {\n      if (node) {\n        if (node.getType() === 'file') {\n          this.openFile(node, mode === 'tap');\n        } else if (mode === 'dbltap') {\n          // edit folder name on dbltap\n          node.setEditing(true);\n        }\n      }\n    },\n\n    _applyCurrentFolder(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'writeableFolder');\n      } else {\n        this.resetWriteableFolder();\n      }\n    },\n\n    _applyCurrentSelection(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'deleteableSelection');\n        value.bind('inTrash', this, 'renameableSelection', {\n          converter(value) {\n            return !value;\n          }\n        });\n      } else {\n        this.resetDeleteableSelection();\n      }\n    },\n\n    _onChangeFileSelection() {\n      const sel = this._openFilesController.getSelection();\n      if (sel.length > 0) {\n        const openFile = sel.getItem(0);\n        const file = openFile.getFile();\n        let editorConfig;\n        const handlerId = openFile.getHandlerId();\n        if (handlerId) {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n        } else {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n        }\n        if (!editorConfig.instance) {\n          editorConfig.instance = new editorConfig.Clazz();\n        }\n        editorConfig.instance.setFile(file);\n        if (this._stack.indexOf(editorConfig.instance) < 0) {\n          this._stack.add(editorConfig.instance);\n        }\n        if (editorConfig.instance instanceof cv.ui.manager.editor.AbstractEditor) {\n          editorConfig.instance.setHandlerOptions(openFile.getHandlerOptions());\n        }\n        this._stack.setSelection([editorConfig.instance]);\n        this.__actionDispatcher.setFocusedWidget(editorConfig.instance);\n\n        cv.ui.manager.core.GlobalState.getInstance().setOpenedFocusedFile(file);\n      } else {\n        cv.ui.manager.core.GlobalState.getInstance().resetOpenedFocusedFile();\n      }\n    },\n\n    /**\n     * @param file {cv.ui.manager.model.FileItem} the file to open\n     * @param preview {Boolean} open the file in preview mode\n     * @param handlerId {String} use this handler to open the file (classname as string)\n     * @param handlerType {String} use a special handler type, e.g. 'edit' if you want to open the file with an editor and not a viewer\n     * @param handlerOptions\n     */\n    openFile(file, preview, handlerId, handlerType, handlerOptions) {\n      const openFiles = this.getOpenFiles();\n      let openFile;\n      let handlerConf;\n      if (!handlerId) {\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file, handlerType);\n\n        if (!handlerConf) {\n          // no handler\n          cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Cannot open file: \"%1\"', file.getName()));\n\n          return;\n        }\n        handlerId = handlerConf.Clazz.classname;\n      } else {\n        // check if this handler opens the file in a external frame that is not connected to the manager\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n\n        if (!handlerConf.instance) {\n          handlerConf.instance = new handlerConf.Clazz();\n        }\n        if (handlerConf.instance.isExternal()) {\n          handlerConf.instance.setFile(file);\n          return;\n        }\n      }\n      const isOpen = openFiles.some(function (of) {\n        if (of.getFile() === file && handlerId === of.getHandlerId()) {\n          openFile = of;\n          return true;\n        }\n        return false;\n      });\n      if (!openFile) {\n        openFile = new cv.ui.manager.model.OpenFile(file, handlerId);\n      }\n      if (handlerOptions) {\n        openFile.setHandlerOptions(handlerOptions);\n      } else {\n        openFile.resetHandlerOptions();\n      }\n      if (preview === true) {\n        if (!openFile.isPermanent()) {\n          if (\n            this.__previewFileIndex !== null &&\n            openFiles.getItem(this.__previewFileIndex) &&\n            !openFiles.getItem(this.__previewFileIndex).isPermanent()\n          ) {\n            openFiles.setItem(this.__previewFileIndex, openFile);\n          } else {\n            this.__previewFileIndex = openFiles.length;\n            openFiles.push(openFile);\n          }\n          // do not 'downgrade' the permanent state\n          openFile.setPermanent(false);\n        }\n      } else {\n        if (!isOpen && (this.__previewFileIndex === null || openFiles.indexOf(openFile) !== this.__previewFileIndex)) {\n          openFiles.push(openFile);\n        }\n        openFile.setPermanent(true);\n        this.__previewFileIndex = null;\n      }\n      this._openFilesController.getTarget().setModelSelection([openFile]);\n    },\n\n    /**\n     * Opens a confirm dialog on how to treat the unsaved changes in the file if it has been modified and not saved.\n     * @param openFile {cv.ui.manager.model.OpenFile|cv.ui.manager.model.FileItem} file to check\n     * @return {boolean} true if the confirm dialog has been shown\n     */\n    checkUnsavedChanged(openFile) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return false;\n        }\n      }\n      const file = openFile.getFile();\n      if (file.isModified()) {\n        // check if temporary\n        let message = qx.locale.Manager.tr(\n          'This file has unsaved changes that will be lost when you close it without saving.'\n        );\n\n        if (file.isTemporary()) {\n          message = qx.locale.Manager.tr(\n            'This file has not been saved on the backend yet. It will be lost when you close it without saving.'\n          );\n        }\n        const dialog = new qxl.dialog.Confirm({\n          message: message,\n          callback: confirmed => {\n            if (confirmed === true) {\n              openFile.save();\n              this.closeFile(openFile, true);\n            } else if (confirmed === false) {\n              file.resetModified();\n              if (file.isTemporary()) {\n                qx.event.message.Bus.dispatchByName('cv.manager.file', {\n                  action: 'deleted',\n                  path: file.getFullPath()\n                });\n              }\n              this.closeFile(openFile, true);\n            } else {\n              // cancel closing, do nothing\n            }\n            dialog.dispose();\n          },\n          context: this,\n          caption: qx.locale.Manager.tr('Unsaved changes'),\n          yesButtonLabel: qx.locale.Manager.tr('Save & close'),\n          noButtonLabel: qx.locale.Manager.tr('Discard & close'),\n          noButtonIcon: 'qxl.dialog.icon.delete',\n          useBlocker: true,\n          allowCancel: true\n        });\n\n        dialog.show();\n        return true;\n      }\n      return false;\n    },\n\n    closeFile(openFile, force) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return;\n        }\n      }\n      if (!openFile || !openFile.isCloseable()) {\n        return;\n      }\n      const file = openFile.getFile();\n\n      // check if this file is modified\n      if (!force && this.checkUnsavedChanged(openFile)) {\n        return;\n      }\n      if (openFile instanceof cv.ui.manager.model.OpenFile) {\n        openFile.resetPermanent();\n      }\n      const currentSelection = this._openFilesController.getSelection();\n      let selectionIndex = -1;\n      const openFiles = this.getOpenFiles();\n      if (currentSelection.length > 0 && currentSelection.getItem(0) === openFile) {\n        // we need to select another file after this one got closed\n        selectionIndex = openFiles.indexOf(openFile);\n      }\n      openFiles.remove(openFile);\n      const currentHandler = this._stack.getSelection()[0];\n      if (\n        qx.Class.hasInterface(currentHandler.constructor, cv.ui.manager.editor.IEditor) &&\n        !(currentHandler instanceof cv.ui.manager.Start)\n      ) {\n        // reset the handlers file\n        currentHandler.resetFile();\n      }\n      if (this.getOpenFiles().length === 0) {\n        this._stack.resetSelection();\n        this.__actionDispatcher.resetFocusedWidget();\n        this.__previewFileIndex = null;\n      }\n      if (selectionIndex > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(selectionIndex - 1));\n      } else if (selectionIndex === 0 && openFiles.length > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(0));\n      }\n\n      if (file instanceof cv.ui.manager.model.CompareFiles) {\n        const fileHandlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n\n        fileHandlerConf.instance.clear();\n        if (\n          openFiles.filter(function (openFile) {\n            return openFile.getFile() instanceof cv.ui.manager.model.CompareFiles;\n          }).length === 0\n        ) {\n          fileHandlerConf.instance.destroy();\n          fileHandlerConf.instance = null;\n        }\n      } else if (window.monaco && openFile.getHandlerId() === 'cv.ui.manager.editor.Source') {\n        // close textmodel in monaco editor if exists\n        const oldModel = window.monaco.editor.getModel(file.getUri());\n        if (oldModel) {\n          oldModel.dispose();\n        }\n      }\n    },\n\n    closeCurrentFile() {\n      const selected =\n        this._openFilesController.getSelection().length > 0\n          ? this._openFilesController.getSelection().getItem(0)\n          : null;\n      if (selected) {\n        this.closeFile(selected);\n      }\n    },\n\n    _onCloseFile(ev) {\n      this.closeFile(ev.getData());\n    },\n\n    __getRoot() {\n      if (!this.__root) {\n        this.__root = qx.dom.Element.create('div', {\n          id: 'manager',\n          style: 'position: absolute; top: 0; left: 0; right: 0; bottom: 0;'\n        });\n\n        qx.dom.Element.insertEnd(this.__root, document.body);\n        qx.theme.manager.Meta.getInstance().setTheme(cv.theme.Dark);\n      }\n      return this.__root;\n    },\n\n    __initCommands() {\n      const group = (this._managerCommands = new qx.ui.command.Group());\n      group.add('save', new qx.ui.command.Command('Ctrl+S'));\n      group.add('save-as', new qx.ui.command.Command('Ctrl+Shift+S'));\n      // this command will close the browser window, thats not what we want\n      // group.add('close', new qx.ui.command.Command('Ctrl+W'));\n      group.add('new-file', new qx.ui.command.Command('Ctrl+N'));\n      group.add('new-folder', new qx.ui.command.Command('Ctrl+Shift+N'));\n      group.add('quit', new qx.ui.command.Command('Ctrl+Q'));\n      // group.add('delete', new qx.ui.command.Command('Ctrl+Del'));\n\n      const renameCommand = new qx.ui.command.Command('F2');\n      group.add('rename', renameCommand);\n      this.bind('renameableSelection', renameCommand, 'enabled');\n\n      group.add('undo', new qx.ui.command.Command('Ctrl+Z'));\n      group.add('redo', new qx.ui.command.Command('Ctrl+Y'));\n\n      // edit commands (adding cut/copy/paste command will deactivate the native browser functions)\n      // and as we cannot simulate pasting from clipboard, we do not use them here\n      group.add('cut', new qx.ui.command.Command('Ctrl+X'));\n      group.add('copy', new qx.ui.command.Command('Ctrl+C'));\n      group.add('paste', new qx.ui.command.Command('Ctrl+V'));\n\n      group.add('help', new qx.ui.command.Command('F1'));\n\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      this._oldCommandGroup = manager.getActive();\n      manager.add(group);\n      manager.setActive(group);\n    },\n\n    _onDelete(file) {\n      const item = file || this.getCurrentSelection();\n      if (item) {\n        cv.ui.manager.control.FileController.getInstance().delete(item);\n      }\n    },\n\n    _onChangeStackSelection(ev) {\n      const selection = ev.getData();\n      const openFiles = [];\n      // sync tab selection with currently visible page\n      selection.forEach(function (page) {\n        const openFile = this.getOpenFiles()\n          .toArray()\n          .find(function (openFile) {\n            return openFile.getFile() === page.getFile() && openFile.getHandlerId() === page.classname;\n          });\n        if (openFile) {\n          openFiles.push(openFile);\n        }\n      }, this);\n\n      this._openFilesController.getSelection().replace(openFiles);\n    },\n\n    __getFileNamePrompt(message, callback, context, value, caption) {\n      const prompt = new cv.ui.manager.dialog.Prompt({\n        message: message,\n        callback: callback || null,\n        context: context || null,\n        value: value || null,\n        caption: caption || '',\n        filter: /[\\w\\d_\\-\\.\\s]/\n      });\n\n      prompt.show();\n      return prompt;\n    },\n\n    _onCreate(type, content, folder, handlerId, suggestedName) {\n      const currentFolder = folder || this.getCurrentFolder();\n      if (!currentFolder) {\n        return;\n      }\n      let message;\n      let existsMessage;\n      if (type === 'config') {\n        message = qx.locale.Manager.tr(\n          'Please enter the name of the new configuration (without \"visu_config_\" at the beginning and \".xml\" at the end)'\n        );\n\n        existsMessage = qx.locale.Manager.tr('A configuration with this name already exists.');\n      } else if (type === 'file') {\n        message = qx.locale.Manager.tr('Please enter the file name.');\n        existsMessage = qx.locale.Manager.tr('A file with this name already exists.');\n      } else {\n        message = qx.locale.Manager.tr('Please enter the folder name.');\n        existsMessage = qx.locale.Manager.tr('A folder with this name already exists.');\n      }\n      const handlePrompt = function (name) {\n        if (!name) {\n          // canceled\n          return;\n        }\n        let filename = name;\n        // add visu_config_..-xml\n        if (type === 'config') {\n          const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(name);\n          if (match) {\n            name = match[1];\n          }\n          filename = 'visu_config_' + name + '.xml';\n        }\n        // check if name does not exist\n        const exists = currentFolder.getChildren().some(function (child) {\n          return child.getName() === filename && child.getType() === type;\n        }, this);\n\n        if (exists) {\n          cv.ui.manager.snackbar.Controller.error(existsMessage);\n          this.__getFileNamePrompt(message, handlePrompt, this, name);\n        } else {\n          const item = new cv.ui.manager.model.FileItem(filename, currentFolder.getFullPath(), currentFolder);\n\n          item.set({\n            type: type === 'config' ? 'file' : type,\n            readable: true,\n            writeable: true,\n            loaded: true,\n            modified: true,\n            temporary: true,\n            parentFolder: currentFolder.getFullPath(),\n            content: content || ''\n          });\n\n          if (type === 'dir') {\n            // create directory directly\n            cv.io.rest.Client.getFsClient().createSync(\n              {\n                path: item.getFullPath(),\n                type: type\n              },\n\n              null,\n              function (err) {\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Folder has been created'));\n\n                  item.set({\n                    modified: false,\n                    temporary: false\n                  });\n\n                  qx.event.message.Bus.dispatchByName(item.getBusTopic(), {\n                    type: 'created',\n                    file: item,\n                    data: '',\n                    source: this\n                  });\n                }\n              },\n              this\n            );\n          }\n          currentFolder.addChild(item);\n          currentFolder.sortElements();\n          this._tree.refresh();\n          this._tree.setSelection(item);\n          // do not open new folders\n          if (type !== 'dir') {\n            // open the file in an editor\n            this.openFile(item, false, handlerId, 'edit');\n          }\n        }\n      };\n\n      this.__getFileNamePrompt(message, handlePrompt, this, suggestedName);\n    },\n\n    /**\n     * Finds next droppable parent of the given element. Maybe the element itself as well.\n     *\n     * Looks for the attribute <code>qxDroppable</code> with the value <code>on</code>.\n     *\n     * @param elem {Element} The element to query\n     * @return {Element} The next parent element which is droppable. May also be <code>null</code>\n     */\n    __findDroppable(elem) {\n      while (elem && elem.nodeType === 1) {\n        if (elem.getAttribute('qxDroppable') === 'on') {\n          return elem;\n        }\n\n        elem = elem.parentNode;\n      }\n\n      return null;\n    },\n\n    // overridden\n    _draw() {\n      const domRoot = this.__getRoot();\n      const root = new qx.ui.root.Inline(domRoot, true, true);\n      this.bind('visible', root, 'visibility', {\n        converter(visible) {\n          return visible ? 'visible' : 'excluded';\n        }\n      });\n\n      root.addListenerOnce('appear', () => {\n        // disable file drop\n        const element = root.getContentElement().getDomElement();\n        element.addEventListener(\n          'drop',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n\n        element.addEventListener(\n          'dragover',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n      });\n      qx.core.Init.getApplication().setRoot(root);\n      root.setLayout(new qx.ui.layout.Canvas());\n\n      const snackbar = cv.ui.manager.snackbar.Controller.getInstance();\n      root.add(snackbar, {\n        bottom: 10,\n        left: 200\n      });\n\n      /**\n       *\n       */\n      function resize() {\n        const bounds = root.getBounds();\n        snackbar.setLayoutProperties({\n          bottom: 10,\n          left: Math.round(bounds.width / 2) - 150\n        });\n\n        snackbar.setMaxHeight(bounds.height - 40);\n      }\n      root.addListener('resize', resize, this);\n      root.addListener('appear', resize, this);\n      window.addEventListener('resize', function () {\n        // sync window height with manager height\n        domRoot.style.height = window.innerHeight + 'px';\n      });\n\n      const main = new qx.ui.container.Composite(new qx.ui.layout.Dock());\n      root.add(main, { edge: 0 });\n      // menu on top\n      const menuBar = cv.ui.manager.MenuBar.getInstance();\n      main.add(menuBar, { edge: 'north' });\n\n      const uploadButton = menuBar.getButton('upload');\n      const uploadManager = new cv.ui.manager.upload.UploadMgr(uploadButton);\n      this.bind('currentFolder', uploadManager, 'folder');\n\n      this._pane = new qx.ui.splitpane.Pane();\n      main.add(this._pane, { edge: 'center' });\n\n      const rootFolder = (cv.ui.manager.model.FileItem.ROOT = new cv.ui.manager.model.FileItem('.'));\n      const fakeIconFile = cv.ui.manager.model.FileItem.getIconFile();\n      // TODO: needs to be verified by the backend\n      rootFolder.set({\n        overrideIcon: true,\n        writeable: true,\n        readable: true,\n        open: true,\n        fakeChildren: [fakeIconFile],\n        icon: cv.theme.dark.Images.getIcon('home', 18)\n      });\n\n      this.setCurrentFolder(rootFolder);\n      this._tree = new cv.ui.manager.tree.FileSystem(rootFolder);\n      this._tree.addListener('changeSelection', this._onChangeTreeSelection, this);\n\n      // left container\n      const leftContainer = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // left toolbar\n      const leftBar = new cv.ui.manager.ToolBar(uploadManager);\n      this.bind('currentFolder', leftBar, 'folder');\n      this.bind('currentSelection', leftBar, 'file');\n      leftBar.addListener('reload', this._tree.reload, this._tree);\n\n      // globally bind writeable folder to command for new files\n      const buttonConfig = menuBar.getButtonConfiguration();\n      this.bind('writeableFolder', buttonConfig['new-file'].args[2], 'enabled');\n      this.bind('writeableFolder', buttonConfig['new-folder'].args[2], 'enabled');\n\n      // this.bind('deleteableSelection', buttonConfig['delete'].args[2], 'enabled');\n\n      leftContainer.add(leftBar);\n      leftContainer.add(this._tree, { flex: 1 });\n      this._pane.add(leftContainer, 0);\n      cv.ui.manager.model.Preferences.getInstance().bind('expertMode', leftContainer, 'visibility', {\n        converter(value) {\n          return value ? 'visible' : 'excluded';\n        }\n      });\n\n      this._mainContent = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // tab list\n      const list = new qx.ui.form.List(true);\n      list.setAppearance('open-files-tabs');\n      this._openFilesController = new qx.data.controller.List(this.getOpenFiles(), list, 'file.name');\n\n      this._openFilesController.setDelegate({\n        createItem: function () {\n          const item = new cv.ui.manager.form.FileTabItem();\n          item.addListener('close', this._onCloseFile, this);\n          return item;\n        }.bind(this),\n\n        bindItem(controller, item, index) {\n          controller.bindDefaultProperties(item, index);\n          controller.bindProperty('file.permanent', 'permanent', null, item, index);\n\n          controller.bindProperty('file.modified', 'modified', null, item, index);\n\n          controller.bindProperty('icon', 'icon', null, item, index);\n          controller.bindProperty('closeable', 'closeable', null, item, index);\n        }\n      });\n\n      list.addListener('changeSelection', this._onChangeFileSelection, this);\n      this._mainContent.add(list);\n\n      this._stack = new qx.ui.container.Stack();\n      this._stack.addListener('changeSelection', this._onChangeStackSelection, this);\n\n      this._mainContent.add(this._stack, { flex: 1 });\n      this._pane.add(this._mainContent, 1);\n\n      const startOpenFile = new cv.ui.manager.model.OpenFile(rootFolder, 'cv.ui.manager.Start');\n\n      startOpenFile.setCloseable(false);\n      this.getOpenFiles().push(startOpenFile);\n      list.setModelSelection([startOpenFile]);\n    },\n\n    _showAbout() {\n      const app = qx.core.Init.getApplication();\n      const dialogConf = {\n        caption: qx.locale.Manager.tr('About'),\n        modal: true,\n        minWidth: Math.min(500, qx.bom.Viewport.getWidth()),\n        maxHeight: qx.bom.Viewport.getHeight(),\n        message: `\n<div class=\"about-cv\">\n <img src=\"resource/icons/comet_icon_128x128_ff8000.png\" width=\"128\" height=\"128\"/>\n <h2>CometVisu ${cv.Version.VERSION}</h2>\n <div class=\"info\">\n   <label for=\"date\">${qx.locale.Manager.tr('Build date')}: </label>\n   <span id=\"date\">${cv.Version.DATE}</span><br/>\n   <label for=\"build\">${qx.locale.Manager.tr('Build revision')}: </label>\n   <span id=\"build\">${cv.Version.REV}</span><br/>\n   <label for=\"lib-version\">${qx.locale.Manager.tr('Library version')}: </label>\n   <span id=\"lib-version\">Pure: ${cv.Version.LIBRARY_VERSION_PURE}, Tile: ${cv.Version.LIBRARY_VERSION_TILE}</span><br/>\n   <label for=\"server\">${qx.locale.Manager.tr('Server')}: </label>\n   <span id=\"server\">${app.getServer() || '?'}</span><br/>\n   <label for=\"php-version\">${qx.locale.Manager.tr('PHP version') || '?'}: </label>\n   <span id=\"php-version\">${app.getServerPhpVersion()}</span>\n </div>\n</div>`\n      };\n\n      new cv.ui.manager.dialog.BigAlert(dialogConf).show();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_pane', '_tree', '_stack', '_mainContent', '_openFilesController');\n\n    // restore former command group\n    const application = qx.core.Init.getApplication();\n    const manager = application.getCommandManager();\n    manager.setActive(this._oldCommandGroup);\n    this._oldCommandGroup = null;\n\n    // defer the reset to let the dispose queue to be emptied before removing the root\n    new qx.util.DeferredCall(function () {\n      application.resetRoot();\n    }).schedule();\n\n    document.body.removeChild(this.__root);\n    this.__root = null;\n    this.__actionDispatcher = null;\n\n    qx.event.message.Bus.unsubscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // destroy the singleton instance\n    delete cv.ui.manager.Main.$$instance;\n  }\n});\n"
  ],
  "mappings": "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"
}