{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "include",
    "cv",
    "ui",
    "manager",
    "control",
    "MFileEventHandler",
    "implement",
    "IActionHandler",
    "IFileEventHandler",
    "construct",
    "model",
    "BackupFolder",
    "getInstance",
    "_checkEnvironment",
    "initOpenFiles",
    "data",
    "Array",
    "__actionDispatcher",
    "ActionDispatcher",
    "setMain",
    "__initCommands",
    "_draw",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_onManagerEvent",
    "tooltip",
    "Manager",
    "window",
    "addEventListener",
    "_onBeforeUnload",
    "statics",
    "ROOT",
    "properties",
    "openFiles",
    "check",
    "deferredInit",
    "writeableFolder",
    "init",
    "currentFolder",
    "nullable",
    "apply",
    "currentSelection",
    "deleteableSelection",
    "renameableSelection",
    "visible",
    "members",
    "__previewFileIndex",
    "__root",
    "_pane",
    "_tree",
    "_stack",
    "_oldCommandGroup",
    "_managerCommands",
    "_mainContent",
    "_openFilesController",
    "_hiddenConfigFakeFile",
    "_applyVisible",
    "value",
    "Init",
    "getApplication",
    "getCommandManager",
    "setActive",
    "bom",
    "element",
    "Style",
    "set",
    "__getRoot",
    "io",
    "rest",
    "Client",
    "getFsClient",
    "checkEnvironmentSync",
    "err",
    "res",
    "snackbar",
    "Controller",
    "error",
    "forEach",
    "env",
    "refreshActions",
    "entity",
    "state",
    "locale",
    "tr",
    "FileItem",
    "setReadable",
    "setWriteable",
    "widget",
    "getFocusedWidget",
    "resetFocusedWidget",
    "setFocusedWidget",
    "canHandleAction",
    "actionName",
    "getCurrentSelection",
    "isWriteable",
    "actions",
    "getCurrentFolder",
    "push",
    "includes",
    "_doClose",
    "document",
    "querySelector",
    "configLoader",
    "util",
    "ConfigLoader",
    "app",
    "load",
    "bootstrap",
    "setVisible",
    "handleAction",
    "unsavedFiles",
    "closeCurrentFile",
    "closeFile",
    "getOpenFiles",
    "filter",
    "openFile",
    "getFile",
    "isModified",
    "length",
    "dialog",
    "qxl",
    "Confirm",
    "callback",
    "confirmed",
    "save",
    "dispose",
    "context",
    "caption",
    "yesButtonLabel",
    "noButtonLabel",
    "useBlocker",
    "show",
    "_onCreate",
    "readSync",
    "path",
    "file",
    "getFullPath",
    "isConfigFile",
    "converter",
    "ConfigUpgrader",
    "convertPureToTile",
    "convertedContent",
    "suggestedName",
    "match",
    "exec",
    "getName",
    "_onDelete",
    "_showAbout",
    "warn",
    "ev",
    "preventDefault",
    "returnValue",
    "configureButton",
    "button",
    "unConfigureButton",
    "_handleFileEvent",
    "getData",
    "action",
    "copy",
    "some",
    "isRelated",
    "resetCurrentFolder",
    "refresh",
    "__findConfigFile",
    "name",
    "demoFolder",
    "getChildren",
    "child",
    "startsWith",
    "substr",
    "handler",
    "handlerOptions",
    "_onChangeTreeSelection",
    "Preferences",
    "isQuickPreview",
    "mode",
    "__openSelectedFile",
    "node",
    "getType",
    "setCurrentFolder",
    "getParent",
    "setCurrentSelection",
    "resetCurrentSelection",
    "setEditing",
    "_applyCurrentFolder",
    "old",
    "removeRelatedBindings",
    "bind",
    "resetWriteableFolder",
    "_applyCurrentSelection",
    "resetDeleteableSelection",
    "_onChangeFileSelection",
    "sel",
    "getSelection",
    "getItem",
    "editorConfig",
    "handlerId",
    "getHandlerId",
    "FileHandlerRegistry",
    "getFileHandlerById",
    "getFileHandler",
    "instance",
    "Clazz",
    "setFile",
    "indexOf",
    "add",
    "editor",
    "AbstractEditor",
    "setHandlerOptions",
    "getHandlerOptions",
    "setSelection",
    "GlobalState",
    "setOpenedFocusedFile",
    "resetOpenedFocusedFile",
    "preview",
    "handlerType",
    "handlerConf",
    "info",
    "classname",
    "isExternal",
    "isOpen",
    "of",
    "OpenFile",
    "resetHandlerOptions",
    "isPermanent",
    "setItem",
    "setPermanent",
    "getTarget",
    "setModelSelection",
    "checkUnsavedChanged",
    "found",
    "f",
    "isTemporary",
    "resetModified",
    "dispatchByName",
    "noButtonIcon",
    "allowCancel",
    "force",
    "isCloseable",
    "resetPermanent",
    "selectionIndex",
    "remove",
    "currentHandler",
    "hasInterface",
    "constructor",
    "IEditor",
    "Start",
    "resetFile",
    "resetSelection",
    "replace",
    "CompareFiles",
    "fileHandlerConf",
    "clear",
    "destroy",
    "monaco",
    "oldModel",
    "getModel",
    "getUri",
    "selected",
    "_onCloseFile",
    "dom",
    "Element",
    "create",
    "id",
    "style",
    "insertEnd",
    "body",
    "theme",
    "Meta",
    "setTheme",
    "Dark",
    "group",
    "command",
    "Group",
    "Command",
    "renameCommand",
    "getActive",
    "item",
    "FileController",
    "_onChangeStackSelection",
    "selection",
    "page",
    "toArray",
    "find",
    "__getFileNamePrompt",
    "prompt",
    "Prompt",
    "content",
    "folder",
    "existsMessage",
    "handlePrompt",
    "filename",
    "exists",
    "readable",
    "writeable",
    "loaded",
    "modified",
    "temporary",
    "parentFolder",
    "createSync",
    "getBusTopic",
    "source",
    "addChild",
    "sortElements",
    "__findDroppable",
    "elem",
    "nodeType",
    "getAttribute",
    "parentNode",
    "domRoot",
    "root",
    "Inline",
    "addListenerOnce",
    "getContentElement",
    "getDomElement",
    "target",
    "setRoot",
    "setLayout",
    "layout",
    "Canvas",
    "bottom",
    "left",
    "resize",
    "bounds",
    "getBounds",
    "setLayoutProperties",
    "Math",
    "round",
    "width",
    "setMaxHeight",
    "height",
    "addListener",
    "innerHeight",
    "main",
    "container",
    "Composite",
    "Dock",
    "edge",
    "menuBar",
    "MenuBar",
    "uploadButton",
    "getButton",
    "uploadManager",
    "upload",
    "UploadMgr",
    "splitpane",
    "Pane",
    "rootFolder",
    "fakeIconFile",
    "getIconFile",
    "overrideIcon",
    "open",
    "fakeChildren",
    "icon",
    "dark",
    "Images",
    "getIcon",
    "tree",
    "FileSystem",
    "leftContainer",
    "VBox",
    "leftBar",
    "ToolBar",
    "reload",
    "buttonConfig",
    "getButtonConfiguration",
    "args",
    "flex",
    "list",
    "form",
    "List",
    "setAppearance",
    "controller",
    "setDelegate",
    "createItem",
    "FileTabItem",
    "bindItem",
    "index",
    "bindDefaultProperties",
    "bindProperty",
    "Stack",
    "startOpenFile",
    "setCloseable",
    "dialogConf",
    "modal",
    "minWidth",
    "min",
    "Viewport",
    "getWidth",
    "maxHeight",
    "getHeight",
    "Version",
    "VERSION",
    "DATE",
    "REV",
    "LIBRARY_VERSION_PURE",
    "LIBRARY_VERSION_TILE",
    "getServer",
    "getServerPhpVersion",
    "BigAlert",
    "destruct",
    "_disposeObjects",
    "application",
    "DeferredCall",
    "resetRoot",
    "schedule",
    "removeChild",
    "unsubscribe",
    "Main",
    "$$instance"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/Main.js"
  ],
  "sourcesContent": [
    "/* Main.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Main class of the CometVisu file manager.\n * @author Tobias BrÃ¤utigam\n * @since 0.12.0\n *\n * @asset(manager/*)\n */\nqx.Class.define('cv.ui.manager.Main', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  include: [cv.ui.manager.control.MFileEventHandler],\n\n  implement: [cv.ui.manager.IActionHandler, cv.ui.manager.control.IFileEventHandler],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    cv.ui.manager.model.BackupFolder.getInstance();\n    this._checkEnvironment();\n    this.initOpenFiles(new qx.data.Array());\n    this.__actionDispatcher = cv.ui.manager.control.ActionDispatcher.getInstance();\n    this.__actionDispatcher.setMain(this);\n\n    this.__initCommands();\n    this._draw();\n\n    qx.event.message.Bus.subscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // Initialize tooltip manager\n    qx.ui.tooltip.Manager.getInstance();\n\n    //qx.event.Registration.addListener(window, 'beforeunload', this._onBeforeUnload, this);\n    window.addEventListener('beforeunload', event => {\n      this._onBeforeUnload(event);\n    });\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ROOT: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    openFiles: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    /**\n     * Current selected folder (if a file is selected its parent folder) is writeable.\n     */\n    writeableFolder: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeWriteableFolder'\n    },\n\n    currentFolder: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentFolder',\n      event: 'changeCurrentFolder'\n    },\n\n    currentSelection: {\n      check: 'cv.ui.manager.model.FileItem',\n      nullable: true,\n      apply: '_applyCurrentSelection',\n      event: 'changeCurrentSelection'\n    },\n\n    deleteableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeDeleteableSelection'\n    },\n\n    renameableSelection: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeRenameableSelection'\n    },\n\n    visible: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeVisible',\n      apply: '_applyVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __previewFileIndex: null,\n    __root: null,\n    _pane: null,\n    _tree: null,\n    _stack: null,\n    _oldCommandGroup: null,\n    _managerCommands: null,\n    _mainContent: null,\n    _openFilesController: null,\n    _hiddenConfigFakeFile: null,\n    __actionDispatcher: null,\n\n    _applyVisible(value) {\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      if (value) {\n        manager.setActive(this._managerCommands);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'block');\n      } else {\n        manager.setActive(this._oldCommandGroup);\n        qx.bom.element.Style.set(this.__getRoot(), 'display', 'none');\n      }\n    },\n\n    _checkEnvironment() {\n      cv.io.rest.Client.getFsClient().checkEnvironmentSync(function (err, res) {\n        if (err) {\n          cv.ui.manager.snackbar.Controller.error(err);\n        } else if (res) {\n          res.forEach(function (env) {\n            let refreshActions = false;\n            switch (env.entity) {\n              case '.':\n                // config folder must be writeable\n                if ((env.state & 1) === 0) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder does not exists'));\n                } else if ((env.state & 2) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setReadable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not readable'));\n                } else if ((env.state & 4) === 0) {\n                  cv.ui.manager.model.FileItem.ROOT.setWriteable(false);\n                  refreshActions = true;\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('config folder is not writeable'));\n                }\n                if (refreshActions) {\n                  const widget = this.__actionDispatcher.getFocusedWidget();\n                  this.__actionDispatcher.resetFocusedWidget();\n                  this.__actionDispatcher.setFocusedWidget(widget);\n                }\n                break;\n\n              case 'backup':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('backup folder is not writeable'));\n                }\n                break;\n\n              case 'media':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('media folder is not writeable'));\n                }\n                break;\n\n              case 'hidden.php':\n                if ((env.state & 4) === 0 && (env.state & 1) === 1) {\n                  cv.ui.manager.snackbar.Controller.error(\n                    qx.locale.Manager.tr('Hidden configuration file (hidden.php) not writeable')\n                  );\n                }\n                break;\n            }\n          }, this);\n        }\n      }, this);\n    },\n\n    canHandleAction(actionName) {\n      if (actionName === 'delete' && this.getCurrentSelection() && !this.getCurrentSelection().isWriteable()) {\n        // needs a writeable file\n        return false;\n      }\n      let actions = ['close', 'quit', 'about'];\n      const currentFolder = this.getCurrentFolder();\n      if (currentFolder.isWriteable()) {\n        actions.push('new-file');\n        actions.push('new-folder');\n        actions.push('delete');\n        actions.push('upload');\n        actions.push('clone');\n        actions.push('convertToTile');\n      }\n      if (cv.ui.manager.model.FileItem.ROOT.isWriteable()) {\n        actions.push('new-config-file');\n      }\n      return actions.includes(actionName);\n    },\n\n    _doClose() {\n      if (document.querySelector('#main.loading')) {\n        // there is no config file loaded, load the default one\n        let configLoader = new cv.util.ConfigLoader();\n        let app = qx.core.Init.getApplication();\n        configLoader.load(app.bootstrap, app);\n      }\n      this.setVisible(false);\n    },\n\n    handleAction(actionName, data) {\n      let unsavedFiles;\n      switch (actionName) {\n        case 'close':\n          if (!data) {\n            this.closeCurrentFile();\n          } else {\n            this.closeFile(data);\n          }\n          break;\n\n        case 'quit':\n          unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n          if (unsavedFiles.length > 0) {\n            const dialog = new qxl.dialog.Confirm({\n              message: qx.locale.Manager.tr('You have files opened with unsaved changes, you should save them now.'),\n\n              callback(confirmed) {\n                if (confirmed) {\n                  unsavedFiles.forEach(openFile => {\n                    openFile.save();\n                  });\n                }\n                dialog.dispose();\n                this._doClose();\n              },\n              context: this,\n              caption: qx.locale.Manager.tr('Unsaved changes'),\n              yesButtonLabel: qx.locale.Manager.tr('Save & quit'),\n              noButtonLabel: qx.locale.Manager.tr('Quit without saving'),\n              useBlocker: true\n            });\n\n            dialog.show();\n          } else {\n            this._doClose();\n          }\n          break;\n\n        case 'new-file':\n          this._onCreate('file', null, data);\n          break;\n\n        case 'new-config-file':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: 'demo/templates/visu_config.xml' },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load config template'));\n              } else {\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'clone':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                // config files need to be cloned in the root folder\n                this._onCreate('config', res, cv.ui.manager.model.FileItem.ROOT);\n              } else {\n                this._onCreate('file', res);\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'convertToTile':\n          cv.io.rest.Client.getFsClient().readSync(\n            { path: data.file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Cannot load file content'));\n              } else if (data.file.isConfigFile()) {\n                const converter = new cv.util.ConfigUpgrader();\n                const [err, convertedContent] = converter.convertPureToTile(res);\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  let suggestedName = 'tile';\n                  const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(data.file.getName());\n\n                  if (match) {\n                    suggestedName = 'tile-' + match[1];\n                  }\n                  // config files need to be cloned in the root folder\n                  this._onCreate(\n                    'config',\n                    convertedContent,\n                    cv.ui.manager.model.FileItem.ROOT,\n                    'cv.ui.manager.editor.Source',\n                    suggestedName\n                  );\n                }\n              }\n            },\n            this\n          );\n\n          break;\n\n        case 'new-folder':\n          this._onCreate('dir', null, data);\n          break;\n\n        case 'delete':\n          this._onDelete(data);\n          break;\n\n        case 'upload':\n          // nothing to to, this is handled in another way\n          break;\n\n        case 'about':\n          this._showAbout();\n          break;\n\n        default:\n          this.warn(actionName + ' handling is not implemented yet!');\n          break;\n      }\n    },\n\n    _onBeforeUnload(ev) {\n      const unsavedFiles = this.getOpenFiles().filter(openFile => openFile.getFile().isModified());\n\n      if (unsavedFiles.length > 0) {\n        ev.preventDefault();\n        ev.returnValue = '';\n      } else {\n        delete ev['returnValue'];\n      }\n    },\n\n    configureButton(button) {},\n    unConfigureButton(button) {},\n\n    _handleFileEvent(ev) {\n      const data = ev.getData();\n      if (data.action === 'deleted') {\n        // check if file is currently opened and close it\n        const openFiles = this.getOpenFiles().copy();\n        openFiles.some(function (openFile) {\n          if (openFile.getFile().isRelated(data.path)) {\n            this.closeFile(openFile);\n          }\n          return false;\n        }, this);\n        if (this.getCurrentFolder() && this.getCurrentFolder().getFullPath() === data.path) {\n          this.resetCurrentFolder();\n        }\n      } else {\n        this.warn('unhandled file event', data.action);\n      }\n      this._tree.refresh();\n    },\n\n    __findConfigFile(name) {\n      let file = null;\n      let demoFolder = null;\n      cv.ui.manager.model.FileItem.ROOT.getChildren().some(child => {\n        if (child.getName() === 'demo') {\n          demoFolder = child;\n        } else if (child.getName() === name) {\n          file = child;\n          return true;\n        }\n        return false;\n      });\n      if (!file && demoFolder) {\n        if (name.startsWith('demo/')) {\n          name = name.substr(5);\n        }\n        // check demo configs\n        demoFolder.getChildren().some(child => {\n          if (child.getName() === name) {\n            file = child;\n            return true;\n          }\n          return false;\n        });\n      }\n      return file;\n    },\n\n    _onManagerEvent(ev) {\n      let data = ev.getData();\n      switch (ev.getName()) {\n        case 'cv.manager.compareFiles':\n          this.openFile(data, false);\n          break;\n\n        case 'cv.manager.openWith':\n          if (typeof data.file === 'string') {\n            // this can only by a file in the root dir (a config)\n            data.file = this.__findConfigFile(data.file);\n          }\n          this.openFile(data.file || this.getCurrentSelection(), false, data.handler, null, data.handlerOptions);\n\n          break;\n\n        case 'cv.manager.open':\n          if (typeof data === 'string') {\n            // this can only by a file in the root dir (a config)\n            data = this.__findConfigFile(data);\n          }\n          this.openFile(data || this.getCurrentSelection(), false);\n          break;\n      }\n    },\n\n    /**\n     * open selected file in preview mode\n     * @param ev\n     * @private\n     */\n    _onChangeTreeSelection(ev) {\n      const data = ev.getData();\n      if (\n        (cv.ui.manager.model.Preferences.getInstance().isQuickPreview() && data.mode === 'tap') ||\n        data.mode === 'dbltap'\n      ) {\n        this.__openSelectedFile(data.node, data.mode);\n      }\n      const node = data.node;\n      if (node) {\n        if (data.node.getType() === 'file') {\n          this.setCurrentFolder(data.node.getParent());\n        } else {\n          this.setCurrentFolder(node);\n        }\n        this.setCurrentSelection(node);\n      } else {\n        this.resetCurrentFolder();\n        this.resetCurrentSelection();\n      }\n    },\n\n    __openSelectedFile(node, mode) {\n      if (node) {\n        if (node.getType() === 'file') {\n          this.openFile(node, mode === 'tap');\n        } else if (mode === 'dbltap') {\n          // edit folder name on dbltap\n          node.setEditing(true);\n        }\n      }\n    },\n\n    _applyCurrentFolder(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'writeableFolder');\n      } else {\n        this.resetWriteableFolder();\n      }\n    },\n\n    _applyCurrentSelection(value, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n      }\n      if (value) {\n        value.bind('writeable', this, 'deleteableSelection');\n        value.bind('inTrash', this, 'renameableSelection', {\n          converter(value) {\n            return !value;\n          }\n        });\n      } else {\n        this.resetDeleteableSelection();\n      }\n    },\n\n    _onChangeFileSelection() {\n      const sel = this._openFilesController.getSelection();\n      if (sel.length > 0) {\n        const openFile = sel.getItem(0);\n        const file = openFile.getFile();\n        let editorConfig;\n        const handlerId = openFile.getHandlerId();\n        if (handlerId) {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n        } else {\n          editorConfig = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n        }\n        if (!editorConfig.instance) {\n          editorConfig.instance = new editorConfig.Clazz();\n        }\n        editorConfig.instance.setFile(file);\n        if (this._stack.indexOf(editorConfig.instance) < 0) {\n          this._stack.add(editorConfig.instance);\n        }\n        if (editorConfig.instance instanceof cv.ui.manager.editor.AbstractEditor) {\n          editorConfig.instance.setHandlerOptions(openFile.getHandlerOptions());\n        }\n        this._stack.setSelection([editorConfig.instance]);\n        this.__actionDispatcher.setFocusedWidget(editorConfig.instance);\n\n        cv.ui.manager.core.GlobalState.getInstance().setOpenedFocusedFile(file);\n      } else {\n        cv.ui.manager.core.GlobalState.getInstance().resetOpenedFocusedFile();\n      }\n    },\n\n    /**\n     * @param file {cv.ui.manager.model.FileItem} the file to open\n     * @param preview {Boolean} open the file in preview mode\n     * @param handlerId {String} use this handler to open the file (classname as string)\n     * @param handlerType {String} use a special handler type, e.g. 'edit' if you want to open the file with an editor and not a viewer\n     * @param handlerOptions\n     */\n    openFile(file, preview, handlerId, handlerType, handlerOptions) {\n      const openFiles = this.getOpenFiles();\n      let openFile;\n      let handlerConf;\n      if (!handlerId) {\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file, handlerType);\n\n        if (!handlerConf) {\n          // no handler\n          cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Cannot open file: \"%1\"', file.getName()));\n\n          return;\n        }\n        handlerId = handlerConf.Clazz.classname;\n      } else {\n        // check if this handler opens the file in a external frame that is not connected to the manager\n        handlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandlerById(handlerId);\n\n        if (!handlerConf.instance) {\n          handlerConf.instance = new handlerConf.Clazz();\n        }\n        if (handlerConf.instance.isExternal()) {\n          handlerConf.instance.setFile(file);\n          return;\n        }\n      }\n      const isOpen = openFiles.some(function (of) {\n        if (of.getFile() === file && handlerId === of.getHandlerId()) {\n          openFile = of;\n          return true;\n        }\n        return false;\n      });\n      if (!openFile) {\n        openFile = new cv.ui.manager.model.OpenFile(file, handlerId);\n      }\n      if (handlerOptions) {\n        openFile.setHandlerOptions(handlerOptions);\n      } else {\n        openFile.resetHandlerOptions();\n      }\n      if (preview === true) {\n        if (!openFile.isPermanent()) {\n          if (\n            this.__previewFileIndex !== null &&\n            openFiles.getItem(this.__previewFileIndex) &&\n            !openFiles.getItem(this.__previewFileIndex).isPermanent()\n          ) {\n            openFiles.setItem(this.__previewFileIndex, openFile);\n          } else {\n            this.__previewFileIndex = openFiles.length;\n            openFiles.push(openFile);\n          }\n          // do not 'downgrade' the permanent state\n          openFile.setPermanent(false);\n        }\n      } else {\n        if (!isOpen && (this.__previewFileIndex === null || openFiles.indexOf(openFile) !== this.__previewFileIndex)) {\n          openFiles.push(openFile);\n        }\n        openFile.setPermanent(true);\n        this.__previewFileIndex = null;\n      }\n      this._openFilesController.getTarget().setModelSelection([openFile]);\n    },\n\n    /**\n     * Opens a confirm dialog on how to treat the unsaved changes in the file if it has been modified and not saved.\n     * @param openFile {cv.ui.manager.model.OpenFile|cv.ui.manager.model.FileItem} file to check\n     * @return {boolean} true if the confirm dialog has been shown\n     */\n    checkUnsavedChanged(openFile) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return false;\n        }\n      }\n      const file = openFile.getFile();\n      if (file.isModified()) {\n        // check if temporary\n        let message = qx.locale.Manager.tr(\n          'This file has unsaved changes that will be lost when you close it without saving.'\n        );\n\n        if (file.isTemporary()) {\n          message = qx.locale.Manager.tr(\n            'This file has not been saved on the backend yet. It will be lost when you close it without saving.'\n          );\n        }\n        const dialog = new qxl.dialog.Confirm({\n          message: message,\n          callback: confirmed => {\n            if (confirmed === true) {\n              openFile.save();\n              this.closeFile(openFile, true);\n            } else if (confirmed === false) {\n              file.resetModified();\n              if (file.isTemporary()) {\n                qx.event.message.Bus.dispatchByName('cv.manager.file', {\n                  action: 'deleted',\n                  path: file.getFullPath()\n                });\n              }\n              this.closeFile(openFile, true);\n            } else {\n              // cancel closing, do nothing\n            }\n            dialog.dispose();\n          },\n          context: this,\n          caption: qx.locale.Manager.tr('Unsaved changes'),\n          yesButtonLabel: qx.locale.Manager.tr('Save & close'),\n          noButtonLabel: qx.locale.Manager.tr('Discard & close'),\n          noButtonIcon: 'qxl.dialog.icon.delete',\n          useBlocker: true,\n          allowCancel: true\n        });\n\n        dialog.show();\n        return true;\n      }\n      return false;\n    },\n\n    closeFile(openFile, force) {\n      if (openFile instanceof cv.ui.manager.model.FileItem) {\n        // find the opened file\n        const found = this.getOpenFiles().some(function (f) {\n          if (f.getFile().getFullPath() === openFile.getFullPath()) {\n            openFile = f;\n            return true;\n          }\n          return false;\n        });\n        if (!found) {\n          return;\n        }\n      }\n      if (!openFile || !openFile.isCloseable()) {\n        return;\n      }\n      const file = openFile.getFile();\n\n      // check if this file is modified\n      if (!force && this.checkUnsavedChanged(openFile)) {\n        return;\n      }\n      if (openFile instanceof cv.ui.manager.model.OpenFile) {\n        openFile.resetPermanent();\n      }\n      const currentSelection = this._openFilesController.getSelection();\n      let selectionIndex = -1;\n      const openFiles = this.getOpenFiles();\n      if (currentSelection.length > 0 && currentSelection.getItem(0) === openFile) {\n        // we need to select another file after this one got closed\n        selectionIndex = openFiles.indexOf(openFile);\n      }\n      openFiles.remove(openFile);\n      const currentHandler = this._stack.getSelection()[0];\n      if (\n        qx.Class.hasInterface(currentHandler.constructor, cv.ui.manager.editor.IEditor) &&\n        !(currentHandler instanceof cv.ui.manager.Start)\n      ) {\n        // reset the handlers file\n        currentHandler.resetFile();\n      }\n      if (this.getOpenFiles().length === 0) {\n        this._stack.resetSelection();\n        this.__actionDispatcher.resetFocusedWidget();\n        this.__previewFileIndex = null;\n      }\n      if (selectionIndex > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(selectionIndex - 1));\n      } else if (selectionIndex === 0 && openFiles.length > 0) {\n        this._openFilesController.getSelection().replace(openFiles.getItem(0));\n      }\n\n      if (file instanceof cv.ui.manager.model.CompareFiles) {\n        const fileHandlerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file);\n\n        fileHandlerConf.instance.clear();\n        if (\n          openFiles.filter(function (openFile) {\n            return openFile.getFile() instanceof cv.ui.manager.model.CompareFiles;\n          }).length === 0\n        ) {\n          fileHandlerConf.instance.destroy();\n          fileHandlerConf.instance = null;\n        }\n      } else if (window.monaco && openFile.getHandlerId() === 'cv.ui.manager.editor.Source') {\n        // close textmodel in monaco editor if exists\n        const oldModel = window.monaco.editor.getModel(file.getUri());\n        if (oldModel) {\n          oldModel.dispose();\n        }\n      }\n    },\n\n    closeCurrentFile() {\n      const selected =\n        this._openFilesController.getSelection().length > 0\n          ? this._openFilesController.getSelection().getItem(0)\n          : null;\n      if (selected) {\n        this.closeFile(selected);\n      }\n    },\n\n    _onCloseFile(ev) {\n      this.closeFile(ev.getData());\n    },\n\n    __getRoot() {\n      if (!this.__root) {\n        this.__root = qx.dom.Element.create('div', {\n          id: 'manager',\n          style: 'position: absolute; top: 0; left: 0; right: 0; bottom: 0;'\n        });\n\n        qx.dom.Element.insertEnd(this.__root, document.body);\n        qx.theme.manager.Meta.getInstance().setTheme(cv.theme.Dark);\n      }\n      return this.__root;\n    },\n\n    __initCommands() {\n      const group = (this._managerCommands = new qx.ui.command.Group());\n      group.add('save', new qx.ui.command.Command('Ctrl+S'));\n      group.add('save-as', new qx.ui.command.Command('Ctrl+Shift+S'));\n      // this command will close the browser window, thats not what we want\n      // group.add('close', new qx.ui.command.Command('Ctrl+W'));\n      group.add('new-file', new qx.ui.command.Command('Ctrl+N'));\n      group.add('new-folder', new qx.ui.command.Command('Ctrl+Shift+N'));\n      group.add('quit', new qx.ui.command.Command('Ctrl+Q'));\n      // group.add('delete', new qx.ui.command.Command('Ctrl+Del'));\n\n      const renameCommand = new qx.ui.command.Command('F2');\n      group.add('rename', renameCommand);\n      this.bind('renameableSelection', renameCommand, 'enabled');\n\n      group.add('undo', new qx.ui.command.Command('Ctrl+Z'));\n      group.add('redo', new qx.ui.command.Command('Ctrl+Y'));\n\n      // edit commands (adding cut/copy/paste command will deactivate the native browser functions)\n      // and as we cannot simulate pasting from clipboard, we do not use them here\n      group.add('cut', new qx.ui.command.Command('Ctrl+X'));\n      group.add('copy', new qx.ui.command.Command('Ctrl+C'));\n      group.add('paste', new qx.ui.command.Command('Ctrl+V'));\n\n      group.add('help', new qx.ui.command.Command('F1'));\n\n      const manager = qx.core.Init.getApplication().getCommandManager();\n      this._oldCommandGroup = manager.getActive();\n      manager.add(group);\n      manager.setActive(group);\n    },\n\n    _onDelete(file) {\n      const item = file || this.getCurrentSelection();\n      if (item) {\n        cv.ui.manager.control.FileController.getInstance().delete(item);\n      }\n    },\n\n    _onChangeStackSelection(ev) {\n      const selection = ev.getData();\n      const openFiles = [];\n      // sync tab selection with currently visible page\n      selection.forEach(function (page) {\n        const openFile = this.getOpenFiles()\n          .toArray()\n          .find(function (openFile) {\n            return openFile.getFile() === page.getFile() && openFile.getHandlerId() === page.classname;\n          });\n        if (openFile) {\n          openFiles.push(openFile);\n        }\n      }, this);\n\n      this._openFilesController.getSelection().replace(openFiles);\n    },\n\n    __getFileNamePrompt(message, callback, context, value, caption) {\n      const prompt = new cv.ui.manager.dialog.Prompt({\n        message: message,\n        callback: callback || null,\n        context: context || null,\n        value: value || null,\n        caption: caption || '',\n        filter: /[\\w\\d_\\-\\.\\s]/\n      });\n\n      prompt.show();\n      return prompt;\n    },\n\n    _onCreate(type, content, folder, handlerId, suggestedName) {\n      const currentFolder = folder || this.getCurrentFolder();\n      if (!currentFolder) {\n        return;\n      }\n      let message;\n      let existsMessage;\n      if (type === 'config') {\n        message = qx.locale.Manager.tr(\n          'Please enter the name of the new configuration (without \"visu_config_\" at the beginning and \".xml\" at the end)'\n        );\n\n        existsMessage = qx.locale.Manager.tr('A configuration with this name already exists.');\n      } else if (type === 'file') {\n        message = qx.locale.Manager.tr('Please enter the file name.');\n        existsMessage = qx.locale.Manager.tr('A file with this name already exists.');\n      } else {\n        message = qx.locale.Manager.tr('Please enter the folder name.');\n        existsMessage = qx.locale.Manager.tr('A folder with this name already exists.');\n      }\n      const handlePrompt = function (name) {\n        if (!name) {\n          // canceled\n          return;\n        }\n        let filename = name;\n        // add visu_config_..-xml\n        if (type === 'config') {\n          const match = /visu[_-]config[_-]([\\w\\d_-]+)(\\.xml)?/.exec(name);\n          if (match) {\n            name = match[1];\n          }\n          filename = 'visu_config_' + name + '.xml';\n        }\n        // check if name does not exist\n        const exists = currentFolder.getChildren().some(function (child) {\n          return child.getName() === filename && child.getType() === type;\n        }, this);\n\n        if (exists) {\n          cv.ui.manager.snackbar.Controller.error(existsMessage);\n          this.__getFileNamePrompt(message, handlePrompt, this, name);\n        } else {\n          const item = new cv.ui.manager.model.FileItem(filename, currentFolder.getFullPath(), currentFolder);\n\n          item.set({\n            type: type === 'config' ? 'file' : type,\n            readable: true,\n            writeable: true,\n            loaded: true,\n            modified: true,\n            temporary: true,\n            parentFolder: currentFolder.getFullPath(),\n            content: content || ''\n          });\n\n          if (type === 'dir') {\n            // create directory directly\n            cv.io.rest.Client.getFsClient().createSync(\n              {\n                path: item.getFullPath(),\n                type: type\n              },\n\n              null,\n              function (err) {\n                if (err) {\n                  cv.ui.manager.snackbar.Controller.error(err);\n                } else {\n                  cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('Folder has been created'));\n\n                  item.set({\n                    modified: false,\n                    temporary: false\n                  });\n\n                  qx.event.message.Bus.dispatchByName(item.getBusTopic(), {\n                    type: 'created',\n                    file: item,\n                    data: '',\n                    source: this\n                  });\n                }\n              },\n              this\n            );\n          }\n          currentFolder.addChild(item);\n          currentFolder.sortElements();\n          this._tree.refresh();\n          this._tree.setSelection(item);\n          // do not open new folders\n          if (type !== 'dir') {\n            // open the file in an editor\n            this.openFile(item, false, handlerId, 'edit');\n          }\n        }\n      };\n\n      this.__getFileNamePrompt(message, handlePrompt, this, suggestedName);\n    },\n\n    /**\n     * Finds next droppable parent of the given element. Maybe the element itself as well.\n     *\n     * Looks for the attribute <code>qxDroppable</code> with the value <code>on</code>.\n     *\n     * @param elem {Element} The element to query\n     * @return {Element} The next parent element which is droppable. May also be <code>null</code>\n     */\n    __findDroppable(elem) {\n      while (elem && elem.nodeType === 1) {\n        if (elem.getAttribute('qxDroppable') === 'on') {\n          return elem;\n        }\n\n        elem = elem.parentNode;\n      }\n\n      return null;\n    },\n\n    // overridden\n    _draw() {\n      const domRoot = this.__getRoot();\n      const root = new qx.ui.root.Inline(domRoot, true, true);\n      this.bind('visible', root, 'visibility', {\n        converter(visible) {\n          return visible ? 'visible' : 'excluded';\n        }\n      });\n\n      root.addListenerOnce('appear', () => {\n        // disable file drop\n        const element = root.getContentElement().getDomElement();\n        element.addEventListener(\n          'drop',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n\n        element.addEventListener(\n          'dragover',\n          function (ev) {\n            const target = this.__findDroppable(ev.target);\n            if (!target) {\n              ev.preventDefault();\n            }\n          }.bind(this)\n        );\n      });\n      qx.core.Init.getApplication().setRoot(root);\n      root.setLayout(new qx.ui.layout.Canvas());\n\n      const snackbar = cv.ui.manager.snackbar.Controller.getInstance();\n      root.add(snackbar, {\n        bottom: 10,\n        left: 200\n      });\n\n      /**\n       *\n       */\n      function resize() {\n        const bounds = root.getBounds();\n        snackbar.setLayoutProperties({\n          bottom: 10,\n          left: Math.round(bounds.width / 2) - 150\n        });\n\n        snackbar.setMaxHeight(bounds.height - 40);\n      }\n      root.addListener('resize', resize, this);\n      root.addListener('appear', resize, this);\n      window.addEventListener('resize', function () {\n        // sync window height with manager height\n        domRoot.style.height = window.innerHeight + 'px';\n      });\n\n      const main = new qx.ui.container.Composite(new qx.ui.layout.Dock());\n      root.add(main, { edge: 0 });\n      // menu on top\n      const menuBar = cv.ui.manager.MenuBar.getInstance();\n      main.add(menuBar, { edge: 'north' });\n\n      const uploadButton = menuBar.getButton('upload');\n      const uploadManager = new cv.ui.manager.upload.UploadMgr(uploadButton);\n      this.bind('currentFolder', uploadManager, 'folder');\n\n      this._pane = new qx.ui.splitpane.Pane();\n      main.add(this._pane, { edge: 'center' });\n\n      const rootFolder = (cv.ui.manager.model.FileItem.ROOT = new cv.ui.manager.model.FileItem('.'));\n      const fakeIconFile = cv.ui.manager.model.FileItem.getIconFile();\n      // TODO: needs to be verified by the backend\n      rootFolder.set({\n        overrideIcon: true,\n        writeable: true,\n        readable: true,\n        open: true,\n        fakeChildren: [fakeIconFile],\n        icon: cv.theme.dark.Images.getIcon('home', 18)\n      });\n\n      this.setCurrentFolder(rootFolder);\n      this._tree = new cv.ui.manager.tree.FileSystem(rootFolder);\n      this._tree.addListener('changeSelection', this._onChangeTreeSelection, this);\n\n      // left container\n      const leftContainer = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // left toolbar\n      const leftBar = new cv.ui.manager.ToolBar(uploadManager);\n      this.bind('currentFolder', leftBar, 'folder');\n      this.bind('currentSelection', leftBar, 'file');\n      leftBar.addListener('reload', this._tree.reload, this._tree);\n\n      // globally bind writeable folder to command for new files\n      const buttonConfig = menuBar.getButtonConfiguration();\n      this.bind('writeableFolder', buttonConfig['new-file'].args[2], 'enabled');\n      this.bind('writeableFolder', buttonConfig['new-folder'].args[2], 'enabled');\n\n      // this.bind('deleteableSelection', buttonConfig['delete'].args[2], 'enabled');\n\n      leftContainer.add(leftBar);\n      leftContainer.add(this._tree, { flex: 1 });\n      this._pane.add(leftContainer, 0);\n      cv.ui.manager.model.Preferences.getInstance().bind('expertMode', leftContainer, 'visibility', {\n        converter(value) {\n          return value ? 'visible' : 'excluded';\n        }\n      });\n\n      this._mainContent = new qx.ui.container.Composite(new qx.ui.layout.VBox());\n\n      // tab list\n      const list = new qx.ui.form.List(true);\n      list.setAppearance('open-files-tabs');\n      this._openFilesController = new qx.data.controller.List(this.getOpenFiles(), list, 'file.name');\n\n      this._openFilesController.setDelegate({\n        createItem: function () {\n          const item = new cv.ui.manager.form.FileTabItem();\n          item.addListener('close', this._onCloseFile, this);\n          return item;\n        }.bind(this),\n\n        bindItem(controller, item, index) {\n          controller.bindDefaultProperties(item, index);\n          controller.bindProperty('file.permanent', 'permanent', null, item, index);\n\n          controller.bindProperty('file.modified', 'modified', null, item, index);\n\n          controller.bindProperty('icon', 'icon', null, item, index);\n          controller.bindProperty('closeable', 'closeable', null, item, index);\n        }\n      });\n\n      list.addListener('changeSelection', this._onChangeFileSelection, this);\n      this._mainContent.add(list);\n\n      this._stack = new qx.ui.container.Stack();\n      this._stack.addListener('changeSelection', this._onChangeStackSelection, this);\n\n      this._mainContent.add(this._stack, { flex: 1 });\n      this._pane.add(this._mainContent, 1);\n\n      const startOpenFile = new cv.ui.manager.model.OpenFile(rootFolder, 'cv.ui.manager.Start');\n\n      startOpenFile.setCloseable(false);\n      this.getOpenFiles().push(startOpenFile);\n      list.setModelSelection([startOpenFile]);\n    },\n\n    _showAbout() {\n      const app = qx.core.Init.getApplication();\n      const dialogConf = {\n        caption: qx.locale.Manager.tr('About'),\n        modal: true,\n        minWidth: Math.min(500, qx.bom.Viewport.getWidth()),\n        maxHeight: qx.bom.Viewport.getHeight(),\n        message: `\n<div class=\"about-cv\">\n <img src=\"resource/icons/comet_icon_128x128_ff8000.png\" width=\"128\" height=\"128\"/>\n <h2>CometVisu ${cv.Version.VERSION}</h2>\n <div class=\"info\">\n   <label for=\"date\">${qx.locale.Manager.tr('Build date')}: </label>\n   <span id=\"date\">${cv.Version.DATE}</span><br/>\n   <label for=\"build\">${qx.locale.Manager.tr('Build revision')}: </label>\n   <span id=\"build\">${cv.Version.REV}</span><br/>\n   <label for=\"lib-version\">${qx.locale.Manager.tr('Library version')}: </label>\n   <span id=\"lib-version\">Pure: ${cv.Version.LIBRARY_VERSION_PURE}, Tile: ${cv.Version.LIBRARY_VERSION_TILE}</span><br/>\n   <label for=\"server\">${qx.locale.Manager.tr('Server')}: </label>\n   <span id=\"server\">${app.getServer() || '?'}</span><br/>\n   <label for=\"php-version\">${qx.locale.Manager.tr('PHP version') || '?'}: </label>\n   <span id=\"php-version\">${app.getServerPhpVersion()}</span>\n </div>\n</div>`\n      };\n\n      new cv.ui.manager.dialog.BigAlert(dialogConf).show();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_pane', '_tree', '_stack', '_mainContent', '_openFilesController');\n\n    // restore former command group\n    const application = qx.core.Init.getApplication();\n    const manager = application.getCommandManager();\n    manager.setActive(this._oldCommandGroup);\n    this._oldCommandGroup = null;\n\n    // defer the reset to let the dispose queue to be emptied before removing the root\n    new qx.util.DeferredCall(function () {\n      application.resetRoot();\n    }).schedule();\n\n    document.body.removeChild(this.__root);\n    this.__root = null;\n    this.__actionDispatcher = null;\n\n    qx.event.message.Bus.unsubscribe('cv.manager.*', this._onManagerEvent, this);\n\n    // destroy the singleton instance\n    delete cv.ui.manager.Main.$$instance;\n  }\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,oBAAhB,EAAsC;IACpCC,MAAM,EAAEN,EAAE,CAACO,IAAH,CAAQC,MADoB;IAEpCC,IAAI,EAAE,WAF8B;IAGpCC,OAAO,EAAE,CAACC,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBC,iBAAvB,CAH2B;IAKpCC,SAAS,EAAE,CAACL,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcI,cAAf,EAA+BN,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBI,iBAArD,CALyB;;IAOpC;AACF;AACA;AACA;AACA;IACEC,SAZoC,uBAYxB;MAAA;;MACV;MACAR,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBC,YAApB,CAAiCC,WAAjC;;MACA,KAAKC,iBAAL;;MACA,KAAKC,aAAL,CAAmB,IAAIxB,EAAE,CAACyB,IAAH,CAAQC,KAAZ,EAAnB;MACA,KAAKC,QAAL,GAA0BhB,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBc,gBAAtB,CAAuCN,WAAvC,EAA1B;;MACA,KAAKK,QAAL,CAAwBE,OAAxB,CAAgC,IAAhC;;MAEA,KAAKC,QAAL;;MACA,KAAKC,KAAL;;MAEA/B,EAAE,CAACgC,KAAH,CAASC,OAAT,CAAiBC,GAAjB,CAAqBC,SAArB,CAA+B,cAA/B,EAA+C,KAAKC,eAApD,EAAqE,IAArE,EAXU,CAaV;;MACApC,EAAE,CAACY,EAAH,CAAMyB,OAAN,CAAcC,OAAd,CAAsBhB,WAAtB,GAdU,CAgBV;;MACAiB,MAAM,CAACC,gBAAP,CAAwB,cAAxB,EAAwC,UAAAR,KAAK,EAAI;QAC/C,KAAI,CAACS,eAAL,CAAqBT,KAArB;MACD,CAFD;IAGD,CAhCmC;;IAkCpC;AACF;AACA;AACA;AACA;IACEU,OAAO,EAAE;MACPC,IAAI,EAAE;IADC,CAvC2B;;IA2CpC;AACF;AACA;AACA;AACA;IACEC,UAAU,EAAE;MACVC,SAAS,EAAE;QACTC,KAAK,EAAE,eADE;QAETC,YAAY,EAAE;MAFL,CADD;;MAMV;AACJ;AACA;MACIC,eAAe,EAAE;QACfF,KAAK,EAAE,SADQ;QAEfG,IAAI,EAAE,KAFS;QAGfjB,KAAK,EAAE;MAHQ,CATP;MAeVkB,aAAa,EAAE;QACbJ,KAAK,EAAE,8BADM;QAEbK,QAAQ,EAAE,IAFG;QAGbC,KAAK,EAAE,qBAHM;QAIbpB,KAAK,EAAE;MAJM,CAfL;MAsBVqB,gBAAgB,EAAE;QAChBP,KAAK,EAAE,8BADS;QAEhBK,QAAQ,EAAE,IAFM;QAGhBC,KAAK,EAAE,wBAHS;QAIhBpB,KAAK,EAAE;MAJS,CAtBR;MA6BVsB,mBAAmB,EAAE;QACnBR,KAAK,EAAE,SADY;QAEnBG,IAAI,EAAE,KAFa;QAGnBjB,KAAK,EAAE;MAHY,CA7BX;MAmCVuB,mBAAmB,EAAE;QACnBT,KAAK,EAAE,SADY;QAEnBG,IAAI,EAAE,KAFa;QAGnBjB,KAAK,EAAE;MAHY,CAnCX;MAyCVwB,OAAO,EAAE;QACPV,KAAK,EAAE,SADA;QAEPG,IAAI,EAAE,IAFC;QAGPjB,KAAK,EAAE,eAHA;QAIPoB,KAAK,EAAE;MAJA;IAzCC,CAhDwB;;IAiGpC;AACF;AACA;AACA;AACA;IACEK,OAAO,EAAE;MACPC,QAAkB,EAAE,IADb;MAEPC,QAAM,EAAE,IAFD;MAGPC,KAAK,EAAE,IAHA;MAIPC,KAAK,EAAE,IAJA;MAKPC,MAAM,EAAE,IALD;MAMPC,gBAAgB,EAAE,IANX;MAOPC,gBAAgB,EAAE,IAPX;MAQPC,YAAY,EAAE,IARP;MASPC,oBAAoB,EAAE,IATf;MAUPC,qBAAqB,EAAE,IAVhB;MAWPxC,QAAkB,EAAE,IAXb;MAaPyC,aAbO,yBAaOC,KAbP,EAac;QACnB,IAAMxD,OAAO,GAAGb,EAAE,CAACO,IAAH,CAAQ+D,IAAR,CAAaC,cAAb,GAA8BC,iBAA9B,EAAhB;;QACA,IAAIH,KAAJ,EAAW;UACTxD,OAAO,CAAC4D,SAAR,CAAkB,KAAKT,gBAAvB;UACAhE,EAAE,CAAC0E,GAAH,CAAOC,OAAP,CAAeC,KAAf,CAAqBC,GAArB,CAAyB,KAAKC,QAAL,EAAzB,EAA2C,SAA3C,EAAsD,OAAtD;QACD,CAHD,MAGO;UACLjE,OAAO,CAAC4D,SAAR,CAAkB,KAAKV,gBAAvB;UACA/D,EAAE,CAAC0E,GAAH,CAAOC,OAAP,CAAeC,KAAf,CAAqBC,GAArB,CAAyB,KAAKC,QAAL,EAAzB,EAA2C,SAA3C,EAAsD,MAAtD;QACD;MACF,CAtBM;MAwBPvD,iBAxBO,+BAwBa;QAClBZ,EAAE,CAACoE,EAAH,CAAMC,IAAN,CAAWC,MAAX,CAAkBC,WAAlB,GAAgCC,oBAAhC,CAAqD,UAAUC,GAAV,EAAeC,GAAf,EAAoB;UACvE,IAAID,GAAJ,EAAS;YACPzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCJ,GAAxC;UACD,CAFD,MAEO,IAAIC,GAAJ,EAAS;YACdA,GAAG,CAACI,OAAJ,CAAY,UAAUC,GAAV,EAAe;cACzB,IAAIC,cAAc,GAAG,KAArB;;cACA,QAAQD,GAAG,CAACE,MAAZ;gBACE,KAAK,GAAL;kBACE;kBACA,IAAI,CAACF,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAAxB,EAA2B;oBACzBlF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,+BAArB,CAAxC;kBACD,CAFD,MAEO,IAAI,CAACL,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAAxB,EAA2B;oBAChClF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA7B,CAAkCsD,WAAlC,CAA8C,KAA9C;oBACAN,cAAc,GAAG,IAAjB;oBACAhF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,+BAArB,CAAxC;kBACD,CAJM,MAIA,IAAI,CAACL,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAAxB,EAA2B;oBAChClF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA7B,CAAkCuD,YAAlC,CAA+C,KAA/C;oBACAP,cAAc,GAAG,IAAjB;oBACAhF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,gCAArB,CAAxC;kBACD;;kBACD,IAAIJ,cAAJ,EAAoB;oBAClB,IAAMQ,MAAM,GAAG,KAAKxE,QAAL,CAAwByE,gBAAxB,EAAf;;oBACA,KAAKzE,QAAL,CAAwB0E,kBAAxB;;oBACA,KAAK1E,QAAL,CAAwB2E,gBAAxB,CAAyCH,MAAzC;kBACD;;kBACD;;gBAEF,KAAK,QAAL;kBACE,IAAI,CAACT,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAApB,IAAyB,CAACH,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAAjD,EAAoD;oBAClDlF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,gCAArB,CAAxC;kBACD;;kBACD;;gBAEF,KAAK,OAAL;kBACE,IAAI,CAACL,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAApB,IAAyB,CAACH,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAAjD,EAAoD;oBAClDlF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,+BAArB,CAAxC;kBACD;;kBACD;;gBAEF,KAAK,YAAL;kBACE,IAAI,CAACL,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAApB,IAAyB,CAACH,GAAG,CAACG,KAAJ,GAAY,CAAb,MAAoB,CAAjD,EAAoD;oBAClDlF,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CACExF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,sDAArB,CADF;kBAGD;;kBACD;cAvCJ;YAyCD,CA3CD,EA2CG,IA3CH;UA4CD;QACF,CAjDD,EAiDG,IAjDH;MAkDD,CA3EM;MA6EPQ,eA7EO,2BA6ESC,UA7ET,EA6EqB;QAC1B,IAAIA,UAAU,KAAK,QAAf,IAA2B,KAAKC,mBAAL,EAA3B,IAAyD,CAAC,KAAKA,mBAAL,GAA2BC,WAA3B,EAA9D,EAAwG;UACtG;UACA,OAAO,KAAP;QACD;;QACD,IAAIC,OAAO,GAAG,CAAC,OAAD,EAAU,MAAV,EAAkB,OAAlB,CAAd;QACA,IAAMzD,aAAa,GAAG,KAAK0D,gBAAL,EAAtB;;QACA,IAAI1D,aAAa,CAACwD,WAAd,EAAJ,EAAiC;UAC/BC,OAAO,CAACE,IAAR,CAAa,UAAb;UACAF,OAAO,CAACE,IAAR,CAAa,YAAb;UACAF,OAAO,CAACE,IAAR,CAAa,QAAb;UACAF,OAAO,CAACE,IAAR,CAAa,QAAb;UACAF,OAAO,CAACE,IAAR,CAAa,OAAb;UACAF,OAAO,CAACE,IAAR,CAAa,eAAb;QACD;;QACD,IAAIlG,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA7B,CAAkC+D,WAAlC,EAAJ,EAAqD;UACnDC,OAAO,CAACE,IAAR,CAAa,iBAAb;QACD;;QACD,OAAOF,OAAO,CAACG,QAAR,CAAiBN,UAAjB,CAAP;MACD,CAhGM;MAkGPO,QAlGO,sBAkGI;QACT,IAAIC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAJ,EAA6C;UAC3C;UACA,IAAIC,YAAY,GAAG,IAAIvG,EAAE,CAACwG,IAAH,CAAQC,YAAZ,EAAnB;UACA,IAAIC,GAAG,GAAGrH,EAAE,CAACO,IAAH,CAAQ+D,IAAR,CAAaC,cAAb,EAAV;UACA2C,YAAY,CAACI,IAAb,CAAkBD,GAAG,CAACE,SAAtB,EAAiCF,GAAjC;QACD;;QACD,KAAKG,UAAL,CAAgB,KAAhB;MACD,CA1GM;MA4GPC,YA5GO,wBA4GMjB,UA5GN,EA4GkB/E,IA5GlB,EA4GwB;QAC7B,IAAIiG,YAAJ;;QACA,QAAQlB,UAAR;UACE,KAAK,OAAL;YACE,IAAI,CAAC/E,IAAL,EAAW;cACT,KAAKkG,gBAAL;YACD,CAFD,MAEO;cACL,KAAKC,SAAL,CAAenG,IAAf;YACD;;YACD;;UAEF,KAAK,MAAL;YACEiG,YAAY,GAAG,KAAKG,YAAL,GAAoBC,MAApB,CAA2B,UAAAC,QAAQ;cAAA,OAAIA,QAAQ,CAACC,OAAT,GAAmBC,UAAnB,EAAJ;YAAA,CAAnC,CAAf;;YAEA,IAAIP,YAAY,CAACQ,MAAb,GAAsB,CAA1B,EAA6B;cAC3B,IAAMC,MAAM,GAAG,IAAIC,GAAG,CAACD,MAAJ,CAAWE,OAAf,CAAuB;gBACpCpG,OAAO,EAAEjC,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,uEAArB,CAD2B;gBAGpCuC,QAHoC,oBAG3BC,SAH2B,EAGhB;kBAClB,IAAIA,SAAJ,EAAe;oBACbb,YAAY,CAACjC,OAAb,CAAqB,UAAAsC,QAAQ,EAAI;sBAC/BA,QAAQ,CAACS,IAAT;oBACD,CAFD;kBAGD;;kBACDL,MAAM,CAACM,OAAP;;kBACA,KAAK1B,QAAL;gBACD,CAXmC;gBAYpC2B,OAAO,EAAE,IAZ2B;gBAapCC,OAAO,EAAE3I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,iBAArB,CAb2B;gBAcpC6C,cAAc,EAAE5I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,aAArB,CAdoB;gBAepC8C,aAAa,EAAE7I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,qBAArB,CAfqB;gBAgBpC+C,UAAU,EAAE;cAhBwB,CAAvB,CAAf;cAmBAX,MAAM,CAACY,IAAP;YACD,CArBD,MAqBO;cACL,KAAKhC,QAAL;YACD;;YACD;;UAEF,KAAK,UAAL;YACE,KAAKiC,SAAL,CAAe,MAAf,EAAuB,IAAvB,EAA6BvH,IAA7B;;YACA;;UAEF,KAAK,iBAAL;YACEd,EAAE,CAACoE,EAAH,CAAMC,IAAN,CAAWC,MAAX,CAAkBC,WAAlB,GAAgC+D,QAAhC,CACE;cAAEC,IAAI,EAAE;YAAR,CADF,EAEE,UAAU9D,GAAV,EAAeC,GAAf,EAAoB;cAClB,IAAID,GAAJ,EAAS;gBACPzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,6BAArB,CAAxC;cACD,CAFD,MAEO;gBACL,KAAKiD,SAAL,CAAe,QAAf,EAAyB3D,GAAzB,EAA8B1E,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA3D;cACD;YACF,CARH,EASE,IATF;YAYA;;UAEF,KAAK,OAAL;YACEhC,EAAE,CAACoE,EAAH,CAAMC,IAAN,CAAWC,MAAX,CAAkBC,WAAlB,GAAgC+D,QAAhC,CACE;cAAEC,IAAI,EAAEzH,IAAI,CAAC0H,IAAL,CAAUC,WAAV;YAAR,CADF,EAEE,UAAUhE,GAAV,EAAeC,GAAf,EAAoB;cAClB,IAAID,GAAJ,EAAS;gBACPzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,0BAArB,CAAxC;cACD,CAFD,MAEO,IAAItE,IAAI,CAAC0H,IAAL,CAAUE,YAAV,EAAJ,EAA8B;gBACnC;gBACA,KAAKL,SAAL,CAAe,QAAf,EAAyB3D,GAAzB,EAA8B1E,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA3D;cACD,CAHM,MAGA;gBACL,KAAKqG,SAAL,CAAe,MAAf,EAAuB3D,GAAvB;cACD;YACF,CAXH,EAYE,IAZF;YAeA;;UAEF,KAAK,eAAL;YACE1E,EAAE,CAACoE,EAAH,CAAMC,IAAN,CAAWC,MAAX,CAAkBC,WAAlB,GAAgC+D,QAAhC,CACE;cAAEC,IAAI,EAAEzH,IAAI,CAAC0H,IAAL,CAAUC,WAAV;YAAR,CADF,EAEE,UAAUhE,GAAV,EAAeC,GAAf,EAAoB;cAClB,IAAID,GAAJ,EAAS;gBACPzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCxF,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,0BAArB,CAAxC;cACD,CAFD,MAEO,IAAItE,IAAI,CAAC0H,IAAL,CAAUE,YAAV,EAAJ,EAA8B;gBACnC,IAAMC,SAAS,GAAG,IAAI3I,EAAE,CAACwG,IAAH,CAAQoC,cAAZ,EAAlB;;gBACA,6BAAgCD,SAAS,CAACE,iBAAV,CAA4BnE,GAA5B,CAAhC;gBAAA;gBAAA,IAAOD,IAAP;gBAAA,IAAYqE,gBAAZ;;gBACA,IAAIrE,IAAJ,EAAS;kBACPzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCJ,IAAxC;gBACD,CAFD,MAEO;kBACL,IAAIsE,aAAa,GAAG,MAApB;kBACA,IAAMC,KAAK,GAAG,wCAAwCC,IAAxC,CAA6CnI,IAAI,CAAC0H,IAAL,CAAUU,OAAV,EAA7C,CAAd;;kBAEA,IAAIF,KAAJ,EAAW;oBACTD,aAAa,GAAG,UAAUC,KAAK,CAAC,CAAD,CAA/B;kBACD,CANI,CAOL;;;kBACA,KAAKX,SAAL,CACE,QADF,EAEES,gBAFF,EAGE9I,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAH/B,EAIE,6BAJF,EAKE+G,aALF;gBAOD;cACF;YACF,CA3BH,EA4BE,IA5BF;YA+BA;;UAEF,KAAK,YAAL;YACE,KAAKV,SAAL,CAAe,KAAf,EAAsB,IAAtB,EAA4BvH,IAA5B;;YACA;;UAEF,KAAK,QAAL;YACE,KAAKqI,SAAL,CAAerI,IAAf;;YACA;;UAEF,KAAK,QAAL;YACE;YACA;;UAEF,KAAK,OAAL;YACE,KAAKsI,UAAL;;YACA;;UAEF;YACE,KAAKC,IAAL,CAAUxD,UAAU,GAAG,mCAAvB;YACA;QA/HJ;MAiID,CA/OM;MAiPP/D,eAjPO,2BAiPSwH,EAjPT,EAiPa;QAClB,IAAMvC,YAAY,GAAG,KAAKG,YAAL,GAAoBC,MAApB,CAA2B,UAAAC,QAAQ;UAAA,OAAIA,QAAQ,CAACC,OAAT,GAAmBC,UAAnB,EAAJ;QAAA,CAAnC,CAArB;;QAEA,IAAIP,YAAY,CAACQ,MAAb,GAAsB,CAA1B,EAA6B;UAC3B+B,EAAE,CAACC,cAAH;UACAD,EAAE,CAACE,WAAH,GAAiB,EAAjB;QACD,CAHD,MAGO;UACL,OAAOF,EAAE,CAAC,aAAD,CAAT;QACD;MACF,CA1PM;MA4PPG,eA5PO,2BA4PSC,MA5PT,EA4PiB,CAAE,CA5PnB;MA6PPC,iBA7PO,6BA6PWD,MA7PX,EA6PmB,CAAE,CA7PrB;MA+PPE,gBA/PO,4BA+PUN,EA/PV,EA+Pc;QACnB,IAAMxI,IAAI,GAAGwI,EAAE,CAACO,OAAH,EAAb;;QACA,IAAI/I,IAAI,CAACgJ,MAAL,KAAgB,SAApB,EAA+B;UAC7B;UACA,IAAM5H,SAAS,GAAG,KAAKgF,YAAL,GAAoB6C,IAApB,EAAlB;UACA7H,SAAS,CAAC8H,IAAV,CAAe,UAAU5C,QAAV,EAAoB;YACjC,IAAIA,QAAQ,CAACC,OAAT,GAAmB4C,SAAnB,CAA6BnJ,IAAI,CAACyH,IAAlC,CAAJ,EAA6C;cAC3C,KAAKtB,SAAL,CAAeG,QAAf;YACD;;YACD,OAAO,KAAP;UACD,CALD,EAKG,IALH;;UAMA,IAAI,KAAKnB,gBAAL,MAA2B,KAAKA,gBAAL,GAAwBwC,WAAxB,OAA0C3H,IAAI,CAACyH,IAA9E,EAAoF;YAClF,KAAK2B,kBAAL;UACD;QACF,CAZD,MAYO;UACL,KAAKb,IAAL,CAAU,sBAAV,EAAkCvI,IAAI,CAACgJ,MAAvC;QACD;;QACD,KAAK5G,KAAL,CAAWiH,OAAX;MACD,CAjRM;MAmRPC,QAnRO,oBAmRUC,IAnRV,EAmRgB;QACrB,IAAI7B,IAAI,GAAG,IAAX;QACA,IAAI8B,UAAU,GAAG,IAAjB;QACAtK,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA7B,CAAkCuI,WAAlC,GAAgDP,IAAhD,CAAqD,UAAAQ,KAAK,EAAI;UAC5D,IAAIA,KAAK,CAACtB,OAAN,OAAoB,MAAxB,EAAgC;YAC9BoB,UAAU,GAAGE,KAAb;UACD,CAFD,MAEO,IAAIA,KAAK,CAACtB,OAAN,OAAoBmB,IAAxB,EAA8B;YACnC7B,IAAI,GAAGgC,KAAP;YACA,OAAO,IAAP;UACD;;UACD,OAAO,KAAP;QACD,CARD;;QASA,IAAI,CAAChC,IAAD,IAAS8B,UAAb,EAAyB;UACvB,IAAID,IAAI,CAACI,UAAL,CAAgB,OAAhB,CAAJ,EAA8B;YAC5BJ,IAAI,GAAGA,IAAI,CAACK,MAAL,CAAY,CAAZ,CAAP;UACD,CAHsB,CAIvB;;;UACAJ,UAAU,CAACC,WAAX,GAAyBP,IAAzB,CAA8B,UAAAQ,KAAK,EAAI;YACrC,IAAIA,KAAK,CAACtB,OAAN,OAAoBmB,IAAxB,EAA8B;cAC5B7B,IAAI,GAAGgC,KAAP;cACA,OAAO,IAAP;YACD;;YACD,OAAO,KAAP;UACD,CAND;QAOD;;QACD,OAAOhC,IAAP;MACD,CA7SM;MA+SP/G,eA/SO,2BA+SS6H,EA/ST,EA+Sa;QAClB,IAAIxI,IAAI,GAAGwI,EAAE,CAACO,OAAH,EAAX;;QACA,QAAQP,EAAE,CAACJ,OAAH,EAAR;UACE,KAAK,yBAAL;YACE,KAAK9B,QAAL,CAActG,IAAd,EAAoB,KAApB;YACA;;UAEF,KAAK,qBAAL;YACE,IAAI,OAAOA,IAAI,CAAC0H,IAAZ,KAAqB,QAAzB,EAAmC;cACjC;cACA1H,IAAI,CAAC0H,IAAL,GAAY,KAAK4B,QAAL,CAAsBtJ,IAAI,CAAC0H,IAA3B,CAAZ;YACD;;YACD,KAAKpB,QAAL,CAActG,IAAI,CAAC0H,IAAL,IAAa,KAAK1C,mBAAL,EAA3B,EAAuD,KAAvD,EAA8DhF,IAAI,CAAC6J,OAAnE,EAA4E,IAA5E,EAAkF7J,IAAI,CAAC8J,cAAvF;YAEA;;UAEF,KAAK,iBAAL;YACE,IAAI,OAAO9J,IAAP,KAAgB,QAApB,EAA8B;cAC5B;cACAA,IAAI,GAAG,KAAKsJ,QAAL,CAAsBtJ,IAAtB,CAAP;YACD;;YACD,KAAKsG,QAAL,CAActG,IAAI,IAAI,KAAKgF,mBAAL,EAAtB,EAAkD,KAAlD;YACA;QApBJ;MAsBD,CAvUM;;MAyUP;AACJ;AACA;AACA;AACA;MACI+E,sBA9UO,kCA8UgBvB,EA9UhB,EA8UoB;QACzB,IAAMxI,IAAI,GAAGwI,EAAE,CAACO,OAAH,EAAb;;QACA,IACG7J,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBqK,WAApB,CAAgCnK,WAAhC,GAA8CoK,cAA9C,MAAkEjK,IAAI,CAACkK,IAAL,KAAc,KAAjF,IACAlK,IAAI,CAACkK,IAAL,KAAc,QAFhB,EAGE;UACA,KAAKC,QAAL,CAAwBnK,IAAI,CAACoK,IAA7B,EAAmCpK,IAAI,CAACkK,IAAxC;QACD;;QACD,IAAME,IAAI,GAAGpK,IAAI,CAACoK,IAAlB;;QACA,IAAIA,IAAJ,EAAU;UACR,IAAIpK,IAAI,CAACoK,IAAL,CAAUC,OAAV,OAAwB,MAA5B,EAAoC;YAClC,KAAKC,gBAAL,CAAsBtK,IAAI,CAACoK,IAAL,CAAUG,SAAV,EAAtB;UACD,CAFD,MAEO;YACL,KAAKD,gBAAL,CAAsBF,IAAtB;UACD;;UACD,KAAKI,mBAAL,CAAyBJ,IAAzB;QACD,CAPD,MAOO;UACL,KAAKhB,kBAAL;UACA,KAAKqB,qBAAL;QACD;MACF,CAlWM;MAoWPN,QApWO,oBAoWYC,IApWZ,EAoWkBF,IApWlB,EAoWwB;QAC7B,IAAIE,IAAJ,EAAU;UACR,IAAIA,IAAI,CAACC,OAAL,OAAmB,MAAvB,EAA+B;YAC7B,KAAK/D,QAAL,CAAc8D,IAAd,EAAoBF,IAAI,KAAK,KAA7B;UACD,CAFD,MAEO,IAAIA,IAAI,KAAK,QAAb,EAAuB;YAC5B;YACAE,IAAI,CAACM,UAAL,CAAgB,IAAhB;UACD;QACF;MACF,CA7WM;MA+WPC,mBA/WO,+BA+Wa/H,KA/Wb,EA+WoBgI,GA/WpB,EA+WyB;QAC9B,IAAIA,GAAJ,EAAS;UACPA,GAAG,CAACC,qBAAJ,CAA0B,IAA1B;QACD;;QACD,IAAIjI,KAAJ,EAAW;UACTA,KAAK,CAACkI,IAAN,CAAW,WAAX,EAAwB,IAAxB,EAA8B,iBAA9B;QACD,CAFD,MAEO;UACL,KAAKC,oBAAL;QACD;MACF,CAxXM;MA0XPC,sBA1XO,kCA0XgBpI,KA1XhB,EA0XuBgI,GA1XvB,EA0X4B;QACjC,IAAIA,GAAJ,EAAS;UACPA,GAAG,CAACC,qBAAJ,CAA0B,IAA1B;QACD;;QACD,IAAIjI,KAAJ,EAAW;UACTA,KAAK,CAACkI,IAAN,CAAW,WAAX,EAAwB,IAAxB,EAA8B,qBAA9B;UACAlI,KAAK,CAACkI,IAAN,CAAW,SAAX,EAAsB,IAAtB,EAA4B,qBAA5B,EAAmD;YACjDjD,SADiD,qBACvCjF,KADuC,EAChC;cACf,OAAO,CAACA,KAAR;YACD;UAHgD,CAAnD;QAKD,CAPD,MAOO;UACL,KAAKqI,wBAAL;QACD;MACF,CAxYM;MA0YPC,sBA1YO,oCA0YkB;QACvB,IAAMC,GAAG,GAAG,KAAK1I,oBAAL,CAA0B2I,YAA1B,EAAZ;;QACA,IAAID,GAAG,CAAC1E,MAAJ,GAAa,CAAjB,EAAoB;UAClB,IAAMH,QAAQ,GAAG6E,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAjB;UACA,IAAM3D,IAAI,GAAGpB,QAAQ,CAACC,OAAT,EAAb;UACA,IAAI+E,YAAJ;UACA,IAAMC,SAAS,GAAGjF,QAAQ,CAACkF,YAAT,EAAlB;;UACA,IAAID,SAAJ,EAAe;YACbD,YAAY,GAAGpM,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBoM,mBAAtB,CAA0C5L,WAA1C,GAAwD6L,kBAAxD,CAA2EH,SAA3E,CAAf;UACD,CAFD,MAEO;YACLD,YAAY,GAAGpM,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBoM,mBAAtB,CAA0C5L,WAA1C,GAAwD8L,cAAxD,CAAuEjE,IAAvE,CAAf;UACD;;UACD,IAAI,CAAC4D,YAAY,CAACM,QAAlB,EAA4B;YAC1BN,YAAY,CAACM,QAAb,GAAwB,IAAIN,YAAY,CAACO,KAAjB,EAAxB;UACD;;UACDP,YAAY,CAACM,QAAb,CAAsBE,OAAtB,CAA8BpE,IAA9B;;UACA,IAAI,KAAKrF,MAAL,CAAY0J,OAAZ,CAAoBT,YAAY,CAACM,QAAjC,IAA6C,CAAjD,EAAoD;YAClD,KAAKvJ,MAAL,CAAY2J,GAAZ,CAAgBV,YAAY,CAACM,QAA7B;UACD;;UACD,IAAIN,YAAY,CAACM,QAAb,YAAiC1M,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAc6M,MAAd,CAAqBC,cAA1D,EAA0E;YACxEZ,YAAY,CAACM,QAAb,CAAsBO,iBAAtB,CAAwC7F,QAAQ,CAAC8F,iBAAT,EAAxC;UACD;;UACD,KAAK/J,MAAL,CAAYgK,YAAZ,CAAyB,CAACf,YAAY,CAACM,QAAd,CAAzB;;UACA,KAAK1L,QAAL,CAAwB2E,gBAAxB,CAAyCyG,YAAY,CAACM,QAAtD;;UAEA1M,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcN,IAAd,CAAmBwN,WAAnB,CAA+BzM,WAA/B,GAA6C0M,oBAA7C,CAAkE7E,IAAlE;QACD,CAxBD,MAwBO;UACLxI,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcN,IAAd,CAAmBwN,WAAnB,CAA+BzM,WAA/B,GAA6C2M,sBAA7C;QACD;MACF,CAvaM;;MAyaP;AACJ;AACA;AACA;AACA;AACA;AACA;MACIlG,QAhbO,oBAgbEoB,IAhbF,EAgbQ+E,OAhbR,EAgbiBlB,SAhbjB,EAgb4BmB,WAhb5B,EAgbyC5C,cAhbzC,EAgbyD;QAC9D,IAAM1I,SAAS,GAAG,KAAKgF,YAAL,EAAlB;QACA,IAAIE,QAAJ;QACA,IAAIqG,WAAJ;;QACA,IAAI,CAACpB,SAAL,EAAgB;UACdoB,WAAW,GAAGzN,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBoM,mBAAtB,CAA0C5L,WAA1C,GAAwD8L,cAAxD,CAAuEjE,IAAvE,EAA6EgF,WAA7E,CAAd;;UAEA,IAAI,CAACC,WAAL,EAAkB;YAChB;YACAzN,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkC8I,IAAlC,CAAuCrO,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,wBAArB,EAA+CoD,IAAI,CAACU,OAAL,EAA/C,CAAvC;YAEA;UACD;;UACDmD,SAAS,GAAGoB,WAAW,CAACd,KAAZ,CAAkBgB,SAA9B;QACD,CAVD,MAUO;UACL;UACAF,WAAW,GAAGzN,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBoM,mBAAtB,CAA0C5L,WAA1C,GAAwD6L,kBAAxD,CAA2EH,SAA3E,CAAd;;UAEA,IAAI,CAACoB,WAAW,CAACf,QAAjB,EAA2B;YACzBe,WAAW,CAACf,QAAZ,GAAuB,IAAIe,WAAW,CAACd,KAAhB,EAAvB;UACD;;UACD,IAAIc,WAAW,CAACf,QAAZ,CAAqBkB,UAArB,EAAJ,EAAuC;YACrCH,WAAW,CAACf,QAAZ,CAAqBE,OAArB,CAA6BpE,IAA7B;YACA;UACD;QACF;;QACD,IAAMqF,MAAM,GAAG3L,SAAS,CAAC8H,IAAV,CAAe,UAAU8D,EAAV,EAAc;UAC1C,IAAIA,EAAE,CAACzG,OAAH,OAAiBmB,IAAjB,IAAyB6D,SAAS,KAAKyB,EAAE,CAACxB,YAAH,EAA3C,EAA8D;YAC5DlF,QAAQ,GAAG0G,EAAX;YACA,OAAO,IAAP;UACD;;UACD,OAAO,KAAP;QACD,CANc,CAAf;;QAOA,IAAI,CAAC1G,QAAL,EAAe;UACbA,QAAQ,GAAG,IAAIpH,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBsN,QAAxB,CAAiCvF,IAAjC,EAAuC6D,SAAvC,CAAX;QACD;;QACD,IAAIzB,cAAJ,EAAoB;UAClBxD,QAAQ,CAAC6F,iBAAT,CAA2BrC,cAA3B;QACD,CAFD,MAEO;UACLxD,QAAQ,CAAC4G,mBAAT;QACD;;QACD,IAAIT,OAAO,KAAK,IAAhB,EAAsB;UACpB,IAAI,CAACnG,QAAQ,CAAC6G,WAAT,EAAL,EAA6B;YAC3B,IACE,KAAKlL,QAAL,KAA4B,IAA5B,IACAb,SAAS,CAACiK,OAAV,CAAkB,KAAKpJ,QAAvB,CADA,IAEA,CAACb,SAAS,CAACiK,OAAV,CAAkB,KAAKpJ,QAAvB,EAA2CkL,WAA3C,EAHH,EAIE;cACA/L,SAAS,CAACgM,OAAV,CAAkB,KAAKnL,QAAvB,EAA2CqE,QAA3C;YACD,CAND,MAMO;cACL,KAAKrE,QAAL,GAA0Bb,SAAS,CAACqF,MAApC;cACArF,SAAS,CAACgE,IAAV,CAAekB,QAAf;YACD,CAV0B,CAW3B;;;YACAA,QAAQ,CAAC+G,YAAT,CAAsB,KAAtB;UACD;QACF,CAfD,MAeO;UACL,IAAI,CAACN,MAAD,KAAY,KAAK9K,QAAL,KAA4B,IAA5B,IAAoCb,SAAS,CAAC2K,OAAV,CAAkBzF,QAAlB,MAAgC,KAAKrE,QAArF,CAAJ,EAA8G;YAC5Gb,SAAS,CAACgE,IAAV,CAAekB,QAAf;UACD;;UACDA,QAAQ,CAAC+G,YAAT,CAAsB,IAAtB;UACA,KAAKpL,QAAL,GAA0B,IAA1B;QACD;;QACD,KAAKQ,oBAAL,CAA0B6K,SAA1B,GAAsCC,iBAAtC,CAAwD,CAACjH,QAAD,CAAxD;MACD,CAhfM;;MAkfP;AACJ;AACA;AACA;AACA;MACIkH,mBAvfO,+BAufalH,QAvfb,EAufuB;QAAA;;QAC5B,IAAIA,QAAQ,YAAYpH,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAA5C,EAAsD;UACpD;UACA,IAAMkJ,KAAK,GAAG,KAAKrH,YAAL,GAAoB8C,IAApB,CAAyB,UAAUwE,CAAV,EAAa;YAClD,IAAIA,CAAC,CAACnH,OAAF,GAAYoB,WAAZ,OAA8BrB,QAAQ,CAACqB,WAAT,EAAlC,EAA0D;cACxDrB,QAAQ,GAAGoH,CAAX;cACA,OAAO,IAAP;YACD;;YACD,OAAO,KAAP;UACD,CANa,CAAd;;UAOA,IAAI,CAACD,KAAL,EAAY;YACV,OAAO,KAAP;UACD;QACF;;QACD,IAAM/F,IAAI,GAAGpB,QAAQ,CAACC,OAAT,EAAb;;QACA,IAAImB,IAAI,CAAClB,UAAL,EAAJ,EAAuB;UACrB;UACA,IAAIhG,OAAO,GAAGjC,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CACZ,mFADY,CAAd;;UAIA,IAAIoD,IAAI,CAACiG,WAAL,EAAJ,EAAwB;YACtBnN,OAAO,GAAGjC,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CACR,oGADQ,CAAV;UAGD;;UACD,IAAMoC,MAAM,GAAG,IAAIC,GAAG,CAACD,MAAJ,CAAWE,OAAf,CAAuB;YACpCpG,OAAO,EAAEA,OAD2B;YAEpCqG,QAAQ,EAAE,kBAAAC,SAAS,EAAI;cACrB,IAAIA,SAAS,KAAK,IAAlB,EAAwB;gBACtBR,QAAQ,CAACS,IAAT;;gBACA,MAAI,CAACZ,SAAL,CAAeG,QAAf,EAAyB,IAAzB;cACD,CAHD,MAGO,IAAIQ,SAAS,KAAK,KAAlB,EAAyB;gBAC9BY,IAAI,CAACkG,aAAL;;gBACA,IAAIlG,IAAI,CAACiG,WAAL,EAAJ,EAAwB;kBACtBpP,EAAE,CAACgC,KAAH,CAASC,OAAT,CAAiBC,GAAjB,CAAqBoN,cAArB,CAAoC,iBAApC,EAAuD;oBACrD7E,MAAM,EAAE,SAD6C;oBAErDvB,IAAI,EAAEC,IAAI,CAACC,WAAL;kBAF+C,CAAvD;gBAID;;gBACD,MAAI,CAACxB,SAAL,CAAeG,QAAf,EAAyB,IAAzB;cACD,CATM,MASA,CACL;cACD;;cACDI,MAAM,CAACM,OAAP;YACD,CAnBmC;YAoBpCC,OAAO,EAAE,IApB2B;YAqBpCC,OAAO,EAAE3I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,iBAArB,CArB2B;YAsBpC6C,cAAc,EAAE5I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,cAArB,CAtBoB;YAuBpC8C,aAAa,EAAE7I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,iBAArB,CAvBqB;YAwBpCwJ,YAAY,EAAE,wBAxBsB;YAyBpCzG,UAAU,EAAE,IAzBwB;YA0BpC0G,WAAW,EAAE;UA1BuB,CAAvB,CAAf;UA6BArH,MAAM,CAACY,IAAP;UACA,OAAO,IAAP;QACD;;QACD,OAAO,KAAP;MACD,CAljBM;MAojBPnB,SApjBO,qBAojBGG,QApjBH,EAojBa0H,KApjBb,EAojBoB;QACzB,IAAI1H,QAAQ,YAAYpH,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAA5C,EAAsD;UACpD;UACA,IAAMkJ,KAAK,GAAG,KAAKrH,YAAL,GAAoB8C,IAApB,CAAyB,UAAUwE,CAAV,EAAa;YAClD,IAAIA,CAAC,CAACnH,OAAF,GAAYoB,WAAZ,OAA8BrB,QAAQ,CAACqB,WAAT,EAAlC,EAA0D;cACxDrB,QAAQ,GAAGoH,CAAX;cACA,OAAO,IAAP;YACD;;YACD,OAAO,KAAP;UACD,CANa,CAAd;;UAOA,IAAI,CAACD,KAAL,EAAY;YACV;UACD;QACF;;QACD,IAAI,CAACnH,QAAD,IAAa,CAACA,QAAQ,CAAC2H,WAAT,EAAlB,EAA0C;UACxC;QACD;;QACD,IAAMvG,IAAI,GAAGpB,QAAQ,CAACC,OAAT,EAAb,CAjByB,CAmBzB;;QACA,IAAI,CAACyH,KAAD,IAAU,KAAKR,mBAAL,CAAyBlH,QAAzB,CAAd,EAAkD;UAChD;QACD;;QACD,IAAIA,QAAQ,YAAYpH,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBsN,QAA5C,EAAsD;UACpD3G,QAAQ,CAAC4H,cAAT;QACD;;QACD,IAAMtM,gBAAgB,GAAG,KAAKa,oBAAL,CAA0B2I,YAA1B,EAAzB;;QACA,IAAI+C,cAAc,GAAG,CAAC,CAAtB;QACA,IAAM/M,SAAS,GAAG,KAAKgF,YAAL,EAAlB;;QACA,IAAIxE,gBAAgB,CAAC6E,MAAjB,GAA0B,CAA1B,IAA+B7E,gBAAgB,CAACyJ,OAAjB,CAAyB,CAAzB,MAAgC/E,QAAnE,EAA6E;UAC3E;UACA6H,cAAc,GAAG/M,SAAS,CAAC2K,OAAV,CAAkBzF,QAAlB,CAAjB;QACD;;QACDlF,SAAS,CAACgN,MAAV,CAAiB9H,QAAjB;;QACA,IAAM+H,cAAc,GAAG,KAAKhM,MAAL,CAAY+I,YAAZ,GAA2B,CAA3B,CAAvB;;QACA,IACE7M,EAAE,CAACI,KAAH,CAAS2P,YAAT,CAAsBD,cAAc,CAACE,WAArC,EAAkDrP,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAc6M,MAAd,CAAqBuC,OAAvE,KACA,EAAEH,cAAc,YAAYnP,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcqP,KAA1C,CAFF,EAGE;UACA;UACAJ,cAAc,CAACK,SAAf;QACD;;QACD,IAAI,KAAKtI,YAAL,GAAoBK,MAApB,KAA+B,CAAnC,EAAsC;UACpC,KAAKpE,MAAL,CAAYsM,cAAZ;;UACA,KAAKzO,QAAL,CAAwB0E,kBAAxB;;UACA,KAAK3C,QAAL,GAA0B,IAA1B;QACD;;QACD,IAAIkM,cAAc,GAAG,CAArB,EAAwB;UACtB,KAAK1L,oBAAL,CAA0B2I,YAA1B,GAAyCwD,OAAzC,CAAiDxN,SAAS,CAACiK,OAAV,CAAkB8C,cAAc,GAAG,CAAnC,CAAjD;QACD,CAFD,MAEO,IAAIA,cAAc,KAAK,CAAnB,IAAwB/M,SAAS,CAACqF,MAAV,GAAmB,CAA/C,EAAkD;UACvD,KAAKhE,oBAAL,CAA0B2I,YAA1B,GAAyCwD,OAAzC,CAAiDxN,SAAS,CAACiK,OAAV,CAAkB,CAAlB,CAAjD;QACD;;QAED,IAAI3D,IAAI,YAAYxI,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBkP,YAAxC,EAAsD;UACpD,IAAMC,eAAe,GAAG5P,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBoM,mBAAtB,CAA0C5L,WAA1C,GAAwD8L,cAAxD,CAAuEjE,IAAvE,CAAxB;UAEAoH,eAAe,CAAClD,QAAhB,CAAyBmD,KAAzB;;UACA,IACE3N,SAAS,CAACiF,MAAV,CAAiB,UAAUC,QAAV,EAAoB;YACnC,OAAOA,QAAQ,CAACC,OAAT,cAA8BrH,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBkP,YAAzD;UACD,CAFD,EAEGpI,MAFH,KAEc,CAHhB,EAIE;YACAqI,eAAe,CAAClD,QAAhB,CAAyBoD,OAAzB;YACAF,eAAe,CAAClD,QAAhB,GAA2B,IAA3B;UACD;QACF,CAZD,MAYO,IAAI9K,MAAM,CAACmO,MAAP,IAAiB3I,QAAQ,CAACkF,YAAT,OAA4B,6BAAjD,EAAgF;UACrF;UACA,IAAM0D,QAAQ,GAAGpO,MAAM,CAACmO,MAAP,CAAchD,MAAd,CAAqBkD,QAArB,CAA8BzH,IAAI,CAAC0H,MAAL,EAA9B,CAAjB;;UACA,IAAIF,QAAJ,EAAc;YACZA,QAAQ,CAAClI,OAAT;UACD;QACF;MACF,CA5nBM;MA8nBPd,gBA9nBO,8BA8nBY;QACjB,IAAMmJ,QAAQ,GACZ,KAAK5M,oBAAL,CAA0B2I,YAA1B,GAAyC3E,MAAzC,GAAkD,CAAlD,GACI,KAAKhE,oBAAL,CAA0B2I,YAA1B,GAAyCC,OAAzC,CAAiD,CAAjD,CADJ,GAEI,IAHN;;QAIA,IAAIgE,QAAJ,EAAc;UACZ,KAAKlJ,SAAL,CAAekJ,QAAf;QACD;MACF,CAtoBM;MAwoBPC,YAxoBO,wBAwoBM9G,EAxoBN,EAwoBU;QACf,KAAKrC,SAAL,CAAeqC,EAAE,CAACO,OAAH,EAAf;MACD,CA1oBM;MA4oBP1F,QA5oBO,sBA4oBK;QACV,IAAI,CAAC,KAAKnB,QAAV,EAAkB;UAChB,KAAKA,QAAL,GAAc3D,EAAE,CAACgR,GAAH,CAAOC,OAAP,CAAeC,MAAf,CAAsB,KAAtB,EAA6B;YACzCC,EAAE,EAAE,SADqC;YAEzCC,KAAK,EAAE;UAFkC,CAA7B,CAAd;UAKApR,EAAE,CAACgR,GAAH,CAAOC,OAAP,CAAeI,SAAf,CAAyB,KAAK1N,QAA9B,EAAsCqD,QAAQ,CAACsK,IAA/C;UACAtR,EAAE,CAACuR,KAAH,CAAS1Q,OAAT,CAAiB2Q,IAAjB,CAAsBlQ,WAAtB,GAAoCmQ,QAApC,CAA6C9Q,EAAE,CAAC4Q,KAAH,CAASG,IAAtD;QACD;;QACD,OAAO,KAAK/N,QAAZ;MACD,CAvpBM;MAypBP7B,QAzpBO,sBAypBU;QACf,IAAM6P,KAAK,GAAI,KAAK3N,gBAAL,GAAwB,IAAIhE,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcC,KAAlB,EAAvC;QACAF,KAAK,CAAClE,GAAN,CAAU,MAAV,EAAkB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAlB;QACAH,KAAK,CAAClE,GAAN,CAAU,SAAV,EAAqB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,cAA1B,CAArB,EAHe,CAIf;QACA;;QACAH,KAAK,CAAClE,GAAN,CAAU,UAAV,EAAsB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAtB;QACAH,KAAK,CAAClE,GAAN,CAAU,YAAV,EAAwB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,cAA1B,CAAxB;QACAH,KAAK,CAAClE,GAAN,CAAU,MAAV,EAAkB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAlB,EARe,CASf;;QAEA,IAAMC,aAAa,GAAG,IAAI/R,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,IAA1B,CAAtB;QACAH,KAAK,CAAClE,GAAN,CAAU,QAAV,EAAoBsE,aAApB;QACA,KAAKxF,IAAL,CAAU,qBAAV,EAAiCwF,aAAjC,EAAgD,SAAhD;QAEAJ,KAAK,CAAClE,GAAN,CAAU,MAAV,EAAkB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAlB;QACAH,KAAK,CAAClE,GAAN,CAAU,MAAV,EAAkB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAlB,EAhBe,CAkBf;QACA;;QACAH,KAAK,CAAClE,GAAN,CAAU,KAAV,EAAiB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAjB;QACAH,KAAK,CAAClE,GAAN,CAAU,MAAV,EAAkB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAlB;QACAH,KAAK,CAAClE,GAAN,CAAU,OAAV,EAAmB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,QAA1B,CAAnB;QAEAH,KAAK,CAAClE,GAAN,CAAU,MAAV,EAAkB,IAAIzN,EAAE,CAACY,EAAH,CAAMgR,OAAN,CAAcE,OAAlB,CAA0B,IAA1B,CAAlB;QAEA,IAAMjR,OAAO,GAAGb,EAAE,CAACO,IAAH,CAAQ+D,IAAR,CAAaC,cAAb,GAA8BC,iBAA9B,EAAhB;QACA,KAAKT,gBAAL,GAAwBlD,OAAO,CAACmR,SAAR,EAAxB;QACAnR,OAAO,CAAC4M,GAAR,CAAYkE,KAAZ;QACA9Q,OAAO,CAAC4D,SAAR,CAAkBkN,KAAlB;MACD,CAvrBM;MAyrBP7H,SAzrBO,qBAyrBGX,IAzrBH,EAyrBS;QACd,IAAM8I,IAAI,GAAG9I,IAAI,IAAI,KAAK1C,mBAAL,EAArB;;QACA,IAAIwL,IAAJ,EAAU;UACRtR,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcC,OAAd,CAAsBoR,cAAtB,CAAqC5Q,WAArC,aAA0D2Q,IAA1D;QACD;MACF,CA9rBM;MAgsBPE,uBAhsBO,mCAgsBiBlI,EAhsBjB,EAgsBqB;QAC1B,IAAMmI,SAAS,GAAGnI,EAAE,CAACO,OAAH,EAAlB;QACA,IAAM3H,SAAS,GAAG,EAAlB,CAF0B,CAG1B;;QACAuP,SAAS,CAAC3M,OAAV,CAAkB,UAAU4M,IAAV,EAAgB;UAChC,IAAMtK,QAAQ,GAAG,KAAKF,YAAL,GACdyK,OADc,GAEdC,IAFc,CAET,UAAUxK,QAAV,EAAoB;YACxB,OAAOA,QAAQ,CAACC,OAAT,OAAuBqK,IAAI,CAACrK,OAAL,EAAvB,IAAyCD,QAAQ,CAACkF,YAAT,OAA4BoF,IAAI,CAAC/D,SAAjF;UACD,CAJc,CAAjB;;UAKA,IAAIvG,QAAJ,EAAc;YACZlF,SAAS,CAACgE,IAAV,CAAekB,QAAf;UACD;QACF,CATD,EASG,IATH;;QAWA,KAAK7D,oBAAL,CAA0B2I,YAA1B,GAAyCwD,OAAzC,CAAiDxN,SAAjD;MACD,CAhtBM;MAktBP2P,QAltBO,oBAktBavQ,OAltBb,EAktBsBqG,QAltBtB,EAktBgCI,OAltBhC,EAktByCrE,KAltBzC,EAktBgDsE,OAltBhD,EAktByD;QAC9D,IAAM8J,MAAM,GAAG,IAAI9R,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcsH,MAAd,CAAqBuK,MAAzB,CAAgC;UAC7CzQ,OAAO,EAAEA,OADoC;UAE7CqG,QAAQ,EAAEA,QAAQ,IAAI,IAFuB;UAG7CI,OAAO,EAAEA,OAAO,IAAI,IAHyB;UAI7CrE,KAAK,EAAEA,KAAK,IAAI,IAJ6B;UAK7CsE,OAAO,EAAEA,OAAO,IAAI,EALyB;UAM7Cb,MAAM,EAAE;QANqC,CAAhC,CAAf;QASA2K,MAAM,CAAC1J,IAAP;QACA,OAAO0J,MAAP;MACD,CA9tBM;MAguBPzJ,SAhuBO,qBAguBGvI,IAhuBH,EAguBSkS,OAhuBT,EAguBkBC,MAhuBlB,EAguB0B5F,SAhuB1B,EAguBqCtD,aAhuBrC,EAguBoD;QACzD,IAAMxG,aAAa,GAAG0P,MAAM,IAAI,KAAKhM,gBAAL,EAAhC;;QACA,IAAI,CAAC1D,aAAL,EAAoB;UAClB;QACD;;QACD,IAAIjB,OAAJ;QACA,IAAI4Q,aAAJ;;QACA,IAAIpS,IAAI,KAAK,QAAb,EAAuB;UACrBwB,OAAO,GAAGjC,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CACR,gHADQ,CAAV;UAIA8M,aAAa,GAAG7S,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,gDAArB,CAAhB;QACD,CAND,MAMO,IAAItF,IAAI,KAAK,MAAb,EAAqB;UAC1BwB,OAAO,GAAGjC,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,6BAArB,CAAV;UACA8M,aAAa,GAAG7S,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,uCAArB,CAAhB;QACD,CAHM,MAGA;UACL9D,OAAO,GAAGjC,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,+BAArB,CAAV;UACA8M,aAAa,GAAG7S,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,yCAArB,CAAhB;QACD;;QACD,IAAM+M,YAAY,GAAG,SAAfA,YAAe,CAAU9H,IAAV,EAAgB;UACnC,IAAI,CAACA,IAAL,EAAW;YACT;YACA;UACD;;UACD,IAAI+H,QAAQ,GAAG/H,IAAf,CALmC,CAMnC;;UACA,IAAIvK,IAAI,KAAK,QAAb,EAAuB;YACrB,IAAMkJ,KAAK,GAAG,wCAAwCC,IAAxC,CAA6CoB,IAA7C,CAAd;;YACA,IAAIrB,KAAJ,EAAW;cACTqB,IAAI,GAAGrB,KAAK,CAAC,CAAD,CAAZ;YACD;;YACDoJ,QAAQ,GAAG,iBAAiB/H,IAAjB,GAAwB,MAAnC;UACD,CAbkC,CAcnC;;;UACA,IAAMgI,MAAM,GAAG9P,aAAa,CAACgI,WAAd,GAA4BP,IAA5B,CAAiC,UAAUQ,KAAV,EAAiB;YAC/D,OAAOA,KAAK,CAACtB,OAAN,OAAoBkJ,QAApB,IAAgC5H,KAAK,CAACW,OAAN,OAAoBrL,IAA3D;UACD,CAFc,EAEZ,IAFY,CAAf;;UAIA,IAAIuS,MAAJ,EAAY;YACVrS,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCqN,aAAxC;;YACA,KAAKL,QAAL,CAAyBvQ,OAAzB,EAAkC6Q,YAAlC,EAAgD,IAAhD,EAAsD9H,IAAtD;UACD,CAHD,MAGO;YACL,IAAMiH,IAAI,GAAG,IAAItR,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAAxB,CAAiC+M,QAAjC,EAA2C7P,aAAa,CAACkG,WAAd,EAA3C,EAAwElG,aAAxE,CAAb;YAEA+O,IAAI,CAACpN,GAAL,CAAS;cACPpE,IAAI,EAAEA,IAAI,KAAK,QAAT,GAAoB,MAApB,GAA6BA,IAD5B;cAEPwS,QAAQ,EAAE,IAFH;cAGPC,SAAS,EAAE,IAHJ;cAIPC,MAAM,EAAE,IAJD;cAKPC,QAAQ,EAAE,IALH;cAMPC,SAAS,EAAE,IANJ;cAOPC,YAAY,EAAEpQ,aAAa,CAACkG,WAAd,EAPP;cAQPuJ,OAAO,EAAEA,OAAO,IAAI;YARb,CAAT;;YAWA,IAAIlS,IAAI,KAAK,KAAb,EAAoB;cAClB;cACAE,EAAE,CAACoE,EAAH,CAAMC,IAAN,CAAWC,MAAX,CAAkBC,WAAlB,GAAgCqO,UAAhC,CACE;gBACErK,IAAI,EAAE+I,IAAI,CAAC7I,WAAL,EADR;gBAEE3I,IAAI,EAAEA;cAFR,CADF,EAME,IANF,EAOE,UAAU2E,GAAV,EAAe;gBACb,IAAIA,GAAJ,EAAS;kBACPzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCC,KAAlC,CAAwCJ,GAAxC;gBACD,CAFD,MAEO;kBACLzE,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkC8I,IAAlC,CAAuCrO,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,yBAArB,CAAvC;kBAEAkM,IAAI,CAACpN,GAAL,CAAS;oBACPuO,QAAQ,EAAE,KADH;oBAEPC,SAAS,EAAE;kBAFJ,CAAT;kBAKArT,EAAE,CAACgC,KAAH,CAASC,OAAT,CAAiBC,GAAjB,CAAqBoN,cAArB,CAAoC2C,IAAI,CAACuB,WAAL,EAApC,EAAwD;oBACtD/S,IAAI,EAAE,SADgD;oBAEtD0I,IAAI,EAAE8I,IAFgD;oBAGtDxQ,IAAI,EAAE,EAHgD;oBAItDgS,MAAM,EAAE;kBAJ8C,CAAxD;gBAMD;cACF,CAzBH,EA0BE,IA1BF;YA4BD;;YACDvQ,aAAa,CAACwQ,QAAd,CAAuBzB,IAAvB;YACA/O,aAAa,CAACyQ,YAAd;;YACA,KAAK9P,KAAL,CAAWiH,OAAX;;YACA,KAAKjH,KAAL,CAAWiK,YAAX,CAAwBmE,IAAxB,EAhDK,CAiDL;;;YACA,IAAIxR,IAAI,KAAK,KAAb,EAAoB;cAClB;cACA,KAAKsH,QAAL,CAAckK,IAAd,EAAoB,KAApB,EAA2BjF,SAA3B,EAAsC,MAAtC;YACD;UACF;QACF,CA7ED;;QA+EA,KAAKwF,QAAL,CAAyBvQ,OAAzB,EAAkC6Q,YAAlC,EAAgD,IAAhD,EAAsDpJ,aAAtD;MACD,CAp0BM;;MAs0BP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;MACIkK,QA90BO,oBA80BSC,IA90BT,EA80Be;QACpB,OAAOA,IAAI,IAAIA,IAAI,CAACC,QAAL,KAAkB,CAAjC,EAAoC;UAClC,IAAID,IAAI,CAACE,YAAL,CAAkB,aAAlB,MAAqC,IAAzC,EAA+C;YAC7C,OAAOF,IAAP;UACD;;UAEDA,IAAI,GAAGA,IAAI,CAACG,UAAZ;QACD;;QAED,OAAO,IAAP;MACD,CAx1BM;MA01BP;MACAjS,KA31BO,mBA21BC;QAAA;;QACN,IAAMkS,OAAO,GAAG,KAAKnP,QAAL,EAAhB;;QACA,IAAMoP,IAAI,GAAG,IAAIlU,EAAE,CAACY,EAAH,CAAMsT,IAAN,CAAWC,MAAf,CAAsBF,OAAtB,EAA+B,IAA/B,EAAqC,IAArC,CAAb;QACA,KAAK1H,IAAL,CAAU,SAAV,EAAqB2H,IAArB,EAA2B,YAA3B,EAAyC;UACvC5K,SADuC,qBAC7B9F,OAD6B,EACpB;YACjB,OAAOA,OAAO,GAAG,SAAH,GAAe,UAA7B;UACD;QAHsC,CAAzC;QAMA0Q,IAAI,CAACE,eAAL,CAAqB,QAArB,EAA+B,YAAM;UACnC;UACA,IAAMzP,OAAO,GAAGuP,IAAI,CAACG,iBAAL,GAAyBC,aAAzB,EAAhB;UACA3P,OAAO,CAACnC,gBAAR,CACE,MADF,EAEE,UAAUyH,EAAV,EAAc;YACZ,IAAMsK,MAAM,GAAG,KAAKX,QAAL,CAAqB3J,EAAE,CAACsK,MAAxB,CAAf;;YACA,IAAI,CAACA,MAAL,EAAa;cACXtK,EAAE,CAACC,cAAH;YACD;UACF,CALD,CAKEqC,IALF,CAKO,MALP,CAFF;UAUA5H,OAAO,CAACnC,gBAAR,CACE,UADF,EAEE,UAAUyH,EAAV,EAAc;YACZ,IAAMsK,MAAM,GAAG,KAAKX,QAAL,CAAqB3J,EAAE,CAACsK,MAAxB,CAAf;;YACA,IAAI,CAACA,MAAL,EAAa;cACXtK,EAAE,CAACC,cAAH;YACD;UACF,CALD,CAKEqC,IALF,CAKO,MALP,CAFF;QASD,CAtBD;QAuBAvM,EAAE,CAACO,IAAH,CAAQ+D,IAAR,CAAaC,cAAb,GAA8BiQ,OAA9B,CAAsCN,IAAtC;QACAA,IAAI,CAACO,SAAL,CAAe,IAAIzU,EAAE,CAACY,EAAH,CAAM8T,MAAN,CAAaC,MAAjB,EAAf;QAEA,IAAMrP,QAAQ,GAAG3E,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyE,QAAd,CAAuBC,UAAvB,CAAkCjE,WAAlC,EAAjB;QACA4S,IAAI,CAACzG,GAAL,CAASnI,QAAT,EAAmB;UACjBsP,MAAM,EAAE,EADS;UAEjBC,IAAI,EAAE;QAFW,CAAnB;QAKA;AACN;AACA;;QACM,SAASC,MAAT,GAAkB;UAChB,IAAMC,MAAM,GAAGb,IAAI,CAACc,SAAL,EAAf;UACA1P,QAAQ,CAAC2P,mBAAT,CAA6B;YAC3BL,MAAM,EAAE,EADmB;YAE3BC,IAAI,EAAEK,IAAI,CAACC,KAAL,CAAWJ,MAAM,CAACK,KAAP,GAAe,CAA1B,IAA+B;UAFV,CAA7B;UAKA9P,QAAQ,CAAC+P,YAAT,CAAsBN,MAAM,CAACO,MAAP,GAAgB,EAAtC;QACD;;QACDpB,IAAI,CAACqB,WAAL,CAAiB,QAAjB,EAA2BT,MAA3B,EAAmC,IAAnC;QACAZ,IAAI,CAACqB,WAAL,CAAiB,QAAjB,EAA2BT,MAA3B,EAAmC,IAAnC;QACAvS,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,YAAY;UAC5C;UACAyR,OAAO,CAAC7C,KAAR,CAAckE,MAAd,GAAuB/S,MAAM,CAACiT,WAAP,GAAqB,IAA5C;QACD,CAHD;QAKA,IAAMC,IAAI,GAAG,IAAIzV,EAAE,CAACY,EAAH,CAAM8U,SAAN,CAAgBC,SAApB,CAA8B,IAAI3V,EAAE,CAACY,EAAH,CAAM8T,MAAN,CAAakB,IAAjB,EAA9B,CAAb;QACA1B,IAAI,CAACzG,GAAL,CAASgI,IAAT,EAAe;UAAEI,IAAI,EAAE;QAAR,CAAf,EA7DM,CA8DN;;QACA,IAAMC,OAAO,GAAGnV,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAckV,OAAd,CAAsBzU,WAAtB,EAAhB;QACAmU,IAAI,CAAChI,GAAL,CAASqI,OAAT,EAAkB;UAAED,IAAI,EAAE;QAAR,CAAlB;QAEA,IAAMG,YAAY,GAAGF,OAAO,CAACG,SAAR,CAAkB,QAAlB,CAArB;QACA,IAAMC,aAAa,GAAG,IAAIvV,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcsV,MAAd,CAAqBC,SAAzB,CAAmCJ,YAAnC,CAAtB;QACA,KAAKzJ,IAAL,CAAU,eAAV,EAA2B2J,aAA3B,EAA0C,QAA1C;QAEA,KAAKtS,KAAL,GAAa,IAAI5D,EAAE,CAACY,EAAH,CAAMyV,SAAN,CAAgBC,IAApB,EAAb;QACAb,IAAI,CAAChI,GAAL,CAAS,KAAK7J,KAAd,EAAqB;UAAEiS,IAAI,EAAE;QAAR,CAArB;QAEA,IAAMU,UAAU,GAAI5V,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6BrD,IAA7B,GAAoC,IAAIhC,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAAxB,CAAiC,GAAjC,CAAxD;QACA,IAAMwQ,YAAY,GAAG7V,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoB4E,QAApB,CAA6ByQ,WAA7B,EAArB,CA1EM,CA2EN;;QACAF,UAAU,CAAC1R,GAAX,CAAe;UACb6R,YAAY,EAAE,IADD;UAEbxD,SAAS,EAAE,IAFE;UAGbD,QAAQ,EAAE,IAHG;UAIb0D,IAAI,EAAE,IAJO;UAKbC,YAAY,EAAE,CAACJ,YAAD,CALD;UAMbK,IAAI,EAAElW,EAAE,CAAC4Q,KAAH,CAASuF,IAAT,CAAcC,MAAd,CAAqBC,OAArB,CAA6B,MAA7B,EAAqC,EAArC;QANO,CAAf;QASA,KAAKjL,gBAAL,CAAsBwK,UAAtB;QACA,KAAK1S,KAAL,GAAa,IAAIlD,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcoW,IAAd,CAAmBC,UAAvB,CAAkCX,UAAlC,CAAb;;QACA,KAAK1S,KAAL,CAAW0R,WAAX,CAAuB,iBAAvB,EAA0C,KAAK/J,sBAA/C,EAAuE,IAAvE,EAvFM,CAyFN;;;QACA,IAAM2L,aAAa,GAAG,IAAInX,EAAE,CAACY,EAAH,CAAM8U,SAAN,CAAgBC,SAApB,CAA8B,IAAI3V,EAAE,CAACY,EAAH,CAAM8T,MAAN,CAAa0C,IAAjB,EAA9B,CAAtB,CA1FM,CA4FN;;QACA,IAAMC,OAAO,GAAG,IAAI1W,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcyW,OAAlB,CAA0BpB,aAA1B,CAAhB;QACA,KAAK3J,IAAL,CAAU,eAAV,EAA2B8K,OAA3B,EAAoC,QAApC;QACA,KAAK9K,IAAL,CAAU,kBAAV,EAA8B8K,OAA9B,EAAuC,MAAvC;QACAA,OAAO,CAAC9B,WAAR,CAAoB,QAApB,EAA8B,KAAK1R,KAAL,CAAW0T,MAAzC,EAAiD,KAAK1T,KAAtD,EAhGM,CAkGN;;QACA,IAAM2T,YAAY,GAAG1B,OAAO,CAAC2B,sBAAR,EAArB;QACA,KAAKlL,IAAL,CAAU,iBAAV,EAA6BiL,YAAY,CAAC,UAAD,CAAZ,CAAyBE,IAAzB,CAA8B,CAA9B,CAA7B,EAA+D,SAA/D;QACA,KAAKnL,IAAL,CAAU,iBAAV,EAA6BiL,YAAY,CAAC,YAAD,CAAZ,CAA2BE,IAA3B,CAAgC,CAAhC,CAA7B,EAAiE,SAAjE,EArGM,CAuGN;;QAEAP,aAAa,CAAC1J,GAAd,CAAkB4J,OAAlB;QACAF,aAAa,CAAC1J,GAAd,CAAkB,KAAK5J,KAAvB,EAA8B;UAAE8T,IAAI,EAAE;QAAR,CAA9B;;QACA,KAAK/T,KAAL,CAAW6J,GAAX,CAAe0J,aAAf,EAA8B,CAA9B;;QACAxW,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBqK,WAApB,CAAgCnK,WAAhC,GAA8CiL,IAA9C,CAAmD,YAAnD,EAAiE4K,aAAjE,EAAgF,YAAhF,EAA8F;UAC5F7N,SAD4F,qBAClFjF,KADkF,EAC3E;YACf,OAAOA,KAAK,GAAG,SAAH,GAAe,UAA3B;UACD;QAH2F,CAA9F;QAMA,KAAKJ,YAAL,GAAoB,IAAIjE,EAAE,CAACY,EAAH,CAAM8U,SAAN,CAAgBC,SAApB,CAA8B,IAAI3V,EAAE,CAACY,EAAH,CAAM8T,MAAN,CAAa0C,IAAjB,EAA9B,CAApB,CAlHM,CAoHN;;QACA,IAAMQ,IAAI,GAAG,IAAI5X,EAAE,CAACY,EAAH,CAAMiX,IAAN,CAAWC,IAAf,CAAoB,IAApB,CAAb;QACAF,IAAI,CAACG,aAAL,CAAmB,iBAAnB;QACA,KAAK7T,oBAAL,GAA4B,IAAIlE,EAAE,CAACyB,IAAH,CAAQuW,UAAR,CAAmBF,IAAvB,CAA4B,KAAKjQ,YAAL,EAA5B,EAAiD+P,IAAjD,EAAuD,WAAvD,CAA5B;;QAEA,KAAK1T,oBAAL,CAA0B+T,WAA1B,CAAsC;UACpCC,UAAU,EAAE,YAAY;YACtB,IAAMjG,IAAI,GAAG,IAAItR,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcgX,IAAd,CAAmBM,WAAvB,EAAb;YACAlG,IAAI,CAACsD,WAAL,CAAiB,OAAjB,EAA0B,KAAKxE,YAA/B,EAA6C,IAA7C;YACA,OAAOkB,IAAP;UACD,CAJW,CAIV1F,IAJU,CAIL,IAJK,CADwB;UAOpC6L,QAPoC,oBAO3BJ,UAP2B,EAOf/F,IAPe,EAOToG,KAPS,EAOF;YAChCL,UAAU,CAACM,qBAAX,CAAiCrG,IAAjC,EAAuCoG,KAAvC;YACAL,UAAU,CAACO,YAAX,CAAwB,gBAAxB,EAA0C,WAA1C,EAAuD,IAAvD,EAA6DtG,IAA7D,EAAmEoG,KAAnE;YAEAL,UAAU,CAACO,YAAX,CAAwB,eAAxB,EAAyC,UAAzC,EAAqD,IAArD,EAA2DtG,IAA3D,EAAiEoG,KAAjE;YAEAL,UAAU,CAACO,YAAX,CAAwB,MAAxB,EAAgC,MAAhC,EAAwC,IAAxC,EAA8CtG,IAA9C,EAAoDoG,KAApD;YACAL,UAAU,CAACO,YAAX,CAAwB,WAAxB,EAAqC,WAArC,EAAkD,IAAlD,EAAwDtG,IAAxD,EAA8DoG,KAA9D;UACD;QAfmC,CAAtC;;QAkBAT,IAAI,CAACrC,WAAL,CAAiB,iBAAjB,EAAoC,KAAK5I,sBAAzC,EAAiE,IAAjE;;QACA,KAAK1I,YAAL,CAAkBwJ,GAAlB,CAAsBmK,IAAtB;;QAEA,KAAK9T,MAAL,GAAc,IAAI9D,EAAE,CAACY,EAAH,CAAM8U,SAAN,CAAgB8C,KAApB,EAAd;;QACA,KAAK1U,MAAL,CAAYyR,WAAZ,CAAwB,iBAAxB,EAA2C,KAAKpD,uBAAhD,EAAyE,IAAzE;;QAEA,KAAKlO,YAAL,CAAkBwJ,GAAlB,CAAsB,KAAK3J,MAA3B,EAAmC;UAAE6T,IAAI,EAAE;QAAR,CAAnC;;QACA,KAAK/T,KAAL,CAAW6J,GAAX,CAAe,KAAKxJ,YAApB,EAAkC,CAAlC;;QAEA,IAAMwU,aAAa,GAAG,IAAI9X,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcO,KAAd,CAAoBsN,QAAxB,CAAiC6H,UAAjC,EAA6C,qBAA7C,CAAtB;QAEAkC,aAAa,CAACC,YAAd,CAA2B,KAA3B;QACA,KAAK7Q,YAAL,GAAoBhB,IAApB,CAAyB4R,aAAzB;QACAb,IAAI,CAAC5I,iBAAL,CAAuB,CAACyJ,aAAD,CAAvB;MACD,CAp/BM;MAs/BP1O,UAt/BO,wBAs/BM;QACX,IAAM1C,GAAG,GAAGrH,EAAE,CAACO,IAAH,CAAQ+D,IAAR,CAAaC,cAAb,EAAZ;QACA,IAAMoU,UAAU,GAAG;UACjBhQ,OAAO,EAAE3I,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,OAArB,CADQ;UAEjB6S,KAAK,EAAE,IAFU;UAGjBC,QAAQ,EAAE3D,IAAI,CAAC4D,GAAL,CAAS,GAAT,EAAc9Y,EAAE,CAAC0E,GAAH,CAAOqU,QAAP,CAAgBC,QAAhB,EAAd,CAHO;UAIjBC,SAAS,EAAEjZ,EAAE,CAAC0E,GAAH,CAAOqU,QAAP,CAAgBG,SAAhB,EAJM;UAKjBjX,OAAO,kJAGEtB,EAAE,CAACwY,OAAH,CAAWC,OAHb,kEAKQpZ,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,YAArB,CALR,8CAMMpF,EAAE,CAACwY,OAAH,CAAWE,IANjB,mDAOSrZ,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,gBAArB,CAPT,+CAQOpF,EAAE,CAACwY,OAAH,CAAWG,GARlB,yDASetZ,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,iBAArB,CATf,2DAUmBpF,EAAE,CAACwY,OAAH,CAAWI,oBAV9B,qBAU6D5Y,EAAE,CAACwY,OAAH,CAAWK,oBAVxE,oDAWUxZ,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,QAArB,CAXV,gDAYQsB,GAAG,CAACoS,SAAJ,MAAmB,GAZ3B,yDAaezZ,EAAE,CAAC8F,MAAH,CAAUxD,OAAV,CAAkByD,EAAlB,CAAqB,aAArB,KAAuC,GAbtD,qDAcasB,GAAG,CAACqS,mBAAJ,EAdb;QALU,CAAnB;QAwBA,IAAI/Y,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcsH,MAAd,CAAqBwR,QAAzB,CAAkChB,UAAlC,EAA8C5P,IAA9C;MACD;IAjhCM,CAtG2B;;IA0nCpC;AACF;AACA;AACA;AACA;IACE6Q,QA/nCoC,sBA+nCzB;MACT,KAAKC,eAAL,CAAqB,OAArB,EAA8B,OAA9B,EAAuC,QAAvC,EAAiD,cAAjD,EAAiE,sBAAjE,EADS,CAGT;;;MACA,IAAMC,WAAW,GAAG9Z,EAAE,CAACO,IAAH,CAAQ+D,IAAR,CAAaC,cAAb,EAApB;MACA,IAAM1D,OAAO,GAAGiZ,WAAW,CAACtV,iBAAZ,EAAhB;MACA3D,OAAO,CAAC4D,SAAR,CAAkB,KAAKV,gBAAvB;MACA,KAAKA,gBAAL,GAAwB,IAAxB,CAPS,CAST;;MACA,IAAI/D,EAAE,CAACmH,IAAH,CAAQ4S,YAAZ,CAAyB,YAAY;QACnCD,WAAW,CAACE,SAAZ;MACD,CAFD,EAEGC,QAFH;MAIAjT,QAAQ,CAACsK,IAAT,CAAc4I,WAAd,CAA0B,KAAKvW,QAA/B;MACA,KAAKA,QAAL,GAAc,IAAd;MACA,KAAKhC,QAAL,GAA0B,IAA1B;MAEA3B,EAAE,CAACgC,KAAH,CAASC,OAAT,CAAiBC,GAAjB,CAAqBiY,WAArB,CAAiC,cAAjC,EAAiD,KAAK/X,eAAtD,EAAuE,IAAvE,EAlBS,CAoBT;;MACA,OAAOzB,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcuZ,IAAd,CAAmBC,UAA1B;IACD;EArpCmC,CAAtC;EA1BA1Z,EAAE,CAACC,EAAH,CAAMC,OAAN,CAAcuZ,IAAd,CAAmBja,aAAnB,GAAmCA,aAAnC"
}