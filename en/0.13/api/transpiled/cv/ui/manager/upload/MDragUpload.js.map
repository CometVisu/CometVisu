{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "setDroppable",
    "getBounds",
    "_applyStartDragListeners",
    "addListenerOnce",
    "layout",
    "_getLayout",
    "ui",
    "Grow",
    "Canvas",
    "addListener",
    "__syncBounds",
    "properties",
    "uploadMode",
    "check",
    "init",
    "apply",
    "uploadHint",
    "statics",
    "onHtml5Drop",
    "ev",
    "preventDefault",
    "getFiles",
    "forEach",
    "uploadFile",
    "file",
    "replaceFile",
    "isConfig",
    "cv",
    "manager",
    "model",
    "FileItem",
    "isConfigFile",
    "name",
    "folder",
    "tree",
    "FileSystem",
    "isAccepted",
    "type",
    "set",
    "upload",
    "UploadMgr",
    "setFolder",
    "hasDroppableFile",
    "length",
    "files",
    "i",
    "l",
    "dataTransfer",
    "items",
    "item",
    "kind",
    "getAsFile",
    "push",
    "members",
    "__hasEmptyInfo",
    "_boundOnStop",
    "bounds",
    "getChildControl",
    "setUserBounds",
    "left",
    "top",
    "width",
    "height",
    "_createMDragUploadChildControlImpl",
    "id",
    "control",
    "container",
    "Composite",
    "setZIndex",
    "exclude",
    "_add",
    "edge",
    "bind",
    "setBackgroundColor",
    "dropBox",
    "basic",
    "Atom",
    "getUploadHint",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "iconPosition",
    "rich",
    "center",
    "setWrap",
    "setAnonymous",
    "add",
    "_onStopDragging",
    "setUploadMode",
    "document",
    "removeEventListener",
    "getContentElement",
    "getDomElement",
    "addEventListener",
    "_isDroppable",
    "MDragUpload",
    "_applyDragListeners",
    "element",
    "lid",
    "getData",
    "removeListenerById",
    "uploadable",
    "_onDrop",
    "__applyUploadMode",
    "value",
    "show",
    "hasChildControl",
    "isVisible"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/upload/MDragUpload.js"
  ],
  "sourcesContent": [
    "/* MDragUpload.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Add upload via drag&drop feature to this widget. The including widget must have a\n * \"upload-dropbox\" childcontrol or add\n *  <pre class=\"javascript\">\n *   if (!control) {\n        control = this._createMDragUploadChildControlImpl(id);\n      }\n *   </pre>\n *   to their own _createChildControlImpl method\n */\nqx.Mixin.define('cv.ui.manager.upload.MDragUpload', {\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n  construct() {\n    this.setDroppable(true);\n    if (this.getBounds()) {\n      this._applyStartDragListeners();\n    } else {\n      this.addListenerOnce('appear', () => {\n        this._applyStartDragListeners();\n      });\n    }\n    const layout = this._getLayout();\n    if (!(layout instanceof qx.ui.layout.Grow) && !(layout instanceof qx.ui.layout.Canvas)) {\n      this.addListener('resize', this.__syncBounds, this);\n    }\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n  properties: {\n    uploadMode: {\n      check: 'Boolean',\n      init: false,\n      apply: '__applyUploadMode'\n    },\n\n    uploadHint: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    /**\n     * Handles HTML5 drop events (dropping external files on dom element)\n     * @param ev {Event}\n     */\n    onHtml5Drop(ev) {\n      ev.preventDefault();\n      this.getFiles(ev).forEach(this.uploadFile, this);\n    },\n\n    /**\n     * Uploads the dropped file to the correct folder:\n     * - config files to the resources/config folder\n     * - accepted media files to the resources/config/media folder\n     * @param file {File}\n     * @param replaceFile {cv.ui.manager.model.FileItem?} optional, if set this files content gets replaced with the uploaded ones\n     */\n    uploadFile(file, replaceFile) {\n      const isConfig = cv.ui.manager.model.FileItem.isConfigFile(file.name);\n\n      let folder;\n      if (isConfig) {\n        // upload to root folder\n        folder = new cv.ui.manager.model.FileItem('.');\n      } else if (cv.ui.manager.tree.FileSystem.isAccepted(file.type)) {\n        // upload to media folder\n        folder = new cv.ui.manager.model.FileItem('media');\n      }\n      if (folder) {\n        folder.set({\n          type: 'dir'\n        });\n\n        const manager = new cv.ui.manager.upload.UploadMgr();\n        if (replaceFile) {\n          manager.replaceFile(file, replaceFile);\n        } else {\n          manager.setFolder(folder);\n          manager.uploadFile(file);\n        }\n      }\n    },\n\n    hasDroppableFile(ev) {\n      return this.getFiles(ev).length > 0;\n    },\n\n    /**\n     * Extracts acceptable files from event\n     * @param ev {Event}\n     * @private\n     */\n    getFiles(ev) {\n      const files = [];\n      let i;\n      let l;\n      let file;\n\n      if (ev.dataTransfer.items) {\n        // Use DataTransferItemList interface to access the file(s)\n        for (i = 0, l = ev.dataTransfer.items.length; i < l; i++) {\n          // If dropped items aren't files, reject them\n          const item = ev.dataTransfer.items[i];\n          if (item.kind === 'file' && cv.ui.manager.tree.FileSystem.isAccepted(item.type)) {\n            file = item.getAsFile();\n            files.push(file);\n          }\n        }\n      } else {\n        for (i = 0, l = ev.dataTransfer.files.length; i < l; i++) {\n          file = ev.dataTransfer.files[i];\n          if (cv.ui.manager.tree.FileSystem.isAccepted(file.type)) {\n            files.push(file);\n          }\n        }\n      }\n      return files;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n  members: {\n    __hasEmptyInfo: null,\n    _boundOnStop: null,\n\n    __syncBounds() {\n      const bounds = this.getBounds();\n      this.getChildControl('upload-overlay').setUserBounds(bounds.left, bounds.top, bounds.width, bounds.height);\n\n      this.getChildControl('upload-dropbox').setUserBounds(bounds.left, bounds.top, bounds.width, bounds.height);\n    },\n\n    // overridden\n    _createMDragUploadChildControlImpl(id) {\n      let control;\n      const bounds = this.getBounds();\n      const layout = this._getLayout();\n\n      switch (id) {\n        case 'upload-overlay':\n          control = new qx.ui.container.Composite();\n          control.setZIndex(1000000);\n          control.exclude();\n          if (layout instanceof qx.ui.layout.Canvas) {\n            this._add(control, { edge: 0 });\n          } else if (!(this._getLayout() instanceof qx.ui.layout.Grow) && bounds) {\n            control.setUserBounds(bounds.left, bounds.top, bounds.width, bounds.height);\n          }\n          this._add(control);\n          this.getChildControl('upload-dropbox').bind('visibility', control, 'visibility');\n\n          break;\n\n        case 'upload-dropbox': {\n          control = new qx.ui.container.Composite(new qx.ui.layout.Grow());\n          control.setBackgroundColor('rgba(32, 32, 32, 0.9)');\n          control.setZIndex(1000);\n          const dropBox = new qx.ui.basic.Atom(this.getUploadHint(), cv.theme.dark.Images.getIcon('upload', 32));\n\n          dropBox.set({\n            iconPosition: 'top',\n            rich: true,\n            center: true\n          });\n\n          // control.bind('width', dropBox, 'maxWidth');\n          dropBox.getChildControl('label').setWrap(true);\n          control.setAnonymous(true);\n          control.add(dropBox);\n          control.exclude();\n          if (layout instanceof qx.ui.layout.Canvas) {\n            this._add(control, { edge: 0 });\n          } else if (!(this._getLayout() instanceof qx.ui.layout.Grow) && bounds) {\n            control.setUserBounds(bounds.left, bounds.top, bounds.width, bounds.height);\n          }\n          this._add(control);\n          break;\n        }\n      }\n\n      return control;\n    },\n\n    _onStopDragging(ev) {\n      ev.preventDefault();\n      this.setUploadMode(false);\n      document.removeEventListener('dragend', this._boundOnStop, false);\n    },\n\n    /**\n     * Apply dragover/-leave listeners to the dashboard to recognize File uploads via Drag&Drop\n     */\n    _applyStartDragListeners() {\n      // add the start listener to this widget\n      this.getContentElement()\n        .getDomElement()\n        .addEventListener(\n          'dragenter',\n          function (ev) {\n            // ev.preventDefault();\n            if (this._isDroppable) {\n              if (this._isDroppable(ev.dataTransfer.items)) {\n                // we have something to drop\n                this.setUploadMode(true);\n              }\n            } else if (cv.ui.manager.upload.MDragUpload.hasDroppableFile(ev)) {\n              // we have something to drop\n              this.setUploadMode(true);\n            }\n          }.bind(this),\n          false\n        );\n\n      if (this.getChildControl('upload-overlay').getBounds()) {\n        this._applyDragListeners();\n      } else {\n        this.getChildControl('upload-overlay').addListenerOnce('appear', () => {\n          this._applyDragListeners();\n        });\n      }\n    },\n\n    /**\n     * Apply dragover/-leave listeners to the dashboard to recognize File uploads via Drag&Drop\n     */\n    _applyDragListeners() {\n      const element = this.getChildControl('upload-overlay').getContentElement().getDomElement();\n      if (!element) {\n        const lid = this.getChildControl('upload-overlay').addListener('visibility', ev => {\n          if (ev.getData() === 'visible') {\n            this._applyDragListeners();\n            this.getChildControl('upload-overlay').removeListenerById(lid);\n          }\n        });\n\n        return;\n      }\n      element.addEventListener(\n        'dragexit',\n        function () {\n          this.setUploadMode(false);\n        }.bind(this),\n        false\n      );\n\n      element.addEventListener(\n        'dragover',\n        function (ev) {\n          ev.preventDefault();\n          let uploadable = false;\n          if (this._isDroppable) {\n            uploadable = this._isDroppable(ev.dataTransfer.items);\n          } else if (cv.ui.manager.upload.MDragUpload.hasDroppableFile(ev)) {\n            uploadable = true;\n          }\n          this.setUploadMode(uploadable);\n        }.bind(this),\n        false\n      );\n\n      this._boundOnStop = this._onStopDragging.bind(this);\n\n      element.addEventListener('dragleave', this._boundOnStop, false);\n      element.addEventListener(\n        'dragend',\n        function () {\n          this.setUploadMode(false);\n        }.bind(this),\n        false\n      );\n\n      document.addEventListener('dragend', this._boundOnStop, false);\n\n      if (this._onDrop) {\n        element.addEventListener('drop', this._onDrop.bind(this), false);\n      } else {\n        element.addEventListener(\n          'drop',\n          function (ev) {\n            cv.ui.manager.upload.MDragUpload.onHtml5Drop(ev);\n            this._onStopDragging(ev);\n          }.bind(this),\n          false\n        );\n      }\n    },\n\n    // property apply\n    __applyUploadMode(value) {\n      if (value === true) {\n        this.getChildControl('upload-dropbox').show();\n        if (this.hasChildControl('empty-info') && this.getChildControl('empty-info').isVisible()) {\n          this.getChildControl('empty-info').exclude();\n          this.__hasEmptyInfo = true;\n        } else {\n          this.__hasEmptyInfo = false;\n        }\n      } else {\n        this.getChildControl('upload-dropbox').exclude();\n        if (this.__hasEmptyInfo === true) {\n          this.getChildControl('empty-info').show();\n        }\n      }\n    }\n  }\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,kCAAhB,EAAoD;IAClD;AACF;AACA;AACA;AACA;IACEC,SANkD,uBAMtC;MAAA;;MACV,KAAKC,YAAL,CAAkB,IAAlB;;MACA,IAAI,KAAKC,SAAL,EAAJ,EAAsB;QACpB,KAAKC,wBAAL;MACD,CAFD,MAEO;QACL,KAAKC,eAAL,CAAqB,QAArB,EAA+B,YAAM;UACnC,KAAI,CAACD,wBAAL;QACD,CAFD;MAGD;;MACD,IAAME,MAAM,GAAG,KAAKC,UAAL,EAAf;;MACA,IAAI,EAAED,MAAM,YAAYX,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaG,IAAjC,KAA0C,EAAEH,MAAM,YAAYX,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaI,MAAjC,CAA9C,EAAwF;QACtF,KAAKC,WAAL,CAAiB,QAAjB,EAA2B,KAAKC,QAAhC,EAA8C,IAA9C;MACD;IACF,CAnBiD;;IAqBlD;AACF;AACA;AACA;AACA;IACEC,UAAU,EAAE;MACVC,UAAU,EAAE;QACVC,KAAK,EAAE,SADG;QAEVC,IAAI,EAAE,KAFI;QAGVC,KAAK,EAAE;MAHG,CADF;MAOVC,UAAU,EAAE;QACVH,KAAK,EAAE,QADG;QAEVC,IAAI,EAAE;MAFI;IAPF,CA1BsC;;IAuClD;AACF;AACA;AACA;AACA;IACEG,OAAO,EAAE;MACP;AACJ;AACA;AACA;MACIC,WALO,uBAKKC,EALL,EAKS;QACdA,EAAE,CAACC,cAAH;QACA,KAAKC,QAAL,CAAcF,EAAd,EAAkBG,OAAlB,CAA0B,KAAKC,UAA/B,EAA2C,IAA3C;MACD,CARM;;MAUP;AACJ;AACA;AACA;AACA;AACA;AACA;MACIA,UAjBO,sBAiBIC,IAjBJ,EAiBUC,WAjBV,EAiBuB;QAC5B,IAAMC,QAAQ,GAAGC,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcC,KAAd,CAAoBC,QAApB,CAA6BC,YAA7B,CAA0CP,IAAI,CAACQ,IAA/C,CAAjB;QAEA,IAAIC,MAAJ;;QACA,IAAIP,QAAJ,EAAc;UACZ;UACAO,MAAM,GAAG,IAAIN,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcC,KAAd,CAAoBC,QAAxB,CAAiC,GAAjC,CAAT;QACD,CAHD,MAGO,IAAIH,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcM,IAAd,CAAmBC,UAAnB,CAA8BC,UAA9B,CAAyCZ,IAAI,CAACa,IAA9C,CAAJ,EAAyD;UAC9D;UACAJ,MAAM,GAAG,IAAIN,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcC,KAAd,CAAoBC,QAAxB,CAAiC,OAAjC,CAAT;QACD;;QACD,IAAIG,MAAJ,EAAY;UACVA,MAAM,CAACK,GAAP,CAAW;YACTD,IAAI,EAAE;UADG,CAAX;UAIA,IAAMT,OAAO,GAAG,IAAID,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcW,MAAd,CAAqBC,SAAzB,EAAhB;;UACA,IAAIf,WAAJ,EAAiB;YACfG,OAAO,CAACH,WAAR,CAAoBD,IAApB,EAA0BC,WAA1B;UACD,CAFD,MAEO;YACLG,OAAO,CAACa,SAAR,CAAkBR,MAAlB;YACAL,OAAO,CAACL,UAAR,CAAmBC,IAAnB;UACD;QACF;MACF,CAzCM;MA2CPkB,gBA3CO,4BA2CUvB,EA3CV,EA2Cc;QACnB,OAAO,KAAKE,QAAL,CAAcF,EAAd,EAAkBwB,MAAlB,GAA2B,CAAlC;MACD,CA7CM;;MA+CP;AACJ;AACA;AACA;AACA;MACItB,QApDO,oBAoDEF,EApDF,EAoDM;QACX,IAAMyB,KAAK,GAAG,EAAd;QACA,IAAIC,CAAJ;QACA,IAAIC,CAAJ;QACA,IAAItB,IAAJ;;QAEA,IAAIL,EAAE,CAAC4B,YAAH,CAAgBC,KAApB,EAA2B;UACzB;UACA,KAAKH,CAAC,GAAG,CAAJ,EAAOC,CAAC,GAAG3B,EAAE,CAAC4B,YAAH,CAAgBC,KAAhB,CAAsBL,MAAtC,EAA8CE,CAAC,GAAGC,CAAlD,EAAqDD,CAAC,EAAtD,EAA0D;YACxD;YACA,IAAMI,IAAI,GAAG9B,EAAE,CAAC4B,YAAH,CAAgBC,KAAhB,CAAsBH,CAAtB,CAAb;;YACA,IAAII,IAAI,CAACC,IAAL,KAAc,MAAd,IAAwBvB,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcM,IAAd,CAAmBC,UAAnB,CAA8BC,UAA9B,CAAyCa,IAAI,CAACZ,IAA9C,CAA5B,EAAiF;cAC/Eb,IAAI,GAAGyB,IAAI,CAACE,SAAL,EAAP;cACAP,KAAK,CAACQ,IAAN,CAAW5B,IAAX;YACD;UACF;QACF,CAVD,MAUO;UACL,KAAKqB,CAAC,GAAG,CAAJ,EAAOC,CAAC,GAAG3B,EAAE,CAAC4B,YAAH,CAAgBH,KAAhB,CAAsBD,MAAtC,EAA8CE,CAAC,GAAGC,CAAlD,EAAqDD,CAAC,EAAtD,EAA0D;YACxDrB,IAAI,GAAGL,EAAE,CAAC4B,YAAH,CAAgBH,KAAhB,CAAsBC,CAAtB,CAAP;;YACA,IAAIlB,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcM,IAAd,CAAmBC,UAAnB,CAA8BC,UAA9B,CAAyCZ,IAAI,CAACa,IAA9C,CAAJ,EAAyD;cACvDO,KAAK,CAACQ,IAAN,CAAW5B,IAAX;YACD;UACF;QACF;;QACD,OAAOoB,KAAP;MACD;IA7EM,CA5CyC;;IA4HlD;AACF;AACA;AACA;AACA;IACES,OAAO,EAAE;MACPC,QAAc,EAAE,IADT;MAEPC,YAAY,EAAE,IAFP;MAIP7C,QAJO,sBAIQ;QACb,IAAM8C,MAAM,GAAG,KAAKvD,SAAL,EAAf;QACA,KAAKwD,eAAL,CAAqB,gBAArB,EAAuCC,aAAvC,CAAqDF,MAAM,CAACG,IAA5D,EAAkEH,MAAM,CAACI,GAAzE,EAA8EJ,MAAM,CAACK,KAArF,EAA4FL,MAAM,CAACM,MAAnG;QAEA,KAAKL,eAAL,CAAqB,gBAArB,EAAuCC,aAAvC,CAAqDF,MAAM,CAACG,IAA5D,EAAkEH,MAAM,CAACI,GAAzE,EAA8EJ,MAAM,CAACK,KAArF,EAA4FL,MAAM,CAACM,MAAnG;MACD,CATM;MAWP;MACAC,kCAZO,8CAY4BC,EAZ5B,EAYgC;QACrC,IAAIC,OAAJ;QACA,IAAMT,MAAM,GAAG,KAAKvD,SAAL,EAAf;;QACA,IAAMG,MAAM,GAAG,KAAKC,UAAL,EAAf;;QAEA,QAAQ2D,EAAR;UACE,KAAK,gBAAL;YACEC,OAAO,GAAG,IAAIxE,EAAE,CAACa,EAAH,CAAM4D,SAAN,CAAgBC,SAApB,EAAV;YACAF,OAAO,CAACG,SAAR,CAAkB,OAAlB;YACAH,OAAO,CAACI,OAAR;;YACA,IAAIjE,MAAM,YAAYX,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaI,MAAnC,EAA2C;cACzC,KAAK8D,IAAL,CAAUL,OAAV,EAAmB;gBAAEM,IAAI,EAAE;cAAR,CAAnB;YACD,CAFD,MAEO,IAAI,EAAE,KAAKlE,UAAL,cAA6BZ,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaG,IAA5C,KAAqDiD,MAAzD,EAAiE;cACtES,OAAO,CAACP,aAAR,CAAsBF,MAAM,CAACG,IAA7B,EAAmCH,MAAM,CAACI,GAA1C,EAA+CJ,MAAM,CAACK,KAAtD,EAA6DL,MAAM,CAACM,MAApE;YACD;;YACD,KAAKQ,IAAL,CAAUL,OAAV;;YACA,KAAKR,eAAL,CAAqB,gBAArB,EAAuCe,IAAvC,CAA4C,YAA5C,EAA0DP,OAA1D,EAAmE,YAAnE;YAEA;;UAEF,KAAK,gBAAL;YAAuB;cACrBA,OAAO,GAAG,IAAIxE,EAAE,CAACa,EAAH,CAAM4D,SAAN,CAAgBC,SAApB,CAA8B,IAAI1E,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaG,IAAjB,EAA9B,CAAV;cACA0D,OAAO,CAACQ,kBAAR,CAA2B,uBAA3B;cACAR,OAAO,CAACG,SAAR,CAAkB,IAAlB;cACA,IAAMM,OAAO,GAAG,IAAIjF,EAAE,CAACa,EAAH,CAAMqE,KAAN,CAAYC,IAAhB,CAAqB,KAAKC,aAAL,EAArB,EAA2ClD,EAAE,CAACmD,KAAH,CAASC,IAAT,CAAcC,MAAd,CAAqBC,OAArB,CAA6B,QAA7B,EAAuC,EAAvC,CAA3C,CAAhB;cAEAP,OAAO,CAACpC,GAAR,CAAY;gBACV4C,YAAY,EAAE,KADJ;gBAEVC,IAAI,EAAE,IAFI;gBAGVC,MAAM,EAAE;cAHE,CAAZ,EANqB,CAYrB;;cACAV,OAAO,CAACjB,eAAR,CAAwB,OAAxB,EAAiC4B,OAAjC,CAAyC,IAAzC;cACApB,OAAO,CAACqB,YAAR,CAAqB,IAArB;cACArB,OAAO,CAACsB,GAAR,CAAYb,OAAZ;cACAT,OAAO,CAACI,OAAR;;cACA,IAAIjE,MAAM,YAAYX,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaI,MAAnC,EAA2C;gBACzC,KAAK8D,IAAL,CAAUL,OAAV,EAAmB;kBAAEM,IAAI,EAAE;gBAAR,CAAnB;cACD,CAFD,MAEO,IAAI,EAAE,KAAKlE,UAAL,cAA6BZ,EAAE,CAACa,EAAH,CAAMF,MAAN,CAAaG,IAA5C,KAAqDiD,MAAzD,EAAiE;gBACtES,OAAO,CAACP,aAAR,CAAsBF,MAAM,CAACG,IAA7B,EAAmCH,MAAM,CAACI,GAA1C,EAA+CJ,MAAM,CAACK,KAAtD,EAA6DL,MAAM,CAACM,MAApE;cACD;;cACD,KAAKQ,IAAL,CAAUL,OAAV;;cACA;YACD;QAvCH;;QA0CA,OAAOA,OAAP;MACD,CA5DM;MA8DPuB,eA9DO,2BA8DSrE,EA9DT,EA8Da;QAClBA,EAAE,CAACC,cAAH;QACA,KAAKqE,aAAL,CAAmB,KAAnB;QACAC,QAAQ,CAACC,mBAAT,CAA6B,SAA7B,EAAwC,KAAKpC,YAA7C,EAA2D,KAA3D;MACD,CAlEM;;MAoEP;AACJ;AACA;MACIrD,wBAvEO,sCAuEoB;QAAA;;QACzB;QACA,KAAK0F,iBAAL,GACGC,aADH,GAEGC,gBAFH,CAGI,WAHJ,EAII,UAAU3E,EAAV,EAAc;UACZ;UACA,IAAI,KAAK4E,YAAT,EAAuB;YACrB,IAAI,KAAKA,YAAL,CAAkB5E,EAAE,CAAC4B,YAAH,CAAgBC,KAAlC,CAAJ,EAA8C;cAC5C;cACA,KAAKyC,aAAL,CAAmB,IAAnB;YACD;UACF,CALD,MAKO,IAAI9D,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcW,MAAd,CAAqByD,WAArB,CAAiCtD,gBAAjC,CAAkDvB,EAAlD,CAAJ,EAA2D;YAChE;YACA,KAAKsE,aAAL,CAAmB,IAAnB;UACD;QACF,CAXD,CAWEjB,IAXF,CAWO,IAXP,CAJJ,EAgBI,KAhBJ;;QAmBA,IAAI,KAAKf,eAAL,CAAqB,gBAArB,EAAuCxD,SAAvC,EAAJ,EAAwD;UACtD,KAAKgG,mBAAL;QACD,CAFD,MAEO;UACL,KAAKxC,eAAL,CAAqB,gBAArB,EAAuCtD,eAAvC,CAAuD,QAAvD,EAAiE,YAAM;YACrE,MAAI,CAAC8F,mBAAL;UACD,CAFD;QAGD;MACF,CAnGM;;MAqGP;AACJ;AACA;MACIA,mBAxGO,iCAwGe;QAAA;;QACpB,IAAMC,OAAO,GAAG,KAAKzC,eAAL,CAAqB,gBAArB,EAAuCmC,iBAAvC,GAA2DC,aAA3D,EAAhB;;QACA,IAAI,CAACK,OAAL,EAAc;UACZ,IAAMC,GAAG,GAAG,KAAK1C,eAAL,CAAqB,gBAArB,EAAuChD,WAAvC,CAAmD,YAAnD,EAAiE,UAAAU,EAAE,EAAI;YACjF,IAAIA,EAAE,CAACiF,OAAH,OAAiB,SAArB,EAAgC;cAC9B,MAAI,CAACH,mBAAL;;cACA,MAAI,CAACxC,eAAL,CAAqB,gBAArB,EAAuC4C,kBAAvC,CAA0DF,GAA1D;YACD;UACF,CALW,CAAZ;UAOA;QACD;;QACDD,OAAO,CAACJ,gBAAR,CACE,UADF,EAEE,YAAY;UACV,KAAKL,aAAL,CAAmB,KAAnB;QACD,CAFD,CAEEjB,IAFF,CAEO,IAFP,CAFF,EAKE,KALF;QAQA0B,OAAO,CAACJ,gBAAR,CACE,UADF,EAEE,UAAU3E,EAAV,EAAc;UACZA,EAAE,CAACC,cAAH;UACA,IAAIkF,UAAU,GAAG,KAAjB;;UACA,IAAI,KAAKP,YAAT,EAAuB;YACrBO,UAAU,GAAG,KAAKP,YAAL,CAAkB5E,EAAE,CAAC4B,YAAH,CAAgBC,KAAlC,CAAb;UACD,CAFD,MAEO,IAAIrB,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcW,MAAd,CAAqByD,WAArB,CAAiCtD,gBAAjC,CAAkDvB,EAAlD,CAAJ,EAA2D;YAChEmF,UAAU,GAAG,IAAb;UACD;;UACD,KAAKb,aAAL,CAAmBa,UAAnB;QACD,CATD,CASE9B,IATF,CASO,IATP,CAFF,EAYE,KAZF;QAeA,KAAKjB,YAAL,GAAoB,KAAKiC,eAAL,CAAqBhB,IAArB,CAA0B,IAA1B,CAApB;QAEA0B,OAAO,CAACJ,gBAAR,CAAyB,WAAzB,EAAsC,KAAKvC,YAA3C,EAAyD,KAAzD;QACA2C,OAAO,CAACJ,gBAAR,CACE,SADF,EAEE,YAAY;UACV,KAAKL,aAAL,CAAmB,KAAnB;QACD,CAFD,CAEEjB,IAFF,CAEO,IAFP,CAFF,EAKE,KALF;QAQAkB,QAAQ,CAACI,gBAAT,CAA0B,SAA1B,EAAqC,KAAKvC,YAA1C,EAAwD,KAAxD;;QAEA,IAAI,KAAKgD,OAAT,EAAkB;UAChBL,OAAO,CAACJ,gBAAR,CAAyB,MAAzB,EAAiC,KAAKS,OAAL,CAAa/B,IAAb,CAAkB,IAAlB,CAAjC,EAA0D,KAA1D;QACD,CAFD,MAEO;UACL0B,OAAO,CAACJ,gBAAR,CACE,MADF,EAEE,UAAU3E,EAAV,EAAc;YACZQ,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcW,MAAd,CAAqByD,WAArB,CAAiC9E,WAAjC,CAA6CC,EAA7C;;YACA,KAAKqE,eAAL,CAAqBrE,EAArB;UACD,CAHD,CAGEqD,IAHF,CAGO,IAHP,CAFF,EAME,KANF;QAQD;MACF,CApKM;MAsKP;MACAgC,QAvKO,oBAuKWC,KAvKX,EAuKkB;QACvB,IAAIA,KAAK,KAAK,IAAd,EAAoB;UAClB,KAAKhD,eAAL,CAAqB,gBAArB,EAAuCiD,IAAvC;;UACA,IAAI,KAAKC,eAAL,CAAqB,YAArB,KAAsC,KAAKlD,eAAL,CAAqB,YAArB,EAAmCmD,SAAnC,EAA1C,EAA0F;YACxF,KAAKnD,eAAL,CAAqB,YAArB,EAAmCY,OAAnC;YACA,KAAKf,QAAL,GAAsB,IAAtB;UACD,CAHD,MAGO;YACL,KAAKA,QAAL,GAAsB,KAAtB;UACD;QACF,CARD,MAQO;UACL,KAAKG,eAAL,CAAqB,gBAArB,EAAuCY,OAAvC;;UACA,IAAI,KAAKf,QAAL,KAAwB,IAA5B,EAAkC;YAChC,KAAKG,eAAL,CAAqB,YAArB,EAAmCiD,IAAnC;UACD;QACF;MACF;IAtLM;EAjIyC,CAApD;EA7BA/E,EAAE,CAACrB,EAAH,CAAMsB,OAAN,CAAcW,MAAd,CAAqByD,WAArB,CAAiCpG,aAAjC,GAAiDA,aAAjD"
}