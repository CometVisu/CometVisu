{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/viewer/Config.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "viewer",
    "AbstractViewer",
    "construct",
    "_setLayout",
    "layout",
    "Grow",
    "properties",
    "appearance",
    "refine",
    "init",
    "target",
    "check",
    "external",
    "connectToWindow",
    "apply",
    "statics",
    "SUPPORTED_FILES",
    "TITLE",
    "locale",
    "Manager",
    "tr",
    "ICON",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "members",
    "_windowRef",
    "_source",
    "_reloading",
    "_applyConnectToWindow",
    "value",
    "setExternal",
    "_applyFile",
    "file",
    "old",
    "isConfigFile",
    "event",
    "message",
    "Bus",
    "unsubscribe",
    "getBusTopic",
    "_onChange",
    "configName",
    "model",
    "FileItem",
    "getConfigName",
    "getFullPath",
    "url",
    "util",
    "Uri",
    "getAbsolute",
    "LibraryManager",
    "getInstance",
    "get",
    "getTarget",
    "control",
    "getChildControl",
    "show",
    "setSource",
    "hint",
    "isVisible",
    "exclude",
    "ref",
    "window",
    "open",
    "isConnectToWindow",
    "onbeforeunload",
    "_onClose",
    "bind",
    "iframe",
    "subscribe",
    "snackbar",
    "Controller",
    "error",
    "hasChildControl",
    "resetSource",
    "close",
    "ev",
    "data",
    "getData",
    "type",
    "href",
    "getDocument",
    "location",
    "startsWith",
    "addListenerOnce",
    "reload",
    "dispatchByName",
    "getFile",
    "resetFile",
    "openPage",
    "page",
    "path",
    "element",
    "getContentElement",
    "getDomElement",
    "contentWindow",
    "otherEngine",
    "TemplateEngine",
    "pageId",
    "getPageIdByPath",
    "scrollToPage",
    "setHighlightWidget",
    "widgetId",
    "setHighlightedWidget",
    "_createChildControlImpl",
    "id",
    "embed",
    "Iframe",
    "addListener",
    "add",
    "basic",
    "Atom",
    "set",
    "center",
    "font",
    "focus",
    "iconPosition",
    "backgroundColor",
    "Timer",
    "once",
    "_add",
    "destruct",
    "Config"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Config.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Show rendered configs.\n */\nqx.Class.define('cv.ui.manager.viewer.Config', {\n  extend: cv.ui.manager.viewer.AbstractViewer,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this._setLayout(new qx.ui.layout.Grow());\n  },\n\n  /*\n    ***********************************************\n      PROPERTIES\n    ***********************************************\n    */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'config-viewer'\n    },\n\n    target: {\n      check: ['iframe', 'window'],\n      init: 'window'\n    },\n\n    external: {\n      refine: true,\n      init: true\n    },\n\n    connectToWindow: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyConnectToWindow'\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    SUPPORTED_FILES: /^(demo|\\.)?\\/?visu_config.*\\.xml/,\n    TITLE: qx.locale.Manager.tr('Config viewer'),\n    ICON: cv.theme.dark.Images.getIcon('preview', 18)\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _windowRef: null,\n    _source: null,\n    _reloading: false,\n\n    _applyConnectToWindow: function (value) {\n      this.setExternal(!value);\n    },\n\n    _applyFile: function (file, old) {\n      if (old && old.isConfigFile()) {\n        qx.event.message.Bus.unsubscribe(old.getBusTopic(), this._onChange, this);\n      }\n      if (file) {\n        if (file.isConfigFile()) {\n          const configName = cv.ui.manager.model.FileItem.getConfigName(file.getFullPath());\n          let url = qx.util.Uri.getAbsolute(qx.util.LibraryManager.getInstance().get('cv', 'resourceUri') + '/..') + '?config=' + (configName || '');\n          if (this.getTarget() === 'iframe') {\n            url += '&preview=1&libraryCheck=false';\n            const control = this.getChildControl('iframe');\n            this._source = url;\n            this.getChildControl('loading').show();\n            control.setSource(url);\n            control.show();\n            const hint = this.getChildControl('hint', true);\n            if (hint && hint.isVisible()) {\n              hint.exclude();\n            }\n          } else {\n            this._source = url;\n            let ref = window.open(url, configName);\n            if (this.isConnectToWindow()) {\n              this._windowRef = ref;\n              this._windowRef.onbeforeunload = this._onClose.bind(this);\n              const hint = this.getChildControl('hint');\n              hint.show();\n              const iframe = this.getChildControl('iframe', true);\n              if (iframe && iframe.isVisible()) {\n                iframe.exclude();\n              }\n            } else {\n              // no connection close this immediately\n              this._onClose();\n              return;\n            }\n          }\n          qx.event.message.Bus.subscribe(file.getBusTopic(), this._onChange, this);\n        } else {\n          cv.ui.manager.snackbar.Controller.error(this.tr('%1 is no configuration file', file.getFullPath()));\n          this._source = null;\n        }\n      } else {\n        if (this.hasChildControl('iframe')) {\n          this.getChildControl('iframe').resetSource();\n          this.getChildControl('iframe').exclude();\n        }\n        if (this.hasChildControl('hint')) {\n          this.getChildControl('hint').exclude();\n        }\n        if (this._windowRef) {\n          this._windowRef.close();\n        }\n      }\n    },\n\n    _onChange: function (ev) {\n      const data = ev.getData();\n      if (data.type === 'contentChanged') {\n        if (this.hasChildControl('iframe')) {\n          const iframe = this.getChildControl('iframe');\n          const href = iframe.getDocument().location.href;\n          // use href to get the anchor to keep the currently opened page on reload\n          const url = href.startsWith(this._source) ? iframe.getDocument().location.href : this._source;\n          if (url && url !== 'about:blank') {\n            this._reloading = true;\n            this.getChildControl('loading').show();\n            iframe.addListenerOnce('load', () => {\n              this._reloading = false;\n              iframe.setSource(url);\n            }, this);\n          }\n          iframe.setSource('about:blank');\n        } else if (this._windowRef) {\n          this._windowRef.reload();\n        }\n      }\n    },\n\n    _onClose: function () {\n      if (this._windowRef) {\n        qx.event.message.Bus.dispatchByName('cv.manager.action.close', this.getFile());\n        this._windowRef = null;\n      }\n      this.resetFile();\n    },\n\n    openPage: function (page, path) {\n      if (this.hasChildControl('iframe')) {\n        const element = this.getChildControl('iframe').getContentElement().getDomElement();\n        if (element && element.contentWindow.cv) {\n          const otherEngine = element.contentWindow.cv.TemplateEngine.getInstance();\n          const pageId = path ? otherEngine.getPageIdByPath(page, path) : page;\n          otherEngine.scrollToPage(pageId, 0);\n        }\n      }\n    },\n\n    setHighlightWidget: function (widgetId) {\n      if (this.hasChildControl('iframe')) {\n        const element = this.getChildControl('iframe').getContentElement().getDomElement();\n        if (element && element.contentWindow.cv) {\n          const otherEngine = element.contentWindow.cv.TemplateEngine.getInstance();\n          otherEngine.setHighlightedWidget(widgetId);\n        }\n      }\n    },\n\n    // overridden\n    _createChildControlImpl : function(id) {\n      let control;\n\n      switch (id) {\n         case 'iframe':\n           control = new qx.ui.embed.Iframe();\n           control.exclude();\n           control.addListener('load', () => {\n             if (this.hasChildControl('loading') && !this._reloading) {\n               this.getChildControl('loading').exclude();\n             }\n           }, this);\n           this.getChildControl('scroll').add(control);\n           break;\n\n         case 'hint':\n           control = new qx.ui.basic.Atom(this.tr('This configuration has been opened in another window. When you close this file, the window will also be closed. Click here top jump the the window.'));\n           control.set({\n             center: true,\n             font: 'title'\n           });\n           control.addListener('tap', function () {\n             if (this._windowRef) {\n               this._windowRef.focus();\n             }\n           }, this);\n           this.getChildControl('scroll').add(control);\n           break;\n\n         case 'loading':\n           control = new qx.ui.basic.Atom(this.tr('Loading...'), cv.theme.dark.Images.getIcon('reload', 64));\n           control.set({\n             center: true,\n             font: 'title',\n             iconPosition: 'top',\n             backgroundColor: 'rgba(0,0,0,0.2)'\n           });\n           control.addListener('appear', () => {\n             qx.event.Timer.once(() => {\n               control.exclude();\n             }, this, 5000);\n           });\n           control.exclude();\n           this._add(control);\n           break;\n       }\n\n       return control || this.base(arguments, id);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._windowRef = null;\n  }\n});\n"
  ]
}