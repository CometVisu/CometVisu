{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/viewer/Folder.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "viewer",
    "AbstractViewer",
    "implement",
    "core",
    "ISingleSelection",
    "form",
    "IModelSelection",
    "include",
    "MSingleSelectionHandling",
    "MRemoteChildrenHandling",
    "MModelSelection",
    "control",
    "MFileEventHandler",
    "construct",
    "noToolbar",
    "model",
    "Preferences",
    "getInstance",
    "bind",
    "_isImageRegex",
    "RegExp",
    "Image",
    "SUPPORTED_FILES",
    "join",
    "initModel",
    "data",
    "Array",
    "_setLayout",
    "layout",
    "VBox",
    "_newItem",
    "FileItem",
    "set",
    "fake",
    "type",
    "loaded",
    "icon",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "displayName",
    "tr",
    "special",
    "_debouncedOnFilter",
    "util",
    "Function",
    "debounce",
    "_onFilter",
    "_createChildControl",
    "statics",
    "isDir",
    "item",
    "getType",
    "TITLE",
    "locale",
    "Manager",
    "ICON",
    "events",
    "addItem",
    "removeItem",
    "properties",
    "check",
    "deferredInit",
    "permanentFilter",
    "nullable",
    "apply",
    "showTextFilter",
    "init",
    "labelConverter",
    "disableScrolling",
    "viewMode",
    "event",
    "members",
    "_controller",
    "_getItems",
    "getChildControl",
    "getChildren",
    "_isAllowEmptySelection",
    "_defaultLabelConverter",
    "name",
    "getViewMode",
    "parts",
    "split",
    "length",
    "pop",
    "_getDelegate",
    "getLabelConverter",
    "converter",
    "createItem",
    "FileListItem",
    "configureItem",
    "addListener",
    "_onDblTap",
    "_onFsItemRightClick",
    "setShowFileActions",
    "bindItem",
    "controller",
    "index",
    "bindProperty",
    "source",
    "file",
    "test",
    "getName",
    "getServerPath",
    "ev",
    "getCurrentTarget",
    "getModel",
    "getSpecial",
    "preventDefault",
    "getBubbles",
    "stopPropagation",
    "menu",
    "contextmenu",
    "GlobalFileItem",
    "configure",
    "setContextMenu",
    "openAtPointer",
    "stop",
    "message",
    "Bus",
    "dispatchByName",
    "_applyFile",
    "old",
    "removeRelatedBindings",
    "resetModel",
    "container",
    "List",
    "setDelegate",
    "setParent",
    "getValue",
    "getPermanentFilter",
    "setModel",
    "load",
    "resetParent",
    "_handleFileEvent",
    "folder",
    "getFile",
    "getData",
    "action",
    "reload",
    "path",
    "startsWith",
    "getFullPath",
    "children",
    "dispose",
    "some",
    "child",
    "remove",
    "_applyShowTextFilter",
    "value",
    "setVisibility",
    "filterString",
    "filterFunction",
    "filtered",
    "filter",
    "includes",
    "getChildrenContainer",
    "_onAddChild",
    "e",
    "fireDataEvent",
    "_onRemoveChild",
    "_onFileEvent",
    "_applyDisableScrolling",
    "exclude",
    "_addAt",
    "flex",
    "scrollContainer",
    "show",
    "add",
    "_createChildControlImpl",
    "id",
    "ToolBar",
    "TextField",
    "placeholder",
    "liveUpdate",
    "margin",
    "isShowTextFilter",
    "Scroll",
    "Composite",
    "Flow",
    "isDisableScrolling",
    "destruct",
    "_disposeObjects",
    "Folder"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Folder.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Displays folder content in an explorer like view.\n */\nqx.Class.define('cv.ui.manager.viewer.Folder', {\n  extend: cv.ui.manager.viewer.AbstractViewer,\n  implement: [\n    qx.ui.core.ISingleSelection,\n    qx.ui.form.IModelSelection\n  ],\n  include: [\n    qx.ui.core.MSingleSelectionHandling,\n    qx.ui.core.MRemoteChildrenHandling,\n    qx.ui.form.MModelSelection,\n    cv.ui.manager.control.MFileEventHandler\n  ],\n\n  /*\n ***********************************************\n   CONSTRUCTOR\n ***********************************************\n */\n  construct: function (noToolbar) {\n    this.base(arguments);\n    cv.ui.manager.model.Preferences.getInstance().bind('startViewMode', this, 'viewMode');\n    this._isImageRegex = new RegExp('\\\\.(' + cv.ui.manager.viewer.Image.SUPPORTED_FILES.join('|') + ')$', 'i');\n    this.initModel(new qx.data.Array());\n    this._setLayout(new qx.ui.layout.VBox(8));\n\n    this._newItem = new cv.ui.manager.model.FileItem('new', 'new', null).set({\n      fake: true,\n      type: 'file',\n      loaded: true,\n      icon: cv.theme.dark.Images.getIcon('upload'),\n      displayName: this.tr('Upload file'),\n      special: 'add-file'\n    });\n\n    this._debouncedOnFilter = qx.util.Function.debounce(this._onFilter, 500, false);\n    if (!noToolbar) {\n      this._createChildControl('toolbar');\n    }\n    this._createChildControl('filter');\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    SUPPORTED_FILES: function isDir(item) {\n      // noinspection JSConstructorReturnsPrimitive\n      return item.getType() === 'dir';\n    },\n    TITLE: qx.locale.Manager.tr('Show folder'),\n    ICON: cv.theme.dark.Images.getIcon('folder', 18)\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    /**\n     * This event is fired after a list item was added to the list. The\n     * {@link qx.event.type.Data#getData} method of the event returns the\n     * added item.\n     */\n    addItem : 'qx.event.type.Data',\n\n    /**\n     * This event is fired after a list item has been removed from the list.\n     * The {@link qx.event.type.Data#getData} method of the event returns the\n     * removed item.\n     */\n    removeItem : 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    permanentFilter: {\n      check: 'Function',\n      nullable: true,\n      apply: '_onFilter'\n    },\n\n    showTextFilter: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowTextFilter'\n    },\n\n    labelConverter: {\n      check: 'Function',\n      nullable: true\n    },\n\n    disableScrolling: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyDisableScrolling'\n    },\n\n    viewMode: {\n      check: ['list', 'preview'],\n      init: 'list',\n      event: 'changeViewMode'\n    }\n  },\n\n  /*\n ***********************************************\n   MEMBERS\n ***********************************************\n */\n  members: {\n    _controller: null,\n    _isImageRegex: null,\n    _newItem: null,\n\n    _getItems: function() {\n      return this.getChildControl('list').getChildren();\n    },\n\n    _isAllowEmptySelection: function () {\n      return true;\n    },\n\n    _defaultLabelConverter: function (name) {\n      if (this.getViewMode() === 'list') {\n        // do not remove file type in list mode\n        return name;\n      }\n      const parts = name.split('.');\n      if (parts.length > 1) {\n        parts.pop();\n      }\n      return parts.join('.');\n    },\n\n    _getDelegate: function () {\n      const labelConverter = this.getLabelConverter();\n      const converter = {\n        converter: labelConverter ? labelConverter : this._defaultLabelConverter.bind(this)\n      };\n      return {\n        createItem: function () {\n          return new cv.ui.manager.form.FileListItem();\n        },\n\n        configureItem: function (item) {\n          item.addListener('dbltap', this._onDblTap, this);\n          item.addListener('contextmenu', this._onFsItemRightClick, this);\n          item.addListener('action', this._onFsItemRightClick, this);\n          item.setShowFileActions(true);\n          this.bind('viewMode', item, 'viewMode');\n        }.bind(this),\n\n        bindItem: function (controller, item, index) {\n          controller.bindProperty('', 'model', null, item, index);\n          controller.bindProperty('displayName', 'label', converter, item, index);\n          controller.bindProperty('icon', 'icon', {\n            converter: function (source, file) {\n              if (file.getType() === 'file' && this._isImageRegex.test(file.getName())) {\n                // use the image as icon\n                return file.getServerPath();\n              } \n                if (!source) {\n                  return null;\n                }\n                // remove size from icon source\n              const parts = source.split('/');\n              if (parts.length === 3) {\n                  parts.pop();\n                }\n                return parts.join('/');\n            }.bind(this)\n          }, item, index);\n        }.bind(this)\n      };\n    },\n\n    _onFsItemRightClick: function (ev) {\n      const file = ev.getCurrentTarget().getModel();\n      if (file.getSpecial() === 'add-file') {\n        ev.preventDefault();\n        if (ev.getBubbles()) {\n          ev.stopPropagation();\n        }\n        return;\n      }\n      const menu = cv.ui.manager.contextmenu.GlobalFileItem.getInstance();\n      menu.configure(file);\n      ev.getCurrentTarget().setContextMenu(menu);\n      menu.openAtPointer(ev);\n\n      // Do not show native menu\n      // don't open any other contextmenus\n      if (ev.getBubbles()) {\n        ev.stop();\n      }\n    },\n\n    _onDblTap: function (ev) {\n      const file = ev.getCurrentTarget().getModel();\n      if (file.getSpecial() === 'add-file') {\n        // Select file for upload\n\n      } else {\n        qx.event.message.Bus.dispatchByName('cv.manager.open', file);\n      }\n    },\n\n    _applyFile: function (file, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n        this.resetModel();\n      }\n      if (file) {\n        const container = this.getChildControl('list');\n        if (!this._controller) {\n          this._controller = new qx.data.controller.List(null, container);\n          this._controller.setDelegate(this._getDelegate());\n        }\n        file.bind('children', this, 'model');\n        const model = this.getModel();\n        this._newItem.setParent(file);\n        model.addListener('change', function () {\n          if (this.getChildControl('filter').getValue() || this.getPermanentFilter()) {\n            this._onFilter();\n          } else {\n            this._controller.setModel(model);\n          }\n        }, this);\n        this._controller.setModel(model);\n        file.load();\n      } else {\n        if (this._controller) {\n          this._controller.resetModel();\n        }\n        this._newItem.resetParent();\n      }\n    },\n\n    _handleFileEvent: function (ev) {\n      const folder = this.getFile();\n      const data = ev.getData();\n      switch (data.action) {\n        case 'moved':\n          folder.reload();\n          break;\n\n        case 'added':\n        case 'uploaded':\n        case 'created':\n          if (data.path.startsWith(folder.getFullPath())) {\n            folder.reload();\n          }\n          break;\n\n        case 'deleted': {\n          let children;\n          if (folder) {\n            if (data.path === folder.getFullPath()) {\n              // this item has been deleted\n              this.dispose();\n            } else if (data.path.startsWith(folder.getFullPath())) {\n              // delete child\n              children = folder.getChildren();\n              children.some(function (child) {\n                if (child.getFullPath() === data.path) {\n                  children.remove(child);\n                  this.removeRelatedBindings(child);\n                  return true;\n                }\n                return false;\n              }, this);\n            }\n          }\n          children = this.getModel();\n          children.some(function (child) {\n            if (child.getFullPath() === data.path) {\n              children.remove(child);\n              this.removeRelatedBindings(child);\n              return true;\n            }\n            return false;\n          }, this);\n          break;\n        }\n      }\n    },\n\n    _applyShowTextFilter: function (value) {\n      this.getChildControl('filter').setVisibility(value ? 'visible' : 'excluded');\n    },\n\n    _onFilter: function () {\n      if (this._controller) {\n        const filterString = this.getChildControl('filter').getValue();\n        const filterFunction = this.getPermanentFilter();\n        const filtered = this.getModel().filter(function (file) {\n          return (!filterFunction || filterFunction(file)) && (!filterString || file.getName().includes(filterString));\n        });\n        this._controller.setModel(filtered);\n      }\n    },\n\n    getChildrenContainer: function () {\n      return this.getChildControl('list');\n    },\n\n    /**\n     * Handle child widget adds on the content pane\n     *\n     * @param e {qx.event.type.Data} the event instance\n     */\n    _onAddChild : function(e) {\n      this.fireDataEvent('addItem', e.getData());\n    },\n\n    /**\n     * Handle child widget removes on the content pane\n     *\n     * @param e {qx.event.type.Data} the event instance\n     */\n    _onRemoveChild : function(e) {\n      this.fireDataEvent('removeItem', e.getData());\n    },\n\n    _onFileEvent: function (ev) {\n      const data = ev.getData();\n      switch (data.action) {\n        case 'deleted':\n          break;\n      }\n    },\n\n    _applyDisableScrolling: function (value) {\n      if (value) {\n        this.getChildControl('scroll').exclude();\n        this._addAt(this.getChildControl('list'), 1, {flex: 1});\n      } else {\n        const scrollContainer = this.getChildControl('scroll');\n        scrollContainer.show();\n        scrollContainer.add(this.getChildControl('list'));\n        this._addAt(scrollContainer, 1, {flex: 1});\n      }\n    },\n\n    // overridden\n    _createChildControlImpl : function(id) {\n      let control;\n\n      switch (id) {\n        case 'toolbar':\n          control = new cv.ui.manager.ToolBar(null, ['new-file', 'new-folder', 'upload', 'reload']);\n          this.bind('file', control, 'folder');\n          control.addListener('reload', function () {\n            this.getFile().reload();\n          }, this);\n          this._addAt(control, 0);\n          break;\n\n        case 'filter':\n          control = new qx.ui.form.TextField();\n          control.set({\n            placeholder: this.tr('Filter by name...'),\n            liveUpdate: true,\n            margin: 8\n          });\n          if (!this.isShowTextFilter()) {\n            control.exclude();\n          }\n          control.addListener('changeValue', this._debouncedOnFilter, this);\n          this._addAt(control, 1);\n          break;\n\n        case 'scroll':\n          control = new qx.ui.container.Scroll();\n          this._addAt(control, 2, {flex: 1});\n          break;\n\n        case 'list':\n          control = new qx.ui.container.Composite(new qx.ui.layout.Flow(8, 8));\n\n          // Used to fire item add/remove events\n          control.addListener('addChildWidget', this._onAddChild, this);\n          control.addListener('removeChildWidget', this._onRemoveChild, this);\n          if (this.isDisableScrolling()) {\n            this._addAt(control, 1, {flex: 1});\n          } else {\n            this.getChildControl('scroll').add(control);\n          }\n          break;\n      }\n\n      return control || this.base(arguments, id);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._disposeObjects('_controller');\n    this._isImageRegex = null;\n    cv.ui.manager.model.Preferences.getInstance().removeRelatedBindings(this);\n  }\n});\n"
  ]
}