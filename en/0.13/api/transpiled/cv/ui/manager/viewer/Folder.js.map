{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "viewer",
    "AbstractViewer",
    "implement",
    "core",
    "ISingleSelection",
    "form",
    "IModelSelection",
    "include",
    "MSingleSelectionHandling",
    "MRemoteChildrenHandling",
    "MModelSelection",
    "control",
    "MFileEventHandler",
    "construct",
    "noToolbar",
    "model",
    "Preferences",
    "getInstance",
    "bind",
    "_isImageRegex",
    "RegExp",
    "Image",
    "SUPPORTED_FILES",
    "join",
    "initModel",
    "data",
    "Array",
    "_setLayout",
    "layout",
    "VBox",
    "_newItem",
    "FileItem",
    "set",
    "fake",
    "type",
    "loaded",
    "icon",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "displayName",
    "tr",
    "special",
    "_debouncedOnFilter",
    "util",
    "Function",
    "debounce",
    "_onFilter",
    "_createChildControl",
    "statics",
    "item",
    "getType",
    "TITLE",
    "locale",
    "Manager",
    "ICON",
    "events",
    "addItem",
    "removeItem",
    "properties",
    "check",
    "deferredInit",
    "permanentFilter",
    "nullable",
    "apply",
    "showTextFilter",
    "init",
    "labelConverter",
    "disableScrolling",
    "viewMode",
    "event",
    "members",
    "_controller",
    "_getItems",
    "getChildControl",
    "getChildren",
    "_isAllowEmptySelection",
    "_defaultLabelConverter",
    "name",
    "getViewMode",
    "parts",
    "split",
    "length",
    "pop",
    "_getDelegate",
    "getLabelConverter",
    "converter",
    "createItem",
    "FileListItem",
    "configureItem",
    "addListener",
    "_onDblTap",
    "_onFsItemRightClick",
    "setShowFileActions",
    "bindItem",
    "controller",
    "index",
    "bindProperty",
    "source",
    "file",
    "test",
    "getName",
    "getServerPath",
    "ev",
    "getCurrentTarget",
    "getModel",
    "getSpecial",
    "preventDefault",
    "getBubbles",
    "stopPropagation",
    "menu",
    "contextmenu",
    "GlobalFileItem",
    "configure",
    "setContextMenu",
    "openAtPointer",
    "stop",
    "message",
    "Bus",
    "dispatchByName",
    "_applyFile",
    "old",
    "removeRelatedBindings",
    "resetModel",
    "container",
    "List",
    "setDelegate",
    "setParent",
    "getValue",
    "getPermanentFilter",
    "setModel",
    "load",
    "resetParent",
    "_handleFileEvent",
    "folder",
    "getFile",
    "getData",
    "action",
    "reload",
    "path",
    "startsWith",
    "getFullPath",
    "children",
    "dispose",
    "some",
    "child",
    "remove",
    "_applyShowTextFilter",
    "value",
    "setVisibility",
    "filterString",
    "filterFunction",
    "filtered",
    "filter",
    "includes",
    "getChildrenContainer",
    "_onAddChild",
    "e",
    "fireDataEvent",
    "_onRemoveChild",
    "_onFileEvent",
    "_applyDisableScrolling",
    "exclude",
    "_addAt",
    "flex",
    "scrollContainer",
    "show",
    "add",
    "_createChildControlImpl",
    "id",
    "ToolBar",
    "TextField",
    "placeholder",
    "liveUpdate",
    "margin",
    "isShowTextFilter",
    "Scroll",
    "Composite",
    "Flow",
    "isDisableScrolling",
    "destruct",
    "_disposeObjects",
    "Folder"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/viewer/Folder.js"
  ],
  "sourcesContent": [
    "/* Folder.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Displays folder content in an explorer like view.\n */\nqx.Class.define('cv.ui.manager.viewer.Folder', {\n  extend: cv.ui.manager.viewer.AbstractViewer,\n  implement: [qx.ui.core.ISingleSelection, qx.ui.form.IModelSelection],\n\n  include: [\n    qx.ui.core.MSingleSelectionHandling,\n    qx.ui.core.MRemoteChildrenHandling,\n    qx.ui.form.MModelSelection,\n    cv.ui.manager.control.MFileEventHandler\n  ],\n\n  /*\n  ***********************************************\n   CONSTRUCTOR\n  ***********************************************\n  */\n  construct(noToolbar) {\n    super();\n    cv.ui.manager.model.Preferences.getInstance().bind('startViewMode', this, 'viewMode');\n\n    this._isImageRegex = new RegExp('\\\\.(' + cv.ui.manager.viewer.Image.SUPPORTED_FILES.join('|') + ')$', 'i');\n\n    this.initModel(new qx.data.Array());\n    this._setLayout(new qx.ui.layout.VBox(8));\n\n    this._newItem = new cv.ui.manager.model.FileItem('new', 'new', null).set({\n      fake: true,\n      type: 'file',\n      loaded: true,\n      icon: cv.theme.dark.Images.getIcon('upload'),\n      displayName: this.tr('Upload file'),\n      special: 'add-file'\n    });\n\n    this._debouncedOnFilter = qx.util.Function.debounce(this._onFilter, 500, false);\n\n    if (!noToolbar) {\n      this._createChildControl('toolbar');\n    }\n    this._createChildControl('filter');\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    SUPPORTED_FILES(item) {\n      // noinspection JSConstructorReturnsPrimitive\n      return item.getType() === 'dir';\n    },\n    TITLE: qx.locale.Manager.tr('Show folder'),\n    ICON: cv.theme.dark.Images.getIcon('folder', 18)\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    /**\n     * This event is fired after a list item was added to the list. The\n     * {@link qx.event.type.Data#getData} method of the event returns the\n     * added item.\n     */\n    addItem: 'qx.event.type.Data',\n\n    /**\n     * This event is fired after a list item has been removed from the list.\n     * The {@link qx.event.type.Data#getData} method of the event returns the\n     * removed item.\n     */\n    removeItem: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: 'qx.data.Array',\n      deferredInit: true\n    },\n\n    permanentFilter: {\n      check: 'Function',\n      nullable: true,\n      apply: '_onFilter'\n    },\n\n    showTextFilter: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowTextFilter'\n    },\n\n    labelConverter: {\n      check: 'Function',\n      nullable: true\n    },\n\n    disableScrolling: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyDisableScrolling'\n    },\n\n    viewMode: {\n      check: ['list', 'preview'],\n      init: 'list',\n      event: 'changeViewMode'\n    }\n  },\n\n  /*\n  ***********************************************\n   MEMBERS\n  ***********************************************\n  */\n  members: {\n    _controller: null,\n    _isImageRegex: null,\n    _newItem: null,\n\n    _getItems() {\n      return this.getChildControl('list').getChildren();\n    },\n\n    _isAllowEmptySelection() {\n      return true;\n    },\n\n    _defaultLabelConverter(name) {\n      if (this.getViewMode() === 'list') {\n        // do not remove file type in list mode\n        return name;\n      }\n      const parts = name.split('.');\n      if (parts.length > 1) {\n        parts.pop();\n      }\n      return parts.join('.');\n    },\n\n    _getDelegate() {\n      const labelConverter = this.getLabelConverter();\n      const converter = {\n        converter: labelConverter ? labelConverter : this._defaultLabelConverter.bind(this)\n      };\n\n      return {\n        createItem() {\n          return new cv.ui.manager.form.FileListItem();\n        },\n\n        configureItem: function (item) {\n          item.addListener('dbltap', this._onDblTap, this);\n          item.addListener('contextmenu', this._onFsItemRightClick, this);\n          item.addListener('action', this._onFsItemRightClick, this);\n          item.setShowFileActions(true);\n          this.bind('viewMode', item, 'viewMode');\n        }.bind(this),\n\n        bindItem: function (controller, item, index) {\n          controller.bindProperty('', 'model', null, item, index);\n          controller.bindProperty('displayName', 'label', converter, item, index);\n\n          controller.bindProperty(\n            'icon',\n            'icon',\n            {\n              converter: function (source, file) {\n                if (file.getType() === 'file' && this._isImageRegex.test(file.getName())) {\n                  // use the image as icon\n                  return file.getServerPath();\n                }\n                if (!source) {\n                  return null;\n                }\n                // remove size from icon source\n                const parts = source.split('/');\n                if (parts.length === 3) {\n                  parts.pop();\n                }\n                return parts.join('/');\n              }.bind(this)\n            },\n\n            item,\n            index\n          );\n        }.bind(this)\n      };\n    },\n\n    _onFsItemRightClick(ev) {\n      const file = ev.getCurrentTarget().getModel();\n      if (file.getSpecial() === 'add-file') {\n        ev.preventDefault();\n        if (ev.getBubbles()) {\n          ev.stopPropagation();\n        }\n        return;\n      }\n      const menu = cv.ui.manager.contextmenu.GlobalFileItem.getInstance();\n      menu.configure(file);\n      ev.getCurrentTarget().setContextMenu(menu);\n      menu.openAtPointer(ev);\n\n      // Do not show native menu\n      // don't open any other contextmenus\n      if (ev.getBubbles()) {\n        ev.stop();\n      }\n    },\n\n    _onDblTap(ev) {\n      const file = ev.getCurrentTarget().getModel();\n      if (file.getSpecial() === 'add-file') {\n        // Select file for upload\n      } else {\n        qx.event.message.Bus.dispatchByName('cv.manager.open', file);\n      }\n    },\n\n    _applyFile(file, old) {\n      if (old) {\n        old.removeRelatedBindings(this);\n        this.resetModel();\n      }\n      if (file) {\n        const container = this.getChildControl('list');\n        if (!this._controller) {\n          this._controller = new qx.data.controller.List(null, container);\n          this._controller.setDelegate(this._getDelegate());\n        }\n        file.bind('children', this, 'model');\n        const model = this.getModel();\n        this._newItem.setParent(file);\n        model.addListener('change', () => {\n          if (this.getChildControl('filter').getValue() || this.getPermanentFilter()) {\n            this._onFilter();\n          } else {\n            this._controller.setModel(model);\n          }\n        });\n        this._controller.setModel(model);\n        file.load();\n      } else {\n        if (this._controller) {\n          this._controller.resetModel();\n        }\n        this._newItem.resetParent();\n      }\n    },\n\n    _handleFileEvent(ev) {\n      const folder = this.getFile();\n      const data = ev.getData();\n      switch (data.action) {\n        case 'moved':\n          folder.reload();\n          break;\n\n        case 'added':\n        case 'uploaded':\n        case 'created':\n          if (data.path.startsWith(folder.getFullPath())) {\n            folder.reload();\n          }\n          break;\n\n        case 'deleted': {\n          let children;\n          if (folder) {\n            if (data.path === folder.getFullPath()) {\n              // this item has been deleted\n              this.dispose();\n            } else if (data.path.startsWith(folder.getFullPath())) {\n              // delete child\n              children = folder.getChildren();\n              children.some(function (child) {\n                if (child.getFullPath() === data.path) {\n                  children.remove(child);\n                  this.removeRelatedBindings(child);\n                  return true;\n                }\n                return false;\n              }, this);\n            }\n          }\n          children = this.getModel();\n          children.some(function (child) {\n            if (child.getFullPath() === data.path) {\n              children.remove(child);\n              this.removeRelatedBindings(child);\n              return true;\n            }\n            return false;\n          }, this);\n          break;\n        }\n      }\n    },\n\n    _applyShowTextFilter(value) {\n      this.getChildControl('filter').setVisibility(value ? 'visible' : 'excluded');\n    },\n\n    _onFilter() {\n      if (this._controller) {\n        const filterString = this.getChildControl('filter').getValue();\n        const filterFunction = this.getPermanentFilter();\n        const filtered = this.getModel().filter(function (file) {\n          return (!filterFunction || filterFunction(file)) && (!filterString || file.getName().includes(filterString));\n        });\n        this._controller.setModel(filtered);\n      }\n    },\n\n    getChildrenContainer() {\n      return this.getChildControl('list');\n    },\n\n    /**\n     * Handle child widget adds on the content pane\n     *\n     * @param e {qx.event.type.Data} the event instance\n     */\n    _onAddChild(e) {\n      this.fireDataEvent('addItem', e.getData());\n    },\n\n    /**\n     * Handle child widget removes on the content pane\n     *\n     * @param e {qx.event.type.Data} the event instance\n     */\n    _onRemoveChild(e) {\n      this.fireDataEvent('removeItem', e.getData());\n    },\n\n    _onFileEvent(ev) {\n      const data = ev.getData();\n      switch (data.action) {\n        case 'deleted':\n          break;\n      }\n    },\n\n    _applyDisableScrolling(value) {\n      if (value) {\n        this.getChildControl('scroll').exclude();\n        this._addAt(this.getChildControl('list'), 1, { flex: 1 });\n      } else {\n        const scrollContainer = this.getChildControl('scroll');\n        scrollContainer.show();\n        scrollContainer.add(this.getChildControl('list'));\n        this._addAt(scrollContainer, 1, { flex: 1 });\n      }\n    },\n\n    // overridden\n    _createChildControlImpl(id) {\n      let control;\n\n      switch (id) {\n        case 'toolbar':\n          control = new cv.ui.manager.ToolBar(null, ['new-file', 'new-folder', 'upload', 'reload']);\n\n          this.bind('file', control, 'folder');\n          control.addListener('reload', () => {\n            this.getFile().reload();\n          });\n          this._addAt(control, 0);\n          break;\n\n        case 'filter':\n          control = new qx.ui.form.TextField();\n          control.set({\n            placeholder: this.tr('Filter by name...'),\n            liveUpdate: true,\n            margin: 8\n          });\n\n          if (!this.isShowTextFilter()) {\n            control.exclude();\n          }\n          control.addListener('changeValue', this._debouncedOnFilter, this);\n          this._addAt(control, 1);\n          break;\n\n        case 'scroll':\n          control = new qx.ui.container.Scroll();\n          this._addAt(control, 2, { flex: 1 });\n          break;\n\n        case 'list':\n          control = new qx.ui.container.Composite(new qx.ui.layout.Flow(8, 8));\n\n          // Used to fire item add/remove events\n          control.addListener('addChildWidget', this._onAddChild, this);\n          control.addListener('removeChildWidget', this._onRemoveChild, this);\n          if (this.isDisableScrolling()) {\n            this._addAt(control, 1, { flex: 1 });\n          } else {\n            this.getChildControl('scroll').add(control);\n          }\n          break;\n      }\n\n      return control || super._createChildControlImpl(id);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_controller');\n    this._isImageRegex = null;\n    cv.ui.manager.model.Preferences.getInstance().removeRelatedBindings(this);\n  }\n});\n"
  ],
  "mappings": "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"
}