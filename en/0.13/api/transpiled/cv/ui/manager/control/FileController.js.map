{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "constructor",
    "call",
    "__fsClient",
    "cv",
    "io",
    "rest",
    "Client",
    "getFsClient",
    "members",
    "rename",
    "file",
    "newName",
    "newPath",
    "getPath",
    "length",
    "endsWith",
    "isTemporary",
    "createSync",
    "path",
    "getType",
    "err",
    "ui",
    "manager",
    "snackbar",
    "Controller",
    "error",
    "info",
    "locale",
    "Manager",
    "tr",
    "getDisplayName",
    "resetTemporary",
    "resetModified",
    "setName",
    "reload",
    "getFullPath",
    "moveSync",
    "src",
    "target",
    "resetEditing",
    "move",
    "event",
    "message",
    "Bus",
    "dispatchByName",
    "action",
    "restore",
    "isInTrash",
    "replace",
    "__moveFile",
    "match",
    "exec",
    "targetFileName",
    "parentFolder",
    "getParent",
    "targetFile",
    "getChildren",
    "some",
    "child",
    "readSync",
    "res",
    "updateSync",
    "hash",
    "getName",
    "getBusTopic",
    "data",
    "source",
    "__P_31_1",
    "_delete",
    "callback",
    "context",
    "apply",
    "isTrash",
    "qxl",
    "dialog",
    "Dialog",
    "confirm",
    "confirmed",
    "__doDelete",
    "__P_31_2",
    "deleteSync",
    "force",
    "download",
    "element",
    "document",
    "createElement",
    "setAttribute",
    "getBaseUrl",
    "style",
    "display",
    "body",
    "appendChild",
    "click",
    "removeChild",
    "validate",
    "isConfigFile",
    "__validateConfig",
    "__P_31_3",
    "d",
    "alert",
    "editor",
    "Worker",
    "getInstance",
    "validateConfig",
    "then",
    "close",
    "setValid",
    "handler",
    "handlerOptions",
    "jumpToError",
    "trn",
    "destruct",
    "control",
    "FileController"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/control/FileController.js"
  ],
  "sourcesContent": [
    "/* FileController.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The FileController is responsible for all file operations, like config check, move, replace, delete etc.\n */\nqx.Class.define('cv.ui.manager.control.FileController', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__fsClient = cv.io.rest.Client.getFsClient();\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __fsClient: null,\n\n    rename(file, newName) {\n      let newPath = file.getPath() || '';\n      if (newPath.length > 0 && !newPath.endsWith('/')) {\n        newPath += '/';\n      }\n      newPath += newName;\n      if (file.isTemporary()) {\n        // create new item\n        this.__fsClient.createSync(\n          { path: newPath, type: file.getType() },\n          function (err) {\n            if (err) {\n              cv.ui.manager.snackbar.Controller.error(err);\n            } else {\n              cv.ui.manager.snackbar.Controller.info(\n                file.getType() === 'file'\n                  ? qx.locale.Manager.tr('File \"%1\" has been created', file.getDisplayName())\n                  : qx.locale.Manager.tr('Folder \"%1\" has been created', file.getDisplayName())\n              );\n\n              file.resetTemporary();\n              file.resetModified();\n              file.setName(newName);\n              file.reload();\n            }\n          },\n          this\n        );\n      } else if (file.getFullPath() !== newPath) {\n        this.__fsClient.moveSync(\n          { src: file.getFullPath(), target: newPath },\n          function (err) {\n            if (err) {\n              cv.ui.manager.snackbar.Controller.error(err);\n            } else {\n              cv.ui.manager.snackbar.Controller.info(\n                file.getType() === 'file'\n                  ? qx.locale.Manager.tr('File \"%1\" has been renamed to \"%2\"', file.getDisplayName(), newName)\n                  : qx.locale.Manager.tr('Folder \"%1\" has been renamed to \"%2\"', file.getDisplayName(), newName)\n              );\n\n              file.setName(newName);\n              file.resetModified();\n              file.reload();\n            }\n            file.resetEditing();\n          },\n          this\n        );\n      }\n    },\n\n    /**\n     * Move file to another path\n     * @param file {cv.ui.manager.model.FileItem} file to move\n     * @param target {String} new path of the file\n     */\n    move(file, target) {\n      this.__fsClient.moveSync(\n        { src: file.getFullPath(), target: target },\n        function (err) {\n          if (err) {\n            cv.ui.manager.snackbar.Controller.error(err);\n          } else {\n            cv.ui.manager.snackbar.Controller.info(\n              file.getType() === 'file'\n                ? qx.locale.Manager.tr('File \"%1\" has been moved', file.getDisplayName())\n                : qx.locale.Manager.tr('Folder \"%1\" has been moved', file.getDisplayName())\n            );\n\n            qx.event.message.Bus.dispatchByName('cv.manager.file', {\n              action: 'moved',\n              path: file.getFullPath()\n            });\n          }\n        },\n        this\n      );\n    },\n\n    /**\n     * Restore file from trash by moving it out of the trash to the old path\n     * @param file {cv.ui.manager.model.FileItem} file to restore\n     */\n    restore(file) {\n      if (file.isInTrash()) {\n        const target = file.getFullPath().replace('.trash/', '');\n        this.__moveFile(file, target);\n      } else if (file.getType() === 'file' && !file.isTemporary()) {\n        const match = /^\\/?backup\\/visu_config(.*)-[0-9]{14}\\.xml$/.exec(file.getFullPath());\n\n        if (match) {\n          // find the existing target config to restore\n          const targetFileName = 'visu_config' + match[1] + '.xml';\n\n          // find the target file\n          const parentFolder = file.getParent().getParent();\n          let targetFile = null;\n          parentFolder.getChildren().some(function (child) {\n            if (child.getFullPath() === targetFileName) {\n              targetFile = child;\n              return true;\n            }\n            return false;\n          });\n\n          // load the backup content\n          this.__fsClient.readSync(\n            { path: file.getFullPath() },\n            function (err, res) {\n              if (err) {\n                cv.ui.manager.snackbar.Controller.error(err);\n              } else if (targetFile) {\n                this.__fsClient.updateSync(\n                  {\n                    path: targetFile.getFullPath(),\n                    hash: 'ignore'\n                  },\n\n                  res,\n                  function (err) {\n                    if (err) {\n                      cv.ui.manager.snackbar.Controller.error(err);\n                    } else {\n                      cv.ui.manager.snackbar.Controller.info(\n                        qx.locale.Manager.tr('%1 has been restored', file.getName())\n                      );\n\n                      targetFile.resetModified();\n                      targetFile.resetTemporary();\n                      qx.event.message.Bus.dispatchByName(targetFile.getBusTopic(), {\n                        type: 'fsContentChanged',\n                        data: res,\n                        source: this\n                      });\n                    }\n                  },\n                  this\n                );\n              } else {\n                // target file does not exist copy to a new file\n                this.__fsClient.createSync(\n                  {\n                    path: targetFileName,\n                    hash: 'ignore'\n                  },\n\n                  res,\n                  function (err) {\n                    if (err) {\n                      cv.ui.manager.snackbar.Controller.error(err);\n                    } else {\n                      cv.ui.manager.snackbar.Controller.info(\n                        qx.locale.Manager.tr('%1 has been restored', file.getName())\n                      );\n                    }\n                  },\n                  this\n                );\n              }\n            },\n            this\n          );\n        }\n      }\n    },\n\n    __moveFile(file, target) {\n      this.__fsClient.moveSync(\n        { src: file.getFullPath(), target: target },\n        function (err) {\n          if (err) {\n            cv.ui.manager.snackbar.Controller.error(err);\n          } else {\n            cv.ui.manager.snackbar.Controller.info(\n              file.getType() === 'file'\n                ? qx.locale.Manager.tr('File \"%1\" has been restored', file.getDisplayName())\n                : qx.locale.Manager.tr('Folder \"%1\" has been restored', file.getDisplayName())\n            );\n\n            qx.event.message.Bus.dispatchByName('cv.manager.file', {\n              action: 'restored',\n              path: file.getFullPath()\n            });\n          }\n        },\n        this\n      );\n    },\n\n    delete(file, callback, context) {\n      if (file.isTemporary()) {\n        // new file, no need to call the backend\n        if (callback) {\n          callback.apply(context, true);\n        }\n      } else if (file) {\n        let message;\n        if (file.isTrash()) {\n          message = qx.locale.Manager.tr('Do you really want to clear the trash?');\n        } else if (file.isInTrash()) {\n          message =\n            file.getType() === 'file'\n              ? qx.locale.Manager.tr('Do you really want to delete file \"%1\" from the trash?', file.getDisplayName())\n              : qx.locale.Manager.tr('Do you really want to delete folder \"%1\" from the trash?', file.getDisplayName());\n        } else {\n          message =\n            file.getType() === 'file'\n              ? qx.locale.Manager.tr('Do you really want to delete file \"%1\"?', file.getDisplayName())\n              : qx.locale.Manager.tr('Do you really want to delete folder \"%1\"?', file.getDisplayName());\n        }\n        qxl.dialog.Dialog.confirm(\n          message,\n          function (confirmed) {\n            if (confirmed) {\n              this.__doDelete(file, callback, context);\n            } else if (callback) {\n              callback.apply(context, false);\n            }\n          },\n          this,\n          qx.locale.Manager.tr('Confirm deletion')\n        );\n      }\n    },\n\n    __doDelete(file, callback, context) {\n      this.__fsClient.deleteSync(\n        { path: file.getFullPath(), force: file.isTrash() },\n        null,\n        function (err) {\n          if (err) {\n            cv.ui.manager.snackbar.Controller.error(err);\n            if (callback) {\n              callback.apply(context, false);\n            }\n          } else {\n            let message;\n            if (file.isTrash()) {\n              message = qx.locale.Manager.tr('Trash has been cleared');\n            } else if (file.isInTrash()) {\n              message =\n                this.getType() === 'file'\n                  ? qx.locale.Manager.tr('File \"%1\" has been removed from trash', file.getDisplayName())\n                  : qx.locale.Manager.tr('Folder \"%1\" has been removed from trash', file.getDisplayName());\n            } else {\n              message =\n                file.getType() === 'file'\n                  ? qx.locale.Manager.tr('File \"%1\" has been deleted', file.getDisplayName())\n                  : qx.locale.Manager.tr('Folder \"%1\" has been deleted', file.getDisplayName());\n            }\n            cv.ui.manager.snackbar.Controller.info(message);\n            if (callback) {\n              callback.apply(context, true);\n            }\n            qx.event.message.Bus.dispatchByName('cv.manager.file', {\n              action: 'deleted',\n              path: file.getFullPath()\n            });\n          }\n        },\n        this\n      );\n    },\n\n    download(file) {\n      if (file.getType() === 'file') {\n        const element = document.createElement('a');\n        element.setAttribute('href', cv.io.rest.Client.getBaseUrl() + '/fs?download=true&path=' + file.getFullPath());\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n      }\n    },\n\n    validate(file) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertInstance(file, cv.ui.manager.model.FileItem);\n      }\n      if (file.isConfigFile()) {\n        this.__validateConfig(file);\n      } else {\n        this.info('no validation available for file: ' + file.getFullPath());\n      }\n    },\n\n    __validateConfig(file) {\n      const d = qxl.dialog.Dialog.alert(qx.locale.Manager.tr('Validating %1', file.getFullPath()));\n\n      cv.ui.manager.editor.Worker.getInstance()\n        .validateConfig(file)\n        .then(function (res) {\n          d.close();\n          if (res === true) {\n            file.setValid(true);\n            cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('%1 has no errors!', file.getFullPath()));\n          } else {\n            file.setValid(false);\n            qx.event.message.Bus.dispatchByName('cv.manager.openWith', {\n              file: file,\n              handler: 'cv.ui.manager.editor.Source',\n              handlerOptions: {\n                jumpToError: true\n              }\n            });\n\n            cv.ui.manager.snackbar.Controller.error(\n              qx.locale.Manager.trn(\n                '%1 error found in %2!',\n                '%1 errors found in %2!',\n                res.length,\n                res.length,\n                file.getFullPath()\n              )\n            );\n          }\n        });\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__fsClient = null;\n  }\n});\n"
  ],
  "mappings": "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"
}