{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "__registry",
    "__defaults",
    "registerFileHandler",
    "RegExp",
    "cv",
    "ui",
    "manager",
    "viewer",
    "Image",
    "SUPPORTED_FILES",
    "join",
    "Config",
    "Icons",
    "Folder",
    "Start",
    "editor",
    "Source",
    "Tree",
    "preview",
    "model",
    "CompareFiles",
    "Diff",
    "Preferences",
    "getInstance",
    "addListener",
    "_onChangesDefaultConfigEditor",
    "members",
    "selector",
    "clazz",
    "options",
    "config",
    "assign",
    "Clazz",
    "instance",
    "isClass",
    "instanceOf",
    "selectorId",
    "classname",
    "priority",
    "lang",
    "Type",
    "isRegExp",
    "regex",
    "toString",
    "isFunction",
    "name",
    "isString",
    "includes",
    "fullPath",
    "fileName",
    "getFileHandler",
    "file",
    "handlers",
    "defaultHandler",
    "keys",
    "some",
    "key",
    "test",
    "getFullPath",
    "isTemporary",
    "noTemporaryFiles",
    "isWriteable",
    "noReadOnlyFiles",
    "getFileHandlerById",
    "forEach",
    "__canHandle",
    "push",
    "length",
    "isFake",
    "getDisplayName",
    "split",
    "sort",
    "a",
    "b",
    "handlerId",
    "hasFileHandler",
    "setDefault",
    "getDefaultConfigEditor",
    "DEFAULT_FOR",
    "getName",
    "toLowerCase",
    "getAllFileHandlers",
    "filter",
    "map",
    "destruct",
    "dispose",
    "removeListener",
    "control",
    "FileHandlerRegistry"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/control/FileHandlerRegistry.js"
  ],
  "sourcesContent": [
    "/* FileHandlerRegistry.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Central registry for all available file editors/viewers.\n */\nqx.Class.define('cv.ui.manager.control.FileHandlerRegistry', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__registry = {};\n    this.__defaults = [];\n\n    // register viewers\n    this.registerFileHandler(\n      new RegExp('\\\\.(' + cv.ui.manager.viewer.Image.SUPPORTED_FILES.join('|') + ')$', 'i'),\n\n      cv.ui.manager.viewer.Image,\n      { type: 'view' }\n    );\n\n    this.registerFileHandler(cv.ui.manager.viewer.Config.SUPPORTED_FILES, cv.ui.manager.viewer.Config, {\n      type: 'view'\n    });\n\n    this.registerFileHandler(cv.ui.manager.viewer.Icons.SUPPORTED_FILES, cv.ui.manager.viewer.Icons, { type: 'view' });\n\n    this.registerFileHandler(cv.ui.manager.viewer.Folder.SUPPORTED_FILES, cv.ui.manager.viewer.Folder, {\n      type: 'view'\n    });\n\n    this.registerFileHandler(null, cv.ui.manager.Start, { type: 'view' });\n\n    // register the basic editors\n    this.registerFileHandler(cv.ui.manager.editor.Source.SUPPORTED_FILES, cv.ui.manager.editor.Source, {\n      type: 'edit'\n    });\n\n    this.registerFileHandler(cv.ui.manager.editor.Tree.SUPPORTED_FILES, cv.ui.manager.editor.Tree, {\n      preview: false,\n      type: 'edit'\n    });\n\n    this.registerFileHandler(cv.ui.manager.model.CompareFiles, cv.ui.manager.editor.Diff, { type: 'view' });\n\n    this.registerFileHandler('hidden.php', cv.ui.manager.editor.Config, {\n      type: 'edit'\n    });\n\n    cv.ui.manager.model.Preferences.getInstance().addListener(\n      'changeDefaultConfigEditor',\n      this._onChangesDefaultConfigEditor,\n      this\n    );\n\n    this._onChangesDefaultConfigEditor();\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __registry: null,\n    __defaults: null,\n\n    /**\n     * Registers an editor for a specific file, that is identified by the given selector.\n     * @param selector {String|RegExp|Class|Function|null} filename-/path or regular expression. If null this is a special handler that must be loaded manually (like cv.ui.manager.Start)\n     * @param clazz {qx.ui.core.Widget} widget class that handles those type of files\n     * @param options {Map?} additional options to store in the registry\n     */\n    registerFileHandler(selector, clazz, options) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertTrue(qx.Interface.classImplements(clazz, cv.ui.manager.editor.IEditor));\n      }\n      const config = Object.assign(\n        {\n          Clazz: clazz,\n          instance: null\n        },\n\n        options || {}\n      );\n\n      if (qx.Class.isClass(selector)) {\n        config.instanceOf = selector;\n        config.selectorId = 'instanceOf:' + selector.classname;\n        // highest priority\n        config.priority = 0;\n      } else if (qx.lang.Type.isRegExp(selector)) {\n        config.regex = selector;\n        config.selectorId = 'regex:' + selector.toString();\n        config.priority = 4;\n      } else if (qx.lang.Type.isFunction(selector)) {\n        config.selectorId = 'function:' + selector.name;\n        config.priority = 3;\n        config.function = selector;\n      } else if (qx.lang.Type.isString(selector)) {\n        // simple file matcher\n        if (selector.includes('/')) {\n          config.fullPath = selector;\n          config.selectorId = 'fullPath:' + selector;\n          config.priority = 1;\n        } else {\n          config.fileName = selector;\n          config.selectorId = 'fileName:' + selector;\n          config.priority = 2;\n        }\n      } else {\n        config.selectorId = 'none';\n        config.priority = 10;\n      }\n      this.__registry[clazz.classname] = config;\n    },\n\n    getFileHandler(file, type) {\n      const handlers = [];\n      if (!(file instanceof cv.ui.manager.model.CompareFiles)) {\n        // check if there is a default first\n        let defaultHandler;\n        Object.keys(this.__defaults).some(function (key) {\n          if (\n            this.__defaults[key].regex.test(file.getFullPath()) &&\n            (!file.isTemporary() || !this.__defaults[key].noTemporaryFiles) &&\n            (file.isWriteable() || !this.__defaults[key].noReadOnlyFiles)\n          ) {\n            if (type) {\n              const config = this.getFileHandlerById(this.__defaults[key].clazz.classname);\n\n              if (config.type === type) {\n                defaultHandler = config;\n              }\n            } else {\n              defaultHandler = this.getFileHandlerById(this.__defaults[key].clazz.classname);\n            }\n          }\n          return !!defaultHandler;\n        }, this);\n        if (defaultHandler) {\n          return defaultHandler;\n        }\n      }\n\n      Object.keys(this.__registry).forEach(function (classname) {\n        const config = this.__registry[classname];\n        if (this.__canHandle(config, file) && (!type || config.type === type)) {\n          handlers.push(config);\n        }\n      }, this);\n      if (handlers.length === 0) {\n        if (!file.isFake() && file.getDisplayName().split('.').length === 1) {\n          // file without file ending => use the source code editor\n          return this.getFileHandlerById('cv.ui.manager.editor.Source');\n        }\n        // no editors found\n        return null;\n      } else if (handlers.length === 1) {\n        return handlers[0];\n      }\n      // sort by selector priority (instance, fullpath, filename, regex)\n      handlers.sort(function (a, b) {\n        return a.priority - b.priority;\n      });\n      // no default handler, just take the first one\n      return handlers[0];\n    },\n\n    getFileHandlerById(handlerId) {\n      return this.__registry[handlerId];\n    },\n\n    hasFileHandler(file, type) {\n      return Object.keys(this.__registry).some(function (classname) {\n        const config = this.__registry[classname];\n        return this.__canHandle(config, file) && (!type || config.type === type);\n      }, this);\n    },\n\n    /**\n     * Mark the handler with the given classname as default for the selector-id and all others with the same selector id not,\n     * @param selector {RegExp}\n     * @param clazz {qx.Class}\n     * @param noTemporaryFiles {Boolean} flag to prevent this default editor from being used to open temporary files.\n     * @param noReadOnlyFiles {Boolean} fleag to prevent this default editor from being used to open file that are not writeable\n     */\n    setDefault(selector, clazz, noTemporaryFiles, noReadOnlyFiles) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertRegExp(selector);\n        qx.core.Assert.assertTrue(qx.Class.isClass(clazz));\n      }\n      this.__defaults[selector.toString()] = {\n        regex: selector,\n        clazz: clazz,\n        noTemporaryFiles: noTemporaryFiles,\n        noReadOnlyFiles: noReadOnlyFiles\n      };\n    },\n\n    _onChangesDefaultConfigEditor() {\n      switch (cv.ui.manager.model.Preferences.getInstance().getDefaultConfigEditor()) {\n        case 'source':\n          this.setDefault(cv.ui.manager.editor.Source.DEFAULT_FOR, cv.ui.manager.editor.Source);\n\n          break;\n\n        case 'xml':\n          this.setDefault(cv.ui.manager.editor.Tree.SUPPORTED_FILES, cv.ui.manager.editor.Tree);\n\n          break;\n      }\n    },\n\n    __canHandle(config, file) {\n      if (config.noTemporaryFiles === true && file.isTemporary()) {\n        return false;\n      } else if (config.noReadOnlyFiles === true && !file.isWriteable()) {\n        return false;\n      } else if (config.fileName && file.getName() === config.fileName) {\n        return true;\n      } else if (config.fullPath && file.getFullPath() === config.fullPath) {\n        return true;\n      } else if (config.regex && config.regex.test(file.getFullPath().toLowerCase())) {\n        return true;\n      } else if (config.instanceOf && file instanceof config.instanceOf) {\n        return true;\n      } else if (config.function && config.function(file)) {\n        return true;\n      }\n      return false;\n    },\n\n    getAllFileHandlers(file, type) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertTrue(\n          file instanceof cv.ui.manager.model.FileItem || file instanceof cv.ui.manager.model.CompareFiles\n        );\n      }\n      return Object.keys(this.__registry)\n        .filter(function (key) {\n          return this.__canHandle(this.__registry[key], file) && (!type || this.__registry[key].type === type);\n        }, this)\n        .map(function (key) {\n          return this.__registry[key];\n        }, this);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    // cleanup handler instances\n    Object.keys(this.__registry).forEach(function (regex) {\n      if (this.__registry[regex].instance) {\n        this.__registry[regex].instance.dispose();\n        this.__registry[regex].instance = null;\n      }\n    }, this);\n\n    cv.ui.manager.model.Preferences.getInstance().removeListener(\n      'changeDefaultConfigEditor',\n      this._onChangesDefaultConfigEditor,\n      this\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}