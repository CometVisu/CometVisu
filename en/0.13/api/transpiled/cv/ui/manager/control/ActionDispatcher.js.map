{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "constructor",
    "call",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_onAction",
    "properties",
    "focusedWidget",
    "check",
    "nullable",
    "apply",
    "main",
    "members",
    "updateBarButtons",
    "actionHandler",
    "getFocusedWidget",
    "menuBar",
    "cv",
    "ui",
    "manager",
    "MenuBar",
    "getInstance",
    "config",
    "getButtonConfiguration",
    "button",
    "keys",
    "forEach",
    "actionId",
    "getButton",
    "setEnabled",
    "general",
    "hasHandler",
    "configureButton",
    "_applyFocusedWidget",
    "value",
    "old",
    "unConfigureButton",
    "actionName",
    "_getHandler",
    "handler",
    "getMain",
    "canHandleAction",
    "ev",
    "topic",
    "getName",
    "split",
    "pop",
    "handleAction",
    "getData",
    "warn",
    "destruct",
    "control",
    "ActionDispatcher"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/control/ActionDispatcher.js"
  ],
  "sourcesContent": [
    "/* ActionDispatcher.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The ActionDispatcher listens to the events in the 'cv.manager.action' topic and\n * dispatched those events to the currently relevant handler (e.g. the save event to the opened editor).\n */\nqx.Class.define('cv.ui.manager.control.ActionDispatcher', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    qx.event.message.Bus.subscribe('cv.manager.action.*', this._onAction, this);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    focusedWidget: {\n      check: 'cv.ui.manager.IActionHandler',\n      nullable: true,\n      apply: '_applyFocusedWidget'\n    },\n\n    main: {\n      check: 'cv.ui.manager.Main',\n      nullable: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    updateBarButtons() {\n      const actionHandler = this.getFocusedWidget();\n      const menuBar = cv.ui.manager.MenuBar.getInstance();\n      const config = menuBar.getButtonConfiguration();\n      let button;\n      Object.keys(config).forEach(function (actionId) {\n        button = menuBar.getButton(actionId);\n        if (button) {\n          button.setEnabled(config[actionId].general || this.hasHandler(actionId));\n\n          if (actionHandler) {\n            actionHandler.configureButton(actionId, button);\n          }\n        }\n      }, this);\n    },\n\n    _applyFocusedWidget(value, old) {\n      if (old) {\n        const menuBar = cv.ui.manager.MenuBar.getInstance();\n        const config = menuBar.getButtonConfiguration();\n        let button;\n        Object.keys(config).forEach(function (actionId) {\n          button = menuBar.getButton(actionId);\n          if (button) {\n            old.unConfigureButton(actionId, button);\n          }\n        }, this);\n      }\n      this.updateBarButtons();\n    },\n\n    /**\n     * Check if there is an existing handler for the given actionName.\n     * @param actionName\n     * @return {Boolean}\n     */\n    hasHandler(actionName) {\n      return !!this._getHandler(actionName);\n    },\n\n    _getHandler(actionName) {\n      const handler = this.getFocusedWidget();\n      const main = this.getMain();\n      if (handler && handler.canHandleAction(actionName)) {\n        return handler;\n      } else if (main && main.canHandleAction(actionName)) {\n        return main;\n      }\n      return null;\n    },\n\n    _onAction(ev) {\n      const topic = ev.getName();\n      const actionName = topic.split('.').pop();\n      const handler = this._getHandler(actionName);\n      if (handler) {\n        handler.handleAction(actionName, ev.getData());\n      } else {\n        this.warn('no action handler found for action: ' + actionName);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.subscribe('cv.manager.action.*', this._onAction, this);\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}