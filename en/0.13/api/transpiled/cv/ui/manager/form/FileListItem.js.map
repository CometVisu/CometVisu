{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/form/FileListItem.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "implement",
    "form",
    "IModel",
    "include",
    "cv",
    "manager",
    "upload",
    "MDragUpload",
    "construct",
    "label",
    "icon",
    "model",
    "layout",
    "Canvas",
    "setDesktop",
    "_setLayout",
    "setModel",
    "addListener",
    "_onPointerOver",
    "_onPointerOut",
    "Preferences",
    "getInstance",
    "_maintainFileActions",
    "setUploadHint",
    "tr",
    "events",
    "properties",
    "appearance",
    "refine",
    "init",
    "nullable",
    "event",
    "apply",
    "dereference",
    "check",
    "showFileActions",
    "themeable",
    "gap",
    "show",
    "inheritable",
    "iconPosition",
    "center",
    "acceptUpload",
    "viewMode",
    "members",
    "_uploadManager",
    "_forwardStates",
    "focused",
    "selected",
    "dragover",
    "hovered",
    "_applyViewMode",
    "getViewMode",
    "addState",
    "getChildControl",
    "setLayoutProperties",
    "left",
    "top",
    "bottom",
    "right",
    "removeState",
    "_isDroppable",
    "files",
    "length",
    "getModel",
    "getSpecial",
    "myMime",
    "tree",
    "FileSystem",
    "getMimetypeFromSuffix",
    "getName",
    "split",
    "pop",
    "type",
    "_onDrop",
    "ev",
    "preventDefault",
    "uploadFile",
    "getFiles",
    "qxl",
    "dialog",
    "Dialog",
    "confirm",
    "confirmed",
    "newFile",
    "_onStopDragging",
    "_applyModel",
    "value",
    "getType",
    "control",
    "isFake",
    "name",
    "setToolTipText",
    "handled",
    "setValue",
    "lang",
    "String",
    "firstUp",
    "exclude",
    "resetToolTipText",
    "_onOpenWith",
    "handlerId",
    "getTarget",
    "getUserData",
    "message",
    "Bus",
    "dispatchByName",
    "file",
    "handler",
    "_applyIcon",
    "old",
    "startsWith",
    "viewer",
    "Image",
    "getImageData",
    "addListenerOnce",
    "__scaleWithAspect",
    "isShowFileActions",
    "setVisibility",
    "editorConf",
    "FileHandlerRegistry",
    "getFileHandler",
    "viewerConf",
    "openButton",
    "editButton",
    "isWriteable",
    "setUserData",
    "Clazz",
    "classname",
    "set",
    "ICON",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "enabled",
    "toolTipText",
    "TITLE",
    "translate",
    "toString",
    "data",
    "sizeHint",
    "getSizeHint",
    "width",
    "height",
    "Math",
    "round",
    "aspectRatio",
    "padding",
    "setPadding",
    "_maintainFileTypePosition",
    "iconBounds",
    "getBounds",
    "_createChildControlImpl",
    "id",
    "basic",
    "Atom",
    "forEach",
    "prop",
    "bind",
    "setAnonymous",
    "_add",
    "Label",
    "zIndex",
    "anonymous",
    "font",
    "textAlign",
    "textColor",
    "minWidth",
    "container",
    "Composite",
    "HBox",
    "Button",
    "FileController",
    "download",
    "add",
    "fireEvent",
    "Tap",
    "getNativeEvent",
    "_createMDragUploadChildControlImpl",
    "capture",
    "getFile",
    "releaseCapture",
    "destruct",
    "removeListener",
    "_disposeObjects",
    "FileListItem"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* FileListItem.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A qx.ui.form.ListItem with an additional label overlay over the icon to show the file type\n */\nqx.Class.define('cv.ui.manager.form.FileListItem', {\n  extend: qx.ui.core.Widget,\n  implement : [qx.ui.form.IModel],\n  include: [cv.ui.manager.upload.MDragUpload],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (label, icon, model) {\n    this.base(arguments, label, icon);\n    const layout = new qx.ui.layout.Canvas();\n    layout.setDesktop(true);\n    this._setLayout(layout);\n\n    if (model) {\n      this.setModel(model);\n    }\n    this.addListener('pointerover', this._onPointerOver, this);\n    this.addListener('pointerout', this._onPointerOut, this);\n\n    cv.ui.manager.model.Preferences.getInstance().addListener('changeDefaultConfigEditor', this._maintainFileActions, this);\n\n    this.setUploadHint(this.tr('Drop the file here to replace the content.'));\n  },\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n  events: {\n    /** (Fired by {@link qx.ui.form.List}) */\n    'action' : 'qx.event.type.Event'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      refine: true,\n      init: 'cv-file-item'\n    },\n\n    model: {\n      nullable: true,\n      event: 'changeModel',\n      apply: '_applyModel',\n      dereference: true,\n      check: 'cv.ui.manager.model.FileItem'\n    },\n\n    /**\n     * Show the action buttons.\n     */\n    showFileActions: {\n      check: 'Boolean',\n      init: false,\n      apply: '_maintainFileActions'\n    },\n\n    /** The label/caption/text of the qx.ui.basic.Atom instance */\n    label: {\n      nullable: true,\n      check: 'String',\n      event: 'changeLabel'\n    },\n\n    /** Any URI String supported by qx.ui.basic.Image to display an icon */\n    icon: {\n      check: 'String',\n      nullable: true,\n      themeable: true,\n      event: 'changeIcon'\n    },\n\n    /**\n     * The space between the icon and the label\n     */\n    gap: {\n      check : 'Integer',\n      nullable : false,\n      event : 'changeGap',\n      themeable : true,\n      init : 4\n    },\n\n\n    /**\n     * Configure the visibility of the sub elements/widgets.\n     * Possible values: both, label, icon\n     */\n    show: {\n      init : 'both',\n      check : [ 'both', 'label', 'icon' ],\n      themeable : true,\n      inheritable : true,\n      event : 'changeShow'\n    },\n\n\n    /**\n     * The position of the icon in relation to the text.\n     * Only useful/needed if text and icon is configured and 'show' is configured as 'both' (default)\n     */\n    iconPosition: {\n      init   : 'left',\n      check : ['top', 'right', 'bottom', 'left', 'top-left', 'bottom-left', 'top-right', 'bottom-right'],\n      themeable : true,\n      event: 'changeIconPosition'\n    },\n\n\n    /**\n     * Whether the content should be rendered centrally when to much space\n     * is available. Enabling this property centers in both axis. The behavior\n     * when disabled of the centering depends on the {@link #iconPosition} property.\n     * If the icon position is <code>left</code> or <code>right</code>, the X axis\n     * is not centered, only the Y axis. If the icon position is <code>top</code>\n     * or <code>bottom</code>, the Y axis is not centered. In case of e.g. an\n     * icon position of <code>top-left</code> no axis is centered.\n     */\n    center : {\n      init : false,\n      check : 'Boolean',\n      themeable : true,\n      event: 'changeCenter'\n    },\n\n    /**\n     * Restrict possible file uploads (not supported by every browxer)\n     */\n    acceptUpload: {\n      init: null,\n      nullable: true,\n      check: 'String'\n    },\n\n    viewMode: {\n      check: ['list', 'preview'],\n      init: 'preview',\n      apply: '_applyViewMode'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: { // eslint-disable-line @qooxdoo/qx/no-refs-in-members\n    _uploadManager: null,\n\n    // overridden\n    /**\n     * @lint ignoreReferenceField(_forwardStates)\n     */\n    _forwardStates: {\n      focused : true,\n      selected : true,\n      dragover : true,\n      hovered: true\n    },\n\n    _applyViewMode: function () {\n      switch (this.getViewMode()) {\n        case 'list':\n          this.addState('list');\n          this.getChildControl('atom').setLayoutProperties({left: 10, top: 0, bottom: 0, right: null});\n          this.getChildControl('bottom-bar').setLayoutProperties({top: 0, bottom: 0, right: 0, left: null});\n          break;\n\n        case 'preview':\n          this.removeState('list');\n          this.getChildControl('atom').setLayoutProperties({left: 0, top: 0, bottom: 34, right: 0});\n          this.getChildControl('bottom-bar').setLayoutProperties({left: 0, bottom: 0, right: 0, top: null});\n          break;\n      }\n    },\n\n    /**\n     * Event handler for the pointer over event.\n     */\n    _onPointerOver : function() {\n      this.addState('hovered');\n    },\n\n\n    /**\n     * Event handler for the pointer out event.\n     */\n    _onPointerOut : function() {\n      this.removeState('hovered');\n    },\n\n    _isDroppable: function (files) {\n      if (files.length === 1) {\n        if (this.getModel().getSpecial() === 'add-file') {\n          return true;\n        }\n        const myMime = cv.ui.manager.tree.FileSystem.getMimetypeFromSuffix(this.getModel().getName().split('.').pop());\n        return myMime === files[0].type;\n      }\n      return false;\n    },\n\n    _onDrop: function (ev) {\n      ev.preventDefault();\n      if (this.getModel().getSpecial() === 'add-file') {\n        cv.ui.manager.upload.MDragUpload.uploadFile(cv.ui.manager.upload.MDragUpload.getFiles(ev)[0]);\n      } else {\n        qxl.dialog.Dialog.confirm(this.tr('Do you really want to replace the \\'%1\\' with the uploaded files content?', this.getModel().getName()), function (confirmed) {\n          if (confirmed) {\n            const newFile = cv.ui.manager.upload.MDragUpload.getFiles(ev)[0];\n            cv.ui.manager.upload.MDragUpload.uploadFile(newFile, this.getModel());\n          }\n        }, this);\n      }\n      this._onStopDragging(ev);\n    },\n\n    _applyModel: function (value) {\n      if (value && value.getType() === 'file') {\n        const control = this.getChildControl('file-type');\n        if (!value.isFake()) {\n          const name = value.getName();\n          this.getChildControl('atom').setToolTipText(this.tr('Double click to open \"%1\"', name));\n          let type = name.split('.').pop();\n\n          // do not use file types that are longer than 4 chars (not enough space)\n          if (type.length <= 4) {\n            let handled = false;\n            switch (type) {\n              case 'xml':\n                control.setValue('</>');\n                handled = true;\n                break;\n\n              case 'js':\n                type = qx.lang.String.firstUp(type); // jshint ignore:line\n              // eslint-disable-next-line no-fallthrough\n              case 'css':\n              case 'conf':\n                control.setValue(type);\n                handled = true;\n                break;\n            }\n            if (handled && this.getViewMode() === 'preview') {\n              control.show();\n            } else {\n              control.exclude();\n            }\n          } else {\n            control.exclude();\n          }\n        }\n      } else {\n        this.getChildControl('file-type').exclude();\n        this.getChildControl('atom').resetToolTipText();\n      }\n      // this.getChildControl('bottom-bar').show();\n      // this.setUploadHint(this.tr('Drop the file here to replace the content.'));\n      // this.getChildControl('atom').setToolTipText(this.tr('Double click to open'));\n      this._maintainFileActions();\n      // if (this._uploadManager) {\n      //   try {\n      //     this._uploadManager.removeWidget(this);\n      //   } catch (e) {}\n      // }\n    },\n\n    _onOpenWith: function (ev) {\n      const handlerId = ev.getTarget().getUserData('handlerId');\n      qx.event.message.Bus.dispatchByName('cv.manager.openWith', {\n        file: this.getModel(),\n        handler: handlerId\n      });\n    },\n\n    _applyIcon: function (value, old) {\n      this.base(arguments, value, old);\n      if (value && !value.startsWith('@')) {\n        const control = this.getChildControl('atom').getChildControl('icon');\n        if (!cv.ui.manager.viewer.Image.getImageData(value)) {\n          // wait for image to be loaded\n          control.addListenerOnce('loaded', this.__scaleWithAspect, this);\n        } else {\n          this.__scaleWithAspect();\n        }\n      }\n    },\n\n    _maintainFileActions: function () {\n      const file = this.getModel();\n      if (this.isShowFileActions() && file) {\n        this.getChildControl('download-button').setVisibility(file.getType() === 'dir' || file.isFake() ? 'excluded' : 'visible');\n        this.getChildControl('action-button').setVisibility(file.isFake() ? 'excluded' : 'visible');\n        const editorConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file, 'edit');\n        const viewerConf = cv.ui.manager.control.FileHandlerRegistry.getInstance().getFileHandler(file, 'view');\n        const openButton = this.getChildControl('open-button');\n        const editButton = this.getChildControl('edit-button');\n        if (file.isWriteable() && editorConf) {\n          editButton.setUserData('handlerId', editorConf.Clazz.classname);\n          editButton.set({\n            icon: editorConf.Clazz.ICON || cv.theme.dark.Images.getIcon('edit', 18),\n            enabled: true,\n            toolTipText: editorConf.Clazz.TITLE ? editorConf.Clazz.TITLE.translate().toString() : ''\n          });\n          editButton.show();\n        } else {\n          editButton.exclude();\n        }\n        if (viewerConf) {\n          openButton.setUserData('handlerId', viewerConf.Clazz.classname);\n          openButton.set({\n            icon: viewerConf.Clazz.ICON || cv.theme.dark.Images.getIcon('preview', 18),\n            enabled: true,\n            toolTipText: viewerConf.Clazz.TITLE ? viewerConf.Clazz.TITLE.translate().toString() : ''\n          });\n          openButton.show();\n        } else {\n          openButton.exclude();\n        }\n        this.getChildControl('action-button');\n        this.getChildControl('bottom-bar').show();\n      } else {\n        this.getChildControl('bottom-bar').exclude();\n      }\n    },\n\n    __scaleWithAspect: function () {\n      const data = cv.ui.manager.viewer.Image.getImageData(this.getIcon());\n      const control = this.getChildControl('atom').getChildControl('icon');\n      const sizeHint = control.getSizeHint();\n      let width = sizeHint.width;\n      let height = Math.round(1 / data.aspectRatio * width);\n      const padding = [0, 0, 0, 0];\n      if (height > sizeHint.height) {\n        height = sizeHint.height;\n        width = Math.round(data.aspectRatio * height);\n        padding[1] = Math.round((sizeHint.width - width) / 2);\n        padding[3] = padding[1];\n      } else {\n        padding[0] = Math.round((sizeHint.height - height) / 2);\n        padding[2] = padding[0];\n      }\n      control.setPadding(padding);\n    },\n\n    _maintainFileTypePosition: function () {\n      const iconBounds = this.getChildControl('atom').getChildControl('icon').getBounds();\n      const top = Math.round(iconBounds.top + iconBounds.height / 2);\n      this.getChildControl('file-type').setLayoutProperties({\n        left: iconBounds.left,\n        top: top,\n        right: iconBounds.left + iconBounds.width,\n        bottom: top + 18\n      });\n    },\n\n    // overridden\n    _createChildControlImpl : function(id) {\n      let control;\n\n      switch (id) {\n        case 'atom':\n          control = new qx.ui.basic.Atom();\n          ['label', 'icon', 'gap', 'iconPosition', 'show', 'center'].forEach(function (prop) {\n            this.bind(prop, control, prop);\n          }, this);\n          control.setAnonymous(true);\n          this._add(control, {top: 0, left: 0, right: 0, bottom: 34});\n          break;\n\n        case 'file-type': {\n          control = new qx.ui.basic.Label();\n          control.set({\n            zIndex: 100,\n            anonymous: true,\n            font: 'title',\n            textAlign: 'center',\n            textColor: 'background-main',\n            minWidth: 70\n          });\n          const icon = this.getChildControl('atom').getChildControl('icon');\n          icon.bind('visibility', control, 'visibility');\n          icon.addListener('resize', this._maintainFileTypePosition, this);\n          this._add(control, {width: '100%'});\n          break;\n        }\n\n        case 'bottom-bar':\n          control = new qx.ui.container.Composite(new qx.ui.layout.HBox(4, 'center'));\n          control.setAnonymous(true);\n          this._add(control, {left: 0, bottom: 0, right: 0});\n          break;\n\n        case 'download-button':\n          control = new qx.ui.form.Button(null, cv.theme.dark.Images.getIcon('download', 18));\n          control.setToolTipText(this.tr('Download file'));\n          control.addListener('execute', function () {\n            cv.ui.manager.control.FileController.getInstance().download(this.getModel());\n          }, this);\n          this.getChildControl('bottom-bar').add(control);\n          break;\n\n        case 'action-button':\n          control = new qx.ui.form.Button(null, cv.theme.dark.Images.getIcon('menu', 18));\n          control.setToolTipText(this.tr('Other file actions'));\n          this.getChildControl('bottom-bar').add(control);\n          control.addListener('tap', function (ev) {\n            this.fireEvent('action', qx.event.type.Tap, [ev.getNativeEvent(), this, ev.getTarget(), false, true]);\n          }, this);\n          break;\n\n        case 'open-button':\n          control = new qx.ui.form.Button(null, cv.theme.dark.Images.getIcon('preview', 18));\n          control.addListener('execute', function () {\n            qx.event.message.Bus.dispatchByName('cv.manager.openWith', {\n              file: this.getModel(),\n              handler: control.getUserData('handlerId')\n            });\n          }, this);\n          this.getChildControl('bottom-bar').add(control);\n          break;\n\n        case 'edit-button':\n          control = new qx.ui.form.Button(null, cv.theme.dark.Images.getIcon('preview', 18));\n          control.addListener('execute', function () {\n            qx.event.message.Bus.dispatchByName('cv.manager.openWith', {\n              file: this.getModel(),\n              handler: control.getUserData('handlerId')\n            });\n          }, this);\n          this.getChildControl('bottom-bar').add(control);\n          break;\n      }\n      if (!control) {\n        control = this._createMDragUploadChildControlImpl(id);\n      }\n\n      return control || this.base(arguments, id);\n    },\n\n    // overridden\n    capture: function () {\n      // do not fire capture method for upload-items (see: com.zenesis.qx.upload.MUploadButton)\n      if (!this.getFile() || this.getFile().getSpecial() !== 'add-file') {\n        this.base(arguments);\n      }\n    },\n\n    // overridden\n    releaseCapture: function() {\n      // do not fire capture method for upload-items (see: com.zenesis.qx.upload.MUploadButton)\n      if (!this.getFile() || this.getFile().getSpecial() !== 'add-file') {\n        this.base(arguments);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this.removeListener('pointerover', this._onPointerOver, this);\n    this.removeListener('pointerout', this._onPointerOut, this);\n\n    this._disposeObjects('_uploadManager');\n    cv.ui.manager.model.Preferences.getInstance().removeListener('changeDefaultConfigEditor', this._maintainFileActions, this);\n  }\n});\n"
  ]
}