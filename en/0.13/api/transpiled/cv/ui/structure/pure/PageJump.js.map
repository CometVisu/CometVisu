{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "HasChildren",
    "HasAnimatedButton",
    "construct",
    "props",
    "name",
    "bindClickToWidget",
    "constructor",
    "call",
    "properties",
    "target",
    "check",
    "init",
    "activeScope",
    "nullable",
    "targetPath",
    "statics",
    "_onScrollToPage",
    "ev",
    "page_id",
    "getData",
    "page",
    "WidgetFactory",
    "getInstanceById",
    "model",
    "data",
    "Model",
    "getInstance",
    "getName",
    "document",
    "querySelectorAll",
    "forEach",
    "elem",
    "classList",
    "remove",
    "getWidgetDataByElement",
    "add",
    "parentPage",
    "util",
    "Tree",
    "getParentWidget",
    "pageJumps",
    "markPageJumps",
    "parentName",
    "path",
    "match",
    "members",
    "_getInnerDomString",
    "actor",
    "getAlign",
    "getChildrenDomString",
    "action",
    "getTarget",
    "getTargetPath",
    "Application",
    "structureController",
    "getPageIdByPath",
    "scrollToPage",
    "defer",
    "registerClass",
    "event",
    "message",
    "Bus",
    "subscribe",
    "PageJump"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageJump.js"
  ],
  "sourcesContent": [
    "/* PageJump.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The pagejump widget can be used to link the visu pages.\n * The function is similar to hyperlinks.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.PageJump', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.HasChildren, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    if (!props.name) {\n      // when there is no name the widget has no actor as clickable subelement, so we need\n      // to bind the click events to the whole widget\n      props.bindClickToWidget = true;\n    }\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    target: {\n      check: 'String',\n      init: '0'\n    },\n\n    activeScope: {\n      check: ['target', 'path'],\n      init: 'target'\n    },\n\n    name: {\n      check: 'String',\n      nullable: true\n    },\n\n    targetPath: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Handle page change events and update the active state of this PageJump\n     *\n     * @param ev {Event}\n     * @protected\n     */\n    _onScrollToPage(ev) {\n      const page_id = ev.getData();\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(page_id);\n      const model = cv.data.Model.getInstance();\n      const name = page.getName();\n\n      // remove old active classes\n      document.querySelectorAll('.pagejump.active').forEach(function (elem) {\n        elem.classList.remove('active');\n      }, this);\n      document.querySelectorAll('.pagejump.active_ancestor').forEach(function (elem) {\n        elem.classList.remove('active_ancestor');\n      }, this);\n\n      // and set the new active ones\n      document.querySelectorAll('.pagejump').forEach(function (elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (name === data.target) {\n          elem.classList.add('active');\n        }\n      }, this);\n\n      // now set the active ancestors\n      let parentPage = cv.util.Tree.getParentWidget(page, 'page');\n      // set for all parent pages apart from the root page\n\n      const pageJumps = document.querySelectorAll('.pagejump');\n      const markPageJumps = function (parentName, elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (\n          parentName === data.target ||\n          (data.activeScope === 'path' &&\n            ((typeof data.path === 'string' && data.path.match(parentName + '$')) ||\n              (typeof data.targetPath === 'string' && data.targetPath.match(parentName + '$'))))\n        ) {\n          elem.classList.add('active_ancestor');\n        }\n      };\n\n      while (parentPage && cv.util.Tree.getParentWidget(parentPage, 'page')) {\n        pageJumps.forEach(function (elem) {\n          markPageJumps(parentPage.getName(), elem);\n        });\n        // recursively find pagejumps for parent pages\n        parentPage = cv.util.Tree.getParentWidget(parentPage, 'page');\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      let actor = '<div class=\"actor switchUnpressed';\n      if (this.getAlign()) {\n        actor += ' ' + this.getAlign();\n      }\n      actor += '\">';\n      if (this.getName()) {\n        actor += '<div class=\"value\">' + this.getName() + '</div>';\n      }\n      actor += '</div>';\n      return actor + this.getChildrenDomString();\n    },\n\n    // overridden\n    action() {\n      let target = this.getTarget();\n      if (this.getTargetPath() !== null) {\n        target = cv.Application.structureController.getPageIdByPath(target, this.getTargetPath());\n      }\n      cv.Application.structureController.scrollToPage(target);\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagejump', statics);\n    qx.event.message.Bus.subscribe('path.pageChanged', statics._onScrollToPage, statics);\n  }\n});\n"
  ],
  "mappings": "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"
}