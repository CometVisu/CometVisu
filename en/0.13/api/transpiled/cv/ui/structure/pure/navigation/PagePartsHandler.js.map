{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "navbars",
    "top",
    "dynamic",
    "fadeVisible",
    "left",
    "right",
    "bottom",
    "members",
    "updateTopNavigation",
    "path",
    "split",
    "pop",
    "id",
    "pathNode",
    "document",
    "querySelector",
    "innerHTML",
    "pageTitle",
    "getPageTitle",
    "nav",
    "createElement",
    "setAttribute",
    "appendChild",
    "createTextNode",
    "i",
    "length",
    "pageElem",
    "classList",
    "contains",
    "span",
    "pageId",
    "pageData",
    "cv",
    "data",
    "Model",
    "getInstance",
    "getWidgetData",
    "name",
    "pageHeadline",
    "textContent",
    "navbarSetSize",
    "position",
    "size",
    "cssSize",
    "isFinite",
    "navbar",
    "style",
    "width",
    "getBoundingClientRect",
    "ui",
    "structure",
    "pure",
    "layout",
    "ResizeHandler",
    "invalidateNavbar",
    "getNavbarsVisibility",
    "page",
    "Application",
    "structureController",
    "getCurrentPage",
    "WidgetFactory",
    "getInstanceById",
    "attributes",
    "getAttribute",
    "getShowNavbarTop",
    "getShowNavbarBottom",
    "getShowNavbarLeft",
    "getShowNavbarRight",
    "updatePageParts",
    "speed",
    "showtopnavigation",
    "showfooter",
    "isInitialized",
    "self",
    "addListenerOnce",
    "getShowTopNavigation",
    "getShowFooter",
    "topDisplay",
    "window",
    "getComputedStyle",
    "bottomDisplay",
    "querySelectorAll",
    "forEach",
    "elem",
    "display",
    "removeInactiveNavbars",
    "getPath",
    "fadeNavbar",
    "direction",
    "undefined",
    "main_scroll",
    "getSpeed",
    "initCss",
    "targetCss",
    "key",
    "toLowerCase",
    "onAnimationEnd",
    "height",
    "entries",
    "key_value",
    "spec",
    "duration",
    "timing",
    "getEasing",
    "keep",
    "keyFrames",
    "anim",
    "bom",
    "element",
    "Animation",
    "animate",
    "initializeNavbars",
    "page_id",
    "tree",
    "Array",
    "from",
    "parts",
    "subPath",
    "slice",
    "join",
    "item",
    "push",
    "level",
    "positions",
    "pos",
    "scope",
    "remove",
    "add",
    "navBarPath",
    "expr",
    "RegExp",
    "test",
    "navigation",
    "PagePartsHandler"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/navigation/PagePartsHandler.js"
  ],
  "sourcesContent": [
    "/* PagePartsHandler.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * @author Christian Mayer\n * @since 2010\n */\nqx.Class.define('cv.ui.structure.pure.navigation.PagePartsHandler', {\n  extend: qx.core.Object,\n\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct() {\n    this.navbars = {\n      top: {\n        dynamic: null,\n        fadeVisible: true\n      },\n\n      left: {\n        dynamic: null,\n        fadeVisible: true\n      },\n\n      right: {\n        dynamic: null,\n        fadeVisible: true\n      },\n\n      bottom: {\n        dynamic: null,\n        fadeVisible: true\n      }\n    };\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    navbars: null,\n\n    updateTopNavigation(path) {\n      path = path.split('_');\n      path.pop();\n      let id = 'id_'; //path[0];\n      const pathNode = document.querySelector('.nav_path');\n      pathNode.innerHTML = '';\n      let pageTitle = this.getPageTitle(id);\n      let nav = document.createElement('a');\n      // eslint-disable-next-line no-script-url\n      nav.setAttribute('href', 'javascript:cv.Application.structureController.scrollToPage(\\'' + id + '\\')');\n\n      nav.setAttribute('id', 'breadcrump_pagejump_' + id);\n      nav.appendChild(document.createTextNode(pageTitle));\n      pathNode.appendChild(nav);\n      for (let i = 1; i < path.length; i++) {\n        // element 0 is id_ (JNK)\n        id += path[i] + '_';\n        let pageElem = document.querySelector('#' + id);\n        if (pageElem && pageElem.classList.contains('page')) {\n          // FIXME is this still needed?!?\n          pageTitle = this.getPageTitle(id);\n          let span = document.createElement('span');\n          span.innerHTML = ' &#x25ba; ';\n          pathNode.appendChild(span);\n          nav = document.createElement('a');\n          // eslint-disable-next-line no-script-url\n          nav.setAttribute('href', 'javascript:cv.Application.structureController.scrollToPage(\\'' + id + '\\')');\n\n          nav.setAttribute('id', 'breadcrump_pagejump_' + id);\n          nav.appendChild(document.createTextNode(pageTitle));\n          pathNode.appendChild(nav);\n        }\n      }\n      // cv.TemplateEngine.getInstance().handleResize(); - TODO CM160528: why? This shouldn't have\n      //                             any effect on the page size => commented out\n    },\n\n    getPageTitle(pageId) {\n      let pageTitle = '';\n      const pageData = cv.data.Model.getInstance().getWidgetData(pageId);\n      if (pageData) {\n        pageTitle = pageData.name;\n      } else {\n        const pageHeadline = document.querySelector('#' + pageId + ' h1');\n        if (pageHeadline) {\n          pageTitle = pageHeadline.textContent;\n        }\n      }\n      return pageTitle;\n    },\n\n    /**\n     * Change the size of the selected navbar\n     *\n     * currently only \"left\" and \"right\" are implemented\n     * @param position\n     * @param size\n     */\n    navbarSetSize(position, size) {\n      const cssSize = size + (isFinite(size) ? 'px' : '');\n      let navbar;\n      switch (position) {\n        case 'left':\n          navbar = document.querySelector('#navbarLeft');\n          navbar.style.width = cssSize;\n          if (!this.navbars.left.fadeVisible) {\n            navbar.style.left = -navbar.getBoundingClientRect().width + 'px';\n          }\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n          break;\n\n        case 'right':\n          document.querySelector('#centerContainer').style['padding-right'] = cssSize;\n          navbar = document.querySelector('#navbarRight');\n          navbar.style.width = cssSize;\n          navbar.style['margin-right'] = '-' + cssSize;\n          if (!this.navbars.right.fadeVisible) {\n            navbar.style.right = -navbar.getBoundingClientRect().width + 'px';\n          }\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n          break;\n      }\n    },\n\n    getNavbarsVisibility(page) {\n      if (!page) {\n        page = cv.Application.structureController.getCurrentPage();\n      }\n      if (!page) {\n        return { top: true, bottom: true, left: true, right: true };\n      }\n      if (typeof page === 'string') {\n        page = cv.ui.structure.WidgetFactory.getInstanceById(page);\n      } else if (page.attributes) {\n        page = cv.ui.structure.WidgetFactory.getInstanceById(page.getAttribute('id'));\n      }\n\n      if (!page) {\n        return { top: true, bottom: true, left: true, right: true };\n      }\n\n      return {\n        top: page.getShowNavbarTop(),\n        bottom: page.getShowNavbarBottom(),\n        left: page.getShowNavbarLeft(),\n        right: page.getShowNavbarRight()\n      };\n    },\n\n    /**\n     * update the visibility of top-navigation, footer and navbar for this page\n     *\n     * @param page {cv.ui.structure.pure.Page} page to update the parts for\n     * @param speed {Number} animation duration for changes\n     */\n    updatePageParts(page, speed) {\n      // default values\n      let showtopnavigation = true;\n      let showfooter = true;\n\n      if (page) {\n        if (!page.isInitialized()) {\n          // page is not ready, defer this update\n          const self = this;\n          page.addListenerOnce('changeInitialized', () => {\n            self.updatePageParts(page, speed);\n          });\n          return;\n        }\n        showtopnavigation = page.getShowTopNavigation();\n        showfooter = page.getShowFooter();\n      }\n      const topDisplay = window.getComputedStyle(document.querySelector('#top'))['display'];\n      const bottomDisplay = window.getComputedStyle(document.querySelector('#bottom'))['display'];\n      if (showtopnavigation) {\n        if (topDisplay === 'none') {\n          document.querySelectorAll('#top, #top > *').forEach(function (elem) {\n            elem.style.display = 'block';\n          }, this);\n          this.removeInactiveNavbars(page.getPath());\n        }\n      } else if (topDisplay !== 'none') {\n        document.querySelector('#top').style.display = 'none';\n        this.removeInactiveNavbars(page.getPath());\n      }\n      if (showfooter) {\n        if (bottomDisplay === 'none') {\n          document.querySelector('#bottom').style.display = 'block';\n          this.removeInactiveNavbars(page.getPath());\n        }\n      } else if (bottomDisplay !== 'none') {\n        document.querySelector('#bottom').style.display = 'none';\n        this.removeInactiveNavbars(page.getPath());\n      }\n      cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n    },\n\n    /**\n     * fades in/out a navbar\n     *\n     * @param position {String}  [Top|Left|Right|Bottom]\n     * @param direction {String} [in|out]\n     * @param speed {Number} time in milliseconds\n     */\n    fadeNavbar(position, direction, speed) {\n      speed = speed !== undefined ? speed : cv.Application.structureController.main_scroll.getSpeed();\n      const initCss = {};\n      const targetCss = {};\n      const navbar = document.querySelector('#navbar' + position);\n      if (navbar) {\n        const key = position.toLowerCase();\n        const self = this;\n        const onAnimationEnd = function () {\n          self.navbars[key].fadeVisible = direction === 'in';\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n        };\n        switch (direction) {\n          case 'in':\n            if (window.getComputedStyle(navbar).display === 'none') {\n              initCss.display = 'block';\n            }\n            targetCss[key] = 0;\n            switch (position) {\n              case 'Top':\n              case 'Bottom':\n                initCss[key] = -navbar.getBoundingClientRect().height + 'px';\n                break;\n              case 'Left':\n              case 'Right':\n                initCss[key] = -navbar.getBoundingClientRect().width + 'px';\n                break;\n            }\n\n            break;\n          case 'out':\n            initCss[key] = 0;\n            switch (position) {\n              case 'Top':\n              case 'Bottom':\n                targetCss[key] = -navbar.getBoundingClientRect().height + 'px';\n                break;\n              case 'Left':\n              case 'Right':\n                targetCss[key] = -navbar.getBoundingClientRect().width + 'px';\n                break;\n            }\n\n            break;\n        }\n\n        Object.entries(initCss).forEach(function (key_value) {\n          navbar.style[key_value[0]] = key_value[1];\n        });\n        if (speed === 0) {\n          Object.entries(targetCss).forEach(function (key_value) {\n            navbar.style[key_value[0]] = key_value[1];\n          });\n          onAnimationEnd();\n        } else {\n          const spec = {\n            duration: speed,\n            timing: cv.Application.structureController.main_scroll.getEasing(),\n            keep: 100,\n            keyFrames: {\n              0: initCss,\n              100: targetCss\n            }\n          };\n\n          const anim = qx.bom.element.Animation.animate(navbar, spec);\n          anim.addListenerOnce('end', onAnimationEnd, this);\n        }\n      }\n    },\n\n    /**\n     * traverse down the page tree from root page id_ -> .. -> page_id activate\n     * all navbars in that path deactivate all others\n     *\n     * @param page_id {String}\n     */\n    initializeNavbars(page_id) {\n      const self = this;\n      this.removeInactiveNavbars(page_id);\n      const tree = Array.from(document.querySelectorAll('#id_'));\n      if (page_id !== 'id_') {\n        const parts = page_id.split('_');\n        parts.pop();\n        parts[0] = '';\n        for (let i = 0; i < parts.length; i++) {\n          const subPath = parts.slice(0, i + 1).join('_');\n          if (subPath) {\n            const item = document.querySelectorAll('#id' + subPath + '_.page');\n            if (item.length === 1) {\n              tree.push(item[0]);\n            }\n          }\n        }\n      }\n      let level = 1;\n      const size = { top: 0, right: 0, bottom: 0, left: 0 };\n      const dynamic = { top: null, right: null, bottom: null, left: null };\n      const positions = ['top', 'right', 'bottom', 'left'];\n      tree.forEach(function (elem) {\n        const id = elem.getAttribute('id');\n        positions.forEach(function (pos) {\n          const nav = document.querySelector('#' + id + pos + '_navbar');\n          if (nav) {\n            const data = cv.data.Model.getInstance().getWidgetData(id + pos + '_navbar');\n\n            if (data.scope >= 0 && tree.length - level > data.scope) {\n              // navbar that is not visible at the moment -> ignore it\n              nav.classList.remove('navbarActive');\n              return;\n            }\n            if (data.dynamic !== null) {\n              dynamic[pos] = data.dynamic;\n            }\n            self.navbars[pos].dynamic = dynamic[pos];\n            if (data.scope === undefined || data.scope < 0 || tree.length - level <= data.scope) {\n              nav.classList.add('navbarActive');\n            } else {\n              nav.classList.remove('navbarActive');\n            }\n            if (data.width !== null) {\n              size[pos] = data.width;\n            } else if (size[pos] === 0) {\n              // navbar with content but no size given so far => use default\n              size[pos] = 300;\n            }\n          }\n        });\n        level++;\n      });\n      positions.forEach(function (pos) {\n        self.navbarSetSize(pos, size[pos]);\n      });\n      cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n    },\n\n    removeInactiveNavbars(page_id) {\n      // remove all navbars that do not belong to this page\n      document.querySelectorAll('.navbar.navbarActive').forEach(function (elem) {\n        let navBarPath = elem.getAttribute('id').split('_');\n        // skip last 2 elements e.g. '_top_navbar'\n        navBarPath = navBarPath.slice(0, navBarPath.length - 2).join('_');\n        const expr = new RegExp('^' + navBarPath + '.*', 'i');\n        if (navBarPath !== page_id && !expr.test(page_id)) {\n          elem.classList.remove('navbarActive');\n        }\n      });\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}