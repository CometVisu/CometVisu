{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "states",
    "cv",
    "ui",
    "structure",
    "pure",
    "layout",
    "States",
    "$pageSize",
    "$navbarTop",
    "$navbarBottom",
    "width",
    "height",
    "__initial",
    "__backdropRetries",
    "validationQueue",
    "reset",
    "resetAll",
    "__request",
    "getPageSize",
    "noCache",
    "document",
    "querySelector",
    "getNavbarTop",
    "getNavbarBottom",
    "queueJob",
    "callback",
    "indexOf",
    "push",
    "bom",
    "AnimationFrame",
    "request",
    "flush",
    "length",
    "job",
    "shift",
    "apply",
    "makeAllSizesValid",
    "isPageSizeInvalid",
    "makePagesizeValid",
    "isNavbarInvalid",
    "makeNavbarValid",
    "isRowspanInvalid",
    "makeRowspanValid",
    "isBackdropInvalid",
    "makeBackdropValid",
    "__makeBackdropValid",
    "log",
    "Logger",
    "debug",
    "page",
    "Application",
    "structureController",
    "getCurrentPage",
    "getPageType",
    "cssPosRegEx",
    "backdrop",
    "getDomElement",
    "getBackdropType",
    "backdropSVG",
    "getSVGDocument",
    "backdropBBox",
    "children",
    "getBBox",
    "backdropNWidth",
    "naturalWidth",
    "backdropNHeight",
    "naturalHeight",
    "backdropFixed",
    "getSize",
    "backdropScale",
    "Math",
    "min",
    "backdropWidth",
    "backdropHeight",
    "backdropPos",
    "getBackdropAlign",
    "split",
    "backdropLeftRaw",
    "match",
    "backdropTopRaw",
    "backdropLeft",
    "backdropTop",
    "uagent",
    "navigator",
    "userAgent",
    "toLowerCase",
    "complete",
    "event",
    "Timer",
    "once",
    "invalidateBackdrop",
    "getAttribute",
    "setAttribute",
    "style",
    "left",
    "top",
    "querySelectorAll",
    "forEach",
    "widgetContainer",
    "widget",
    "WidgetFactory",
    "getInstanceById",
    "id",
    "value",
    "getResponsiveLayout",
    "scale",
    "x",
    "y",
    "e",
    "name",
    "error",
    "setBackdropInvalid",
    "__makeNavbarValid",
    "Manager",
    "adjustColumns",
    "applyColumnWidths",
    "setNavbarInvalid",
    "__makePagesizeValid",
    "Config",
    "currentPageId",
    "isInitialized",
    "addListenerOnce",
    "getAvailableWidth",
    "getAvailableHeight",
    "pageSizeElement",
    "innerHTML",
    "setPageSizeInvalid",
    "__makeRowspanValid",
    "elem",
    "dom",
    "Element",
    "create",
    "html",
    "body",
    "appendChild",
    "__updateRowHeight",
    "rect",
    "getBoundingClientRect",
    "round",
    "bottom",
    "self",
    "window",
    "requestAnimationFrame",
    "styles",
    "rowspan",
    "configSettings",
    "usedRowspans",
    "calcrowspan",
    "parentNode",
    "removeChild",
    "rowSpanStyle",
    "setRowspanInvalid",
    "invalidateNavbar",
    "invalidateRowspan",
    "invalidateScreensize",
    "set",
    "pageSizeInvalid",
    "rowspanInvalid",
    "navbarInvalid",
    "backdropInvalid",
    "defer",
    "Registration",
    "addListener",
    "ResizeHandler"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/ResizeHandler.js"
  ],
  "sourcesContent": [
    "/* ResizeHandler.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/*\n * Make sure everything looks right when the window gets resized. This is\n * necessary as the scroll effect requires a fixed element size\n */\n/**\n * Manager for all resizing issues. It ensures that the real resizing\n * calculations are only done as often as really necessary.\n *\n */\nqx.Class.define('cv.ui.structure.pure.layout.ResizeHandler', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    states: new cv.ui.structure.pure.layout.States(),\n\n    $pageSize: null,\n    $navbarTop: null,\n    $navbarBottom: null,\n    width: 0,\n    height: 0,\n    __initial: true,\n\n    __backdropRetries: 0,\n\n    validationQueue: [],\n\n    reset() {\n      this.states.resetAll();\n      this.$pageSize = null;\n      this.$navbarTop = null;\n      this.$navbarBottom = null;\n      this.width = 0;\n      this.height = 0;\n    },\n\n    __request: null,\n\n    getPageSize(noCache) {\n      if (!this.$pageSize || noCache === true) {\n        this.$pageSize = document.querySelector('#pageSize');\n      }\n      return this.$pageSize;\n    },\n\n    getNavbarTop(noCache) {\n      if (!this.$navbarTop || noCache === true) {\n        this.$navbarTop = document.querySelector('#navbarTop');\n      }\n      return this.$navbarTop;\n    },\n\n    getNavbarBottom(noCache) {\n      if (!this.$navbarBottom || noCache === true) {\n        this.$navbarBottom = document.querySelector('#navbarBottom');\n      }\n      return this.$navbarBottom;\n    },\n\n    queueJob(callback) {\n      if (this.validationQueue.indexOf(callback) === -1) {\n        this.validationQueue.push(callback);\n      }\n      if (!this.__request) {\n        this.__request = qx.bom.AnimationFrame.request(this.flush, this);\n      }\n    },\n\n    flush() {\n      while (this.validationQueue.length) {\n        const job = this.validationQueue.shift();\n        job.apply(this);\n      }\n      this.__request = null;\n    },\n\n    makeAllSizesValid() {\n      if (this.states.isPageSizeInvalid()) {\n        this.makePagesizeValid();\n      } // must be first due to dependencies\n      if (this.states.isNavbarInvalid()) {\n        this.makeNavbarValid();\n      }\n      if (this.states.isRowspanInvalid()) {\n        this.makeRowspanValid();\n      }\n      if (this.states.isBackdropInvalid()) {\n        this.makeBackdropValid();\n      }\n    },\n\n    makeBackdropValid() {\n      this.queueJob(this.__makeBackdropValid);\n    },\n\n    __makeBackdropValid() {\n      qx.log.Logger.debug(this, 'makeBackdropValid');\n      const page = cv.Application.structureController.getCurrentPage();\n      if (!page) {\n        return;\n      }\n      // TODO use page object\n\n      if (page.getPageType() === '2d') {\n        const cssPosRegEx = /(\\d*)(.*)/;\n        const backdrop = page.getDomElement().querySelector('div > ' + page.getBackdropType());\n        try {\n          const backdropSVG = page.getBackdropType() === 'embed' ? backdrop.getSVGDocument() : null;\n          const backdropBBox = backdropSVG ? backdropSVG.children[0].getBBox() : {};\n          const backdropNWidth = backdrop.naturalWidth || backdropBBox.width || this.width;\n          const backdropNHeight = backdrop.naturalHeight || backdropBBox.height || this.height;\n          const backdropFixed = page.getSize() === 'fixed';\n          const backdropScale = backdropFixed\n            ? 1\n            : Math.min(this.width / backdropNWidth, this.height / backdropNHeight);\n\n          const backdropWidth = backdropNWidth * backdropScale;\n          const backdropHeight = backdropNHeight * backdropScale;\n          const backdropPos = page.getBackdropAlign().split(' ');\n          const backdropLeftRaw = backdropPos[0].match(cssPosRegEx);\n          const backdropTopRaw = backdropPos[1].match(cssPosRegEx);\n          const backdropLeft =\n            backdropLeftRaw[2] === '%'\n              ? ((this.width - backdropWidth) * +backdropLeftRaw[1]) / 100\n              : +backdropLeftRaw[1];\n          const backdropTop =\n            backdropTopRaw[2] === '%'\n              ? this.height > backdropHeight\n                ? ((this.height - backdropHeight) * +backdropTopRaw[1]) / 100\n                : 0\n              : +backdropTopRaw[1];\n          const uagent = navigator.userAgent.toLowerCase();\n\n          if (\n            backdrop.complete === false ||\n            (page.getBackdropType() === 'embed' && backdropSVG === null) ||\n            (backdropBBox.width === 0 && backdropBBox.height === 0) ||\n            (this.width === 0 && this.height === 0)\n          ) {\n            // backdrop not available yet - reload\n            qx.event.Timer.once(this.invalidateBackdrop, this, 100);\n            return;\n          }\n\n          // backdrop available\n          if (\n            page.getSize() === 'scaled' &&\n            page.getBackdropType() === 'embed' &&\n            backdropSVG &&\n            backdropSVG.children[0].getAttribute('preserveAspectRatio') !== 'none'\n          ) {\n            backdropSVG.children[0].setAttribute('preserveAspectRatio', 'none');\n          }\n\n          // Note 1: this here is a work around for older browsers that can't use\n          // the object-fit property yet.\n          // Currently (26.05.16) only Safari is known to not support\n          // object-position although object-fit itself does work\n          // Note 2: The embed element always needs it\n          if (\n            (page.getBackdropType() === 'embed' ||\n              (uagent.indexOf('safari') !== -1 && uagent.indexOf('chrome') === -1)) &&\n            page.getSize() !== 'scaled'\n          ) {\n            backdrop.style.width = backdropWidth + 'px';\n            backdrop.style.height = backdropHeight + 'px';\n            backdrop.style.left = backdropLeft + 'px';\n            backdrop.style.top = backdropTop + 'px';\n          }\n\n          if (backdropFixed && !backdropSVG) {\n            if (this.height < backdropHeight) {\n              backdrop.style.height = backdropHeight + 'px';\n            } else {\n              backdrop.style.height = '100%';\n            }\n          }\n\n          page\n            .getDomElement()\n            .querySelectorAll('.widget_container')\n            .forEach(function (widgetContainer) {\n              const widget = cv.ui.structure.WidgetFactory.getInstanceById(widgetContainer.id);\n\n              let value;\n              const layout = widget.getResponsiveLayout();\n              let scale = backdropScale;\n              if (layout) {\n                // this assumes that a .widget_container has only one child and this\n                // is the .widget itself\n                const style = widgetContainer.children[0].style;\n                if (layout.scale === 'false') {\n                  scale = 1.0;\n                }\n\n                if ('x' in layout) {\n                  value = layout.x.match(cssPosRegEx);\n                  if (value[2] === 'px') {\n                    style.left = backdropLeft + value[1] * scale + 'px';\n                  } else {\n                    style.left = layout.x;\n                  }\n                }\n\n                if ('y' in layout) {\n                  value = layout.y.match(cssPosRegEx);\n                  if (value[2] === 'px') {\n                    style.top = backdropTop + value[1] * scale + 'px';\n                  } else {\n                    style.top = layout.y;\n                  }\n                }\n\n                if ('width' in layout) {\n                  style.width = layout.width;\n                }\n\n                if ('height' in layout) {\n                  style.height = layout.height;\n                }\n              }\n            }, this);\n          this.__backdropRetries = 0;\n        } catch (e) {\n          if (e.name === 'NotSupportedError') {\n            if (this.__backdropRetries <= 5) {\n              qx.bom.AnimationFrame.request(this.__makeBackdropValid, this);\n              this.__backdropRetries++;\n            } else {\n              qx.log.Logger.error(this, e);\n            }\n          } else {\n            qx.log.Logger.error(this, e);\n          }\n        }\n      }\n\n      this.states.setBackdropInvalid(false);\n    },\n\n    makeNavbarValid() {\n      this.queueJob(this.__makeNavbarValid);\n    },\n\n    __makeNavbarValid() {\n      qx.log.Logger.debug(this, 'makeNavbarValid');\n      if (cv.ui.structure.pure.layout.Manager.adjustColumns()) {\n        // the amount of columns has changed -> recalculate the widgets widths\n        cv.ui.structure.pure.layout.Manager.applyColumnWidths();\n      }\n      this.states.setNavbarInvalid(false);\n    },\n\n    makePagesizeValid() {\n      if (this.__initial === true) {\n        // do not queue -> call now\n        this.__initial = false;\n        this.__makePagesizeValid();\n      } else {\n        this.queueJob(this.__makePagesizeValid);\n      }\n    },\n\n    __makePagesizeValid() {\n      if (!cv.Config.currentPageId) {\n        return;\n      }\n      qx.log.Logger.debug(this, 'makePagesizeValid');\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.currentPageId);\n\n      if (page && !page.isInitialized()) {\n        page.addListenerOnce('changeInitialized', this.__makePagesizeValid, this);\n\n        return;\n      }\n      this.width = cv.ui.structure.pure.layout.Manager.getAvailableWidth();\n      this.height = cv.ui.structure.pure.layout.Manager.getAvailableHeight();\n      const pageSizeElement = this.getPageSize();\n\n      if (pageSizeElement) {\n        pageSizeElement.innerHTML = '#main,.page{width:' + this.width + 'px;height:' + this.height + 'px;}';\n      }\n\n      this.states.setPageSizeInvalid(false);\n    },\n\n    makeRowspanValid() {\n      this.queueJob(this.__makeRowspanValid);\n    },\n\n    __makeRowspanValid() {\n      qx.log.Logger.debug(this, 'makeRowspanValid');\n      let elem = document.querySelector('#calcrowspan');\n      if (!elem) {\n        elem = qx.dom.Element.create('div', {\n          class: 'clearfix',\n          id: 'calcrowspan',\n          html: '<div id=\"containerDiv\" class=\"widget_container\"><div class=\"widget clearfix text\" id=\"innerDiv\"></div>'\n        });\n\n        document.body.appendChild(elem);\n      }\n      // use the internal div for height as in mobile view the elem uses the full screen height\n      this.__updateRowHeight(elem.querySelector('#containerDiv'));\n    },\n\n    __updateRowHeight(elem) {\n      const rect = elem.getBoundingClientRect();\n      const height = Math.round(rect.bottom - rect.top);\n      if (height === 0) {\n        // not ready try again\n        const self = this;\n        window.requestAnimationFrame(() => {\n          self.__updateRowHeight(elem);\n        });\n        return;\n      }\n      let styles = '';\n\n      for (let rowspan in cv.Config.configSettings.usedRowspans) {\n        styles += '.rowspan.rowspan' + rowspan + ' { height: ' + Math.round(rowspan * height) + 'px;}\\n';\n      }\n      const calcrowspan = document.querySelector('#calcrowspan');\n      if (calcrowspan) {\n        calcrowspan.parentNode.removeChild(calcrowspan);\n      }\n\n      // set css style\n      const rowSpanStyle = document.querySelector('#rowspanStyle');\n      if (rowSpanStyle) {\n        rowSpanStyle.innerHTML = styles;\n      }\n      this.states.setRowspanInvalid(false);\n    },\n\n    invalidateBackdrop() {\n      qx.log.Logger.debug(this, 'backdrop');\n      this.states.setBackdropInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateNavbar() {\n      qx.log.Logger.debug(this, 'invalidateNavbar');\n      this.states.setNavbarInvalid(true);\n      this.states.setPageSizeInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateRowspan() {\n      this.states.setRowspanInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateScreensize() {\n      qx.log.Logger.debug(this, 'invalidateScreensize');\n      this.states.set({\n        pageSizeInvalid: true,\n        rowspanInvalid: true,\n        navbarInvalid: true,\n        backdropInvalid: true\n      });\n\n      this.makeAllSizesValid();\n    }\n  },\n\n  defer(statics) {\n    qx.event.Registration.addListener(window, 'resize', statics.invalidateScreensize, statics);\n  }\n});\n"
  ],
  "mappings": "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"
}