{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "states",
    "cv",
    "ui",
    "structure",
    "pure",
    "layout",
    "States",
    "$pageSize",
    "$navbarTop",
    "$navbarBottom",
    "width",
    "height",
    "__initial",
    "__backdropRetries",
    "validationQueue",
    "reset",
    "resetAll",
    "__request",
    "getPageSize",
    "noCache",
    "document",
    "querySelector",
    "getNavbarTop",
    "getNavbarBottom",
    "queueJob",
    "callback",
    "indexOf",
    "push",
    "bom",
    "AnimationFrame",
    "request",
    "flush",
    "length",
    "job",
    "shift",
    "apply",
    "makeAllSizesValid",
    "isPageSizeInvalid",
    "makePagesizeValid",
    "isNavbarInvalid",
    "makeNavbarValid",
    "isRowspanInvalid",
    "makeRowspanValid",
    "isBackdropInvalid",
    "makeBackdropValid",
    "__makeBackdropValid",
    "log",
    "Logger",
    "debug",
    "page",
    "Application",
    "structureController",
    "getCurrentPage",
    "getPageType",
    "cssPosRegEx",
    "backdrop",
    "getDomElement",
    "getBackdropType",
    "backdropSVG",
    "getSVGDocument",
    "backdropBBox",
    "children",
    "getBBox",
    "backdropNWidth",
    "naturalWidth",
    "backdropNHeight",
    "naturalHeight",
    "backdropFixed",
    "getSize",
    "backdropScale",
    "Math",
    "min",
    "backdropWidth",
    "backdropHeight",
    "backdropPos",
    "getBackdropAlign",
    "split",
    "backdropLeftRaw",
    "match",
    "backdropTopRaw",
    "backdropLeft",
    "backdropTop",
    "uagent",
    "navigator",
    "userAgent",
    "toLowerCase",
    "complete",
    "event",
    "Timer",
    "once",
    "invalidateBackdrop",
    "getAttribute",
    "setAttribute",
    "style",
    "left",
    "top",
    "querySelectorAll",
    "forEach",
    "widgetContainer",
    "widget",
    "WidgetFactory",
    "getInstanceById",
    "id",
    "value",
    "getResponsiveLayout",
    "scale",
    "x",
    "y",
    "e",
    "name",
    "error",
    "setBackdropInvalid",
    "__makeNavbarValid",
    "Manager",
    "adjustColumns",
    "applyColumnWidths",
    "setNavbarInvalid",
    "__makePagesizeValid",
    "Config",
    "currentPageId",
    "isInitialized",
    "addListenerOnce",
    "getAvailableWidth",
    "getAvailableHeight",
    "pageSizeElement",
    "innerHTML",
    "setPageSizeInvalid",
    "__makeRowspanValid",
    "elem",
    "dom",
    "Element",
    "create",
    "html",
    "body",
    "appendChild",
    "__updateRowHeight",
    "rect",
    "getBoundingClientRect",
    "round",
    "bottom",
    "self",
    "window",
    "requestAnimationFrame",
    "styles",
    "rowspan",
    "configSettings",
    "usedRowspans",
    "calcrowspan",
    "parentNode",
    "removeChild",
    "rowSpanStyle",
    "setRowspanInvalid",
    "invalidateNavbar",
    "invalidateRowspan",
    "invalidateScreensize",
    "set",
    "pageSizeInvalid",
    "rowspanInvalid",
    "navbarInvalid",
    "backdropInvalid",
    "defer",
    "Registration",
    "addListener",
    "ResizeHandler"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/ResizeHandler.js"
  ],
  "sourcesContent": [
    "/* ResizeHandler.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/*\n * Make sure everything looks right when the window gets resized. This is\n * necessary as the scroll effect requires a fixed element size\n */\n/**\n * Manager for all resizing issues. It ensures that the real resizing\n * calculations are only done as often as really necessary.\n *\n */\nqx.Class.define('cv.ui.structure.pure.layout.ResizeHandler', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    states: new cv.ui.structure.pure.layout.States(),\n\n    $pageSize: null,\n    $navbarTop: null,\n    $navbarBottom: null,\n    width: 0,\n    height: 0,\n    __initial: true,\n\n    __backdropRetries: 0,\n\n    validationQueue: [],\n\n    reset() {\n      this.states.resetAll();\n      this.$pageSize = null;\n      this.$navbarTop = null;\n      this.$navbarBottom = null;\n      this.width = 0;\n      this.height = 0;\n    },\n\n    __request: null,\n\n    getPageSize(noCache) {\n      if (!this.$pageSize || noCache === true) {\n        this.$pageSize = document.querySelector('#pageSize');\n      }\n      return this.$pageSize;\n    },\n\n    getNavbarTop(noCache) {\n      if (!this.$navbarTop || noCache === true) {\n        this.$navbarTop = document.querySelector('#navbarTop');\n      }\n      return this.$navbarTop;\n    },\n\n    getNavbarBottom(noCache) {\n      if (!this.$navbarBottom || noCache === true) {\n        this.$navbarBottom = document.querySelector('#navbarBottom');\n      }\n      return this.$navbarBottom;\n    },\n\n    queueJob(callback) {\n      if (this.validationQueue.indexOf(callback) === -1) {\n        this.validationQueue.push(callback);\n      }\n      if (!this.__request) {\n        this.__request = qx.bom.AnimationFrame.request(this.flush, this);\n      }\n    },\n\n    flush() {\n      while (this.validationQueue.length) {\n        const job = this.validationQueue.shift();\n        job.apply(this);\n      }\n      this.__request = null;\n    },\n\n    makeAllSizesValid() {\n      if (this.states.isPageSizeInvalid()) {\n        this.makePagesizeValid();\n      } // must be first due to dependencies\n      if (this.states.isNavbarInvalid()) {\n        this.makeNavbarValid();\n      }\n      if (this.states.isRowspanInvalid()) {\n        this.makeRowspanValid();\n      }\n      if (this.states.isBackdropInvalid()) {\n        this.makeBackdropValid();\n      }\n    },\n\n    makeBackdropValid() {\n      this.queueJob(this.__makeBackdropValid);\n    },\n\n    __makeBackdropValid() {\n      qx.log.Logger.debug(this, 'makeBackdropValid');\n      const page = cv.Application.structureController.getCurrentPage();\n      if (!page) {\n        return;\n      }\n      // TODO use page object\n\n      if (page.getPageType() === '2d') {\n        const cssPosRegEx = /(\\d*)(.*)/;\n        const backdrop = page.getDomElement().querySelector('div > ' + page.getBackdropType());\n        try {\n          const backdropSVG = page.getBackdropType() === 'embed' ? backdrop.getSVGDocument() : null;\n          const backdropBBox = backdropSVG ? backdropSVG.children[0].getBBox() : {};\n          const backdropNWidth = backdrop.naturalWidth || backdropBBox.width || this.width;\n          const backdropNHeight = backdrop.naturalHeight || backdropBBox.height || this.height;\n          const backdropFixed = page.getSize() === 'fixed';\n          const backdropScale = backdropFixed\n            ? 1\n            : Math.min(this.width / backdropNWidth, this.height / backdropNHeight);\n\n          const backdropWidth = backdropNWidth * backdropScale;\n          const backdropHeight = backdropNHeight * backdropScale;\n          const backdropPos = page.getBackdropAlign().split(' ');\n          const backdropLeftRaw = backdropPos[0].match(cssPosRegEx);\n          const backdropTopRaw = backdropPos[1].match(cssPosRegEx);\n          const backdropLeft =\n            backdropLeftRaw[2] === '%'\n              ? ((this.width - backdropWidth) * +backdropLeftRaw[1]) / 100\n              : +backdropLeftRaw[1];\n          const backdropTop =\n            backdropTopRaw[2] === '%'\n              ? this.height > backdropHeight\n                ? ((this.height - backdropHeight) * +backdropTopRaw[1]) / 100\n                : 0\n              : +backdropTopRaw[1];\n          const uagent = navigator.userAgent.toLowerCase();\n\n          if (\n            backdrop.complete === false ||\n            (page.getBackdropType() === 'embed' && backdropSVG === null) ||\n            (backdropBBox.width === 0 && backdropBBox.height === 0) ||\n            (this.width === 0 && this.height === 0)\n          ) {\n            // backdrop not available yet - reload\n            qx.event.Timer.once(this.invalidateBackdrop, this, 100);\n            return;\n          }\n\n          // backdrop available\n          if (\n            page.getSize() === 'scaled' &&\n            page.getBackdropType() === 'embed' &&\n            backdropSVG &&\n            backdropSVG.children[0].getAttribute('preserveAspectRatio') !== 'none'\n          ) {\n            backdropSVG.children[0].setAttribute('preserveAspectRatio', 'none');\n          }\n\n          // Note 1: this here is a work around for older browsers that can't use\n          // the object-fit property yet.\n          // Currently (26.05.16) only Safari is known to not support\n          // object-position although object-fit itself does work\n          // Note 2: The embed element always needs it\n          if (\n            (page.getBackdropType() === 'embed' ||\n              (uagent.indexOf('safari') !== -1 && uagent.indexOf('chrome') === -1)) &&\n            page.getSize() !== 'scaled'\n          ) {\n            backdrop.style.width = backdropWidth + 'px';\n            backdrop.style.height = backdropHeight + 'px';\n            backdrop.style.left = backdropLeft + 'px';\n            backdrop.style.top = backdropTop + 'px';\n          }\n\n          if (backdropFixed && !backdropSVG) {\n            if (this.height < backdropHeight) {\n              backdrop.style.height = backdropHeight + 'px';\n            } else {\n              backdrop.style.height = '100%';\n            }\n          }\n\n          page\n            .getDomElement()\n            .querySelectorAll('.widget_container')\n            .forEach(function (widgetContainer) {\n              const widget = cv.ui.structure.WidgetFactory.getInstanceById(widgetContainer.id);\n\n              let value;\n              const layout = widget.getResponsiveLayout();\n              let scale = backdropScale;\n              if (layout) {\n                // this assumes that a .widget_container has only one child and this\n                // is the .widget itself\n                const style = widgetContainer.children[0].style;\n                if (layout.scale === 'false') {\n                  scale = 1.0;\n                }\n\n                if ('x' in layout) {\n                  value = layout.x.match(cssPosRegEx);\n                  if (value[2] === 'px') {\n                    style.left = backdropLeft + value[1] * scale + 'px';\n                  } else {\n                    style.left = layout.x;\n                  }\n                }\n\n                if ('y' in layout) {\n                  value = layout.y.match(cssPosRegEx);\n                  if (value[2] === 'px') {\n                    style.top = backdropTop + value[1] * scale + 'px';\n                  } else {\n                    style.top = layout.y;\n                  }\n                }\n\n                if ('width' in layout) {\n                  style.width = layout.width;\n                }\n\n                if ('height' in layout) {\n                  style.height = layout.height;\n                }\n              }\n            }, this);\n          this.__backdropRetries = 0;\n        } catch (e) {\n          if (e.name === 'NotSupportedError') {\n            if (this.__backdropRetries <= 5) {\n              qx.bom.AnimationFrame.request(this.__makeBackdropValid, this);\n              this.__backdropRetries++;\n            } else {\n              qx.log.Logger.error(this, e);\n            }\n          } else {\n            qx.log.Logger.error(this, e);\n          }\n        }\n      }\n\n      this.states.setBackdropInvalid(false);\n    },\n\n    makeNavbarValid() {\n      this.queueJob(this.__makeNavbarValid);\n    },\n\n    __makeNavbarValid() {\n      qx.log.Logger.debug(this, 'makeNavbarValid');\n      if (cv.ui.structure.pure.layout.Manager.adjustColumns()) {\n        // the amount of columns has changed -> recalculate the widgets widths\n        cv.ui.structure.pure.layout.Manager.applyColumnWidths();\n      }\n      this.states.setNavbarInvalid(false);\n    },\n\n    makePagesizeValid() {\n      if (this.__initial === true) {\n        // do not queue -> call now\n        this.__initial = false;\n        this.__makePagesizeValid();\n      } else {\n        this.queueJob(this.__makePagesizeValid);\n      }\n    },\n\n    __makePagesizeValid() {\n      if (!cv.Config.currentPageId) {\n        return;\n      }\n      qx.log.Logger.debug(this, 'makePagesizeValid');\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.currentPageId);\n\n      if (page && !page.isInitialized()) {\n        page.addListenerOnce('changeInitialized', this.__makePagesizeValid, this);\n\n        return;\n      }\n      this.width = cv.ui.structure.pure.layout.Manager.getAvailableWidth();\n      this.height = cv.ui.structure.pure.layout.Manager.getAvailableHeight();\n      const pageSizeElement = this.getPageSize();\n\n      if (pageSizeElement) {\n        pageSizeElement.innerHTML = '#main,.page{width:' + this.width + 'px;height:' + this.height + 'px;}';\n      }\n\n      this.states.setPageSizeInvalid(false);\n    },\n\n    makeRowspanValid() {\n      this.queueJob(this.__makeRowspanValid);\n    },\n\n    __makeRowspanValid() {\n      qx.log.Logger.debug(this, 'makeRowspanValid');\n      let elem = document.querySelector('#calcrowspan');\n      if (!elem) {\n        elem = qx.dom.Element.create('div', {\n          class: 'clearfix',\n          id: 'calcrowspan',\n          html: '<div id=\"containerDiv\" class=\"widget_container\"><div class=\"widget clearfix text\" id=\"innerDiv\"></div>'\n        });\n\n        document.body.appendChild(elem);\n      }\n      // use the internal div for height as in mobile view the elem uses the full screen height\n      this.__updateRowHeight(elem.querySelector('#containerDiv'));\n    },\n\n    __updateRowHeight(elem) {\n      const rect = elem.getBoundingClientRect();\n      const height = Math.round(rect.bottom - rect.top);\n      if (height === 0) {\n        // not ready try again\n        const self = this;\n        window.requestAnimationFrame(() => {\n          self.__updateRowHeight(elem);\n        });\n        return;\n      }\n      let styles = '';\n\n      for (let rowspan in cv.Config.configSettings.usedRowspans) {\n        styles += '.rowspan.rowspan' + rowspan + ' { height: ' + Math.round(rowspan * height) + 'px;}\\n';\n      }\n      const calcrowspan = document.querySelector('#calcrowspan');\n      if (calcrowspan) {\n        calcrowspan.parentNode.removeChild(calcrowspan);\n      }\n\n      // set css style\n      const rowSpanStyle = document.querySelector('#rowspanStyle');\n      if (rowSpanStyle) {\n        rowSpanStyle.innerHTML = styles;\n      }\n      this.states.setRowspanInvalid(false);\n    },\n\n    invalidateBackdrop() {\n      qx.log.Logger.debug(this, 'backdrop');\n      this.states.setBackdropInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateNavbar() {\n      qx.log.Logger.debug(this, 'invalidateNavbar');\n      this.states.setNavbarInvalid(true);\n      this.states.setPageSizeInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateRowspan() {\n      this.states.setRowspanInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateScreensize() {\n      qx.log.Logger.debug(this, 'invalidateScreensize');\n      this.states.set({\n        pageSizeInvalid: true,\n        rowspanInvalid: true,\n        navbarInvalid: true,\n        backdropInvalid: true\n      });\n\n      this.makeAllSizesValid();\n    }\n  },\n\n  defer(statics) {\n    qx.event.Registration.addListener(window, 'resize', statics.invalidateScreensize, statics);\n  }\n});\n"
  ],
  "mappings": "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"
}