{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "properties",
    "src",
    "check",
    "nullable",
    "id",
    "width",
    "height",
    "autoplay",
    "init",
    "loop",
    "thresholdValue",
    "members",
    "_getInnerDomString",
    "style",
    "getWidth",
    "getHeight",
    "isAutoplay",
    "isLoop",
    "getId",
    "getSrc",
    "getActor",
    "getDomElement",
    "querySelector",
    "_update",
    "address",
    "value",
    "on",
    "applyMapping",
    "getThresholdValue",
    "audioWidget",
    "paused",
    "play",
    "defer",
    "statics",
    "WidgetFactory",
    "registerClass",
    "Audio"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Audio.js"
  ],
  "sourcesContent": [
    "/* Audio.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The audio widget embeds an audio file, which can be automatically played by incoming data\n *\n * @widgetexample <settings>\n *   <screenshot name=\"audio_example\">\n *    <caption>Default example for defining an audio widget in the configuration</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n * </settings>\n * <audio id=\"audio_widget\" src=\"path/to/audio_file.mp3\">\n *   <layout colspan=\"4\" />\n *   <label>Audio</label>\n *   <address transform=\"DPT:1.001\" mode=\"read\">0/0/0</address>\n * </audio>\n *\n *\n * @author Markus Damman\n * @since 0.8.4 (2014)\n */\nqx.Class.define('cv.ui.structure.pure.Audio', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: { check: 'String', nullable: true },\n    id: { check: 'String', nullable: true },\n    width: { check: 'String', nullable: true },\n    height: { check: 'String', nullable: true },\n    autoplay: { check: 'Boolean', init: false },\n    loop: { check: 'Boolean', init: false },\n    thresholdValue: { check: 'Number', init: 1 }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create the main structure\n      // create the actor\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style !== '') {\n        style = 'style=\"' + style + '\"';\n      }\n      const autoplay = this.isAutoplay() ? ' autoplay ' : '';\n      const loop = this.isLoop() ? ' loop ' : '';\n      return (\n        '<div class=\"actor\"><audio id=\"' +\n        this.getId() +\n        '\" ' +\n        autoplay +\n        loop +\n        style +\n        ' controls> <source src=\"' +\n        this.getSrc() +\n        '\" > </audio> </div>'\n      );\n    },\n\n    // overridden\n    getActor() {\n      return this.getDomElement().querySelector('.actor audio');\n    },\n\n    /**\n     * Handles updates of incoming data for this widget\n     *\n     * @param address {String} Source address of the incoming data\n     * @param value {String} Incoming data\n     */\n    _update(address, value) {\n      const on = this.applyMapping(this.getThresholdValue());\n      if (value >= on) {\n        const audioWidget = this.getActor();\n        if (audioWidget.paused === true) {\n          audioWidget.play();\n        }\n      }\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('audio', statics);\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}