{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "properties",
    "src",
    "check",
    "nullable",
    "id",
    "width",
    "height",
    "autoplay",
    "init",
    "loop",
    "thresholdValue",
    "members",
    "_getInnerDomString",
    "style",
    "getWidth",
    "getHeight",
    "isAutoplay",
    "isLoop",
    "getId",
    "getSrc",
    "getActor",
    "getDomElement",
    "querySelector",
    "_update",
    "address",
    "value",
    "on",
    "applyMapping",
    "getThresholdValue",
    "audioWidget",
    "paused",
    "play",
    "defer",
    "statics",
    "WidgetFactory",
    "registerClass",
    "Audio"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Audio.js"
  ],
  "sourcesContent": [
    "/* Audio.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The audio widget embeds an audio file, which can be automatically played by incoming data\n *\n * @widgetexample <settings>\n *   <screenshot name=\"audio_example\">\n *    <caption>Default example for defining an audio widget in the configuration</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n * </settings>\n * <audio id=\"audio_widget\" src=\"path/to/audio_file.mp3\">\n *   <layout colspan=\"4\" />\n *   <label>Audio</label>\n *   <address transform=\"DPT:1.001\" mode=\"read\">0/0/0</address>\n * </audio>\n *\n *\n * @author Markus Damman\n * @since 0.8.4 (2014)\n */\nqx.Class.define('cv.ui.structure.pure.Audio', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: { check: 'String', nullable: true },\n    id: { check: 'String', nullable: true },\n    width: { check: 'String', nullable: true },\n    height: { check: 'String', nullable: true },\n    autoplay: { check: 'Boolean', init: false },\n    loop: { check: 'Boolean', init: false },\n    thresholdValue: { check: 'Number', init: 1 }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create the main structure\n      // create the actor\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style !== '') {\n        style = 'style=\"' + style + '\"';\n      }\n      const autoplay = this.isAutoplay() ? ' autoplay ' : '';\n      const loop = this.isLoop() ? ' loop ' : '';\n      return (\n        '<div class=\"actor\"><audio id=\"' +\n        this.getId() +\n        '\" ' +\n        autoplay +\n        loop +\n        style +\n        ' controls> <source src=\"' +\n        this.getSrc() +\n        '\" > </audio> </div>'\n      );\n    },\n\n    // overridden\n    getActor() {\n      return this.getDomElement().querySelector('.actor audio');\n    },\n\n    /**\n     * Handles updates of incoming data for this widget\n     *\n     * @param address {String} Source address of the incoming data\n     * @param value {String} Incoming data\n     */\n    _update(address, value) {\n      const on = this.applyMapping(this.getThresholdValue());\n      if (value >= on) {\n        const audioWidget = this.getActor();\n        if (audioWidget.paused === true) {\n          audioWidget.play();\n        }\n      }\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('audio', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}