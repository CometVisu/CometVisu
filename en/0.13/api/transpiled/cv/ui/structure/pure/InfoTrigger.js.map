{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Operate",
    "Update",
    "HasAnimatedButton",
    "HandleLongpress",
    "properties",
    "downValue",
    "check",
    "init",
    "shortDownValue",
    "nullable",
    "downLabel",
    "upValue",
    "shortUpValue",
    "upLabel",
    "isAbsolute",
    "min",
    "max",
    "infoPosition",
    "members",
    "_getInnerDomString",
    "ret_val",
    "actordown",
    "getAlign",
    "getDownLabel",
    "actorup",
    "getUpLabel",
    "actorinfo",
    "getInfoPosition",
    "getActors",
    "getDomElement",
    "querySelectorAll",
    "initListeners",
    "forEach",
    "actor",
    "event",
    "Registration",
    "addListener",
    "_onPointerDown",
    "__findActor",
    "element",
    "classList",
    "contains",
    "parentNode",
    "_onLongTap",
    "__action",
    "getCurrentTarget",
    "_action",
    "isShort",
    "isDown",
    "value",
    "getShortDownValue",
    "getShortUpValue",
    "getDownValue",
    "getUpValue",
    "bitMask",
    "getIsAbsolute",
    "bvalue",
    "parseFloat",
    "getBasicValue",
    "Number",
    "isFinite",
    "Math",
    "getMin",
    "getMax",
    "sendToBackend",
    "address",
    "variantInfo",
    "getDownActor",
    "querySelector",
    "getUpActor",
    "getInfoActor",
    "defer",
    "statics",
    "WidgetFactory",
    "registerClass",
    "InfoTrigger"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoTrigger.js"
  ],
  "sourcesContent": [
    "/* InfoTrigger.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds an element to the visu that contains two buttons and a value indication for feedback\n * from the BUS. (E.g. for multimedia control\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.InfoTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton, cv.ui.common.HandleLongpress],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    downValue: {\n      check: 'Number',\n      init: 0\n    },\n\n    shortDownValue: {\n      check: 'Number',\n      nullable: true\n    },\n\n    downLabel: {\n      check: 'String',\n      nullable: true\n    },\n\n    upValue: {\n      check: 'Number',\n      init: 0\n    },\n\n    shortUpValue: {\n      check: 'Number',\n      nullable: true\n    },\n\n    upLabel: {\n      check: 'String',\n      nullable: true\n    },\n\n    isAbsolute: {\n      check: 'Boolean',\n      init: false\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 255\n    },\n\n    infoPosition: {\n      check: ['left', 'middle', 'right'],\n      init: 'middle'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create buttons + info\n      let ret_val = '<div style=\"float:left;\">';\n\n      let actordown = '<div class=\"actor switchUnpressed downlabel\" ';\n      if (this.getAlign()) {\n        actordown += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actordown += '>';\n      actordown += '<div class=\"label\">' + (this.getDownLabel() || '-') + '</div>';\n      actordown += '</div>';\n\n      let actorup = '<div class=\"actor switchUnpressed uplabel\" ';\n      if (this.getAlign()) {\n        actorup += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorup += '>';\n      actorup += '<div class=\"label\">' + (this.getUpLabel() || '+') + '</div>';\n      actorup += '</div>';\n\n      let actorinfo = '<div class=\"actor switchInvisible\" ';\n      if (this.getAlign()) {\n        actorinfo += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorinfo += '><div class=\"value\">-</div></div>';\n\n      switch (this.getInfoPosition()) {\n        case 'middle':\n          ret_val += actordown;\n          ret_val += actorinfo;\n          ret_val += actorup;\n          break;\n        case 'right':\n          ret_val += actordown;\n          ret_val += actorup;\n          ret_val += actorinfo;\n          break;\n        default:\n          ret_val += actorinfo;\n          ret_val += actordown;\n          ret_val += actorup;\n          break;\n      }\n\n      return ret_val + '</div>';\n    },\n\n    getActors() {\n      return this.getDomElement().querySelectorAll('.actor.uplabel, .actor.downlabel');\n    },\n\n    // overridden\n    initListeners() {\n      this.getActors().forEach(function (actor) {\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    },\n\n    __findActor(element) {\n      while (!element.classList.contains('actor')) {\n        element = element.parentNode;\n        if (element.classList.contains('widget')) {\n          // thats too far\n          return null;\n        }\n      }\n      return element;\n    },\n\n    _onLongTap(event) {\n      this.__action(false, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    _action(event) {\n      this.__action(true, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    __action(isShort, isDown) {\n      let value;\n      if (isShort && this.getShortDownValue() !== null && this.getShortUpValue() !== null) {\n        value = isDown ? this.getShortDownValue() : this.getShortUpValue();\n      } else {\n        value = isDown ? this.getDownValue() : this.getUpValue();\n      }\n\n      const bitMask = isShort ? 1 : 2;\n\n      if (this.getIsAbsolute()) {\n        let bvalue = parseFloat(this.getBasicValue());\n        if (!Number.isFinite(bvalue)) {\n          bvalue = 0; // anything is better than NaN...\n        }\n        value = bvalue + value;\n        value = Math.max(value, this.getMin());\n        value = Math.min(value, this.getMax());\n      }\n      this.sendToBackend(value, function (address) {\n        return !!(address.variantInfo & bitMask);\n      });\n    },\n\n    getDownActor() {\n      return this.getDomElement().querySelector('.actor.downlabel');\n    },\n\n    getUpActor() {\n      return this.getDomElement().querySelector('.actor.uplabel');\n    },\n\n    getInfoActor() {\n      return this.getDomElement().querySelector('.actor.switchInvisible');\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infotrigger', statics);\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}