{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "construct",
    "props",
    "__indicatorDOMElement",
    "statics",
    "coord",
    "position",
    "x",
    "toFixed",
    "y",
    "createBarPath",
    "startAngle",
    "startArrowPoint",
    "endAngle",
    "endArrowPoint",
    "radius",
    "width",
    "getBBox",
    "startArrowPointAngle",
    "endArrowPointAngle",
    "clockwise",
    "rI",
    "rIM",
    "rM",
    "rMO",
    "rO",
    "startInner",
    "Math",
    "cos",
    "sin",
    "startMiddle",
    "startOuter",
    "centerInner",
    "centerOuter",
    "endInner",
    "endMiddle",
    "endOuter",
    "startMiddleFlag",
    "abs",
    "PI",
    "startEndFlag",
    "endMiddleFlag",
    "startMiddleDir",
    "endMiddleDir",
    "arc",
    "start",
    "end",
    "r",
    "flag",
    "cw",
    "Roundbar",
    "join",
    "rMax",
    "max",
    "isInside",
    "a",
    "rMiddle",
    "uMiddle",
    "lMiddle",
    "dMiddle",
    "u",
    "min",
    "d",
    "l",
    "createPointerPath",
    "angle",
    "p",
    "s",
    "c",
    "wx",
    "wy",
    "thickness",
    "tx",
    "ty",
    "properties",
    "type",
    "check",
    "indicators",
    "axisradius",
    "axiswidth",
    "axiscolor",
    "ranges",
    "minorradius",
    "minorwidth",
    "minorspacing",
    "minorcolor",
    "majorradius",
    "majorwidth",
    "majorposition",
    "majorcolor",
    "labels",
    "labelstyle",
    "arrowtype",
    "spacing",
    "overflowarrow",
    "fontsize",
    "textx",
    "texty",
    "textlength",
    "textanchor",
    "linespace",
    "bboxgrow",
    "debug",
    "currentRatioValue",
    "init",
    "targetRatioValue",
    "members",
    "__animator",
    "undefined",
    "_getInnerDomString",
    "bboxAdd",
    "bbox",
    "setCurrentRatioValue",
    "Array",
    "getIndicators",
    "length",
    "fill",
    "setTargetRatioValue",
    "self",
    "getStart",
    "e",
    "getEnd",
    "getMin",
    "getMax",
    "cntValues",
    "svgMajor",
    "svgMinor",
    "svgLabels",
    "svgRanges",
    "svgIndicators",
    "svgText",
    "getAxisradius",
    "getAxiswidth",
    "sMax",
    "eMax",
    "forEach",
    "indicator",
    "startarrow",
    "endarrow",
    "BBox",
    "getMinorwidth",
    "parseFloat",
    "getMinorspacing",
    "rIn",
    "getMinorradius",
    "rOut",
    "test",
    "delta",
    "cnt",
    "getMinorcolor",
    "getMajorwidth",
    "getMajorradius",
    "getMajorposition",
    "split",
    "getMajorcolor",
    "getLabelstyle",
    "getLabels",
    "label",
    "labelnumber",
    "value",
    "alignmentBaseline",
    "textAnchor",
    "textAngle",
    "orientation",
    "name",
    "labelid",
    "$$user_path",
    "path",
    "align",
    "getRanges",
    "range",
    "sRange",
    "eRange",
    "rRange",
    "wRange",
    "thisBBox",
    "style",
    "number",
    "push",
    "util",
    "LimitedRateUpdateAnimator",
    "__updateIndicatorPosition",
    "showValue",
    "getTexty",
    "getTextanchor",
    "getFontsize",
    "getTextx",
    "getLinespace",
    "repeat",
    "textDistribution",
    "middle",
    "textU",
    "textD",
    "getTextlength",
    "html",
    "getBboxgrow",
    "getDebug",
    "sectorPath",
    "axisPath",
    "stroke",
    "getAxiscolor",
    "_update",
    "address",
    "data",
    "Transform",
    "decode",
    "getAddress",
    "target",
    "getTargetRatioValue",
    "tspan",
    "from",
    "getDomElement",
    "getElementsByTagName",
    "valueFormat",
    "applyFormat",
    "i",
    "textContent",
    "setTo",
    "isVisible",
    "ratio",
    "indicatorNumber",
    "getElementsByClassName",
    "targetAngle",
    "getOverflowarrow",
    "isBar",
    "setAttribute"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Roundbar.js"
  ],
  "sourcesContent": [
    "/* Roundbar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a display to the visu that can represent values from the BUS\n * and shows them with a round bar.\n *\n * @widgetexample <settings>\n *    <caption>Example roundbar widget</caption>\n *    <screenshot name=\"roundbar_simple\">\n *      <data address=\"3/3/1\">63.3</data>\n *    </screenshot>\n *  </settings>\n *  <roundbar>\n *      <address transform=\"DPT:9.001\" mode=\"read\">3/3/1</address>\n *  </roundbar>\n *\n * @author Christian Mayer\n * @since 0.12.0 (2020)\n */\nqx.Class.define('cv.ui.structure.pure.Roundbar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    this.__indicatorDOMElement = [];\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    coord(position) {\n      return position.x.toFixed(1) + ' ' + position.y.toFixed(1);\n    },\n    /**\n     * Create the SVG path for the round bar.\n     * Angle = 0 === horizontal on the right\n     *\n     * @param startAngle {Float}\n     * @param startArrowPoint {Float}\n     * @param endAngle {Float}\n     * @param endArrowPoint {Float}\n     * @param radius {Float}\n     * @param width {Float}\n     * @param getBBox {Boolean} return the bounding box instead of the path itself\n     */\n    createBarPath(startAngle, startArrowPoint, endAngle, endArrowPoint, radius, width, getBBox = false) {\n      const startArrowPointAngle = startAngle + startArrowPoint;\n      const endArrowPointAngle = endAngle + endArrowPoint;\n\n      // The path to generate is using those positions:\n      // rO             -- outer --\n      // rMO        /// outermiddle \\\\\\\n      // rM      //       middle        \\\\\n      // rIM   /        innermiddle        \\\n      // rI   /         -- inner --         \\\n      //     |        /             \\        |\n      //     |_______|               |_______|\n      //       start      center        end\n      const clockwise = startAngle > endAngle ? 1 : 0;\n      const rI = radius;\n      const rIM = radius + (width * 1) / 4;\n      const rM = radius + (width * 2) / 4;\n      const rMO = radius + (width * 3) / 4;\n      const rO = radius + width;\n      const startInner = {\n        x: Math.cos(startAngle) * rI,\n        y: -Math.sin(startAngle) * rI\n      };\n\n      const startMiddle = {\n        x: Math.cos(startArrowPointAngle) * rM,\n        y: -Math.sin(startArrowPointAngle) * rM\n      };\n\n      const startOuter = {\n        x: Math.cos(startAngle) * rO,\n        y: -Math.sin(startAngle) * rO\n      };\n\n      const centerInner = {\n        x: Math.cos((startAngle + endAngle) / 2) * rI,\n        y: -Math.sin((startAngle + endAngle) / 2) * rI\n      };\n\n      const centerOuter = {\n        x: Math.cos((startAngle + endAngle) / 2) * rO,\n        y: -Math.sin((startAngle + endAngle) / 2) * rO\n      };\n\n      const endInner = {\n        x: Math.cos(endAngle) * rI,\n        y: -Math.sin(endAngle) * rI\n      };\n\n      const endMiddle = {\n        x: Math.cos(endArrowPointAngle) * rM,\n        y: -Math.sin(endArrowPointAngle) * rM\n      };\n\n      const endOuter = {\n        x: Math.cos(endAngle) * rO,\n        y: -Math.sin(endAngle) * rO\n      };\n\n      const startMiddleFlag = Math.abs(startAngle - startArrowPointAngle) > Math.PI ? 1 : 0;\n      const startEndFlag = Math.abs(startAngle - endAngle) / 2 > Math.PI ? 1 : 0;\n      const endMiddleFlag = Math.abs(endAngle - endArrowPointAngle) > Math.PI ? 1 : 0;\n      const startMiddleDir = startAngle < startArrowPointAngle ? 1 : 0;\n      const endMiddleDir = endAngle < endArrowPointAngle ? 1 : 0;\n\n      /**\n       * @param start\n       * @param end\n       * @param r\n       * @param flag\n       * @param cw\n       */\n      function arc(start, end, r, flag, cw) {\n        return start.x === end.x && start.y === end.y\n          ? ''\n          : Math.abs(start.x - end.x) + Math.abs(start.y - end.y) < 2\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(end)\n          : ['A', r, r, 0, flag, cw, cv.ui.structure.pure.Roundbar.coord(end)].join(' ');\n      }\n\n      if (getBBox) {\n        const rMax = Math.max(rI, rO);\n        const isInside = function (a) {\n          return (startAngle < a && a < endAngle) || (startAngle > a && a > endAngle);\n        };\n        const rMiddle = isInside((-Math.PI * 4) / 2) || isInside((Math.PI * 0) / 2) ? rMax : startInner.x;\n        const uMiddle = isInside((-Math.PI * 3) / 2) || isInside((Math.PI * 1) / 2) ? -rMax : startInner.y;\n        const lMiddle = isInside((-Math.PI * 2) / 2) || isInside((Math.PI * 2) / 2) ? -rMax : startInner.x;\n        const dMiddle = isInside((-Math.PI * 1) / 2) || isInside((Math.PI * 3) / 2) ? rMax : startInner.y;\n        return {\n          u: Math.min(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, uMiddle),\n\n          d: Math.max(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, dMiddle),\n\n          l: Math.min(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, lMiddle),\n\n          r: Math.max(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, rMiddle)\n        };\n      }\n\n      // a thin bar path should just be a single line\n      if (width < 1.0) {\n        return [\n          'M',\n          cv.ui.structure.pure.Roundbar.coord(startOuter),\n          arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n          arc(centerOuter, endOuter, rO, startEndFlag, clockwise)\n        ].join('');\n      }\n\n      return [\n        'M',\n        cv.ui.structure.pure.Roundbar.coord(startInner),\n        startArrowPointAngle === startAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(startOuter)\n          : arc(startInner, startMiddle, rIM, startMiddleFlag, 1 - startMiddleDir) +\n            arc(startMiddle, startOuter, rMO, startMiddleFlag, startMiddleDir),\n        arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n        arc(centerOuter, endOuter, rO, startEndFlag, clockwise),\n        endArrowPointAngle === endAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(endInner)\n          : arc(endOuter, endMiddle, rMO, endMiddleFlag, 1 - endMiddleDir) +\n            arc(endMiddle, endInner, rIM, endMiddleFlag, endMiddleDir),\n        arc(startInner, centerInner, rI, startEndFlag, 1 - clockwise),\n        arc(centerInner, startInner, rI, startEndFlag, 1 - clockwise),\n        'Z'\n      ].join('');\n    },\n    /**\n     * Create the SVG path for an pointer.\n     * @param angle {Float}\n     * @param p {Object} Indicator object\n     */\n    createPointerPath(angle, p) {\n      const s = Math.sin(angle);\n      const c = Math.cos(angle);\n      const wx = c * p.width;\n      const wy = s * p.width;\n\n      if (p.thickness > 0) {\n        const tx = (-s * p.thickness) / 2;\n        const ty = (c * p.thickness) / 2;\n        return [\n          'M',\n          this.coord({\n            x: c * p.radius + wx - tx,\n            y: -(s * p.radius + wy - ty)\n          }),\n\n          'L',\n          this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n          'L',\n          this.coord({\n            x: c * p.radius + wx + tx,\n            y: -(s * p.radius + wy + ty)\n          })\n        ].join('');\n      }\n      return [\n        'M',\n        this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n        'L',\n        this.coord({ x: c * p.radius + wx, y: -(s * p.radius + wy) })\n      ].join('');\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    type: { check: 'Array' },\n    indicators: { check: 'Array' },\n\n    min: { check: 'Number' },\n    max: { check: 'Number' },\n    axisradius: { check: 'Number' },\n    axiswidth: { check: 'Number' },\n    axiscolor: { check: 'String' },\n    ranges: { check: 'Array' },\n    minorradius: { check: 'Number' },\n    minorwidth: { check: 'Number' },\n    minorspacing: { check: 'String' },\n    minorcolor: { check: 'String' },\n    majorradius: { check: 'Number' },\n    majorwidth: { check: 'Number' },\n    majorposition: { check: 'String' },\n    majorcolor: { check: 'String' },\n    labels: { check: 'Array' },\n    labelstyle: { check: 'String' },\n    start: { check: 'Number' },\n    end: { check: 'Number' },\n    arrowtype: { check: 'Number' },\n    spacing: { check: 'Number' },\n    overflowarrow: { check: 'Boolean' },\n    fontsize: { check: 'Number' },\n    textx: { check: 'Number' },\n    texty: { check: 'Number' },\n    textlength: { check: 'Number' },\n    textanchor: { check: 'String' },\n    linespace: { check: 'Number' },\n    bboxgrow: { check: 'Object' },\n    debug: { check: 'Boolean' },\n    currentRatioValue: { check: 'Array', init: [] },\n    targetRatioValue: { check: 'Array', init: [] }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __animator: undefined,\n    __indicatorDOMElement: null,\n\n    // overridden\n    _getInnerDomString() {\n      /**\n       * Grow the bounding box to also contain the parameters x and y\n       * @param bbox {Object} The initial bounding box\n       * @param x {Float}\n       * @param y {Float}\n       * @returns {Object} The enlarged bounding box\n       */\n      function bboxAdd(bbox, x, y) {\n        if (bbox.u > y) {\n          bbox.u = y;\n        }\n        if (bbox.d < y) {\n          bbox.d = y;\n        }\n        if (bbox.l > x) {\n          bbox.l = x;\n        }\n        if (bbox.r < x) {\n          bbox.r = x;\n        }\n        return bbox;\n      }\n\n      this.setCurrentRatioValue(Array(this.getIndicators().length).fill(0));\n      this.setTargetRatioValue(Array(this.getIndicators().length).fill([0, false, false]));\n\n      const self = this;\n      const s = this.getStart();\n      const e = this.getEnd();\n      const min = this.getMin();\n      const max = this.getMax();\n      let cntValues = 0;\n      let svgMajor = '';\n      let svgMinor = '';\n      let svgLabels = '';\n      let svgRanges = '';\n      let svgIndicators = '';\n      let svgText = '';\n      const createBarPath = cv.ui.structure.pure.Roundbar.createBarPath;\n\n      // Determine the bounding box, first get the biggest radius that must fit\n      let rMax = this.getAxisradius() + this.getAxiswidth();\n      let sMax = 0;\n      let eMax = 0;\n      this.getIndicators().forEach(function (indicator) {\n        rMax = Math.max(rMax, indicator.radius, indicator.radius + indicator.width);\n\n        sMax = Math.max(sMax, indicator.startarrow);\n        eMax = Math.max(eMax, indicator.endarrow);\n      });\n      let BBox = createBarPath(s, sMax, e, eMax, rMax, 0, true);\n\n      if (this.getMinorwidth() > 0) {\n        let spacing = parseFloat(this.getMinorspacing());\n        let rIn = this.getMinorradius();\n        let rOut = this.getMinorwidth() + rIn;\n\n        if (/^[0-9]+%/.test(this.getMinorspacing())) {\n          // special case: percentage\n          spacing = ((max - min) * spacing) / 100;\n        }\n\n        svgMinor += '<path class=\"minor\" d=\"';\n        for (\n          var angle = s, delta = ((e - s) * spacing) / (max - min), cnt = (max - min) / spacing;\n          cnt >= 0;\n          angle += delta, cnt--\n        ) {\n          var sin = Math.sin(angle);\n          var cos = Math.cos(angle);\n          svgMinor += [\n            'M',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rIn,\n              y: -sin * rIn\n            }),\n\n            'L',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rOut,\n              y: -sin * rOut\n            })\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n          BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n        }\n        if (this.getMinorcolor() !== '') {\n          svgMinor += '\" style=\"stroke:' + this.getMinorcolor();\n        }\n        svgMinor += '\" />';\n      }\n\n      if (this.getMajorwidth() > 0) {\n        let rIn = this.getMajorradius();\n        let rOut = this.getMajorwidth() + rIn;\n\n        svgMajor += '<path class=\"major\" d=\"';\n\n        this.getMajorposition()\n          .split(';')\n          .forEach(function (position) {\n            switch (position) {\n              case 'min':\n                position = min;\n                break;\n\n              case 'max':\n                position = max;\n                break;\n            }\n\n            const angle = s + ((e - s) * (position - min)) / (max - min);\n            const sin = Math.sin(angle);\n            const cos = Math.cos(angle);\n            svgMajor += [\n              'M',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rIn,\n                y: -sin * rIn\n              }),\n\n              'L',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rOut,\n                y: -sin * rOut\n              })\n            ].join('');\n\n            BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n            BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n          });\n        if (this.getMajorcolor() !== '') {\n          svgMajor += '\" style=\"stroke:' + this.getMajorcolor();\n        }\n        svgMajor += '\" />';\n      }\n\n      const labelstyle = this.getLabelstyle();\n      this.getLabels().forEach(function (label, labelnumber) {\n        const angle = s + ((e - s) * (label.value - min)) / (max - min);\n        const x = label.radius * Math.cos(angle);\n        const y = label.radius * -Math.sin(angle);\n        let alignmentBaseline = '';\n        let textAnchor = '';\n        let textAngle = 0;\n\n        if (label.orientation < 3) {\n          svgLabels += '<text class=\"axislabel\" x=\"' + x + '\" y=\"' + y + '\"';\n          switch (label.orientation) {\n            default:\n            case 0: // horizontal\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              if (Math.abs(x) < 1) {\n                textAnchor = 'middle';\n              }\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n              }\n              if (Math.abs(y) < 1) {\n                alignmentBaseline = 'middle';\n              }\n              break;\n\n            case 1: {\n              // parallel\n              let textAngle = (-angle * 180) / Math.PI + 90;\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n\n                textAngle += 180;\n              }\n              textAnchor = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n            }\n\n            case 2: // perpendicular\n              textAngle = (-angle * 180) / Math.PI;\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n                textAngle += 180;\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              alignmentBaseline = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n          }\n\n          svgLabels += ' dominant-baseline=\"' + alignmentBaseline + '\"';\n          svgLabels += ' text-anchor=\"' + textAnchor + '\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '>' + label.name + '</text>';\n        } else {\n          // label.orientation >= 3 -> round\n          const labelid = self.$$user_path + '_label' + labelnumber;\n          const cw = s < e ? 0 : 1;\n          let path = '';\n          let align = '';\n\n          switch (label.orientation) {\n            case 3: // roundstart\n              path = [\n                'M',\n                x,\n                y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                -x,\n                -y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                x,\n                y\n              ].join(' ');\n              break;\n\n            case 4: // roundmiddle\n              path = [\n                'M',\n                -x,\n                -y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                x,\n                y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                -x,\n                -y\n              ].join(' ');\n              align = ' startOffset=\"50%\" text-anchor=\"middle\"';\n              break;\n\n            case 5: // roundend\n              path = [\n                'M',\n                x,\n                y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                -x,\n                -y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                x,\n                y\n              ].join(' ');\n              align = ' startOffset=\"100%\" text-anchor=\"end\"';\n              break;\n          }\n\n          svgLabels += '<path style=\"stroke:none; fill:none; stroke-width:0\" id=\"' + labelid + '\" d=\"' + path + '\"/>';\n          svgLabels += '<text class=\"axislabel\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '><textPath href=\"#' + labelid + '\"' + align + '>' + label.name + '</textPath></text>';\n        }\n      });\n\n      this.getRanges().forEach(function (range) {\n        const sRange = ((e - s) * (range.start - min)) / (max - min) + s;\n        const eRange = ((e - s) * (range.end - min)) / (max - min) + s;\n        const rRange = range.radius || self.getAxisradius();\n        const wRange = range.width || self.getAxiswidth();\n        const thisBBox = createBarPath(sRange, 0, eRange, 0, rRange, wRange, true);\n\n        svgRanges += '<path class=\"range\" d=\"';\n        svgRanges += createBarPath(sRange, 0, eRange, 0, rRange, wRange);\n        if (range.style) {\n          svgRanges += '\" style=\"' + range.style;\n        }\n        svgRanges += '\" />';\n\n        BBox = bboxAdd(BBox, thisBBox.l, thisBBox.u);\n        BBox = bboxAdd(BBox, thisBBox.r, thisBBox.d);\n      });\n\n      this.__animator = [];\n      this.getIndicators().forEach(function (indicator, number) {\n        self.__animator.push(new cv.util.LimitedRateUpdateAnimator(self.__updateIndicatorPosition, self, number));\n\n        svgIndicators += '<path class=\"indicator\" style=\"' + indicator.style + '\" />';\n\n        if (indicator.showValue) {\n          cntValues++;\n        }\n      });\n\n      if (cntValues > 0) {\n        svgText +=\n          '<text class=\"value\" y=\"' +\n          this.getTexty() +\n          '\"' +\n          ' text-anchor=\"' +\n          this.getTextanchor() +\n          '\"' +\n          ' font-size=\"' +\n          this.getFontsize() +\n          '\">' +\n          '<tspan x=\"' +\n          this.getTextx() +\n          '\" dy=\"0\">-</tspan>' +\n          ('<tspan x=\"' + this.getTextx() + '\" dy=\"' + this.getLinespace() + '\">-</tspan>').repeat(cntValues - 1) +\n          '</text>';\n\n        const textDistribution = {\n          start: [0, 1],\n          middle: [0.5, 0.5],\n          end: [1, 0]\n        }[this.getTextanchor()] || [0, 1];\n        const textU = Math.min(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        const textD = Math.max(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        BBox = bboxAdd(BBox, this.getTextx() - textDistribution[0] * this.getTextlength(), this.getTexty() + textU);\n\n        BBox = bboxAdd(BBox, this.getTextx() + textDistribution[1] * this.getTextlength(), this.getTexty() + textD);\n      }\n\n      let html =\n        '<div class=\"actor\">' +\n        '<svg width=\"100%\" height=\"100%\" viewBox=\"' +\n        [\n          BBox.l - this.getBboxgrow().l,\n          BBox.u - this.getBboxgrow().u,\n          BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r,\n          BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d\n        ].join(' ') +\n        '\">';\n      if (this.getDebug()) {\n        html +=\n          '<rect width=\"' +\n          (BBox.r - BBox.l) +\n          '\" height=\"' +\n          (BBox.d - BBox.u) +\n          '\" x=\"' +\n          BBox.l +\n          '\" y=\"' +\n          BBox.u +\n          '\" stroke=\"blue\" fill=\"none\" />' +\n          '<rect width=\"' +\n          (BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r) +\n          '\" height=\"' +\n          (BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d) +\n          '\" x=\"' +\n          (BBox.l - this.getBboxgrow().l) +\n          '\" y=\"' +\n          (BBox.u - this.getBboxgrow().u) +\n          '\" stroke=\"green\" fill=\"none\" />' +\n          '<circle cx=\"0\" cy=\"0\" r=\"3\" fill=\"red\" />';\n      }\n\n      if (this.getAxisradius() > 0) {\n        const sectorPath = createBarPath(s, 0, e, 0, this.getAxisradius(), 0);\n        const axisPath = createBarPath(s, 0, e, 0, this.getAxisradius(), this.getAxiswidth());\n\n        const stroke = this.getAxiscolor() === '' ? undefined : this.getAxiscolor();\n        const fill = this.getAxiswidth() < 1 ? 'none' : stroke;\n        html +=\n          '<path class=\"sector\" d=\"' +\n          sectorPath +\n          ' L0 0Z\"/>' +\n          '<path class=\"axis\" d=\"' +\n          axisPath +\n          '\" style=\"' +\n          (stroke ? 'stroke:' + stroke : '') +\n          (fill ? ';fill:' + fill : '') +\n          '\"/>';\n      }\n\n      html += svgMinor + svgMajor + svgRanges + svgLabels + svgIndicators + svgText;\n      html += '</svg></div>';\n\n      return html;\n    },\n\n    /**\n     * Updates the roundbar widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const self = this;\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n      const target = this.getTargetRatioValue();\n      const tspan = Array.from(this.getDomElement().getElementsByTagName('tspan'));\n\n      const valueFormat = this.applyFormat(address, value);\n\n      this.getIndicators().forEach(function (indicator, i) {\n        if (address === indicator.address) {\n          target[i] = [\n            (Math.min(Math.max(value, indicator.min), indicator.max) - indicator.min) / (indicator.max - indicator.min),\n            value < indicator.min,\n            value > indicator.max\n          ];\n\n          if (tspan[i] !== undefined) {\n            tspan[i].textContent = valueFormat;\n          }\n          self.__animator[i].setTo(target[i][0], !self.isVisible());\n        }\n      });\n\n      this.setTargetRatioValue(target);\n    },\n\n    /**\n     * Callback to update the display of the indicators.\n     *\n     * Note: It is a design decision not to pool multiple updates in one requestAnimationFrame which might be beneficial\n     * performance wise. But as it's assumed that a typical visu config is only containing one roundbar per address\n     * a pooling wouldn't make a difference on the one hand but complicate the code on the other hand.\n     * Even with a few roundbars using the same address the performance impact is negligible.\n     * @param ratio\n     * @param indicatorNumber\n     */\n    __updateIndicatorPosition(ratio, indicatorNumber) {\n      if (this.__indicatorDOMElement.length === 0) {\n        // cache\n        this.__indicatorDOMElement = Array.from(this.getDomElement().getElementsByClassName('indicator'));\n      }\n\n      const indicator = this.getIndicators()[indicatorNumber];\n      const target = this.getTargetRatioValue()[indicatorNumber];\n      const startAngle = this.getStart();\n      const endAngle = this.getEnd();\n      let targetAngle = startAngle + ratio * (endAngle - startAngle);\n      const overflowarrow = this.getOverflowarrow();\n\n      if (!overflowarrow) {\n        targetAngle =\n          endAngle > startAngle\n            ? Math.max(startAngle, targetAngle - indicator.endarrow)\n            : Math.min(startAngle, targetAngle - indicator.endarrow);\n      }\n      if (indicator.isBar) {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createBarPath(\n            startAngle,\n            overflowarrow && !(target[1] && ratio < 0.01) ? 0 : indicator.startarrow,\n            targetAngle,\n            overflowarrow && !(target[2] && ratio > 0.99) ? 0 : indicator.endarrow,\n            indicator.radius,\n            indicator.width\n          )\n        );\n      } else {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createPointerPath(targetAngle, indicator)\n        );\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}