{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "construct",
    "props",
    "__indicatorDOMElement",
    "constructor",
    "call",
    "statics",
    "coord",
    "position",
    "x",
    "toFixed",
    "y",
    "createBarPath",
    "startAngle",
    "startArrowPoint",
    "endAngle",
    "endArrowPoint",
    "radius",
    "width",
    "getBBox",
    "arguments",
    "length",
    "undefined",
    "startArrowPointAngle",
    "endArrowPointAngle",
    "clockwise",
    "rI",
    "rIM",
    "rM",
    "rMO",
    "rO",
    "startInner",
    "Math",
    "cos",
    "sin",
    "startMiddle",
    "startOuter",
    "centerInner",
    "centerOuter",
    "endInner",
    "endMiddle",
    "endOuter",
    "startMiddleFlag",
    "abs",
    "PI",
    "startEndFlag",
    "endMiddleFlag",
    "startMiddleDir",
    "endMiddleDir",
    "arc",
    "start",
    "end",
    "r",
    "flag",
    "cw",
    "Roundbar",
    "join",
    "rMax",
    "max",
    "isInside",
    "a",
    "rMiddle",
    "uMiddle",
    "lMiddle",
    "dMiddle",
    "u",
    "min",
    "d",
    "l",
    "createPointerPath",
    "angle",
    "p",
    "s",
    "c",
    "wx",
    "wy",
    "thickness",
    "tx",
    "ty",
    "properties",
    "type",
    "check",
    "indicators",
    "axisradius",
    "axiswidth",
    "axiscolor",
    "ranges",
    "minorradius",
    "minorwidth",
    "minorspacing",
    "minorcolor",
    "majorradius",
    "majorwidth",
    "majorposition",
    "majorcolor",
    "labels",
    "labelstyle",
    "arrowtype",
    "spacing",
    "overflowarrow",
    "fontsize",
    "textx",
    "texty",
    "textlength",
    "textanchor",
    "linespace",
    "bboxgrow",
    "debug",
    "currentRatioValue",
    "init",
    "targetRatioValue",
    "members",
    "__animator",
    "__postponedUpdates",
    "_getInnerDomString",
    "bboxAdd",
    "bbox",
    "setCurrentRatioValue",
    "Array",
    "getIndicators",
    "fill",
    "setTargetRatioValue",
    "self",
    "getStart",
    "e",
    "getEnd",
    "getMin",
    "getMax",
    "cntValues",
    "svgMajor",
    "svgMinor",
    "svgLabels",
    "svgRanges",
    "svgIndicators",
    "svgText",
    "getAxisradius",
    "getAxiswidth",
    "sMax",
    "eMax",
    "forEach",
    "indicator",
    "startarrow",
    "endarrow",
    "BBox",
    "getMinorwidth",
    "parseFloat",
    "getMinorspacing",
    "rIn",
    "getMinorradius",
    "rOut",
    "test",
    "delta",
    "cnt",
    "getMinorcolor",
    "getMajorwidth",
    "getMajorradius",
    "getMajorposition",
    "split",
    "getMajorcolor",
    "getLabelstyle",
    "getLabels",
    "label",
    "labelnumber",
    "value",
    "alignmentBaseline",
    "textAnchor",
    "textAngle",
    "orientation",
    "name",
    "labelid",
    "$$user_path",
    "path",
    "align",
    "getRanges",
    "range",
    "sRange",
    "eRange",
    "rRange",
    "wRange",
    "thisBBox",
    "style",
    "number",
    "push",
    "util",
    "LimitedRateUpdateAnimator",
    "__updateIndicatorPosition",
    "showValue",
    "getTexty",
    "getTextanchor",
    "getFontsize",
    "getTextx",
    "getLinespace",
    "repeat",
    "textDistribution",
    "middle",
    "textU",
    "textD",
    "getTextlength",
    "html",
    "getBboxgrow",
    "getDebug",
    "sectorPath",
    "axisPath",
    "stroke",
    "getAxiscolor",
    "_onDomReady",
    "_this",
    "superclass",
    "prototype",
    "_ref",
    "address",
    "data",
    "_update",
    "domElement",
    "getDomElement",
    "Transform",
    "decode",
    "getAddress",
    "target",
    "getTargetRatioValue",
    "tspan",
    "from",
    "getElementsByTagName",
    "valueFormat",
    "applyFormat",
    "i",
    "textContent",
    "setTo",
    "isVisible",
    "ratio",
    "indicatorNumber",
    "getElementsByClassName",
    "targetAngle",
    "getOverflowarrow",
    "isBar",
    "setAttribute"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Roundbar.js"
  ],
  "sourcesContent": [
    "/* Roundbar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a display to the visu that can represent values from the BUS\n * and shows them with a round bar.\n *\n * @widgetexample <settings>\n *    <caption>Example roundbar widget</caption>\n *    <screenshot name=\"roundbar_simple\">\n *      <data address=\"3/3/1\">63.3</data>\n *    </screenshot>\n *  </settings>\n *  <roundbar>\n *      <address transform=\"DPT:9.001\" mode=\"read\">3/3/1</address>\n *  </roundbar>\n *\n * @author Christian Mayer\n * @since 0.12.0 (2020)\n */\nqx.Class.define('cv.ui.structure.pure.Roundbar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    this.__indicatorDOMElement = [];\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    coord(position) {\n      return position.x.toFixed(1) + ' ' + position.y.toFixed(1);\n    },\n    /**\n     * Create the SVG path for the round bar.\n     * Angle = 0 === horizontal on the right\n     *\n     * @param startAngle {Float}\n     * @param startArrowPoint {Float}\n     * @param endAngle {Float}\n     * @param endArrowPoint {Float}\n     * @param radius {Float}\n     * @param width {Float}\n     * @param getBBox {Boolean} return the bounding box instead of the path itself\n     */\n    createBarPath(startAngle, startArrowPoint, endAngle, endArrowPoint, radius, width, getBBox = false) {\n      const startArrowPointAngle = startAngle + startArrowPoint;\n      const endArrowPointAngle = endAngle + endArrowPoint;\n\n      // The path to generate is using those positions:\n      // rO             -- outer --\n      // rMO        /// outermiddle \\\\\\\n      // rM      //       middle        \\\\\n      // rIM   /        innermiddle        \\\n      // rI   /         -- inner --         \\\n      //     |        /             \\        |\n      //     |_______|               |_______|\n      //       start      center        end\n      const clockwise = startAngle > endAngle ? 1 : 0;\n      const rI = radius;\n      const rIM = radius + (width * 1) / 4;\n      const rM = radius + (width * 2) / 4;\n      const rMO = radius + (width * 3) / 4;\n      const rO = radius + width;\n      const startInner = {\n        x: Math.cos(startAngle) * rI,\n        y: -Math.sin(startAngle) * rI\n      };\n\n      const startMiddle = {\n        x: Math.cos(startArrowPointAngle) * rM,\n        y: -Math.sin(startArrowPointAngle) * rM\n      };\n\n      const startOuter = {\n        x: Math.cos(startAngle) * rO,\n        y: -Math.sin(startAngle) * rO\n      };\n\n      const centerInner = {\n        x: Math.cos((startAngle + endAngle) / 2) * rI,\n        y: -Math.sin((startAngle + endAngle) / 2) * rI\n      };\n\n      const centerOuter = {\n        x: Math.cos((startAngle + endAngle) / 2) * rO,\n        y: -Math.sin((startAngle + endAngle) / 2) * rO\n      };\n\n      const endInner = {\n        x: Math.cos(endAngle) * rI,\n        y: -Math.sin(endAngle) * rI\n      };\n\n      const endMiddle = {\n        x: Math.cos(endArrowPointAngle) * rM,\n        y: -Math.sin(endArrowPointAngle) * rM\n      };\n\n      const endOuter = {\n        x: Math.cos(endAngle) * rO,\n        y: -Math.sin(endAngle) * rO\n      };\n\n      const startMiddleFlag = Math.abs(startAngle - startArrowPointAngle) > Math.PI ? 1 : 0;\n      const startEndFlag = Math.abs(startAngle - endAngle) / 2 > Math.PI ? 1 : 0;\n      const endMiddleFlag = Math.abs(endAngle - endArrowPointAngle) > Math.PI ? 1 : 0;\n      const startMiddleDir = startAngle < startArrowPointAngle ? 1 : 0;\n      const endMiddleDir = endAngle < endArrowPointAngle ? 1 : 0;\n\n      /**\n       * @param start\n       * @param end\n       * @param r\n       * @param flag\n       * @param cw\n       */\n      function arc(start, end, r, flag, cw) {\n        return start.x === end.x && start.y === end.y\n          ? ''\n          : Math.abs(start.x - end.x) + Math.abs(start.y - end.y) < 2\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(end)\n          : ['A', r, r, 0, flag, cw, cv.ui.structure.pure.Roundbar.coord(end)].join(' ');\n      }\n\n      if (getBBox) {\n        const rMax = Math.max(rI, rO);\n        const isInside = function (a) {\n          return (startAngle < a && a < endAngle) || (startAngle > a && a > endAngle);\n        };\n        const rMiddle = isInside((-Math.PI * 4) / 2) || isInside((Math.PI * 0) / 2) ? rMax : startInner.x;\n        const uMiddle = isInside((-Math.PI * 3) / 2) || isInside((Math.PI * 1) / 2) ? -rMax : startInner.y;\n        const lMiddle = isInside((-Math.PI * 2) / 2) || isInside((Math.PI * 2) / 2) ? -rMax : startInner.x;\n        const dMiddle = isInside((-Math.PI * 1) / 2) || isInside((Math.PI * 3) / 2) ? rMax : startInner.y;\n        return {\n          u: Math.min(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, uMiddle),\n\n          d: Math.max(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, dMiddle),\n\n          l: Math.min(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, lMiddle),\n\n          r: Math.max(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, rMiddle)\n        };\n      }\n\n      // a thin bar path should just be a single line\n      if (width < 1.0) {\n        return [\n          'M',\n          cv.ui.structure.pure.Roundbar.coord(startOuter),\n          arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n          arc(centerOuter, endOuter, rO, startEndFlag, clockwise)\n        ].join('');\n      }\n\n      return [\n        'M',\n        cv.ui.structure.pure.Roundbar.coord(startInner),\n        startArrowPointAngle === startAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(startOuter)\n          : arc(startInner, startMiddle, rIM, startMiddleFlag, 1 - startMiddleDir) +\n            arc(startMiddle, startOuter, rMO, startMiddleFlag, startMiddleDir),\n        arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n        arc(centerOuter, endOuter, rO, startEndFlag, clockwise),\n        endArrowPointAngle === endAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(endInner)\n          : arc(endOuter, endMiddle, rMO, endMiddleFlag, 1 - endMiddleDir) +\n            arc(endMiddle, endInner, rIM, endMiddleFlag, endMiddleDir),\n        arc(startInner, centerInner, rI, startEndFlag, 1 - clockwise),\n        arc(centerInner, startInner, rI, startEndFlag, 1 - clockwise),\n        'Z'\n      ].join('');\n    },\n    /**\n     * Create the SVG path for an pointer.\n     * @param angle {Float}\n     * @param p {Object} Indicator object\n     */\n    createPointerPath(angle, p) {\n      const s = Math.sin(angle);\n      const c = Math.cos(angle);\n      const wx = c * p.width;\n      const wy = s * p.width;\n\n      if (p.thickness > 0) {\n        const tx = (-s * p.thickness) / 2;\n        const ty = (c * p.thickness) / 2;\n        return [\n          'M',\n          this.coord({\n            x: c * p.radius + wx - tx,\n            y: -(s * p.radius + wy - ty)\n          }),\n\n          'L',\n          this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n          'L',\n          this.coord({\n            x: c * p.radius + wx + tx,\n            y: -(s * p.radius + wy + ty)\n          })\n        ].join('');\n      }\n      return [\n        'M',\n        this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n        'L',\n        this.coord({ x: c * p.radius + wx, y: -(s * p.radius + wy) })\n      ].join('');\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    type: { check: 'Array' },\n    indicators: { check: 'Array' },\n\n    min: { check: 'Number' },\n    max: { check: 'Number' },\n    axisradius: { check: 'Number' },\n    axiswidth: { check: 'Number' },\n    axiscolor: { check: 'String' },\n    ranges: { check: 'Array' },\n    minorradius: { check: 'Number' },\n    minorwidth: { check: 'Number' },\n    minorspacing: { check: 'String' },\n    minorcolor: { check: 'String' },\n    majorradius: { check: 'Number' },\n    majorwidth: { check: 'Number' },\n    majorposition: { check: 'String' },\n    majorcolor: { check: 'String' },\n    labels: { check: 'Array' },\n    labelstyle: { check: 'String' },\n    start: { check: 'Number' },\n    end: { check: 'Number' },\n    arrowtype: { check: 'Number' },\n    spacing: { check: 'Number' },\n    overflowarrow: { check: 'Boolean' },\n    fontsize: { check: 'Number' },\n    textx: { check: 'Number' },\n    texty: { check: 'Number' },\n    textlength: { check: 'Number' },\n    textanchor: { check: 'String' },\n    linespace: { check: 'Number' },\n    bboxgrow: { check: 'Object' },\n    debug: { check: 'Boolean' },\n    currentRatioValue: { check: 'Array', init: [] },\n    targetRatioValue: { check: 'Array', init: [] }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __animator: undefined,\n    __indicatorDOMElement: null,\n    __postponedUpdates: undefined,\n\n    // overridden\n    _getInnerDomString() {\n      /**\n       * Grow the bounding box to also contain the parameters x and y\n       * @param bbox {Object} The initial bounding box\n       * @param x {Float}\n       * @param y {Float}\n       * @returns {Object} The enlarged bounding box\n       */\n      function bboxAdd(bbox, x, y) {\n        if (bbox.u > y) {\n          bbox.u = y;\n        }\n        if (bbox.d < y) {\n          bbox.d = y;\n        }\n        if (bbox.l > x) {\n          bbox.l = x;\n        }\n        if (bbox.r < x) {\n          bbox.r = x;\n        }\n        return bbox;\n      }\n\n      this.setCurrentRatioValue(Array(this.getIndicators().length).fill(0));\n      this.setTargetRatioValue(Array(this.getIndicators().length).fill([0, false, false]));\n\n      const self = this;\n      const s = this.getStart();\n      const e = this.getEnd();\n      const min = this.getMin();\n      const max = this.getMax();\n      let cntValues = 0;\n      let svgMajor = '';\n      let svgMinor = '';\n      let svgLabels = '';\n      let svgRanges = '';\n      let svgIndicators = '';\n      let svgText = '';\n      const createBarPath = cv.ui.structure.pure.Roundbar.createBarPath;\n\n      // Determine the bounding box, first get the biggest radius that must fit\n      let rMax = this.getAxisradius() + this.getAxiswidth();\n      let sMax = 0;\n      let eMax = 0;\n      this.getIndicators().forEach(function (indicator) {\n        rMax = Math.max(rMax, indicator.radius, indicator.radius + indicator.width);\n\n        sMax = Math.max(sMax, indicator.startarrow);\n        eMax = Math.max(eMax, indicator.endarrow);\n      });\n      let BBox = createBarPath(s, sMax, e, eMax, rMax, 0, true);\n\n      if (this.getMinorwidth() > 0) {\n        let spacing = parseFloat(this.getMinorspacing());\n        let rIn = this.getMinorradius();\n        let rOut = this.getMinorwidth() + rIn;\n\n        if (/^[0-9]+%/.test(this.getMinorspacing())) {\n          // special case: percentage\n          spacing = ((max - min) * spacing) / 100;\n        }\n\n        svgMinor += '<path class=\"minor\" d=\"';\n        for (\n          var angle = s, delta = ((e - s) * spacing) / (max - min), cnt = (max - min) / spacing;\n          cnt >= 0;\n          angle += delta, cnt--\n        ) {\n          var sin = Math.sin(angle);\n          var cos = Math.cos(angle);\n          svgMinor += [\n            'M',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rIn,\n              y: -sin * rIn\n            }),\n\n            'L',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rOut,\n              y: -sin * rOut\n            })\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n          BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n        }\n        if (this.getMinorcolor() !== '') {\n          svgMinor += '\" style=\"stroke:' + this.getMinorcolor();\n        }\n        svgMinor += '\" />';\n      }\n\n      if (this.getMajorwidth() > 0) {\n        let rIn = this.getMajorradius();\n        let rOut = this.getMajorwidth() + rIn;\n\n        svgMajor += '<path class=\"major\" d=\"';\n\n        this.getMajorposition()\n          .split(';')\n          .forEach(function (position) {\n            switch (position) {\n              case 'min':\n                position = min;\n                break;\n\n              case 'max':\n                position = max;\n                break;\n            }\n\n            const angle = s + ((e - s) * (position - min)) / (max - min);\n            const sin = Math.sin(angle);\n            const cos = Math.cos(angle);\n            svgMajor += [\n              'M',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rIn,\n                y: -sin * rIn\n              }),\n\n              'L',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rOut,\n                y: -sin * rOut\n              })\n            ].join('');\n\n            BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n            BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n          });\n        if (this.getMajorcolor() !== '') {\n          svgMajor += '\" style=\"stroke:' + this.getMajorcolor();\n        }\n        svgMajor += '\" />';\n      }\n\n      const labelstyle = this.getLabelstyle();\n      this.getLabels().forEach(function (label, labelnumber) {\n        const angle = s + ((e - s) * (label.value - min)) / (max - min);\n        const x = label.radius * Math.cos(angle);\n        const y = label.radius * -Math.sin(angle);\n        let alignmentBaseline = '';\n        let textAnchor = '';\n        let textAngle = 0;\n\n        if (label.orientation < 3) {\n          svgLabels += '<text class=\"axislabel\" x=\"' + x + '\" y=\"' + y + '\"';\n          switch (label.orientation) {\n            default:\n            case 0: // horizontal\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              if (Math.abs(x) < 1) {\n                textAnchor = 'middle';\n              }\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n              }\n              if (Math.abs(y) < 1) {\n                alignmentBaseline = 'middle';\n              }\n              break;\n\n            case 1: {\n              // parallel\n              let textAngle = (-angle * 180) / Math.PI + 90;\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n\n                textAngle += 180;\n              }\n              textAnchor = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n            }\n\n            case 2: // perpendicular\n              textAngle = (-angle * 180) / Math.PI;\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n                textAngle += 180;\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              alignmentBaseline = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n          }\n\n          svgLabels += ' dominant-baseline=\"' + alignmentBaseline + '\"';\n          svgLabels += ' text-anchor=\"' + textAnchor + '\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '>' + label.name + '</text>';\n        } else {\n          // label.orientation >= 3 -> round\n          const labelid = self.$$user_path + '_label' + labelnumber;\n          const cw = s < e ? 0 : 1;\n          let path = '';\n          let align = '';\n\n          switch (label.orientation) {\n            case 3: // roundstart\n              path = [ 'M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y,\n                'A', label.radius, label.radius, 0, 0, cw, x, y ].join(' ');\n              break;\n\n            case 4: // roundmiddle\n              path = [ 'M', -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y,\n                'A', label.radius, label.radius, 0, 0, cw, -x, -y ].join(' ');\n              align = ' startOffset=\"50%\" text-anchor=\"middle\"';\n              break;\n\n            case 5: // roundend\n              path = [ 'M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y,\n                'A', label.radius, label.radius, 0, 0, cw, x, y ].join(' ');\n              align = ' startOffset=\"100%\" text-anchor=\"end\"';\n              break;\n          }\n\n          svgLabels += '<path style=\"stroke:none; fill:none; stroke-width:0\" id=\"' + labelid + '\" d=\"' + path + '\"/>';\n          svgLabels += '<text class=\"axislabel\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '><textPath href=\"#' + labelid + '\"' + align + '>' + label.name + '</textPath></text>';\n        }\n      });\n\n      this.getRanges().forEach(function (range) {\n        const sRange = ((e - s) * (range.start - min)) / (max - min) + s;\n        const eRange = ((e - s) * (range.end - min)) / (max - min) + s;\n        const rRange = range.radius || self.getAxisradius();\n        const wRange = range.width || self.getAxiswidth();\n        const thisBBox = createBarPath(sRange, 0, eRange, 0, rRange, wRange, true);\n\n        svgRanges += '<path class=\"range\" d=\"';\n        svgRanges += createBarPath(sRange, 0, eRange, 0, rRange, wRange);\n        if (range.style) {\n          svgRanges += '\" style=\"' + range.style;\n        }\n        svgRanges += '\" />';\n\n        BBox = bboxAdd(BBox, thisBBox.l, thisBBox.u);\n        BBox = bboxAdd(BBox, thisBBox.r, thisBBox.d);\n      });\n\n      this.__animator = [];\n      this.getIndicators().forEach(function (indicator, number) {\n        self.__animator.push(new cv.util.LimitedRateUpdateAnimator(self.__updateIndicatorPosition, self, number));\n\n        svgIndicators += '<path class=\"indicator\" style=\"' + indicator.style + '\" />';\n\n        if (indicator.showValue) {\n          cntValues++;\n        }\n      });\n\n      if (cntValues > 0) {\n        svgText +=\n          '<text class=\"value\" y=\"' +\n          this.getTexty() +\n          '\"' +\n          ' text-anchor=\"' +\n          this.getTextanchor() +\n          '\"' +\n          ' font-size=\"' +\n          this.getFontsize() +\n          '\">' +\n          '<tspan x=\"' +\n          this.getTextx() +\n          '\" dy=\"0\">-</tspan>' +\n          ('<tspan x=\"' + this.getTextx() + '\" dy=\"' + this.getLinespace() + '\">-</tspan>').repeat(cntValues - 1) +\n          '</text>';\n\n        const textDistribution = {\n          start: [0, 1],\n          middle: [0.5, 0.5],\n          end: [1, 0]\n        }[this.getTextanchor()] || [0, 1];\n        const textU = Math.min(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        const textD = Math.max(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        BBox = bboxAdd(BBox, this.getTextx() - textDistribution[0] * this.getTextlength(), this.getTexty() + textU);\n\n        BBox = bboxAdd(BBox, this.getTextx() + textDistribution[1] * this.getTextlength(), this.getTexty() + textD);\n      }\n\n      let html =\n        '<div class=\"actor\">' +\n        '<svg width=\"100%\" height=\"100%\" viewBox=\"' +\n        [\n          BBox.l - this.getBboxgrow().l,\n          BBox.u - this.getBboxgrow().u,\n          BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r,\n          BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d\n        ].join(' ') +\n        '\">';\n      if (this.getDebug()) {\n        html +=\n          '<rect width=\"' +\n          (BBox.r - BBox.l) +\n          '\" height=\"' +\n          (BBox.d - BBox.u) +\n          '\" x=\"' +\n          BBox.l +\n          '\" y=\"' +\n          BBox.u +\n          '\" stroke=\"blue\" fill=\"none\" />' +\n          '<rect width=\"' +\n          (BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r) +\n          '\" height=\"' +\n          (BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d) +\n          '\" x=\"' +\n          (BBox.l - this.getBboxgrow().l) +\n          '\" y=\"' +\n          (BBox.u - this.getBboxgrow().u) +\n          '\" stroke=\"green\" fill=\"none\" />' +\n          '<circle cx=\"0\" cy=\"0\" r=\"3\" fill=\"red\" />';\n      }\n\n      if (this.getAxisradius() > 0) {\n        const sectorPath = createBarPath(s, 0, e, 0, this.getAxisradius(), 0);\n        const axisPath = createBarPath(s, 0, e, 0, this.getAxisradius(), this.getAxiswidth());\n\n        const stroke = this.getAxiscolor() === '' ? undefined : this.getAxiscolor();\n        const fill = this.getAxiswidth() < 1 ? 'none' : stroke;\n        html +=\n          '<path class=\"sector\" d=\"' +\n          sectorPath +\n          ' L0 0Z\"/>' +\n          '<path class=\"axis\" d=\"' +\n          axisPath +\n          '\" style=\"' +\n          (stroke ? 'stroke:' + stroke : '') +\n          (fill ? ';fill:' + fill : '') +\n          '\"/>';\n      }\n\n      html += svgMinor + svgMajor + svgRanges + svgLabels + svgIndicators + svgText;\n      html += '</svg></div>';\n\n      return html;\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n      if (this.__postponedUpdates !== undefined) {\n        this.__postponedUpdates.forEach(({address, data}) => {\n          this._update(address, data);\n        });\n        this.__postponedUpdates = undefined;\n      }\n    },\n\n    /**\n     * Updates the roundbar widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {*} incoming data\n     */\n    _update(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const self = this;\n      const domElement = this.getDomElement();\n      // only continue when the animators are already available, i.e. the\n      // DOM is set up - otherwise just store it for later\n      if (this.__animator === undefined || !domElement) {\n        if (this.__postponedUpdates === undefined) {\n          this.__postponedUpdates = [];\n        }\n        this.__postponedUpdates.push({address, data});\n        return;\n      }\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n      const target = this.getTargetRatioValue();\n      const tspan = Array.from(domElement.getElementsByTagName('tspan'));\n\n      const valueFormat = this.applyFormat(address, value);\n\n      this.getIndicators().forEach(function (indicator, i) {\n        if (address === indicator.address) {\n          target[i] = [\n            (Math.min(Math.max(value, indicator.min), indicator.max) - indicator.min) / (indicator.max - indicator.min),\n            value < indicator.min,\n            value > indicator.max\n          ];\n\n          if (tspan[i] !== undefined) {\n            tspan[i].textContent = valueFormat;\n          }\n          self.__animator[i].setTo(target[i][0], !self.isVisible());\n        }\n      });\n\n      this.setTargetRatioValue(target);\n    },\n\n    /**\n     * Callback to update the display of the indicators.\n     *\n     * Note: It is a design decision not to pool multiple updates in one requestAnimationFrame which might be beneficial\n     * performance wise. But as it's assumed that a typical visu config is only containing one roundbar per address\n     * a pooling wouldn't make a difference on the one hand but complicate the code on the other hand.\n     * Even with a few roundbars using the same address the performance impact is negligible.\n     * @param ratio\n     * @param indicatorNumber\n     */\n    __updateIndicatorPosition(ratio, indicatorNumber) {\n      if (this.__indicatorDOMElement.length === 0) {\n        // cache\n        this.__indicatorDOMElement = Array.from(this.getDomElement().getElementsByClassName('indicator'));\n      }\n\n      const indicator = this.getIndicators()[indicatorNumber];\n      const target = this.getTargetRatioValue()[indicatorNumber];\n      const startAngle = this.getStart();\n      const endAngle = this.getEnd();\n      let targetAngle = startAngle + ratio * (endAngle - startAngle);\n      const overflowarrow = this.getOverflowarrow();\n\n      if (!overflowarrow) {\n        targetAngle =\n          endAngle > startAngle\n            ? Math.max(startAngle, targetAngle - indicator.endarrow)\n            : Math.min(startAngle, targetAngle - indicator.endarrow);\n      }\n      if (indicator.isBar) {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createBarPath(\n            startAngle,\n            overflowarrow && !(target[1] && ratio < 0.01) ? 0 : indicator.startarrow,\n            targetAngle,\n            overflowarrow && !(target[2] && ratio > 0.99) ? 0 : indicator.endarrow,\n            indicator.radius,\n            indicator.width\n          )\n        );\n      } else {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createPointerPath(targetAngle, indicator)\n        );\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}