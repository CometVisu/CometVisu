{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "construct",
    "props",
    "__indicatorDOMElement",
    "statics",
    "coord",
    "position",
    "x",
    "toFixed",
    "y",
    "createBarPath",
    "startAngle",
    "startArrowPoint",
    "endAngle",
    "endArrowPoint",
    "radius",
    "width",
    "getBBox",
    "startArrowPointAngle",
    "endArrowPointAngle",
    "clockwise",
    "rI",
    "rIM",
    "rM",
    "rMO",
    "rO",
    "startInner",
    "Math",
    "cos",
    "sin",
    "startMiddle",
    "startOuter",
    "centerInner",
    "centerOuter",
    "endInner",
    "endMiddle",
    "endOuter",
    "startMiddleFlag",
    "abs",
    "PI",
    "startEndFlag",
    "endMiddleFlag",
    "startMiddleDir",
    "endMiddleDir",
    "arc",
    "start",
    "end",
    "r",
    "flag",
    "cw",
    "Roundbar",
    "join",
    "rMax",
    "max",
    "isInside",
    "a",
    "rMiddle",
    "uMiddle",
    "lMiddle",
    "dMiddle",
    "u",
    "min",
    "d",
    "l",
    "createPointerPath",
    "angle",
    "p",
    "s",
    "c",
    "wx",
    "wy",
    "thickness",
    "tx",
    "ty",
    "properties",
    "type",
    "check",
    "indicators",
    "axisradius",
    "axiswidth",
    "axiscolor",
    "ranges",
    "minorradius",
    "minorwidth",
    "minorspacing",
    "minorcolor",
    "majorradius",
    "majorwidth",
    "majorposition",
    "majorcolor",
    "labels",
    "labelstyle",
    "arrowtype",
    "spacing",
    "overflowarrow",
    "fontsize",
    "textx",
    "texty",
    "textlength",
    "textanchor",
    "linespace",
    "bboxgrow",
    "debug",
    "currentRatioValue",
    "init",
    "targetRatioValue",
    "members",
    "__animator",
    "undefined",
    "_getInnerDomString",
    "bboxAdd",
    "bbox",
    "setCurrentRatioValue",
    "Array",
    "getIndicators",
    "length",
    "fill",
    "setTargetRatioValue",
    "self",
    "getStart",
    "e",
    "getEnd",
    "getMin",
    "getMax",
    "cntValues",
    "svgMajor",
    "svgMinor",
    "svgLabels",
    "svgRanges",
    "svgIndicators",
    "svgText",
    "getAxisradius",
    "getAxiswidth",
    "sMax",
    "eMax",
    "forEach",
    "indicator",
    "startarrow",
    "endarrow",
    "BBox",
    "getMinorwidth",
    "parseFloat",
    "getMinorspacing",
    "rIn",
    "getMinorradius",
    "rOut",
    "test",
    "delta",
    "cnt",
    "getMinorcolor",
    "getMajorwidth",
    "getMajorradius",
    "getMajorposition",
    "split",
    "getMajorcolor",
    "getLabelstyle",
    "getLabels",
    "label",
    "labelnumber",
    "value",
    "alignmentBaseline",
    "textAnchor",
    "textAngle",
    "orientation",
    "name",
    "labelid",
    "$$user_path",
    "path",
    "align",
    "getRanges",
    "range",
    "sRange",
    "eRange",
    "rRange",
    "wRange",
    "thisBBox",
    "style",
    "number",
    "push",
    "util",
    "LimitedRateUpdateAnimator",
    "__updateIndicatorPosition",
    "showValue",
    "getTexty",
    "getTextanchor",
    "getFontsize",
    "getTextx",
    "getLinespace",
    "repeat",
    "textDistribution",
    "middle",
    "textU",
    "textD",
    "getTextlength",
    "html",
    "getBboxgrow",
    "getDebug",
    "sectorPath",
    "axisPath",
    "stroke",
    "getAxiscolor",
    "_update",
    "address",
    "data",
    "Transform",
    "decode",
    "getAddress",
    "target",
    "getTargetRatioValue",
    "tspan",
    "from",
    "getDomElement",
    "getElementsByTagName",
    "valueFormat",
    "applyFormat",
    "i",
    "textContent",
    "setTo",
    "isVisible",
    "ratio",
    "indicatorNumber",
    "getElementsByClassName",
    "targetAngle",
    "getOverflowarrow",
    "isBar",
    "setAttribute"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Roundbar.js"
  ],
  "sourcesContent": [
    "/* Roundbar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a display to the visu that can represent values from the BUS\n * and shows them with a round bar.\n *\n * @widgetexample <settings>\n *    <caption>Example roundbar widget</caption>\n *    <screenshot name=\"roundbar_simple\">\n *      <data address=\"3/3/1\">63.3</data>\n *    </screenshot>\n *  </settings>\n *  <roundbar>\n *      <address transform=\"DPT:9.001\" mode=\"read\">3/3/1</address>\n *  </roundbar>\n *\n * @author Christian Mayer\n * @since 0.12.0 (2020)\n */\nqx.Class.define('cv.ui.structure.pure.Roundbar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    this.__indicatorDOMElement = [];\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    coord(position) {\n      return position.x.toFixed(1) + ' ' + position.y.toFixed(1);\n    },\n    /**\n     * Create the SVG path for the round bar.\n     * Angle = 0 === horizontal on the right\n     *\n     * @param startAngle {Float}\n     * @param startArrowPoint {Float}\n     * @param endAngle {Float}\n     * @param endArrowPoint {Float}\n     * @param radius {Float}\n     * @param width {Float}\n     * @param getBBox {Boolean} return the bounding box instead of the path itself\n     */\n    createBarPath(startAngle, startArrowPoint, endAngle, endArrowPoint, radius, width, getBBox = false) {\n      const startArrowPointAngle = startAngle + startArrowPoint;\n      const endArrowPointAngle = endAngle + endArrowPoint;\n\n      // The path to generate is using those positions:\n      // rO             -- outer --\n      // rMO        /// outermiddle \\\\\\\n      // rM      //       middle        \\\\\n      // rIM   /        innermiddle        \\\n      // rI   /         -- inner --         \\\n      //     |        /             \\        |\n      //     |_______|               |_______|\n      //       start      center        end\n      const clockwise = startAngle > endAngle ? 1 : 0;\n      const rI = radius;\n      const rIM = radius + (width * 1) / 4;\n      const rM = radius + (width * 2) / 4;\n      const rMO = radius + (width * 3) / 4;\n      const rO = radius + width;\n      const startInner = {\n        x: Math.cos(startAngle) * rI,\n        y: -Math.sin(startAngle) * rI\n      };\n\n      const startMiddle = {\n        x: Math.cos(startArrowPointAngle) * rM,\n        y: -Math.sin(startArrowPointAngle) * rM\n      };\n\n      const startOuter = {\n        x: Math.cos(startAngle) * rO,\n        y: -Math.sin(startAngle) * rO\n      };\n\n      const centerInner = {\n        x: Math.cos((startAngle + endAngle) / 2) * rI,\n        y: -Math.sin((startAngle + endAngle) / 2) * rI\n      };\n\n      const centerOuter = {\n        x: Math.cos((startAngle + endAngle) / 2) * rO,\n        y: -Math.sin((startAngle + endAngle) / 2) * rO\n      };\n\n      const endInner = {\n        x: Math.cos(endAngle) * rI,\n        y: -Math.sin(endAngle) * rI\n      };\n\n      const endMiddle = {\n        x: Math.cos(endArrowPointAngle) * rM,\n        y: -Math.sin(endArrowPointAngle) * rM\n      };\n\n      const endOuter = {\n        x: Math.cos(endAngle) * rO,\n        y: -Math.sin(endAngle) * rO\n      };\n\n      const startMiddleFlag = Math.abs(startAngle - startArrowPointAngle) > Math.PI ? 1 : 0;\n      const startEndFlag = Math.abs(startAngle - endAngle) / 2 > Math.PI ? 1 : 0;\n      const endMiddleFlag = Math.abs(endAngle - endArrowPointAngle) > Math.PI ? 1 : 0;\n      const startMiddleDir = startAngle < startArrowPointAngle ? 1 : 0;\n      const endMiddleDir = endAngle < endArrowPointAngle ? 1 : 0;\n\n      /**\n       * @param start\n       * @param end\n       * @param r\n       * @param flag\n       * @param cw\n       */\n      function arc(start, end, r, flag, cw) {\n        return start.x === end.x && start.y === end.y\n          ? ''\n          : Math.abs(start.x - end.x) + Math.abs(start.y - end.y) < 2\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(end)\n          : ['A', r, r, 0, flag, cw, cv.ui.structure.pure.Roundbar.coord(end)].join(' ');\n      }\n\n      if (getBBox) {\n        const rMax = Math.max(rI, rO);\n        const isInside = function (a) {\n          return (startAngle < a && a < endAngle) || (startAngle > a && a > endAngle);\n        };\n        const rMiddle = isInside((-Math.PI * 4) / 2) || isInside((Math.PI * 0) / 2) ? rMax : startInner.x;\n        const uMiddle = isInside((-Math.PI * 3) / 2) || isInside((Math.PI * 1) / 2) ? -rMax : startInner.y;\n        const lMiddle = isInside((-Math.PI * 2) / 2) || isInside((Math.PI * 2) / 2) ? -rMax : startInner.x;\n        const dMiddle = isInside((-Math.PI * 1) / 2) || isInside((Math.PI * 3) / 2) ? rMax : startInner.y;\n        return {\n          u: Math.min(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, uMiddle),\n\n          d: Math.max(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, dMiddle),\n\n          l: Math.min(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, lMiddle),\n\n          r: Math.max(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, rMiddle)\n        };\n      }\n\n      // a thin bar path should just be a single line\n      if (width < 1.0) {\n        return [\n          'M',\n          cv.ui.structure.pure.Roundbar.coord(startOuter),\n          arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n          arc(centerOuter, endOuter, rO, startEndFlag, clockwise)\n        ].join('');\n      }\n\n      return [\n        'M',\n        cv.ui.structure.pure.Roundbar.coord(startInner),\n        startArrowPointAngle === startAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(startOuter)\n          : arc(startInner, startMiddle, rIM, startMiddleFlag, 1 - startMiddleDir) +\n            arc(startMiddle, startOuter, rMO, startMiddleFlag, startMiddleDir),\n        arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n        arc(centerOuter, endOuter, rO, startEndFlag, clockwise),\n        endArrowPointAngle === endAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(endInner)\n          : arc(endOuter, endMiddle, rMO, endMiddleFlag, 1 - endMiddleDir) +\n            arc(endMiddle, endInner, rIM, endMiddleFlag, endMiddleDir),\n        arc(startInner, centerInner, rI, startEndFlag, 1 - clockwise),\n        arc(centerInner, startInner, rI, startEndFlag, 1 - clockwise),\n        'Z'\n      ].join('');\n    },\n    /**\n     * Create the SVG path for an pointer.\n     * @param angle {Float}\n     * @param p {Object} Indicator object\n     */\n    createPointerPath(angle, p) {\n      const s = Math.sin(angle);\n      const c = Math.cos(angle);\n      const wx = c * p.width;\n      const wy = s * p.width;\n\n      if (p.thickness > 0) {\n        const tx = (-s * p.thickness) / 2;\n        const ty = (c * p.thickness) / 2;\n        return [\n          'M',\n          this.coord({\n            x: c * p.radius + wx - tx,\n            y: -(s * p.radius + wy - ty)\n          }),\n\n          'L',\n          this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n          'L',\n          this.coord({\n            x: c * p.radius + wx + tx,\n            y: -(s * p.radius + wy + ty)\n          })\n        ].join('');\n      }\n      return [\n        'M',\n        this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n        'L',\n        this.coord({ x: c * p.radius + wx, y: -(s * p.radius + wy) })\n      ].join('');\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    type: { check: 'Array' },\n    indicators: { check: 'Array' },\n\n    min: { check: 'Number' },\n    max: { check: 'Number' },\n    axisradius: { check: 'Number' },\n    axiswidth: { check: 'Number' },\n    axiscolor: { check: 'String' },\n    ranges: { check: 'Array' },\n    minorradius: { check: 'Number' },\n    minorwidth: { check: 'Number' },\n    minorspacing: { check: 'String' },\n    minorcolor: { check: 'String' },\n    majorradius: { check: 'Number' },\n    majorwidth: { check: 'Number' },\n    majorposition: { check: 'String' },\n    majorcolor: { check: 'String' },\n    labels: { check: 'Array' },\n    labelstyle: { check: 'String' },\n    start: { check: 'Number' },\n    end: { check: 'Number' },\n    arrowtype: { check: 'Number' },\n    spacing: { check: 'Number' },\n    overflowarrow: { check: 'Boolean' },\n    fontsize: { check: 'Number' },\n    textx: { check: 'Number' },\n    texty: { check: 'Number' },\n    textlength: { check: 'Number' },\n    textanchor: { check: 'String' },\n    linespace: { check: 'Number' },\n    bboxgrow: { check: 'Object' },\n    debug: { check: 'Boolean' },\n    currentRatioValue: { check: 'Array', init: [] },\n    targetRatioValue: { check: 'Array', init: [] }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __animator: undefined,\n    __indicatorDOMElement: null,\n\n    // overridden\n    _getInnerDomString() {\n      /**\n       * Grow the bounding box to also contain the parameters x and y\n       * @param bbox {Object} The initial bounding box\n       * @param x {Float}\n       * @param y {Float}\n       * @returns {Object} The enlarged bounding box\n       */\n      function bboxAdd(bbox, x, y) {\n        if (bbox.u > y) {\n          bbox.u = y;\n        }\n        if (bbox.d < y) {\n          bbox.d = y;\n        }\n        if (bbox.l > x) {\n          bbox.l = x;\n        }\n        if (bbox.r < x) {\n          bbox.r = x;\n        }\n        return bbox;\n      }\n\n      this.setCurrentRatioValue(Array(this.getIndicators().length).fill(0));\n      this.setTargetRatioValue(Array(this.getIndicators().length).fill([0, false, false]));\n\n      const self = this;\n      const s = this.getStart();\n      const e = this.getEnd();\n      const min = this.getMin();\n      const max = this.getMax();\n      let cntValues = 0;\n      let svgMajor = '';\n      let svgMinor = '';\n      let svgLabels = '';\n      let svgRanges = '';\n      let svgIndicators = '';\n      let svgText = '';\n      const createBarPath = cv.ui.structure.pure.Roundbar.createBarPath;\n\n      // Determine the bounding box, first get the biggest radius that must fit\n      let rMax = this.getAxisradius() + this.getAxiswidth();\n      let sMax = 0;\n      let eMax = 0;\n      this.getIndicators().forEach(function (indicator) {\n        rMax = Math.max(rMax, indicator.radius, indicator.radius + indicator.width);\n\n        sMax = Math.max(sMax, indicator.startarrow);\n        eMax = Math.max(eMax, indicator.endarrow);\n      });\n      let BBox = createBarPath(s, sMax, e, eMax, rMax, 0, true);\n\n      if (this.getMinorwidth() > 0) {\n        let spacing = parseFloat(this.getMinorspacing());\n        let rIn = this.getMinorradius();\n        let rOut = this.getMinorwidth() + rIn;\n\n        if (/^[0-9]+%/.test(this.getMinorspacing())) {\n          // special case: percentage\n          spacing = ((max - min) * spacing) / 100;\n        }\n\n        svgMinor += '<path class=\"minor\" d=\"';\n        for (\n          var angle = s, delta = ((e - s) * spacing) / (max - min), cnt = (max - min) / spacing;\n          cnt >= 0;\n          angle += delta, cnt--\n        ) {\n          var sin = Math.sin(angle);\n          var cos = Math.cos(angle);\n          svgMinor += [\n            'M',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rIn,\n              y: -sin * rIn\n            }),\n\n            'L',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rOut,\n              y: -sin * rOut\n            })\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n          BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n        }\n        if (this.getMinorcolor() !== '') {\n          svgMinor += '\" style=\"stroke:' + this.getMinorcolor();\n        }\n        svgMinor += '\" />';\n      }\n\n      if (this.getMajorwidth() > 0) {\n        let rIn = this.getMajorradius();\n        let rOut = this.getMajorwidth() + rIn;\n\n        svgMajor += '<path class=\"major\" d=\"';\n\n        this.getMajorposition()\n          .split(';')\n          .forEach(function (position) {\n            switch (position) {\n              case 'min':\n                position = min;\n                break;\n\n              case 'max':\n                position = max;\n                break;\n            }\n\n            const angle = s + ((e - s) * (position - min)) / (max - min);\n            const sin = Math.sin(angle);\n            const cos = Math.cos(angle);\n            svgMajor += [\n              'M',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rIn,\n                y: -sin * rIn\n              }),\n\n              'L',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rOut,\n                y: -sin * rOut\n              })\n            ].join('');\n\n            BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n            BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n          });\n        if (this.getMajorcolor() !== '') {\n          svgMajor += '\" style=\"stroke:' + this.getMajorcolor();\n        }\n        svgMajor += '\" />';\n      }\n\n      const labelstyle = this.getLabelstyle();\n      this.getLabels().forEach(function (label, labelnumber) {\n        const angle = s + ((e - s) * (label.value - min)) / (max - min);\n        const x = label.radius * Math.cos(angle);\n        const y = label.radius * -Math.sin(angle);\n        let alignmentBaseline = '';\n        let textAnchor = '';\n        let textAngle = 0;\n\n        if (label.orientation < 3) {\n          svgLabels += '<text class=\"axislabel\" x=\"' + x + '\" y=\"' + y + '\"';\n          switch (label.orientation) {\n            default:\n            case 0: // horizontal\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              if (Math.abs(x) < 1) {\n                textAnchor = 'middle';\n              }\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n              }\n              if (Math.abs(y) < 1) {\n                alignmentBaseline = 'middle';\n              }\n              break;\n\n            case 1: {\n              // parallel\n              let textAngle = (-angle * 180) / Math.PI + 90;\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n\n                textAngle += 180;\n              }\n              textAnchor = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n            }\n\n            case 2: // perpendicular\n              textAngle = (-angle * 180) / Math.PI;\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n                textAngle += 180;\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              alignmentBaseline = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n          }\n\n          svgLabels += ' dominant-baseline=\"' + alignmentBaseline + '\"';\n          svgLabels += ' text-anchor=\"' + textAnchor + '\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '>' + label.name + '</text>';\n        } else {\n          // label.orientation >= 3 -> round\n          const labelid = self.$$user_path + '_label' + labelnumber;\n          const cw = s < e ? 0 : 1;\n          let path = '';\n          let align = '';\n\n          switch (label.orientation) {\n            case 3: // roundstart\n              path = [\n                'M',\n                x,\n                y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                -x,\n                -y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                x,\n                y\n              ].join(' ');\n              break;\n\n            case 4: // roundmiddle\n              path = [\n                'M',\n                -x,\n                -y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                x,\n                y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                -x,\n                -y\n              ].join(' ');\n              align = ' startOffset=\"50%\" text-anchor=\"middle\"';\n              break;\n\n            case 5: // roundend\n              path = [\n                'M',\n                x,\n                y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                -x,\n                -y,\n                'A',\n                label.radius,\n                label.radius,\n                0,\n                0,\n                cw,\n                x,\n                y\n              ].join(' ');\n              align = ' startOffset=\"100%\" text-anchor=\"end\"';\n              break;\n          }\n\n          svgLabels += '<path style=\"stroke:none; fill:none; stroke-width:0\" id=\"' + labelid + '\" d=\"' + path + '\"/>';\n          svgLabels += '<text class=\"axislabel\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '><textPath href=\"#' + labelid + '\"' + align + '>' + label.name + '</textPath></text>';\n        }\n      });\n\n      this.getRanges().forEach(function (range) {\n        const sRange = ((e - s) * (range.start - min)) / (max - min) + s;\n        const eRange = ((e - s) * (range.end - min)) / (max - min) + s;\n        const rRange = range.radius || self.getAxisradius();\n        const wRange = range.width || self.getAxiswidth();\n        const thisBBox = createBarPath(sRange, 0, eRange, 0, rRange, wRange, true);\n\n        svgRanges += '<path class=\"range\" d=\"';\n        svgRanges += createBarPath(sRange, 0, eRange, 0, rRange, wRange);\n        if (range.style) {\n          svgRanges += '\" style=\"' + range.style;\n        }\n        svgRanges += '\" />';\n\n        BBox = bboxAdd(BBox, thisBBox.l, thisBBox.u);\n        BBox = bboxAdd(BBox, thisBBox.r, thisBBox.d);\n      });\n\n      this.__animator = [];\n      this.getIndicators().forEach(function (indicator, number) {\n        self.__animator.push(new cv.util.LimitedRateUpdateAnimator(self.__updateIndicatorPosition, self, number));\n\n        svgIndicators += '<path class=\"indicator\" style=\"' + indicator.style + '\" />';\n\n        if (indicator.showValue) {\n          cntValues++;\n        }\n      });\n\n      if (cntValues > 0) {\n        svgText +=\n          '<text class=\"value\" y=\"' +\n          this.getTexty() +\n          '\"' +\n          ' text-anchor=\"' +\n          this.getTextanchor() +\n          '\"' +\n          ' font-size=\"' +\n          this.getFontsize() +\n          '\">' +\n          '<tspan x=\"' +\n          this.getTextx() +\n          '\" dy=\"0\">-</tspan>' +\n          ('<tspan x=\"' + this.getTextx() + '\" dy=\"' + this.getLinespace() + '\">-</tspan>').repeat(cntValues - 1) +\n          '</text>';\n\n        const textDistribution = {\n          start: [0, 1],\n          middle: [0.5, 0.5],\n          end: [1, 0]\n        }[this.getTextanchor()] || [0, 1];\n        const textU = Math.min(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        const textD = Math.max(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        BBox = bboxAdd(BBox, this.getTextx() - textDistribution[0] * this.getTextlength(), this.getTexty() + textU);\n\n        BBox = bboxAdd(BBox, this.getTextx() + textDistribution[1] * this.getTextlength(), this.getTexty() + textD);\n      }\n\n      let html =\n        '<div class=\"actor\">' +\n        '<svg width=\"100%\" height=\"100%\" viewBox=\"' +\n        [\n          BBox.l - this.getBboxgrow().l,\n          BBox.u - this.getBboxgrow().u,\n          BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r,\n          BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d\n        ].join(' ') +\n        '\">';\n      if (this.getDebug()) {\n        html +=\n          '<rect width=\"' +\n          (BBox.r - BBox.l) +\n          '\" height=\"' +\n          (BBox.d - BBox.u) +\n          '\" x=\"' +\n          BBox.l +\n          '\" y=\"' +\n          BBox.u +\n          '\" stroke=\"blue\" fill=\"none\" />' +\n          '<rect width=\"' +\n          (BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r) +\n          '\" height=\"' +\n          (BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d) +\n          '\" x=\"' +\n          (BBox.l - this.getBboxgrow().l) +\n          '\" y=\"' +\n          (BBox.u - this.getBboxgrow().u) +\n          '\" stroke=\"green\" fill=\"none\" />' +\n          '<circle cx=\"0\" cy=\"0\" r=\"3\" fill=\"red\" />';\n      }\n\n      if (this.getAxisradius() > 0) {\n        const sectorPath = createBarPath(s, 0, e, 0, this.getAxisradius(), 0);\n        const axisPath = createBarPath(s, 0, e, 0, this.getAxisradius(), this.getAxiswidth());\n\n        const stroke = this.getAxiscolor() === '' ? undefined : this.getAxiscolor();\n        const fill = this.getAxiswidth() < 1 ? 'none' : stroke;\n        html +=\n          '<path class=\"sector\" d=\"' +\n          sectorPath +\n          ' L0 0Z\"/>' +\n          '<path class=\"axis\" d=\"' +\n          axisPath +\n          '\" style=\"' +\n          (stroke ? 'stroke:' + stroke : '') +\n          (fill ? ';fill:' + fill : '') +\n          '\"/>';\n      }\n\n      html += svgMinor + svgMajor + svgRanges + svgLabels + svgIndicators + svgText;\n      html += '</svg></div>';\n\n      return html;\n    },\n\n    /**\n     * Updates the roundbar widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const self = this;\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n      const target = this.getTargetRatioValue();\n      const tspan = Array.from(this.getDomElement().getElementsByTagName('tspan'));\n\n      const valueFormat = this.applyFormat(address, value);\n\n      this.getIndicators().forEach(function (indicator, i) {\n        if (address === indicator.address) {\n          target[i] = [\n            (Math.min(Math.max(value, indicator.min), indicator.max) - indicator.min) / (indicator.max - indicator.min),\n            value < indicator.min,\n            value > indicator.max\n          ];\n\n          if (tspan[i] !== undefined) {\n            tspan[i].textContent = valueFormat;\n          }\n          self.__animator[i].setTo(target[i][0], !self.isVisible());\n        }\n      });\n\n      this.setTargetRatioValue(target);\n    },\n\n    /**\n     * Callback to update the display of the indicators.\n     *\n     * Note: It is a design decision not to pool multiple updates in one requestAnimationFrame which might be beneficial\n     * performance wise. But as it's assumed that a typical visu config is only containing one roundbar per address\n     * a pooling wouldn't make a difference on the one hand but complicate the code on the other hand.\n     * Even with a few roundbars using the same address the performance impact is negligible.\n     * @param ratio\n     * @param indicatorNumber\n     */\n    __updateIndicatorPosition(ratio, indicatorNumber) {\n      if (this.__indicatorDOMElement.length === 0) {\n        // cache\n        this.__indicatorDOMElement = Array.from(this.getDomElement().getElementsByClassName('indicator'));\n      }\n\n      const indicator = this.getIndicators()[indicatorNumber];\n      const target = this.getTargetRatioValue()[indicatorNumber];\n      const startAngle = this.getStart();\n      const endAngle = this.getEnd();\n      let targetAngle = startAngle + ratio * (endAngle - startAngle);\n      const overflowarrow = this.getOverflowarrow();\n\n      if (!overflowarrow) {\n        targetAngle =\n          endAngle > startAngle\n            ? Math.max(startAngle, targetAngle - indicator.endarrow)\n            : Math.min(startAngle, targetAngle - indicator.endarrow);\n      }\n      if (indicator.isBar) {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createBarPath(\n            startAngle,\n            overflowarrow && !(target[1] && ratio < 0.01) ? 0 : indicator.startarrow,\n            targetAngle,\n            overflowarrow && !(target[2] && ratio > 0.99) ? 0 : indicator.endarrow,\n            indicator.radius,\n            indicator.width\n          )\n        );\n      } else {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createPointerPath(targetAngle, indicator)\n        );\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}