{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Operate",
    "Update",
    "statics",
    "coord2sv",
    "x",
    "y",
    "hue",
    "radius",
    "hue2angle",
    "Math",
    "PI",
    "Sx",
    "sin",
    "Sy",
    "cos",
    "Wx",
    "Wy",
    "Bx",
    "By",
    "WBx",
    "WBy",
    "SBx",
    "SBy",
    "CBx",
    "CBy",
    "uv",
    "util",
    "Color",
    "solve2d",
    "u",
    "min",
    "max",
    "v",
    "value",
    "saturation",
    "abs",
    "construct",
    "props",
    "base",
    "getBaseColors",
    "__color",
    "r",
    "g",
    "b",
    "w",
    "__animator",
    "LimitedRateUpdateAnimator",
    "__updateHandlePosition",
    "setAnimationSpeed",
    "layout",
    "__pageSizeListener",
    "ResizeHandler",
    "states",
    "addListener",
    "invalidateScreensize",
    "__components",
    "Set",
    "Object",
    "entries",
    "getAddress",
    "map",
    "variantInfo",
    "__lastBusValue",
    "destruct",
    "removeListenerById",
    "__button",
    "properties",
    "controls",
    "check",
    "baseColors",
    "sendOnFinish",
    "init",
    "throttleInterval",
    "events",
    "colorChanged",
    "members",
    "__mode",
    "__colorOld",
    "undefined",
    "__colorCurrent",
    "__range",
    "__actors",
    "__inDrag",
    "__coordMin",
    "__Tmin",
    "__Tmax",
    "getColor",
    "_getInnerDomString",
    "placeholder",
    "getFormat",
    "self",
    "retval",
    "historicWidth",
    "getLayout",
    "colspan",
    "getControls",
    "split",
    "forEach",
    "control",
    "hue_type",
    "parts",
    "temperatures",
    "rgbTmin",
    "xy2sRGB",
    "temperature2xy",
    "rgbTmax",
    "disp",
    "c",
    "round",
    "join",
    "colors",
    "_onDomReady",
    "__throttled",
    "Function",
    "throttle",
    "__onChangeValue",
    "getThrottleInterval",
    "trailing",
    "getDomElement",
    "querySelectorAll",
    "actor",
    "addEventListener",
    "_update",
    "address",
    "data",
    "addressObj",
    "showInvalidDataErrorMessage",
    "message",
    "locale",
    "Manager",
    "tr",
    "transform",
    "selector",
    "variant",
    "Config",
    "testMode",
    "console",
    "error",
    "toString",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "variantType",
    "Transform",
    "decode",
    "Number",
    "isFinite",
    "get",
    "h",
    "s",
    "invCurve",
    "curve",
    "scale",
    "Map",
    "Y",
    "notKnown",
    "__setSliderTo",
    "isVisible",
    "instant",
    "copy",
    "__changeColor",
    "delta",
    "setTo",
    "newColor",
    "actors",
    "actorStyle",
    "type",
    "className",
    "replace",
    "window",
    "getComputedStyle",
    "sv_element",
    "querySelector",
    "inner",
    "handle",
    "handle_hue",
    "isLCh",
    "classList",
    "contains",
    "handle_hueTop",
    "parseFloat",
    "getPropertyValue",
    "handle_hueWidth",
    "width",
    "height",
    "innerRadius",
    "outerRadius",
    "button",
    "range",
    "buttonWidth",
    "style",
    "marginLeft",
    "borderRadius",
    "Bt",
    "St",
    "Wt",
    "Bl",
    "Sl",
    "Wl",
    "angle",
    "LCh",
    "getComponent",
    "WSt",
    "C",
    "WSl",
    "top",
    "L",
    "left",
    "background",
    "hsv",
    "transformOrigin",
    "ratioComponent",
    "length",
    "clipPath",
    "handleEvent",
    "event",
    "relCoordX",
    "relCoordY",
    "actorType",
    "currentTarget",
    "boundingRect",
    "getBoundingClientRect",
    "computedStyle",
    "__coordMinX",
    "paddingLeft",
    "__coordMinY",
    "clientX",
    "clientY",
    "sv",
    "ColorChooser",
    "distSqrd",
    "clearlyOnWheel",
    "closeToInerior",
    "closeToTriangleCorners",
    "atan2",
    "boxSize",
    "ratio",
    "document",
    "buttons",
    "removeEventListener",
    "getSendOnFinish",
    "call",
    "component",
    "changeComponent",
    "fireEvent",
    "includes",
    "typeCategory",
    "sendToBackend",
    "t",
    "defer",
    "WidgetFactory",
    "registerClass"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/ColorChooser.js"
  ],
  "sourcesContent": [
    "/* ColorChooser.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The ColorChooser let you select and display a color, e.g. for lighting effects.\n * It supports a RGB light source with red, green and blue light components as well\n * as a RGBW light source that also has a white channel.\n *\n * @widgetexample\n * <settings>\n *      <screenshot name=\"colorchooser_example\">\n *          <caption>ColorChooser, simple example</caption>\n *      </screenshot>\n * </settings>\n * <colorchooser>\n *   <layout colspan=\"6\" rowspan=\"4\"/>\n *   <label>RGB kitchen</label>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"r\">1/2/59</address>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"g\">1/2/60</address>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"b\">1/2/61</address>\n * </colorchooser>\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.ColorChooser', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Calculate the saturation and value from (x,y) relative widget coordinates\n     * based on a centered SV-triangle.\n     * @param x position for the calculation\n     * @param y position for the calculation\n     * @param hue value for the orientation of the triangle\n     * @param radius (outside) radius of the triangle\n     */\n    coord2sv(x, y, hue, radius) {\n      const hue2angle = 2 * Math.PI;\n      // coordinates of the triangle corners\n      const Sx = 0.5 - Math.sin(hue2angle * -hue) * radius; // 100% saturation\n      const Sy = 0.5 - Math.cos(hue2angle * -hue) * radius;\n      const Wx = 0.5 - Math.sin(hue2angle * (2 / 3 - hue)) * radius; // 100% white\n      const Wy = 0.5 - Math.cos(hue2angle * (2 / 3 - hue)) * radius;\n      const Bx = 0.5 - Math.sin(hue2angle * (1 / 3 - hue)) * radius; // 100% black\n      const By = 0.5 - Math.cos(hue2angle * (1 / 3 - hue)) * radius;\n      // differences to determine (u,v) coordinates of (x,y)\n      const WBx = Wx - Bx;\n      const WBy = Wy - By;\n      const SBx = Sx - Bx;\n      const SBy = Sy - By;\n      const CBx = x - Bx;\n      const CBy = y - By;\n      const uv = cv.util.Color.solve2d(WBx, WBy, SBx, SBy, CBx, CBy);\n      const u = Math.min(Math.max(0, uv[0]), 1);\n      const v = Math.min(Math.max(0, uv[1]), 1);\n      // convert (u,v) to S and V\n      const value = u + v;\n      const saturation = Math.abs(value) < 1e-3 ? 0 : v / value;\n      return [saturation, value];\n    }\n  },\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(props) {\n    super(props);\n\n    const base = this.getBaseColors();\n    this.__color = new cv.util.Color(base.r, base.g, base.b, base.w);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n\n    this.__animator.setAnimationSpeed(100, 0.5);\n    if (cv.ui.structure.pure.layout) {\n      this.__pageSizeListener = cv.ui.structure.pure.layout.ResizeHandler.states.addListener(\n        'changePageSizeInvalid',\n        () => {\n          this.invalidateScreensize();\n        }\n      );\n    }\n\n    this.__components = new Set(Object.entries(this.getAddress()).map(v => v[1].variantInfo));\n\n    this.__lastBusValue = {};\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    cv.ui.structure.pure.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    controls: {\n      check: 'String'\n    },\n\n    baseColors: {\n      check: 'Object'\n    },\n\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    colorChanged: 'qx.event.type.Event'\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __mode: '',\n    __colorOld: undefined, // the color where the animation started\n    __colorCurrent: undefined, // the current color of the running animation\n    __color: undefined, // the current color of the widget, also the target for the animation\n    __lastBusValue: undefined, // initialize with empty object in the constructor to prevent object being shared between instances\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined, // cache for DOM element\n    __actors: undefined,\n    __pageSizeListener: undefined,\n    __components: undefined, // set of all color components required to send\n    __inDrag: false, // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n    __Tmin: 2000, // minimal color temperature to show in slider\n    __Tmax: 12500, // maximal color temperature to show in slider\n\n    getColor() {\n      return this.__color;\n    },\n\n    // overridden\n    _getInnerDomString() {\n      const placeholder = this.getFormat() === '' ? '' : '-';\n      const self = this;\n      let retval = '';\n      const historicWidth = this.getLayout().colspan === undefined ? ' style=\"width:195px\"' : '';\n      let controls = this.getControls().split(';');\n      if (controls[0] === '') {\n        controls[0] = 'box';\n      }\n      controls.forEach(function (control) {\n        switch (control) {\n          case 'box':\n          case 'LCh-box': {\n            let hue_type = control === 'box' ? 'hsv_hue' : 'lch_hue';\n            retval += '<div class=\"actor cc_box\"><div class=\"hue ' + hue_type;\n            retval +=\n              '\"></div><div class=\"handle_hue\"></div><div class=\"sv_box\"><div class=\"inner\"></div><div class=\"handle\"></div></div></div>';\n            break;\n          }\n\n          case 'triangle':\n          case 'LCh-triangle': {\n            let hue_type = control === 'triangle' ? 'hsv_hue' : 'lch_hue';\n            retval += '<div class=\"actor cc_wheel\"><div class=\"hue ' + hue_type;\n            retval +=\n              '\"></div><div class=\"sv_triangle\"><div class=\"inner\"></div><div class=\"handle_hue\"></div><div class=\"handle\"></div></div></div>';\n            break;\n          }\n\n          case 'RGB-r':\n          case 'RGB-g':\n          case 'RGB-b':\n          case 'RGBW-r':\n          case 'RGBW-g':\n          case 'RGBW-b':\n          case 'RGBW-w':\n          case 'h':\n          case 's':\n          case 'v':\n          case 'LCh-L':\n          case 'LCh-C':\n          case 'LCh-h':\n          case 'Y':\n            retval +=\n              '<div class=\"actor cc_' +\n              control +\n              ` ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n              <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">` +\n              placeholder +\n              `</button>\n              <div class=\"ui-slider-range\" style=\"margin-left: 0px; clip-path: inset(0 100% 0 0);\"></div>\n            </div>`;\n            break;\n\n          default: {\n            let parts = control.split(':');\n            if (parts[0] === 'T') {\n              const temperatures = (parts[1] || '-').split('-');\n              self.__Tmin = Math.max(1667, Math.min(temperatures[0] || 2500, 25000));\n\n              self.__Tmax = Math.max(1667, Math.min(temperatures[1] || 9000, 25000));\n\n              const rgbTmin = cv.util.Color.xy2sRGB(cv.util.Color.temperature2xy(self.__Tmin));\n\n              const rgbTmax = cv.util.Color.xy2sRGB(cv.util.Color.temperature2xy(self.__Tmax));\n\n              const disp = c => [Math.round(255 * c.r), Math.round(255 * c.g), Math.round(255 * c.b)].join(',');\n              const colors = 'rgb(' + disp(rgbTmin) + '), rgb(' + disp(rgbTmax) + ')';\n\n              retval +=\n                `<div class=\"actor cc_T ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n                <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">` +\n                placeholder +\n                `</button>\n                <div class=\"ui-slider-range\" style=\"margin-left: 0px; clip-path: inset(0 100% 0 0);background: linear-gradient(90deg, ` +\n                colors +\n                `);\"></div>\n              </div>`;\n            }\n          }\n        }\n      });\n      return '<div class=\"actors\"' + historicWidth + '>' + retval + '</div>';\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, this.getThrottleInterval(), { trailing: true }, this);\n\n      this.getDomElement()\n        .querySelectorAll('.actor')\n        .forEach(actor => actor.addEventListener('pointerdown', this));\n    },\n\n    _update(address, data) {\n      const addressObj = this.getAddress()[address];\n      const showInvalidDataErrorMessage = function () {\n        const message = qx.locale.Manager.tr(\n          'Updating ColorChooser with invalid data<br/>Address: \"%1\"<br/>transform: \"%2\"<br/>selector: \"%3\"<br/>variant: \"%4\"<br/>data: \"%5\"',\n          address,\n          addressObj.transform,\n          addressObj.selector,\n          addressObj.variant,\n          data\n        );\n\n        if (cv.Config.testMode === true) {\n          // eslint-disable-next-line no-console\n          console.error(message.toString());\n        }\n        cv.core.notifications.Router.dispatchMessage('cv.config.error', {\n          message\n        });\n      };\n\n      const transform = addressObj.transform;\n      let variant = addressObj.variantInfo;\n\n      let variantType;\n      let value = cv.Transform.decode(addressObj, data);\n      let base;\n\n      switch (variant) {\n        case 'h':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value /= 360;\n          variantType = 'hsv-single';\n          break;\n\n        case 's':\n        case 'v':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value /= 100;\n          variantType = 'hsv-single';\n          break;\n\n        case 'hsv':\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            h: value.get('h') / 360,\n            s: value.get('s') / 100,\n            v: value.get('v') / 100\n          };\n\n          variantType = 'hsv';\n          break;\n\n        case 'RGB-r':\n        case 'RGB-g':\n        case 'RGB-b':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          base = this.getBaseColors()[variant.split('-')[1]];\n          value = cv.util.Color.invCurve(value, base.curve, base.scale);\n          variantType = 'rgb-single';\n          break;\n\n        case 'rgb':\n          base = this.getBaseColors();\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            r: cv.util.Color.invCurve(value.get('r'), base.r.curve, base.r.scale),\n\n            g: cv.util.Color.invCurve(value.get('g'), base.g.curve, base.g.scale),\n\n            b: cv.util.Color.invCurve(value.get('b'), base.b.curve, base.b.scale)\n          };\n\n          variantType = 'rgb';\n          break;\n\n        case 'RGBW-r':\n        case 'RGBW-g':\n        case 'RGBW-b':\n        case 'RGBW-w':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          base = this.getBaseColors()[variant.split('-')[1]];\n          value = cv.util.Color.invCurve(value, base.curve, base.scale);\n          variantType = 'rgbw-single';\n          break;\n\n        case 'rgbw':\n          base = this.getBaseColors();\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            r: cv.util.Color.invCurve(value.get('r'), base.r.curve, base.r.scale),\n\n            g: cv.util.Color.invCurve(value.get('g'), base.g.curve, base.g.scale),\n\n            b: cv.util.Color.invCurve(value.get('b'), base.b.curve, base.b.scale),\n\n            w: cv.util.Color.invCurve(value.get('w'), base.w.curve, base.w.scale)\n          };\n\n          variantType = 'rgbw';\n          break;\n\n        case 'x':\n        case 'y':\n          variantType = 'xyY';\n          break;\n\n        case 'Y':\n          if (value instanceof Map && value.get('YValid') !== false) {\n            value = value.get('Y');\n          } else if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n\n        case 'xy':\n          if (value instanceof Map && value.get('cValid') !== false) {\n            value = { x: value.get('x'), y: value.get('y') };\n          } else if (!(typeof value === 'object' && 'x' in value && 'y' in value)) {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n\n        case 'xyY':\n          if (value instanceof Map) {\n            variant = (value.get('cValid') !== false ? 'xy' : '') + (value.get('YValid') !== false ? 'Y' : '');\n            value = {\n              x: value.get('x'),\n              y: value.get('y'),\n              Y: value.get('Y')\n            };\n\n            if (variant === '') {\n              return; // no valid data in the value\n            }\n          } else {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n      }\n\n      if (\n        this.__inDrag ||\n        (this.__lastBusValue[variantType] &&\n          this.__lastBusValue[variantType][variant] &&\n          this.__lastBusValue[variantType][variant][transform] === data)\n      ) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      const notKnown = this.__lastBusValue[variantType] === undefined;\n      if (notKnown) {\n        this.__lastBusValue[variantType] = {};\n      }\n\n      // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue = { [variantType]: this.__lastBusValue[variantType] };\n      this.__lastBusValue[variantType][variant] = { [transform]: data };\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, variant, !this.isVisible() || notKnown);\n    },\n\n    /**\n     * The internal slider state and its handle and displayed value\n     * @param {number} value The new value\n     * @param {string} variant The color component to change\n     * @param {boolean} instant Animate or instant change\n     * @private\n     */\n    __setSliderTo(value, variant, instant) {\n      this.__colorOld = this.__colorCurrent === undefined ? this.__color.copy() : this.__colorCurrent.copy();\n      this.__changeColor(variant, value);\n      instant = instant || this.__color.delta(this.__colorOld) < 0.5;\n      if (!instant) {\n        this.__animator.setTo(this.__colorOld, true, false);\n      }\n      this.__animator.setTo(this.__color, instant);\n    },\n\n    __updateHandlePosition(newColor) {\n      // check cache\n      if (this.__actors === undefined) {\n        let actors = {};\n        let actorStyle;\n        this.getDomElement()\n          .querySelectorAll('.actor')\n          .forEach(function (actor) {\n            let type = actor.className.replace(/.*cc_([^ ]*).*/, '$1');\n            switch (type) {\n              case 'box':\n              case 'wheel': {\n                actorStyle = window.getComputedStyle(actor);\n                let sv_element = type === 'box' ? actor.querySelector('.sv_box') : actor.querySelector('.sv_triangle');\n                let inner = sv_element.querySelector('.inner');\n                let handle = actor.querySelector('.handle');\n                let handle_hue = actor.querySelector('.handle_hue');\n                let hue = actor.querySelector('.hue');\n                actors[type] = {\n                  isLCh: hue.classList.contains('lch_hue'),\n                  sv_element: sv_element,\n                  inner: inner,\n                  handle: handle,\n                  handle_hue: handle_hue,\n                  handle_hueTop: parseFloat(window.getComputedStyle(handle_hue).getPropertyValue('top')),\n\n                  handle_hueWidth: parseFloat(window.getComputedStyle(handle_hue).getPropertyValue('width')),\n\n                  width: parseFloat(actorStyle.getPropertyValue('width')),\n                  height: parseFloat(actorStyle.getPropertyValue('padding-top')),\n\n                  innerRadius: parseFloat(window.getComputedStyle(sv_element).getPropertyValue('width')),\n\n                  outerRadius: parseFloat(window.getComputedStyle(hue).getPropertyValue('width'))\n                };\n\n                break;\n              }\n\n              default: {\n                actorStyle = window.getComputedStyle(actor);\n                let button = actor.querySelector('button');\n                let range = actor.querySelector('.ui-slider-range');\n                actors[type] = {\n                  button: button,\n                  range: range,\n                  width: parseFloat(actorStyle.getPropertyValue('width')),\n                  buttonWidth: parseFloat(window.getComputedStyle(button).getPropertyValue('width'))\n                };\n\n                range.style.marginLeft = '-' + actorStyle.getPropertyValue('padding-left');\n                range.style.borderRadius = actorStyle.getPropertyValue('border-radius');\n              }\n            }\n          });\n        this.__actors = actors;\n      }\n\n      this.__colorCurrent = newColor;\n      // move handles\n      for (let type in this.__actors) {\n        let actor = this.__actors[type];\n        if (type === 'wheel') {\n          const Bt = 75;\n          const St = 0;\n          const Wt = 75;\n          const Bl = 50 - 85 / 2;\n          const Sl = 50;\n          const Wl = 50 + 85 / 2;\n          let angle;\n          if (actor.isLCh) {\n            let LCh = this.__colorCurrent.getComponent('LCh');\n            let r = cv.util.Color.curve(LCh.h, [246, 255, 46, 0, 246], 1);\n            let g = cv.util.Color.curve(LCh.h, [27, 224, 255, 136, 27], 1);\n            let b = cv.util.Color.curve(LCh.h, [136, 32, 224, 245, 136], 1);\n            angle = LCh.h * 360 + 'deg';\n            const WSt = LCh.C * St + (1 - LCh.C) * Wt;\n            const WSl = LCh.C * Sl + (1 - LCh.C) * Wl;\n            actor.handle.style.top = LCh.L * WSt + (1 - LCh.L) * Bt + '%';\n            actor.handle.style.left = LCh.L * WSl + (1 - LCh.L) * Bl + '%';\n            actor.inner.style.background =\n              'linear-gradient(210deg, transparent 45%, black 90%),linear-gradient(150deg, transparent 45%, white 90%),rgb(' +\n              [r, g, b].join(',') +\n              ')';\n          } else {\n            let hsv = this.__colorCurrent.getComponent('hsv');\n            angle = hsv.h * 360 + 'deg';\n            const WSt = hsv.s * St + (1 - hsv.s) * Wt;\n            const WSl = hsv.s * Sl + (1 - hsv.s) * Wl;\n            actor.handle.style.top = hsv.v * WSt + (1 - hsv.v) * Bt + '%';\n            actor.handle.style.left = hsv.v * WSl + (1 - hsv.v) * Bl + '%';\n            actor.inner.style.background =\n              'linear-gradient(210deg, transparent 45%, black 90%),linear-gradient(150deg, transparent 45%, white 90%),hsl(' +\n              angle +\n              ' 100% 50%)';\n          }\n          actor.sv_element.style.transform = 'rotate(' + angle + ')';\n        } else if (type === 'box') {\n          let angle;\n          if (actor.isLCh) {\n            let LCh = this.__colorCurrent.getComponent('LCh');\n            let r = cv.util.Color.curve(LCh.h, [246, 255, 46, 0, 246], 1);\n            let g = cv.util.Color.curve(LCh.h, [27, 224, 255, 136, 27], 1);\n            let b = cv.util.Color.curve(LCh.h, [136, 32, 224, 245, 136], 1);\n            angle = LCh.h * 360 + 'deg';\n            actor.handle.style.top = (1 - LCh.L) * 100 + '%';\n            actor.handle.style.left = (1 - LCh.C) * 100 + '%';\n            actor.inner.style.background =\n              'linear-gradient(0deg, black 0%, transparent 50%, white 100%), linear-gradient(90deg,rgb(' +\n              [r, g, b].join(',') +\n              '), #808080 100%)';\n          } else {\n            let hsv = this.__colorCurrent.getComponent('hsv');\n            angle = hsv.h * 360 + 'deg';\n            actor.handle.style.top = (1 - hsv.v) * 100 + '%';\n            actor.handle.style.left = (1 - hsv.s) * 100 + '%';\n            actor.inner.style.background =\n              'linear-gradient(0deg, black 0%, transparent 50%, white 100%), linear-gradient(90deg,hsl(' +\n              angle +\n              ' 100% 50%), #808080 100%)';\n          }\n          actor.handle_hue.style.transform = 'rotate(' + angle + ')';\n          actor.handle_hue.style.transformOrigin =\n            actor.handle_hueWidth / 2 + 'px ' + (actor.width / 2 - actor.handle_hueTop) + 'px'; //calc(195px / 2 - 3px)';\n        } else {\n          let ratioComponent = this.__colorCurrent.getComponent(type);\n          if (type === 'T') {\n            ratioComponent = (ratioComponent - this.__Tmin) / (this.__Tmax - this.__Tmin);\n          }\n          let length = Math.max(0, Math.min(ratioComponent, 1)) * actor.width;\n          actor.button.style.transform = 'translate3d(' + (length - actor.buttonWidth / 2) + 'px, 0px, 0px)';\n          actor.range.style.clipPath = 'inset(0 ' + (1 - ratioComponent) * 100 + '% 0 0)';\n        }\n      }\n    },\n\n    invalidateScreensize() {\n      this.__actors = undefined; // invalidate cached values\n      this.__animator.setTo(this.__color, true /* tmp */);\n    },\n\n    handleEvent(event) {\n      let relCoordX = 0;\n      let relCoordY = 0;\n      let actor;\n\n      switch (event.type) {\n        case 'pointerdown': {\n          let actorType = event.currentTarget.className.replace(/.*cc_([^ ]*).*/, '$1');\n\n          actor = this.__actors[actorType];\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMinX = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          this.__coordMinY = boundingRect.top;\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          if (actorType === 'wheel') {\n            let radius = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            let sv = cv.ui.structure.pure.ColorChooser.coord2sv(\n              relCoordX,\n              relCoordY,\n              this.__color.getComponent(actor.isLCh ? 'LCh' : 'hsv').h,\n              radius\n            );\n\n            let distSqrd = (relCoordX - 0.5) ** 2 + (relCoordY - 0.5) ** 2;\n            if (distSqrd < (0.5 * 1.07) ** 2) {\n              // ignore clicks outside of the wheel, with 7% safety margin on the outside\n              const clearlyOnWheel = (radius * 1.1) ** 2 < distSqrd; // with 10% safety margin to the interior triangle\n              const closeToInerior = radius ** 2 < distSqrd && !clearlyOnWheel;\n              const closeToTriangleCorners =\n                sv[1] < 0.01 || (sv[0] < 0.01 && sv[1] > 0.99) || (sv[0] > 0.99 && sv[1] > 0.99);\n              if (clearlyOnWheel || (closeToInerior && !closeToTriangleCorners)) {\n                this.__mode = 'wheel_h';\n                this.__changeColor(\n                  actor.isLCh ? 'LCh-h' : 'h',\n                  0.5 + Math.atan2(-relCoordX + 0.5, relCoordY - 0.5) / 2 / Math.PI\n                );\n\n                this.__inDrag = true;\n              } else {\n                this.__mode = 'wheel_sv';\n                this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', sv);\n                this.__inDrag = true;\n              }\n            }\n          } else if (actorType === 'box') {\n            let boxSize = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            let x = relCoordX - 0.5;\n            let y = relCoordY - 0.5;\n            let sv = [-x / boxSize / 2 + 0.5, -y / boxSize / 2 + 0.5];\n            if (Math.abs(x) < boxSize && Math.abs(y) < boxSize) {\n              this.__mode = 'box_sv';\n              this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', sv);\n              this.__inDrag = true;\n            } else {\n              this.__mode = 'box_h';\n              this.__changeColor(actor.isLCh ? 'LCh-h' : 'h', 0.5 + Math.atan2(-x, y) / 2 / Math.PI);\n\n              this.__inDrag = true;\n            }\n          } else {\n            let ratio = relCoordX;\n            if (actorType === 'T') {\n              ratio = this.__Tmin + ratio * (this.__Tmax - this.__Tmin);\n            }\n            this.__mode = actorType;\n            this.__changeColor(actorType, ratio);\n            this.__inDrag = true;\n          }\n          if (this.__inDrag) {\n            document.addEventListener('pointermove', this);\n            document.addEventListener('pointerup', this);\n          } else {\n            this.__mode = undefined;\n          }\n          break;\n        }\n\n        case 'pointermove': {\n          if (!this.__inDrag) {\n            return;\n          }\n          if (event.buttons === 0) {\n            // move with no button could only happen during debug sessions\n            this.__inDrag = false;\n            document.removeEventListener('pointermove', this);\n            document.removeEventListener('pointerup', this);\n          }\n          let type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n          actor = this.__actors[type];\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          break;\n        }\n\n        case 'pointerup': {\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          const type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n          actor = this.__actors[type];\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          break;\n        }\n      }\n\n      if (event.type !== 'pointerdown') {\n        let type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n        let actor = this.__actors[type];\n        switch (this.__mode) {\n          case 'wheel_sv': {\n            const radius = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            const sv = cv.ui.structure.pure.ColorChooser.coord2sv(\n              relCoordX,\n              relCoordY,\n              this.__color.getComponent(actor.isLCh ? 'LCh' : 'hsv').h,\n              radius\n            );\n\n            this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', [\n              Math.min(Math.max(sv[0], 0), 1),\n              Math.min(Math.max(sv[1], 0), 1)\n            ]);\n\n            break;\n          }\n          case 'box_sv': {\n            const boxSize = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            const x = relCoordX - 0.5;\n            const y = relCoordY - 0.5;\n            const sv = [-x / boxSize / 2 + 0.5, -y / boxSize / 2 + 0.5];\n            this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', [\n              Math.min(Math.max(sv[0], 0), 1),\n              Math.min(Math.max(sv[1], 0), 1)\n            ]);\n\n            break;\n          }\n          case 'wheel_h':\n          case 'box_h':\n            this.__changeColor(\n              actor.isLCh ? 'LCh-h' : 'h',\n              0.5 + Math.atan2(-relCoordX + 0.5, relCoordY - 0.5) / 2 / Math.PI\n            );\n\n            break;\n          case 'T':\n            this.__changeColor(\n              'T',\n              this.__Tmin + Math.max(0, Math.min(relCoordX, 1)) * (this.__Tmax - this.__Tmin)\n            );\n\n            break;\n          default:\n            this.__changeColor(this.__mode, relCoordX);\n        }\n      }\n      this.__animator.setTo(this.__color, true);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call();\n      }\n    },\n\n    __changeColor(component, value) {\n      this.__color.changeComponent(component, value);\n      this.fireEvent('colorChanged');\n    },\n\n    __onChangeValue() {\n      this.__components.forEach(type => {\n        let value = this.__color.getComponent(['xyY', 'x', 'y'].includes(type) ? 'xy' : type);\n\n        let typeCategory;\n        let base;\n\n        switch (type) {\n          case 'h':\n            value *= 360;\n            typeCategory = 'hsv-single';\n            break;\n\n          case 's':\n          case 'v':\n            value *= 100;\n            typeCategory = 'hsv-single';\n            break;\n\n          case 'hsv':\n            value = new Map([\n              ['h', value.h * 360],\n              ['s', value.s * 100],\n              ['v', value.v * 100]\n            ]);\n\n            typeCategory = 'hsv';\n            break;\n\n          case 'RGB-r':\n          case 'RGB-g':\n          case 'RGB-b':\n            base = this.getBaseColors()[type.split('-')[1]];\n            value = cv.util.Color.curve(value, base.curve, base.scale);\n            typeCategory = 'rgb-single';\n            break;\n\n          case 'RGBW-r':\n          case 'RGBW-g':\n          case 'RGBW-b':\n          case 'RGBW-w':\n            base = this.getBaseColors()[type.split('-')[1]];\n            value = cv.util.Color.curve(value, base.curve, base.scale);\n            typeCategory = 'rgbw-single';\n            break;\n\n          case 'rgb':\n            base = this.getBaseColors();\n            value = new Map([\n              ['r', cv.util.Color.curve(value.r, base.r.curve, base.r.scale)],\n              ['g', cv.util.Color.curve(value.g, base.g.curve, base.g.scale)],\n              ['b', cv.util.Color.curve(value.b, base.b.curve, base.b.scale)]\n            ]);\n\n            typeCategory = 'rgb';\n            break;\n\n          case 'rgbw':\n            base = this.getBaseColors();\n            value = new Map([\n              ['r', cv.util.Color.curve(value.r, base.r.curve, base.r.scale)],\n              ['g', cv.util.Color.curve(value.g, base.g.curve, base.g.scale)],\n              ['b', cv.util.Color.curve(value.b, base.b.curve, base.b.scale)],\n              ['w', cv.util.Color.curve(value.w, base.w.curve, base.w.scale)]\n            ]);\n\n            typeCategory = 'rgbw';\n            break;\n\n          case 'xy':\n            value = new Map([\n              ['x', value.x],\n              ['y', value.y]\n            ]);\n\n            typeCategory = 'xyY';\n            break;\n\n          case 'xyY': {\n            let Y = this.__color.getComponent('Y');\n            value = new Map([\n              ['x', value.x],\n              ['y', value.y],\n              ['Y', Y]\n            ]);\n\n            typeCategory = 'xyY';\n            break;\n          }\n\n          case 'Y':\n            typeCategory = 'xyY';\n            break;\n\n          case 'x':\n          case 'y':\n            value = value[type];\n            typeCategory = 'xyY';\n            break;\n        }\n\n        if (this.__lastBusValue[typeCategory] === undefined) {\n          this.__lastBusValue[typeCategory] = {};\n        }\n        this.__lastBusValue[typeCategory][type] = this.sendToBackend(\n          value,\n          t => t.variantInfo === type,\n          this.__lastBusValue[typeCategory][type]\n        );\n      });\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('colorchooser', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}