{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Operate",
    "Update",
    "statics",
    "coord2sv",
    "x",
    "y",
    "hue",
    "radius",
    "hue2angle",
    "Math",
    "PI",
    "Sx",
    "sin",
    "Sy",
    "cos",
    "Wx",
    "Wy",
    "Bx",
    "By",
    "WBx",
    "WBy",
    "SBx",
    "SBy",
    "CBx",
    "CBy",
    "uv",
    "util",
    "Color",
    "solve2d",
    "u",
    "min",
    "max",
    "v",
    "value",
    "saturation",
    "abs",
    "construct",
    "props",
    "base",
    "getBaseColors",
    "__color",
    "r",
    "g",
    "b",
    "w",
    "__animator",
    "LimitedRateUpdateAnimator",
    "__updateHandlePosition",
    "setAnimationSpeed",
    "layout",
    "__pageSizeListener",
    "ResizeHandler",
    "states",
    "addListener",
    "invalidateScreensize",
    "__components",
    "Set",
    "Object",
    "entries",
    "getAddress",
    "map",
    "variantInfo",
    "__lastBusValue",
    "destruct",
    "removeListenerById",
    "__button",
    "properties",
    "controls",
    "check",
    "baseColors",
    "sendOnFinish",
    "init",
    "throttleInterval",
    "events",
    "colorChanged",
    "members",
    "__mode",
    "__colorOld",
    "undefined",
    "__colorCurrent",
    "__range",
    "__actors",
    "__inDrag",
    "__coordMin",
    "__Tmin",
    "__Tmax",
    "getColor",
    "_getInnerDomString",
    "placeholder",
    "getFormat",
    "self",
    "retval",
    "historicWidth",
    "getLayout",
    "colspan",
    "getControls",
    "split",
    "forEach",
    "control",
    "hue_type",
    "parts",
    "temperatures",
    "rgbTmin",
    "xy2sRGB",
    "temperature2xy",
    "rgbTmax",
    "disp",
    "c",
    "round",
    "join",
    "colors",
    "_onDomReady",
    "__throttled",
    "Function",
    "throttle",
    "__onChangeValue",
    "getThrottleInterval",
    "trailing",
    "getDomElement",
    "querySelectorAll",
    "actor",
    "addEventListener",
    "_update",
    "address",
    "data",
    "addressObj",
    "showInvalidDataErrorMessage",
    "message",
    "locale",
    "Manager",
    "tr",
    "transform",
    "selector",
    "variant",
    "Config",
    "testMode",
    "console",
    "error",
    "toString",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "variantType",
    "Transform",
    "decode",
    "Number",
    "isFinite",
    "get",
    "h",
    "s",
    "invCurve",
    "curve",
    "scale",
    "Map",
    "Y",
    "notKnown",
    "__setSliderTo",
    "isVisible",
    "instant",
    "copy",
    "__changeColor",
    "delta",
    "setTo",
    "newColor",
    "actors",
    "actorStyle",
    "type",
    "className",
    "replace",
    "window",
    "getComputedStyle",
    "sv_element",
    "querySelector",
    "inner",
    "handle",
    "handle_hue",
    "isLCh",
    "classList",
    "contains",
    "handle_hueTop",
    "parseFloat",
    "getPropertyValue",
    "handle_hueWidth",
    "width",
    "height",
    "innerRadius",
    "outerRadius",
    "button",
    "range",
    "buttonWidth",
    "style",
    "marginLeft",
    "borderRadius",
    "Bt",
    "St",
    "Wt",
    "Bl",
    "Sl",
    "Wl",
    "angle",
    "LCh",
    "getComponent",
    "WSt",
    "C",
    "WSl",
    "top",
    "L",
    "left",
    "background",
    "hsv",
    "transformOrigin",
    "ratioComponent",
    "length",
    "clipPath",
    "handleEvent",
    "event",
    "relCoordX",
    "relCoordY",
    "actorType",
    "currentTarget",
    "boundingRect",
    "getBoundingClientRect",
    "computedStyle",
    "__coordMinX",
    "paddingLeft",
    "__coordMinY",
    "clientX",
    "clientY",
    "sv",
    "ColorChooser",
    "distSqrd",
    "clearlyOnWheel",
    "closeToInerior",
    "closeToTriangleCorners",
    "atan2",
    "boxSize",
    "ratio",
    "document",
    "buttons",
    "removeEventListener",
    "getSendOnFinish",
    "call",
    "component",
    "changeComponent",
    "fireEvent",
    "includes",
    "typeCategory",
    "sendToBackend",
    "t",
    "defer",
    "WidgetFactory",
    "registerClass"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/ColorChooser.js"
  ],
  "sourcesContent": [
    "/* ColorChooser.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The ColorChooser let you select and display a color, e.g. for lighting effects.\n * It supports a RGB light source with red, green and blue light components as well\n * as a RGBW light source that also has a white channel.\n *\n * @widgetexample\n * <settings>\n *      <screenshot name=\"colorchooser_example\">\n *          <caption>ColorChooser, simple example</caption>\n *      </screenshot>\n * </settings>\n * <colorchooser>\n *   <layout colspan=\"6\" rowspan=\"4\"/>\n *   <label>RGB kitchen</label>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"r\">1/2/59</address>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"g\">1/2/60</address>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"b\">1/2/61</address>\n * </colorchooser>\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.ColorChooser', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Calculate the saturation and value from (x,y) relative widget coordinates\n     * based on a centered SV-triangle.\n     * @param x position for the calculation\n     * @param y position for the calculation\n     * @param hue value for the orientation of the triangle\n     * @param radius (outside) radius of the triangle\n     */\n    coord2sv(x, y, hue, radius) {\n      const hue2angle = 2 * Math.PI;\n      // coordinates of the triangle corners\n      const Sx = 0.5 - Math.sin(hue2angle * -hue) * radius; // 100% saturation\n      const Sy = 0.5 - Math.cos(hue2angle * -hue) * radius;\n      const Wx = 0.5 - Math.sin(hue2angle * (2 / 3 - hue)) * radius; // 100% white\n      const Wy = 0.5 - Math.cos(hue2angle * (2 / 3 - hue)) * radius;\n      const Bx = 0.5 - Math.sin(hue2angle * (1 / 3 - hue)) * radius; // 100% black\n      const By = 0.5 - Math.cos(hue2angle * (1 / 3 - hue)) * radius;\n      // differences to determine (u,v) coordinates of (x,y)\n      const WBx = Wx - Bx;\n      const WBy = Wy - By;\n      const SBx = Sx - Bx;\n      const SBy = Sy - By;\n      const CBx = x - Bx;\n      const CBy = y - By;\n      const uv = cv.util.Color.solve2d(WBx, WBy, SBx, SBy, CBx, CBy);\n      const u = Math.min(Math.max(0, uv[0]), 1);\n      const v = Math.min(Math.max(0, uv[1]), 1);\n      // convert (u,v) to S and V\n      const value = u + v;\n      const saturation = Math.abs(value) < 1e-3 ? 0 : v / value;\n      return [saturation, value];\n    }\n  },\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(props) {\n    super(props);\n\n    const base = this.getBaseColors();\n    this.__color = new cv.util.Color(base.r, base.g, base.b, base.w);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n\n    this.__animator.setAnimationSpeed(100, 0.5);\n    if (cv.ui.structure.pure.layout) {\n      this.__pageSizeListener = cv.ui.structure.pure.layout.ResizeHandler.states.addListener(\n        'changePageSizeInvalid',\n        () => {\n          this.invalidateScreensize();\n        }\n      );\n    }\n\n    this.__components = new Set(Object.entries(this.getAddress()).map(v => v[1].variantInfo));\n\n    this.__lastBusValue = {};\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    cv.ui.structure.pure.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    controls: {\n      check: 'String'\n    },\n\n    baseColors: {\n      check: 'Object'\n    },\n\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    colorChanged: 'qx.event.type.Event'\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __mode: '',\n    __colorOld: undefined, // the color where the animation started\n    __colorCurrent: undefined, // the current color of the running animation\n    __color: undefined, // the current color of the widget, also the target for the animation\n    __lastBusValue: undefined, // initialize with empty object in the constructor to prevent object being shared between instances\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined, // cache for DOM element\n    __actors: undefined,\n    __pageSizeListener: undefined,\n    __components: undefined, // set of all color components required to send\n    __inDrag: false, // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n    __Tmin: 2000, // minimal color temperature to show in slider\n    __Tmax: 12500, // maximal color temperature to show in slider\n\n    getColor() {\n      return this.__color;\n    },\n\n    // overridden\n    _getInnerDomString() {\n      const placeholder = this.getFormat() === '' ? '' : '-';\n      const self = this;\n      let retval = '';\n      const historicWidth = this.getLayout().colspan === undefined ? ' style=\"width:195px\"' : '';\n      let controls = this.getControls().split(';');\n      if (controls[0] === '') {\n        controls[0] = 'box';\n      }\n      controls.forEach(function (control) {\n        switch (control) {\n          case 'box':\n          case 'LCh-box': {\n            let hue_type = control === 'box' ? 'hsv_hue' : 'lch_hue';\n            retval += '<div class=\"actor cc_box\"><div class=\"hue ' + hue_type;\n            retval +=\n              '\"></div><div class=\"handle_hue\"></div><div class=\"sv_box\"><div class=\"inner\"></div><div class=\"handle\"></div></div></div>';\n            break;\n          }\n\n          case 'triangle':\n          case 'LCh-triangle': {\n            let hue_type = control === 'triangle' ? 'hsv_hue' : 'lch_hue';\n            retval += '<div class=\"actor cc_wheel\"><div class=\"hue ' + hue_type;\n            retval +=\n              '\"></div><div class=\"sv_triangle\"><div class=\"inner\"></div><div class=\"handle_hue\"></div><div class=\"handle\"></div></div></div>';\n            break;\n          }\n\n          case 'RGB-r':\n          case 'RGB-g':\n          case 'RGB-b':\n          case 'RGBW-r':\n          case 'RGBW-g':\n          case 'RGBW-b':\n          case 'RGBW-w':\n          case 'h':\n          case 's':\n          case 'v':\n          case 'LCh-L':\n          case 'LCh-C':\n          case 'LCh-h':\n          case 'Y':\n            retval +=\n              '<div class=\"actor cc_' +\n              control +\n              ` ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n              <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">` +\n              placeholder +\n              `</button>\n              <div class=\"ui-slider-range\" style=\"margin-left: 0px; clip-path: inset(0 100% 0 0);\"></div>\n            </div>`;\n            break;\n\n          default: {\n            let parts = control.split(':');\n            if (parts[0] === 'T') {\n              const temperatures = (parts[1] || '-').split('-');\n              self.__Tmin = Math.max(1667, Math.min(temperatures[0] || 2500, 25000));\n\n              self.__Tmax = Math.max(1667, Math.min(temperatures[1] || 9000, 25000));\n\n              const rgbTmin = cv.util.Color.xy2sRGB(cv.util.Color.temperature2xy(self.__Tmin));\n\n              const rgbTmax = cv.util.Color.xy2sRGB(cv.util.Color.temperature2xy(self.__Tmax));\n\n              const disp = c => [Math.round(255 * c.r), Math.round(255 * c.g), Math.round(255 * c.b)].join(',');\n              const colors = 'rgb(' + disp(rgbTmin) + '), rgb(' + disp(rgbTmax) + ')';\n\n              retval +=\n                `<div class=\"actor cc_T ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n                <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">` +\n                placeholder +\n                `</button>\n                <div class=\"ui-slider-range\" style=\"margin-left: 0px; clip-path: inset(0 100% 0 0);background: linear-gradient(90deg, ` +\n                colors +\n                `);\"></div>\n              </div>`;\n            }\n          }\n        }\n      });\n      return '<div class=\"actors\"' + historicWidth + '>' + retval + '</div>';\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, this.getThrottleInterval(), { trailing: true }, this);\n\n      this.getDomElement()\n        .querySelectorAll('.actor')\n        .forEach(actor => actor.addEventListener('pointerdown', this));\n    },\n\n    _update(address, data) {\n      const addressObj = this.getAddress()[address];\n      const showInvalidDataErrorMessage = function () {\n        const message = qx.locale.Manager.tr(\n          'Updating ColorChooser with invalid data<br/>Address: \"%1\"<br/>transform: \"%2\"<br/>selector: \"%3\"<br/>variant: \"%4\"<br/>data: \"%5\"',\n          address,\n          addressObj.transform,\n          addressObj.selector,\n          addressObj.variant,\n          data\n        );\n\n        if (cv.Config.testMode === true) {\n          // eslint-disable-next-line no-console\n          console.error(message.toString());\n        }\n        cv.core.notifications.Router.dispatchMessage('cv.config.error', {\n          message\n        });\n      };\n\n      const transform = addressObj.transform;\n      let variant = addressObj.variantInfo;\n\n      let variantType;\n      let value = cv.Transform.decode(addressObj, data);\n      let base;\n\n      switch (variant) {\n        case 'h':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value /= 360;\n          variantType = 'hsv-single';\n          break;\n\n        case 's':\n        case 'v':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value /= 100;\n          variantType = 'hsv-single';\n          break;\n\n        case 'hsv':\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            h: value.get('h') / 360,\n            s: value.get('s') / 100,\n            v: value.get('v') / 100\n          };\n\n          variantType = 'hsv';\n          break;\n\n        case 'RGB-r':\n        case 'RGB-g':\n        case 'RGB-b':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          base = this.getBaseColors()[variant.split('-')[1]];\n          value = cv.util.Color.invCurve(value, base.curve, base.scale);\n          variantType = 'rgb-single';\n          break;\n\n        case 'rgb':\n          base = this.getBaseColors();\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            r: cv.util.Color.invCurve(value.get('r'), base.r.curve, base.r.scale),\n\n            g: cv.util.Color.invCurve(value.get('g'), base.g.curve, base.g.scale),\n\n            b: cv.util.Color.invCurve(value.get('b'), base.b.curve, base.b.scale)\n          };\n\n          variantType = 'rgb';\n          break;\n\n        case 'RGBW-r':\n        case 'RGBW-g':\n        case 'RGBW-b':\n        case 'RGBW-w':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          base = this.getBaseColors()[variant.split('-')[1]];\n          value = cv.util.Color.invCurve(value, base.curve, base.scale);\n          variantType = 'rgbw-single';\n          break;\n\n        case 'rgbw':\n          base = this.getBaseColors();\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            r: cv.util.Color.invCurve(value.get('r'), base.r.curve, base.r.scale),\n\n            g: cv.util.Color.invCurve(value.get('g'), base.g.curve, base.g.scale),\n\n            b: cv.util.Color.invCurve(value.get('b'), base.b.curve, base.b.scale),\n\n            w: cv.util.Color.invCurve(value.get('w'), base.w.curve, base.w.scale)\n          };\n\n          variantType = 'rgbw';\n          break;\n\n        case 'x':\n        case 'y':\n          variantType = 'xyY';\n          break;\n\n        case 'Y':\n          if (value instanceof Map && value.get('YValid') !== false) {\n            value = value.get('Y');\n          } else if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n\n        case 'xy':\n          if (value instanceof Map && value.get('cValid') !== false) {\n            value = { x: value.get('x'), y: value.get('y') };\n          } else if (!(typeof value === 'object' && 'x' in value && 'y' in value)) {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n\n        case 'xyY':\n          if (value instanceof Map) {\n            variant = (value.get('cValid') !== false ? 'xy' : '') + (value.get('YValid') !== false ? 'Y' : '');\n            value = {\n              x: value.get('x'),\n              y: value.get('y'),\n              Y: value.get('Y')\n            };\n\n            if (variant === '') {\n              return; // no valid data in the value\n            }\n          } else {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n      }\n\n      if (\n        this.__inDrag ||\n        (this.__lastBusValue[variantType] &&\n          this.__lastBusValue[variantType][variant] &&\n          this.__lastBusValue[variantType][variant][transform] === data)\n      ) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      const notKnown = this.__lastBusValue[variantType] === undefined;\n      if (notKnown) {\n        this.__lastBusValue[variantType] = {};\n      }\n\n      // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue = { [variantType]: this.__lastBusValue[variantType] };\n      this.__lastBusValue[variantType][variant] = { [transform]: data };\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, variant, !this.isVisible() || notKnown);\n    },\n\n    /**\n     * The internal slider state and its handle and displayed value\n     * @param {number} value The new value\n     * @param {string} variant The color component to change\n     * @param {boolean} instant Animate or instant change\n     * @private\n     */\n    __setSliderTo(value, variant, instant) {\n      this.__colorOld = this.__colorCurrent === undefined ? this.__color.copy() : this.__colorCurrent.copy();\n      this.__changeColor(variant, value);\n      instant = instant || this.__color.delta(this.__colorOld) < 0.5;\n      if (!instant) {\n        this.__animator.setTo(this.__colorOld, true, false);\n      }\n      this.__animator.setTo(this.__color, instant);\n    },\n\n    __updateHandlePosition(newColor) {\n      // check cache\n      if (this.__actors === undefined) {\n        let actors = {};\n        let actorStyle;\n        this.getDomElement()\n          .querySelectorAll('.actor')\n          .forEach(function (actor) {\n            let type = actor.className.replace(/.*cc_([^ ]*).*/, '$1');\n            switch (type) {\n              case 'box':\n              case 'wheel': {\n                actorStyle = window.getComputedStyle(actor);\n                let sv_element = type === 'box' ? actor.querySelector('.sv_box') : actor.querySelector('.sv_triangle');\n                let inner = sv_element.querySelector('.inner');\n                let handle = actor.querySelector('.handle');\n                let handle_hue = actor.querySelector('.handle_hue');\n                let hue = actor.querySelector('.hue');\n                actors[type] = {\n                  isLCh: hue.classList.contains('lch_hue'),\n                  sv_element: sv_element,\n                  inner: inner,\n                  handle: handle,\n                  handle_hue: handle_hue,\n                  handle_hueTop: parseFloat(window.getComputedStyle(handle_hue).getPropertyValue('top')),\n\n                  handle_hueWidth: parseFloat(window.getComputedStyle(handle_hue).getPropertyValue('width')),\n\n                  width: parseFloat(actorStyle.getPropertyValue('width')),\n                  height: parseFloat(actorStyle.getPropertyValue('padding-top')),\n\n                  innerRadius: parseFloat(window.getComputedStyle(sv_element).getPropertyValue('width')),\n\n                  outerRadius: parseFloat(window.getComputedStyle(hue).getPropertyValue('width'))\n                };\n\n                break;\n              }\n\n              default: {\n                actorStyle = window.getComputedStyle(actor);\n                let button = actor.querySelector('button');\n                let range = actor.querySelector('.ui-slider-range');\n                actors[type] = {\n                  button: button,\n                  range: range,\n                  width: parseFloat(actorStyle.getPropertyValue('width')),\n                  buttonWidth: parseFloat(window.getComputedStyle(button).getPropertyValue('width'))\n                };\n\n                range.style.marginLeft = '-' + actorStyle.getPropertyValue('padding-left');\n                range.style.borderRadius = actorStyle.getPropertyValue('border-radius');\n              }\n            }\n          });\n        this.__actors = actors;\n      }\n\n      this.__colorCurrent = newColor;\n      // move handles\n      for (let type in this.__actors) {\n        let actor = this.__actors[type];\n        if (type === 'wheel') {\n          const Bt = 75;\n          const St = 0;\n          const Wt = 75;\n          const Bl = 50 - 85 / 2;\n          const Sl = 50;\n          const Wl = 50 + 85 / 2;\n          let angle;\n          if (actor.isLCh) {\n            let LCh = this.__colorCurrent.getComponent('LCh');\n            let r = cv.util.Color.curve(LCh.h, [246, 255, 46, 0, 246], 1);\n            let g = cv.util.Color.curve(LCh.h, [27, 224, 255, 136, 27], 1);\n            let b = cv.util.Color.curve(LCh.h, [136, 32, 224, 245, 136], 1);\n            angle = LCh.h * 360 + 'deg';\n            const WSt = LCh.C * St + (1 - LCh.C) * Wt;\n            const WSl = LCh.C * Sl + (1 - LCh.C) * Wl;\n            actor.handle.style.top = LCh.L * WSt + (1 - LCh.L) * Bt + '%';\n            actor.handle.style.left = LCh.L * WSl + (1 - LCh.L) * Bl + '%';\n            actor.inner.style.background =\n              'linear-gradient(210deg, transparent 45%, black 90%),linear-gradient(150deg, transparent 45%, white 90%),rgb(' +\n              [r, g, b].join(',') +\n              ')';\n          } else {\n            let hsv = this.__colorCurrent.getComponent('hsv');\n            angle = hsv.h * 360 + 'deg';\n            const WSt = hsv.s * St + (1 - hsv.s) * Wt;\n            const WSl = hsv.s * Sl + (1 - hsv.s) * Wl;\n            actor.handle.style.top = hsv.v * WSt + (1 - hsv.v) * Bt + '%';\n            actor.handle.style.left = hsv.v * WSl + (1 - hsv.v) * Bl + '%';\n            actor.inner.style.background =\n              'linear-gradient(210deg, transparent 45%, black 90%),linear-gradient(150deg, transparent 45%, white 90%),hsl(' +\n              angle +\n              ' 100% 50%)';\n          }\n          actor.sv_element.style.transform = 'rotate(' + angle + ')';\n        } else if (type === 'box') {\n          let angle;\n          if (actor.isLCh) {\n            let LCh = this.__colorCurrent.getComponent('LCh');\n            let r = cv.util.Color.curve(LCh.h, [246, 255, 46, 0, 246], 1);\n            let g = cv.util.Color.curve(LCh.h, [27, 224, 255, 136, 27], 1);\n            let b = cv.util.Color.curve(LCh.h, [136, 32, 224, 245, 136], 1);\n            angle = LCh.h * 360 + 'deg';\n            actor.handle.style.top = (1 - LCh.L) * 100 + '%';\n            actor.handle.style.left = (1 - LCh.C) * 100 + '%';\n            actor.inner.style.background =\n              'linear-gradient(0deg, black 0%, transparent 50%, white 100%), linear-gradient(90deg,rgb(' +\n              [r, g, b].join(',') +\n              '), #808080 100%)';\n          } else {\n            let hsv = this.__colorCurrent.getComponent('hsv');\n            angle = hsv.h * 360 + 'deg';\n            actor.handle.style.top = (1 - hsv.v) * 100 + '%';\n            actor.handle.style.left = (1 - hsv.s) * 100 + '%';\n            actor.inner.style.background =\n              'linear-gradient(0deg, black 0%, transparent 50%, white 100%), linear-gradient(90deg,hsl(' +\n              angle +\n              ' 100% 50%), #808080 100%)';\n          }\n          actor.handle_hue.style.transform = 'rotate(' + angle + ')';\n          actor.handle_hue.style.transformOrigin =\n            actor.handle_hueWidth / 2 + 'px ' + (actor.width / 2 - actor.handle_hueTop) + 'px'; //calc(195px / 2 - 3px)';\n        } else {\n          let ratioComponent = this.__colorCurrent.getComponent(type);\n          if (type === 'T') {\n            ratioComponent = (ratioComponent - this.__Tmin) / (this.__Tmax - this.__Tmin);\n          }\n          let length = Math.max(0, Math.min(ratioComponent, 1)) * actor.width;\n          actor.button.style.transform = 'translate3d(' + (length - actor.buttonWidth / 2) + 'px, 0px, 0px)';\n          actor.range.style.clipPath = 'inset(0 ' + (1 - ratioComponent) * 100 + '% 0 0)';\n        }\n      }\n    },\n\n    invalidateScreensize() {\n      this.__actors = undefined; // invalidate cached values\n      this.__animator.setTo(this.__color, true /* tmp */);\n    },\n\n    handleEvent(event) {\n      let relCoordX = 0;\n      let relCoordY = 0;\n      let actor;\n\n      switch (event.type) {\n        case 'pointerdown': {\n          let actorType = event.currentTarget.className.replace(/.*cc_([^ ]*).*/, '$1');\n\n          actor = this.__actors[actorType];\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMinX = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          this.__coordMinY = boundingRect.top;\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          if (actorType === 'wheel') {\n            let radius = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            let sv = cv.ui.structure.pure.ColorChooser.coord2sv(\n              relCoordX,\n              relCoordY,\n              this.__color.getComponent(actor.isLCh ? 'LCh' : 'hsv').h,\n              radius\n            );\n\n            let distSqrd = (relCoordX - 0.5) ** 2 + (relCoordY - 0.5) ** 2;\n            if (distSqrd < (0.5 * 1.07) ** 2) {\n              // ignore clicks outside of the wheel, with 7% safety margin on the outside\n              const clearlyOnWheel = (radius * 1.1) ** 2 < distSqrd; // with 10% safety margin to the interior triangle\n              const closeToInerior = radius ** 2 < distSqrd && !clearlyOnWheel;\n              const closeToTriangleCorners =\n                sv[1] < 0.01 || (sv[0] < 0.01 && sv[1] > 0.99) || (sv[0] > 0.99 && sv[1] > 0.99);\n              if (clearlyOnWheel || (closeToInerior && !closeToTriangleCorners)) {\n                this.__mode = 'wheel_h';\n                this.__changeColor(\n                  actor.isLCh ? 'LCh-h' : 'h',\n                  0.5 + Math.atan2(-relCoordX + 0.5, relCoordY - 0.5) / 2 / Math.PI\n                );\n\n                this.__inDrag = true;\n              } else {\n                this.__mode = 'wheel_sv';\n                this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', sv);\n                this.__inDrag = true;\n              }\n            }\n          } else if (actorType === 'box') {\n            let boxSize = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            let x = relCoordX - 0.5;\n            let y = relCoordY - 0.5;\n            let sv = [-x / boxSize / 2 + 0.5, -y / boxSize / 2 + 0.5];\n            if (Math.abs(x) < boxSize && Math.abs(y) < boxSize) {\n              this.__mode = 'box_sv';\n              this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', sv);\n              this.__inDrag = true;\n            } else {\n              this.__mode = 'box_h';\n              this.__changeColor(actor.isLCh ? 'LCh-h' : 'h', 0.5 + Math.atan2(-x, y) / 2 / Math.PI);\n\n              this.__inDrag = true;\n            }\n          } else {\n            let ratio = relCoordX;\n            if (actorType === 'T') {\n              ratio = this.__Tmin + ratio * (this.__Tmax - this.__Tmin);\n            }\n            this.__mode = actorType;\n            this.__changeColor(actorType, ratio);\n            this.__inDrag = true;\n          }\n          if (this.__inDrag) {\n            document.addEventListener('pointermove', this);\n            document.addEventListener('pointerup', this);\n          } else {\n            this.__mode = undefined;\n          }\n          break;\n        }\n\n        case 'pointermove': {\n          if (!this.__inDrag) {\n            return;\n          }\n          if (event.buttons === 0) {\n            // move with no button could only happen during debug sessions\n            this.__inDrag = false;\n            document.removeEventListener('pointermove', this);\n            document.removeEventListener('pointerup', this);\n          }\n          let type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n          actor = this.__actors[type];\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          break;\n        }\n\n        case 'pointerup': {\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          const type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n          actor = this.__actors[type];\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          break;\n        }\n      }\n\n      if (event.type !== 'pointerdown') {\n        let type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n        let actor = this.__actors[type];\n        switch (this.__mode) {\n          case 'wheel_sv': {\n            const radius = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            const sv = cv.ui.structure.pure.ColorChooser.coord2sv(\n              relCoordX,\n              relCoordY,\n              this.__color.getComponent(actor.isLCh ? 'LCh' : 'hsv').h,\n              radius\n            );\n\n            this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', [\n              Math.min(Math.max(sv[0], 0), 1),\n              Math.min(Math.max(sv[1], 0), 1)\n            ]);\n\n            break;\n          }\n          case 'box_sv': {\n            const boxSize = actor !== undefined ? (0.5 * actor.innerRadius) / actor.outerRadius : 1;\n            const x = relCoordX - 0.5;\n            const y = relCoordY - 0.5;\n            const sv = [-x / boxSize / 2 + 0.5, -y / boxSize / 2 + 0.5];\n            this.__changeColor(actor.isLCh ? 'LCh-CL' : 'sv', [\n              Math.min(Math.max(sv[0], 0), 1),\n              Math.min(Math.max(sv[1], 0), 1)\n            ]);\n\n            break;\n          }\n          case 'wheel_h':\n          case 'box_h':\n            this.__changeColor(\n              actor.isLCh ? 'LCh-h' : 'h',\n              0.5 + Math.atan2(-relCoordX + 0.5, relCoordY - 0.5) / 2 / Math.PI\n            );\n\n            break;\n          case 'T':\n            this.__changeColor(\n              'T',\n              this.__Tmin + Math.max(0, Math.min(relCoordX, 1)) * (this.__Tmax - this.__Tmin)\n            );\n\n            break;\n          default:\n            this.__changeColor(this.__mode, relCoordX);\n        }\n      }\n      this.__animator.setTo(this.__color, true);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call();\n      }\n    },\n\n    __changeColor(component, value) {\n      this.__color.changeComponent(component, value);\n      this.fireEvent('colorChanged');\n    },\n\n    __onChangeValue() {\n      this.__components.forEach(type => {\n        let value = this.__color.getComponent(['xyY', 'x', 'y'].includes(type) ? 'xy' : type);\n\n        let typeCategory;\n        let base;\n\n        switch (type) {\n          case 'h':\n            value *= 360;\n            typeCategory = 'hsv-single';\n            break;\n\n          case 's':\n          case 'v':\n            value *= 100;\n            typeCategory = 'hsv-single';\n            break;\n\n          case 'hsv':\n            value = new Map([\n              ['h', value.h * 360],\n              ['s', value.s * 100],\n              ['v', value.v * 100]\n            ]);\n\n            typeCategory = 'hsv';\n            break;\n\n          case 'RGB-r':\n          case 'RGB-g':\n          case 'RGB-b':\n            base = this.getBaseColors()[type.split('-')[1]];\n            value = cv.util.Color.curve(value, base.curve, base.scale);\n            typeCategory = 'rgb-single';\n            break;\n\n          case 'RGBW-r':\n          case 'RGBW-g':\n          case 'RGBW-b':\n          case 'RGBW-w':\n            base = this.getBaseColors()[type.split('-')[1]];\n            value = cv.util.Color.curve(value, base.curve, base.scale);\n            typeCategory = 'rgbw-single';\n            break;\n\n          case 'rgb':\n            base = this.getBaseColors();\n            value = new Map([\n              ['r', cv.util.Color.curve(value.r, base.r.curve, base.r.scale)],\n              ['g', cv.util.Color.curve(value.g, base.g.curve, base.g.scale)],\n              ['b', cv.util.Color.curve(value.b, base.b.curve, base.b.scale)]\n            ]);\n\n            typeCategory = 'rgb';\n            break;\n\n          case 'rgbw':\n            base = this.getBaseColors();\n            value = new Map([\n              ['r', cv.util.Color.curve(value.r, base.r.curve, base.r.scale)],\n              ['g', cv.util.Color.curve(value.g, base.g.curve, base.g.scale)],\n              ['b', cv.util.Color.curve(value.b, base.b.curve, base.b.scale)],\n              ['w', cv.util.Color.curve(value.w, base.w.curve, base.w.scale)]\n            ]);\n\n            typeCategory = 'rgbw';\n            break;\n\n          case 'xy':\n            value = new Map([\n              ['x', value.x],\n              ['y', value.y]\n            ]);\n\n            typeCategory = 'xyY';\n            break;\n\n          case 'xyY': {\n            let Y = this.__color.getComponent('Y');\n            value = new Map([\n              ['x', value.x],\n              ['y', value.y],\n              ['Y', Y]\n            ]);\n\n            typeCategory = 'xyY';\n            break;\n          }\n\n          case 'Y':\n            typeCategory = 'xyY';\n            break;\n\n          case 'x':\n          case 'y':\n            value = value[type];\n            typeCategory = 'xyY';\n            break;\n        }\n\n        if (this.__lastBusValue[typeCategory] === undefined) {\n          this.__lastBusValue[typeCategory] = {};\n        }\n        this.__lastBusValue[typeCategory][type] = this.sendToBackend(\n          value,\n          t => t.variantInfo === type,\n          this.__lastBusValue[typeCategory][type]\n        );\n      });\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('colorchooser', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}