{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "HasChildren",
    "properties",
    "anonymous",
    "refine",
    "init",
    "name",
    "check",
    "nullable",
    "scope",
    "width",
    "position",
    "dynamic",
    "visible",
    "statics",
    "_navbarTop",
    "_navbarLeft",
    "_navbarRight",
    "_navbarBottom",
    "_touchX",
    "_touchY",
    "initializeNavbars",
    "forEach",
    "pos",
    "elem",
    "document",
    "querySelector",
    "innerHTML",
    "self",
    "content",
    "body",
    "addEventListener",
    "evt",
    "touches",
    "pPH",
    "Application",
    "structureController",
    "pagePartsHandler",
    "navbars",
    "left",
    "core",
    "Init",
    "getApplication",
    "getMobile",
    "fadeVisible",
    "composedPath",
    "some",
    "i",
    "id",
    "clientX",
    "clientY",
    "passive",
    "x",
    "y",
    "necessaryDistance",
    "enoughDistance",
    "Math",
    "abs",
    "horizontal",
    "toRight",
    "preventDefault",
    "fadeNavbar",
    "members",
    "_onDomReady",
    "getGlobalPath",
    "getPath",
    "split",
    "pop",
    "join",
    "getPosition",
    "getDomString",
    "container",
    "getClasses",
    "getName",
    "getChildrenDomString",
    "defer",
    "WidgetFactory",
    "registerClass",
    "event",
    "message",
    "Bus",
    "subscribe",
    "NavBar"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NavBar.js"
  ],
  "sourcesContent": [
    "/* NavBar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * With the widget navbar, you can add a navigation menu to the entire visu.\n * The menu can be displayed on a page (top, bottom, left, right).\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.NavBar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous: {\n      refine: true,\n      init: true\n    },\n\n    name: {\n      check: 'String',\n      nullable: true\n    },\n\n    scope: {\n      check: 'Number',\n      init: -1\n    },\n\n    width: {\n      check: 'String',\n      init: '300'\n    },\n\n    position: {\n      check: ['top', 'left', 'right', 'bottom'],\n      init: 'left'\n    },\n\n    dynamic: {\n      check: 'Boolean',\n      nullable: true,\n      init: null\n    },\n\n    visible: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    _navbarTop: '',\n    _navbarLeft: '',\n    _navbarRight: '',\n    _navbarBottom: '',\n    _touchX: null,\n    _touchY: null,\n\n    /**\n     * Called on setup.dom.finished event with high priority. Adds the navbar dom string\n     * to the DOM-Tree\n     */\n    initializeNavbars() {\n      ['Top', 'Left', 'Right', 'Bottom'].forEach(function (pos) {\n        if (this['_navbar' + pos]) {\n          const elem = document.querySelector('#navbar' + pos);\n          if (elem) {\n            elem.innerHTML += this['_navbar' + pos];\n          }\n        }\n      }, this);\n\n      const self = this;\n      // Event handlers to allow navbar fade in and fade out.\n      // Currently only implemented for the major use case of a left navbar.\n      // TODO add logic for other navbars as well\n      // Logic:\n      //   To fade in the touch must start on the left screen side and then\n      //   swipe right.\n      //   To fade out all places on the screen are fine.\n      //   There is a minimum swipe distance and the direction must be mostly\n      //   horizontal (up to +/-45Â° tolerance is allowed)\n      //   When during a valid swipe the direction is reversed the fading\n      //   action is also reverted.\n      const content = document.body.querySelector('#centerContainer');\n      content.addEventListener(\n        'touchstart',\n        function (evt) {\n          const touches = evt.touches[0];\n          const pPH = cv.Application.structureController.pagePartsHandler;\n\n          if (\n            pPH.navbars.left.dynamic === false ||\n            (!qx.core.Init.getApplication().getMobile() && pPH.navbars.left.dynamic !== true) ||\n            (pPH.navbars.left.fadeVisible && !evt.composedPath().some(i => i.id === 'navbarLeft')) || // left navbar is visible, but the touch is somewhere else\n            (!pPH.navbars.left.fadeVisible && touches.clientX > 20)\n          ) {\n            // left navbar is not visible but the finger isn't on the left end -> not relevant\n            return;\n          }\n\n          self._touchX = touches.clientX;\n          self._touchY = touches.clientY;\n        },\n        { passive: true }\n      );\n\n      content.addEventListener(\n        'touchend',\n        function () {\n          self._touchX = null;\n          self._touchY = null;\n        },\n        false\n      );\n\n      content.addEventListener(\n        'touchmove',\n        function (evt) {\n          if (self._touchX === null) {\n            return; // early exit as this touch isn't relevant for us\n          }\n\n          const touches = evt.touches[0];\n          const x = touches.clientX - self._touchX;\n          const y = touches.clientY - self._touchY;\n          const necessaryDistance = 10;\n          const enoughDistance = Math.abs(x) > necessaryDistance;\n          const horizontal = Math.abs(x) > Math.abs(y);\n          const toRight = x > 0;\n          if (horizontal && enoughDistance) {\n            evt.preventDefault();\n            const pPH = cv.Application.structureController.pagePartsHandler;\n            if (toRight) {\n              self._touchX = touches.clientX - necessaryDistance;\n              self._touchY = touches.clientY;\n              if (!pPH.navbars.left.fadeVisible) {\n                pPH.fadeNavbar('Left', 'in', 250);\n              }\n            } else {\n              // !toRight\n              self._touchX = touches.clientX + necessaryDistance;\n              self._touchY = touches.clientY;\n              if (pPH.navbars.left.fadeVisible) {\n                pPH.fadeNavbar('Left', 'out', 250);\n              }\n            }\n          }\n        },\n        { passive: false }\n      );\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady() {},\n\n    getGlobalPath() {\n      const id = this.getPath().split('_');\n      id.pop();\n      return id.join('_') + '_' + this.getPosition() + '_navbar';\n    },\n\n    // overridden\n    getDomString() {\n      let container = '<div class=\"' + this.getClasses() + '\" id=\"' + this.getGlobalPath() + '\">';\n      if (this.getName()) {\n        container += '<h2>' + this.getName() + '</h2>';\n      }\n      container += this.getChildrenDomString();\n\n      container += '</div>';\n\n      // add this to the navbars in DOM not inside the page\n      switch (this.getPosition()) {\n        case 'top':\n          this.self(arguments)._navbarTop += container;\n          break;\n\n        case 'left':\n          this.self(arguments)._navbarLeft += container;\n          break;\n\n        case 'right':\n          this.self(arguments)._navbarRight += container;\n          break;\n\n        case 'bottom':\n          this.self(arguments)._navbarBottom += container;\n          break;\n      }\n\n      return '';\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('navbar', statics);\n    qx.event.message.Bus.subscribe('setup.dom.finished.before', statics.initializeNavbars, statics);\n  }\n});\n"
  ],
  "mappings": "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"
}