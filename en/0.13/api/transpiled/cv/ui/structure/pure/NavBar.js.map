{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NavBar.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "HasChildren",
    "properties",
    "anonymous",
    "refine",
    "init",
    "name",
    "check",
    "nullable",
    "scope",
    "width",
    "position",
    "dynamic",
    "visible",
    "statics",
    "_navbarTop",
    "_navbarLeft",
    "_navbarRight",
    "_navbarBottom",
    "_touchX",
    "_touchY",
    "initializeNavbars",
    "forEach",
    "pos",
    "elem",
    "document",
    "querySelector",
    "innerHTML",
    "self",
    "content",
    "body",
    "addEventListener",
    "evt",
    "touches",
    "pPH",
    "Application",
    "structureController",
    "pagePartsHandler",
    "navbars",
    "left",
    "core",
    "Init",
    "getApplication",
    "getMobile",
    "fadeVisible",
    "composedPath",
    "some",
    "i",
    "id",
    "clientX",
    "clientY",
    "passive",
    "x",
    "y",
    "necessaryDistance",
    "enoughDistance",
    "Math",
    "abs",
    "horizontal",
    "toRight",
    "preventDefault",
    "fadeNavbar",
    "members",
    "_onDomReady",
    "getGlobalPath",
    "getPath",
    "split",
    "pop",
    "join",
    "getPosition",
    "getDomString",
    "container",
    "getClasses",
    "getName",
    "getChildrenDomString",
    "defer",
    "WidgetFactory",
    "registerClass",
    "event",
    "message",
    "Bus",
    "subscribe",
    "NavBar"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* NavBar.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the widget navbar, you can add a navigation menu to the entire visu.\n * The menu can be displayed on a page (top, bottom, left, right).\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.NavBar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    name: {\n      check: 'String',\n      nullable: true\n    },\n    scope: {\n      check: 'Number',\n      init: -1\n    },\n    width: {\n      check: 'String',\n      init: '300'\n    },\n    position: {\n      check: ['top', 'left', 'right', 'bottom'], \n      init: 'left'\n    },\n    dynamic: {\n      check: 'Boolean',\n      nullable : true,\n      init: null\n    },\n    visible: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    _navbarTop: '',\n    _navbarLeft: '',\n    _navbarRight: '',\n    _navbarBottom: '',\n    _touchX: null,\n    _touchY: null,\n\n    /**\n     * Called on setup.dom.finished event with high priority. Adds the navbar dom string\n     * to the DOM-Tree\n     */\n    initializeNavbars: function() {\n      ['Top', 'Left', 'Right', 'Bottom'].forEach(function(pos) {\n        if (this['_navbar'+pos]) {\n          const elem = document.querySelector('#navbar' + pos);\n          if (elem) {\n            elem.innerHTML += this['_navbar' + pos];\n          }\n        }\n      }, this);\n\n      const self = this;\n      // Event handlers to allow navbar fade in and fade out.\n      // Currently only implemented for the major use case of a left navbar.\n      // TODO add logic for other navbars as well\n      // Logic:\n      //   To fade in the touch must start on the left screen side and then\n      //   swipe right.\n      //   To fade out all places on the screen are fine.\n      //   There is a minimum swipe distance and the direction must be mostly\n      //   horizontal (up to +/-45Â° tolerance is allowed)\n      //   When during a valid swipe the direction is reversed the fading\n      //   action is also reverted.\n      const content = document.body.querySelector('#centerContainer');\n      content.addEventListener('touchstart', function (evt) {\n        const touches = evt.touches[0];\n        const pPH = cv.Application.structureController.pagePartsHandler;\n\n        if (pPH.navbars.left.dynamic === false ||\n          (!qx.core.Init.getApplication().getMobile() && pPH.navbars.left.dynamic !== true) ||\n          (pPH.navbars.left.fadeVisible && !evt.composedPath().some(i => i.id==='navbarLeft')) || // left navbar is visible, but the touch is somewhere else\n          (!pPH.navbars.left.fadeVisible && touches.clientX > 20)) { // left navbar is not visible but the finger isn't on the left end -> not relevant\n          return;\n        }\n\n        self._touchX = touches.clientX;\n        self._touchY = touches.clientY;\n      }, {passive: true});\n      content.addEventListener('touchend', function () {\n        self._touchX = null;\n        self._touchY = null;\n      }, false);\n      content.addEventListener('touchmove', function (evt) {\n        if (self._touchX === null) {\n          return; // early exit as this touch isn't relevant for us\n        }\n\n        const touches = evt.touches[0];\n        const x = touches.clientX - self._touchX;\n        const y = touches.clientY - self._touchY;\n        const necessaryDistance = 10;\n        const enoughDistance = Math.abs(x) > necessaryDistance;\n        const horizontal = Math.abs(x) > Math.abs(y);\n        const toRight = x > 0;\n        if (horizontal && enoughDistance) {\n          evt.preventDefault();\n          const pPH = cv.Application.structureController.pagePartsHandler;\n          if (toRight) {\n            self._touchX = touches.clientX - necessaryDistance;\n            self._touchY = touches.clientY;\n            if (!pPH.navbars.left.fadeVisible) {\n              pPH.fadeNavbar('Left', 'in', 250);\n            }\n          } else { // !toRight\n            self._touchX = touches.clientX + necessaryDistance;\n            self._touchY = touches.clientY;\n            if (pPH.navbars.left.fadeVisible) {\n              pPH.fadeNavbar('Left', 'out', 250);\n            }\n          }\n        }\n      }, {passive: false});\n    }\n  },\n  \n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n    },\n    \n    getGlobalPath: function () {\n      const id = this.getPath().split('_');\n      id.pop();\n      return id.join('_') + '_' + this.getPosition() + '_navbar';\n    },\n\n    // overridden\n    getDomString: function () {\n      let container = '<div class=\"' + this.getClasses() + '\" id=\"' + this.getGlobalPath() + '\">';\n      if (this.getName()) {\n        container += '<h2>' + this.getName() + '</h2>';\n      }\n      container += this.getChildrenDomString();\n\n      container += '</div>';\n\n      // add this to the navbars in DOM not inside the page\n      switch (this.getPosition()) {\n        case 'top':\n          this.self(arguments)._navbarTop += container;\n          break;\n\n        case 'left':\n          this.self(arguments)._navbarLeft += container;\n          break;\n\n        case 'right':\n          this.self(arguments)._navbarRight += container;\n          break;\n\n        case 'bottom':\n          this.self(arguments)._navbarBottom += container;\n          break;\n      }\n\n      return '';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('navbar', statics);\n    qx.event.message.Bus.subscribe('setup.dom.finished.before', statics.initializeNavbars, statics);\n  }\n});\n"
  ]
}