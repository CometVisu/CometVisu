{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "HasChildren",
    "properties",
    "anonymous",
    "refine",
    "init",
    "name",
    "check",
    "nullable",
    "scope",
    "width",
    "position",
    "dynamic",
    "visible",
    "statics",
    "_navbarTop",
    "_navbarLeft",
    "_navbarRight",
    "_navbarBottom",
    "_touchX",
    "_touchY",
    "initializeNavbars",
    "forEach",
    "pos",
    "elem",
    "document",
    "querySelector",
    "innerHTML",
    "self",
    "content",
    "body",
    "addEventListener",
    "evt",
    "touches",
    "pPH",
    "Application",
    "structureController",
    "pagePartsHandler",
    "navbars",
    "left",
    "core",
    "Init",
    "getApplication",
    "getMobile",
    "fadeVisible",
    "composedPath",
    "some",
    "i",
    "id",
    "clientX",
    "clientY",
    "passive",
    "x",
    "y",
    "necessaryDistance",
    "enoughDistance",
    "Math",
    "abs",
    "horizontal",
    "toRight",
    "preventDefault",
    "fadeNavbar",
    "members",
    "_onDomReady",
    "getGlobalPath",
    "getPath",
    "split",
    "pop",
    "join",
    "getPosition",
    "getDomString",
    "container",
    "getClasses",
    "getName",
    "getChildrenDomString",
    "NavBar",
    "defer",
    "WidgetFactory",
    "registerClass",
    "event",
    "message",
    "Bus",
    "subscribe"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NavBar.js"
  ],
  "sourcesContent": [
    "/* NavBar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * With the widget navbar, you can add a navigation menu to the entire visu.\n * The menu can be displayed on a page (top, bottom, left, right).\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.NavBar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous: {\n      refine: true,\n      init: true\n    },\n\n    name: {\n      check: 'String',\n      nullable: true\n    },\n\n    scope: {\n      check: 'Number',\n      init: -1\n    },\n\n    width: {\n      check: 'String',\n      init: '300'\n    },\n\n    position: {\n      check: ['top', 'left', 'right', 'bottom'],\n      init: 'left'\n    },\n\n    dynamic: {\n      check: 'Boolean',\n      nullable: true,\n      init: null\n    },\n\n    visible: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    _navbarTop: '',\n    _navbarLeft: '',\n    _navbarRight: '',\n    _navbarBottom: '',\n    _touchX: null,\n    _touchY: null,\n\n    /**\n     * Called on setup.dom.finished event with high priority. Adds the navbar dom string\n     * to the DOM-Tree\n     */\n    initializeNavbars() {\n      ['Top', 'Left', 'Right', 'Bottom'].forEach(function (pos) {\n        if (this['_navbar' + pos]) {\n          const elem = document.querySelector('#navbar' + pos);\n          if (elem) {\n            elem.innerHTML += this['_navbar' + pos];\n          }\n        }\n      }, this);\n\n      const self = this;\n      // Event handlers to allow navbar fade in and fade out.\n      // Currently only implemented for the major use case of a left navbar.\n      // TODO add logic for other navbars as well\n      // Logic:\n      //   To fade in the touch must start on the left screen side and then\n      //   swipe right.\n      //   To fade out all places on the screen are fine.\n      //   There is a minimum swipe distance and the direction must be mostly\n      //   horizontal (up to +/-45Â° tolerance is allowed)\n      //   When during a valid swipe the direction is reversed the fading\n      //   action is also reverted.\n      const content = document.body.querySelector('#centerContainer');\n      content.addEventListener(\n        'touchstart',\n        function (evt) {\n          const touches = evt.touches[0];\n          const pPH = cv.Application.structureController.pagePartsHandler;\n\n          if (\n            pPH.navbars.left.dynamic === false ||\n            (!qx.core.Init.getApplication().getMobile() && pPH.navbars.left.dynamic !== true) ||\n            (pPH.navbars.left.fadeVisible && !evt.composedPath().some(i => i.id === 'navbarLeft')) || // left navbar is visible, but the touch is somewhere else\n            (!pPH.navbars.left.fadeVisible && touches.clientX > 20)\n          ) {\n            // left navbar is not visible but the finger isn't on the left end -> not relevant\n            return;\n          }\n\n          self._touchX = touches.clientX;\n          self._touchY = touches.clientY;\n        },\n        { passive: true }\n      );\n\n      content.addEventListener(\n        'touchend',\n        function () {\n          self._touchX = null;\n          self._touchY = null;\n        },\n        false\n      );\n\n      content.addEventListener(\n        'touchmove',\n        function (evt) {\n          if (self._touchX === null) {\n            return; // early exit as this touch isn't relevant for us\n          }\n\n          const touches = evt.touches[0];\n          const x = touches.clientX - self._touchX;\n          const y = touches.clientY - self._touchY;\n          const necessaryDistance = 10;\n          const enoughDistance = Math.abs(x) > necessaryDistance;\n          const horizontal = Math.abs(x) > Math.abs(y);\n          const toRight = x > 0;\n          if (horizontal && enoughDistance) {\n            evt.preventDefault();\n            const pPH = cv.Application.structureController.pagePartsHandler;\n            if (toRight) {\n              self._touchX = touches.clientX - necessaryDistance;\n              self._touchY = touches.clientY;\n              if (!pPH.navbars.left.fadeVisible) {\n                pPH.fadeNavbar('Left', 'in', 250);\n              }\n            } else {\n              // !toRight\n              self._touchX = touches.clientX + necessaryDistance;\n              self._touchY = touches.clientY;\n              if (pPH.navbars.left.fadeVisible) {\n                pPH.fadeNavbar('Left', 'out', 250);\n              }\n            }\n          }\n        },\n        { passive: false }\n      );\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady() {},\n\n    getGlobalPath() {\n      const id = this.getPath().split('_');\n      id.pop();\n      return id.join('_') + '_' + this.getPosition() + '_navbar';\n    },\n\n    // overridden\n    getDomString() {\n      let container = '<div class=\"' + this.getClasses() + '\" id=\"' + this.getGlobalPath() + '\">';\n      if (this.getName()) {\n        container += '<h2>' + this.getName() + '</h2>';\n      }\n      container += this.getChildrenDomString();\n\n      container += '</div>';\n\n      // add this to the navbars in DOM not inside the page\n      switch (this.getPosition()) {\n        case 'top':\n          this.self(arguments)._navbarTop += container;\n          break;\n\n        case 'left':\n          this.self(arguments)._navbarLeft += container;\n          break;\n\n        case 'right':\n          this.self(arguments)._navbarRight += container;\n          break;\n\n        case 'bottom':\n          this.self(arguments)._navbarBottom += container;\n          break;\n      }\n\n      return '';\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('navbar', statics);\n    qx.event.message.Bus.subscribe('setup.dom.finished.before', statics.initializeNavbars, statics);\n  }\n});\n"
  ],
  "mappings": "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"
}