{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "svg",
    "RoundValue",
    "include",
    "energy",
    "MEntity",
    "MConnectable",
    "statics",
    "typeSettings",
    "pv",
    "icon",
    "styling",
    "battery",
    "grid",
    "house",
    "charger",
    "heatpump",
    "consumer",
    "members",
    "_applyType",
    "value",
    "settings",
    "PowerEntity",
    "attribute",
    "_element",
    "setAttribute",
    "_init",
    "_this",
    "superclass",
    "prototype",
    "call",
    "element",
    "hasAttribute",
    "_svg",
    "getAttribute",
    "_noValue",
    "querySelectorAll",
    "length",
    "setUseConnectionSum",
    "getType",
    "_iterator",
    "_createForOfIteratorHelper",
    "_step",
    "s",
    "n",
    "done",
    "elem",
    "remove",
    "err",
    "e",
    "f",
    "_iconSize",
    "querySelector",
    "style",
    "fontSize",
    "window",
    "requestAnimationFrame",
    "_applyConnectTo",
    "getConnectTo",
    "_applyConnectFrom",
    "getConnectFrom",
    "addListener",
    "_updateDirection",
    "defer",
    "QxClass",
    "_class",
    "customElements",
    "Controller",
    "PREFIX",
    "_QxConnector",
    "_inherits",
    "_super",
    "_createSuper",
    "_classCallCheck",
    "_createClass",
    "QxConnector",
    "_defineProperty"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/PowerEntity.js"
  ],
  "sourcesContent": [
    "/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * cv.ui.structure.tile.components.svg.RoundValue for power entities.\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Class.define('cv.ui.structure.tile.components.energy.PowerEntity', {\n  extend: cv.ui.structure.tile.components.svg.RoundValue,\n  include: [\n    cv.ui.structure.tile.components.energy.MEntity,\n    cv.ui.structure.tile.components.energy.MConnectable\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    typeSettings: {\n      pv: {\n        icon: 'knxuf-weather_sun',\n        styling: 'tile-pv-power'\n      },\n      battery: {\n        icon: 'knxuf-measure_battery_100',\n        styling: 'tile-battery-power',\n        'foreground-color': 'var(--batteryConsumeColor)'\n      },\n      grid: {\n        icon: 'knxuf-scene_power_grid',\n        styling: 'tile-grid-power'\n      },\n      house: {\n        icon: 'knxuf-control_building_empty'\n      },\n      charger: {\n        icon: 'knxuf-veh_wallbox'\n      },\n      heatpump: {\n        icon: 'knxuf-sani_earth_source_heat_pump'\n      },\n      consumer: {\n        icon: 'knxuf-measure_smart_meter'\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyType(value) {\n      const settings = cv.ui.structure.tile.components.energy.PowerEntity.typeSettings[value];\n      if (settings) {\n        for (const attribute in settings) {\n          this._element.setAttribute(attribute, settings[attribute]);\n        }\n      }\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('id')) {\n        this._svg.setAttribute('id', element.getAttribute('id'));\n      }\n      if (!element.hasAttribute('mapping')) {\n        element.setAttribute('mapping', 'tile-kilo-watts');\n      }\n      this._noValue = element.querySelectorAll(':scope > cv-address, :scope > cv-address-group').length === 0;\n      this.setUseConnectionSum(this._noValue && this.getType() === 'house');\n      if (this._noValue && this.getType() !== 'house') {\n        // this has no addresses and therefore no values, we only show the icon then without circle\n        for (const elem of this._svg.querySelectorAll('circle, text:not(.icon)')) {\n          elem.remove();\n        }\n        this._iconSize = 32;\n        const icon = this._svg.querySelector('text.icon');\n        if (icon) {\n          icon.style.fontSize = this._iconSize + 'px';\n        }\n      }\n      window.requestAnimationFrame(() => {\n        this._applyConnectTo(this.getConnectTo());\n        this._applyConnectFrom(this.getConnectFrom());\n      });\n\n      this.addListener('changeValue', this._updateDirection, this);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'power-entity',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'type', 'stroke', 'radius', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'foreground-color', 'connect-to', 'connect-from', 'connection-points'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}