{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "elements",
    "AbstractCustomElement",
    "type",
    "properties",
    "value",
    "apply",
    "init",
    "styleClass",
    "check",
    "nullable",
    "enabled",
    "visibility",
    "event",
    "widget",
    "inPopup",
    "members",
    "_writeAddresses",
    "_headerFooterParent",
    "_checkIfWidget",
    "isWidget",
    "isPopup",
    "_element",
    "parentElement",
    "localName",
    "i",
    "parent",
    "startsWith",
    "document",
    "getElementById",
    "substring",
    "setInPopup",
    "setWidget",
    "_init",
    "element",
    "hasReadAddress",
    "writeAddresses",
    "Array",
    "prototype",
    "forEach",
    "call",
    "querySelectorAll",
    "address",
    "mode",
    "hasAttribute",
    "getAttribute",
    "push",
    "addEventListener",
    "ev",
    "onStateUpdate",
    "stopPropagation",
    "appendToHeader",
    "align",
    "header",
    "querySelector",
    "createElement",
    "insertBefore",
    "firstElementChild",
    "targetParent",
    "classList",
    "add",
    "appendChild",
    "getHeader",
    "selector",
    "appendToFooter",
    "footer",
    "getFooter",
    "_applyValue",
    "isConnected",
    "setAttribute",
    "mappedValue",
    "Application",
    "structureController",
    "mapValue",
    "util",
    "String",
    "sprintf",
    "Date",
    "toLocaleString",
    "_updateValue",
    "styleValue",
    "setStyleClass",
    "_applyStyleClass",
    "oldValue",
    "classes",
    "contains",
    "replace",
    "remove",
    "_applyEnabled",
    "blocker",
    "preventDefault",
    "style",
    "display",
    "_applyVisibility",
    "target",
    "opacity",
    "detail",
    "setEnabled",
    "state",
    "setVisibility",
    "setValue",
    "destruct",
    "components",
    "AbstractComponent"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/AbstractComponent.js"
  ],
  "sourcesContent": [
    "/* AbstractComponent.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Base class for all components.\n */\nqx.Class.define('cv.ui.structure.tile.components.AbstractComponent', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      apply: '_applyValue',\n      init: null\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    enabled: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyEnabled'\n    },\n\n    visibility: {\n      check: ['visible', 'excluded', 'hidden'],\n      init: 'visible',\n      apply: '_applyVisibility',\n      event: 'changeVisibility'\n    },\n\n    /**\n     * True if this tile is the content of a template based widget\n     */\n    widget: {\n      check: 'Boolean',\n      init: 'false'\n    },\n\n    /**\n     * True if this tile is the content of a popup\n     */\n    inPopup: {\n      check: 'Boolean',\n      init: 'false'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    _headerFooterParent: null,\n\n    _checkIfWidget() {\n      let isWidget = false;\n      let isPopup = false;\n      if (this._element.parentElement.localName === 'cv-popup') {\n        this._headerFooterParent = this._element.parentElement;\n        isPopup = true;\n      } else {\n        let tile = this._element;\n        let i = 0;\n        // we are looking for cv-tile parent which is the direct child of a widget\n        while (tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n          i++;\n          if (i > 2) {\n            tile = null;\n            break;\n          }\n        }\n        if (tile) {\n          let parent = tile.parentElement;\n          this._headerFooterParent = parent;\n          if (parent.localName === 'cv-popup') {\n            isPopup = true;\n          } else if (parent.localName.startsWith('cv-')) {\n            isWidget = parent.localName === 'cv-widget' || !!document.getElementById(parent.localName.substring(3));\n          }\n        }\n      }\n      this.setInPopup(isPopup);\n      this.setWidget(isWidget);\n    },\n\n    _init() {\n      this._checkIfWidget();\n\n      const element = this._element;\n      let hasReadAddress = false;\n      const writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    /**\n     * Append the given element to a header inside the widget this component is a direct child of.\n     * If the header does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     * @param align {String} center (default), left or right\n     */\n    appendToHeader(element, align) {\n      if (this._headerFooterParent) {\n        let header = this._headerFooterParent.querySelector(':scope > header');\n        if (!header) {\n          header = document.createElement('header');\n          this._headerFooterParent.insertBefore(header, this._headerFooterParent.firstElementChild);\n        }\n        let targetParent = header;\n        if (align) {\n          targetParent = header.querySelector('.' + align);\n          if (!targetParent) {\n            targetParent = document.createElement('div');\n            targetParent.classList.add(align);\n          }\n          header.appendChild(targetParent);\n        }\n        targetParent.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the header or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getHeader(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > header');\n        } \n          const header = this._headerFooterParent.querySelector(':scope > header');\n          if (header) {\n            return header.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Append the given element to a footer inside the widget this component is a direct child of.\n     * If the footer does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     */\n    appendToFooter(element) {\n      if (this._headerFooterParent) {\n        let footer = this._headerFooterParent.querySelector(':scope > footer');\n        if (!footer) {\n          footer = document.createElement('footer');\n          this._headerFooterParent.appendChild(footer);\n        }\n        footer.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the footer or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getFooter(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > footer');\n        } \n          const footer = this._headerFooterParent.querySelector(':scope > footer');\n          if (footer) {\n            return footer.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    // property apply\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping') && this._element.getAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(this._element.getAttribute('mapping'), value);\n        }\n        if (this._element.hasAttribute('format') && this._element.getAttribute('format')) {\n          mappedValue = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            mappedValue instanceof Date ? mappedValue.toLocaleString() : mappedValue\n          );\n        }\n        this._updateValue(mappedValue, value);\n        if (this._element.hasAttribute('styling') && this._element.getAttribute('styling')) {\n          let styleClass = cv.Application.structureController.styleValue(this._element.getAttribute('styling'), value);\n\n          this.setStyleClass(styleClass);\n        }\n      }\n    },\n\n    // needs to be implemented by inheriting classes\n    _updateValue(mappedValue, value) {},\n\n    // property apply\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyEnabled(value) {\n      let blocker = this._element.querySelector(':scope > .blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('blocker');\n        this._element.appendChild(blocker);\n        blocker.addEventListener('click', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerdown', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerup', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n      }\n      this._element.setAttribute('disabled', value === false ? 'true' : 'false');\n\n      blocker.style.display = value === true ? 'none' : 'block';\n    },\n\n    _applyVisibility(value, oldValue) {\n      const target = this.isWidget() ? this._element.parentElement : this._element;\n      if (oldValue === 'hidden') {\n        target.style.opacity = '1.0';\n      }\n      switch (value) {\n        case 'visible':\n          target.style.display = null;\n          break;\n\n        case 'hidden':\n          target.style.opacity = '0';\n          break;\n\n        case 'excluded':\n          target.style.display = 'none';\n          break;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     * @return {Boolean} true of the update has been handled\n     */\n    onStateUpdate(ev) {\n      switch (ev.detail.target) {\n        case 'enabled':\n          this.setEnabled(ev.detail.state === 1);\n          ev.stopPropagation();\n          return true;\n        case 'show-exclude':\n          this.setVisibility(ev.detail.state ? 'visible' : 'excluded');\n          ev.stopPropagation();\n          return true;\n        case 'show-hide':\n          this.setVisibility(ev.detail.state ? 'visible' : 'hidden');\n          ev.stopPropagation();\n          return true;\n        case '':\n          this.setValue(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n      }\n\n      return false;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._writeAddresses = null;\n    this._headerFooterParent = null;\n  }\n});\n"
  ],
  "mappings": "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"
}