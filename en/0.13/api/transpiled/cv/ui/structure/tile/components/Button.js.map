{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "elements",
    "AbstractCustomElement",
    "construct",
    "element",
    "__store",
    "Map",
    "properties",
    "type",
    "check",
    "init",
    "on",
    "apply",
    "onClass",
    "offClass",
    "onValue",
    "offValue",
    "styleClass",
    "nullable",
    "name",
    "progress",
    "transform",
    "members",
    "_writeAddresses",
    "__textLabel",
    "__circumference",
    "_parseInt",
    "val",
    "intVal",
    "parseInt",
    "Number",
    "isNaN",
    "_init",
    "_element",
    "hasAttribute",
    "setType",
    "getAttribute",
    "setName",
    "setProgress",
    "setOnValue",
    "setOffValue",
    "hasReadAddress",
    "writeAddresses",
    "Array",
    "prototype",
    "forEach",
    "call",
    "querySelectorAll",
    "address",
    "mode",
    "push",
    "length",
    "events",
    "eventSource",
    "parent",
    "parentElement",
    "level",
    "tagName",
    "toLowerCase",
    "classList",
    "add",
    "addr",
    "event",
    "click",
    "onClicked",
    "bind",
    "pointerup",
    "onPointerUp",
    "pointerdown",
    "onPointerDown",
    "Object",
    "getOwnPropertyNames",
    "eventName",
    "addEventListener",
    "ev",
    "onStateUpdate",
    "stopPropagation",
    "triggerAddresses",
    "filter",
    "value",
    "Timer",
    "once",
    "setOn",
    "getOnValue",
    "hasDown",
    "hasUp",
    "some",
    "_initProgress",
    "Math",
    "PI",
    "svg",
    "document",
    "createElementNS",
    "setAttribute",
    "circle",
    "appendChild",
    "_applyConnected",
    "getType",
    "_applyOn",
    "isConnected",
    "isOn",
    "getOffValue",
    "mappedValue",
    "Application",
    "structureController",
    "mapValue",
    "target",
    "querySelector",
    "_instance",
    "setId",
    "textContent",
    "updateValue",
    "getOnClass",
    "getOffClass",
    "styleValue",
    "setStyleClass",
    "_applyProgress",
    "valueElement",
    "_applyStyleClass",
    "oldValue",
    "classes",
    "contains",
    "replace",
    "remove",
    "_applyName",
    "createElement",
    "elem",
    "innerHTML",
    "detail",
    "state",
    "source",
    "Address",
    "addressElement",
    "getElement",
    "startsWith",
    "set",
    "substring",
    "createRipple",
    "CustomEvent",
    "dispatchEvent",
    "button",
    "currentTarget",
    "container",
    "diameter",
    "max",
    "clientWidth",
    "clientHeight",
    "radius",
    "style",
    "width",
    "height",
    "x",
    "clientX",
    "offsetLeft",
    "y",
    "clientY",
    "offsetTop",
    "offsetParent",
    "left",
    "top",
    "ripple",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "components",
    "Button"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Button.js"
  ],
  "sourcesContent": [
    "/* Button.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Button', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__store = new Map();\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['button', 'trigger', 'push'],\n      init: 'button'\n    },\n\n    on: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOn'\n    },\n\n    onClass: {\n      check: 'String',\n      init: 'active'\n    },\n\n    offClass: {\n      check: 'String',\n      init: 'inactive'\n    },\n\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      apply: '_applyName'\n    },\n\n    progress: {\n      check: 'Number',\n      init: -1,\n      apply: '_applyProgress',\n      transform: '_parseInt'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    __textLabel: null,\n    __circumference: null,\n    /**\n     * @var {Map} value store for addresses to be able to use them e.g. in mapping formulas\n     */\n    __store: null,\n\n    _parseInt(val) {\n      const intVal = parseInt(val);\n      return Number.isNaN(intVal) ? 0 : intVal;\n    },\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      if (element.hasAttribute('name')) {\n        this.setName(element.getAttribute('name'));\n      }\n      if (element.hasAttribute('progress')) {\n        this.setProgress(element.getAttribute('progress'));\n      }\n      if (element.hasAttribute('on-value')) {\n        this.setOnValue(element.getAttribute('on-value'));\n      }\n      if (element.hasAttribute('off-value')) {\n        this.setOffValue(element.getAttribute('off-value'));\n      }\n      let hasReadAddress = false;\n      let writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      if (writeAddresses.length > 0) {\n        const events = {};\n        let eventSource = element;\n        if (element.getAttribute('whole-tile') === 'true') {\n          // find parent tile and use it as event source\n          let parent = element.parentElement;\n          let level = 0;\n          while (level <= 2) {\n            parent = parent.parentElement;\n            level++;\n            if (parent.tagName.toLowerCase() === 'cv-tile') {\n              eventSource = parent;\n              eventSource.classList.add('clickable');\n            }\n          }\n        }\n        writeAddresses.forEach(addr => {\n          let event = addr.hasAttribute('on') ? addr.getAttribute('on') : 'click';\n          switch (event) {\n            case 'click':\n              events.click = this.onClicked.bind(this);\n              break;\n            case 'up':\n              events.pointerup = this.onPointerUp.bind(this);\n              break;\n            case 'down':\n              events.pointerdown = this.onPointerDown.bind(this);\n              break;\n          }\n        });\n        Object.getOwnPropertyNames(events).forEach(eventName =>\n          eventSource.addEventListener(eventName, ev => {\n            events[eventName](ev);\n          })\n        );\n      }\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      } else if (element.hasAttribute('mapping') || element.hasAttribute('styling')) {\n        // apply the trigger state\n        const triggerAddresses = writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on'));\n\n        if (triggerAddresses.length === 1) {\n          const value = triggerAddresses[0].getAttribute('value');\n          qx.event.Timer.once(\n            () => {\n              // using == comparisons to make sure that e.g. 1 equals \"1\"\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setOn(value == this.getOnValue());\n            },\n            this,\n            1000\n          );\n        }\n      }\n\n      // detect button type\n      if (\n        !hasReadAddress &&\n        writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on')).length === 1\n      ) {\n        // only one write address with a fixed value and no special event => simple trigger\n        this.setType('trigger');\n      } else {\n        let hasDown = false;\n        let hasUp = false;\n        writeAddresses.some(addr => {\n          if (addr.hasAttribute('value') && addr.hasAttribute('on')) {\n            if (!hasDown) {\n              hasDown = addr.getAttribute('on') === 'down';\n            }\n            if (!hasUp) {\n              hasUp = addr.getAttribute('on') === 'up';\n            }\n          }\n          return hasUp && hasDown;\n        });\n        if (hasUp && hasDown) {\n          // has an address for up and one for down event with a fixed value -> pushbutton\n          this.setType('push');\n        }\n      }\n    },\n\n    _initProgress() {\n      const element = this._element;\n      this.__circumference = 100 * Math.PI;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('viewBox', '0 0 100 100');\n      svg.setAttribute('type', 'circle');\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\n      circle.classList.add('bar');\n      circle.setAttribute('r', '49');\n      circle.setAttribute('cx', '50');\n      circle.setAttribute('cy', '50');\n      circle.setAttribute('stroke-width', '2');\n      circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n      circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n      svg.appendChild(circle);\n      element.appendChild(svg);\n      // make sure that we do not override the progress bar by state appearance\n      element.classList.add('progress');\n    },\n\n    _applyConnected(value) {\n      super._applyConnected(value);\n      if (value) {\n        if (this.getType() !== 'trigger') {\n          // delay this because we need the mappings to be ready\n          qx.event.Timer.once(this._applyOn, this, 1000);\n        }\n      }\n    },\n    _applyOn() {\n      if (this.isConnected()) {\n        let value = this.isOn() ? this.getOnValue() : this.getOffValue();\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(\n            this._element.getAttribute('mapping'),\n            value,\n            this.__store\n          );\n        }\n        const target = this._element.querySelector('.value');\n        if (target && target.tagName.toLowerCase() === 'cv-icon') {\n          if (target._instance) {\n            target._instance.setId(mappedValue);\n          } else {\n            target.textContent = mappedValue;\n          }\n        } else {\n          this.updateValue(mappedValue);\n        }\n        let styleClass = this.isOn() ? this.getOnClass() : this.getOffClass();\n        if (this._element.hasAttribute('styling')) {\n          styleClass = cv.Application.structureController.styleValue(\n            this._element.getAttribute('styling'),\n            value,\n            this.__store\n          );\n        }\n        this.setStyleClass(styleClass);\n      }\n    },\n\n    _applyProgress(value) {\n      let valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n      if (!valueElement) {\n        this._initProgress();\n        valueElement = this._element.querySelector(':scope > svg > circle.bar');\n      }\n      if (valueElement) {\n        if (this._element.hasAttribute('progress-mapping')) {\n          value = cv.Application.structureController.mapValue(\n            this._element.getAttribute('progress-mapping'),\n            value,\n            this.__store\n          );\n        }\n        valueElement.setAttribute(\n          'stroke-dashoffset',\n          '' + (this.__circumference - (value / 100) * this.__circumference)\n        );\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyName(value) {\n      if (!this.__textLabel) {\n        this.__textLabel = document.createElement('label');\n        this.__textLabel.classList.add('button-label');\n        this._element.appendChild(this.__textLabel);\n      }\n      this.__textLabel.textContent = value;\n    },\n\n    updateValue(value) {\n      const elem = this._element.querySelector('span.value');\n      if (elem) {\n        elem.innerHTML = value;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == this.getOnValue();\n      let target = ev.detail.target || 'default';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      if (target === 'default') {\n        this.setOn(value);\n      } else if (target === 'progress') {\n        this.setProgress(ev.detail.state);\n      } else if (target.startsWith('store:')) {\n        this.__store.set(target.substring(6), ev.detail.state);\n      } else if (target === 'store') {\n        // use address as store key\n        this.__store.set(ev.detail.address, ev.detail.state);\n      }\n    },\n\n    onClicked(event) {\n      this.createRipple(event);\n      if (!this._writeAddresses) {\n        this._writeAddresses = Array.prototype.filter.call(\n          this._element.querySelectorAll('addresses > cv-address'),\n          address => !address.hasAttribute('mode') || address.getAttribute('mode') !== 'read'\n        );\n      }\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: this.isOn() ? this.getOffValue() : this.getOnValue(),\n          source: this\n        }\n      });\n\n      if (this.getType() === 'trigger') {\n        // simulate feedback\n        this.setOn(true);\n        qx.event.Timer.once(\n          () => {\n            this.setOn(false);\n          },\n          null,\n          250\n        );\n      }\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      event.stopPropagation();\n    },\n\n    onPointerDown() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'down' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    onPointerUp() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'up' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    createRipple(event) {\n      const button = event.currentTarget;\n      let container = button.querySelector(':scope .ripple-container');\n      if (!container) {\n        container = document.createElement('div');\n        container.classList.add('ripple-container');\n        button.appendChild(container);\n      }\n      const circle = document.createElement('span');\n      const diameter = Math.max(button.clientWidth, button.clientHeight);\n      const radius = diameter / 2;\n      circle.style.width = circle.style.height = `${diameter}px`;\n      let x = event.clientX - (button.offsetLeft + radius);\n      let y = event.clientY - (button.offsetTop + radius);\n      if (button === this._element) {\n        x -= button.offsetParent.offsetLeft;\n        y -= button.offsetParent.offsetTop;\n      }\n      circle.style.left = `${x}px`;\n      circle.style.top = `${y}px`;\n      circle.classList.add('ripple');\n      // remove old ones\n      container.querySelectorAll('.ripple').forEach(ripple => ripple.remove());\n      container.appendChild(circle);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'button',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}