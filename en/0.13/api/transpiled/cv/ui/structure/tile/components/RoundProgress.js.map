{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "include",
    "MVisibility",
    "construct",
    "element",
    "addListener",
    "_applyVisible",
    "properties",
    "progress",
    "check",
    "apply",
    "text",
    "type",
    "init",
    "min",
    "max",
    "members",
    "__writeAddresses",
    "__circumference",
    "__start",
    "__normalizedRadius",
    "__radius",
    "__label",
    "__canvas",
    "__availableLabelWidth",
    "__defaultLabelFontSize",
    "_queuedFitText",
    "_init",
    "_element",
    "style",
    "document",
    "querySelector",
    "hasFixedRadius",
    "hasAttribute",
    "radius",
    "getAttribute",
    "parseInt",
    "getPropertyValue",
    "strokeWidth",
    "normalizedRadius",
    "Math",
    "PI",
    "isNaN",
    "setMin",
    "setMax",
    "setType",
    "getType",
    "height",
    "ns",
    "svg",
    "createElementNS",
    "setAttribute",
    "bg",
    "classList",
    "add",
    "stroke",
    "appendChild",
    "bar",
    "x",
    "y",
    "replaceChildren",
    "createElement",
    "event",
    "message",
    "Bus",
    "subscribe",
    "ev",
    "getData",
    "querySelectorAll",
    "forEach",
    "circle",
    "contains",
    "_applyProgress",
    "isPropertyInitialized",
    "getProgress",
    "__convert",
    "angle",
    "angleRad",
    "cos",
    "sin",
    "value",
    "isConnected",
    "valueElement",
    "end",
    "valueInRange",
    "getMin",
    "percent",
    "getMax",
    "join",
    "_fitText",
    "textContent",
    "isVisible",
    "__context",
    "getContext",
    "compStyle",
    "window",
    "getComputedStyle",
    "font",
    "metrics",
    "measureText",
    "width",
    "factor",
    "fontSize",
    "floor",
    "_applyText",
    "destruct",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "RoundProgress"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/RoundProgress.js"
  ],
  "sourcesContent": [
    "/* RoundProgress.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a round progress bar (partially filled circle).\n * This component must be used inside a cv-value component, it is not meant to be used standalone.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.RoundProgress', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    text: {\n      check: 'String',\n      apply: '_applyText'\n    },\n\n    type: {\n      check: ['circle', 'semiCircle'],\n      init: 'circle'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __writeAddresses: null,\n    __circumference: null,\n    __start: null,\n    __normalizedRadius: null,\n    __radius: null,\n    __label: null,\n    __canvas: null,\n    __availableLabelWidth: null,\n    __defaultLabelFontSize: null,\n    _queuedFitText: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      const style = document.querySelector(':root').style;\n      const hasFixedRadius = element.hasAttribute('radius');\n      const radius = (this.__radius =\n        element.getAttribute('radius') || parseInt(style.getPropertyValue('--tileCellWidth')) || 56);\n      const strokeWidth = element.getAttribute('stroke') || 8;\n      const normalizedRadius = (this.__normalizedRadius = radius - strokeWidth / 2);\n      this.__circumference = normalizedRadius * 2 * Math.PI;\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      const type = this.getType();\n      let height = type === 'semiCircle' ? radius : radius * 2;\n      const ns = 'http://www.w3.org/2000/svg';\n      const svg = document.createElementNS(ns, 'svg');\n      svg.setAttribute('height', height);\n      svg.setAttribute('width', '' + (radius * 2));\n      svg.setAttribute('type', type);\n\n      if (type === 'circle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'circle');\n          bg.classList.add('bg');\n          bg.setAttribute('r', '' +normalizedRadius);\n          bg.setAttribute('cx', '50%');\n          bg.setAttribute('cy', '50%');\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        const bar = document.createElementNS(ns, 'circle');\n        bar.classList.add('bar');\n        bar.setAttribute('r', '' +normalizedRadius);\n        bar.setAttribute('cx', '50%');\n        bar.setAttribute('cy', '50%');\n        bar.setAttribute('stroke-width', strokeWidth);\n        bar.setAttribute('stroke-dasharray', `${this.__circumference} ${this.__circumference}`);\n        bar.setAttribute('stroke-dashoffset', this.__circumference);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      } else if (type === 'semiCircle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'path');\n          bg.classList.add('bg');\n          bg.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 1 ${\n            radius * 2 - strokeWidth / 2\n          } ${radius}`);\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        this.__start = {\n          x: strokeWidth / 2,\n          y: radius\n        };\n        const bar = document.createElementNS(ns, 'path');\n        bar.classList.add('bar');\n        bar.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 0 ${\n          strokeWidth / 2\n        } ${radius}`);\n        bar.setAttribute('fill', 'transparent');\n        bar.setAttribute('stroke-width', strokeWidth);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      }\n      element.replaceChildren(svg, document.createElement('label'));\n\n      this.__availableLabelWidth = radius * 2 - strokeWidth * 2 - 24;\n\n      if (!hasFixedRadius) {\n        qx.event.message.Bus.subscribe('cv.design.tile.cellWidthChanged', ev => {\n          this.__radius = ev.getData();\n          this.__normalizedRadius = this.__radius - strokeWidth / 2;\n          this.__circumference = this.__normalizedRadius * 2 * Math.PI;\n          height = type === 'semiCircle' ? this.__radius : this.__radius * 2;\n          const svg = element.querySelector(':scope > svg');\n          svg.setAttribute('height', '' + height);\n          svg.setAttribute('width', '' + this.__radius * 2);\n          if (type === 'circle') {\n            this._element.querySelectorAll(':scope > svg > circle').forEach(circle => {\n              circle.setAttribute('r', '' + this.__normalizedRadius);\n              if (circle.classList.contains('bar')) {\n                circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n                circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n              }\n            });\n          } else if (type === 'semiCircle') {\n            this.__start.y = this.__radius;\n            const bg = this._element.querySelector(':scope > svg > path.bg');\n            if (bg) {\n              bg.setAttribute(\n                'd',\n                `M ${strokeWidth / 2} ${this.__radius} A ${this.__normalizedRadius} ${this.__normalizedRadius} 0 0 1 ${\n                  this.__radius * 2 - strokeWidth / 2\n                } ${this.__radius}`\n              );\n            }\n          }\n          this._applyProgress(this.isPropertyInitialized('progress') ? this.getProgress() : 0);\n        });\n      }\n    },\n\n    __convert(angle) {\n      const angleRad = angle * (Math.PI / 180.0);\n      return {\n        x: this.__radius - this.__normalizedRadius * Math.cos(angleRad),\n        y: this.__radius - this.__normalizedRadius * Math.sin(angleRad)\n      };\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueElement;\n        let end;\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n\n        switch (this.getType()) {\n          case 'circle':\n            valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n            valueElement.setAttribute(\n              'stroke-dashoffset',\n              '' + this.__circumference - (percent / 100) * this.__circumference\n            );\n\n            break;\n\n          case 'semiCircle':\n            valueElement = this._element.querySelector(':scope > svg > path.bar');\n\n            end = this.__convert((180 / 100) * percent);\n            valueElement.setAttribute(\n              'd',\n              [\n                'M',\n                this.__start.x,\n                this.__start.y,\n                'A',\n                this.__normalizedRadius,\n                this.__normalizedRadius,\n                0,\n                0,\n                1,\n                end.x,\n                end.y\n              ].join(' ')\n            );\n\n            break;\n        }\n      }\n    },\n\n    _fitText() {\n      if (this.__label && this.__label.textContent) {\n        if (this.isVisible()) {\n          if (!this.__canvas) {\n            this.__canvas = document.createElement('canvas');\n            this.__context = this.__canvas.getContext('2d');\n            const compStyle = window.getComputedStyle(this.__label);\n            this.__context.font = compStyle.getPropertyValue('font');\n            this.__defaultLabelFontSize = compStyle.getPropertyValue('font-size');\n          }\n          const metrics = this.__context.measureText(this.__label.textContent);\n          if (metrics.width > this.__availableLabelWidth) {\n            // adjust font-size\n            const factor = this.__availableLabelWidth / metrics.width;\n            this.__label.style.fontSize = Math.floor(parseInt(this.__defaultLabelFontSize) * factor) + 'px';\n          } else {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n          this._queuedFitText = false;\n        } else {\n          this._queuedFitText = true;\n        }\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData() && this._queuedFitText) {\n        this._fitText();\n      }\n    },\n\n    _applyText(value) {\n      if (this.isConnected()) {\n        if (!this.__label) {\n          this.__label = this._element.querySelector(':scope > label');\n        }\n        this.__label.textContent = value;\n        if (!value) {\n          // empty text, just reset to default font size\n          if (this.__defaultLabelFontSize) {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n        } else {\n          this._fitText();\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__label = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'round-progress',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}