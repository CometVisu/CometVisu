{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "include",
    "MPopup",
    "properties",
    "backgroundImage",
    "check",
    "nullable",
    "apply",
    "popup",
    "init",
    "outdated",
    "checkOutdated",
    "outdatedMessage",
    "events",
    "fullscreenChanged",
    "members",
    "_fullScreenMode",
    "_dateFormat",
    "_checkOutdatedTimerId",
    "_lastUpdate",
    "_maxAge",
    "_hideTimer",
    "_init",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "getTimeFormat",
    "_initPopupChild",
    "_element",
    "hasAttribute",
    "setBackgroundImage",
    "getAttribute",
    "_childPopup",
    "addEventListener",
    "resetPopup",
    "querySelector",
    "classList",
    "add",
    "event",
    "Timer",
    "addListener",
    "elem",
    "style",
    "display",
    "stop",
    "_applyBackgroundImage",
    "value",
    "overlay",
    "document",
    "createElement",
    "insertBefore",
    "firstChild",
    "remove",
    "_applyOutdated",
    "textContent",
    "firstElementChild",
    "ev",
    "stopImmediatePropagation",
    "valueElem",
    "getOutdatedMessage",
    "appendChild",
    "nextElementSibling",
    "start",
    "_applyOutdatedMessage",
    "setAttribute",
    "_applyCheckOutdated",
    "timer",
    "TimerManager",
    "getInstance",
    "age",
    "Math",
    "floor",
    "now",
    "getTime",
    "setOutdated",
    "setOutdatedMessage",
    "Manager",
    "tr",
    "error",
    "resetOutdatedMessage",
    "open",
    "_openPopupChild",
    "_headerFooterParent",
    "target",
    "closeButton",
    "icon",
    "setPopup",
    "fireDataEvent",
    "registerModalPopup",
    "close",
    "keepState",
    "_closePopupChild",
    "unregisterModalPopup",
    "_autoCloseTimer",
    "fireEvent",
    "_applyPopup",
    "onStateUpdate",
    "detail",
    "state",
    "addressValue",
    "restart",
    "targetConfig",
    "length",
    "parseInt",
    "shift",
    "Number",
    "POSITIVE_INFINITY",
    "debug",
    "destruct",
    "_disposeObjects",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "widgets",
    "Tile"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js"
  ],
  "sourcesContent": [
    "/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    },\n\n    outdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOutdated'\n    },\n\n    checkOutdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCheckOutdated'\n    },\n\n    outdatedMessage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyOutdatedMessage'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    fullscreenChanged: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n    _dateFormat: null,\n    _checkOutdatedTimerId: null,\n    _lastUpdate: null,\n    _maxAge: null,\n    _hideTimer: null,\n\n    _init() {\n      super._init();\n      this._dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('medium') + ' ' + qx.locale.Date.getTimeFormat('medium'));\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n      if (this._element.querySelector(':scope > label.title')) {\n        this._element.classList.add('has-title');\n      }\n\n      this._hideTimer = new qx.event.Timer(5000);\n      this._hideTimer.addListener('interval', () => {\n        const elem = this._element.querySelector(':scope > .outdated-value');\n        if (elem.style.display !== 'none') {\n          elem.style.display = 'none';\n        }\n        this._hideTimer.stop();\n      });\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    _applyOutdated(value) {\n      let elem = this._element.querySelector(':scope > .outdated');\n      if (value) {\n        this._element.classList.add('outdated');\n        if (!elem) {\n          elem = document.createElement('div');\n          elem.classList.add('outdated');\n          elem.textContent = '!';\n          this._element.insertBefore(elem, this._element.firstElementChild);\n          // capture all clicks by stealing the initial event\n          elem.addEventListener('pointerdown', ev => {\n            ev.stopImmediatePropagation();\n          });\n          elem.addEventListener('click', ev => {\n            // show last updated value for 5 seconds\n            let valueElem = this._element.querySelector(':scope > .outdated-value');\n            if (!valueElem) {\n              valueElem = document.createElement('div');\n              valueElem.classList.add('outdated-value');\n              valueElem.textContent = this.getOutdatedMessage();\n              this._element.appendChild(valueElem);\n              this._element.insertBefore(valueElem, elem.nextElementSibling);\n              // capture all clicks by stealing the initial event\n              valueElem.addEventListener('pointerdown', ev => {\n                ev.stopImmediatePropagation();\n                valueElem.style.display = 'none';\n              });\n            } else {\n              valueElem.style.display = 'block';\n            }\n            this._hideTimer.start();\n          });\n        }\n        elem.style.display = 'block';\n      } else {\n        this._element.classList.remove('outdated');\n        if (elem) {\n          elem.style.display = 'none';\n        }\n      }\n    },\n\n    _applyOutdatedMessage(value) {\n      this._element.setAttribute('title', value);\n      let valueElem = this._element.querySelector(':scope > .outdated-value');\n      if (valueElem) {\n        valueElem.textContent = value;\n      }\n    },\n\n    _applyCheckOutdated(value) {\n      const timer = qx.util.TimerManager.getInstance();\n      if (value) {\n        this._checkOutdatedTimerId = timer.start(this.checkOutdated, 5000, this);\n      } else if (this._checkOutdatedTimerId) {\n        timer.stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    },\n\n    checkOutdated() {\n      if (this._lastUpdate instanceof Date) {\n        const age = Math.floor((Date.now() - this._lastUpdate.getTime()) / 1000);\n        this.setOutdated(age > this._maxAge);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: %1', this._dateFormat.format(this._lastUpdate)));\n      } else if (this._lastUpdate === '-') {\n        this.setOutdated(true);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n      } else {\n        this.error('last-update value must be a Date object, but is of type:', typeof this._lastUpdate, this._lastUpdate);\n        this.resetOutdatedMessage();\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else if (this._headerFooterParent) {\n        const target = this._headerFooterParent;\n        let closeButton = target.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          target.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        target.classList.add('popup');\n        if (this._fullScreenMode) {\n          target.classList.add('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else if (this._headerFooterParent) {\n        this._headerFooterParent.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._headerFooterParent.classList.remove('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        let closeButton = this._headerFooterParent.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          case 'last-update':\n            this._maxAge = ev.detail.targetConfig && ev.detail.targetConfig.length > 0 ? parseInt(ev.detail.targetConfig.shift()) : Number.POSITIVE_INFINITY;\n            this._lastUpdate = ev.detail.state;\n            this.checkOutdated();\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    },\n\n    /*\n    ***********************************************\n      DESTRUCTOR\n    ***********************************************\n    */\n    destruct() {\n      this._disposeObjects('_dateFormat');\n      if (this._checkOutdatedTimerId) {\n        qx.util.TimerManager.getInstance().stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}