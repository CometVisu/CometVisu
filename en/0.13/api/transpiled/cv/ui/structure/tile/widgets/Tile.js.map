{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "include",
    "MPopup",
    "properties",
    "backgroundImage",
    "check",
    "nullable",
    "apply",
    "popup",
    "init",
    "outdated",
    "checkOutdated",
    "outdatedMessage",
    "events",
    "fullscreenChanged",
    "members",
    "_fullScreenMode",
    "_dateFormat",
    "_checkOutdatedTimerId",
    "_lastUpdate",
    "_maxAge",
    "_hideTimer",
    "_init",
    "_this",
    "widgets",
    "Tile",
    "superclass",
    "prototype",
    "call",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "getTimeFormat",
    "_initPopupChild",
    "_element",
    "hasAttribute",
    "setBackgroundImage",
    "getAttribute",
    "_childPopup",
    "addEventListener",
    "resetPopup",
    "querySelector",
    "classList",
    "add",
    "event",
    "Timer",
    "addListener",
    "elem",
    "style",
    "display",
    "stop",
    "_applyBackgroundImage",
    "value",
    "concat",
    "overlay",
    "document",
    "createElement",
    "insertBefore",
    "firstChild",
    "remove",
    "_applyOutdated",
    "_this2",
    "textContent",
    "firstElementChild",
    "ev",
    "stopImmediatePropagation",
    "valueElem",
    "getOutdatedMessage",
    "appendChild",
    "nextElementSibling",
    "start",
    "_applyOutdatedMessage",
    "setAttribute",
    "_applyCheckOutdated",
    "timer",
    "TimerManager",
    "getInstance",
    "isNaN",
    "getTime",
    "setOutdated",
    "setOutdatedMessage",
    "Manager",
    "tr",
    "age",
    "Math",
    "floor",
    "now",
    "error",
    "_typeof",
    "resetOutdatedMessage",
    "open",
    "_this3",
    "_openPopupChild",
    "_headerFooterParent",
    "target",
    "closeButton",
    "icon",
    "setPopup",
    "fireDataEvent",
    "registerModalPopup",
    "close",
    "keepState",
    "_closePopupChild",
    "unregisterModalPopup",
    "_autoCloseTimer",
    "fireEvent",
    "_applyPopup",
    "onStateUpdate",
    "detail",
    "state",
    "addressValue",
    "restart",
    "targetConfig",
    "length",
    "parseInt",
    "shift",
    "Number",
    "POSITIVE_INFINITY",
    "debug",
    "destruct",
    "_disposeObjects",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "_QxConnector",
    "_inherits",
    "_class",
    "_super",
    "_createSuper",
    "_classCallCheck",
    "_createClass",
    "QxConnector"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js"
  ],
  "sourcesContent": [
    "/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    },\n\n    outdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOutdated'\n    },\n\n    checkOutdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCheckOutdated'\n    },\n\n    outdatedMessage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyOutdatedMessage'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    fullscreenChanged: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n    _dateFormat: null,\n    _checkOutdatedTimerId: null,\n    _lastUpdate: null,\n    _maxAge: null,\n    _hideTimer: null,\n\n    _init() {\n      super._init();\n      this._dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('medium') + ' ' + qx.locale.Date.getTimeFormat('medium'));\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n      if (this._element.querySelector(':scope > label.title')) {\n        this._element.classList.add('has-title');\n      }\n\n      this._hideTimer = new qx.event.Timer(5000);\n      this._hideTimer.addListener('interval', () => {\n        const elem = this._element.querySelector(':scope > .outdated-value');\n        if (elem.style.display !== 'none') {\n          elem.style.display = 'none';\n        }\n        this._hideTimer.stop();\n      });\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    _applyOutdated(value) {\n      let elem = this._element.querySelector(':scope > .outdated');\n      if (value) {\n        this._element.classList.add('outdated');\n        if (!elem) {\n          elem = document.createElement('div');\n          elem.classList.add('outdated');\n          elem.textContent = '!';\n          this._element.insertBefore(elem, this._element.firstElementChild);\n          // capture all clicks by stealing the initial event\n          elem.addEventListener('pointerdown', ev => {\n            ev.stopImmediatePropagation();\n          });\n          elem.addEventListener('click', ev => {\n            // show last updated value for 5 seconds\n            let valueElem = this._element.querySelector(':scope > .outdated-value');\n            if (!valueElem) {\n              valueElem = document.createElement('div');\n              valueElem.classList.add('outdated-value');\n              valueElem.textContent = this.getOutdatedMessage();\n              this._element.appendChild(valueElem);\n              this._element.insertBefore(valueElem, elem.nextElementSibling);\n              // capture all clicks by stealing the initial event\n              valueElem.addEventListener('pointerdown', ev => {\n                ev.stopImmediatePropagation();\n                valueElem.style.display = 'none';\n              });\n            } else {\n              valueElem.style.display = 'block';\n            }\n            this._hideTimer.start();\n          });\n        }\n        elem.style.display = 'block';\n      } else {\n        this._element.classList.remove('outdated');\n        if (elem) {\n          elem.style.display = 'none';\n        }\n      }\n    },\n\n    _applyOutdatedMessage(value) {\n      this._element.setAttribute('title', value);\n      let valueElem = this._element.querySelector(':scope > .outdated-value');\n      if (valueElem) {\n        valueElem.textContent = value;\n      }\n    },\n\n    _applyCheckOutdated(value) {\n      const timer = qx.util.TimerManager.getInstance();\n      if (value) {\n        this._checkOutdatedTimerId = timer.start(this.checkOutdated, 5000, this);\n      } else if (this._checkOutdatedTimerId) {\n        timer.stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    },\n\n    checkOutdated() {\n      if (this._lastUpdate instanceof Date) {\n        if (isNaN(this._lastUpdate.getTime())) {\n          this.setOutdated(true);\n          this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n        } else {\n          const age = Math.floor((Date.now() - this._lastUpdate.getTime()) / 1000);\n          this.setOutdated(age > this._maxAge);\n          this.setOutdatedMessage(qx.locale.Manager.tr('Last update: %1', this._dateFormat.format(this._lastUpdate)));\n        }\n      } else if (this._lastUpdate === '-') {\n        this.setOutdated(true);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n      } else {\n        this.error('last-update value must be a Date object, but is of type:', typeof this._lastUpdate, this._lastUpdate);\n        this.resetOutdatedMessage();\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else if (this._headerFooterParent) {\n        const target = this._headerFooterParent;\n        let closeButton = target.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          target.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        target.classList.add('popup');\n        if (this._fullScreenMode) {\n          target.classList.add('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else if (this._headerFooterParent) {\n        this._headerFooterParent.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._headerFooterParent.classList.remove('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        let closeButton = this._headerFooterParent.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          case 'last-update':\n            this._maxAge = ev.detail.targetConfig && ev.detail.targetConfig.length > 0 ? parseInt(ev.detail.targetConfig.shift()) : Number.POSITIVE_INFINITY;\n            this._lastUpdate = ev.detail.state;\n            this.checkOutdated();\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    },\n\n    /*\n    ***********************************************\n      DESTRUCTOR\n    ***********************************************\n    */\n    destruct() {\n      this._disposeObjects('_dateFormat');\n      if (this._checkOutdatedTimerId) {\n        qx.util.TimerManager.getInstance().stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;EACAH,EAAE,CAACI,KAAK,CAACC,MAAM,CAAC,mCAAmC,EAAE;IACnDC,MAAM,EAAEC,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACC,UAAU,CAACC,iBAAiB;IACzDC,OAAO,EAAEN,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACI,MAAM;IAEpC;AACF;AACA;AACA;AACA;IACEC,UAAU,EAAE;MACVC,eAAe,EAAE;QACfC,KAAK,EAAE,QAAQ;QACfC,QAAQ,EAAE,IAAI;QACdC,KAAK,EAAE;MACT,CAAC;MAED;AACJ;AACA;MACIC,KAAK,EAAE;QACLH,KAAK,EAAE,SAAS;QAChBI,IAAI,EAAE,KAAK;QACXF,KAAK,EAAE;MACT,CAAC;MAEDG,QAAQ,EAAE;QACRL,KAAK,EAAE,SAAS;QAChBI,IAAI,EAAE,KAAK;QACXF,KAAK,EAAE;MACT,CAAC;MAEDI,aAAa,EAAE;QACbN,KAAK,EAAE,SAAS;QAChBI,IAAI,EAAE,KAAK;QACXF,KAAK,EAAE;MACT,CAAC;MAEDK,eAAe,EAAE;QACfP,KAAK,EAAE,QAAQ;QACfC,QAAQ,EAAE,IAAI;QACdC,KAAK,EAAE;MACT;IACF,CAAC;IAED;AACF;AACA;AACA;AACA;IACEM,MAAM,EAAE;MACNC,iBAAiB,EAAE;IACrB,CAAC;IAED;AACF;AACA;AACA;AACA;IACEC,OAAO,EAAE;MACPC,eAAe,EAAE,IAAI;MACrBC,WAAW,EAAE,IAAI;MACjBC,qBAAqB,EAAE,IAAI;MAC3BC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE,IAAI;MACbC,UAAU,EAAE,IAAI;MAEhBC,KAAK,WAAAA,MAAA,EAAG;QAAA,IAAAC,KAAA;QACN5B,EAAA,CAAAC,EAAA,CAAAC,SAAA,CAAAC,IAAA,CAAA0B,OAAA,CAAAC,IAAA,CAAAC,UAAA,CAAAC,SAAA,CAAAL,KAAA,CAAAM,IAAA;QACA,IAAI,CAACX,WAAW,GAAG,IAAI7B,EAAE,CAACyC,IAAI,CAACC,MAAM,CAACC,UAAU,CAAC3C,EAAE,CAAC4C,MAAM,CAACC,IAAI,CAACC,aAAa,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG9C,EAAE,CAAC4C,MAAM,CAACC,IAAI,CAACE,aAAa,CAAC,QAAQ,CAAC,CAAC;QACvI,IAAI,CAACC,eAAe,CAAC,CAAC;QACtB,IAAI,IAAI,CAACC,QAAQ,CAACC,YAAY,CAAC,kBAAkB,CAAC,EAAE;UAClD,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACF,QAAQ,CAACG,YAAY,CAAC,kBAAkB,CAAC,CAAC;QACzE;QACA,IAAI,IAAI,CAACC,WAAW,EAAE;UACpB,IAAI,CAACA,WAAW,CAACC,gBAAgB,CAAC,QAAQ,EAAE,YAAM;YAChDnB,KAAI,CAACoB,UAAU,CAAC,CAAC;UACnB,CAAC,CAAC;QACJ;QACA,IAAI,IAAI,CAACN,QAAQ,CAACO,aAAa,CAAC,sBAAsB,CAAC,EAAE;UACvD,IAAI,CAACP,QAAQ,CAACQ,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;QAC1C;QAEA,IAAI,CAACzB,UAAU,GAAG,IAAIjC,EAAE,CAAC2D,KAAK,CAACC,KAAK,CAAC,IAAI,CAAC;QAC1C,IAAI,CAAC3B,UAAU,CAAC4B,WAAW,CAAC,UAAU,EAAE,YAAM;UAC5C,IAAMC,IAAI,GAAG3B,KAAI,CAACc,QAAQ,CAACO,aAAa,CAAC,0BAA0B,CAAC;UACpE,IAAIM,IAAI,CAACC,KAAK,CAACC,OAAO,KAAK,MAAM,EAAE;YACjCF,IAAI,CAACC,KAAK,CAACC,OAAO,GAAG,MAAM;UAC7B;UACA7B,KAAI,CAACF,UAAU,CAACgC,IAAI,CAAC,CAAC;QACxB,CAAC,CAAC;MACJ,CAAC;MAEDC,qBAAqB,WAAAA,sBAACC,KAAK,EAAE;QAC3B,IAAIA,KAAK,EAAE;UACT,IAAI,CAAClB,QAAQ,CAACc,KAAK,CAAC/C,eAAe,UAAAoD,MAAA,CAAUD,KAAK,MAAG;UACrD,IAAIE,OAAO,GAAG,IAAI,CAACpB,QAAQ,CAACO,aAAa,CAAC,sBAAsB,CAAC;UACjE,IAAI,CAACa,OAAO,EAAE;YACZA,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;YACvCF,OAAO,CAACZ,SAAS,CAACC,GAAG,CAAC,SAAS,CAAC;YAChC,IAAI,CAACT,QAAQ,CAACuB,YAAY,CAACH,OAAO,EAAE,IAAI,CAACpB,QAAQ,CAACwB,UAAU,CAAC;UAC/D;UACA,IAAI,CAACxB,QAAQ,CAACQ,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;QAC7C,CAAC,MAAM;UACL,IAAI,CAACT,QAAQ,CAACc,KAAK,CAAC/C,eAAe,GAAG,EAAE;UACxC,IAAI,CAACiC,QAAQ,CAACQ,SAAS,CAACiB,MAAM,CAAC,cAAc,CAAC;QAChD;MACF,CAAC;MAEDC,cAAc,WAAAA,eAACR,KAAK,EAAE;QAAA,IAAAS,MAAA;QACpB,IAAId,IAAI,GAAG,IAAI,CAACb,QAAQ,CAACO,aAAa,CAAC,oBAAoB,CAAC;QAC5D,IAAIW,KAAK,EAAE;UACT,IAAI,CAAClB,QAAQ,CAACQ,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;UACvC,IAAI,CAACI,IAAI,EAAE;YACTA,IAAI,GAAGQ,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;YACpCT,IAAI,CAACL,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;YAC9BI,IAAI,CAACe,WAAW,GAAG,GAAG;YACtB,IAAI,CAAC5B,QAAQ,CAACuB,YAAY,CAACV,IAAI,EAAE,IAAI,CAACb,QAAQ,CAAC6B,iBAAiB,CAAC;YACjE;YACAhB,IAAI,CAACR,gBAAgB,CAAC,aAAa,EAAE,UAAAyB,EAAE,EAAI;cACzCA,EAAE,CAACC,wBAAwB,CAAC,CAAC;YAC/B,CAAC,CAAC;YACFlB,IAAI,CAACR,gBAAgB,CAAC,OAAO,EAAE,UAAAyB,EAAE,EAAI;cACnC;cACA,IAAIE,SAAS,GAAGL,MAAI,CAAC3B,QAAQ,CAACO,aAAa,CAAC,0BAA0B,CAAC;cACvE,IAAI,CAACyB,SAAS,EAAE;gBACdA,SAAS,GAAGX,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;gBACzCU,SAAS,CAACxB,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;gBACzCuB,SAAS,CAACJ,WAAW,GAAGD,MAAI,CAACM,kBAAkB,CAAC,CAAC;gBACjDN,MAAI,CAAC3B,QAAQ,CAACkC,WAAW,CAACF,SAAS,CAAC;gBACpCL,MAAI,CAAC3B,QAAQ,CAACuB,YAAY,CAACS,SAAS,EAAEnB,IAAI,CAACsB,kBAAkB,CAAC;gBAC9D;gBACAH,SAAS,CAAC3B,gBAAgB,CAAC,aAAa,EAAE,UAAAyB,EAAE,EAAI;kBAC9CA,EAAE,CAACC,wBAAwB,CAAC,CAAC;kBAC7BC,SAAS,CAAClB,KAAK,CAACC,OAAO,GAAG,MAAM;gBAClC,CAAC,CAAC;cACJ,CAAC,MAAM;gBACLiB,SAAS,CAAClB,KAAK,CAACC,OAAO,GAAG,OAAO;cACnC;cACAY,MAAI,CAAC3C,UAAU,CAACoD,KAAK,CAAC,CAAC;YACzB,CAAC,CAAC;UACJ;UACAvB,IAAI,CAACC,KAAK,CAACC,OAAO,GAAG,OAAO;QAC9B,CAAC,MAAM;UACL,IAAI,CAACf,QAAQ,CAACQ,SAAS,CAACiB,MAAM,CAAC,UAAU,CAAC;UAC1C,IAAIZ,IAAI,EAAE;YACRA,IAAI,CAACC,KAAK,CAACC,OAAO,GAAG,MAAM;UAC7B;QACF;MACF,CAAC;MAEDsB,qBAAqB,WAAAA,sBAACnB,KAAK,EAAE;QAC3B,IAAI,CAAClB,QAAQ,CAACsC,YAAY,CAAC,OAAO,EAAEpB,KAAK,CAAC;QAC1C,IAAIc,SAAS,GAAG,IAAI,CAAChC,QAAQ,CAACO,aAAa,CAAC,0BAA0B,CAAC;QACvE,IAAIyB,SAAS,EAAE;UACbA,SAAS,CAACJ,WAAW,GAAGV,KAAK;QAC/B;MACF,CAAC;MAEDqB,mBAAmB,WAAAA,oBAACrB,KAAK,EAAE;QACzB,IAAMsB,KAAK,GAAGzF,EAAE,CAACyC,IAAI,CAACiD,YAAY,CAACC,WAAW,CAAC,CAAC;QAChD,IAAIxB,KAAK,EAAE;UACT,IAAI,CAACrC,qBAAqB,GAAG2D,KAAK,CAACJ,KAAK,CAAC,IAAI,CAAC9D,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC;QAC1E,CAAC,MAAM,IAAI,IAAI,CAACO,qBAAqB,EAAE;UACrC2D,KAAK,CAACxB,IAAI,CAAC,IAAI,CAACnC,qBAAqB,CAAC;UACtC,IAAI,CAACA,qBAAqB,GAAG,IAAI;QACnC;MACF,CAAC;MAEDP,aAAa,WAAAA,cAAA,EAAG;QACd,IAAI,IAAI,CAACQ,WAAW,YAAYc,IAAI,EAAE;UACpC,IAAI+C,KAAK,CAAC,IAAI,CAAC7D,WAAW,CAAC8D,OAAO,CAAC,CAAC,CAAC,EAAE;YACrC,IAAI,CAACC,WAAW,CAAC,IAAI,CAAC;YACtB,IAAI,CAACC,kBAAkB,CAAC/F,EAAE,CAAC4C,MAAM,CAACoD,OAAO,CAACC,EAAE,CAAC,sBAAsB,CAAC,CAAC;UACvE,CAAC,MAAM;YACL,IAAMC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAAC,CAACvD,IAAI,CAACwD,GAAG,CAAC,CAAC,GAAG,IAAI,CAACtE,WAAW,CAAC8D,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC;YACxE,IAAI,CAACC,WAAW,CAACI,GAAG,GAAG,IAAI,CAAClE,OAAO,CAAC;YACpC,IAAI,CAAC+D,kBAAkB,CAAC/F,EAAE,CAAC4C,MAAM,CAACoD,OAAO,CAACC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAACpE,WAAW,CAACa,MAAM,CAAC,IAAI,CAACX,WAAW,CAAC,CAAC,CAAC;UAC7G;QACF,CAAC,MAAM,IAAI,IAAI,CAACA,WAAW,KAAK,GAAG,EAAE;UACnC,IAAI,CAAC+D,WAAW,CAAC,IAAI,CAAC;UACtB,IAAI,CAACC,kBAAkB,CAAC/F,EAAE,CAAC4C,MAAM,CAACoD,OAAO,CAACC,EAAE,CAAC,sBAAsB,CAAC,CAAC;QACvE,CAAC,MAAM;UACL,IAAI,CAACK,KAAK,CAAC,0DAA0D,EAAAC,OAAA,CAAS,IAAI,CAACxE,WAAW,GAAE,IAAI,CAACA,WAAW,CAAC;UACjH,IAAI,CAACyE,oBAAoB,CAAC,CAAC;QAC7B;MACF,CAAC;MAEDC,IAAI,WAAAA,KAAA,EAAG;QAAA,IAAAC,MAAA;QACL,IAAI,IAAI,CAACrD,WAAW,EAAE;UACpB,IAAI,CAACsD,eAAe,CAAC,CAAC;QACxB,CAAC,MAAM,IAAI,IAAI,CAACC,mBAAmB,EAAE;UACnC,IAAMC,MAAM,GAAG,IAAI,CAACD,mBAAmB;UACvC,IAAIE,WAAW,GAAGD,MAAM,CAACrD,aAAa,CAAC,uBAAuB,CAAC;UAC/D,IAAI,CAACsD,WAAW,EAAE;YAChBA,WAAW,GAAGxC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;YAC9CuC,WAAW,CAACrD,SAAS,CAACC,GAAG,CAAC,OAAO,CAAC;YAClC,IAAMqD,IAAI,GAAGzC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;YACxCwC,IAAI,CAACtD,SAAS,CAACC,GAAG,CAAC,eAAe,CAAC;YACnCoD,WAAW,CAAC3B,WAAW,CAAC4B,IAAI,CAAC;YAC7BF,MAAM,CAAC1B,WAAW,CAAC2B,WAAW,CAAC;YAC/BA,WAAW,CAACxD,gBAAgB,CAAC,OAAO,EAAE;cAAA,OAAMoD,MAAI,CAACM,QAAQ,CAAC,KAAK,CAAC;YAAA,EAAC;UACnE;UACAF,WAAW,CAAC/C,KAAK,CAACC,OAAO,GAAG,OAAO;UACnC6C,MAAM,CAACpD,SAAS,CAACC,GAAG,CAAC,OAAO,CAAC;UAC7B,IAAI,IAAI,CAAC9B,eAAe,EAAE;YACxBiF,MAAM,CAACpD,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;YAClC,IAAI,CAACuD,aAAa,CAAC,mBAAmB,EAAE,IAAI,CAAC;UAC/C;UACA,IAAI,CAACC,kBAAkB,CAAC,CAAC;QAC3B;MACF,CAAC;MAEDC,KAAK,WAAAA,MAACC,SAAS,EAAE;QACf,IAAI,CAACA,SAAS,EAAE;UACd,IAAI,CAACJ,QAAQ,CAAC,KAAK,CAAC;QACtB;QACA,IAAI,IAAI,CAAC3D,WAAW,EAAE;UACpB,IAAI,CAACgE,gBAAgB,CAAC,CAAC;QACzB,CAAC,MAAM,IAAI,IAAI,CAACT,mBAAmB,EAAE;UACnC,IAAI,CAACA,mBAAmB,CAACnD,SAAS,CAACiB,MAAM,CAAC,OAAO,CAAC;UAClD,IAAI,IAAI,CAAC9C,eAAe,EAAE;YACxB,IAAI,CAACgF,mBAAmB,CAACnD,SAAS,CAACiB,MAAM,CAAC,YAAY,CAAC;YACvD,IAAI,CAACuC,aAAa,CAAC,mBAAmB,EAAE,IAAI,CAAC;UAC/C;UACA,IAAIH,WAAW,GAAG,IAAI,CAACF,mBAAmB,CAACpD,aAAa,CAAC,uBAAuB,CAAC;UACjF,IAAIsD,WAAW,EAAE;YACfA,WAAW,CAAC/C,KAAK,CAACC,OAAO,GAAG,MAAM;UACpC;UACA,IAAI,CAACsD,oBAAoB,CAAC,CAAC;QAC7B;QACA,IAAI,IAAI,CAACC,eAAe,EAAE;UACxB,IAAI,CAACA,eAAe,CAACtD,IAAI,CAAC,CAAC;QAC7B;QACA,IAAI,CAACuD,SAAS,CAAC,QAAQ,CAAC;MAC1B,CAAC;MAEDC,WAAW,WAAAA,YAACtD,KAAK,EAAE;QACjB,IAAIA,KAAK,EAAE;UACT,IAAI,CAACsC,IAAI,CAAC,CAAC;QACb,CAAC,MAAM;UACL,IAAI,CAACU,KAAK,CAAC,IAAI,CAAC;QAClB;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;MACIO,aAAa,WAAAA,cAAC3C,EAAE,EAAE;QAChB,IAAI,CAAAxE,EAAA,CAAAC,EAAA,CAAAC,SAAA,CAAAC,IAAA,CAAA0B,OAAA,CAAAC,IAAA,CAAAC,UAAA,CAAAC,SAAA,CAAAmF,aAAA,CAAAlF,IAAA,OAAqBuC,EAAE,CAAC,EAAE;UAC5B,QAAQA,EAAE,CAAC4C,MAAM,CAACd,MAAM;YACtB,KAAK,kBAAkB;cACrB,IAAI,CAAC1D,kBAAkB,CAAC4B,EAAE,CAAC4C,MAAM,CAACC,KAAK,CAAC;cACxC;YAEF,KAAK,OAAO;YACZ,KAAK,kBAAkB;cACrB,IAAI,CAAChG,eAAe,GAAGmD,EAAE,CAAC4C,MAAM,CAACd,MAAM,KAAK,kBAAkB;cAC9D,IAAI9B,EAAE,CAAC4C,MAAM,CAACE,YAAY,EAAE;gBAC1B;gBACA;gBACA,IAAI9C,EAAE,CAAC4C,MAAM,CAACE,YAAY,IAAI9C,EAAE,CAAC4C,MAAM,CAACC,KAAK,EAAE;kBAC7C,IAAI,CAACZ,QAAQ,CAAC,IAAI,CAAC;kBACnB;kBACA,IAAI,CAAC,IAAI,CAACO,eAAe,EAAE;oBACzB,IAAI,CAACA,eAAe,GAAG,IAAIvH,EAAE,CAAC2D,KAAK,CAACC,KAAK,OAAW,CAAC;oBACrD,IAAI,CAAC2D,eAAe,CAAC1D,WAAW,CAAC,UAAU,EAAE,IAAI,CAACsD,KAAK,EAAE,IAAI,CAAC;kBAChE;kBACA,IAAI,CAACI,eAAe,CAACO,OAAO,CAAC,CAAC;gBAChC;cACF,CAAC,MAAM;gBACL;gBACA;gBACA,IAAI,CAACd,QAAQ,CAACjC,EAAE,CAAC4C,MAAM,CAACC,KAAK,IAAI,CAAC,CAAC;cACrC;cACA;YAEF,KAAK,aAAa;cAChB,IAAI,CAAC5F,OAAO,GAAG+C,EAAE,CAAC4C,MAAM,CAACI,YAAY,IAAIhD,EAAE,CAAC4C,MAAM,CAACI,YAAY,CAACC,MAAM,GAAG,CAAC,GAAGC,QAAQ,CAAClD,EAAE,CAAC4C,MAAM,CAACI,YAAY,CAACG,KAAK,CAAC,CAAC,CAAC,GAAGC,MAAM,CAACC,iBAAiB;cAChJ,IAAI,CAACrG,WAAW,GAAGgD,EAAE,CAAC4C,MAAM,CAACC,KAAK;cAClC,IAAI,CAACrG,aAAa,CAAC,CAAC;cACpB;YAEF;cACE,IAAI,CAAC8G,KAAK,CAAC,0BAA0B,EAAEtD,EAAE,CAAC4C,MAAM,CAACd,MAAM,CAAC;UAC5D;QACF;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;MACIyB,QAAQ,WAAAA,SAAA,EAAG;QACT,IAAI,CAACC,eAAe,CAAC,aAAa,CAAC;QACnC,IAAI,IAAI,CAACzG,qBAAqB,EAAE;UAC9B9B,EAAE,CAACyC,IAAI,CAACiD,YAAY,CAACC,WAAW,CAAC,CAAC,CAAC1B,IAAI,CAAC,IAAI,CAACnC,qBAAqB,CAAC;UACnE,IAAI,CAACA,qBAAqB,GAAG,IAAI;QACnC;MACF;IACF,CAAC;IAED0G,KAAK,WAAAA,MAACC,OAAO,EAAE;MACbC,cAAc,CAACrI,MAAM,CACnBE,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACiI,UAAU,CAACC,MAAM,GAAG,MAAM,yBAAAC,YAAA;QAAA;;QAAAC,SAAA,CAAAC,MAAA,EAAAF,YAAA;QAAA,IAAAG,MAAA,GAAAC,YAAA,CAAAF,MAAA;QAE7C,SAAAA,OAAA,EAAc;UAAAG,eAAA,OAAAH,MAAA;UAAA,OAAAC,MAAA,CAAAxG,IAAA,OACNiG,OAAO;QACf;QAAC,OAAAU,YAAA,CAAAJ,MAAA;MAAA,EAHWK,WAAW,CAK3B,CAAC;IACH;EACF,CAAC,CAAC;EAhVF7I,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAAC0B,OAAO,CAACC,IAAI,CAAClC,aAAa,GAAGA,aAAa;AAAC"
}