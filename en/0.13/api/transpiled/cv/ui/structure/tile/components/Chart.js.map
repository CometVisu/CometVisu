{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "include",
    "MVisibility",
    "statics",
    "JS_LOADED",
    "Promise",
    "resolve",
    "reject",
    "check",
    "window",
    "d3",
    "util",
    "ScriptLoader",
    "includeScript",
    "ResourceManager",
    "getInstance",
    "toUri",
    "timer",
    "event",
    "Timer",
    "counter",
    "addListener",
    "Error",
    "then",
    "locale",
    "Manager",
    "getLanguage",
    "formatDefaultLocale",
    "timeFormatDefaultLocale",
    "CONFIG",
    "properties",
    "type",
    "init",
    "members",
    "_downloadedImage",
    "_url",
    "_headers",
    "_request",
    "_chart",
    "_width",
    "_height",
    "_loaded",
    "_dataSetConfigs",
    "_init",
    "element",
    "_element",
    "hasAttribute",
    "setType",
    "getAttribute",
    "Chart",
    "isVisible",
    "_loadData",
    "_applyVisible",
    "value",
    "Date",
    "now",
    "client",
    "io",
    "BackendConnections",
    "getClient",
    "url",
    "dataSets",
    "querySelectorAll",
    "promises",
    "dataSet",
    "ts",
    "showArea",
    "color",
    "start",
    "end",
    "xFormat",
    "xTicks",
    "timeHour",
    "every",
    "attr",
    "name",
    "i",
    "attributes",
    "length",
    "item",
    "split",
    "map",
    "part",
    "substring",
    "toUpperCase",
    "join",
    "timeMinute",
    "timeDay",
    "test",
    "parseInt",
    "parseFloat",
    "setTime",
    "getTime",
    "getResourcePath",
    "src",
    "push",
    "Fetch",
    "fetch",
    "data",
    "hasCustomChartsDataProcessor",
    "processChartsData",
    "err",
    "_onStatusError",
    "all",
    "responses",
    "_onSuccess",
    "chartData",
    "entry",
    "tsdata",
    "time",
    "minVal",
    "min",
    "d",
    "maxVal",
    "max",
    "format",
    "_lineChart",
    "x",
    "y",
    "z",
    "title",
    "String",
    "sprintf",
    "xDomain",
    "extent",
    "yDomain",
    "mixBlendMode",
    "multiTimeFormat",
    "getMilliseconds",
    "getSeconds",
    "getMinutes",
    "getHours",
    "getDay",
    "getDate",
    "getMonth",
    "formatsArray",
    "multiFormat",
    "date",
    "found",
    "fmt",
    "timeFormat",
    "key",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "tr",
    "severity",
    "message",
    "JSON",
    "stringify",
    "error",
    "c",
    "undefined",
    "defined",
    "curve",
    "curveLinear",
    "marginTop",
    "marginRight",
    "marginBottom",
    "marginLeft",
    "width",
    "height",
    "xType",
    "scaleTime",
    "xRange",
    "yType",
    "scaleLinear",
    "yRange",
    "yFormat",
    "yLabel",
    "zDomain",
    "strokeLinecap",
    "strokeLinejoin",
    "strokeWidth",
    "strokeOpacity",
    "xPadding",
    "config",
    "Object",
    "assign",
    "X",
    "Y",
    "Z",
    "O",
    "isNaN",
    "InternSet",
    "I",
    "range",
    "filter",
    "has",
    "xScale",
    "yScale",
    "xAxis",
    "axisBottom",
    "ticks",
    "tickSizeOuter",
    "tickFormat",
    "yAxis",
    "axisLeft",
    "T",
    "select",
    "remove",
    "linePath",
    "pointerMoved",
    "pointer",
    "xm",
    "ym",
    "least",
    "Math",
    "hypot",
    "dot",
    "text",
    "svg",
    "property",
    "dispatch",
    "bubbles",
    "pointerEntered",
    "pointerLeft",
    "node",
    "append",
    "style",
    "on",
    "targetTouches",
    "clientY",
    "pathRect",
    "getBoundingClientRect",
    "preventDefault",
    "passive",
    "call",
    "g",
    "lineGroups",
    "Map",
    "areaGroups",
    "barGroups",
    "set",
    "get",
    "size",
    "line",
    "selectAll",
    "p",
    "area",
    "y0",
    "y1",
    "xBarScale",
    "scaleBand",
    "domain",
    "padding",
    "val",
    "bandwidth",
    "destruct",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Chart.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loaded d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          'decimal': ',',\n          'thousands': '.',\n          'grouping': [3],\n          'currency': ['€', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          'dateTime': '%A, der %e. %B %Y, %X',\n          'date': '%d.%m.%Y',\n          'time': '%H:%M:%S',\n          'periods': ['AM', 'PM'],\n          'days': ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],\n          'shortDays': ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],\n          'months': ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],\n          'shortMonths': ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez']\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['axis-mixed', 'bar', 'line', 'scatter', 'pie', 'percentage'],\n      init: 'line'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _chart: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n\n    async _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      if (this.isVisible()) {\n        this._loadData();\n      }\n    },\n\n    _applyVisible(value) {\n      if (value && typeof window.d3 === 'object') {\n        this._loadData();\n      }\n    },\n\n    _loadData() {\n      if (this._loaded && (Date.now() - this._loaded) < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      let url;\n      const dataSets = this._element.querySelectorAll(':scope > dataset');\n      const promises = [];\n      this._dataSetConfigs = {};\n      for (let dataSet of dataSets) {\n        let ts = {\n          showArea: true,\n          color: '#FF9900',\n          type: dataSet.getAttribute('type') || 'line',\n          start: 'end-1day',\n          end: 'now',\n          xFormat: this._element.getAttribute('x-format') || '%H:%M',\n          xTicks: d3.timeHour.every(4)\n        };\n        let attr;\n        let name;\n        let value;\n        for (let i = 0; i < dataSet.attributes.length; i++) {\n          attr = dataSet.attributes.item(i);\n          // CamelCase attribute names\n          name = attr.name.split('-')\n            .map((part, i) => {\n              if (i > 0) {\n                return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n              }\n              return part;\n            })\n            .join('');\n          value = attr.value;\n          if (name === 'series') {\n            switch (value) {\n              case 'hour':\n                ts.xTicks = d3.timeMinute.every(5);\n                ts.start = 'end-1' + value;\n                break;\n\n              case 'day':\n                ts.xTicks = d3.timeHour.every(4);\n                ts.start = 'end-1' + value;\n                break;\n\n              case 'week':\n                ts.xTicks = d3.timeDay.every(1);\n                ts.start = 'end-1' + value;\n                break;\n\n              case 'month':\n                ts.xTicks = d3.timeDay.every(5);\n                ts.start = 'end-1' + value;\n                break;\n\n              case 'year':\n                ts.xTicks = d3.timeDay.every(31);\n                ts.start = 'end-1' + value;\n                break;\n            }\n          } else {\n            if (value === 'true' || value === 'false') {\n              value = value === 'true';\n            } else if (/^\\d+$/.test(value)) {\n              value = parseInt(value);\n            } else if (/^[\\d.]+$/.test(value)) {\n              value = parseFloat(value);\n            }\n            ts[name] = value;\n          }\n        }\n        let start = new Date();\n        start.setTime(start.getTime() - 60 * 60 * 24 * 1000);\n        url = client.getResourcePath('charts', {\n          src: ts.src,\n          start: ts.start,\n          end: ts.end\n        });\n        if (!url) {\n          continue;\n        }\n        this._dataSetConfigs[ts.src] = ts;\n        promises.push(cv.io.Fetch.fetch(url, null, false, client).then(data => {\n          if (client.hasCustomChartsDataProcessor(data)) {\n            data = client.processChartsData(data, ts);\n          }\n          return {\n            data: data,\n            ts: ts\n          };\n        }).catch(err => {\n          this._onStatusError(ts, url, err);\n        }));\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess: function(data) {\n      if (!this.isVisible()) {\n        return;\n      }\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              src: entry.ts.src,\n              time,\n              value\n            });\n          }\n        }\n      }\n      let minVal = d3.min(chartData, d => +d.value);\n      let maxVal = d3.max(chartData, d => +d.value) + 1;\n      if (minVal > 1.0) {\n        minVal -= 1;\n      }\n\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n\n      this._chart = this._lineChart(chartData, {\n        x: d => d.time,\n        y: d => d.value,\n        z: d => d.src,\n        color: d => {\n          return d && this._dataSetConfigs[d].color;\n        },\n        title: d => {\n          return cv.util.String.sprintf(format, d.value);\n        },\n        //yLabel: ts.unit,\n        xDomain: d3.extent(chartData, d => d.time),\n        yDomain: [minVal, maxVal],\n        showArea: d => {\n          return this._dataSetConfigs[d].showArea;\n        },\n        mixBlendMode: 'normal',\n        xFormat: this.multiTimeFormat([\n          ['.%L', function (d) {\n            return d.getMilliseconds();\n          }],\n          [':%S', function (d) {\n            return d.getSeconds();\n          }],\n          ['%H:%M', function (d) {\n            return d.getMinutes();\n          }],\n          ['%H', function (d) {\n            return d.getHours();\n          }],\n          ['%a %d', function (d) {\n            return d.getDay() && d.getDate() !== 1;\n          }],\n          ['%b %d', function (d) {\n            return d.getDate() !== 1;\n          }],\n          ['%B', function (d) {\n            return d.getMonth();\n          }],\n          ['%Y', function () {\n            return true;\n          }]\n        ])\n      });\n      this._loaded = Date.now();\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n * @param date\n */\nfunction multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError: function(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), err)\n      });\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param c\n     * @private\n     */\n    _lineChart: function(data, c) {\n      if (!cv.ui.structure.tile.components.Chart.CONFIG) {\n        cv.ui.structure.tile.components.Chart.CONFIG = {\n          x: d => d[0], // given d in data, returns the (temporal) x-value\n          y: d => d[1], // given d in data, returns the (quantitative) y-value\n          z: () => 1, // given d in data, returns the (categorical) z-value\n          title: undefined, // given d in data, returns the title text\n          defined: undefined, // for gaps in data\n          curve: d3.curveLinear, // method of interpolation between points\n          marginTop: 24, // top margin, in pixels\n          marginRight: 24, // right margin, in pixels\n          marginBottom: 24, // bottom margin, in pixels\n          marginLeft: 30, // left margin, in pixels\n          width: 392, // outer width, in pixels\n          height: 192, // outer height, in pixels\n          xType: d3.scaleTime, // type of x-scale\n          xDomain: undefined, // [xmin, xmax]\n          xRange: undefined, // [left, right]\n          xFormat: undefined, // a format specifier string for the x-axis\n          yType: d3.scaleLinear, // type of y-scale\n          yDomain: undefined, // [ymin, ymax]\n          yRange: undefined, // [bottom, top]\n          yFormat: undefined, // a format specifier string for the y-axis\n          yLabel: undefined, // a label for the y-axis\n          zDomain: undefined, // array of z-values\n          color: 'currentColor', // stroke color of line, as a constant or a function of *z*\n          strokeLinecap: undefined, // stroke line cap of line\n          strokeLinejoin: undefined, // stroke line join of line\n          strokeWidth: 1.5, // stroke width of line\n          strokeOpacity: undefined, // stroke opacity of line\n          mixBlendMode: 'multiply', // blend mode of lines\n          showArea: undefined, // show area below the line,\n          xPadding: 0.1 // amount of x-range to reserve to separate bars\n        };\n      }\n      const config = Object.assign({}, cv.ui.structure.tile.components.Chart.CONFIG, c);\n      config.xRange = [config.marginLeft, config.width - config.marginRight]; // [left, right]\n      config.yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n      // Compute values.\n      const X = d3.map(data, config.x);\n      const Y = d3.map(data, config.y);\n      const Z = d3.map(data, config.z);\n      const O = d3.map(data, d => d);\n      if (config.defined === undefined) {\n        config.defined = (d, i) => !isNaN(X[i]) && !isNaN(Y[i]);\n      }\n      //const D = d3.map(data, config.defined);\n\n      // Compute default domains, and unique the z-domain.\n      if (config.xDomain === undefined) {\n        config.xDomain = d3.extent(X);\n      }\n      if (config.yDomain === undefined) {\n        config.yDomain = [0, d3.max(Y, d => typeof d === 'string' ? +d : d)];\n      }\n      if (config.zDomain === undefined) {\n        config.zDomain = Z;\n      }\n      config.zDomain = new d3.InternSet(config.zDomain);\n\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => config.zDomain.has(Z[i]));\n\n      // Construct scales and axes.\n      const xScale = config.xType(config.xDomain, config.xRange);\n      const yScale = config.yType(config.yDomain, config.yRange);\n      const xAxis = d3.axisBottom(xScale).ticks(config.width / 80).tickSizeOuter(0).tickFormat(config.xFormat);\n      const yAxis = d3.axisLeft(yScale).ticks(config.height / 60, config.yFormat);\n\n      // Compute titles.\n      const T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n\n      d3.select(this._element).select('svg').remove();\n\n      let linePath;\n\n      const pointerMoved = event => {\n        const [xm, ym] = d3.pointer(event);\n        const i = d3.least(I, i => Math.hypot(xScale(X[i]) - xm, yScale(Y[i]) - ym)); // closest point\n        dot.attr('transform', `translate(${xScale(X[i])},${yScale(Y[i])})`);\n        if (T) {\n          dot.select('text').text(T[i]);\n        }\n        svg.property('value', O[i]).dispatch('input', {bubbles: true});\n      };\n\n      const pointerEntered = () => {\n        dot.attr('display', null);\n      };\n\n      const pointerLeft = () => {\n        dot.attr('display', 'none');\n        svg.node().value = null;\n        svg.dispatch('input', {bubbles: true});\n      };\n\n      const svg = d3.select(this._element)\n        .append('svg')\n        .attr('width', config.width)\n        .attr('height', config.height)\n        .attr('viewBox', [0, 0, config.width, config.height])\n        .attr('style', 'max-width: 100%; height: auto; height: intrinsic;')\n        .style('-webkit-tap-highlight-color', 'transparent')\n        .on('pointerenter', pointerEntered)\n        .on('pointermove', pointerMoved)\n        .on('pointerleave', pointerLeft)\n        .on('touchmove', event => {\n          let y = event.targetTouches[0].clientY;\n          if (linePath) {\n            const pathRect = linePath.node().getBoundingClientRect();\n            if (y > pathRect.y && y < (pathRect.y + pathRect.height)) {\n              event.preventDefault();\n            }\n          }\n        }, { passive: false });\n\n      svg.append('g')\n        .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n        .call(xAxis);\n\n      svg.append('g')\n        .attr('transform', `translate(${config.marginLeft},0)`)\n        .call(yAxis)\n        .call(g => g.select('.domain').remove())\n        .call(g => g.append('text')\n          .attr('x', -config.marginLeft)\n          .attr('y', 10)\n          .attr('fill', 'currentColor')\n          .attr('text-anchor', 'start')\n          .text(config.yLabel));\n\n      const lineGroups = new Map();\n      const areaGroups = new Map();\n      const barGroups = new Map();\n      for (let i of I) {\n        const key = Z[i];\n        if (typeof config.showArea === 'function' && config.showArea(key)) {\n          if (!areaGroups.has(key)) {\n            areaGroups.set(key, []);\n          }\n          areaGroups.get(key).push(i);\n        }\n        switch (this._dataSetConfigs[key].type) {\n          case 'line':\n            if (!lineGroups.has(key)) {\n              lineGroups.set(key, []);\n            }\n            lineGroups.get(key).push(i);\n            break;\n\n          case 'bar':\n            if (!barGroups.has(key)) {\n              barGroups.set(key, []);\n            }\n            barGroups.get(key).push(i);\n            break;\n        }\n      }\n\n      if (lineGroups.size > 0) {\n        // Construct a line generator.\n        const line = d3.line()\n          //.defined(i => D[i])\n          .curve(config.curve)\n          .x(i => xScale(X[i]))\n          .y(i => yScale(Y[i]));\n\n        linePath = svg.append('g')\n          .attr('fill', 'none')\n          .attr('stroke', typeof config.color === 'string' ? config.color : null)\n          .attr('stroke-linecap', config.strokeLinecap)\n          .attr('stroke-linejoin', config.strokeLinejoin)\n          .attr('stroke-width', config.strokeWidth)\n          .attr('stroke-opacity', config.strokeOpacity)\n          .selectAll('path')\n          .data(lineGroups)\n          .join('path')\n          .style('mix-blend-mode', config.mixBlendMode)\n          .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          .attr('d', d => line(d[1]));\n      }\n\n      // Add the area\n      if (areaGroups.size > 0) {\n        const area = d3.area()\n          //.defined(i => D[i])\n          .curve(config.curve)\n          .x(i => xScale(X[i]))\n          .y0(() => config.yRange[0])\n          .y1(i => yScale(Y[i]));\n\n        svg.append('g')\n          .attr('stroke', 'none')\n          .attr('fill', typeof config.color === 'string' ? config.color + '30' : null)\n          .selectAll('path')\n          .data(areaGroups)\n          .join('path')\n          .style('mix-blend-mode', config.mixBlendMode)\n          .attr('fill', typeof config.color === 'function' ? p => config.color(p[0]) + '30' : null)\n          .attr('d', d => area(d[1]));\n      }\n\n      if (barGroups.size > 0) {\n        const xBarScale = d3.scaleBand().domain(X).range(config.xRange).padding(config.xPadding);\n        svg.append('g')\n          .selectAll('g')\n          .data(barGroups)\n          .join('g')\n            .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) + '30' : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n            .attr('x', d => xBarScale(X[d.value]))\n            .attr('y', d => yScale(Y[d.value]))\n            .attr('height', d => config.yRange[0] - yScale(Y[d.value]))\n            .attr('width', xBarScale.bandwidth());\n      }\n\n      const dot = svg.append('g')\n        .attr('display', 'none')\n        .attr('fill', 'currentColor');\n\n      dot.append('circle')\n        .attr('r', 2.5);\n\n      dot.append('text')\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', 10)\n        .attr('text-anchor', 'middle')\n        .attr('y', -8);\n\n      return Object.assign(svg.node(), {value: null});\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._chart = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(cv.ui.structure.tile.Controller.PREFIX + 'chart', class extends QxConnector {\n      constructor() {\n        super(QxClass);\n      }\n    });\n  }\n});\n"
  ]
}