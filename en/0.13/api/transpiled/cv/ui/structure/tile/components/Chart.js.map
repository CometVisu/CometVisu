{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "include",
    "MVisibility",
    "statics",
    "ChartCounter",
    "JS_LOADED",
    "Promise",
    "resolve",
    "reject",
    "check",
    "window",
    "d3",
    "util",
    "ScriptLoader",
    "includeScript",
    "ResourceManager",
    "getInstance",
    "toUri",
    "timer",
    "event",
    "Timer",
    "counter",
    "addListener",
    "Error",
    "then",
    "locale",
    "Manager",
    "getLanguage",
    "formatDefaultLocale",
    "decimal",
    "thousands",
    "grouping",
    "currency",
    "timeFormatDefaultLocale",
    "dateTime",
    "date",
    "time",
    "periods",
    "days",
    "shortDays",
    "months",
    "shortMonths",
    "CONFIG",
    "properties",
    "type",
    "init",
    "members",
    "_downloadedImage",
    "_url",
    "_headers",
    "_request",
    "_chart",
    "_width",
    "_height",
    "_loaded",
    "_dataSetConfigs",
    "_init",
    "element",
    "_element",
    "hasAttribute",
    "setType",
    "getAttribute",
    "Chart",
    "isVisible",
    "_loadData",
    "chartId",
    "button",
    "document",
    "createElement",
    "classList",
    "add",
    "buttonAddress",
    "setAttribute",
    "textContent",
    "appendChild",
    "icon",
    "parentElement",
    "insertBefore",
    "tileAddress",
    "parent",
    "nodeName",
    "toLowerCase",
    "tileWidget",
    "ev",
    "CustomEvent",
    "detail",
    "value",
    "source",
    "dispatchEvent",
    "addEventListener",
    "onStateUpdate",
    "stopPropagation",
    "_applyVisible",
    "Date",
    "now",
    "client",
    "io",
    "BackendConnections",
    "getClient",
    "url",
    "dataSets",
    "querySelectorAll",
    "series",
    "seriesConfig",
    "xTicks",
    "timeMinute",
    "every",
    "start",
    "timeHour",
    "timeDay",
    "promises",
    "dataSet",
    "ts",
    "Object",
    "assign",
    "showArea",
    "color",
    "title",
    "end",
    "attr",
    "name",
    "i",
    "attributes",
    "length",
    "item",
    "split",
    "map",
    "part",
    "substring",
    "toUpperCase",
    "join",
    "test",
    "parseInt",
    "parseFloat",
    "setTime",
    "getTime",
    "getResourcePath",
    "src",
    "push",
    "Fetch",
    "fetch",
    "data",
    "hasCustomChartsDataProcessor",
    "processChartsData",
    "err",
    "_onStatusError",
    "all",
    "responses",
    "_onSuccess",
    "chartData",
    "entry",
    "tsdata",
    "minVal",
    "min",
    "d",
    "maxVal",
    "max",
    "format",
    "timeFormat",
    "formatString",
    "multiTimeFormat",
    "getMilliseconds",
    "getSeconds",
    "getMinutes",
    "getHours",
    "getDay",
    "getDate",
    "getMonth",
    "_lineChart",
    "x",
    "y",
    "z",
    "String",
    "sprintf",
    "chartTitle",
    "xDomain",
    "extent",
    "yDomain",
    "mixBlendMode",
    "xFormat",
    "formatsArray",
    "multiFormat",
    "found",
    "fmt",
    "key",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "tr",
    "severity",
    "message",
    "JSON",
    "stringify",
    "error",
    "c",
    "undefined",
    "defined",
    "curve",
    "curveLinear",
    "marginTop",
    "marginRight",
    "marginBottom",
    "marginLeft",
    "width",
    "height",
    "xType",
    "scaleTime",
    "xRange",
    "yType",
    "scaleLinear",
    "yRange",
    "yFormat",
    "yLabel",
    "zDomain",
    "strokeLinecap",
    "strokeLinejoin",
    "strokeWidth",
    "strokeOpacity",
    "xPadding",
    "config",
    "X",
    "Y",
    "Z",
    "O",
    "isNaN",
    "InternSet",
    "I",
    "range",
    "filter",
    "has",
    "xScale",
    "yScale",
    "xAxis",
    "axisBottom",
    "ticks",
    "tickSizeOuter",
    "tickFormat",
    "yAxis",
    "axisLeft",
    "T",
    "select",
    "remove",
    "tooltip",
    "append",
    "style",
    "linePath",
    "pointerMoved",
    "pointer",
    "xm",
    "ym",
    "least",
    "Math",
    "hypot",
    "scaleFactorX",
    "offsetWidth",
    "scaleFactorY",
    "offsetHeight",
    "dot",
    "ttNode",
    "node",
    "timeString",
    "top",
    "left",
    "lineTitle",
    "html",
    "svg",
    "property",
    "dispatch",
    "bubbles",
    "pointerEntered",
    "pointerLeft",
    "relatedTarget",
    "on",
    "targetTouches",
    "clientY",
    "pathRect",
    "getBoundingClientRect",
    "preventDefault",
    "passive",
    "showXAxis",
    "showYAxis",
    "call",
    "g",
    "text",
    "lineGroups",
    "Map",
    "areaGroups",
    "barGroups",
    "set",
    "get",
    "size",
    "line",
    "selectAll",
    "p",
    "area",
    "y0",
    "y1",
    "xBarScale",
    "scaleBand",
    "domain",
    "padding",
    "val",
    "bandwidth",
    "destruct",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js"
  ],
  "sourcesContent": [
    "/* Chart.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ChartCounter: 0,\n\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loaded d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          decimal: ',',\n          thousands: '.',\n          grouping: [3],\n          currency: ['€', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          dateTime: '%A, der %e. %B %Y, %X',\n          date: '%d.%m.%Y',\n          time: '%H:%M:%S',\n          periods: ['AM', 'PM'],\n          days: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],\n\n          shortDays: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],\n          months: [\n            'Januar',\n            'Februar',\n            'März',\n            'April',\n            'Mai',\n            'Juni',\n            'Juli',\n            'August',\n            'September',\n            'Oktober',\n            'November',\n            'Dezember'\n          ],\n\n          shortMonths: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez']\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['axis-mixed', 'bar', 'line', 'scatter', 'pie', 'percentage'],\n      init: 'line'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _chart: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n\n    async _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      if (this.isVisible()) {\n        this._loadData();\n      }\n      if (element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        const chartId = 'chart-' + cv.ui.structure.tile.components.Chart.ChartCounter;\n        // add fullscreen button + address\n        const button = document.createElement('cv-button');\n        button.classList.add('fullscreen');\n        const buttonAddress = document.createElement('cv-address');\n        buttonAddress.setAttribute('backend', 'system');\n        buttonAddress.textContent = `state:${chartId}-popup`;\n        button.appendChild(buttonAddress);\n        const icon = document.createElement('cv-icon');\n        icon.textContent = 'ri-fullscreen-line';\n        button.appendChild(icon);\n        element.parentElement.insertBefore(button, element);\n\n        // address\n        const tileAddress = document.createElement('cv-address');\n        tileAddress.setAttribute('mode', 'read');\n        tileAddress.setAttribute('target', 'fullscreen-popup');\n        tileAddress.setAttribute('backend', 'system');\n        tileAddress.setAttribute('send-mode', 'always');\n        tileAddress.textContent = buttonAddress.textContent;\n        element.parentElement.appendChild(tileAddress);\n\n        // listen to parent tile of popup is opened or not\n        let parent = element;\n        while (parent && parent.nodeName.toLowerCase() !== 'cv-tile') {\n          parent = parent.parentElement;\n        }\n        if (parent) {\n          const tileWidget = parent.getInstance();\n          tileWidget.addListener('closed', () => {\n            const ev = new CustomEvent('sendState', {\n              detail: {\n                value: 0,\n                source: this\n              }\n            });\n            buttonAddress.dispatchEvent(ev);\n          });\n\n          // because we added a read address to the tile after is has been initialized we need to init the listener here manually\n          parent.addEventListener('stateUpdate', ev => {\n            tileWidget.onStateUpdate(ev);\n            // cancel event here\n            ev.stopPropagation();\n          });\n        }\n      }\n\n      cv.ui.structure.tile.components.Chart.ChartCounter++;\n    },\n\n    _applyVisible(value) {\n      if (value && typeof window.d3 === 'object') {\n        this._loadData();\n      }\n    },\n\n    _loadData() {\n      if (this._loaded && Date.now() - this._loaded < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      let url;\n      const dataSets = this._element.querySelectorAll(':scope > dataset');\n      const series = this._element.getAttribute('series') || 'day';\n      const seriesConfig = {};\n      switch (series) {\n        case 'hour':\n          seriesConfig.xTicks = d3.timeMinute.every(5);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'day':\n          seriesConfig.xTicks = d3.timeHour.every(4);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'week':\n          seriesConfig.xTicks = d3.timeDay.every(1);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'month':\n          seriesConfig.xTicks = d3.timeDay.every(5);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'year':\n          seriesConfig.xTicks = d3.timeDay.every(31);\n          seriesConfig.start = 'end-1' + series;\n          break;\n      }\n      const promises = [];\n      this._dataSetConfigs = {};\n      for (let dataSet of dataSets) {\n        let ts = Object.assign({\n          showArea: true,\n          color: '#FF9900',\n          type: 'line',\n          title: '',\n          start: 'end-1day',\n          end: 'now',\n          xTicks: d3.timeHour.every(4)\n        }, seriesConfig);\n\n        let attr;\n        let name;\n        let value;\n        for (let i = 0; i < dataSet.attributes.length; i++) {\n          attr = dataSet.attributes.item(i);\n          // CamelCase attribute names\n          name = attr.name\n            .split('-')\n            .map((part, i) => {\n              if (i > 0) {\n                return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n              }\n              return part;\n            })\n            .join('');\n          value = attr.value;\n          if (value === 'true' || value === 'false') {\n            value = value === 'true';\n          } else if (/^\\d+$/.test(value)) {\n            value = parseInt(value);\n          } else if (/^[\\d.]+$/.test(value)) {\n            value = parseFloat(value);\n          }\n          ts[name] = value;\n        }\n        let start = new Date();\n        start.setTime(start.getTime() - 60 * 60 * 24 * 1000);\n        url = client.getResourcePath('charts', {\n          src: ts.src,\n          start: ts.start,\n          end: ts.end\n        });\n\n        if (!url) {\n          continue;\n        }\n        this._dataSetConfigs[ts.src] = ts;\n        promises.push(\n          cv.io.Fetch.fetch(url, null, false, client)\n            .then(data => {\n              if (client.hasCustomChartsDataProcessor(data)) {\n                data = client.processChartsData(data, ts);\n              }\n              return {\n                data: data,\n                ts: ts\n              };\n            })\n            .catch(err => {\n              this._onStatusError(ts, url, err);\n            })\n        );\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess(data) {\n      if (!this.isVisible()) {\n        return;\n      }\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              src: entry.ts.src,\n              time,\n              value\n            });\n          }\n        }\n      }\n      let minVal = d3.min(chartData, d => +d.value);\n      let maxVal = d3.max(chartData, d => +d.value) + 1;\n      if (minVal > 1.0) {\n        minVal -= 1;\n      }\n\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n      let timeFormat = null;\n      if (this._element.hasAttribute('x-format')) {\n        const formatString = this._element.getAttribute('x-format');\n        timeFormat = date => d3.timeFormat(formatString)(date);\n      } else {\n        // format auto-detection\n        timeFormat = this.multiTimeFormat([\n          [\n            '.%L',\n            function (d) {\n              return d.getMilliseconds();\n            }\n          ],\n\n          [\n            ':%S',\n            function (d) {\n              return d.getSeconds();\n            }\n          ],\n\n          [\n            '%H:%M',\n            function (d) {\n              return d.getMinutes();\n            }\n          ],\n\n          [\n            '%H',\n            function (d) {\n              return d.getHours();\n            }\n          ],\n\n          [\n            '%a %d',\n            function (d) {\n              return d.getDay() && d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%b %d',\n            function (d) {\n              return d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%B',\n            function (d) {\n              return d.getMonth();\n            }\n          ],\n\n          [\n            '%Y',\n            function () {\n              return true;\n            }\n          ]\n        ]);\n      }\n\n\n      this._chart = this._lineChart(chartData, {\n        x: d => d.time,\n        y: d => d.value,\n        z: d => d.src,\n        color: d => {\n          return d && this._dataSetConfigs[d].color;\n        },\n        title: d => {\n          return cv.util.String.sprintf(format, d.value);\n        },\n        chartTitle: this._element.hasAttribute('title') ? this._element.getAttribute('title') : null,\n        //yLabel: ts.unit,\n        xDomain: d3.extent(chartData, d => d.time),\n        yDomain: [minVal, maxVal],\n        showArea: d => {\n          return this._dataSetConfigs[d].showArea;\n        },\n        mixBlendMode: 'normal',\n        xFormat: timeFormat\n      });\n\n      this._loaded = Date.now();\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n       * @param date\n       */\n      function multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), err)\n      });\n\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param c\n     * @private\n     */\n    _lineChart(data, c) {\n      if (!cv.ui.structure.tile.components.Chart.CONFIG) {\n        cv.ui.structure.tile.components.Chart.CONFIG = {\n          x: d => d[0], // given d in data, returns the (temporal) x-value\n          y: d => d[1], // given d in data, returns the (quantitative) y-value\n          z: () => 1, // given d in data, returns the (categorical) z-value\n          chartTitle: undefined, // title for the chart\n          title: undefined, // given d in data, returns the title text\n          defined: undefined, // for gaps in data\n          curve: d3.curveLinear, // method of interpolation between points\n          marginTop: 24, // top margin, in pixels\n          marginRight: 24, // right margin, in pixels\n          marginBottom: 24, // bottom margin, in pixels\n          marginLeft: 30, // left margin, in pixels\n          width: 392, // outer width, in pixels\n          height: 192, // outer height, in pixels\n          xType: d3.scaleTime, // type of x-scale\n          xDomain: undefined, // [xmin, xmax]\n          xRange: undefined, // [left, right]\n          xFormat: undefined, // a format specifier string for the x-axis\n          yType: d3.scaleLinear, // type of y-scale\n          yDomain: undefined, // [ymin, ymax]\n          yRange: undefined, // [bottom, top]\n          yFormat: undefined, // a format specifier string for the y-axis\n          yLabel: undefined, // a label for the y-axis\n          zDomain: undefined, // array of z-values\n          color: 'currentColor', // stroke color of line, as a constant or a function of *z*\n          strokeLinecap: undefined, // stroke line cap of line\n          strokeLinejoin: undefined, // stroke line join of line\n          strokeWidth: 1.5, // stroke width of line\n          strokeOpacity: undefined, // stroke opacity of line\n          mixBlendMode: 'multiply', // blend mode of lines\n          showArea: undefined, // show area below the line,\n          xPadding: 0.1 // amount of x-range to reserve to separate bars\n        };\n      }\n      const config = Object.assign({}, cv.ui.structure.tile.components.Chart.CONFIG, c);\n\n      config.xRange = [config.marginLeft, config.width - config.marginRight]; // [left, right]\n      config.yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n      // Compute values.\n      const X = d3.map(data, config.x);\n      const Y = d3.map(data, config.y);\n      const Z = d3.map(data, config.z);\n      const O = d3.map(data, d => d);\n      if (config.defined === undefined) {\n        config.defined = (d, i) => !isNaN(X[i]) && !isNaN(Y[i]);\n      }\n      //const D = d3.map(data, config.defined);\n\n      // Compute default domains, and unique the z-domain.\n      if (config.xDomain === undefined) {\n        config.xDomain = d3.extent(X);\n      }\n      if (config.yDomain === undefined) {\n        config.yDomain = [0, d3.max(Y, d => (typeof d === 'string' ? +d : d))];\n      }\n      if (config.zDomain === undefined) {\n        config.zDomain = Z;\n      }\n      config.zDomain = new d3.InternSet(config.zDomain);\n\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => config.zDomain.has(Z[i]));\n\n      // Construct scales and axes.\n      const xScale = config.xType(config.xDomain, config.xRange);\n      const yScale = config.yType(config.yDomain, config.yRange);\n      const xAxis = d3\n        .axisBottom(xScale)\n        .ticks(config.width / 80)\n        .tickSizeOuter(0)\n        .tickFormat(config.xFormat);\n      const yAxis = d3.axisLeft(yScale).ticks(config.height / 60, config.yFormat);\n\n      // Compute titles.\n      const T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n\n      d3.select(this._element).select('svg').remove();\n\n      const tooltip = d3.select(this._element)\n        .append('div')\n        .style('opacity', 0)\n        .attr('class', 'tooltip');\n\n      let linePath;\n\n      const pointerMoved = event => {\n        const [xm, ym] = d3.pointer(event);\n        const i = d3.least(I, i => Math.hypot(xScale(X[i]) - xm, yScale(Y[i]) - ym));\n        const scaleFactorX = this._element.offsetWidth / config.width;\n        const scaleFactorY = this._element.offsetHeight / config.height;\n        // closest point\n        dot.attr('transform', `translate(${xScale(X[i])},${yScale(Y[i])})`);\n        if (T) {\n          const ttNode = tooltip.node();\n          const timeString = config.xFormat(new Date(X[i]));\n          const top = ym*scaleFactorY - ttNode.offsetHeight - 40;\n          let left = (xm*scaleFactorX + ttNode.offsetWidth) > this._element.offsetWidth ? xm*scaleFactorX - ttNode.offsetWidth : xm*scaleFactorX;\n\n          const key = Z[i];\n          const lineTitle = this._dataSetConfigs[key] && this._dataSetConfigs[key].title ? this._dataSetConfigs[key].title + ': ' : '';\n          tooltip\n            .html(`${timeString}<br/>${lineTitle}${T[i]}`)\n            .style('left', left + 'px')\n            .style('top', top + 'px');\n        }\n        svg.property('value', O[i]).dispatch('input', { bubbles: true });\n      };\n\n      const pointerEntered = () => {\n        dot.attr('display', null);\n        tooltip.style('opacity', 1);\n      };\n\n      const pointerLeft = ev => {\n        if (ev.relatedTarget !== tooltip.node()) {\n          dot.attr('display', 'none');\n          svg.node().value = null;\n          svg.dispatch('input', {bubbles: true});\n          tooltip.style('opacity', 0);\n        }\n      };\n\n      const svg = d3\n        .select(this._element)\n        .append('svg')\n        .attr('viewBox', [0, 0, config.width, config.height])\n        .attr('style', 'max-width: 100%; height: auto; height: intrinsic;')\n        .style('-webkit-tap-highlight-color', 'transparent')\n        .on('pointerenter', pointerEntered)\n        .on('pointermove', pointerMoved)\n        .on('pointerleave', pointerLeft)\n        .on(\n          'touchmove',\n          event => {\n            let y = event.targetTouches[0].clientY;\n            if (linePath) {\n              const pathRect = linePath.node().getBoundingClientRect();\n              if (y > pathRect.y && y < pathRect.y + pathRect.height) {\n                event.preventDefault();\n              }\n            }\n          },\n          { passive: false }\n        );\n\n      const showXAxis = !this._element.hasAttribute('show-x-axis') || this._element.getAttribute('show-x-axis') === 'true';\n      const showYAxis = !this._element.hasAttribute('show-y-axis') || this._element.getAttribute('show-y-axis') === 'true';\n      if (showXAxis) {\n        svg\n          .append('g')\n          .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n          .call(xAxis);\n      }\n      if (showYAxis) {\n        svg\n          .append('g')\n          .attr('transform', `translate(${config.marginLeft},0)`)\n          .call(yAxis)\n          .call(g => g.select('.domain').remove())\n          .call(g =>\n            g\n              .append('text')\n              .attr('x', -config.marginLeft)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(config.yLabel)\n          );\n      }\n\n      if (config.chartTitle) {\n        svg.append('text')\n          .attr('x', (config.width / 2))\n          .attr('y', config.marginTop)\n          .attr('class', 'chart-title')\n          .text(config.chartTitle);\n      }\n\n      const lineGroups = new Map();\n      const areaGroups = new Map();\n      const barGroups = new Map();\n      for (let i of I) {\n        const key = Z[i];\n        if (typeof config.showArea === 'function' && config.showArea(key)) {\n          if (!areaGroups.has(key)) {\n            areaGroups.set(key, []);\n          }\n          areaGroups.get(key).push(i);\n        }\n        switch (this._dataSetConfigs[key].type) {\n          case 'line':\n            if (!lineGroups.has(key)) {\n              lineGroups.set(key, []);\n            }\n            lineGroups.get(key).push(i);\n            break;\n\n          case 'bar':\n            if (!barGroups.has(key)) {\n              barGroups.set(key, []);\n            }\n            barGroups.get(key).push(i);\n            break;\n        }\n      }\n\n      if (lineGroups.size > 0) {\n        // Construct a line generator.\n        const line = d3\n          .line()\n          //.defined(i => D[i])\n          .curve(config.curve)\n          .x(i => xScale(X[i]))\n          .y(i => yScale(Y[i]));\n\n        linePath = svg\n          .append('g')\n          .attr('fill', 'none')\n          .attr('stroke', typeof config.color === 'string' ? config.color : null)\n          .attr('stroke-linecap', config.strokeLinecap)\n          .attr('stroke-linejoin', config.strokeLinejoin)\n          .attr('stroke-width', config.strokeWidth)\n          .attr('stroke-opacity', config.strokeOpacity)\n          .selectAll('path')\n          .data(lineGroups)\n          .join('path')\n          .style('mix-blend-mode', config.mixBlendMode)\n          .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          .attr('d', d => line(d[1]));\n      }\n\n      // Add the area\n      if (areaGroups.size > 0) {\n        const area = d3\n          .area()\n          //.defined(i => D[i])\n          .curve(config.curve)\n          .x(i => xScale(X[i]))\n          .y0(() => config.yRange[0])\n          .y1(i => yScale(Y[i]));\n\n        svg\n          .append('g')\n          .attr('stroke', 'none')\n          .attr('fill', typeof config.color === 'string' ? config.color + '30' : null)\n          .selectAll('path')\n          .data(areaGroups)\n          .join('path')\n          .style('mix-blend-mode', config.mixBlendMode)\n          .attr('fill', typeof config.color === 'function' ? p => config.color(p[0]) + '30' : null)\n          .attr('d', d => area(d[1]));\n      }\n\n      if (barGroups.size > 0) {\n        const xBarScale = d3.scaleBand().domain(X).range(config.xRange).padding(config.xPadding);\n        svg\n          .append('g')\n          .selectAll('g')\n          .data(barGroups)\n          .join('g')\n          .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) + '30' : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n          .attr('x', d => xBarScale(X[d.value]))\n          .attr('y', d => yScale(Y[d.value]))\n          .attr('height', d => config.yRange[0] - yScale(Y[d.value]))\n          .attr('width', xBarScale.bandwidth());\n      }\n\n      const dot = svg.append('g').attr('display', 'none').attr('fill', 'currentColor');\n\n      dot.append('circle').attr('r', 2.5);\n\n      dot\n        .append('text')\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', 10)\n        .attr('text-anchor', 'middle')\n        .attr('y', -8);\n\n      return Object.assign(svg.node(), { value: null });\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._chart = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'chart',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}