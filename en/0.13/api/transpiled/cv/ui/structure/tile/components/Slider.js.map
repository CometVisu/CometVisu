{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "properties",
    "stepWidth",
    "check",
    "init",
    "min",
    "apply",
    "max",
    "showValue",
    "throttleInterval",
    "members",
    "__throttled",
    "__input",
    "_init",
    "element",
    "_element",
    "hasAttribute",
    "setThrottleInterval",
    "parseInt",
    "getAttribute",
    "_applyThrottleInterval",
    "getThrottleInterval",
    "input",
    "querySelector",
    "document",
    "createElement",
    "classList",
    "add",
    "setAttribute",
    "insertBefore",
    "oninput",
    "call",
    "setStepWidth",
    "setMin",
    "setMax",
    "setShowValue",
    "_applyShowValue",
    "decreaseElement",
    "addEventListener",
    "ev",
    "onDecrease",
    "increaseElement",
    "onIncrease",
    "value",
    "util",
    "Function",
    "throttle",
    "onInput",
    "trailing",
    "abort",
    "_applyMin",
    "_applyMax",
    "valueLabel",
    "firstChild",
    "_updateValue",
    "mappedValue",
    "target",
    "isShowValue",
    "innerText",
    "__sendValue",
    "getValue",
    "getStepWidth",
    "on",
    "CustomEvent",
    "detail",
    "source",
    "_writeAddresses",
    "filter",
    "addr",
    "forEach",
    "address",
    "dispatchEvent",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "Slider"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Slider.js"
  ],
  "sourcesContent": [
    "/* Slider.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a range slider.\n */\nqx.Class.define('cv.ui.structure.tile.components.Slider', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 5\n    },\n\n    min: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyMin'\n    },\n\n    max: {\n      check: 'Number',\n      init: 100,\n      apply: '_applyMax'\n    },\n\n    showValue: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowValue'\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __throttled: null,\n    __input: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      } else {\n        this._applyThrottleInterval(this.getThrottleInterval());\n      }\n\n      // init components\n      let input = element.querySelector(':scope > input');\n      if (!input) {\n        input = document.createElement('input');\n        input.classList.add('slider');\n        input.setAttribute('type', 'range');\n        element.insertBefore(input, element.querySelector(':scope > .up'));\n        input.oninput = () => this.__throttled.call();\n      }\n      this.__input = input;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseInt(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('min')) {\n        this.setMin(parseInt(element.getAttribute('min')));\n      }\n      if (element.hasAttribute('max')) {\n        this.setMax(parseInt(element.getAttribute('max')));\n      }\n      if (element.hasAttribute('hide-value') && element.getAttribute('hide-value') === 'true') {\n        this.setShowValue(false);\n      } else {\n        this._applyShowValue(true);\n      }\n\n      const decreaseElement = element.querySelector(':scope > .decrease');\n      if (decreaseElement) {\n        decreaseElement.addEventListener('click', ev => this.onDecrease());\n      }\n      const increaseElement = element.querySelector(':scope > .increase');\n      if (increaseElement) {\n        increaseElement.addEventListener('click', ev => this.onIncrease());\n      }\n    },\n\n    _applyThrottleInterval(value) {\n      if (value > 0) {\n        this.__throttled = cv.util.Function.throttle(this.onInput, value, { trailing: true }, this);\n      } else {\n        // no throttling, direct call\n        this.__throttled = {\n          call: () => this.onInput(),\n          abort: () => {}\n        };\n      }\n    },\n\n    _applyMin(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('min', '' + value);\n    },\n\n    _applyMax(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('max', '' + value);\n    },\n\n    _applyShowValue(value) {\n      let valueLabel = this._element.querySelector(':scope > label.value');\n      if (value) {\n        if (!valueLabel) {\n          valueLabel = document.createElement('label');\n          valueLabel.classList.add('value');\n          valueLabel.classList.add('secondary');\n          this._element.insertBefore(valueLabel, this._element.firstChild);\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector(':scope > input');\n      if (target) {\n        target.value = value;\n      }\n      if (this.isShowValue()) {\n        let valueLabel = this._element.querySelector(':scope > label.value');\n        if (valueLabel) {\n          valueLabel.innerText = mappedValue;\n        }\n      }\n    },\n\n    onInput() {\n      this.__sendValue(this.__input.value);\n    },\n\n    onDecrease() {\n      const value = this.getValue() - this.getStepWidth();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getValue() + this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'slider',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}