{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "properties",
    "appearance",
    "check",
    "init",
    "apply",
    "depth",
    "domReady",
    "showLabels",
    "members",
    "_applyAppearance",
    "value",
    "oldValue",
    "main",
    "document",
    "querySelector",
    "classList",
    "remove",
    "add",
    "_applyDepth",
    "isDomReady",
    "_generateMenu",
    "_onDomAppended",
    "setDomReady",
    "event",
    "message",
    "Bus",
    "unsubscribe",
    "_init",
    "element",
    "_element",
    "model",
    "getAttribute",
    "error",
    "setShowLabels",
    "subscribe",
    "rootList",
    "createElement",
    "appendChild",
    "ham",
    "href",
    "onclick",
    "_onHamburgerMenu",
    "icon",
    "_onPageChange",
    "Registration",
    "addListener",
    "_onPointerDown",
    "_onSwipe",
    "currentPage",
    "window",
    "location",
    "hash",
    "substring",
    "parentElement",
    "firstPage",
    "replaceChildren",
    "__generatePagesModel",
    "toggle",
    "querySelectorAll",
    "detail",
    "setAttribute",
    "ev",
    "target",
    "getTarget",
    "contains",
    "tagName",
    "toLowerCase",
    "Timer",
    "once",
    "_closeAll",
    "getDirection",
    "next",
    "click",
    "current",
    "previousElementSibling",
    "prev",
    "except",
    "removeAttribute",
    "parentList",
    "currentLevel",
    "pages",
    "values",
    "page",
    "pageId",
    "pageName",
    "pageIcon",
    "li",
    "a",
    "i",
    "title",
    "isShowLabels",
    "text",
    "createTextNode",
    "getDepth",
    "length",
    "details",
    "summary",
    "addEventListener",
    "hasAttribute",
    "pointerType",
    "currentTarget",
    "clientWidth",
    "offsetX",
    "stopPropagation",
    "p",
    "subList",
    "pageElement",
    "getData",
    "link",
    "id",
    "parent",
    "activeName",
    "destruct",
    "removeListener",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "Menu"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js"
  ],
  "sourcesContent": [
    "/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n\n    showLabels: {\n      check: 'Boolean',\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.getAttribute('model');\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      if (model === 'pages') {\n        qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n\n        const rootList = document.createElement('ul');\n        element.appendChild(rootList);\n\n        // add hamburger menu\n        const ham = document.createElement('a');\n        ham.href = '#';\n        ham.classList.add('menu');\n        ham.onclick = () => this._onHamburgerMenu();\n        const icon = document.createElement('i');\n        icon.classList.add('ri-menu-line');\n        ham.appendChild(icon);\n        element.appendChild(ham);\n\n        qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n\n        qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _generateMenu() {\n      const currentPage = window.location.hash.substring(1);\n      let parentElement = document.querySelector('main');\n      if (parentElement) {\n        const firstPage = document.querySelector('cv-page');\n        if (firstPage) {\n          parentElement = firstPage.parentElement;\n        }\n      }\n      const rootList = this._element.querySelector(':scope > ul');\n      if (rootList) {\n        rootList.replaceChildren();\n        this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n      }\n    },\n\n    _onHamburgerMenu() {\n      this._element.classList.toggle('responsive');\n      for (let detail of this._element.querySelectorAll('details')) {\n        detail.setAttribute('open', '');\n      }\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (\n        target.classList.contains('menu') ||\n        (target.parentElement && target.parentElement.classList.contains('menu'))\n      ) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== 'summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 100);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (\n          current &&\n          current.previousElementSibling &&\n          current.previousElementSibling.tagName.toLowerCase() === 'li'\n        ) {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n    },\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels()) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if (\n          (depth < 0 || depth > currentLevel) &&\n          page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0\n        ) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          summary.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              details.removeAttribute('open');\n            } else {\n              details.setAttribute('open', '');\n            }\n          });\n          a.addEventListener('click', ev => {\n            // only stop propagation if we are not close to the right border\n            if (ev.pointerType !== 'touch' || ev.currentTarget.clientWidth - ev.offsetX >= 8) {\n              ev.stopPropagation();\n            }\n          });\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n          }\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel++);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[href=\"#${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n        static get observedAttributes() {\n          return ['appearance', 'depth'];\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAK,CAACC,MAAM,CAAC,sCAAsC,EAAE;IACtDC,MAAM,EAAEC,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACC,UAAU,CAACC,iBAAiB;IAEzD;AACF;AACA;AACA;AACA;IACEC,UAAU,EAAE;MACVC,UAAU,EAAE;QACVC,KAAK,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC;QAChCC,IAAI,EAAE,MAAM;QACZC,KAAK,EAAE;MACT,CAAC;MAEDC,KAAK,EAAE;QACLH,KAAK,EAAE,8CAA8C;QACrDC,IAAI,EAAE,CAAC,CAAC;QACRC,KAAK,EAAE;MACT,CAAC;MAEDE,QAAQ,EAAE;QACRJ,KAAK,EAAE,SAAS;QAChBC,IAAI,EAAE,KAAK;QACXC,KAAK,EAAE;MACT,CAAC;MAEDG,UAAU,EAAE;QACVL,KAAK,EAAE,SAAS;QAChBC,IAAI,EAAE;MACR;IACF,CAAC;IAED;AACF;AACA;AACA;AACA;IACEK,OAAO,EAAE;MACPC,gBAAgB,4BAACC,KAAK,EAAEC,QAAQ,EAAE;QAChC,IAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;QAC3C,IAAIH,QAAQ,KAAK,MAAM,EAAE;UACvBC,IAAI,CAACG,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;QACnC;QACA,IAAIN,KAAK,KAAK,MAAM,EAAE;UACpBE,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,UAAU,CAAC;QAChC;MACF,CAAC;MAEDC,WAAW,yBAAG;QACZ,IAAI,IAAI,CAACC,UAAU,EAAE,EAAE;UACrB,IAAI,CAACC,aAAa,EAAE;QACtB;MACF,CAAC;MAEDC,cAAc,4BAAG;QACf,IAAI,CAACC,WAAW,CAAC,IAAI,CAAC;QACtBnC,EAAE,CAACoC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,kBAAkB,EAAE,IAAI,CAACL,cAAc,EAAE,IAAI,CAAC;MACjF,CAAC;MAEDM,KAAK,mBAAG;QAAA;QACN,IAAMC,OAAO,GAAG,IAAI,CAACC,QAAQ;QAC7B,IAAMC,KAAK,GAAGF,OAAO,CAACG,YAAY,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACD,KAAK,EAAE;UACV,IAAI,CAACE,KAAK,CAAC,sCAAsC,CAAC;UAClD;QACF;QACA,IAAIJ,OAAO,CAACG,YAAY,CAAC,aAAa,CAAC,KAAK,OAAO,EAAE;UACnD,IAAI,CAACE,aAAa,CAAC,KAAK,CAAC;QAC3B;QACA,IAAIH,KAAK,KAAK,OAAO,EAAE;UACrB3C,EAAE,CAACoC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACS,SAAS,CAAC,kBAAkB,EAAE,IAAI,CAACb,cAAc,EAAE,IAAI,CAAC;UAE7E,IAAMc,QAAQ,GAAGtB,QAAQ,CAACuB,aAAa,CAAC,IAAI,CAAC;UAC7CR,OAAO,CAACS,WAAW,CAACF,QAAQ,CAAC;;UAE7B;UACA,IAAMG,GAAG,GAAGzB,QAAQ,CAACuB,aAAa,CAAC,GAAG,CAAC;UACvCE,GAAG,CAACC,IAAI,GAAG,GAAG;UACdD,GAAG,CAACvB,SAAS,CAACE,GAAG,CAAC,MAAM,CAAC;UACzBqB,GAAG,CAACE,OAAO,GAAG;YAAA,OAAM,KAAI,CAACC,gBAAgB,EAAE;UAAA;UAC3C,IAAMC,IAAI,GAAG7B,QAAQ,CAACuB,aAAa,CAAC,GAAG,CAAC;UACxCM,IAAI,CAAC3B,SAAS,CAACE,GAAG,CAAC,cAAc,CAAC;UAClCqB,GAAG,CAACD,WAAW,CAACK,IAAI,CAAC;UACrBd,OAAO,CAACS,WAAW,CAACC,GAAG,CAAC;UAExBnD,EAAE,CAACoC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACS,SAAS,CAAC,kCAAkC,EAAE,IAAI,CAACS,aAAa,EAAE,IAAI,CAAC;;UAE5F;UACAxD,EAAE,CAACoC,KAAK,CAACqB,YAAY,CAACC,WAAW,CAAChC,QAAQ,EAAE,aAAa,EAAE,IAAI,CAACiC,cAAc,EAAE,IAAI,CAAC;UAErF3D,EAAE,CAACoC,KAAK,CAACqB,YAAY,CAACC,WAAW,CAAC,IAAI,CAAChB,QAAQ,EAAE,OAAO,EAAE,IAAI,CAACkB,QAAQ,EAAE,IAAI,CAAC;QAChF,CAAC,MAAM;UACL,IAAI,CAACf,KAAK,CAAC,sBAAsB,EAAEF,KAAK,EAAE,oBAAoB,CAAC;QACjE;MACF,CAAC;MAEDV,aAAa,2BAAG;QACd,IAAM4B,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;QACrD,IAAIC,aAAa,GAAGxC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;QAClD,IAAIuC,aAAa,EAAE;UACjB,IAAMC,SAAS,GAAGzC,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC;UACnD,IAAIwC,SAAS,EAAE;YACbD,aAAa,GAAGC,SAAS,CAACD,aAAa;UACzC;QACF;QACA,IAAMlB,QAAQ,GAAG,IAAI,CAACN,QAAQ,CAACf,aAAa,CAAC,aAAa,CAAC;QAC3D,IAAIqB,QAAQ,EAAE;UACZA,QAAQ,CAACoB,eAAe,EAAE;UAC1B,IAAI,CAACC,QAAoB,CAACrB,QAAQ,EAAEkB,aAAa,EAAEL,WAAW,EAAE,CAAC,CAAC;QACpE;MACF,CAAC;MAEDP,gBAAgB,8BAAG;QACjB,IAAI,CAACZ,QAAQ,CAACd,SAAS,CAAC0C,MAAM,CAAC,YAAY,CAAC;QAAC,2CAC1B,IAAI,CAAC5B,QAAQ,CAAC6B,gBAAgB,CAAC,SAAS,CAAC;UAAA;QAAA;UAA5D,oDAA8D;YAAA,IAArDC,MAAM;YACbA,MAAM,CAACC,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC;UACjC;QAAC;UAAA;QAAA;UAAA;QAAA;MACH,CAAC;MAED;AACJ;AACA;AACA;MACId,cAAc,0BAACe,EAAE,EAAE;QACjB,IAAMC,MAAM,GAAGD,EAAE,CAACE,SAAS,EAAE;QAC7B,IACED,MAAM,CAAC/C,SAAS,CAACiD,QAAQ,CAAC,MAAM,CAAC,IAChCF,MAAM,CAACT,aAAa,IAAIS,MAAM,CAACT,aAAa,CAACtC,SAAS,CAACiD,QAAQ,CAAC,MAAM,CAAE,EACzE;UACA;QAAA,CACD,MAAM,IAAIF,MAAM,CAACG,OAAO,CAACC,WAAW,EAAE,KAAK,SAAS,IAAIJ,MAAM,CAACG,OAAO,CAACC,WAAW,EAAE,KAAK,GAAG,EAAE;UAC7F;UACA/E,EAAE,CAACoC,KAAK,CAAC4C,KAAK,CAACC,IAAI,CAAC,IAAI,CAACC,SAAS,EAAE,IAAI,EAAE,GAAG,CAAC;QAChD,CAAC,MAAM;UACL;UACA,IAAI,CAACA,SAAS,CAACR,EAAE,CAACE,SAAS,EAAE,CAACV,aAAa,CAAC;QAC9C;MACF,CAAC;MAEDN,QAAQ,oBAACc,EAAE,EAAE;QACX,IAAIA,EAAE,CAACS,YAAY,EAAE,KAAK,MAAM,EAAE;UAChC;UACA,IAAMC,IAAI,GAAG,IAAI,CAAC1C,QAAQ,CAACf,aAAa,CAAC,oBAAoB,CAAC;UAC9D,IAAIyD,IAAI,EAAE;YACRA,IAAI,CAACC,KAAK,EAAE;UACd;QACF,CAAC,MAAM;UACL,IAAMC,OAAO,GAAG,IAAI,CAAC5C,QAAQ,CAACf,aAAa,CAAC,WAAW,CAAC;UACxD,IACE2D,OAAO,IACPA,OAAO,CAACC,sBAAsB,IAC9BD,OAAO,CAACC,sBAAsB,CAACT,OAAO,CAACC,WAAW,EAAE,KAAK,IAAI,EAC7D;YACA,IAAMS,IAAI,GAAGF,OAAO,CAACC,sBAAsB,CAAC5D,aAAa,CAAC,YAAY,CAAC;YACvE,IAAI6D,IAAI,EAAE;cACRA,IAAI,CAACH,KAAK,EAAE;YACd;UACF;QACF;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;MACIH,SAAS,qBAACO,MAAM,EAAE;QAChB,IAAI,IAAI,CAAC/C,QAAQ,CAACd,SAAS,CAACiD,QAAQ,CAAC,YAAY,CAAC,EAAE;UAClD,IAAI,CAACnC,QAAQ,CAACd,SAAS,CAACC,MAAM,CAAC,YAAY,CAAC;QAC9C,CAAC,MAAM;UAAA,4CACc,IAAI,CAACa,QAAQ,CAAC6B,gBAAgB,CAAC,eAAe,CAAC;YAAA;UAAA;YAAlE,uDAAoE;cAAA,IAA3DC,MAAM;cACb,IAAI,CAACiB,MAAM,IAAIjB,MAAM,KAAKiB,MAAM,EAAE;gBAChCjB,MAAM,CAACkB,eAAe,CAAC,MAAM,CAAC;cAChC;YACF;UAAC;YAAA;UAAA;YAAA;UAAA;QACH;MACF,CAAC;MAEDrB,QAAoB,oBAACsB,UAAU,EAAEzB,aAAa,EAAEL,WAAW,EAAE+B,YAAY,EAAE;QAAA;QACzE,IAAI,CAAC1B,aAAa,EAAE;UAClB;QACF;QACA,IAAI2B,KAAK,GAAG3B,aAAa,CAACK,gBAAgB,CAAC,sCAAsC,CAAC;QAAC,4CAElEsB,KAAK,CAACC,MAAM,EAAE;UAAA;QAAA;UAA/B,uDAAiC;YAAA,IAAxBC,IAAI;YACX,IAAMC,MAAM,GAAGD,IAAI,CAACnD,YAAY,CAAC,IAAI,CAAC;YACtC,IAAI,CAACoD,MAAM,EAAE;cACX,IAAI,CAACnD,KAAK,CAAC,0BAA0B,CAAC;cACtC;YACF;YACA,IAAMoD,QAAQ,GAAGF,IAAI,CAACnD,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE;YAChD,IAAMsD,QAAQ,GAAGH,IAAI,CAACnD,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE;YAChD,IAAMuD,EAAE,GAAGzE,QAAQ,CAACuB,aAAa,CAAC,IAAI,CAAC;YACvC,IAAMmD,CAAC,GAAG1E,QAAQ,CAACuB,aAAa,CAAC,GAAG,CAAC;YACrCmD,CAAC,CAAC3B,YAAY,CAAC,MAAM,EAAE,GAAG,GAAGuB,MAAM,CAAC;YACpC,IAAIE,QAAQ,EAAE;cACZ,IAAMG,CAAC,GAAG3E,QAAQ,CAACuB,aAAa,CAAC,GAAG,CAAC;cACrCoD,CAAC,CAACzE,SAAS,CAACE,GAAG,CAACoE,QAAQ,CAAC;cACzBG,CAAC,CAACC,KAAK,GAAGL,QAAQ;cAClBG,CAAC,CAAClD,WAAW,CAACmD,CAAC,CAAC;YAClB;YACA,IAAI,IAAI,CAACE,YAAY,EAAE,EAAE;cACvB,IAAMC,IAAI,GAAG9E,QAAQ,CAAC+E,cAAc,CAACR,QAAQ,CAAC;cAC9CG,CAAC,CAAClD,WAAW,CAACsD,IAAI,CAAC;YACrB;YACA,IAAI3C,WAAW,KAAKmC,MAAM,EAAE;cAC1BG,EAAE,CAACvE,SAAS,CAACE,GAAG,CAAC,QAAQ,CAAC;YAC5B;YACA6D,UAAU,CAACzC,WAAW,CAACiD,EAAE,CAAC;YAC1B,IAAMjF,KAAK,GAAG,IAAI,CAACwF,QAAQ,EAAE;YAC7B,IACE,CAACxF,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAG0E,YAAY,KAClCG,IAAI,CAACxB,gBAAgB,CAAC,sCAAsC,CAAC,CAACoC,MAAM,GAAG,CAAC,EACxE;cAAA;gBACA,IAAMC,OAAO,GAAGlF,QAAQ,CAACuB,aAAa,CAAC,KAAK,CAAC;gBAC7C2D,OAAO,CAAChF,SAAS,CAACE,GAAG,CAAC,SAAS,CAAC;gBAChC,IAAM+E,OAAO,GAAGnF,QAAQ,CAACuB,aAAa,CAAC,KAAK,CAAC;gBAC7C4D,OAAO,CAACjF,SAAS,CAACE,GAAG,CAAC,SAAS,CAAC;gBAChC+E,OAAO,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAAApC,EAAE,EAAI;kBACtC,IAAIkC,OAAO,CAACG,YAAY,CAAC,MAAM,CAAC,EAAE;oBAChCH,OAAO,CAAClB,eAAe,CAAC,MAAM,CAAC;kBACjC,CAAC,MAAM;oBACLkB,OAAO,CAACnC,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC;kBAClC;gBACF,CAAC,CAAC;gBACF2B,CAAC,CAACU,gBAAgB,CAAC,OAAO,EAAE,UAAApC,EAAE,EAAI;kBAChC;kBACA,IAAIA,EAAE,CAACsC,WAAW,KAAK,OAAO,IAAItC,EAAE,CAACuC,aAAa,CAACC,WAAW,GAAGxC,EAAE,CAACyC,OAAO,IAAI,CAAC,EAAE;oBAChFzC,EAAE,CAAC0C,eAAe,EAAE;kBACtB;gBACF,CAAC,CAAC;gBACF,IAAMlB,QAAQ,GAAGH,IAAI,CAACnD,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE;gBAChD,IAAImD,IAAI,CAACpE,aAAa,CAAC,yBAAyB,CAAC,EAAE;kBACjD;kBACAkF,OAAO,CAAC3D,WAAW,CAACkD,CAAC,CAAC;gBACxB,CAAC,MAAM;kBACL,IAAMiB,CAAC,GAAG3F,QAAQ,CAACuB,aAAa,CAAC,GAAG,CAAC;kBACrC,IAAIiD,QAAQ,EAAE;oBACZ,IAAMG,EAAC,GAAG3E,QAAQ,CAACuB,aAAa,CAAC,GAAG,CAAC;oBACrCoD,EAAC,CAACzE,SAAS,CAACE,GAAG,CAACoE,QAAQ,CAAC;oBACzBG,EAAC,CAACC,KAAK,GAAGL,QAAQ;oBAClBoB,CAAC,CAACnE,WAAW,CAACmD,EAAC,CAAC;kBAClB;kBACA,IAAI,MAAI,CAACE,YAAY,EAAE,EAAE;oBACvBc,CAAC,CAACnE,WAAW,CAACxB,QAAQ,CAAC+E,cAAc,CAACR,QAAQ,CAAC,CAAC;kBAClD;kBACAY,OAAO,CAAC3D,WAAW,CAACmE,CAAC,CAAC;gBACxB;gBACAT,OAAO,CAAC1D,WAAW,CAAC2D,OAAO,CAAC;gBAC5B,IAAMS,OAAO,GAAG5F,QAAQ,CAACuB,aAAa,CAAC,IAAI,CAAC;gBAC5C2D,OAAO,CAAC1D,WAAW,CAACoE,OAAO,CAAC;gBAC5B,MAAI,CAACjD,QAAoB,CAACiD,OAAO,EAAEvB,IAAI,EAAElC,WAAW,EAAE+B,YAAY,EAAE,CAAC;gBACrEO,EAAE,CAACjD,WAAW,CAAC0D,OAAO,CAAC;cAAC;YAC1B,CAAC,MAAM;cACLT,EAAE,CAACjD,WAAW,CAACkD,CAAC,CAAC;YACnB;UACF;QAAC;UAAA;QAAA;UAAA;QAAA;MACH,CAAC;MAED5C,aAAa,yBAACkB,EAAE,EAAE;QAChB,IAAM6C,WAAW,GAAG7C,EAAE,CAAC8C,OAAO,EAAE;QAChC;QAAA,4CACiB,IAAI,CAAC9E,QAAQ,CAAC6B,gBAAgB,CAAC,0BAA0B,CAAC;UAAA;QAAA;UAA3E,uDAA6E;YAAA,IAApEkD,IAAI;YACXA,IAAI,CAAC7F,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;YAC/B4F,IAAI,CAAC7F,SAAS,CAACC,MAAM,CAAC,YAAY,CAAC;UACrC;UACA;QAAA;UAAA;QAAA;UAAA;QAAA;QAAA,4CACiB,IAAI,CAACa,QAAQ,CAAC6B,gBAAgB,qBAAagD,WAAW,CAACG,EAAE,SAAK;UAAA;QAAA;UAA/E,uDAAiF;YAAA,IAAxED,KAAI;YACX;YACA,IAAIE,MAAM,GAAGF,KAAI,CAACvD,aAAa;YAC/B,IAAI0D,UAAU,GAAG,QAAQ;YACzB,OAAOD,MAAM,IAAIA,MAAM,CAAC7C,OAAO,CAACC,WAAW,EAAE,KAAK,SAAS,EAAE;cAC3D,IAAI4C,MAAM,CAAC7C,OAAO,CAACC,WAAW,EAAE,KAAK,IAAI,EAAE;gBACzC4C,MAAM,CAAC/F,SAAS,CAACE,GAAG,CAAC8F,UAAU,CAAC;gBAChC;gBACAA,UAAU,GAAG,YAAY;cAC3B;cACAD,MAAM,GAAGA,MAAM,CAACzD,aAAa;YAC/B;UACF;QAAC;UAAA;QAAA;UAAA;QAAA;MACH;IACF,CAAC;IAED;AACF;AACA;AACA;AACA;IACE2D,QAAQ,sBAAG;MACT7H,EAAE,CAACoC,KAAK,CAACqB,YAAY,CAACqE,cAAc,CAACpG,QAAQ,EAAE,aAAa,EAAE,IAAI,CAACiC,cAAc,EAAE,IAAI,CAAC;MAExF3D,EAAE,CAACoC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,kCAAkC,EAAE,IAAI,CAACiB,aAAa,EAAE,IAAI,CAAC;IAChG,CAAC;IAEDuE,KAAK,iBAACC,OAAO,EAAE;MACbC,cAAc,CAAC5H,MAAM,CACnBE,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACwH,UAAU,CAACC,MAAM,GAAG,MAAM;QAAA;;QAAA;QAAA;QAE7C,kBAAc;UAAA;UAAA,yBACNH,OAAO;QACf;QAAC;UAAA;UAAA,KACD,eAAgC;YAC9B,OAAO,CAAC,YAAY,EAAE,OAAO,CAAC;UAChC;QAAC;QAAA;MAAA,EANWI,WAAW,EAQ1B;IACH;EACF,CAAC,CAAC;EA7UF7H,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACC,UAAU,CAAC0H,IAAI,CAAClI,aAAa,GAAGA,aAAa;AAAC"
}