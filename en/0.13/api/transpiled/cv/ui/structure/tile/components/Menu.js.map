{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "properties",
    "appearance",
    "check",
    "init",
    "apply",
    "depth",
    "domReady",
    "showLabels",
    "members",
    "_applyAppearance",
    "value",
    "oldValue",
    "main",
    "document",
    "querySelector",
    "classList",
    "remove",
    "add",
    "_applyDepth",
    "isDomReady",
    "_generateMenu",
    "_onDomAppended",
    "setDomReady",
    "event",
    "message",
    "Bus",
    "unsubscribe",
    "_init",
    "element",
    "_element",
    "model",
    "getAttribute",
    "error",
    "setShowLabels",
    "subscribe",
    "rootList",
    "createElement",
    "appendChild",
    "ham",
    "href",
    "onclick",
    "_onHamburgerMenu",
    "icon",
    "_onPageChange",
    "Registration",
    "addListener",
    "_onPointerDown",
    "_onSwipe",
    "currentPage",
    "window",
    "location",
    "hash",
    "substring",
    "parentElement",
    "firstPage",
    "replaceChildren",
    "__generatePagesModel",
    "toggle",
    "querySelectorAll",
    "detail",
    "setAttribute",
    "ev",
    "target",
    "getTarget",
    "contains",
    "tagName",
    "toLowerCase",
    "Timer",
    "once",
    "_closeAll",
    "getDirection",
    "next",
    "click",
    "current",
    "previousElementSibling",
    "prev",
    "except",
    "removeAttribute",
    "parentList",
    "currentLevel",
    "pages",
    "values",
    "page",
    "pageId",
    "pageName",
    "pageIcon",
    "li",
    "a",
    "i",
    "title",
    "isShowLabels",
    "text",
    "createTextNode",
    "getDepth",
    "length",
    "details",
    "summary",
    "addEventListener",
    "hasAttribute",
    "pointerType",
    "currentTarget",
    "clientWidth",
    "offsetX",
    "stopPropagation",
    "p",
    "subList",
    "pageElement",
    "getData",
    "link",
    "id",
    "parent",
    "activeName",
    "destruct",
    "removeListener",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "Menu"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Menu.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n    showLabels: {\n      check: 'Boolean',\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.getAttribute('model');\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      if (model === 'pages') {\n        qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n        const rootList = document.createElement('ul');\n        element.appendChild(rootList);\n\n        // add hamburger menu\n        const ham = document.createElement('a');\n        ham.href = '#';\n        ham.classList.add('menu');\n        ham.onclick = () => this._onHamburgerMenu();\n        const icon = document.createElement('i');\n        icon.classList.add('ri-menu-line');\n        ham.appendChild(icon);\n        element.appendChild(ham);\n\n        qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _generateMenu() {\n      const currentPage = window.location.hash.substring(1);\n      let parentElement = document.querySelector('main');\n      if (parentElement) {\n        const firstPage = document.querySelector('cv-page');\n        if (firstPage) {\n          parentElement = firstPage.parentElement;\n        }\n      }\n      const rootList = this._element.querySelector(':scope > ul');\n      if (rootList) {\n        rootList.replaceChildren();\n        this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n      }\n    },\n\n    _onHamburgerMenu() {\n      this._element.classList.toggle('responsive');\n      for (let detail of this._element.querySelectorAll('details')) {\n        detail.setAttribute('open', '');\n      }\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (target.classList.contains('menu') || (target.parentElement && target.parentElement.classList.contains('menu'))) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== 'summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 100);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (current && current.previousElementSibling && current.previousElementSibling.tagName.toLowerCase() === 'li') {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n    },\n\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels()) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if ((depth < 0 || depth > currentLevel) && page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          summary.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              details.removeAttribute('open');\n            } else {\n              details.setAttribute('open', '');\n            }\n          });\n          a.addEventListener('click', ev => {\n            // only stop propagation if we are not close to the right border\n            if (ev.pointerType !== 'touch' || (ev.currentTarget.clientWidth - ev.offsetX) >= 8) {\n              ev.stopPropagation();\n            }\n          });\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n          }\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel++);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[href=\"#${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(cv.ui.structure.tile.Controller.PREFIX + 'menu', class extends QxConnector {\n      constructor() {\n        super(QxClass);\n      }\n      static get observedAttributes() {\n        return ['appearance', 'depth'];\n      }\n    });\n  }\n});\n"
  ]
}