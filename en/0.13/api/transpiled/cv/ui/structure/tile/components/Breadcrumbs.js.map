{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "properties",
    "members",
    "_init",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_update",
    "list",
    "_element",
    "querySelector",
    "document",
    "createElement",
    "appendChild",
    "listItems",
    "activePage",
    "body",
    "startPage",
    "currentPage",
    "li",
    "_createListItem",
    "getAttribute",
    "unshift",
    "parent",
    "parentElement",
    "localName",
    "start",
    "classList",
    "add",
    "replaceChildren",
    "pageId",
    "text",
    "a",
    "setAttribute",
    "textContent",
    "destruct",
    "unsubscribe",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector",
    "Breadcrumbs"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Breadcrumbs.js"
  ],
  "sourcesContent": [
    "/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates breadcrumb navigation bar down to the currently shown page.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Breadcrumbs', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._update, this);\n    },\n\n    _update() {\n      let list = this._element.querySelector(':scope > ul');\n      if (!list) {\n        list = document.createElement('ul');\n        this._element.appendChild(list);\n      }\n      const listItems = [];\n      const activePage = document.body.querySelector('cv-page.active');\n      const startPage = document.body.querySelector('main > cv-page:first-of-type');\n\n      if (activePage && activePage !== startPage) {\n        let currentPage = activePage;\n        while (currentPage) {\n          let li = this._createListItem(currentPage.getAttribute('id'), currentPage.getAttribute('name'));\n          listItems.unshift(li);\n          let parent = currentPage.parentElement;\n          while (parent) {\n            if (parent.localName === 'cv-page') {\n              currentPage = parent;\n              break;\n            }\n            parent = parent.parentElement;\n          }\n          if (!parent || currentPage === startPage) {\n            break;\n          }\n        }\n      }\n      let start = list.querySelector(':scope > li.start');\n      if (!start) {\n        start = this._createListItem(startPage.getAttribute('id'), startPage.getAttribute('name'));\n        start.classList.add('start');\n      }\n      listItems.unshift(start);\n\n      list.replaceChildren(...listItems);\n    },\n\n    _createListItem(pageId, text) {\n      const li = document.createElement('li');\n      const a = document.createElement('a');\n      a.setAttribute('href', '#' + pageId);\n      a.textContent = text;\n      li.appendChild(a);\n      return li;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._update, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'breadcrumbs',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}