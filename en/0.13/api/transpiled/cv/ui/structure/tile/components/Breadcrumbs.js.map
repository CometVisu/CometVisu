{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "components",
    "AbstractComponent",
    "properties",
    "members",
    "_init",
    "event",
    "message",
    "Bus",
    "subscribe",
    "_update",
    "_list",
    "list",
    "_element",
    "querySelector",
    "document",
    "createElement",
    "appendChild",
    "listItems",
    "activePage",
    "body",
    "startPage",
    "currentPage",
    "li",
    "_createListItem",
    "getAttribute",
    "unshift",
    "parent",
    "parentElement",
    "localName",
    "start",
    "classList",
    "add",
    "replaceChildren",
    "apply",
    "pageId",
    "text",
    "a",
    "setAttribute",
    "textContent",
    "destruct",
    "unsubscribe",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "_QxConnector",
    "_class",
    "_classCallCheck",
    "_callSuper",
    "_inherits",
    "_createClass",
    "QxConnector",
    "Breadcrumbs"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Breadcrumbs.js"
  ],
  "sourcesContent": [
    "/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates breadcrumb navigation bar down to the currently shown page.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Breadcrumbs', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._update, this);\n    },\n\n    _update() {\n      let list = this._element.querySelector(':scope > ul');\n      if (!list) {\n        list = document.createElement('ul');\n        this._element.appendChild(list);\n      }\n      const listItems = [];\n      const activePage = document.body.querySelector('cv-page.active');\n      const startPage = document.body.querySelector('main > cv-page:first-of-type');\n\n      if (activePage && activePage !== startPage) {\n        let currentPage = activePage;\n        while (currentPage) {\n          let li = this._createListItem(currentPage.getAttribute('id'), currentPage.getAttribute('name'));\n          listItems.unshift(li);\n          let parent = currentPage.parentElement;\n          while (parent) {\n            if (parent.localName === 'cv-page') {\n              currentPage = parent;\n              break;\n            }\n            parent = parent.parentElement;\n          }\n          if (!parent || currentPage === startPage) {\n            break;\n          }\n        }\n      }\n      let start = list.querySelector(':scope > li.start');\n      if (!start) {\n        start = this._createListItem(startPage.getAttribute('id'), startPage.getAttribute('name'));\n        start.classList.add('start');\n      }\n      listItems.unshift(start);\n\n      list.replaceChildren(...listItems);\n    },\n\n    _createListItem(pageId, text) {\n      const li = document.createElement('li');\n      const a = document.createElement('a');\n      a.setAttribute('href', '#' + pageId);\n      a.textContent = text;\n      li.appendChild(a);\n      return li;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._update, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'breadcrumbs',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}