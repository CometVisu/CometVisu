{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "elements",
    "AbstractCustomElement",
    "statics",
    "PL_COUNTER",
    "members",
    "__widget",
    "_init",
    "name",
    "_element",
    "hasAttribute",
    "getAttribute",
    "firstElementChild",
    "nodeName",
    "toLowerCase",
    "pluginName",
    "loadPluginPart",
    "part",
    "Clazz",
    "plugins",
    "baseName",
    "components",
    "Plugin",
    "id",
    "props",
    "parse",
    "TemplateEngine",
    "getInstance",
    "setDomFinished",
    "innerHTML",
    "$$type",
    "getDomString",
    "scriptLoader",
    "util",
    "ScriptLoader",
    "window",
    "requestAnimationFrame",
    "isFinished",
    "addListenerOnce",
    "error",
    "Part",
    "getParts",
    "Promise",
    "resolve",
    "load",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js"
  ],
  "sourcesContent": [
    "/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let baseName in cv.plugins) {\n            if (baseName.toLowerCase() === name) {\n              Clazz = cv.plugins[baseName];\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            const props = Clazz.parse(this._element.firstElementChild, id, '', 'text');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          } else {\n            this.error('no main plugin class found for ' + pluginName);\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}