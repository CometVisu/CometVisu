{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "tile",
    "elements",
    "AbstractCustomElement",
    "statics",
    "PL_COUNTER",
    "members",
    "__widget",
    "_init",
    "name",
    "_element",
    "hasAttribute",
    "getAttribute",
    "firstElementChild",
    "nodeName",
    "toLowerCase",
    "pluginName",
    "loadPluginPart",
    "part",
    "Clazz",
    "getPackages",
    "getUrls",
    "url",
    "fileName",
    "split",
    "pop",
    "getByName",
    "components",
    "Plugin",
    "id",
    "props",
    "parse",
    "TemplateEngine",
    "getInstance",
    "setDomFinished",
    "innerHTML",
    "$$type",
    "getDomString",
    "scriptLoader",
    "util",
    "ScriptLoader",
    "window",
    "requestAnimationFrame",
    "isFinished",
    "addListenerOnce",
    "error",
    "Part",
    "getParts",
    "Promise",
    "resolve",
    "load",
    "defer",
    "QxClass",
    "customElements",
    "Controller",
    "PREFIX",
    "QxConnector"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js"
  ],
  "sourcesContent": [
    "/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let url of part.getPackages()[0].getUrls()) {\n            let fileName = url.split('/').pop();\n            if (fileName.toLowerCase() === name + '.js') {\n              Clazz = qx.Class.getByName('cv.plugins.' + fileName.split('.')[0]);\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            const props = Clazz.parse(this._element.firstElementChild, id, '', '2d');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"
  ],
  "mappings": "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"
}