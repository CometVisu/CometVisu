{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "cv",
    "notifications",
    "IHandler",
    "include",
    "ui",
    "MHandleMessage",
    "type",
    "construct",
    "set",
    "rootElementId",
    "messageElementId",
    "Router",
    "getInstance",
    "registerMessageHandler",
    "_openCommand",
    "command",
    "Command",
    "addListener",
    "toggleVisibility",
    "TemplateEngine",
    "getCommands",
    "add",
    "event",
    "Registration",
    "window",
    "_onResize",
    "debouncedHide",
    "util",
    "Function",
    "debounce",
    "hide",
    "bind",
    "executeWhenDomFinished",
    "_init",
    "_onSeverityChange",
    "setDelegate",
    "prepareMessage",
    "message",
    "icon",
    "iconClasses",
    "IconTools",
    "svgKUF",
    "statics",
    "SLIDE",
    "duration",
    "timing",
    "origin",
    "keyFrames",
    "translate",
    "BLINK",
    "backgroundColor",
    "deleteMessage",
    "index",
    "ev",
    "clear",
    "force",
    "performAction",
    "messageId",
    "members",
    "_list",
    "__element",
    "__messagesContainer",
    "__visible",
    "__blocker",
    "__badge",
    "__favico",
    "disableBadge",
    "value",
    "classList",
    "remove",
    "height",
    "document",
    "documentElement",
    "clientHeight",
    "style",
    "left",
    "clientWidth",
    "headerRect",
    "querySelector",
    "getBoundingClientRect",
    "footerRect",
    "messageBoxHeight",
    "Math",
    "round",
    "bottom",
    "top",
    "body",
    "BodyBlocker",
    "Favico",
    "animation",
    "bgColor",
    "elem",
    "getRootElementId",
    "dom",
    "Element",
    "create",
    "id",
    "html",
    "locale",
    "Manager",
    "tr",
    "appendChild",
    "templateCode",
    "getMessageElementId",
    "template",
    "data",
    "controller",
    "website",
    "List",
    "_messages",
    "_onListTap",
    "__updateBadge",
    "DeferredCall",
    "schedule",
    "currentContent",
    "parseInt",
    "getAttribute",
    "isNaN",
    "messages",
    "getMessages",
    "getLength",
    "update",
    "visibility",
    "NotificationCenter",
    "Timer",
    "once",
    "bom",
    "element",
    "Animation",
    "animate",
    "innerHTML",
    "severity",
    "getGlobalSeverity",
    "apply",
    "_severities",
    "badge",
    "getSeverityColor",
    "show",
    "block",
    "getBlockerElement",
    "anim",
    "on",
    "transform",
    "removeListener",
    "animateReverse",
    "unblock",
    "destruct",
    "_disposeObjects"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/NotificationCenter.js"
  ],
  "sourcesContent": [
    "/* NotificationCenter.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The NotificationCenter shows messages in a list. Messages are Maps which can have the following structure:\n *\n * <pre>\n * {\n *   topic: {String} Topic of the message\n *   title: {String} Title of the message\n *   message: {String} The message content\n *   icon: {String} icon name (KNX-UF icon)\n *   iconClasses: {String} CSS classes that should be added to the icon element\n *   deletable: {Boolean} Flag to determine if the user can delete the message\n *   severity: {String} one of \"low\", \"normal\", \"high\", \"urgent\"\n *   tooltip: {String} Tooltip for the message\n *   progress: {Integer} indicates a progress state in percent of some long running process.\n *   action: {\n *     actionType {String}: {\n *      action: {Function} Called when the action gets executed (when the user clicks on the message)\n *      params: {Array?} Additional parameters for the callback\n *      needsConfirmation: {Boolean} If true the execution of the action must be confirmed by the user\n *      deleteMessageAfterExecution: {Boolean} If true the message gets deleted after action execution\n *   }\n *   unique: {Boolean} If true there can be only one message of that topic at once\n *   condition: {Boolean|Function} if true this unique message gets removed\n * }\n * </pre>\n *\n *\n * @author Tobias BrÃ¤utigam\n * @since 0.11.0\n */\nqx.Class.define('cv.ui.NotificationCenter', {\n  extend: qx.core.Object,\n  implement: cv.core.notifications.IHandler,\n  include: cv.ui.MHandleMessage,\n  type: 'singleton',\n\n  /*\n  *****************************************************************************\n    CONSTRUCTOR\n  *****************************************************************************\n  */\n  construct() {\n    super();\n\n    this.set({\n      rootElementId: 'notification-center',\n      messageElementId: 'notification_'\n    });\n\n    // register to topics\n    cv.core.notifications.Router.getInstance().registerMessageHandler(this, {\n      'cv.*': {}\n    });\n\n    this._openCommand = new qx.ui.command.Command('Ctrl+N');\n    this._openCommand.addListener('execute', this.toggleVisibility, this);\n    cv.TemplateEngine.getInstance().getCommands().add('open-notificationcenter', this._openCommand);\n\n    qx.event.Registration.addListener(window, 'resize', this._onResize, this);\n\n    this.debouncedHide = qx.util.Function.debounce(this.hide.bind(this), 5000, false);\n\n    cv.TemplateEngine.getInstance().executeWhenDomFinished(this._init, this);\n\n    this.addListener('changedGlobalSeverity', this._onSeverityChange, this);\n\n    this.setDelegate({\n      prepareMessage(message) {\n        // resolve icon if there is one\n        if (message.icon) {\n          const iconClasses = message.iconClasses ? ' ' + message.iconClasses : '';\n          message.icon = cv.util.IconTools.svgKUF(message.icon)(null, null, 'icon' + iconClasses, true);\n        }\n      }\n    });\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    SLIDE: {\n      duration: 350,\n      timing: 'linear',\n      origin: 'bottom center',\n      keyFrames: {\n        0: {\n          translate: ['0px']\n        },\n\n        100: {\n          translate: ['-300px']\n        }\n      }\n    },\n\n    BLINK: {\n      duration: 1000,\n      timing: 'ease-in-out',\n      origin: 'bottom center',\n      keyFrames: {\n        0: {\n          backgroundColor: ['rgba(61, 61, 61, 0.9)']\n        },\n\n        50: {\n          backgroundColor: ['rgba(255, 121, 0, 0.9)']\n        },\n\n        100: {\n          backgroundColor: ['rgba(61, 61, 61, 0.9)']\n        }\n      }\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#deleteMessage}\n     * @param index {Number}\n     * @param ev {Event}\n     * @see cv.ui.NotificationCenter#deleteMessage\n     */\n    deleteMessage(index, ev) {\n      return this.getInstance().deleteMessage(index, ev);\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#clear}\n     * @param force {Boolean}\n     * @see cv.ui.NotificationCenter#clear\n     */\n    clear(force) {\n      this.getInstance().clear(force);\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#hide}\n     * @see cv.ui.NotificationCenter#hide\n     */\n    hide() {\n      this.getInstance().hide();\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#performAction}\n     * @param messageId {Number}\n     * @param ev {Event}\n     * @see cv.ui.NotificationCenter#performAction\n     */\n    performAction(messageId, ev) {\n      this.getInstance().performAction(messageId, ev);\n    }\n  },\n\n  /*\n  *****************************************************************************\n   MEMBERS\n  *****************************************************************************\n  */\n  members: {\n    _list: null,\n    __element: null,\n    __messagesContainer: null,\n    __visible: false,\n    __blocker: null,\n    __badge: null,\n    __favico: null,\n    _openCommand: null,\n\n    disableBadge(value) {\n      if (value) {\n        this.__badge.classList.add('hidden');\n      } else {\n        this.__badge.classList.remove('hidden');\n      }\n    },\n\n    _onResize() {\n      const height = document.documentElement.clientHeight;\n      if (this.__element) {\n        this.__element.style.left = document.documentElement.clientWidth + 'px';\n        this.__element.style.height = height + 'px';\n      }\n\n      if (this.__messagesContainer) {\n        // get header+footer heights\n        const headerRect = this.__element.querySelector(':scope > header').getBoundingClientRect();\n        const footerRect = this.__element.querySelector(':scope > footer').getBoundingClientRect();\n        const messageBoxHeight =\n          height - Math.round(headerRect.bottom - headerRect.top) - Math.round(footerRect.bottom - footerRect.top);\n        this.__messagesContainer.style.height = messageBoxHeight + 'px';\n      }\n    },\n\n    /**\n     * Attach to dom element and style it\n     * @private\n     */\n    _init() {\n      const body = document.querySelector('body');\n\n      this.__blocker = cv.ui.BodyBlocker.getInstance();\n\n      this.__favico = new Favico({\n        animation: 'fade',\n        bgColor: '#1C391C'\n      });\n\n      // check if the element is already there (might have been cached)\n      let elem = (this.__element = document.querySelector(this.getRootElementId()));\n\n      if (!elem) {\n        // create new element\n        elem = this.__element = qx.dom.Element.create('div', {\n          id: this.getRootElementId(),\n          style: 'visibility: hidden;',\n          html:\n            '<div class=\"badge\"></div><header><h3>' +\n            qx.locale.Manager.tr('Message center') +\n            '<div class=\"action hide\"><a href=\"#\" onclick=\"cv.ui.NotificationCenter.hide()\">X</a></div></h3></header><section class=\"messages\"></section><footer><div class=\"action clear\" onclick=\"cv.ui.NotificationCenter.clear()\">' +\n            qx.locale.Manager.tr('Delete all') +\n            '<div></div></footer>'\n        });\n\n        body.appendChild(elem);\n\n        // create the template\n        let templateCode =\n          '<div class=\"message {{severity}}{{#actions}} selectable{{/actions}}\" title=\"{{tooltip}}\" id=\"' +\n          this.getMessageElementId() +\n          '{{ id }}\">';\n        templateCode += '{{#icon}}{{ &icon }}{{/icon}}';\n        templateCode += '{{#deletable}}<div class=\"action delete\">x</div>{{/deletable}}';\n        templateCode += '{{#title}}<header><h4>{{ title }}</h4></header>{{/title}}';\n        templateCode += '<div class=\"content\">{{&message}}</div></div>';\n\n        const template = qx.dom.Element.create('script', {\n          id: 'MessageTemplate',\n          type: 'text/template',\n          html: templateCode\n        });\n\n        body.appendChild(template);\n      }\n\n      this.__messagesContainer = elem.querySelector('section.messages');\n      this.__badge = elem.querySelector('.badge');\n      qx.event.Registration.addListener(this.__badge, 'tap', this.toggleVisibility, this);\n\n      // add HTML template for messages to header\n\n      this._list = new qx.data.controller.website.List(this._messages, this.__messagesContainer, 'MessageTemplate');\n\n      qx.event.Registration.addListener(this.__messagesContainer, 'tap', this._onListTap, this);\n\n      // connect badge content\n      this._messages.addListener('changeLength', this.__updateBadge, this);\n      this.__updateBadge();\n\n      // update dimensions\n      new qx.util.DeferredCall(this._onResize, this).schedule();\n    },\n\n    __updateBadge() {\n      let currentContent = parseInt(this.__badge.getAttribute('html'));\n      if (isNaN(currentContent)) {\n        currentContent = 0;\n      }\n      const messages = this.getMessages().getLength();\n\n      const update = function () {\n        // still empty\n        if (this.getMessages().getLength() === 0) {\n          this.hide();\n        } else {\n          this.__element.style.visibility = '';\n          this._onSeverityChange();\n        }\n      }.bind(this);\n      // close center if empty\n      if (cv.ui.NotificationCenter.BLINK.duration > 0) {\n        qx.event.Timer.once(update, this, cv.ui.NotificationCenter.BLINK.duration);\n      } else {\n        update();\n      }\n      if (currentContent < messages) {\n        // blink to get the users attention for the new message\n        qx.bom.element.Animation.animate(this.__badge, cv.ui.NotificationCenter.BLINK);\n      }\n      if (messages) {\n        this.__badge.innerHTML = '' + messages;\n      } else {\n        this.__badge.innerHTML = '';\n      }\n    },\n\n    _onSeverityChange() {\n      const severity = this.getGlobalSeverity();\n      if (this.__badge) {\n        this.__badge.classList.remove.apply(this.__badge.classList, this._severities);\n\n        this.__badge.classList.add(severity);\n      }\n\n      if (this.__favico) {\n        // update favicon badge\n        this.__favico.badge(this.getMessages().getLength(), {\n          bgColor: this.getSeverityColor(severity)\n        });\n      }\n    },\n\n    /**\n     * Show the NotificationCenter\n     */\n    show() {\n      if (!this.__visible) {\n        this.__visible = true;\n        this.__blocker.block();\n        this.__element.style.visibility = '';\n        qx.event.Registration.addListener(this.__blocker.getBlockerElement(), 'tap', this.hide, this);\n\n        if (cv.ui.NotificationCenter.SLIDE.duration > 0) {\n          const anim = qx.bom.element.Animation.animate(this.__element, cv.ui.NotificationCenter.SLIDE);\n\n          anim.on(\n            'end',\n            function () {\n              this.__element.style.transform = 'translate(-300px)';\n            },\n            this\n          );\n        } else {\n          this.__element.style.transform = 'translate(-300px)';\n        }\n      }\n    },\n\n    /**\n     * Toggle the NotificationCenter visibility\n     */\n    toggleVisibility() {\n      if (this.__visible) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    },\n\n    /**\n     * Hide the NotificationCenter\n     */\n    hide() {\n      if (this.__visible) {\n        this.__visible = false;\n        qx.event.Registration.removeListener(this.__blocker.getBlockerElement(), 'tap', this.hide, this);\n\n        if (cv.ui.NotificationCenter.SLIDE.duration > 0) {\n          const anim = qx.bom.element.Animation.animateReverse(this.__element, cv.ui.NotificationCenter.SLIDE);\n\n          anim.on(\n            'end',\n            function () {\n              this.__element.style.transform = 'translate(-0px)';\n              this.__blocker.unblock();\n            },\n            this\n          );\n        } else {\n          this.__element.style.transform = 'translate(-0px)';\n          this.__blocker.unblock();\n        }\n      }\n    }\n  },\n\n  /*\n  *****************************************************************************\n    DESTRUCTOR\n  *****************************************************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(window, 'resize', this._onResize, this);\n\n    qx.event.Registration.removeListener(this.__blocker.getBlockerElement(), 'tap', this.hide, this);\n\n    qx.event.Registration.removeListener(this.__messagesContainer, 'tap', this._onListTap, this);\n\n    this._disposeObjects('__blocker', '__messagesContainer', '_openCommand');\n  }\n});\n"
  ],
  "mappings": "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"
}