{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/NotificationCenter.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "cv",
    "notifications",
    "IHandler",
    "include",
    "ui",
    "MHandleMessage",
    "type",
    "construct",
    "set",
    "rootElementId",
    "messageElementId",
    "Router",
    "getInstance",
    "registerMessageHandler",
    "_openCommand",
    "command",
    "Command",
    "addListener",
    "toggleVisibility",
    "TemplateEngine",
    "getCommands",
    "add",
    "event",
    "Registration",
    "window",
    "_onResize",
    "debouncedHide",
    "util",
    "Function",
    "debounce",
    "hide",
    "bind",
    "executeWhenDomFinished",
    "_init",
    "_onSeverityChange",
    "setDelegate",
    "prepareMessage",
    "message",
    "icon",
    "iconClasses",
    "IconTools",
    "svgKUF",
    "statics",
    "SLIDE",
    "duration",
    "timing",
    "origin",
    "keyFrames",
    "translate",
    "BLINK",
    "backgroundColor",
    "deleteMessage",
    "index",
    "ev",
    "clear",
    "force",
    "performAction",
    "messageId",
    "members",
    "_list",
    "__element",
    "__messagesContainer",
    "__visible",
    "__blocker",
    "__badge",
    "__favico",
    "disableBadge",
    "value",
    "classList",
    "remove",
    "height",
    "document",
    "documentElement",
    "clientHeight",
    "style",
    "left",
    "clientWidth",
    "headerRect",
    "querySelector",
    "getBoundingClientRect",
    "footerRect",
    "messageBoxHeight",
    "Math",
    "round",
    "bottom",
    "top",
    "body",
    "BodyBlocker",
    "Favico",
    "animation",
    "bgColor",
    "elem",
    "getRootElementId",
    "dom",
    "Element",
    "create",
    "id",
    "html",
    "locale",
    "Manager",
    "tr",
    "appendChild",
    "templateCode",
    "getMessageElementId",
    "template",
    "data",
    "controller",
    "website",
    "List",
    "_messages",
    "_onListTap",
    "__updateBadge",
    "DeferredCall",
    "schedule",
    "currentContent",
    "parseInt",
    "getAttribute",
    "isNaN",
    "messages",
    "getMessages",
    "getLength",
    "update",
    "visibility",
    "NotificationCenter",
    "Timer",
    "once",
    "bom",
    "element",
    "Animation",
    "animate",
    "innerHTML",
    "severity",
    "getGlobalSeverity",
    "apply",
    "_severities",
    "badge",
    "getSeverityColor",
    "show",
    "block",
    "getBlockerElement",
    "anim",
    "on",
    "transform",
    "removeListener",
    "animateReverse",
    "unblock",
    "destruct",
    "_disposeObjects"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* NotificationCenter.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The NotificationCenter shows messages in a list. Messages are Maps which can have the following structure:\n *\n * <pre>\n * {\n *   topic: {String} Topic of the message\n *   title: {String} Title of the message\n *   message: {String} The message content\n *   icon: {String} icon name (KNX-UF icon)\n *   iconClasses: {String} CSS classes that should be added to the icon element\n *   deletable: {Boolean} Flag to determine if the user can delete the message\n *   severity: {String} one of \"low\", \"normal\", \"high\", \"urgent\"\n *   tooltip: {String} Tooltip for the message\n *   progress: {Integer} indicates a progress state in percent of some long running process.\n *   action: {\n *     actionType {String}: {\n *      action: {Function} Called when the action gets executed (when the user clicks on the message)\n *      params: {Array?} Additional parameters for the callback\n *      needsConfirmation: {Boolean} If true the execution of the action must be confirmed by the user\n *      deleteMessageAfterExecution: {Boolean} If true the message gets deleted after action execution\n *   }\n *   unique: {Boolean} If true there can be only one message of that topic at once\n *   condition: {Boolean|Function} if true this unique message gets removed\n * }\n * </pre>\n *\n *\n * @author Tobias BrÃ¤utigam\n * @since 0.11.0\n */\nqx.Class.define('cv.ui.NotificationCenter', {\n  extend: qx.core.Object,\n  implement: cv.core.notifications.IHandler,\n  include: cv.ui.MHandleMessage,\n  type: 'singleton',\n\n  /*\n *****************************************************************************\n    CONSTRUCTOR\n *****************************************************************************\n */\n  construct: function () {\n    this.base(arguments);\n\n    this.set({\n      rootElementId: 'notification-center',\n      messageElementId: 'notification_'\n    });\n    // register to topics\n    cv.core.notifications.Router.getInstance().registerMessageHandler(this, {\n      'cv.*': {}\n    });\n    this._openCommand = new qx.ui.command.Command('Ctrl+N');\n    this._openCommand.addListener('execute', this.toggleVisibility, this);\n    cv.TemplateEngine.getInstance().getCommands().add('open-notificationcenter', this._openCommand);\n\n    qx.event.Registration.addListener(window, 'resize', this._onResize, this);\n\n    this.debouncedHide = qx.util.Function.debounce(this.hide.bind(this), 5000, false);\n\n\n    cv.TemplateEngine.getInstance().executeWhenDomFinished(this._init, this);\n\n    this.addListener('changedGlobalSeverity', this._onSeverityChange, this);\n\n    this.setDelegate({\n      prepareMessage: function(message) {\n        // resolve icon if there is one\n        if (message.icon) {\n          const iconClasses = message.iconClasses ? ' ' + message.iconClasses : '';\n          message.icon = cv.util.IconTools.svgKUF(message.icon)(null, null, 'icon' + iconClasses);\n        }\n      }\n    });\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    SLIDE: {\n      duration: 350,\n      timing: 'linear',\n      origin: 'bottom center',\n      keyFrames : {\n        0: {\n          translate : ['0px']\n        },\n        100: {\n          translate : ['-300px']\n        }\n      }\n    },\n\n    BLINK: {\n      duration: 1000,\n      timing: 'ease-in-out',\n      origin: 'bottom center',\n      keyFrames : {\n        0: {\n          backgroundColor : ['rgba(61, 61, 61, 0.9)']\n        },\n        50:{\n          backgroundColor : ['rgba(255, 121, 0, 0.9)']\n        },\n        100: {\n          backgroundColor : ['rgba(61, 61, 61, 0.9)']\n        }\n      }\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#deleteMessage}\n     * @param index {Number}\n     * @param ev {Event}\n     * @see cv.ui.NotificationCenter#deleteMessage\n     */\n    deleteMessage: function(index, ev) {\n      return this.getInstance().deleteMessage(index, ev);\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#clear}\n     * @param force {Boolean}\n     * @see cv.ui.NotificationCenter#clear\n     */\n    clear: function(force) {\n      this.getInstance().clear(force);\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#hide}\n     * @see cv.ui.NotificationCenter#hide\n     */\n    hide: function() {\n      this.getInstance().hide();\n    },\n\n    /**\n     * Shortcut to {@link cv.ui.NotificationCenter#performAction}\n     * @param messageId {Number}\n     * @param ev {Event}\n     * @see cv.ui.NotificationCenter#performAction\n     */\n    performAction: function(messageId, ev) {\n      this.getInstance().performAction(messageId, ev);\n    }\n  },\n\n  /*\n*****************************************************************************\n   MEMBERS\n*****************************************************************************\n*/\n  members: {\n    _list: null,\n    __element: null,\n    __messagesContainer: null,\n    __visible: false,\n    __blocker: null,\n    __badge: null,\n    __favico: null,\n    _openCommand: null,\n\n    disableBadge: function(value) {\n      if (value) {\n        this.__badge.classList.add('hidden');\n      } else {\n        this.__badge.classList.remove('hidden');\n      }\n    },\n\n    _onResize: function() {\n      const height = document.documentElement.clientHeight;\n      if (this.__element) {\n        this.__element.style.left = document.documentElement.clientWidth + 'px';\n        this.__element.style.height = height + 'px';\n      }\n\n      if (this.__messagesContainer) {\n        // get header+footer heights\n        const headerRect = this.__element.querySelector(':scope > header').getBoundingClientRect();\n        const footerRect = this.__element.querySelector(':scope > footer').getBoundingClientRect();\n        const messageBoxHeight = height -\n          Math.round(headerRect.bottom - headerRect.top) -\n          Math.round(footerRect.bottom - footerRect.top);\n        this.__messagesContainer.style.height = messageBoxHeight + 'px';\n      }\n    },\n\n    /**\n     * Attach to dom element and style it\n     * @private\n     */\n    _init: function() {\n      const body = document.querySelector('body');\n\n      this.__blocker = cv.ui.BodyBlocker.getInstance();\n\n      this.__favico = new Favico({\n        animation:'fade',\n        bgColor: '#1C391C'\n      });\n\n      // check if the element is already there (might have been cached)\n      let elem = this.__element = document.querySelector(this.getRootElementId());\n\n      if (!elem) {\n        // create new element\n        elem = this.__element = qx.dom.Element.create('div', {\n          id: this.getRootElementId(),\n          style: 'visibility: hidden;',\n          html: '<div class=\"badge\"></div><header><h3>' + qx.locale.Manager.tr('Message center') + '<div class=\"action hide\"><a href=\"#\" onclick=\"cv.ui.NotificationCenter.hide()\">X</a></div></h3></header><section class=\"messages\"></section><footer><div class=\"action clear\" onclick=\"cv.ui.NotificationCenter.clear()\">' + qx.locale.Manager.tr('Delete all') + '<div></div></footer>'\n        });\n        body.appendChild(elem);\n\n        // create the template\n        let templateCode = '<div class=\"message {{severity}}{{#actions}} selectable{{/actions}}\" title=\"{{tooltip}}\" id=\"' + this.getMessageElementId() + '{{ id }}\">';\n        templateCode += '{{#icon}}{{ &icon }}{{/icon}}';\n        templateCode += '{{#deletable}}<div class=\"action delete\">x</div>{{/deletable}}';\n        templateCode += '{{#title}}<header><h4>{{ title }}</h4></header>{{/title}}';\n        templateCode += '<div class=\"content\">{{&message}}</div></div>';\n\n        const template = qx.dom.Element.create('script', {\n          id: 'MessageTemplate',\n          type: 'text/template',\n          html: templateCode\n        });\n        body.appendChild(template);\n      }\n\n      this.__messagesContainer = elem.querySelector('section.messages');\n      this.__badge = elem.querySelector('.badge');\n      qx.event.Registration.addListener(this.__badge, 'tap', this.toggleVisibility, this);\n\n      // add HTML template for messages to header\n\n\n      this._list = new qx.data.controller.website.List(this._messages, this.__messagesContainer, 'MessageTemplate');\n      qx.event.Registration.addListener(this.__messagesContainer, 'tap', this._onListTap, this);\n\n      // connect badge content\n      this._messages.addListener('changeLength', this.__updateBadge, this);\n      this.__updateBadge();\n\n      // update dimensions\n      new qx.util.DeferredCall(this._onResize, this).schedule();\n    },\n\n    __updateBadge: function() {\n      let currentContent = parseInt(this.__badge.getAttribute('html'));\n      if (isNaN(currentContent)) {\n        currentContent = 0;\n      }\n      const messages = this.getMessages().getLength();\n\n      const update = function () {\n        // still empty\n        if (this.getMessages().getLength() === 0) {\n          this.hide();\n        } else {\n          this.__element.style.visibility = '';\n          this._onSeverityChange();\n        }\n      }.bind(this);\n      // close center if empty\n      if (cv.ui.NotificationCenter.BLINK.duration > 0) {\n        qx.event.Timer.once(update, this, cv.ui.NotificationCenter.BLINK.duration);\n      } else {\n        update();\n      }\n      if (currentContent < messages) {\n        // blink to get the users attention for the new message\n        qx.bom.element.Animation.animate(this.__badge, cv.ui.NotificationCenter.BLINK);\n      }\n      if (messages) {\n        this.__badge.innerHTML = ''+messages;\n      } else {\n        this.__badge.innerHTML = '';\n      }\n    },\n\n    _onSeverityChange: function() {\n      const severity = this.getGlobalSeverity();\n      if (this.__badge) {\n        this.__badge.classList.remove.apply(this.__badge.classList, this._severities);\n        this.__badge.classList.add(severity);\n      }\n\n      if (this.__favico) {\n        // update favicon badge\n        this.__favico.badge(this.getMessages().getLength(), {\n          bgColor: this.getSeverityColor(severity)\n        });\n      }\n    },\n\n    /**\n     * Show the NotificationCenter\n     */\n    show: function() {\n      if (!this.__visible) {\n        this.__visible = true;\n        this.__blocker.block();\n        this.__element.style.visibility = '';\n        qx.event.Registration.addListener(this.__blocker.getBlockerElement(), 'tap', this.hide, this);\n        if (cv.ui.NotificationCenter.SLIDE.duration > 0) {\n          const anim = qx.bom.element.Animation.animate(this.__element, cv.ui.NotificationCenter.SLIDE);\n          anim.on('end', function () {\n            this.__element.style.transform = 'translate(-300px)';\n          }, this);\n        } else {\n          this.__element.style.transform = 'translate(-300px)';\n        }\n      }\n    },\n\n    /**\n     * Toggle the NotificationCenter visibility\n     */\n    toggleVisibility: function() {\n      if (this.__visible) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    },\n\n    /**\n     * Hide the NotificationCenter\n     */\n    hide: function() {\n      if (this.__visible) {\n        this.__visible = false;\n        qx.event.Registration.removeListener(this.__blocker.getBlockerElement(), 'tap', this.hide, this);\n        if (cv.ui.NotificationCenter.SLIDE.duration > 0) {\n          const anim = qx.bom.element.Animation.animateReverse(this.__element, cv.ui.NotificationCenter.SLIDE);\n          anim.on('end', function () {\n            this.__element.style.transform = 'translate(-0px)';\n            this.__blocker.unblock();\n          }, this);\n        } else {\n          this.__element.style.transform = 'translate(-0px)';\n          this.__blocker.unblock();\n        }\n      }\n    }\n  },\n\n  /*\n *****************************************************************************\n    DESTRUCTOR\n *****************************************************************************\n */\n  destruct:  /* istanbul ignore next [destructor not called in singleton] */ function () {\n    qx.event.Registration.removeListener(window, 'resize', this._onResize, this);\n    qx.event.Registration.removeListener(this.__blocker.getBlockerElement(), 'tap', this.hide, this);\n    qx.event.Registration.removeListener(this.__messagesContainer, 'tap', this._onListTap, this);\n    this._disposeObjects('__blocker', '__messagesContainer', '_openCommand');\n  }\n});\n"
  ]
}