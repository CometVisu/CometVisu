{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/Popup.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "type",
    "setType",
    "__deactivateSelectors",
    "__elementMap",
    "events",
    "properties",
    "check",
    "init",
    "members",
    "__counter",
    "__domElement",
    "getCurrentDomElement",
    "create",
    "attributes",
    "cv",
    "ui",
    "BodyBlocker",
    "getInstance",
    "block",
    "unique",
    "topic",
    "closable",
    "prototype",
    "hasOwnProperty",
    "call",
    "body",
    "document",
    "querySelector",
    "ret_val",
    "classes",
    "getType",
    "isNew",
    "addCloseListeners",
    "push",
    "dom",
    "Element",
    "id",
    "join",
    "style",
    "html",
    "appendChild",
    "close",
    "setAttribute",
    "insertBegin",
    "destroyElement",
    "$$topic",
    "$$page",
    "page",
    "title",
    "lang",
    "Type",
    "isString",
    "innerHTML",
    "content",
    "icon",
    "progress",
    "messageContent",
    "parentNode",
    "replaceChild",
    "iconClasses",
    "util",
    "IconTools",
    "svgKUF",
    "use",
    "currentIconPath",
    "getAttribute",
    "endsWith",
    "parts",
    "split",
    "bar",
    "ProgressBar",
    "getDomElement",
    "$$widget",
    "setValue",
    "actions",
    "getOwnPropertyNames",
    "length",
    "actionTypes",
    "forEach",
    "index",
    "typeActions",
    "Array",
    "isArray",
    "target",
    "wrapper",
    "notifications",
    "charAt",
    "toUpperCase",
    "substr",
    "getWrapper",
    "action",
    "actionButton",
    "ActionRegistry",
    "createActionElement",
    "$$handler",
    "addListener",
    "width",
    "height",
    "anchor",
    "x",
    "y",
    "w",
    "h",
    "align",
    "position",
    "offset",
    "left",
    "top",
    "undefined",
    "ret_valRect",
    "getBoundingClientRect",
    "placement",
    "PopupHandler",
    "placementStrategy",
    "Math",
    "round",
    "right",
    "bottom",
    "documentElement",
    "clientWidth",
    "clientHeight",
    "reload",
    "locale",
    "Manager",
    "tr",
    "toString",
    "insertAdjacentHTML",
    "event",
    "Registration",
    "fireEvent",
    "visibility",
    "name",
    "removeChild",
    "unblock",
    "isClosed",
    "destruct",
    "Popup"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Popup.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n//noinspection JSUnusedGlobalSymbols\nqx.Class.define('cv.ui.Popup', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(type) {\n    if (type) {\n      this.setType(type);\n    }\n    this.__deactivateSelectors = ['#top', '#navbarTop', '#centerContainer', '#navbarBottom', '#bottom'];\n    this.__elementMap = {};\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    'close': 'qx.event.type.Event'\n  },\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    type: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __counter: 0,\n    __deactivateSelectors: null,\n    __domElement: null,\n    __elementMap: null,\n\n    getCurrentDomElement: function() {\n      return this.__domElement;\n    },\n\n    /**\n     * Create the popup element\n     *\n     * @param attributes {Map} content of the popup like title, content, position, styling etc.\n     * @return {Element} Popup as DOM Element\n     */\n    create: function (attributes) {\n      cv.ui.BodyBlocker.getInstance().block(attributes.unique, attributes.topic);\n      const closable = !Object.prototype.hasOwnProperty.call(attributes, 'closable') || attributes.closable;\n      const body = document.querySelector('body');\n      let ret_val;\n      const classes = ['popup', 'popup_background', this.getType()];\n      let isNew = true;\n      let addCloseListeners = false;\n      if (attributes.type) {\n        classes.push(attributes.type);\n      }\n\n      if (!this.__domElement) {\n        ret_val = this.__domElement = qx.dom.Element.create('div', {\n          id: 'popup_' + this.__counter,\n          'class': classes.join(' '),\n          style: 'visibility:hidden',\n          html: closable ? '<div class=\"popup_close\">X</div>' : ''\n        });\n        body.appendChild(ret_val);\n        this.__elementMap.close = ret_val.querySelector('div.popup_close');\n        addCloseListeners = true;\n      } else {\n        isNew = false;\n        ret_val = this.__domElement;\n        ret_val.setAttribute('class', classes.join(' '));\n        if (closable && !this.__elementMap.close) {\n          this.__domElement.close = qx.dom.Element.create('div', {'class': 'popup_close', 'html': 'X'});\n          qx.dom.Element.insertBegin(this.__domElement.close, body);\n          addCloseListeners = true;\n        } else if (!closable) {\n          this.destroyElement('close');\n        }\n      }\n\n      this.__domElement.$$topic = attributes.topic;\n      this.__domElement.$$page = attributes.page;\n\n      if (attributes.title) {\n        if (!this.__elementMap.title) {\n          this.__elementMap.title = qx.dom.Element.create('div', {'class': 'head'});\n          ret_val.appendChild(this.__elementMap.title);\n        }\n\n        if (qx.lang.Type.isString(attributes.title)) {\n          this.__elementMap.title.innerHTML = '' + attributes.title;\n        } else {\n          this.__elementMap.title.appendChild(attributes.title);\n        }\n      }\n\n      if (attributes.content || attributes.icon || attributes.progress) {\n        if (!this.__elementMap.content) {\n          this.__elementMap.content = qx.dom.Element.create('div', {'class': 'main'});\n          ret_val.appendChild(this.__elementMap.content);\n        }\n\n        if (attributes.content) {\n          if (!this.__elementMap.messageContent) {\n            this.__elementMap.messageContent = qx.dom.Element.create('div', {'class': 'message'});\n            qx.dom.Element.insertBegin(this.__elementMap.messageContent, this.__elementMap.content);\n          }\n          if (qx.lang.Type.isString(attributes.content)) {\n            this.__elementMap.messageContent.innerHTML = attributes.content;\n          } else {\n            this.__elementMap.messageContent.parentNode.replaceChild(attributes.content, this.__elementMap.messageContent);\n            this.__elementMap.messageContent = attributes.content;\n          }\n        } else {\n          this.destroyElement('messageContent');\n        }\n        \n        if (attributes.icon) {\n          if (!this.__elementMap.icon) {\n            const iconClasses = attributes.iconClasses ? ' ' + attributes.iconClasses : '';\n            this.__elementMap.icon = qx.dom.Element.create('div', {'html': cv.util.IconTools.svgKUF(attributes.icon)(null, null, 'icon' + iconClasses)});\n            qx.dom.Element.insertBegin(this.__elementMap.icon, this.__elementMap.content);\n          } else {\n            const use = this.__elementMap.icon.querySelector('use');\n            const currentIconPath = use.getAttribute('xlink:href');\n            if (!currentIconPath.endsWith('#kuf-'+attributes.icon)) {\n              const parts = currentIconPath.split('#');\n              use.setAttribute('xlink:href', parts[0]+'#kuf-'+attributes.icon);\n            }\n          }\n        } else {\n          this.destroyElement('icon');\n        }\n\n        if (attributes.progress) {\n          if (!this.__elementMap.progress) {\n            const bar = new cv.ui.util.ProgressBar();\n            this.__elementMap.progress = bar.getDomElement();\n            this.__elementMap.content.appendChild(this.__elementMap.progress);\n          }\n          this.__elementMap.progress.$$widget.setValue(attributes.progress);\n        } else {\n          this.destroyElement('progress');\n        }\n      }\n\n      if (attributes.actions && Object.getOwnPropertyNames(attributes.actions).length > 0) {\n        if (!this.__elementMap.actions) {\n          this.__elementMap.actions = qx.dom.Element.create('div', {'class': 'actions'});\n          ret_val.appendChild(this.__elementMap.actions);\n        } else {\n          // clear content\n          this.__elementMap.actions.innerHTML = '';\n        }\n        const actionTypes = Object.getOwnPropertyNames(attributes.actions).length;\n        Object.getOwnPropertyNames(attributes.actions).forEach(function (type, index) {\n          const typeActions = Array.isArray(attributes.actions[type]) ? attributes.actions[type] : [attributes.actions[type]];\n\n          let target = this.__elementMap.actions;\n          let wrapper = null;\n          if (cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)] && cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper) {\n            wrapper = cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper();\n          } else {\n            wrapper = qx.dom.Element.create('div', (actionTypes > index + 1) ? {style: 'margin-bottom: 20px'} : {});\n          }\n          target.appendChild(wrapper);\n          target = wrapper;\n          typeActions.forEach(function (action) {\n            const actionButton = cv.core.notifications.ActionRegistry.createActionElement(type, action);\n            if (actionButton) {\n              actionButton.$$handler && actionButton.$$handler.addListener('close', function () {\n                this.close();\n              }, this);\n              target.appendChild(actionButton);\n            }\n          }, this);\n        }, this);\n      } else {\n        this.destroyElement('actions');\n      }\n\n      if (attributes.width) {\n        ret_val.style.width = attributes.width;\n      }\n\n      if (attributes.height) {\n        ret_val.style.height = attributes.height;\n      }\n\n      const anchor = {x: -1, y: -1, w: 0, h: 0};\n      let align;\n      if (attributes.position) {\n        if (attributes.position.offset) {\n          const offset = attributes.position.offset();\n          anchor.x = offset.left;\n          anchor.y = offset.top;\n          anchor.w = attributes.position.width();\n          anchor.h = attributes.position.height();\n        } else {\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'x')) {\n            anchor.x = attributes.position.x;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'y')) {\n            anchor.y = attributes.position.y;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'w')) {\n            anchor.w = attributes.position.w;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'h')) {\n            anchor.h = attributes.position.h;\n          }\n          if (anchor.w === 0 && anchor.h === 0) {\n            align = 5;\n          }\n        }\n      }\n      if (attributes.align !== undefined) {\n        align = attributes.align;\n      }\n      const ret_valRect = ret_val.getBoundingClientRect();\n      const placement = cv.ui.PopupHandler.placementStrategy(\n        anchor,\n        {w: Math.round(ret_valRect.right - ret_valRect.left), h: Math.round(ret_valRect.bottom - ret_valRect.top)},\n        {w: document.documentElement.clientWidth, h: document.documentElement.clientHeight},\n        align\n      );\n\n      ret_val.style.left = placement.x + 'px';\n      ret_val.style.top = placement.y + 'px';\n\n      if (!closable && ret_val.querySelector('.reload') === null) {\n        const reload = '<div class=\"reload\">' +\n          '<a href=\"javascript:location.reload(true);\">' +\n          qx.locale.Manager.tr('Reload').toString() +\n          '</a>' +\n          '</div>';\n        ret_val.insertAdjacentHTML('beforeend', reload);\n      }\n\n      if (closable && addCloseListeners) {\n        this.addListener('close', this.close, this);\n        qx.event.Registration.addListener(ret_val, 'tap', function () {\n          // note: this will call two events - one for the popup itself and\n          //       one for the popup_background.\n          this.fireEvent('close');\n        }, this);\n        const close = ret_val.querySelector('.popup_close');\n        qx.event.Registration.addListener(close, 'tap', function () {\n          this.fireEvent('close');\n        }, this);\n      }\n\n      attributes.id = this.__counter;\n      if (isNew) {\n        ret_val.style.visibility = 'visible';\n        this.__counter++;\n      }\n      return ret_val;\n    },\n\n    destroyElement: function(name) {\n      if (this.__elementMap[name]) {\n        this.__elementMap[name].parentNode.removeChild(this.__elementMap[name]);\n        delete this.__elementMap[name];\n      }\n    },\n\n    /**\n     * Closes this popup\n     */\n    close: function () {\n      if (this.__domElement) {\n        cv.ui.BodyBlocker.getInstance().unblock(this.__domElement.$$topic);\n        this.__domElement.parentNode.removeChild(this.__domElement);\n        this.__domElement = null;\n        this.__elementMap = {};\n      } else {\n        cv.ui.BodyBlocker.getInstance().unblock();\n      }\n    },\n\n    isClosed: function() {\n      return this.__domElement === null;\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this.close();\n  }\n});\n"
  ]
}