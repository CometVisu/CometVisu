{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "type",
    "setType",
    "__deactivateSelectors",
    "__elementMap",
    "events",
    "close",
    "properties",
    "check",
    "init",
    "members",
    "__counter",
    "__domElement",
    "getCurrentDomElement",
    "create",
    "attributes",
    "cv",
    "ui",
    "BodyBlocker",
    "getInstance",
    "block",
    "unique",
    "topic",
    "closable",
    "prototype",
    "hasOwnProperty",
    "call",
    "body",
    "document",
    "querySelector",
    "ret_val",
    "classes",
    "getType",
    "isNew",
    "addCloseListeners",
    "push",
    "dom",
    "Element",
    "id",
    "join",
    "style",
    "html",
    "appendChild",
    "setAttribute",
    "insertBegin",
    "destroyElement",
    "$$topic",
    "$$page",
    "page",
    "title",
    "lang",
    "Type",
    "isString",
    "innerHTML",
    "content",
    "icon",
    "progress",
    "messageContent",
    "parentNode",
    "replaceChild",
    "iconClasses",
    "util",
    "IconTools",
    "svgKUF",
    "i",
    "classList",
    "contains",
    "add",
    "bar",
    "ProgressBar",
    "getDomElement",
    "$$widget",
    "setValue",
    "actions",
    "getOwnPropertyNames",
    "length",
    "actionTypes",
    "forEach",
    "index",
    "typeActions",
    "Array",
    "isArray",
    "target",
    "wrapper",
    "notifications",
    "charAt",
    "toUpperCase",
    "substr",
    "getWrapper",
    "action",
    "actionButton",
    "ActionRegistry",
    "createActionElement",
    "$$handler",
    "addListener",
    "width",
    "height",
    "anchor",
    "x",
    "y",
    "w",
    "h",
    "align",
    "position",
    "offset",
    "left",
    "top",
    "undefined",
    "ret_valRect",
    "getBoundingClientRect",
    "placement",
    "PopupHandler",
    "placementStrategy",
    "Math",
    "round",
    "right",
    "bottom",
    "documentElement",
    "clientWidth",
    "clientHeight",
    "reload",
    "locale",
    "Manager",
    "tr",
    "toString",
    "insertAdjacentHTML",
    "event",
    "Registration",
    "DeferredCall",
    "fireEvent",
    "schedule",
    "visibility",
    "name",
    "removeChild",
    "unblock",
    "isClosed",
    "destruct",
    "Popup"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/Popup.js"
  ],
  "sourcesContent": [
    "/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n//noinspection JSUnusedGlobalSymbols\nqx.Class.define('cv.ui.Popup', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(type) {\n    if (type) {\n      this.setType(type);\n    }\n    this.__deactivateSelectors = ['#top', '#navbarTop', '#centerContainer', '#navbarBottom', '#bottom'];\n\n    this.__elementMap = {};\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    close: 'qx.event.type.Event'\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    type: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __counter: 0,\n    __deactivateSelectors: null,\n    __domElement: null,\n    __elementMap: null,\n\n    getCurrentDomElement() {\n      return this.__domElement;\n    },\n\n    /**\n     * Create the popup element\n     *\n     * @param attributes {Map} content of the popup like title, content, position, styling etc.\n     * @return {Element} Popup as DOM Element\n     */\n    create(attributes) {\n      cv.ui.BodyBlocker.getInstance().block(attributes.unique, attributes.topic);\n\n      const closable = !Object.prototype.hasOwnProperty.call(attributes, 'closable') || attributes.closable;\n      const body = document.querySelector('body');\n      let ret_val;\n      const classes = ['popup', 'popup_background', this.getType()];\n      let isNew = true;\n      let addCloseListeners = false;\n      if (attributes.type) {\n        classes.push(attributes.type);\n      }\n\n      if (!this.__domElement) {\n        ret_val = this.__domElement = qx.dom.Element.create('div', {\n          id: 'popup_' + this.__counter,\n          class: classes.join(' '),\n          style: 'visibility:hidden',\n          html: closable ? '<div class=\"popup_close\">X</div>' : ''\n        });\n\n        body.appendChild(ret_val);\n        this.__elementMap.close = ret_val.querySelector('div.popup_close');\n        addCloseListeners = true;\n      } else {\n        isNew = false;\n        ret_val = this.__domElement;\n        ret_val.setAttribute('class', classes.join(' '));\n        if (closable && !this.__elementMap.close) {\n          this.__domElement.close = qx.dom.Element.create('div', {\n            class: 'popup_close',\n            html: 'X'\n          });\n\n          qx.dom.Element.insertBegin(this.__domElement.close, body);\n          addCloseListeners = true;\n        } else if (!closable) {\n          this.destroyElement('close');\n        }\n      }\n\n      this.__domElement.$$topic = attributes.topic;\n      this.__domElement.$$page = attributes.page;\n\n      if (attributes.title) {\n        if (!this.__elementMap.title) {\n          this.__elementMap.title = qx.dom.Element.create('div', {\n            class: 'head'\n          });\n\n          ret_val.appendChild(this.__elementMap.title);\n        }\n\n        if (qx.lang.Type.isString(attributes.title)) {\n          this.__elementMap.title.innerHTML = '' + attributes.title;\n        } else {\n          this.__elementMap.title.appendChild(attributes.title);\n        }\n      }\n\n      if (attributes.content || attributes.icon || attributes.progress) {\n        if (!this.__elementMap.content) {\n          this.__elementMap.content = qx.dom.Element.create('div', {\n            class: 'main'\n          });\n\n          ret_val.appendChild(this.__elementMap.content);\n        }\n\n        if (attributes.content) {\n          if (!this.__elementMap.messageContent) {\n            this.__elementMap.messageContent = qx.dom.Element.create('div', {\n              class: 'message'\n            });\n\n            qx.dom.Element.insertBegin(this.__elementMap.messageContent, this.__elementMap.content);\n          }\n          if (qx.lang.Type.isString(attributes.content)) {\n            this.__elementMap.messageContent.innerHTML = attributes.content;\n          } else {\n            this.__elementMap.messageContent.parentNode.replaceChild(\n              attributes.content,\n              this.__elementMap.messageContent\n            );\n\n            this.__elementMap.messageContent = attributes.content;\n          }\n        } else {\n          this.destroyElement('messageContent');\n        }\n\n        if (attributes.icon) {\n          if (!this.__elementMap.icon) {\n            const iconClasses = attributes.iconClasses ? ' ' + attributes.iconClasses : '';\n            this.__elementMap.icon = qx.dom.Element.create('div', {\n              html: cv.util.IconTools.svgKUF(attributes.icon)(null, null, 'icon' + iconClasses, true, true)\n            });\n\n            qx.dom.Element.insertBegin(this.__elementMap.icon, this.__elementMap.content);\n          } else {\n            const i = this.__elementMap.icon.querySelector('i');\n            if (!i.classList.contains('knxuf-' + attributes.icon)) {\n              i.classList.add('knxuf-' + attributes.icon);\n            }\n          }\n        } else {\n          this.destroyElement('icon');\n        }\n\n        if (attributes.progress) {\n          if (!this.__elementMap.progress) {\n            const bar = new cv.ui.util.ProgressBar();\n            this.__elementMap.progress = bar.getDomElement();\n            this.__elementMap.content.appendChild(this.__elementMap.progress);\n          }\n          this.__elementMap.progress.$$widget.setValue(attributes.progress);\n        } else {\n          this.destroyElement('progress');\n        }\n      }\n\n      if (attributes.actions && Object.getOwnPropertyNames(attributes.actions).length > 0) {\n        if (!this.__elementMap.actions) {\n          this.__elementMap.actions = qx.dom.Element.create('div', {\n            class: 'actions'\n          });\n\n          ret_val.appendChild(this.__elementMap.actions);\n        } else {\n          // clear content\n          this.__elementMap.actions.innerHTML = '';\n        }\n        const actionTypes = Object.getOwnPropertyNames(attributes.actions).length;\n        Object.getOwnPropertyNames(attributes.actions).forEach(function (type, index) {\n          const typeActions = Array.isArray(attributes.actions[type])\n            ? attributes.actions[type]\n            : [attributes.actions[type]];\n\n          let target = this.__elementMap.actions;\n          let wrapper = null;\n          if (\n            cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)] &&\n            cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper\n          ) {\n            wrapper = cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper();\n          } else {\n            wrapper = qx.dom.Element.create('div', actionTypes > index + 1 ? { style: 'margin-bottom: 20px' } : {});\n          }\n          target.appendChild(wrapper);\n          target = wrapper;\n          typeActions.forEach(function (action) {\n            const actionButton = cv.core.notifications.ActionRegistry.createActionElement(type, action);\n\n            if (actionButton) {\n              actionButton.$$handler &&\n                actionButton.$$handler.addListener('close', () => {\n                  this.close();\n                });\n              target.appendChild(actionButton);\n            }\n          }, this);\n        }, this);\n      } else {\n        this.destroyElement('actions');\n      }\n\n      if (attributes.width) {\n        ret_val.style.width = attributes.width;\n      }\n\n      if (attributes.height) {\n        ret_val.style.height = attributes.height;\n      }\n\n      const anchor = { x: -1, y: -1, w: 0, h: 0 };\n      let align;\n      if (attributes.position) {\n        if (attributes.position.offset) {\n          const offset = attributes.position.offset();\n          anchor.x = offset.left;\n          anchor.y = offset.top;\n          anchor.w = attributes.position.width();\n          anchor.h = attributes.position.height();\n        } else {\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'x')) {\n            anchor.x = attributes.position.x;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'y')) {\n            anchor.y = attributes.position.y;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'w')) {\n            anchor.w = attributes.position.w;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'h')) {\n            anchor.h = attributes.position.h;\n          }\n          if (anchor.w === 0 && anchor.h === 0) {\n            align = 5;\n          }\n        }\n      }\n      if (attributes.align !== undefined) {\n        align = attributes.align;\n      }\n      const ret_valRect = ret_val.getBoundingClientRect();\n      const placement = cv.ui.PopupHandler.placementStrategy(\n        anchor,\n        {\n          w: Math.round(ret_valRect.right - ret_valRect.left),\n          h: Math.round(ret_valRect.bottom - ret_valRect.top)\n        },\n\n        {\n          w: document.documentElement.clientWidth,\n          h: document.documentElement.clientHeight\n        },\n\n        align\n      );\n\n      ret_val.style.left = placement.x + 'px';\n      ret_val.style.top = placement.y + 'px';\n\n      if (!closable && ret_val.querySelector('.reload') === null) {\n        const reload =\n          '<div class=\"reload\">' +\n          '<a href=\"javascript:location.reload(true);\">' +\n          qx.locale.Manager.tr('Reload').toString() +\n          '</a>' +\n          '</div>';\n        ret_val.insertAdjacentHTML('beforeend', reload);\n      }\n\n      if (closable && addCloseListeners) {\n        this.addListener('close', this.close, this);\n        qx.event.Registration.addListener(\n          ret_val,\n          'tap',\n          function () {\n            // note: this will call two events - one for the popup itself and\n            //       one for the popup_background.\n            // needs to be delayed to allow links inside the popup\n            new qx.util.DeferredCall(() => this.fireEvent('close')).schedule();\n          },\n          this\n        );\n\n        const close = ret_val.querySelector('.popup_close');\n        qx.event.Registration.addListener(\n          close,\n          'tap',\n          function () {\n            this.fireEvent('close');\n          },\n          this\n        );\n      }\n\n      attributes.id = this.__counter;\n      if (isNew) {\n        ret_val.style.visibility = 'visible';\n        this.__counter++;\n      }\n      return ret_val;\n    },\n\n    destroyElement(name) {\n      if (this.__elementMap[name]) {\n        this.__elementMap[name].parentNode.removeChild(this.__elementMap[name]);\n        delete this.__elementMap[name];\n      }\n    },\n\n    /**\n     * Closes this popup\n     */\n    close() {\n      if (this.__domElement) {\n        cv.ui.BodyBlocker.getInstance().unblock(this.__domElement.$$topic);\n        this.__domElement.parentNode.removeChild(this.__domElement);\n        this.__domElement = null;\n        this.__elementMap = {};\n      } else {\n        cv.ui.BodyBlocker.getInstance().unblock();\n      }\n    },\n\n    isClosed() {\n      return this.__domElement === null;\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this.close();\n  }\n});\n"
  ],
  "mappings": "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"
}