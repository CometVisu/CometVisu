{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "type",
    "setType",
    "__deactivateSelectors",
    "__elementMap",
    "events",
    "close",
    "properties",
    "check",
    "init",
    "members",
    "__counter",
    "__domElement",
    "getCurrentDomElement",
    "create",
    "attributes",
    "cv",
    "ui",
    "BodyBlocker",
    "getInstance",
    "block",
    "unique",
    "topic",
    "closable",
    "prototype",
    "hasOwnProperty",
    "call",
    "body",
    "document",
    "querySelector",
    "ret_val",
    "classes",
    "getType",
    "isNew",
    "addCloseListeners",
    "push",
    "dom",
    "Element",
    "id",
    "join",
    "style",
    "html",
    "appendChild",
    "setAttribute",
    "insertBegin",
    "destroyElement",
    "$$topic",
    "$$page",
    "page",
    "title",
    "lang",
    "Type",
    "isString",
    "innerHTML",
    "content",
    "icon",
    "progress",
    "messageContent",
    "parentNode",
    "replaceChild",
    "iconClasses",
    "util",
    "IconTools",
    "svgKUF",
    "i",
    "classList",
    "contains",
    "add",
    "bar",
    "ProgressBar",
    "getDomElement",
    "$$widget",
    "setValue",
    "actions",
    "getOwnPropertyNames",
    "length",
    "actionTypes",
    "forEach",
    "index",
    "typeActions",
    "Array",
    "isArray",
    "target",
    "wrapper",
    "notifications",
    "charAt",
    "toUpperCase",
    "substr",
    "getWrapper",
    "action",
    "_this",
    "actionButton",
    "ActionRegistry",
    "createActionElement",
    "$$handler",
    "addListener",
    "width",
    "height",
    "anchor",
    "x",
    "y",
    "w",
    "h",
    "align",
    "position",
    "offset",
    "left",
    "top",
    "undefined",
    "ret_valRect",
    "getBoundingClientRect",
    "placement",
    "PopupHandler",
    "placementStrategy",
    "Math",
    "round",
    "right",
    "bottom",
    "documentElement",
    "clientWidth",
    "clientHeight",
    "reload",
    "locale",
    "Manager",
    "tr",
    "toString",
    "insertAdjacentHTML",
    "event",
    "Registration",
    "_this2",
    "DeferredCall",
    "fireEvent",
    "schedule",
    "visibility",
    "name",
    "removeChild",
    "unblock",
    "isClosed",
    "destruct",
    "Popup"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/Popup.js"
  ],
  "sourcesContent": [
    "/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n//noinspection JSUnusedGlobalSymbols\nqx.Class.define('cv.ui.Popup', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(type) {\n    if (type) {\n      this.setType(type);\n    }\n    this.__deactivateSelectors = ['#top', '#navbarTop', '#centerContainer', '#navbarBottom', '#bottom'];\n\n    this.__elementMap = {};\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    close: 'qx.event.type.Event'\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    type: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __counter: 0,\n    __deactivateSelectors: null,\n    __domElement: null,\n    __elementMap: null,\n\n    getCurrentDomElement() {\n      return this.__domElement;\n    },\n\n    /**\n     * Create the popup element\n     *\n     * @param attributes {Map} content of the popup like title, content, position, styling etc.\n     * @return {Element} Popup as DOM Element\n     */\n    create(attributes) {\n      cv.ui.BodyBlocker.getInstance().block(attributes.unique, attributes.topic);\n\n      const closable = !Object.prototype.hasOwnProperty.call(attributes, 'closable') || attributes.closable;\n      const body = document.querySelector('body');\n      let ret_val;\n      const classes = ['popup', 'popup_background', this.getType()];\n      let isNew = true;\n      let addCloseListeners = false;\n      if (attributes.type) {\n        classes.push(attributes.type);\n      }\n\n      if (!this.__domElement) {\n        ret_val = this.__domElement = qx.dom.Element.create('div', {\n          id: 'popup_' + this.__counter,\n          class: classes.join(' '),\n          style: 'visibility:hidden',\n          html: closable ? '<div class=\"popup_close\">X</div>' : ''\n        });\n\n        body.appendChild(ret_val);\n        this.__elementMap.close = ret_val.querySelector('div.popup_close');\n        addCloseListeners = true;\n      } else {\n        isNew = false;\n        ret_val = this.__domElement;\n        ret_val.setAttribute('class', classes.join(' '));\n        if (closable && !this.__elementMap.close) {\n          this.__domElement.close = qx.dom.Element.create('div', {\n            class: 'popup_close',\n            html: 'X'\n          });\n\n          qx.dom.Element.insertBegin(this.__domElement.close, body);\n          addCloseListeners = true;\n        } else if (!closable) {\n          this.destroyElement('close');\n        }\n      }\n\n      this.__domElement.$$topic = attributes.topic;\n      this.__domElement.$$page = attributes.page;\n\n      if (attributes.title) {\n        if (!this.__elementMap.title) {\n          this.__elementMap.title = qx.dom.Element.create('div', {\n            class: 'head'\n          });\n\n          ret_val.appendChild(this.__elementMap.title);\n        }\n\n        if (qx.lang.Type.isString(attributes.title)) {\n          this.__elementMap.title.innerHTML = '' + attributes.title;\n        } else {\n          this.__elementMap.title.appendChild(attributes.title);\n        }\n      }\n\n      if (attributes.content || attributes.icon || attributes.progress) {\n        if (!this.__elementMap.content) {\n          this.__elementMap.content = qx.dom.Element.create('div', {\n            class: 'main'\n          });\n\n          ret_val.appendChild(this.__elementMap.content);\n        }\n\n        if (attributes.content) {\n          if (!this.__elementMap.messageContent) {\n            this.__elementMap.messageContent = qx.dom.Element.create('div', {\n              class: 'message'\n            });\n\n            qx.dom.Element.insertBegin(this.__elementMap.messageContent, this.__elementMap.content);\n          }\n          if (qx.lang.Type.isString(attributes.content)) {\n            this.__elementMap.messageContent.innerHTML = attributes.content;\n          } else {\n            this.__elementMap.messageContent.parentNode.replaceChild(\n              attributes.content,\n              this.__elementMap.messageContent\n            );\n\n            this.__elementMap.messageContent = attributes.content;\n          }\n        } else {\n          this.destroyElement('messageContent');\n        }\n\n        if (attributes.icon) {\n          if (!this.__elementMap.icon) {\n            const iconClasses = attributes.iconClasses ? ' ' + attributes.iconClasses : '';\n            this.__elementMap.icon = qx.dom.Element.create('div', {\n              html: cv.util.IconTools.svgKUF(attributes.icon)(null, null, 'icon' + iconClasses, true, true)\n            });\n\n            qx.dom.Element.insertBegin(this.__elementMap.icon, this.__elementMap.content);\n          } else {\n            const i = this.__elementMap.icon.querySelector('i');\n            if (!i.classList.contains('knxuf-' + attributes.icon)) {\n              i.classList.add('knxuf-' + attributes.icon);\n            }\n          }\n        } else {\n          this.destroyElement('icon');\n        }\n\n        if (attributes.progress) {\n          if (!this.__elementMap.progress) {\n            const bar = new cv.ui.util.ProgressBar();\n            this.__elementMap.progress = bar.getDomElement();\n            this.__elementMap.content.appendChild(this.__elementMap.progress);\n          }\n          this.__elementMap.progress.$$widget.setValue(attributes.progress);\n        } else {\n          this.destroyElement('progress');\n        }\n      }\n\n      if (attributes.actions && Object.getOwnPropertyNames(attributes.actions).length > 0) {\n        if (!this.__elementMap.actions) {\n          this.__elementMap.actions = qx.dom.Element.create('div', {\n            class: 'actions'\n          });\n\n          ret_val.appendChild(this.__elementMap.actions);\n        } else {\n          // clear content\n          this.__elementMap.actions.innerHTML = '';\n        }\n        const actionTypes = Object.getOwnPropertyNames(attributes.actions).length;\n        Object.getOwnPropertyNames(attributes.actions).forEach(function (type, index) {\n          const typeActions = Array.isArray(attributes.actions[type])\n            ? attributes.actions[type]\n            : [attributes.actions[type]];\n\n          let target = this.__elementMap.actions;\n          let wrapper = null;\n          if (\n            cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)] &&\n            cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper\n          ) {\n            wrapper = cv.core.notifications.actions[type.charAt(0).toUpperCase() + type.substr(1)].getWrapper();\n          } else {\n            wrapper = qx.dom.Element.create('div', actionTypes > index + 1 ? { style: 'margin-bottom: 20px' } : {});\n          }\n          target.appendChild(wrapper);\n          target = wrapper;\n          typeActions.forEach(function (action) {\n            const actionButton = cv.core.notifications.ActionRegistry.createActionElement(type, action);\n\n            if (actionButton) {\n              actionButton.$$handler &&\n              actionButton.$$handler.addListener('close', () => {\n                this.close();\n              });\n              target.appendChild(actionButton);\n            }\n          }, this);\n        }, this);\n      } else {\n        this.destroyElement('actions');\n      }\n\n      if (attributes.width) {\n        ret_val.style.width = attributes.width;\n      }\n\n      if (attributes.height) {\n        ret_val.style.height = attributes.height;\n      }\n\n      const anchor = { x: -1, y: -1, w: 0, h: 0 };\n      let align;\n      if (attributes.position) {\n        if (attributes.position.offset) {\n          const offset = attributes.position.offset();\n          anchor.x = offset.left;\n          anchor.y = offset.top;\n          anchor.w = attributes.position.width();\n          anchor.h = attributes.position.height();\n        } else {\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'x')) {\n            anchor.x = attributes.position.x;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'y')) {\n            anchor.y = attributes.position.y;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'w')) {\n            anchor.w = attributes.position.w;\n          }\n          if (Object.prototype.hasOwnProperty.call(attributes.position, 'h')) {\n            anchor.h = attributes.position.h;\n          }\n          if (anchor.w === 0 && anchor.h === 0) {\n            align = 5;\n          }\n        }\n      }\n      if (attributes.align !== undefined) {\n        align = attributes.align;\n      }\n      const ret_valRect = ret_val.getBoundingClientRect();\n      const placement = cv.ui.PopupHandler.placementStrategy(\n        anchor,\n        {\n          w: Math.round(ret_valRect.right - ret_valRect.left),\n          h: Math.round(ret_valRect.bottom - ret_valRect.top)\n        },\n\n        {\n          w: document.documentElement.clientWidth,\n          h: document.documentElement.clientHeight\n        },\n\n        align\n      );\n\n      ret_val.style.left = placement.x + 'px';\n      ret_val.style.top = placement.y + 'px';\n\n      if (!closable && ret_val.querySelector('.reload') === null) {\n        const reload =\n          '<div class=\"reload\">' +\n          '<a href=\"javascript:location.reload(true);\">' +\n          qx.locale.Manager.tr('Reload').toString() +\n          '</a>' +\n          '</div>';\n        ret_val.insertAdjacentHTML('beforeend', reload);\n      }\n\n      if (closable && addCloseListeners) {\n        this.addListener('close', this.close, this);\n        qx.event.Registration.addListener(\n          ret_val,\n          'tap',\n          function () {\n            // note: this will call two events - one for the popup itself and\n            //       one for the popup_background.\n            // needs to be delayed to allow links inside the popup\n            new qx.util.DeferredCall(() => this.fireEvent('close')).schedule();\n          },\n          this\n        );\n\n        const close = ret_val.querySelector('.popup_close');\n        qx.event.Registration.addListener(\n          close,\n          'tap',\n          function () {\n            this.fireEvent('close');\n          },\n          this\n        );\n      }\n\n      attributes.id = this.__counter;\n      if (isNew) {\n        ret_val.style.visibility = 'visible';\n        this.__counter++;\n      }\n      return ret_val;\n    },\n\n    destroyElement(name) {\n      if (this.__elementMap[name]) {\n        this.__elementMap[name].parentNode.removeChild(this.__elementMap[name]);\n        delete this.__elementMap[name];\n      }\n    },\n\n    /**\n     * Closes this popup\n     */\n    close() {\n      if (this.__domElement) {\n        cv.ui.BodyBlocker.getInstance().unblock(this.__domElement.$$topic);\n        this.__domElement.parentNode.removeChild(this.__domElement);\n        this.__domElement = null;\n        this.__elementMap = {};\n      } else {\n        cv.ui.BodyBlocker.getInstance().unblock();\n      }\n    },\n\n    isClosed() {\n      return this.__domElement === null;\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this.close();\n  }\n});\n"
  ],
  "mappings": "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"
}