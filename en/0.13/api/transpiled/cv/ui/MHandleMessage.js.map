{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/MHandleMessage.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "_messages",
    "data",
    "Array",
    "_severities",
    "properties",
    "maxEntries",
    "check",
    "init",
    "event",
    "counter",
    "globalSeverity",
    "rootElementId",
    "nullable",
    "messageElementId",
    "delegate",
    "members",
    "_idCounter",
    "getIdCounter",
    "getSeverities",
    "_updateHighestSeverity",
    "severityRank",
    "forEach",
    "message",
    "severity",
    "indexOf",
    "setGlobalSeverity",
    "resetGlobalSeverity",
    "getSeverityColor",
    "_applyMaxEntries",
    "value",
    "getLength",
    "splice",
    "setMaxEntries",
    "handleMessage",
    "config",
    "getDelegate",
    "prepareMessage",
    "found",
    "postHookPayload",
    "unique",
    "some",
    "msg",
    "index",
    "topic",
    "id",
    "tooltip",
    "_getTooltip",
    "Object",
    "prototype",
    "hasOwnProperty",
    "call",
    "deletable",
    "cv",
    "core",
    "notifications",
    "Router",
    "evaluateCondition",
    "changed",
    "setItem",
    "action",
    "removedMessage",
    "removeAt",
    "getGlobalSeverity",
    "getMaxEntries",
    "_disposeMap",
    "push",
    "_list",
    "update",
    "setCounter",
    "postHandleMessage",
    "getMessageIdFromEvent",
    "ev",
    "target",
    "getTarget",
    "deleteTarget",
    "messageId",
    "getAttribute",
    "rootId",
    "getRootElementId",
    "getMessageElementId",
    "startsWith",
    "classList",
    "contains",
    "parseInt",
    "replace",
    "parentNode",
    "_onListTap",
    "result",
    "deleteMessage",
    "performAction",
    "actions",
    "getOwnPropertyNames",
    "type",
    "title",
    "clear",
    "force",
    "removeAll",
    "filter",
    "exclude",
    "getMessage",
    "getItem",
    "getMessages",
    "stopPropagation",
    "preventDefault",
    "toArray",
    "find",
    "remove",
    "_performAction",
    "res",
    "typeActions",
    "isArray",
    "needsConfirmation",
    "handler",
    "ActionRegistry",
    "getActionHandler",
    "handleAction",
    "deleteMessageAfterExecution",
    "destruct",
    "_disposeObjects",
    "ui",
    "MHandleMessage"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* MHandleMessage.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * MHandleMessage mixin provides a handleMessage method for most common use cases in message handling.\n * Holds a list of messages\n *\n * @author Tobias Bräutigam\n * @since 0.11.0\n */\n\nqx.Mixin.define('cv.ui.MHandleMessage', {\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function() {\n    this._messages = new qx.data.Array();\n\n\n    // severities in order of importance -> more important\n    this._severities = ['low', 'normal', 'high', 'urgent'];\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    /**\n     * Maximum allowed messages\n     */\n    maxEntries: {\n      check: 'Number',\n      init: 50,\n      event: '_applyMaxEntries'\n    },\n\n    /**\n     * Current amount of messages\n     */\n    counter: {\n      check: 'Number',\n      init: 0,\n      event: 'changedCounter'\n    },\n\n    /**\n     * Highest severity of the messages\n     */\n    globalSeverity: {\n      check: ['low', 'normal', 'high', 'urgent'],\n      init: 'normal',\n      event: 'changedGlobalSeverity'\n    },\n\n    /**\n     * ID of the root element of this message handler (HTML attribute 'id' value)\n     */\n    rootElementId: {\n      check: 'String',\n      nullable: true\n    },\n\n    /**\n     * Pattern id the message elements IDs (suffix without is,\n     * e.g. messages get mes_1, mes_2, ... mes_ is the messageElementId)\n     */\n    messageElementId: {\n      check: 'String',\n      nullable: true\n    },\n\n    delegate: {\n      check: 'Object',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    _messages: null,\n    _severities: null,\n    _idCounter: 0,\n\n    getIdCounter: function () {\n      return this._idCounter;\n    },\n\n    getSeverities: function() {\n      return this._severities;\n    },\n\n    _updateHighestSeverity: function() {\n      // get the highest severity\n      let severityRank = -1;\n      this._messages.forEach(function(message) {\n        if (message.severity && this._severities.indexOf(message.severity) > severityRank) {\n          severityRank = this._severities.indexOf(message.severity);\n        }\n      }, this);\n      if (severityRank >= 0) {\n        this.setGlobalSeverity(this._severities[severityRank]);\n      } else {\n        this.resetGlobalSeverity();\n      }\n    },\n\n    getSeverityColor: function(severity) {\n      switch (severity) {\n        case 'urgent':\n          return '#FF0000';\n        case 'high':\n          return '#FF7900';\n        default:\n          return '#1C391C';\n      }\n    },\n\n    // property apply\n    _applyMaxEntries: function(value) {\n      if (this._messages.getLength() > value) {\n        this._messages.splice(this._messages.getLength() - value);\n      }\n      this._messages.setMaxEntries(value);\n    },\n\n    /**\n     * Handle messages from {@link cv.core.notifications.Router}\n     * @param message {Map}\n     * @param config {Map?} optional configuration of this message for the handler\n     */\n    handleMessage: function(message, config) {\n      const delegate = this.getDelegate() || {};\n      if (delegate.prepareMessage) {\n        delegate.prepareMessage(message, config);\n      }\n      let found = null;\n      const postHookPayload = {};\n      if (message.unique) {\n        // check if message is already shown\n        this._messages.some(function(msg, index) {\n          if (message.topic === msg.topic) {\n            // replace message\n            found = msg;\n            message.id = msg.id;\n            message.tooltip = this._getTooltip(message);\n            if (!Object.prototype.hasOwnProperty.call(message, 'deletable')) {\n              message.deletable = true;\n            }\n            if (cv.core.notifications.Router.evaluateCondition(message)) {\n              const changed = msg.severity !== message.severity;\n              this._messages.setItem(index, message);\n              postHookPayload.action = 'replaced';\n              if (changed) {\n                this._updateHighestSeverity();\n              }\n            } else {\n              const removedMessage = this._messages.removeAt(index);\n              postHookPayload.action = 'removed';\n              postHookPayload.message = removedMessage;\n              if (removedMessage.severity === this.getGlobalSeverity()) {\n                this._updateHighestSeverity();\n              }\n            }\n            // stop search\n            return true;\n          }\n          return false;\n        }, this);\n      }\n      if (!found) {\n        if (cv.core.notifications.Router.evaluateCondition(message)) {\n          message.id = this._idCounter;\n          this._idCounter++;\n          message.tooltip = this._getTooltip(message);\n          if (!Object.prototype.hasOwnProperty.call(message, 'deletable')) {\n            message.deletable = true;\n          }\n          if (this.getMaxEntries() > 0) {\n            if (this._messages.getLength() >= this.getMaxEntries()) {\n              this._messages.splice(0, this._messages.getLength() - this.getMaxEntries() + 1).forEach(this._disposeMap);\n            }\n          }\n          postHookPayload.action = 'added';\n          this._messages.push(message);\n          this._updateHighestSeverity();\n        }\n      } else if (this._list) {\n        // refresh list\n        this._list.update();\n      }\n      this.setCounter(this._messages.getLength());\n      if (delegate.postHandleMessage) {\n        delegate.postHandleMessage(message, config, postHookPayload);\n      }\n    },\n\n    /**\n     * Finds the message the tap event has been triggered on an returns\n     * an array [messageId, action], where action can be one of \"delete\", \"action\".\n     *\n     * @param ev {Event}\n     * @return {Array} [messageId, action]\n     */\n    getMessageIdFromEvent: function(ev) {\n      // lets find the real target\n      let target = ev.getTarget();\n      let deleteTarget = null;\n      let messageId = -1;\n      let id = target.getAttribute('id');\n      const rootId = this.getRootElementId();\n      const messageElementId = this.getMessageElementId();\n      while (!id || !id.startsWith(rootId)) {\n        if (target.classList.contains('delete')) {\n          deleteTarget = target;\n        }\n        if (id && id.startsWith(messageElementId)) {\n          // found the message container, get message id and stop\n          messageId = parseInt(id.replace(messageElementId, ''));\n          break;\n        }\n        target = target.parentNode;\n        if (!target) {\n          break;\n        }\n        id = target.getAttribute('id');\n      }\n      return [messageId, deleteTarget ? 'delete' : 'action'];\n    },\n\n    _onListTap: function(ev) {\n      const result = this.getMessageIdFromEvent(ev);\n      if (result[0] >= 0) {\n        if (result[1] === 'delete') {\n          this.deleteMessage(result[0], ev);\n        } else {\n          this.performAction(result[0], ev);\n        }\n      }\n    },\n\n    _getTooltip: function(message) {\n      let tooltip = message.severity;\n      if (message.actions) {\n        Object.getOwnPropertyNames(message.actions).forEach(function(type) {\n          if (message.actions[type].title) {\n            tooltip = message.actions[type].title;\n          }\n        });\n      }\n      return tooltip;\n    },\n\n    /**\n     * Delete all messages.\n     *\n     * @param force {Boolean} if false: only delete \"deletable\" messages, if true: delete all messages\n     */\n    clear: function(force) {\n      if (force) {\n        this._messages.removeAll();\n        this._idCounter = 0;\n      } else {\n        // collect all deletable messages\n        const deletable = this._messages.filter(function (message) {\n          return message.deletable === true;\n        }, this);\n        this._messages.exclude(deletable);\n      }\n      this._updateHighestSeverity();\n    },\n\n    getMessage: function(index) {\n      return this._messages.getItem(index);\n    },\n\n    getMessages: function() {\n      return this._messages;\n    },\n\n    /**\n     * Delete a message by index\n     * @param index {Number}\n     * @param ev {Event}\n     */\n    deleteMessage: function(index, ev) {\n      if (ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n      const message = this._messages.toArray().find(function (msg) {\n        return msg.id === index;\n      });\n      if (message && message.deletable === true) {\n        this._messages.remove(message);\n        if (message.severity === this.getGlobalSeverity()) {\n          this._updateHighestSeverity();\n        }\n        return true;\n      }\n      return false;\n    },\n\n    performAction: function(messageId, ev) {\n      const message = this.getMessage(messageId);\n      if (this._performAction && message) {\n        const res = this._performAction(message);\n        if (res === true) {\n          // skip\n          return;\n        }\n      }\n      if (!message || !message.actions) {\n        return;\n      }\n      Object.getOwnPropertyNames(message.actions).forEach(function(type) {\n        const typeActions = Array.isArray(message.actions[type]) ? message.actions[type] : [message.actions[type]];\n        typeActions.forEach(function(action) {\n          if (!action.needsConfirmation) {\n            const handler = cv.core.notifications.ActionRegistry.getActionHandler(type, action);\n            if (handler) {\n              handler.handleAction(ev);\n              if (action.deleteMessageAfterExecution) {\n                this.deleteMessage(messageId);\n              }\n            }\n          }\n        }, this);\n      }, this);\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this._disposeObjects('_messages');\n  }\n});\n"
  ]
}