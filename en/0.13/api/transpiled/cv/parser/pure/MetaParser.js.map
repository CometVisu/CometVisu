{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "members",
    "parse",
    "xml",
    "parseFiles",
    "querySelectorAll",
    "forEach",
    "parseIcons",
    "parseMappings",
    "parseStylings",
    "parseStatusBar",
    "parseStateNotifications",
    "parseTemplates",
    "files",
    "css",
    "js",
    "elem",
    "type",
    "getAttribute",
    "content",
    "push",
    "textContent",
    "cv",
    "Config",
    "configSettings",
    "pluginsToLoad",
    "warn",
    "length",
    "stylesToLoad",
    "concat",
    "scriptsToLoad",
    "icon",
    "__parseIconDefinition",
    "iconsFromConfig",
    "IconHandler",
    "getInstance",
    "insert",
    "name",
    "uri",
    "flavour",
    "color",
    "styling",
    "dynamic",
    "source",
    "mapping",
    "formula",
    "formulaSource",
    "Function",
    "subElements",
    "subElem",
    "origin",
    "childNodes",
    "value",
    "i",
    "v",
    "nodeType",
    "nodeName",
    "toLowerCase",
    "iconDefinition",
    "getIconElement",
    "definition",
    "trim",
    "isDefaultValue",
    "undefined",
    "defaultValue",
    "hasAttribute",
    "range",
    "parseFloat",
    "addMapping",
    "classnames",
    "addStyling",
    "code",
    "condition",
    "sPath",
    "window",
    "location",
    "pathname",
    "sPage",
    "substring",
    "lastIndexOf",
    "editMode",
    "testMode",
    "text",
    "search",
    "linkMatch",
    "linkRegex",
    "matches",
    "exec",
    "handled",
    "url",
    "URL",
    "href",
    "searchParams",
    "has",
    "get",
    "encodeURIComponent",
    "replace",
    "c",
    "charCodeAt",
    "toString",
    "match",
    "suffix",
    "middle",
    "indexOf",
    "replacement",
    "configFile",
    "footerElement",
    "document",
    "querySelector",
    "innerHTML",
    "parsePlugins",
    "nullIsUndefined",
    "x",
    "stateConfig",
    "target",
    "notifications",
    "Router",
    "getTarget",
    "ui",
    "NotificationCenter",
    "addressContainer",
    "config",
    "severity",
    "skipInitial",
    "deletable",
    "unique",
    "valueMapping",
    "addressMapping",
    "topic",
    "iconClasses",
    "titleElem",
    "titleTemplate",
    "messageElem",
    "messageTemplate",
    "conditionElem",
    "addresses",
    "parser",
    "pure",
    "WidgetParser",
    "makeAddressList",
    "getOwnPropertyNames",
    "address",
    "prototype",
    "hasOwnProperty",
    "call",
    "addressConfig",
    "assign",
    "registerStateUpdateHandler",
    "__loadQueue",
    "data",
    "Array",
    "Promise",
    "done",
    "reject",
    "check",
    "templates",
    "templateName",
    "log",
    "Logger",
    "debug",
    "ref",
    "areq",
    "io",
    "request",
    "Xhr",
    "set",
    "accept",
    "cache",
    "forceReload",
    "addListenerOnce",
    "e",
    "req",
    "addTemplate",
    "getResponseText",
    "remove",
    "getUrl",
    "addListener",
    "message",
    "title",
    "locale",
    "Manager",
    "tr",
    "dispatchMessage",
    "send",
    "cleaned",
    "MetaParser"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/parser/pure/MetaParser.js"
  ],
  "sourcesContent": [
    "/* MetaParser.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.parser.pure.MetaParser', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    async parse(xml) {\n      // parse external files\n      this.parseFiles(xml);\n\n      // parse the icons\n      xml.querySelectorAll('meta > icons icon-definition').forEach(this.parseIcons, this);\n\n      // then the mappings\n      xml.querySelectorAll('meta > mappings mapping').forEach(this.parseMappings, this);\n\n      // then the stylings\n      xml.querySelectorAll('meta > stylings styling').forEach(this.parseStylings, this);\n\n      // then the status bar\n      this.parseStatusBar(xml);\n\n      this.parseStateNotifications(xml);\n\n      await this.parseTemplates(xml);\n    },\n\n    parseFiles(xml) {\n      const files = {\n        css: [],\n        js: []\n      };\n\n      xml.querySelectorAll('meta > files file').forEach(function (elem) {\n        const type = elem.getAttribute('type');\n        const content = elem.getAttribute('content');\n        switch (type) {\n          case 'css':\n            files.css.push(elem.textContent);\n            break;\n\n          case 'js':\n            if (content === 'plugin') {\n              cv.Config.configSettings.pluginsToLoad.push(elem.textContent);\n            } else {\n              files.js.push(elem.textContent);\n            }\n            break;\n\n          default:\n            this.warn('ignoring unknown file type', type);\n            break;\n        }\n      }, this);\n      if (files.css.length > 0) {\n        cv.Config.configSettings.stylesToLoad = cv.Config.configSettings.stylesToLoad.concat(files.css);\n      }\n      if (files.js.length > 0) {\n        cv.Config.configSettings.scriptsToLoad = cv.Config.configSettings.scriptsToLoad.concat(files.js);\n      }\n    },\n\n    parseIcons(elem) {\n      let icon = this.__parseIconDefinition(elem);\n      cv.Config.configSettings.iconsFromConfig.push(icon);\n      cv.IconHandler.getInstance().insert(\n        icon.name,\n        icon.uri,\n        icon.type,\n        icon.flavour,\n        icon.color,\n        icon.styling,\n        icon.dynamic,\n        icon.source\n      );\n    },\n\n    parseMappings(elem) {\n      const name = elem.getAttribute('name');\n      const mapping = {};\n      const formula = elem.querySelectorAll('formula');\n      if (formula.length > 0) {\n        mapping.formulaSource = formula[0].textContent;\n        mapping.formula = new Function('x', 'var y;' + mapping.formulaSource + '; return y;');\n      }\n      const subElements = elem.querySelectorAll('entry');\n      subElements.forEach(function (subElem) {\n        const origin = subElem.childNodes;\n        const value = [];\n        for (let i = 0; i < origin.length; i++) {\n          const v = origin[i];\n          if (v && v.nodeType === 1 && v.nodeName.toLowerCase() === 'icon') {\n            const iconDefinition = this.__parseIconDefinition(v);\n            let icon = cv.IconHandler.getInstance().getIconElement(\n              iconDefinition.name,\n              iconDefinition.type,\n              iconDefinition.flavour,\n              iconDefinition.color,\n              iconDefinition.styling,\n              iconDefinition['class']\n            );\n\n            icon.definition = iconDefinition;\n            value.push(icon);\n          } else if (v && v.nodeType === 3 && v.textContent.trim().length) {\n            value.push(v.textContent.trim());\n          }\n        }\n        // check for default entry\n        let isDefaultValue = subElem.getAttribute('default');\n        if (isDefaultValue !== undefined) {\n          isDefaultValue = isDefaultValue === 'true';\n        } else {\n          isDefaultValue = false;\n        }\n        // now set the mapped values\n        if (subElem.getAttribute('value')) {\n          mapping[subElem.getAttribute('value')] = value.length === 1 ? value[0] : value;\n          if (isDefaultValue) {\n            mapping.defaultValue = subElem.getAttribute('value');\n          }\n        } else if (subElem.hasAttribute('range_min')) {\n          if (!mapping.range) {\n            mapping.range = {};\n          }\n          mapping.range[parseFloat(subElem.getAttribute('range_min'))] = [\n            parseFloat(subElem.getAttribute('range_max')),\n            value\n          ];\n\n          if (isDefaultValue) {\n            mapping.defaultValue = parseFloat(subElem.getAttribute('range_min'));\n          }\n        } else if (subElements.length === 1) {\n          // use as catchall mapping\n          mapping['*'] = value.length === 1 ? value[0] : value;\n        }\n      }, this);\n      cv.Config.addMapping(name, mapping);\n    },\n\n    parseStylings(elem) {\n      const name = elem.getAttribute('name');\n      let classnames = '';\n      const styling = {};\n      elem.querySelectorAll('entry').forEach(function (subElem) {\n        classnames += subElem.textContent + ' ';\n        // check for default entry\n        let isDefaultValue = subElem.getAttribute('default');\n        if (isDefaultValue !== undefined) {\n          isDefaultValue = isDefaultValue === 'true';\n        } else {\n          isDefaultValue = false;\n        }\n        // now set the styling values\n        if (subElem.getAttribute('value')) {\n          styling[subElem.getAttribute('value')] = subElem.textContent;\n          if (isDefaultValue) {\n            styling.defaultValue = subElem.getAttribute('value');\n          }\n        } else {\n          // a range\n          if (!styling.range) {\n            styling.range = {};\n          }\n          styling.range[parseFloat(subElem.getAttribute('range_min'))] = [\n            parseFloat(subElem.getAttribute('range_max')),\n            subElem.textContent\n          ];\n\n          if (isDefaultValue) {\n            styling.defaultValue = parseFloat(subElem.getAttribute('range_min'));\n          }\n        }\n      }, this);\n      styling.classnames = classnames.trim();\n      cv.Config.addStyling(name, styling);\n    },\n\n    parseStatusBar(xml) {\n      let code = '';\n      xml.querySelectorAll('meta > statusbar status').forEach(function (elem) {\n        const condition = elem.getAttribute('condition');\n        let extend = elem.getAttribute('hrefextend');\n        const sPath = window.location.pathname;\n        const sPage = sPath.substring(sPath.lastIndexOf('/') + 1);\n\n        // @TODO: make this match once the new editor is finished-ish.\n        const editMode = sPage === 'edit_config.html';\n\n        // skip this element if it's edit-only and we are non-edit, or the other\n        // way\n        // round\n        if (editMode && condition === '!edit') {\n          return;\n        }\n        if (!editMode && condition === 'edit') {\n          return;\n        }\n\n        if (cv.Config.testMode && condition === '!testMode') {\n          return;\n        }\n        if (!cv.Config.testMode && condition === 'testMode') {\n          return;\n        }\n\n        let text = elem.textContent;\n        let search = '';\n\n        // compability change to make existing customer configurations work with the new manager links\n        // this replaces all document links to old manager tools with the new ones\n        let linkMatch;\n        const linkRegex = /href=\"([^\"]+)\"/gm;\n        const matches = [];\n        // eslint-disable-next-line no-cond-assign\n        while ((linkMatch = linkRegex.exec(text))) {\n          matches.push(linkMatch);\n        }\n        let handled = false;\n        const url = new URL(window.location.href);\n        if (url.searchParams.has('config')) {\n          search = url.searchParams.get('config');\n          search = encodeURIComponent(search).replace(/[!'()*]/g, function (c) {\n            return '%' + c.charCodeAt(0).toString(16);\n          });\n        }\n        matches.forEach(match => {\n          switch (match[1]) {\n            case 'manager.php':\n              text = text.replace(match[0], 'href=\"?manager=1\" onclick=\"showManager(); return false;\"');\n\n              handled = true;\n              break;\n\n            case 'check_config.php':\n              text = text.replace(\n                match[0],\n                'href=\"#\" onclick=\"qx.core.Init.getApplication().validateConfig(\\'' + search + '\\')\"'\n              );\n\n              handled = true;\n              break;\n\n            case 'editor/':\n            case 'editor': {\n              const suffix = search ? '_' + search : '';\n              text = text.replace(\n                match[0],\n                'href=\"' +\n                  window.location.pathname +\n                  '?config=' +\n                  search +\n                  '&manager=1&open=visu_config' +\n                  suffix +\n                  '.xml\" onclick=\"showManager(\\'open\\', \\'visu_config' +\n                  suffix +\n                  '.xml\\')\"'\n              );\n\n              handled = true;\n              break;\n            }\n          }\n        });\n\n        if (handled) {\n          // this overrides the extends\n          extend = null;\n        }\n        switch (extend) {\n          case 'all': // append all parameters\n            search = window.location.search.replace(/\\$/g, '$$$$');\n            text = text.replace(/(href=\"[^\"]*)(\")/g, '$1' + search + '$2');\n            break;\n          case 'config': {\n            // append config file info\n            search = window.location.search.replace(/\\$/g, '$$$$');\n            search = search.replace(/.*(config=[^&]*).*|.*/, '$1');\n\n            const middle = text.replace(/.*href=\"([^\"]*)\".*/g, '{$1}');\n            if (middle.indexOf('?') > 0) {\n              search = '&' + search;\n            } else {\n              search = '?' + search;\n            }\n\n            text = text.replace(/(href=\"[^\"]*)(\")/g, '$1' + search + '$2');\n            break;\n          }\n\n          case 'action': {\n            search = window.location.search.replace(/\\$/g, '$$$$');\n            search = search.replace(/.*config=([^&]*).*|.*/, '$1');\n            const match = /cv-action=\"([\\w]+)\"/.exec(text);\n            if (match) {\n              let replacement = 'href=\"#\" ';\n              switch (match[1]) {\n                case 'validate':\n                  replacement += 'onclick=\"qx.core.Init.getApplication().validateConfig(\\'' + search + '\\')\"';\n                  break;\n\n                case 'edit': {\n                  const configFile = search ? 'visu_config_' + search + '.xml' : 'visu_config.xml';\n                  replacement =\n                    'href=\"' +\n                    window.location.pathname +\n                    '?config=' +\n                    search +\n                    '&manager=1&open=' +\n                    configFile +\n                    '\" onclick=\"showManager(\\'open\\', \\'' +\n                    configFile +\n                    '\\'); return false;\"';\n                  break;\n                }\n              }\n\n              text = text.replace(match[0], replacement);\n            }\n            break;\n          }\n        }\n\n        code += text;\n      }, this);\n      const footerElement = document.querySelector('.footer');\n      footerElement.innerHTML += code;\n    },\n\n    parsePlugins(xml) {\n      const pluginsToLoad = [];\n      xml.querySelectorAll('meta > plugins plugin').forEach(function (elem) {\n        const name = elem.getAttribute('name');\n        if (name) {\n          pluginsToLoad.push('plugin-' + name);\n        }\n      });\n      return pluginsToLoad;\n    },\n\n    __parseIconDefinition(elem) {\n      const nullIsUndefined = x => (x === null ? undefined : x);\n\n      return {\n        name: nullIsUndefined(elem.getAttribute('name')),\n        uri: nullIsUndefined(elem.getAttribute('uri')),\n        type: nullIsUndefined(elem.getAttribute('type')),\n        flavour: nullIsUndefined(elem.getAttribute('flavour')),\n        color: nullIsUndefined(elem.getAttribute('color')),\n        styling: nullIsUndefined(elem.getAttribute('styling')),\n        dynamic: nullIsUndefined(elem.getAttribute('dynamic')),\n        class: nullIsUndefined(elem.getAttribute('class')),\n        source: 'config'\n      };\n    },\n\n    parseStateNotifications(xml) {\n      const stateConfig = {};\n      xml.querySelectorAll('meta > notifications state-notification').forEach(function (elem) {\n        const target =\n          cv.core.notifications.Router.getTarget(elem.getAttribute('target')) || cv.ui.NotificationCenter.getInstance();\n\n        const addressContainer = elem.querySelector('addresses');\n\n        const config = {\n          target: target,\n          severity: elem.getAttribute('severity'),\n          skipInitial: elem.getAttribute('skip-initial') !== 'false',\n          deletable: elem.getAttribute('deletable') !== 'false',\n          unique: elem.getAttribute('unique') === 'true',\n          valueMapping: addressContainer.getAttribute('value-mapping'),\n          addressMapping: addressContainer.getAttribute('address-mapping')\n        };\n\n        const name = elem.getAttribute('name');\n        if (name) {\n          config.topic = 'cv.state.' + name;\n        }\n        const icon = elem.getAttribute('icon');\n        if (icon) {\n          config.icon = icon;\n          const iconClasses = elem.getAttribute('icon-classes');\n          if (iconClasses) {\n            config.iconClasses = iconClasses;\n          }\n        }\n\n        // templates\n        const titleElem = elem.querySelector('title-template');\n        if (titleElem) {\n          config.titleTemplate = titleElem.innerHTML;\n        }\n        const messageElem = elem.querySelector('message-template');\n        if (messageElem) {\n          config.messageTemplate = messageElem.innerHTML;\n        }\n\n        // condition\n        const conditionElem = elem.querySelector('condition');\n        let condition = conditionElem.textContent;\n        if (condition === 'true') {\n          condition = true;\n        } else if (condition === 'false') {\n          condition = false;\n        }\n        config.condition = condition;\n\n        const addresses = cv.parser.pure.WidgetParser.makeAddressList(addressContainer);\n        // addresses\n        Object.getOwnPropertyNames(addresses).forEach(function (address) {\n          if (!Object.prototype.hasOwnProperty.call(stateConfig, address)) {\n            stateConfig[address] = [];\n          }\n          const addressConfig = Object.assign({}, config);\n          addressConfig.addressConfig = addresses[address];\n          stateConfig[address].push(addressConfig);\n        });\n      });\n      cv.core.notifications.Router.getInstance().registerStateUpdateHandler(stateConfig);\n    },\n\n    /**\n     * Parses meta template definitions and add them to the WidgetParser\n     * @param xml {HTMLElement}\n     */\n    async parseTemplates(xml) {\n      const __loadQueue = new qx.data.Array();\n\n      return new Promise((done, reject) => {\n        const check = function () {\n          if (__loadQueue.length === 0 && done) {\n            done();\n          }\n        };\n        const templates = xml.querySelectorAll('meta > templates template');\n        if (templates.length === 0) {\n          done();\n        } else {\n          templates.forEach(function (elem) {\n            const templateName = elem.getAttribute('name');\n            qx.log.Logger.debug(this, 'loading template:', templateName);\n            const ref = elem.getAttribute('ref');\n            if (ref) {\n              // load template fom external file\n              const areq = new qx.io.request.Xhr(ref);\n              __loadQueue.push(ref);\n              qx.log.Logger.debug(this, 'loading template from file:', ref);\n              areq.set({\n                accept: 'text/plain',\n                cache: !cv.Config.forceReload\n              });\n\n              areq.addListenerOnce('success', e => {\n                const req = e.getTarget();\n                cv.parser.pure.WidgetParser.addTemplate(\n                  templateName,\n                  // templates can only have one single root element, so we wrap it here\n                  '<root>' + req.getResponseText() + '</root>'\n                );\n\n                __loadQueue.remove(areq.getUrl());\n                qx.log.Logger.debug(this, 'DONE loading template from file:', ref);\n\n                check();\n              });\n              areq.addListener('statusError', () => {\n                const message = {\n                  topic: 'cv.config.error',\n                  title: qx.locale.Manager.tr('Template loading error'),\n                  severity: 'urgent',\n                  deletable: true,\n                  message: qx.locale.Manager.tr('Template \\'%1\\' could not be loaded from \\'%2\\'.', templateName, ref)\n                };\n\n                cv.core.notifications.Router.dispatchMessage(message.topic, message);\n\n                reject();\n              });\n              areq.send();\n            } else {\n              const cleaned = elem.innerHTML.replace(/\\n\\s*/g, '').trim();\n              cv.parser.pure.WidgetParser.addTemplate(\n                templateName,\n                // templates can only have one single root element, so we wrap it here\n                '<root>' + cleaned + '</root>'\n              );\n            }\n          }, this);\n          check();\n        }\n      });\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}