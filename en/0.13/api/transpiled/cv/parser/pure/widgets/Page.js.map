{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/parser/pure/widgets/Page.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "parse",
    "page",
    "path",
    "flavour",
    "pageType",
    "storagePath",
    "cv",
    "parser",
    "pure",
    "WidgetParser",
    "getStoragePath",
    "addresses",
    "getAttribute",
    "src",
    "data",
    "Model",
    "getInstance",
    "addAddress",
    "READ",
    "name",
    "backdrop",
    "showtopnavigation",
    "showfooter",
    "shownavbar",
    "top",
    "bottom",
    "left",
    "right",
    "Array",
    "from",
    "children",
    "filter",
    "m",
    "matches",
    "forEach",
    "elem",
    "pos",
    "value",
    "bindClickToWidget",
    "Config",
    "configSettings",
    "wstyle",
    "layout",
    "parseLayout",
    "backdropType",
    "substring",
    "length",
    "setWidgetData",
    "showTopNavigation",
    "showFooter",
    "showNavbarTop",
    "showNavbarBottom",
    "showNavbarLeft",
    "showNavbarRight",
    "backdropAlign",
    "size",
    "address",
    "linkVisible",
    "$$type",
    "parseAddress",
    "parseFormat",
    "parseChildren",
    "linkData",
    "classes",
    "setWidgetLayout",
    "defer",
    "addHandler",
    "widgets",
    "Page"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Page.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n *\n */\nqx.Class.define('cv.parser.pure.widgets.Page', {\n  type: 'static',\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n\n    parse: function(page, path, flavour, pageType) {\n      const storagePath = cv.parser.pure.WidgetParser.getStoragePath(page, path);\n      const addresses = {};\n      if (page.getAttribute('ga')) {\n        const src = page.getAttribute('ga');\n        cv.data.Model.getInstance().addAddress(src, storagePath);\n        addresses[src] = [ 'DPT:1.001', cv.data.Model.READ ];\n      }\n\n      const name = page.getAttribute('name');\n      pageType = page.getAttribute('type') || 'text'; //text, 2d or 3d\n      const backdrop = page.getAttribute('backdrop');\n      const showtopnavigation = page.getAttribute('showtopnavigation') ? page.getAttribute('showtopnavigation') === 'true' : null;\n      const showfooter = page.getAttribute('showfooter') ? page.getAttribute('showfooter') === 'true' : true;\n      // make sure the type has the correct value as we need to use it ass CSS class\n      switch (pageType) {\n        case '2d':\n        case '3d':\n          // do nothing, type has correct value\n          break;\n        default:\n          pageType = 'text';\n          break;\n      }\n\n      // automatically set the navbars if not set in the config file\n      const shownavbar = {\n        top: path === 'id' ? false : null,\n        bottom: path === 'id' ? false : null,\n        left: path === 'id' ? false : null,\n        right: path === 'id' ? false : null\n      };\n      Array.from(page.children).filter(function(m) {\n        return m.matches('navbar');\n      }).forEach(function(elem) {\n        shownavbar[elem.getAttribute('position') || 'left'] = true;\n      });\n      // overwrite default when set manually in the config\n      ['top', 'left', 'right', 'bottom'].forEach(function(pos) {\n        if (shownavbar[pos] !== null) {\n          // do not override current values\n          return;\n        }\n        const value = page.getAttribute('shownavbar-' + pos);\n        if (typeof value === 'string') {\n          shownavbar[pos] = value === 'true';\n        }\n      }, this);\n      let bindClickToWidget = cv.Config.configSettings.bindClickToWidget;\n      if (page.getAttribute('bind_click_to_widget')) {\n        bindClickToWidget = page.getAttribute('bind_click_to_widget')==='true';\n      }\n      if (page.getAttribute('flavour')) {\n        flavour = page.getAttribute('flavour');// sub design choice\n      }\n      let wstyle = ''; // widget style\n      if (page.getAttribute('align')) {\n        wstyle += 'text-align:' + page.getAttribute('align') + ';';\n      }\n      if (wstyle !== '') {\n        wstyle = 'style=\"' + wstyle + '\"';\n      }\n\n      const layout = cv.parser.pure.WidgetParser.parseLayout(Array.from(page.children).filter(function (m) {\n        return m.matches('layout');\n      })[0]);\n      let backdropType = null;\n      if (backdrop) {\n        backdropType = backdrop.substring(backdrop.length - 4) === '.svg' ? 'embed' : 'img';\n      }\n\n      const data = cv.data.Model.getInstance().setWidgetData(storagePath, {\n        path: storagePath,\n        name: name,\n        pageType: pageType,\n        showTopNavigation: showtopnavigation,\n        showFooter: showfooter,\n        showNavbarTop: shownavbar.top,\n        showNavbarBottom: shownavbar.bottom,\n        showNavbarLeft: shownavbar.left,\n        showNavbarRight: shownavbar.right,\n        backdropAlign: pageType === '2d' ? (page.getAttribute('backdropalign') || '50% 50%') : null,\n        size: page.getAttribute('size') || null,\n        address: addresses,\n        linkVisible: page.getAttribute('visible') ? page.getAttribute('visible') === 'true' : true,\n        flavour: flavour || null,\n        $$type: 'page',\n        backdrop: backdrop || null,\n        backdropType: backdropType\n      });\n      cv.parser.pure.WidgetParser.parseAddress(page, path);\n      cv.parser.pure.WidgetParser.parseFormat(page, path);\n      // this has to be called manually to allow inheritance of the flavour, pageType values\n      cv.parser.pure.WidgetParser.parseChildren(page, path, flavour, pageType);\n      if (data.linkVisible === true) {\n        const linkData = cv.data.Model.getInstance().setWidgetData(path, {\n          $$type: 'pagelink',\n          path: path,\n          name: name,\n          classes: cv.parser.pure.WidgetParser.setWidgetLayout(page, path) || '',\n          layout: layout || null,\n          address: addresses,\n          pageType: pageType,\n          wstyle: wstyle || '',\n          bindClickToWidget: bindClickToWidget\n        });\n        return [data, linkData];\n      } \n        return data;\n    }\n  },\n\n  defer: function(statics) {\n    cv.parser.pure.WidgetParser.addHandler('page', statics);\n  }\n});\n"
  ]
}