{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "parse",
    "page",
    "path",
    "flavour",
    "pageType",
    "storagePath",
    "cv",
    "parser",
    "pure",
    "WidgetParser",
    "getStoragePath",
    "addresses",
    "src",
    "getAttribute",
    "_page$getAttribute",
    "_page$getAttribute2",
    "data",
    "Model",
    "getInstance",
    "addAddress",
    "transform",
    "clients",
    "mode",
    "READ",
    "name",
    "backdrop",
    "showtopnavigation",
    "showfooter",
    "shownavbar",
    "top",
    "bottom",
    "left",
    "right",
    "Array",
    "from",
    "children",
    "filter",
    "m",
    "matches",
    "forEach",
    "elem",
    "pos",
    "value",
    "bindClickToWidget",
    "Config",
    "configSettings",
    "wstyle",
    "layout",
    "parseLayout",
    "backdropType",
    "substring",
    "length",
    "setWidgetData",
    "showTopNavigation",
    "showFooter",
    "showNavbarTop",
    "showNavbarBottom",
    "showNavbarLeft",
    "showNavbarRight",
    "backdropAlign",
    "size",
    "address",
    "linkVisible",
    "$$type",
    "parseAddress",
    "parseFormat",
    "parseChildren",
    "linkData",
    "classes",
    "setWidgetLayout",
    "defer",
    "addHandler",
    "widgets",
    "Page"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/parser/pure/widgets/Page.js"
  ],
  "sourcesContent": [
    "/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.parser.pure.widgets.Page', {\n  type: 'static',\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n    parse(page, path, flavour, pageType) {\n      const storagePath = cv.parser.pure.WidgetParser.getStoragePath(page, path);\n\n      const addresses = {};\n      const src = page.getAttribute('ga');\n      if (src) {\n        cv.data.Model.getInstance().addAddress(src, storagePath);\n        const transform = page.getAttribute('transform') ?? 'DPT:1.001';\n        const clients = page.getAttribute('clients') ?? '';\n        addresses[src] = { transform, mode: cv.data.Model.READ, clients };\n      }\n\n      const name = page.getAttribute('name');\n      pageType = page.getAttribute('type') || 'text'; //text, 2d or 3d\n      const backdrop = page.getAttribute('backdrop');\n      const showtopnavigation = page.getAttribute('showtopnavigation')\n        ? page.getAttribute('showtopnavigation') === 'true'\n        : null;\n      const showfooter = page.getAttribute('showfooter') ? page.getAttribute('showfooter') === 'true' : true;\n      // make sure the type has the correct value as we need to use it ass CSS class\n      switch (pageType) {\n        case '2d':\n        case '3d':\n          // do nothing, type has correct value\n          break;\n        default:\n          pageType = 'text';\n          break;\n      }\n\n      // automatically set the navbars if not set in the config file\n      const shownavbar = {\n        top: path === 'id' ? false : null,\n        bottom: path === 'id' ? false : null,\n        left: path === 'id' ? false : null,\n        right: path === 'id' ? false : null\n      };\n\n      Array.from(page.children)\n        .filter(function (m) {\n          return m.matches('navbar');\n        })\n        .forEach(function (elem) {\n          shownavbar[elem.getAttribute('position') || 'left'] = true;\n        });\n      // overwrite default when set manually in the config\n      ['top', 'left', 'right', 'bottom'].forEach(function (pos) {\n        if (shownavbar[pos] !== null) {\n          // do not override current values\n          return;\n        }\n        const value = page.getAttribute('shownavbar-' + pos);\n        if (typeof value === 'string') {\n          shownavbar[pos] = value === 'true';\n        }\n      }, this);\n      let bindClickToWidget = cv.Config.configSettings.bindClickToWidget;\n      if (page.getAttribute('bind_click_to_widget')) {\n        bindClickToWidget = page.getAttribute('bind_click_to_widget') === 'true';\n      }\n      if (page.getAttribute('flavour')) {\n        flavour = page.getAttribute('flavour'); // sub design choice\n      }\n      let wstyle = ''; // widget style\n      if (page.getAttribute('align')) {\n        wstyle += 'text-align:' + page.getAttribute('align') + ';';\n      }\n      if (wstyle !== '') {\n        wstyle = 'style=\"' + wstyle + '\"';\n      }\n\n      const layout = cv.parser.pure.WidgetParser.parseLayout(\n        Array.from(page.children).filter(function (m) {\n          return m.matches('layout');\n        })[0]\n      );\n\n      let backdropType = null;\n      if (backdrop) {\n        backdropType = backdrop.substring(backdrop.length - 4) === '.svg' ? 'embed' : 'img';\n      }\n\n      const data = cv.data.Model.getInstance().setWidgetData(storagePath, {\n        path: storagePath,\n        name: name,\n        pageType: pageType,\n        showTopNavigation: showtopnavigation,\n        showFooter: showfooter,\n        showNavbarTop: shownavbar.top,\n        showNavbarBottom: shownavbar.bottom,\n        showNavbarLeft: shownavbar.left,\n        showNavbarRight: shownavbar.right,\n        backdropAlign: pageType === '2d' ? page.getAttribute('backdropalign') || '50% 50%' : null,\n        size: page.getAttribute('size') || null,\n        address: addresses,\n        linkVisible: page.getAttribute('visible') ? page.getAttribute('visible') === 'true' : true,\n        flavour: flavour || null,\n        $$type: 'page',\n        backdrop: backdrop || null,\n        backdropType: backdropType\n      });\n\n      cv.parser.pure.WidgetParser.parseAddress(page, path);\n      cv.parser.pure.WidgetParser.parseFormat(page, path);\n      // this has to be called manually to allow inheritance of the flavour, pageType values\n      cv.parser.pure.WidgetParser.parseChildren(page, path, flavour, pageType);\n      if (data.linkVisible === true) {\n        const linkData = cv.data.Model.getInstance().setWidgetData(path, {\n          $$type: 'pagelink',\n          path: path,\n          name: name,\n          classes: cv.parser.pure.WidgetParser.setWidgetLayout(page, path) || '',\n          layout: layout || null,\n          address: addresses,\n          pageType: pageType,\n          wstyle: wstyle || '',\n          bindClickToWidget: bindClickToWidget\n        });\n\n        return [data, linkData];\n      }\n      return data;\n    }\n  },\n\n  defer(statics) {\n    cv.parser.pure.WidgetParser.addHandler('page', statics);\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}