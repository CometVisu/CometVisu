{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "parse",
    "page",
    "path",
    "flavour",
    "pageType",
    "storagePath",
    "cv",
    "parser",
    "pure",
    "WidgetParser",
    "getStoragePath",
    "addresses",
    "getAttribute",
    "src",
    "data",
    "Model",
    "getInstance",
    "addAddress",
    "READ",
    "name",
    "backdrop",
    "showtopnavigation",
    "showfooter",
    "shownavbar",
    "top",
    "bottom",
    "left",
    "right",
    "Array",
    "from",
    "children",
    "filter",
    "m",
    "matches",
    "forEach",
    "elem",
    "pos",
    "value",
    "bindClickToWidget",
    "Config",
    "configSettings",
    "wstyle",
    "layout",
    "parseLayout",
    "backdropType",
    "substring",
    "length",
    "setWidgetData",
    "showTopNavigation",
    "showFooter",
    "showNavbarTop",
    "showNavbarBottom",
    "showNavbarLeft",
    "showNavbarRight",
    "backdropAlign",
    "size",
    "address",
    "linkVisible",
    "$$type",
    "parseAddress",
    "parseFormat",
    "parseChildren",
    "linkData",
    "classes",
    "setWidgetLayout",
    "defer",
    "addHandler",
    "widgets",
    "Page"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/parser/pure/widgets/Page.js"
  ],
  "sourcesContent": [
    "/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.parser.pure.widgets.Page', {\n  type: 'static',\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n    parse(page, path, flavour, pageType) {\n      const storagePath = cv.parser.pure.WidgetParser.getStoragePath(page, path);\n\n      const addresses = {};\n      if (page.getAttribute('ga')) {\n        const src = page.getAttribute('ga');\n        cv.data.Model.getInstance().addAddress(src, storagePath);\n        addresses[src] = ['DPT:1.001', cv.data.Model.READ];\n      }\n\n      const name = page.getAttribute('name');\n      pageType = page.getAttribute('type') || 'text'; //text, 2d or 3d\n      const backdrop = page.getAttribute('backdrop');\n      const showtopnavigation = page.getAttribute('showtopnavigation')\n        ? page.getAttribute('showtopnavigation') === 'true'\n        : null;\n      const showfooter = page.getAttribute('showfooter') ? page.getAttribute('showfooter') === 'true' : true;\n      // make sure the type has the correct value as we need to use it ass CSS class\n      switch (pageType) {\n        case '2d':\n        case '3d':\n          // do nothing, type has correct value\n          break;\n        default:\n          pageType = 'text';\n          break;\n      }\n\n      // automatically set the navbars if not set in the config file\n      const shownavbar = {\n        top: path === 'id' ? false : null,\n        bottom: path === 'id' ? false : null,\n        left: path === 'id' ? false : null,\n        right: path === 'id' ? false : null\n      };\n\n      Array.from(page.children)\n        .filter(function (m) {\n          return m.matches('navbar');\n        })\n        .forEach(function (elem) {\n          shownavbar[elem.getAttribute('position') || 'left'] = true;\n        });\n      // overwrite default when set manually in the config\n      ['top', 'left', 'right', 'bottom'].forEach(function (pos) {\n        if (shownavbar[pos] !== null) {\n          // do not override current values\n          return;\n        }\n        const value = page.getAttribute('shownavbar-' + pos);\n        if (typeof value === 'string') {\n          shownavbar[pos] = value === 'true';\n        }\n      }, this);\n      let bindClickToWidget = cv.Config.configSettings.bindClickToWidget;\n      if (page.getAttribute('bind_click_to_widget')) {\n        bindClickToWidget = page.getAttribute('bind_click_to_widget') === 'true';\n      }\n      if (page.getAttribute('flavour')) {\n        flavour = page.getAttribute('flavour'); // sub design choice\n      }\n      let wstyle = ''; // widget style\n      if (page.getAttribute('align')) {\n        wstyle += 'text-align:' + page.getAttribute('align') + ';';\n      }\n      if (wstyle !== '') {\n        wstyle = 'style=\"' + wstyle + '\"';\n      }\n\n      const layout = cv.parser.pure.WidgetParser.parseLayout(\n        Array.from(page.children).filter(function (m) {\n          return m.matches('layout');\n        })[0]\n      );\n\n      let backdropType = null;\n      if (backdrop) {\n        backdropType = backdrop.substring(backdrop.length - 4) === '.svg' ? 'embed' : 'img';\n      }\n\n      const data = cv.data.Model.getInstance().setWidgetData(storagePath, {\n        path: storagePath,\n        name: name,\n        pageType: pageType,\n        showTopNavigation: showtopnavigation,\n        showFooter: showfooter,\n        showNavbarTop: shownavbar.top,\n        showNavbarBottom: shownavbar.bottom,\n        showNavbarLeft: shownavbar.left,\n        showNavbarRight: shownavbar.right,\n        backdropAlign: pageType === '2d' ? page.getAttribute('backdropalign') || '50% 50%' : null,\n        size: page.getAttribute('size') || null,\n        address: addresses,\n        linkVisible: page.getAttribute('visible') ? page.getAttribute('visible') === 'true' : true,\n        flavour: flavour || null,\n        $$type: 'page',\n        backdrop: backdrop || null,\n        backdropType: backdropType\n      });\n\n      cv.parser.pure.WidgetParser.parseAddress(page, path);\n      cv.parser.pure.WidgetParser.parseFormat(page, path);\n      // this has to be called manually to allow inheritance of the flavour, pageType values\n      cv.parser.pure.WidgetParser.parseChildren(page, path, flavour, pageType);\n      if (data.linkVisible === true) {\n        const linkData = cv.data.Model.getInstance().setWidgetData(path, {\n          $$type: 'pagelink',\n          path: path,\n          name: name,\n          classes: cv.parser.pure.WidgetParser.setWidgetLayout(page, path) || '',\n          layout: layout || null,\n          address: addresses,\n          pageType: pageType,\n          wstyle: wstyle || '',\n          bindClickToWidget: bindClickToWidget\n        });\n\n        return [data, linkData];\n      }\n      return data;\n    }\n  },\n\n  defer(statics) {\n    cv.parser.pure.WidgetParser.addHandler('page', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}