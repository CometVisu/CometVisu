{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "__handlers",
    "lookupM",
    "lookupS",
    "model",
    "cv",
    "data",
    "Model",
    "getInstance",
    "__templates",
    "getTemplates",
    "addTemplate",
    "name",
    "templateData",
    "addHandler",
    "tagName",
    "handler",
    "toLowerCase",
    "getHandler",
    "unknown",
    "renderTemplates",
    "rootPage",
    "querySelectorAll",
    "forEach",
    "elem",
    "templateName",
    "getAttribute",
    "variables",
    "Array",
    "prototype",
    "call",
    "children",
    "variable",
    "innerHTML",
    "Object",
    "hasOwnProperty",
    "renderedString",
    "bom",
    "Template",
    "render",
    "replace",
    "trim",
    "helperNode",
    "ownerDocument",
    "createElement",
    "substring",
    "length",
    "replacement",
    "firstElementChild",
    "next",
    "nextElementSibling",
    "parent",
    "parentNode",
    "replaceChild",
    "insertBefore",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "tag",
    "nodeName",
    "parser",
    "result",
    "log",
    "Logger",
    "debug",
    "parseBasicElement",
    "element",
    "setWidgetData",
    "$$type",
    "pure",
    "WidgetParser",
    "getElementType",
    "parseElement",
    "mappings",
    "createDefaultWidget",
    "key",
    "map",
    "value",
    "undefined",
    "transform",
    "target",
    "parseStyling",
    "__getAttributeToPropertyMappings",
    "getAttributeToPropertyMappings",
    "getDefaultClasses",
    "widgetType",
    "layout",
    "parseLayout",
    "from",
    "filter",
    "m",
    "matches",
    "style",
    "keys",
    "extractLayout",
    "classes",
    "setWidgetLayout",
    "split",
    "className",
    "label",
    "parseLabel",
    "querySelector",
    "bindClickToWidget",
    "Config",
    "configSettings",
    "prop",
    "responsive",
    "find",
    "endsWith",
    "defaultValues",
    "ret_val",
    "__extractLayoutAttribute",
    "property",
    "x",
    "y",
    "width",
    "height",
    "extractLayout3d",
    "z",
    "floor",
    "floorFilter",
    "roomFilter",
    "labelClass",
    "Application",
    "structureController",
    "elementData",
    "getWidgetData",
    "rowspan",
    "colspan",
    "Element",
    "getAttributeNS",
    "colspanM",
    "colspanS",
    "parseFloat",
    "document",
    "dataset",
    "Math",
    "rowspanClass",
    "ui",
    "structure",
    "Manager",
    "parseFormat",
    "format",
    "parseAddress",
    "makeAddressListFn",
    "address",
    "makeAddressList",
    "id",
    "skipAdding",
    "src",
    "textContent",
    "addressInfo",
    "formatPos",
    "mode",
    "backendType",
    "getDefaultBackendName",
    "testMode",
    "window",
    "cvTestMode",
    "selector",
    "ignoreError",
    "qos",
    "retain",
    "error",
    "outerHTML",
    "backendName",
    "hasAttribute",
    "variantInfo",
    "addAddress",
    "parseRefresh",
    "doCacheControl",
    "refresh",
    "parseInt",
    "cachecontrol",
    "styling",
    "parseChildren",
    "getStoragePath",
    "childs",
    "child",
    "indexOf",
    "idx",
    "childData",
    "isArray",
    "i",
    "l",
    "push"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/parser/pure/WidgetParser.js"
  ],
  "sourcesContent": [
    "/* WidgetParser.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n//noinspection JSUnusedGlobalSymbols\nqx.Class.define('cv.parser.pure.WidgetParser', {\n  type: 'static',\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n    __handlers: {},\n    lookupM: [0, 2, 4, 6, 6, 6, 6, 12, 12, 12, 12, 12, 12],\n    lookupS: [0, 3, 6, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12],\n    model: cv.data.Model.getInstance(),\n    __templates: {},\n\n    getTemplates() {\n      return this.__templates;\n    },\n\n    addTemplate(name, templateData) {\n      this.__templates[name] = templateData;\n    },\n\n    addHandler(tagName, handler) {\n      this.__handlers[tagName.toLowerCase()] = handler;\n    },\n\n    getHandler(tagName) {\n      return this.__handlers[tagName.toLowerCase()] || this.__handlers.unknown;\n    },\n\n    /**\n     * Renders templates into the config file, if they are used\n     * @param rootPage\n     */\n    renderTemplates(rootPage) {\n      rootPage.querySelectorAll('template').forEach(function (elem) {\n        const templateName = elem.getAttribute('name');\n        const variables = {};\n        Array.prototype.forEach.call(elem.children, function (variable) {\n          variables[variable.getAttribute('name')] = variable.innerHTML;\n        });\n\n        if (Object.prototype.hasOwnProperty.call(this.__templates, templateName)) {\n          const renderedString = qx.bom.Template.render(this.__templates[templateName], variables)\n            .replace('\\n', '')\n            .trim();\n          const helperNode = elem.ownerDocument.createElement('template');\n          helperNode.innerHTML = renderedString.substring(6, renderedString.length - 7).trim();\n          // replace existing element with the rendered templates child\n          const replacement = helperNode.firstElementChild;\n          const next = elem.nextElementSibling;\n          const parent = elem.parentNode;\n          parent.replaceChild(replacement, elem);\n          while (helperNode.children.length > 0) {\n            // append the rest\n            parent.insertBefore(helperNode.children[0], next);\n          }\n        }\n      }, this);\n    },\n\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} widget data\n     */\n    parse(xml, path, flavour, pageType) {\n      let tag = xml.nodeName.toLowerCase();\n      if (tag === 'custom') {\n        // use the child of the custom element\n        xml = xml.children[0];\n        tag = xml.nodeName.toLowerCase();\n      }\n      const parser = this.getHandler(tag);\n      let result = null;\n      if (parser) {\n        result = parser.parse(xml, path, flavour, pageType);\n      } else {\n        qx.log.Logger.debug(this, 'no parse handler registered for type: ' + tag.toLowerCase());\n      }\n      return result;\n    },\n\n    parseBasicElement(element, path, flavour, pageType) {\n      return this.model.setWidgetData(path, {\n        path: path,\n        $$type: cv.parser.pure.WidgetParser.getElementType(element),\n        pageType: pageType\n      });\n    },\n\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     * @param handler {Class} Handler class that parses this element\n     * @param element {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @param mappings\n     * @return {Map} HTML code\n     */\n    parseElement(handler, element, path, flavour, pageType, mappings) {\n      // and fill in widget specific data\n      const data = this.createDefaultWidget(handler, this.getElementType(element), element, path, flavour, pageType);\n\n      if (mappings) {\n        for (let key in mappings) {\n          if (Object.prototype.hasOwnProperty.call(mappings, key)) {\n            const map = mappings[key];\n            let value = element.getAttribute(key);\n            if (map['default'] !== undefined && (value === undefined || value === null)) {\n              value = map['default'];\n            }\n            if (map.transform) {\n              value = map.transform(value);\n            }\n            data[map.target || key] = value;\n          }\n        }\n      }\n      this.parseStyling(element, path);\n      return data;\n    },\n\n    /**\n     * Get the mappings needed for parsing from the handler\n     *\n     * @param handler {Class} parser handler\n     * @return {Map} parser configuration: describes how Attributes are mapped to properties\n     */\n    __getAttributeToPropertyMappings(handler) {\n      return handler && handler.getAttributeToPropertyMappings ? handler.getAttributeToPropertyMappings() : {};\n    },\n\n    getElementType(element) {\n      let type = element.nodeName.toLowerCase();\n      if (type === 'img') {\n        // workaround for unittests (<image> gets replaced by <img>\n        type = 'image';\n      }\n      return type;\n    },\n\n    getDefaultClasses(type) {\n      return 'widget clearfix ' + type.toLowerCase();\n    },\n\n    /**\n     * Create a default widget to be filled by the creator afterwards.\n     * Note: the receiver of the returned string must add an </div> closing element!\n     *\n     * @param handler {cv.parser.pure.widgets} the parser that can parse this element\n     * @param widgetType {String} of the widget type\n     * @param element   {Object} the XML element\n     * @param path       {String} of the path ID\n     * @param flavour   {String} Flavour\n     * @param pageType  {String} one of text, 2d and 3d\n     * @return {Map} parsed widget data\n     */\n    createDefaultWidget(handler, widgetType, element, path, flavour, pageType) {\n      if (handler.createDefaultWidget) {\n        return handler.createDefaultWidget(widgetType, element, path, flavour, pageType);\n      }\n\n      const layout = this.parseLayout(\n        Array.from(element.children).filter(function (m) {\n          return m.matches('layout');\n        })[0]\n      );\n\n      const style = Object.keys(layout).length === 0 ? '' : 'style=\"' + this.extractLayout(layout, pageType) + '\"';\n      let classes = handler.getDefaultClasses\n        ? handler.getDefaultClasses(widgetType)\n        : this.getDefaultClasses(widgetType);\n      // the group widgets align attribute is just targeting the group header and is handled by the widget itself, so we skip it here\n      if (element.getAttribute('align') && widgetType !== 'group') {\n        classes += ' ' + element.getAttribute('align');\n      }\n      classes += ' ' + this.setWidgetLayout(element, path);\n      if (element.getAttribute('flavour')) {\n        flavour = element.getAttribute('flavour');\n      } // sub design choice\n      if (flavour) {\n        classes += ' flavour_' + flavour;\n      }\n      if (element.getAttribute('class')) {\n        element\n          .getAttribute('class')\n          .split(' ')\n          .forEach(className => {\n            classes += ' custom_' + className;\n          });\n      }\n      const label =\n        widgetType === 'text'\n          ? this.parseLabel(element.querySelector('label'), flavour, '')\n          : this.parseLabel(element.querySelector('label'), flavour);\n\n      let bindClickToWidget = cv.Config.configSettings.bindClickToWidget;\n      if (element.getAttribute('bind_click_to_widget')) {\n        bindClickToWidget = element.getAttribute('bind_click_to_widget') === 'true';\n      }\n\n      const data = {\n        path: path,\n        $$type: widgetType.toLowerCase(),\n        pageType: pageType\n      };\n\n      data.bindClickToWidget = bindClickToWidget;\n      ['mapping', 'align', 'align'].forEach(function (prop) {\n        data[prop] = element.getAttribute(prop) || null;\n      }, this);\n\n      data.layout = layout || null;\n      data.label = label || '';\n      data.classes = classes || '';\n      data.style = style || '';\n      data.responsive = !!Object.keys(layout).find(function (prop) {\n        return prop.endsWith('-m') || prop.endsWith('-s');\n      });\n\n      return this.model.setWidgetData(path, data);\n    },\n\n    /**\n     * Parse config file layout element and convert it to an object\n     *\n     * @param layout {Element} XML config element &lt;layout&gt;\n     * @param defaultValues {Map} default layout values\n     * @return {Map}\n     */\n    parseLayout(layout, defaultValues) {\n      const ret_val = {};\n\n      if (!layout) {\n        return ret_val;\n      }\n\n      if (undefined === defaultValues) {\n        defaultValues = {};\n      }\n      ['x', 'y', 'width', 'height', 'scale', 'rowspan', 'colspan'].forEach(function (prop) {\n        this.__extractLayoutAttribute(ret_val, prop, layout, defaultValues);\n        this.__extractLayoutAttribute(ret_val, prop + '-m', layout, defaultValues);\n\n        this.__extractLayoutAttribute(ret_val, prop + '-s', layout, defaultValues);\n      }, this);\n\n      return ret_val;\n    },\n\n    __extractLayoutAttribute(ret_val, property, layout, defaultValues) {\n      if (layout.getAttribute(property)) {\n        ret_val[property] = layout.getAttribute(property);\n      } else if (defaultValues[property]) {\n        ret_val[property] = defaultValues[property];\n      }\n    },\n\n    extractLayout(layout, pageType) {\n      let ret_val = pageType === '2d' ? 'position:absolute;' : '';\n      if (layout.x) {\n        ret_val += 'left:' + layout.x + ';';\n      }\n      if (layout.y) {\n        ret_val += 'top:' + layout.y + ';';\n      }\n      if (layout.width) {\n        ret_val += 'width:' + layout.width + ';';\n      }\n      if (layout.height) {\n        ret_val += 'height:' + layout.height + ';';\n      }\n\n      return ret_val;\n    },\n\n    extractLayout3d(layout) {\n      const ret_val = {};\n      if (layout.getAttribute('x')) {\n        ret_val.x = layout.getAttribute('x');\n      }\n      if (layout.getAttribute('y')) {\n        ret_val.y = layout.getAttribute('y');\n      }\n      if (layout.getAttribute('z')) {\n        ret_val.z = layout.getAttribute('z');\n      }\n      if (layout.getAttribute('floor')) {\n        ret_val.floor = layout.getAttribute('floor');\n      }\n      if (layout.getAttribute('floorFilter')) {\n        ret_val.floorFilter = layout.getAttribute('floorFilter');\n      }\n      if (layout.getAttribute('roomFilter')) {\n        ret_val.roomFilter = layout.getAttribute('roomFilter');\n      }\n      return ret_val;\n    },\n\n    parseLabel(label, flavour, labelClass, style) {\n      return cv.Application.structureController.parseLabel(label, flavour, labelClass, style);\n    },\n\n    /**\n     * this function implements all widget layouts that are identical (JNK)\n     * implemented: rowspan, colspan\n     *\n     * @param element {Element} XML-Element from the config file for this widget\n     * @param path {String}\n     * @return {String} rowspan class or empty string\n     */\n    setWidgetLayout(element, path) {\n      const elementData = this.model.getWidgetData(path);\n      const layout = Array.from(element.children).filter(function (m) {\n        return m.matches('layout');\n      })[0];\n      let ret_val = '';\n      let rowspan = null;\n\n      if (layout) {\n        elementData.colspan = qx.xml.Element.getAttributeNS(layout, '', 'colspan');\n\n        elementData.colspanM = qx.xml.Element.getAttributeNS(layout, '', 'colspan-m');\n\n        elementData.colspanS = qx.xml.Element.getAttributeNS(layout, '', 'colspan-s');\n\n        rowspan = qx.xml.Element.getAttributeNS(layout, '', 'rowspan');\n      }\n      elementData.colspan = parseFloat(\n        elementData.colspan || document.querySelector('head').dataset['colspanDefault'] || 6\n      );\n\n      elementData.colspanM = parseFloat(\n        elementData.colspanM ||\n          cv.parser.pure.WidgetParser.lookupM[Math.floor(elementData.colspan)] ||\n          elementData.colspan\n      );\n\n      elementData.colspanS = parseFloat(\n        elementData.colspanS ||\n          cv.parser.pure.WidgetParser.lookupS[Math.floor(elementData.colspan)] ||\n          elementData.colspan\n      );\n\n      if (rowspan) {\n        elementData.rowspanClass = cv.ui.structure.pure.layout.Manager.rowspanClass(parseFloat(rowspan || 1));\n\n        ret_val = 'innerrowspan';\n      }\n      return ret_val;\n    },\n\n    /**\n     * Parse the format setting\n     * @param xml {Element} XML-Element from config\n     * @param path {String} path to the widget\n     */\n    parseFormat(xml, path) {\n      const data = this.model.getWidgetData(path);\n      const value = xml.getAttribute('format');\n      if (value) {\n        data.format = value;\n      }\n    },\n\n    /**\n     * Parses the address element\n     * @param xml {Element} address XML-Element from config\n     * @param path {String} path to the widget\n     * @param makeAddressListFn {Function?} callback for parsing address variants\n     */\n    parseAddress(xml, path, makeAddressListFn) {\n      if (xml.nodeName.toLowerCase() !== 'page') {\n        const data = this.model.getWidgetData(path);\n        data.address = cv.parser.pure.WidgetParser.makeAddressList(xml, path, makeAddressListFn);\n      }\n    },\n\n    /**\n     * this function extracts all addresses with attributes (JNK)\n     *                       elements. The first is a boolean that determins if\n     *                       the visu should listen for that address. The second\n     *                       is added as it is to the returned object.\n     *\n     * @param element {Element} address XML-Element from the config file\n     * @param id {String} id / path to the widget\n     * @param makeAddressListFn {Function?} callback for parsing address variants\n     * @param skipAdding {Boolean?} do not add address to model if true\n     * @return {Object} address\n     */\n    makeAddressList(element, id, makeAddressListFn, skipAdding) {\n      let address = {};\n      element.querySelectorAll('address').forEach(function (elem) {\n        let src = elem.textContent;\n        let transform = elem.getAttribute('transform');\n        let addressInfo = {};\n        let formatPos = +(elem.getAttribute('format-pos') || 1) | 0; // force integer\n        let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n        let backendType = cv.data.Model.getInstance().getDefaultBackendName();\n        if (!cv.Config.testMode && !window.cvTestMode) {\n          if (transform) {\n            // only check transform when not in testMode\n            switch (transform.split(':')[0].toLowerCase()) {\n              case 'dpt':\n                backendType = 'knxd';\n                break;\n\n              case 'oh':\n                backendType = 'openhab';\n                break;\n\n              case 'mqtt':\n                backendType = 'mqtt';\n                break;\n            }\n          } else {\n            backendType = 'system';\n          }\n        }\n        addressInfo.backendType = backendType;\n\n        addressInfo.selector = elem.getAttribute('selector');\n        addressInfo.ignoreError = elem.getAttribute('ignore-error') === 'true';\n        addressInfo.qos = (elem.getAttribute('qos') || 0) | 0; // force integer\n        addressInfo.retain = elem.getAttribute('retain') === 'true';\n\n        if (!src || !transform) {\n          // fix broken address-entries in config\n          qx.log.Logger.error(this, 'Either address or transform is missing in address element %1', element.outerHTML);\n\n          return;\n        }\n        switch (elem.getAttribute('mode')) {\n          case 'disable':\n            mode = 0;\n            break;\n          case 'read':\n            mode = 1;\n            break;\n          case 'write':\n            mode = 2;\n            break;\n          case 'readwrite':\n            mode = 1 | 2;\n            break;\n        }\n\n        let backendName = backendType;\n        if (elem.hasAttribute('backend')) {\n          backendName = elem.getAttribute('backend');\n        }\n        let variantInfo = makeAddressListFn\n          ? makeAddressListFn(src, transform, mode, elem.getAttribute('variant'))\n          : [true, undefined];\n        if (!skipAdding && mode & 1 && variantInfo[0]) {\n          // add only addresses when reading from them\n          this.model.addAddress(src, id, backendName);\n        }\n        if (address[src]) {\n          // we already have an entry for this address, merge the modes if the other attribute values are equal\n          if (\n            address[src].transform === transform &&\n            address[src].variantInfo === variantInfo[1] &&\n            address[src].formatPos === formatPos\n          ) {\n            mode |= address[src].mode;\n          } else {\n            qx.log.Logger.error(\n              this,\n              'multiple address entries with different configuration:',\n              address[src],\n              [transform, mode, variantInfo[1], formatPos],\n              'they are only allowed to differ in mode'\n            );\n          }\n        }\n        addressInfo.transform = transform;\n        addressInfo.mode = mode;\n        addressInfo.variantInfo = variantInfo[1];\n        addressInfo.formatPos = formatPos;\n        address[src] = addressInfo;\n      }, this);\n      return address;\n    },\n\n    parseRefresh(xml, path, doCacheControl) {\n      const data = this.model.getWidgetData(path);\n      data.refresh = xml.getAttribute('refresh') ? parseInt(xml.getAttribute('refresh')) * 1000 : 0;\n      if (doCacheControl) {\n        data.cachecontrol = (function (x) {\n          switch (x) {\n            case 'full':\n            case 'force':\n            case 'weak':\n            case 'none':\n              return x;\n\n            case 'false':\n              return 'none';\n\n            case 'true':\n            default:\n              return 'full';\n          }\n        })(xml.getAttribute('cachecontrol'));\n      }\n    },\n\n    parseStyling(xml, path) {\n      const data = this.model.getWidgetData(path);\n      data.styling = xml.getAttribute('styling');\n    },\n\n    // this might have been called from the cv.parser.pure.WidgetParser with the including class as context\n    parseChildren(xml, path, flavour, pageType) {\n      const data = this.model.getWidgetData(this.getStoragePath(xml, path));\n\n      if (!data.children) {\n        data.children = [];\n      }\n      const childs = Array.from(xml.children).filter(function (child) {\n        return ['layout', 'label', 'address'].indexOf(child.nodeName.toLowerCase()) === -1;\n      }, this);\n      childs.forEach(function (child, idx) {\n        const childData = cv.parser.pure.WidgetParser.parse(child, path + '_' + idx, flavour, pageType);\n\n        if (childData) {\n          if (Array.isArray(childData)) {\n            let i = 0;\n            const l = childData.length;\n            for (; i < l; i++) {\n              data.children.push(childData[i].path);\n            }\n          } else if (childData.path) {\n            data.children.push(childData.path);\n          }\n        }\n      }, this);\n      return data;\n    },\n\n    /**\n     * Returns the path where the widget data is stored, usually this is the same path, but there are\n     * exceptions for pages which are handled here\n     *\n     * @param xml {Element} widgets XML config element\n     * @param path {String} internal widget path e.g. id_0_2\n     */\n    getStoragePath(xml, path) {\n      if (xml.length === 1) {\n        xml = xml[0];\n      }\n      switch (xml.nodeName.toLowerCase()) {\n        case 'page':\n          return path + '_';\n        default:\n          return path;\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}