{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ConfigLoader.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "__loadQueue",
    "data",
    "Array",
    "members",
    "__doneCallback",
    "__doneCallbackContext",
    "__xml",
    "load",
    "callback",
    "context",
    "uri",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "cv",
    "Config",
    "configSuffix",
    "testMode",
    "indexOf",
    "replace",
    "debug",
    "ajaxRequest",
    "io",
    "request",
    "Xhr",
    "push",
    "set",
    "accept",
    "cache",
    "forceReload",
    "setUserData",
    "addListenerOnce",
    "e",
    "Init",
    "getApplication",
    "block",
    "req",
    "getTarget",
    "configServer",
    "getResponseHeader",
    "xml",
    "getResponse",
    "Document",
    "fromString",
    "querySelectorAll",
    "forEach",
    "loadInclude",
    "remove",
    "getUrl",
    "documentElement",
    "getElementsByTagName",
    "length",
    "configError",
    "xmlLibVersion",
    "querySelector",
    "getAttribute",
    "undefined",
    "Version",
    "LIBRARY_VERSION",
    "parseInt",
    "libraryCheck",
    "server",
    "backendName",
    "error",
    "backendUrl",
    "endsWith",
    "backendKnxdUrl",
    "backendOpenHABUrl",
    "startsWith",
    "backendMQTTUrl",
    "backend",
    "_checkQueue",
    "addListener",
    "status",
    "getTransport",
    "Request",
    "isSuccessful",
    "getUserData",
    "demoUrl",
    "setUrl",
    "send",
    "includeElem",
    "url",
    "LibraryManager",
    "get",
    "xhr",
    "async",
    "getResponseText",
    "replaceWith",
    "firstChild",
    "childNodes",
    "call",
    "dispose",
    "textStatus",
    "additionalErrorInfo",
    "title",
    "locale",
    "Manager",
    "tr",
    "translate",
    "toString",
    "message",
    "actions",
    "link",
    "window",
    "location",
    "href",
    "split",
    "type",
    "action",
    "showManager",
    "needsConfirmation",
    "notification",
    "topic",
    "severity",
    "unique",
    "notifications",
    "Router",
    "dispatchMessage",
    "destruct",
    "ConfigLoader"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ConfigLoader.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The ConfigLoader loads CometVisu config files from the backend. If the loaded config file contains\n * <include> elements those config parts are loaded and add to the XML-Document.\n *\n * @author Tobias Bräutigam <tbraeutigam@gmail.com>\n * @since 2018\n */\n\nqx.Class.define('cv.util.ConfigLoader', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this.__loadQueue = new qx.data.Array();\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __loadQueue: null,\n    __doneCallback: null,\n    __doneCallbackContext: null,\n    __xml: null,\n\n    /**\n     * Load a config file\n     * @param callback\n     * @param context\n     */\n    load: function (callback, context) {\n      this.__doneCallback = callback;\n      this.__doneCallbackContext = context;\n      // get the data once the page was loaded\n      let uri = qx.util.ResourceManager.getInstance().toUri('config/visu_config' + (cv.Config.configSuffix ? '_' + cv.Config.configSuffix : '') + '.xml');\n      if (cv.Config.testMode) {\n        // workaround for e2e-tests\n        uri = 'resource/config/visu_config' + (cv.Config.configSuffix ? '_' + cv.Config.configSuffix : '') + '.xml';\n      } else if (uri.indexOf('resource/') === -1) {\n        // unknown config, try to add the resource part manually\n        uri = uri.replace('config/', 'resource/config/');\n      }\n      this.debug('Requesting '+uri);\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      this.__loadQueue.push(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n      ajaxRequest.setUserData('noDemo', true);\n      ajaxRequest.addListenerOnce('success', function (e) {\n        qx.core.Init.getApplication().block(false);\n        const req = e.getTarget();\n        cv.Config.configServer = req.getResponseHeader('Server');\n        // Response parsed according to the server's response content type\n        let xml = req.getResponse();\n        if (xml && (typeof xml === 'string')) {\n          xml = qx.xml.Document.fromString(xml);\n        }\n        this.__xml = xml;\n        xml.querySelectorAll('include').forEach(this.loadInclude, this);\n        this.__loadQueue.remove(ajaxRequest.getUrl());\n\n        if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length) {\n          this.configError('parsererror');\n        } else {\n          // check the library version\n          let xmlLibVersion = xml.querySelector('pages').getAttribute('lib_version');\n          if (xmlLibVersion === undefined) {\n            xmlLibVersion = -1;\n          } else if (xmlLibVersion === '0') {\n            // special wildcard mode used in screenshot generation fixtures\n            xmlLibVersion = cv.Version.LIBRARY_VERSION;\n          } else {\n            xmlLibVersion = parseInt(xmlLibVersion);\n          }\n          if (cv.Config.libraryCheck && xmlLibVersion < cv.Version.LIBRARY_VERSION) {\n            this.configError('libraryerror');\n          } else {\n            cv.Config.server = {};\n            let backendName = '';\n            if (req.getResponseHeader('X-CometVisu-Backend-Name')) {\n              backendName = req.getResponseHeader('X-CometVisu-Backend-Name');\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-LoginUrl')) {\n              this.error('The usage of \"X-CometVisu-Backend-LoginUrl\" is deprecated. Please update the server setup.');\n              let backendUrl = req.getResponseHeader('X-CometVisu-Backend-LoginUrl');\n              if (!backendUrl.endsWith('/')) {\n                backendUrl += '/';\n              }\n              cv.Config.server.backendKnxdUrl = backendUrl;\n              cv.Config.server.backendOpenHABUrl = backendUrl;\n              if (!backendName && backendUrl.startsWith('/rest/')) {\n                backendName = 'openhab';\n              }\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-KNXD-Url')) {\n              cv.Config.server.backendKnxdUrl = req.getResponseHeader('X-CometVisu-Backend-KNXD-Url');\n              if (backendName === '') {\n                backendName = 'knxd';\n              }\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-MQTT-Url')) {\n              cv.Config.server.backendMQTTUrl = req.getResponseHeader('X-CometVisu-Backend-MQTT-Url');\n              if (backendName === '') {\n                backendName = 'mqtt';\n              }\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-OpenHAB-Url')) {\n              cv.Config.server.backendOpenHABUrl = req.getResponseHeader('X-CometVisu-Backend-OpenHAB-Url');\n              if (backendName === '') {\n                backendName = 'openhab';\n              }\n            }\n            if (backendName) {\n              cv.Config.server.backend = backendName;\n            }\n            this._checkQueue();\n          }\n        }\n      }, this);\n\n      ajaxRequest.addListener('statusError', function (e) {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status) && ajaxRequest.getUserData('noDemo')) {\n          ajaxRequest.setUserData('noDemo', false);\n          ajaxRequest.setUserData('origUrl', ajaxRequest.getUrl());\n          this.__loadQueue.remove(ajaxRequest.getUrl());\n          const demoUrl = ajaxRequest.getUrl().replace('config/', 'demo/');\n          ajaxRequest.setUrl(demoUrl);\n          this.__loadQueue.push(demoUrl);\n          ajaxRequest.send();\n        } else if (!qx.util.Request.isSuccessful(status)) {\n          this.configError('filenotfound', [ajaxRequest.getUserData('origUrl'), ajaxRequest.getUrl()]);\n        } else {\n          this.configError(status, null);\n        }\n      }, this);\n\n      ajaxRequest.send();\n    },\n\n    /**\n     * Load an include source and replace it with the loaded content\n     * @param includeElem {Element}\n     */\n    loadInclude: function (includeElem) {\n      let url = includeElem.getAttribute('src');\n      if (!url.startsWith('/')) {\n        url = qx.util.LibraryManager.getInstance().get('cv', 'resourceUri') + '/' + url;\n      }\n      this.__loadQueue.push(url);\n      const xhr = new qx.io.request.Xhr(url);\n      xhr.set({\n        accept: 'text/plain',\n        async: false\n      });\n      xhr.addListenerOnce('success', function(e) {\n        const req = e.getTarget();\n        const xml = qx.xml.Document.fromString('<root>' + req.getResponseText() + '</root>');\n        includeElem.replaceWith(...xml.firstChild.childNodes);\n        this.__loadQueue.remove(url);\n        this._checkQueue();\n      }, this);\n      xhr.addListener('statusError', function (e) {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.configError('filenotfound', [xhr.getUrl(), '']);\n        } else {\n          this.configError(status, null);\n        }\n      }, this);\n      xhr.send();\n    },\n\n    /**\n     * Check if everything is loaded and call the callback in this case\n     * @private\n     */\n    _checkQueue: function () {\n      if (this.__loadQueue.length === 0) {\n        this.__doneCallback.call(this.__doneCallbackContext, this.__xml);\n        this.dispose();\n      }\n    },\n\n    /**\n     * Handle errors that occur during loading ot the config file\n     * @param textStatus {String} error status\n     * @param additionalErrorInfo {String} error message\n     */\n    configError: function(textStatus, additionalErrorInfo) {\n      const configSuffix = (cv.Config.configSuffix ? cv.Config.configSuffix : '');\n      const title = qx.locale.Manager.tr('Config-File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid config file!')+'<br/><a href=\"#\" onclick=\"showConfigErrors(\\'' + configSuffix + '\\')\">'+qx.locale.Manager.tr('Please check!')+'</a>';\n          break;\n        case 'libraryerror': {\n          let link = window.location.href.split('#')[0];\n          if (link.indexOf('?') <= 0) {\n            link += '?';\n          }\n          link += '&libraryCheck=false';\n          message = qx.locale.Manager.tr('Config file has wrong library version!').translate().toString() + '<br/>' +\n            qx.locale.Manager.tr('This can cause problems with your configuration').translate().toString() + '</br>' +\n            '<p>' + qx.locale.Manager.tr('You can run the %1Configuration Upgrader%2.', '<a href=\"#\" onclick=\"showConfigErrors(\\'' + configSuffix + '\\', {upgradeVersion: true})\">', '</a>').translate().toString() + '</br>' +\n            qx.locale.Manager.tr('Or you can start without upgrading %1with possible configuration problems%2', '<a href=\"' + link + '\">', '</a>').translate().toString() + '</p>';\n          break;\n        }\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: Config file not found. Neither as normal config (%1) nor as demo config (%2).', additionalErrorInfo[0], additionalErrorInfo[1]).translate().toString();\n          message += '<br/>'  + qx.locale.Manager.tr('You can open the manager to create or upload a config file.').translate().toString();\n          actions = {\n            link: [\n              {\n                title: qx.locale.Manager.tr('Open manager'),\n                type: 'manager',\n                action: () => {\n                  qx.core.Init.getApplication().showManager();\n                },\n                needsConfirmation: false\n              }\n            ]\n          };\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n      const notification = {\n        topic: 'cv.config.error',\n        title: title,\n        message: message,\n        severity: 'urgent',\n        unique: true\n      };\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n      this.error(this, message.toString());\n      qx.core.Init.getApplication().block(false);\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function () {\n    // remove references\n    this.__xml = null;\n    this.__doneCallback = null;\n    this.__doneCallbackContext = null;\n  }\n});\n"
  ]
}