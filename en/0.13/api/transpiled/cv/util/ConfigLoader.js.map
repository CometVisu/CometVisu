{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ConfigLoader.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "__loadQueue",
    "data",
    "Array",
    "members",
    "__doneCallback",
    "__doneCallbackContext",
    "__xml",
    "load",
    "callback",
    "context",
    "uri",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "cv",
    "Config",
    "configSuffix",
    "testMode",
    "indexOf",
    "replace",
    "debug",
    "ajaxRequest",
    "io",
    "request",
    "Xhr",
    "push",
    "set",
    "accept",
    "cache",
    "forceReload",
    "setUserData",
    "addListenerOnce",
    "e",
    "Init",
    "getApplication",
    "block",
    "req",
    "getTarget",
    "configServer",
    "getResponseHeader",
    "isTileStructure",
    "test",
    "getResponseText",
    "xml",
    "getResponse",
    "parser",
    "DOMParser",
    "parseFromString",
    "documentElement",
    "getElementsByTagName",
    "length",
    "configError",
    "xmlns",
    "rawContent",
    "querySelectorAll",
    "forEach",
    "loadInclude",
    "remove",
    "getUrl",
    "systemLibVersion",
    "Version",
    "LIBRARY_VERSION_TILE",
    "LIBRARY_VERSION_PURE",
    "xmlLibVersion",
    "getAttribute",
    "undefined",
    "parseInt",
    "libraryCheck",
    "server",
    "backendName",
    "error",
    "backendUrl",
    "endsWith",
    "backendKnxdUrl",
    "backendOpenHABUrl",
    "startsWith",
    "backendMQTTUrl",
    "backend",
    "_checkQueue",
    "addListener",
    "status",
    "getTransport",
    "Request",
    "isSuccessful",
    "getUserData",
    "demoUrl",
    "setUrl",
    "send",
    "includeElem",
    "url",
    "LibraryManager",
    "get",
    "xhr",
    "async",
    "Document",
    "fromString",
    "replaceWith",
    "firstChild",
    "childNodes",
    "call",
    "dispose",
    "textStatus",
    "additionalErrorInfo",
    "title",
    "locale",
    "Manager",
    "tr",
    "translate",
    "toString",
    "message",
    "actions",
    "link",
    "window",
    "location",
    "href",
    "split",
    "type",
    "action",
    "showManager",
    "needsConfirmation",
    "notification",
    "topic",
    "severity",
    "unique",
    "notifications",
    "Router",
    "dispatchMessage",
    "destruct",
    "ConfigLoader"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ConfigLoader.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The ConfigLoader loads CometVisu config files from the backend. If the loaded config file contains\n * <include> elements those config parts are loaded and add to the XML-Document.\n *\n * @author Tobias Bräutigam <tbraeutigam@gmail.com>\n * @since 2018\n */\n\nqx.Class.define('cv.util.ConfigLoader', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this.__loadQueue = new qx.data.Array();\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __loadQueue: null,\n    __doneCallback: null,\n    __doneCallbackContext: null,\n    __xml: null,\n\n    /**\n     * Load a config file\n     * @param callback\n     * @param context\n     */\n    load: function (callback, context) {\n      this.__doneCallback = callback;\n      this.__doneCallbackContext = context;\n      // get the data once the page was loaded\n      let uri = qx.util.ResourceManager.getInstance().toUri('config/visu_config' + (cv.Config.configSuffix ? '_' + cv.Config.configSuffix : '') + '.xml');\n      if (cv.Config.testMode) {\n        // workaround for e2e-tests\n        uri = 'resource/config/visu_config' + (cv.Config.configSuffix ? '_' + cv.Config.configSuffix : '') + '.xml';\n      } else if (uri.indexOf('resource/') === -1) {\n        // unknown config, try to add the resource part manually\n        uri = uri.replace('config/', 'resource/config/');\n      }\n      this.debug('Requesting '+uri);\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      this.__loadQueue.push(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n      ajaxRequest.setUserData('noDemo', true);\n      ajaxRequest.addListenerOnce('success', function (e) {\n        qx.core.Init.getApplication().block(false);\n        const req = e.getTarget();\n        cv.Config.configServer = req.getResponseHeader('Server');\n        const isTileStructure = /<config/m.test(req.getResponseText());\n        // Response parsed according to the server's response content type\n        let xml = req.getResponse();\n        if (xml && (typeof xml === 'string')) {\n          const parser = new DOMParser();\n          if (isTileStructure) {\n            xml = xml.replace('<config', '<config xmlns=\"http://www.w3.org/1999/xhtml\"');\n          }\n          xml = parser.parseFromString(xml, 'text/xml');\n        }\n\n        if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length) {\n          this.configError('parsererror');\n        } else {\n          if (isTileStructure && !xml.documentElement.xmlns) {\n            // wrong namespace\n            const rawContent = req.getResponseText().replace('<config', '<config xmlns=\"http://www.w3.org/1999/xhtml\"');\n            const parser = new DOMParser();\n            xml = parser.parseFromString(rawContent, 'text/xml');\n          }\n          this.__xml = xml;\n          xml.querySelectorAll('include').forEach(this.loadInclude, this);\n          this.__loadQueue.remove(ajaxRequest.getUrl());\n\n          const systemLibVersion = isTileStructure ? cv.Version.LIBRARY_VERSION_TILE : cv.Version.LIBRARY_VERSION_PURE;\n          // check the library version\n          let xmlLibVersion = isTileStructure ? xml.documentElement.getAttribute('version') : xml.documentElement.getAttribute('lib_version');\n          if (xmlLibVersion === undefined || xmlLibVersion === null) {\n            xmlLibVersion = -1;\n          } else if (xmlLibVersion === '0') {\n            // special wildcard mode used in screenshot generation fixtures\n            xmlLibVersion = systemLibVersion;\n          } else {\n            xmlLibVersion = parseInt(xmlLibVersion);\n          }\n          if (cv.Config.libraryCheck && xmlLibVersion < systemLibVersion) {\n            this.configError('libraryerror');\n          } else {\n            cv.Config.server = {};\n            let backendName = '';\n            if (req.getResponseHeader('X-CometVisu-Backend-Name')) {\n              backendName = req.getResponseHeader('X-CometVisu-Backend-Name');\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-LoginUrl')) {\n              this.error('The usage of \"X-CometVisu-Backend-LoginUrl\" is deprecated. Please update the server setup.');\n              let backendUrl = req.getResponseHeader('X-CometVisu-Backend-LoginUrl');\n              if (!backendUrl.endsWith('/')) {\n                backendUrl += '/';\n              }\n              cv.Config.server.backendKnxdUrl = backendUrl;\n              cv.Config.server.backendOpenHABUrl = backendUrl;\n              if (!backendName && backendUrl.startsWith('/rest/')) {\n                backendName = 'openhab';\n              }\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-KNXD-Url')) {\n              cv.Config.server.backendKnxdUrl = req.getResponseHeader('X-CometVisu-Backend-KNXD-Url');\n              if (backendName === '') {\n                backendName = 'knxd';\n              }\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-MQTT-Url')) {\n              cv.Config.server.backendMQTTUrl = req.getResponseHeader('X-CometVisu-Backend-MQTT-Url');\n              if (backendName === '') {\n                backendName = 'mqtt';\n              }\n            }\n            if (req.getResponseHeader('X-CometVisu-Backend-OpenHAB-Url')) {\n              cv.Config.server.backendOpenHABUrl = req.getResponseHeader('X-CometVisu-Backend-OpenHAB-Url');\n              if (backendName === '') {\n                backendName = 'openhab';\n              }\n            }\n            if (backendName) {\n              cv.Config.server.backend = backendName;\n            }\n            this._checkQueue();\n          }\n        }\n      }, this);\n\n      ajaxRequest.addListener('statusError', function (e) {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status) && ajaxRequest.getUserData('noDemo')) {\n          ajaxRequest.setUserData('noDemo', false);\n          ajaxRequest.setUserData('origUrl', ajaxRequest.getUrl());\n          this.__loadQueue.remove(ajaxRequest.getUrl());\n          const demoUrl = ajaxRequest.getUrl().replace('config/', 'demo/');\n          ajaxRequest.setUrl(demoUrl);\n          this.__loadQueue.push(demoUrl);\n          ajaxRequest.send();\n        } else if (!qx.util.Request.isSuccessful(status)) {\n          this.configError('filenotfound', [ajaxRequest.getUserData('origUrl'), ajaxRequest.getUrl()]);\n        } else {\n          this.configError(status, null);\n        }\n      }, this);\n\n      ajaxRequest.send();\n    },\n\n    /**\n     * Load an include source and replace it with the loaded content\n     * @param includeElem {Element}\n     */\n    loadInclude: function (includeElem) {\n      let url = includeElem.getAttribute('src');\n      if (!url.startsWith('/')) {\n        url = qx.util.LibraryManager.getInstance().get('cv', 'resourceUri') + '/' + url;\n      }\n      this.__loadQueue.push(url);\n      const xhr = new qx.io.request.Xhr(url);\n      xhr.set({\n        accept: 'text/plain',\n        async: false\n      });\n      xhr.addListenerOnce('success', function(e) {\n        const req = e.getTarget();\n        const xml = qx.xml.Document.fromString('<root>' + req.getResponseText() + '</root>');\n        includeElem.replaceWith(...xml.firstChild.childNodes);\n        this.__loadQueue.remove(url);\n        this._checkQueue();\n      }, this);\n      xhr.addListener('statusError', function (e) {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.configError('filenotfound', [xhr.getUrl(), '']);\n        } else {\n          this.configError(status, null);\n        }\n      }, this);\n      xhr.send();\n    },\n\n    /**\n     * Check if everything is loaded and call the callback in this case\n     * @private\n     */\n    _checkQueue: function () {\n      if (this.__loadQueue.length === 0) {\n        this.__doneCallback.call(this.__doneCallbackContext, this.__xml);\n        this.dispose();\n      }\n    },\n\n    /**\n     * Handle errors that occur during loading ot the config file\n     * @param textStatus {String} error status\n     * @param additionalErrorInfo {String} error message\n     */\n    configError: function(textStatus, additionalErrorInfo) {\n      const configSuffix = (cv.Config.configSuffix ? cv.Config.configSuffix : '');\n      const title = qx.locale.Manager.tr('Config-File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid config file!')+'<br/><a href=\"javascript:showConfigErrors(\\'' + configSuffix + '\\')\">'+qx.locale.Manager.tr('Please check!')+'</a>';\n          break;\n        case 'libraryerror': {\n          let link = window.location.href.split('#')[0];\n          if (link.indexOf('?') <= 0) {\n            link += '?';\n          }\n          link += '&libraryCheck=false';\n          message = qx.locale.Manager.tr('Config file has wrong library version!').translate().toString() + '<br/>' +\n            qx.locale.Manager.tr('This can cause problems with your configuration').translate().toString() + '</br>' +\n            '<p>' + qx.locale.Manager.tr('You can run the %1Configuration Upgrader%2.', '<a href=\"javascript:showConfigErrors(\\'' + configSuffix + '\\', {upgradeVersion: true})\">', '</a>').translate().toString() + '</br>' +\n            qx.locale.Manager.tr('Or you can start without upgrading %1with possible configuration problems%2', '<a href=\"' + link + '\">', '</a>').translate().toString() + '</p>';\n          break;\n        }\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: Config file not found. Neither as normal config (%1) nor as demo config (%2).', additionalErrorInfo[0], additionalErrorInfo[1]).translate().toString();\n          message += '<br/>'  + qx.locale.Manager.tr('You can open the manager to create or upload a config file.').translate().toString();\n          actions = {\n            link: [\n              {\n                title: qx.locale.Manager.tr('Open manager'),\n                type: 'manager',\n                action: () => {\n                  qx.core.Init.getApplication().showManager();\n                },\n                needsConfirmation: false\n              }\n            ]\n          };\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n      const notification = {\n        topic: 'cv.config.error',\n        title: title,\n        message: message,\n        severity: 'urgent',\n        unique: true\n      };\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n      this.error(this, message.toString());\n      qx.core.Init.getApplication().block(false);\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function () {\n    // remove references\n    this.__xml = null;\n    this.__doneCallback = null;\n    this.__doneCallbackContext = null;\n  }\n});\n"
  ]
}