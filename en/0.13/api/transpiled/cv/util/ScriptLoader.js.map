{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "__scriptQueue",
    "data",
    "Array",
    "__loaders",
    "__delayedScriptQueue",
    "__markedAsLoaded",
    "statics",
    "markAsLoaded",
    "path",
    "getInstance",
    "isMarkedAsLoaded",
    "includeStylesheet",
    "href",
    "media",
    "Promise",
    "res",
    "rej",
    "el",
    "document",
    "createElement",
    "rel",
    "onload",
    "onerror",
    "log",
    "Logger",
    "error",
    "head",
    "getElementsByTagName",
    "appendChild",
    "includeScript",
    "src",
    "querySelector",
    "properties",
    "allQueued",
    "check",
    "init",
    "apply",
    "event",
    "finished",
    "events",
    "stylesLoaded",
    "designError",
    "members",
    "__listener",
    "addStyles",
    "styleArr",
    "queue",
    "concat",
    "suffix",
    "cv",
    "Config",
    "forceReload",
    "Date",
    "now",
    "promises",
    "forEach",
    "style",
    "uri",
    "resPath",
    "util",
    "ResourceManager",
    "toUri",
    "scssStyle",
    "replace",
    "scssPath",
    "push",
    "ScriptLoader",
    "all",
    "then",
    "debug",
    "fireEvent",
    "reason",
    "includes",
    "addScripts",
    "scriptArr",
    "order",
    "realQueue",
    "i",
    "l",
    "length",
    "resetFinished",
    "append",
    "processQueue",
    "loadIndex",
    "shift",
    "script",
    "splice",
    "loader",
    "__loadSingleScript",
    "addListener",
    "bind",
    "DynamicScriptLoader",
    "_onLoaded",
    "_onFailed",
    "addListenerOnce",
    "remove",
    "removeListener",
    "start",
    "ev",
    "getData",
    "_checkQueue",
    "startsWith",
    "failedDesign",
    "split",
    "fireDataEvent",
    "match",
    "exec",
    "notifications",
    "Router",
    "dispatchMessage",
    "title",
    "locale",
    "Manager",
    "tr",
    "message",
    "severity",
    "deletable",
    "isAllQueued",
    "setFinished",
    "removeListenerById"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ScriptLoader.js"
  ],
  "sourcesContent": [
    "/* ScriptLoader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.util.ScriptLoader', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct() {\n    super();\n    this.__scriptQueue = new qx.data.Array();\n    this.__loaders = new qx.data.Array();\n    this.__delayedScriptQueue = new qx.data.Array();\n    this.__markedAsLoaded = [];\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    markAsLoaded(path) {\n      return this.getInstance().markAsLoaded(path);\n    },\n\n    isMarkedAsLoaded(path) {\n      return this.getInstance().isMarkedAsLoaded(path);\n    },\n\n    /**\n     * Include a CSS file\n     *\n     * @param href {String} Href value\n     * @param media {string?} Content of the media attribute\n     */\n    includeStylesheet(href, media) {\n      return new Promise((res, rej) => {\n        const el = document.createElement('link');\n        el.type = 'text/css';\n        el.rel = 'stylesheet';\n        el.href = href;\n        if (media) {\n          el.media = media;\n        }\n        el.onload = res;\n        el.onerror = () => {\n          qx.log.Logger.error(this, 'error loading ' + href);\n          // always resolve\n          res();\n        };\n        const head = document.getElementsByTagName('head')[0];\n        head.appendChild(el);\n      });\n    },\n\n    /**\n     * Include a JS file with module support\n     *\n     * @param src {String} Href value\n     * @param type {string?} Content of the type attribute\n     */\n    includeScript(src, type) {\n      return new Promise((res, rej) => {\n        const head = document.getElementsByTagName('head')[0];\n        if (!head.querySelector(`:scope > script[src='${src}']`)) {\n          const el = document.createElement('script');\n          if (type) {\n            el.type = type;\n          }\n          el.onload = res;\n          el.onerror = rej;\n          el.src = src;\n          head.appendChild(el);\n        } else {\n          res();\n        }\n      });\n    }\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    allQueued: {\n      check: 'Boolean',\n      init: false,\n      apply: '_checkQueue',\n      event: 'changeAllQueued'\n    },\n\n    finished: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeFinished'\n    }\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    finished: 'qx.event.type.Event',\n    stylesLoaded: 'qx.event.type.Event',\n    designError: 'qx.event.type.Data'\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __scriptQueue: null,\n    __loaders: null,\n    __listener: null,\n    __markedAsLoaded: null,\n\n    addStyles(styleArr) {\n      const queue = typeof styleArr === 'string' ? [styleArr] : styleArr.concat();\n      const suffix = cv.Config.forceReload === true ? '?' + Date.now() : '';\n      let promises = [];\n      queue.forEach(function (style) {\n        let media;\n        let src;\n        if (typeof style === 'string') {\n          src = style;\n        } else if (typeof style === 'object') {\n          src = style.uri;\n          media = style.media;\n        } else {\n          this.error('unknown style parameter type', typeof style);\n        }\n        if (src) {\n          let resPath = qx.util.ResourceManager.getInstance().toUri(src);\n          if (resPath === src) {\n            // this file is unknown to the resource manager, might be a scss source\n            const scssStyle = src.replace(/\\.css$/, '.scss');\n            const scssPath = qx.util.ResourceManager.getInstance().toUri(scssStyle);\n            if (scssStyle !== scssPath) {\n              resPath = scssPath.replace(/\\.scss$/, '.css');\n            }\n          }\n          promises.push(cv.util.ScriptLoader.includeStylesheet(resPath + suffix, media));\n        }\n      }, this);\n      Promise.all(promises)\n        .then(() => {\n          this.debug('styles have been loaded');\n          this.fireEvent('stylesLoaded');\n        })\n        .catch(reason => {\n          this.error('error loading styles', reason);\n          // fire this event anyways, because a non loaded CSS file is no blocker\n          this.fireEvent('stylesLoaded');\n        });\n    },\n\n    markAsLoaded(path) {\n      if (!this.__markedAsLoaded.includes(path)) {\n        this.debug('marking ' + path + ' as loaded');\n        this.__markedAsLoaded.push(path);\n      }\n    },\n\n    isMarkedAsLoaded(path) {\n      return this.__markedAsLoaded.includes(path);\n    },\n\n    addScripts(scriptArr, order) {\n      const queue = typeof scriptArr === 'string' ? [scriptArr] : scriptArr;\n      // make sure that no cached scripts are loaded\n      const suffix = cv.Config.forceReload === true ? '?' + Date.now() : '';\n      const realQueue = [];\n      let i = 0;\n      const l = queue.length;\n      for (; i < l; i++) {\n        if (!this.__markedAsLoaded.includes(queue[i])) {\n          realQueue.push(qx.util.ResourceManager.getInstance().toUri(queue[i]) + suffix);\n        }\n      }\n      if (realQueue.length === 0) {\n        return;\n      }\n      this.debug('queueing ' + realQueue.length + ' scripts');\n      this.resetFinished();\n      this.__scriptQueue.append(realQueue);\n      if (order) {\n        const processQueue = function () {\n          if (order.length > 0) {\n            const loadIndex = order.shift();\n            const script = realQueue.splice(loadIndex, 1)[0];\n            const loader = this.__loadSingleScript(script);\n            loader.addListener('ready', processQueue, this);\n          } else {\n            realQueue.forEach(this.__loadSingleScript, this);\n          }\n        }.bind(this);\n        processQueue();\n      } else {\n        // use an extra DynamicScriptLoader for every single script because loading errors stop the process\n        // and the loader would not try to load the other scripts\n        // queue.forEach(this.__loadSingleScript, this);\n        this.__loadSingleScript(realQueue);\n      }\n    },\n\n    /**\n     * Load one script\n     *\n     * @param script {String} path to script\n     */\n    __loadSingleScript(script) {\n      const loader = new qx.util.DynamicScriptLoader(script);\n      this.__loaders.push(loader);\n      loader.addListener('loaded', this._onLoaded, this);\n      loader.addListener('failed', this._onFailed, this);\n      loader.addListenerOnce('ready', () => {\n        this.__loaders.remove(loader);\n        loader.removeListener('loaded', this._onLoaded, this);\n        loader.removeListener('failed', this._onFailed, this);\n      });\n      loader.start();\n      return loader;\n    },\n\n    _onLoaded(ev) {\n      const data = ev.getData();\n      this.__scriptQueue.remove(data.script);\n      this.debug(data.script + ' loaded');\n      this._checkQueue();\n    },\n\n    _onFailed(ev) {\n      const data = ev.getData();\n      this.__scriptQueue.remove(data.script);\n      if (data.script.startsWith('design')) {\n        const failedDesign = data.script.split('/')[1];\n        this.fireDataEvent('designError', failedDesign);\n      } else if (data.script.includes('/plugins/')) {\n        const match = /.+\\/plugins\\/([\\w]+)\\/index\\.js.*/.exec(data.script);\n        if (match) {\n          cv.core.notifications.Router.dispatchMessage('cv.loading.error', {\n            title: qx.locale.Manager.tr('Error loading plugin \"%1\"', match[1]),\n            message: qx.locale.Manager.tr('File %1 could not be loaded.', data.script),\n\n            severity: 'high',\n            deletable: true\n          });\n        }\n      } else {\n        cv.core.notifications.Router.dispatchMessage('cv.loading.error', {\n          title: qx.locale.Manager.tr('File loading error'),\n          message: qx.locale.Manager.tr('File %1 could not be loaded.', data.script),\n\n          severity: 'high',\n          deletable: true\n        });\n      }\n      this._checkQueue();\n    },\n\n    // property apply\n    _checkQueue() {\n      if (this.__scriptQueue.length === 0) {\n        if (this.isAllQueued()) {\n          this.debug('script loader finished');\n          this.fireEvent('finished');\n          this.setFinished(true);\n        } else if (!this.__listener) {\n          this.debug('script loader waiting for all scripts beeing queued');\n\n          this.__listener = this.addListener('changeAllQueued', ev => {\n            if (ev.getData() === true) {\n              if (this.__scriptQueue.length === 0) {\n                this.debug('script loader finished');\n                this.fireEvent('finished');\n                this.setFinished(true);\n              }\n              this.removeListenerById(this.__listener);\n              this.__listener = null;\n            }\n          });\n        }\n      } else {\n        this.debug(this.__scriptQueue.length + ' scripts remaining');\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}