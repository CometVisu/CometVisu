{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "__scriptQueue",
    "data",
    "Array",
    "__loaders",
    "__delayedScriptQueue",
    "__markedAsLoaded",
    "statics",
    "markAsLoaded",
    "path",
    "getInstance",
    "isMarkedAsLoaded",
    "includeStylesheet",
    "href",
    "media",
    "Promise",
    "res",
    "rej",
    "el",
    "document",
    "createElement",
    "rel",
    "onload",
    "onerror",
    "log",
    "Logger",
    "error",
    "head",
    "getElementsByTagName",
    "appendChild",
    "includeScript",
    "src",
    "querySelector",
    "properties",
    "allQueued",
    "check",
    "init",
    "apply",
    "event",
    "finished",
    "events",
    "stylesLoaded",
    "designError",
    "members",
    "__listener",
    "addStyles",
    "styleArr",
    "queue",
    "concat",
    "suffix",
    "cv",
    "Config",
    "forceReload",
    "Date",
    "now",
    "promises",
    "forEach",
    "style",
    "uri",
    "resPath",
    "util",
    "ResourceManager",
    "toUri",
    "scssStyle",
    "replace",
    "scssPath",
    "push",
    "ScriptLoader",
    "all",
    "then",
    "debug",
    "fireEvent",
    "reason",
    "includes",
    "addScripts",
    "scriptArr",
    "order",
    "realQueue",
    "i",
    "l",
    "length",
    "resetFinished",
    "append",
    "processQueue",
    "loadIndex",
    "shift",
    "script",
    "splice",
    "loader",
    "__loadSingleScript",
    "addListener",
    "bind",
    "DynamicScriptLoader",
    "_onLoaded",
    "_onFailed",
    "addListenerOnce",
    "remove",
    "removeListener",
    "start",
    "ev",
    "getData",
    "_checkQueue",
    "startsWith",
    "failedDesign",
    "split",
    "fireDataEvent",
    "match",
    "exec",
    "notifications",
    "Router",
    "dispatchMessage",
    "title",
    "locale",
    "Manager",
    "tr",
    "message",
    "severity",
    "deletable",
    "isAllQueued",
    "setFinished",
    "removeListenerById"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ScriptLoader.js"
  ],
  "sourcesContent": [
    "/* ScriptLoader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.util.ScriptLoader', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct() {\n    super();\n    this.__scriptQueue = new qx.data.Array();\n    this.__loaders = new qx.data.Array();\n    this.__delayedScriptQueue = new qx.data.Array();\n    this.__markedAsLoaded = [];\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    markAsLoaded(path) {\n      return this.getInstance().markAsLoaded(path);\n    },\n\n    isMarkedAsLoaded(path) {\n      return this.getInstance().isMarkedAsLoaded(path);\n    },\n\n    /**\n     * Include a CSS file\n     *\n     * @param href {String} Href value\n     * @param media {string?} Content of the media attribute\n     */\n    includeStylesheet(href, media) {\n      return new Promise((res, rej) => {\n        const el = document.createElement('link');\n        el.type = 'text/css';\n        el.rel = 'stylesheet';\n        el.href = href;\n        if (media) {\n          el.media = media;\n        }\n        el.onload = res;\n        el.onerror = () => {\n          qx.log.Logger.error(this, 'error loading ' + href);\n          // always resolve\n          res();\n        };\n        const head = document.getElementsByTagName('head')[0];\n        head.appendChild(el);\n      });\n    },\n\n    /**\n     * Include a JS file with module support\n     *\n     * @param src {String} Href value\n     * @param type {string?} Content of the type attribute\n     */\n    includeScript(src, type) {\n      return new Promise((res, rej) => {\n        const head = document.getElementsByTagName('head')[0];\n        if (!head.querySelector(`:scope > script[src='${src}']`)) {\n          const el = document.createElement('script');\n          if (type) {\n            el.type = type;\n          }\n          el.onload = res;\n          el.onerror = rej;\n          el.src = src;\n          head.appendChild(el);\n        } else {\n          res();\n        }\n      });\n    }\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    allQueued: {\n      check: 'Boolean',\n      init: false,\n      apply: '_checkQueue',\n      event: 'changeAllQueued'\n    },\n\n    finished: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeFinished'\n    }\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    finished: 'qx.event.type.Event',\n    stylesLoaded: 'qx.event.type.Event',\n    designError: 'qx.event.type.Data'\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __scriptQueue: null,\n    __loaders: null,\n    __listener: null,\n    __markedAsLoaded: null,\n\n    addStyles(styleArr) {\n      const queue = typeof styleArr === 'string' ? [styleArr] : styleArr.concat();\n      const suffix = cv.Config.forceReload === true ? '?' + Date.now() : '';\n      let promises = [];\n      queue.forEach(function (style) {\n        let media;\n        let src;\n        if (typeof style === 'string') {\n          src = style;\n        } else if (typeof style === 'object') {\n          src = style.uri;\n          media = style.media;\n        } else {\n          this.error('unknown style parameter type', typeof style);\n        }\n        if (src) {\n          let resPath = qx.util.ResourceManager.getInstance().toUri(src);\n          if (resPath === src) {\n            // this file is unknown to the resource manager, might be a scss source\n            const scssStyle = src.replace(/\\.css$/, '.scss');\n            const scssPath = qx.util.ResourceManager.getInstance().toUri(scssStyle);\n            if (scssStyle !== scssPath) {\n              resPath = scssPath.replace(/\\.scss$/, '.css');\n            }\n          }\n          promises.push(cv.util.ScriptLoader.includeStylesheet(resPath + suffix, media));\n        }\n      }, this);\n      Promise.all(promises)\n        .then(() => {\n          this.debug('styles have been loaded');\n          this.fireEvent('stylesLoaded');\n        })\n        .catch(reason => {\n          this.error('error loading styles', reason);\n          // fire this event anyways, because a non loaded CSS file is no blocker\n          this.fireEvent('stylesLoaded');\n        });\n    },\n\n    markAsLoaded(path) {\n      if (!this.__markedAsLoaded.includes(path)) {\n        this.debug('marking ' + path + ' as loaded');\n        this.__markedAsLoaded.push(path);\n      }\n    },\n\n    isMarkedAsLoaded(path) {\n      return this.__markedAsLoaded.includes(path);\n    },\n\n    addScripts(scriptArr, order) {\n      const queue = typeof scriptArr === 'string' ? [scriptArr] : scriptArr;\n      // make sure that no cached scripts are loaded\n      const suffix = cv.Config.forceReload === true ? '?' + Date.now() : '';\n      const realQueue = [];\n      let i = 0;\n      const l = queue.length;\n      for (; i < l; i++) {\n        if (!this.__markedAsLoaded.includes(queue[i])) {\n          realQueue.push(qx.util.ResourceManager.getInstance().toUri(queue[i]) + suffix);\n        }\n      }\n      if (realQueue.length === 0) {\n        return;\n      }\n      this.debug('queueing ' + realQueue.length + ' scripts');\n      this.resetFinished();\n      this.__scriptQueue.append(realQueue);\n      if (order) {\n        const processQueue = function () {\n          if (order.length > 0) {\n            const loadIndex = order.shift();\n            const script = realQueue.splice(loadIndex, 1)[0];\n            const loader = this.__loadSingleScript(script);\n            loader.addListener('ready', processQueue, this);\n          } else {\n            realQueue.forEach(this.__loadSingleScript, this);\n          }\n        }.bind(this);\n        processQueue();\n      } else {\n        // use an extra DynamicScriptLoader for every single script because loading errors stop the process\n        // and the loader would not try to load the other scripts\n        // queue.forEach(this.__loadSingleScript, this);\n        this.__loadSingleScript(realQueue);\n      }\n    },\n\n    /**\n     * Load one script\n     *\n     * @param script {String} path to script\n     */\n    __loadSingleScript(script) {\n      const loader = new qx.util.DynamicScriptLoader(script);\n      this.__loaders.push(loader);\n      loader.addListener('loaded', this._onLoaded, this);\n      loader.addListener('failed', this._onFailed, this);\n      loader.addListenerOnce('ready', () => {\n        this.__loaders.remove(loader);\n        loader.removeListener('loaded', this._onLoaded, this);\n        loader.removeListener('failed', this._onFailed, this);\n      });\n      loader.start();\n      return loader;\n    },\n\n    _onLoaded(ev) {\n      const data = ev.getData();\n      this.__scriptQueue.remove(data.script);\n      this.debug(data.script + ' loaded');\n      this._checkQueue();\n    },\n\n    _onFailed(ev) {\n      const data = ev.getData();\n      this.__scriptQueue.remove(data.script);\n      if (data.script.startsWith('design')) {\n        const failedDesign = data.script.split('/')[1];\n        this.fireDataEvent('designError', failedDesign);\n      } else if (data.script.includes('/plugins/')) {\n        const match = /.+\\/plugins\\/([\\w]+)\\/index\\.js.*/.exec(data.script);\n        if (match) {\n          cv.core.notifications.Router.dispatchMessage('cv.loading.error', {\n            title: qx.locale.Manager.tr('Error loading plugin \"%1\"', match[1]),\n            message: qx.locale.Manager.tr('File %1 could not be loaded.', data.script),\n\n            severity: 'high',\n            deletable: true\n          });\n        }\n      } else {\n        cv.core.notifications.Router.dispatchMessage('cv.loading.error', {\n          title: qx.locale.Manager.tr('File loading error'),\n          message: qx.locale.Manager.tr('File %1 could not be loaded.', data.script),\n\n          severity: 'high',\n          deletable: true\n        });\n      }\n      this._checkQueue();\n    },\n\n    // property apply\n    _checkQueue() {\n      if (this.__scriptQueue.length === 0) {\n        if (this.isAllQueued()) {\n          this.debug('script loader finished');\n          this.fireEvent('finished');\n          this.setFinished(true);\n        } else if (!this.__listener) {\n          this.debug('script loader waiting for all scripts beeing queued');\n\n          this.__listener = this.addListener('changeAllQueued', ev => {\n            if (ev.getData() === true) {\n              if (this.__scriptQueue.length === 0) {\n                this.debug('script loader finished');\n                this.fireEvent('finished');\n                this.setFinished(true);\n              }\n              this.removeListenerById(this.__listener);\n              this.__listener = null;\n            }\n          });\n        }\n      } else {\n        this.debug(this.__scriptQueue.length + ' scripts remaining');\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}