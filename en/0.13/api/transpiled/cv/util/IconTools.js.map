{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "hexColorRegEx",
    "colorMapping",
    "white",
    "orange",
    "red",
    "green",
    "blue",
    "purple",
    "yellow",
    "grey",
    "black",
    "iconCache",
    "iconCacheMap",
    "iconDelay",
    "iconDelayFn",
    "tmpCanvas",
    "tmpCtx",
    "preloadedKUFicons",
    "iconDelayed",
    "icon",
    "colors",
    "color",
    "cv",
    "util",
    "IconTools",
    "push",
    "setInterval",
    "length",
    "fillRecoloredIcon",
    "shift",
    "clearInterval",
    "createCanvas",
    "iconId",
    "styling",
    "classes",
    "fillCanvas",
    "canvas",
    "imageData",
    "width",
    "height",
    "getContext",
    "putImageData",
    "innerRecolorLoop",
    "navigator",
    "userAgent",
    "toLowerCase",
    "indexOf",
    "parseFloat",
    "slice",
    "r",
    "g",
    "b",
    "data",
    "i",
    "a",
    "doRecolorNonTransparent",
    "thisIcon",
    "thisIconColors",
    "drawImage",
    "getImageData",
    "undefined",
    "test",
    "log",
    "Logger",
    "error",
    "parseInt",
    "substr",
    "recolorNonTransparent",
    "url",
    "loadHandler",
    "toFill",
    "thisFillColor",
    "pop",
    "asText",
    "Image",
    "onload",
    "src",
    "id",
    "c",
    "complete",
    "newCanvas",
    "template",
    "document",
    "createElement",
    "innerHTML",
    "newElement",
    "content",
    "firstChild",
    "parameters",
    "Array",
    "prototype",
    "filter",
    "call",
    "classList",
    "name",
    "cacheEntry",
    "coloredIcon",
    "svgKUF",
    "iconID",
    "iconPath",
    "Application",
    "getRelativeResourcePath",
    "ScriptLoader",
    "includeStylesheet",
    "forceRemote",
    "style",
    "setAttribute",
    "add",
    "defer",
    "self"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/IconTools.js"
  ],
  "sourcesContent": [
    "/* IconTools.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * @author Christian Mayer\n * @since 2015\n */\nqx.Class.define('cv.util.IconTools', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    // \"global\" functions (=> state less)\n    /**\n     * RegEx to determine a valid CSS style color like #rrggbb\n     * @type {RegExp}\n     */\n    hexColorRegEx: /#[0-9a-fA-F]{6}/,\n    /**\n     * as a convenience, definition of a few colors\n     * @type {Object<string, string>}\n     */\n    colorMapping: {\n      white: '#ffffff',\n      orange: '#ff8000',\n      red: '#ff4444',\n      green: '#44ff44',\n      blue: '#4444ff',\n      purple: '#ff44ff',\n      yellow: '#ffff00',\n      grey: '#777777',\n      black: '#000000'\n    },\n\n    /**\n     * @typedef iconCacheEntryHash\n     * @type {Object}\n     * @property {HTMLImageElement} icon - the original Image() of the icon\n     * @property {number} id - the unique ID for this icon\n     * @property {Object.<string, ImageData>} colors - cache all the transformed ImageDatas\n     * @property {string[]} toFill - all the icon colors to fill once the image was loaded\n     */\n\n    /**\n     * the Image() of all knows (i.e. used) icons\n     * @type {Object.<string, iconCacheEntryHash>}\n     */\n    iconCache: {},\n    /**\n     * mapping of ID to Cache entry (URL)\n     */\n    iconCacheMap: [],\n    /**\n     * array of all icons to fill where the Image is not ready yet\n     * @type {Array.<Array<(HTMLCanvasElement|SVGElement), Object.<string, ImageData>, string>>}\n     */\n    iconDelay: [],\n    /**\n     * handler for delay function\n     * @type {Function}\n     */\n    iconDelayFn: null,\n\n    tmpCanvas: null,\n    tmpCtx: null,\n    /**\n     * Were the KNX User Forum icons already preloaded?\n     * Only done when the config is using them\n     * @type {boolean}\n     */\n    preloadedKUFicons: false,\n\n    /**\n     *\n     * @param {(HTMLCanvasElement|SVGElement)} icon\n     * @param {Object.<string, ImageData>} colors\n     * @param {string} color\n     */\n    iconDelayed(icon, colors, color) {\n      cv.util.IconTools.iconDelay.push([icon, colors, color]);\n      if (!cv.util.IconTools.iconDelayFn) {\n        cv.util.IconTools.iconDelayFn = setInterval(function () {\n          while (cv.util.IconTools.iconDelay.length) {\n            // it should be enough to test only the first element - the other\n            // elements will be covered anyway...\n            if (cv.util.IconTools.iconDelay[0][2] in cv.util.IconTools.iconDelay[0][1]) {\n              cv.util.IconTools.fillRecoloredIcon(cv.util.IconTools.iconDelay.shift()[0]);\n            } else {\n              break;\n            }\n          }\n\n          if (cv.util.IconTools.iconDelay.length === 0) {\n            clearInterval(cv.util.IconTools.iconDelayFn);\n            cv.util.IconTools.iconDelayFn = 0;\n          }\n        }, 10);\n      }\n    },\n    /**\n     * Create the HTML for the canvas element and return it.\n     * @param {string} iconId\n     * @param {string?} styling\n     * @param {string?} classes\n     * @returns {string}\n     */\n    createCanvas(iconId, styling = '', classes = '') {\n      return '<canvas class=\"' + iconId + ' ' + classes + '\" ' + styling + '/>';\n    },\n    /**\n     * Fill the canvas with the ImageData. Also resize the\n     * canvas at the same time.\n     * @param {HTMLCanvasElement} canvas\n     * @param {ImageData} imageData\n     */\n    fillCanvas(canvas, imageData) {\n      canvas.width = imageData.width;\n      canvas.height = imageData.height;\n      canvas.getContext('2d').putImageData(imageData, 0, 0);\n    },\n    /**\n     * Two versions of a recoloring function to work around an Android bug:\n     * http://stackoverflow.com/questions/14969496/html5-canvas-pixel-manipulation-problems-on-mobile-devices-when-setting-the-alph\n     * https://code.google.com/p/android/issues/detail?id=17565\n     * @param {number} r\n     * @param {number} g\n     * @param {number} b\n     * @param {number[]} data\n     * @param {number} length\n     */\n    innerRecolorLoop:\n      navigator.userAgent.toLowerCase().indexOf('android') > -1 &&\n      parseFloat(navigator.userAgent.slice(navigator.userAgent.toLowerCase().indexOf('android') + 8)) < 4.4\n        ? function (r, g, b, data, length) {\n            // for Android version < 4.4\n            for (let i = 0; i < length; i += 4) {\n              const a = data[i + 3];\n              if (a > 127) {\n                data[i] = r;\n                data[i + 1] = g;\n                data[i + 2] = b;\n                data[i + 3] = 255;\n              } else {\n                // brute force it...\n                data[i] = 0;\n                data[i + 1] = 0;\n                data[i + 2] = 0;\n                data[i + 3] = 0;\n              }\n            }\n          }\n        : function (r, g, b, data, length) {\n            // the normal version\n            for (let i = 0; i < length; i += 4) {\n              if (data[i + 3] !== 0) {\n                data[i] = r;\n                data[i + 1] = g;\n                data[i + 2] = b;\n              }\n            }\n          },\n    /**\n     * Do the recoloring based on `thisIcon` and store it in the\n     * hash `thisIconColors`.\n     * @param {string} color - color in the CSS style #rrggbb\n     * @param {HTMLImageElement} thisIcon\n     * @param {Object.<string, iconCacheEntryHash>} thisIconColors\n     */\n    doRecolorNonTransparent(color, thisIcon, thisIconColors) {\n      if (thisIconColors[color]) {\n        return; // done, already recolored\n      }\n      const width = (cv.util.IconTools.tmpCanvas.width = thisIcon.width);\n      const height = (cv.util.IconTools.tmpCanvas.height = thisIcon.height);\n      if (width === 0 || height === 0) {\n        return; // most likely: the image didn't exist - anyway nothing to do here\n      }\n      cv.util.IconTools.tmpCtx.drawImage(thisIcon, 0, 0);\n\n      const imageData = cv.util.IconTools.tmpCtx.getImageData(0, 0, width, height);\n\n      if (color !== undefined) {\n        if (!cv.util.IconTools.hexColorRegEx.test(color)) {\n          qx.log.Logger.error(\n            this,\n            'Error! \"' + color + '\" is not a valid color for icon recoloring! It must have a shape like \"#rrggbb\".'\n          );\n        }\n        const r = parseInt(color.substr(1, 2), 16);\n        const g = parseInt(color.substr(3, 2), 16);\n        const b = parseInt(color.substr(5, 2), 16);\n        cv.util.IconTools.innerRecolorLoop(r, g, b, imageData.data, width * height * 4);\n      }\n      thisIconColors[color] = imageData;\n    },\n\n    /**\n     * Function to call for each icon that should be dynamically recolored.\n     * This will be called for each known URL, so only remember the string but\n     * don't load the image yet as it might not be needed.\n     * @param {string} url\n     * @returns {recolorCallback} a function that will append the recolored image to\n     * the jQuery element passed to that function\n     */\n    recolorNonTransparent(url) {\n      const loadHandler = function () {\n        const toFill = cv.util.IconTools.iconCache[url].toFill;\n        const thisIcon = cv.util.IconTools.iconCache[url].icon;\n        const thisIconColors = cv.util.IconTools.iconCache[url].colors;\n        let thisFillColor;\n        while ((thisFillColor = toFill.pop())) {\n          // eslint-disable-line no-cond-assign\n          cv.util.IconTools.doRecolorNonTransparent(thisFillColor, thisIcon, thisIconColors);\n        }\n      };\n\n      /**\n       * @callback recolorCallback\n       * will be called for each color that is actually used\n       * => load image for all colors\n       * => transform image\n       * @param {string} color - color in CSS style, i.e. #rrggbb\n       * @param {string} styling\n       * @param {string} classes\n       * @param {boolean?} asText\n       */\n      return function (color, styling, classes, asText) {\n        if (undefined === cv.util.IconTools.iconCache[url]) {\n          const thisIcon = new Image();\n          thisIcon.onload = loadHandler;\n          thisIcon.src = url;\n\n          cv.util.IconTools.iconCache[url] = {\n            icon: thisIcon, // the original Image() of the icon\n            id: cv.util.IconTools.iconCacheMap.length, // the unique ID for this icon\n            colors: {}, // cache all the transformed ImageDatas\n            toFill: [] // all the icon colors to fill once the image was loaded\n          };\n          cv.util.IconTools.iconCacheMap.push(url);\n        }\n\n        if (!color) {\n          color = '#ffffff';\n        }\n        if (color in cv.util.IconTools.colorMapping) {\n          color = cv.util.IconTools.colorMapping[color];\n        }\n        const c = 'icon' + cv.util.IconTools.iconCache[url].id + '_' + color.substr(1, 6);\n        cv.util.IconTools.iconCache[url].toFill.push(color);\n\n        // when already available - fill it now. Otherwise the onLoad will do it.\n        if (cv.util.IconTools.iconCache[url].icon.complete) {\n          loadHandler();\n        }\n        const newCanvas = cv.util.IconTools.createCanvas(c, styling, classes);\n        if (asText) {\n          return newCanvas;\n        }\n        let template = document.createElement('template');\n        template.innerHTML = newCanvas;\n        const newElement = template.content.firstChild;\n        if (cv.util.IconTools.iconCache[url].icon.complete) {\n          cv.util.IconTools.fillCanvas(newElement, cv.util.IconTools.iconCache[url].colors[color]);\n        } else {\n          cv.util.IconTools.iconDelayed(newElement, cv.util.IconTools.iconCache[url].colors, color);\n        }\n        return newElement;\n      };\n    },\n\n    /**\n     * This function must be called to fill a specific icon that was created.\n     * Is will be colored based on it's class name.\n     * @param {(HTMLCanvasElement|SVGElement)} icon\n     */\n    fillRecoloredIcon(icon) {\n      const parameters = Array.prototype.filter.call(icon.classList, name => name !== 'icon');\n\n      if (parameters.length === 2) {\n        const cacheEntry = cv.util.IconTools.iconCache[cv.util.IconTools.iconCacheMap[parameters[0]]];\n\n        const coloredIcon = cacheEntry.colors['#' + parameters[1]];\n\n        if (undefined === coloredIcon) {\n          cv.util.IconTools.iconDelayed(icon, cacheEntry.colors, '#' + parameters[1]);\n        } else {\n          cv.util.IconTools.fillCanvas(icon, coloredIcon);\n        }\n      }\n    },\n\n    /**\n     * @param {string} iconID\n     * @returns {recolorCallback}\n     */\n    svgKUF(iconID) {\n      if (!this.preloadedKUFicons) {\n        this.preloadedKUFicons = true;\n        const iconPath = cv.Application.getRelativeResourcePath() + 'icons/fonts/knx-uf-iconset.css';\n        cv.util.ScriptLoader.includeStylesheet(iconPath);\n      }\n      /**\n       * @param {string} color - color in CSS style, i.e. #rrggbb\n       * @param {string} styling\n       * @param {string} classes\n       * @param {boolean?} asText\n       * @param {boolean?} forceRemote - force to load the icon remotely, e.g. as it could be that it's not inside the\n       *          DOM; this is relevant only for special cases when the normal DOM might not be ready\n       */\n      return function (color, styling, classes, asText, forceRemote = false) {\n        // use relative path here, otherwise it won't work in replay mode\n\n        if (color in cv.util.IconTools.colorMapping) {\n          color = cv.util.IconTools.colorMapping[color];\n        }\n\n        let style = styling || '';\n        if (color) {\n          style += 'color:' + color + ';';\n        }\n        if (asText) {\n          if (style) {\n            style = ' style=\"' + style + '\"';\n          }\n          return '<i' + style + ' class=\"knxuf-' + iconID + ' ' + classes + '\"></i>';\n        }\n        let icon = document.createElement('i');\n        if (classes) {\n          icon.setAttribute('class', classes);\n        }\n        icon.classList.add('knxuf-' + iconID);\n        if (style) {\n          icon.setAttribute('style', style);\n        }\n        return icon;\n      };\n    }\n  },\n\n  defer() {\n    const canvas = document.createElement('canvas');\n    this.defer.self.tmpCanvas = canvas;\n    this.defer.self.tmpCtx = canvas.getContext('2d');\n  }\n});\n"
  ],
  "mappings": "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"
}