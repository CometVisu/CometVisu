{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "members",
    "__indentation",
    "__log",
    "upgrade",
    "source",
    "xml",
    "Document",
    "fromString",
    "pagesNode",
    "documentElement",
    "isTileStructure",
    "tagName",
    "toLowerCase",
    "systemLibVersion",
    "cv",
    "Version",
    "LIBRARY_VERSION_TILE",
    "LIBRARY_VERSION_PURE",
    "version",
    "parseInt",
    "getAttribute",
    "suffix",
    "method",
    "call",
    "locale",
    "Manager",
    "tr",
    "info",
    "join",
    "from7to8Pure",
    "c",
    "querySelectorAll",
    "forEach",
    "node",
    "parent",
    "parentNode",
    "indentNode",
    "previousSibling",
    "removeChild",
    "nodeType",
    "__setVersion",
    "push",
    "from8to9Pure",
    "singleIndent",
    "padEnd",
    "level",
    "__getLevel",
    "indent",
    "buttonConf",
    "attributesToDelete",
    "nameRegex",
    "i",
    "l",
    "attributes",
    "length",
    "match",
    "exec",
    "name",
    "prototype",
    "hasOwnProperty",
    "value",
    "attr",
    "removeAttributeNode",
    "buttonIds",
    "keys",
    "sort",
    "buttons",
    "createElement",
    "bid",
    "button",
    "textContent",
    "label",
    "setAttribute",
    "ind",
    "createTextNode",
    "appendChild",
    "nodeName",
    "isTile",
    "convertPureToTile",
    "sourceXml",
    "rootNode",
    "target",
    "document",
    "implementation",
    "createDocument",
    "targetRoot",
    "createAttributeNS",
    "setAttributeNodeNS",
    "header",
    "nav",
    "menu",
    "main",
    "_convertElement",
    "pageIds",
    "util",
    "Prettifier",
    "element",
    "options",
    "id",
    "postfix",
    "startsWith",
    "backends",
    "debug",
    "hasAttribute",
    "child",
    "clonedChild",
    "elem",
    "childNodes",
    "Node",
    "CDATA_SECTION_NODE",
    "COMMENT_NODE",
    "cloneNode",
    "ELEMENT_NODE",
    "ownerDocument",
    "mapping",
    "_copyAttributes",
    "_copyChildren",
    "styling",
    "fileNode",
    "loader",
    "trim",
    "icon",
    "indexOf",
    "parentElement",
    "remove",
    "entry",
    "removeAttribute",
    "backend",
    "type",
    "username",
    "password",
    "insertBefore",
    "firstChild",
    "querySelector",
    "warn",
    "on_value",
    "off_value",
    "_copyAddresses",
    "_copyLabel",
    "format",
    "address",
    "down",
    "up",
    "upAddress",
    "tile",
    "append",
    "sourceLabel",
    "row",
    "createComment",
    "TEXT_NODE",
    "outerHTML",
    "replaceAll",
    "converters",
    "converter",
    "addresses",
    "slotName",
    "callback",
    "e",
    "ConfigUpgrader"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ConfigUpgrader.js"
  ],
  "sourcesContent": [
    "/* ConfigUpgrader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Upgrade config file to the current library version\n * @since 0.12.0\n * @author Tobias Br√§utigam\n */\nqx.Class.define('cv.util.ConfigUpgrader', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __indentation: 2,\n    __log: null,\n\n    /**\n     * Upgrade config source\n     * @param source {String|Document} content of a config file\n     */\n    upgrade(source) {\n      this.__log = [];\n      if (typeof source === 'string') {\n        source = qx.xml.Document.fromString(source);\n      }\n      // read version from config\n      const pagesNode = source.documentElement;\n      const isTileStructure = pagesNode.tagName.toLowerCase() === 'config';\n      const systemLibVersion = isTileStructure ? cv.Version.LIBRARY_VERSION_TILE : cv.Version.LIBRARY_VERSION_PURE;\n      let version = isTileStructure\n        ? parseInt(pagesNode.getAttribute('version'))\n        : parseInt(pagesNode.getAttribute('lib_version'));\n      if (version === cv.Version.LIBRARY_VERSION_PURE) {\n        // nothing to do\n        return [null, source, this.__log];\n      }\n      const suffix = isTileStructure ? 'Tile' : 'Pure';\n      while (version < systemLibVersion) {\n        // upgrade step by step\n        const method = this['from' + version + 'to' + (version + 1) + suffix];\n        if (method) {\n          version = method.call(this, source);\n        } else {\n          return [qx.locale.Manager.tr('Upgrader from version %1 not implemented', version), source, this.__log];\n        }\n      }\n      this.info('  - ' + this.__log.join('\\n  - '));\n      return [null, source, this.__log];\n    },\n\n    from7to8Pure(source) {\n      let c = 0;\n      source.querySelectorAll('plugins > plugin[name=\\'gweather\\']').forEach(node => {\n        const parent = node.parentNode;\n        const indentNode = node.previousSibling;\n        parent.removeChild(node);\n        if (indentNode.nodeType === 3) {\n          parent.removeChild(indentNode);\n        }\n        c++;\n      });\n      this.__setVersion(source, 8);\n      if (c > 0) {\n        this.__log.push('removed ' + c + ' \\'plugin\\'-nodes with obsolete plugin (gweather)');\n      }\n      return 8;\n    },\n\n    from8to9Pure(source) {\n      let c = 0;\n      const singleIndent = ''.padEnd(this.__indentation, ' ');\n      source.querySelectorAll('multitrigger').forEach(node => {\n        let level = this.__getLevel(node);\n        level++;\n        const indent = ''.padEnd(this.__indentation * level, ' ');\n        const buttonConf = {};\n        const attributesToDelete = [];\n        const nameRegex = /^button([\\d]+)(label|value)$/;\n        for (let i = 0, l = node.attributes.length; i < l; i++) {\n          const match = nameRegex.exec(node.attributes[i].name);\n          if (match) {\n            if (!Object.prototype.hasOwnProperty.call(buttonConf, match[1])) {\n              buttonConf[match[1]] = {};\n            }\n            buttonConf[match[1]][match[2]] = node.attributes[i].value;\n            attributesToDelete.push(node.attributes[i]);\n          }\n        }\n        attributesToDelete.forEach(attr => node.removeAttributeNode(attr));\n        const buttonIds = Object.keys(buttonConf).sort();\n        if (buttonIds.length > 0) {\n          const buttons = source.createElement('buttons');\n          buttonIds.forEach(bid => {\n            const button = source.createElement('button');\n            button.textContent = buttonConf[bid].value;\n            if (buttonConf[bid].label) {\n              button.setAttribute('label', buttonConf[bid].label);\n            }\n            const ind = source.createTextNode('\\n' + indent + singleIndent);\n            buttons.appendChild(ind);\n            buttons.appendChild(button);\n          });\n          buttons.appendChild(source.createTextNode('\\n' + indent));\n          node.appendChild(source.createTextNode(singleIndent));\n          node.appendChild(buttons);\n          node.appendChild(source.createTextNode('\\n' + ''.padEnd(this.__indentation * (level - 1), ' ')));\n\n          c++;\n        }\n      });\n      if (c > 0) {\n        this.__log.push('converted ' + c + ' \\'multitrigger\\'-nodes to new button configuration');\n      }\n      c = 0;\n      source.querySelectorAll('plugins > plugin[name=\\'colorchooser\\']').forEach(node => {\n        const parent = node.parentNode;\n        const indentNode = node.previousSibling;\n        parent.removeChild(node);\n        if (indentNode.nodeType === 3) {\n          parent.removeChild(indentNode);\n        }\n        c++;\n      });\n      if (c > 0) {\n        this.__log.push('removed ' + c + ' \\'plugin\\'-nodes with obsolete plugin (colorchooser)');\n      }\n      this.__setVersion(source, 9);\n      return 9;\n    },\n\n    __getLevel(node) {\n      let level = 1;\n      let parent = node.parentNode;\n      while (parent && parent.nodeName !== 'pages') {\n        parent = parent.parentNode;\n        level++;\n      }\n      return level;\n    },\n\n    __setVersion(xml, version, isTile) {\n      if (isTile === true) {\n        xml.documentElement.setAttribute('version', version);\n      } else {\n        xml.documentElement.setAttribute('lib_version', version);\n      }\n    },\n\n    /**\n     * Converts a pure-config file to a tile-config file. Currently only a small amount widgets can be converted\n     * because they have a similar equivalent in the tile-structure. This is the list of converted widgets:\n     *  - Pages\n     *  - Meta-Area (only mappings, stylings and files)\n     *  - Switch (without mappings, stylings)\n     *  - Info\n     *  - Pushbutton (without mappings, stylings)\n     *  - Trigger (without mappings, stylings)\n     *  - Group (only the ones that do not have nowidget=\"true\")\n     *\n     *  Whats not working:\n     *  - Everything that uses templates\n     *  - All other widgets that have not been mentioned above\n     *\n     * @param sourceXml {XMLDocument|string}\n     * @return [{String}, {String}] Error, Result\n     */\n    convertPureToTile(sourceXml) {\n      if (typeof sourceXml === 'string') {\n        sourceXml = qx.xml.Document.fromString(sourceXml);\n      }\n      const rootNode = sourceXml.documentElement;\n      if (rootNode.tagName.toLowerCase() === 'pages') {\n        const target = document.implementation.createDocument(null, 'config');\n        const targetRoot = target.documentElement;\n        targetRoot.setAttribute('version', '1');\n        const attr = target.createAttributeNS('http://www.w3.org/2001/XMLSchema-instance', 'noNamespaceSchemaLocation');\n\n        attr.value = '../visu_config_tile.xsd';\n        targetRoot.setAttributeNodeNS(attr);\n\n        // add some basics\n        const header = target.createElement('header');\n        const nav = target.createElement('nav');\n        const menu = target.createElement('cv-menu');\n        menu.setAttribute('model', 'pages');\n        nav.appendChild(menu);\n        header.appendChild(nav);\n        targetRoot.appendChild(header);\n        const main = target.createElement('main');\n        targetRoot.appendChild(main);\n\n        this._convertElement(targetRoot, rootNode, { pageIds: [] });\n        //console.log(new XMLSerializer().serializeToString(target));\n        return ['', cv.util.Prettifier.xml(target)];\n      }\n      return [qx.locale.Manager.tr('This is no pure-structure config, root element pages not found'), ''];\n    },\n\n    /**\n     * @param target {Element}\n     * @param element {Element}\n     * @param options {Object}\n     * @private\n     */\n    _convertElement(target, element, options) {\n      if (!options) {\n        options = {};\n      }\n      const tagName = element.tagName.toLowerCase();\n      let attr;\n      let id;\n      let postfix;\n\n      switch (tagName) {\n        case 'pages':\n          for (let i = element.attributes.length - 1; i >= 0; i--) {\n            attr = element.attributes[i];\n            if (attr.name.startsWith('backend')) {\n              if (!options.backends) {\n                options.backends = {};\n              }\n              options.backends[attr.name] = attr.value;\n            } else {\n              switch (attr.name) {\n                case 'username':\n                case 'password':\n                  if (!options.backends) {\n                    options.backends = {};\n                  }\n                  options.backends[attr.name] = attr.value;\n                  break;\n\n                default:\n                  this.debug(`ignoring attribute ${attr.name} from element ${tagName}`);\n\n                  break;\n              }\n            }\n          }\n          break;\n\n        case 'page':\n          postfix = options.pageIds.length;\n          id = 'page-' + postfix;\n          if (element.hasAttribute('name')) {\n            target.setAttribute('name', element.getAttribute('name'));\n          }\n          target.setAttribute('id', id);\n          options.pageIds.push(id);\n          break;\n      }\n\n      // traverse children\n      let child;\n      let clonedChild;\n      let elem;\n      let value;\n      for (let i = 0; i < element.childNodes.length; i++) {\n        child = element.childNodes[i];\n        switch (child.nodeType) {\n          case Node.CDATA_SECTION_NODE:\n          case Node.COMMENT_NODE:\n            // just copy\n            target.appendChild(child.cloneNode());\n            break;\n\n          case Node.ELEMENT_NODE:\n            switch (child.tagName.toLowerCase()) {\n              case 'meta':\n                clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n\n                // copy mappings\n                child.querySelectorAll('mappings > mapping').forEach(node => {\n                  const mapping = target.ownerDocument.createElement('cv-mapping');\n                  this._copyAttributes(node, mapping);\n                  this._copyChildren(node, mapping);\n                  clonedChild.appendChild(mapping);\n                });\n                child.querySelectorAll('stylings > styling').forEach(node => {\n                  const styling = target.ownerDocument.createElement('cv-styling');\n                  this._copyAttributes(node, styling);\n                  this._copyChildren(node, styling);\n                  clonedChild.appendChild(styling);\n                });\n                // convert files to loader\n                child.querySelectorAll('file').forEach(fileNode => {\n                  const loader = target.ownerDocument.createElement('cv-loader');\n                  loader.setAttribute('type', fileNode.getAttribute('type'));\n                  loader.setAttribute('src', fileNode.textContent.trim());\n                  clonedChild.appendChild(loader);\n                });\n                // prefix all icons with knxuf-\n                clonedChild.querySelectorAll('icon').forEach(icon => {\n                  // there is no real check if this is an KNXUF icon, so we only check for '_' in string\n                  let name = icon.getAttribute('name');\n                  if (name.indexOf('_') >= 0) {\n                    name = 'knxuf-' + name;\n                  }\n                  icon.parentElement.textContent = name;\n                  icon.remove();\n                });\n\n                clonedChild.querySelectorAll('entry').forEach(entry => {\n                  if (entry.hasAttribute('range_min')) {\n                    entry.setAttribute('range-min', entry.getAttribute('range_min'));\n\n                    entry.removeAttribute('range_min');\n                  }\n                  if (entry.hasAttribute('range_max')) {\n                    entry.setAttribute('range-max', entry.getAttribute('range_max'));\n\n                    entry.removeAttribute('range_max');\n                  }\n                });\n\n                if (options.backends) {\n                  if (options.backends.backend) {\n                    const backend = target.ownerDocument.createElement('cv-backend');\n                    let type;\n                    switch (options.backends.backend) {\n                      case 'oh2':\n                      case 'oh':\n                      case 'openhab2':\n                        type = 'openhab';\n                        break;\n\n                      case 'default':\n                      case 'cgi-bin':\n                        type = 'knxd';\n                        break;\n\n                      default:\n                        type = options.backends.backend;\n                        break;\n                    }\n\n                    backend.setAttribute('type', type);\n                    if (options.backends['backend-' + type + '-url']) {\n                      backend.setAttribute('uri', options.backends['backend-' + type + '-url']);\n                    }\n                    if (options.backends.username) {\n                      backend.setAttribute('username', options.backends.username);\n                    }\n                    if (options.backends.password) {\n                      backend.setAttribute('password', options.backends.password);\n                    }\n                  }\n                }\n                target.ownerDocument.documentElement.insertBefore(\n                  clonedChild,\n                  target.ownerDocument.documentElement.firstChild\n                );\n\n                break;\n\n              case 'page':\n                clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n\n                // flatten first two page levels\n                if (\n                  child.parentElement.tagName.toLowerCase() === 'pages' ||\n                  child.parentElement.parentElement.tagName.toLowerCase() === 'pages'\n                ) {\n                  const main = target.ownerDocument.querySelector('main');\n                  main.appendChild(clonedChild);\n                } else {\n                  target.appendChild(clonedChild);\n                }\n                this._convertElement(clonedChild, child, options);\n                break;\n\n              case 'group':\n                if (child.getAttribute('nowidget') === 'true') {\n                  this.warn('skipping nowidget-groups');\n                } else {\n                  clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n\n                  clonedChild.setAttribute('open', 'true');\n                  if (child.hasAttribute('name')) {\n                    clonedChild.setAttribute('name', child.getAttribute('name'));\n                  }\n                  target.appendChild(clonedChild);\n                  this._convertElement(clonedChild, child, options);\n                }\n                break;\n\n              case 'switch':\n                clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n\n                // do not copy mappings and styling as they might not work for switched in most of the cases\n                // and we want to used the default ones in the first place\n                this._copyAttributes(child, clonedChild, {\n                  on_value: 'on-value',\n                  off_value: 'off-value'\n                });\n\n                if (child.getAttribute('bind_click_to_widget') === 'false') {\n                  // only copy when this ix explicitly set\n                  clonedChild.setAttribute('whole-tile', 'false');\n                }\n                this._copyAddresses(child.querySelectorAll(':scope > address'), clonedChild, 'address');\n\n                this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'primaryLabel');\n\n                target.appendChild(clonedChild);\n                break;\n\n              case 'trigger':\n                clonedChild = target.ownerDocument.createElement('cv-switch');\n                this._copyAttributes(child, clonedChild, {\n                  format: true\n                });\n\n                value = child.getAttribute('value');\n                this._copyAddresses(\n                  child.querySelectorAll(':scope > address'),\n                  clonedChild,\n                  'address',\n                  null,\n                  address => {\n                    address.setAttribute('mode', 'write');\n                    address.setAttribute('value', value);\n                  }\n                );\n\n                this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'primaryLabel');\n\n                target.appendChild(clonedChild);\n                break;\n\n              case 'pushbutton':\n                clonedChild = target.ownerDocument.createElement('cv-switch');\n                this._copyAttributes(child, clonedChild, {\n                  format: true\n                });\n\n                value = {\n                  down: child.getAttribute('downValue'),\n                  up: child.getAttribute('upValue')\n                };\n\n                this._copyAddresses(\n                  child.querySelectorAll(':scope > address'),\n                  clonedChild,\n                  'address',\n                  null,\n                  address => {\n                    if (!address.hasAttribute('variant')) {\n                      address.setAttribute('value', value.down);\n                      address.setAttribute('on', 'down');\n                      const upAddress = address.cloneNode(true);\n                      upAddress.setAttribute('value', value.up);\n                      upAddress.setAttribute('on', 'up');\n                      clonedChild.appendChild(upAddress);\n                    } else {\n                      address.setAttribute('value', address.getAttribute('variant') === 'up' ? value.up : value.down);\n\n                      address.setAttribute('on', address.getAttribute('variant'));\n\n                      address.removeAttribute('variant');\n                    }\n                  }\n                );\n\n                this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'primaryLabel');\n\n                target.appendChild(clonedChild);\n                break;\n\n              case 'info':\n                // use cv-value > cv-icon when the mapping uses icons\n                if (\n                  child.hasAttribute('mapping') &&\n                  child.ownerDocument.querySelector(\n                    'mapping[name=\"' + child.getAttribute('mapping') + '\"] > entry > icon'\n                  )\n                ) {\n                  clonedChild = target.ownerDocument.createElement('cv-widget');\n                  let tile = target.ownerDocument.createElement('cv-tile');\n                  clonedChild.append(tile);\n\n                  const sourceLabel = child.querySelector(':scope > label');\n                  if (sourceLabel) {\n                    const row = target.ownerDocument.createElement('cv-row');\n                    row.setAttribute('colspan', '3');\n                    row.setAttribute('row', 'last');\n\n                    const label = target.ownerDocument.createElement('label');\n                    label.setAttribute('class', 'primary');\n                    label.textContent = sourceLabel.textContent.trim();\n                    row.appendChild(label);\n                    tile.appendChild(row);\n                  }\n\n                  const value = target.ownerDocument.createElement('cv-value');\n                  value.setAttribute('colspan', '3');\n                  value.setAttribute('row', '2');\n                  this._copyAttributes(child, value, {\n                    mapping: true,\n                    styling: true,\n                    format: true\n                  });\n\n                  const icon = target.ownerDocument.createElement('cv-icon');\n                  icon.setAttribute('class', 'value');\n                  icon.setAttribute('size', 'xxx-large');\n                  value.appendChild(icon);\n\n                  this._copyAddresses(child.querySelectorAll(':scope > address'), value);\n\n                  tile.appendChild(value);\n                } else {\n                  clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n\n                  this._copyAddresses(child.querySelectorAll(':scope > address'), clonedChild, 'address');\n\n                  this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'label');\n\n                  this._copyAttributes(child, clonedChild, {\n                    mapping: true,\n                    styling: true,\n                    format: true\n                  });\n                }\n                target.appendChild(clonedChild);\n                break;\n\n              case 'infoaction':\n                clonedChild = target.ownerDocument.createElement('cv-widget-pair');\n                target.appendChild(clonedChild);\n                if (child.querySelector('widgetinfo')) {\n                  this._convertElement(clonedChild, child.querySelector('widgetinfo'), options);\n\n                  if (child.querySelector(':scope > label')) {\n                    elem = clonedChild.querySelector(':scope > cv-info');\n                    if (elem) {\n                      this._copyLabel(child.querySelector(':scope > label'), elem, 'label');\n                    }\n                  }\n                }\n                if (child.querySelector('widgetaction')) {\n                  this._convertElement(clonedChild, child.querySelector('widgetaction'), options);\n                }\n                break;\n\n              case 'layout':\n                // silently ignore those\n                break;\n\n              default:\n                this.info('cannot convert', child.nodeName);\n                // no conversion possible, add as comment placeholder for manual conversion\n                clonedChild = target.ownerDocument.createComment(`\n                \n###########################################################\n### Automatic conversion to tile-structure not possible ###\n###########################################################\n${child.previousSibling.nodeType === Node.TEXT_NODE ? child.previousSibling.textContent : ''}${child.outerHTML\n                  .replaceAll('<!--', '')\n                  .replaceAll('-->', '')}`);\n                target.appendChild(clonedChild);\n                break;\n            }\n\n            break;\n        }\n      }\n    },\n\n    /**\n     * @param source {Element}\n     * @param target {Element}\n     * @param converters {Object|null}\n     * @private\n     */\n    _copyAttributes(source, target, converters) {\n      let converter;\n      for (let i = 0; i < source.attributes.length; i++) {\n        if (!converters) {\n          target.setAttribute(source.attributes[i].name, source.attributes[i].value);\n        } else {\n          converter = converters[source.attributes[i].name];\n          if (converter === true) {\n            target.setAttribute(source.attributes[i].name, source.attributes[i].value);\n          } else if (typeof converter === 'string') {\n            target.setAttribute(converter, source.attributes[i].value);\n          }\n        }\n      }\n    },\n\n    _copyAddresses(addresses, target, slotName, converters, callback) {\n      addresses.forEach(e => {\n        let address = target.ownerDocument.createElement('cv-address');\n        if (slotName) {\n          address.setAttribute('slot', slotName);\n        }\n        this._copyAttributes(e, address, converters);\n        address.textContent = e.textContent.trim();\n        if (callback) {\n          callback(address);\n        }\n        target.appendChild(address);\n      });\n    },\n\n    _copyLabel(sourceLabel, target, slotName) {\n      if (sourceLabel) {\n        // <span slot=\"primaryLabel\">Default</span>\n        let label = target.ownerDocument.createElement('span');\n        label.setAttribute('slot', slotName);\n        let child;\n        for (let i = 0; i < sourceLabel.childNodes.length; i++) {\n          child = sourceLabel.childNodes[i];\n          if (child.nodeType === Node.TEXT_NODE) {\n            label.appendChild(child.cloneNode());\n          } else if (child.nodeType === Node.ELEMENT_NODE && child.tagName.toLowerCase() === 'icon') {\n            const icon = target.ownerDocument.createElement('cv-icon');\n            let name = child.getAttribute('name');\n            if (name.indexOf('_') >= 0) {\n              name = 'knxuf-' + name;\n            }\n            icon.textContent = name;\n            label.appendChild(icon);\n          }\n        }\n        target.appendChild(label);\n      }\n    },\n\n    /**\n     * @param source {Element}\n     * @param target {Element}\n     * @private\n     */\n    _copyChildren(source, target) {\n      for (let i = 0; i < source.childNodes.length; i++) {\n        target.appendChild(source.childNodes[i].cloneNode(true));\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}