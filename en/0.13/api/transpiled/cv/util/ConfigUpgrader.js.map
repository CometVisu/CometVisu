{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/ConfigUpgrader.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "members",
    "__indentation",
    "__log",
    "upgrade",
    "source",
    "xml",
    "Document",
    "fromString",
    "pagesNode",
    "documentElement",
    "isTileStructure",
    "tagName",
    "toLowerCase",
    "systemLibVersion",
    "cv",
    "Version",
    "LIBRARY_VERSION_TILE",
    "LIBRARY_VERSION_PURE",
    "version",
    "parseInt",
    "getAttribute",
    "suffix",
    "method",
    "call",
    "locale",
    "Manager",
    "tr",
    "info",
    "join",
    "from7to8Pure",
    "c",
    "querySelectorAll",
    "forEach",
    "node",
    "parent",
    "parentNode",
    "indentNode",
    "previousSibling",
    "removeChild",
    "nodeType",
    "__setVersion",
    "push",
    "from8to9Pure",
    "singleIndent",
    "padEnd",
    "level",
    "__getLevel",
    "indent",
    "buttonConf",
    "attributesToDelete",
    "nameRegex",
    "i",
    "l",
    "attributes",
    "length",
    "match",
    "exec",
    "name",
    "prototype",
    "hasOwnProperty",
    "value",
    "attr",
    "removeAttributeNode",
    "buttonIds",
    "keys",
    "sort",
    "buttons",
    "createElement",
    "bid",
    "button",
    "textContent",
    "label",
    "setAttribute",
    "ind",
    "createTextNode",
    "appendChild",
    "nodeName",
    "isTile",
    "convertPureToTile",
    "sourceXml",
    "rootNode",
    "target",
    "document",
    "implementation",
    "createDocument",
    "targetRoot",
    "createAttributeNS",
    "setAttributeNodeNS",
    "header",
    "nav",
    "menu",
    "main",
    "_convertElement",
    "pageIds",
    "util",
    "Prettifier",
    "element",
    "options",
    "id",
    "postfix",
    "startsWith",
    "backends",
    "debug",
    "hasAttribute",
    "child",
    "clonedChild",
    "elem",
    "childNodes",
    "Node",
    "CDATA_SECTION_NODE",
    "COMMENT_NODE",
    "cloneNode",
    "ELEMENT_NODE",
    "ownerDocument",
    "mapping",
    "_copyAttributes",
    "_copyChildren",
    "styling",
    "fileNode",
    "loader",
    "trim",
    "icon",
    "indexOf",
    "parentElement",
    "remove",
    "entry",
    "removeAttribute",
    "backend",
    "type",
    "username",
    "password",
    "insertBefore",
    "firstChild",
    "querySelector",
    "warn",
    "on_value",
    "off_value",
    "_copyAddresses",
    "_copyLabel",
    "format",
    "address",
    "down",
    "up",
    "upAddress",
    "sourceLabel",
    "row",
    "createComment",
    "TEXT_NODE",
    "outerHTML",
    "replaceAll",
    "converters",
    "converter",
    "addresses",
    "slotName",
    "callback",
    "e",
    "ConfigUpgrader"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ConfigUpgrader.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Upgrade config file to the current library version\n * @since 0.12.0\n * @author Tobias Br√§utigam\n */\nqx.Class.define('cv.util.ConfigUpgrader', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __indentation: 2,\n    __log: null,\n\n    /**\n     * Upgrade config source\n     * @param source {String|Document} content of a config file\n     */\n    upgrade (source) {\n      this.__log = [];\n      if (typeof source === 'string') {\n        source = qx.xml.Document.fromString(source);\n      }\n      // read version from config\n      const pagesNode = source.documentElement;\n      const isTileStructure = pagesNode.tagName.toLowerCase() === 'config';\n      const systemLibVersion = isTileStructure ? cv.Version.LIBRARY_VERSION_TILE : cv.Version.LIBRARY_VERSION_PURE;\n      let version = isTileStructure ? parseInt(pagesNode.getAttribute('version')) : parseInt(pagesNode.getAttribute('lib_version'));\n      if (version === cv.Version.LIBRARY_VERSION_PURE) {\n        // nothing to do\n        return [null, source, this.__log];\n      }\n      const suffix = isTileStructure ? 'Tile' : 'Pure';\n      while (version < systemLibVersion) {\n        // upgrade step by step\n        const method = this['from' + version + 'to' + (version + 1) + suffix];\n        if (method) {\n          version = method.call(this, source);\n        } else {\n          return [qx.locale.Manager.tr('Upgrader from version %1 not implemented', version), source, this.__log];\n        }\n      }\n      this.info('  - ' + this.__log.join('\\n  - '));\n      return [null, source, this.__log];\n    },\n\n    from7to8Pure (source) {\n      let c = 0;\n      source.querySelectorAll('plugins > plugin[name=\\'gweather\\']').forEach(node => {\n        const parent = node.parentNode;\n        const indentNode = node.previousSibling;\n        parent.removeChild(node);\n        if (indentNode.nodeType === 3) {\n          parent.removeChild(indentNode);\n        }\n        c++;\n      });\n      this.__setVersion(source, 8);\n      if (c > 0) {\n        this.__log.push('removed ' + c + ' \\'plugin\\'-nodes with obsolete plugin (gweather)');\n      }\n      return 8;\n    },\n\n    from8to9Pure (source) {\n      let c = 0;\n      const singleIndent = ''.padEnd(this.__indentation, ' ');\n      source.querySelectorAll('multitrigger').forEach(node => {\n        let level = this.__getLevel(node);\n        level++;\n        const indent = ''.padEnd(this.__indentation * level, ' ');\n        const buttonConf = {};\n        const attributesToDelete = [];\n        const nameRegex = /^button([\\d]+)(label|value)$/;\n        for (let i = 0, l = node.attributes.length; i < l; i++) {\n          const match = nameRegex.exec(node.attributes[i].name);\n          if (match) {\n            if (!Object.prototype.hasOwnProperty.call(buttonConf, match[1])) {\n              buttonConf[match[1]] = {};\n            }\n            buttonConf[match[1]][match[2]] = node.attributes[i].value;\n            attributesToDelete.push(node.attributes[i]);\n          }\n        }\n        attributesToDelete.forEach(attr => node.removeAttributeNode(attr));\n        const buttonIds = Object.keys(buttonConf).sort();\n        if (buttonIds.length > 0) {\n          const buttons = source.createElement('buttons');\n          buttonIds.forEach(bid => {\n            const button = source.createElement('button');\n            button.textContent = buttonConf[bid].value;\n            if (buttonConf[bid].label) {\n              button.setAttribute('label', buttonConf[bid].label);\n            }\n            const ind = source.createTextNode('\\n' + indent + singleIndent);\n            buttons.appendChild(ind);\n            buttons.appendChild(button);\n          });\n          buttons.appendChild(source.createTextNode('\\n' + indent));\n          node.appendChild(source.createTextNode(singleIndent));\n          node.appendChild(buttons);\n          node.appendChild(source.createTextNode('\\n' + ''.padEnd(this.__indentation * (level - 1), ' ')));\n          c++;\n        }\n      });\n      this.__setVersion(source, 9);\n      if (c > 0) {\n        this.__log.push('converted ' + c + ' \\'multitrigger\\'-nodes to new button configuration');\n      }\n      return 9;\n    },\n\n    __getLevel (node) {\n      let level = 1;\n      let parent = node.parentNode;\n      while (parent && parent.nodeName !== 'pages') {\n        parent = parent.parentNode;\n        level++;\n      }\n      return level;\n    },\n\n    __setVersion (xml, version, isTile) {\n      if (isTile === true) {\n        xml.documentElement.setAttribute('version', version);\n      } else {\n        xml.documentElement.setAttribute('lib_version', version);\n      }\n    },\n\n    /**\n     * Converts a pure-config file to a tile-config file. Currently only a small amount widgets can be converted\n     * because they have a similar equivalent in the tile-structure. This is the list of converted widgets:\n     *  - Pages\n     *  - Meta-Area (only mappings, stylings and files)\n     *  - Switch (without mappings, stylings)\n     *  - Info\n     *  - Pushbutton (without mappings, stylings)\n     *  - Trigger (without mappings, stylings)\n     *  - Group (only the ones that do not have nowidget=\"true\")\n     *\n     *  Whats not working:\n     *  - Everything that uses templates\n     *  - All other widgets that have not been mentioned above\n     *\n     * @param sourceXml {XMLDocument|string}\n     * @return [{String}, {String}] Error, Result\n     */\n    convertPureToTile(sourceXml) {\n      if (typeof sourceXml === 'string') {\n        sourceXml = qx.xml.Document.fromString(sourceXml);\n      }\n      const rootNode = sourceXml.documentElement;\n      if (rootNode.tagName.toLowerCase() === 'pages') {\n        const target = document.implementation.createDocument(null, 'config');\n        const targetRoot = target.documentElement;\n        targetRoot.setAttribute('version', '1');\n        const attr = target.createAttributeNS('http://www.w3.org/2001/XMLSchema-instance', 'noNamespaceSchemaLocation');\n        attr.value = '../visu_config_tile.xsd';\n        targetRoot.setAttributeNodeNS(attr);\n\n        // add some basics\n        const header = target.createElement('header');\n        const nav = target.createElement('nav');\n        const menu = target.createElement('cv-menu');\n        menu.setAttribute('model', 'pages');\n        nav.appendChild(menu);\n        header.appendChild(nav);\n        targetRoot.appendChild(header);\n        const main = target.createElement('main');\n        targetRoot.appendChild(main);\n\n        this._convertElement(targetRoot, rootNode, {pageIds: []});\n        //console.log(new XMLSerializer().serializeToString(target));\n        return ['', cv.util.Prettifier.xml(target)];\n      }\n      return [qx.locale.Manager.tr('This is no pure-structure config, root element pages not found'), ''];\n    },\n\n    /**\n     * @param target {Element}\n     * @param element {Element}\n     * @param options {Object}\n     * @private\n     */\n    _convertElement(target, element, options) {\n      if (!options) {\n        options = {};\n      }\n      const tagName = element.tagName.toLowerCase();\n      let attr;\n      let id;\n      let postfix;\n\n      switch (tagName) {\n        case 'pages':\n          for (let i = element.attributes.length-1; i >= 0; i--) {\n            attr = element.attributes[i];\n            if (attr.name.startsWith('backend')) {\n              if (!options.backends) {\n                options.backends = {};\n              }\n              options.backends[attr.name] = attr.value;\n            } else {\n              switch (attr.name) {\n                case 'username':\n                case 'password':\n                  if (!options.backends) {\n                    options.backends = {};\n                  }\n                  options.backends[attr.name] = attr.value;\n                  break;\n\n                default:\n                  this.debug(`ignoring attribute ${attr.name} from element ${tagName}`);\n                  break;\n              }\n            }\n          }\n          break;\n\n        case 'page':\n          postfix = options.pageIds.length;\n          id = 'page-' + postfix;\n          if (element.hasAttribute('name')) {\n            target.setAttribute('name', element.getAttribute('name'));\n          }\n          target.setAttribute('id', id);\n          options.pageIds.push(id);\n          break;\n      }\n\n      // traverse children\n      let child;\n      let clonedChild;\n      let elem;\n      let value;\n      for (let i = 0; i < element.childNodes.length; i++) {\n        child = element.childNodes[i];\n        switch (child.nodeType) {\n          case Node.CDATA_SECTION_NODE:\n          case Node.COMMENT_NODE:\n            // just copy\n            target.appendChild(child.cloneNode());\n            break;\n\n          case Node.ELEMENT_NODE:\n            switch (child.tagName.toLowerCase()) {\n              case 'meta':\n                clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n                // copy mappings\n                child.querySelectorAll('mappings > mapping').forEach(node => {\n                  const mapping = target.ownerDocument.createElement('cv-mapping');\n                  this._copyAttributes(node, mapping);\n                  this._copyChildren(node, mapping);\n                  clonedChild.appendChild(mapping);\n                });\n                child.querySelectorAll('stylings > styling').forEach(node => {\n                  const styling = target.ownerDocument.createElement('cv-styling');\n                  this._copyAttributes(node, styling);\n                  this._copyChildren(node, styling);\n                  clonedChild.appendChild(styling);\n                });\n                // convert files to loader\n                child.querySelectorAll('file').forEach(fileNode => {\n                  const loader = target.ownerDocument.createElement('cv-loader');\n                  loader.setAttribute('type', fileNode.getAttribute('type'));\n                  loader.setAttribute('src', fileNode.textContent.trim());\n                  clonedChild.appendChild(loader);\n                });\n                // prefix all icons with knxuf-\n                clonedChild.querySelectorAll('icon').forEach(icon => {\n                  // there is no real check if this is an KNXUF icon, so we only check for '_' in string\n                  let name = icon.getAttribute('name');\n                  if (name.indexOf('_') >= 0) {\n                    name = 'knxuf-' +name;\n                  }\n                  icon.parentElement.textContent = name;\n                  icon.remove();\n                });\n\n                clonedChild.querySelectorAll('entry').forEach(entry => {\n                  if (entry.hasAttribute('range_min')) {\n                    entry.setAttribute('range-min', entry.getAttribute('range_min'));\n                    entry.removeAttribute('range_min');\n                  }\n                  if (entry.hasAttribute('range_max')) {\n                    entry.setAttribute('range-max', entry.getAttribute('range_max'));\n                    entry.removeAttribute('range_max');\n                  }\n                });\n\n                if (options.backends) {\n                  if (options.backends.backend) {\n                    const backend = target.ownerDocument.createElement('cv-backend');\n                    let type;\n                    switch (options.backends.backend) {\n                      case 'oh2':\n                      case 'oh':\n                      case 'openhab2':\n                        type = 'openhab';\n                        break;\n\n                      case 'default':\n                      case 'cgi-bin':\n                        type = 'knxd';\n                        break;\n\n                      default:\n                        type = options.backends.backend;\n                        break;\n                    }\n                    backend.setAttribute('type', type);\n                    if (options.backends['backend-'+type+'-url']) {\n                      backend.setAttribute('uri', options.backends['backend-'+type+'-url']);\n                    }\n                    if (options.backends.username) {\n                      backend.setAttribute('username', options.backends.username);\n                    }\n                    if (options.backends.password) {\n                      backend.setAttribute('password', options.backends.password);\n                    }\n                  }\n                }\n                target.ownerDocument.documentElement.insertBefore(clonedChild, target.ownerDocument.documentElement.firstChild);\n                break;\n\n              case 'page':\n                clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n                // flatten first two page levels\n                if (child.parentElement.tagName.toLowerCase() === 'pages' ||\n                    child.parentElement.parentElement.tagName.toLowerCase() === 'pages') {\n                  const main = target.ownerDocument.querySelector('main');\n                  main.appendChild(clonedChild);\n                } else {\n                  target.appendChild(clonedChild);\n                }\n                this._convertElement(clonedChild, child, options);\n                break;\n\n              case 'group':\n                if (child.getAttribute('nowidget') === 'true') {\n                  this.warn('skipping nowidget-groups');\n                } else {\n                  clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n                  clonedChild.setAttribute('open', 'true');\n                  if (child.hasAttribute('name')) {\n                    clonedChild.setAttribute('name', child.getAttribute('name'));\n                  }\n                  target.appendChild(clonedChild);\n                  this._convertElement(clonedChild, child, options);\n                }\n                break;\n\n              case 'switch':\n                clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n                // do not copy mappings and styling as they might not work for switched in most of the cases\n                // and we want to used the default ones in the first place\n                this._copyAttributes(child, clonedChild, {\n                  on_value: 'on-value',\n                  off_value: 'off-value'\n                });\n                if (child.getAttribute('bind_click_to_widget') === 'false') {\n                  // only copy when this ix explicitly set\n                  clonedChild.setAttribute('whole-tile', 'false');\n                }\n                this._copyAddresses(child.querySelectorAll(':scope > address'), clonedChild, 'address');\n                this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'primaryLabel');\n                target.appendChild(clonedChild);\n                break;\n\n              case 'trigger':\n                clonedChild = target.ownerDocument.createElement('cv-switch');\n                this._copyAttributes(child, clonedChild, {\n                  format: true\n                });\n                value = child.getAttribute('value');\n                this._copyAddresses(child.querySelectorAll(':scope > address'), clonedChild, 'address', null, address => {\n                  address.setAttribute('mode', 'write');\n                  address.setAttribute('value', value);\n                });\n                this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'primaryLabel');\n                target.appendChild(clonedChild);\n                break;\n\n              case 'pushbutton':\n                clonedChild = target.ownerDocument.createElement('cv-switch');\n                this._copyAttributes(child, clonedChild, {\n                  format: true\n                });\n                value = {\n                  down: child.getAttribute('downValue'),\n                  up: child.getAttribute('upValue')\n                };\n                this._copyAddresses(child.querySelectorAll(':scope > address'), clonedChild, 'address', null, address => {\n                  if (!address.hasAttribute('variant')) {\n                    address.setAttribute('value', value.down);\n                    address.setAttribute('on', 'down');\n                    const upAddress = address.cloneNode(true);\n                    upAddress.setAttribute('value', value.up);\n                    upAddress.setAttribute('on', 'up');\n                    clonedChild.appendChild(upAddress);\n                  } else {\n                    address.setAttribute('value', address.getAttribute('variant') === 'up' ? value.up : value.down);\n                    address.setAttribute('on', address.getAttribute('variant'));\n                    address.removeAttribute('variant');\n                  }\n                });\n                this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'primaryLabel');\n                target.appendChild(clonedChild);\n                break;\n\n              case 'info':\n                // use cv-value > cv-icon when the mapping uses icons\n                if (child.hasAttribute('mapping') &&\n                  child.ownerDocument.querySelector('mapping[name=\"'+child.getAttribute('mapping')+'\"] > entry > icon')) {\n                  clonedChild = target.ownerDocument.createElement('cv-tile');\n\n                  const sourceLabel = child.querySelector(':scope > label');\n                  if (sourceLabel) {\n                    const row = target.ownerDocument.createElement('cv-row');\n                    row.setAttribute('colspan', '3');\n                    row.setAttribute('row', 'last');\n\n                    const label = target.ownerDocument.createElement('label');\n                    label.setAttribute('class', 'primary');\n                    label.textContent = sourceLabel.textContent.trim();\n                    row.appendChild(label);\n                    clonedChild.appendChild(row);\n                  }\n\n                  const value = target.ownerDocument.createElement('cv-value');\n                  value.setAttribute('colspan', '3');\n                  value.setAttribute('row', '2');\n                  this._copyAttributes(child, value, {\n                    mapping: true,\n                    styling: true,\n                    format: true\n                  });\n                  const icon = target.ownerDocument.createElement('cv-icon');\n                  icon.setAttribute('class', 'value');\n                  icon.setAttribute('size', 'xxx-large');\n                  value.appendChild(icon);\n\n                  this._copyAddresses(child.querySelectorAll(':scope > address'), value);\n                  clonedChild.appendChild(value);\n                } else {\n                  clonedChild = target.ownerDocument.createElement('cv-' + child.tagName);\n                  this._copyAddresses(child.querySelectorAll(':scope > address'), clonedChild, 'address');\n                  this._copyLabel(child.querySelector(':scope > label'), clonedChild, 'label');\n                  this._copyAttributes(child, clonedChild, {\n                    mapping: true,\n                    styling: true,\n                    format: true\n                  });\n                }\n                target.appendChild(clonedChild);\n                break;\n\n              case 'infoaction':\n                clonedChild = target.ownerDocument.createElement('cv-tile-pair');\n                target.appendChild(clonedChild);\n                if (child.querySelector('widgetinfo')) {\n                  this._convertElement(clonedChild, child.querySelector('widgetinfo'), options);\n                  if (child.querySelector(':scope > label')) {\n                    elem = clonedChild.querySelector(':scope > cv-info');\n                    if (elem) {\n                      this._copyLabel(child.querySelector(':scope > label'), elem, 'label');\n                    }\n                  }\n                }\n                if (child.querySelector('widgetaction')) {\n                  this._convertElement(clonedChild, child.querySelector('widgetaction'), options);\n                }\n                break;\n\n              case 'layout':\n                // silently ignore those\n                break;\n\n              default:\n                this.info('cannot convert', child.nodeName);\n                // no conversion possible, add as comment placeholder for manual conversion\n                clonedChild = target.ownerDocument.createComment(`\n                \n###########################################################\n### Automatic conversion to tile-structure not possible ###\n###########################################################\n${child.previousSibling.nodeType === Node.TEXT_NODE ? child.previousSibling.textContent : ''}${child.outerHTML.replaceAll('<!--', '').replaceAll('-->', '')}`);\n                target.appendChild(clonedChild);\n                break;\n            }\n            break;\n        }\n      }\n    },\n\n    /**\n     * @param source {Element}\n     * @param target {Element}\n     * @param converters {Object|null}\n     * @private\n     */\n    _copyAttributes(source, target, converters) {\n      let converter;\n      for (let i = 0; i < source.attributes.length; i++) {\n        if (!converters) {\n          target.setAttribute(source.attributes[i].name, source.attributes[i].value);\n        } else {\n          converter = converters[source.attributes[i].name];\n          if (converter === true) {\n            target.setAttribute(source.attributes[i].name, source.attributes[i].value);\n          } else if (typeof converter === 'string') {\n            target.setAttribute(converter, source.attributes[i].value);\n          }\n        }\n      }\n    },\n\n    _copyAddresses(addresses, target, slotName, converters, callback) {\n      addresses.forEach(e => {\n        let address = target.ownerDocument.createElement('cv-address');\n        if (slotName) {\n          address.setAttribute('slot', slotName);\n        }\n        this._copyAttributes(e, address, converters);\n        address.textContent = e.textContent.trim();\n        if (callback) {\n          callback(address);\n        }\n        target.appendChild(address);\n      });\n    },\n\n    _copyLabel(sourceLabel, target, slotName) {\n      if (sourceLabel) {\n        // <span slot=\"primaryLabel\">Default</span>\n        let label = target.ownerDocument.createElement('span');\n        label.setAttribute('slot', slotName);\n        let child;\n        for (let i=0; i < sourceLabel.childNodes.length; i++) {\n          child = sourceLabel.childNodes[i];\n          if (child.nodeType === Node.TEXT_NODE) {\n            label.appendChild(child.cloneNode());\n          } else if (child.nodeType === Node.ELEMENT_NODE && child.tagName.toLowerCase() === 'icon') {\n            const icon = target.ownerDocument.createElement('cv-icon');\n            let name = child.getAttribute('name');\n            if (name.indexOf('_') >= 0) {\n              name = 'knxuf-' + name;\n            }\n            icon.textContent = name;\n            label.appendChild(icon);\n          }\n        }\n        target.appendChild(label);\n      }\n    },\n\n    /**\n     * @param source {Element}\n     * @param target {Element}\n     * @private\n     */\n    _copyChildren(source, target) {\n      for (let i = 0; i < source.childNodes.length; i++) {\n        target.appendChild(source.childNodes[i].cloneNode(true));\n      }\n    }\n  }\n});\n"
  ]
}