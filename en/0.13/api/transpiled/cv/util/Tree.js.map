{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "isChildOf",
    "child",
    "parent",
    "parentNode",
    "getChildWidgets",
    "widget",
    "getChildren",
    "filter",
    "get$$type",
    "getParentWidget",
    "getParentPageData",
    "path",
    "data",
    "isPage",
    "substr",
    "length",
    "parentPath",
    "model",
    "cv",
    "Model",
    "getInstance",
    "Object",
    "keys",
    "getWidgetData",
    "parts",
    "split",
    "pop",
    "join",
    "getParentData",
    "traverseUp",
    "children",
    "indexOf",
    "getChildElements",
    "element",
    "selector",
    "Array",
    "from",
    "childNodes",
    "prototype",
    "call",
    "m",
    "matches",
    "getParentPage",
    "getParent",
    "getParentGroup",
    "until",
    "limit",
    "parents",
    "getAttribute",
    "found",
    "concat",
    "getClosest",
    "elem",
    "findClosest",
    "current",
    "util",
    "Tree"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/util/Tree.js"
  ],
  "sourcesContent": [
    "/* Tree.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Tree\n *\n * @author tobiasb\n * @since 2016\n */\n\n/**\n * Helper methods for the widget/dom tree\n */\nqx.Class.define('cv.util.Tree', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Checks if child is a child of parent\n     * @param child {Node}\n     * @param parent {Node}\n     * @return {boolean}\n     */\n    isChildOf(child, parent) {\n      while (child && child !== parent) {\n        child = child.parentNode;\n      }\n      return !!child;\n    },\n\n    /*\n     * *********************************************************\n     * Widget tree helper functions\n     * ********************************************************\n     */\n    getChildWidgets(widget, type) {\n      return widget.getChildren().filter(function (child) {\n        return !type || child.get$$type() === type;\n      });\n    },\n\n    /**\n     * Get the parent widget with optional type filter\n     *\n     * @param widget {cv.ui.structure.pure.AbstractWidget} start traversing up the with this widget\n     * @param type {String?} only return parent of this type\n     * @return {cv.ui.structure.pure.AbstractWidget|null}\n     */\n    getParentWidget(widget, type) {\n      let parent = widget.getParentWidget();\n      while (parent) {\n        if (!type || parent.get$$type() === type) {\n          return parent;\n        }\n        parent = parent.getParentWidget();\n      }\n      return null;\n    },\n\n    /*\n     * *********************************************************\n     * Widget data tree helper functions\n     * ********************************************************\n     */\n    getParentPageData(path) {\n      let data = {};\n      const isPage = path.substr(-1, 1) === '_'; // path ends with _\n      if (!isPage) {\n        path = path.substr(0, path.length - 1);\n      }\n      let parentPath = path;\n      if (parentPath === 'id_') {\n        return null;\n      }\n      const model = cv.data.Model.getInstance();\n      while (Object.keys(data).length === 0 && parentPath.length > 2) {\n        data = model.getWidgetData(parentPath);\n        if (parentPath === 'id_') {\n          break;\n        }\n        const parts = parentPath.substr(0, parentPath.length - 1).split('_');\n        parts.pop();\n        parentPath = parts.join('_') + '_';\n      }\n      return data;\n    },\n\n    /**\n     * Returns the data for the parent entry of the given path\n     * @param path {String}\n     * @return {var}\n     */\n    getParentData(path) {\n      let data = {};\n\n      /**\n       * @param path\n       */\n      function traverseUp(path) {\n        const parts = path.split('_');\n        if (parts[parts.length - 1] === '') {\n          parts.pop();\n        } else {\n          parts[parts.length - 1] = '';\n        }\n        return parts.join('_');\n      }\n\n      let parentPath = traverseUp(path);\n      if (parentPath === 'id') {\n        // no parent\n        return null;\n      }\n\n      const model = cv.data.Model.getInstance();\n      while (parentPath.length >= 2) {\n        data = model.getWidgetData(parentPath);\n        if (parentPath === 'id_' || (data.children && data.children.indexOf(path) >= 0)) {\n          return data;\n        }\n        parentPath = traverseUp(parentPath);\n      }\n      return null;\n    },\n\n    /*\n     * *********************************************************\n     * DOM-Element tree helper functions\n     * ********************************************************\n     */\n    getChildElements(element, selector) {\n      return Array.from(element.childNodes).filter(function (child) {\n        if (selector) {\n          return Array.prototype.filter.call(child, function (m) {\n            return m.matches(selector);\n          });\n        }\n        return true;\n      }, this);\n    },\n\n    getParentPage(element) {\n      return this.getParent(element, '#pages', '.page', 1)[0];\n    },\n\n    getParentGroup(element) {\n      return this.getParent(element, '#pages', '.group', 1)[0];\n    },\n\n    getParent(element, until, selector, limit) {\n      let parents = [];\n      let parent = element.parentNode;\n      while (parent && parent.getAttribute('id') !== 'pages') {\n        let found = [parent];\n        if (selector) {\n          found = Array.prototype.filter.call(found, function (m) {\n            return m.matches(selector);\n          });\n        }\n        parents = parents.concat(found);\n        if (limit && parents.length >= limit) {\n          break;\n        }\n        if (\n          until &&\n          Array.prototype.filter.call([parent], function (m) {\n            return m.matches(until);\n          }).length > 0\n        ) {\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return parents;\n    },\n\n    getClosest(elem, selector) {\n      const findClosest = function (current) {\n        const found = Array.prototype.filter.call([current], function (m) {\n          return m.matches(selector);\n        });\n        if (found.length) {\n          return found[0];\n        }\n        current = current.parentNode; // One up\n        if (current && current.parentNode) {\n          return findClosest(current);\n        }\n        return null;\n      };\n      return findClosest(elem);\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}