{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "BASE_URL",
    "__configFile",
    "__dirClient",
    "__dpClient",
    "__callbacks",
    "getBaseUrl",
    "path",
    "core",
    "Init",
    "getApplication",
    "isServedByOpenhab",
    "util",
    "Uri",
    "parseUri",
    "window",
    "location",
    "href",
    "directory",
    "getConfigClient",
    "config",
    "get",
    "method",
    "url",
    "put",
    "post",
    "save",
    "io",
    "rest",
    "Resource",
    "setBaseUrl",
    "configureRequest",
    "req",
    "action",
    "cv",
    "Config",
    "transactionId",
    "setRequestHeader",
    "setAccept",
    "_enableSync",
    "getFsClient",
    "read",
    "update",
    "create",
    "move",
    "checkEnvironment",
    "params",
    "hash",
    "setUrl",
    "getUrl",
    "recursive",
    "parts",
    "split",
    "length",
    "pop",
    "mimetype",
    "ui",
    "manager",
    "tree",
    "FileSystem",
    "getMimetypeFromSuffix",
    "addListener",
    "_onSaveSuccess",
    "_onSaveError",
    "getDataProviderClient",
    "designs",
    "rrds",
    "addresses",
    "influxdbs",
    "influxdbfields",
    "influxdbtags",
    "client",
    "Object",
    "keys",
    "forEach",
    "callName",
    "args",
    "lang",
    "Array",
    "fromArguments",
    "arguments",
    "callback",
    "context",
    "Type",
    "isFunction",
    "apply",
    "bind",
    "ev",
    "getRequest",
    "id",
    "parseInt",
    "toHashCode",
    "prototype",
    "hasOwnProperty",
    "call",
    "getData",
    "data",
    "error",
    "message",
    "status",
    "getStatus",
    "statusText",
    "getStatusText",
    "log",
    "Logger",
    "getPhase",
    "qxl",
    "dialog",
    "Dialog",
    "locale",
    "Manager",
    "tr",
    "snackbar",
    "Controller",
    "info",
    "Client"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/io/rest/Client.js"
  ],
  "sourcesContent": [
    "/* Client.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.io.rest.Client', {\n  type: 'static',\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    BASE_URL: null,\n    __configFile: null,\n    __dirClient: null,\n    __dpClient: null,\n    __callbacks: {},\n\n    getBaseUrl() {\n      if (!this.BASE_URL) {\n        let path = '';\n        if (qx.core.Init.getApplication().isServedByOpenhab()) {\n          path = '/rest/cv';\n        } else {\n          path =\n            qx.util.Uri.parseUri(window.location.href).directory +\n            'rest/manager/index.php';\n        }\n        this.BASE_URL = path;\n      }\n      return this.BASE_URL;\n    },\n\n    getConfigClient() {\n      if (!this.__configFile) {\n        const config = {\n          get: {\n            method: 'GET',\n            url: '/config/hidden/{section}/{key}'\n          },\n\n          put: {\n            method: 'PUT',\n            url: '/config/hidden/{section}/{key}'\n          },\n\n          post: {\n            method: 'POST',\n            url: '/config/hidden/{section}/{key}'\n          },\n\n          delete: {\n            method: 'DELETE',\n            url: '/config/hidden/{section}/{key}'\n          },\n\n          save: {\n            method: 'PUT',\n            url: '/config/hidden'\n          }\n        };\n\n        this.__configFile = new qx.io.rest.Resource(config);\n        this.__configFile.setBaseUrl(this.getBaseUrl());\n        this.__configFile.configureRequest(function (req, action) {\n          if (cv.Config.transactionId) {\n            req.setRequestHeader('X-Transaction-ID', cv.Config.transactionId);\n          }\n          if (action === 'save') {\n            req.setRequestHeader('Content-Type', 'application/json');\n          }\n          req.setAccept('application/json');\n        });\n\n        this._enableSync(this.__configFile, config);\n      }\n      return this.__configFile;\n    },\n\n    getFsClient() {\n      if (!this.__dirClient) {\n        const config = {\n          read: {\n            method: 'GET',\n            url: '/fs?path={path}'\n          },\n\n          update: {\n            method: 'PUT',\n            url: '/fs?path={path}'\n          },\n\n          create: {\n            method: 'POST',\n            url: '/fs?path={path}&type={type}'\n          },\n\n          delete: {\n            method: 'DELETE',\n            url: '/fs?path={path}&force={force}'\n          },\n\n          move: {\n            method: 'PUT',\n            url: '/fs/move?src={src}&target={target}'\n          },\n\n          checkEnvironment: {\n            method: 'GET',\n            url: '/fs/check'\n          }\n        };\n\n        this.__dirClient = new qx.io.rest.Resource(config);\n        this.__dirClient.setBaseUrl(this.getBaseUrl());\n        this.__dirClient.configureRequest(function (req, action, params) {\n          if (cv.Config.transactionId) {\n            req.setRequestHeader('X-Transaction-ID', cv.Config.transactionId);\n          }\n          if (params.hash) {\n            req.setUrl(req.getUrl() + '&hash=' + params.hash);\n          }\n          if (params.recursive === true && action === 'read') {\n            req.setUrl(req.getUrl() + '&recursive=true');\n          }\n          if (action === 'update' || action === 'create') {\n            const parts = params.path.split('.');\n            if (parts.length > 1) {\n              const type = parts.pop();\n              const mimetype = cv.ui.manager.tree.FileSystem.getMimetypeFromSuffix(type);\n              req.setRequestHeader('Content-Type', mimetype || 'text/plain');\n            } else {\n              req.setRequestHeader('Content-Type', 'text/plain');\n            }\n            req.setAccept('application/json');\n          }\n        });\n\n        this._enableSync(this.__dirClient, config);\n\n        // general listeners\n        this.__dirClient.addListener('updateSuccess', this._onSaveSuccess, this);\n\n        this.__dirClient.addListener('createSuccess', this._onSaveSuccess, this);\n\n        this.__dirClient.addListener('updateError', this._onSaveError, this);\n        this.__dirClient.addListener('createError', this._onSaveError, this);\n      }\n      return this.__dirClient;\n    },\n\n    getDataProviderClient() {\n      if (!this.__dpClient) {\n        const config = {\n          designs: {\n            method: 'GET',\n            url: '/data/designs'\n          },\n\n          rrds: {\n            method: 'GET',\n            url: '/data/rrds'\n          },\n\n          addresses: {\n            method: 'GET',\n            url: '/data/addresses'\n          },\n\n          influxdbs: {\n            method: 'GET',\n            url: '/data/influxdbs?auth={auth}'\n          },\n\n          influxdbfields: {\n            method: 'GET',\n            url: '/data/influxdbfields?auth={auth}&measurement={measurement}'\n          },\n\n          influxdbtags: {\n            method: 'GET',\n            url: '/data/influxdbtags?auth={auth}&measurement={measurement}'\n          }\n        };\n\n        this.__dpClient = new qx.io.rest.Resource(config);\n        this.__dpClient.setBaseUrl(this.getBaseUrl());\n        if (cv.Config.transactionId) {\n          this.__dpClient.configureRequest(function (req, action, params) {\n            req.setRequestHeader('X-Transaction-ID', cv.Config.transactionId);\n          });\n        }\n\n        this._enableSync(this.__dpClient, config);\n      }\n      return this.__dpClient;\n    },\n\n    _enableSync(client, config) {\n      // install the callback calls\n      Object.keys(config).forEach(function (callName) {\n        client[callName + 'Sync'] = function () {\n          const args = qx.lang.Array.fromArguments(arguments);\n          let callback;\n          let context = args.pop();\n          if (qx.lang.Type.isFunction(context)) {\n            callback = context;\n            context = this;\n          } else {\n            callback = args.pop();\n          }\n          this.__callbacks[client[callName].apply(client, args)] = callback.bind(context);\n        }.bind(this);\n      }, this);\n\n      // add the general listeners\n      client.addListener('success', ev => {\n        const req = ev.getRequest();\n        const id = parseInt(req.toHashCode(), 10);\n        if (Object.prototype.hasOwnProperty.call(this.__callbacks, id)) {\n          this.__callbacks[id](null, ev.getData());\n          delete this.__callbacks[id];\n        }\n      });\n\n      client.addListener('error', ev => {\n        const req = ev.getRequest();\n        const id = parseInt(req.toHashCode(), 10);\n        if (Object.prototype.hasOwnProperty.call(this.__callbacks, id)) {\n          const data = ev.getData();\n          let error;\n          if (data && data.message) {\n            error = data.message;\n          } else {\n            error = {\n              status: ev.getRequest().getStatus(),\n              statusText: ev.getRequest().getStatusText()\n            };\n          }\n          qx.log.Logger.error(this, error);\n          this.__callbacks[id](error, null);\n          delete this.__callbacks[id];\n        }\n        if (req.getPhase() === 'load') {\n          // error during load phase => backend not reachable\n          qxl.dialog.Dialog.error(qx.locale.Manager.tr('Backend does not respond!'));\n        }\n      });\n    },\n\n    _onSaveSuccess(ev) {\n      const req = ev.getRequest();\n      const id = parseInt(req.toHashCode(), 10);\n      // only handle this events, when there is no callback for it\n      if (!Object.prototype.hasOwnProperty.call(this.__callbacks, id)) {\n        cv.ui.manager.snackbar.Controller.info(qx.locale.Manager.tr('File has been saved'));\n      }\n    },\n\n    _onSaveError(ev) {\n      const req = ev.getRequest();\n      const id = parseInt(req.toHashCode(), 10);\n      // only handle this events, when there is no callback for it\n      if (!Object.prototype.hasOwnProperty.call(this.__callbacks, id)) {\n        cv.ui.manager.snackbar.Controller.error(qx.locale.Manager.tr('Error saving file'));\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}