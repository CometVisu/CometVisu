{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/io/openhab/Rest.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "cv",
    "io",
    "IClient",
    "construct",
    "type",
    "backendUrl",
    "initialAddresses",
    "_type",
    "_backendUrl",
    "__groups",
    "__memberLookup",
    "properties",
    "connected",
    "check",
    "init",
    "event",
    "server",
    "nullable",
    "members",
    "__lastError",
    "__token",
    "__subscribedAddresses",
    "getBackend",
    "getType",
    "setInitialAddresses",
    "addresses",
    "getResourcePath",
    "name",
    "map",
    "src",
    "url",
    "params",
    "start",
    "endTime",
    "end",
    "__convertTimes",
    "Date",
    "startTime",
    "match",
    "exec",
    "amount",
    "parseInt",
    "interval",
    "setTime",
    "getTime",
    "test",
    "push",
    "toISOString",
    "join",
    "time",
    "d",
    "hasCustomChartsDataProcessor",
    "processChartsData",
    "response",
    "data",
    "newRrd",
    "lastValue",
    "value",
    "j",
    "l",
    "length",
    "parseFloat",
    "state",
    "authorize",
    "req",
    "setRequestHeader",
    "createAuthorizedRequest",
    "method",
    "request",
    "Xhr",
    "__isActive",
    "toLowerCase",
    "subscribe",
    "filters",
    "addListener",
    "e",
    "getTarget",
    "res",
    "getResponse",
    "update",
    "forEach",
    "entry",
    "Array",
    "isArray",
    "active",
    "obj",
    "label",
    "prototype",
    "hasOwnProperty",
    "call",
    "values",
    "send",
    "running",
    "report",
    "Record",
    "REPLAYING",
    "things",
    "filter",
    "addr",
    "split",
    "topic",
    "thingsReq",
    "includes",
    "UID",
    "statusInfo",
    "status",
    "eventSource",
    "EventSource",
    "addEventListener",
    "handleMessage",
    "bind",
    "handleError",
    "onerror",
    "error",
    "setConnected",
    "onopen",
    "debug",
    "terminate",
    "close",
    "payload",
    "record",
    "JSON",
    "parse",
    "item",
    "change",
    "groupNames",
    "groupName",
    "group",
    "keys",
    "memberName",
    "member",
    "write",
    "address",
    "setRequestData",
    "login",
    "loginOnly",
    "credentials",
    "callback",
    "context",
    "username",
    "btoa",
    "password",
    "setServer",
    "getResponseHeader",
    "getLastError",
    "restart",
    "fullRestart",
    "json",
    "showError",
    "message",
    "args",
    "hasProvider",
    "getProviderUrl",
    "getProviderConvertFunction",
    "format",
    "result",
    "insertText",
    "detail",
    "kind",
    "window",
    "monaco",
    "languages",
    "CompletionItemKind",
    "Value",
    "element",
    "hints",
    "transform",
    "EnumMember",
    "openhab",
    "Rest"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,oBAAhB,EAAsC;AACpCC,IAAAA,MAAM,EAAEN,EAAE,CAACO,IAAH,CAAQC,MADoB;AAEpCC,IAAAA,SAAS,EAAEC,EAAE,CAACC,EAAH,CAAMC,OAFmB;;AAIpC;AACF;AACA;AACA;AACA;AACEC,IAAAA,SAAS,EAAE,mBAAUC,IAAV,EAAgBC,UAAhB,EAA4B;AACrC;AACA,WAAKC,gBAAL,GAAwB,EAAxB;AACA,WAAKC,KAAL,GAAaH,IAAb;AACA,WAAKI,WAAL,GAAmBH,UAAU,IAAI,QAAjC;AACA,WAAKI,SAAL,GAAgB,EAAhB;AACA,WAAKC,SAAL,GAAsB,EAAtB;AACD,KAhBmC;;AAkBpC;AACF;AACA;AACA;AACA;AACEC,IAAAA,UAAU,EAAE;AAEVC,MAAAA,SAAS,EAAE;AACTC,QAAAA,KAAK,EAAE,SADE;AAETC,QAAAA,IAAI,EAAE,KAFG;AAGTC,QAAAA,KAAK,EAAE;AAHE,OAFD;AAQVC,MAAAA,MAAM,EAAE;AACNH,QAAAA,KAAK,EAAE,QADD;AAENI,QAAAA,QAAQ,EAAE,IAFJ;AAGNF,QAAAA,KAAK,EAAE;AAHD;AARE,KAvBwB;;AAqCpC;AACF;AACA;AACA;AACA;AACEG,IAAAA,OAAO,EAAE;AACPC,MAAAA,SAAW,EAAE,IADN;AAEPZ,MAAAA,KAAK,EAAE,IAFA;AAGPC,MAAAA,WAAW,EAAE,IAHN;AAIPY,MAAAA,SAAO,EAAE,IAJF;AAKPX,MAAAA,SAAQ,EAAE,IALH;AAMPC,MAAAA,SAAc,EAAE,IANT;AAOPW,MAAAA,SAAqB,EAAE,IAPhB;AASPC,MAAAA,UAAU,EAAE,sBAAY;AACtB,eAAO,EAAP;AACD,OAXM;AAaPC,MAAAA,OAbO,qBAaG;AACR,eAAO,KAAKhB,KAAZ;AACD,OAfM;AAiBP;AACAiB,MAAAA,mBAAmB,EAAE,6BAASC,SAAT,EAAoB,CACxC,CAnBM;AAqBPC,MAAAA,eAAe,EAAG,yBAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AACrC,YAAID,IAAI,KAAK,QAAT,IAAqBC,GAArB,IAA4BA,GAAG,CAACC,GAApC,EAAyC;AACvC,cAAIC,GAAG,GAAG,KAAKtB,WAAL,GAAmB,oBAAnB,GAA0CoB,GAAG,CAACC,GAAxD;AACA,cAAME,MAAM,GAAG,EAAf;;AACA,cAAIH,GAAG,CAACI,KAAR,EAAe;AACb,gBAAIC,OAAO,GAAGL,GAAG,CAACM,GAAJ,GAAU,KAAKC,SAAL,CAAoBP,GAAG,CAACM,GAAxB,CAAV,GAAyC,IAAIE,IAAJ,EAAvD;AACA,gBAAIC,SAAS,GAAG,IAAID,IAAJ,EAAhB;AACA,gBAAME,KAAK,GAAG,uBAAuBC,IAAvB,CAA4BX,GAAG,CAACI,KAAhC,CAAd;;AACA,gBAAIM,KAAJ,EAAW;AACT,kBAAME,MAAM,GAAGC,QAAQ,CAACH,KAAK,CAAC,CAAD,CAAN,CAAR,IAAsB,CAArC;AACA,kBAAII,QAAQ,GAAG,CAAf;;AACA,sBAAQJ,KAAK,CAAC,CAAD,CAAb;AACE,qBAAK,QAAL;AACEI,kBAAAA,QAAQ,GAAG,IAAX;AACA;;AACF,qBAAK,QAAL;AACEA,kBAAAA,QAAQ,GAAG,KAAX;AACA;;AACF,qBAAK,MAAL;AACEA,kBAAAA,QAAQ,UAAR;AACA;;AACF,qBAAK,KAAL;AACEA,kBAAAA,QAAQ,WAAR;AACA;;AACF,qBAAK,MAAL;AACEA,kBAAAA,QAAQ,YAAR;AACA;;AACF,qBAAK,OAAL;AACEA,kBAAAA,QAAQ,aAAR;AACA;;AACF,qBAAK,MAAL;AACEA,kBAAAA,QAAQ,cAAR;AACA;AArBJ;;AAuBAL,cAAAA,SAAS,CAACM,OAAV,CAAkBV,OAAO,CAACW,OAAR,KAAqBJ,MAAM,GAAGE,QAAhD;AACD,aA3BD,MA2BO,IAAI,UAAUG,IAAV,CAAejB,GAAG,CAACI,KAAnB,CAAJ,EAA+B;AACpCK,cAAAA,SAAS,CAACM,OAAV,CAAkBF,QAAQ,CAACb,GAAG,CAACI,KAAL,CAAR,GAAsB,IAAxC;AACD;;AAEDD,YAAAA,MAAM,CAACe,IAAP,CAAY,eAAeT,SAAS,CAACU,WAAV,EAA3B;AACAhB,YAAAA,MAAM,CAACe,IAAP,CAAY,aAAab,OAAO,CAACc,WAAR,EAAzB;AACD;;AAEDjB,UAAAA,GAAG,IAAI,MAAMC,MAAM,CAACiB,IAAP,CAAY,GAAZ,CAAb;AACA,iBAAOlB,GAAP;AACD;;AACD,eAAO,IAAP;AACD,OApEM;AAsEPK,MAAAA,SAAc,EAAE,mBAAUc,IAAV,EAAgB;AAC9B,YAAIA,IAAI,KAAK,KAAb,EAAoB;AAClB,iBAAO,IAAIb,IAAJ,EAAP;AACD,SAFD,MAEO,IAAI,UAAUS,IAAV,CAAeI,IAAf,CAAJ,EAA0B;AAC/B,cAAIC,CAAC,GAAG,IAAId,IAAJ,EAAR;AACAc,UAAAA,CAAC,CAACP,OAAF,CAAUF,QAAQ,CAACQ,IAAD,CAAR,GAAiB,IAA3B;AACA,iBAAOC,CAAP;AACD;;AACD,eAAO,IAAP;AACD,OA/EM;AAiFPC,MAAAA,4BAA4B,EAAG,wCAAY;AACzC,eAAO,IAAP;AACD,OAnFM;AAqFPC,MAAAA,iBAAiB,EAAG,2BAAUC,QAAV,EAAoB;AACtC,YAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACA,YAAMC,MAAM,GAAG,EAAf;AACA,YAAIC,SAAJ;AACA,YAAIC,KAAJ;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGL,IAAI,CAACM,MAAzB,EAAiCF,CAAC,GAAGC,CAArC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3CD,UAAAA,KAAK,GAAGI,UAAU,CAACP,IAAI,CAACI,CAAD,CAAJ,CAAQI,KAAT,CAAlB;;AACA,cAAIL,KAAK,KAAKD,SAAd,EAAyB;AACvBD,YAAAA,MAAM,CAACT,IAAP,CAAY,CAACQ,IAAI,CAACI,CAAD,CAAJ,CAAQT,IAAT,EAAeQ,KAAf,CAAZ;AACD;;AACDD,UAAAA,SAAS,GAAGC,KAAZ;AACD;;AACD,eAAOF,MAAP;AACD,OAlGM;;AAoGP;AACJ;AACA;AACA;AACA;AACIQ,MAAAA,SAAS,EAAE,mBAAUC,GAAV,EAAe;AACxB,YAAI,KAAK5C,SAAT,EAAkB;AAChB4C,UAAAA,GAAG,CAACC,gBAAJ,CAAqB,eAArB,EAAsC,KAAK7C,SAA3C;AACD;AACF,OA7GM;;AA+GP;AACJ;AACA;AACA;AACA;AACA;AACI8C,MAAAA,uBAAuB,EAAE,iCAAUpC,GAAV,EAAeqC,MAAf,EAAuB;AAC9C,YAAMH,GAAG,GAAG,IAAI1E,EAAE,CAACW,EAAH,CAAMmE,OAAN,CAAcC,GAAlB,CAAsB,KAAK7D,WAAL,IAAoBsB,GAAG,IAAI,EAA3B,CAAtB,EAAsDqC,MAAtD,CAAZ;AACA,aAAKJ,SAAL,CAAeC,GAAf;AACA,eAAOA,GAAP;AACD,OAzHM;AA2HPM,MAAAA,SAAU,EAAE,mBAAUlE,IAAV,EAAgB0D,KAAhB,EAAuB;AACjC,gBAAQ1D,IAAI,CAACmE,WAAL,EAAR;AACE,eAAK,SAAL;AACA,eAAK,SAAL;AACA,eAAK,QAAL;AACA,eAAK,QAAL;AACE,mBAAO9B,QAAQ,CAACqB,KAAD,CAAR,GAAkB,CAAzB;;AAEF,eAAK,OAAL;AACE,mBAAOA,KAAK,KAAK,OAAjB;;AAEF,eAAK,eAAL;AACE,mBAAOA,KAAK,KAAK,GAAjB;;AAEF,eAAK,SAAL;AACE,mBAAOA,KAAK,KAAK,QAAjB;;AAEF,eAAK,OAAL;AACA,eAAK,QAAL;AACE,mBAAOA,KAAK,KAAK,IAAjB;;AAEF;AACE,mBAAO,IAAP;AArBJ;AAuBD,OAnJM;AAqJPU,MAAAA,SAAS,EAAG,mBAAU/C,SAAV,EAAqBgD,OAArB,EAA8B;AAAA;;AACxC;AACA,YAAMT,GAAG,GAAG,KAAKE,uBAAL,CAA6B,2DAA7B,CAAZ;AACAF,QAAAA,GAAG,CAACU,WAAJ,CAAgB,SAAhB,EAA2B,UAASC,CAAT,EAAY;AACrC,cAAMX,GAAG,GAAGW,CAAC,CAACC,SAAF,EAAZ;AAEA,cAAMC,GAAG,GAAGb,GAAG,CAACc,WAAJ,EAAZ;AACA,cAAMC,MAAM,GAAG,EAAf;AACAF,UAAAA,GAAG,CAACG,OAAJ,CAAY,UAASC,KAAT,EAAgB;AAAA;;AAC1B,gBAAIA,KAAK,CAAC/D,OAAN,IAAiBgE,KAAK,CAACC,OAAN,CAAcF,KAAK,CAAC/D,OAApB,CAArB,EAAmD;AACjD;AACA,kBAAIkE,MAAM,GAAG,CAAb;AACA,kBAAMxD,GAAG,GAAG,EAAZ;AACAqD,cAAAA,KAAK,CAAC/D,OAAN,CAAc8D,OAAd,CAAsB,UAAAK,GAAG,EAAI;AAC3BzD,gBAAAA,GAAG,CAACyD,GAAG,CAAC1D,IAAL,CAAH,GAAgB;AAACvB,kBAAAA,IAAI,EAAEiF,GAAG,CAACjF,IAAJ,CAASmE,WAAT,EAAP;AAA+BT,kBAAAA,KAAK,EAAEuB,GAAG,CAACvB,KAA1C;AAAiDwB,kBAAAA,KAAK,EAAED,GAAG,CAACC,KAA5D;AAAmE3D,kBAAAA,IAAI,EAAE0D,GAAG,CAAC1D,IAA7E;AAAmFyD,kBAAAA,MAAM,EAAE;AAA3F,iBAAhB;;AACA,oBAAI,KAAI,CAACd,SAAL,CAAgBe,GAAG,CAACjF,IAApB,EAA0BiF,GAAG,CAACvB,KAA9B,CAAJ,EAA0C;AACxCsB,kBAAAA,MAAM;AACNxD,kBAAAA,GAAG,CAACyD,GAAG,CAAC1D,IAAL,CAAH,CAAcyD,MAAd,GAAuB,IAAvB;AACD;;AACD,oBAAI,CAACtF,MAAM,CAACyF,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC,KAAI,CAAC/E,SAA1C,EAA0D2E,GAAG,CAAC1D,IAA9D,CAAL,EAA0E;AACxE,kBAAA,KAAI,CAACjB,SAAL,CAAoB2E,GAAG,CAAC1D,IAAxB,IAAgC,CAACsD,KAAK,CAACtD,IAAP,CAAhC;AACD,iBAFD,MAEO;AACL,kBAAA,KAAI,CAACjB,SAAL,CAAoB2E,GAAG,CAAC1D,IAAxB,EAA8BmB,IAA9B,CAAmCmC,KAAK,CAACtD,IAAzC;AACD;;AACD,uBAAOC,GAAP;AACD,eAZD;AAaA,mBAAKnB,SAAL,CAAcwE,KAAK,CAACtD,IAApB,IAA4B;AAC1BT,gBAAAA,OAAO,EAAEU,GADiB;AAE1BwD,gBAAAA,MAAM,EAAEA;AAFkB,eAA5B;AAIAL,cAAAA,MAAM,CAAC,YAAYE,KAAK,CAACtD,IAAnB,CAAN,GAAiCyD,MAAjC;AACAL,cAAAA,MAAM,CAAC,aAAaE,KAAK,CAACtD,IAApB,CAAN,GAAkC7B,MAAM,CAAC4F,MAAP,CAAc9D,GAAd,CAAlC;AACD;;AACDmD,YAAAA,MAAM,CAACE,KAAK,CAACtD,IAAP,CAAN,GAAqBsD,KAAK,CAACnB,KAA3B;AACD,WA1BD,EA0BG,IA1BH;AA2BA,eAAKiB,MAAL,CAAYA,MAAZ;AACA,eAAK1D,SAAL,GAA6BI,SAA7B;AACD,SAlCD,EAkCG,IAlCH,EAHwC,CAsCxC;;AACAuC,QAAAA,GAAG,CAAC2B,IAAJ,GAvCwC,CAyCxC;;AACA,aAAKC,OAAL,GAAe,IAAf;;AACA,YAAI,CAAC5F,EAAE,CAAC6F,MAAH,CAAUC,MAAV,CAAiBC,SAAtB,EAAiC;AAC/B,cAAMC,MAAM,GAAGvE,SAAS,CAACwE,MAAV,CAAiB,UAAAC,IAAI;AAAA,mBAAIA,IAAI,CAACC,KAAL,CAAW,GAAX,EAAgBvC,MAAhB,GAAyB,CAA7B;AAAA,WAArB,CAAf;AACA,cAAIwC,KAAK,GAAG,8BAAZ;;AACA,cAAIJ,MAAM,CAACpC,MAAP,GAAgB,CAApB,EAAuB;AACrBwC,YAAAA,KAAK,GAAG,sBAAR,CADqB,CAErB;;AACA,gBAAMC,SAAS,GAAG,KAAKnC,uBAAL,CAA6B,qBAA7B,CAAlB;AACAmC,YAAAA,SAAS,CAAC3B,WAAV,CAAsB,SAAtB,EAAiC,UAAAC,CAAC,EAAI;AACpC,kBAAME,GAAG,GAAGF,CAAC,CAACC,SAAF,GAAcE,WAAd,EAAZ;AACA,kBAAMC,MAAM,GAAG,EAAf;AACAF,cAAAA,GAAG,CAACG,OAAJ,CAAY,UAAAC,KAAK,EAAI;AACnB,oBAAIe,MAAM,CAACM,QAAP,CAAgBrB,KAAK,CAACsB,GAAtB,CAAJ,EAAgC;AAC9BxB,kBAAAA,MAAM,CAACE,KAAK,CAACsB,GAAP,CAAN,GAAoBtB,KAAK,CAACuB,UAAN,CAAiBC,MAArC;AACD;AACF,eAJD;;AAKA,cAAA,MAAI,CAAC1B,MAAL,CAAYA,MAAZ;AACD,aATD;AAUAsB,YAAAA,SAAS,CAACV,IAAV;AACD;;AACD,cAAI,CAAC,KAAKe,WAAV,EAAuB;AACrB,iBAAKA,WAAL,GAAmB,IAAIC,WAAJ,CAAgB,KAAKnG,WAAL,GAAmB,gBAAnB,GAAsC4F,KAAtD,CAAnB,CADqB,CAGrB;;AACA,iBAAKM,WAAL,CAAiBE,gBAAjB,CAAkC,SAAlC,EAA6C,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAA7C,EAA4E,KAA5E;AACA,iBAAKJ,WAAL,CAAiBE,gBAAjB,CAAkC,OAAlC,EAA2C,KAAKG,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAA3C,EAAwE,KAAxE,EALqB,CAMrB;AACA;;AACA,iBAAKJ,WAAL,CAAiBM,OAAjB,GAA2B,YAAY;AACrC,mBAAKC,KAAL,CAAW,iBAAX;AACA,mBAAKC,YAAL,CAAkB,KAAlB;AACD,aAH0B,CAGzBJ,IAHyB,CAGpB,IAHoB,CAA3B;;AAIA,iBAAKJ,WAAL,CAAiBS,MAAjB,GAA0B,YAAY;AACpC,mBAAKC,KAAL,CAAW,wBAAX;AACA,mBAAKF,YAAL,CAAkB,IAAlB;AACD,aAHyB,CAGxBJ,IAHwB,CAGnB,IAHmB,CAA1B;AAID;AACF;AACF,OArOM;AAuOPO,MAAAA,SAAS,EAAE,qBAAY;AACrB,aAAKD,KAAL,CAAW,wBAAX;;AACA,YAAI,KAAKV,WAAT,EAAsB;AACpB,eAAKA,WAAL,CAAiBY,KAAjB;AACA,eAAKZ,WAAL,GAAmB,IAAnB;AACD;AACF,OA7OM;AA+OPG,MAAAA,aAAa,EAAE,uBAASU,OAAT,EAAkB;AAAA;;AAC/B,YAAIA,OAAO,CAACnH,IAAR,KAAiB,SAArB,EAAgC;AAC9B,eAAKoH,MAAL,CAAY,MAAZ,EAAoB;AAACpH,YAAAA,IAAI,EAAEmH,OAAO,CAACnH,IAAf;AAAqBkD,YAAAA,IAAI,EAAEiE,OAAO,CAACjE;AAAnC,WAApB;AACA,cAAMA,IAAI,GAAGmE,IAAI,CAACC,KAAL,CAAWH,OAAO,CAACjE,IAAnB,CAAb;;AACA,cAAIA,IAAI,CAAClD,IAAL,KAAc,uBAAd,IAAyCkD,IAAI,CAAClD,IAAL,KAAc,4BAA3D,EAAyF;AACvF;AACA,gBAAM2E,MAAM,GAAG,EAAf;AACA,gBAAM4C,IAAI,GAAGrE,IAAI,CAAC8C,KAAL,CAAWD,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAb;AACA,gBAAMyB,MAAM,GAAGH,IAAI,CAACC,KAAL,CAAWpE,IAAI,CAACiE,OAAhB,CAAf;AACAxC,YAAAA,MAAM,CAAC4C,IAAD,CAAN,GAAeC,MAAM,CAACnE,KAAtB,CALuF,CAMvF;;AACA,gBAAI3D,MAAM,CAACyF,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC,KAAK/E,SAA1C,EAA0DiH,IAA1D,CAAJ,EAAqE;AACnE,kBAAME,UAAU,GAAG,KAAKnH,SAAL,CAAoBiH,IAApB,CAAnB;AACAE,cAAAA,UAAU,CAAC7C,OAAX,CAAmB,UAAA8C,SAAS,EAAI;AAC9B,oBAAMC,KAAK,GAAG,MAAI,CAACtH,SAAL,CAAcqH,SAAd,CAAd;AACA,oBAAI1C,MAAM,GAAG,CAAb;AACA2C,gBAAAA,KAAK,CAAC7G,OAAN,CAAcyG,IAAd,EAAoB7D,KAApB,GAA4B8D,MAAM,CAACnE,KAAnC;AACA3D,gBAAAA,MAAM,CAACkI,IAAP,CAAYD,KAAK,CAAC7G,OAAlB,EAA2B8D,OAA3B,CAAmC,UAAAiD,UAAU,EAAI;AAC/C,sBAAMC,MAAM,GAAGH,KAAK,CAAC7G,OAAN,CAAc+G,UAAd,CAAf;;AACA,sBAAI,MAAI,CAAC3D,SAAL,CAAgB4D,MAAM,CAAC9H,IAAvB,EAA6B8H,MAAM,CAACpE,KAApC,CAAJ,EAAgD;AAC9CsB,oBAAAA,MAAM;AACN8C,oBAAAA,MAAM,CAAC9C,MAAP,GAAgB,IAAhB;AACD,mBAHD,MAGO;AACL8C,oBAAAA,MAAM,CAAC9C,MAAP,GAAgB,KAAhB;AACD;AACF,iBARD;AASA2C,gBAAAA,KAAK,CAAC3C,MAAN,GAAeA,MAAf;AACAL,gBAAAA,MAAM,CAAC,YAAY+C,SAAb,CAAN,GAAgC1C,MAAhC;AACAL,gBAAAA,MAAM,CAAC,aAAa+C,SAAd,CAAN,GAAiChI,MAAM,CAAC4F,MAAP,CAAcqC,KAAK,CAAC7G,OAApB,CAAjC;AACD,eAhBD;AAiBD;;AACD,iBAAK6D,MAAL,CAAYA,MAAZ;AACD,WA5BD,MA4BO,IAAIzB,IAAI,CAAClD,IAAL,KAAc,6BAAlB,EAAiD;AACtD;AACA,gBAAM2E,OAAM,GAAG,EAAf;AACA,gBAAM4C,KAAI,GAAGrE,IAAI,CAAC8C,KAAL,CAAWD,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAb;;AACA,gBAAIyB,OAAM,GAAGH,IAAI,CAACC,KAAL,CAAWpE,IAAI,CAACiE,OAAhB,CAAb;;AACA,gBAAIrC,KAAK,CAACC,OAAN,CAAcyC,OAAd,CAAJ,EAA2B;AACzB;AACAA,cAAAA,OAAM,GAAGA,OAAM,CAAC,CAAD,CAAf;AACD;;AACD7C,YAAAA,OAAM,CAAC4C,KAAD,CAAN,GAAeC,OAAM,CAACnB,MAAtB;AACA,iBAAK1B,MAAL,CAAYA,OAAZ;AACD;AACF;AACF,OA5RM;AA8RPoD,MAAAA,KAAK,EAAE,eAAUC,OAAV,EAAmB3E,KAAnB,EAA0B;AAC/B,YAAMO,GAAG,GAAG,KAAKE,uBAAL,CAA6B,WAAWkE,OAAxC,EAAiD,MAAjD,CAAZ;AACApE,QAAAA,GAAG,CAACC,gBAAJ,CAAqB,cAArB,EAAqC,YAArC;AACAD,QAAAA,GAAG,CAACqE,cAAJ,CAAmB,KAAK5E,KAAxB;AACAO,QAAAA,GAAG,CAAC2B,IAAJ;AACD,OAnSM;AAqSPoB,MAAAA,WAAW,EAAE,qBAAUE,KAAV,EAAiB;AAC5B,aAAKA,KAAL,CAAWA,KAAX;AACD,OAvSM;AAySPqB,MAAAA,KAAK,EAAG,eAAUC,SAAV,EAAqBC,WAArB,EAAkCC,QAAlC,EAA4CC,OAA5C,EAAqD;AAC3D,YAAIF,WAAW,IAAIA,WAAW,CAACG,QAA/B,EAAyC;AACvC;AACA,eAAKvH,SAAL,GAAe,WAAWwH,IAAI,CAACJ,WAAW,CAACG,QAAZ,GAAuB,GAAvB,IAA8BH,WAAW,CAACK,QAAZ,IAAwB,EAAtD,CAAD,CAA9B;AACD,SAJ0D,CAK3D;;;AACA,YAAM7E,GAAG,GAAG,KAAKE,uBAAL,EAAZ;AACAF,QAAAA,GAAG,CAACU,WAAJ,CAAgB,SAAhB,EAA2B,UAASC,CAAT,EAAY;AACrC,cAAMX,GAAG,GAAGW,CAAC,CAACC,SAAF,EAAZ;AACA,eAAKkE,SAAL,CAAe9E,GAAG,CAAC+E,iBAAJ,CAAsB,QAAtB,CAAf;;AACA,cAAIN,QAAJ,EAAc;AACZA,YAAAA,QAAQ,CAAChD,IAAT,CAAciD,OAAd;AACD;AACF,SAND,EAMG,IANH,EAP2D,CAc3D;;AACA1E,QAAAA,GAAG,CAAC2B,IAAJ;AACD,OAzTM;AA2TPqD,MAAAA,YAAY,EAAE,wBAAW;AACvB,eAAO,KAAK7H,SAAZ;AACD,OA7TM;AA8TP8H,MAAAA,OAAO,EAAE,iBAASC,WAAT,EAAsB;AAC7B,YAAIA,WAAJ,EAAiB;AACf;AACA,cAAI,KAAK7H,SAAT,EAAgC;AAC9B,iBAAKmD,SAAL,CAAe,KAAKnD,SAApB;AACD,WAFD,MAEO;AACL,iBAAK+F,KAAL,CAAW,mDAAX;AACD;AACF;AACF,OAvUM;AAyUPrC,MAAAA,MAAM,EAAE,gBAASoE,IAAT,EAAe,CAAE,CAzUlB;AAyUoB;AAC3B3B,MAAAA,MAAM,EAAE,gBAASpH,IAAT,EAAekD,IAAf,EAAqB,CAAE,CA1UxB;AA2UP8F,MAAAA,SAAS,EAAE,mBAAShJ,IAAT,EAAeiJ,OAAf,EAAwBC,IAAxB,EAA8B,CAAE,CA3UpC;AA6UPC,MAAAA,WAAW,EAAE,qBAAU5H,IAAV,EAAgB;AAC3B,eAAO,CAAC,WAAD,EAAc,KAAd,EAAqB2E,QAArB,CAA8B3E,IAA9B,CAAP;AACD,OA/UM;AAgVP6H,MAAAA,cAAc,EAAE,wBAAU7H,IAAV,EAAgB;AAC9B,gBAAQA,IAAR;AACE,eAAK,WAAL;AACE,mBAAO,KAAKnB,WAAL,GAAmB,8BAA1B;;AACF,eAAK,KAAL;AACE,mBAAO,KAAKA,WAAL,GAAmB,mBAA1B;;AACF;AACE,mBAAO,IAAP;AANJ;AAQD,OAzVM;AA0VPiJ,MAAAA,0BAA0B,EAAG,oCAAU9H,IAAV,EAAgB+H,MAAhB,EAAwB;AACnD,gBAAQ/H,IAAR;AACE,eAAK,WAAL;AACE,mBAAO,UAAUgI,MAAV,EAAkB;AACvB,kBAAIrG,IAAJ;;AACA,kBAAIoG,MAAM,KAAK,QAAf,EAAyB;AACvB,uBAAOC,MAAM,CAAC/H,GAAP,CAAW,UAAAqD,KAAK;AAAA,yBAAK;AAC1BK,oBAAAA,KAAK,EAAEL,KAAK,CAACtD,IADa;AAE1BiI,oBAAAA,UAAU,EAAE3E,KAAK,CAACtD,IAFQ;AAG1BkI,oBAAAA,MAAM,EAAE5E,KAAK,CAAC7E,IAHY;AAI1B0J,oBAAAA,IAAI,EAAEC,MAAM,CAACC,MAAP,CAAcC,SAAd,CAAwBC,kBAAxB,CAA2CC;AAJvB,mBAAL;AAAA,iBAAhB,CAAP;AAMD;;AACD7G,cAAAA,IAAI,GAAG,EAAP;AACAqG,cAAAA,MAAM,CAAC3E,OAAP,CAAe,UAAAoF,OAAO,EAAI;AACxB,oBAAMhK,IAAI,GAAGgK,OAAO,CAAChK,IAAR,GAAegK,OAAO,CAAChK,IAAR,CAAa+F,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAf,GAA4C,EAAzD;;AACA,oBAAI,CAACrG,MAAM,CAACyF,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCnC,IAArC,EAA2ClD,IAA3C,CAAL,EAAuD;AACrDkD,kBAAAA,IAAI,CAAClD,IAAD,CAAJ,GAAa,EAAb;AACD;;AACD,oBAAM6E,KAAK,GAAG;AACZxB,kBAAAA,KAAK,EAAE2G,OAAO,CAACzI,IADH;AAEZ2D,kBAAAA,KAAK,EAAE8E,OAAO,CAAC9E,KAAR,IAAiB;AAFZ,iBAAd;;AAIA,oBAAIlF,IAAJ,EAAU;AACR6E,kBAAAA,KAAK,CAACoF,KAAN,GAAc;AACZC,oBAAAA,SAAS,EAAE,QAAQlK,IAAI,CAACmE,WAAL;AADP,mBAAd;AAGD;;AACDjB,gBAAAA,IAAI,CAAClD,IAAD,CAAJ,CAAW0C,IAAX,CAAgBmC,KAAhB;AACD,eAfD;AAgBA,qBAAO3B,IAAP;AACD,aA5BD;;AA6BF,eAAK,KAAL;AACE,mBAAO,UAAUqG,MAAV,EAAkB;AACvB,kBAAID,MAAM,KAAK,QAAf,EAAyB;AACvB,uBAAOC,MAAM,CAAC/H,GAAP,CAAW,UAAAwI,OAAO;AAAA,yBAAK;AAACR,oBAAAA,UAAU,EAAEQ,OAAb;AAAsB9E,oBAAAA,KAAK,EAAE8E,OAA7B;AAAsCN,oBAAAA,IAAI,EAAEC,MAAM,CAACC,MAAP,CAAcC,SAAd,CAAwBC,kBAAxB,CAA2CK;AAAvF,mBAAL;AAAA,iBAAlB,CAAP;AACD;;AACC,qBAAOZ,MAAM,CAAC/H,GAAP,CAAW,UAAAwI,OAAO;AAAA,uBAAK;AAAC3G,kBAAAA,KAAK,EAAE2G,OAAR;AAAiB9E,kBAAAA,KAAK,EAAE8E;AAAxB,iBAAL;AAAA,eAAlB,CAAP;AACH,aALD;;AAMF;AACE,mBAAO,IAAP;AAvCJ;AAyCD;AApYM;AA1C2B,GAAtC;AAxBApK,EAAAA,EAAE,CAACC,EAAH,CAAMuK,OAAN,CAAcC,IAAd,CAAmBhL,aAAnB,GAAmCA,aAAnC",
  "sourcesContent": [
    "/* Rest.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * openHAB Rest client, that uses the native openHAB REST-API directly and does not\n * need the openHAB-cometvisu binding to be installed\n */\nqx.Class.define('cv.io.openhab.Rest', {\n  extend: qx.core.Object,\n  implement: cv.io.IClient,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (type, backendUrl) {\n    this.base(arguments);\n    this.initialAddresses = [];\n    this._type = type;\n    this._backendUrl = backendUrl || '/rest/';\n    this.__groups = {};\n    this.__memberLookup = {};\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n    connected: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeConnected'\n    },\n\n    server: {\n      check: 'String',\n      nullable: true,\n      event: 'changedServer'\n    }\n  },\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __lastError: null,\n    _type: null,\n    _backendUrl: null,\n    __token: null,\n    __groups: null,\n    __memberLookup: null,\n    __subscribedAddresses: null,\n\n    getBackend: function () {\n      return {};\n    },\n\n    getType() {\n      return this._type;\n    },\n\n    // not used / needed in this client\n    setInitialAddresses: function(addresses) {\n    },\n\n    getResourcePath : function (name, map) {\n      if (name === 'charts' && map && map.src) {\n        let url = this._backendUrl + 'persistence/items/' + map.src;\n        const params = [];\n        if (map.start) {\n          let endTime = map.end ? this.__convertTimes(map.end) : new Date();\n          let startTime = new Date();\n          const match = /^end-([\\d]*)([\\w]+)$/.exec(map.start);\n          if (match) {\n            const amount = parseInt(match[1]) || 1;\n            let interval = 0;\n            switch (match[2]) {\n              case 'second':\n                interval = 1000;\n                break;\n              case 'minute':\n                interval = 60000;\n                break;\n              case 'hour':\n                interval = 60 * 60000;\n                break;\n              case 'day':\n                interval = 24 * 60 * 60000;\n                break;\n              case 'week':\n                interval = 7 * 24 * 60 * 60000;\n                break;\n              case 'month':\n                interval = 30 * 24 * 60 * 60000;\n                break;\n              case 'year':\n                interval = 365 * 24 * 60 * 60000;\n                break;\n            }\n            startTime.setTime(endTime.getTime() - (amount * interval));\n          } else if (/^[\\d]+$/.test(map.start)) {\n            startTime.setTime(parseInt(map.start) * 1000);\n          }\n\n          params.push('starttime=' + startTime.toISOString());\n          params.push('endtime=' + endTime.toISOString());\n        }\n\n        url += '?' + params.join('&');\n        return url;\n      }\n      return null;\n    },\n\n    __convertTimes: function (time) {\n      if (time === 'now') {\n        return new Date();\n      } else if (/^[\\d]+$/.test(time)) {\n        let d = new Date();\n        d.setTime(parseInt(time) * 1000);\n        return d;\n      }\n      return null;\n    },\n\n    hasCustomChartsDataProcessor : function () {\n      return true;\n    },\n\n    processChartsData : function (response) {\n      const data = response.data;\n      const newRrd = [];\n      let lastValue;\n      let value;\n      for (let j = 0, l = data.length; j < l; j++) {\n        value = parseFloat(data[j].state);\n        if (value !== lastValue) {\n          newRrd.push([data[j].time, value]);\n        }\n        lastValue = value;\n      }\n      return newRrd;\n    },\n\n    /**\n     * Auth basic authentication header to request\n     * @param req {qx.io.request.Xhr}\n     * @private\n     */\n    authorize: function (req) {\n      if (this.__token) {\n        req.setRequestHeader('Authorization', this.__token);\n      }\n    },\n\n    /**\n     * Creates an authorized request to the backend with a relative path\n     * @param url {String?} appended to the backends base path\n     * @param method {String?} HTTP method type (GET is the default)\n     * @return A XHR request {qx.io.request.Xhr}\n     */\n    createAuthorizedRequest: function (url, method) {\n      const req = new qx.io.request.Xhr(this._backendUrl + (url || ''), method);\n      this.authorize(req);\n      return req;\n    },\n\n    __isActive: function (type, state) {\n      switch (type.toLowerCase()) {\n        case 'decimal':\n        case 'percent':\n        case 'number':\n        case 'dimmer':\n          return parseInt(state) > 0;\n\n        case 'color':\n          return state !== '0,0,0';\n\n        case 'rollershutter':\n          return state === '0';\n\n        case 'contact':\n          return state === 'OPENED';\n\n        case 'onoff':\n        case 'switch':\n          return state === 'ON';\n\n        default:\n          return null;\n      }\n    },\n\n    subscribe : function (addresses, filters) {\n      // send first request to get all states once\n      const req = this.createAuthorizedRequest('items?fields=name,state,members,type,label&recursive=true');\n      req.addListener('success', function(e) {\n        const req = e.getTarget();\n\n        const res = req.getResponse();\n        const update = {};\n        res.forEach(function(entry) {\n          if (entry.members && Array.isArray(entry.members)) {\n            // this is a group\n            let active = 0;\n            const map = {};\n            entry.members.forEach(obj => {\n              map[obj.name] = {type: obj.type.toLowerCase(), state: obj.state, label: obj.label, name: obj.name, active: false};\n              if (this.__isActive(obj.type, obj.state)) {\n                active++;\n                map[obj.name].active = true;\n              }\n              if (!Object.prototype.hasOwnProperty.call(this.__memberLookup, obj.name)) {\n                this.__memberLookup[obj.name] = [entry.name];\n              } else {\n                this.__memberLookup[obj.name].push(entry.name);\n              }\n              return map;\n            });\n            this.__groups[entry.name] = {\n              members: map,\n              active: active\n            };\n            update['number:' + entry.name] = active;\n            update['members:' + entry.name] = Object.values(map);\n          }\n          update[entry.name] = entry.state;\n        }, this);\n        this.update(update);\n        this.__subscribedAddresses = addresses;\n      }, this);\n      // Send request\n      req.send();\n\n      // create sse session\n      this.running = true;\n      if (!cv.report.Record.REPLAYING) {\n        const things = addresses.filter(addr => addr.split(':').length > 3);\n        let topic = 'openhab/items/*/statechanged';\n        if (things.length > 0) {\n          topic = 'openhab/*/*/*changed';\n          // request current states\n          const thingsReq = this.createAuthorizedRequest('things?summary=true');\n          thingsReq.addListener('success', e => {\n            const res = e.getTarget().getResponse();\n            const update = {};\n            res.forEach(entry => {\n              if (things.includes(entry.UID)) {\n                update[entry.UID] = entry.statusInfo.status;\n              }\n            });\n            this.update(update);\n          });\n          thingsReq.send();\n        }\n        if (!this.eventSource) {\n          this.eventSource = new EventSource(this._backendUrl + 'events?topics=' + topic);\n\n          // add default listeners\n          this.eventSource.addEventListener('message', this.handleMessage.bind(this), false);\n          this.eventSource.addEventListener('error', this.handleError.bind(this), false);\n          // add additional listeners\n          //Object.getOwnPropertyNames(this.__additionalTopics).forEach(this.__addRecordedEventListener, this);\n          this.eventSource.onerror = function () {\n            this.error('connection lost');\n            this.setConnected(false);\n          }.bind(this);\n          this.eventSource.onopen = function () {\n            this.debug('connection established');\n            this.setConnected(true);\n          }.bind(this);\n        }\n      }\n    },\n\n    terminate: function () {\n      this.debug('terminating connection');\n      if (this.eventSource) {\n        this.eventSource.close();\n        this.eventSource = null;\n      }\n    },\n\n    handleMessage: function(payload) {\n      if (payload.type === 'message') {\n        this.record('read', {type: payload.type, data: payload.data});\n        const data = JSON.parse(payload.data);\n        if (data.type === 'ItemStateChangedEvent' || data.type === 'GroupItemStateChangedEvent') {\n          //extract item name from topic\n          const update = {};\n          const item = data.topic.split('/')[2];\n          const change = JSON.parse(data.payload);\n          update[item] = change.value;\n          // check if this Item is part of any group\n          if (Object.prototype.hasOwnProperty.call(this.__memberLookup, item)) {\n            const groupNames = this.__memberLookup[item];\n            groupNames.forEach(groupName => {\n              const group = this.__groups[groupName];\n              let active = 0;\n              group.members[item].state = change.value;\n              Object.keys(group.members).forEach(memberName => {\n                const member = group.members[memberName];\n                if (this.__isActive(member.type, member.state)) {\n                  active++;\n                  member.active = true;\n                } else {\n                  member.active = false;\n                }\n              });\n              group.active = active;\n              update['number:' + groupName] = active;\n              update['members:' + groupName] = Object.values(group.members);\n            });\n          }\n          this.update(update);\n        } else if (data.type === 'ThingStatusInfoChangedEvent') {\n          //extract item name from topic\n          const update = {};\n          const item = data.topic.split('/')[2];\n          let change = JSON.parse(data.payload);\n          if (Array.isArray(change)) {\n            // [newState, oldState]\n            change = change[0];\n          }\n          update[item] = change.status;\n          this.update(update);\n        }\n      }\n    },\n\n    write: function (address, value) {\n      const req = this.createAuthorizedRequest('items/' + address, 'POST');\n      req.setRequestHeader('Content-Type', 'text/plain');\n      req.setRequestData('' + value);\n      req.send();\n    },\n\n    handleError: function (error) {\n      this.error(error);\n    },\n\n    login : function (loginOnly, credentials, callback, context) {\n      if (credentials && credentials.username) {\n        // just saving the credentials for later use as we are using basic authentication\n        this.__token = 'Basic ' + btoa(credentials.username + ':' + (credentials.password || ''));\n      }\n      // no login needed we just do a request to the if the backend is reachable\n      const req = this.createAuthorizedRequest();\n      req.addListener('success', function(e) {\n        const req = e.getTarget();\n        this.setServer(req.getResponseHeader('Server'));\n        if (callback) {\n          callback.call(context);\n        }\n      }, this);\n      // Send request\n      req.send();\n    },\n\n    getLastError: function() {\n      return this.__lastError;\n    },\n    restart: function(fullRestart) {\n      if (fullRestart) {\n        // re-read all states\n        if (this.__subscribedAddresses) {\n          this.subscribe(this.__subscribedAddresses);\n        } else {\n          this.debug('no subscribed addresses, skip reading all states.');\n        }\n      }\n    },\n\n    update: function(json) {}, // jshint ignore:line\n    record: function(type, data) {},\n    showError: function(type, message, args) {},\n\n    hasProvider: function (name) {\n      return ['addresses', 'rrd'].includes(name);\n    },\n    getProviderUrl: function (name) {\n      switch (name) {\n        case 'addresses':\n          return this._backendUrl + 'items?fields=name,type,label';\n        case 'rrd':\n          return this._backendUrl + 'persistence/items';\n        default:\n          return null;\n      }\n    },\n    getProviderConvertFunction : function (name, format) {\n      switch (name) {\n        case 'addresses':\n          return function (result) {\n            let data;\n            if (format === 'monaco') {\n              return result.map(entry => ({\n                label: entry.name,\n                insertText: entry.name,\n                detail: entry.type,\n                kind: window.monaco.languages.CompletionItemKind.Value\n              }));\n            }\n            data = {};\n            result.forEach(element => {\n              const type = element.type ? element.type.split(':')[0] : '';\n              if (!Object.prototype.hasOwnProperty.call(data, type)) {\n                data[type] = [];\n              }\n              const entry = {\n                value: element.name,\n                label: element.label || ''\n              };\n              if (type) {\n                entry.hints = {\n                  transform: 'OH:' + type.toLowerCase()\n                };\n              }\n              data[type].push(entry);\n            });\n            return data;\n          };\n        case 'rrd':\n          return function (result) {\n            if (format === 'monaco') {\n              return result.map(element => ({insertText: element, label: element, kind: window.monaco.languages.CompletionItemKind.EnumMember}));\n            } \n              return result.map(element => ({value: element, label: element}));\n          };\n        default:\n          return null;\n      }\n    }\n  }\n});\n"
  ]
}