{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "client",
    "watchdog",
    "cv",
    "io",
    "Watchdog",
    "setClient",
    "members",
    "doRestart",
    "xhr",
    "lastIndex",
    "retryCounter",
    "retryServerErrorCounter",
    "sessionId",
    "running",
    "handleSession",
    "args",
    "connect",
    "json",
    "getResponse",
    "s",
    "prototype",
    "hasOwnProperty",
    "call",
    "error",
    "showError",
    "Client",
    "ERROR_CODES",
    "PROTOCOL_MISSING_VERSION",
    "version",
    "v",
    "split",
    "parseInt",
    "data",
    "successCallback",
    "initialAddresses",
    "length",
    "buildRequest",
    "handleReadStart",
    "handleRead",
    "__startReading",
    "start",
    "callback",
    "t",
    "options",
    "beforeSend",
    "bind",
    "listeners",
    "handleError",
    "doRequest",
    "getResourcePath",
    "Array",
    "slice",
    "arguments",
    "setDataReceived",
    "delay",
    "Math",
    "pow",
    "info",
    "isActive",
    "event",
    "Timer",
    "once",
    "ping",
    "PROTOCOL_INVALID_READ_RESPONSE_MISSING_I",
    "i",
    "d",
    "readResendHeaderValues",
    "update",
    "setConnected",
    "url",
    "getUrl",
    "shift",
    "getQueryString",
    "setUrl",
    "send",
    "diffAddresses",
    "addresses",
    "includes",
    "push",
    "removeListener",
    "addListener",
    "Environment",
    "select",
    "ev",
    "req",
    "getTarget",
    "indexOf",
    "getStatus",
    "backend",
    "maxRetries",
    "serverErrorHandled",
    "restart",
    "getReadyState",
    "getStatusText",
    "jquery",
    "str",
    "excptObj",
    "readyState",
    "status",
    "headerName",
    "resendHeaders",
    "undefined",
    "setRequestHeader",
    "headers",
    "getResponseHeader",
    "isConnectionRunning",
    "doFullReload",
    "abort",
    "hooks",
    "onClose",
    "stop",
    "transport",
    "LongPolling"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/client/source/class/cv/io/transport/LongPolling.js"
  ],
  "sourcesContent": [
    "/* LongPolling.js\n *\n * copyright (c) 2010-2016, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.io.transport.LongPolling', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  /**\n   *\n   * @param client {cv.io.Client}\n   */\n  construct(client) {\n    this.client = client;\n    this.watchdog = new cv.io.Watchdog();\n    this.watchdog.setClient(client);\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    watchdog: null,\n    doRestart: false, // are we currently in a restart, e.g. due to the watchdog\n    xhr: null, // the ongoing AJAX request\n    lastIndex: -1, // index returned by the last request\n    retryCounter: 0, // count number of retries (reset with each valid response)\n    retryServerErrorCounter: 0, // count number of successive temporary server errors\n    sessionId: null,\n    client: null,\n    running: null,\n\n    /**\n     * This function gets called once the communication is established\n     * and this.client information is available.\n     *\n     * @param args {Array} arguments from the XHR response callback\n     * @param connect {Boolean} whether to start the connection or not\n     */\n    handleSession(args, connect) {\n      var json = this.client.getResponse(args);\n      this.sessionId = json.s;\n      if (!Object.prototype.hasOwnProperty.call(json, 'v')) {\n        this.error('CometVisu protocol error: missing protocol version');\n        this.client.showError(cv.io.Client.ERROR_CODES.PROTOCOL_MISSING_VERSION, json);\n      } else {\n        this.version = json.v.split('.', 3);\n\n        if (parseInt(this.version[0]) > 0 || parseInt(this.version[1]) > 1) {\n          this.error('ERROR CometVisu Client: too new protocol version (' + json.v + ') used!');\n        }\n        if (connect) {\n          this.connect();\n        }\n      }\n    },\n\n    connect() {\n      this.running = true;\n      // send first request\n\n      var data = [];\n      var successCallback = null;\n      if (this.client.initialAddresses.length) {\n        data = this.client.buildRequest(this.client.initialAddresses);\n        successCallback = this.handleReadStart;\n      } else {\n        // old behaviour -> start full query\n        data = this.client.buildRequest();\n        successCallback = this.handleRead;\n      }\n      this.__startReading(data, successCallback);\n      this.watchdog.start(5);\n    },\n\n    __startReading(data, callback) {\n      data = data || this.client.buildRequest();\n      callback = callback || this.handleRead;\n      data.t = 0;\n      var options = {\n        beforeSend: this.beforeSend.bind(this),\n        listeners: {\n          error: this.handleError\n        }\n      };\n\n      this.xhr = this.client.doRequest(this.client.getResourcePath('read'), data, callback, this, options);\n    },\n\n    /**\n     * This function gets called once the communication is established\n     * and this.client information is available\n     */\n    handleRead() {\n      var json = this.client.getResponse(Array.prototype.slice.call(arguments, 0));\n\n      if (this.doRestart || (!json && this.lastIndex === -1)) {\n        this.client.setDataReceived(false);\n        if (this.running) {\n          // retry initial request\n          var delay = 100 * Math.pow(this.retryCounter, 2);\n          this.retryCounter++;\n          if (this.doRestart) {\n            // planned restart, only inform user\n            this.info('restarting XHR read requests in ' + delay + ' ms as planned');\n          } else {\n            this.info('restarting XHR read requests in ' + delay + ' ms as forced to');\n          }\n          if (!this.watchdog.isActive()) {\n            // watchdog has been stopped in the abort function -> restart it\n            this.watchdog.start(5);\n          }\n          qx.event.Timer.once(\n            function () {\n              this.__startReading();\n              this.watchdog.ping(true);\n            },\n            this,\n            delay\n          );\n        }\n        return;\n      }\n\n      var data;\n      if (json && !this.doRestart) {\n        if (!Object.prototype.hasOwnProperty.call(json, 'i')) {\n          this.error('CometVisu protocol error: backend responded to a read request without an \"i\"-parameter');\n\n          this.client.showError(cv.io.Client.ERROR_CODES.PROTOCOL_INVALID_READ_RESPONSE_MISSING_I, json);\n\n          return;\n        }\n        this.lastIndex = json.i;\n        data = json.d;\n        this.readResendHeaderValues();\n        this.client.update(data);\n        this.retryCounter = 0;\n        this.client.setDataReceived(true);\n        this.client.setConnected(true);\n      }\n\n      this.retryServerErrorCounter = 0; // server has successfully responded\n      if (this.running) {\n        // keep the requests going\n        this.retryCounter++;\n        data = this.client.buildRequest();\n        data.i = this.lastIndex;\n        var url = this.xhr.getUrl().split('?').shift() + '?' + this.client.getQueryString(data);\n        this.xhr.setUrl(url);\n        this.xhr.send();\n        this.watchdog.ping();\n      }\n    },\n\n    handleReadStart() {\n      var json = this.client.getResponse(Array.prototype.slice.call(arguments, 0));\n\n      if (!json && this.lastIndex === -1) {\n        this.client.setDataReceived(false);\n        if (this.running) {\n          // retry initial request\n          this.xhr.send();\n          this.watchdog.ping();\n        }\n        return;\n      }\n      if (json && !this.doRestart) {\n        this.readResendHeaderValues();\n        this.client.update(json.d);\n        this.client.setDataReceived(true);\n        this.client.setConnected(true);\n      }\n      this.retryServerErrorCounter = 0; // server has successfully responded\n      if (this.running) {\n        // keep the requests going, but only\n        // request\n        // addresses-startPageAddresses\n        var diffAddresses = [];\n        for (var i = 0; i < this.client.addresses.length; i++) {\n          if (!this.client.initialAddresses.includes(this.client.addresses[i])) {\n            diffAddresses.push(this.client.addresses[i]);\n          }\n        }\n        var data = this.client.buildRequest(diffAddresses);\n        data.t = 0;\n        var url = this.xhr.getUrl().split('?').shift() + '?' + this.client.getQueryString(data);\n        this.xhr.setUrl(url);\n        this.xhr.removeListener('success', this.handleReadStart, this);\n        this.xhr.addListener('success', this.handleRead, this);\n        this.xhr.send();\n        this.watchdog.ping();\n      }\n    },\n\n    /**\n     * This function gets called on an error\n     *\n     *\n     * @param ev {Event}\n     */\n    handleError: qx.core.Environment.select('cv.xhr', {\n      qx(ev) {\n        var req = ev.getTarget();\n        // check for temporary server errors and retry a few times\n        if (\n          [408, 444, 499, 502, 503, 504].indexOf(req.getStatus()) >= 0 &&\n          this.retryServerErrorCounter < this.client.backend.maxRetries\n        ) {\n          this.info(\n            'Temporary connection problem (status: ' +\n              req.getStatus() +\n              ') - retry count: ' +\n              this.retryServerErrorCounter\n          );\n\n          this.retryServerErrorCounter++;\n          req.serverErrorHandled = true;\n          this.restart();\n          return;\n        }\n        // ignore error when connection is irrelevant\n        if (this.running && req.getReadyState() !== 4 && !this.doRestart && req.getStatus() !== 0) {\n          this.error('Error! Type: \"' + req.getResponse() + '\" readyState: ' + req.getStatusText());\n          this.client.setConnected(false);\n        }\n      },\n      jquery(xhr, str, excptObj) {\n        // ignore error when connection is irrelevant\n        if (this.running && xhr.readyState !== 4 && !this.doRestart && xhr.status !== 0) {\n          var readyState = 'UNKNOWN';\n          switch (xhr.readyState) {\n            case 0:\n              readyState = 'UNINITIALIZED';\n              break;\n            case 1:\n              readyState = 'LOADING';\n              break;\n            case 2:\n              readyState = 'LOADED';\n              break;\n            case 3:\n              readyState = 'INTERACTIVE';\n              break;\n            case 4:\n              readyState = 'COMPLETED';\n              break;\n          }\n\n          this.error('Error! Type: \"' + str + '\" ExceptionObject: \"' + excptObj + '\" readyState: ' + readyState);\n\n          this.client.setConnected(false);\n        }\n      }\n    }),\n\n    /**\n     * manipulates the header of the current ajax query before it is\n     * been send to the server\n     *\n     * @param xhr {Object} the native XHR object\n     *\n     */\n    beforeSend(xhr) {\n      for (var headerName in this.resendHeaders) {\n        if (this.resendHeaders[headerName] !== undefined) {\n          xhr.setRequestHeader(headerName, this.resendHeaders[headerName]);\n        }\n      }\n      for (headerName in this.headers) {\n        if (this.headers[headerName] !== undefined) {\n          xhr.setRequestHeader(headerName, this.headers[headerName]);\n        }\n      }\n    },\n\n    /**\n     * read the header values of a response and stores them to the\n     * resendHeaders array\n     */\n    readResendHeaderValues() {\n      for (var headerName in this.resendHeaders) {\n        this.resendHeaders[headerName] = this.xhr.getResponseHeader(headerName);\n      }\n    },\n\n    /**\n     * Check if the connection is still running.\n     */\n    isConnectionRunning() {\n      return true;\n    },\n\n    /**\n     * Restart the read request, e.g. when the watchdog kicks in\n     *\n     * @param doFullReload {Boolean} reload all data and not only restart connection\n     */\n    restart(doFullReload) {\n      if (doFullReload) {\n        this.lastIndex = -1; // reload all data\n      }\n      this.doRestart = true;\n      this.abort();\n      this.handleRead(); // restart\n      this.doRestart = false;\n    },\n    /**\n     * Abort the read request properly\n     *\n     */\n    abort() {\n      if (this.xhr && this.xhr.abort) {\n        this.xhr.abort();\n        this.xhr = null;\n\n        if (this.client.backend && this.client.backend.hooks.onClose) {\n          this.client.backend.hooks.onClose.bind(this);\n        }\n      }\n      this.watchdog.stop();\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}