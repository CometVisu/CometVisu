{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "fetch",
    "resource",
    "options",
    "proxy",
    "client",
    "undefined",
    "url",
    "URL",
    "cv",
    "io",
    "rest",
    "Client",
    "getBaseUrl",
    "window",
    "location",
    "origin",
    "searchParams",
    "set",
    "proxyParam",
    "Object",
    "prototype",
    "hasOwnProperty",
    "call",
    "Promise",
    "resolve",
    "reject",
    "xhr",
    "request",
    "Xhr",
    "authorize",
    "addListener",
    "ev",
    "getTarget",
    "getResponse",
    "send",
    "proxyFetch",
    "Fetch"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/io/Fetch.js"
  ],
  "sourcesContent": [
    "/* Fetch.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * native fetch replacement that supports the internal recording mechanism for replay file.\n */\nqx.Class.define('cv.io.Fetch', {\n  type: 'static',\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    /**\n     *\n     * @param resource {URL|string}\n     * @param options {object}\n     * @param proxy {boolean}\n     * @param client {cv.io.IClient}\n     * @returns {Promise<Response>}\n     */\n    fetch(resource, options = {}, proxy = false, client = undefined) {\n      if (proxy) {\n        const url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n        if (resource) {\n          url.searchParams.set('url', resource);\n        }\n        if (options) {\n          for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n            if (Object.prototype.hasOwnProperty.call(options, proxyParam)) {\n              url.searchParams.set(proxyParam, options[proxyParam]);\n              delete options[proxyParam];\n            }\n          }\n        }\n        resource = url;\n      } else if (options) {\n        for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n          if (Object.prototype.hasOwnProperty.call(options, proxyParam)) {\n            delete options[proxyParam];\n          }\n        }\n      }\n      return new Promise((resolve, reject) => {\n        const xhr = new qx.io.request.Xhr('' + resource);\n        xhr.set(options);\n        if (client) {\n          client.authorize(xhr);\n        }\n        xhr.addListener('success', ev => {\n          const request = ev.getTarget();\n          resolve(request.getResponse());\n        });\n        xhr.addListener('statusError', ev => {\n          const request = ev.getTarget();\n          reject(request.getResponse());\n        });\n        xhr.send();\n      });\n    },\n\n    /**\n     *\n     * @param resource {URL|string}\n     * @param options {object}\n     * @param client {cv.io.IClient}\n     * @returns {Promise<Response>}\n     */\n    proxyFetch(resource, options, client) {\n      return this.fetch(resource, options, true, client);\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}