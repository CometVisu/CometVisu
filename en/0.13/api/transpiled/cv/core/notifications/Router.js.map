{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "constructor",
    "call",
    "__routes",
    "debug",
    "__dateFormat",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "__timeFormat",
    "getTimeFormat",
    "statics",
    "evaluateCondition",
    "message",
    "prototype",
    "hasOwnProperty",
    "condition",
    "log",
    "Logger",
    "error",
    "dispatchMessage",
    "topic",
    "target",
    "getInstance",
    "getTarget",
    "name",
    "cv",
    "ui",
    "PopupHandler",
    "NotificationCenter",
    "window",
    "speechSynthesis",
    "warn",
    "notifications",
    "SpeechHandler",
    "ToastManager",
    "members",
    "__stateMessageConfig",
    "getStateMessageConfig",
    "registerStateUpdateHandler",
    "config",
    "assign",
    "address",
    "data",
    "Model",
    "addUpdateListener",
    "_onIncomingData",
    "enableStateUpdateHandler",
    "id",
    "enable",
    "_iterator",
    "_createForOfIteratorHelper",
    "_step",
    "s",
    "n",
    "done",
    "value",
    "enabled",
    "err",
    "e",
    "f",
    "changeStateUpdateHandlerSeverity",
    "severity",
    "_iterator2",
    "_step2",
    "unregisterStateUpdatehandler",
    "addresses",
    "forEach",
    "removeUpdateListener",
    "registerMessageHandler",
    "handler",
    "topics",
    "getOwnPropertyNames",
    "segments",
    "split",
    "firstSegment",
    "shift",
    "currentSegment",
    "__handlers__",
    "segment",
    "push",
    "state",
    "initial",
    "changed",
    "now",
    "formattedDate",
    "formattedTime",
    "skipInitial",
    "Transform",
    "decode",
    "addressConfig",
    "templateData",
    "date",
    "time",
    "valueMapping",
    "common",
    "BasicUpdate",
    "applyMapping",
    "addressMapping",
    "title",
    "bom",
    "Template",
    "render",
    "titleTemplate",
    "messageTemplate",
    "deletable",
    "unique",
    "icon",
    "iconClasses",
    "__collectHandlers",
    "__P_4_5",
    "handlers",
    "Array",
    "last",
    "length",
    "some",
    "segmentName",
    "idx",
    "__collectAllFromSegment",
    "append",
    "__P_4_6",
    "Router",
    "handleMessage",
    "entry",
    "clear",
    "destruct",
    "_disposeObjects"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/core/notifications/Router.js"
  ],
  "sourcesContent": [
    "/* Router.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Global notification handler that routes messages topic-dependent to different {@link cv.core.notifications.IHandler}\n * (e.g. NotificationCenter, Dialog, Toast, console.log, native notification, internal message bus ...)\n *\n * @author Tobias Br√§utigam\n * @since 0.11.0\n */\nqx.Class.define('cv.core.notifications.Router', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct() {\n    super();\n    this.__routes = {};\n    this.debug('new router');\n\n    this.__dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('short'));\n\n    this.__timeFormat = new qx.util.format.DateFormat(qx.locale.Date.getTimeFormat('short'));\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Evaluate the message condition, default to true is message has no condition set\n     * @param message {Map}\n     * @returns {Boolean}\n     */\n    evaluateCondition(message) {\n      if (!Object.prototype.hasOwnProperty.call(message, 'condition')) {\n        // nothing to evaluate\n        return true;\n      } else if (typeof message.condition === 'boolean') {\n        return message.condition;\n      } else if (typeof message.condition === 'function') {\n        return message.condition();\n      }\n      qx.log.Logger.error(this, 'unhandled message condition type: ' + message.condition);\n\n      return false;\n    },\n\n    /**\n     * Shortcut to {@link cv.core.notifications.Router#dispatchMessage}\n     * @param topic\n     * @param message\n     * @param target\n     */\n    dispatchMessage(topic, message, target) {\n      return this.getInstance().dispatchMessage(topic, message, target);\n    },\n\n    /**\n     * Converts a target name to the related target object/function.\n     *\n     * @param name {String} target name, e.g. popup, notificationCenter, etc.\n     * @return {Object|Function|null} the target that can handle messages\n     */\n    getTarget(name) {\n      switch (name) {\n        case 'popup':\n          return cv.ui.PopupHandler;\n        case 'notificationCenter':\n          return cv.ui.NotificationCenter.getInstance();\n        case 'speech':\n          if (!window.speechSynthesis) {\n            // not supported\n            qx.log.Logger.warn(this, 'this browser does not support the Web Speech API');\n\n            return null;\n          }\n          return cv.core.notifications.SpeechHandler.getInstance();\n        case 'toast':\n          return cv.ui.ToastManager.getInstance();\n      }\n\n      return null;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n  members: {\n    __routes: null,\n    __stateMessageConfig: null,\n    __dateFormat: null,\n    __timeFormat: null,\n\n    getStateMessageConfig() {\n      return this.__stateMessageConfig;\n    },\n\n    /**\n     * Register state update handler for one or more addresses.\n     *\n     * <h4>Config Map explanation:</h4>\n     * <pre class=\"javascript\">\n     * {\n     *   <address>: [{\n     *    topic: \"cv.state.<address>\", // message topic used for routing\n     *    target: \"popup\", // where to show the message\n     *    severity: \"normal\", // message severity e.g. high, normal, low\n     *    skipInitial: true, // do not show message for initial state update\n     *    deletable: true, // user can delete this message\n     *    unique: true, // show message once at a time\n     *    valueMapping: \"mapping-name\", // optional mapping for value\n     *    addressMapping: \"mapping-name\", // optional mapping name for address\n     *    titleTemplate: \"Kitchen light on\", // title template of the message\n     *    messageTemplate: \"turned on at {{ time }} o'clock\", // message content template\n     *    condition: 1 // show only when the value equals the condition value\n     *   }]\n     * }\n     * </pre>\n     *\n     * @param config {Map}\n     */\n    registerStateUpdateHandler(config) {\n      if (this.__stateMessageConfig) {\n        this.__stateMessageConfig = Object.assign(this.__stateMessageConfig, config);\n      } else {\n        this.__stateMessageConfig = config;\n      }\n      for (const address in config) {\n        cv.data.Model.getInstance().addUpdateListener(address, this._onIncomingData, this);\n      }\n    },\n\n    /**\n     * Toggle state update handler enabled state\n     * @param id {number} ID of the handler\n     * @param enable {boolean}\n     */\n    enableStateUpdateHandler(id, enable) {\n      for (const address in this.__stateMessageConfig) {\n        for (const config of this.__stateMessageConfig[address]) {\n          if (config.id === id) {\n            config.enabled = enable;\n          }\n        }\n      }\n    },\n\n    /**\n     * Change state update severity\n     * @param id {number} ID of the handler\n     * @param severity {string} new severity\n     */\n    changeStateUpdateHandlerSeverity(id, severity) {\n      for (const address in this.__stateMessageConfig) {\n        for (const config of this.__stateMessageConfig[address]) {\n          if (config.id === id) {\n            config.severity = severity;\n          }\n        }\n      }\n    },\n\n    /**\n     * Unregister state update listeners for a list of addresses\n     * @param addresses {Array}\n     */\n    unregisterStateUpdatehandler(addresses) {\n      addresses.forEach(function (address) {\n        cv.data.Model.getInstance().removeUpdateListener(address, this._onIncomingData, this);\n\n        if (this.__stateMessageConfig[address]) {\n          delete this.__stateMessageConfig[address];\n        }\n      }, this);\n    },\n\n    /**\n     * Register a handler for a list of topics\n     * @param handler {cv.core.notifications.IHandler}\n     * @param topics {Map} map of topics as key and configuration-maps as values\n     */\n    registerMessageHandler(handler, topics) {\n      Object.getOwnPropertyNames(topics).forEach(function (topic) {\n        const segments = topic.split('.');\n        const firstSegment = segments.shift();\n        let currentSegment = this.__routes[firstSegment];\n        if (!currentSegment) {\n          this.__routes[firstSegment] = { __handlers__: [] };\n          currentSegment = this.__routes[firstSegment];\n        }\n        segments.forEach(function (segment) {\n          if (!currentSegment[segment]) {\n            currentSegment[segment] = { __handlers__: [] };\n          }\n          currentSegment = currentSegment[segment];\n        }, this);\n\n        currentSegment.__handlers__.push({\n          handler: handler,\n          config: topics[topic]\n        });\n      }, this);\n    },\n\n    /**\n     * Handle address state updates and show them as message\n     * @param address {String} GA or openHAB item name\n     * @param state {var} received State\n     * @param initial {Boolean} true id this is the first state update for this address\n     * @param changed {Boolean} true if the incoming state update differs from the last one\n     * @protected\n     */\n    _onIncomingData(address, state, initial, changed) {\n      if (!this.__stateMessageConfig[address]) {\n        return;\n      }\n\n      const now = new Date();\n      const formattedDate = this.__dateFormat.format(now);\n      const formattedTime = this.__timeFormat.format(now);\n\n      this.__stateMessageConfig[address].forEach(function (config) {\n        if (config.enabled === false || (initial === true && config.skipInitial === true) || changed === false) {\n          // do not handle the first update\n          return;\n        }\n\n        // process value\n        state = cv.Transform.decode(config.addressConfig, state);\n\n        const templateData = {\n          address: address,\n          value: state,\n          date: formattedDate,\n          time: formattedTime\n        };\n\n        // transform the raw value to a JavaScript type\n        templateData.value = cv.Transform.decode(config.addressConfig, templateData.value);\n\n        if (config.valueMapping) {\n          // apply mapping\n          templateData.value = cv.ui.common.BasicUpdate.applyMapping(templateData.value, config.valueMapping);\n        }\n        if (config.addressMapping) {\n          templateData.address = cv.ui.common.BasicUpdate.applyMapping(templateData.address, config.addressMapping);\n        }\n\n        const message = {\n          topic: Object.prototype.hasOwnProperty.call(config, 'topic') ? config.topic : 'cv.state.update.' + address,\n          title: qx.bom.Template.render('' + config.titleTemplate, templateData),\n\n          message: qx.bom.Template.render('' + config.messageTemplate, templateData),\n\n          deletable: Object.prototype.hasOwnProperty.call(config, 'deletable') ? config.deletable : true,\n          unique: Object.prototype.hasOwnProperty.call(config, 'unique') ? config.unique : false,\n          severity: config.severity\n        };\n\n        if (Object.prototype.hasOwnProperty.call(config, 'condition')) {\n          message.condition = state == config.condition;\n        }\n        if (config.icon) {\n          message.icon = config.icon;\n          if (config.iconClasses) {\n            message.iconClasses = config.iconClasses;\n          }\n        }\n        this.dispatchMessage(message.topic, message, config.target);\n      }, this);\n    },\n\n    __collectHandlers(topic) {\n      const handlers = new qx.data.Array();\n      const segments = topic.split('.');\n      const firstSegment = segments.shift();\n      let currentSegment = this.__routes[firstSegment];\n      const last = segments.length - 1;\n      segments.some(function (segmentName, idx) {\n        if (!currentSegment) {\n          // segment does not exists, stop searching\n          return true;\n        } else if (segmentName === '*') {\n          // collect all\n          this.__collectAllFromSegment(currentSegment, handlers);\n          return true;\n        }\n        if (currentSegment['*']) {\n          handlers.append(currentSegment['*'].__handlers__);\n        }\n        if (currentSegment[segmentName]) {\n          if (idx === last) {\n            handlers.append(currentSegment[segmentName].__handlers__);\n          }\n          currentSegment = currentSegment[segmentName];\n        } else {\n          // stop searching\n          return true;\n        }\n        return false;\n      }, this);\n      return handlers;\n    },\n\n    __collectAllFromSegment(segment, handlers) {\n      handlers.append(segment.__handlers__);\n      Object.getOwnPropertyNames(segment).forEach(function (segmentName) {\n        if (segmentName !== '__handlers__') {\n          this.__collectAllFromSegment(segment[segmentName], handlers);\n        }\n      }, this);\n      return handlers;\n    },\n\n    dispatchMessage(topic, message, target) {\n      if (message.target && !target) {\n        target = cv.core.notifications.Router.getTarget(message.target);\n      }\n      if (target && target.handleMessage) {\n        this.debug('dispatching \\'' + topic + '\\' message to handler: ' + target);\n        target.handleMessage(message, {});\n      } else {\n        this.__collectHandlers(topic).forEach(function (entry) {\n          this.debug('dispatching \\'' + topic + '\\' message to handler: ' + entry.handler);\n\n          entry.handler.handleMessage(message, entry.config);\n        }, this);\n      }\n    },\n\n    clear() {\n      this.__routes = {};\n      this.__stateMessageConfig = {};\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this.clear();\n    this._disposeObjects('__dateFormat', '__timeFormat');\n  }\n});\n"
  ],
  "mappings": "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"
}