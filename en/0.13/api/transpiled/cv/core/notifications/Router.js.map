{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "__routes",
    "debug",
    "__dateFormat",
    "util",
    "format",
    "DateFormat",
    "locale",
    "Date",
    "getDateFormat",
    "__timeFormat",
    "getTimeFormat",
    "statics",
    "evaluateCondition",
    "message",
    "prototype",
    "hasOwnProperty",
    "call",
    "condition",
    "log",
    "Logger",
    "error",
    "dispatchMessage",
    "topic",
    "target",
    "getInstance",
    "getTarget",
    "name",
    "cv",
    "ui",
    "PopupHandler",
    "NotificationCenter",
    "window",
    "speechSynthesis",
    "warn",
    "notifications",
    "SpeechHandler",
    "ToastManager",
    "members",
    "__stateMessageConfig",
    "getStateMessageConfig",
    "registerStateUpdateHandler",
    "config",
    "assign",
    "address",
    "data",
    "Model",
    "addUpdateListener",
    "_onIncomingData",
    "enableStateUpdateHandler",
    "id",
    "enable",
    "enabled",
    "changeStateUpdateHandlerSeverity",
    "severity",
    "unregisterStateUpdatehandler",
    "addresses",
    "forEach",
    "removeUpdateListener",
    "registerMessageHandler",
    "handler",
    "topics",
    "getOwnPropertyNames",
    "segments",
    "split",
    "firstSegment",
    "shift",
    "currentSegment",
    "__handlers__",
    "segment",
    "push",
    "state",
    "initial",
    "changed",
    "now",
    "formattedDate",
    "formattedTime",
    "skipInitial",
    "Transform",
    "decode",
    "addressConfig",
    "templateData",
    "value",
    "date",
    "time",
    "valueMapping",
    "common",
    "BasicUpdate",
    "applyMapping",
    "addressMapping",
    "title",
    "bom",
    "Template",
    "render",
    "titleTemplate",
    "messageTemplate",
    "deletable",
    "unique",
    "icon",
    "iconClasses",
    "__collectHandlers",
    "handlers",
    "Array",
    "last",
    "length",
    "some",
    "segmentName",
    "idx",
    "__collectAllFromSegment",
    "append",
    "Router",
    "handleMessage",
    "entry",
    "clear",
    "destruct",
    "_disposeObjects"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/core/notifications/Router.js"
  ],
  "sourcesContent": [
    "/* Router.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Global notification handler that routes messages topic-dependent to different {@link cv.core.notifications.IHandler}\n * (e.g. NotificationCenter, Dialog, Toast, console.log, native notification, internal message bus ...)\n *\n * @author Tobias Br√§utigam\n * @since 0.11.0\n */\nqx.Class.define('cv.core.notifications.Router', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct() {\n    super();\n    this.__routes = {};\n    this.debug('new router');\n\n    this.__dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('short'));\n\n    this.__timeFormat = new qx.util.format.DateFormat(qx.locale.Date.getTimeFormat('short'));\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Evaluate the message condition, default to true is message has no condition set\n     * @param message {Map}\n     * @returns {Boolean}\n     */\n    evaluateCondition(message) {\n      if (!Object.prototype.hasOwnProperty.call(message, 'condition')) {\n        // nothing to evaluate\n        return true;\n      } else if (typeof message.condition === 'boolean') {\n        return message.condition;\n      } else if (typeof message.condition === 'function') {\n        return message.condition();\n      }\n      qx.log.Logger.error(this, 'unhandled message condition type: ' + message.condition);\n\n      return false;\n    },\n\n    /**\n     * Shortcut to {@link cv.core.notifications.Router#dispatchMessage}\n     * @param topic\n     * @param message\n     * @param target\n     */\n    dispatchMessage(topic, message, target) {\n      return this.getInstance().dispatchMessage(topic, message, target);\n    },\n\n    /**\n     * Converts a target name to the related target object/function.\n     *\n     * @param name {String} target name, e.g. popup, notificationCenter, etc.\n     * @return {Object|Function|null} the target that can handle messages\n     */\n    getTarget(name) {\n      switch (name) {\n        case 'popup':\n          return cv.ui.PopupHandler;\n        case 'notificationCenter':\n          return cv.ui.NotificationCenter.getInstance();\n        case 'speech':\n          if (!window.speechSynthesis) {\n            // not supported\n            qx.log.Logger.warn(this, 'this browser does not support the Web Speech API');\n\n            return null;\n          }\n          return cv.core.notifications.SpeechHandler.getInstance();\n        case 'toast':\n          return cv.ui.ToastManager.getInstance();\n      }\n\n      return null;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n  members: {\n    __routes: null,\n    __stateMessageConfig: null,\n    __dateFormat: null,\n    __timeFormat: null,\n\n    getStateMessageConfig() {\n      return this.__stateMessageConfig;\n    },\n\n    /**\n     * Register state update handler for one or more addresses.\n     *\n     * <h4>Config Map explanation:</h4>\n     * <pre class=\"javascript\">\n     * {\n     *   <address>: [{\n     *    topic: \"cv.state.<address>\", // message topic used for routing\n     *    target: \"popup\", // where to show the message\n     *    severity: \"normal\", // message severity e.g. high, normal, low\n     *    skipInitial: true, // do not show message for initial state update\n     *    deletable: true, // user can delete this message\n     *    unique: true, // show message once at a time\n     *    valueMapping: \"mapping-name\", // optional mapping for value\n     *    addressMapping: \"mapping-name\", // optional mapping name for address\n     *    titleTemplate: \"Kitchen light on\", // title template of the message\n     *    messageTemplate: \"turned on at {{ time }} o'clock\", // message content template\n     *    condition: 1 // show only when the value equals the condition value\n     *   }]\n     * }\n     * </pre>\n     *\n     * @param config {Map}\n     */\n    registerStateUpdateHandler(config) {\n      if (this.__stateMessageConfig) {\n        this.__stateMessageConfig = Object.assign(this.__stateMessageConfig, config);\n      } else {\n        this.__stateMessageConfig = config;\n      }\n      for (const address in config) {\n        cv.data.Model.getInstance().addUpdateListener(address, this._onIncomingData, this);\n      }\n    },\n\n    /**\n     * Toggle state update handler enabled state\n     * @param id {number} ID of the handler\n     * @param enable {boolean}\n     */\n    enableStateUpdateHandler(id, enable) {\n      for (const address in this.__stateMessageConfig) {\n        for (const config of this.__stateMessageConfig[address]) {\n          if (config.id === id) {\n            config.enabled = enable;\n          }\n        }\n      }\n    },\n\n    /**\n     * Change state update severity\n     * @param id {number} ID of the handler\n     * @param severity {string} new severity\n     */\n    changeStateUpdateHandlerSeverity(id, severity) {\n      for (const address in this.__stateMessageConfig) {\n        for (const config of this.__stateMessageConfig[address]) {\n          if (config.id === id) {\n            config.severity = severity;\n          }\n        }\n      }\n    },\n\n    /**\n     * Unregister state update listeners for a list of addresses\n     * @param addresses {Array}\n     */\n    unregisterStateUpdatehandler(addresses) {\n      addresses.forEach(function (address) {\n        cv.data.Model.getInstance().removeUpdateListener(address, this._onIncomingData, this);\n\n        if (this.__stateMessageConfig[address]) {\n          delete this.__stateMessageConfig[address];\n        }\n      }, this);\n    },\n\n    /**\n     * Register a handler for a list of topics\n     * @param handler {cv.core.notifications.IHandler}\n     * @param topics {Map} map of topics as key and configuration-maps as values\n     */\n    registerMessageHandler(handler, topics) {\n      Object.getOwnPropertyNames(topics).forEach(function (topic) {\n        const segments = topic.split('.');\n        const firstSegment = segments.shift();\n        let currentSegment = this.__routes[firstSegment];\n        if (!currentSegment) {\n          this.__routes[firstSegment] = { __handlers__: [] };\n          currentSegment = this.__routes[firstSegment];\n        }\n        segments.forEach(function (segment) {\n          if (!currentSegment[segment]) {\n            currentSegment[segment] = { __handlers__: [] };\n          }\n          currentSegment = currentSegment[segment];\n        }, this);\n\n        currentSegment.__handlers__.push({\n          handler: handler,\n          config: topics[topic]\n        });\n      }, this);\n    },\n\n    /**\n     * Handle address state updates and show them as message\n     * @param address {String} GA or openHAB item name\n     * @param state {var} received State\n     * @param initial {Boolean} true id this is the first state update for this address\n     * @param changed {Boolean} true if the incoming state update differs from the last one\n     * @protected\n     */\n    _onIncomingData(address, state, initial, changed) {\n      if (!this.__stateMessageConfig[address]) {\n        return;\n      }\n\n      const now = new Date();\n      const formattedDate = this.__dateFormat.format(now);\n      const formattedTime = this.__timeFormat.format(now);\n\n      this.__stateMessageConfig[address].forEach(function (config) {\n        if (config.enabled === false || (initial === true && config.skipInitial === true) || changed === false) {\n          // do not handle the first update\n          return;\n        }\n\n        // process value\n        state = cv.Transform.decode(config.addressConfig, state);\n\n        const templateData = {\n          address: address,\n          value: state,\n          date: formattedDate,\n          time: formattedTime\n        };\n\n        // transform the raw value to a JavaScript type\n        templateData.value = cv.Transform.decode(config.addressConfig, templateData.value);\n\n        if (config.valueMapping) {\n          // apply mapping\n          templateData.value = cv.ui.common.BasicUpdate.applyMapping(templateData.value, config.valueMapping);\n        }\n        if (config.addressMapping) {\n          templateData.address = cv.ui.common.BasicUpdate.applyMapping(templateData.address, config.addressMapping);\n        }\n\n        const message = {\n          topic: Object.prototype.hasOwnProperty.call(config, 'topic') ? config.topic : 'cv.state.update.' + address,\n          title: qx.bom.Template.render('' + config.titleTemplate, templateData),\n\n          message: qx.bom.Template.render('' + config.messageTemplate, templateData),\n\n          deletable: Object.prototype.hasOwnProperty.call(config, 'deletable') ? config.deletable : true,\n          unique: Object.prototype.hasOwnProperty.call(config, 'unique') ? config.unique : false,\n          severity: config.severity\n        };\n\n        if (Object.prototype.hasOwnProperty.call(config, 'condition')) {\n          message.condition = state == config.condition;\n        }\n        if (config.icon) {\n          message.icon = config.icon;\n          if (config.iconClasses) {\n            message.iconClasses = config.iconClasses;\n          }\n        }\n        this.dispatchMessage(message.topic, message, config.target);\n      }, this);\n    },\n\n    __collectHandlers(topic) {\n      const handlers = new qx.data.Array();\n      const segments = topic.split('.');\n      const firstSegment = segments.shift();\n      let currentSegment = this.__routes[firstSegment];\n      const last = segments.length - 1;\n      segments.some(function (segmentName, idx) {\n        if (!currentSegment) {\n          // segment does not exists, stop searching\n          return true;\n        } else if (segmentName === '*') {\n          // collect all\n          this.__collectAllFromSegment(currentSegment, handlers);\n          return true;\n        }\n        if (currentSegment['*']) {\n          handlers.append(currentSegment['*'].__handlers__);\n        }\n        if (currentSegment[segmentName]) {\n          if (idx === last) {\n            handlers.append(currentSegment[segmentName].__handlers__);\n          }\n          currentSegment = currentSegment[segmentName];\n        } else {\n          // stop searching\n          return true;\n        }\n        return false;\n      }, this);\n      return handlers;\n    },\n\n    __collectAllFromSegment(segment, handlers) {\n      handlers.append(segment.__handlers__);\n      Object.getOwnPropertyNames(segment).forEach(function (segmentName) {\n        if (segmentName !== '__handlers__') {\n          this.__collectAllFromSegment(segment[segmentName], handlers);\n        }\n      }, this);\n      return handlers;\n    },\n\n    dispatchMessage(topic, message, target) {\n      if (message.target && !target) {\n        target = cv.core.notifications.Router.getTarget(message.target);\n      }\n      if (target && target.handleMessage) {\n        this.debug('dispatching \\'' + topic + '\\' message to handler: ' + target);\n        target.handleMessage(message, {});\n      } else {\n        this.__collectHandlers(topic).forEach(function (entry) {\n          this.debug('dispatching \\'' + topic + '\\' message to handler: ' + entry.handler);\n\n          entry.handler.handleMessage(message, entry.config);\n        }, this);\n      }\n    },\n\n    clear() {\n      this.__routes = {};\n      this.__stateMessageConfig = {};\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this.clear();\n    this._disposeObjects('__dateFormat', '__timeFormat');\n  }\n});\n"
  ],
  "mappings": "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"
}