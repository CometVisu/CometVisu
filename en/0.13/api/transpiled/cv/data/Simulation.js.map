{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "configFile",
    "client",
    "constructor",
    "call",
    "_client",
    "Init",
    "getApplication",
    "setServerHasPhpSupport",
    "init",
    "properties",
    "initialized",
    "check",
    "event",
    "members",
    "__simulations",
    "__encodeSimulatedStates",
    "__sequence",
    "__sequenceIndex",
    "_addressConfigs",
    "_this",
    "r",
    "io",
    "request",
    "Xhr",
    "addListener",
    "e",
    "cv",
    "Config",
    "initialDemoData",
    "getTarget",
    "getResponse",
    "__applyTestData",
    "setInitialized",
    "debug",
    "error",
    "send",
    "__P_558_4",
    "_this2",
    "__xhr",
    "xhr",
    "now",
    "Date",
    "url",
    "startsWith",
    "forEach",
    "d",
    "data",
    "body",
    "offset",
    "length",
    "entry",
    "responseData",
    "feed",
    "entries",
    "date",
    "setDate",
    "getDate",
    "publishedDate",
    "toUTCString",
    "setTime",
    "getTime",
    "that",
    "sinon",
    "dev",
    "unit",
    "Sinon",
    "getSinon",
    "sandbox",
    "FakeXMLHttpRequest",
    "prototype",
    "open",
    "method",
    "async",
    "username",
    "password",
    "responseText",
    "responseXML",
    "requestHeaders",
    "sendFlag",
    "useFilters",
    "xhrArgs",
    "arguments",
    "defake",
    "filters",
    "some",
    "filter",
    "deFake",
    "apply",
    "setRequestHeader",
    "readyStateChange",
    "OPENED",
    "FakeServer",
    "getInstance",
    "addFilter",
    "args",
    "indexOf",
    "getResourcePath",
    "test",
    "path",
    "split",
    "pop",
    "suffix",
    "window",
    "location",
    "pathname",
    "server",
    "getFakeServer",
    "respondWith",
    "parsed",
    "util",
    "Uri",
    "parseUri",
    "generatorName",
    "respond",
    "JSON",
    "stringify",
    "generate",
    "queryKey",
    "host",
    "report",
    "Record",
    "normalizeUrl",
    "substr",
    "log",
    "Logger",
    "response",
    "shift",
    "readyState",
    "status",
    "headers",
    "bind",
    "onWrite",
    "address",
    "value",
    "hasOwnProperty",
    "_processSimulation",
    "_registerSimulations",
    "simulations",
    "keys",
    "mainAddress",
    "simulation",
    "additionalAddresses",
    "addr",
    "_registerGenerators",
    "generators",
    "_this3",
    "__generators",
    "_loop",
    "gen",
    "name",
    "interval",
    "setInterval",
    "targetValue",
    "Math",
    "random",
    "deviation",
    "Transform",
    "encodeBusAndRaw",
    "raw",
    "receive",
    "i",
    "options",
    "generator",
    "end",
    "start",
    "parseInt",
    "match",
    "exec",
    "val",
    "resolution",
    "push",
    "_startSequence",
    "Timer",
    "once",
    "delay",
    "_this4",
    "stop",
    "startValues",
    "stopValues",
    "type",
    "direction",
    "initValue",
    "Model",
    "getState",
    "targetAddress",
    "undefined",
    "decode",
    "timer",
    "stepSize",
    "newValue",
    "update",
    "sendValue",
    "prepareTestData",
    "addresses",
    "_this5",
    "encodeFirst",
    "widgetData",
    "getWidgetDataModel",
    "id",
    "assign",
    "_iterator",
    "_createForOfIteratorHelper",
    "document",
    "querySelectorAll",
    "_step",
    "s",
    "n",
    "done",
    "addressElement",
    "textContent",
    "trim",
    "transform",
    "getAttribute",
    "err",
    "f",
    "ga",
    "states",
    "_iterator2",
    "sequence",
    "_step2",
    "seq",
    "_loop2",
    "_ga",
    "sim",
    "mapping",
    "valueArray",
    "map",
    "_val$split",
    "_val$split2",
    "_slicedToArray",
    "startAddress",
    "startVal",
    "fakeXhr",
    "workingXHR",
    "responseType",
    "copyAttrs",
    "attr",
    "navigator",
    "userAgent",
    "stateChangeStart",
    "HEADERS_RECEIVED",
    "LOADING",
    "DONE",
    "stateChangeEnd",
    "onreadystatechange",
    "target",
    "currentTarget",
    "stateChange",
    "addEventListener",
    "_loop3",
    "eventListeners",
    "handler",
    "listener",
    "capture",
    "destruct",
    "Simulation"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/data/Simulation.js"
  ],
  "sourcesContent": [
    "/**\n * Handles all status update simulation used together with the cv.io.Mockup backend e.g. in the demo configs\n */\nqx.Class.define('cv.data.Simulation', {\n  extend: qx.core.Object,\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(configFile, client) {\n    super();\n    this._client = client;\n    // override PHP support check, because the responses are faked\n    qx.core.Init.getApplication().setServerHasPhpSupport(true);\n    this.init(configFile);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    initialized: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeInitialized'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {cv.io.Mockup}\n     */\n    _client: null,\n    __simulations: null,\n    __encodeSimulatedStates: false,\n    __sequence: null,\n    __sequenceIndex: 0,\n    _addressConfigs: null,\n\n    init(configFile) {\n      // load the demo data to fill the visu with some values\n      const r = new qx.io.request.Xhr(configFile);\n      r.addListener('success', e => {\n        cv.Config.initialDemoData = e.getTarget().getResponse();\n        this.__applyTestData();\n        this.setInitialized(true);\n        this.debug('simulator data has been loaded');\n      });\n      r.addListener('fail', () => {\n        this.error('failed parsing demo data');\n      });\n      r.send();\n    },\n\n    __applyTestData() {\n      this.__xhr = cv.Config.initialDemoData.xhr;\n\n      // we need to adjust the timestamps of the chart data\n      const now = Date.now();\n      for (let url in this.__xhr) {\n        if (url.startsWith('rrd')) {\n          this.__xhr[url].forEach(d => {\n            const data = d.body;\n            const offset = now - data[data.length - 1][0];\n            data.forEach(entry => (entry[0] += offset));\n          });\n        } else if (url.startsWith('resource/plugin/rsslog.php')) {\n          this.__xhr[url].forEach(d => {\n            const data = d.body.responseData.feed.entries;\n            let date = new Date();\n            date.setDate(date.getDate() - 1);\n            data.forEach(entry => {\n              entry.publishedDate = date.toUTCString();\n              date.setTime(date.getTime() + 60 * 60 * 1000);\n            });\n          });\n        }\n      }\n\n      const that = this;\n      const sinon = qx.dev.unit.Sinon.getSinon();\n      sinon.sandbox = sinon;\n\n      // override sinons filter handling to be able to manipulate the target URL from the filter\n      // eslint-disable-next-line consistent-return\n      sinon.FakeXMLHttpRequest.prototype.open = function open(method, url, async, username, password) {\n        this.method = method;\n        this.url = url;\n        this.async = typeof async == 'boolean' ? async : true;\n        this.username = username;\n        this.password = password;\n        this.responseText = null;\n        this.responseXML = null;\n        this.requestHeaders = {};\n        this.sendFlag = false;\n        if (sinon.FakeXMLHttpRequest.useFilters === true) {\n          let xhrArgs = arguments;\n          let defake = sinon.FakeXMLHttpRequest.filters.some(function (filter) {\n            return filter.call(this, xhrArgs);\n          });\n          if (defake) {\n            const xhr = that.deFake(this, xhrArgs);\n            xhr.open.apply(xhr, xhrArgs);\n            xhr.setRequestHeader('Accept', 'text/*, image/*');\n            return;\n          }\n        }\n        this.readyStateChange(sinon.FakeXMLHttpRequest.OPENED);\n      };\n\n      // configure server\n      qx.dev.FakeServer.getInstance().addFilter(args => {\n        const method = args[0];\n        const url = args[1];\n        if (url.startsWith('https://sentry.io')) {\n          return true;\n        } else if (\n          method === 'GET' &&\n          (url.indexOf('resource/visu_config') >= 0 ||\n            url.indexOf('resource/demo/visu_config') >= 0 ||\n            url.indexOf('resource/hidden-schema.json') >= 0 ||\n            url.indexOf('resource/manager/') >= 0) ||\n          (url.startsWith(this._client.getResourcePath('charts')) && !url.startsWith(this._client.getResourcePath('charts') + 'generator:'))\n        ) {\n          return true;\n        } else if (method === 'GET' && /rest\\/manager\\/index.php\\/fs\\?path=.+\\.[\\w]+$/.test(url)) {\n          // change url to avoid API access and do a real request\n          const path = url.split('=').pop();\n          const suffix = path.startsWith('demo/') ? '' : 'config/';\n          args[1] = window.location.pathname + 'resource/' + suffix + path;\n          return true;\n        }\n        return false;\n      });\n      const server = qx.dev.FakeServer.getInstance().getFakeServer();\n      server.respondWith(\n        function (request) {\n          const parsed = qx.util.Uri.parseUri(request.url);\n          let url = request.url;\n          if (url.startsWith(this._client.getResourcePath('charts') + 'generator:')) {\n            const generatorName = parsed.path.split('generator:').pop();\n            request.respond(200, {'Content-type': 'application/json'}, JSON.stringify(this.generate(generatorName, parsed.queryKey)));\n            return;\n          }\n          if (!parsed.host || parsed.host === window.location.host) {\n            url = cv.report.Record.normalizeUrl(request.url);\n            if (url.startsWith(window.location.pathname)) {\n              url = url.substr(window.location.pathname.length - 1);\n            }\n          }\n          if (!this.__xhr[url] || this.__xhr[url].length === 0) {\n            qx.log.Logger.error(this, '404: no logged responses for URI ' + url + ' found');\n          } else {\n            qx.log.Logger.debug(this, 'faking response for ' + url);\n            let response = '';\n            if (this.__xhr[url].length === 1) {\n              response = this.__xhr[url][0];\n            } else {\n              // multiple responses recorded use them as LIFO stack\n              response = this.__xhr[url].shift();\n            }\n\n            if (request.readyState === 4 && request.status === 404) {\n              // This is a hack, sometimes the request has a 404 status and send readystate\n              // the response would fail if we do not override it here\n              request.readyState = 1;\n            }\n            let body = response.body;\n            if (response.headers && response.headers['Content-type'] === 'application/json') {\n              body = JSON.stringify(response.body);\n            }\n            request.respond(response.status, response.headers, body);\n          }\n        }.bind(this)\n      );\n    },\n\n    onWrite(address, value) {\n      if (this.__simulations && Object.prototype.hasOwnProperty.call(this.__simulations, address)) {\n        this._processSimulation(address, value);\n        return true;\n      }\n      return false;\n    },\n\n    _registerSimulations(simulations) {\n      this.__simulations = {};\n      Object.keys(simulations).forEach(function (mainAddress) {\n        const simulation = simulations[mainAddress];\n        this.__simulations[mainAddress] = simulation;\n        if (Object.prototype.hasOwnProperty.call(simulation, 'additionalAddresses')) {\n          simulation.additionalAddresses.forEach(function (addr) {\n            this.__simulations[addr] = simulation;\n          }, this);\n        }\n      }, this);\n    },\n\n    _registerGenerators(generators) {\n      this.__generators = generators;\n      for (const name in this.__generators) {\n        const gen = this.__generators[name];\n        gen.interval = setInterval(() => {\n          const data = {};\n          let value = gen.targetValue + (Math.random() - 0.5) * gen.deviation * 2;\n          if (this.__encodeSimulatedStates && this._addressConfigs[gen.address]) {\n            value = cv.Transform.encodeBusAndRaw(this._addressConfigs[gen.address], value).raw;\n          }\n          data[gen.address] = value;\n          this._client.receive({\n            i: new Date().getTime(),\n            d: data\n          });\n        }, gen.interval);\n      }\n    },\n\n    generate(name, options) {\n      const generator = this.__generators ? this.__generators[name] : null;\n      const data = [];\n      if (generator) {\n        if (options) {\n          let end = Date.now();\n          let start = Date.now();\n          if (options.start) {\n            if (/^\\d{10}$/.test(options.start)) {\n              // timestamp without millis\n              start = new Date(parseInt(options.start) * 1000).getTime();\n              end = new Date(parseInt(options.end) * 1000).getTime();\n            } else if (/^\\d{13}$/.test(options.start)) {\n              // timestamp with millis\n              start = new Date(parseInt(options.start)).getTime();\n              end = new Date(parseInt(options.end)).getTime();\n            } else {\n              const match = /end-(\\d+)(hour|day|month)/.exec(options.start);\n              if (match) {\n                let interval = 0;\n                switch (match[2]) {\n                  case 'hour':\n                    interval = 60 * 60 * 1000;\n                    break;\n                  case 'day':\n                    interval = 24 * 60 * 60 * 1000;\n                    break;\n                  case 'month':\n                    // this is not really precise, but good enough to fake some data\n                    interval = 30 * 24 * 60 * 60 * 1000;\n                    break;\n                }\n                start -= parseInt(match[1]) * interval;\n              }\n            }\n          }\n          let val = 0;\n          for (let i = start; i <= end; i += generator.resolution) {\n            val = generator.targetValue + (Math.random() - 0.5) * generator.deviation * 2;\n            data.push([i, val]);\n          }\n        } else {\n          // generate only a single value\n          return generator.targetValue + (Math.random() - 0.5) * generator.deviation * 2;\n        }\n      }\n      return data;\n    },\n\n    _startSequence() {\n      if (this.__sequence.length <= this.__sequenceIndex) {\n        // start again\n        this.__sequenceIndex = 0;\n      }\n      qx.event.Timer.once(\n        function () {\n          this._client.receive({\n            i: new Date().getTime(),\n            d: this.__sequence[this.__sequenceIndex].data\n          });\n\n          this.__sequenceIndex++;\n          this._startSequence();\n        },\n        this,\n        this.__sequence[this.__sequenceIndex].delay\n      );\n    },\n\n    _processSimulation(address, value) {\n      const simulation = this.__simulations[address];\n      if (!simulation) {\n        return;\n      }\n      if (this.__encodeSimulatedStates && address in this._addressConfigs) {\n        value = cv.Transform.encodeBusAndRaw(this._addressConfigs[address], value).raw;\n      }\n      let start = false;\n      let stop = false;\n      if (Object.prototype.hasOwnProperty.call(simulation, 'startValues')) {\n        // try the more specific matches with address included\n        start = simulation.startValues.indexOf(address + '|' + value) >= 0;\n        if (Object.prototype.hasOwnProperty.call(simulation, 'stopValues')) {\n          stop = simulation.stopValues.indexOf(address + '|' + value) >= 0;\n        }\n        if (!stop) {\n          // the more general ones\n          start = simulation.startValues.indexOf(value) >= 0;\n          stop = simulation.startValues.indexOf(value) >= 0;\n        }\n      }\n      if (start) {\n        // start simulation\n        if (simulation.type === 'shutter') {\n          simulation.direction = value === '00' ? 'up' : 'down';\n          let initValue = cv.data.Model.getInstance().getState(simulation.targetAddress);\n          if (initValue === undefined) {\n            initValue = 0;\n          } else if (this.__encodeSimulatedStates && simulation.targetAddress in this._addressConfigs) {\n            initValue = cv.Transform.decode(this._addressConfigs[simulation.targetAddress], initValue);\n          }\n          simulation.value = initValue;\n\n          if (simulation.timer) {\n            simulation.timer.stop();\n          } else {\n            simulation.timer = new qx.event.Timer(simulation.interval || 100);\n            const stepSize = simulation.stepSize || 10;\n            simulation.timer.addListener('interval', () => {\n              let newValue = simulation.value;\n              if (simulation.direction === 'up') {\n                // drive up\n                newValue = simulation.value + stepSize;\n                if (newValue > 100) {\n                  simulation.timer.stop();\n                  return;\n                }\n              } else {\n                // drive down\n                newValue = simulation.value - stepSize;\n                if (newValue < 0) {\n                  simulation.timer.stop();\n                  return;\n                }\n              }\n              const update = {\n                i: new Date().getTime(),\n                d: {}\n              };\n              let sendValue = newValue;\n              if (this.__encodeSimulatedStates && simulation.targetAddress in this._addressConfigs) {\n                sendValue = cv.Transform.encodeBusAndRaw(this._addressConfigs[simulation.targetAddress], newValue).raw;\n              }\n\n              update.d[simulation.targetAddress] = sendValue;\n              this.receive(update);\n              if (simulation.value !== newValue) {\n                simulation.value = newValue;\n              }\n            });\n          }\n          simulation.timer.start();\n        }\n      } else if (stop) {\n        // stop simulation\n        if (simulation.timer) {\n          simulation.timer.stop();\n        }\n      }\n    },\n\n\n    prepareTestData(addresses) {\n      if (cv.Config.initialDemoData && addresses.length > 0) {\n        if (cv.Config.initialDemoData.encodeFirst) {\n          this.__encodeSimulatedStates = true;\n          // connect address data from widgets first\n          this._addressConfigs = {};\n          const widgetData = cv.data.Model.getInstance().getWidgetDataModel();\n          for (const id in widgetData) {\n            if (widgetData[id].address) {\n              this._addressConfigs = Object.assign(this._addressConfigs, widgetData[id].address);\n            }\n          }\n          // lookup cv-address elements (tile structure)\n          for (const addressElement of document.querySelectorAll('cv-address')) {\n            this._addressConfigs[addressElement.textContent.trim()] = {\n              transform: addressElement.getAttribute('transform')\n            };\n          }\n\n          for (let ga in cv.Config.initialDemoData.states) {\n            if (ga in this._addressConfigs) {\n              cv.Config.initialDemoData.states[ga] = cv.Transform.encodeBusAndRaw(this._addressConfigs[ga], cv.Config.initialDemoData.states[ga]).raw;\n            }\n          }\n          for (const seq of cv.Config.initialDemoData.sequence) {\n            for (const ga in seq.data) {\n              if (ga in this._addressConfigs) {\n                seq.data[ga] = cv.Transform.encodeBusAndRaw(this._addressConfigs[ga], seq.data[ga]).raw;\n              }\n            }\n          }\n          for (const ga in cv.Config.initialDemoData.simulations) {\n            if (ga in this._addressConfigs) {\n              // startValues\n              const sim = cv.Config.initialDemoData.simulations[ga];\n              const mapping = valueArray => valueArray.map(val => {\n                if (val.indexOf('|') >= 0) {\n                  const [startAddress, startVal] = val.split('|');\n                  if (startAddress in this._addressConfigs) {\n                    return startAddress + '|' + cv.Transform.encodeBusAndRaw(this._addressConfigs[ga], startVal).raw;\n                  }\n                  return val;\n                }\n                return cv.Transform.encodeBusAndRaw(this._addressConfigs[ga], val).raw;\n              });\n              sim.startValues = mapping(sim.startValues);\n              sim.stopValues = mapping(sim.stopValues);\n            }\n          }\n        }\n        this._client.receive({\n          i: new Date().getTime(),\n          d: cv.Config.initialDemoData.states\n        });\n\n        if (cv.Config.initialDemoData.sequence) {\n          this.__sequence = cv.Config.initialDemoData.sequence;\n          this._startSequence();\n        }\n        if (cv.Config.initialDemoData.simulations) {\n          this._registerSimulations(cv.Config.initialDemoData.simulations);\n        }\n        if (cv.Config.initialDemoData.generators) {\n          this._registerGenerators(cv.Config.initialDemoData.generators);\n        }\n        cv.Config.initialDemoData = null;\n      }\n    },\n\n    deFake(fakeXhr, xhrArgs) {\n      // eslint-disable-next-line new-cap\n      const xhr = new sinon.xhr.workingXHR();\n      [\n        'open',\n        'setRequestHeader',\n        'abort',\n        'getResponseHeader',\n        'getAllResponseHeaders',\n        'addEventListener',\n        'overrideMimeType',\n        'removeEventListener'\n      ].forEach(function (method) {\n        fakeXhr[method] = function () {\n          return xhr[method].apply(xhr, arguments);\n        };\n      });\n      fakeXhr.send = function() {\n        // Ref: https://xhr.spec.whatwg.org/#the-responsetype-attribute\n        if (xhr.responseType !== fakeXhr.responseType) {\n          xhr.responseType = fakeXhr.responseType;\n        }\n        return xhr.send.apply(xhr, arguments);\n      };\n\n      const copyAttrs = function (args) {\n        args.forEach(function (attr) {\n          try {\n            fakeXhr[attr] = xhr[attr];\n          } catch (e) {\n            if (!/MSIE 6/.test(navigator.userAgent)) {\n              throw e;\n            }\n          }\n        });\n      };\n\n      const stateChangeStart = function () {\n        fakeXhr.readyState = xhr.readyState;\n        if (xhr.readyState >= sinon.FakeXMLHttpRequest.HEADERS_RECEIVED) {\n          copyAttrs(['status', 'statusText']);\n        }\n        if (xhr.readyState >= sinon.FakeXMLHttpRequest.LOADING) {\n          copyAttrs(['responseText']);\n        }\n        if (xhr.readyState === sinon.FakeXMLHttpRequest.DONE &&\n          (xhr.responseType === '' || xhr.responseType === 'document')) {\n          copyAttrs(['responseXML']);\n        }\n      };\n      const stateChangeEnd = function() {\n        if (fakeXhr.onreadystatechange) {\n          // eslint-disable-next-line no-useless-call\n          fakeXhr.onreadystatechange.call(fakeXhr, {\n            target: fakeXhr,\n            currentTarget: fakeXhr\n          });\n        }\n      };\n\n      const stateChange = function stateChange() {\n        stateChangeStart();\n        stateChangeEnd();\n      };\n      if (xhr.addEventListener) {\n        xhr.addEventListener('readystatechange', stateChangeStart);\n\n        for (let event in fakeXhr.eventListeners) {\n          // eslint-disable-next-line no-prototype-builtins\n          if (fakeXhr.eventListeners.hasOwnProperty(event)) {\n            fakeXhr.eventListeners[event].forEach(function (handler) {\n              xhr.addEventListener(event, handler.listener, {\n                capture: handler.capture,\n                once: handler.once\n              });\n            });\n          }\n        }\n        xhr.addEventListener('readystatechange', stateChangeEnd);\n      } else {\n        xhr.onreadystatechange = stateChange;\n      }\n      return xhr;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__simulations = null;\n    this._addressConfigs = null;\n    this.__sequence = null;\n    this._client = null;\n  }\n});\n"
  ],
  "mappings": "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"
}