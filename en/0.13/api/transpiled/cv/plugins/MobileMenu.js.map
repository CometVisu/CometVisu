{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "HasChildren",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "parseChildren",
    "getWidgetElements",
    "xmlElement",
    "Model",
    "getInstance",
    "setWidgetData",
    "containerClass",
    "members",
    "__navLeft",
    "__isTouchDevice",
    "getDomString",
    "window",
    "innerWidth",
    "Config",
    "maxMobileScreenWidth",
    "navLeft",
    "document",
    "querySelector",
    "classList",
    "contains",
    "add",
    "style",
    "display",
    "event",
    "message",
    "Bus",
    "subscribe",
    "navbar",
    "animation",
    "bom",
    "element",
    "Animation",
    "animate",
    "util",
    "SLIDE_LEFT_OUT",
    "addListenerOnce",
    "getChildrenDomString",
    "_onDomReady",
    "isTouchDevice",
    "touchScroll",
    "_action",
    "SLIDE_LEFT_IN",
    "id",
    "scrollStartPos",
    "elem",
    "Registration",
    "addListener",
    "scrollTop",
    "touches",
    "pageY",
    "preventDefault",
    "createEvent",
    "e",
    "defer",
    "loader",
    "ScriptLoader",
    "addStyles",
    "addHandler",
    "WidgetFactory",
    "registerClass",
    "plugins",
    "MobileMenu"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/MobileMenu.js"
  ],
  "sourcesContent": [
    "/* MobileMenu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * @author alltime84\n * @since 2016\n * @asset(plugins/mobilemenu/*.css)\n */\nqx.Class.define('cv.plugins.MobileMenu', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.HasChildren],\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse(xml, path, flavour, pageType) {\n      const data = cv.parser.pure.WidgetParser.parseElement(this, xml, path, flavour, pageType);\n\n      cv.parser.pure.WidgetParser.parseChildren(xml, path, flavour, pageType);\n      return data;\n    },\n\n    getWidgetElements(xmlElement, path) {\n      cv.data.Model.getInstance().setWidgetData(path + '_0', {\n        containerClass: 'actor'\n      });\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __navLeft: null,\n    __isTouchDevice: null,\n\n    // overridden\n    getDomString() {\n      if (window.innerWidth <= cv.Config.maxMobileScreenWidth) {\n        const navLeft = (this.__navLeft = document.querySelector('#navbarLeft'));\n        if (!navLeft.classList.contains('mobilemenu')) {\n          navLeft.classList.add('mobilemenu');\n        }\n        navLeft.style.display = 'none';\n        qx.event.message.Bus.subscribe('path.pageChanged', function () {\n          const navbar = navLeft.querySelector('.navbar');\n          const animation = qx.bom.element.Animation.animate(navbar, qx.util.Animation.SLIDE_LEFT_OUT);\n\n          animation.addListenerOnce('end', () => {\n            navLeft.style.display = 'none';\n          });\n        });\n\n        return '<div class=\"clearfix mobilemenuTrigger\">' + this.getChildrenDomString() + '</div>';\n      }\n      return '<div class=\"clearfix mobilemenuTrigger\" style=\"display: none\"></div>';\n    },\n\n    _onDomReady() {\n      if (this.isTouchDevice()) {\n        this.touchScroll('navbarLeft');\n      }\n    },\n\n    _action() {\n      if (window.innerWidth <= cv.Config.maxMobileScreenWidth) {\n        if (this.isTouchDevice()) {\n          this.__navLeft.style.display = 'block';\n          const navbar = this.__navLeft.querySelector('.navbar.navbarActive');\n          qx.bom.element.Animation.animate(navbar, qx.util.Animation.SLIDE_LEFT_IN);\n        }\n      }\n    },\n\n    touchScroll(id) {\n      let scrollStartPos = 0;\n\n      const elem = document.querySelector('#' + id);\n      qx.event.Registration.addListener(\n        elem,\n        'touchstart',\n        function (event) {\n          scrollStartPos = this.scrollTop + event.touches[0].pageY;\n          event.preventDefault();\n        },\n        false\n      );\n\n      qx.event.Registration.addListener(\n        elem,\n        'touchmove',\n        function (event) {\n          this.scrollTop = scrollStartPos - event.touches[0].pageY;\n          event.preventDefault();\n        },\n        false\n      );\n    },\n\n    isTouchDevice() {\n      if (this.__isTouchDevice === null) {\n        try {\n          document.createEvent('TouchEvent');\n          this.__isTouchDevice = true;\n        } catch (e) {\n          this.__isTouchDevice = false;\n        }\n      }\n      return this.__isTouchDevice;\n    }\n  },\n\n  // VisuDesign_Custom.prototype.addCreator(\"mobilemenu\", {\n  //   create: function(element, path, flavour, type) {\n  //     var $e = $(element);\n  //     var data = templateEngine.widgetDataInsert( path, {\n  //       content           : getWidgetElements($e, path)\n  //     } );\n  // });\n\n  defer(statics) {\n    const loader = cv.util.ScriptLoader.getInstance();\n    loader.addStyles('plugins/mobilemenu/mobilemenu.css');\n    cv.parser.pure.WidgetParser.addHandler('mobilemenu', statics);\n    cv.ui.structure.WidgetFactory.registerClass('mobilemenu', statics);\n  }\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAK,CAACC,MAAM,CAAC,uBAAuB,EAAE;IACvCC,MAAM,EAAEC,EAAE,CAACC,EAAE,CAACC,SAAS,CAACC,IAAI,CAACC,cAAc;IAC3CC,OAAO,EAAE,CAACL,EAAE,CAACC,EAAE,CAACK,MAAM,CAACC,WAAW,CAAC;IAEnC;AACF;AACA;AACA;AACA;IACEC,OAAO,EAAE;MACP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIC,KAAK,WAALA,KAAKA,CAACC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,EAAE;QAClC,IAAMC,IAAI,GAAGd,EAAE,CAACe,MAAM,CAACZ,IAAI,CAACa,YAAY,CAACC,YAAY,CAAC,IAAI,EAAEP,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,CAAC;QAEzFb,EAAE,CAACe,MAAM,CAACZ,IAAI,CAACa,YAAY,CAACE,aAAa,CAACR,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,CAAC;QACvE,OAAOC,IAAI;MACb,CAAC;MAEDK,iBAAiB,WAAjBA,iBAAiBA,CAACC,UAAU,EAAET,IAAI,EAAE;QAClCX,EAAE,CAACc,IAAI,CAACO,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,aAAa,CAACZ,IAAI,GAAG,IAAI,EAAE;UACrDa,cAAc,EAAE;QAClB,CAAC,CAAC;MACJ;IACF,CAAC;IAED;AACF;AACA;AACA;AACA;IACEC,OAAO,EAAE;MACPC,QAAS,EAAE,IAAI;MACfC,QAAe,EAAE,IAAI;MAErB;MACAC,YAAY,WAAZA,YAAYA,CAAA,EAAG;QACb,IAAIC,MAAM,CAACC,UAAU,IAAI9B,EAAE,CAAC+B,MAAM,CAACC,oBAAoB,EAAE;UACvD,IAAMC,OAAO,GAAI,IAAI,CAACP,QAAS,GAAGQ,QAAQ,CAACC,aAAa,CAAC,aAAa,CAAE;UACxE,IAAI,CAACF,OAAO,CAACG,SAAS,CAACC,QAAQ,CAAC,YAAY,CAAC,EAAE;YAC7CJ,OAAO,CAACG,SAAS,CAACE,GAAG,CAAC,YAAY,CAAC;UACrC;UACAL,OAAO,CAACM,KAAK,CAACC,OAAO,GAAG,MAAM;UAC9B/C,EAAE,CAACgD,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC,kBAAkB,EAAE,YAAY;YAC7D,IAAMC,MAAM,GAAGZ,OAAO,CAACE,aAAa,CAAC,SAAS,CAAC;YAC/C,IAAMW,SAAS,GAAGrD,EAAE,CAACsD,GAAG,CAACC,OAAO,CAACC,SAAS,CAACC,OAAO,CAACL,MAAM,EAAEpD,EAAE,CAAC0D,IAAI,CAACF,SAAS,CAACG,cAAc,CAAC;YAE5FN,SAAS,CAACO,eAAe,CAAC,KAAK,EAAE,YAAM;cACrCpB,OAAO,CAACM,KAAK,CAACC,OAAO,GAAG,MAAM;YAChC,CAAC,CAAC;UACJ,CAAC,CAAC;UAEF,OAAO,0CAA0C,GAAG,IAAI,CAACc,oBAAoB,CAAC,CAAC,GAAG,QAAQ;QAC5F;QACA,OAAO,sEAAsE;MAC/E,CAAC;MAEDC,WAAW,WAAXA,WAAWA,CAAA,EAAG;QACZ,IAAI,IAAI,CAACC,aAAa,CAAC,CAAC,EAAE;UACxB,IAAI,CAACC,WAAW,CAAC,YAAY,CAAC;QAChC;MACF,CAAC;MAEDC,OAAO,WAAPA,OAAOA,CAAA,EAAG;QACR,IAAI7B,MAAM,CAACC,UAAU,IAAI9B,EAAE,CAAC+B,MAAM,CAACC,oBAAoB,EAAE;UACvD,IAAI,IAAI,CAACwB,aAAa,CAAC,CAAC,EAAE;YACxB,IAAI,CAAC9B,QAAS,CAACa,KAAK,CAACC,OAAO,GAAG,OAAO;YACtC,IAAMK,MAAM,GAAG,IAAI,CAACnB,QAAS,CAACS,aAAa,CAAC,sBAAsB,CAAC;YACnE1C,EAAE,CAACsD,GAAG,CAACC,OAAO,CAACC,SAAS,CAACC,OAAO,CAACL,MAAM,EAAEpD,EAAE,CAAC0D,IAAI,CAACF,SAAS,CAACU,aAAa,CAAC;UAC3E;QACF;MACF,CAAC;MAEDF,WAAW,WAAXA,WAAWA,CAACG,EAAE,EAAE;QACd,IAAIC,cAAc,GAAG,CAAC;QAEtB,IAAMC,IAAI,GAAG5B,QAAQ,CAACC,aAAa,CAAC,GAAG,GAAGyB,EAAE,CAAC;QAC7CnE,EAAE,CAACgD,KAAK,CAACsB,YAAY,CAACC,WAAW,CAC/BF,IAAI,EACJ,YAAY,EACZ,UAAUrB,KAAK,EAAE;UACfoB,cAAc,GAAG,IAAI,CAACI,SAAS,GAAGxB,KAAK,CAACyB,OAAO,CAAC,CAAC,CAAC,CAACC,KAAK;UACxD1B,KAAK,CAAC2B,cAAc,CAAC,CAAC;QACxB,CAAC,EACD,KACF,CAAC;QAED3E,EAAE,CAACgD,KAAK,CAACsB,YAAY,CAACC,WAAW,CAC/BF,IAAI,EACJ,WAAW,EACX,UAAUrB,KAAK,EAAE;UACf,IAAI,CAACwB,SAAS,GAAGJ,cAAc,GAAGpB,KAAK,CAACyB,OAAO,CAAC,CAAC,CAAC,CAACC,KAAK;UACxD1B,KAAK,CAAC2B,cAAc,CAAC,CAAC;QACxB,CAAC,EACD,KACF,CAAC;MACH,CAAC;MAEDZ,aAAa,WAAbA,aAAaA,CAAA,EAAG;QACd,IAAI,IAAI,CAAC7B,QAAe,KAAK,IAAI,EAAE;UACjC,IAAI;YACFO,QAAQ,CAACmC,WAAW,CAAC,YAAY,CAAC;YAClC,IAAI,CAAC1C,QAAe,GAAG,IAAI;UAC7B,CAAC,CAAC,OAAO2C,CAAC,EAAE;YACV,IAAI,CAAC3C,QAAe,GAAG,KAAK;UAC9B;QACF;QACA,OAAO,IAAI,CAACA,QAAe;MAC7B;IACF,CAAC;IAED;IACA;IACA;IACA;IACA;IACA;IACA;IAEA4C,KAAK,WAALA,KAAKA,CAAC/D,OAAO,EAAE;MACb,IAAMgE,MAAM,GAAGxE,EAAE,CAACmD,IAAI,CAACsB,YAAY,CAACnD,WAAW,CAAC,CAAC;MACjDkD,MAAM,CAACE,SAAS,CAAC,mCAAmC,CAAC;MACrD1E,EAAE,CAACe,MAAM,CAACZ,IAAI,CAACa,YAAY,CAAC2D,UAAU,CAAC,YAAY,EAAEnE,OAAO,CAAC;MAC7DR,EAAE,CAACC,EAAE,CAACC,SAAS,CAAC0E,aAAa,CAACC,aAAa,CAAC,YAAY,EAAErE,OAAO,CAAC;IACpE;EACF,CAAC,CAAC;EA7JFR,EAAE,CAAC8E,OAAO,CAACC,UAAU,CAACnF,aAAa,GAAGA,aAAa;AAAC",
  "ignoreList": []
}