{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Refresh",
    "Update",
    "Operate",
    "properties",
    "src",
    "check",
    "nullable",
    "transform",
    "apply",
    "database",
    "delay",
    "init",
    "filter",
    "datetime",
    "mode",
    "limit",
    "timeformat",
    "itemoffset",
    "itemack",
    "future",
    "width",
    "height",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "getAttributeToPropertyMappings",
    "parseFormat",
    "parseAddress",
    "parseRefresh",
    "parseInt",
    "value",
    "parseFloat",
    "query",
    "members",
    "__request",
    "__html",
    "__wrapper",
    "__fixedRequestData",
    "__external",
    "__separatordate",
    "__separatoradd",
    "__isFuture",
    "__separatorprevday",
    "normalizeUrl",
    "indexOf",
    "parts",
    "util",
    "Uri",
    "parseUri",
    "substring",
    "queryKey",
    "getDatabase",
    "_applySrc",
    "match",
    "error",
    "_getInnerDomString",
    "style",
    "getWidth",
    "getHeight",
    "getPath",
    "_setupRefreshAction",
    "_timer",
    "event",
    "Timer",
    "getRefresh",
    "addListener",
    "refreshRSSlog",
    "start",
    "_onDomReady",
    "$$domReady",
    "message",
    "Bus",
    "subscribe",
    "getParentPage",
    "getDatetime",
    "Config",
    "currentPageId",
    "_update",
    "setTimeout",
    "getDelay",
    "_action",
    "brss",
    "String",
    "htmlStringToDomElement",
    "label",
    "document",
    "querySelector",
    "title",
    "innerText",
    "popup",
    "PopupHandler",
    "showPopup",
    "content",
    "parent",
    "Tree",
    "getParent",
    "Object",
    "entries",
    "margin",
    "forEach",
    "key_value",
    "stop",
    "Registration",
    "stopPropagation",
    "getCurrentDomElement",
    "classList",
    "contains",
    "getItemack",
    "once",
    "adddressSettings",
    "addr",
    "getAddress",
    "Model",
    "isWriteAddress",
    "io",
    "BackendConnections",
    "getClient",
    "backendType",
    "write",
    "Transform",
    "encode",
    "overflow",
    "isBig",
    "getSrc",
    "__refreshRss",
    "setUserData",
    "request",
    "Xhr",
    "send",
    "refresh",
    "isEnabled",
    "requestData",
    "assign",
    "getFilter",
    "f",
    "getLimit",
    "getFuture",
    "j",
    "ResourceManager",
    "getInstance",
    "toUri",
    "set",
    "accept",
    "method",
    "__updateRssContent",
    "ev",
    "getTarget",
    "getResponse",
    "__prepareContentElement",
    "ul",
    "c",
    "replaceChildren",
    "appendChild",
    "displayrows",
    "dataset",
    "innerHTML",
    "dummyDiv",
    "rect",
    "getBoundingClientRect",
    "itemheight",
    "Math",
    "round",
    "bottom",
    "top",
    "parentNode",
    "removeChild",
    "widget",
    "widgetRect",
    "displayheight",
    "labelElem",
    "labelElemRect",
    "floor",
    "last_rowcount",
    "result",
    "getResponseContentType",
    "__updateContent",
    "responseData",
    "feed",
    "items",
    "getUserData",
    "selector",
    "debug",
    "getAttribute",
    "createElement",
    "itemnum",
    "length",
    "getMode",
    "row",
    "last",
    "Date",
    "strftime",
    "i",
    "idx",
    "item",
    "itemHtml",
    "__getItemHtml",
    "rowElem",
    "dom",
    "Element",
    "create",
    "mapping",
    "mappedValue",
    "applyMapping",
    "state",
    "span",
    "defaultValue2DOM",
    "add",
    "id",
    "tags",
    "tmp",
    "Array",
    "isArray",
    "x",
    "_onTap",
    "replace",
    "entryDate",
    "publishedDate",
    "getTimeformat",
    "toLocaleDateString",
    "toLocaleTimeString",
    "thisday",
    "getLink",
    "getTitle",
    "getDescription",
    "getCurrentTarget",
    "toggle",
    "req",
    "getUrl",
    "u",
    "defer",
    "loader",
    "ScriptLoader",
    "addStyles",
    "addHandler",
    "plugins",
    "RssLog",
    "WidgetFactory",
    "registerClass"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/RssLog.js"
  ],
  "sourcesContent": [
    "/* RssLog.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * @author Michael Markstaller\n * @since 2011\n * @asset(plugins/rsslog/*)\n */\nqx.Class.define('cv.plugins.RssLog', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Refresh, cv.ui.common.Update, cv.ui.common.Operate],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: {\n      check: 'String',\n      nullable: true,\n      transform: 'normalizeUrl',\n      apply: '_applySrc'\n    },\n\n    database: {\n      check: 'String',\n      nullable: true\n    },\n\n    delay: {\n      check: 'Number',\n      init: 0\n    },\n\n    filter: {\n      check: 'String',\n      nullable: true\n    },\n\n    datetime: {\n      check: 'Boolean',\n      init: true\n    },\n\n    mode: {\n      check: 'String',\n      init: 'last'\n    },\n\n    limit: {\n      check: 'Number',\n      init: 0\n    },\n\n    timeformat: {\n      check: 'String',\n      nullable: true\n    },\n\n    itemoffset: {\n      check: 'Number',\n      init: 0\n    },\n\n    itemack: {\n      check: ['modify', 'display', 'disable'],\n      init: 'modify'\n    },\n\n    future: {\n      check: 'String',\n      nullable: true\n    },\n\n    width: {\n      check: 'String',\n      nullable: true\n    },\n\n    height: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse(xml, path, flavour, pageType) {\n      const data = cv.parser.pure.WidgetParser.parseElement(\n        this,\n        xml,\n        path,\n        flavour,\n        pageType,\n        this.getAttributeToPropertyMappings()\n      );\n\n      cv.parser.pure.WidgetParser.parseFormat(xml, path);\n      cv.parser.pure.WidgetParser.parseAddress(xml, path);\n      cv.parser.pure.WidgetParser.parseRefresh(xml, path);\n      return data;\n    },\n\n    getAttributeToPropertyMappings() {\n      return {\n        src: {},\n        database: {},\n        delay: { default: 0, transform: parseInt },\n        width: {},\n        height: {},\n        filter: {},\n        datetime: {\n          default: true,\n          transform(value) {\n            if (typeof value === 'boolean') {\n              return value;\n            }\n            return value === 'true';\n          }\n        },\n\n        mode: { default: 'last' },\n        limit: { default: 0, transform: parseFloat },\n        timeformat: {},\n        itemack: { default: 'modify' }, // allowed: modify, display, disable\n        future: {},\n        query: {}\n      };\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __request: null,\n    __html: null,\n    __wrapper: null,\n    __fixedRequestData: null,\n    __external: false,\n\n    __separatordate: null,\n    __separatoradd: null,\n    __isFuture: null,\n    __separatorprevday: null,\n\n    /**\n     * Strip querystring from URL and store it as Map\n     * @param value {String} URL\n     * @return {String} normalized URL\n     */\n    normalizeUrl(value) {\n      this.__fixedRequestData = {};\n      if (value && value.indexOf('?') > 0) {\n        const parts = qx.util.Uri.parseUri(value);\n        value = value.substring(0, value.indexOf('?'));\n        this.__fixedRequestData = parts.queryKey;\n      }\n      if (this.getDatabase()) {\n        this.__fixedRequestData.database = this.getDatabase();\n      }\n      return value;\n    },\n\n    // property apply\n    _applySrc(value) {\n      if (value.match(/rsslog_mysql\\.php/)) {\n        this.error('Use of rsslog_mysql.php is depreciated. Please consult the documentation.');\n      }\n      this.__external =\n        !value.match(/rsslog\\.php/) && !value.match(/rsslog_mysql\\.php/) && !value.match(/rsslog_oh\\.php/);\n    },\n\n    _getInnerDomString() {\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight();\n      }\n\n      return (\n        '<div class=\"actor rsslogBody\"><div class=\"rsslog_inline\" id=\"rss_' +\n        this.getPath() +\n        '\" style=\"' +\n        style +\n        '\"></div></div>'\n      );\n    },\n\n    _setupRefreshAction() {\n      this._timer = new qx.event.Timer(this.getRefresh());\n      this._timer.addListener('interval', () => {\n        this.refreshRSSlog();\n      });\n      this._timer.start();\n    },\n\n    _onDomReady() {\n      if (!this.$$domReady) {\n        super._onDomReady();\n        qx.event.message.Bus.subscribe(\n          'path.' + this.getParentPage().getPath() + '.beforePageChange',\n          this.refreshRSSlog,\n          this\n        );\n\n        this.__html = '<span class=\"mappedValue\"></span><span>{text}</span>';\n        if (this.getDatetime()) {\n          this.__html = '{date}: ' + this.__html;\n        }\n        this.__wrapper = 'li';\n\n        if (cv.Config.currentPageId === this.getParentPage().getPath()) {\n          this.refreshRSSlog();\n        }\n      }\n    },\n\n    _update() {\n      setTimeout(() => this.refreshRSSlog(), this.getDelay());\n    },\n\n    _action() {\n      const brss = cv.util.String.htmlStringToDomElement(\n        '<div class=\"rsslog_popup\" id=\"rss_' + this.getPath() + '_big\"/>'\n      );\n\n      const label = document.querySelector('#' + this.getPath() + ' .label');\n      const title = label ? label.innerText || '' : '';\n      const popup = cv.ui.PopupHandler.showPopup('rsslog', {\n        title: title,\n        content: brss\n      });\n\n      const parent = cv.util.Tree.getParent(brss, 'div', null, 1)[0];\n      Object.entries({ height: '90%', width: '90%', margin: 'auto' }).forEach(function (key_value) {\n        parent.style[key_value[0]] = key_value[1];\n      });\n\n      // define parent as 100%!\n      if (this._timer) {\n        this._timer.stop();\n      }\n      qx.event.Registration.addListener(\n        brss,\n        'tap',\n        function (event) {\n          // don't let the popup know about the click, or it will close on touch-displays\n          event.stopPropagation();\n        },\n        this\n      );\n\n      qx.event.Registration.addListener(\n        popup,\n        'close',\n        function () {\n          // reload main data - but only once (popup and popup_background are caught\n          // here).\n          // But delay it so that any change done to the data has a chance to\n          // arrive here.\n\n          if (\n            popup.getCurrentDomElement() &&\n            popup.getCurrentDomElement().classList.contains('popup') &&\n            this.getItemack() === 'modify'\n          ) {\n            qx.event.Timer.once(\n              function () {\n                this.refreshRSSlog();\n              },\n              this,\n              100\n            );\n\n            let adddressSettings;\n            for (let addr in this.getAddress()) {\n              adddressSettings = this.getAddress()[addr];\n              if (!cv.data.Model.isWriteAddress(adddressSettings)) {\n                continue;\n              } // skip when write flag not set\n              cv.io.BackendConnections.getClient(adddressSettings.backendType).write(addr, cv.Transform.encode(this.getAddress()[addr], 0));\n            }\n          }\n        },\n        this\n      );\n\n      popup.getCurrentDomElement().querySelector('.main').style.overflow = 'auto';\n      this.refreshRSSlog(true);\n    },\n\n    refreshRSSlog(isBig) {\n      const src = this.getSrc();\n      if (!src) {\n        this.error('no src given, aborting RSS-Log refresh');\n        return;\n      }\n      if (!this.__request) {\n        if (!this.__external) {\n          this.__refreshRss();\n        } else {\n          this.error('external sources are no longer supported');\n        }\n      }\n      this.__request.setUserData('big', isBig);\n      if (this.__request instanceof qx.io.request.Xhr) {\n        this.__request.send();\n      }\n\n      const refresh = this.getRefresh();\n      if (typeof refresh !== 'undefined' && refresh) {\n        // reload regularly\n        if (this._timer && this._timer.isEnabled()) {\n          this._timer.start();\n        }\n      }\n    },\n\n    /**\n     * Fetch data from builtin PHP script\n     */\n    __refreshRss() {\n      const src = this.getSrc();\n      const requestData = Object.assign({}, this.__fixedRequestData);\n      if (this.getFilter()) {\n        requestData.f = this.getFilter();\n      }\n      if (this.getLimit()) {\n        requestData.limit = this.getLimit();\n      }\n      if (this.getFuture()) {\n        requestData.future = this.getFuture();\n      }\n      requestData.j = 1;\n      this.__request = new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(src));\n\n      this.__request.set({\n        accept: 'application/json',\n        requestData: requestData,\n        method: 'GET'\n      });\n\n      this.__request.addListener('success', this.__updateRssContent, this);\n      this.__request.addListener('error', ev => {\n        this.error('C: #rss_%s, Error: %s, Feed: %s', this.getPath(), ev.getTarget().getResponse(), src);\n      });\n    },\n\n    __prepareContentElement(ul, c) {\n      c.replaceChildren(); // delete anything inside\n\n      c.appendChild(ul);\n\n      // get height of one entry, calc max num of display items in widget\n      let displayrows = parseInt(c.dataset['last_rowcount'], 10) || 0;\n      ul.innerHTML = '<li class=\"rsslogRow odd\" id=\"dummydiv\">.</li>';\n      const dummyDiv = c.querySelector('#dummydiv');\n      const rect = dummyDiv.getBoundingClientRect();\n      const itemheight = Math.round(rect.bottom - rect.top);\n      dummyDiv.parentNode.removeChild(dummyDiv);\n      if (itemheight !== 0) {\n        const widget = c.parentNode.parentNode; // get the parent widget\n        const widgetRect = widget.getBoundingClientRect();\n        let displayheight = Math.round(widgetRect.bottom - widgetRect.top);\n        const labelElem = widget.querySelector('.label');\n        if (labelElem) {\n          // max. height of actor is widget-label(if exists)\n          const labelElemRect = labelElem.getBoundingClientRect();\n          displayheight -= Math.round(labelElemRect.bottom - labelElemRect.top);\n        }\n        displayrows = Math.floor(displayheight / itemheight);\n      }\n      c.dataset.last_rowcount = displayrows;\n      return displayrows;\n    },\n\n    __updateRssContent(ev) {\n      const result = ev.getTarget().getResponse();\n      if (typeof result === 'string') {\n        // no json -> error\n        this.error('Expected JSON, but got response MIME:', ev.getTarget().getResponseContentType());\n\n        this.error(result);\n        return;\n      }\n      this.__updateContent(result.responseData.feed.entries);\n    },\n\n    __updateContent(items) {\n      const isBig = this.__request.getUserData('big');\n      const selector = '#rss_' + this.getPath() + (isBig === true ? '_big' : '');\n      const c = document.querySelector(selector);\n      const itemack =\n        isBig === true ? this.getItemack() : this.getItemack() === 'modify' ? 'display' : this.getItemack();\n\n      this.debug('ID: ' + c.getAttribute('id') + ', Feed: ' + this.getSrc());\n\n      const ul = document.createElement('ul');\n      const displayrows = this.__prepareContentElement(ul, c);\n\n      const itemnum = items.length;\n      this.debug(\n        'C: #' + this.getPath() + ', ' + itemnum + ' element(s) found, ' + displayrows + ' displayrow(s) available'\n      );\n\n      let itemoffset = 0; // correct if mode='last' or itemnum<=displayrows\n\n      if (itemnum > displayrows) {\n        // no need to check mode if items are less than rows\n        if (this.getMode() === 'first') {\n          itemoffset = itemnum - displayrows;\n        }\n        if (this.getMode() === 'rollover') {\n          itemoffset = parseInt(c.dataset.itemoffset, 10) || 0;\n          if (itemoffset === itemnum) {\n            itemoffset = 0;\n          }\n          c.dataset.itemoffset = itemoffset + 1;\n        }\n      }\n\n      let row = 'rsslogodd';\n      let last = itemoffset + displayrows;\n      last = last > itemnum ? itemnum : last;\n\n      this.__separatordate = new Date().strftime('%d');\n      this.__separatoradd = false;\n      this.__separatorprevday = false;\n      this.__isFuture = false;\n\n      for (let i = itemoffset; i < last; i++) {\n        this.debug('C: #' + this.getPath() + ', processing item: ' + i + ' of ' + itemnum);\n\n        let idx = i;\n        idx = i >= itemnum ? (idx -= itemnum) : idx;\n\n        const item = items[idx];\n        const itemHtml = this.__getItemHtml(item, isBig);\n\n        const rowElem = qx.dom.Element.create('li', {\n          class: 'rsslogRow ' + row\n        });\n\n        rowElem.innerHTML = itemHtml;\n\n        if (item.mapping && item.mapping !== '') {\n          const mappedValue = this.applyMapping(itemack === 'disable' ? 0 : item.state, item.mapping);\n\n          const span = rowElem.querySelector('.mappedValue');\n          this.defaultValue2DOM(mappedValue, span);\n        }\n        if (this.__separatoradd && idx !== 0) {\n          rowElem.classList.add('rsslog_separator');\n          this.__separatorprevday = true;\n        } else {\n          this.__separatorprevday = false;\n        }\n\n        if (this.__separatorprevday === true) {\n          rowElem.classList.add('rsslog_prevday');\n        }\n\n        if (this.__isFuture) {\n          rowElem.classList.add(row === 'rsslogodd' ? 'rsslog_futureeven' : 'rsslog_futureodd');\n        }\n\n        rowElem.dataset.id = item.id;\n        rowElem.dataset.mapping = item.mapping;\n        if (item.tags) {\n          const tmp = rowElem.querySelector('span');\n          if (Array.isArray(item.tags)) {\n            const tags = item.tags.filter(x => x !== '');\n            if (tags.length > 0) {\n              tmp.classList.add.apply(tmp.classList, item.tags);\n            }\n          } else {\n            tmp.classList.add(item.tags);\n          }\n        }\n        if (item.state === '1' && itemack !== 'disable') {\n          rowElem.classList.add('rsslog_ack');\n        }\n\n        if (itemack === 'modify') {\n          qx.event.Registration.addListener(rowElem, 'tap', this._onTap, this);\n        }\n        ul.appendChild(rowElem);\n\n        // Alternate row classes\n        row = row === 'rsslogodd' ? 'rsslogeven' : 'rsslogodd';\n      }\n    },\n\n    __getItemHtml(item, isBig) {\n      let itemHtml = '';\n      if (!this.__external) {\n        itemHtml = this.__html;\n\n        itemHtml = itemHtml.replace(/\\{text\\}/, item.content);\n        const entryDate = new Date(item.publishedDate);\n        if (entryDate) {\n          itemHtml = this.getTimeformat()\n            ? itemHtml.replace(/\\{date\\}/, entryDate.strftime(this.getTimeformat()) + '&nbsp;')\n            : itemHtml.replace(\n                /\\{date\\}/,\n                entryDate.toLocaleDateString() + ' ' + entryDate.toLocaleTimeString() + '&nbsp;'\n              );\n\n          const thisday = entryDate.strftime('%d');\n          this.__separatoradd = this.__separatordate > 0 && this.__separatordate !== thisday;\n          this.__separatordate = thisday;\n          this.__isFuture = entryDate > new Date();\n        } else {\n          itemHtml = itemHtml.replace(/\\{date\\}/, '');\n        }\n      } else {\n        if (isBig) {\n          return '<b><a href=\"' + item.getLink() + '\">' + item.getTitle() + '</a></b><br/>' + item.getDescription();\n        }\n        return '<b>' + item.getTitle() + '</b><br/>' + item.getDescription();\n      }\n\n      return itemHtml;\n    },\n\n    _onTap(ev) {\n      const item = ev.getCurrentTarget();\n\n      const id = item.dataset.id;\n      const mapping = item.dataset.mapping;\n      item.classList.toggle('rsslog_ack');\n      const state = +item.classList.contains('rsslog_ack'); // the new state is the same as hasClass\n      if (mapping && mapping !== '') {\n        const mappedValue = this.applyMapping(state, mapping);\n        let span = item.querySelector('.mappedValue');\n        span.replaceChildren(); // delete anything inside\n        this.defaultValue2DOM(mappedValue, span);\n      }\n      const req = new qx.io.request.Xhr(this.__request.getUrl());\n      req.set({\n        method: 'GET',\n        requestData: Object.assign({}, this.__fixedRequestData, {\n          u: id,\n          state: state\n        }),\n\n        accept: 'application/json'\n      });\n\n      req.send();\n    }\n  },\n\n  defer(statics) {\n    const loader = cv.util.ScriptLoader.getInstance();\n    loader.addStyles('plugins/rsslog/rsslog.css');\n    cv.parser.pure.WidgetParser.addHandler('rsslog', cv.plugins.RssLog);\n    cv.ui.structure.WidgetFactory.registerClass('rsslog', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}