{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Refresh",
    "Update",
    "construct",
    "props",
    "__TAMeventAttached",
    "addListenerOnce",
    "refreshCalllist",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "getAttributeToPropertyMappings",
    "parseFormat",
    "parseAddress",
    "parseRefresh",
    "device",
    "max",
    "transform",
    "value",
    "columns",
    "TAM",
    "TAMColor",
    "TAMwait",
    "TAMwaitColor",
    "TAMplay",
    "TAMplayColor",
    "TAMstop",
    "TAMstopColor",
    "typeIncoming",
    "typeIncomingColor",
    "typeMissed",
    "typeMissedColor",
    "typeOutgoing",
    "typeOutgoingColor",
    "typeActiveIncoming",
    "typeActiveIncomingColor",
    "typeRejectedIncoming",
    "typeRejectedIncomingColor",
    "typeActiveOutgoing",
    "typeActiveOutgoingColor",
    "typeUnknown",
    "typeUnknownColor",
    "events",
    "tr064ListRefreshed",
    "properties",
    "check",
    "init",
    "members",
    "__calllistUri",
    "__calllistList",
    "undefined",
    "__refreshingCalllist",
    "_getInnerDomString",
    "_setupRefreshAction",
    "_timer",
    "event",
    "Timer",
    "getRefresh",
    "addListener",
    "start",
    "_update",
    "address",
    "_displayCalllist",
    "self",
    "clLi",
    "getDomElement",
    "getElementsByClassName",
    "sid",
    "replace",
    "html",
    "types",
    "name",
    "getTypeUnknown",
    "color",
    "getTypeUnknownColor",
    "getTypeIncoming",
    "getTypeIncomingColor",
    "getTypeMissed",
    "getTypeMissedColor",
    "getTypeOutgoing",
    "getTypeOutgoingColor",
    "getTypeActiveIncoming",
    "getTypeActiveIncomingColor",
    "getTypeRejectedIncoming",
    "getTypeRejectedIncomingColor",
    "getTypeActiveOutgoing",
    "getTypeActiveOutgoingColor",
    "forEach",
    "cl",
    "audio",
    "type",
    "Type",
    "Path",
    "getDevice",
    "IconHandler",
    "getInstance",
    "getIconElement",
    "getTAM",
    "getTAMColor",
    "getColumns",
    "split",
    "col",
    "Date",
    "Name",
    "Caller",
    "innerHTML",
    "tamList",
    "i",
    "length",
    "addEventListener",
    "__playTAM",
    "_getCallListURI",
    "url",
    "window",
    "fetch",
    "then",
    "response",
    "ok",
    "json",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "title",
    "locale",
    "Manager",
    "tr",
    "severity",
    "message",
    "status",
    "statusText",
    "JSON",
    "stringify",
    "source",
    "getMax",
    "text",
    "str",
    "DOMParser",
    "parseFromString",
    "itemList",
    "getElementsByTagName",
    "childrenList",
    "children",
    "entry",
    "ii",
    "nodeName",
    "textContent",
    "push",
    "fireEvent",
    "error",
    "element",
    "previousElementSibling",
    "__TAMstop",
    "readyState",
    "__TAMwait",
    "paused",
    "playPromise",
    "play",
    "__TAMplay",
    "pause",
    "currentTime",
    "getTAMwait",
    "getTAMwaitColor",
    "getTAMplay",
    "getTAMplayColor",
    "getTAMstop",
    "getTAMstopColor",
    "defer",
    "loader",
    "util",
    "ScriptLoader",
    "addStyles",
    "addHandler",
    "plugins",
    "tr064",
    "CallList",
    "WidgetFactory",
    "registerClass"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/tr064/CallList.js"
  ],
  "sourcesContent": [
    "/* CallList.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The TR-064 plugin and widget creates a interface to routers that are\n * configured by the TR-064 protocol, like the well known Fritz!Box routers.\n *\n * The protocol is described at: https://avm.de/service/schnittstellen/\n *\n * @author Christian Mayer\n * @since 0.11.0\n * @asset(plugins/tr064/*)\n */\n\nqx.Class.define('cv.plugins.tr064.CallList', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Refresh, cv.ui.common.Update],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    super(props);\n    this.__TAMeventAttached = {};\n    this.addListenerOnce('domReady', () => {\n      this.refreshCalllist('initial');\n    });\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse(xml, path, flavour, pageType) {\n      const data = cv.parser.pure.WidgetParser.parseElement(\n        this,\n        xml,\n        path,\n        flavour,\n        pageType,\n        this.getAttributeToPropertyMappings()\n      );\n\n      cv.parser.pure.WidgetParser.parseFormat(xml, path);\n      cv.parser.pure.WidgetParser.parseAddress(xml, path);\n      cv.parser.pure.WidgetParser.parseRefresh(xml, path);\n      return data;\n    },\n\n    getAttributeToPropertyMappings() {\n      return {\n        device: {},\n        max: {\n          transform(value) {\n            return +value;\n          }\n        },\n\n        columns: { default: 'type;date;nameOrCaller;tam' },\n        TAM: { default: 'phone_answering' },\n        TAMColor: { default: '' },\n        TAMwait: { default: 'control_reload' },\n        TAMwaitColor: { default: '' },\n        TAMplay: { default: 'audio_play' },\n        TAMplayColor: { default: '' },\n        TAMstop: { default: 'phone_answering' },\n        TAMstopColor: { default: '' },\n        typeIncoming: { default: 'phone_call_in' },\n        typeIncomingColor: { default: '' },\n        typeMissed: { default: 'phone_missed_in' },\n        typeMissedColor: { default: '' },\n        typeOutgoing: { default: 'phone_call_out' },\n        typeOutgoingColor: { default: '' },\n        typeActiveIncoming: { default: 'phone_ring_in' },\n        typeActiveIncomingColor: { default: '' },\n        typeRejectedIncoming: { default: 'phone_call_end_in' },\n        typeRejectedIncomingColor: { default: '' },\n        typeActiveOutgoing: { default: 'phone_ring_out' },\n        typeActiveOutgoingColor: { default: '' },\n        typeUnknown: { default: 'text_question_mark' },\n        typeUnknownColor: { default: '' }\n      };\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    tr064ListRefreshed: 'qx.event.type.Event' // event to support unit test\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    device: {\n      check: 'String',\n      init: ''\n    },\n\n    max: {\n      check: 'Number',\n      init: 0\n    },\n\n    columns: { check: 'String' },\n    TAM: { check: 'String' },\n    TAMColor: { check: 'String' },\n    TAMwait: { check: 'String' },\n    TAMwaitColor: { check: 'String' },\n    TAMplay: { check: 'String' },\n    TAMplayColor: { check: 'String' },\n    TAMstop: { check: 'String' },\n    TAMstopColor: { check: 'String' },\n    typeIncoming: { check: 'String' },\n    typeIncomingColor: { check: 'String' },\n    typeMissed: { check: 'String' },\n    typeMissedColor: { check: 'String' },\n    typeOutgoing: { check: 'String' },\n    typeOutgoingColor: { check: 'String' },\n    typeActiveIncoming: { check: 'String' },\n    typeActiveIncomingColor: { check: 'String' },\n    typeRejectedIncoming: { check: 'String' },\n    typeRejectedIncomingColor: { check: 'String' },\n    typeActiveOutgoing: { check: 'String' },\n    typeActiveOutgoingColor: { check: 'String' },\n    typeUnknown: { check: 'String' },\n    typeUnknownColor: { check: 'String' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __calllistUri: '',\n    __calllistList: undefined,\n    __refreshingCalllist: false,\n    /**\n     * Prevent warning \"Reference values are shared across all instances\"\n     * as the keys are unique a share doesn't matter:\n     * @lint ignoreReferenceField(__TAMeventAttached)\n     */\n    __TAMeventAttached: null,\n\n    _getInnerDomString() {\n      return '<div class=\"actor\"><table class=\"TR064_calllist\"><tr><td>Loading TR-064...</td></tr></table></div>';\n    },\n    _setupRefreshAction() {\n      this._timer = new qx.event.Timer(this.getRefresh());\n      this._timer.addListener('interval', () => {\n        if (!this.__refreshingCalllist) {\n          this.refreshCalllist('timer');\n        }\n      });\n      this._timer.start();\n    },\n    _update(address, value) {\n      if (!this.__refreshingCalllist) {\n        this.refreshCalllist('update');\n      }\n    },\n\n    _displayCalllist() {\n      const self = this;\n      const clLi = this.getDomElement().getElementsByClassName('TR064_calllist')[0];\n      const sid = this.__calllistUri ? this.__calllistUri.replace(/.*sid=/, '') : '';\n      let html = '';\n      const types = {\n        0: { name: this.getTypeUnknown(), color: this.getTypeUnknownColor() },\n        1: { name: this.getTypeIncoming(), color: this.getTypeIncomingColor() },\n        2: { name: this.getTypeMissed(), color: this.getTypeMissedColor() },\n        3: { name: this.getTypeOutgoing(), color: this.getTypeOutgoingColor() },\n        9: {\n          name: this.getTypeActiveIncoming(),\n          color: this.getTypeActiveIncomingColor()\n        },\n\n        10: {\n          name: this.getTypeRejectedIncoming(),\n          color: this.getTypeRejectedIncomingColor()\n        },\n\n        11: {\n          name: this.getTypeActiveOutgoing(),\n          color: this.getTypeActiveOutgoingColor()\n        }\n      };\n\n      this.__calllistList.forEach(function (cl) {\n        let audio = '';\n        const type = cl.Type in types ? types[cl.Type] : types[0];\n\n        if (cl.Path) {\n          audio =\n            '<audio preload=\"none\">' +\n            '<source src=\"resource/plugins/tr064/proxy.php?device=' +\n            self.getDevice() +\n            '&uri=' +\n            cl.Path +\n            '%26sid=' +\n            sid +\n            '\">' +\n            '</audio>' +\n            '<div class=\"tam clickable\">' +\n            cv.IconHandler.getInstance().getIconElement(self.getTAM(), '*', '*', self.getTAMColor(), '', '', true) +\n            '</div>';\n        }\n\n        html += '<tr>';\n        self\n          .getColumns()\n          .split(';')\n          .forEach(function (col) {\n            switch (col) {\n              case 'type':\n                html +=\n                  '<td>' +\n                  cv.IconHandler.getInstance().getIconElement(type.name, '*', '*', type.color, '', '', true) +\n                  '</td>';\n                break;\n\n              case 'date':\n                html += '<td>' + cl.Date + '</td>';\n                break;\n\n              case 'name':\n                html += '<td>' + cl.Name + '</td>';\n                break;\n\n              case 'caller':\n                html += '<td>' + cl.Caller + '</td>';\n                break;\n\n              case 'nameOrCaller':\n                if (cl.Name !== '') {\n                  html += '<td>' + cl.Name + '</td>';\n                } else {\n                  html += '<td>' + cl.Caller + '</td>';\n                }\n                break;\n\n              case 'tam':\n                html += '<td>' + audio + '</td>';\n                break;\n            }\n          });\n        html += '</tr>';\n      });\n      clLi.innerHTML = html;\n      const tamList = clLi.getElementsByClassName('tam');\n      for (let i = 0; i < tamList.length; i++) {\n        tamList[i].addEventListener('click', function () {\n          self.__playTAM(this);\n        });\n      }\n    },\n\n    /**\n     * Fetch the TR-064 resource\n     *   /upnp/control/x_contact urn:dslforum-org:service:X_AVM-DE_OnTel:1\n     *   GetCallList\n     */\n    _getCallListURI() {\n      const self = this;\n      const url =\n        'resource/plugins/tr064/soap.php?device=' +\n        this.getDevice() +\n        '&location=upnp/control/x_contact&uri=urn:dslforum-org:service:X_AVM-DE_OnTel:1&fn=GetCallList';\n\n      window\n        .fetch(url)\n        .then(function (response) {\n          if (response.ok) {\n            return response.json();\n          }\n          // else:\n          cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n            title: qx.locale.Manager.tr('TR-064 communication error'),\n            severity: 'urgent',\n            message: qx.locale.Manager.tr(\n              'Reading URL \"%1\" failed with status \"%2\": \"%2\"',\n              response.url,\n              response.status,\n              response.statusText\n            )\n          });\n\n          self.__calllistUri = '<fail>';\n          return null;\n        })\n        .then(function (data) {\n          if (typeof data === 'string') {\n            self.__calllistUri = data;\n            self.refreshCalllist('getCallListURI');\n          } else {\n            cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n              title: qx.locale.Manager.tr('TR-064 communication response error'),\n\n              severity: 'urgent',\n              message: qx.locale.Manager.tr('Reading URL \"%1\" failed with content: \"%2\"', url, JSON.stringify(data))\n            });\n\n            self.__calllistUri = '<fail>';\n          }\n        });\n    },\n\n    refreshCalllist(source) {\n      this.__refreshingCalllist = true;\n\n      if (this.__calllistUri === '<fail>') {\n        return; // this problem won't fix anymore during this instance\n      }\n\n      if (this.__calllistUri === '') {\n        this._getCallListURI();\n        return;\n      }\n\n      const self = this;\n      const url =\n        'resource/plugins/tr064/proxy.php?device=' +\n        this.getDevice() +\n        '&uri=' +\n        this.__calllistUri +\n        '%26max=' +\n        this.getMax();\n\n      window\n        .fetch(url)\n        .then(function (response) {\n          if (response.ok) {\n            return response.text();\n          }\n          // else:\n          cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n            title: qx.locale.Manager.tr('TR-064 communication error'),\n            severity: 'urgent',\n            message: qx.locale.Manager.tr(\n              'Reading URL \"%1\" failed with status \"%2\": \"%2\"',\n              response.url,\n              response.status,\n              response.statusText\n            )\n          });\n\n          return '<xml/>';\n        })\n        .then(function (str) {\n          return new window.DOMParser().parseFromString(str, 'text/xml');\n        })\n        .then(function (data) {\n          self.__calllistList = [];\n          const itemList = data.getElementsByTagName('Call');\n          for (let i = 0; i < itemList.length; i++) {\n            const childrenList = itemList[i].children;\n            const entry = {};\n            for (let ii = 0; ii < childrenList.length; ii++) {\n              entry[childrenList[ii].nodeName] = childrenList[ii].textContent;\n            }\n            self.__calllistList.push(entry);\n          }\n          self._displayCalllist();\n          self.__refreshingCalllist = false;\n          self.fireEvent('tr064ListRefreshed');\n        })\n        .catch(function (error) {\n          cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n            title: qx.locale.Manager.tr('TR-064 communication error'),\n            severity: 'urgent',\n            message: qx.locale.Manager.tr('refreshCalllist() error: \"%1\"', JSON.stringify(error))\n          });\n\n          self.error('TR-064 refreshCalllist() error:', error);\n        });\n    },\n\n    /**\n     * The EventListener for click on the TAM button.\n     * @param element\n     */\n    __playTAM(element) {\n      const self = this;\n      const audio = element.previousElementSibling;\n\n      if (!this.__TAMeventAttached[audio]) {\n        audio.addEventListener('ended', function () {\n          self.__TAMstop(element);\n        });\n        this.__TAMeventAttached[audio] = true;\n      }\n\n      if (audio.readyState < 4) {\n        // not ready yet\n        this.__TAMwait(element);\n      }\n\n      if (audio.paused) {\n        const playPromise = audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(function () {\n              self.__TAMplay(element);\n            })\n            .catch(function () {\n              /*NOP*/\n            });\n        }\n      } else {\n        audio.pause();\n        audio.currentTime = 0;\n        this.__TAMstop(element);\n      }\n    },\n\n    __TAMwait(element) {\n      element.innerHTML = cv.IconHandler.getInstance().getIconElement(\n        this.getTAMwait(),\n        '*',\n        '*',\n        this.getTAMwaitColor(),\n        '',\n        '',\n        true\n      );\n    },\n\n    __TAMplay(element) {\n      element.innerHTML = cv.IconHandler.getInstance().getIconElement(\n        this.getTAMplay(),\n        '*',\n        '*',\n        this.getTAMplayColor(),\n        '',\n        '',\n        true\n      );\n    },\n\n    __TAMstop(element) {\n      element.innerHTML = cv.IconHandler.getInstance().getIconElement(\n        this.getTAMstop(),\n        '*',\n        '*',\n        this.getTAMstopColor(),\n        '',\n        '',\n        true\n      );\n    }\n  },\n\n  defer(statics) {\n    const loader = cv.util.ScriptLoader.getInstance();\n    loader.addStyles('plugins/tr064/tr064.css');\n    cv.parser.pure.WidgetParser.addHandler('calllist', cv.plugins.tr064.CallList);\n\n    cv.ui.structure.WidgetFactory.registerClass('calllist', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}