{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "pure",
    "AbstractWidget",
    "include",
    "common",
    "Refresh",
    "Update",
    "construct",
    "props",
    "__TAMeventAttached",
    "addListenerOnce",
    "refreshCalllist",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "getAttributeToPropertyMappings",
    "parseFormat",
    "parseAddress",
    "parseRefresh",
    "device",
    "max",
    "transform",
    "value",
    "columns",
    "TAM",
    "TAMColor",
    "TAMwait",
    "TAMwaitColor",
    "TAMplay",
    "TAMplayColor",
    "TAMstop",
    "TAMstopColor",
    "typeIncoming",
    "typeIncomingColor",
    "typeMissed",
    "typeMissedColor",
    "typeOutgoing",
    "typeOutgoingColor",
    "typeActiveIncoming",
    "typeActiveIncomingColor",
    "typeRejectedIncoming",
    "typeRejectedIncomingColor",
    "typeActiveOutgoing",
    "typeActiveOutgoingColor",
    "typeUnknown",
    "typeUnknownColor",
    "events",
    "tr064ListRefreshed",
    "properties",
    "check",
    "init",
    "members",
    "__calllistUri",
    "__calllistList",
    "undefined",
    "__refreshingCalllist",
    "_getInnerDomString",
    "_setupRefreshAction",
    "_timer",
    "event",
    "Timer",
    "getRefresh",
    "addListener",
    "start",
    "_update",
    "address",
    "_displayCalllist",
    "self",
    "clLi",
    "getDomElement",
    "getElementsByClassName",
    "sid",
    "replace",
    "html",
    "types",
    "name",
    "getTypeUnknown",
    "color",
    "getTypeUnknownColor",
    "getTypeIncoming",
    "getTypeIncomingColor",
    "getTypeMissed",
    "getTypeMissedColor",
    "getTypeOutgoing",
    "getTypeOutgoingColor",
    "getTypeActiveIncoming",
    "getTypeActiveIncomingColor",
    "getTypeRejectedIncoming",
    "getTypeRejectedIncomingColor",
    "getTypeActiveOutgoing",
    "getTypeActiveOutgoingColor",
    "forEach",
    "cl",
    "audio",
    "type",
    "Type",
    "Path",
    "getDevice",
    "IconHandler",
    "getInstance",
    "getIconElement",
    "getTAM",
    "getTAMColor",
    "getColumns",
    "split",
    "col",
    "Date",
    "Name",
    "Caller",
    "innerHTML",
    "tamList",
    "i",
    "length",
    "addEventListener",
    "__playTAM",
    "_getCallListURI",
    "url",
    "window",
    "fetch",
    "then",
    "response",
    "ok",
    "json",
    "core",
    "notifications",
    "Router",
    "dispatchMessage",
    "title",
    "locale",
    "Manager",
    "tr",
    "severity",
    "message",
    "status",
    "statusText",
    "JSON",
    "stringify",
    "source",
    "getMax",
    "text",
    "str",
    "DOMParser",
    "parseFromString",
    "itemList",
    "getElementsByTagName",
    "childrenList",
    "children",
    "entry",
    "ii",
    "nodeName",
    "textContent",
    "push",
    "fireEvent",
    "error",
    "element",
    "previousElementSibling",
    "__TAMstop",
    "readyState",
    "__TAMwait",
    "paused",
    "playPromise",
    "play",
    "__TAMplay",
    "pause",
    "currentTime",
    "getTAMwait",
    "getTAMwaitColor",
    "getTAMplay",
    "getTAMplayColor",
    "getTAMstop",
    "getTAMstopColor",
    "defer",
    "loader",
    "util",
    "ScriptLoader",
    "addStyles",
    "addHandler",
    "plugins",
    "tr064",
    "CallList",
    "WidgetFactory",
    "registerClass"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/tr064/CallList.js"
  ],
  "sourcesContent": [
    "/* CallList.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The TR-064 plugin and widget creates a interface to routers that are\n * configured by the TR-064 protocol, like the well known Fritz!Box routers.\n *\n * The protocol is described at: https://avm.de/service/schnittstellen/\n *\n * @author Christian Mayer\n * @since 0.11.0\n * @asset(plugins/tr064/*)\n */\n\nqx.Class.define('cv.plugins.tr064.CallList', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Refresh, cv.ui.common.Update],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    super(props);\n    this.__TAMeventAttached = {};\n    this.addListenerOnce('domReady', () => {\n      this.refreshCalllist('initial');\n    });\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse(xml, path, flavour, pageType) {\n      const data = cv.parser.pure.WidgetParser.parseElement(\n        this,\n        xml,\n        path,\n        flavour,\n        pageType,\n        this.getAttributeToPropertyMappings()\n      );\n\n      cv.parser.pure.WidgetParser.parseFormat(xml, path);\n      cv.parser.pure.WidgetParser.parseAddress(xml, path);\n      cv.parser.pure.WidgetParser.parseRefresh(xml, path);\n      return data;\n    },\n\n    getAttributeToPropertyMappings() {\n      return {\n        device: {},\n        max: {\n          transform(value) {\n            return +value;\n          }\n        },\n\n        columns: { default: 'type;date;nameOrCaller;tam' },\n        TAM: { default: 'phone_answering' },\n        TAMColor: { default: '' },\n        TAMwait: { default: 'control_reload' },\n        TAMwaitColor: { default: '' },\n        TAMplay: { default: 'audio_play' },\n        TAMplayColor: { default: '' },\n        TAMstop: { default: 'phone_answering' },\n        TAMstopColor: { default: '' },\n        typeIncoming: { default: 'phone_call_in' },\n        typeIncomingColor: { default: '' },\n        typeMissed: { default: 'phone_missed_in' },\n        typeMissedColor: { default: '' },\n        typeOutgoing: { default: 'phone_call_out' },\n        typeOutgoingColor: { default: '' },\n        typeActiveIncoming: { default: 'phone_ring_in' },\n        typeActiveIncomingColor: { default: '' },\n        typeRejectedIncoming: { default: 'phone_call_end_in' },\n        typeRejectedIncomingColor: { default: '' },\n        typeActiveOutgoing: { default: 'phone_ring_out' },\n        typeActiveOutgoingColor: { default: '' },\n        typeUnknown: { default: 'text_question_mark' },\n        typeUnknownColor: { default: '' }\n      };\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    tr064ListRefreshed: 'qx.event.type.Event' // event to support unit test\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    device: {\n      check: 'String',\n      init: ''\n    },\n\n    max: {\n      check: 'Number',\n      init: 0\n    },\n\n    columns: { check: 'String' },\n    TAM: { check: 'String' },\n    TAMColor: { check: 'String' },\n    TAMwait: { check: 'String' },\n    TAMwaitColor: { check: 'String' },\n    TAMplay: { check: 'String' },\n    TAMplayColor: { check: 'String' },\n    TAMstop: { check: 'String' },\n    TAMstopColor: { check: 'String' },\n    typeIncoming: { check: 'String' },\n    typeIncomingColor: { check: 'String' },\n    typeMissed: { check: 'String' },\n    typeMissedColor: { check: 'String' },\n    typeOutgoing: { check: 'String' },\n    typeOutgoingColor: { check: 'String' },\n    typeActiveIncoming: { check: 'String' },\n    typeActiveIncomingColor: { check: 'String' },\n    typeRejectedIncoming: { check: 'String' },\n    typeRejectedIncomingColor: { check: 'String' },\n    typeActiveOutgoing: { check: 'String' },\n    typeActiveOutgoingColor: { check: 'String' },\n    typeUnknown: { check: 'String' },\n    typeUnknownColor: { check: 'String' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __calllistUri: '',\n    __calllistList: undefined,\n    __refreshingCalllist: false,\n    /**\n     * Prevent warning \"Reference values are shared across all instances\"\n     * as the keys are unique a share doesn't matter:\n     * @lint ignoreReferenceField(__TAMeventAttached)\n     */\n    __TAMeventAttached: null,\n\n    _getInnerDomString() {\n      return '<div class=\"actor\"><table class=\"TR064_calllist\"><tr><td>Loading TR-064...</td></tr></table></div>';\n    },\n    _setupRefreshAction() {\n      this._timer = new qx.event.Timer(this.getRefresh());\n      this._timer.addListener('interval', () => {\n        if (!this.__refreshingCalllist) {\n          this.refreshCalllist('timer');\n        }\n      });\n      this._timer.start();\n    },\n    _update(address, value) {\n      if (!this.__refreshingCalllist) {\n        this.refreshCalllist('update');\n      }\n    },\n\n    _displayCalllist() {\n      const self = this;\n      const clLi = this.getDomElement().getElementsByClassName('TR064_calllist')[0];\n      const sid = this.__calllistUri ? this.__calllistUri.replace(/.*sid=/, '') : '';\n      let html = '';\n      const types = {\n        0: { name: this.getTypeUnknown(), color: this.getTypeUnknownColor() },\n        1: { name: this.getTypeIncoming(), color: this.getTypeIncomingColor() },\n        2: { name: this.getTypeMissed(), color: this.getTypeMissedColor() },\n        3: { name: this.getTypeOutgoing(), color: this.getTypeOutgoingColor() },\n        9: {\n          name: this.getTypeActiveIncoming(),\n          color: this.getTypeActiveIncomingColor()\n        },\n\n        10: {\n          name: this.getTypeRejectedIncoming(),\n          color: this.getTypeRejectedIncomingColor()\n        },\n\n        11: {\n          name: this.getTypeActiveOutgoing(),\n          color: this.getTypeActiveOutgoingColor()\n        }\n      };\n\n      this.__calllistList.forEach(function (cl) {\n        let audio = '';\n        const type = cl.Type in types ? types[cl.Type] : types[0];\n\n        if (cl.Path) {\n          audio =\n            '<audio preload=\"none\">' +\n            '<source src=\"resource/plugins/tr064/proxy.php?device=' +\n            self.getDevice() +\n            '&uri=' +\n            cl.Path +\n            '%26sid=' +\n            sid +\n            '\">' +\n            '</audio>' +\n            '<div class=\"tam clickable\">' +\n            cv.IconHandler.getInstance().getIconElement(self.getTAM(), '*', '*', self.getTAMColor(), '', '', true) +\n            '</div>';\n        }\n\n        html += '<tr>';\n        self\n          .getColumns()\n          .split(';')\n          .forEach(function (col) {\n            switch (col) {\n              case 'type':\n                html +=\n                  '<td>' +\n                  cv.IconHandler.getInstance().getIconElement(type.name, '*', '*', type.color, '', '', true) +\n                  '</td>';\n                break;\n\n              case 'date':\n                html += '<td>' + cl.Date + '</td>';\n                break;\n\n              case 'name':\n                html += '<td>' + cl.Name + '</td>';\n                break;\n\n              case 'caller':\n                html += '<td>' + cl.Caller + '</td>';\n                break;\n\n              case 'nameOrCaller':\n                if (cl.Name !== '') {\n                  html += '<td>' + cl.Name + '</td>';\n                } else {\n                  html += '<td>' + cl.Caller + '</td>';\n                }\n                break;\n\n              case 'tam':\n                html += '<td>' + audio + '</td>';\n                break;\n            }\n          });\n        html += '</tr>';\n      });\n      clLi.innerHTML = html;\n      const tamList = clLi.getElementsByClassName('tam');\n      for (let i = 0; i < tamList.length; i++) {\n        tamList[i].addEventListener('click', function () {\n          self.__playTAM(this);\n        });\n      }\n    },\n\n    /**\n     * Fetch the TR-064 resource\n     *   /upnp/control/x_contact urn:dslforum-org:service:X_AVM-DE_OnTel:1\n     *   GetCallList\n     */\n    _getCallListURI() {\n      const self = this;\n      const url =\n        'resource/plugins/tr064/soap.php?device=' +\n        this.getDevice() +\n        '&location=upnp/control/x_contact&uri=urn:dslforum-org:service:X_AVM-DE_OnTel:1&fn=GetCallList';\n\n      window\n        .fetch(url)\n        .then(function (response) {\n          if (response.ok) {\n            return response.json();\n          }\n          // else:\n          cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n            title: qx.locale.Manager.tr('TR-064 communication error'),\n            severity: 'urgent',\n            message: qx.locale.Manager.tr(\n              'Reading URL \"%1\" failed with status \"%2\": \"%2\"',\n              response.url,\n              response.status,\n              response.statusText\n            )\n          });\n\n          self.__calllistUri = '<fail>';\n          return null;\n        })\n        .then(function (data) {\n          if (typeof data === 'string') {\n            self.__calllistUri = data;\n            self.refreshCalllist('getCallListURI');\n          } else {\n            cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n              title: qx.locale.Manager.tr('TR-064 communication response error'),\n\n              severity: 'urgent',\n              message: qx.locale.Manager.tr('Reading URL \"%1\" failed with content: \"%2\"', url, JSON.stringify(data))\n            });\n\n            self.__calllistUri = '<fail>';\n          }\n        });\n    },\n\n    refreshCalllist(source) {\n      this.__refreshingCalllist = true;\n\n      if (this.__calllistUri === '<fail>') {\n        return; // this problem won't fix anymore during this instance\n      }\n\n      if (this.__calllistUri === '') {\n        this._getCallListURI();\n        return;\n      }\n\n      const self = this;\n      const url =\n        'resource/plugins/tr064/proxy.php?device=' +\n        this.getDevice() +\n        '&uri=' +\n        this.__calllistUri +\n        '%26max=' +\n        this.getMax();\n\n      window\n        .fetch(url)\n        .then(function (response) {\n          if (response.ok) {\n            return response.text();\n          }\n          // else:\n          cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n            title: qx.locale.Manager.tr('TR-064 communication error'),\n            severity: 'urgent',\n            message: qx.locale.Manager.tr(\n              'Reading URL \"%1\" failed with status \"%2\": \"%2\"',\n              response.url,\n              response.status,\n              response.statusText\n            )\n          });\n\n          return '<xml/>';\n        })\n        .then(function (str) {\n          return new window.DOMParser().parseFromString(str, 'text/xml');\n        })\n        .then(function (data) {\n          self.__calllistList = [];\n          const itemList = data.getElementsByTagName('Call');\n          for (let i = 0; i < itemList.length; i++) {\n            const childrenList = itemList[i].children;\n            const entry = {};\n            for (let ii = 0; ii < childrenList.length; ii++) {\n              entry[childrenList[ii].nodeName] = childrenList[ii].textContent;\n            }\n            self.__calllistList.push(entry);\n          }\n          self._displayCalllist();\n          self.__refreshingCalllist = false;\n          self.fireEvent('tr064ListRefreshed');\n        })\n        .catch(function (error) {\n          cv.core.notifications.Router.dispatchMessage('cv.tr064.error', {\n            title: qx.locale.Manager.tr('TR-064 communication error'),\n            severity: 'urgent',\n            message: qx.locale.Manager.tr('refreshCalllist() error: \"%1\"', JSON.stringify(error))\n          });\n\n          self.error('TR-064 refreshCalllist() error:', error);\n        });\n    },\n\n    /**\n     * The EventListener for click on the TAM button.\n     * @param element\n     */\n    __playTAM(element) {\n      const self = this;\n      const audio = element.previousElementSibling;\n\n      if (!this.__TAMeventAttached[audio]) {\n        audio.addEventListener('ended', function () {\n          self.__TAMstop(element);\n        });\n        this.__TAMeventAttached[audio] = true;\n      }\n\n      if (audio.readyState < 4) {\n        // not ready yet\n        this.__TAMwait(element);\n      }\n\n      if (audio.paused) {\n        const playPromise = audio.play();\n        if (playPromise !== undefined) {\n          playPromise\n            .then(function () {\n              self.__TAMplay(element);\n            })\n            .catch(function () {\n              /*NOP*/\n            });\n        }\n      } else {\n        audio.pause();\n        audio.currentTime = 0;\n        this.__TAMstop(element);\n      }\n    },\n\n    __TAMwait(element) {\n      element.innerHTML = cv.IconHandler.getInstance().getIconElement(\n        this.getTAMwait(),\n        '*',\n        '*',\n        this.getTAMwaitColor(),\n        '',\n        '',\n        true\n      );\n    },\n\n    __TAMplay(element) {\n      element.innerHTML = cv.IconHandler.getInstance().getIconElement(\n        this.getTAMplay(),\n        '*',\n        '*',\n        this.getTAMplayColor(),\n        '',\n        '',\n        true\n      );\n    },\n\n    __TAMstop(element) {\n      element.innerHTML = cv.IconHandler.getInstance().getIconElement(\n        this.getTAMstop(),\n        '*',\n        '*',\n        this.getTAMstopColor(),\n        '',\n        '',\n        true\n      );\n    }\n  },\n\n  defer(statics) {\n    const loader = cv.util.ScriptLoader.getInstance();\n    loader.addStyles('plugins/tr064/tr064.css');\n    cv.parser.pure.WidgetParser.addHandler('calllist', cv.plugins.tr064.CallList);\n\n    cv.ui.structure.WidgetFactory.registerClass('calllist', statics);\n  }\n});\n"
  ],
  "mappings": "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"
}