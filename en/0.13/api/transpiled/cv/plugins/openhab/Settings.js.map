{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "_setLayout",
    "layout",
    "VBox",
    "set",
    "padding",
    "backgroundColor",
    "textColor",
    "getBounds",
    "addListenerOnce",
    "getContentElement",
    "setStyle",
    "__servicePid",
    "__uri",
    "_initConfigRestClient",
    "properties",
    "modified",
    "check",
    "init",
    "event",
    "members",
    "__configDescriptionResource",
    "__service",
    "__configDescription",
    "__inDom",
    "_store",
    "__initialValues",
    "_initStore",
    "pid",
    "serviceDesc",
    "get",
    "method",
    "url",
    "put",
    "service",
    "io",
    "rest",
    "Resource",
    "client",
    "cv",
    "BackendConnections",
    "getClientByType",
    "data",
    "store",
    "Rest",
    "configureRequest",
    "req",
    "setRequestHeader",
    "openhab",
    "authorize",
    "manipulateData",
    "n",
    "Object",
    "getOwnPropertyNames",
    "forEach",
    "key",
    "replace",
    "prototype",
    "hasOwnProperty",
    "call",
    "autoDownload",
    "JSON",
    "parse",
    "util",
    "Serializer",
    "toJson",
    "getModel",
    "_saveConfig",
    "close",
    "description",
    "config",
    "addListener",
    "ev",
    "_createForm",
    "getRequest",
    "getResponse",
    "Array",
    "isArray",
    "parameters",
    "_createChildControl",
    "form",
    "getChildControl",
    "param",
    "field",
    "type",
    "TextField",
    "defaultValue",
    "setPlaceholder",
    "CheckBox",
    "setValue",
    "readOnly",
    "setReadOnly",
    "required",
    "setRequired",
    "setToolTipText",
    "_onFormFieldChange",
    "add",
    "label",
    "name",
    "renderer",
    "plugins",
    "Single",
    "Config",
    "guessIfProxied",
    "setBottomText",
    "tr",
    "textAlign",
    "font",
    "addButton",
    "_addAt",
    "controller",
    "Form",
    "bind",
    "setModified",
    "items",
    "getItems",
    "some",
    "getValue",
    "debug",
    "_createChildControlImpl",
    "id",
    "hash",
    "control",
    "basic",
    "Label",
    "marginBottom",
    "allowGrowX",
    "decorator",
    "Button",
    "locale",
    "Manager",
    "setVisibility",
    "destruct",
    "_disposeObjects",
    "Settings"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/openhab/Settings.js"
  ],
  "sourcesContent": [
    "/* Settings.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Show and edit openHAB CometVisu backends settings via openHAB api.\n *\n * @author Tobias BrÃ¤utigam\n * @since 0.11.0\n *\n */\nqx.Class.define('cv.plugins.openhab.Settings', {\n  extend: qx.ui.core.Widget,\n\n  /*\n  *****************************************************************************\n    CONSTRUCTOR\n  *****************************************************************************\n  */\n  construct() {\n    super();\n    this._setLayout(new qx.ui.layout.VBox());\n    this.set({\n      padding: 10,\n      backgroundColor: 'rgba(216, 216, 216, 1.0)',\n      textColor: 'rgb(61, 61, 61)'\n    });\n\n    // override text-shadow setting\n    if (!this.getBounds()) {\n      this.addListenerOnce('appear', () => {\n        this.getContentElement().setStyle('text-shadow', 'none');\n      });\n    } else {\n      this.getContentElement().setStyle('text-shadow', 'none');\n    }\n\n    this.__servicePid = 'org.openhab.cometvisu';\n    this.__uri = 'ui:cometvisu';\n\n    this._initConfigRestClient();\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    modified: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeModified'\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n  members: {\n    __servicePid: null,\n    __uri: null,\n    __configDescriptionResource: null,\n    __service: null,\n    __configDescription: null,\n    __inDom: false,\n    _store: null,\n    __initialValues: null,\n\n    _initStore(pid) {\n      const serviceDesc = {\n        get: { method: 'GET', url: '/rest/services/' + pid + '/config' },\n        delete: { method: 'DELETE', url: '/rest/services/' + pid + '/config' },\n        put: { method: 'PUT', url: '/rest/services/' + pid + '/config' }\n      };\n\n      const service = (this.__service = new qx.io.rest.Resource(serviceDesc));\n      const client = cv.io.BackendConnections.getClientByType('openhab');\n\n      this._store = new qx.data.store.Rest(service, 'get', {\n        configureRequest(req) {\n          req.setRequestHeader('Content-Type', 'application/json');\n          if (client instanceof cv.io.openhab.Rest) {\n            client.authorize(req);\n          }\n        },\n        manipulateData(data) {\n          // normalize the keys (replace .> with _) for the marshaller\n          const n = {};\n          Object.getOwnPropertyNames(data).forEach(function (key) {\n            n[key.replace(/[\\.>]/g, '_')] = data[key];\n          });\n          if (!Object.prototype.hasOwnProperty.call(n, 'autoDownload')) {\n            n.autoDownload = false;\n          }\n          return n;\n        }\n      });\n\n      // load data\n      service.get();\n      this._store.addListenerOnce('changeModel', () => {\n        this.__initialValues = JSON.parse(qx.util.Serializer.toJson(this._store.getModel()));\n      });\n    },\n\n    _saveConfig() {\n      let data = qx.util.Serializer.toJson(this._store.getModel());\n      data = data.replace(/icons_mapping_/g, 'icons.mapping>');\n      data = JSON.parse(data.replace('icons_enableMapping', 'icons>enableMapping'));\n\n      this.__service.put(null, data);\n      this.__service.addListenerOnce('putSuccess', this.close, this);\n    },\n\n    _initConfigRestClient() {\n      const description = {\n        get: { method: 'GET', url: '/rest/config-descriptions/' + this.__uri }\n      };\n\n      const config = (this.__configDescriptionResource = new qx.io.rest.Resource(description));\n      const client = cv.io.BackendConnections.getClientByType('openhab');\n\n      config.addListener('getSuccess', ev => {\n        this._createForm(ev.getRequest().getResponse());\n      });\n      config.configureRequest(function (req) {\n        req.setRequestHeader('Content-Type', 'application/json');\n        if (client instanceof cv.io.openhab.Rest) {\n          client.authorize(req);\n        }\n      });\n      config.get();\n\n      this._initStore(this.__servicePid);\n    },\n\n    _createForm(config) {\n      if (config && Object.prototype.hasOwnProperty.call(config, 'parameters') && Array.isArray(config.parameters)) {\n        this._createChildControl('title');\n        const form = this.getChildControl('form');\n        config.parameters.forEach(function (param) {\n          let field;\n          switch (param.type) {\n            case 'TEXT':\n              field = new qx.ui.form.TextField();\n              if (param.defaultValue) {\n                field.setPlaceholder(param.defaultValue);\n              }\n              break;\n            case 'BOOLEAN':\n              field = new qx.ui.form.CheckBox();\n              field.setValue(param.defaultValue === 'true');\n              break;\n          }\n\n          if (param.readOnly) {\n            field.setReadOnly(true);\n          }\n          if (param.required) {\n            field.setRequired(true);\n          }\n          field.setToolTipText(param.description);\n          field.addListener('changeValue', this._onFormFieldChange, this);\n          form.add(field, param.label, null, param.name, null, param);\n        }, this);\n\n        const renderer = new cv.plugins.openhab.renderer.Single(form);\n        if (cv.Config.guessIfProxied()) {\n          renderer.setBottomText(\n            this.tr(\n              'The CometVisu seems to be delivered by a proxied webserver. Changing configuration values might not have the expected effect. Please proceed only if you know what you are doing.'\n            )\n          );\n\n          renderer.getChildControl('bottom-text').set({\n            padding: 10,\n            textAlign: 'center',\n            font: 'bold'\n          });\n        }\n        renderer.addButton(this.getChildControl('cancel-button'));\n        renderer.addButton(this.getChildControl('save-button'));\n\n        this._addAt(renderer, 1);\n        const controller = new qx.data.controller.Form(null, form);\n\n        this._store.bind('model', controller, 'model');\n\n        this.setModified(false);\n      }\n    },\n\n    _onFormFieldChange() {\n      let modified = false;\n      const items = this.getChildControl('form').getItems();\n      Object.getOwnPropertyNames(items).some(function (name) {\n        // noinspection EqualityComparisonWithCoercionJS\n        if (this.__initialValues[name] != items[name].getValue()) {\n          this.debug(name + ' has changed from ' + this.__initialValues[name] + ' to ' + items[name].getValue());\n\n          modified = true;\n          return true;\n        }\n        return false;\n      }, this);\n      this.setModified(modified);\n    },\n\n    // overridden\n    _createChildControlImpl(id, hash) {\n      let control;\n      switch (id) {\n        case 'title':\n          control = new qx.ui.basic.Label(this.tr('openHAB backend settings'));\n          control.set({\n            font: 'bold',\n            marginBottom: 5,\n            allowGrowX: true,\n            decorator: 'window-caption'\n          });\n\n          this._addAt(control, 0);\n          break;\n\n        case 'form':\n          control = new qx.ui.form.Form();\n          break;\n\n        case 'cancel-button':\n          control = new qx.ui.form.Button(qx.locale.Manager.tr('Cancel'));\n          control.addListener('execute', this.close, this);\n          break;\n\n        case 'save-button':\n          control = new qx.ui.form.Button(qx.locale.Manager.tr('Save'));\n          control.addListener('execute', this._saveConfig, this);\n          this.bind('modified', control, 'enabled');\n          break;\n      }\n\n      return control || super._createChildControlImpl(id, hash);\n    },\n\n    close() {\n      this.setVisibility('excluded');\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this._disposeObjects('__configDescriptionResource', '__service', '__root', '_store', '_window');\n  }\n});\n"
  ],
  "mappings": "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"
}