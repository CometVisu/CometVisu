{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MRequirements",
    "members",
    "setUp",
    "request",
    "io",
    "remote",
    "transport",
    "XmlHttp",
    "addListener",
    "responseError",
    "resourceBase",
    "util",
    "AliasManager",
    "getInstance",
    "resolve",
    "tearDown",
    "dispose",
    "e",
    "getTarget",
    "type",
    "getType",
    "event",
    "Timer",
    "once",
    "resume",
    "fail",
    "getStatusCode",
    "getStatusText",
    "getUrl",
    "path",
    "ResourceManager",
    "toUri",
    "isLocal",
    "window",
    "location",
    "protocol",
    "needsPHPWarning",
    "warn",
    "testSetHeader",
    "require",
    "setUrl",
    "getRequestHeaders",
    "setRequestHeader",
    "response",
    "lang",
    "Json",
    "parse",
    "getResponseText",
    "toLowerCase",
    "assertEquals",
    "that",
    "setTimeout",
    "send",
    "wait",
    "testGetResponseHeader",
    "juhu",
    "getResponseHeader",
    "test"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/qx_packages/qooxdoo_deprecated_qx_io_remote_v1_0_2/source/class/qx/test/io/remote/transport/XmlHttp.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\nqooxdoo - the new era of web development\n\nhttp://qooxdoo.org\n\nCopyright:\n  2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\nLicense:\n     MIT: https://opensource.org/licenses/MIT\n  See the LICENSE file in the project's top-level directory for details.\n\nAuthors:\n  * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/*\n */\n/**\n *\n * @asset(qx/test/*)\n */\n\nqx.Class.define(\"qx.test.io.remote.transport.XmlHttp\", {\n  extend: qx.dev.unit.TestCase,\n  include: [qx.dev.unit.MRequirements],\n\n  members: {\n    setUp() {\n      this.request = new qx.io.remote.transport.XmlHttp();\n\n      this.request.addListener(\"aborted\", this.responseError, this);\n      this.request.addListener(\"failed\", this.responseError, this);\n      this.request.addListener(\"timeout\", this.responseError, this);\n\n      this.resourceBase =\n        qx.util.AliasManager.getInstance().resolve(\"qx/test/\");\n    },\n\n    tearDown() {\n      this.request.dispose();\n    },\n\n    responseError(e) {\n      var request = e.getTarget();\n      var type = e.getType();\n\n      qx.event.Timer.once(function () {\n        this.resume(function () {\n          this.fail(\n            \"Response error: \" +\n              type +\n              \" \" +\n              request.getStatusCode() +\n              \" \" +\n              request.getStatusText()\n          );\n        }, this);\n      }, this);\n    },\n\n    getUrl(path) {\n      return qx.util.ResourceManager.getInstance().toUri(path);\n    },\n\n    isLocal() {\n      return window.location.protocol == \"file:\";\n    },\n\n    needsPHPWarning() {\n      this.warn(\n        \"This test can only be run from a web server with PHP support.\"\n      );\n    },\n\n    testSetHeader() {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n      this.require([\"php\"]);\n\n      this.request.setUrl(this.getUrl(\"qx/test/xmlhttp/echo_header.php\"));\n\n      this.request.getRequestHeaders()[\"foo\"] = \"bar\";\n      this.request.setRequestHeader(\"juhu\", \"kinners\");\n\n      this.request.addListener(\n        \"completed\",\n        function (e) {\n          this.resume(function () {\n            var response = qx.lang.Json.parse(\n              this.request.getResponseText().toLowerCase()\n            );\n            this.assertEquals(\"kinners\", response[\"juhu\"]);\n            this.assertEquals(\"bar\", response[\"foo\"]);\n          }, this);\n        },\n        this\n      );\n\n      var that = this;\n      window.setTimeout(function () {\n        that.request.send();\n      }, 250);\n      this.wait(7500);\n    },\n\n    testGetResponseHeader() {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n      this.require([\"php\"]);\n\n      this.request.setUrl(this.getUrl(\"qx/test/xmlhttp/send_known_header.php\"));\n\n      this.request.addListener(\n        \"completed\",\n        function (e) {\n          this.resume(function () {\n            var juhu =\n              this.request.getResponseHeader(\"juhu\") ||\n              this.request.getResponseHeader(\"Juhu\");\n            this.assertEquals(\"kinners\", juhu);\n          }, this);\n        },\n        this\n      );\n\n      var that = this;\n      window.setTimeout(function () {\n        that.request.send();\n      }, 250);\n      this.wait(7500);\n    },\n  },\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}