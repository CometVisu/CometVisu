{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MMock",
    "members",
    "__r",
    "__initialState",
    "setUp",
    "bom",
    "History",
    "getInstance",
    "getState",
    "application",
    "Routing",
    "tearDown",
    "setState",
    "dispose",
    "testGet",
    "handler",
    "spy",
    "onGet",
    "executeGet",
    "assertCalledOnce",
    "testBack",
    "aHandler",
    "bHandler",
    "back",
    "assertCalledTwice",
    "testBackCycle",
    "cHandler",
    "testGetCustomData",
    "a",
    "assertTrue",
    "args",
    "customData",
    "testGetCustomDataTwoInstances",
    "r2",
    "testOn",
    "on",
    "execute",
    "testPost",
    "onPost",
    "executePost",
    "testPostParam",
    "data",
    "assertCalledWith",
    "params",
    "id",
    "path",
    "testDelete",
    "onDelete",
    "executeDelete",
    "testPut",
    "onPut",
    "executePut",
    "testAny",
    "onAny",
    "testInit",
    "defaultHandler",
    "assertNotCalled",
    "init",
    "testGetPathOrFallback",
    "assertEquals",
    "_getPathOrFallback",
    "test"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/test/application/Routing.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (wittemann)\n\n************************************************************************ */\n\nqx.Class.define(\"qx.test.application.Routing\", {\n  extend: qx.dev.unit.TestCase,\n  include: qx.dev.unit.MMock,\n\n  members: {\n    __r: null,\n    __initialState: null,\n\n    setUp() {\n      this.__initialState = qx.bom.History.getInstance().getState();\n      this.__r = new qx.application.Routing();\n    },\n\n    tearDown() {\n      qx.bom.History.getInstance().setState(this.__initialState);\n      this.__r.dispose();\n    },\n\n    testGet() {\n      var handler = this.spy();\n      this.__r.onGet(\"/abc\", handler);\n      this.__r.executeGet(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n    testBack() {\n      var aHandler = this.spy();\n      var bHandler = this.spy();\n      this.__r.onGet(\"/a\", aHandler);\n      this.__r.onGet(\"/b\", bHandler);\n      this.__r.executeGet(\"/a\");\n      this.__r.executeGet(\"/b\");\n      this.__r.back();\n      this.assertCalledTwice(aHandler);\n      this.assertCalledOnce(bHandler);\n    },\n\n    /**\n     * Tests the ability of app routing to detect and remove route cycles.\n     * After A >> B >> C >> B >> routing.back(), the routing should display A and not C.\n     */\n    testBackCycle() {\n      var aHandler = this.spy();\n      var bHandler = this.spy();\n      var cHandler = this.spy();\n      this.__r.onGet(\"/a\", aHandler);\n      this.__r.onGet(\"/b\", bHandler);\n      this.__r.onGet(\"/c\", cHandler);\n      this.__r.executeGet(\"/a\");\n      this.__r.executeGet(\"/b\");\n      this.__r.executeGet(\"/c\");\n      this.__r.executeGet(\"/b\");\n      this.__r.back();\n      this.assertCalledTwice(aHandler);\n      this.assertCalledTwice(bHandler);\n      this.assertCalledOnce(cHandler);\n    },\n\n    testGetCustomData() {\n      var handler = this.spy();\n      this.__r.onGet(\"/abc\", handler);\n      this.__r.executeGet(\"/abc\", { a: true });\n      this.assertCalledOnce(handler);\n      this.assertTrue(handler.args[0][0].customData.a);\n    },\n\n    testGetCustomDataTwoInstances() {\n      var r2 = new qx.application.Routing();\n      var handler = this.spy();\n      this.__r.onGet(\"/abc\", handler);\n      r2.executeGet(\"/abc\", { a: true });\n      this.assertCalledOnce(handler);\n      this.assertTrue(handler.args[0][0].customData.a);\n      r2.dispose();\n    },\n\n    testOn() {\n      var handler = this.spy();\n      this.__r.on(\"/\", handler);\n      this.__r.execute(\"/\");\n      this.assertCalledOnce(handler);\n    },\n\n    testPost() {\n      var handler = this.spy();\n      this.__r.onPost(\"/abc\", handler);\n      this.__r.executePost(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n    testPostParam() {\n      var handler = this.spy();\n      var data = { data: \"test\" };\n      this.__r.onPost(\"/{id}/affe\", handler);\n      this.__r.executePost(\"/123456/affe\", data, \"custom data\");\n      this.assertCalledOnce(handler);\n      this.assertCalledWith(handler, {\n        customData: \"custom data\",\n        params: { id: \"123456\", data: \"test\" },\n        path: \"/123456/affe\"\n      });\n    },\n\n    testDelete() {\n      var handler = this.spy();\n      this.__r.onDelete(\"/abc\", handler);\n      this.__r.executeDelete(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n    testPut() {\n      var handler = this.spy();\n      this.__r.onPut(\"/abc\", handler);\n      this.__r.executePut(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n    testAny() {\n      var handler = this.spy();\n      this.__r.onAny(\"/abc\", handler);\n      this.__r.executePost(\"/abc\");\n      this.__r.executeDelete(\"/abc\");\n      this.assertCalledTwice(handler);\n    },\n\n    testInit() {\n      var handler = this.spy();\n      var defaultHandler = this.spy();\n\n      this.__r.dispose();\n      this.__r = new qx.application.Routing();\n\n      this.__r.onGet(\"/a/b/c\", handler);\n      this.assertNotCalled(handler);\n      this.__r.onGet(\"/\", defaultHandler);\n      this.assertNotCalled(defaultHandler);\n\n      this.__r.init();\n      this.assertNotCalled(handler);\n      this.assertCalledOnce(defaultHandler);\n\n      qx.bom.History.getInstance().setState(\"/a/b/c\");\n      this.assertCalledOnce(handler);\n    },\n\n    testGetPathOrFallback() {\n      this.__r.on(\"/registered\", function () {});\n\n      this.assertEquals(\"/\", this.__r._getPathOrFallback(\"\"));\n      this.assertEquals(\"/\", this.__r._getPathOrFallback(null));\n      this.assertEquals(\"/\", this.__r._getPathOrFallback(\"/not/registered\"));\n      this.assertEquals(\n        \"/given/default\",\n        this.__r._getPathOrFallback(\n          \"use_default_instead_of_this\",\n          \"/given/default\"\n        )\n      );\n\n      this.assertEquals(\n        \"/registered\",\n        this.__r._getPathOrFallback(\"/registered\")\n      );\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}