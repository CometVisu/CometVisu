{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "test",
    "ui",
    "LayoutTestCase",
    "include",
    "dev",
    "unit",
    "MRequirements",
    "MMock",
    "members",
    "hasWebFontSupport",
    "browser",
    "core",
    "Environment",
    "get",
    "version",
    "tearDown",
    "getSandbox",
    "restore",
    "testSelectTextAllBeforeFlush",
    "textfield",
    "form",
    "TextField",
    "getRoot",
    "add",
    "focus",
    "selectAllText",
    "flush",
    "self",
    "wait",
    "assertEquals",
    "getTextSelection",
    "destroy",
    "testSelectAllTextAfterFlush",
    "testClearTextSelectionBeforeFlush",
    "clearTextSelection",
    "testClearTextSelectionAfterFlush",
    "testGetTextSelectionStartEndAfterFlush",
    "setTextSelection",
    "getTextSelectionStart",
    "getTextSelectionEnd",
    "testGetTextSelectionStartEndBeforeFlush",
    "testApplyWebFont",
    "_this",
    "require",
    "tf",
    "loader",
    "bom",
    "webfonts",
    "WebFontLoader",
    "getLoader",
    "setFontFaces",
    "fontFamily",
    "paths",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "load",
    "then",
    "f",
    "WebFont",
    "set",
    "size",
    "family",
    "addListener",
    "resume",
    "dispose",
    "assertCalledOnce",
    "statusChangeSpy",
    "loadComplete",
    "spy",
    "setFont",
    "Field"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/test/ui/form/Field.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/* ************************************************************************\n ************************************************************************ */\n/**\n *\n * @asset(qx/test/webfonts/*)\n */\n\nqx.Class.define(\"qx.test.ui.form.Field\", {\n  extend: qx.test.ui.LayoutTestCase,\n\n  include: [qx.dev.unit.MRequirements, qx.dev.unit.MMock],\n\n  members: {\n    hasWebFontSupport() {\n      var browser = qx.core.Environment.get(\"browser.name\");\n      var version = qx.core.Environment.get(\"browser.version\");\n      if (\n        (browser == \"firefox\" && version < 3.5) ||\n        (browser == \"opera\" && version < 10)\n      ) {\n        return false;\n      }\n      return true;\n    },\n\n    tearDown() {\n      this.getSandbox().restore();\n    },\n\n    testSelectTextAllBeforeFlush() {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      textfield.selectAllText();\n\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function () {\n        self.assertEquals(\"affe\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n    testSelectAllTextAfterFlush() {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      this.flush();\n\n      textfield.selectAllText();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function () {\n        self.assertEquals(\"affe\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n    testClearTextSelectionBeforeFlush() {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      textfield.selectAllText();\n      textfield.clearTextSelection();\n\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(100, function () {\n        self.assertEquals(\"\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n    testClearTextSelectionAfterFlush() {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function () {\n        textfield.selectAllText();\n        textfield.clearTextSelection();\n        self.assertEquals(\"\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n    testGetTextSelectionStartEndAfterFlush() {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function () {\n        textfield.setTextSelection(1, 2);\n        self.assertEquals(1, textfield.getTextSelectionStart());\n        self.assertEquals(2, textfield.getTextSelectionEnd());\n        textfield.destroy();\n      });\n    },\n\n    testGetTextSelectionStartEndBeforeFlush() {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      textfield.setTextSelection(2, 3);\n\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(100, function () {\n        self.assertEquals(2, textfield.getTextSelectionStart());\n        self.assertEquals(3, textfield.getTextSelectionEnd());\n        textfield.destroy();\n      });\n    },\n\n    testApplyWebFont() {\n      this.require([\"webFontSupport\"]);\n      var tf = new qx.ui.form.TextField(\"Laugh while you can, monkey boy!\");\n\n      let loader = qx.bom.webfonts.WebFontLoader.getLoader(\n        \"FinelinerScriptRegular\",\n        true\n      );\n\n      loader.setFontFaces([\n        {\n          fontFamily: \"FinelinerScriptRegular\",\n          paths: [\n            qx.util.ResourceManager.getInstance().toUri(\n              \"qx/test/webfonts/fineliner_script-webfont.woff\"\n            )\n          ]\n        },\n\n        {\n          fontFamily: \"YanoneKaffeesatzRegular\",\n          paths: [\n            qx.util.ResourceManager.getInstance().toUri(\n              \"qx/test/webfonts/yanonekaffeesatz-regular-webfont.woff\"\n            ),\n\n            qx.util.ResourceManager.getInstance().toUri(\n              \"qx/test/webfonts/yanonekaffeesatz-regular-webfont.ttf\"\n            ),\n\n            qx.util.ResourceManager.getInstance().toUri(\n              \"qx/test/webfonts/yanonekaffeesatz-regular-webfont.eot\"\n            )\n          ]\n        }\n      ]);\n\n      loader.load().then(() => {\n        var f = new qx.bom.webfonts.WebFont();\n        f.set({\n          size: 18,\n          family: [\"FinelinerScriptRegular\", \"monospace\"]\n        });\n\n        f.addListener(\"changeValid\", () => {\n          this.resume(function () {\n            tf.dispose();\n            f.dispose();\n            this.assertCalledOnce(statusChangeSpy);\n          }, this);\n        });\n\n        f.loadComplete();\n\n        var statusChangeSpy = this.spy(tf, \"_onWebFontStatusChange\");\n        tf.setFont(f);\n      });\n\n      this.wait(30000);\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}