{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MRequirements",
    "members",
    "__history",
    "hasNoIe",
    "core",
    "Environment",
    "get",
    "setUp",
    "bom",
    "History",
    "getInstance",
    "testInstance",
    "runsInIframe",
    "window",
    "top",
    "$$instance",
    "assertInstance",
    "HashHistory",
    "IframeHistory",
    "NativeHistory",
    "testAddState",
    "addToHistory",
    "self",
    "setTimeout",
    "resume",
    "__checkState",
    "wait",
    "testNavigateBack",
    "__checkFooAndSetBar",
    "assertEquals",
    "_readState",
    "__checkBarAndGoBack",
    "history",
    "back",
    "getTitle",
    "testNavigateBackAfterSetState",
    "setState",
    "__setState_checkAffeAndSetFoo",
    "__setState_checkFooAndSetBar",
    "__setState_checkBarAndGoBack",
    "testRequestEvent",
    "addListenerOnce",
    "assertTrue",
    "testRequestEventAddHistory",
    "_this",
    "ev",
    "getData",
    "test"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/test/bom/History.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Daniel Wagner (danielwagner)\n     * Mustafa Sak (msak)\n\n************************************************************************ */\n\nqx.Class.define(\"qx.test.bom.History\", {\n  extend: qx.dev.unit.TestCase,\n\n  include: [qx.dev.unit.MRequirements],\n\n  members: {\n    __history: null,\n\n    hasNoIe() {\n      return qx.core.Environment.get(\"engine.name\") !== \"mshtml\";\n    },\n\n    setUp() {\n      this.__history = qx.bom.History.getInstance();\n    },\n\n    testInstance() {\n      var runsInIframe = !(window == window.top);\n\n      if (!this.$$instance) {\n        // in iframe + IE9\n        if (\n          runsInIframe &&\n          qx.core.Environment.get(\"browser.documentmode\") == 9\n        ) {\n          this.assertInstance(this.__history, qx.bom.HashHistory);\n        }\n\n        // in iframe + IE<9\n        else if (\n          runsInIframe &&\n          qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n          qx.core.Environment.get(\"browser.documentmode\") < 9\n        ) {\n          this.assertInstance(this.__history, qx.bom.IframeHistory);\n        }\n\n        // browser with hashChange event\n        else if (qx.core.Environment.get(\"event.hashchange\")) {\n          this.assertInstance(this.__history, qx.bom.NativeHistory);\n        }\n\n        // IE without hashChange event\n        else if (qx.core.Environment.get(\"engine.name\") == \"mshtml\") {\n          this.assertInstance(this.__history, qx.bom.IframeHistory);\n        }\n      }\n    },\n\n    testAddState() {\n      this.__history.addToHistory(\"foo\", \"Title Foo\");\n\n      var self = this;\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__checkState();\n        }, self);\n      }, 200);\n\n      this.wait();\n    },\n\n    testNavigateBack() {\n      this.__history.addToHistory(\"foo\", \"Title Foo\");\n      var self = this;\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__checkFooAndSetBar();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n    __checkFooAndSetBar() {\n      var self = this;\n      this.assertEquals(\"foo\", this.__history._readState(), \"check1\");\n      this.__history.addToHistory(\"bar\", \"Title Bar\");\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__checkBarAndGoBack();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n    __checkBarAndGoBack() {\n      var self = this;\n      this.assertEquals(\"bar\", this.__history._readState(), \"check2\");\n      history.back();\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__checkState();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n    __checkState() {\n      this.assertEquals(\"foo\", this.__history._readState(), \"check3\");\n      this.assertEquals(\"Title Foo\", this.__history.getTitle());\n    },\n\n    testNavigateBackAfterSetState() {\n      this.__history.setState(\"affe\");\n\n      var self = this;\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__setState_checkAffeAndSetFoo();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n    __setState_checkAffeAndSetFoo() {\n      var self = this;\n      this.assertEquals(\"affe\", this.__history._readState(), \"check0\");\n      this.__history.setState(\"foo\");\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__setState_checkFooAndSetBar();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n    __setState_checkFooAndSetBar() {\n      var self = this;\n      this.assertEquals(\"foo\", this.__history._readState(), \"check1\");\n      this.__history.setState(\"bar\");\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.__setState_checkBarAndGoBack();\n        }, self);\n      }, 300);\n      this.wait();\n    },\n\n    __setState_checkBarAndGoBack() {\n      var self = this;\n      this.assertEquals(\"bar\", this.__history._readState(), \"check2\");\n      history.back();\n      window.setTimeout(function () {\n        self.resume(function () {\n          this.assertEquals(\"foo\", this.__history._readState(), \"check3\");\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n    testRequestEvent() {\n      // \"request\" event just will be fired, if a user goes back or forward in\n      // the history\n      var self = this;\n      this.__history.addListenerOnce(\"request\", () => {\n        self.resume(function () {\n          // \"request\" event has been fired\n          this.assertTrue(true);\n        }, self);\n      });\n\n      this.__history.setState(\"bar\");\n      history.back();\n      this.wait();\n    },\n\n    testRequestEventAddHistory() {\n      this.__history.addListenerOnce(\"request\", ev => {\n        this.resume(function () {\n          this.assertEquals(\"baz\", ev.getData());\n        }, this);\n      });\n\n      var self = this;\n      window.setTimeout(function () {\n        self.__history.addToHistory(\"baz\");\n      }, 250);\n\n      this.wait(500);\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}