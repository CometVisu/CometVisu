{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MRequirements",
    "MMock",
    "members",
    "__store",
    "setUp",
    "require",
    "data",
    "store",
    "Jsonp",
    "url",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "tearDown",
    "getSandbox",
    "restore",
    "dispose",
    "request",
    "model",
    "name",
    "$$registry",
    "search",
    "isLocal",
    "window",
    "location",
    "protocol",
    "setUpFakeRequest",
    "req",
    "io",
    "send",
    "stub",
    "returns",
    "testSetCallbackParam",
    "setCallbackParam",
    "setUrl",
    "assertCalledWith",
    "testSetCallbackName",
    "setCallbackName",
    "testWholePrimitive",
    "_this",
    "addListener",
    "resume",
    "getModel",
    "assertEquals",
    "getString",
    "getNumber",
    "getBoolean",
    "assertNull",
    "getNull",
    "wait",
    "testManipulatePrimitive",
    "_this2",
    "manipulated",
    "delegate",
    "manipulateData",
    "assertTrue",
    "testConfigureRequestPrimitive",
    "_this3",
    "self",
    "configureRequest",
    "assertInstance",
    "spy",
    "assertCalled",
    "testDisposeRequest",
    "testDisposeRequestDone",
    "_this4",
    "testErrorEvent",
    "_this5",
    "core",
    "Environment",
    "get",
    "test"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/test/data/store/Jsonp.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n/**\n * @ignore(qx.data.model)\n *\n * @asset(qx/test/*)\n */\n\nqx.Class.define(\"qx.test.data.store.Jsonp\", {\n  extend: qx.dev.unit.TestCase,\n\n  include: [qx.dev.unit.MRequirements, qx.dev.unit.MMock],\n\n  members: {\n    __store: null,\n\n    setUp() {\n      this.require([\"php\"]);\n      this.__store = new qx.data.store.Jsonp();\n\n      this.url = qx.util.ResourceManager.getInstance().toUri(\n        \"qx/test/jsonp_primitive.php\"\n      );\n    },\n\n    tearDown() {\n      this.getSandbox().restore();\n      this.__store.dispose();\n\n      if (this.request) {\n        // From prototype\n        delete this.request.dispose;\n\n        // Dispose\n        this.request.dispose();\n      }\n\n      // remove the former created classes\n      qx.data.model = {};\n      for (var name in qx.Class.$$registry) {\n        if (name.search(\"qx.data.model\") != -1) {\n          delete qx.Class.$$registry[name];\n        }\n      }\n    },\n\n    isLocal() {\n      return window.location.protocol == \"file:\";\n    },\n\n    setUpFakeRequest() {\n      var req = (this.request = new qx.io.request.Jsonp());\n      req.send = req.dispose = function () {};\n      this.stub(qx.io.request, \"Jsonp\").returns(this.stub(req));\n    },\n\n    testSetCallbackParam() {\n      this.setUpFakeRequest();\n\n      var store = new qx.data.store.Jsonp();\n      store.setCallbackParam(\"myCallback\");\n      store.setUrl(\"/url\");\n\n      this.assertCalledWith(this.request.setCallbackParam, \"myCallback\");\n      store.dispose();\n    },\n\n    testSetCallbackName() {\n      this.setUpFakeRequest();\n\n      var store = new qx.data.store.Jsonp();\n      store.setCallbackName(\"myCallback\");\n      store.setUrl(\"/url\");\n\n      this.assertCalledWith(this.request.setCallbackName, \"myCallback\");\n      store.dispose();\n    },\n\n    testWholePrimitive() {\n      this.__store.addListener(\"loaded\", () => {\n        this.resume(function () {\n          var model = this.__store.getModel();\n          this.assertEquals(\n            \"String\",\n            model.getString(),\n            \"The model is not created how it should!\"\n          );\n\n          this.assertEquals(\n            12,\n            model.getNumber(),\n            \"The model is not created how it should!\"\n          );\n\n          this.assertEquals(\n            true,\n            model.getBoolean(),\n            \"The model is not created how it should!\"\n          );\n\n          this.assertNull(\n            model.getNull(),\n            \"The model is not created how it should!\"\n          );\n        }, this);\n      });\n\n      var url = this.url;\n      this.__store.setUrl(url);\n\n      this.wait();\n    },\n\n    testManipulatePrimitive() {\n      var manipulated = false;\n      var delegate = {\n        manipulateData(data) {\n          manipulated = true;\n          return data;\n        }\n      };\n\n      var store = new qx.data.store.Jsonp(null, delegate, \"callback\");\n\n      store.addListener(\"loaded\", () => {\n        this.resume(function () {\n          this.assertTrue(manipulated);\n        }, this);\n      });\n\n      var url = this.url;\n      store.setUrl(url);\n\n      this.wait();\n      store.dispose();\n    },\n\n    testConfigureRequestPrimitive() {\n      var delegate,\n        self = this;\n\n      delegate = {\n        configureRequest(request) {\n          self.assertInstance(request, qx.io.request.Jsonp);\n        }\n      };\n\n      this.spy(delegate, \"configureRequest\");\n\n      var store = new qx.data.store.Jsonp(null, delegate, \"callback\");\n\n      store.addListener(\"loaded\", () => {\n        this.resume(function () {\n          this.assertCalled(delegate.configureRequest);\n        }, this);\n      });\n\n      var url = this.url;\n      store.setUrl(url);\n\n      this.wait();\n    },\n\n    testDisposeRequest() {\n      this.setUpFakeRequest();\n\n      var store = new qx.data.store.Jsonp(this.url);\n      store.dispose();\n\n      this.assertCalled(this.request.dispose);\n    },\n\n    testDisposeRequestDone() {\n      this.setUpFakeRequest();\n      var url = this.url;\n      this.__store.addListener(\"loaded\", () => {\n        this.resume(function () {\n          this.__store.dispose();\n          this.assertCalled(this.request.dispose);\n        }, this);\n      });\n\n      this.__store.setUrl(url);\n    },\n\n    testErrorEvent() {\n      // do not test that for IE and Opera because of the missing\n      // error handler for script tags\n      if (\n        !(qx.core.Environment.get(\"browser.name\") == \"ie\") &&\n        !(qx.core.Environment.get(\"browser.name\") == \"opera\")\n      ) {\n        this.__store.addListener(\"error\", () => {\n          this.resume(function () {}, this);\n        });\n\n        this.__store.setUrl(\"affe\");\n\n        this.wait();\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}