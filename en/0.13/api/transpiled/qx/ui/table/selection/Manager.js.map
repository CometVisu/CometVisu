{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "properties",
    "selectionModel",
    "check",
    "members",
    "__lastPointerDownHandled",
    "handleTap",
    "index",
    "evt",
    "isLeftPressed",
    "getSelectionModel",
    "isSelectedIndex",
    "_handleSelectEvent",
    "isRightPressed",
    "getModifiers",
    "setSelectionInterval",
    "handleSelectKeyDown",
    "handleMoveKeyDown",
    "event",
    "type",
    "Dom",
    "SHIFT_MASK",
    "anchor",
    "getAnchorSelectionIndex",
    "leadIndex",
    "getLeadSelectionIndex",
    "anchorIndex",
    "isShiftPressed",
    "isSelectionEmpty",
    "isCtrlOrCommandPressed",
    "addSelectionInterval",
    "removeSelectionInterval",
    "ui",
    "table",
    "selection",
    "Manager"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/table/selection/Manager.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2006 STZ-IDA, Germany, http://www.stz-ida.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Til Schneider (til132)\n\n************************************************************************ */\n\n/**\n * A selection manager. This is a helper class that handles all selection\n * related events and updates a SelectionModel.\n * <p>\n * Widgets that support selection should use this manager. This way the only\n * thing the widget has to do is mapping pointer or key events to indexes and\n * call the corresponding handler method.\n *\n * @see SelectionModel\n */\nqx.Class.define(\"qx.ui.table.selection.Manager\", {\n  extend: qx.core.Object,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct() {\n    super();\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /**\n     * The selection model where to set the selection changes.\n     */\n    selectionModel: {\n      check: \"qx.ui.table.selection.Model\"\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __lastPointerDownHandled: null,\n\n    /**\n     * Handles the tap event.\n     *\n     * @param index {Integer} the index the pointer is pointing at.\n     * @param evt {qx.event.type.Tap} the pointer event.\n     */\n    handleTap(index, evt) {\n      if (evt.isLeftPressed()) {\n        var selectionModel = this.getSelectionModel();\n\n        if (!selectionModel.isSelectedIndex(index)) {\n          // This index is not selected -> We react when the pointer is pressed (because of drag and drop)\n          this._handleSelectEvent(index, evt);\n          this.__lastPointerDownHandled = true;\n        } else {\n          // This index is already selected -> We react when the pointer is released (because of drag and drop)\n          this.__lastPointerDownHandled = false;\n        }\n      } else if (evt.isRightPressed() && evt.getModifiers() == 0) {\n        var selectionModel = this.getSelectionModel();\n\n        if (!selectionModel.isSelectedIndex(index)) {\n          // This index is not selected -> Set the selection to this index\n          selectionModel.setSelectionInterval(index, index);\n        }\n      }\n\n      if (evt.isLeftPressed() && !this.__lastPointerDownHandled) {\n        this._handleSelectEvent(index, evt);\n      }\n    },\n\n    /**\n     * Handles the key down event that is used as replacement for pointer taps\n     * (Normally space).\n     *\n     * @param index {Integer} the index that is currently focused.\n     * @param evt {Map} the key event.\n     */\n    handleSelectKeyDown(index, evt) {\n      this._handleSelectEvent(index, evt);\n    },\n\n    /**\n     * Handles a key down event that moved the focus (E.g. up, down, home, end, ...).\n     *\n     * @param index {Integer} the index that is currently focused.\n     * @param evt {Map} the key event.\n     */\n    handleMoveKeyDown(index, evt) {\n      var selectionModel = this.getSelectionModel();\n\n      switch (evt.getModifiers()) {\n        case 0:\n          selectionModel.setSelectionInterval(index, index);\n          break;\n\n        case qx.event.type.Dom.SHIFT_MASK:\n          var anchor = selectionModel.getAnchorSelectionIndex();\n\n          if (anchor == -1) {\n            selectionModel.setSelectionInterval(index, index);\n          } else {\n            selectionModel.setSelectionInterval(anchor, index);\n          }\n\n          break;\n      }\n    },\n\n    /**\n     * Handles a select event.\n     *\n     * @param index {Integer} the index the event is pointing at.\n     * @param evt {Map} the pointer event.\n     */\n    _handleSelectEvent(index, evt) {\n      var selectionModel = this.getSelectionModel();\n\n      var leadIndex = selectionModel.getLeadSelectionIndex();\n      var anchorIndex = selectionModel.getAnchorSelectionIndex();\n\n      if (evt.isShiftPressed()) {\n        if (index != leadIndex || selectionModel.isSelectionEmpty()) {\n          // The lead selection index was changed\n          if (anchorIndex == -1) {\n            anchorIndex = index;\n          }\n\n          if (evt.isCtrlOrCommandPressed()) {\n            selectionModel.addSelectionInterval(anchorIndex, index);\n          } else {\n            selectionModel.setSelectionInterval(anchorIndex, index);\n          }\n        }\n      } else if (evt.isCtrlOrCommandPressed()) {\n        if (selectionModel.isSelectedIndex(index)) {\n          selectionModel.removeSelectionInterval(index, index);\n        } else {\n          selectionModel.addSelectionInterval(index, index);\n        }\n      } else {\n        // setSelectionInterval checks to see if the change is really necessary\n        selectionModel.setSelectionInterval(index, index);\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}