{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "constructor",
    "call",
    "properties",
    "selectionModel",
    "check",
    "members",
    "__lastPointerDownHandled",
    "handleTap",
    "index",
    "evt",
    "isLeftPressed",
    "getSelectionModel",
    "isSelectedIndex",
    "_handleSelectEvent",
    "isRightPressed",
    "getModifiers",
    "setSelectionInterval",
    "handleSelectKeyDown",
    "handleMoveKeyDown",
    "event",
    "type",
    "Dom",
    "SHIFT_MASK",
    "anchor",
    "getAnchorSelectionIndex",
    "leadIndex",
    "getLeadSelectionIndex",
    "anchorIndex",
    "isShiftPressed",
    "isSelectionEmpty",
    "isCtrlOrCommandPressed",
    "addSelectionInterval",
    "removeSelectionInterval",
    "ui",
    "table",
    "selection",
    "Manager"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/table/selection/Manager.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2006 STZ-IDA, Germany, http://www.stz-ida.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Til Schneider (til132)\n\n************************************************************************ */\n\n/**\n * A selection manager. This is a helper class that handles all selection\n * related events and updates a SelectionModel.\n * <p>\n * Widgets that support selection should use this manager. This way the only\n * thing the widget has to do is mapping pointer or key events to indexes and\n * call the corresponding handler method.\n *\n * @see SelectionModel\n */\nqx.Class.define(\"qx.ui.table.selection.Manager\", {\n  extend: qx.core.Object,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct() {\n    super();\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /**\n     * The selection model where to set the selection changes.\n     */\n    selectionModel: {\n      check: \"qx.ui.table.selection.Model\"\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __lastPointerDownHandled: null,\n\n    /**\n     * Handles the tap event.\n     *\n     * @param index {Integer} the index the pointer is pointing at.\n     * @param evt {qx.event.type.Tap} the pointer event.\n     */\n    handleTap(index, evt) {\n      if (evt.isLeftPressed()) {\n        var selectionModel = this.getSelectionModel();\n\n        if (!selectionModel.isSelectedIndex(index)) {\n          // This index is not selected -> We react when the pointer is pressed (because of drag and drop)\n          this._handleSelectEvent(index, evt);\n          this.__lastPointerDownHandled = true;\n        } else {\n          // This index is already selected -> We react when the pointer is released (because of drag and drop)\n          this.__lastPointerDownHandled = false;\n        }\n      } else if (evt.isRightPressed() && evt.getModifiers() == 0) {\n        var selectionModel = this.getSelectionModel();\n\n        if (!selectionModel.isSelectedIndex(index)) {\n          // This index is not selected -> Set the selection to this index\n          selectionModel.setSelectionInterval(index, index);\n        }\n      }\n\n      if (evt.isLeftPressed() && !this.__lastPointerDownHandled) {\n        this._handleSelectEvent(index, evt);\n      }\n    },\n\n    /**\n     * Handles the key down event that is used as replacement for pointer taps\n     * (Normally space).\n     *\n     * @param index {Integer} the index that is currently focused.\n     * @param evt {Map} the key event.\n     */\n    handleSelectKeyDown(index, evt) {\n      this._handleSelectEvent(index, evt);\n    },\n\n    /**\n     * Handles a key down event that moved the focus (E.g. up, down, home, end, ...).\n     *\n     * @param index {Integer} the index that is currently focused.\n     * @param evt {Map} the key event.\n     */\n    handleMoveKeyDown(index, evt) {\n      var selectionModel = this.getSelectionModel();\n\n      switch (evt.getModifiers()) {\n        case 0:\n          selectionModel.setSelectionInterval(index, index);\n          break;\n\n        case qx.event.type.Dom.SHIFT_MASK:\n          var anchor = selectionModel.getAnchorSelectionIndex();\n\n          if (anchor == -1) {\n            selectionModel.setSelectionInterval(index, index);\n          } else {\n            selectionModel.setSelectionInterval(anchor, index);\n          }\n\n          break;\n      }\n    },\n\n    /**\n     * Handles a select event.\n     *\n     * @param index {Integer} the index the event is pointing at.\n     * @param evt {Map} the pointer event.\n     */\n    _handleSelectEvent(index, evt) {\n      var selectionModel = this.getSelectionModel();\n\n      var leadIndex = selectionModel.getLeadSelectionIndex();\n      var anchorIndex = selectionModel.getAnchorSelectionIndex();\n\n      if (evt.isShiftPressed()) {\n        if (index != leadIndex || selectionModel.isSelectionEmpty()) {\n          // The lead selection index was changed\n          if (anchorIndex == -1) {\n            anchorIndex = index;\n          }\n\n          if (evt.isCtrlOrCommandPressed()) {\n            selectionModel.addSelectionInterval(anchorIndex, index);\n          } else {\n            selectionModel.setSelectionInterval(anchorIndex, index);\n          }\n        }\n      } else if (evt.isCtrlOrCommandPressed()) {\n        if (selectionModel.isSelectedIndex(index)) {\n          selectionModel.removeSelectionInterval(index, index);\n        } else {\n          selectionModel.addSelectionInterval(index, index);\n        }\n      } else {\n        // setSelectionInterval checks to see if the change is really necessary\n        selectionModel.setSelectionInterval(index, index);\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}