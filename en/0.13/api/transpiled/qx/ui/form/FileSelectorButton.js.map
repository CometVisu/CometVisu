{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "form",
    "Button",
    "statics",
    "_fileInputElementIdCounter",
    "events",
    "changeFileSelection",
    "properties",
    "accept",
    "nullable",
    "check",
    "apply",
    "capture",
    "multiple",
    "directoriesOnly",
    "members",
    "__inputObject",
    "_applyAttribute",
    "value",
    "old",
    "attr",
    "setAttribute",
    "setEnabled",
    "_createContentElement",
    "id",
    "FileSelectorButton",
    "input",
    "html",
    "Input",
    "label",
    "Element",
    "addListenerOnce",
    "e",
    "add",
    "inputEl",
    "getDomElement",
    "setVisible",
    "addEventListener",
    "fireDataEvent",
    "files"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/form/FileSelectorButton.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo\n\n   https://qooxdoo.org\n\n   Copyright:\n     2022 OETIKER+PARTNER AG\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tobias Oetiker (oetiker)\n\n************************************************************************ */\n\n/**\n * The FileSelectorButton opens a window and lets the user pick one or several\n * files from the local filesystem. A FileList is returned which allows access\n * to the content of the selected files from javascript. The file(s) can now be\n *  processed in javascript, or it/they can be uploaded to a server.\n *\n * *Example*\n *\n * Post the content of the file to the server.\n *\n * ```javascript\n * let button = new qx.ui.form.FileSelectorButton(\"Select File\");\n * button.addListener('changeFileSelection',function(e){\n * let fileList = e.getData();\n *   let form = new FormData();\n *   form.append('file',fileList[0]);\n *   let req = new qx.io.request.Xhr(\"upload\",'POST').set({\n *     requestData: form\n *   });\n *   req.addListener('success',(e) => {\n *     let response = req.getResponse();\n *   });\n * });\n * ```\n *\n * Process the file directly in javascript using the FileReader API.\n *\n * ```javascript\n * let button = new qx.ui.form.FileSelectorButton(\"Select File\");\n * button.addListener('changeFileSelection',function(e){\n *   let fileList = e.getData();\n *   const reader = new FileReader();\n *   reader.addEventListener('load', () => {\n *     let response = reader.result;\n *     console.log(\"The first 4 chrs are: \" + response);\n *   });\n *   const file = fileList[0];\n *   reader.readAsText(file.slice(0,4));\n * });\n * ```\n *\n * [MDN Documentation](https://developer.mozilla.org/en-US/docs/Web/API/File_API/Using_files_from_web_applications)\n */\n\nqx.Class.define(\"qx.ui.form.FileSelectorButton\", {\n  extend: qx.ui.form.Button,\n\n  statics: {\n    _fileInputElementIdCounter: 0\n  },\n\n  events: {\n    /**\n     * The event is fired when the file selection changes.\n     *\n     * The method {@link qx.event.type.Data#getData} returns the\n     * current [fileList](https://developer.mozilla.org/en-US/docs/Web/API/FileList)\n     */\n    changeFileSelection: \"qx.event.type.Data\"\n  },\n\n  properties: {\n    /**\n     * What type of files should be offered in the fileselection dialog.\n     * Use a comma separated list of [Unique file type specifiers](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers). If you dont set anything, all files\n     * are allowed.\n     *\n     * *Example*\n     *\n     * `.doc,.docx,application/msword`\n     */\n    accept: {\n      nullable: true,\n      check: \"String\",\n      apply: \"_applyAttribute\"\n    },\n\n    /**\n     * Specify that the camera should be used for getting the \"file\". The\n     * value defines which camera should be used for capturing images.\n     * `user` indicates the user-facing camera.\n     * `environment` indicates the camera facing away from the user.\n     */\n    capture: {\n      nullable: true,\n      check: [\"user\", \"environment\"],\n      apply: \"_applyAttribute\"\n    },\n\n    /**\n     * Set to \"true\" if you want to allow the selection of multiple files.\n     */\n    multiple: {\n      nullable: true,\n      check: \"Boolean\",\n      apply: \"_applyAttribute\"\n    },\n\n    /**\n     * If present, indicates that only directories should be available for\n     * selection.\n     */\n    directoriesOnly: {\n      nullable: true,\n      check: \"Boolean\",\n      apply: \"_applyAttribute\"\n    }\n  },\n\n  members: {\n    __inputObject: null,\n\n    _applyAttribute(value, old, attr) {\n      if (attr === \"directoriesOnly\") {\n        // while the name of the attribute indicates that this only\n        // works for webkit browsers, this is not the case. These\n        // days the attribute is supported by\n        // [everyone](https://caniuse.com/?search=webkitdirectory).\n        attr = \"webkitdirectory\";\n      }\n      this.__inputObject.setAttribute(attr, value);\n    },\n\n    setEnabled(value){\n      this.__inputObject.setEnabled(value);\n      super.setEnabled(value);\n    },\n\n    _createContentElement() {\n      let id = \"qxFileSelector_\" + (++qx.ui.form.FileSelectorButton._fileInputElementIdCounter);\n      let input = (this.__inputObject = new qx.html.Input(\n        \"file\",\n        null,\n        { id: id }\n      ));\n\n      let label = new qx.html.Element(\"label\", {}, { for: id });\n      label.addListenerOnce(\"appear\", e => {\n        label.add(input);\n      });\n\n      input.addListenerOnce(\"appear\", e => {\n        let inputEl = input.getDomElement();\n        // since qx.html.Node does not even create the\n        // domNode if it is not set to visible initially\n        // we have to quickly hide it after creation.\n        input.setVisible(false);\n        inputEl.addEventListener(\"change\", e => {\n          this.fireDataEvent(\"changeFileSelection\", inputEl.files);\n          inputEl.value = \"\";\n        });\n      });\n      return label;\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}