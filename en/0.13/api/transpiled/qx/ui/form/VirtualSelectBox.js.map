{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/form/VirtualSelectBox.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "form",
    "core",
    "AbstractVirtualBox",
    "implement",
    "data",
    "controller",
    "ISelection",
    "IField",
    "construct",
    "model",
    "_createChildControl",
    "addListener",
    "_onPointerOver",
    "_onPointerOut",
    "__bindings",
    "initSelection",
    "getChildControl",
    "getSelection",
    "__searchTimer",
    "event",
    "Timer",
    "__preselect",
    "_updateSelectionValue",
    "isIncrementalSearch",
    "__initIncrementalSearch",
    "initHtmlMarkers",
    "__getHighlightStyleFromAppearance",
    "properties",
    "appearance",
    "refine",
    "init",
    "width",
    "incrementalSearch",
    "apply",
    "check",
    "plainMarkers",
    "htmlMarkers",
    "deferredInit",
    "rich",
    "highlightMode",
    "selection",
    "nullable",
    "events",
    "members",
    "__searchValue",
    "setValue",
    "selected",
    "removeAll",
    "setItem",
    "getValue",
    "s",
    "length",
    "getItem",
    "resetValue",
    "syncWidget",
    "jobs",
    "_removeBindings",
    "_addBindings",
    "_createChildControlImpl",
    "id",
    "hash",
    "control",
    "Spacer",
    "_add",
    "flex",
    "ListItem",
    "setCenter",
    "setAnonymous",
    "basic",
    "Image",
    "_getAction",
    "keyIdentifier",
    "getKeyIdentifier",
    "isOpen",
    "isVisible",
    "isModifierPressed",
    "_isModifierPressed",
    "isPrintable",
    "atom",
    "modelPath",
    "_getBindPath",
    "bind",
    "push",
    "labelSourcePath",
    "getLabelPath",
    "getLabelOptions",
    "getIconPath",
    "iconSourcePath",
    "getIconOptions",
    "pop",
    "removeBinding",
    "_onBlur",
    "close",
    "_handlePointer",
    "type",
    "getType",
    "toggle",
    "_handleKeyboard",
    "action",
    "__convertKeyIdentifier",
    "restart",
    "isEnabled",
    "getTarget",
    "hasState",
    "removeState",
    "addState",
    "_applySelection",
    "value",
    "old",
    "setSelection",
    "queue",
    "Widget",
    "add",
    "stop",
    "searchValue",
    "getModel",
    "list",
    "_getLookupTable",
    "startIndex",
    "indexOf",
    "startRow",
    "_reverseLookup",
    "i",
    "row",
    "item",
    "_lookup",
    "SingleValueBinding",
    "resolvePropertyChain",
    "labelOptions",
    "converter",
    "util",
    "Delegate",
    "getMethod",
    "toLowerCase",
    "startsWith",
    "d",
    "getData",
    "removed",
    "fireDataEvent",
    "added",
    "__filterValue",
    "__lastMatch",
    "__filterUpdateRunning",
    "__filterInput",
    "__highlightMarkers",
    "_highlightFilterValueFunction",
    "_searchRegExp",
    "__addFilterInput",
    "input",
    "TextField",
    "set",
    "liveUpdate",
    "height",
    "getContentElement",
    "setAttribute",
    "dropdown",
    "window",
    "setTimeout",
    "focus",
    "blur",
    "sel",
    "e",
    "__updateDelegate",
    "highlightAppearance",
    "theme",
    "manager",
    "Appearance",
    "getInstance",
    "styleFrom",
    "debug",
    "backgroundColor",
    "textDecorationStyle",
    "textDecorationLine",
    "highlightStyle",
    "styles",
    "keys",
    "Object",
    "k",
    "key",
    "module",
    "String",
    "hyphenate",
    "join",
    "_searchMatch",
    "filterValue",
    "match",
    "_highlightFilterValuePlainFunction",
    "parts",
    "_highlightFilterValueHtmlFunction",
    "escapeHtml",
    "_configureItemRich",
    "setRich",
    "_configureItemPlain",
    "lastFilterValue",
    "undefined",
    "filterValueEscaped",
    "escapeRegexpChars",
    "RegExp",
    "that",
    "delegate",
    "filter",
    "isRich",
    "configureItem",
    "setDelegate",
    "len",
    "last",
    "charAt",
    "source",
    "target",
    "setLabelOptions",
    "_applyDelegate",
    "_applyRich",
    "getHighlightMode",
    "configureItemFunction",
    "_applyHighlightMode",
    "getHtmlMarkers",
    "getPlainMarkers",
    "__applyMarkers",
    "_applyIncrementalSearch",
    "setEnabled",
    "destruct",
    "removeListener",
    "dispose",
    "VirtualSelectBox"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christian Hagendorn (chris_schmidt)\n\n************************************************************************ */\n\n/**\n * A form virtual widget which allows a single selection. Looks somewhat like\n * a normal button, but opens a virtual list of items to select when tapping\n * on it.\n *\n * @childControl spacer {qx.ui.core.Spacer} Flexible spacer widget.\n * @childControl atom {qx.ui.basic.Atom} Shows the text and icon of the content.\n * @childControl arrow {qx.ui.basic.Image} Shows the arrow to open the drop-down list.\n *\n * Item labels are plain text by default. Property <code>rich</code> can be used\n * to enable HTML formatting.\n *\n * Incremental search can be enabled by setting property <code>incrementalSearch</code>\n * to <code>true</code>. Highlightung of the search string is controlled by property\n * <code>highlightMode</code>. BEWARE that html highlighting sets property <code>rich</code>\n * automatically to <code>true</code>.\n *\n * With <code>highlightMode=='html'</code> item label parts and search value are all HTML-escaped.\n * If HTML-formatted item labels are used, this might lead to unexpected or undesirable (but save)\n * results. In this case you might want to override the various protected methods involved.\n *\n */\nqx.Class.define(\"qx.ui.form.VirtualSelectBox\",\n{\n  extend : qx.ui.form.core.AbstractVirtualBox,\n  implement : [ qx.data.controller.ISelection, qx.ui.form.IField ],\n\n  construct : function(model)\n  {\n    this.base(arguments, model);\n\n    this._createChildControl(\"atom\");\n    this._createChildControl(\"spacer\");\n    this._createChildControl(\"arrow\");\n\n    // Register listener\n    this.addListener(\"pointerover\", this._onPointerOver, this);\n    this.addListener(\"pointerout\", this._onPointerOut, this);\n\n    this.__bindings = [];\n    this.initSelection(this.getChildControl(\"dropdown\").getSelection());\n\n    this.__searchTimer = new qx.event.Timer(500);\n    this.__searchTimer.addListener(\"interval\", this.__preselect, this);\n\n    this.getSelection().addListener(\"change\", this._updateSelectionValue, this);\n\n    if (this.isIncrementalSearch()) {\n      this.__initIncrementalSearch();\n    }\n\n    this.initHtmlMarkers([\n      '<span style=\"' + this.__getHighlightStyleFromAppearance() + '\">',\n      '</span>'\n    ]);\n  },\n\n\n  properties :\n  {\n    // overridden\n    appearance :\n    {\n      refine : true,\n      init : \"virtual-selectbox\"\n    },\n\n\n    // overridden\n    width :\n    {\n      refine : true,\n      init : 120\n    },\n\n    /**\n     * Whether or not to use incremental search.\n     */\n    incrementalSearch :\n    {\n      apply : '_applyIncrementalSearch',\n      init : false,\n      check : \"Boolean\"\n    },\n\n    /**\n     * Array of non-HTML strings for opening an closing marker for incremental search highlighting\n     */\n    plainMarkers :\n    {\n      apply : '__applyMarkers',\n      init : [ '|', '|' ],\n      check : \"Array\"\n    },\n\n    /**\n     * Array of HTML strings for opening an closing marker for incremental search highlighting.\n     * Initialized from 'list-search-highlight' theme if not set explicitly.\n     */\n    htmlMarkers :\n    {\n      apply : '__applyMarkers',\n      deferredInit : true,\n      check : \"Array\"\n    },\n\n    /**\n     * Setting rich to true sets both the select box atom and the list items to rich.\n     */\n    rich :\n    {\n      apply : '_applyRich',\n      init : null,\n      check : \"Boolean\"\n    },\n\n    /**\n     * Define how to highlight the incremental search string.\n     *\n     * none: no highlighting (this is the default)\n     * plain: use characters from plainMarkers property\n     * html: use HTML for highlighting; this automatically calls <code>this.setRich(true)</code> and thus sets item labels to rich as well.\n     *\n     */\n    highlightMode :\n    {\n      apply : '_applyHighlightMode',\n      init  : \"none\",\n      check : [ \"plain\", \"html\", \"none\" ]\n    },\n\n    /** Current selected items. */\n    selection :\n    {\n      check : \"qx.data.Array\",\n      event : \"changeSelection\",\n      apply : \"_applySelection\",\n      nullable : false,\n      deferredInit : true\n    }\n  },\n\n\n  events : {\n    /**\n     * This event is fired as soon as the content of the selection property changes, but\n     * this is not equal to the change of the selection of the widget. If the selection\n     * of the widget changes, the content of the array stored in the selection property\n     * changes. This means you have to listen to the change event of the selection array\n     * to get an event as soon as the user changes the selected item.\n     * <pre class=\"javascript\">obj.getSelection().addListener(\"change\", listener, this);</pre>\n     */\n    \"changeSelection\" : \"qx.event.type.Data\",\n\n    /** Fires after the value was modified */\n    \"changeValue\" : \"qx.event.type.Data\"\n  },\n\n\n  members :\n  {\n    /** @type {String} The search value to {@link #__preselect} an item. */\n    __searchValue : \"\",\n\n\n    /**\n     * @type {qx.event.Timer} The time which triggers the search for pre-selection.\n     */\n    __searchTimer : null,\n\n\n    /** @type {Array} Contains the id from all bindings. */\n    __bindings : null,\n\n\n    /**\n     * @param selected {var|null} Item to select as value.\n     * @returns {null|TypeError} The status of this operation.\n     */\n    setValue : function(selected) {\n      if (null === selected) {\n        this.getSelection().removeAll();\n        return null;\n      }\n\n      this.getSelection().setItem(0, selected);\n      return null;\n    },\n\n\n    /**\n     * @returns {null|var} The currently selected item or null if there is none.\n     */\n    getValue : function() {\n      var s = this.getSelection();\n      return (s.length === 0 ? null : s.getItem(0));\n    },\n\n\n    resetValue : function() {\n      this.setValue(null);\n    },\n\n\n    // overridden\n    syncWidget : function(jobs)\n    {\n      this._removeBindings();\n      this._addBindings();\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      INTERNAl API\n    ---------------------------------------------------------------------------\n    */\n\n\n    // overridden\n    _createChildControlImpl : function(id, hash)\n    {\n      var control;\n\n      switch(id)\n      {\n        case \"spacer\":\n          control = new qx.ui.core.Spacer();\n\n          this._add(control, {flex: 1});\n          break;\n\n        case \"atom\":\n          control = new qx.ui.form.ListItem(\"\");\n          control.setCenter(false);\n          control.setAnonymous(true);\n\n          this._add(control, {flex:1});\n          break;\n\n        case \"arrow\":\n          control = new qx.ui.basic.Image();\n          control.setAnonymous(true);\n\n          this._add(control);\n          break;\n      }\n\n      return control || this.base(arguments, id, hash);\n    },\n\n\n    // overridden\n    _getAction : function(event)\n    {\n      var keyIdentifier = event.getKeyIdentifier();\n      var isOpen = this.getChildControl(\"dropdown\").isVisible();\n      var isModifierPressed = this._isModifierPressed(event);\n\n      if (\n        !isOpen && !isModifierPressed &&\n        (keyIdentifier === \"Enter\" || keyIdentifier === \"Space\")\n      ) {\n        return \"open\";\n      } else if (isOpen && event.isPrintable()) {\n        return \"search\";\n      } else {\n        return this.base(arguments, event);\n      }\n    },\n\n    /**\n     * This method is called when the binding can be added to the\n     * widget. For e.q. bind the drop-down selection with the widget.\n     */\n    _addBindings : function()\n    {\n      var atom = this.getChildControl(\"atom\");\n\n      var modelPath = this._getBindPath(\"selection\", \"\");\n      var id = this.bind(modelPath, atom, \"model\", null);\n      this.__bindings.push(id);\n\n      var labelSourcePath = this._getBindPath(\"selection\", this.getLabelPath());\n      id = this.bind(labelSourcePath, atom, \"label\", this.getLabelOptions());\n      this.__bindings.push(id);\n\n      if (this.getIconPath() != null) {\n        var iconSourcePath = this._getBindPath(\"selection\", this.getIconPath());\n        id = this.bind(iconSourcePath, atom, \"icon\", this.getIconOptions());\n        this.__bindings.push(id);\n      }\n    },\n\n\n    /**\n     * This method is called when the binding can be removed from the\n     * widget. For e.q. remove the bound drop-down selection.\n     */\n    _removeBindings : function()\n    {\n      while (this.__bindings.length > 0)\n      {\n        var id = this.__bindings.pop();\n        this.removeBinding(id);\n      }\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT LISTENERS\n    ---------------------------------------------------------------------------\n    */\n\n    _onBlur: function()\n    {\n      if (! this.isIncrementalSearch()) {\n        this.close();\n      }\n    },\n\n    // overridden\n    _handlePointer : function(event)\n    {\n      this.base(arguments, event);\n\n      var type = event.getType();\n      if (type === \"tap\") {\n        this.toggle();\n      }\n    },\n\n\n    // overridden\n    _handleKeyboard : function(event) {\n      var action = this._getAction(event);\n\n      switch(action)\n      {\n        case \"search\":\n          if (!this.isIncrementalSearch()) {\n            this.__searchValue += this.__convertKeyIdentifier(event.getKeyIdentifier());\n            this.__searchTimer.restart();\n          }\n          break;\n\n        default:\n          this.base(arguments, event);\n          break;\n      }\n    },\n\n\n    /**\n     * Listener method for \"pointerover\" event.\n     *\n     * <ul>\n     * <li>Adds state \"hovered\"</li>\n     * <li>Removes \"abandoned\" and adds \"pressed\" state (if \"abandoned\" state\n     *   is set)</li>\n     * </ul>\n     *\n     * @param event {qx.event.type.Pointer} Pointer event\n     */\n    _onPointerOver : function(event)\n    {\n      if (!this.isEnabled() || event.getTarget() !== this) {\n        return;\n      }\n\n      if (this.hasState(\"abandoned\"))\n      {\n        this.removeState(\"abandoned\");\n        this.addState(\"pressed\");\n      }\n\n      this.addState(\"hovered\");\n    },\n\n\n    /**\n     * Listener method for \"pointerout\" event.\n     *\n     * <ul>\n     * <li>Removes \"hovered\" state</li>\n     * <li>Adds \"abandoned\" and removes \"pressed\" state (if \"pressed\" state\n     *   is set)</li>\n     * </ul>\n     *\n     * @param event {qx.event.type.Pointer} Pointer event\n     */\n    _onPointerOut : function(event)\n    {\n      if (!this.isEnabled() || event.getTarget() !== this) {\n        return;\n      }\n\n      this.removeState(\"hovered\");\n\n      if (this.hasState(\"pressed\"))\n      {\n        this.removeState(\"pressed\");\n        this.addState(\"abandoned\");\n      }\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      APPLY ROUTINES\n    ---------------------------------------------------------------------------\n    */\n\n\n    // property apply\n    _applySelection : function(value, old)\n    {\n      this.getChildControl(\"dropdown\").setSelection(value);\n      qx.ui.core.queue.Widget.add(this);\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      HELPER METHODS\n    ---------------------------------------------------------------------------\n    */\n\n\n    /**\n     * Preselects an item in the drop-down, when item starts with the\n     * __searchValue value.\n     */\n    __preselect : function()\n    {\n      this.__searchTimer.stop();\n\n      var searchValue = this.__searchValue;\n      if (searchValue === null || searchValue === \"\") {\n        return;\n      }\n\n      var model = this.getModel();\n      var list = this.getChildControl(\"dropdown\").getChildControl(\"list\");\n      var selection = list.getSelection();\n      var length = list._getLookupTable().length;\n      var startIndex = model.indexOf(selection.getItem(0));\n      var startRow = list._reverseLookup(startIndex);\n\n      for (var i = 1; i <= length; i++)\n      {\n        var row = (i + startRow) % length;\n        var item = model.getItem(list._lookup(row));\n        if (!item) {\n          // group items aren't in the model\n          continue;\n        }\n        var value = item;\n\n        if (this.getLabelPath())\n        {\n          value = qx.data.SingleValueBinding.resolvePropertyChain(item,\n            this.getLabelPath());\n\n          var labelOptions = this.getLabelOptions();\n          if (labelOptions)\n          {\n            var converter = qx.util.Delegate.getMethod(labelOptions,\n              \"converter\");\n\n            if (converter) {\n              value = converter(value, item);\n            }\n          }\n        }\n\n        if ( value.toLowerCase().startsWith(searchValue.toLowerCase()) )\n        {\n          selection.push(item);\n          break;\n        }\n      }\n      this.__searchValue = \"\";\n    },\n\n\n    /**\n     * Converts the keyIdentifier to a printable character e.q. <code>\"Space\"</code>\n     * to <code>\" \"</code>.\n     *\n     * @param keyIdentifier {String} The keyIdentifier to convert.\n     * @return {String} The converted keyIdentifier.\n     */\n    __convertKeyIdentifier : function(keyIdentifier)\n    {\n      if (keyIdentifier === \"Space\") {\n        return \" \";\n      } else {\n        return keyIdentifier;\n      }\n    },\n\n\n    /**\n     * Called when selection changes.\n     *\n     * @param event {qx.event.type.Data} {@link qx.data.Array} change event.\n     */\n    _updateSelectionValue : function(event) {\n      var d = event.getData();\n      var old = (d.removed.length ? d.removed[0] : null);\n      this.fireDataEvent(\"changeValue\", d.added[0], old);\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      INCREMENTAL SEARCH\n    ---------------------------------------------------------------------------\n    */\n\n    __filterValue : null,\n    __lastMatch : '',\n    // prevent recursion problems when deleting unsucessful filtering\n    __filterUpdateRunning : 0,\n    __filterInput : null,\n    __highlightMarkers  : null,\n\n    _highlightFilterValueFunction : null,\n    _searchRegExp : null,\n\n\n    __addFilterInput : function()\n    {\n      var input = this.__filterInput = new qx.ui.form.TextField().set({\n        appearance : 'widget',\n        liveUpdate : true,\n        height     : 0,\n        width      : 1 // must be > 0\n      });\n      // we don't want the browser to set this\n      // works with Chrome even\n      input.getContentElement().setAttribute('autocomplete', 'new-password');\n      this._add(input);\n\n      var dropdown = this.getChildControl(\"dropdown\");\n      dropdown.addListener('appear', function() {\n        // we must delay so that the focus is only set once the list is ready\n        window.setTimeout(function() {\n          input.focus();\n        }, 0);\n      }, this);\n      dropdown.addListener('disappear', function() {\n        input.blur();\n        // clear filter\n        var sel = this.getValue();\n        input.resetValue();\n        this.setValue(sel);\n      }, this);\n\n      input.addListener(\"blur\", function(e) {\n        this.close();\n      }, this);\n\n      input.addListener('changeValue', function(e) {\n        if (this.__filterUpdateRunning === 0) {\n          this.__updateDelegate();\n        }\n      }, this);\n\n    },\n\n    __getHighlightStyleFromAppearance : function()\n    {\n      var highlightAppearance =\n        qx.theme.manager.Appearance.getInstance().styleFrom(\"list-search-highlight\");\n      // default style        \n      if (!highlightAppearance) {\n        this.debug('The current theme is missing the \"list-search-highlight\" appearance setting, using default.');\n        highlightAppearance = {\n          backgroundColor: 'rgba(255, 251, 0, 0.53)',\n          textDecorationStyle: 'dotted',\n          textDecorationLine: 'underline'\n        };\n      }\n      var highlightStyle = '', styles = [];\n      var keys = Object.keys(highlightAppearance);\n      for (var k=0; k< keys.length; k++) {\n        var key = qx.module.util.String.hyphenate(keys[k]);\n        styles.push(key + ':' + highlightAppearance[keys[k]]);\n      }\n      highlightStyle = styles.join(';') + ';';\n      return highlightStyle;\n    },\n\n    // filterValue is passed below to allow usage in overridden _searchMatch\n    // we use _searchRegExp here for efficiency\n    _searchMatch : function(item, filterValue) {\n      return item.match(this._searchRegExp);\n    },\n\n    // highlight plain\n    _highlightFilterValuePlainFunction : function(parts)\n    {\n      // the array elements will contain '' if empty\n      return parts[1]\n           + this.__highlightMarkers[0]\n           + parts[2]\n           + this.__highlightMarkers[1]\n           + parts[3];\n    },\n\n    // htmlEscape all label parts\n    _highlightFilterValueHtmlFunction : function(parts)\n    {\n      // the array elements will contain '' if empty\n      // the markers will be HTML strings\n      return qx.module.util.String.escapeHtml(parts[1])\n           + this.__highlightMarkers[0]\n           + qx.module.util.String.escapeHtml(parts[2])\n           + this.__highlightMarkers[1]\n           + qx.module.util.String.escapeHtml(parts[3]);\n    },\n\n    _configureItemRich : function(item) {\n      item.setRich(true);\n    },\n\n    _configureItemPlain : function(item) {\n      item.setRich(false);\n    },\n\n    __updateDelegate : function(lastFilterValue)\n    {\n      this.__filterUpdateRunning++;\n      var filterValue = (lastFilterValue !== undefined) ? lastFilterValue : this.__filterInput.getValue();\n      this.__filterValue = filterValue;\n\n      // _searchRegExp is used in default _searchMatch function to avoid recreation of regexp object\n      // for each list item\n      var filterValueEscaped = (filterValue != null) ? qx.module.util.String.escapeRegexpChars(filterValue) : '';\n      this._searchRegExp = new RegExp('(.*?)(' + filterValueEscaped + ')(.*)', 'i');\n\n      // create and apply new filter\n      var that = this;\n      var delegate = {\n        filter : function(item) {\n          if (that.getLabelPath() != null)\n          {\n            item = qx.data.SingleValueBinding.resolvePropertyChain(item, that.getLabelPath());\n          }\n          // we pass filterValue in case _searchMatch() is overridden and wants to use it.\n          return that._searchMatch(item, filterValue);\n        }\n      };\n      // needed for newly created items on filterValue backspacing\n      if (this.isRich()) {\n        delegate.configureItem = this._configureItemRich;\n      }\n      this.setDelegate(delegate);\n\n      // update selection if there is at least one item left,\n      // otherwise shorten filterValue and re-run filtering\n      // This deals with multi-char input like for ü on MacOS where\n      // where this is entered as option-: followed by u on a keyboard\n      // without a separat key for it.\n      var item = this.getModel().getItem(this.getChildControl('dropdown').getChildControl('list')._lookup(0));\n      if (item) {\n        this.__lastMatch = filterValue;\n        this.getSelection().setItem(0, item);\n      }\n      else {\n        var len  = filterValue.length;\n        var last = ( len > this.__lastMatch.length+1) ? this.__filterInput.getValue().charAt(len-1) : '';\n        filterValue = this.__lastMatch + last;\n        this.__updateDelegate(filterValue);\n      }\n      // make sure length of dropdown is updated\n      this.__filterUpdateRunning--;\n    },\n\n    __initIncrementalSearch : function()\n    {\n      // add search input field\n      this.__addFilterInput();\n\n      // set label converter\n      var that = this;\n      var labelOptions = this.getLabelOptions() || {};\n      labelOptions.converter = function(data, model, source, target) {\n        var filterValue = that.__filterValue;\n        if (filterValue && data && that._highlightFilterValueFunction) {\n          var match = that._searchMatch(data, filterValue);\n          if (match) {\n              data = that._highlightFilterValueFunction(match);\n          }\n        }\n        if (data === undefined) {\n          data = '';\n        }\n        return data;\n      };\n      this.setLabelOptions(labelOptions);\n    },\n\n    _applyDelegate : function(value, old)\n    {\n      // we assume that if the user sets configureItem himself\n      // he keeps this consistent with rich\n      if (this.isRich() && ! value.configureItem) {\n        value.configureItem = this._configureItemRich;\n      }\n      this.base(arguments, value, old);\n    },\n\n    _applyRich : function(value, old)\n    {\n      if (!value && this.getHighlightMode() == 'html') {\n        this.debug('highlightMode html requires rich==true, ignoring setting it to false');\n        return;\n      }\n      this.getChildControl('atom').setRich(value);\n      var configureItemFunction = value ? this._configureItemRich : this._configureItemPlain;\n      this.setDelegate({\n        configureItem : configureItemFunction\n      });\n    },\n\n    _applyHighlightMode : function(value, old)\n    {\n      switch(value) {\n      case 'html':\n        // set rich item labels\n        this.setRich(true);\n        this._highlightFilterValueFunction = this._highlightFilterValueHtmlFunction;\n        this.__highlightMarkers = this.getHtmlMarkers();\n        break;\n      case 'plain':\n        this._highlightFilterValueFunction = this._highlightFilterValuePlainFunction;\n        this.__highlightMarkers = this.getPlainMarkers();\n        break;\n      default:\n        this._highlightFilterValueFunction = null;\n        break;\n      }\n    },\n\n    __applyMarkers : function(value, old)\n    {\n      this.__highlightMarkers = value;\n\n      // make sure we have strings for both markers\n      if (value.length < 1) {\n        this.__highlightMarkers[0] = '';\n      }\n      // this most likely won't work for HTML highlighting\n      if (value.length < 2) {\n        this.__highlightMarkers[1] = this.__highlightMarkers[0];\n      }\n    },\n\n    _applyIncrementalSearch : function(value, old)\n    {\n      if (value) {\n        this.__searchTimer.stop();\n        this.__searchTimer.setEnabled(false);\n        this.__initIncrementalSearch();\n      }\n      else {\n        this.__searchTimer.setEnabled(true);\n      }\n    }\n  },\n\n\n  destruct : function()\n  {\n    this._removeBindings();\n\n    this.getSelection().removeListener(\"change\", this._updateSelectionValue, this);\n\n    this.__searchTimer.removeListener(\"interval\", this.__preselect, this);\n    this.__searchTimer.dispose();\n    this.__searchTimer = null;\n  }\n});\n"
  ]
}