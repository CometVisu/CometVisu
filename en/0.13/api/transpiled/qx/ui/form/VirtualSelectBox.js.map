{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "form",
    "core",
    "AbstractVirtualBox",
    "implement",
    "data",
    "controller",
    "ISelection",
    "IField",
    "construct",
    "model",
    "constructor",
    "call",
    "_createChildControl",
    "addListener",
    "_onPointerOver",
    "_onPointerOut",
    "__bindings",
    "initSelection",
    "getChildControl",
    "getSelection",
    "__searchTimer",
    "event",
    "Timer",
    "__preselect",
    "_updateSelectionValue",
    "isIncrementalSearch",
    "__initIncrementalSearch",
    "initHtmlMarkers",
    "__getHighlightStyleFromAppearance",
    "properties",
    "appearance",
    "refine",
    "init",
    "width",
    "incrementalSearch",
    "apply",
    "check",
    "plainMarkers",
    "htmlMarkers",
    "deferredInit",
    "rich",
    "highlightMode",
    "selection",
    "nullable",
    "events",
    "changeSelection",
    "changeValue",
    "members",
    "__searchValue",
    "setValue",
    "selected",
    "removeAll",
    "setItem",
    "getValue",
    "s",
    "length",
    "getItem",
    "resetValue",
    "syncWidget",
    "jobs",
    "_removeBindings",
    "_addBindings",
    "_createChildControlImpl",
    "id",
    "hash",
    "control",
    "Spacer",
    "_add",
    "flex",
    "ListItem",
    "setCenter",
    "setAnonymous",
    "basic",
    "Image",
    "VirtualSelectBox",
    "superclass",
    "prototype",
    "_getAction",
    "keyIdentifier",
    "getKeyIdentifier",
    "isOpen",
    "isVisible",
    "isModifierPressed",
    "_isModifierPressed",
    "isPrintable",
    "atom",
    "modelPath",
    "_getBindPath",
    "bind",
    "push",
    "labelSourcePath",
    "getLabelPath",
    "getLabelOptions",
    "getIconPath",
    "iconSourcePath",
    "getIconOptions",
    "pop",
    "removeBinding",
    "_onBlur",
    "close",
    "_handlePointer",
    "type",
    "getType",
    "toggle",
    "_handleKeyboard",
    "action",
    "__convertKeyIdentifier",
    "restart",
    "isEnabled",
    "getTarget",
    "hasState",
    "removeState",
    "addState",
    "_applySelection",
    "value",
    "old",
    "setSelection",
    "queue",
    "Widget",
    "add",
    "__P_363_2",
    "stop",
    "searchValue",
    "getModel",
    "list",
    "_getLookupTable",
    "startIndex",
    "indexOf",
    "startRow",
    "_reverseLookup",
    "i",
    "row",
    "item",
    "_lookup",
    "SingleValueBinding",
    "resolvePropertyChain",
    "labelOptions",
    "converter",
    "util",
    "Delegate",
    "getMethod",
    "toLowerCase",
    "startsWith",
    "__P_363_7",
    "d",
    "getData",
    "removed",
    "fireDataEvent",
    "added",
    "__filterValue",
    "__lastMatch",
    "__filterUpdateRunning",
    "__filterInput",
    "__highlightMarkers",
    "_highlightFilterValueFunction",
    "_searchRegExp",
    "__addFilterInput",
    "__P_363_13",
    "_this",
    "input",
    "TextField",
    "set",
    "liveUpdate",
    "height",
    "getContentElement",
    "setAttribute",
    "dropdown",
    "window",
    "setTimeout",
    "focus",
    "blur",
    "sel",
    "e",
    "__updateDelegate",
    "__P_363_4",
    "highlightAppearance",
    "theme",
    "manager",
    "Appearance",
    "getInstance",
    "styleFrom",
    "debug",
    "backgroundColor",
    "textDecorationStyle",
    "textDecorationLine",
    "highlightStyle",
    "styles",
    "keys",
    "Object",
    "k",
    "key",
    "module",
    "String",
    "hyphenate",
    "join",
    "_searchMatch",
    "filterValue",
    "match",
    "_highlightFilterValuePlainFunction",
    "parts",
    "_highlightFilterValueHtmlFunction",
    "escapeHtml",
    "_configureItemRich",
    "setRich",
    "_configureItemPlain",
    "__P_363_14",
    "lastFilterValue",
    "undefined",
    "filterValueEscaped",
    "escapeRegexpChars",
    "RegExp",
    "that",
    "delegate",
    "filter",
    "isRich",
    "configureItem",
    "setDelegate",
    "len",
    "last",
    "charAt",
    "__P_363_3",
    "source",
    "target",
    "setLabelOptions",
    "_applyDelegate",
    "_applyRich",
    "getHighlightMode",
    "configureItemFunction",
    "_applyHighlightMode",
    "getHtmlMarkers",
    "getPlainMarkers",
    "__applyMarkers",
    "__P_363_5",
    "_applyIncrementalSearch",
    "setEnabled",
    "destruct",
    "removeListener",
    "dispose"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/form/VirtualSelectBox.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2011 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Christian Hagendorn (chris_schmidt)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * A form virtual widget which allows a single selection. Looks somewhat like\r\n * a normal button, but opens a virtual list of items to select when tapping\r\n * on it.\r\n *\r\n * @childControl spacer {qx.ui.core.Spacer} Flexible spacer widget.\r\n * @childControl atom {qx.ui.basic.Atom} Shows the text and icon of the content.\r\n * @childControl arrow {qx.ui.basic.Image} Shows the arrow to open the drop-down list.\r\n *\r\n * Item labels are plain text by default. Property <code>rich</code> can be used\r\n * to enable HTML formatting.\r\n *\r\n * Incremental search can be enabled by setting property <code>incrementalSearch</code>\r\n * to <code>true</code>. Highlightung of the search string is controlled by property\r\n * <code>highlightMode</code>. BEWARE that html highlighting sets property <code>rich</code>\r\n * automatically to <code>true</code>.\r\n *\r\n * With <code>highlightMode=='html'</code> item label parts and search value are all HTML-escaped.\r\n * If HTML-formatted item labels are used, this might lead to unexpected or undesirable (but save)\r\n * results. In this case you might want to override the various protected methods involved.\r\n *\r\n */\r\nqx.Class.define(\"qx.ui.form.VirtualSelectBox\", {\r\n  extend: qx.ui.form.core.AbstractVirtualBox,\r\n  implement: [qx.data.controller.ISelection, qx.ui.form.IField],\r\n\r\n  construct(model) {\r\n    super(model);\r\n\r\n    this._createChildControl(\"atom\");\r\n    this._createChildControl(\"spacer\");\r\n    this._createChildControl(\"arrow\");\r\n\r\n    // Register listener\r\n    this.addListener(\"pointerover\", this._onPointerOver, this);\r\n    this.addListener(\"pointerout\", this._onPointerOut, this);\r\n\r\n    this.__bindings = [];\r\n    this.initSelection(this.getChildControl(\"dropdown\").getSelection());\r\n\r\n    this.__searchTimer = new qx.event.Timer(500);\r\n    this.__searchTimer.addListener(\"interval\", this.__preselect, this);\r\n\r\n    this.getSelection().addListener(\"change\", this._updateSelectionValue, this);\r\n\r\n    if (this.isIncrementalSearch()) {\r\n      this.__initIncrementalSearch();\r\n    }\r\n\r\n    this.initHtmlMarkers([\r\n      '<span style=\"' + this.__getHighlightStyleFromAppearance() + '\">',\r\n      \"</span>\"\r\n    ]);\r\n  },\r\n\r\n  properties: {\r\n    // overridden\r\n    appearance: {\r\n      refine: true,\r\n      init: \"virtual-selectbox\"\r\n    },\r\n\r\n    // overridden\r\n    width: {\r\n      refine: true,\r\n      init: 120\r\n    },\r\n\r\n    /**\r\n     * Whether or not to use incremental search.\r\n     */\r\n    incrementalSearch: {\r\n      apply: \"_applyIncrementalSearch\",\r\n      init: false,\r\n      check: \"Boolean\"\r\n    },\r\n\r\n    /**\r\n     * Array of non-HTML strings for opening an closing marker for incremental search highlighting\r\n     */\r\n    plainMarkers: {\r\n      apply: \"__applyMarkers\",\r\n      init: [\"|\", \"|\"],\r\n      check: \"Array\"\r\n    },\r\n\r\n    /**\r\n     * Array of HTML strings for opening an closing marker for incremental search highlighting.\r\n     * Initialized from 'list-search-highlight' theme if not set explicitly.\r\n     */\r\n    htmlMarkers: {\r\n      apply: \"__applyMarkers\",\r\n      deferredInit: true,\r\n      check: \"Array\"\r\n    },\r\n\r\n    /**\r\n     * Setting rich to true sets both the select box atom and the list items to rich.\r\n     */\r\n    rich: {\r\n      apply: \"_applyRich\",\r\n      init: null,\r\n      check: \"Boolean\"\r\n    },\r\n\r\n    /**\r\n     * Define how to highlight the incremental search string.\r\n     *\r\n     * none: no highlighting (this is the default)\r\n     * plain: use characters from plainMarkers property\r\n     * html: use HTML for highlighting; this automatically calls <code>this.setRich(true)</code> and thus sets item labels to rich as well.\r\n     *\r\n     */\r\n    highlightMode: {\r\n      apply: \"_applyHighlightMode\",\r\n      init: \"none\",\r\n      check: [\"plain\", \"html\", \"none\"]\r\n    },\r\n\r\n    /** Current selected items. */\r\n    selection: {\r\n      check: \"qx.data.Array\",\r\n      event: \"changeSelection\",\r\n      apply: \"_applySelection\",\r\n      nullable: false,\r\n      deferredInit: true\r\n    }\r\n  },\r\n\r\n  events: {\r\n    /**\r\n     * This event is fired as soon as the content of the selection property changes, but\r\n     * this is not equal to the change of the selection of the widget. If the selection\r\n     * of the widget changes, the content of the array stored in the selection property\r\n     * changes. This means you have to listen to the change event of the selection array\r\n     * to get an event as soon as the user changes the selected item.\r\n     * <pre class=\"javascript\">obj.getSelection().addListener(\"change\", listener, this);</pre>\r\n     */\r\n    changeSelection: \"qx.event.type.Data\",\r\n\r\n    /** Fires after the value was modified */\r\n    changeValue: \"qx.event.type.Data\"\r\n  },\r\n\r\n  members: {\r\n    /** @type {String} The search value to {@link #__preselect} an item. */\r\n    __searchValue: \"\",\r\n\r\n    /**\r\n     * @type {qx.event.Timer} The time which triggers the search for pre-selection.\r\n     */\r\n    __searchTimer: null,\r\n\r\n    /** @type {Array} Contains the id from all bindings. */\r\n    __bindings: null,\r\n\r\n    /**\r\n     * @param selected {var|null} Item to select as value.\r\n     * @returns {null|TypeError} The status of this operation.\r\n     */\r\n    setValue(selected) {\r\n      if (null === selected) {\r\n        this.getSelection().removeAll();\r\n        return null;\r\n      }\r\n\r\n      this.getSelection().setItem(0, selected);\r\n      return null;\r\n    },\r\n\r\n    /**\r\n     * @returns {null|var} The currently selected item or null if there is none.\r\n     */\r\n    getValue() {\r\n      var s = this.getSelection();\r\n      return s.length === 0 ? null : s.getItem(0);\r\n    },\r\n\r\n    resetValue() {\r\n      this.setValue(null);\r\n    },\r\n\r\n    // overridden\r\n    syncWidget(jobs) {\r\n      this._removeBindings();\r\n      this._addBindings();\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      INTERNAl API\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    // overridden\r\n    _createChildControlImpl(id, hash) {\r\n      var control;\r\n\r\n      switch (id) {\r\n        case \"spacer\":\r\n          control = new qx.ui.core.Spacer();\r\n\r\n          this._add(control, { flex: 1 });\r\n          break;\r\n\r\n        case \"atom\":\r\n          control = new qx.ui.form.ListItem(\"\");\r\n          control.setCenter(false);\r\n          control.setAnonymous(true);\r\n\r\n          this._add(control, { flex: 1 });\r\n          break;\r\n\r\n        case \"arrow\":\r\n          control = new qx.ui.basic.Image();\r\n          control.setAnonymous(true);\r\n\r\n          this._add(control);\r\n          break;\r\n      }\r\n\r\n      return control || super._createChildControlImpl(id, hash);\r\n    },\r\n\r\n    // overridden\r\n    _getAction(event) {\r\n      var keyIdentifier = event.getKeyIdentifier();\r\n      var isOpen = this.getChildControl(\"dropdown\").isVisible();\r\n      var isModifierPressed = this._isModifierPressed(event);\r\n\r\n      if (\r\n        !isOpen &&\r\n        !isModifierPressed &&\r\n        (keyIdentifier === \"Enter\" || keyIdentifier === \"Space\")\r\n      ) {\r\n        return \"open\";\r\n      } else if (isOpen && event.isPrintable()) {\r\n        return \"search\";\r\n      } else {\r\n        return super._getAction(event);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * This method is called when the binding can be added to the\r\n     * widget. For e.q. bind the drop-down selection with the widget.\r\n     */\r\n    _addBindings() {\r\n      var atom = this.getChildControl(\"atom\");\r\n\r\n      var modelPath = this._getBindPath(\"selection\", \"\");\r\n      var id = this.bind(modelPath, atom, \"model\", null);\r\n      this.__bindings.push(id);\r\n\r\n      var labelSourcePath = this._getBindPath(\"selection\", this.getLabelPath());\r\n      id = this.bind(labelSourcePath, atom, \"label\", this.getLabelOptions());\r\n      this.__bindings.push(id);\r\n\r\n      if (this.getIconPath() != null) {\r\n        var iconSourcePath = this._getBindPath(\"selection\", this.getIconPath());\r\n        id = this.bind(iconSourcePath, atom, \"icon\", this.getIconOptions());\r\n        this.__bindings.push(id);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * This method is called when the binding can be removed from the\r\n     * widget. For e.q. remove the bound drop-down selection.\r\n     */\r\n    _removeBindings() {\r\n      while (this.__bindings.length > 0) {\r\n        var id = this.__bindings.pop();\r\n        this.removeBinding(id);\r\n      }\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      EVENT LISTENERS\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    _onBlur() {\r\n      if (!this.isIncrementalSearch()) {\r\n        this.close();\r\n      }\r\n    },\r\n\r\n    // overridden\r\n    _handlePointer(event) {\r\n      super._handlePointer(event);\r\n\r\n      var type = event.getType();\r\n      if (type === \"tap\") {\r\n        this.toggle();\r\n      }\r\n    },\r\n\r\n    // overridden\r\n    _handleKeyboard(event) {\r\n      var action = this._getAction(event);\r\n\r\n      switch (action) {\r\n        case \"search\":\r\n          if (!this.isIncrementalSearch()) {\r\n            this.__searchValue += this.__convertKeyIdentifier(\r\n              event.getKeyIdentifier()\r\n            );\r\n\r\n            this.__searchTimer.restart();\r\n          }\r\n          break;\r\n\r\n        default:\r\n          super._handleKeyboard(event);\r\n          break;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Listener method for \"pointerover\" event.\r\n     *\r\n     * <ul>\r\n     * <li>Adds state \"hovered\"</li>\r\n     * <li>Removes \"abandoned\" and adds \"pressed\" state (if \"abandoned\" state\r\n     *   is set)</li>\r\n     * </ul>\r\n     *\r\n     * @param event {qx.event.type.Pointer} Pointer event\r\n     */\r\n    _onPointerOver(event) {\r\n      if (!this.isEnabled() || event.getTarget() !== this) {\r\n        return;\r\n      }\r\n\r\n      if (this.hasState(\"abandoned\")) {\r\n        this.removeState(\"abandoned\");\r\n        this.addState(\"pressed\");\r\n      }\r\n\r\n      this.addState(\"hovered\");\r\n    },\r\n\r\n    /**\r\n     * Listener method for \"pointerout\" event.\r\n     *\r\n     * <ul>\r\n     * <li>Removes \"hovered\" state</li>\r\n     * <li>Adds \"abandoned\" and removes \"pressed\" state (if \"pressed\" state\r\n     *   is set)</li>\r\n     * </ul>\r\n     *\r\n     * @param event {qx.event.type.Pointer} Pointer event\r\n     */\r\n    _onPointerOut(event) {\r\n      if (!this.isEnabled() || event.getTarget() !== this) {\r\n        return;\r\n      }\r\n\r\n      this.removeState(\"hovered\");\r\n\r\n      if (this.hasState(\"pressed\")) {\r\n        this.removeState(\"pressed\");\r\n        this.addState(\"abandoned\");\r\n      }\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      APPLY ROUTINES\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    // property apply\r\n    _applySelection(value, old) {\r\n      this.getChildControl(\"dropdown\").setSelection(value);\r\n      qx.ui.core.queue.Widget.add(this);\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      HELPER METHODS\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Preselects an item in the drop-down, when item starts with the\r\n     * __searchValue value.\r\n     */\r\n    __preselect() {\r\n      this.__searchTimer.stop();\r\n\r\n      var searchValue = this.__searchValue;\r\n      if (searchValue === null || searchValue === \"\") {\r\n        return;\r\n      }\r\n\r\n      var model = this.getModel();\r\n      var list = this.getChildControl(\"dropdown\").getChildControl(\"list\");\r\n      var selection = list.getSelection();\r\n      var length = list._getLookupTable().length;\r\n      var startIndex = model.indexOf(selection.getItem(0));\r\n      var startRow = list._reverseLookup(startIndex);\r\n\r\n      for (var i = 1; i <= length; i++) {\r\n        var row = (i + startRow) % length;\r\n        var item = model.getItem(list._lookup(row));\r\n        if (!item) {\r\n          // group items aren't in the model\r\n          continue;\r\n        }\r\n        var value = item;\r\n\r\n        if (this.getLabelPath()) {\r\n          value = qx.data.SingleValueBinding.resolvePropertyChain(\r\n            item,\r\n            this.getLabelPath()\r\n          );\r\n\r\n          var labelOptions = this.getLabelOptions();\r\n          if (labelOptions) {\r\n            var converter = qx.util.Delegate.getMethod(\r\n              labelOptions,\r\n              \"converter\"\r\n            );\r\n\r\n            if (converter) {\r\n              value = converter(value, item);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (value.toLowerCase().startsWith(searchValue.toLowerCase())) {\r\n          selection.push(item);\r\n          break;\r\n        }\r\n      }\r\n      this.__searchValue = \"\";\r\n    },\r\n\r\n    /**\r\n     * Converts the keyIdentifier to a printable character e.q. <code>\"Space\"</code>\r\n     * to <code>\" \"</code>.\r\n     *\r\n     * @param keyIdentifier {String} The keyIdentifier to convert.\r\n     * @return {String} The converted keyIdentifier.\r\n     */\r\n    __convertKeyIdentifier(keyIdentifier) {\r\n      if (keyIdentifier === \"Space\") {\r\n        return \" \";\r\n      } else {\r\n        return keyIdentifier;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Called when selection changes.\r\n     *\r\n     * @param event {qx.event.type.Data} {@link qx.data.Array} change event.\r\n     */\r\n    _updateSelectionValue(event) {\r\n      var d = event.getData();\r\n      var old = d.removed.length ? d.removed[0] : null;\r\n      this.fireDataEvent(\"changeValue\", d.added[0], old);\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      INCREMENTAL SEARCH\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    __filterValue: null,\r\n    __lastMatch: \"\",\r\n    // prevent recursion problems when deleting unsucessful filtering\r\n    __filterUpdateRunning: 0,\r\n    __filterInput: null,\r\n    __highlightMarkers: null,\r\n\r\n    _highlightFilterValueFunction: null,\r\n    _searchRegExp: null,\r\n\r\n    __addFilterInput() {\r\n      var input = (this.__filterInput = new qx.ui.form.TextField().set({\r\n        appearance: \"widget\",\r\n        liveUpdate: true,\r\n        height: 0,\r\n        width: 1 // must be > 0\r\n      }));\r\n      // we don't want the browser to set this\r\n      // works with Chrome even\r\n      input.getContentElement().setAttribute(\"autocomplete\", \"new-password\");\r\n      this._add(input);\r\n\r\n      var dropdown = this.getChildControl(\"dropdown\");\r\n      dropdown.addListener(\"appear\", () => {\r\n        // we must delay so that the focus is only set once the list is ready\r\n        window.setTimeout(function () {\r\n          input.focus();\r\n        }, 0);\r\n      });\r\n\r\n      dropdown.addListener(\"disappear\", () => {\r\n        input.blur();\r\n        // clear filter\r\n        var sel = this.getValue();\r\n        input.resetValue();\r\n        this.setValue(sel);\r\n      });\r\n\r\n      input.addListener(\"blur\", e => {\r\n        this.close();\r\n      });\r\n\r\n      input.addListener(\"changeValue\", e => {\r\n        if (this.__filterUpdateRunning === 0) {\r\n          this.__updateDelegate();\r\n        }\r\n      });\r\n    },\r\n\r\n    __getHighlightStyleFromAppearance() {\r\n      var highlightAppearance =\r\n        qx.theme.manager.Appearance.getInstance().styleFrom(\r\n          \"list-search-highlight\"\r\n        );\r\n\r\n      // default style\r\n      if (!highlightAppearance) {\r\n        this.debug(\r\n          'The current theme is missing the \"list-search-highlight\" appearance setting, using default.'\r\n        );\r\n\r\n        highlightAppearance = {\r\n          backgroundColor: \"rgba(255, 251, 0, 0.53)\",\r\n          textDecorationStyle: \"dotted\",\r\n          textDecorationLine: \"underline\"\r\n        };\r\n      }\r\n      var highlightStyle = \"\",\r\n        styles = [];\r\n      var keys = Object.keys(highlightAppearance);\r\n      for (var k = 0; k < keys.length; k++) {\r\n        var key = qx.module.util.String.hyphenate(keys[k]);\r\n        styles.push(key + \":\" + highlightAppearance[keys[k]]);\r\n      }\r\n      highlightStyle = styles.join(\";\") + \";\";\r\n      return highlightStyle;\r\n    },\r\n\r\n    // filterValue is passed below to allow usage in overridden _searchMatch\r\n    // we use _searchRegExp here for efficiency\r\n    _searchMatch(item, filterValue) {\r\n      return item.match(this._searchRegExp);\r\n    },\r\n\r\n    // highlight plain\r\n    _highlightFilterValuePlainFunction(parts) {\r\n      // the array elements will contain '' if empty\r\n      return (\r\n        parts[1] +\r\n        this.__highlightMarkers[0] +\r\n        parts[2] +\r\n        this.__highlightMarkers[1] +\r\n        parts[3]\r\n      );\r\n    },\r\n\r\n    // htmlEscape all label parts\r\n    _highlightFilterValueHtmlFunction(parts) {\r\n      // the array elements will contain '' if empty\r\n      // the markers will be HTML strings\r\n      return (\r\n        qx.module.util.String.escapeHtml(parts[1]) +\r\n        this.__highlightMarkers[0] +\r\n        qx.module.util.String.escapeHtml(parts[2]) +\r\n        this.__highlightMarkers[1] +\r\n        qx.module.util.String.escapeHtml(parts[3])\r\n      );\r\n    },\r\n\r\n    _configureItemRich(item) {\r\n      item.setRich(true);\r\n    },\r\n\r\n    _configureItemPlain(item) {\r\n      item.setRich(false);\r\n    },\r\n\r\n    __updateDelegate(lastFilterValue) {\r\n      this.__filterUpdateRunning++;\r\n      var filterValue =\r\n        lastFilterValue !== undefined\r\n          ? lastFilterValue\r\n          : this.__filterInput.getValue();\r\n      this.__filterValue = filterValue;\r\n\r\n      // _searchRegExp is used in default _searchMatch function to avoid recreation of regexp object\r\n      // for each list item\r\n      var filterValueEscaped =\r\n        filterValue != null\r\n          ? qx.module.util.String.escapeRegexpChars(filterValue)\r\n          : \"\";\r\n      this._searchRegExp = new RegExp(\r\n        \"(.*?)(\" + filterValueEscaped + \")(.*)\",\r\n        \"i\"\r\n      );\r\n\r\n      // create and apply new filter\r\n      var that = this;\r\n      var delegate = {\r\n        filter(item) {\r\n          if (that.getLabelPath() != null) {\r\n            item = qx.data.SingleValueBinding.resolvePropertyChain(\r\n              item,\r\n              that.getLabelPath()\r\n            );\r\n          }\r\n          // we pass filterValue in case _searchMatch() is overridden and wants to use it.\r\n          return that._searchMatch(item, filterValue);\r\n        }\r\n      };\r\n\r\n      // needed for newly created items on filterValue backspacing\r\n      if (this.isRich()) {\r\n        delegate.configureItem = this._configureItemRich;\r\n      }\r\n      this.setDelegate(delegate);\r\n\r\n      // update selection if there is at least one item left,\r\n      // otherwise shorten filterValue and re-run filtering\r\n      // This deals with multi-char input like for ü on MacOS where\r\n      // where this is entered as option-: followed by u on a keyboard\r\n      // without a separat key for it.\r\n      var item = this.getModel().getItem(\r\n        this.getChildControl(\"dropdown\").getChildControl(\"list\")._lookup(0)\r\n      );\r\n\r\n      if (item) {\r\n        this.__lastMatch = filterValue;\r\n        this.getSelection().setItem(0, item);\r\n      } else {\r\n        var len = filterValue.length;\r\n        var last =\r\n          len > this.__lastMatch.length + 1\r\n            ? this.__filterInput.getValue().charAt(len - 1)\r\n            : \"\";\r\n        filterValue = this.__lastMatch + last;\r\n        this.__updateDelegate(filterValue);\r\n      }\r\n      // make sure length of dropdown is updated\r\n      this.__filterUpdateRunning--;\r\n    },\r\n\r\n    __initIncrementalSearch() {\r\n      // add search input field\r\n      this.__addFilterInput();\r\n\r\n      // set label converter\r\n      var that = this;\r\n      var labelOptions = this.getLabelOptions() || {};\r\n      labelOptions.converter = function (data, model, source, target) {\r\n        var filterValue = that.__filterValue;\r\n        if (filterValue && data && that._highlightFilterValueFunction) {\r\n          var match = that._searchMatch(data, filterValue);\r\n          if (match) {\r\n            data = that._highlightFilterValueFunction(match);\r\n          }\r\n        }\r\n        if (data === undefined) {\r\n          data = \"\";\r\n        }\r\n        return data;\r\n      };\r\n      this.setLabelOptions(labelOptions);\r\n    },\r\n\r\n    _applyDelegate(value, old) {\r\n      // we assume that if the user sets configureItem himself\r\n      // he keeps this consistent with rich\r\n      if (this.isRich() && !value.configureItem) {\r\n        value.configureItem = this._configureItemRich;\r\n      }\r\n      super._applyDelegate(value, old);\r\n    },\r\n\r\n    _applyRich(value, old) {\r\n      if (!value && this.getHighlightMode() == \"html\") {\r\n        this.debug(\r\n          \"highlightMode html requires rich==true, ignoring setting it to false\"\r\n        );\r\n\r\n        return;\r\n      }\r\n      this.getChildControl(\"atom\").setRich(value);\r\n      var configureItemFunction = value\r\n        ? this._configureItemRich\r\n        : this._configureItemPlain;\r\n      this.setDelegate({\r\n        configureItem: configureItemFunction\r\n      });\r\n    },\r\n\r\n    _applyHighlightMode(value, old) {\r\n      switch (value) {\r\n        case \"html\":\r\n          // set rich item labels\r\n          this.setRich(true);\r\n          this._highlightFilterValueFunction =\r\n            this._highlightFilterValueHtmlFunction;\r\n          this.__highlightMarkers = this.getHtmlMarkers();\r\n          break;\r\n        case \"plain\":\r\n          this._highlightFilterValueFunction =\r\n            this._highlightFilterValuePlainFunction;\r\n          this.__highlightMarkers = this.getPlainMarkers();\r\n          break;\r\n        default:\r\n          this._highlightFilterValueFunction = null;\r\n          break;\r\n      }\r\n    },\r\n\r\n    __applyMarkers(value, old) {\r\n      this.__highlightMarkers = value;\r\n\r\n      // make sure we have strings for both markers\r\n      if (value.length < 1) {\r\n        this.__highlightMarkers[0] = \"\";\r\n      }\r\n      // this most likely won't work for HTML highlighting\r\n      if (value.length < 2) {\r\n        this.__highlightMarkers[1] = this.__highlightMarkers[0];\r\n      }\r\n    },\r\n\r\n    _applyIncrementalSearch(value, old) {\r\n      if (value) {\r\n        this.__searchTimer.stop();\r\n        this.__searchTimer.setEnabled(false);\r\n        this.__initIncrementalSearch();\r\n      } else {\r\n        this.__searchTimer.setEnabled(true);\r\n      }\r\n    }\r\n  },\r\n\r\n  destruct() {\r\n    this._removeBindings();\r\n\r\n    this.getSelection().removeListener(\r\n      \"change\",\r\n      this._updateSelectionValue,\r\n      this\r\n    );\r\n\r\n    this.__searchTimer.removeListener(\"interval\", this.__preselect, this);\r\n    this.__searchTimer.dispose();\r\n    this.__searchTimer = null;\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}