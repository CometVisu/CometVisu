{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "form",
    "List",
    "construct",
    "constructor",
    "call",
    "__checked",
    "destruct",
    "dispose",
    "events",
    "changeChecked",
    "members",
    "getChecked",
    "Object",
    "values",
    "setChecked",
    "checked",
    "_this",
    "oldData",
    "__inChangingChecked",
    "toUncheck",
    "forEach",
    "item",
    "toHashCode",
    "replacement",
    "someTurnedOn",
    "hash",
    "setValue",
    "keys",
    "length",
    "fireDataEvent",
    "resetChecked",
    "_onAddChild",
    "evt",
    "CheckedList",
    "superclass",
    "prototype",
    "getData",
    "getValue",
    "__onItemChangeCheckedImpl",
    "addListener",
    "__onItemChangeChecked",
    "_onRemoveChild",
    "removeListener",
    "__P_351_3",
    "getTarget",
    "__P_351_2",
    "removing",
    "changed"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/form/CheckedList.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2021-2021 Zenesis Limited https://www.zenesis.com\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * John Spackman (github.com/johnspackman)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * Provides a version of `qx.ui.form.List` which expects children to be instances\r\n * of `qx.ui.form.CheckBox` and has a `checked` property\r\n */\r\nqx.Class.define(\"qx.ui.form.CheckedList\", {\r\n  extend: qx.ui.form.List,\r\n\r\n  construct() {\r\n    super();\r\n    this.__checked = {};\r\n  },\r\n\r\n  destruct() {\r\n    this.__checked.dispose();\r\n    this.__checked = null;\r\n  },\r\n\r\n  events: {\r\n    /** Fired when the checked array changes, data is the array */\r\n    changeChecked: \"qx.event.type.Data\"\r\n  },\r\n\r\n  members: {\r\n    /** @type {Map<String,qx.ui.form.CheckBox>} map of checked items, indexed by hash code */\r\n    __checked: null,\r\n\r\n    /**\r\n     * Returns the array of checked items\r\n     *\r\n     * @return {qx.ui.form.CheckBox[]}\r\n     */\r\n    getChecked() {\r\n      return Object.values(this.__checked);\r\n    },\r\n\r\n    /**\r\n     * Sets the array of checked items\r\n     *\r\n     * @param {qx.ui.form.CheckBox[]} the replacement array of checked items\r\n     */\r\n    setChecked(checked) {\r\n      let oldData = this.getChecked();\r\n      this.__inChangingChecked = true;\r\n      try {\r\n        let toUncheck = {};\r\n        Object.values(this.__checked).forEach(\r\n          item => (toUncheck[item.toHashCode()] = item)\r\n        );\r\n\r\n        let replacement = {};\r\n        if (!checked) {\r\n          checked = [];\r\n        } else {\r\n          if (qx.core.Environment.get(\"qx.debug\")) {\r\n            let lookup = {};\r\n            this.getChildren().forEach(\r\n              item => (lookup[item.toHashCode()] = item)\r\n            );\r\n\r\n            checked.forEach(item =>\r\n              this.assertTrue(\r\n                !!lookup[item.toHashCode()],\r\n                `The item ${item} to be checked is not a child of this list`\r\n              )\r\n            );\r\n          }\r\n\r\n          let someTurnedOn = false;\r\n          checked.forEach(item => {\r\n            let hash = item.toHashCode();\r\n            if (!this.__checked[hash]) {\r\n              someTurnedOn = true;\r\n              item.setValue(true);\r\n            }\r\n            delete toUncheck[hash];\r\n            replacement[hash] = item;\r\n          });\r\n\r\n          // Nothing turned on and nothing to turn off - then no change\r\n          if (!someTurnedOn && Object.keys(toUncheck).length == 0) {\r\n            return;\r\n          }\r\n        }\r\n        Object.values(toUncheck).forEach(item => item.setValue(false));\r\n        this.__checked = replacement;\r\n      } finally {\r\n        this.__inChangingChecked = false;\r\n      }\r\n\r\n      this.fireDataEvent(\"changeChecked\", this.getChecked(), oldData);\r\n    },\r\n\r\n    /**\r\n     * Clears the list of checked items\r\n     */\r\n    resetChecked() {\r\n      this.setChecked(null);\r\n    },\r\n\r\n    /*\r\n     * @Override\r\n     */\r\n    _onAddChild(evt) {\r\n      super._onAddChild(evt);\r\n\r\n      let item = evt.getData();\r\n      if (qx.core.Environment.get(\"qx.debug\")) {\r\n        this.assertInstance(\r\n          item,\r\n          qx.ui.form.CheckBox,\r\n          this.classname +\r\n            \" only supports instances of qx.ui.core.CheckBox as children\"\r\n        );\r\n      }\r\n      if (item.getValue()) {\r\n        this.__onItemChangeCheckedImpl(item);\r\n      }\r\n      item.addListener(\"changeValue\", this.__onItemChangeChecked, this);\r\n    },\r\n\r\n    /*\r\n     * @Override\r\n     */\r\n    _onRemoveChild(evt) {\r\n      super._onRemoveChild(evt);\r\n\r\n      let item = evt.getData();\r\n      item.removeListener(\"changeValue\", this.__onItemChangeChecked, this);\r\n\r\n      if (item.getValue()) {\r\n        this.__onItemChangeCheckedImpl(item, true);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Event handler for when an item is [un]checked\r\n     *\r\n     * @param evt {qx.event.type.Data} the event\r\n     */\r\n    __onItemChangeChecked(evt) {\r\n      if (this.__inChangingChecked) {\r\n        return;\r\n      }\r\n      this.__onItemChangeCheckedImpl(evt.getTarget());\r\n    },\r\n\r\n    /**\r\n     * Handles changes in the items checked state\r\n     *\r\n     * @param item {qx.ui.form.CheckBox} the item\r\n     * @param removing {Boolean} whether the item is being removed (act as if unchecking)\r\n     */\r\n    __onItemChangeCheckedImpl(item, removing) {\r\n      let hash = item.toHashCode();\r\n      let checked = item.getValue();\r\n      if (removing) {\r\n        checked = false;\r\n      }\r\n      let changed = false;\r\n      let oldData = this.getChecked();\r\n      if (checked) {\r\n        if (!this.__checked[hash]) {\r\n          changed = true;\r\n          this.__checked[hash] = item;\r\n        }\r\n      } else {\r\n        if (this.__checked[hash]) {\r\n          delete this.__checked[hash];\r\n          changed = true;\r\n        }\r\n      }\r\n      if (changed) {\r\n        this.fireDataEvent(\"changeChecked\", this.getChecked(), oldData);\r\n      }\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}