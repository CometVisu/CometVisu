{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "ui",
    "website",
    "Widget",
    "statics",
    "_config",
    "length",
    "symbol",
    "rating",
    "initValue",
    "Rating",
    "init",
    "modified",
    "undefined",
    "getConfig",
    "setConfig",
    "render",
    "setValue",
    "construct",
    "selector",
    "context",
    "events",
    "changeValue",
    "members",
    "_updateSymbolLength",
    "cssPrefix",
    "getCssPrefix",
    "getAttribute",
    "setAttribute",
    "on",
    "_onFocus",
    "_onBlur",
    "getChildren",
    "addClasses",
    "_onTap",
    "value",
    "getValue",
    "children",
    "removeClass",
    "slice",
    "addClass",
    "emit",
    "not",
    "setHtml",
    "diff",
    "i",
    "qxWeb",
    "create",
    "appendTo",
    "Math",
    "abs",
    "getLast",
    "off",
    "remove",
    "e",
    "parents",
    "getTarget",
    "getParents",
    "indexOf",
    "document",
    "documentElement",
    "_onKeyDown",
    "key",
    "getKeyIdentifier",
    "dispose",
    "defer",
    "$attach"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/website/Rating.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2013 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (wittemann)\n     * Daniel Wagner (danielwagner)\n\n************************************************************************ */\n/**\n * This is a simple rating widget which can be used to display a predefined\n * number of symbols which the user can click or tap to give a rating e.g.\n * 3 out of 5 stars.\n *\n * <h2>Markup</h2>\n * Each rating item is a span element. Span elements already existing within\n * the Rating's container will be used, otherwise new elements will be added or\n * removed according to the <code>length</code> config option.\n *\n * <h2>CSS Classes</h2>\n * <table>\n *   <thead>\n *     <tr>\n *       <td>Class Name</td>\n *       <td>Applied to</td>\n *       <td>Description</td>\n *     </tr>\n *   </thead>\n *   <tbody>\n *     <tr>\n *       <td><code>qx-rating</code></td>\n *       <td>Container element</td>\n *       <td>Identifies the Rating widget</td>\n *     </tr>\n *     <tr>\n *       <td><code>qx-rating-item</code></td>\n *       <td>Rating item (span)</td>\n *       <td>Identifies and styles an active Rating item</td>\n *     </tr>\n *     <tr>\n *       <td><code>qx-rating-item-off</code></td>\n *       <td>Rating item (span)</td>\n *       <td>Identifies and styles an inactive Rating item. Applied in addition to <code>qx-rating-item</code></td>\n *     </tr>\n *   </tbody>\n * </table>\n *\n * <h2 class=\"widget-markup\">Generated DOM Structure</h2>\n *\n * @group (Widget)\n */\nqx.Bootstrap.define(\"qx.ui.website.Rating\", {\n  extend: qx.ui.website.Widget,\n\n  statics: {\n    /**\n     * *length*\n     *\n     * The length of the rating widget.\n     *\n     * Default value: <pre>5</pre>\n     *\n     *\n     * *symbol*\n     *\n     * The symbol used to render the rating items. This can be any\n     * String e.g. a UTF-8 character.\n     *\n     * Default value: <pre>★</pre>\n     */\n    _config: {\n      length: 5,\n      symbol: \"★\"\n    },\n\n    /**\n     * Factory method which converts the current collection into a collection of\n     * rating widgets. Therefore, an initialization process needs to be done which\n     * can be configured with some parameter.\n     *\n     * @param initValue {Number?0} The initial value of the rating.\n     * @param symbol {String?\"★\"} The symbol which should be used for each rating item.\n     * @param length {Number?5} The length of the rating widget.\n     * @return {qx.ui.website.Rating} A new rating collection.\n     * @attach {qxWeb}\n     */\n    rating(initValue, symbol, length) {\n      var rating = new qx.ui.website.Rating(this);\n      rating.init();\n\n      var modified = false;\n      if (length != undefined && length != rating.getConfig(\"length\")) {\n        rating.setConfig(\"length\", length);\n        modified = true;\n      }\n\n      if (symbol != undefined) {\n        rating.setConfig(\"symbol\", symbol);\n        modified = true;\n      }\n\n      if (modified) {\n        rating.render();\n      }\n\n      if (initValue != undefined) {\n        rating.setValue(initValue);\n      }\n\n      return rating;\n    }\n  },\n\n  construct(selector, context) {\n    super(selector, context);\n  },\n\n  events: {\n    /** Fired at each value change */\n    changeValue: \"Number\"\n  },\n\n  members: {\n    // overridden\n    init() {\n      if (!super.init()) {\n        return false;\n      }\n\n      this._updateSymbolLength();\n      var cssPrefix = this.getCssPrefix();\n\n      if (this.getAttribute(\"tabindex\") < 0) {\n        this.setAttribute(\"tabindex\", 0);\n      }\n      this.on(\"focus\", this._onFocus, this)\n        .on(\"blur\", this._onBlur, this)\n        .getChildren(\"span\")\n        .addClasses([cssPrefix + \"-item\", cssPrefix + \"-item-off\"])\n        .on(\"tap\", this._onTap, this);\n\n      return true;\n    },\n\n    /**\n     * Sets the given value of the raining widget's in the collection. The value will be\n     * converted to the maximum or minimum if our of range.\n     *\n     * @param value {Number} The value of the rating.\n     * @return {qx.ui.website.Rating} <code>this</code> reference for chaining.\n     */\n    setValue(value) {\n      if (this.getValue() == value) {\n        return this;\n      }\n      if (value < 0) {\n        value = 0;\n      }\n      var cssPrefix = this.getCssPrefix();\n\n      var children = this.getChildren(\"span\");\n      children.removeClass(cssPrefix + \"-item-off\");\n      children.slice(value, children.length).addClass(cssPrefix + \"-item-off\");\n      this.emit(\"changeValue\", this.getValue());\n      return this;\n    },\n\n    /**\n     * Reads the current value of the first rating widget in the collection\n     * from the DOM and returns it.\n     *\n     * @return {Number} The current value.\n     */\n    getValue() {\n      var cssPrefix = this.getCssPrefix();\n      return this.getChildren(\"span\").not(\".\" + cssPrefix + \"-item-off\").length;\n    },\n\n    // overridden\n    render() {\n      this._updateSymbolLength();\n    },\n\n    /**\n     * Checks the set length and adds / removes spans containing the rating symbol.\n     *\n     * @return {qx.ui.website.Rating} <code>this</code> reference for chaining.\n     */\n    _updateSymbolLength() {\n      var cssPrefix = this.getCssPrefix();\n      var length = this.getConfig(\"length\");\n\n      var children = this.getChildren();\n      children.setHtml(this.getConfig(\"symbol\"));\n      var diff = length - children.length;\n      if (diff > 0) {\n        for (var i = 0; i < diff; i++) {\n          qxWeb\n            .create(\"<span>\" + this.getConfig(\"symbol\") + \"</span>\")\n            .on(\"tap\", this._onTap, this)\n            .addClasses([cssPrefix + \"-item\", cssPrefix + \"-item-off\"])\n            .appendTo(this);\n        }\n      } else {\n        for (var i = 0; i < Math.abs(diff); i++) {\n          this.getChildren().getLast().off(\"tap\", this._onTap, this).remove();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Tap handler which updates the value depending on the selected element.\n     *\n     * @param e {Event} tap event\n     */\n    _onTap(e) {\n      var parents = qxWeb(e.getTarget()).getParents();\n      this.setValue(parents.getChildren().indexOf(e.getTarget()) + 1);\n    },\n\n    /**\n     * Attaches the keydown listener.\n     * @param e {Event} The native focus event.\n     */\n    _onFocus(e) {\n      qxWeb(document.documentElement).on(\"keydown\", this._onKeyDown, this);\n    },\n\n    /**\n     * Removes the keydown listener if the widget loses focus.\n     *\n     * @param e {Event} The native blur event.\n     */\n    _onBlur(e) {\n      qxWeb(document.documentElement).off(\"keydown\", this._onKeyDown, this);\n    },\n\n    /**\n     * Changes the value if the left or right arrow key is pressed.\n     *\n     * @param e {Event} The native keydown event.\n     */\n    _onKeyDown(e) {\n      var key = e.getKeyIdentifier();\n      if (key === \"Right\") {\n        this.setValue(this.getValue() + 1);\n      } else if (key === \"Left\") {\n        this.setValue(this.getValue() - 1);\n      }\n    },\n\n    // overridden\n    dispose() {\n      qxWeb(document.documentElement).off(\"keydown\", this._onKeyDown, this);\n      this.off(\"focus\", this._onFocus, this).off(\"blur\", this._onBlur, this);\n      this.getChildren(\"span\").off(\"tap\", this._onTap, this);\n      this.setHtml(\"\");\n\n      return super.dispose();\n    }\n  },\n\n  defer(statics) {\n    qxWeb.$attach({ rating: statics.rating });\n  }\n});\n"
  ],
  "mappings": "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"
}