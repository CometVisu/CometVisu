{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "table",
    "selection",
    "Manager",
    "construct",
    "__table",
    "members",
    "getTable",
    "_handleSelectEvent",
    "index",
    "evt",
    "_this",
    "handleButtonClick",
    "tree",
    "dataModel",
    "getDataModel",
    "treeCol",
    "getTreeColumn",
    "focusedCol",
    "getFocusedColumn",
    "event",
    "type",
    "Mouse",
    "getFocusCellOnPointerMove",
    "scrollers",
    "_getPaneScrollerArr",
    "i",
    "length",
    "_focusCellAtPagePos",
    "getViewportLeft",
    "getViewportTop",
    "node",
    "getNode",
    "getFocusedRow",
    "x",
    "latitude",
    "buttonPos",
    "getOpenCloseButtonPosition",
    "left",
    "width",
    "bHideOpenClose",
    "treevirtual",
    "SimpleTreeDataModel",
    "Type",
    "LEAF",
    "setState",
    "bOpened",
    "getOpenCloseClickSelectsRow",
    "tcm",
    "getTableColumnModel",
    "columnPositions",
    "_getColToXPosMap",
    "bom",
    "element",
    "Location",
    "getLeft",
    "getContentElement",
    "getDomElement",
    "visX",
    "getColumnWidth",
    "_handleExtendedClick",
    "identifier",
    "getKeyIdentifier",
    "bNoSelect",
    "destruct",
    "SelectionManager"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/treevirtual/SelectionManager.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007 Derrell Lipman\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Derrell Lipman (derrell)\n\n************************************************************************ */\n\n/**\n * A selection manager. This is a helper class that handles all selection\n * related events and updates a SelectionModel.\n * <p>\n * This Selection Manager differs from its superclass in that we do not want\n * rows to be selected when moving around with the keyboard.\n */\nqx.Class.define(\"qx.ui.treevirtual.SelectionManager\", {\n  extend: qx.ui.table.selection.Manager,\n\n  /**\n   * @param table {qx.ui.table.Table}\n   *    The table whose selections are being managed\n   */\n  construct(table) {\n    super();\n\n    this.__table = table;\n  },\n\n  members: {\n    __table: null,\n\n    /**\n     * Getter for the table being managed\n     *\n     * @return {qx.ui.table.Table}\n     *   Table being managed\n     */\n    getTable() {\n      return this.__table;\n    },\n\n    /**\n     * Handles a select event.  First we determine if the click was on the\n     * open/close button and toggle the opened/closed state as necessary.\n     * Then, if the click was not on the open/close button or if the table's\n     * \"openCloseClickSelectsRow\" property so indicates, call our superclass to\n     * handle the actual row selection.\n     *\n     * @param index {Integer} the index the event is pointing at.\n     * @param evt {Map} the mouse event.\n     */\n    _handleSelectEvent(index, evt) {\n      var _this = this;\n\n      function handleButtonClick(tree, index, evt) {\n        // Get the data model\n        var dataModel = tree.getDataModel();\n\n        // Determine the column containing the tree\n        var treeCol = dataModel.getTreeColumn();\n\n        // Get the focused column\n        var focusedCol = tree.getFocusedColumn();\n\n        // If the click is not in the tree column, ...\n        if (focusedCol != treeCol) {\n          // ... then let the Table selection manager deal with it\n          return false;\n        }\n\n        // If the cell hasn't been focused automatically...\n        if (evt instanceof qx.event.type.Mouse) {\n          if (!tree.getFocusCellOnPointerMove()) {\n            // ... then focus it now so we can determine the node to open/close\n            var scrollers = tree._getPaneScrollerArr();\n\n            for (var i = 0; i < scrollers.length; i++) {\n              scrollers[i]._focusCellAtPagePos(\n                evt.getViewportLeft(),\n                evt.getViewportTop()\n              );\n            }\n          }\n        }\n\n        // Get the node to which this event applies\n        var node = dataModel.getNode(tree.getFocusedRow());\n\n        if (!node) {\n          return false;\n        }\n\n        // Was this a mouse event?\n        if (evt instanceof qx.event.type.Mouse) {\n          // Was the click on the open/close button? We get the position and add a bit of\n          // latitude to that\n          var x = evt.getViewportLeft();\n          var latitude = 2;\n          var buttonPos = tree.getOpenCloseButtonPosition(node);\n          if (\n            x >= buttonPos.left - latitude &&\n            x <= buttonPos.left + buttonPos.width + latitude\n          ) {\n            // Yup.  Toggle the opened state for this node if open/close is allowed\n            if (\n              !node.bHideOpenClose &&\n              node.type !== qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF\n            ) {\n              dataModel.setState(node, { bOpened: !node.bOpened });\n            }\n            return tree.getOpenCloseClickSelectsRow() ? false : true;\n          } else {\n            // Yup.  Get the order of the columns\n            var tcm = tree.getTableColumnModel();\n            var columnPositions = tcm._getColToXPosMap();\n\n            // Calculate the position of the beginning of the tree column\n            var left = qx.bom.element.Location.getLeft(\n              tree.getContentElement().getDomElement()\n            );\n\n            for (var i = 0; i < columnPositions[treeCol].visX; i++) {\n              left += tcm.getColumnWidth(columnPositions[i].visX);\n            }\n            return _this._handleExtendedClick(tree, evt, node, left);\n          }\n        } else {\n          // See which key generated the event\n          var identifier = evt.getKeyIdentifier();\n\n          switch (identifier) {\n            case \"Space\":\n              // This should only select the row, not toggle the opened state\n              return false;\n\n            case \"Enter\":\n              // Toggle the open state if open/close is allowed\n              if (\n                !node.bHideOpenClose &&\n                node.type != qx.ui.treevirtual.SimpleTreeDataModel.Type.LEAF\n              ) {\n                dataModel.setState(node, { bOpened: !node.bOpened });\n              }\n\n              return tree.getOpenCloseClickSelectsRow() ? false : true;\n\n            default:\n              // Unrecognized key.  Ignore it.\n              return true;\n          }\n        }\n      }\n\n      // Call our local method to toggle the open/close state, if necessary\n      var bNoSelect = handleButtonClick(this.__table, index, evt);\n\n      // If we haven't been told not to do the selection...\n      if (!bNoSelect) {\n        // then call the superclass to handle it.\n        super._handleSelectEvent(index, evt);\n      }\n    },\n\n    /**\n     * Handle a mouse click event that is not normally handled by the simple\n     * tree.  This is intended for more sophisticated trees where clicks in\n     * different places, e.g. on various icons or on the label itself, should\n     * be handled specially.\n     *\n     * @param tree {qx.ui.treevirtual.TreeVirtual}\n     *   The tree on which the event has occurred.\n     *\n     * @param evt {Map}\n     *   The mouse event.  Of particular interest is evt.getViewportLeft()\n     *   which is the horizontal offset from the left border of the click.\n     *\n     * @param node {Map}\n     *   The node which the tree row is displaying\n     *\n     * @param left {Integer}\n     *   The offset from the left, of the beginning of the tree column.\n     *\n     * @return {Boolean}\n     *   <i>true</i> if the row should be prevented from being selected;\n     *   <i>false</i> otherwise.\n     */\n    _handleExtendedClick(tree, evt, node, left) {\n      return false;\n    }\n  },\n\n  destruct() {\n    this.__table = null;\n  }\n});\n"
  ],
  "mappings": "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"
}