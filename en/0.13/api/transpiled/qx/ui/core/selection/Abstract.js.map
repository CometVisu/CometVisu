{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "extend",
    "core",
    "Object",
    "construct",
    "constructor",
    "call",
    "__selection",
    "events",
    "changeSelection",
    "properties",
    "mode",
    "check",
    "init",
    "apply",
    "drag",
    "quick",
    "readOnly",
    "members",
    "__scrollStepX",
    "__scrollStepY",
    "__scrollTimer",
    "__frameScroll",
    "__lastRelX",
    "__lastRelY",
    "__frameLocation",
    "__dragStartX",
    "__dragStartY",
    "__inCapture",
    "__pointerX",
    "__pointerY",
    "__moveDirectionX",
    "__moveDirectionY",
    "__selectionModified",
    "__selectionContext",
    "__leadItem",
    "__anchorItem",
    "__pointerDownOnSelected",
    "_userInteraction",
    "__oldScrollTop",
    "getSelectionContext",
    "selectAll",
    "getMode",
    "Error",
    "_selectAllItems",
    "_fireChange",
    "selectItem",
    "item",
    "_setSelectedItem",
    "_setLeadItem",
    "_setAnchorItem",
    "_scrollItemIntoView",
    "addItem",
    "_getAnchorItem",
    "_addToSelection",
    "removeItem",
    "_removeFromSelection",
    "isSelectionEmpty",
    "selected",
    "_applyDefaultSelection",
    "getLeadItem",
    "selectItemRange",
    "begin",
    "end",
    "_selectItemRange",
    "clearSelection",
    "_clearSelection",
    "replaceSelection",
    "items",
    "length",
    "_replaceMultiSelection",
    "getSelectedItem",
    "result",
    "_getSelectedItem",
    "undefined",
    "getSelection",
    "values",
    "getSortedSelection",
    "children",
    "getSelectables",
    "sel",
    "sort",
    "a",
    "b",
    "indexOf",
    "isItemSelected",
    "hash",
    "_selectableToHashCode",
    "lang",
    "isEmpty",
    "invertSelection",
    "selectables",
    "i",
    "_toggleInSelection",
    "value",
    "old",
    "_styleSelectable",
    "_isSelectable",
    "_getSelectableFromPointerEvent",
    "event",
    "target",
    "getTarget",
    "enabled",
    "_capture",
    "_releaseCapture",
    "_getLocation",
    "_getDimension",
    "_getSelectableLocationX",
    "_getSelectableLocationY",
    "_getScroll",
    "_scrollBy",
    "xoff",
    "yoff",
    "all",
    "_getSelectableRange",
    "item1",
    "item2",
    "_getFirstSelectable",
    "_getLastSelectable",
    "_getFirstVisibleSelectable",
    "_getLastVisibleSelectable",
    "_getRelatedSelectable",
    "relation",
    "_getPage",
    "lead",
    "up",
    "_applyMode",
    "handlePointerOver",
    "top",
    "getPointerType",
    "getQuick",
    "handlePointerDown",
    "isCtrlPressed",
    "Environment",
    "get",
    "isMetaPressed",
    "isShiftPressed",
    "getDrag",
    "getDocumentLeft",
    "left",
    "getDocumentTop",
    "handleTap",
    "isReadOnly",
    "anchor",
    "_cleanup",
    "handleLoseCapture",
    "handlePointerMove",
    "dragX",
    "dragY",
    "location",
    "right",
    "bottom",
    "Timer",
    "addListener",
    "_onInterval",
    "start",
    "_autoSelect",
    "stopPropagation",
    "handleAddItem",
    "e",
    "getData",
    "handleRemoveItem",
    "stop",
    "inner",
    "relX",
    "Math",
    "max",
    "min",
    "width",
    "relY",
    "height",
    "moveX",
    "nextX",
    "locationX",
    "moveY",
    "nextY",
    "locationY",
    "_deselectItemRange",
    "__navigationKeys",
    "Home",
    "Down",
    "Right",
    "PageDown",
    "End",
    "Up",
    "Left",
    "PageUp",
    "handleKeyPress",
    "current",
    "next",
    "key",
    "getKeyIdentifier",
    "consumed",
    "range",
    "l",
    "selection",
    "mapped",
    "__rangeToMap",
    "__P_339_22",
    "modified",
    "selectable",
    "incoming",
    "first",
    "last",
    "context",
    "fireDataEvent",
    "force",
    "destruct",
    "_disposeObjects",
    "ui",
    "Abstract"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/core/selection/Abstract.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2008 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Sebastian Werner (wpbasti)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * Generic selection manager to bring rich desktop like selection behavior\r\n * to widgets and low-level interactive controls.\r\n *\r\n * The selection handling supports both Shift and Ctrl/Meta modifies like\r\n * known from native applications.\r\n */\r\nqx.Class.define(\"qx.ui.core.selection.Abstract\", {\r\n  type: \"abstract\",\r\n  extend: qx.core.Object,\r\n\r\n  /*\r\n  *****************************************************************************\r\n     CONSTRUCTOR\r\n  *****************************************************************************\r\n  */\r\n\r\n  construct() {\r\n    super();\r\n\r\n    // {Map} Internal selection storage\r\n    this.__selection = {};\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     EVENTS\r\n  *****************************************************************************\r\n  */\r\n\r\n  events: {\r\n    /** Fires after the selection was modified. Contains the selection under the data property. */\r\n    changeSelection: \"qx.event.type.Data\"\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     PROPERTIES\r\n  *****************************************************************************\r\n  */\r\n\r\n  properties: {\r\n    /**\r\n     * Selects the selection mode to use.\r\n     *\r\n     * * single: One or no element is selected\r\n     * * multi: Multi items could be selected. Also allows empty selections.\r\n     * * additive: Easy Web-2.0 selection mode. Allows multiple selections without modifier keys.\r\n     * * one: If possible always exactly one item is selected\r\n     */\r\n    mode: {\r\n      check: [\"single\", \"multi\", \"additive\", \"one\"],\r\n      init: \"single\",\r\n      apply: \"_applyMode\"\r\n    },\r\n\r\n    /**\r\n     * Enable drag selection (multi selection of items through\r\n     * dragging the pointer in pressed states).\r\n     *\r\n     * Only possible for the modes <code>multi</code> and <code>additive</code>\r\n     */\r\n    drag: {\r\n      check: \"Boolean\",\r\n      init: false\r\n    },\r\n\r\n    /**\r\n     * Enable quick selection mode, where no tap is needed to change the selection.\r\n     *\r\n     * Only possible for the modes <code>single</code> and <code>one</code>.\r\n     */\r\n    quick: {\r\n      check: \"Boolean\",\r\n      init: false\r\n    },\r\n\r\n    /**\r\n     * Whether the selection can be changed by user interaction\r\n     */\r\n    readOnly: {\r\n      check: \"Boolean\",\r\n      init: false\r\n    }\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     MEMBERS\r\n  *****************************************************************************\r\n  */\r\n  /* eslint-disable @qooxdoo/qx/no-refs-in-members */\r\n  members: {\r\n    __scrollStepX: 0,\r\n    __scrollStepY: 0,\r\n    __scrollTimer: null,\r\n    __frameScroll: null,\r\n    __lastRelX: null,\r\n    __lastRelY: null,\r\n    __frameLocation: null,\r\n    __dragStartX: null,\r\n    __dragStartY: null,\r\n    __inCapture: null,\r\n    __pointerX: null,\r\n    __pointerY: null,\r\n    __moveDirectionX: null,\r\n    __moveDirectionY: null,\r\n    __selectionModified: null,\r\n    __selectionContext: null,\r\n    __leadItem: null,\r\n    __selection: null,\r\n    __anchorItem: null,\r\n    __pointerDownOnSelected: null,\r\n\r\n    // A flag that signals an user interaction, which means the selection change\r\n    // was triggered by pointer or keyboard [BUG #3344]\r\n    _userInteraction: false,\r\n\r\n    __oldScrollTop: null,\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      USER APIS\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Returns the selection context. One of <code>tap</code>,\r\n     * <code>quick</code>, <code>drag</code> or <code>key</code> or\r\n     * <code>null</code>.\r\n     *\r\n     * @return {String} One of <code>tap</code>, <code>quick</code>,\r\n     *    <code>drag</code> or <code>key</code> or <code>null</code>\r\n     */\r\n    getSelectionContext() {\r\n      return this.__selectionContext;\r\n    },\r\n\r\n    /**\r\n     * Selects all items of the managed object.\r\n     *\r\n     */\r\n    selectAll() {\r\n      var mode = this.getMode();\r\n      if (mode == \"single\" || mode == \"one\") {\r\n        throw new Error(\"Can not select all items in selection mode: \" + mode);\r\n      }\r\n\r\n      this._selectAllItems();\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Selects the given item. Replaces current selection\r\n     * completely with the new item.\r\n     *\r\n     * Use {@link #addItem} instead if you want to add new\r\n     * items to an existing selection.\r\n     *\r\n     * @param item {Object} Any valid item\r\n     */\r\n    selectItem(item) {\r\n      this._setSelectedItem(item);\r\n\r\n      var mode = this.getMode();\r\n      if (mode !== \"single\" && mode !== \"one\") {\r\n        this._setLeadItem(item);\r\n        this._setAnchorItem(item);\r\n      }\r\n\r\n      this._scrollItemIntoView(item);\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Adds the given item to the existing selection.\r\n     *\r\n     * Use {@link #selectItem} instead if you want to replace\r\n     * the current selection.\r\n     *\r\n     * @param item {Object} Any valid item\r\n     */\r\n    addItem(item) {\r\n      var mode = this.getMode();\r\n      if (mode === \"single\" || mode === \"one\") {\r\n        this._setSelectedItem(item);\r\n      } else {\r\n        if (this._getAnchorItem() == null) {\r\n          this._setAnchorItem(item);\r\n        }\r\n\r\n        this._setLeadItem(item);\r\n        this._addToSelection(item);\r\n      }\r\n\r\n      this._scrollItemIntoView(item);\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Removes the given item from the selection.\r\n     *\r\n     * Use {@link #clearSelection} when you want to clear\r\n     * the whole selection at once.\r\n     *\r\n     * @param item {Object} Any valid item\r\n     */\r\n    removeItem(item) {\r\n      this._removeFromSelection(item);\r\n\r\n      if (this.getMode() === \"one\" && this.isSelectionEmpty()) {\r\n        var selected = this._applyDefaultSelection();\r\n\r\n        // Do not fire any event in this case.\r\n        if (selected == item) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (this.getLeadItem() == item) {\r\n        this._setLeadItem(null);\r\n      }\r\n\r\n      if (this._getAnchorItem() == item) {\r\n        this._setAnchorItem(null);\r\n      }\r\n\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Selects an item range between two given items.\r\n     *\r\n     * @param begin {Object} Item to start with\r\n     * @param end {Object} Item to end at\r\n     */\r\n    selectItemRange(begin, end) {\r\n      var mode = this.getMode();\r\n      if (mode == \"single\" || mode == \"one\") {\r\n        throw new Error(\r\n          \"Can not select multiple items in selection mode: \" + mode\r\n        );\r\n      }\r\n\r\n      this._selectItemRange(begin, end);\r\n\r\n      this._setAnchorItem(begin);\r\n\r\n      this._setLeadItem(end);\r\n      this._scrollItemIntoView(end);\r\n\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Clears the whole selection at once. Also\r\n     * resets the lead and anchor items and their\r\n     * styles.\r\n     *\r\n     */\r\n    clearSelection() {\r\n      if (this.getMode() == \"one\") {\r\n        var selected = this._applyDefaultSelection(true);\r\n        if (selected != null) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      this._clearSelection();\r\n      this._setLeadItem(null);\r\n      this._setAnchorItem(null);\r\n\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Replaces current selection with given array of items.\r\n     *\r\n     * Please note that in single selection scenarios it is more\r\n     * efficient to directly use {@link #selectItem}.\r\n     *\r\n     * @param items {Array} Items to select\r\n     */\r\n    replaceSelection(items) {\r\n      var mode = this.getMode();\r\n      if (mode == \"one\" || mode === \"single\") {\r\n        if (items.length > 1) {\r\n          throw new Error(\r\n            \"Could not select more than one items in mode: \" + mode + \"!\"\r\n          );\r\n        }\r\n\r\n        if (items.length == 1) {\r\n          this.selectItem(items[0]);\r\n        } else {\r\n          this.clearSelection();\r\n        }\r\n        return;\r\n      } else {\r\n        this._replaceMultiSelection(items);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Get the selected item. This method does only work in <code>single</code>\r\n     * selection mode.\r\n     *\r\n     * @return {Object} The selected item.\r\n     */\r\n    getSelectedItem() {\r\n      var mode = this.getMode();\r\n      if (mode === \"single\" || mode === \"one\") {\r\n        var result = this._getSelectedItem();\r\n        return result != undefined ? result : null;\r\n      }\r\n\r\n      throw new Error(\r\n        \"The method getSelectedItem() is only supported in 'single' and 'one' selection mode!\"\r\n      );\r\n    },\r\n\r\n    /**\r\n     * Returns an array of currently selected items.\r\n     *\r\n     * Note: The result is only a set of selected items, so the order can\r\n     * differ from the sequence in which the items were added.\r\n     *\r\n     * @return {Object[]} List of items.\r\n     */\r\n    getSelection() {\r\n      return Object.values(this.__selection);\r\n    },\r\n\r\n    /**\r\n     * Returns the selection sorted by the index in the\r\n     * container of the selection (the assigned widget)\r\n     *\r\n     * @return {Object[]} Sorted list of items\r\n     */\r\n    getSortedSelection() {\r\n      var children = this.getSelectables();\r\n      var sel = Object.values(this.__selection);\r\n\r\n      sel.sort(function (a, b) {\r\n        return children.indexOf(a) - children.indexOf(b);\r\n      });\r\n\r\n      return sel;\r\n    },\r\n\r\n    /**\r\n     * Detects whether the given item is currently selected.\r\n     *\r\n     * @param item {var} Any valid selectable item\r\n     * @return {Boolean} Whether the item is selected\r\n     */\r\n    isItemSelected(item) {\r\n      var hash = this._selectableToHashCode(item);\r\n      return this.__selection[hash] !== undefined;\r\n    },\r\n\r\n    /**\r\n     * Whether the selection is empty\r\n     *\r\n     * @return {Boolean} Whether the selection is empty\r\n     */\r\n    isSelectionEmpty() {\r\n      return qx.lang.Object.isEmpty(this.__selection);\r\n    },\r\n\r\n    /**\r\n     * Invert the selection. Select the non selected and deselect the selected.\r\n     */\r\n    invertSelection() {\r\n      var mode = this.getMode();\r\n      if (mode === \"single\" || mode === \"one\") {\r\n        throw new Error(\r\n          \"The method invertSelection() is only supported in 'multi' and 'additive' selection mode!\"\r\n        );\r\n      }\r\n\r\n      var selectables = this.getSelectables();\r\n      for (var i = 0; i < selectables.length; i++) {\r\n        this._toggleInSelection(selectables[i]);\r\n      }\r\n\r\n      this._fireChange();\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      LEAD/ANCHOR SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Sets the lead item. Generally the item which was last modified\r\n     * by the user (tapped on etc.)\r\n     *\r\n     * @param value {Object} Any valid item or <code>null</code>\r\n     */\r\n    _setLeadItem(value) {\r\n      var old = this.__leadItem;\r\n\r\n      if (old !== null) {\r\n        this._styleSelectable(old, \"lead\", false);\r\n      }\r\n\r\n      if (value !== null) {\r\n        this._styleSelectable(value, \"lead\", true);\r\n      }\r\n\r\n      this.__leadItem = value;\r\n    },\r\n\r\n    /**\r\n     * Returns the current lead item. Generally the item which was last modified\r\n     * by the user (tapped on etc.)\r\n     *\r\n     * @return {Object} The lead item or <code>null</code>\r\n     */\r\n    getLeadItem() {\r\n      return this.__leadItem;\r\n    },\r\n\r\n    /**\r\n     * Sets the anchor item. This is the item which is the starting\r\n     * point for all range selections. Normally this is the item which was\r\n     * tapped on the last time without any modifier keys pressed.\r\n     *\r\n     * @param value {Object} Any valid item or <code>null</code>\r\n     */\r\n    _setAnchorItem(value) {\r\n      var old = this.__anchorItem;\r\n\r\n      if (old != null) {\r\n        this._styleSelectable(old, \"anchor\", false);\r\n      }\r\n\r\n      if (value != null) {\r\n        this._styleSelectable(value, \"anchor\", true);\r\n      }\r\n\r\n      this.__anchorItem = value;\r\n    },\r\n\r\n    /**\r\n     * Returns the current anchor item. This is the item which is the starting\r\n     * point for all range selections. Normally this is the item which was\r\n     * tapped on the last time without any modifier keys pressed.\r\n     *\r\n     * @return {Object} The anchor item or <code>null</code>\r\n     */\r\n    _getAnchorItem() {\r\n      return this.__anchorItem !== null ? this.__anchorItem : null;\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      BASIC SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Whether the given item is selectable.\r\n     *\r\n     * @param item {var} Any item\r\n     * @return {Boolean} <code>true</code> when the item is selectable\r\n     */\r\n    _isSelectable(item) {\r\n      throw new Error(\"Abstract method call: _isSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Finds the selectable instance from a pointer event\r\n     *\r\n     * @param event {qx.event.type.Pointer} The pointer event\r\n     * @return {Object|null} The resulting selectable\r\n     */\r\n    _getSelectableFromPointerEvent(event) {\r\n      var target = event.getTarget();\r\n      // check for target (may be null when leaving the viewport) [BUG #4378]\r\n      if (target && this._isSelectable(target)) {\r\n        return target;\r\n      }\r\n      return null;\r\n    },\r\n\r\n    /**\r\n     * Returns an unique hashcode for the given item.\r\n     *\r\n     * @param item {var} Any item\r\n     * @return {String} A valid hashcode\r\n     */\r\n    _selectableToHashCode(item) {\r\n      throw new Error(\"Abstract method call: _selectableToHashCode()\");\r\n    },\r\n\r\n    /**\r\n     * Updates the style (appearance) of the given item.\r\n     *\r\n     * @param item {var} Item to modify\r\n     * @param type {String} Any of <code>selected</code>, <code>anchor</code> or <code>lead</code>\r\n     * @param enabled {Boolean} Whether the given style should be added or removed.\r\n     */\r\n    _styleSelectable(item, type, enabled) {\r\n      throw new Error(\"Abstract method call: _styleSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Enables capturing of the container.\r\n     *\r\n     */\r\n    _capture() {\r\n      throw new Error(\"Abstract method call: _capture()\");\r\n    },\r\n\r\n    /**\r\n     * Releases capturing of the container\r\n     *\r\n     */\r\n    _releaseCapture() {\r\n      throw new Error(\"Abstract method call: _releaseCapture()\");\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      DIMENSION AND LOCATION\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Returns the location of the container\r\n     *\r\n     * @return {Map} Map with the keys <code>top</code>, <code>right</code>,\r\n     *    <code>bottom</code> and <code>left</code>.\r\n     */\r\n    _getLocation() {\r\n      throw new Error(\"Abstract method call: _getLocation()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the dimension of the container (available scrolling space).\r\n     *\r\n     * @return {Map} Map with the keys <code>width</code> and <code>height</code>.\r\n     */\r\n    _getDimension() {\r\n      throw new Error(\"Abstract method call: _getDimension()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the relative (to the container) horizontal location of the given item.\r\n     *\r\n     * @param item {var} Any item\r\n     * @return {Map} A map with the keys <code>left</code> and <code>right</code>.\r\n     */\r\n    _getSelectableLocationX(item) {\r\n      throw new Error(\"Abstract method call: _getSelectableLocationX()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the relative (to the container) horizontal location of the given item.\r\n     *\r\n     * @param item {var} Any item\r\n     * @return {Map} A map with the keys <code>top</code> and <code>bottom</code>.\r\n     */\r\n    _getSelectableLocationY(item) {\r\n      throw new Error(\"Abstract method call: _getSelectableLocationY()\");\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      SCROLL SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Returns the scroll position of the container.\r\n     *\r\n     * @return {Map} Map with the keys <code>left</code> and <code>top</code>.\r\n     */\r\n    _getScroll() {\r\n      throw new Error(\"Abstract method call: _getScroll()\");\r\n    },\r\n\r\n    /**\r\n     * Scrolls by the given offset\r\n     *\r\n     * @param xoff {Integer} Horizontal offset to scroll by\r\n     * @param yoff {Integer} Vertical offset to scroll by\r\n     */\r\n    _scrollBy(xoff, yoff) {\r\n      throw new Error(\"Abstract method call: _scrollBy()\");\r\n    },\r\n\r\n    /**\r\n     * Scrolls the given item into the view (make it visible)\r\n     *\r\n     * @param item {var} Any item\r\n     */\r\n    _scrollItemIntoView(item) {\r\n      throw new Error(\"Abstract method call: _scrollItemIntoView()\");\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      QUERY SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Returns all selectable items of the container.\r\n     *\r\n     * @param all {Boolean} true for all selectables, false for the\r\n     *   selectables the user can interactively select\r\n     * @return {Array} A list of items\r\n     */\r\n    getSelectables(all) {\r\n      throw new Error(\"Abstract method call: getSelectables()\");\r\n    },\r\n\r\n    /**\r\n     * Returns all selectable items between the two given items.\r\n     *\r\n     * The items could be given in any order.\r\n     *\r\n     * @param item1 {var} First item\r\n     * @param item2 {var} Second item\r\n     * @return {Array} List of items\r\n     */\r\n    _getSelectableRange(item1, item2) {\r\n      throw new Error(\"Abstract method call: _getSelectableRange()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the first selectable item.\r\n     *\r\n     * @return {var} The first selectable item\r\n     */\r\n    _getFirstSelectable() {\r\n      throw new Error(\"Abstract method call: _getFirstSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the last selectable item.\r\n     *\r\n     * @return {var} The last selectable item\r\n     */\r\n    _getLastSelectable() {\r\n      throw new Error(\"Abstract method call: _getLastSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the first visible and selectable item.\r\n     *\r\n     * @return {var} The first visible and selectable item\r\n     */\r\n    _getFirstVisibleSelectable() {\r\n      throw new Error(\"Abstract method call: _getFirstVisibleSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the last visible and selectable item.\r\n     *\r\n     * @return {var} The last visible and selectable item\r\n     */\r\n    _getLastVisibleSelectable() {\r\n      throw new Error(\"Abstract method call: _getLastVisibleSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Returns a selectable item which is related to the given\r\n     * <code>item</code> through the value of <code>relation</code>.\r\n     *\r\n     * @param item {var} Any item\r\n     * @param relation {String} A valid relation: <code>above</code>,\r\n     *    <code>right</code>, <code>under</code> or <code>left</code>\r\n     * @return {var} The related item\r\n     */\r\n    _getRelatedSelectable(item, relation) {\r\n      throw new Error(\"Abstract method call: _getRelatedSelectable()\");\r\n    },\r\n\r\n    /**\r\n     * Returns the item which should be selected on pageUp/pageDown.\r\n     *\r\n     * May also scroll to the needed position.\r\n     *\r\n     * @param lead {var} The current lead item\r\n     * @param up {Boolean?false} Which page key was pressed:\r\n     *   <code>up</code> or <code>down</code>.\r\n     */\r\n    _getPage(lead, up) {\r\n      throw new Error(\"Abstract method call: _getPage()\");\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      PROPERTY APPLY ROUTINES\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    // property apply\r\n    _applyMode(value, old) {\r\n      this._setLeadItem(null);\r\n      this._setAnchorItem(null);\r\n\r\n      this._clearSelection();\r\n\r\n      // Mode \"one\" requires one selected item\r\n      if (value === \"one\") {\r\n        this._applyDefaultSelection(true);\r\n      }\r\n\r\n      this._fireChange();\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      POINTER SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * This method should be connected to the <code>pointerover</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param event {qx.event.type.Pointer} A valid pointer event\r\n     */\r\n    handlePointerOver(event) {\r\n      // All browsers (except Opera) fire a native \"mouseover\" event when a scroll appears\r\n      // by keyboard interaction. We have to ignore the event to avoid a selection for\r\n      // \"pointerover\" (quick selection). For more details see [BUG #4225]\r\n      if (\r\n        this.__oldScrollTop != null &&\r\n        this.__oldScrollTop != this._getScroll().top\r\n      ) {\r\n        this.__oldScrollTop = null;\r\n        return;\r\n      }\r\n\r\n      // quick select should only work on mouse events\r\n      if (event.getPointerType() != \"mouse\") {\r\n        return;\r\n      }\r\n\r\n      // this is a method invoked by an user interaction, so be careful to\r\n      // set / clear the mark this._userInteraction [BUG #3344]\r\n      this._userInteraction = true;\r\n\r\n      if (!this.getQuick()) {\r\n        this._userInteraction = false;\r\n        return;\r\n      }\r\n\r\n      var mode = this.getMode();\r\n      if (mode !== \"one\" && mode !== \"single\") {\r\n        this._userInteraction = false;\r\n        return;\r\n      }\r\n\r\n      var item = this._getSelectableFromPointerEvent(event);\r\n      if (item === null) {\r\n        this._userInteraction = false;\r\n        return;\r\n      }\r\n\r\n      this._setSelectedItem(item);\r\n\r\n      // Be sure that item is in view\r\n      // This does not feel good when pointerover is used\r\n      // this._scrollItemIntoView(item);\r\n\r\n      // Fire change event as needed\r\n      this._fireChange(\"quick\");\r\n\r\n      this._userInteraction = false;\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>pointerdown</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param event {qx.event.type.Pointer} A valid pointer event\r\n     */\r\n    handlePointerDown(event) {\r\n      // this is a method invoked by an user interaction, so be careful to\r\n      // set / clear the mark this._userInteraction [BUG #3344]\r\n      this._userInteraction = true;\r\n\r\n      var item = this._getSelectableFromPointerEvent(event);\r\n      if (item === null) {\r\n        this._userInteraction = false;\r\n        return;\r\n      }\r\n\r\n      // Read in keyboard modifiers\r\n      var isCtrlPressed =\r\n        event.isCtrlPressed() ||\r\n        (qx.core.Environment.get(\"os.name\") == \"osx\" && event.isMetaPressed());\r\n      var isShiftPressed = event.isShiftPressed();\r\n\r\n      // tapping on selected items deselect on pointerup, not on pointerdown\r\n      if (\r\n        this.isItemSelected(item) &&\r\n        !isShiftPressed &&\r\n        !isCtrlPressed &&\r\n        !this.getDrag()\r\n      ) {\r\n        this.__pointerDownOnSelected = item;\r\n        this._userInteraction = false;\r\n        return;\r\n      } else {\r\n        this.__pointerDownOnSelected = null;\r\n      }\r\n\r\n      // Be sure that item is in view\r\n      this._scrollItemIntoView(item);\r\n\r\n      // Drag selection\r\n      var mode = this.getMode();\r\n      if (\r\n        this.getDrag() &&\r\n        mode !== \"single\" &&\r\n        mode !== \"one\" &&\r\n        !isShiftPressed &&\r\n        !isCtrlPressed &&\r\n        event.getPointerType() == \"mouse\"\r\n      ) {\r\n        this._setAnchorItem(item);\r\n        this._setLeadItem(item);\r\n\r\n        // Cache location/scroll data\r\n        this.__frameLocation = this._getLocation();\r\n        this.__frameScroll = this._getScroll();\r\n\r\n        // Store position at start\r\n        this.__dragStartX = event.getDocumentLeft() + this.__frameScroll.left;\r\n        this.__dragStartY = event.getDocumentTop() + this.__frameScroll.top;\r\n\r\n        // Switch to capture mode\r\n        this.__inCapture = true;\r\n        this._capture();\r\n      }\r\n\r\n      // Fire change event as needed\r\n      this._fireChange(\"tap\");\r\n\r\n      this._userInteraction = false;\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>tap</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param event {qx.event.type.Tap} A valid pointer event\r\n     */\r\n    handleTap(event) {\r\n      // this is a method invoked by an user interaction, so be careful to\r\n      // set / clear the mark this._userInteraction [BUG #3344]\r\n      this._userInteraction = true;\r\n\r\n      // Read in keyboard modifiers\r\n      var isCtrlPressed =\r\n        event.isCtrlPressed() ||\r\n        (qx.core.Environment.get(\"os.name\") == \"osx\" && event.isMetaPressed());\r\n      var isShiftPressed = event.isShiftPressed();\r\n\r\n      if (\r\n        !isCtrlPressed &&\r\n        !isShiftPressed &&\r\n        this.__pointerDownOnSelected != null\r\n      ) {\r\n        this._userInteraction = false;\r\n        var item = this._getSelectableFromPointerEvent(event);\r\n        if (item === null || !this.isItemSelected(item)) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      var item = this._getSelectableFromPointerEvent(event);\r\n      if (item === null) {\r\n        this._userInteraction = false;\r\n        return;\r\n      }\r\n\r\n      // Action depends on selected mode\r\n      if (!this.isReadOnly()) {\r\n        switch (this.getMode()) {\r\n          case \"single\":\r\n          case \"one\":\r\n            this._setSelectedItem(item);\r\n            break;\r\n\r\n          case \"additive\":\r\n            this._setLeadItem(item);\r\n            this._setAnchorItem(item);\r\n            this._toggleInSelection(item);\r\n            break;\r\n\r\n          case \"multi\":\r\n            // Update lead item\r\n            this._setLeadItem(item);\r\n\r\n            // Create/Update range selection\r\n            if (isShiftPressed) {\r\n              var anchor = this._getAnchorItem();\r\n              if (anchor === null) {\r\n                anchor = this._getFirstSelectable();\r\n                this._setAnchorItem(anchor);\r\n              }\r\n\r\n              this._selectItemRange(anchor, item, isCtrlPressed);\r\n            }\r\n\r\n            // Toggle in selection\r\n            else if (isCtrlPressed) {\r\n              this._setAnchorItem(item);\r\n              this._toggleInSelection(item);\r\n            }\r\n\r\n            // Replace current selection\r\n            else {\r\n              this._setAnchorItem(item);\r\n              this._setSelectedItem(item);\r\n            }\r\n\r\n            break;\r\n        }\r\n      }\r\n\r\n      // Cleanup operation\r\n      this._userInteraction = false;\r\n      this._cleanup();\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>losecapture</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param event {qx.event.type.Pointer} A valid pointer event\r\n     */\r\n    handleLoseCapture(event) {\r\n      this._cleanup();\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>pointermove</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param event {qx.event.type.Pointer} A valid pointer event\r\n     */\r\n    handlePointerMove(event) {\r\n      // Only relevant when capturing is enabled\r\n      if (!this.__inCapture) {\r\n        return;\r\n      }\r\n\r\n      // Update pointer position cache\r\n      this.__pointerX = event.getDocumentLeft();\r\n      this.__pointerY = event.getDocumentTop();\r\n\r\n      // this is a method invoked by an user interaction, so be careful to\r\n      // set / clear the mark this._userInteraction [BUG #3344]\r\n      this._userInteraction = true;\r\n\r\n      // Detect move directions\r\n      var dragX = this.__pointerX + this.__frameScroll.left;\r\n      if (dragX > this.__dragStartX) {\r\n        this.__moveDirectionX = 1;\r\n      } else if (dragX < this.__dragStartX) {\r\n        this.__moveDirectionX = -1;\r\n      } else {\r\n        this.__moveDirectionX = 0;\r\n      }\r\n\r\n      var dragY = this.__pointerY + this.__frameScroll.top;\r\n      if (dragY > this.__dragStartY) {\r\n        this.__moveDirectionY = 1;\r\n      } else if (dragY < this.__dragStartY) {\r\n        this.__moveDirectionY = -1;\r\n      } else {\r\n        this.__moveDirectionY = 0;\r\n      }\r\n\r\n      // Update scroll steps\r\n      var location = this.__frameLocation;\r\n\r\n      if (this.__pointerX < location.left) {\r\n        this.__scrollStepX = this.__pointerX - location.left;\r\n      } else if (this.__pointerX > location.right) {\r\n        this.__scrollStepX = this.__pointerX - location.right;\r\n      } else {\r\n        this.__scrollStepX = 0;\r\n      }\r\n\r\n      if (this.__pointerY < location.top) {\r\n        this.__scrollStepY = this.__pointerY - location.top;\r\n      } else if (this.__pointerY > location.bottom) {\r\n        this.__scrollStepY = this.__pointerY - location.bottom;\r\n      } else {\r\n        this.__scrollStepY = 0;\r\n      }\r\n\r\n      // Dynamically create required timer instance\r\n      if (!this.__scrollTimer) {\r\n        this.__scrollTimer = new qx.event.Timer(100);\r\n        this.__scrollTimer.addListener(\"interval\", this._onInterval, this);\r\n      }\r\n\r\n      // Start interval\r\n      this.__scrollTimer.start();\r\n\r\n      // Auto select based on new cursor position\r\n      this._autoSelect();\r\n\r\n      event.stopPropagation();\r\n      this._userInteraction = false;\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>addItem</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param e {qx.event.type.Data} The event object\r\n     */\r\n    handleAddItem(e) {\r\n      var item = e.getData();\r\n      if (this.getMode() === \"one\" && this.isSelectionEmpty()) {\r\n        this.addItem(item);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>removeItem</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param e {qx.event.type.Data} The event object\r\n     */\r\n    handleRemoveItem(e) {\r\n      this.removeItem(e.getData());\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      POINTER SUPPORT INTERNALS\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Stops all timers, release capture etc. to cleanup drag selection\r\n     */\r\n    _cleanup() {\r\n      if (!this.getDrag() && this.__inCapture) {\r\n        return;\r\n      }\r\n\r\n      // Fire change event if needed\r\n      if (this.__selectionModified) {\r\n        this._fireChange(\"tap\");\r\n      }\r\n\r\n      // Remove flags\r\n      delete this.__inCapture;\r\n      delete this.__lastRelX;\r\n      delete this.__lastRelY;\r\n\r\n      // Stop capturing\r\n      this._releaseCapture();\r\n\r\n      // Stop timer\r\n      if (this.__scrollTimer) {\r\n        this.__scrollTimer.stop();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Event listener for timer used by drag selection\r\n     *\r\n     * @param e {qx.event.type.Event} Timer event\r\n     */\r\n    _onInterval(e) {\r\n      // Scroll by defined block size\r\n      this._scrollBy(this.__scrollStepX, this.__scrollStepY);\r\n\r\n      // Update scroll cache\r\n      this.__frameScroll = this._getScroll();\r\n\r\n      // Auto select based on new scroll position and cursor\r\n      this._autoSelect();\r\n    },\r\n\r\n    /**\r\n     * Automatically selects items based on the pointer movement during a drag selection\r\n     */\r\n    _autoSelect() {\r\n      var inner = this._getDimension();\r\n\r\n      // Get current relative Y position and compare it with previous one\r\n      var relX =\r\n        Math.max(\r\n          0,\r\n          Math.min(this.__pointerX - this.__frameLocation.left, inner.width)\r\n        ) + this.__frameScroll.left;\r\n      var relY =\r\n        Math.max(\r\n          0,\r\n          Math.min(this.__pointerY - this.__frameLocation.top, inner.height)\r\n        ) + this.__frameScroll.top;\r\n\r\n      // Compare old and new relative coordinates (for performance reasons)\r\n      if (this.__lastRelX === relX && this.__lastRelY === relY) {\r\n        return;\r\n      }\r\n      this.__lastRelX = relX;\r\n      this.__lastRelY = relY;\r\n\r\n      // Cache anchor\r\n      var anchor = this._getAnchorItem();\r\n      var lead = anchor;\r\n\r\n      // Process X-coordinate\r\n      var moveX = this.__moveDirectionX;\r\n      var nextX, locationX;\r\n\r\n      while (moveX !== 0) {\r\n        // Find next item to process depending on current scroll direction\r\n        nextX =\r\n          moveX > 0\r\n            ? this._getRelatedSelectable(lead, \"right\")\r\n            : this._getRelatedSelectable(lead, \"left\");\r\n\r\n        // May be null (e.g. first/last item)\r\n        if (nextX !== null) {\r\n          locationX = this._getSelectableLocationX(nextX);\r\n\r\n          // Continue when the item is in the visible area\r\n          if (\r\n            (moveX > 0 && locationX.left <= relX) ||\r\n            (moveX < 0 && locationX.right >= relX)\r\n          ) {\r\n            lead = nextX;\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Otherwise break\r\n        break;\r\n      }\r\n\r\n      // Process Y-coordinate\r\n      var moveY = this.__moveDirectionY;\r\n      var nextY, locationY;\r\n\r\n      while (moveY !== 0) {\r\n        // Find next item to process depending on current scroll direction\r\n        nextY =\r\n          moveY > 0\r\n            ? this._getRelatedSelectable(lead, \"under\")\r\n            : this._getRelatedSelectable(lead, \"above\");\r\n\r\n        // May be null (e.g. first/last item)\r\n        if (nextY !== null) {\r\n          locationY = this._getSelectableLocationY(nextY);\r\n\r\n          // Continue when the item is in the visible area\r\n          if (\r\n            (moveY > 0 && locationY.top <= relY) ||\r\n            (moveY < 0 && locationY.bottom >= relY)\r\n          ) {\r\n            lead = nextY;\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Otherwise break\r\n        break;\r\n      }\r\n\r\n      // Differenciate between the two supported modes\r\n      var mode = this.getMode();\r\n      if (mode === \"multi\") {\r\n        // Replace current selection with new range\r\n        this._selectItemRange(anchor, lead);\r\n      } else if (mode === \"additive\") {\r\n        // Behavior depends on the fact whether the\r\n        // anchor item is selected or not\r\n        if (this.isItemSelected(anchor)) {\r\n          this._selectItemRange(anchor, lead, true);\r\n        } else {\r\n          this._deselectItemRange(anchor, lead);\r\n        }\r\n\r\n        // Improve performance. This mode does not rely\r\n        // on full ranges as it always extend the old\r\n        // selection/deselection.\r\n        this._setAnchorItem(lead);\r\n      }\r\n\r\n      // Fire change event as needed\r\n      this._fireChange(\"drag\");\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      KEYBOARD SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * @type {Map} All supported navigation keys\r\n     *\r\n     * @lint ignoreReferenceField(__navigationKeys)\r\n     */\r\n    __navigationKeys: {\r\n      Home: 1,\r\n      Down: 1,\r\n      Right: 1,\r\n      PageDown: 1,\r\n      End: 1,\r\n      Up: 1,\r\n      Left: 1,\r\n      PageUp: 1\r\n    },\r\n\r\n    /**\r\n     * This method should be connected to the <code>keypress</code> event\r\n     * of the managed object.\r\n     *\r\n     * @param event {qx.event.type.KeySequence} A valid key sequence event\r\n     */\r\n    handleKeyPress(event) {\r\n      // this is a method invoked by an user interaction, so be careful to\r\n      // set / clear the mark this._userInteraction [BUG #3344]\r\n      this._userInteraction = true;\r\n\r\n      var current, next;\r\n      var key = event.getKeyIdentifier();\r\n      var mode = this.getMode();\r\n\r\n      // Support both control keys on Mac\r\n      var isCtrlPressed =\r\n        event.isCtrlPressed() ||\r\n        (qx.core.Environment.get(\"os.name\") == \"osx\" && event.isMetaPressed());\r\n      var isShiftPressed = event.isShiftPressed();\r\n\r\n      var consumed = false;\r\n      var readOnly = this.isReadOnly();\r\n\r\n      if (key === \"A\" && isCtrlPressed && !readOnly) {\r\n        if (mode !== \"single\" && mode !== \"one\") {\r\n          this._selectAllItems();\r\n          consumed = true;\r\n        }\r\n      } else if (key === \"Escape\" && !readOnly) {\r\n        if (mode !== \"single\" && mode !== \"one\") {\r\n          this._clearSelection();\r\n          consumed = true;\r\n        }\r\n      } else if (key === \"Space\" && !readOnly) {\r\n        var lead = this.getLeadItem();\r\n        if (lead != null && !isShiftPressed) {\r\n          if (isCtrlPressed || mode === \"additive\") {\r\n            this._toggleInSelection(lead);\r\n          } else {\r\n            this._setSelectedItem(lead);\r\n          }\r\n          consumed = true;\r\n        }\r\n      } else if (this.__navigationKeys[key] && readOnly) {\r\n        switch (key) {\r\n          case \"Home\":\r\n            next = this._getFirstSelectable();\r\n            break;\r\n\r\n          case \"End\":\r\n            next = this._getLastSelectable();\r\n            break;\r\n\r\n          case \"Up\":\r\n            next = this._getRelatedSelectable(\r\n              this._getFirstVisibleSelectable(),\r\n              \"above\"\r\n            );\r\n\r\n            break;\r\n\r\n          case \"Down\":\r\n            next = this._getRelatedSelectable(\r\n              this._getLastVisibleSelectable(),\r\n              \"under\"\r\n            );\r\n\r\n            break;\r\n\r\n          case \"Left\":\r\n            next = this._getRelatedSelectable(\r\n              this._getFirstVisibleSelectable(),\r\n              \"left\"\r\n            );\r\n\r\n            break;\r\n\r\n          case \"Right\":\r\n            next = this._getRelatedSelectable(\r\n              this._getLastVisibleSelectable(),\r\n              \"right\"\r\n            );\r\n\r\n            break;\r\n\r\n          case \"PageUp\":\r\n            next = this._getPage(this._getFirstVisibleSelectable(), true);\r\n            break;\r\n\r\n          case \"PageDown\":\r\n            next = this._getPage(this._getLastVisibleSelectable(), false);\r\n            break;\r\n        }\r\n\r\n        if (next) {\r\n          consumed = true;\r\n          this.__oldScrollTop = this._getScroll().top;\r\n          this._scrollItemIntoView(next);\r\n        }\r\n      } else if (this.__navigationKeys[key]) {\r\n        consumed = true;\r\n        if (mode === \"single\" || mode == \"one\") {\r\n          current = this._getSelectedItem();\r\n        } else {\r\n          current = this.getLeadItem();\r\n        }\r\n\r\n        if (current !== null) {\r\n          switch (key) {\r\n            case \"Home\":\r\n              next = this._getFirstSelectable();\r\n              break;\r\n\r\n            case \"End\":\r\n              next = this._getLastSelectable();\r\n              break;\r\n\r\n            case \"Up\":\r\n              next = this._getRelatedSelectable(current, \"above\");\r\n              break;\r\n\r\n            case \"Down\":\r\n              next = this._getRelatedSelectable(current, \"under\");\r\n              break;\r\n\r\n            case \"Left\":\r\n              next = this._getRelatedSelectable(current, \"left\");\r\n              break;\r\n\r\n            case \"Right\":\r\n              next = this._getRelatedSelectable(current, \"right\");\r\n              break;\r\n\r\n            case \"PageUp\":\r\n              next = this._getPage(current, true);\r\n              break;\r\n\r\n            case \"PageDown\":\r\n              next = this._getPage(current, false);\r\n              break;\r\n          }\r\n        } else {\r\n          switch (key) {\r\n            case \"Home\":\r\n            case \"Down\":\r\n            case \"Right\":\r\n            case \"PageDown\":\r\n              next = this._getFirstSelectable();\r\n              break;\r\n\r\n            case \"End\":\r\n            case \"Up\":\r\n            case \"Left\":\r\n            case \"PageUp\":\r\n              next = this._getLastSelectable();\r\n              break;\r\n          }\r\n        }\r\n\r\n        // Process result\r\n        if (next !== null) {\r\n          switch (mode) {\r\n            case \"single\":\r\n            case \"one\":\r\n              this._setSelectedItem(next);\r\n              break;\r\n\r\n            case \"additive\":\r\n              this._setLeadItem(next);\r\n              break;\r\n\r\n            case \"multi\":\r\n              if (isShiftPressed) {\r\n                var anchor = this._getAnchorItem();\r\n                if (anchor === null) {\r\n                  this._setAnchorItem((anchor = this._getFirstSelectable()));\r\n                }\r\n\r\n                this._setLeadItem(next);\r\n                this._selectItemRange(anchor, next, isCtrlPressed);\r\n              } else {\r\n                this._setAnchorItem(next);\r\n                this._setLeadItem(next);\r\n\r\n                if (!isCtrlPressed) {\r\n                  this._setSelectedItem(next);\r\n                }\r\n              }\r\n\r\n              break;\r\n          }\r\n\r\n          this.__oldScrollTop = this._getScroll().top;\r\n          this._scrollItemIntoView(next);\r\n        }\r\n      }\r\n\r\n      if (consumed) {\r\n        // Stop processed events\r\n        event.stop();\r\n\r\n        // Fire change event as needed\r\n        this._fireChange(\"key\");\r\n      }\r\n      this._userInteraction = false;\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      SUPPORT FOR ITEM RANGES\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Adds all items to the selection\r\n     */\r\n    _selectAllItems() {\r\n      var range = this.getSelectables();\r\n      for (var i = 0, l = range.length; i < l; i++) {\r\n        this._addToSelection(range[i]);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Clears current selection\r\n     */\r\n    _clearSelection() {\r\n      var selection = this.__selection;\r\n      for (var hash in selection) {\r\n        this._removeFromSelection(selection[hash]);\r\n      }\r\n      this.__selection = {};\r\n    },\r\n\r\n    /**\r\n     * Select a range from <code>item1</code> to <code>item2</code>.\r\n     *\r\n     * @param item1 {Object} Start with this item\r\n     * @param item2 {Object} End with this item\r\n     * @param extend {Boolean?false} Whether the current\r\n     *    selection should be replaced or extended.\r\n     */\r\n    _selectItemRange(item1, item2, extend) {\r\n      var range = this._getSelectableRange(item1, item2);\r\n\r\n      // Remove items which are not in the detected range\r\n      if (!extend) {\r\n        var selected = this.__selection;\r\n        var mapped = this.__rangeToMap(range);\r\n\r\n        for (var hash in selected) {\r\n          if (!mapped[hash]) {\r\n            this._removeFromSelection(selected[hash]);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add new items to the selection\r\n      for (var i = 0, l = range.length; i < l; i++) {\r\n        this._addToSelection(range[i]);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Deselect all items between <code>item1</code> and <code>item2</code>.\r\n     *\r\n     * @param item1 {Object} Start with this item\r\n     * @param item2 {Object} End with this item\r\n     */\r\n    _deselectItemRange(item1, item2) {\r\n      var range = this._getSelectableRange(item1, item2);\r\n      for (var i = 0, l = range.length; i < l; i++) {\r\n        this._removeFromSelection(range[i]);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Internal method to convert a range to a map of hash\r\n     * codes for faster lookup during selection compare routines.\r\n     *\r\n     * @param range {Array} List of selectable items\r\n     */\r\n    __rangeToMap(range) {\r\n      var mapped = {};\r\n      var item;\r\n\r\n      for (var i = 0, l = range.length; i < l; i++) {\r\n        item = range[i];\r\n        mapped[this._selectableToHashCode(item)] = item;\r\n      }\r\n\r\n      return mapped;\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      SINGLE ITEM QUERY AND MODIFICATION\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Returns the first selected item. Only makes sense\r\n     * when using manager in single selection mode.\r\n     *\r\n     * @return {var} The selected item (or <code>null</code>)\r\n     */\r\n    _getSelectedItem() {\r\n      for (var hash in this.__selection) {\r\n        return this.__selection[hash];\r\n      }\r\n\r\n      return null;\r\n    },\r\n\r\n    /**\r\n     * Replace current selection with given item.\r\n     *\r\n     * @param item {var} Any valid selectable item\r\n     */\r\n    _setSelectedItem(item) {\r\n      if (this._isSelectable(item)) {\r\n        // If already selected try to find out if this is the only item\r\n        var current = this.__selection;\r\n        var hash = this._selectableToHashCode(item);\r\n\r\n        if (!current[hash] || current.length >= 2) {\r\n          this._clearSelection();\r\n          this._addToSelection(item);\r\n        }\r\n      }\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      MODIFY ITEM SELECTION\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Adds an item to the current selection.\r\n     *\r\n     * @param item {Object} Any item\r\n     */\r\n    _addToSelection(item) {\r\n      var hash = this._selectableToHashCode(item);\r\n\r\n      if (this.__selection[hash] == null && this._isSelectable(item)) {\r\n        this.__selection[hash] = item;\r\n        this._styleSelectable(item, \"selected\", true);\r\n\r\n        this.__selectionModified = true;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Toggles the item e.g. remove it when already selected\r\n     * or select it when currently not.\r\n     *\r\n     * @param item {Object} Any item\r\n     */\r\n    _toggleInSelection(item) {\r\n      var hash = this._selectableToHashCode(item);\r\n\r\n      if (this.__selection[hash] == null) {\r\n        this.__selection[hash] = item;\r\n        this._styleSelectable(item, \"selected\", true);\r\n      } else {\r\n        delete this.__selection[hash];\r\n        this._styleSelectable(item, \"selected\", false);\r\n      }\r\n\r\n      this.__selectionModified = true;\r\n    },\r\n\r\n    /**\r\n     * Removes the given item from the current selection.\r\n     *\r\n     * @param item {Object} Any item\r\n     */\r\n    _removeFromSelection(item) {\r\n      var hash = this._selectableToHashCode(item);\r\n\r\n      if (this.__selection[hash] != null) {\r\n        delete this.__selection[hash];\r\n        this._styleSelectable(item, \"selected\", false);\r\n\r\n        this.__selectionModified = true;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Replaces current selection with items from given array.\r\n     *\r\n     * @param items {Array} List of items to select\r\n     */\r\n    _replaceMultiSelection(items) {\r\n      if (items.length === 0) {\r\n        this.clearSelection();\r\n        return;\r\n      }\r\n\r\n      var modified = false;\r\n\r\n      // Build map from hash codes and filter non-selectables\r\n      var selectable, hash;\r\n      var incoming = {};\r\n      for (var i = 0, l = items.length; i < l; i++) {\r\n        selectable = items[i];\r\n        if (this._isSelectable(selectable)) {\r\n          hash = this._selectableToHashCode(selectable);\r\n          incoming[hash] = selectable;\r\n        }\r\n      }\r\n\r\n      // Remember last\r\n      var first = items[0];\r\n      var last = selectable;\r\n\r\n      // Clear old entries from map\r\n      var current = this.__selection;\r\n      for (var hash in current) {\r\n        if (incoming[hash]) {\r\n          // Reduce map to make next loop faster\r\n          delete incoming[hash];\r\n        } else {\r\n          // update internal map\r\n          selectable = current[hash];\r\n          delete current[hash];\r\n\r\n          // apply styling\r\n          this._styleSelectable(selectable, \"selected\", false);\r\n\r\n          // remember that the selection has been modified\r\n          modified = true;\r\n        }\r\n      }\r\n\r\n      // Add remaining selectables to selection\r\n      for (var hash in incoming) {\r\n        // update internal map\r\n        selectable = current[hash] = incoming[hash];\r\n\r\n        // apply styling\r\n        this._styleSelectable(selectable, \"selected\", true);\r\n\r\n        // remember that the selection has been modified\r\n        modified = true;\r\n      }\r\n\r\n      // Do not do anything if selection is equal to previous one\r\n      if (!modified) {\r\n        return false;\r\n      }\r\n\r\n      // Scroll last incoming item into view\r\n      this._scrollItemIntoView(last);\r\n\r\n      // Reset anchor and lead item\r\n      this._setLeadItem(first);\r\n      this._setAnchorItem(first);\r\n\r\n      // Finally fire change event\r\n      this.__selectionModified = true;\r\n      this._fireChange();\r\n    },\r\n\r\n    /**\r\n     * Fires the selection change event if the selection has\r\n     * been modified.\r\n     *\r\n     * @param context {String} One of <code>tap</code>, <code>quick</code>,\r\n     *    <code>drag</code> or <code>key</code> or <code>null</code>\r\n     */\r\n    _fireChange(context) {\r\n      if (this.__selectionModified) {\r\n        // Store context\r\n        this.__selectionContext = context || null;\r\n\r\n        // Fire data event which contains the current selection\r\n        this.fireDataEvent(\"changeSelection\", this.getSelection());\r\n        delete this.__selectionModified;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Applies the default selection. The default item is the first item.\r\n     *\r\n     * @param force {Boolean} Whether the default selection should be forced.\r\n     *\r\n     * @return {var} The selected item.\r\n     */\r\n    _applyDefaultSelection(force) {\r\n      if (\r\n        force === true ||\r\n        (this.getMode() === \"one\" && this.isSelectionEmpty())\r\n      ) {\r\n        var first = this._getFirstSelectable();\r\n        if (first != null) {\r\n          this.selectItem(first);\r\n        }\r\n        return first;\r\n      }\r\n      return null;\r\n    }\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     DESTRUCTOR\r\n  *****************************************************************************\r\n  */\r\n\r\n  destruct() {\r\n    this._disposeObjects(\"__scrollTimer\");\r\n    this.__selection = this.__pointerDownOnSelected = this.__anchorItem = null;\r\n    this.__leadItem = null;\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}