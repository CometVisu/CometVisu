{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "source",
    "__contentElements",
    "setSource",
    "properties",
    "check",
    "init",
    "nullable",
    "event",
    "apply",
    "themeable",
    "scale",
    "forceRatio",
    "allowScaleUp",
    "appearance",
    "refine",
    "allowShrinkX",
    "allowShrinkY",
    "allowGrowX",
    "allowGrowY",
    "events",
    "loadingFailed",
    "loaded",
    "aborted",
    "statics",
    "PLACEHOLDER_IMAGE",
    "members",
    "__width",
    "__height",
    "__mode",
    "__currentContentElement",
    "__wrapper",
    "__requestId",
    "_onChangeTheme",
    "_styleSource",
    "getContentElement",
    "__getSuitableContentElement",
    "_createContentElement",
    "_getContentHint",
    "width",
    "height",
    "_applyDecorator",
    "value",
    "old",
    "getSource",
    "util",
    "AliasManager",
    "getInstance",
    "resolve",
    "el",
    "getChild",
    "__setSource",
    "_applyTextColor",
    "__getMode",
    "setStyle",
    "theme",
    "manager",
    "Color",
    "removeStyle",
    "_applyPadding",
    "name",
    "element",
    "setStyles",
    "top",
    "getPaddingTop",
    "left",
    "getPaddingLeft",
    "setPadding",
    "renderLayout",
    "getPaddingRight",
    "getPaddingBottom",
    "_applyEnabled",
    "_applySource",
    "io",
    "ImageLoader",
    "isLoading",
    "abort",
    "_applyScale",
    "__setMode",
    "mode",
    "lang",
    "String",
    "startsWith",
    "isPng",
    "endsWith",
    "getScale",
    "Environment",
    "get",
    "__createSuitableContentElement",
    "tagName",
    "clazz",
    "html",
    "Image",
    "Label",
    "connectObject",
    "overflowX",
    "overflowY",
    "boxSizing",
    "setRich",
    "setScale",
    "wrapper",
    "Element",
    "add",
    "$$disposed",
    "ResourceManager",
    "__resetSource",
    "__checkForContentElementSwitch",
    "parseInt",
    "repeat",
    "tagNameHint",
    "bom",
    "Decoration",
    "getTagName",
    "contentEl",
    "__getContentElement",
    "isFontUri",
    "__setManagedImage",
    "color",
    "getTextColor",
    "Type",
    "isString",
    "has",
    "highResolutionSource",
    "findHighResolutionSource",
    "imageWidth",
    "getImageWidth",
    "imageHeight",
    "getImageHeight",
    "setWidth",
    "setHeight",
    "backgroundSize",
    "__fireLoadEvent",
    "isLoaded",
    "__setUnmanagedImage",
    "__loadUnmanagedImage",
    "AnimationFrame",
    "request",
    "rId",
    "fireEvent",
    "bind",
    "select",
    "mshtml",
    "alphaImageLoader",
    "isFont",
    "__checkForContentElementReplacement",
    "elementToAdd",
    "currentContentElement",
    "pixel",
    "styles",
    "currentStyles",
    "getAllStyles",
    "prop",
    "backgroundImage",
    "bounds",
    "getBounds",
    "insets",
    "getInsets",
    "getStyle",
    "zIndex",
    "newEl",
    "setSelectable",
    "getSelectable",
    "isVisible",
    "hide",
    "show",
    "isIncluded",
    "exclude",
    "include",
    "container",
    "getParent",
    "index",
    "getChildren",
    "indexOf",
    "removeAt",
    "addAt",
    "hint",
    "getNodeName",
    "setValue",
    "currentEl",
    "setAttribute",
    "getAttribute",
    "flush",
    "currentDomEl",
    "getDomElement",
    "newDomEl",
    "listeners",
    "getListeners",
    "forEach",
    "listenerData",
    "addListener",
    "type",
    "handler",
    "self",
    "capture",
    "currentHash",
    "$$hash",
    "getEnabled",
    "disabled",
    "replace",
    "addState",
    "removeState",
    "split",
    "getSizeHint",
    "getWidth",
    "getHeight",
    "font",
    "__getFont",
    "size",
    "getSize",
    "__updateContentHint",
    "__setFontSize",
    "sparts",
    "_applyDimension",
    "isFailed",
    "load",
    "__loaderCallback",
    "resetSource",
    "resetValue",
    "Font",
    "match",
    "Error",
    "fontStyles",
    "Object",
    "clone",
    "getStyles",
    "charCode",
    "fromFontUriToCharCode",
    "fromCharCode",
    "decorator",
    "getDecorator",
    "hasGradient",
    "getStartColor",
    "getEndColor",
    "hasBackground",
    "getBackgroundImage",
    "attr",
    "getAttributes",
    "decoratorStyle",
    "combinedStyles",
    "style",
    "backgroundPosition",
    "backgroundRepeat",
    "position",
    "getBackgroundRepeat",
    "imageInfo",
    "failed",
    "warn",
    "undefined",
    "_recalc",
    "queue",
    "Layout",
    "originalWidth",
    "originalHeight",
    "maxWidth",
    "getMaxWidth",
    "maxHeight",
    "getMaxHeight",
    "minWidth",
    "getMinWidth",
    "minHeight",
    "getMinHeight",
    "ratio",
    "getForceRatio",
    "isAllowScaleUp",
    "Math",
    "round",
    "destruct",
    "hasOwnProperty",
    "disconnectObject",
    "_disposeMap",
    "basic"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/basic/Image.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Sebastian Werner (wpbasti)\n\n************************************************************************ */\n\n/**\n * The image class displays an image file\n *\n * This class supports image clipping, which means that multiple images can be combined\n * into one large image and only the relevant part is shown.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.basic.Image(\"icon/32/actions/format-justify-left.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>icon/32/actions/format-justify-left.png</code>.\n *\n * *External Documentation*\n *\n * <a href='http://qooxdoo.org/docs/#desktop/widget/image.md' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n */\nqx.Class.define(\"qx.ui.basic.Image\", {\n  extend: qx.ui.core.Widget,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param source {String?null} The URL of the image to display.\n   */\n  construct(source) {\n    this.__contentElements = {};\n\n    super();\n\n    if (source) {\n      this.setSource(source);\n    }\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /** The URL of the image. Setting it will possibly abort loading of current image. */\n    source: {\n      check: \"String\",\n      init: null,\n      nullable: true,\n      event: \"changeSource\",\n      apply: \"_applySource\",\n      themeable: true\n    },\n\n    /**\n     * Whether the image should be scaled to the given dimensions\n     *\n     * This is disabled by default because it prevents the usage\n     * of image clipping when enabled.\n     */\n    scale: {\n      check: \"Boolean\",\n      init: false,\n      event: \"changeScale\",\n      themeable: true,\n      apply: \"_applyScale\"\n    },\n\n    /**\n     * Whether to preserve the image ratio (ie prevent distortion), and which dimension\n     * to prioritise\n     */\n    forceRatio: {\n      init: \"auto\",\n      check: [\"disabled\", \"height\", \"width\", \"auto\"],\n      apply: \"_applyDimension\"\n    },\n\n    /**\n     * Whether to allow scaling the image up\n     */\n    allowScaleUp: {\n      init: false,\n      check: \"Boolean\",\n      apply: \"_applyDimension\"\n    },\n\n    // overridden\n    appearance: {\n      refine: true,\n      init: \"image\"\n    },\n\n    // overridden\n    allowShrinkX: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowShrinkY: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowGrowX: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowGrowY: {\n      refine: true,\n      init: false\n    }\n  },\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events: {\n    /**\n     * Fired if the image source can not be loaded. This event can only be\n     * fired for the first loading of an unmanaged resource (external image).\n     */\n    loadingFailed: \"qx.event.type.Event\",\n\n    /**\n     * Fired if the image has been loaded. This is even true for managed\n     * resources (images known by generator).\n     */\n    loaded: \"qx.event.type.Event\",\n\n    /** Fired when the pending request has been aborted. */\n    aborted: \"qx.event.type.Event\"\n  },\n\n  statics: {\n    PLACEHOLDER_IMAGE:\n      \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __width: null,\n    __height: null,\n    __mode: null,\n    __contentElements: null,\n    __currentContentElement: null,\n    __wrapper: null,\n    __requestId: 0,\n\n    // overridden\n    _onChangeTheme() {\n      super._onChangeTheme();\n      // restyle source (theme change might have changed the resolved url)\n      this._styleSource();\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      WIDGET API\n    ---------------------------------------------------------------------------\n    */\n\n    // overridden\n    getContentElement() {\n      return this.__getSuitableContentElement();\n    },\n\n    // overridden\n    _createContentElement() {\n      return this.__getSuitableContentElement();\n    },\n\n    // overridden\n    _getContentHint() {\n      return {\n        width: this.__width || 0,\n        height: this.__height || 0\n      };\n    },\n\n    // overridden\n    _applyDecorator(value, old) {\n      super._applyDecorator(value, old);\n\n      var source = this.getSource();\n      source = qx.util.AliasManager.getInstance().resolve(source);\n      var el = this.getContentElement();\n      if (this.__wrapper) {\n        el = el.getChild(0);\n      }\n      this.__setSource(el, source);\n    },\n\n    // overridden\n    _applyTextColor(value) {\n      if (this.__getMode() === \"font\") {\n        var el = this.getContentElement();\n        if (this.__wrapper) {\n          el = el.getChild(0);\n        }\n\n        if (value) {\n          el.setStyle(\n            \"color\",\n            qx.theme.manager.Color.getInstance().resolve(value)\n          );\n        } else {\n          el.removeStyle(\"color\");\n        }\n      }\n    },\n\n    // overridden\n    _applyPadding(value, old, name) {\n      super._applyPadding(value, old, name);\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else if (this.__getMode() === \"font\") {\n        element.setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else {\n        element.setPadding(\n          this.getPaddingLeft() || 0,\n          this.getPaddingTop() || 0\n        );\n      }\n    },\n\n    renderLayout(left, top, width, height) {\n      super.renderLayout(left, top, width, height);\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          width:\n            width -\n            (this.getPaddingLeft() || 0) -\n            (this.getPaddingRight() || 0),\n          height:\n            height -\n            (this.getPaddingTop() || 0) -\n            (this.getPaddingBottom() || 0),\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      IMAGE API\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply, overridden\n    _applyEnabled(value, old) {\n      super._applyEnabled(value, old);\n\n      if (this.getSource()) {\n        this._styleSource();\n      }\n    },\n\n    // property apply\n    _applySource(value, old) {\n      // abort loading current image\n      if (old) {\n        if (qx.io.ImageLoader.isLoading(old)) {\n          qx.io.ImageLoader.abort(old);\n        }\n      }\n\n      this._styleSource();\n    },\n\n    // property apply\n    _applyScale(value) {\n      this._styleSource();\n    },\n\n    /**\n     * Remembers the mode to keep track which contentElement is currently in use.\n     * @param mode {String} internal mode (alphaScaled|scaled|nonScaled)\n     */\n    __setMode(mode) {\n      this.__mode = mode;\n    },\n\n    /**\n     * Returns the current mode if set. Otherwise checks the current source and\n     * the current scaling to determine the current mode.\n     *\n     * @return {String} current internal mode\n     */\n    __getMode() {\n      if (this.__mode == null) {\n        var source = this.getSource();\n\n        if (source && qx.lang.String.startsWith(source, \"@\")) {\n          this.__mode = \"font\";\n        }\n\n        var isPng = false;\n        if (source != null) {\n          isPng = source.endsWith(\".png\");\n        }\n\n        if (\n          this.getScale() &&\n          isPng &&\n          qx.core.Environment.get(\"css.alphaimageloaderneeded\")\n        ) {\n          this.__mode = \"alphaScaled\";\n        } else if (this.getScale()) {\n          this.__mode = \"scaled\";\n        } else {\n          this.__mode = \"nonScaled\";\n        }\n      }\n\n      return this.__mode;\n    },\n\n    /**\n     * Creates a contentElement suitable for the current mode\n     *\n     * @param mode {String} internal mode\n     * @return {qx.html.Image} suitable image content element\n     */\n    __createSuitableContentElement(mode) {\n      var scale;\n      var tagName;\n      var clazz = qx.html.Image;\n\n      switch (mode) {\n        case \"font\":\n          clazz = qx.html.Label;\n          scale = true;\n          tagName = \"div\";\n          break;\n        case \"alphaScaled\":\n          scale = true;\n          tagName = \"div\";\n          break;\n        case \"nonScaled\":\n          scale = false;\n          tagName = \"div\";\n          break;\n        default:\n          scale = true;\n          tagName = \"img\";\n          break;\n      }\n\n      var element = new clazz(tagName);\n      element.connectObject(this);\n      element.setStyles({\n        overflowX: \"hidden\",\n        overflowY: \"hidden\",\n        boxSizing: \"border-box\"\n      });\n\n      if (mode == \"font\") {\n        element.setRich(true);\n      } else {\n        element.setScale(scale);\n\n        if (qx.core.Environment.get(\"css.alphaimageloaderneeded\")) {\n          var wrapper = (this.__wrapper = new qx.html.Element(\"div\"));\n          element.connectObject(this);\n          wrapper.setStyle(\"position\", \"absolute\");\n          wrapper.add(element);\n          return wrapper;\n        }\n      }\n\n      return element;\n    },\n\n    /**\n     * Returns a contentElement suitable for the current mode\n     *\n     * @return {qx.html.Image} suitable image contentElement\n     */\n    __getSuitableContentElement() {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      var mode = this.__getMode();\n\n      if (this.__contentElements[mode] == null) {\n        this.__contentElements[mode] =\n          this.__createSuitableContentElement(mode);\n      }\n\n      var element = this.__contentElements[mode];\n\n      if (!this.__currentContentElement) {\n        this.__currentContentElement = element;\n      }\n\n      return element;\n    },\n\n    /**\n     * Applies the source to the clipped image instance or preload\n     * an image to detect sizes and apply it afterwards.\n     *\n     */\n    _styleSource() {\n      var AliasManager = qx.util.AliasManager.getInstance();\n      var ResourceManager = qx.util.ResourceManager.getInstance();\n\n      var source = AliasManager.resolve(this.getSource());\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element = element.getChild(0);\n      }\n\n      if (!source) {\n        this.__resetSource(element);\n        return;\n      }\n\n      this.__checkForContentElementSwitch(source);\n\n      if (\n        qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n        (parseInt(qx.core.Environment.get(\"engine.version\"), 10) < 9 ||\n          qx.core.Environment.get(\"browser.documentmode\") < 9)\n      ) {\n        var repeat = this.getScale() ? \"scale\" : \"no-repeat\";\n        element.tagNameHint = qx.bom.element.Decoration.getTagName(\n          repeat,\n          source\n        );\n      }\n\n      var contentEl = this.__getContentElement();\n\n      // Detect if the image registry knows this image\n      if (ResourceManager.isFontUri(source)) {\n        this.__setManagedImage(contentEl, source);\n        var color = this.getTextColor();\n        if (qx.lang.Type.isString(color)) {\n          this._applyTextColor(color, null);\n        }\n      } else if (ResourceManager.has(source)) {\n        var highResolutionSource =\n          ResourceManager.findHighResolutionSource(source);\n        if (highResolutionSource) {\n          var imageWidth = ResourceManager.getImageWidth(source);\n          var imageHeight = ResourceManager.getImageHeight(source);\n          this.setWidth(imageWidth);\n          this.setHeight(imageHeight);\n\n          // set background size on current element (div or img)\n          var backgroundSize = imageWidth + \"px, \" + imageHeight + \"px\";\n          this.__currentContentElement.setStyle(\n            \"background-size\",\n            backgroundSize\n          );\n\n          this.setSource(highResolutionSource);\n          source = highResolutionSource;\n        }\n        this.__setManagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else if (qx.io.ImageLoader.isLoaded(source)) {\n        this.__setUnmanagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else {\n        this.__loadUnmanagedImage(contentEl, source);\n      }\n    },\n\n    /**\n     * Helper function, which fires <code>loaded</code> event asynchronously.\n     * It emulates native <code>loaded</code> event of an image object. This\n     * helper will be called, if you try to load a managed image or an\n     * previously loaded unmanaged image.\n     */\n    __fireLoadEvent() {\n      this.__requestId++;\n      qx.bom.AnimationFrame.request(\n        function (rId) {\n          // prevent firing of the event if source changed in the meantime\n          if (rId === this.__requestId) {\n            this.fireEvent(\"loaded\");\n          } else {\n            this.fireEvent(\"aborted\");\n          }\n        }.bind(this, this.__requestId)\n      );\n    },\n\n    /**\n     * Returns the content element.\n     * @return {qx.html.Image} content element\n     */\n    __getContentElement() {\n      var contentEl = this.__currentContentElement;\n      if (this.__wrapper) {\n        contentEl = contentEl.getChild(0);\n      }\n\n      return contentEl;\n    },\n\n    /**\n     * Checks if the current content element is capable to display the image\n     * with the current settings (scaling, alpha PNG)\n     *\n     * @param source {String} source of the image\n     */\n    __checkForContentElementSwitch: qx.core.Environment.select(\"engine.name\", {\n      mshtml(source) {\n        var alphaImageLoader = qx.core.Environment.get(\n          \"css.alphaimageloaderneeded\"\n        );\n\n        var isPng = source.endsWith(\".png\");\n        var isFont = source.startsWith(\"@\");\n\n        if (isFont) {\n          this.__setMode(\"font\");\n        } else if (alphaImageLoader && isPng) {\n          if (this.getScale() && this.__getMode() != \"alphaScaled\") {\n            this.__setMode(\"alphaScaled\");\n          } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n            this.__setMode(\"nonScaled\");\n          }\n        } else {\n          if (this.getScale() && this.__getMode() != \"scaled\") {\n            this.__setMode(\"scaled\");\n          } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n            this.__setMode(\"nonScaled\");\n          }\n        }\n\n        this.__checkForContentElementReplacement(\n          this.__getSuitableContentElement()\n        );\n      },\n\n      default(source) {\n        var isFont = source && qx.lang.String.startsWith(source, \"@\");\n\n        if (isFont) {\n          this.__setMode(\"font\");\n        } else if (this.getScale() && this.__getMode() != \"scaled\") {\n          this.__setMode(\"scaled\");\n        } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n          this.__setMode(\"nonScaled\");\n        }\n\n        this.__checkForContentElementReplacement(\n          this.__getSuitableContentElement()\n        );\n      }\n    }),\n\n    /**\n     * Checks the current child and replaces it if necessary\n     *\n     * @param elementToAdd {qx.html.Image} content element to add\n     */\n    __checkForContentElementReplacement(elementToAdd) {\n      var currentContentElement = this.__currentContentElement;\n\n      if (currentContentElement != elementToAdd) {\n        if (currentContentElement != null) {\n          var pixel = \"px\";\n          var styles = {};\n\n          //inherit styles from current element\n          var currentStyles = currentContentElement.getAllStyles();\n          if (currentStyles) {\n            for (var prop in currentStyles) {\n              styles[prop] = currentStyles[prop];\n            }\n          }\n\n          // Don't transfer background image when switching from image to icon font\n          var mode = this.__getMode();\n          if (mode === \"font\" || mode === \"scaled\") {\n            delete styles.backgroundImage;\n          }\n\n          // Copy dimension and location of the current content element\n          var bounds = this.getBounds();\n          if (bounds != null) {\n            styles.width = bounds.width + pixel;\n            styles.height = bounds.height + pixel;\n          }\n\n          var insets = this.getInsets();\n          styles.left =\n            parseInt(currentContentElement.getStyle(\"left\") || insets.left) +\n            pixel;\n          styles.top =\n            parseInt(currentContentElement.getStyle(\"top\") || insets.top) +\n            pixel;\n\n          styles.zIndex = 10;\n\n          var newEl = this.__wrapper ? elementToAdd.getChild(0) : elementToAdd;\n          newEl.setStyles(styles, true);\n          newEl.setSelectable(this.getSelectable());\n\n          if (!currentContentElement.isVisible()) {\n            elementToAdd.hide();\n          } else if (!elementToAdd.isVisible()) {\n            elementToAdd.show();\n          }\n\n          if (!currentContentElement.isIncluded()) {\n            elementToAdd.exclude();\n          } else if (!elementToAdd.isIncluded()) {\n            elementToAdd.include();\n          }\n\n          var container = currentContentElement.getParent();\n\n          if (container) {\n            var index = container.getChildren().indexOf(currentContentElement);\n            container.removeAt(index);\n            container.addAt(elementToAdd, index);\n          }\n          // force re-application of source so __setSource is called again\n          var hint = newEl.getNodeName();\n          if (newEl.setSource) {\n            newEl.setSource(null);\n          } else {\n            newEl.setValue(\"\");\n          }\n          var currentEl = this.__getContentElement();\n          newEl.tagNameHint = hint;\n          newEl.setAttribute(\"class\", currentEl.getAttribute(\"class\"));\n\n          // Flush elements to make sure the DOM elements are created.\n          qx.html.Element.flush();\n          var currentDomEl = currentEl.getDomElement();\n          var newDomEl = elementToAdd.getDomElement();\n\n          // copy event listeners\n          var listeners = currentContentElement.getListeners() || [];\n          listeners.forEach(function (listenerData) {\n            elementToAdd.addListener(\n              listenerData.type,\n              listenerData.handler,\n              listenerData.self,\n              listenerData.capture\n            );\n          });\n\n          if (currentDomEl && newDomEl) {\n            // Switch the DOM elements' hash codes. This is required for the event\n            // layer to work [BUG #7447]\n            var currentHash = currentDomEl.$$hash;\n            currentDomEl.$$hash = newDomEl.$$hash;\n            newDomEl.$$hash = currentHash;\n          }\n\n          this.__currentContentElement = elementToAdd;\n        }\n      }\n    },\n\n    /**\n     * Use the ResourceManager to set a managed image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setManagedImage(el, source) {\n      var ResourceManager = qx.util.ResourceManager.getInstance();\n      var isFont = ResourceManager.isFontUri(source);\n\n      // Try to find a disabled image in registry\n      if (!this.getEnabled()) {\n        var disabled = source.replace(/\\.([a-z]+)$/, \"-disabled.$1\");\n        if (!isFont && ResourceManager.has(disabled)) {\n          source = disabled;\n          this.addState(\"replacement\");\n        } else {\n          this.removeState(\"replacement\");\n        }\n      }\n\n      // Optimize case for enabled changes when no disabled image was found\n      if (!isFont && el.getSource() === source) {\n        return;\n      }\n\n      // Special case for non resource manager handled font icons\n      if (isFont) {\n        // Don't use scale if size is set via postfix\n        if (this.getScale() && parseInt(source.split(\"/\")[2], 10)) {\n          this.setScale(false);\n        }\n\n        // Adjust size if scaling is applied\n        var width;\n        var height;\n        if (this.getScale()) {\n          var hint = this.getSizeHint();\n          width = this.getWidth() || hint.width;\n          height = this.getHeight() || hint.height;\n        } else {\n          var font = this.__getFont(source);\n          var size = parseInt(source.split(\"/\")[2] || font.getSize(), 10);\n          width = ResourceManager.getImageWidth(source) || size;\n          height = ResourceManager.getImageHeight(source) || size;\n        }\n\n        this.__updateContentHint(width, height);\n        this.__setSource(el, source);\n\n        // Apply source\n      } else {\n        // Apply source\n        this.__setSource(el, source);\n\n        // Compare with old sizes and relayout if necessary\n        this.__updateContentHint(\n          ResourceManager.getImageWidth(source),\n          ResourceManager.getImageHeight(source)\n        );\n      }\n    },\n\n    __setFontSize(el, width, height) {\n      if (this.getScale()) {\n        el.setStyle(\"fontSize\", (width > height ? height : width) + \"px\");\n      } else {\n        var source = qx.util.AliasManager.getInstance().resolve(\n          this.getSource()\n        );\n\n        var sparts = source.split(\"/\");\n        var font = this.__getFont(source);\n        var size = parseInt(sparts[2] || font.getSize());\n        el.setStyle(\"fontSize\", size + \"px\");\n      }\n    },\n\n    _applyDimension() {\n      super._applyDimension();\n\n      var isFont =\n        this.getSource() && qx.lang.String.startsWith(this.getSource(), \"@\");\n      if (isFont) {\n        var el = this.getContentElement();\n        if (el) {\n          var hint = this.getSizeHint();\n          var width = this.getWidth() || hint.width || 40;\n          var height = this.getHeight() || hint.height || 40;\n          this.__setFontSize(el, width, height);\n        }\n      } else {\n        this.__updateContentHint();\n      }\n    },\n\n    /**\n     * Use the infos of the ImageLoader to set an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setUnmanagedImage(el, source) {\n      var ImageLoader = qx.io.ImageLoader;\n\n      // Apply source\n      this.__setSource(el, source);\n\n      // Compare with old sizes and relayout if necessary\n      var width = ImageLoader.getWidth(source);\n      var height = ImageLoader.getHeight(source);\n      this.__updateContentHint(width, height);\n    },\n\n    /**\n     * Use the ImageLoader to load an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __loadUnmanagedImage(el, source) {\n      var ImageLoader = qx.io.ImageLoader;\n\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        // loading external images via HTTP/HTTPS is a common usecase, as is\n        // using data URLs.\n        var sourceLC = source.toLowerCase();\n        if (\n          !sourceLC.startsWith(\"http\") &&\n          !sourceLC.startsWith(\"data:image/\")\n        ) {\n          var self = this.self(arguments);\n\n          if (!self.__warned) {\n            self.__warned = {};\n          }\n\n          if (!self.__warned[source]) {\n            this.debug(\"try to load an unmanaged relative image: \" + source);\n            self.__warned[source] = true;\n          }\n        }\n      }\n\n      // only try to load the image if it not already failed\n      if (!ImageLoader.isFailed(source)) {\n        ImageLoader.load(source, this.__loaderCallback, this);\n      } else {\n        this.__resetSource(el);\n      }\n    },\n\n    /**\n     * Reset source displayed by the DOM element.\n     *\n     * @param el {Element} image DOM element\n     */\n    __resetSource(el) {\n      if (el != null) {\n        if (el instanceof qx.html.Image) {\n          el.resetSource();\n        } else {\n          el.resetValue();\n        }\n      }\n    },\n\n    __getFont(source) {\n      var font = qx.theme.manager.Font.getInstance().resolve(\n        source.match(/@([^/]+)/)[1]\n      );\n\n      if (typeof font == \"string\") {\n        throw new Error(\n          `Cannot find font in virtual image source: '${source}'`\n        );\n      }\n      return font;\n    },\n\n    /**\n     * Combines the decorator's image styles with our own image to make sure\n     * gradient and backgroundImage decorators work on Images.\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setSource(el, source) {\n      var isFont = source && qx.lang.String.startsWith(source, \"@\");\n\n      if (isFont) {\n        var ResourceManager = qx.util.ResourceManager.getInstance();\n        var font = this.__getFont(source);\n        var fontStyles = qx.lang.Object.clone(font.getStyles());\n        delete fontStyles.color;\n        el.setStyles(fontStyles);\n        el.setStyle(\"font\");\n        el.setStyle(\"display\", \"table-cell\");\n        el.setStyle(\"verticalAlign\", \"middle\");\n        el.setStyle(\"textAlign\", \"center\");\n\n        this.__setFontSize(el, this.__width, this.__height);\n\n        var charCode = ResourceManager.fromFontUriToCharCode(source);\n        el.setValue(String.fromCharCode(charCode));\n\n        return;\n      } else if (el.getNodeName() == \"div\") {\n        // checks if a decorator already set.\n        // In this case we have to merge background styles\n        var decorator = qx.theme.manager.Decoration.getInstance().resolve(\n          this.getDecorator()\n        );\n\n        if (decorator) {\n          var hasGradient =\n            decorator.getStartColor() && decorator.getEndColor();\n          var hasBackground = decorator.getBackgroundImage();\n          if (hasGradient || hasBackground) {\n            var repeat = this.getScale() ? \"scale\" : \"no-repeat\";\n\n            // get the style attributes for the given source\n            var attr = qx.bom.element.Decoration.getAttributes(source, repeat);\n            // get the background image(s) defined by the decorator\n            var decoratorStyle = decorator.getStyles(true);\n\n            var combinedStyles = {\n              backgroundImage: attr.style.backgroundImage,\n              backgroundPosition: attr.style.backgroundPosition || \"0 0\",\n              backgroundRepeat: attr.style.backgroundRepeat || \"no-repeat\",\n              position: \"absolute\"\n            };\n\n            if (hasBackground) {\n              combinedStyles[\"backgroundPosition\"] +=\n                \",\" + decoratorStyle[\"background-position\"] || \"0 0\";\n              combinedStyles[\"backgroundRepeat\"] +=\n                \", \" + decorator.getBackgroundRepeat();\n            }\n\n            if (hasGradient) {\n              combinedStyles[\"backgroundPosition\"] += \", 0 0\";\n              combinedStyles[\"backgroundRepeat\"] += \", no-repeat\";\n            }\n\n            combinedStyles[\"backgroundImage\"] +=\n              \",\" +\n              (decoratorStyle[\"background-image\"] ||\n                decoratorStyle[\"background\"]);\n\n            // apply combined background images\n            el.setStyles(combinedStyles);\n\n            return;\n          }\n        } else {\n          // force re-apply to remove old decorator styles\n          if (el.setSource) {\n            el.setSource(null);\n          }\n        }\n      }\n      if (el.setSource) {\n        el.setSource(source);\n        el.setStyle(\"position\", \"absolute\");\n      }\n    },\n\n    /**\n     * Event handler fired after the preloader has finished loading the icon\n     *\n     * @param source {String} Image source which was loaded\n     * @param imageInfo {Map} Dimensions of the loaded image\n     */\n    __loaderCallback(source, imageInfo) {\n      // Ignore the callback on already disposed images\n      if (this.$$disposed === true) {\n        return;\n      }\n\n      // Ignore when the source has already been modified\n      if (\n        source !== qx.util.AliasManager.getInstance().resolve(this.getSource())\n      ) {\n        this.fireEvent(\"aborted\");\n        return;\n      }\n\n      /// Output a warning if the image could not loaded and quit\n      if (imageInfo.failed) {\n        this.warn(\"Image could not be loaded: \" + source);\n        this.fireEvent(\"loadingFailed\");\n      } else if (imageInfo.aborted) {\n        this.fireEvent(\"aborted\");\n        return;\n      } else {\n        this.fireEvent(\"loaded\");\n      }\n\n      // Update image\n      this.__setUnmanagedImage(this.__getContentElement(), source);\n    },\n\n    /**\n     * Updates the content hint when the image size has been changed\n     *\n     * @param width {Integer} width of the image\n     * @param height {Integer} height of the image\n     */\n    __updateContentHint(width, height) {\n      if (width === undefined) {\n        width = this.__width;\n      }\n      if (height === undefined) {\n        height = this.__height;\n      }\n      if (this._recalc(width, height)) {\n        qx.ui.core.queue.Layout.add(this);\n      }\n    },\n\n    /**\n     * Recalculates the size of the image, according to scaling parameters\n     * @param maxWidth {Integer?} maximum width restriction\n     * @param maxHeight {Integer?} minimum height restriction\n     */\n    _recalc(originalWidth, originalHeight) {\n      var maxWidth = this.getMaxWidth();\n      var maxHeight = this.getMaxHeight();\n      var minWidth = this.getMinWidth();\n      var minHeight = this.getMinHeight();\n\n      var width = originalWidth;\n      var height = originalHeight;\n\n      var ratio = originalHeight / originalWidth;\n\n      switch (this.getForceRatio()) {\n        case \"height\":\n          if (maxHeight !== null && height > maxHeight) {\n            height = maxHeight;\n            width = height / ratio;\n          } else if (height < minHeight) {\n            height = minHeight;\n            width = height / ratio;\n          }\n          if (height < maxHeight && this.isAllowScaleUp()) {\n            height = maxHeight;\n            width = height / ratio;\n          }\n          break;\n\n        case \"width\":\n          if (maxWidth !== null && width > maxWidth) {\n            width = maxWidth;\n            height = width * ratio;\n          } else if (width < minWidth) {\n            width = minWidth;\n            height = width * ratio;\n          }\n          if (width < maxWidth && this.isAllowScaleUp()) {\n            width = maxWidth;\n            height = width * ratio;\n          }\n          break;\n\n        case \"auto\":\n        case \"bestfit\":\n          if (maxWidth !== null && width > maxWidth) {\n            width = maxWidth;\n            height = width * ratio;\n          } else if (width < minWidth) {\n            width = minWidth;\n            height = width * ratio;\n          }\n          if (width < maxWidth && this.isAllowScaleUp()) {\n            width = maxWidth;\n            height = width * ratio;\n          }\n          if (maxHeight !== null && height > maxHeight) {\n            height = maxHeight;\n            width = height / ratio;\n          }\n          break;\n      }\n\n      width = Math.round(width);\n      height = Math.round(height);\n      if (width != this.__width || height != this.__height) {\n        this.__width = width;\n        this.__height = height;\n        return true;\n      }\n      return false;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    for (var mode in this.__contentElements) {\n      if (this.__contentElements.hasOwnProperty(mode)) {\n        this.__contentElements[mode].disconnectObject(this);\n      }\n    }\n\n    delete this.__currentContentElement;\n    if (this.__wrapper) {\n      delete this.__wrapper;\n    }\n\n    this._disposeMap(\"__contentElements\");\n  }\n});\n"
  ],
  "mappings": "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"
}