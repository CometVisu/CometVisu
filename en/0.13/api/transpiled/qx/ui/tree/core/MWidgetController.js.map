{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "__boundItems",
    "properties",
    "labelPath",
    "check",
    "nullable",
    "iconPath",
    "labelOptions",
    "iconOptions",
    "childProperty",
    "delegate",
    "event",
    "init",
    "members",
    "bindDefaultProperties",
    "item",
    "index",
    "bindProperty",
    "getLabelPath",
    "getLabelOptions",
    "bindPath",
    "__getBindPath",
    "bindTarget",
    "_tree",
    "getLookupTable",
    "data",
    "SingleValueBinding",
    "resolvePropertyChain",
    "util",
    "OOUtil",
    "hasProperty",
    "constructor",
    "getChildProperty",
    "converter",
    "setAppearance",
    "getIconPath",
    "getIconOptions",
    "sourcePath",
    "targetProperty",
    "options",
    "targetWidget",
    "id",
    "bind",
    "__addBinding",
    "bindPropertyReverse",
    "targetPath",
    "sourceProperty",
    "sourceWidget",
    "removeBindings",
    "length",
    "pop",
    "_removeBindingsFrom",
    "_bindItem",
    "bindItem",
    "Delegate",
    "getMethod",
    "getDelegate",
    "bindings",
    "__getBindings",
    "removeBinding",
    "e",
    "includes",
    "lang",
    "Array",
    "remove",
    "__P_465_1",
    "path",
    "__P_465_2",
    "widget",
    "push",
    "__P_465_3",
    "getUserData",
    "setUserData",
    "destruct",
    "ui",
    "tree",
    "core",
    "MWidgetController"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/ui/tree/core/MWidgetController.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Christian Hagendorn (chris_schmidt)\r\n     * Martin Wittemann (martinwittemann)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * The mixin controls the binding between model and item.\r\n *\r\n * @internal\r\n */\r\nqx.Mixin.define(\"qx.ui.tree.core.MWidgetController\", {\r\n  construct() {\r\n    this.__boundItems = [];\r\n  },\r\n\r\n  properties: {\r\n    /**\r\n     * The name of the property, where the value for the tree node/leaf label\r\n     * is stored in the model classes.\r\n     */\r\n    labelPath: {\r\n      check: \"String\",\r\n      nullable: true\r\n    },\r\n\r\n    /**\r\n     * The path to the property which holds the information that should be\r\n     * shown as an icon.\r\n     */\r\n    iconPath: {\r\n      check: \"String\",\r\n      nullable: true\r\n    },\r\n\r\n    /**\r\n     * A map containing the options for the label binding. The possible keys\r\n     * can be found in the {@link qx.data.SingleValueBinding} documentation.\r\n     */\r\n    labelOptions: {\r\n      nullable: true\r\n    },\r\n\r\n    /**\r\n     * A map containing the options for the icon binding. The possible keys\r\n     * can be found in the {@link qx.data.SingleValueBinding} documentation.\r\n     */\r\n    iconOptions: {\r\n      nullable: true\r\n    },\r\n\r\n    /**\r\n     * The name of the property, where the children are stored in the model.\r\n     * Instead of the {@link #labelPath} must the child property a direct\r\n     * property form the model instance.\r\n     */\r\n    childProperty: {\r\n      check: \"String\",\r\n      nullable: true\r\n    },\r\n\r\n    /**\r\n     * Delegation object, which can have one or more functions defined by the\r\n     * {@link qx.ui.tree.core.IVirtualTreeDelegate} interface.\r\n     */\r\n    delegate: {\r\n      event: \"changeDelegate\",\r\n      init: null,\r\n      nullable: true\r\n    }\r\n  },\r\n\r\n  members: {\r\n    /** @type {Array} which contains the bounded items */\r\n    __boundItems: null,\r\n\r\n    /**\r\n     * Helper-Method for binding the default properties from the model to the\r\n     * target widget. The used default properties  depends on the passed item.\r\n     *\r\n     * This method should only be called in the {@link IVirtualTreeDelegate#bindItem}\r\n     * function implemented by the {@link #delegate} property.\r\n     *\r\n     * @param item {qx.ui.core.Widget} The internally created and used node or\r\n     *   leaf.\r\n     * @param index {Integer} The index of the item (node or leaf).\r\n     */\r\n    bindDefaultProperties(item, index) {\r\n      // bind model first\r\n      this.bindProperty(\"\", \"model\", null, item, index);\r\n\r\n      this.bindProperty(\r\n        this.getLabelPath(),\r\n        \"label\",\r\n        this.getLabelOptions(),\r\n        item,\r\n        index\r\n      );\r\n\r\n      var bindPath = this.__getBindPath(index);\r\n      var bindTarget = this._tree.getLookupTable();\r\n      bindTarget = qx.data.SingleValueBinding.resolvePropertyChain(\r\n        bindTarget,\r\n        bindPath\r\n      );\r\n\r\n      if (\r\n        qx.util.OOUtil.hasProperty(\r\n          bindTarget.constructor,\r\n          this.getChildProperty()\r\n        )\r\n      ) {\r\n        this.bindProperty(\r\n          this.getChildProperty() + \".length\",\r\n          \"appearance\",\r\n          {\r\n            converter() {\r\n              return \"virtual-tree-folder\";\r\n            }\r\n          },\r\n\r\n          item,\r\n          index\r\n        );\r\n      } else {\r\n        item.setAppearance(\"virtual-tree-file\");\r\n      }\r\n\r\n      if (this.getIconPath() != null) {\r\n        this.bindProperty(\r\n          this.getIconPath(),\r\n          \"icon\",\r\n          this.getIconOptions(),\r\n          item,\r\n          index\r\n        );\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Helper-Method for binding a given property from the model to the target\r\n     * widget.\r\n     *\r\n     * This method should only be called in the {@link IVirtualTreeDelegate#bindItem}\r\n     * function implemented by the {@link #delegate} property.\r\n     *\r\n     * @param sourcePath {String | null} The path to the property in the model.\r\n     *   If you use an empty string, the whole model item will be bound.\r\n     * @param targetProperty {String} The name of the property in the target widget.\r\n     * @param options {Map | null} The options to use for the binding.\r\n     * @param targetWidget {qx.ui.core.Widget} The target widget.\r\n     * @param index {Integer} The index of the current binding.\r\n     */\r\n    bindProperty(sourcePath, targetProperty, options, targetWidget, index) {\r\n      var bindPath = this.__getBindPath(index, sourcePath);\r\n      var bindTarget = this._tree.getLookupTable();\r\n\r\n      var id = bindTarget.bind(bindPath, targetWidget, targetProperty, options);\r\n      this.__addBinding(targetWidget, id);\r\n    },\r\n\r\n    /**\r\n     * Helper-Method for binding a given property from the target widget to\r\n     * the model.\r\n     * This method should only be called in the\r\n     * {@link qx.ui.tree.core.IVirtualTreeDelegate#bindItem} function implemented by the\r\n     * {@link #delegate} property.\r\n     *\r\n     * @param targetPath {String | null} The path to the property in the model.\r\n     * @param sourceProperty {String} The name of the property in the target.\r\n     * @param options {Map | null} The options to use for the binding.\r\n     * @param sourceWidget {qx.ui.core.Widget} The source widget.\r\n     * @param index {Integer} The index of the current binding.\r\n     */\r\n    bindPropertyReverse(\r\n      targetPath,\r\n      sourceProperty,\r\n      options,\r\n      sourceWidget,\r\n      index\r\n    ) {\r\n      var bindPath = this.__getBindPath(index, targetPath);\r\n      var bindTarget = this._tree.getLookupTable();\r\n\r\n      var id = sourceWidget.bind(sourceProperty, bindTarget, bindPath, options);\r\n      this.__addBinding(sourceWidget, id);\r\n    },\r\n\r\n    /**\r\n     * Remove all bindings from all bounded items.\r\n     */\r\n    removeBindings() {\r\n      while (this.__boundItems.length > 0) {\r\n        var item = this.__boundItems.pop();\r\n        this._removeBindingsFrom(item);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Sets up the binding for the given item and index.\r\n     *\r\n     * @param item {qx.ui.core.Widget} The internally created and used item.\r\n     * @param index {Integer} The index of the item.\r\n     */\r\n    _bindItem(item, index) {\r\n      var bindItem = qx.util.Delegate.getMethod(this.getDelegate(), \"bindItem\");\r\n\r\n      if (bindItem != null) {\r\n        bindItem(this, item, index);\r\n      } else {\r\n        this.bindDefaultProperties(item, index);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Removes the binding of the given item.\r\n     *\r\n     * @param item {qx.ui.core.Widget} The item which the binding should be\r\n     *   removed.\r\n     */\r\n    _removeBindingsFrom(item) {\r\n      var bindings = this.__getBindings(item);\r\n\r\n      while (bindings.length > 0) {\r\n        var id = bindings.pop();\r\n\r\n        try {\r\n          this._tree.getLookupTable().removeBinding(id);\r\n        } catch (e) {\r\n          item.removeBinding(id);\r\n        }\r\n      }\r\n\r\n      if (this.__boundItems.includes(item)) {\r\n        qx.lang.Array.remove(this.__boundItems, item);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Helper method to create the path for binding.\r\n     *\r\n     * @param index {Integer} The index of the item.\r\n     * @param path {String|null} The path to the property.\r\n     * @return {String} The binding path\r\n     */\r\n    __getBindPath(index, path) {\r\n      var bindPath = \"[\" + index + \"]\";\r\n      if (path != null && path != \"\") {\r\n        bindPath += \".\" + path;\r\n      }\r\n      return bindPath;\r\n    },\r\n\r\n    /**\r\n     * Helper method to save the binding for the widget.\r\n     *\r\n     * @param widget {qx.ui.core.Widget} widget to save binding.\r\n     * @param id {var} the id from the binding.\r\n     */\r\n    __addBinding(widget, id) {\r\n      var bindings = this.__getBindings(widget);\r\n\r\n      if (!bindings.includes(id)) {\r\n        bindings.push(id);\r\n      }\r\n\r\n      if (!this.__boundItems.includes(widget)) {\r\n        this.__boundItems.push(widget);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Helper method which returns all bound id from the widget.\r\n     *\r\n     * @param widget {qx.ui.core.Widget} widget to get all binding.\r\n     * @return {Array} all bound id's.\r\n     */\r\n    __getBindings(widget) {\r\n      var bindings = widget.getUserData(\"BindingIds\");\r\n\r\n      if (bindings == null) {\r\n        bindings = [];\r\n        widget.setUserData(\"BindingIds\", bindings);\r\n      }\r\n\r\n      return bindings;\r\n    }\r\n  },\r\n\r\n  destruct() {\r\n    this.__boundItems = null;\r\n  }\r\n});\r\n"
  ],
  "mappings": ";;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAK,CAACC,MAAM,CAAC,mCAAmC,EAAE;IACnDC,SAAS,WAAAA,UAAA,EAAG;MACV,IAAI,CAACC,SAAY,GAAG,EAAE;IACxB,CAAC;IAEDC,UAAU,EAAE;MACV;AACJ;AACA;AACA;MACIC,SAAS,EAAE;QACTC,KAAK,EAAE,QAAQ;QACfC,QAAQ,EAAE;MACZ,CAAC;MAED;AACJ;AACA;AACA;MACIC,QAAQ,EAAE;QACRF,KAAK,EAAE,QAAQ;QACfC,QAAQ,EAAE;MACZ,CAAC;MAED;AACJ;AACA;AACA;MACIE,YAAY,EAAE;QACZF,QAAQ,EAAE;MACZ,CAAC;MAED;AACJ;AACA;AACA;MACIG,WAAW,EAAE;QACXH,QAAQ,EAAE;MACZ,CAAC;MAED;AACJ;AACA;AACA;AACA;MACII,aAAa,EAAE;QACbL,KAAK,EAAE,QAAQ;QACfC,QAAQ,EAAE;MACZ,CAAC;MAED;AACJ;AACA;AACA;MACIK,QAAQ,EAAE;QACRC,KAAK,EAAE,gBAAgB;QACvBC,IAAI,EAAE,IAAI;QACVP,QAAQ,EAAE;MACZ;IACF,CAAC;IAEDQ,OAAO,EAAE;MACP;MACAZ,SAAY,EAAE,IAAI;MAElB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIa,qBAAqB,WAAAA,sBAACC,IAAI,EAAEC,KAAK,EAAE;QACjC;QACA,IAAI,CAACC,YAAY,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAEF,IAAI,EAAEC,KAAK,CAAC;QAEjD,IAAI,CAACC,YAAY,CACf,IAAI,CAACC,YAAY,CAAC,CAAC,EACnB,OAAO,EACP,IAAI,CAACC,eAAe,CAAC,CAAC,EACtBJ,IAAI,EACJC,KACF,CAAC;QAED,IAAII,QAAQ,GAAG,IAAI,CAACC,SAAa,CAACL,KAAK,CAAC;QACxC,IAAIM,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC;QAC5CF,UAAU,GAAG5B,EAAE,CAAC+B,IAAI,CAACC,kBAAkB,CAACC,oBAAoB,CAC1DL,UAAU,EACVF,QACF,CAAC;QAED,IACE1B,EAAE,CAACkC,IAAI,CAACC,MAAM,CAACC,WAAW,CACxBR,UAAU,CAACS,WAAW,EACtB,IAAI,CAACC,gBAAgB,CAAC,CACxB,CAAC,EACD;UACA,IAAI,CAACf,YAAY,CACf,IAAI,CAACe,gBAAgB,CAAC,CAAC,GAAG,SAAS,EACnC,YAAY,EACZ;YACEC,SAAS,WAAAA,UAAA,EAAG;cACV,OAAO,qBAAqB;YAC9B;UACF,CAAC,EAEDlB,IAAI,EACJC,KACF,CAAC;QACH,CAAC,MAAM;UACLD,IAAI,CAACmB,aAAa,CAAC,mBAAmB,CAAC;QACzC;QAEA,IAAI,IAAI,CAACC,WAAW,CAAC,CAAC,IAAI,IAAI,EAAE;UAC9B,IAAI,CAAClB,YAAY,CACf,IAAI,CAACkB,WAAW,CAAC,CAAC,EAClB,MAAM,EACN,IAAI,CAACC,cAAc,CAAC,CAAC,EACrBrB,IAAI,EACJC,KACF,CAAC;QACH;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIC,YAAY,WAAAA,aAACoB,UAAU,EAAEC,cAAc,EAAEC,OAAO,EAAEC,YAAY,EAAExB,KAAK,EAAE;QACrE,IAAII,QAAQ,GAAG,IAAI,CAACC,SAAa,CAACL,KAAK,EAAEqB,UAAU,CAAC;QACpD,IAAIf,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC;QAE5C,IAAIiB,EAAE,GAAGnB,UAAU,CAACoB,IAAI,CAACtB,QAAQ,EAAEoB,YAAY,EAAEF,cAAc,EAAEC,OAAO,CAAC;QACzE,IAAI,CAACI,SAAY,CAACH,YAAY,EAAEC,EAAE,CAAC;MACrC,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIG,mBAAmB,WAAAA,oBACjBC,UAAU,EACVC,cAAc,EACdP,OAAO,EACPQ,YAAY,EACZ/B,KAAK,EACL;QACA,IAAII,QAAQ,GAAG,IAAI,CAACC,SAAa,CAACL,KAAK,EAAE6B,UAAU,CAAC;QACpD,IAAIvB,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC;QAE5C,IAAIiB,EAAE,GAAGM,YAAY,CAACL,IAAI,CAACI,cAAc,EAAExB,UAAU,EAAEF,QAAQ,EAAEmB,OAAO,CAAC;QACzE,IAAI,CAACI,SAAY,CAACI,YAAY,EAAEN,EAAE,CAAC;MACrC,CAAC;MAED;AACJ;AACA;MACIO,cAAc,WAAAA,eAAA,EAAG;QACf,OAAO,IAAI,CAAC/C,SAAY,CAACgD,MAAM,GAAG,CAAC,EAAE;UACnC,IAAIlC,IAAI,GAAG,IAAI,CAACd,SAAY,CAACiD,GAAG,CAAC,CAAC;UAClC,IAAI,CAACC,mBAAmB,CAACpC,IAAI,CAAC;QAChC;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;MACIqC,SAAS,WAAAA,UAACrC,IAAI,EAAEC,KAAK,EAAE;QACrB,IAAIqC,QAAQ,GAAG3D,EAAE,CAACkC,IAAI,CAAC0B,QAAQ,CAACC,SAAS,CAAC,IAAI,CAACC,WAAW,CAAC,CAAC,EAAE,UAAU,CAAC;QAEzE,IAAIH,QAAQ,IAAI,IAAI,EAAE;UACpBA,QAAQ,CAAC,IAAI,EAAEtC,IAAI,EAAEC,KAAK,CAAC;QAC7B,CAAC,MAAM;UACL,IAAI,CAACF,qBAAqB,CAACC,IAAI,EAAEC,KAAK,CAAC;QACzC;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;MACImC,mBAAmB,WAAAA,oBAACpC,IAAI,EAAE;QACxB,IAAI0C,QAAQ,GAAG,IAAI,CAACC,SAAa,CAAC3C,IAAI,CAAC;QAEvC,OAAO0C,QAAQ,CAACR,MAAM,GAAG,CAAC,EAAE;UAC1B,IAAIR,EAAE,GAAGgB,QAAQ,CAACP,GAAG,CAAC,CAAC;UAEvB,IAAI;YACF,IAAI,CAAC3B,KAAK,CAACC,cAAc,CAAC,CAAC,CAACmC,aAAa,CAAClB,EAAE,CAAC;UAC/C,CAAC,CAAC,OAAOmB,CAAC,EAAE;YACV7C,IAAI,CAAC4C,aAAa,CAAClB,EAAE,CAAC;UACxB;QACF;QAEA,IAAI,IAAI,CAACxC,SAAY,CAAC4D,QAAQ,CAAC9C,IAAI,CAAC,EAAE;UACpCrB,EAAE,CAACoE,IAAI,CAACC,KAAK,CAACC,MAAM,CAAC,IAAI,CAAC/D,SAAY,EAAEc,IAAI,CAAC;QAC/C;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;AACA;MACIM,SAAa,WAAA4C,UAACjD,KAAK,EAAEkD,IAAI,EAAE;QACzB,IAAI9C,QAAQ,GAAG,GAAG,GAAGJ,KAAK,GAAG,GAAG;QAChC,IAAIkD,IAAI,IAAI,IAAI,IAAIA,IAAI,IAAI,EAAE,EAAE;UAC9B9C,QAAQ,IAAI,GAAG,GAAG8C,IAAI;QACxB;QACA,OAAO9C,QAAQ;MACjB,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;MACIuB,SAAY,WAAAwB,UAACC,MAAM,EAAE3B,EAAE,EAAE;QACvB,IAAIgB,QAAQ,GAAG,IAAI,CAACC,SAAa,CAACU,MAAM,CAAC;QAEzC,IAAI,CAACX,QAAQ,CAACI,QAAQ,CAACpB,EAAE,CAAC,EAAE;UAC1BgB,QAAQ,CAACY,IAAI,CAAC5B,EAAE,CAAC;QACnB;QAEA,IAAI,CAAC,IAAI,CAACxC,SAAY,CAAC4D,QAAQ,CAACO,MAAM,CAAC,EAAE;UACvC,IAAI,CAACnE,SAAY,CAACoE,IAAI,CAACD,MAAM,CAAC;QAChC;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;MACIV,SAAa,WAAAY,UAACF,MAAM,EAAE;QACpB,IAAIX,QAAQ,GAAGW,MAAM,CAACG,WAAW,CAAC,YAAY,CAAC;QAE/C,IAAId,QAAQ,IAAI,IAAI,EAAE;UACpBA,QAAQ,GAAG,EAAE;UACbW,MAAM,CAACI,WAAW,CAAC,YAAY,EAAEf,QAAQ,CAAC;QAC5C;QAEA,OAAOA,QAAQ;MACjB;IACF,CAAC;IAEDgB,QAAQ,WAAAA,SAAA,EAAG;MACT,IAAI,CAACxE,SAAY,GAAG,IAAI;IAC1B;EACF,CAAC,CAAC;EAjTFP,EAAE,CAACgF,EAAE,CAACC,IAAI,CAACC,IAAI,CAACC,iBAAiB,CAAChF,aAAa,GAAGA,aAAa;AAAC"
}