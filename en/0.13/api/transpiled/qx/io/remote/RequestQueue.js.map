{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "extend",
    "core",
    "Object",
    "implement",
    "IDisposable",
    "construct",
    "__queue",
    "__active",
    "__totalRequests",
    "__timer",
    "event",
    "Timer",
    "addListener",
    "_oninterval",
    "properties",
    "enabled",
    "init",
    "check",
    "apply",
    "maxTotalRequests",
    "nullable",
    "maxConcurrentRequests",
    "Environment",
    "get",
    "defaultTimeout",
    "members",
    "getRequestQueue",
    "getActiveQueue",
    "_debug",
    "_check",
    "length",
    "stop",
    "getEnabled",
    "isAsynchronous",
    "getMaxConcurrentRequests",
    "getMaxTotalRequests",
    "vRequest",
    "shift",
    "vTransport",
    "io",
    "remote",
    "Exchange",
    "push",
    "_onsending",
    "_onreceiving",
    "_oncompleted",
    "_start",
    "Date",
    "valueOf",
    "send",
    "_remove",
    "lang",
    "Array",
    "remove",
    "dispose",
    "__activeCount",
    "e",
    "getTarget",
    "getRequest",
    "request",
    "requestHandler",
    "getType",
    "ex",
    "error",
    "Registration",
    "createEvent",
    "Event",
    "ex1",
    "vActive",
    "vCurrent",
    "vDefaultTimeout",
    "getDefaultTimeout",
    "vTimeout",
    "vTime",
    "i",
    "getTimeout",
    "warn",
    "toHashCode",
    "timeout",
    "_applyEnabled",
    "value",
    "old",
    "setEnabled",
    "add",
    "setState",
    "unshift",
    "start",
    "abort",
    "getTransport",
    "includes",
    "destruct",
    "_disposeArray",
    "_disposeObjects",
    "RequestQueue"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/qx_packages/qooxdoo_deprecated_qx_io_remote_v1_0_2/source/class/qx/io/remote/RequestQueue.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n     2006 Derrell Lipman\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Derrell Lipman (derrell)\n\n************************************************************************ */\n\n/**\n * Handles scheduling of requests to be sent to a server.\n *\n * This class is a singleton and is used by qx.io.remote.Request to schedule its\n * requests. It should not be used directly.\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n * @internal\n * @require(qx.bom.client.Transport)\n */\nqx.Class.define(\"qx.io.remote.RequestQueue\", {\n  type: \"singleton\",\n  extend: qx.core.Object,\n  implement: [qx.core.IDisposable],\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct() {\n    super();\n\n    this.__queue = [];\n    this.__active = [];\n\n    this.__totalRequests = 0;\n\n    // timeout handling\n    this.__timer = new qx.event.Timer(500);\n    this.__timer.addListener(\"interval\", this._oninterval, this);\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /**\n     * Indicates whether queue is enabled or not.\n     */\n    enabled: {\n      init: true,\n      check: \"Boolean\",\n      apply: \"_applyEnabled\",\n    },\n\n    /**\n     * The maximum number of total requests.\n     */\n    maxTotalRequests: {\n      check: \"Integer\",\n      nullable: true,\n    },\n\n    /**\n     * Maximum number of parallel requests.\n     */\n    maxConcurrentRequests: {\n      check: \"Integer\",\n      init: qx.core.Environment.get(\"io.maxrequests\"),\n    },\n\n    /**\n     * Default timeout for remote requests in milliseconds.\n     */\n    defaultTimeout: {\n      check: \"Integer\",\n      init: 5000,\n    },\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __queue: null,\n    __active: null,\n    __totalRequests: null,\n    __timer: null,\n\n    /*\n    ---------------------------------------------------------------------------\n      QUEUE HANDLING\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Get a list of queued requests\n     *\n     * @return {qx.io.remote.Request[]} The list of queued requests\n     */\n    getRequestQueue() {\n      return this.__queue;\n    },\n\n    /**\n     * Get a list of active queued requests, each one wrapped in an instance of\n     * {@link qx.io.remote.Exchange}\n     *\n     * @return {qx.io.remote.Exchange[]} The list of active queued requests, each one\n     *   wrapped in an instance of {@link qx.io.remote.Exchange}\n     */\n    getActiveQueue() {\n      return this.__active;\n    },\n\n    /**\n     * Generates debug output\n     */\n    _debug() {\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n          // Debug output\n          var vText =\n            this.__active.length +\n            \"/\" +\n            (this.__queue.length + this.__active.length);\n\n          this.debug(\"Progress: \" + vText);\n          window.status = \"Request-Queue Progress: \" + vText;\n        }\n      }\n    },\n\n    /**\n     * Checks the queue if any request is left to send and uses the transport\n     * layer to send the open requests.\n     * This method calls itself until every request in the queue is send.\n     *\n     */\n    _check() {\n      // Debug output\n      this._debug();\n\n      // Check queues and stop timer if not needed anymore\n      if (this.__active.length == 0 && this.__queue.length == 0) {\n        this.__timer.stop();\n      }\n\n      // Checking if enabled\n      if (!this.getEnabled()) {\n        return;\n      }\n\n      // Checking active queue fill\n      if (\n        this.__queue.length == 0 ||\n        (this.__queue[0].isAsynchronous() &&\n          this.__active.length >= this.getMaxConcurrentRequests())\n      ) {\n        return;\n      }\n\n      // Checking number of total requests\n      if (\n        this.getMaxTotalRequests() != null &&\n        this.__totalRequests >= this.getMaxTotalRequests()\n      ) {\n        return;\n      }\n\n      var vRequest = this.__queue.shift();\n      var vTransport = new qx.io.remote.Exchange(vRequest);\n\n      // Increment counter\n      this.__totalRequests++;\n\n      // Add to active queue\n      this.__active.push(vTransport);\n\n      // Debug output\n      this._debug();\n\n      // Establish event connection between qx.io.remote.Exchange and me.\n      vTransport.addListener(\"sending\", this._onsending, this);\n      vTransport.addListener(\"receiving\", this._onreceiving, this);\n      vTransport.addListener(\"completed\", this._oncompleted, this);\n      vTransport.addListener(\"aborted\", this._oncompleted, this);\n      vTransport.addListener(\"timeout\", this._oncompleted, this);\n      vTransport.addListener(\"failed\", this._oncompleted, this);\n\n      // Store send timestamp\n      vTransport._start = new Date().valueOf();\n\n      // Send\n      vTransport.send();\n\n      // Retry\n      if (this.__queue.length > 0) {\n        this._check();\n      }\n    },\n\n    /**\n     * Removes a transport object from the active queue and disposes the\n     * transport object in order stop the request.\n     *\n     * @param vTransport {qx.io.remote.Exchange} Transport object\n     */\n    _remove(vTransport) {\n      // Remove from active transports\n      qx.lang.Array.remove(this.__active, vTransport);\n\n      // Dispose transport object\n      vTransport.dispose();\n\n      // Check again\n      this._check();\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT HANDLING\n    ---------------------------------------------------------------------------\n    */\n\n    __activeCount: 0,\n\n    /**\n     * Listens for the \"sending\" event of the transport object and increases\n     * the counter for active requests.\n     *\n     * @param e {qx.event.type.Event} event object\n     */\n    _onsending(e) {\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n          this.__activeCount++;\n          e.getTarget()._counted = true;\n\n          this.debug(\"ActiveCount: \" + this.__activeCount);\n        }\n      }\n\n      e.getTarget().getRequest()._onsending(e);\n    },\n\n    /**\n     * Listens for the \"receiving\" event of the transport object and delegate\n     * the event to the current request object.\n     *\n     * @param e {qx.event.type.Event} event object\n     */\n    _onreceiving(e) {\n      e.getTarget().getRequest()._onreceiving(e);\n    },\n\n    /**\n     * Listens for the \"completed\" event of the transport object and decreases\n     * the counter for active requests.\n     *\n     * @param e {qx.event.type.Event} event object\n     */\n    _oncompleted(e) {\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        if (qx.core.Environment.get(\"qx.debug.io.remote\")) {\n          if (e.getTarget()._counted) {\n            this.__activeCount--;\n            this.debug(\"ActiveCount: \" + this.__activeCount);\n          }\n        }\n      }\n\n      // delegate the event to the handler method of the request depending\n      // on the current type of the event ( completed|aborted|timeout|failed )\n      var request = e.getTarget().getRequest();\n      var requestHandler = \"_on\" + e.getType();\n\n      // remove the request from the queue,\n      // keep local reference, see [BUG #4422]\n      this._remove(e.getTarget());\n\n      // It's possible that the request handler can fail, possibly due to\n      // being sent garbage data. We want to prevent that from crashing\n      // the program, but instead display an error.\n      try {\n        if (request[requestHandler]) {\n          request[requestHandler](e);\n        }\n      } catch (ex) {\n        this.error(\n          \"Request \" +\n            request +\n            \" handler \" +\n            requestHandler +\n            \" threw an error: \",\n          ex\n        );\n\n        // Issue an \"aborted\" event so the application gets notified.\n        // If that too fails, or if there's no \"aborted\" handler, ignore it.\n        try {\n          if (request[\"_onaborted\"]) {\n            var event = qx.event.Registration.createEvent(\n              \"aborted\",\n              qx.event.type.Event\n            );\n            request[\"_onaborted\"](event);\n          }\n        } catch (ex1) {}\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      TIMEOUT HANDLING\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Listens for the \"interval\" event of the transport object and checks\n     * if the active requests are timed out.\n     *\n     * @param e {qx.event.type.Event} event object\n     */\n    _oninterval(e) {\n      var vActive = this.__active;\n\n      if (vActive.length == 0) {\n        this.__timer.stop();\n        return;\n      }\n\n      var vCurrent = new Date().valueOf();\n      var vTransport;\n      var vRequest;\n      var vDefaultTimeout = this.getDefaultTimeout();\n      var vTimeout;\n      var vTime;\n\n      for (var i = vActive.length - 1; i >= 0; i--) {\n        vTransport = vActive[i];\n        vRequest = vTransport.getRequest();\n\n        if (vRequest.isAsynchronous()) {\n          vTimeout = vRequest.getTimeout();\n\n          // if timer is disabled...\n          if (vTimeout == 0) {\n            // then ignore it.\n            continue;\n          }\n\n          if (vTimeout == null) {\n            vTimeout = vDefaultTimeout;\n          }\n\n          vTime = vCurrent - vTransport._start;\n\n          if (vTime > vTimeout) {\n            this.warn(\"Timeout: transport \" + vTransport.toHashCode());\n            this.warn(vTime + \"ms > \" + vTimeout + \"ms\");\n            vTransport.timeout();\n          }\n        }\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      MODIFIERS\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply\n    _applyEnabled(value, old) {\n      if (value) {\n        this._check();\n      }\n\n      this.__timer.setEnabled(value);\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      CORE METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Add the request to the pending requests queue.\n     *\n     * @param vRequest {var} The request\n     */\n    add(vRequest) {\n      vRequest.setState(\"queued\");\n\n      if (vRequest.isAsynchronous()) {\n        this.__queue.push(vRequest);\n      } else {\n        this.__queue.unshift(vRequest);\n      }\n\n      this._check();\n\n      if (this.getEnabled()) {\n        this.__timer.start();\n      }\n    },\n\n    /**\n     * Remove the request from the pending requests queue.\n     *\n     *  The underlying transport of the request is forced into the aborted\n     *  state (\"aborted\") and listeners of the \"aborted\"\n     *  signal are notified about the event. If the request isn't in the\n     *  pending requests queue, this method is a noop.\n     *\n     * @param vRequest {var} The request\n     */\n    abort(vRequest) {\n      var vTransport = vRequest.getTransport();\n\n      if (vTransport) {\n        vTransport.abort();\n      } else if (this.__queue.includes(vRequest)) {\n        qx.lang.Array.remove(this.__queue, vRequest);\n      }\n    },\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    this._disposeArray(\"__active\");\n    this._disposeObjects(\"__timer\");\n    this.__queue = null;\n  },\n});\n"
  ],
  "mappings": "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"
}