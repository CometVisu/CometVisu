{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "construct",
    "urls",
    "id",
    "loaded",
    "__readyState",
    "__urls",
    "__id",
    "members",
    "__closure",
    "__loadWithClosure",
    "__timeoutId",
    "__notifyPackageResult",
    "getId",
    "getReadyState",
    "getUrls",
    "saveClosure",
    "closure",
    "execute",
    "clearTimeout",
    "$$packageData",
    "__importPackageData",
    "loadClosure",
    "notifyPackageResult",
    "self",
    "bind",
    "__loadScriptList",
    "call",
    "pkg",
    "setTimeout",
    "Part",
    "TIMEOUT",
    "load",
    "urlList",
    "callback",
    "errBack",
    "length",
    "urlsLoaded",
    "loadScripts",
    "loader",
    "bom",
    "request",
    "Script",
    "open",
    "shift",
    "onload",
    "dispose",
    "client",
    "Engine",
    "getName",
    "onerror",
    "window",
    "send",
    "concat",
    "$$loader",
    "importPackageData",
    "io",
    "part",
    "Package"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/io/part/Package.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2009 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * The Package wraps a list of related script URLs, which are required by one\n * or more parts.\n *\n * @internal\n * @ignore(qx.util.ResourceManager)\n */\nqx.Bootstrap.define(\"qx.io.part.Package\", {\n  /**\n   * @param urls {String[]} A list of script URLs\n   * @param id {var} Unique package hash key\n   * @param loaded {Boolean?false} Whether the package is already loaded\n   */\n  construct(urls, id, loaded) {\n    this.__readyState = loaded ? \"complete\" : \"initialized\";\n    this.__urls = urls;\n    this.__id = id;\n  },\n\n  members: {\n    __readyState: null,\n    __urls: null,\n    __id: null,\n    __closure: null,\n    __loadWithClosure: null,\n    __timeoutId: null,\n    __notifyPackageResult: null,\n\n    /**\n     * Get the package ID.\n     *\n     * @return {String} The package id\n     */\n    getId() {\n      return this.__id;\n    },\n\n    /**\n     * Get the ready state of the package. The value is one of\n     * <ul>\n     * <li>\n     *   <b>initialized</b>: The package is initialized. The {@link #load}\n     *   method has not yet been called\n     * </li>\n     * <li><b>loading</b>: The package is still loading.</li>\n     * <li><b>complete</b>: The package has been loaded successfully</li>\n     * <li><b>cached</b>: The package is loaded but is not executed\n     *   (for closure parts)</li>\n     * </li>\n     *\n     * @return {String} The ready state.\n     */\n    getReadyState() {\n      return this.__readyState;\n    },\n\n    /**\n     * Returns the urlsstored stored in the package.\n     *\n     * @internal\n     * @return {String[]} An array of urls of this package.\n     */\n    getUrls() {\n      return this.__urls;\n    },\n\n    /**\n     * Method for storing the closure for this package. This is only relevant\n     * if a {@link qx.io.part.ClosurePart} is used.\n     *\n     * @param closure {Function} The code of this package wrapped in a closure.\n     */\n    saveClosure(closure) {\n      if (this.__readyState == \"error\") {\n        return;\n      }\n\n      this.__closure = closure;\n\n      if (!this.__loadWithClosure) {\n        this.execute();\n      } else {\n        clearTimeout(this.__timeoutId);\n        this.__readyState = \"cached\";\n        this.__notifyPackageResult(this);\n      }\n    },\n\n    /**\n     * Executes the stored closure. This is only relevant if a\n     * {@link qx.io.part.ClosurePart} is used.\n     */\n    execute() {\n      if (this.__closure) {\n        this.__closure();\n        delete this.__closure;\n      }\n\n      if (qx.$$packageData[this.__id]) {\n        this.__importPackageData(qx.$$packageData[this.__id]);\n        delete qx.$$packageData[this.__id];\n      }\n      this.__readyState = \"complete\";\n    },\n\n    /**\n     * Load method if the package loads a closure. This is only relevant if a\n     * {@link qx.io.part.ClosurePart} is used.\n     *\n     * @param notifyPackageResult {Function} The callback if all scripts are\n     *   done loading in this package.\n     * @param self {Object?} The context of the callback.\n     */\n    loadClosure(notifyPackageResult, self) {\n      if (this.__readyState !== \"initialized\") {\n        return;\n      }\n\n      this.__loadWithClosure = true;\n\n      this.__readyState = \"loading\";\n\n      this.__notifyPackageResult = qx.Bootstrap.bind(notifyPackageResult, self);\n\n      this.__loadScriptList(\n        this.__urls,\n        function () {},\n        function () {\n          this.__readyState = \"error\";\n          notifyPackageResult.call(self, this);\n        },\n        this\n      );\n\n      var pkg = this;\n      this.__timeoutId = setTimeout(function () {\n        pkg.__readyState = \"error\";\n        notifyPackageResult.call(self, pkg);\n      }, qx.Part.TIMEOUT);\n    },\n\n    /**\n     * Load the part's script URLs in the correct order.\n     *\n     * @param notifyPackageResult {Function} The callback if all scripts are\n     *   done loading in this package.\n     * @param self {Object?} The context of the callback.\n     */\n    load(notifyPackageResult, self) {\n      if (this.__readyState !== \"initialized\") {\n        return;\n      }\n\n      this.__loadWithClosure = false;\n\n      this.__readyState = \"loading\";\n\n      this.__loadScriptList(\n        this.__urls,\n        function () {\n          this.__readyState = \"complete\";\n          this.execute();\n          notifyPackageResult.call(self, this);\n        },\n        function () {\n          this.__readyState = \"error\";\n          notifyPackageResult.call(self, this);\n        },\n        this\n      );\n    },\n\n    /**\n     * Loads a list of scripts in the correct order.\n     *\n     * @param urlList {String[]} List of script urls\n     * @param callback {Function} Function to execute on completion\n     * @param errBack {Function} Function to execute on error\n     * @param self {Object?window} Context to execute the given function in\n     */\n    __loadScriptList(urlList, callback, errBack, self) {\n      if (urlList.length == 0) {\n        callback.call(self);\n        return;\n      }\n\n      var urlsLoaded = 0;\n      var self = this;\n      var loadScripts = function (urls) {\n        if (urlsLoaded >= urlList.length) {\n          callback.call(self);\n          return;\n        }\n\n        var loader = new qx.bom.request.Script();\n        loader.open(\"GET\", urls.shift());\n\n        loader.onload = function () {\n          urlsLoaded += 1;\n          loader.dispose();\n\n          // Important to use engine detection directly to keep the minimal\n          // package size small [BUG #5068]\n          if (qx.bom.client.Engine.getName() == \"webkit\") {\n            // force asynchronous load\n            // Safari fails with an \"maximum recursion depth exceeded\" error if it is\n            // called sync.\n            setTimeout(function () {\n              loadScripts.call(self, urls, callback, self);\n            }, 0);\n          } else {\n            loadScripts.call(self, urls, callback, self);\n          }\n        };\n\n        loader.onerror = function () {\n          if (self.__readyState == \"loading\") {\n            clearTimeout(self.__timeoutId);\n            loader.dispose();\n            return errBack.call(self);\n          }\n        };\n\n        // Force loading script asynchronously (IE may load synchronously)\n        window.setTimeout(function () {\n          loader.send();\n        });\n      };\n\n      loadScripts(urlList.concat());\n    },\n\n    /**\n     * Import the data of a package. The function is defined in the loader\n     * script.\n     *\n     * @signature function(packageData)\n     * @param packageData {Map} Map of package data categories (\"resources\",...)\n     */\n    __importPackageData: qx.$$loader.importPackageData\n  }\n});\n"
  ],
  "mappings": "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"
}