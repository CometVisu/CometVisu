{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "io",
    "transport",
    "AbstractTransport",
    "implement",
    "ITransport",
    "construct",
    "url",
    "members",
    "__tranportImpl",
    "getTransportImpl",
    "_createTransportImpl",
    "send",
    "message",
    "core",
    "Assert",
    "assertString",
    "req",
    "setRequestData",
    "sendWithPromise",
    "type",
    "BaseError",
    "getComment",
    "exception",
    "Transport",
    "toString",
    "TIMEOUT",
    "INVALID_MSG_DATA",
    "Cancel",
    "getStatus",
    "FAILED",
    "response",
    "getResponse",
    "Exception",
    "undefined",
    "error",
    "fireDataEvent",
    "dispose",
    "request",
    "Xhr",
    "getEndpoint",
    "setAccept",
    "setCache",
    "setRequestHeader",
    "setParser",
    "defer",
    "jsonrpc",
    "Client",
    "registerTransport"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/io/transport/Xhr.js"
  ],
  "sourcesContent": [
    "/**\n * The implementation of a HTTP Transport using the {@link qx.io.request} API,\n * so any special configuration of the HTTP request must be done on the\n * underlying implementation of {@link qx.io.request.AbstractRequest}.\n *\n * The assumption is that the payload will be JSON in both request and response.\n * If that is not what you want, override the {@link #_createTransportImpl()} method.\n *\n */\nqx.Class.define(\"qx.io.transport.Xhr\", {\n  extend: qx.io.transport.AbstractTransport,\n  implement: qx.io.transport.ITransport,\n\n  /**\n   * Constructor.\n   *\n   * @param {String} url The URL of the http endpoint\n   */\n  construct(url) {\n    super(url);\n  },\n\n  members: {\n    /**\n     * Internal implementation of the transport\n     * @var {qx.io.request.Xhr}\n     */\n    __tranportImpl: null,\n\n    /**\n     * Returns the object which implements the transport on the\n     * underlying level, so that transport-specific configuration\n     * can be done on it. Note that since in the HTTP transport,\n     * this object cannot be reused, it will return a new object\n     * each time which will be used in the immediately next request.\n     *\n     * @return {qx.io.request.Xhr}\n     */\n    getTransportImpl() {\n      this.__tranportImpl = this._createTransportImpl();\n      return this.__tranportImpl;\n    },\n\n    /**\n     * Transport the given message to the endpoint\n     *\n     * @param {String} message\n     *\n     * @return {qx.Promise} Promise that resolves (with no data)\n     * when the message has been successfully sent out, and rejects\n     * when there is an error or a cancellation up to that point.\n     */\n    async send(message) {\n      qx.core.Assert.assertString(message);\n      const req = this.__tranportImpl || this.getTransportImpl();\n      req.setRequestData(message);\n      this.__tranportImpl = null; // free the internal reference for the next request\n      try {\n        await req.sendWithPromise();\n      } catch (e) {\n        if (e instanceof qx.type.BaseError) {\n          switch (e.getComment()) {\n            case \"timeout\":\n              throw new qx.io.exception.Transport(\n                e.toString(),\n                qx.io.exception.Transport.TIMEOUT,\n                { message }\n              );\n\n            case \"parseError\":\n              throw new qx.io.exception.Transport(\n                e.toString(),\n                qx.io.exception.Transport.INVALID_MSG_DATA,\n                { message }\n              );\n\n            case \"abort\":\n              throw new qx.io.exception.Cancel(e.toString(), { message });\n\n            case \"statusError\":\n              if (req.getStatus() === 400) {\n                // \"400 Bad Request\" is a really a protocol error (syntax error)\n                break;\n              }\n            // fallthrough\n            case \"error\":\n              throw new qx.io.exception.Transport(\n                e.toString(),\n                qx.io.exception.Transport.FAILED,\n                {\n                  message,\n                  response: req.getResponse()\n                }\n              );\n\n            default:\n              // unknown error\n              throw new qx.io.exception.Exception(e.toString(), undefined, {\n                message,\n                error: e\n              });\n          }\n        }\n      }\n      // notify listeners\n      this.fireDataEvent(\"message\", req.getResponse());\n      // discard old object\n      req.dispose();\n    },\n\n    /**\n     * Factory method to create a request object. By default, a POST\n     * request will be made, and the expected response type will be\n     * \"application/json\", but differently to the standard behavior,\n     * the response will not be parsed into a javascript object.\n     *\n     * Classes extending this one may override this method to obtain\n     * a Request object with different parameters and/or different\n     * authentication settings. The object must be a subclass of {@link\n     * qx.io.request.AbstractRequest} or implement its public API.\n     *\n     * @return {qx.io.request.Xhr}\n     */\n    _createTransportImpl() {\n      const req = new qx.io.request.Xhr(this.getEndpoint(), \"POST\");\n      req.setAccept(\"application/json\");\n      req.setCache(false);\n      req.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n      // disable parsing, we are going to parse the JSON ourselves\n      req.setParser(response => response);\n      return req;\n    }\n  },\n\n  defer() {\n    qx.io.jsonrpc.Client.registerTransport(/^http/, qx.io.transport.Xhr);\n  }\n});\n"
  ],
  "mappings": "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"
}