{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "members",
    "parse",
    "message",
    "_this",
    "JSON",
    "e",
    "io",
    "exception",
    "Transport",
    "toString",
    "INVALID_JSON",
    "NO_DATA",
    "lang",
    "Type",
    "isArray",
    "batch",
    "jsonrpc",
    "protocol",
    "Batch",
    "forEach",
    "item",
    "add",
    "stringify",
    "_message",
    "id",
    "result",
    "method",
    "params",
    "error",
    "undefined",
    "Result",
    "Error",
    "code",
    "data",
    "Request",
    "Notification",
    "INVALID_MSG_DATA",
    "Parser"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/io/jsonrpc/protocol/Parser.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n      2020 Christian Boulanger\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christian Boulanger (cboulanger)\n\n************************************************************************ */\n\n/**\n * The parser object has a parse() method, which takes a UTF-encoded string and\n * returns an instance of the correponding subclass of {@link qx.io.jsonrpc.protocol.Message} or\n * a {@link qx.io.jsonrpc.protocol.Batch} instance.\n */\nqx.Class.define(\"qx.io.jsonrpc.protocol.Parser\", {\n  extend: qx.core.Object,\n  members: {\n    /**\n     * Given an UTF-8 encoded string, return the corresponding message object,\n     * which is one of {@link qx.io.jsonrpc.protocol.Batch}, {@link qx.io.jsonrpc.protocol.Notification},\n     * {@link qx.io.jsonrpc.protocol.Request}, {@link qx.io.jsonrpc.protocol.Result}, or\n     * {@link qx.io.jsonrpc.protocol.Error}.\n     *\n     * @param {String} message\n     * @return {qx.io.jsonrpc.protocol.Message}\n     * @throws {qx.io.exception.Transport}\n     */\n    parse(message) {\n      try {\n        message = JSON.parse(message);\n      } catch (e) {\n        throw new qx.io.exception.Transport(\n          e.toString(),\n          qx.io.exception.Transport.INVALID_JSON,\n          { message }\n        );\n      }\n      if (message === null) {\n        throw new qx.io.exception.Transport(\n          \"No data\",\n          qx.io.exception.Transport.NO_DATA\n        );\n      }\n      // batch\n      if (qx.lang.Type.isArray(message)) {\n        const batch = new qx.io.jsonrpc.protocol.Batch();\n        message.forEach(item => batch.add(this.parse(JSON.stringify(item))));\n        return batch;\n      }\n      // individual message\n      let { id, result, method, params, error } = message;\n      if (\n        id !== undefined &&\n        result !== undefined &&\n        error === undefined &&\n        method === undefined\n      ) {\n        return new qx.io.jsonrpc.protocol.Result(id, result);\n      }\n      if (\n        id !== undefined &&\n        result === undefined &&\n        error !== undefined &&\n        method === undefined\n      ) {\n        return new qx.io.jsonrpc.protocol.Error(\n          id,\n          error.code,\n          error.message,\n          error.data\n        );\n      }\n      if (\n        id !== undefined &&\n        result === undefined &&\n        error === undefined &&\n        method !== undefined\n      ) {\n        return new qx.io.jsonrpc.protocol.Request(method, params, id);\n      }\n      if (\n        id === undefined &&\n        result === undefined &&\n        error === undefined &&\n        method !== undefined\n      ) {\n        return new qx.io.jsonrpc.protocol.Notification(method, params);\n      }\n      throw new qx.io.exception.Transport(\n        \"Cannot parse message data.\",\n        qx.io.exception.Transport.INVALID_MSG_DATA,\n        { message }\n      );\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}