{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "resource",
    "actionName",
    "delegate",
    "constructor",
    "call",
    "setResource",
    "setActionName",
    "e",
    "dispose",
    "_delegate",
    "_marshaler",
    "data",
    "marshal",
    "Json",
    "lang",
    "Type",
    "isFunction",
    "configureRequest",
    "__configureRequest",
    "__onActionSuccessBound",
    "Function",
    "bind",
    "__onActionSuccess",
    "__addListeners",
    "properties",
    "check",
    "model",
    "nullable",
    "event",
    "members",
    "__P_183_0",
    "getResource",
    "__P_183_3",
    "getActionName",
    "addListener",
    "__P_183_2",
    "getData",
    "marshaler",
    "oldModel",
    "getModel",
    "manipulateData",
    "toClass",
    "toModel",
    "setModel",
    "destruct",
    "store",
    "Rest"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/data/store/Rest.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Tristan Koch (tristankoch)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * Handles response associated to a resource's action. The model property is\r\n * populated with the marshaled response. Note the action is invoked on the\r\n * resource, not the store.\r\n */\r\nqx.Class.define(\"qx.data.store.Rest\", {\r\n  extend: qx.core.Object,\r\n\r\n  /**\r\n   * @param resource {qx.io.rest.Resource} The resource.\r\n   * @param actionName {String} The name of the resource's action to retrieve\r\n   *  the response from.\r\n   * @param delegate {Object?null} The delegate containing one of the methods\r\n   *  specified in {@link qx.data.store.IStoreDelegate}.\r\n   */\r\n  construct(resource, actionName, delegate) {\r\n    super();\r\n\r\n    try {\r\n      this.setResource(resource);\r\n      this.setActionName(actionName);\r\n    } catch (e) {\r\n      this.dispose();\r\n      throw e;\r\n    }\r\n\r\n    this._delegate = delegate;\r\n    this._marshaler = new qx.data.marshal.Json(delegate);\r\n\r\n    if (delegate && qx.lang.Type.isFunction(delegate.configureRequest)) {\r\n      this.__configureRequest();\r\n    }\r\n\r\n    this.__onActionSuccessBound = qx.lang.Function.bind(\r\n      this.__onActionSuccess,\r\n      this\r\n    );\r\n\r\n    this.__addListeners();\r\n  },\r\n\r\n  properties: {\r\n    /**\r\n     * The resource.\r\n     */\r\n    resource: {\r\n      check: \"qx.io.rest.Resource\"\r\n    },\r\n\r\n    /**\r\n     * The name of the resource's action to retrieve the response from.\r\n     */\r\n    actionName: {\r\n      check: \"String\"\r\n    },\r\n\r\n    /**\r\n     * Populated with the marshaled response.\r\n     */\r\n    model: {\r\n      nullable: true,\r\n      event: \"changeModel\"\r\n    }\r\n  },\r\n\r\n  members: {\r\n    _marshaler: null,\r\n    _delegate: null,\r\n\r\n    __onActionSuccessBound: null,\r\n\r\n    /**\r\n     * Configure the resource's request by processing the delegate.\r\n     */\r\n    __configureRequest() {\r\n      var resource = this.getResource(),\r\n        delegate = this._delegate;\r\n\r\n      // Overrides existing callback, if any\r\n      resource.configureRequest(delegate.configureRequest);\r\n    },\r\n\r\n    /**\r\n     * Listen to events fired by the resource.\r\n     */\r\n    __addListeners() {\r\n      var resource = this.getResource(),\r\n        actionName = this.getActionName();\r\n\r\n      if (resource && actionName) {\r\n        resource.addListener(\r\n          this.getActionName() + \"Success\",\r\n          this.__onActionSuccessBound\r\n        );\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Handle actionSuccess event.\r\n     *\r\n     * Updates model with marshaled response.\r\n     *\r\n     * @param e {qx.event.type.Rest} Rest event.\r\n     */\r\n    __onActionSuccess(e) {\r\n      var data = e.getData(),\r\n        marshaler = this._marshaler,\r\n        model,\r\n        oldModel = this.getModel(),\r\n        delegate = this._delegate;\r\n\r\n      // Skip if data is empty\r\n      if (data) {\r\n        // Manipulate received data\r\n        if (delegate && delegate.manipulateData) {\r\n          data = delegate.manipulateData(data);\r\n        }\r\n\r\n        // Create class suiting data and assign instance\r\n        // initialized with data to model property\r\n        marshaler.toClass(data, true);\r\n        model = marshaler.toModel(data);\r\n        if (model) {\r\n          this.setModel(model);\r\n        }\r\n      }\r\n\r\n      // Dispose instance marshaled before\r\n      if (oldModel && oldModel.dispose) {\r\n        oldModel.dispose();\r\n      }\r\n    }\r\n  },\r\n\r\n  destruct() {\r\n    var model = this.getModel();\r\n    if (model && typeof model.dispose === \"function\") {\r\n      model.dispose();\r\n    }\r\n\r\n    this._marshaler && this._marshaler.dispose();\r\n  }\r\n});\r\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAK,CAACC,MAAM,CAAC,oBAAoB,EAAE;IACpCC,MAAM,EAAEN,EAAE,CAACO,IAAI,CAACC,MAAM;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;IACEC,SAAS,WAAAA,UAACC,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,EAAE;MACxCZ,EAAA,CAAAO,IAAA,CAAAC,MAAA,CAAAK,WAAA,CAAAC,IAAA;MAEA,IAAI;QACF,IAAI,CAACC,WAAW,CAACL,QAAQ,CAAC;QAC1B,IAAI,CAACM,aAAa,CAACL,UAAU,CAAC;MAChC,CAAC,CAAC,OAAOM,CAAC,EAAE;QACV,IAAI,CAACC,OAAO,CAAC,CAAC;QACd,MAAMD,CAAC;MACT;MAEA,IAAI,CAACE,SAAS,GAAGP,QAAQ;MACzB,IAAI,CAACQ,UAAU,GAAG,IAAIpB,EAAE,CAACqB,IAAI,CAACC,OAAO,CAACC,IAAI,CAACX,QAAQ,CAAC;MAEpD,IAAIA,QAAQ,IAAIZ,EAAE,CAACwB,IAAI,CAACC,IAAI,CAACC,UAAU,CAACd,QAAQ,CAACe,gBAAgB,CAAC,EAAE;QAClE,IAAI,CAACC,SAAkB,CAAC,CAAC;MAC3B;MAEA,IAAI,CAACC,SAAsB,GAAG7B,EAAE,CAACwB,IAAI,CAACM,QAAQ,CAACC,IAAI,CACjD,IAAI,CAACC,SAAiB,EACtB,IACF,CAAC;MAED,IAAI,CAACC,SAAc,CAAC,CAAC;IACvB,CAAC;IAEDC,UAAU,EAAE;MACV;AACJ;AACA;MACIxB,QAAQ,EAAE;QACRyB,KAAK,EAAE;MACT,CAAC;MAED;AACJ;AACA;MACIxB,UAAU,EAAE;QACVwB,KAAK,EAAE;MACT,CAAC;MAED;AACJ;AACA;MACIC,KAAK,EAAE;QACLC,QAAQ,EAAE,IAAI;QACdC,KAAK,EAAE;MACT;IACF,CAAC;IAEDC,OAAO,EAAE;MACPnB,UAAU,EAAE,IAAI;MAChBD,SAAS,EAAE,IAAI;MAEfU,SAAsB,EAAE,IAAI;MAE5B;AACJ;AACA;MACID,SAAkB,WAAAY,UAAA,EAAG;QACnB,IAAI9B,QAAQ,GAAG,IAAI,CAAC+B,WAAW,CAAC,CAAC;UAC/B7B,QAAQ,GAAG,IAAI,CAACO,SAAS;;QAE3B;QACAT,QAAQ,CAACiB,gBAAgB,CAACf,QAAQ,CAACe,gBAAgB,CAAC;MACtD,CAAC;MAED;AACJ;AACA;MACIM,SAAc,WAAAS,UAAA,EAAG;QACf,IAAIhC,QAAQ,GAAG,IAAI,CAAC+B,WAAW,CAAC,CAAC;UAC/B9B,UAAU,GAAG,IAAI,CAACgC,aAAa,CAAC,CAAC;QAEnC,IAAIjC,QAAQ,IAAIC,UAAU,EAAE;UAC1BD,QAAQ,CAACkC,WAAW,CAClB,IAAI,CAACD,aAAa,CAAC,CAAC,GAAG,SAAS,EAChC,IAAI,CAACd,SACP,CAAC;QACH;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;AACA;MACIG,SAAiB,WAAAa,UAAC5B,CAAC,EAAE;QACnB,IAAII,IAAI,GAAGJ,CAAC,CAAC6B,OAAO,CAAC,CAAC;UACpBC,SAAS,GAAG,IAAI,CAAC3B,UAAU;UAC3BgB,KAAK;UACLY,QAAQ,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC;UAC1BrC,QAAQ,GAAG,IAAI,CAACO,SAAS;;QAE3B;QACA,IAAIE,IAAI,EAAE;UACR;UACA,IAAIT,QAAQ,IAAIA,QAAQ,CAACsC,cAAc,EAAE;YACvC7B,IAAI,GAAGT,QAAQ,CAACsC,cAAc,CAAC7B,IAAI,CAAC;UACtC;;UAEA;UACA;UACA0B,SAAS,CAACI,OAAO,CAAC9B,IAAI,EAAE,IAAI,CAAC;UAC7Be,KAAK,GAAGW,SAAS,CAACK,OAAO,CAAC/B,IAAI,CAAC;UAC/B,IAAIe,KAAK,EAAE;YACT,IAAI,CAACiB,QAAQ,CAACjB,KAAK,CAAC;UACtB;QACF;;QAEA;QACA,IAAIY,QAAQ,IAAIA,QAAQ,CAAC9B,OAAO,EAAE;UAChC8B,QAAQ,CAAC9B,OAAO,CAAC,CAAC;QACpB;MACF;IACF,CAAC;IAEDoC,QAAQ,WAAAA,SAAA,EAAG;MACT,IAAIlB,KAAK,GAAG,IAAI,CAACa,QAAQ,CAAC,CAAC;MAC3B,IAAIb,KAAK,IAAI,OAAOA,KAAK,CAAClB,OAAO,KAAK,UAAU,EAAE;QAChDkB,KAAK,CAAClB,OAAO,CAAC,CAAC;MACjB;MAEA,IAAI,CAACE,UAAU,IAAI,IAAI,CAACA,UAAU,CAACF,OAAO,CAAC,CAAC;IAC9C;EACF,CAAC,CAAC;EAhKFlB,EAAE,CAACqB,IAAI,CAACkC,KAAK,CAACC,IAAI,CAACrD,aAAa,GAAGA,aAAa;AAAC"
}