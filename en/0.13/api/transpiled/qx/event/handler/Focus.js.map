{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "event",
    "IEventHandler",
    "IDisposable",
    "construct",
    "manager",
    "constructor",
    "call",
    "_manager",
    "_window",
    "getWindow",
    "_document",
    "document",
    "_root",
    "documentElement",
    "_body",
    "body",
    "Environment",
    "get",
    "parseFloat",
    "application",
    "Inline",
    "Init",
    "getApplication",
    "__needsScrollFix",
    "_initObserver",
    "properties",
    "active",
    "apply",
    "nullable",
    "focus",
    "statics",
    "PRIORITY",
    "Registration",
    "PRIORITY_NORMAL",
    "SUPPORTED_TYPES",
    "blur",
    "focusin",
    "focusout",
    "activate",
    "deactivate",
    "IGNORE_CAN_HANDLE",
    "FOCUSABLE_ELEMENTS",
    "select",
    "mshtml",
    "a",
    "button",
    "frame",
    "iframe",
    "img",
    "input",
    "object",
    "textarea",
    "gecko",
    "opera",
    "webkit",
    "members",
    "__onNativeMouseDownWrapper",
    "__onNativeMouseUpWrapper",
    "__onNativeFocusWrapper",
    "__onNativeBlurWrapper",
    "__onNativeDragGestureWrapper",
    "__onNativeSelectStartWrapper",
    "__onNativeFocusInWrapper",
    "__onNativeFocusOutWrapper",
    "__previousFocus",
    "__previousActive",
    "__down",
    "__up",
    "__relatedTarget",
    "canHandleEvent",
    "target",
    "type",
    "registerEvent",
    "capture",
    "unregisterEvent",
    "element",
    "window",
    "setTimeout",
    "selection",
    "bom",
    "Selection",
    "length",
    "createTextRange",
    "textRange",
    "moveStart",
    "value",
    "collapse",
    "ex",
    "setFocus",
    "setActive",
    "getActive",
    "resetActive",
    "getFocus",
    "resetFocus",
    "tryActivate",
    "__findActivatableElement",
    "__fireEvent",
    "__P_212_15",
    "related",
    "bubbles",
    "evt",
    "createEvent",
    "Focus",
    "dispatchEvent",
    "_windowFocused",
    "__doWindowBlur",
    "__P_212_16",
    "__doWindowFocus",
    "__P_212_17",
    "lang",
    "Function",
    "listener",
    "__onNativeMouseDown",
    "__onNativeMouseUp",
    "__onNativeFocus",
    "__onNativeBlur",
    "__onNativeDragGesture",
    "Event",
    "addNativeListener",
    "__onNativeFocusIn",
    "__onNativeFocusOut",
    "__onNativeSelectStart",
    "edge",
    "domEvent",
    "_default",
    "_stopObserver",
    "removeNativeListener",
    "GlobalError",
    "observeMethod",
    "getTarget",
    "__isSelectable",
    "preventDefault",
    "focusTarget",
    "__findFocusableElement",
    "selectionStart",
    "selectionEnd",
    "relatedTarget",
    "getRelatedTarget",
    "unselectable",
    "empty",
    "current",
    "__fixFocus",
    "offsetWidth",
    "undefined",
    "parentNode",
    "__getCorrectFocusTarget",
    "__P_212_29",
    "focusedElement",
    "nodeName",
    "toLowerCase",
    "isClass",
    "widget",
    "ui",
    "Widget",
    "getWidgetByElement",
    "textField",
    "getChildControl",
    "getContentElement",
    "getDomElement",
    "__isFocusable",
    "__P_212_30",
    "el",
    "index",
    "Attribute",
    "focusable",
    "handler",
    "tagName",
    "__P_212_27",
    "nodeType",
    "getAttribute",
    "__P_212_14",
    "orig",
    "__P_212_26",
    "node",
    "attr",
    "_applyActive",
    "old",
    "scrollTo",
    "_applyFocus",
    "destruct",
    "__mouseActive",
    "defer",
    "addHandler",
    "entry",
    "toUpperCase"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/event/handler/Focus.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Sebastian Werner (wpbasti)\r\n     * Fabian Jakobs (fjakobs)\r\n     * Christian Hagendorn (chris_schmidt)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * This handler is used to normalize all focus/activation requirements\r\n * and normalize all cross browser quirks in this area.\r\n *\r\n * Notes:\r\n *\r\n * * Webkit and Opera (before 9.5) do not support tabIndex for all elements\r\n * (See also: https://bugs.webkit.org/show_bug.cgi?id=7138)\r\n *\r\n * * TabIndex is normally 0, which means all naturally focusable elements are focusable.\r\n * * TabIndex > 0 means that the element is focusable and tabable\r\n * * TabIndex < 0 means that the element, even if naturally possible, is not focusable.\r\n *\r\n * NOTE: Instances of this class must be disposed of after use\r\n *\r\n * @use(qx.event.dispatch.DomBubbling)\r\n */\r\nqx.Class.define(\"qx.event.handler.Focus\", {\r\n  extend: qx.core.Object,\r\n  implement: [qx.event.IEventHandler, qx.core.IDisposable],\r\n\r\n  /*\r\n  *****************************************************************************\r\n     CONSTRUCTOR\r\n  *****************************************************************************\r\n  */\r\n\r\n  /**\r\n   * Create a new instance\r\n   *\r\n   * @param manager {qx.event.Manager} Event manager for the window to use\r\n   *\r\n   * @ignore(qx.application.Inline)\r\n   */\r\n  construct(manager) {\r\n    super();\r\n\r\n    // Define shorthands\r\n    this._manager = manager;\r\n    this._window = manager.getWindow();\r\n    this._document = this._window.document;\r\n    this._root = this._document.documentElement;\r\n    this._body = this._document.body;\r\n\r\n    if (\r\n      qx.core.Environment.get(\"os.name\") == \"ios\" &&\r\n      parseFloat(qx.core.Environment.get(\"os.version\")) > 6 &&\r\n      parseFloat(qx.core.Environment.get(\"os.version\")) < 15 &&\r\n      (!qx.application.Inline ||\r\n        !qx.core.Init.getApplication() instanceof qx.application.Inline)\r\n    ) {\r\n      this.__needsScrollFix = true;\r\n    }\r\n\r\n    // Initialize\r\n    this._initObserver();\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     PROPERTIES\r\n  *****************************************************************************\r\n  */\r\n\r\n  properties: {\r\n    /** The active DOM element */\r\n    active: {\r\n      apply: \"_applyActive\",\r\n      nullable: true\r\n    },\r\n\r\n    /** The focused DOM element */\r\n    focus: {\r\n      apply: \"_applyFocus\",\r\n      nullable: true\r\n    }\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     STATICS\r\n  *****************************************************************************\r\n  */\r\n\r\n  statics: {\r\n    /** @type {Integer} Priority of this handler */\r\n    PRIORITY: qx.event.Registration.PRIORITY_NORMAL,\r\n\r\n    /** @type {Map} Supported event types */\r\n    SUPPORTED_TYPES: {\r\n      focus: 1,\r\n      blur: 1,\r\n      focusin: 1,\r\n      focusout: 1,\r\n      activate: 1,\r\n      deactivate: 1\r\n    },\r\n\r\n    /** @type {Integer} Whether the method \"canHandleEvent\" must be called */\r\n    IGNORE_CAN_HANDLE: true,\r\n\r\n    /**\r\n     * @type {Map} See: http://msdn.microsoft.com/en-us/library/ms534654(VS.85).aspx\r\n     */\r\n    FOCUSABLE_ELEMENTS: qx.core.Environment.select(\"engine.name\", {\r\n      mshtml: {\r\n        a: 1,\r\n        body: 1,\r\n        button: 1,\r\n        frame: 1,\r\n        iframe: 1,\r\n        img: 1,\r\n        input: 1,\r\n        object: 1,\r\n        select: 1,\r\n        textarea: 1\r\n      },\r\n\r\n      gecko: {\r\n        a: 1,\r\n        body: 1,\r\n        button: 1,\r\n        frame: 1,\r\n        iframe: 1,\r\n        img: 1,\r\n        input: 1,\r\n        object: 1,\r\n        select: 1,\r\n        textarea: 1\r\n      },\r\n\r\n      opera: {\r\n        button: 1,\r\n        input: 1,\r\n        select: 1,\r\n        textarea: 1\r\n      },\r\n\r\n      webkit: {\r\n        button: 1,\r\n        input: 1,\r\n        select: 1,\r\n        textarea: 1\r\n      }\r\n    })\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     MEMBERS\r\n  *****************************************************************************\r\n  */\r\n\r\n  members: {\r\n    __onNativeMouseDownWrapper: null,\r\n    __onNativeMouseUpWrapper: null,\r\n    __onNativeFocusWrapper: null,\r\n    __onNativeBlurWrapper: null,\r\n    __onNativeDragGestureWrapper: null,\r\n    __onNativeSelectStartWrapper: null,\r\n    __onNativeFocusInWrapper: null,\r\n    __onNativeFocusOutWrapper: null,\r\n    __previousFocus: null,\r\n    __previousActive: null,\r\n    __down: \"\",\r\n    __up: \"\",\r\n    __needsScrollFix: false,\r\n    __relatedTarget: null,\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      EVENT HANDLER INTERFACE\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    // interface implementation\r\n    canHandleEvent(target, type) {},\r\n\r\n    // interface implementation\r\n    registerEvent(target, type, capture) {\r\n      // Nothing needs to be done here\r\n    },\r\n\r\n    // interface implementation\r\n    unregisterEvent(target, type, capture) {\r\n      // Nothing needs to be done here\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      FOCUS/BLUR USER INTERFACE\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Focuses the given DOM element\r\n     *\r\n     * @param element {Element} DOM element to focus\r\n     */\r\n    focus(element) {\r\n      // Fixed timing issue with IE, see [BUG #3267]\r\n      if (qx.core.Environment.get(\"engine.name\") == \"mshtml\") {\r\n        window.setTimeout(function () {\r\n          try {\r\n            // focus element before set cursor position\r\n            element.focus();\r\n\r\n            // Fixed cursor position issue with IE, only when nothing is selected.\r\n            // See [BUG #3519] for details.\r\n            var selection = qx.bom.Selection.get(element);\r\n            if (\r\n              selection.length == 0 &&\r\n              typeof element.createTextRange == \"function\"\r\n            ) {\r\n              var textRange = element.createTextRange();\r\n              textRange.moveStart(\"character\", element.value.length);\r\n              textRange.collapse();\r\n              textRange.select();\r\n            }\r\n          } catch (ex) {}\r\n        }, 0);\r\n      } else {\r\n        // Fix re-focusing on mousup event\r\n        // See https://github.com/qooxdoo/qooxdoo/issues/9393 and\r\n        // discussion in https://github.com/qooxdoo/qooxdoo/pull/9394\r\n        window.setTimeout(function () {\r\n          try {\r\n            element.focus();\r\n          } catch (ex) {}\r\n        }, 0);\r\n      }\r\n\r\n      this.setFocus(element);\r\n      this.setActive(element);\r\n    },\r\n\r\n    /**\r\n     * Activates the given DOM element\r\n     *\r\n     * @param element {Element} DOM element to activate\r\n     */\r\n    activate(element) {\r\n      this.setActive(element);\r\n    },\r\n\r\n    /**\r\n     * Blurs the given DOM element\r\n     *\r\n     * @param element {Element} DOM element to focus\r\n     */\r\n    blur(element) {\r\n      try {\r\n        element.blur();\r\n      } catch (ex) {}\r\n\r\n      if (this.getActive() === element) {\r\n        this.resetActive();\r\n      }\r\n\r\n      if (this.getFocus() === element) {\r\n        this.resetFocus();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Deactivates the given DOM element\r\n     *\r\n     * @param element {Element} DOM element to activate\r\n     */\r\n    deactivate(element) {\r\n      if (this.getActive() === element) {\r\n        this.resetActive();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Tries to activate the given element. This checks whether\r\n     * the activation is allowed first.\r\n     *\r\n     * @param element {Element} DOM element to activate\r\n     */\r\n    tryActivate(element) {\r\n      var active = this.__findActivatableElement(element);\r\n      if (active) {\r\n        this.setActive(active);\r\n      }\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      HELPER\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Shorthand to fire events from within this class.\r\n     *\r\n     * @param target {Element} DOM element which is the target\r\n     * @param related {Element} DOM element which is the related target\r\n     * @param type {String} Name of the event to fire\r\n     * @param bubbles {Boolean} Whether the event should bubble\r\n     * @return {qx.Promise?} a promise, if one or more of the event handlers returned a promise\r\n     */\r\n    __fireEvent(target, related, type, bubbles) {\r\n      var Registration = qx.event.Registration;\r\n\r\n      var evt = Registration.createEvent(type, qx.event.type.Focus, [\r\n        target,\r\n        related,\r\n        bubbles\r\n      ]);\r\n\r\n      return Registration.dispatchEvent(target, evt);\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      WINDOW FOCUS/BLUR SUPPORT\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /** @type {Boolean} Whether the window is focused currently */\r\n    _windowFocused: true,\r\n\r\n    /**\r\n     * Helper for native event listeners to react on window blur\r\n     */\r\n    __doWindowBlur() {\r\n      // Omit doubled blur events\r\n      // which is a common behavior at least for gecko based clients\r\n      if (this._windowFocused) {\r\n        this._windowFocused = false;\r\n        this.__fireEvent(this._window, null, \"blur\", false);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Helper for native event listeners to react on window focus\r\n     */\r\n    __doWindowFocus() {\r\n      // Omit doubled focus events\r\n      // which is a common behavior at least for gecko based clients\r\n      if (!this._windowFocused) {\r\n        this._windowFocused = true;\r\n        this.__fireEvent(this._window, null, \"focus\", false);\r\n      }\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      NATIVE OBSERVER\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Initializes event listeners.\r\n     *\r\n     * @signature function()\r\n     */\r\n    _initObserver: qx.core.Environment.select(\"engine.name\", {\r\n      gecko() {\r\n        // Bind methods\r\n        this.__onNativeMouseDownWrapper = qx.lang.Function.listener(\r\n          this.__onNativeMouseDown,\r\n          this\r\n        );\r\n\r\n        this.__onNativeMouseUpWrapper = qx.lang.Function.listener(\r\n          this.__onNativeMouseUp,\r\n          this\r\n        );\r\n\r\n        this.__onNativeFocusWrapper = qx.lang.Function.listener(\r\n          this.__onNativeFocus,\r\n          this\r\n        );\r\n\r\n        this.__onNativeBlurWrapper = qx.lang.Function.listener(\r\n          this.__onNativeBlur,\r\n          this\r\n        );\r\n\r\n        this.__onNativeDragGestureWrapper = qx.lang.Function.listener(\r\n          this.__onNativeDragGesture,\r\n          this\r\n        );\r\n\r\n        // Register events\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"mousedown\",\r\n          this.__onNativeMouseDownWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"mouseup\",\r\n          this.__onNativeMouseUpWrapper,\r\n          true\r\n        );\r\n\r\n        // Capturing is needed for gecko to correctly\r\n        // handle focus of input and textarea fields\r\n        qx.bom.Event.addNativeListener(\r\n          this._window,\r\n          \"focus\",\r\n          this.__onNativeFocusWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._window,\r\n          \"blur\",\r\n          this.__onNativeBlurWrapper,\r\n          true\r\n        );\r\n\r\n        // Capture drag events\r\n        qx.bom.Event.addNativeListener(\r\n          this._window,\r\n          \"draggesture\",\r\n          this.__onNativeDragGestureWrapper,\r\n          true\r\n        );\r\n      },\r\n\r\n      mshtml() {\r\n        // Bind methods\r\n        this.__onNativeMouseDownWrapper = qx.lang.Function.listener(\r\n          this.__onNativeMouseDown,\r\n          this\r\n        );\r\n\r\n        this.__onNativeMouseUpWrapper = qx.lang.Function.listener(\r\n          this.__onNativeMouseUp,\r\n          this\r\n        );\r\n\r\n        this.__onNativeFocusInWrapper = qx.lang.Function.listener(\r\n          this.__onNativeFocusIn,\r\n          this\r\n        );\r\n\r\n        this.__onNativeFocusOutWrapper = qx.lang.Function.listener(\r\n          this.__onNativeFocusOut,\r\n          this\r\n        );\r\n\r\n        this.__onNativeSelectStartWrapper = qx.lang.Function.listener(\r\n          this.__onNativeSelectStart,\r\n          this\r\n        );\r\n\r\n        // Register events\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"mousedown\",\r\n          this.__onNativeMouseDownWrapper\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"mouseup\",\r\n          this.__onNativeMouseUpWrapper\r\n        );\r\n\r\n        // MSHTML supports their own focusin and focusout events\r\n        // To detect which elements get focus the target is useful\r\n        // The window blur can detected using focusout and look\r\n        // for the toTarget property which is empty in this case.\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"focusin\",\r\n          this.__onNativeFocusInWrapper\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"focusout\",\r\n          this.__onNativeFocusOutWrapper\r\n        );\r\n\r\n        // Add selectstart to prevent selection\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"selectstart\",\r\n          this.__onNativeSelectStartWrapper\r\n        );\r\n      },\r\n\r\n      webkit: qx.core.Environment.select(\"browser.name\", {\r\n        // fix for [ISSUE #9174]\r\n        // distinguish bettween MS Edge, which is reported\r\n        // as engine webkit and all other webkit browsers\r\n        edge(domEvent) {\r\n          // Bind methods\r\n          this.__onNativeMouseDownWrapper = qx.lang.Function.listener(\r\n            this.__onNativeMouseDown,\r\n            this\r\n          );\r\n\r\n          this.__onNativeMouseUpWrapper = qx.lang.Function.listener(\r\n            this.__onNativeMouseUp,\r\n            this\r\n          );\r\n\r\n          this.__onNativeFocusOutWrapper = qx.lang.Function.listener(\r\n            this.__onNativeFocusOut,\r\n            this\r\n          );\r\n\r\n          this.__onNativeFocusInWrapper = qx.lang.Function.listener(\r\n            this.__onNativeFocusIn,\r\n            this\r\n          );\r\n\r\n          this.__onNativeSelectStartWrapper = qx.lang.Function.listener(\r\n            this.__onNativeSelectStart,\r\n            this\r\n          );\r\n\r\n          // Register events\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"mousedown\",\r\n            this.__onNativeMouseDownWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"mouseup\",\r\n            this.__onNativeMouseUpWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"selectstart\",\r\n            this.__onNativeSelectStartWrapper,\r\n            false\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"focusin\",\r\n            this.__onNativeFocusInWrapper\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"focusout\",\r\n            this.__onNativeFocusOutWrapper\r\n          );\r\n        },\r\n\r\n        default(domEvent) {\r\n          // Bind methods\r\n          this.__onNativeMouseDownWrapper = qx.lang.Function.listener(\r\n            this.__onNativeMouseDown,\r\n            this\r\n          );\r\n\r\n          this.__onNativeMouseUpWrapper = qx.lang.Function.listener(\r\n            this.__onNativeMouseUp,\r\n            this\r\n          );\r\n\r\n          this.__onNativeFocusOutWrapper = qx.lang.Function.listener(\r\n            this.__onNativeFocusOut,\r\n            this\r\n          );\r\n\r\n          this.__onNativeFocusWrapper = qx.lang.Function.listener(\r\n            this.__onNativeFocus,\r\n            this\r\n          );\r\n\r\n          this.__onNativeBlurWrapper = qx.lang.Function.listener(\r\n            this.__onNativeBlur,\r\n            this\r\n          );\r\n\r\n          this.__onNativeSelectStartWrapper = qx.lang.Function.listener(\r\n            this.__onNativeSelectStart,\r\n            this\r\n          );\r\n\r\n          // Register events\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"mousedown\",\r\n            this.__onNativeMouseDownWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"mouseup\",\r\n            this.__onNativeMouseUpWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._document,\r\n            \"selectstart\",\r\n            this.__onNativeSelectStartWrapper,\r\n            false\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._window,\r\n            \"DOMFocusOut\",\r\n            this.__onNativeFocusOutWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._window,\r\n            \"focus\",\r\n            this.__onNativeFocusWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.addNativeListener(\r\n            this._window,\r\n            \"blur\",\r\n            this.__onNativeBlurWrapper,\r\n            true\r\n          );\r\n        }\r\n      }),\r\n\r\n      opera() {\r\n        // Bind methods\r\n        this.__onNativeMouseDownWrapper = qx.lang.Function.listener(\r\n          this.__onNativeMouseDown,\r\n          this\r\n        );\r\n\r\n        this.__onNativeMouseUpWrapper = qx.lang.Function.listener(\r\n          this.__onNativeMouseUp,\r\n          this\r\n        );\r\n\r\n        this.__onNativeFocusInWrapper = qx.lang.Function.listener(\r\n          this.__onNativeFocusIn,\r\n          this\r\n        );\r\n\r\n        this.__onNativeFocusOutWrapper = qx.lang.Function.listener(\r\n          this.__onNativeFocusOut,\r\n          this\r\n        );\r\n\r\n        // Register events\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"mousedown\",\r\n          this.__onNativeMouseDownWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._document,\r\n          \"mouseup\",\r\n          this.__onNativeMouseUpWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._window,\r\n          \"DOMFocusIn\",\r\n          this.__onNativeFocusInWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.addNativeListener(\r\n          this._window,\r\n          \"DOMFocusOut\",\r\n          this.__onNativeFocusOutWrapper,\r\n          true\r\n        );\r\n      }\r\n    }),\r\n\r\n    /**\r\n     * Disconnects event listeners.\r\n     *\r\n     * @signature function()\r\n     */\r\n    _stopObserver: qx.core.Environment.select(\"engine.name\", {\r\n      gecko() {\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"mousedown\",\r\n          this.__onNativeMouseDownWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"mouseup\",\r\n          this.__onNativeMouseUpWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._window,\r\n          \"focus\",\r\n          this.__onNativeFocusWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._window,\r\n          \"blur\",\r\n          this.__onNativeBlurWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._window,\r\n          \"draggesture\",\r\n          this.__onNativeDragGestureWrapper,\r\n          true\r\n        );\r\n      },\r\n\r\n      mshtml() {\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"mousedown\",\r\n          this.__onNativeMouseDownWrapper\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"mouseup\",\r\n          this.__onNativeMouseUpWrapper\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"focusin\",\r\n          this.__onNativeFocusInWrapper\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"focusout\",\r\n          this.__onNativeFocusOutWrapper\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"selectstart\",\r\n          this.__onNativeSelectStartWrapper\r\n        );\r\n      },\r\n\r\n      webkit: qx.core.Environment.select(\"browser.name\", {\r\n        // fix for [ISSUE #9174]\r\n        // distinguish bettween MS Edge, which is reported\r\n        // as engine webkit and all other webkit browsers\r\n        edge() {\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"mousedown\",\r\n            this.__onNativeMouseDownWrapper\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"mouseup\",\r\n            this.__onNativeMouseUpWrapper\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"focusin\",\r\n            this.__onNativeFocusInWrapper\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"focusout\",\r\n            this.__onNativeFocusOutWrapper\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"selectstart\",\r\n            this.__onNativeSelectStartWrapper\r\n          );\r\n        },\r\n\r\n        default() {\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"mousedown\",\r\n            this.__onNativeMouseDownWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"mouseup\",\r\n            this.__onNativeMouseUpWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._document,\r\n            \"selectstart\",\r\n            this.__onNativeSelectStartWrapper,\r\n            false\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._window,\r\n            \"DOMFocusOut\",\r\n            this.__onNativeFocusOutWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._window,\r\n            \"focus\",\r\n            this.__onNativeFocusWrapper,\r\n            true\r\n          );\r\n\r\n          qx.bom.Event.removeNativeListener(\r\n            this._window,\r\n            \"blur\",\r\n            this.__onNativeBlurWrapper,\r\n            true\r\n          );\r\n        }\r\n      }),\r\n\r\n      opera() {\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"mousedown\",\r\n          this.__onNativeMouseDownWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._document,\r\n          \"mouseup\",\r\n          this.__onNativeMouseUpWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._window,\r\n          \"DOMFocusIn\",\r\n          this.__onNativeFocusInWrapper,\r\n          true\r\n        );\r\n\r\n        qx.bom.Event.removeNativeListener(\r\n          this._window,\r\n          \"DOMFocusOut\",\r\n          this.__onNativeFocusOutWrapper,\r\n          true\r\n        );\r\n      }\r\n    }),\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      NATIVE LISTENERS\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Native event listener for <code>draggesture</code> event\r\n     * supported by gecko. Used to stop native drag and drop when\r\n     * selection is disabled.\r\n     *\r\n     * @see https://developer.mozilla.org/en-US/docs/Drag_and_Drop\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeDragGesture: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        gecko(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (!this.__isSelectable(target)) {\r\n            qx.bom.Event.preventDefault(domEvent);\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>DOMFocusIn</code> or <code>focusin</code>\r\n     * depending on the client's engine.\r\n     *\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeFocusIn: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        mshtml(domEvent) {\r\n          // Force window focus to be the first\r\n          this.__doWindowFocus();\r\n\r\n          // Update internal data\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n\r\n          // IE focusin is also fired on elements which are not focusable at all\r\n          // We need to look up for the next focusable element.\r\n          var focusTarget = this.__findFocusableElement(target);\r\n          if (focusTarget) {\r\n            this.setFocus(focusTarget);\r\n          }\r\n\r\n          // Make target active\r\n          this.tryActivate(target);\r\n        },\r\n\r\n        webkit: qx.core.Environment.select(\"browser.name\", {\r\n          // fix for [ISSUE #9174]\r\n          // distinguish bettween MS Edge, which is reported\r\n          // as engine webkit and all other webkit browsers\r\n          edge(domEvent) {\r\n            // Force window focus to be the first\r\n            this.__doWindowFocus();\r\n\r\n            // Update internal data\r\n            var target = qx.bom.Event.getTarget(domEvent);\r\n\r\n            // IE focusin is also fired on elements which are not focusable at all\r\n            // We need to look up for the next focusable element.\r\n            var focusTarget = this.__findFocusableElement(target);\r\n            if (focusTarget) {\r\n              this.setFocus(focusTarget);\r\n            }\r\n\r\n            // Make target active\r\n            this.tryActivate(target);\r\n          },\r\n\r\n          default: null\r\n        }),\r\n\r\n        opera(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (target == this._document || target == this._window) {\r\n            this.__doWindowFocus();\r\n\r\n            if (this.__previousFocus) {\r\n              this.setFocus(this.__previousFocus);\r\n              delete this.__previousFocus;\r\n            }\r\n\r\n            if (this.__previousActive) {\r\n              this.setActive(this.__previousActive);\r\n              delete this.__previousActive;\r\n            }\r\n          } else {\r\n            this.setFocus(target);\r\n            this.tryActivate(target);\r\n\r\n            // Clear selection\r\n            if (!this.__isSelectable(target)) {\r\n              target.selectionStart = 0;\r\n              target.selectionEnd = 0;\r\n            }\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>DOMFocusOut</code> or <code>focusout</code>\r\n     * depending on the client's engine.\r\n     *\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeFocusOut: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        mshtml(domEvent) {\r\n          var relatedTarget = qx.bom.Event.getRelatedTarget(domEvent);\r\n\r\n          // If the focus goes to nowhere (the document is blurred)\r\n          if (relatedTarget == null) {\r\n            // Update internal representation\r\n            this.__doWindowBlur();\r\n\r\n            // Reset active and focus\r\n            this.resetFocus();\r\n            this.resetActive();\r\n          }\r\n        },\r\n\r\n        webkit: qx.core.Environment.select(\"browser.name\", {\r\n          // fix for [ISSUE #9174]\r\n          // distinguish bettween MS Edge, which is reported\r\n          // as engine webkit and all other webkit browsers\r\n          edge(domEvent) {\r\n            var relatedTarget = qx.bom.Event.getRelatedTarget(domEvent);\r\n\r\n            // If the focus goes to nowhere (the document is blurred)\r\n            if (relatedTarget == null) {\r\n              // Update internal representation\r\n              this.__doWindowBlur();\r\n\r\n              // Reset active and focus\r\n              this.resetFocus();\r\n              this.resetActive();\r\n            }\r\n          },\r\n\r\n          default(domEvent) {\r\n            var target = qx.bom.Event.getTarget(domEvent);\r\n\r\n            if (target === this.getFocus()) {\r\n              this.resetFocus();\r\n            }\r\n\r\n            if (target === this.getActive()) {\r\n              this.resetActive();\r\n            }\r\n          }\r\n        }),\r\n\r\n        opera(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (target == this._document) {\r\n            this.__doWindowBlur();\r\n\r\n            // Store old focus/active elements\r\n            // Opera do not fire focus events for them\r\n            // when refocussing the window (in my opinion an error)\r\n            this.__previousFocus = this.getFocus();\r\n            this.__previousActive = this.getActive();\r\n\r\n            this.resetFocus();\r\n            this.resetActive();\r\n          } else {\r\n            if (target === this.getFocus()) {\r\n              this.resetFocus();\r\n            }\r\n\r\n            if (target === this.getActive()) {\r\n              this.resetActive();\r\n            }\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>blur</code>.\r\n     *\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeBlur: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        gecko(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (target === this._window || target === this._document) {\r\n            this.__doWindowBlur();\r\n\r\n            this.resetActive();\r\n            this.resetFocus();\r\n          }\r\n        },\r\n\r\n        webkit(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (target === this._window || target === this._document) {\r\n            this.__doWindowBlur();\r\n\r\n            // Store old focus/active elements\r\n            // Opera do not fire focus events for them\r\n            // when refocussing the window (in my opinion an error)\r\n            this.__previousFocus = this.getFocus();\r\n            this.__previousActive = this.getActive();\r\n\r\n            this.resetActive();\r\n            this.resetFocus();\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>focus</code>.\r\n     *\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeFocus: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        gecko(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n\r\n          if (target === this._window || target === this._document) {\r\n            this.__doWindowFocus();\r\n\r\n            // Always speak of the body, not the window or document\r\n            target = this._body;\r\n          }\r\n\r\n          this.setFocus(target);\r\n          this.tryActivate(target);\r\n        },\r\n\r\n        webkit(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (target === this._window || target === this._document) {\r\n            this.__doWindowFocus();\r\n\r\n            if (this.__previousFocus) {\r\n              this.setFocus(this.__previousFocus);\r\n              delete this.__previousFocus;\r\n            }\r\n\r\n            if (this.__previousActive) {\r\n              this.setActive(this.__previousActive);\r\n              delete this.__previousActive;\r\n            }\r\n          } else {\r\n            this.__relatedTarget = domEvent.relatedTarget;\r\n            this.setFocus(target);\r\n            this.__relatedTarget = null;\r\n            this.tryActivate(target);\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>mousedown</code>.\r\n     *\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeMouseDown: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        mshtml(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n\r\n          // Stop events when no focus element available (or blocked)\r\n          var focusTarget = this.__findFocusableElement(target);\r\n          if (focusTarget) {\r\n            // Add unselectable to keep selection\r\n            if (!this.__isSelectable(target)) {\r\n              // The element is not selectable. Block selection.\r\n              target.unselectable = \"on\";\r\n\r\n              // Unselectable may keep the current selection which\r\n              // is not what we like when changing the focus element.\r\n              // So we clear it\r\n              try {\r\n                if (document.selection) {\r\n                  document.selection.empty();\r\n                }\r\n              } catch (ex) {\r\n                // ignore 'Unknown runtime error'\r\n              }\r\n\r\n              // The unselectable attribute stops focussing as well.\r\n              // Do this manually.\r\n              try {\r\n                focusTarget.focus();\r\n              } catch (ex) {\r\n                // ignore \"Can't move focus of this control\" error\r\n              }\r\n            }\r\n          } else {\r\n            // Stop event for blocking support\r\n            qx.bom.Event.preventDefault(domEvent);\r\n\r\n            // Add unselectable to keep selection\r\n            if (!this.__isSelectable(target)) {\r\n              target.unselectable = \"on\";\r\n            }\r\n          }\r\n        },\r\n\r\n        webkit(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          var focusTarget = this.__findFocusableElement(target);\r\n\r\n          if (focusTarget) {\r\n            this.setFocus(focusTarget);\r\n          } else {\r\n            qx.bom.Event.preventDefault(domEvent);\r\n          }\r\n        },\r\n\r\n        gecko(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          var focusTarget = this.__findFocusableElement(target);\r\n\r\n          if (focusTarget) {\r\n            this.setFocus(focusTarget);\r\n          } else {\r\n            qx.bom.Event.preventDefault(domEvent);\r\n          }\r\n        },\r\n\r\n        opera(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          var focusTarget = this.__findFocusableElement(target);\r\n\r\n          if (!this.__isSelectable(target)) {\r\n            // Prevent the default action for all non-selectable\r\n            // targets. This prevents text selection and context menu.\r\n            qx.bom.Event.preventDefault(domEvent);\r\n\r\n            // The stopped event keeps the selection\r\n            // of the previously focused element.\r\n            // We need to clear the old selection.\r\n            if (focusTarget) {\r\n              var current = this.getFocus();\r\n              if (current && current.selectionEnd) {\r\n                current.selectionStart = 0;\r\n                current.selectionEnd = 0;\r\n                current.blur();\r\n              }\r\n\r\n              // The prevented event also stop the focus, do\r\n              // it manually if needed.\r\n              if (focusTarget) {\r\n                this.setFocus(focusTarget);\r\n              }\r\n            }\r\n          } else if (focusTarget) {\r\n            this.setFocus(focusTarget);\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>mouseup</code>.\r\n     *\r\n     * @signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeMouseUp: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        mshtml(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (target.unselectable) {\r\n            target.unselectable = \"off\";\r\n          }\r\n\r\n          this.tryActivate(this.__fixFocus(target));\r\n        },\r\n\r\n        gecko(domEvent) {\r\n          // As of Firefox 3.0:\r\n          // Gecko fires mouseup on XUL elements\r\n          // We only want to deal with real HTML elements\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          while (target && target.offsetWidth === undefined) {\r\n            target = target.parentNode;\r\n          }\r\n\r\n          if (target) {\r\n            this.tryActivate(target);\r\n          }\r\n        },\r\n\r\n        webkit(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          this.tryActivate(this.__fixFocus(target));\r\n        },\r\n\r\n        opera(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          this.tryActivate(this.__fixFocus(target));\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Fix for bug #9331.\r\n     *\r\n     * @signature function(target)\r\n     * @param target {Element} element to check\r\n     * @return {Element} return correct target (in case of compound input controls should always return textfield);\r\n     */\r\n    __getCorrectFocusTarget(target) {\r\n      var focusedElement = this.getFocus();\r\n      if (focusedElement && target != focusedElement) {\r\n        if (\r\n          focusedElement.nodeName.toLowerCase() === \"input\" ||\r\n          focusedElement.nodeName.toLowerCase() === \"textarea\"\r\n        ) {\r\n          return focusedElement;\r\n        }\r\n        if (qx.Class.isClass(\"qx.ui.core.Widget\")) {\r\n          // Check compound widgets\r\n          var widget = qx.ui.core.Widget.getWidgetByElement(focusedElement),\r\n            textField =\r\n              widget &&\r\n              widget.getChildControl &&\r\n              widget.getChildControl(\"textfield\", true);\r\n        }\r\n        if (textField) {\r\n          return textField.getContentElement().getDomElement();\r\n        }\r\n      }\r\n      return target;\r\n    },\r\n\r\n    /**\r\n     * Fix for bug #2602.\r\n     *\r\n     * @signature function(target)\r\n     * @param target {Element} target element from mouse up event\r\n     * @return {Element} Element to activate;\r\n     */\r\n    __fixFocus: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        mshtml(target) {\r\n          return this.__getCorrectFocusTarget(target);\r\n        },\r\n\r\n        webkit(target) {\r\n          return this.__getCorrectFocusTarget(target);\r\n        },\r\n\r\n        default(target) {\r\n          return target;\r\n        }\r\n      })\r\n    ),\r\n\r\n    /**\r\n     * Native event listener for <code>selectstart</code>.\r\n     *\r\n     *@signature function(domEvent)\r\n     * @param domEvent {Event} Native event\r\n     */\r\n    __onNativeSelectStart: qx.event.GlobalError.observeMethod(\r\n      qx.core.Environment.select(\"engine.name\", {\r\n        mshtml(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (!this.__isSelectable(target)) {\r\n            qx.bom.Event.preventDefault(domEvent);\r\n          }\r\n        },\r\n\r\n        webkit(domEvent) {\r\n          var target = qx.bom.Event.getTarget(domEvent);\r\n          if (!this.__isSelectable(target)) {\r\n            qx.bom.Event.preventDefault(domEvent);\r\n          }\r\n        },\r\n\r\n        default: null\r\n      })\r\n    ),\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      HELPER METHODS\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    /**\r\n     * Whether the given element is focusable. This is perfectly modeled to the\r\n     * browsers behavior and this way may differ in the various clients.\r\n     *\r\n     * @param el {Element} DOM Element to query\r\n     * @return {Boolean} Whether the element is focusable\r\n     */\r\n    __isFocusable(el) {\r\n      var index = qx.bom.element.Attribute.get(el, \"tabIndex\");\r\n      if (index >= 1) {\r\n        return true;\r\n      }\r\n\r\n      var focusable = qx.event.handler.Focus.FOCUSABLE_ELEMENTS;\r\n      if (index >= 0 && focusable[el.tagName]) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * Returns the next focusable parent element of an activated DOM element.\r\n     *\r\n     * @param el {Element} Element to start lookup with.\r\n     * @return {Element|null} The next focusable element.\r\n     */\r\n    __findFocusableElement(el) {\r\n      while (el && el.nodeType === 1) {\r\n        if (el.getAttribute(\"qxKeepFocus\") == \"on\") {\r\n          return null;\r\n        }\r\n\r\n        if (this.__isFocusable(el)) {\r\n          return el;\r\n        }\r\n\r\n        el = el.parentNode;\r\n      }\r\n\r\n      // This should be identical to the one which is selected when\r\n      // clicking into an empty page area. In mshtml this must be\r\n      // the body of the document.\r\n      return this._body;\r\n    },\r\n\r\n    /**\r\n     * Returns the next activatable element. May be the element itself.\r\n     * Works a bit different than the method {@link #__findFocusableElement}\r\n     * as it looks up for a parent which is has a keep focus flag. When\r\n     * there is such a parent it returns null otherwise the original\r\n     * incoming element.\r\n     *\r\n     * @param el {Element} Element to start lookup with.\r\n     * @return {Element} The next activatable element.\r\n     */\r\n    __findActivatableElement(el) {\r\n      var orig = el;\r\n\r\n      while (el && el.nodeType === 1) {\r\n        if (el.getAttribute(\"qxKeepActive\") == \"on\") {\r\n          return null;\r\n        }\r\n\r\n        el = el.parentNode;\r\n      }\r\n\r\n      return orig;\r\n    },\r\n\r\n    /**\r\n     * Whether the given el (or its content) should be selectable\r\n     * by the user.\r\n     *\r\n     * @param node {Element} Node to start lookup with\r\n     * @return {Boolean} Whether the content is selectable.\r\n     */\r\n    __isSelectable(node) {\r\n      while (node && node.nodeType === 1) {\r\n        var attr = node.getAttribute(\"qxSelectable\");\r\n        if (attr != null) {\r\n          return attr === \"on\";\r\n        }\r\n\r\n        node = node.parentNode;\r\n      }\r\n\r\n      return true;\r\n    },\r\n\r\n    /*\r\n    ---------------------------------------------------------------------------\r\n      PROPERTY APPLY ROUTINES\r\n    ---------------------------------------------------------------------------\r\n    */\r\n\r\n    // apply routine\r\n    _applyActive(value, old) {\r\n      // Fire events\r\n      if (old) {\r\n        this.__fireEvent(old, value, \"deactivate\", true);\r\n      }\r\n\r\n      if (value) {\r\n        this.__fireEvent(value, old, \"activate\", true);\r\n      }\r\n      // correct scroll position for iOS 7 to 14 [ISSUE #9393 and #10565]\r\n      if (this.__needsScrollFix) {\r\n        window.scrollTo(0, 0);\r\n      }\r\n    },\r\n\r\n    // apply routine\r\n    _applyFocus(value, old) {\r\n      // Fire bubbling events\r\n      if (old) {\r\n        this.__fireEvent(old, value, \"focusout\", true);\r\n      }\r\n\r\n      if (value) {\r\n        this.__fireEvent(value, old, \"focusin\", true);\r\n      }\r\n\r\n      // Fire after events\r\n      if (old) {\r\n        this.__fireEvent(old, value, \"blur\", false);\r\n      }\r\n\r\n      if (value) {\r\n        this.__fireEvent(value, old || this.__relatedTarget, \"focus\", false);\r\n      }\r\n    }\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     DESTRUCTOR\r\n  *****************************************************************************\r\n  */\r\n\r\n  destruct() {\r\n    this._stopObserver();\r\n    this._manager =\r\n      this._window =\r\n      this._document =\r\n      this._root =\r\n      this._body =\r\n      this.__mouseActive =\r\n      this.__relatedTarget =\r\n        null;\r\n  },\r\n\r\n  /*\r\n  *****************************************************************************\r\n     DEFER\r\n  *****************************************************************************\r\n  */\r\n\r\n  defer(statics) {\r\n    qx.event.Registration.addHandler(statics);\r\n\r\n    // For faster lookups generate uppercase tag names dynamically\r\n    var focusable = statics.FOCUSABLE_ELEMENTS;\r\n    for (var entry in focusable) {\r\n      focusable[entry.toUpperCase()] = 1;\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}