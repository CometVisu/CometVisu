{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "construct",
    "_listener",
    "__listenerIdCount",
    "__channelToIdMapping",
    "members",
    "on",
    "channel",
    "type",
    "handler",
    "scope",
    "_addListener",
    "onAny",
    "listeners",
    "id",
    "params",
    "param",
    "lang",
    "Type",
    "isString",
    "paramsRegexp",
    "exec",
    "push",
    "RegExp",
    "replace",
    "regExp",
    "remove",
    "listener",
    "has",
    "path",
    "Object",
    "isEmpty",
    "test",
    "emit",
    "customData",
    "_emit",
    "listenerMatchedAny",
    "_emitListeners",
    "listenerMatched",
    "info",
    "_emitRoute",
    "match",
    "value",
    "shift",
    "i",
    "length",
    "call",
    "undefined",
    "event",
    "Messaging"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/event/Messaging.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tino Butz (tbtz)\n     * Martin Wittemann (wittemann)\n\n************************************************************************ */\n\n/**\n * Define messages to react on certain channels.\n *\n * The channel names will be used in the {@link #on} method to define handlers which will\n * be called on certain channels and routes. The {@link #emit} method can be used\n * to execute a given route on a channel. {@link #onAny} defines a handler on any channel.\n *\n * *Example*\n *\n * Here is a little example of how to use the messaging.\n *\n * <pre class='javascript'>\n *   var m = new qx.event.Messaging();\n *\n *   m.on(\"get\", \"/address/{id}\", function(data) {\n *     var id = data.params.id; // 1234\n *     // do something with the id...\n *   },this);\n *\n *   m.emit(\"get\", \"/address/1234\");\n * </pre>\n */\nqx.Bootstrap.define(\"qx.event.Messaging\", {\n  construct() {\n    this._listener = {};\n    this.__listenerIdCount = 0;\n    this.__channelToIdMapping = {};\n  },\n\n  members: {\n    _listener: null,\n    __listenerIdCount: null,\n    __channelToIdMapping: null,\n\n    /**\n     * Adds a route handler for the given channel. The route is called\n     * if the {@link #emit} method finds a match.\n     *\n     * @param channel {String} The channel of the message.\n     * @param type {String|RegExp} The type, used for checking if the executed path matches.\n     * @param handler {Function} The handler to call if the route matches the executed path.\n     * @param scope {var ? null} The scope of the handler.\n     * @return {String} The id of the route used to remove the route.\n     */\n    on(channel, type, handler, scope) {\n      return this._addListener(channel, type, handler, scope);\n    },\n\n    /**\n     * Adds a handler for the \"any\" channel. The \"any\" channel is called\n     * before all other channels.\n     *\n     * @param type {String|RegExp} The route, used for checking if the executed path matches\n     * @param handler {Function} The handler to call if the route matches the executed path\n     * @param scope {var ? null} The scope of the handler.\n     * @return {String} The id of the route used to remove the route.\n     */\n    onAny(type, handler, scope) {\n      return this._addListener(\"any\", type, handler, scope);\n    },\n\n    /**\n     * Adds a listener for a certain channel.\n     *\n     * @param channel {String} The channel the route should be registered for\n     * @param type {String|RegExp} The type, used for checking if the executed path matches\n     * @param handler {Function} The handler to call if the route matches the executed path\n     * @param scope {var ? null} The scope of the handler.\n     * @return {String} The id of the route used to remove the route.\n     */\n    _addListener(channel, type, handler, scope) {\n      var listeners = (this._listener[channel] = this._listener[channel] || {});\n      var id = this.__listenerIdCount++;\n      var params = [];\n      var param = null;\n\n      // Convert the route to a regular expression.\n      if (qx.lang.Type.isString(type)) {\n        var paramsRegexp = /\\{([\\w\\d]+)\\}/g;\n\n        while ((param = paramsRegexp.exec(type)) !== null) {\n          params.push(param[1]);\n        }\n        type = new RegExp(\"^\" + type.replace(paramsRegexp, \"([^/]+)\") + \"$\");\n      }\n\n      listeners[id] = {\n        regExp: type,\n        params: params,\n        handler: handler,\n        scope: scope\n      };\n\n      this.__channelToIdMapping[id] = channel;\n      return id;\n    },\n\n    /**\n     * Removes a registered listener by the given id.\n     *\n     * @param id {String} The id of the registered listener.\n     */\n    remove(id) {\n      var channel = this.__channelToIdMapping[id];\n      var listener = this._listener[channel];\n      delete listener[id];\n      delete this.__channelToIdMapping[id];\n    },\n\n    /**\n     * Checks if a listener is registered for the given path in the given channel.\n     *\n     * @param channel {String} The channel of the message.\n     * @param path {String} The path to check.\n     * @return {Boolean} Whether a listener is registered.\n     */\n    has(channel, path) {\n      var listeners = this._listener[channel];\n      if (!listeners || qx.lang.Object.isEmpty(listeners)) {\n        return false;\n      }\n\n      for (var id in listeners) {\n        var listener = listeners[id];\n        if (listener.regExp.test(path)) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Sends a message on the given channel and informs all matching route handlers.\n     *\n     * @param channel {String} The channel of the message.\n     * @param path {String} The path to execute\n     * @param params {Map} The given parameters that should be propagated\n     * @param customData {var} The given custom data that should be propagated\n     */\n    emit(channel, path, params, customData) {\n      this._emit(channel, path, params, customData);\n    },\n\n    /**\n     * Executes a certain channel with a given path. Informs all\n     * route handlers that match with the path.\n     *\n     * @param channel {String} The channel to execute.\n     * @param path {String} The path to check\n     * @param params {Map} The given parameters that should be propagated\n     * @param customData {var} The given custom data that should be propagated\n     */\n    _emit(channel, path, params, customData) {\n      var listenerMatchedAny = false;\n      var listener = this._listener[\"any\"];\n      listenerMatchedAny = this._emitListeners(\n        channel,\n        path,\n        listener,\n        params,\n        customData\n      );\n\n      var listenerMatched = false;\n      listener = this._listener[channel];\n      listenerMatched = this._emitListeners(\n        channel,\n        path,\n        listener,\n        params,\n        customData\n      );\n\n      if (!listenerMatched && !listenerMatchedAny) {\n        qx.Bootstrap.info(\"No listener found for \" + path);\n      }\n    },\n\n    /**\n     * Executes all given listener for a certain channel. Checks all listeners if they match\n     * with the given path and executes the stored handler of the matching route.\n     *\n     * @param channel {String} The channel to execute.\n     * @param path {String} The path to check\n     * @param listeners {Map[]} All routes to test and execute.\n     * @param params {Map} The given parameters that should be propagated\n     * @param customData {var} The given custom data that should be propagated\n     *\n     * @return {Boolean} Whether the route has been executed\n     */\n    _emitListeners(channel, path, listeners, params, customData) {\n      if (!listeners || qx.lang.Object.isEmpty(listeners)) {\n        return false;\n      }\n      var listenerMatched = false;\n      for (var id in listeners) {\n        var listener = listeners[id];\n        listenerMatched |= this._emitRoute(\n          channel,\n          path,\n          listener,\n          params,\n          customData\n        );\n      }\n      return listenerMatched;\n    },\n\n    /**\n     * Executes a certain listener. Checks if the listener matches the given path and\n     * executes the stored handler of the route.\n     *\n     * @param channel {String} The channel to execute.\n     * @param path {String} The path to check\n     * @param listener {Map} The route data.\n     * @param params {Map} The given parameters that should be propagated\n     * @param customData {var} The given custom data that should be propagated\n     *\n     * @return {Boolean} Whether the route has been executed\n     */\n    _emitRoute(channel, path, listener, params, customData) {\n      var match = listener.regExp.exec(path);\n      if (match) {\n        var params = params || {};\n        var param = null;\n        var value = null;\n        match.shift(); // first match is the whole path\n        for (var i = 0; i < match.length; i++) {\n          value = match[i];\n          param = listener.params[i];\n          if (param) {\n            params[param] = value;\n          } else {\n            params[i] = value;\n          }\n        }\n        listener.handler.call(listener.scope, {\n          path: path,\n          params: params,\n          customData: customData\n        });\n      }\n\n      return match != undefined;\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}