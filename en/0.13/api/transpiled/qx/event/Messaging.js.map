{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "construct",
    "_listener",
    "__listenerIdCount",
    "__channelToIdMapping",
    "members",
    "on",
    "channel",
    "type",
    "handler",
    "scope",
    "_addListener",
    "onAny",
    "listeners",
    "id",
    "params",
    "param",
    "lang",
    "Type",
    "isString",
    "paramsRegexp",
    "exec",
    "push",
    "RegExp",
    "replace",
    "regExp",
    "remove",
    "listener",
    "has",
    "path",
    "Object",
    "isEmpty",
    "test",
    "emit",
    "customData",
    "_emit",
    "listenerMatchedAny",
    "_emitListeners",
    "listenerMatched",
    "info",
    "_emitRoute",
    "match",
    "value",
    "shift",
    "i",
    "length",
    "call",
    "undefined",
    "event",
    "Messaging"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/event/Messaging.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Tino Butz (tbtz)\r\n     * Martin Wittemann (wittemann)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * Define messages to react on certain channels.\r\n *\r\n * The channel names will be used in the {@link #on} method to define handlers which will\r\n * be called on certain channels and routes. The {@link #emit} method can be used\r\n * to execute a given route on a channel. {@link #onAny} defines a handler on any channel.\r\n *\r\n * *Example*\r\n *\r\n * Here is a little example of how to use the messaging.\r\n *\r\n * <pre class='javascript'>\r\n *   var m = new qx.event.Messaging();\r\n *\r\n *   m.on(\"get\", \"/address/{id}\", function(data) {\r\n *     var id = data.params.id; // 1234\r\n *     // do something with the id...\r\n *   },this);\r\n *\r\n *   m.emit(\"get\", \"/address/1234\");\r\n * </pre>\r\n */\r\nqx.Bootstrap.define(\"qx.event.Messaging\", {\r\n  construct() {\r\n    this._listener = {};\r\n    this.__listenerIdCount = 0;\r\n    this.__channelToIdMapping = {};\r\n  },\r\n\r\n  members: {\r\n    _listener: null,\r\n    __listenerIdCount: null,\r\n    __channelToIdMapping: null,\r\n\r\n    /**\r\n     * Adds a route handler for the given channel. The route is called\r\n     * if the {@link #emit} method finds a match.\r\n     *\r\n     * @param channel {String} The channel of the message.\r\n     * @param type {String|RegExp} The type, used for checking if the executed path matches.\r\n     * @param handler {Function} The handler to call if the route matches the executed path.\r\n     * @param scope {var ? null} The scope of the handler.\r\n     * @return {String} The id of the route used to remove the route.\r\n     */\r\n    on(channel, type, handler, scope) {\r\n      return this._addListener(channel, type, handler, scope);\r\n    },\r\n\r\n    /**\r\n     * Adds a handler for the \"any\" channel. The \"any\" channel is called\r\n     * before all other channels.\r\n     *\r\n     * @param type {String|RegExp} The route, used for checking if the executed path matches\r\n     * @param handler {Function} The handler to call if the route matches the executed path\r\n     * @param scope {var ? null} The scope of the handler.\r\n     * @return {String} The id of the route used to remove the route.\r\n     */\r\n    onAny(type, handler, scope) {\r\n      return this._addListener(\"any\", type, handler, scope);\r\n    },\r\n\r\n    /**\r\n     * Adds a listener for a certain channel.\r\n     *\r\n     * @param channel {String} The channel the route should be registered for\r\n     * @param type {String|RegExp} The type, used for checking if the executed path matches\r\n     * @param handler {Function} The handler to call if the route matches the executed path\r\n     * @param scope {var ? null} The scope of the handler.\r\n     * @return {String} The id of the route used to remove the route.\r\n     */\r\n    _addListener(channel, type, handler, scope) {\r\n      var listeners = (this._listener[channel] = this._listener[channel] || {});\r\n      var id = this.__listenerIdCount++;\r\n      var params = [];\r\n      var param = null;\r\n\r\n      // Convert the route to a regular expression.\r\n      if (qx.lang.Type.isString(type)) {\r\n        var paramsRegexp = /\\{([\\w\\d]+)\\}/g;\r\n\r\n        while ((param = paramsRegexp.exec(type)) !== null) {\r\n          params.push(param[1]);\r\n        }\r\n        type = new RegExp(\"^\" + type.replace(paramsRegexp, \"([^/]+)\") + \"$\");\r\n      }\r\n\r\n      listeners[id] = {\r\n        regExp: type,\r\n        params: params,\r\n        handler: handler,\r\n        scope: scope\r\n      };\r\n\r\n      this.__channelToIdMapping[id] = channel;\r\n      return id;\r\n    },\r\n\r\n    /**\r\n     * Removes a registered listener by the given id.\r\n     *\r\n     * @param id {String} The id of the registered listener.\r\n     */\r\n    remove(id) {\r\n      var channel = this.__channelToIdMapping[id];\r\n      var listener = this._listener[channel];\r\n      delete listener[id];\r\n      delete this.__channelToIdMapping[id];\r\n    },\r\n\r\n    /**\r\n     * Checks if a listener is registered for the given path in the given channel.\r\n     *\r\n     * @param channel {String} The channel of the message.\r\n     * @param path {String} The path to check.\r\n     * @return {Boolean} Whether a listener is registered.\r\n     */\r\n    has(channel, path) {\r\n      var listeners = this._listener[channel];\r\n      if (!listeners || qx.lang.Object.isEmpty(listeners)) {\r\n        return false;\r\n      }\r\n\r\n      for (var id in listeners) {\r\n        var listener = listeners[id];\r\n        if (listener.regExp.test(path)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * Sends a message on the given channel and informs all matching route handlers.\r\n     *\r\n     * @param channel {String} The channel of the message.\r\n     * @param path {String} The path to execute\r\n     * @param params {Map} The given parameters that should be propagated\r\n     * @param customData {var} The given custom data that should be propagated\r\n     */\r\n    emit(channel, path, params, customData) {\r\n      this._emit(channel, path, params, customData);\r\n    },\r\n\r\n    /**\r\n     * Executes a certain channel with a given path. Informs all\r\n     * route handlers that match with the path.\r\n     *\r\n     * @param channel {String} The channel to execute.\r\n     * @param path {String} The path to check\r\n     * @param params {Map} The given parameters that should be propagated\r\n     * @param customData {var} The given custom data that should be propagated\r\n     */\r\n    _emit(channel, path, params, customData) {\r\n      var listenerMatchedAny = false;\r\n      var listener = this._listener[\"any\"];\r\n      listenerMatchedAny = this._emitListeners(\r\n        channel,\r\n        path,\r\n        listener,\r\n        params,\r\n        customData\r\n      );\r\n\r\n      var listenerMatched = false;\r\n      listener = this._listener[channel];\r\n      listenerMatched = this._emitListeners(\r\n        channel,\r\n        path,\r\n        listener,\r\n        params,\r\n        customData\r\n      );\r\n\r\n      if (!listenerMatched && !listenerMatchedAny) {\r\n        qx.Bootstrap.info(\"No listener found for \" + path);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Executes all given listener for a certain channel. Checks all listeners if they match\r\n     * with the given path and executes the stored handler of the matching route.\r\n     *\r\n     * @param channel {String} The channel to execute.\r\n     * @param path {String} The path to check\r\n     * @param listeners {Map[]} All routes to test and execute.\r\n     * @param params {Map} The given parameters that should be propagated\r\n     * @param customData {var} The given custom data that should be propagated\r\n     *\r\n     * @return {Boolean} Whether the route has been executed\r\n     */\r\n    _emitListeners(channel, path, listeners, params, customData) {\r\n      if (!listeners || qx.lang.Object.isEmpty(listeners)) {\r\n        return false;\r\n      }\r\n      var listenerMatched = false;\r\n      for (var id in listeners) {\r\n        var listener = listeners[id];\r\n        listenerMatched |= this._emitRoute(\r\n          channel,\r\n          path,\r\n          listener,\r\n          params,\r\n          customData\r\n        );\r\n      }\r\n      return listenerMatched;\r\n    },\r\n\r\n    /**\r\n     * Executes a certain listener. Checks if the listener matches the given path and\r\n     * executes the stored handler of the route.\r\n     *\r\n     * @param channel {String} The channel to execute.\r\n     * @param path {String} The path to check\r\n     * @param listener {Map} The route data.\r\n     * @param params {Map} The given parameters that should be propagated\r\n     * @param customData {var} The given custom data that should be propagated\r\n     *\r\n     * @return {Boolean} Whether the route has been executed\r\n     */\r\n    _emitRoute(channel, path, listener, params, customData) {\r\n      var match = listener.regExp.exec(path);\r\n      if (match) {\r\n        var params = params || {};\r\n        var param = null;\r\n        var value = null;\r\n        match.shift(); // first match is the whole path\r\n        for (var i = 0; i < match.length; i++) {\r\n          value = match[i];\r\n          param = listener.params[i];\r\n          if (param) {\r\n            params[param] = value;\r\n          } else {\r\n            params[i] = value;\r\n          }\r\n        }\r\n        listener.handler.call(listener.scope, {\r\n          path: path,\r\n          params: params,\r\n          customData: customData\r\n        });\r\n      }\r\n\r\n      return match != undefined;\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}