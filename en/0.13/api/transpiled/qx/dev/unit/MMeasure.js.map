{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "members",
    "measureRepeated",
    "msg",
    "callback",
    "finalize",
    "iterations",
    "displayIterations",
    "measure",
    "i",
    "measureIterations",
    "prepare",
    "time",
    "testTime",
    "startIter",
    "Date",
    "now",
    "maxTime",
    "profilingEnabled",
    "window",
    "top",
    "core",
    "Init",
    "getApplication",
    "runner",
    "view",
    "getNativeProfiling",
    "ex",
    "profilingActive",
    "console",
    "profile",
    "profileEnd",
    "start",
    "end",
    "renderStart",
    "self",
    "setTimeout",
    "resume",
    "renderTime",
    "log",
    "call",
    "wait",
    "ownTime",
    "dev",
    "unit",
    "MeasurementResult",
    "MMeasure"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/dev/unit/MMeasure.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2007-2012 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Fabian Jakobs (fjakobs)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * Measures JavaScript execution and rendering time for singular or repeated\r\n * operations.\r\n */\r\nqx.Mixin.define(\"qx.dev.unit.MMeasure\", {\r\n  members: {\r\n    /**\r\n     * Repeatedly runs code and measures execution and rendering times\r\n     *\r\n     * @param msg {String} Description of the measured operation\r\n     * @param callback {Function} Callback containing the code to be measured\r\n     * @param finalize {Function} Finalize function called once after measuring,\r\n     * e.g. for cleanup. Will not be measured.\r\n     * @param iterations {Number} Number of times to execute the callback\r\n     * @param displayIterations {Number?} Iterations to be displayed instead of\r\n     * <code>iterations</code>\r\n     */\r\n    measureRepeated(msg, callback, finalize, iterations, displayIterations) {\r\n      this.measure(\r\n        msg,\r\n        function () {\r\n          var i = iterations;\r\n          while (i--) {\r\n            callback(i);\r\n          }\r\n        },\r\n        finalize,\r\n        displayIterations || iterations\r\n      );\r\n    },\r\n\r\n    /**\r\n     * Repeatedly runs code for a given amount of time and measures completed\r\n     * iterations\r\n     *\r\n     * @param msg {String} Description of the measured operation\r\n     * @param prepare {Function} A function that will be called before every\r\n     * iteration. Its execution time is not included in the measurement\r\n     * @param callback {Function} Callback containing the code to be measured.\r\n     * Must return the number of completed iterations.\r\n     * @param finalize {Function} Finalize function called once after measuring,\r\n     * e.g. for cleanup. Will not be measured.\r\n     * @param time {Number} Amount of time in milliseconds\r\n     */\r\n    measureIterations(msg, prepare, callback, finalize, time) {\r\n      this.measure(\r\n        msg,\r\n        function () {\r\n          var i = 0;\r\n          var testTime = 0;\r\n          while (testTime < time) {\r\n            if (prepare) {\r\n              prepare();\r\n            }\r\n            var startIter = Date.now();\r\n            callback(i);\r\n            testTime += Date.now() - startIter;\r\n            i++;\r\n          }\r\n          return i;\r\n        },\r\n        finalize,\r\n        null,\r\n        time\r\n      );\r\n    },\r\n\r\n    /**\r\n     * Executes a given callback function once and measures JavaScript execution\r\n     * and rendering time\r\n     *\r\n     * @param msg {String} Description of the measured operation\r\n     * @param callback {Function} Callback containing the code to be measured\r\n     * @param finalize {Function} Finalize function called once after measuring,\r\n     * e.g. for cleanup. Will not be measured.\r\n     * @param displayIterations {Number?} Iterations to be displayed instead of\r\n     * <code>iterations</code>\r\n     * @param maxTime {Number?} Maximum amount of time the test will run. Only used\r\n     * for {@link #measureIterations}. If undefined, the test will be aborted after\r\n     * ten seconds.\r\n     */\r\n    measure(msg, callback, finalize, displayIterations, maxTime) {\r\n      // profiling\r\n      var profilingEnabled;\r\n      try {\r\n        profilingEnabled =\r\n          window.top.qx.core.Init.getApplication().runner.view.getNativeProfiling();\r\n      } catch (ex) {\r\n        profilingEnabled = false;\r\n      }\r\n\r\n      var profilingActive =\r\n        profilingEnabled &&\r\n        console &&\r\n        console.profile &&\r\n        typeof console.profile == \"function\" &&\r\n        console.profileEnd &&\r\n        typeof console.profileEnd == \"function\";\r\n\r\n      if (profilingActive) {\r\n        console.profile(msg);\r\n      }\r\n\r\n      var start = Date.now();\r\n      var iterations = callback();\r\n      var end = Date.now();\r\n\r\n      // profiling\r\n      if (profilingActive) {\r\n        console.profileEnd(msg);\r\n      }\r\n\r\n      var time = end - start;\r\n\r\n      var renderStart = Date.now();\r\n\r\n      var self = this;\r\n      setTimeout(function () {\r\n        self.resume(function () {\r\n          var renderTime = Date.now() - renderStart;\r\n          self.log(\r\n            msg,\r\n            iterations || displayIterations,\r\n            maxTime || time,\r\n            renderTime\r\n          );\r\n\r\n          finalize.call(self);\r\n        });\r\n      }, 0);\r\n\r\n      this.wait(maxTime ? maxTime + 5000 : 10000);\r\n    },\r\n\r\n    /**\r\n     * Logs a single measurement result\r\n     *\r\n     * @param msg {String} Description of the measured operation\r\n     * @param iterations {Number} Number of iterations\r\n     * @param ownTime {Number} JavaScript execution time in ms\r\n     * @param renderTime {Number} Dom rendering time in ms\r\n     */\r\n    log(msg, iterations, ownTime, renderTime) {\r\n      if (qx.core.Environment.get(\"qx.debug\")) {\r\n        this.debug(\r\n          [\r\n            msg,\r\n            \"Iterations: \" + iterations,\r\n            \"Time: \" + ownTime + \"ms\",\r\n            \"Render time: \" + renderTime + \"ms\"\r\n          ].join(\"; \")\r\n        );\r\n      }\r\n\r\n      throw new qx.dev.unit.MeasurementResult(\r\n        msg,\r\n        iterations,\r\n        ownTime,\r\n        renderTime\r\n      );\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}