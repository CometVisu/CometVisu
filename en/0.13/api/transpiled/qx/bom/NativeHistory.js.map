{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "bom",
    "History",
    "implement",
    "core",
    "IDisposable",
    "construct",
    "__attachListeners",
    "members",
    "__checkOnHashChange",
    "SUPPORTS_HASH_CHANGE_EVENT",
    "boundFunc",
    "lang",
    "Function",
    "bind",
    "__onHashChange",
    "event",
    "GlobalError",
    "observeMethod",
    "Event",
    "addNativeListener",
    "window",
    "Idle",
    "getInstance",
    "addListener",
    "__detatchListeners",
    "removeNativeListener",
    "removeListener",
    "currentState",
    "_readState",
    "Type",
    "isString",
    "getState",
    "_onHistoryLoad",
    "_decode",
    "_getHash",
    "_writeState",
    "Environment",
    "select",
    "opera",
    "state",
    "Timer",
    "once",
    "_setHash",
    "_encode",
    "destruct",
    "NativeHistory"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/NativeHistory.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/**\n * Default history manager implementation. Either polls for URL fragment\n * identifier (hash) changes or uses the native \"hashchange\" event.\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n * @internal\n */\nqx.Class.define(\"qx.bom.NativeHistory\", {\n  extend: qx.bom.History,\n  implement: [qx.core.IDisposable],\n\n  construct() {\n    super();\n    this.__attachListeners();\n  },\n\n  members: {\n    __checkOnHashChange: null,\n\n    /**\n     * Attach hash change listeners\n     */\n    __attachListeners() {\n      if (qx.bom.History.SUPPORTS_HASH_CHANGE_EVENT) {\n        var boundFunc = qx.lang.Function.bind(this.__onHashChange, this);\n        this.__checkOnHashChange =\n          qx.event.GlobalError.observeMethod(boundFunc);\n        qx.bom.Event.addNativeListener(\n          window,\n          \"hashchange\",\n          this.__checkOnHashChange\n        );\n      } else {\n        qx.event.Idle.getInstance().addListener(\n          \"interval\",\n          this.__onHashChange,\n          this\n        );\n      }\n    },\n\n    /**\n     * Remove hash change listeners\n     */\n    __detatchListeners() {\n      if (qx.bom.History.SUPPORTS_HASH_CHANGE_EVENT) {\n        qx.bom.Event.removeNativeListener(\n          window,\n          \"hashchange\",\n          this.__checkOnHashChange\n        );\n      } else {\n        qx.event.Idle.getInstance().removeListener(\n          \"interval\",\n          this.__onHashChange,\n          this\n        );\n      }\n    },\n\n    /**\n     * hash change event handler\n     */\n    __onHashChange() {\n      var currentState = this._readState();\n\n      if (\n        qx.lang.Type.isString(currentState) &&\n        currentState != this.getState()\n      ) {\n        this._onHistoryLoad(currentState);\n      }\n    },\n\n    /**\n     * Browser dependent function to read the current state of the history\n     *\n     * @return {String} current state of the browser history\n     */\n    _readState() {\n      return this._decode(this._getHash());\n    },\n\n    /**\n     * Save a state into the browser history.\n     *\n     * @param state {String} state to save\n     */\n    _writeState: qx.core.Environment.select(\"engine.name\", {\n      opera(state) {\n        qx.event.Timer.once(\n          function () {\n            this._setHash(this._encode(state));\n          },\n          this,\n          0\n        );\n      },\n\n      default(state) {\n        this._setHash(this._encode(state));\n      }\n    })\n  },\n\n  destruct() {\n    this.__detatchListeners();\n  }\n});\n"
  ],
  "mappings": "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"
}