{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "bom",
    "History",
    "implement",
    "core",
    "IDisposable",
    "construct",
    "__attachListeners",
    "members",
    "__checkOnHashChange",
    "SUPPORTS_HASH_CHANGE_EVENT",
    "boundFunc",
    "lang",
    "Function",
    "bind",
    "__onHashChange",
    "event",
    "GlobalError",
    "observeMethod",
    "Event",
    "addNativeListener",
    "window",
    "Idle",
    "getInstance",
    "addListener",
    "__detatchListeners",
    "removeNativeListener",
    "removeListener",
    "currentState",
    "_readState",
    "Type",
    "isString",
    "getState",
    "_onHistoryLoad",
    "_decode",
    "_getHash",
    "_writeState",
    "Environment",
    "select",
    "opera",
    "state",
    "Timer",
    "once",
    "_setHash",
    "_encode",
    "destruct",
    "NativeHistory"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/NativeHistory.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/**\n * Default history manager implementation. Either polls for URL fragment\n * identifier (hash) changes or uses the native \"hashchange\" event.\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n * @internal\n */\nqx.Class.define(\"qx.bom.NativeHistory\", {\n  extend: qx.bom.History,\n  implement: [qx.core.IDisposable],\n\n  construct() {\n    super();\n    this.__attachListeners();\n  },\n\n  members: {\n    __checkOnHashChange: null,\n\n    /**\n     * Attach hash change listeners\n     */\n    __attachListeners() {\n      if (qx.bom.History.SUPPORTS_HASH_CHANGE_EVENT) {\n        var boundFunc = qx.lang.Function.bind(this.__onHashChange, this);\n        this.__checkOnHashChange =\n          qx.event.GlobalError.observeMethod(boundFunc);\n        qx.bom.Event.addNativeListener(\n          window,\n          \"hashchange\",\n          this.__checkOnHashChange\n        );\n      } else {\n        qx.event.Idle.getInstance().addListener(\n          \"interval\",\n          this.__onHashChange,\n          this\n        );\n      }\n    },\n\n    /**\n     * Remove hash change listeners\n     */\n    __detatchListeners() {\n      if (qx.bom.History.SUPPORTS_HASH_CHANGE_EVENT) {\n        qx.bom.Event.removeNativeListener(\n          window,\n          \"hashchange\",\n          this.__checkOnHashChange\n        );\n      } else {\n        qx.event.Idle.getInstance().removeListener(\n          \"interval\",\n          this.__onHashChange,\n          this\n        );\n      }\n    },\n\n    /**\n     * hash change event handler\n     */\n    __onHashChange() {\n      var currentState = this._readState();\n\n      if (\n        qx.lang.Type.isString(currentState) &&\n        currentState != this.getState()\n      ) {\n        this._onHistoryLoad(currentState);\n      }\n    },\n\n    /**\n     * Browser dependent function to read the current state of the history\n     *\n     * @return {String} current state of the browser history\n     */\n    _readState() {\n      return this._decode(this._getHash());\n    },\n\n    /**\n     * Save a state into the browser history.\n     *\n     * @param state {String} state to save\n     */\n    _writeState: qx.core.Environment.select(\"engine.name\", {\n      opera(state) {\n        qx.event.Timer.once(\n          function () {\n            this._setHash(this._encode(state));\n          },\n          this,\n          0\n        );\n      },\n\n      default(state) {\n        this._setHash(this._encode(state));\n      }\n    })\n  },\n\n  destruct() {\n    this.__detatchListeners();\n  }\n});\n"
  ],
  "mappings": "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"
}