{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "bom",
    "request",
    "Script",
    "construct",
    "apply",
    "__generateId",
    "members",
    "responseJson",
    "__id",
    "__callbackParam",
    "__callbackName",
    "__callbackCalled",
    "__customCallbackCreated",
    "__generatedUrl",
    "__disposed",
    "__prefix",
    "open",
    "method",
    "url",
    "query",
    "callbackParam",
    "callbackName",
    "that",
    "constructor",
    "window",
    "data",
    "callback",
    "core",
    "Environment",
    "get",
    "debug",
    "Jsonp",
    "util",
    "Uri",
    "appendParamsToUrl",
    "__callBase",
    "undefined",
    "__deleteCustomCallback",
    "setCallbackParam",
    "param",
    "setCallbackName",
    "name",
    "setPrefix",
    "prefix",
    "getGeneratedUrl",
    "dispose",
    "_onNativeLoad",
    "status",
    "args",
    "prototype",
    "Date",
    "valueOf",
    "Math",
    "random",
    "substring"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/request/Jsonp.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n************************************************************************ */\n\n/**\n * A special script loader handling JSONP responses. Automatically\n * provides callbacks and populates responseJson property.\n *\n * Example:\n *\n * <pre class=\"javascript\">\n *  var req = new qx.bom.request.Jsonp();\n *\n *  // Some services have a fixed callback name\n *  // req.setCallbackName(\"callback\");\n *\n *  req.onload = function() {\n *    // Handle data received\n *    req.responseJson;\n *  }\n *\n *  req.open(\"GET\", url);\n *  req.send();\n * </pre>\n *\n * @require(qx.bom.request.Script#open)\n * @require(qx.bom.request.Script#on)\n * @require(qx.bom.request.Script#onreadystatechange)\n * @require(qx.bom.request.Script#onload)\n * @require(qx.bom.request.Script#onloadend)\n * @require(qx.bom.request.Script#onerror)\n * @require(qx.bom.request.Script#onabort)\n * @require(qx.bom.request.Script#ontimeout)\n * @require(qx.bom.request.Script#send)\n *\n * @group (IO)\n */\nqx.Bootstrap.define(\"qx.bom.request.Jsonp\", {\n  extend: qx.bom.request.Script,\n\n  construct() {\n    // Borrow super-class constructor\n    qx.bom.request.Script.apply(this);\n\n    this.__generateId();\n  },\n\n  members: {\n    /**\n     * @type {Object} Parsed JSON response.\n     */\n    responseJson: null,\n\n    /**\n     * @type {Number} Identifier of this instance.\n     */\n    __id: null,\n\n    /**\n     * @type {String} Callback parameter.\n     */\n    __callbackParam: null,\n\n    /**\n     * @type {String} Callback name.\n     */\n    __callbackName: null,\n\n    /**\n     * @type {Boolean} Whether callback was called.\n     */\n    __callbackCalled: null,\n\n    /**\n     * @type {Boolean} Whether a custom callback was created automatically.\n     */\n    __customCallbackCreated: null,\n\n    /**\n     * @type {String} The generated URL for the current request\n     */\n    __generatedUrl: null,\n\n    /**\n     * @type {Boolean} Whether request was disposed.\n     */\n    __disposed: null,\n\n    /** Prefix used for the internal callback name. */\n    __prefix: \"\",\n\n    /**\n     * Initializes (prepares) request.\n     *\n     * @param method {String}\n     *   The HTTP method to use.\n     *   This parameter exists for compatibility reasons. The script transport\n     *   does not support methods other than GET.\n     * @param url {String}\n     *   The URL to which to send the request.\n     */\n    open(method, url) {\n      if (this.__disposed) {\n        return;\n      }\n\n      var query = {},\n        callbackParam,\n        callbackName,\n        that = this;\n\n      // Reset properties that may have been set by previous request\n      this.responseJson = null;\n      this.__callbackCalled = false;\n\n      callbackParam = this.__callbackParam || \"callback\";\n      callbackName =\n        this.__callbackName ||\n        this.__prefix + \"qx.bom.request.Jsonp.\" + this.__id + \".callback\";\n\n      // Default callback\n      if (!this.__callbackName) {\n        // Store globally available reference to this object\n        this.constructor[this.__id] = this;\n\n        // Custom callback\n      } else {\n        // Dynamically create globally available callback (if it does not\n        // exist yet) with user defined name. Delegate to this object’s\n        // callback method.\n        if (!window[this.__callbackName]) {\n          this.__customCallbackCreated = true;\n          window[this.__callbackName] = function (data) {\n            that.callback(data);\n          };\n        } else {\n          if (qx.core.Environment.get(\"qx.debug.io\")) {\n            qx.Bootstrap.debug(\n              qx.bom.request.Jsonp,\n              \"Callback \" + this.__callbackName + \" already exists\"\n            );\n          }\n        }\n      }\n\n      if (qx.core.Environment.get(\"qx.debug.io\")) {\n        qx.Bootstrap.debug(\n          qx.bom.request.Jsonp,\n          \"Expecting JavaScript response to call: \" + callbackName\n        );\n      }\n\n      query[callbackParam] = callbackName;\n      this.__generatedUrl = url = qx.util.Uri.appendParamsToUrl(url, query);\n\n      this.__callBase(\"open\", [method, url]);\n    },\n\n    /**\n     * Callback provided for JSONP response to pass data.\n     *\n     * Called internally to populate responseJson property\n     * and indicate successful status.\n     *\n     * Note: If you write a custom callback you’ll need to call\n     * this method in order to notify the request about the data\n     * loaded. Writing a custom callback should not be necessary\n     * in most cases.\n     *\n     * @param data {Object} JSON\n     */\n    callback(data) {\n      if (this.__disposed) {\n        return;\n      }\n\n      // Signal callback was called\n      this.__callbackCalled = true;\n\n      // Sanitize and parse\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        data = qx.lang.Json.stringify(data);\n        data = qx.lang.Json.parse(data);\n      }\n\n      // Set response\n      this.responseJson = data;\n\n      // Delete global reference to this\n      this.constructor[this.__id] = undefined;\n\n      this.__deleteCustomCallback();\n    },\n\n    /**\n     * Set callback parameter.\n     *\n     * Some JSONP services expect the callback name to be passed labeled with a\n     * special URL parameter key, e.g. \"jsonp\" in \"?jsonp=myCallback\". The\n     * default is \"callback\".\n     *\n     * @param param {String} Name of the callback parameter.\n     * @return {qx.bom.request.Jsonp} Self reference for chaining.\n     */\n    setCallbackParam(param) {\n      this.__callbackParam = param;\n      return this;\n    },\n\n    /**\n     * Set callback name.\n     *\n     * Must be set to the name of the callback function that is called by the\n     * script returned from the JSONP service. By default, the callback name\n     * references this instance’s {@link #callback} method, allowing to connect\n     * multiple JSONP responses to different requests.\n     *\n     * If the JSONP service allows to set custom callback names, it should not\n     * be necessary to change the default. However, some services use a fixed\n     * callback name. This is when setting the callbackName is useful. A\n     * function is created and made available globally under the given name.\n     * The function receives the JSON data and dispatches it to this instance’s\n     * {@link #callback} method. Please note that this function is only created\n     * if it does not exist before.\n     *\n     * @param name {String} Name of the callback function.\n     * @return {qx.bom.request.Jsonp} Self reference for chaining.\n     */\n    setCallbackName(name) {\n      this.__callbackName = name;\n      return this;\n    },\n\n    /**\n     * Set the prefix used in front of 'qx.' in case 'qx' is not available\n     * (for qx.Website e.g.)\n     * @internal\n     * @param prefix {String} The prefix to put in front of 'qx'\n     */\n    setPrefix(prefix) {\n      this.__prefix = prefix;\n    },\n\n    /**\n     * Returns the generated URL for the current / last request\n     *\n     * @internal\n     * @return {String} The current generated URL for the request\n     */\n    getGeneratedUrl() {\n      return this.__generatedUrl;\n    },\n\n    dispose() {\n      // In case callback was not called\n      this.__deleteCustomCallback();\n\n      this.__callBase(\"dispose\");\n    },\n\n    /**\n     * Handle native load.\n     */\n    _onNativeLoad() {\n      // Indicate erroneous status (500) if callback was not called.\n      //\n      // Why 500? 5xx belongs to the range of server errors. If the callback was\n      // not called, it is assumed the server failed to provide an appropriate\n      // response. Since the exact reason of the error is unknown, the most\n      // generic message (\"500 Internal Server Error\") is chosen.\n      this.status = this.__callbackCalled ? 200 : 500;\n\n      this.__callBase(\"_onNativeLoad\");\n    },\n\n    /**\n     *  Delete custom callback if dynamically created before.\n     */\n    __deleteCustomCallback() {\n      if (this.__customCallbackCreated && window[this.__callbackName]) {\n        window[this.__callbackName] = undefined;\n        this.__customCallbackCreated = false;\n      }\n    },\n\n    /**\n     * Call overridden method.\n     *\n     * @param method {String} Name of the overridden method.\n     * @param args {Array} Arguments.\n     */\n    __callBase(method, args) {\n      qx.bom.request.Script.prototype[method].apply(this, args || []);\n    },\n\n    /**\n     * Generate ID.\n     */\n    __generateId() {\n      // Add random digits to date to allow immediately following requests\n      // that may be send at the same time\n      this.__id =\n        \"qx\" + new Date().valueOf() + (\"\" + Math.random()).substring(2, 5);\n    }\n  }\n});\n"
  ],
  "mappings": "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",
  "ignoreList": []
}