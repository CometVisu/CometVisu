{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "bom",
    "request",
    "Script",
    "construct",
    "apply",
    "__generateId",
    "members",
    "responseJson",
    "__id",
    "__callbackParam",
    "__callbackName",
    "__callbackCalled",
    "__customCallbackCreated",
    "__generatedUrl",
    "__disposed",
    "__prefix",
    "open",
    "method",
    "url",
    "query",
    "callbackParam",
    "callbackName",
    "that",
    "constructor",
    "window",
    "data",
    "callback",
    "core",
    "Environment",
    "get",
    "debug",
    "Jsonp",
    "util",
    "Uri",
    "appendParamsToUrl",
    "__callBase",
    "undefined",
    "__deleteCustomCallback",
    "setCallbackParam",
    "param",
    "setCallbackName",
    "name",
    "setPrefix",
    "prefix",
    "getGeneratedUrl",
    "dispose",
    "_onNativeLoad",
    "status",
    "__P_144_10",
    "__P_144_9",
    "args",
    "prototype",
    "__P_144_0",
    "Date",
    "valueOf",
    "Math",
    "random",
    "substring"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/request/Jsonp.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Tristan Koch (tristankoch)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * A special script loader handling JSONP responses. Automatically\r\n * provides callbacks and populates responseJson property.\r\n *\r\n * Example:\r\n *\r\n * <pre class=\"javascript\">\r\n *  var req = new qx.bom.request.Jsonp();\r\n *\r\n *  // Some services have a fixed callback name\r\n *  // req.setCallbackName(\"callback\");\r\n *\r\n *  req.onload = function() {\r\n *    // Handle data received\r\n *    req.responseJson;\r\n *  }\r\n *\r\n *  req.open(\"GET\", url);\r\n *  req.send();\r\n * </pre>\r\n *\r\n * @require(qx.bom.request.Script#open)\r\n * @require(qx.bom.request.Script#on)\r\n * @require(qx.bom.request.Script#onreadystatechange)\r\n * @require(qx.bom.request.Script#onload)\r\n * @require(qx.bom.request.Script#onloadend)\r\n * @require(qx.bom.request.Script#onerror)\r\n * @require(qx.bom.request.Script#onabort)\r\n * @require(qx.bom.request.Script#ontimeout)\r\n * @require(qx.bom.request.Script#send)\r\n *\r\n * @group (IO)\r\n */\r\nqx.Bootstrap.define(\"qx.bom.request.Jsonp\", {\r\n  extend: qx.bom.request.Script,\r\n\r\n  construct() {\r\n    // Borrow super-class constructor\r\n    qx.bom.request.Script.apply(this);\r\n\r\n    this.__generateId();\r\n  },\r\n\r\n  members: {\r\n    /**\r\n     * @type {Object} Parsed JSON response.\r\n     */\r\n    responseJson: null,\r\n\r\n    /**\r\n     * @type {Number} Identifier of this instance.\r\n     */\r\n    __id: null,\r\n\r\n    /**\r\n     * @type {String} Callback parameter.\r\n     */\r\n    __callbackParam: null,\r\n\r\n    /**\r\n     * @type {String} Callback name.\r\n     */\r\n    __callbackName: null,\r\n\r\n    /**\r\n     * @type {Boolean} Whether callback was called.\r\n     */\r\n    __callbackCalled: null,\r\n\r\n    /**\r\n     * @type {Boolean} Whether a custom callback was created automatically.\r\n     */\r\n    __customCallbackCreated: null,\r\n\r\n    /**\r\n     * @type {String} The generated URL for the current request\r\n     */\r\n    __generatedUrl: null,\r\n\r\n    /**\r\n     * @type {Boolean} Whether request was disposed.\r\n     */\r\n    __disposed: null,\r\n\r\n    /** Prefix used for the internal callback name. */\r\n    __prefix: \"\",\r\n\r\n    /**\r\n     * Initializes (prepares) request.\r\n     *\r\n     * @param method {String}\r\n     *   The HTTP method to use.\r\n     *   This parameter exists for compatibility reasons. The script transport\r\n     *   does not support methods other than GET.\r\n     * @param url {String}\r\n     *   The URL to which to send the request.\r\n     */\r\n    open(method, url) {\r\n      if (this.__disposed) {\r\n        return;\r\n      }\r\n\r\n      var query = {},\r\n        callbackParam,\r\n        callbackName,\r\n        that = this;\r\n\r\n      // Reset properties that may have been set by previous request\r\n      this.responseJson = null;\r\n      this.__callbackCalled = false;\r\n\r\n      callbackParam = this.__callbackParam || \"callback\";\r\n      callbackName =\r\n        this.__callbackName ||\r\n        this.__prefix + \"qx.bom.request.Jsonp.\" + this.__id + \".callback\";\r\n\r\n      // Default callback\r\n      if (!this.__callbackName) {\r\n        // Store globally available reference to this object\r\n        this.constructor[this.__id] = this;\r\n\r\n        // Custom callback\r\n      } else {\r\n        // Dynamically create globally available callback (if it does not\r\n        // exist yet) with user defined name. Delegate to this object’s\r\n        // callback method.\r\n        if (!window[this.__callbackName]) {\r\n          this.__customCallbackCreated = true;\r\n          window[this.__callbackName] = function (data) {\r\n            that.callback(data);\r\n          };\r\n        } else {\r\n          if (qx.core.Environment.get(\"qx.debug.io\")) {\r\n            qx.Bootstrap.debug(\r\n              qx.bom.request.Jsonp,\r\n              \"Callback \" + this.__callbackName + \" already exists\"\r\n            );\r\n          }\r\n        }\r\n      }\r\n\r\n      if (qx.core.Environment.get(\"qx.debug.io\")) {\r\n        qx.Bootstrap.debug(\r\n          qx.bom.request.Jsonp,\r\n          \"Expecting JavaScript response to call: \" + callbackName\r\n        );\r\n      }\r\n\r\n      query[callbackParam] = callbackName;\r\n      this.__generatedUrl = url = qx.util.Uri.appendParamsToUrl(url, query);\r\n\r\n      this.__callBase(\"open\", [method, url]);\r\n    },\r\n\r\n    /**\r\n     * Callback provided for JSONP response to pass data.\r\n     *\r\n     * Called internally to populate responseJson property\r\n     * and indicate successful status.\r\n     *\r\n     * Note: If you write a custom callback you’ll need to call\r\n     * this method in order to notify the request about the data\r\n     * loaded. Writing a custom callback should not be necessary\r\n     * in most cases.\r\n     *\r\n     * @param data {Object} JSON\r\n     */\r\n    callback(data) {\r\n      if (this.__disposed) {\r\n        return;\r\n      }\r\n\r\n      // Signal callback was called\r\n      this.__callbackCalled = true;\r\n\r\n      // Sanitize and parse\r\n      if (qx.core.Environment.get(\"qx.debug\")) {\r\n        data = qx.lang.Json.stringify(data);\r\n        data = qx.lang.Json.parse(data);\r\n      }\r\n\r\n      // Set response\r\n      this.responseJson = data;\r\n\r\n      // Delete global reference to this\r\n      this.constructor[this.__id] = undefined;\r\n\r\n      this.__deleteCustomCallback();\r\n    },\r\n\r\n    /**\r\n     * Set callback parameter.\r\n     *\r\n     * Some JSONP services expect the callback name to be passed labeled with a\r\n     * special URL parameter key, e.g. \"jsonp\" in \"?jsonp=myCallback\". The\r\n     * default is \"callback\".\r\n     *\r\n     * @param param {String} Name of the callback parameter.\r\n     * @return {qx.bom.request.Jsonp} Self reference for chaining.\r\n     */\r\n    setCallbackParam(param) {\r\n      this.__callbackParam = param;\r\n      return this;\r\n    },\r\n\r\n    /**\r\n     * Set callback name.\r\n     *\r\n     * Must be set to the name of the callback function that is called by the\r\n     * script returned from the JSONP service. By default, the callback name\r\n     * references this instance’s {@link #callback} method, allowing to connect\r\n     * multiple JSONP responses to different requests.\r\n     *\r\n     * If the JSONP service allows to set custom callback names, it should not\r\n     * be necessary to change the default. However, some services use a fixed\r\n     * callback name. This is when setting the callbackName is useful. A\r\n     * function is created and made available globally under the given name.\r\n     * The function receives the JSON data and dispatches it to this instance’s\r\n     * {@link #callback} method. Please note that this function is only created\r\n     * if it does not exist before.\r\n     *\r\n     * @param name {String} Name of the callback function.\r\n     * @return {qx.bom.request.Jsonp} Self reference for chaining.\r\n     */\r\n    setCallbackName(name) {\r\n      this.__callbackName = name;\r\n      return this;\r\n    },\r\n\r\n    /**\r\n     * Set the prefix used in front of 'qx.' in case 'qx' is not available\r\n     * (for qx.Website e.g.)\r\n     * @internal\r\n     * @param prefix {String} The prefix to put in front of 'qx'\r\n     */\r\n    setPrefix(prefix) {\r\n      this.__prefix = prefix;\r\n    },\r\n\r\n    /**\r\n     * Returns the generated URL for the current / last request\r\n     *\r\n     * @internal\r\n     * @return {String} The current generated URL for the request\r\n     */\r\n    getGeneratedUrl() {\r\n      return this.__generatedUrl;\r\n    },\r\n\r\n    dispose() {\r\n      // In case callback was not called\r\n      this.__deleteCustomCallback();\r\n\r\n      this.__callBase(\"dispose\");\r\n    },\r\n\r\n    /**\r\n     * Handle native load.\r\n     */\r\n    _onNativeLoad() {\r\n      // Indicate erroneous status (500) if callback was not called.\r\n      //\r\n      // Why 500? 5xx belongs to the range of server errors. If the callback was\r\n      // not called, it is assumed the server failed to provide an appropriate\r\n      // response. Since the exact reason of the error is unknown, the most\r\n      // generic message (\"500 Internal Server Error\") is chosen.\r\n      this.status = this.__callbackCalled ? 200 : 500;\r\n\r\n      this.__callBase(\"_onNativeLoad\");\r\n    },\r\n\r\n    /**\r\n     *  Delete custom callback if dynamically created before.\r\n     */\r\n    __deleteCustomCallback() {\r\n      if (this.__customCallbackCreated && window[this.__callbackName]) {\r\n        window[this.__callbackName] = undefined;\r\n        this.__customCallbackCreated = false;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Call overridden method.\r\n     *\r\n     * @param method {String} Name of the overridden method.\r\n     * @param args {Array} Arguments.\r\n     */\r\n    __callBase(method, args) {\r\n      qx.bom.request.Script.prototype[method].apply(this, args || []);\r\n    },\r\n\r\n    /**\r\n     * Generate ID.\r\n     */\r\n    __generateId() {\r\n      // Add random digits to date to allow immediately following requests\r\n      // that may be send at the same time\r\n      this.__id =\r\n        \"qx\" + new Date().valueOf() + (\"\" + Math.random()).substring(2, 5);\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}