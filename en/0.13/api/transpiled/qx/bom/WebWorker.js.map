{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "IDisposable",
    "construct",
    "src",
    "__isNative",
    "Environment",
    "get",
    "__initNative",
    "__initFake",
    "events",
    "message",
    "error",
    "members",
    "_worker",
    "_handleErrorBound",
    "_handleMessageBound",
    "__fake",
    "window",
    "Worker",
    "lang",
    "Function",
    "bind",
    "_handleMessage",
    "_handleError",
    "bom",
    "Event",
    "addNativeListener",
    "that",
    "req",
    "request",
    "Xhr",
    "onload",
    "postMessage",
    "e",
    "fireDataEvent",
    "eval",
    "responseText",
    "onmessage",
    "open",
    "send",
    "msg",
    "setTimeout",
    "data",
    "ex",
    "destruct",
    "removeNativeListener",
    "terminate",
    "WebWorker"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/WebWorker.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tino Butz (tbtz)\n     * Adrian Olaru (adrianolaru)\n\n************************************************************************ */\n\n/**\n *\n * Web Workers allows us to run JavaScript in parallel on a web page,\n * without blocking the user interface. A 'worker' is just another script\n * file that will be loaded and executed in the background.\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n * For more information see:\n * http://www.w3.org/TR/workers/\n */\nqx.Class.define(\"qx.bom.WebWorker\", {\n  extend: qx.core.Object,\n  implement: [qx.core.IDisposable],\n\n  /**\n   * Create a new instance.\n   *\n   * @param src {String} The path to worker as an URL\n   */\n  construct(src) {\n    super();\n    this.__isNative = qx.core.Environment.get(\"html.webworker\");\n    this.__isNative ? this.__initNative(src) : this.__initFake(src);\n  },\n\n  events: {\n    /** Fired when worker sends a message */\n    message: \"qx.event.type.Data\",\n\n    /** Fired when an error occurs */\n    error: \"qx.event.type.Data\"\n  },\n\n  members: {\n    _worker: null,\n    _handleErrorBound: null,\n    _handleMessageBound: null,\n\n    __isNative: true,\n    __fake: null,\n\n    /**\n     * Initialize the native worker\n     * @param src {String} The path to worker as an URL\n     */\n    __initNative(src) {\n      this._worker = new window.Worker(src);\n      this._handleMessageBound = qx.lang.Function.bind(\n        this._handleMessage,\n        this\n      );\n\n      this._handleErrorBound = qx.lang.Function.bind(this._handleError, this);\n\n      qx.bom.Event.addNativeListener(\n        this._worker,\n        \"message\",\n        this._handleMessageBound\n      );\n\n      qx.bom.Event.addNativeListener(\n        this._worker,\n        \"error\",\n        this._handleErrorBound\n      );\n    },\n\n    /**\n     * Initialize the fake worker\n     * @param src {String} The path to worker as an URL\n     * @lint ignoreDeprecated(eval)\n     */\n    __initFake(src) {\n      var that = this;\n      var req = new qx.bom.request.Xhr();\n      req.onload = function () {\n        that.__fake = (function () {\n          var postMessage = function (e) {\n            that.fireDataEvent(\"message\", e);\n          };\n          //set up context vars before evaluating the code\n          eval(\n            \"var onmessage = null, postMessage = \" +\n              postMessage +\n              \";\" +\n              req.responseText\n          );\n\n          //pick the right onmessage because of the uglyfier\n          return {\n            onmessage: eval(\"onmessage\"),\n            postMessage: postMessage\n          };\n        })();\n      };\n\n      req.open(\"GET\", src, false);\n      req.send();\n    },\n\n    /**\n     * Send a message to the worker.\n     * @param msg {String} the message\n     */\n    postMessage(msg) {\n      var that = this;\n\n      if (this.__isNative) {\n        this._worker.postMessage(msg);\n      } else {\n        setTimeout(function () {\n          try {\n            that.__fake.onmessage && that.__fake.onmessage({ data: msg });\n          } catch (ex) {\n            that.fireDataEvent(\"error\", ex);\n          }\n        }, 0);\n      }\n    },\n\n    /**\n     * Message handler\n     * @param e {Event} message event\n     */\n    _handleMessage(e) {\n      this.fireDataEvent(\"message\", e.data);\n    },\n\n    /**\n     * Error handler\n     * @param e {Event} error event\n     */\n    _handleError(e) {\n      this.fireDataEvent(\"error\", e.message);\n    }\n  },\n\n  destruct() {\n    if (this.__isNative) {\n      qx.bom.Event.removeNativeListener(\n        this._worker,\n        \"message\",\n        this._handleMessageBound\n      );\n\n      qx.bom.Event.removeNativeListener(\n        this._worker,\n        \"error\",\n        this._handleErrorBound\n      );\n\n      if (this._worker) {\n        this._worker.terminate();\n        this._worker = null;\n      }\n    } else {\n      if (this.__fake) {\n        this.__fake = null;\n      }\n    }\n  }\n});\n"
  ],
  "mappings": "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"
}