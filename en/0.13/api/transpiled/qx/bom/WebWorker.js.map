{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "IDisposable",
    "construct",
    "src",
    "constructor",
    "call",
    "__isNative",
    "Environment",
    "get",
    "__initNative",
    "__initFake",
    "events",
    "message",
    "error",
    "members",
    "_worker",
    "_handleErrorBound",
    "_handleMessageBound",
    "__fake",
    "__P_126_1",
    "window",
    "Worker",
    "lang",
    "Function",
    "bind",
    "_handleMessage",
    "_handleError",
    "bom",
    "Event",
    "addNativeListener",
    "__P_126_2",
    "that",
    "req",
    "request",
    "Xhr",
    "onload",
    "postMessage",
    "e",
    "fireDataEvent",
    "eval",
    "responseText",
    "onmessage",
    "open",
    "send",
    "msg",
    "setTimeout",
    "data",
    "ex",
    "destruct",
    "removeNativeListener",
    "terminate",
    "WebWorker"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/WebWorker.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Tino Butz (tbtz)\r\n     * Adrian Olaru (adrianolaru)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n *\r\n * Web Workers allows us to run JavaScript in parallel on a web page,\r\n * without blocking the user interface. A 'worker' is just another script\r\n * file that will be loaded and executed in the background.\r\n *\r\n * NOTE: Instances of this class must be disposed of after use\r\n *\r\n * For more information see:\r\n * http://www.w3.org/TR/workers/\r\n */\r\nqx.Class.define(\"qx.bom.WebWorker\", {\r\n  extend: qx.core.Object,\r\n  implement: [qx.core.IDisposable],\r\n\r\n  /**\r\n   * Create a new instance.\r\n   *\r\n   * @param src {String} The path to worker as an URL\r\n   */\r\n  construct(src) {\r\n    super();\r\n    this.__isNative = qx.core.Environment.get(\"html.webworker\");\r\n    this.__isNative ? this.__initNative(src) : this.__initFake(src);\r\n  },\r\n\r\n  events: {\r\n    /** Fired when worker sends a message */\r\n    message: \"qx.event.type.Data\",\r\n\r\n    /** Fired when an error occurs */\r\n    error: \"qx.event.type.Data\"\r\n  },\r\n\r\n  members: {\r\n    _worker: null,\r\n    _handleErrorBound: null,\r\n    _handleMessageBound: null,\r\n\r\n    __isNative: true,\r\n    __fake: null,\r\n\r\n    /**\r\n     * Initialize the native worker\r\n     * @param src {String} The path to worker as an URL\r\n     */\r\n    __initNative(src) {\r\n      this._worker = new window.Worker(src);\r\n      this._handleMessageBound = qx.lang.Function.bind(\r\n        this._handleMessage,\r\n        this\r\n      );\r\n\r\n      this._handleErrorBound = qx.lang.Function.bind(this._handleError, this);\r\n\r\n      qx.bom.Event.addNativeListener(\r\n        this._worker,\r\n        \"message\",\r\n        this._handleMessageBound\r\n      );\r\n\r\n      qx.bom.Event.addNativeListener(\r\n        this._worker,\r\n        \"error\",\r\n        this._handleErrorBound\r\n      );\r\n    },\r\n\r\n    /**\r\n     * Initialize the fake worker\r\n     * @param src {String} The path to worker as an URL\r\n     * @lint ignoreDeprecated(eval)\r\n     */\r\n    __initFake(src) {\r\n      var that = this;\r\n      var req = new qx.bom.request.Xhr();\r\n      req.onload = function () {\r\n        that.__fake = (function () {\r\n          var postMessage = function (e) {\r\n            that.fireDataEvent(\"message\", e);\r\n          };\r\n          //set up context vars before evaluating the code\r\n          eval(\r\n            \"var onmessage = null, postMessage = \" +\r\n              postMessage +\r\n              \";\" +\r\n              req.responseText\r\n          );\r\n\r\n          //pick the right onmessage because of the uglyfier\r\n          return {\r\n            onmessage: eval(\"onmessage\"),\r\n            postMessage: postMessage\r\n          };\r\n        })();\r\n      };\r\n\r\n      req.open(\"GET\", src, false);\r\n      req.send();\r\n    },\r\n\r\n    /**\r\n     * Send a message to the worker.\r\n     * @param msg {String} the message\r\n     */\r\n    postMessage(msg) {\r\n      var that = this;\r\n\r\n      if (this.__isNative) {\r\n        this._worker.postMessage(msg);\r\n      } else {\r\n        setTimeout(function () {\r\n          try {\r\n            that.__fake.onmessage && that.__fake.onmessage({ data: msg });\r\n          } catch (ex) {\r\n            that.fireDataEvent(\"error\", ex);\r\n          }\r\n        }, 0);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Message handler\r\n     * @param e {Event} message event\r\n     */\r\n    _handleMessage(e) {\r\n      this.fireDataEvent(\"message\", e.data);\r\n    },\r\n\r\n    /**\r\n     * Error handler\r\n     * @param e {Event} error event\r\n     */\r\n    _handleError(e) {\r\n      this.fireDataEvent(\"error\", e.message);\r\n    }\r\n  },\r\n\r\n  destruct() {\r\n    if (this.__isNative) {\r\n      qx.bom.Event.removeNativeListener(\r\n        this._worker,\r\n        \"message\",\r\n        this._handleMessageBound\r\n      );\r\n\r\n      qx.bom.Event.removeNativeListener(\r\n        this._worker,\r\n        \"error\",\r\n        this._handleErrorBound\r\n      );\r\n\r\n      if (this._worker) {\r\n        this._worker.terminate();\r\n        this._worker = null;\r\n      }\r\n    } else {\r\n      if (this.__fake) {\r\n        this.__fake = null;\r\n      }\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACI,KAAK,CAACC,MAAM,CAAC,kBAAkB,EAAE;IAClCC,MAAM,EAAEN,EAAE,CAACO,IAAI,CAACC,MAAM;IACtBC,SAAS,EAAE,CAACT,EAAE,CAACO,IAAI,CAACG,WAAW,CAAC;IAEhC;AACF;AACA;AACA;AACA;IACEC,SAAS,WAAAA,UAACC,GAAG,EAAE;MACbZ,EAAA,CAAAO,IAAA,CAAAC,MAAA,CAAAK,WAAA,CAAAC,IAAA;MACA,IAAI,CAACC,SAAU,GAAGf,EAAE,CAACO,IAAI,CAACS,WAAW,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC3D,IAAI,CAACF,SAAU,GAAG,IAAI,CAACG,SAAY,CAACN,GAAG,CAAC,GAAG,IAAI,CAACO,SAAU,CAACP,GAAG,CAAC;IACjE,CAAC;IAEDQ,MAAM,EAAE;MACN;MACAC,OAAO,EAAE,oBAAoB;MAE7B;MACAC,KAAK,EAAE;IACT,CAAC;IAEDC,OAAO,EAAE;MACPC,OAAO,EAAE,IAAI;MACbC,iBAAiB,EAAE,IAAI;MACvBC,mBAAmB,EAAE,IAAI;MAEzBX,SAAU,EAAE,IAAI;MAChBY,SAAM,EAAE,IAAI;MAEZ;AACJ;AACA;AACA;MACIT,SAAY,WAAAU,UAAChB,GAAG,EAAE;QAChB,IAAI,CAACY,OAAO,GAAG,IAAIK,MAAM,CAACC,MAAM,CAAClB,GAAG,CAAC;QACrC,IAAI,CAACc,mBAAmB,GAAG1B,EAAE,CAAC+B,IAAI,CAACC,QAAQ,CAACC,IAAI,CAC9C,IAAI,CAACC,cAAc,EACnB,IACF,CAAC;QAED,IAAI,CAACT,iBAAiB,GAAGzB,EAAE,CAAC+B,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACE,YAAY,EAAE,IAAI,CAAC;QAEvEnC,EAAE,CAACoC,GAAG,CAACC,KAAK,CAACC,iBAAiB,CAC5B,IAAI,CAACd,OAAO,EACZ,SAAS,EACT,IAAI,CAACE,mBACP,CAAC;QAED1B,EAAE,CAACoC,GAAG,CAACC,KAAK,CAACC,iBAAiB,CAC5B,IAAI,CAACd,OAAO,EACZ,OAAO,EACP,IAAI,CAACC,iBACP,CAAC;MACH,CAAC;MAED;AACJ;AACA;AACA;AACA;MACIN,SAAU,WAAAoB,UAAC3B,GAAG,EAAE;QACd,IAAI4B,IAAI,GAAG,IAAI;QACf,IAAIC,GAAG,GAAG,IAAIzC,EAAE,CAACoC,GAAG,CAACM,OAAO,CAACC,GAAG,CAAC,CAAC;QAClCF,GAAG,CAACG,MAAM,GAAG,YAAY;UACvBJ,IAAI,CAACb,SAAM,GAAI,YAAY;YACzB,IAAIkB,WAAW,GAAG,SAAdA,WAAWA,CAAaC,CAAC,EAAE;cAC7BN,IAAI,CAACO,aAAa,CAAC,SAAS,EAAED,CAAC,CAAC;YAClC,CAAC;YACD;YACAE,IAAI,CACF,sCAAsC,GACpCH,WAAW,GACX,GAAG,GACHJ,GAAG,CAACQ,YACR,CAAC;;YAED;YACA,OAAO;cACLC,SAAS,EAAEF,IAAI,CAAC,WAAW,CAAC;cAC5BH,WAAW,EAAEA;YACf,CAAC;UACH,CAAC,CAAE,CAAC;QACN,CAAC;QAEDJ,GAAG,CAACU,IAAI,CAAC,KAAK,EAAEvC,GAAG,EAAE,KAAK,CAAC;QAC3B6B,GAAG,CAACW,IAAI,CAAC,CAAC;MACZ,CAAC;MAED;AACJ;AACA;AACA;MACIP,WAAW,WAAAA,YAACQ,GAAG,EAAE;QACf,IAAIb,IAAI,GAAG,IAAI;QAEf,IAAI,IAAI,CAACzB,SAAU,EAAE;UACnB,IAAI,CAACS,OAAO,CAACqB,WAAW,CAACQ,GAAG,CAAC;QAC/B,CAAC,MAAM;UACLC,UAAU,CAAC,YAAY;YACrB,IAAI;cACFd,IAAI,CAACb,SAAM,CAACuB,SAAS,IAAIV,IAAI,CAACb,SAAM,CAACuB,SAAS,CAAC;gBAAEK,IAAI,EAAEF;cAAI,CAAC,CAAC;YAC/D,CAAC,CAAC,OAAOG,EAAE,EAAE;cACXhB,IAAI,CAACO,aAAa,CAAC,OAAO,EAAES,EAAE,CAAC;YACjC;UACF,CAAC,EAAE,CAAC,CAAC;QACP;MACF,CAAC;MAED;AACJ;AACA;AACA;MACItB,cAAc,WAAAA,eAACY,CAAC,EAAE;QAChB,IAAI,CAACC,aAAa,CAAC,SAAS,EAAED,CAAC,CAACS,IAAI,CAAC;MACvC,CAAC;MAED;AACJ;AACA;AACA;MACIpB,YAAY,WAAAA,aAACW,CAAC,EAAE;QACd,IAAI,CAACC,aAAa,CAAC,OAAO,EAAED,CAAC,CAACzB,OAAO,CAAC;MACxC;IACF,CAAC;IAEDoC,QAAQ,WAAAA,SAAA,EAAG;MACT,IAAI,IAAI,CAAC1C,SAAU,EAAE;QACnBf,EAAE,CAACoC,GAAG,CAACC,KAAK,CAACqB,oBAAoB,CAC/B,IAAI,CAAClC,OAAO,EACZ,SAAS,EACT,IAAI,CAACE,mBACP,CAAC;QAED1B,EAAE,CAACoC,GAAG,CAACC,KAAK,CAACqB,oBAAoB,CAC/B,IAAI,CAAClC,OAAO,EACZ,OAAO,EACP,IAAI,CAACC,iBACP,CAAC;QAED,IAAI,IAAI,CAACD,OAAO,EAAE;UAChB,IAAI,CAACA,OAAO,CAACmC,SAAS,CAAC,CAAC;UACxB,IAAI,CAACnC,OAAO,GAAG,IAAI;QACrB;MACF,CAAC,MAAM;QACL,IAAI,IAAI,CAACG,SAAM,EAAE;UACf,IAAI,CAACA,SAAM,GAAG,IAAI;QACpB;MACF;IACF;EACF,CAAC,CAAC;EArLF3B,EAAE,CAACoC,GAAG,CAACwB,SAAS,CAACzD,aAAa,GAAGA,aAAa;AAAC"
}