{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "bom",
    "History",
    "implement",
    "core",
    "IDisposable",
    "construct",
    "constructor",
    "call",
    "_baseUrl",
    "__initIframe",
    "members",
    "__checkOnHashChange",
    "__iframe",
    "__iframeReady",
    "addToHistory",
    "state",
    "newTitle",
    "lang",
    "Type",
    "isString",
    "setTitle",
    "_titles",
    "getState",
    "_writeState",
    "__P_111_0",
    "__createIframe",
    "document",
    "body",
    "appendChild",
    "__waitForIFrame",
    "contentWindow",
    "location",
    "href",
    "__attachListeners",
    "__P_111_4",
    "iframe",
    "Iframe",
    "create",
    "src",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "style",
    "visibility",
    "position",
    "left",
    "top",
    "__P_111_5",
    "callback",
    "context",
    "retry",
    "Error",
    "event",
    "Timer",
    "once",
    "window",
    "__P_111_6",
    "Idle",
    "addListener",
    "__onHashChange",
    "__detatchListeners",
    "__P_111_8",
    "removeListener",
    "__P_111_7",
    "currentState",
    "_readState",
    "_onHistoryLoad",
    "hash",
    "_getHash",
    "substr",
    "_decode",
    "_setHash",
    "_encode",
    "value",
    "destruct",
    "HashHistory"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/HashHistory.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2004-2012 1&1 Internet AG, Germany, http://www.1und1.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Sebastian Werner (wpbasti)\r\n     * Andreas Ecker (ecker)\r\n     * Fabian Jakobs (fjakobs)\r\n     * Mustafa Sak (msak)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * History manager implementation for IE greater 7. IE reloads iframe\r\n * content on history actions even just hash value changed. This\r\n * implementation forwards history states (hashes) to a helper iframe.\r\n *\r\n * This class must be disposed of after use\r\n *\r\n * @internal\r\n */\r\nqx.Class.define(\"qx.bom.HashHistory\", {\r\n  extend: qx.bom.History,\r\n  implement: [qx.core.IDisposable],\r\n\r\n  construct() {\r\n    super();\r\n    this._baseUrl = null;\r\n    this.__initIframe();\r\n  },\r\n\r\n  members: {\r\n    __checkOnHashChange: null,\r\n    __iframe: null,\r\n    __iframeReady: false,\r\n\r\n    //overridden\r\n    addToHistory(state, newTitle) {\r\n      if (!qx.lang.Type.isString(state)) {\r\n        state = state + \"\";\r\n      }\r\n\r\n      if (qx.lang.Type.isString(newTitle)) {\r\n        this.setTitle(newTitle);\r\n        this._titles[state] = newTitle;\r\n      }\r\n\r\n      if (this.getState() !== state) {\r\n        this._writeState(state);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Initializes the iframe\r\n     *\r\n     */\r\n    __initIframe() {\r\n      this.__iframe = this.__createIframe();\r\n      document.body.appendChild(this.__iframe);\r\n\r\n      this.__waitForIFrame(function () {\r\n        this._baseUrl = this.__iframe.contentWindow.document.location.href;\r\n        this.__attachListeners();\r\n      }, this);\r\n    },\r\n\r\n    /**\r\n     * IMPORTANT NOTE FOR IE:\r\n     * Setting the source before adding the iframe to the document.\r\n     * Otherwise IE will bring up a \"Unsecure items ...\" warning in SSL mode\r\n     *\r\n     * @return {Element}\r\n     */\r\n    __createIframe() {\r\n      var iframe = qx.bom.Iframe.create({\r\n        src:\r\n          qx.util.ResourceManager.getInstance().toUri(\r\n            qx.core.Environment.get(\"qx.blankpage\")\r\n          ) + \"#\"\r\n      });\r\n\r\n      iframe.style.visibility = \"hidden\";\r\n      iframe.style.position = \"absolute\";\r\n      iframe.style.left = \"-1000px\";\r\n      iframe.style.top = \"-1000px\";\r\n\r\n      return iframe;\r\n    },\r\n\r\n    /**\r\n     * Waits for the IFrame being loaded. Once the IFrame is loaded\r\n     * the callback is called with the provided context.\r\n     *\r\n     * @param callback {Function} This function will be called once the iframe is loaded\r\n     * @param context {Object?window} The context for the callback.\r\n     * @param retry {Integer} number of tries to initialize the iframe\r\n     */\r\n    __waitForIFrame(callback, context, retry) {\r\n      if (typeof retry === \"undefined\") {\r\n        retry = 0;\r\n      }\r\n\r\n      if (\r\n        !this.__iframe.contentWindow ||\r\n        !this.__iframe.contentWindow.document\r\n      ) {\r\n        if (retry > 20) {\r\n          throw new Error(\"can't initialize iframe\");\r\n        }\r\n\r\n        qx.event.Timer.once(\r\n          function () {\r\n            this.__waitForIFrame(callback, context, ++retry);\r\n          },\r\n          this,\r\n          10\r\n        );\r\n\r\n        return;\r\n      }\r\n\r\n      this.__iframeReady = true;\r\n      callback.call(context || window);\r\n    },\r\n\r\n    /**\r\n     * Attach hash change listeners\r\n     */\r\n    __attachListeners() {\r\n      qx.event.Idle.getInstance().addListener(\r\n        \"interval\",\r\n        this.__onHashChange,\r\n        this\r\n      );\r\n    },\r\n\r\n    /**\r\n     * Remove hash change listeners\r\n     */\r\n    __detatchListeners() {\r\n      qx.event.Idle.getInstance().removeListener(\r\n        \"interval\",\r\n        this.__onHashChange,\r\n        this\r\n      );\r\n    },\r\n\r\n    /**\r\n     * hash change event handler\r\n     */\r\n    __onHashChange() {\r\n      var currentState = this._readState();\r\n\r\n      if (\r\n        qx.lang.Type.isString(currentState) &&\r\n        currentState != this.getState()\r\n      ) {\r\n        this._onHistoryLoad(currentState);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Browser dependent function to read the current state of the history\r\n     *\r\n     * @return {String} current state of the browser history\r\n     */\r\n    _readState() {\r\n      var hash = !this._getHash() ? \"\" : this._getHash().substr(1);\r\n      return this._decode(hash);\r\n    },\r\n\r\n    /**\r\n     * Returns the fragment identifier of the top window URL. For gecko browsers we\r\n     * have to use a regular expression to avoid encoding problems.\r\n     *\r\n     * @return {String|null} the fragment identifier or <code>null</code> if the\r\n     * iframe isn't ready yet\r\n     */\r\n    _getHash() {\r\n      if (!this.__iframeReady) {\r\n        return null;\r\n      }\r\n      return this.__iframe.contentWindow.document.location.hash;\r\n    },\r\n\r\n    /**\r\n     * Save a state into the browser history.\r\n     *\r\n     * @param state {String} state to save\r\n     */\r\n    _writeState(state) {\r\n      this._setHash(this._encode(state));\r\n    },\r\n\r\n    /**\r\n     * Sets the fragment identifier of the window URL\r\n     *\r\n     * @param value {String} the fragment identifier\r\n     */\r\n    _setHash(value) {\r\n      if (!this.__iframe || !this._baseUrl) {\r\n        return;\r\n      }\r\n      var hash = !this.__iframe.contentWindow.document.location.hash\r\n        ? \"\"\r\n        : this.__iframe.contentWindow.document.location.hash.substr(1);\r\n      if (value != hash) {\r\n        this.__iframe.contentWindow.document.location.hash = value;\r\n      }\r\n    }\r\n  },\r\n\r\n  destruct() {\r\n    this.__detatchListeners();\r\n    this.__iframe = null;\r\n  }\r\n});\r\n"
  ],
  "mappings": "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"
}