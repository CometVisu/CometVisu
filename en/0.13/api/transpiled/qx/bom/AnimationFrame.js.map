{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "event",
    "Emitter",
    "events",
    "end",
    "undefined",
    "frame",
    "members",
    "__canceled",
    "startSequence",
    "duration",
    "start",
    "window",
    "performance",
    "now",
    "bom",
    "AnimationFrame",
    "__start",
    "Date",
    "cb",
    "time",
    "id",
    "emit",
    "timePassed",
    "Math",
    "max",
    "request",
    "cancelSequence",
    "statics",
    "TIMEOUT",
    "calculateTiming",
    "func",
    "x",
    "a",
    "y",
    "i",
    "length",
    "pow",
    "callback",
    "context",
    "req",
    "core",
    "Environment",
    "get",
    "call",
    "setTimeout",
    "defer",
    "timing",
    "navigationStart"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/AnimationFrame.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (wittemann)\n\n************************************************************************ */\n\n/**\n * This is a cross browser wrapper for requestAnimationFrame. For further\n * information about the feature, take a look at spec:\n * http://www.w3.org/TR/animation-timing/\n *\n * This class offers two ways of using this feature. First, the plain\n * API the spec describes.\n *\n * Here is a sample usage:\n * <pre class='javascript'>var start = Date.now();\n * var cb = function(time) {\n *   if (time >= start + duration) {\n *     // ... do some last tasks\n *   } else {\n *     var timePassed = time - start;\n *     // ... calculate the current step and apply it\n *     qx.bom.AnimationFrame.request(cb, this);\n *   }\n * };\n * qx.bom.AnimationFrame.request(cb, this);\n * </pre>\n *\n * Another way of using it is to use it as an instance emitting events.\n *\n * Here is a sample usage of that API:\n * <pre class='javascript'>var frame = new qx.bom.AnimationFrame();\n * frame.on(\"end\", function() {\n *   // ... do some last tasks\n * }, this);\n * frame.on(\"frame\", function(timePassed) {\n *   // ... calculate the current step and apply it\n * }, this);\n * frame.startSequence(duration);\n * </pre>\n *\n * @require(qx.lang.normalize.Date)\n */\nqx.Bootstrap.define(\"qx.bom.AnimationFrame\", {\n  extend: qx.event.Emitter,\n\n  events: {\n    /** Fired as soon as the animation has ended. */\n    end: undefined,\n\n    /**\n     * Fired on every frame having the passed time as value\n     * (might be a float for higher precision).\n     */\n    frame: \"Number\"\n  },\n\n  members: {\n    __canceled: false,\n\n    /**\n     * Method used to start a series of animation frames. The series will end as\n     * soon as the given duration is over.\n     *\n     * @param duration {Number} The duration the sequence should take.\n     *\n     * @ignore(performance.*)\n     */\n    startSequence(duration) {\n      this.__canceled = false;\n\n      var start =\n        window.performance && performance.now\n          ? performance.now() + qx.bom.AnimationFrame.__start\n          : Date.now();\n      var cb = function (time) {\n        if (this.__canceled) {\n          this.id = null;\n          return;\n        }\n\n        // final call\n        if (time >= start + duration) {\n          this.emit(\"end\");\n          this.id = null;\n        } else {\n          var timePassed = Math.max(time - start, 0);\n          this.emit(\"frame\", timePassed);\n          this.id = qx.bom.AnimationFrame.request(cb, this);\n        }\n      };\n\n      this.id = qx.bom.AnimationFrame.request(cb, this);\n    },\n\n    /**\n     * Cancels a started sequence of frames. It will do nothing if no\n     * sequence is running.\n     */\n    cancelSequence() {\n      this.__canceled = true;\n    }\n  },\n\n  statics: {\n    /**\n     * The default time in ms the timeout fallback implementation uses.\n     */\n    TIMEOUT: 30,\n\n    /**\n     * Calculation of the predefined timing functions. Approximation of the real\n     * bezier curves has been used for easier calculation. This is good and close\n     * enough for the predefined functions like <code>ease</code> or\n     * <code>linear</code>.\n     *\n     * @param func {String} The defined timing function. One of the following values:\n     *   <code>\"ease-in\"</code>, <code>\"ease-out\"</code>, <code>\"linear\"</code>,\n     *   <code>\"ease-in-out\"</code>, <code>\"ease\"</code>.\n     * @param x {Integer} The percent value of the function.\n     * @return {Integer} The calculated value\n     */\n    calculateTiming(func, x) {\n      if (func == \"ease-in\") {\n        var a = [3.1223e-7, 0.0757, 1.2646, -0.167, -0.4387, 0.2654];\n      } else if (func == \"ease-out\") {\n        var a = [-7.0198e-8, 1.652, -0.551, -0.0458, 0.1255, -0.1807];\n      } else if (func == \"linear\") {\n        return x;\n      } else if (func == \"ease-in-out\") {\n        var a = [2.482e-7, -0.2289, 3.3466, -1.0857, -1.7354, 0.7034];\n      } else {\n        // default is 'ease'\n        var a = [-0.0021, 0.2472, 9.8054, -21.6869, 17.7611, -5.1226];\n      }\n\n      // A 6th grade polynomial has been used as approximation of the original\n      // bezier curves  described in the transition spec\n      // http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n      // (the same is used for animations as well)\n      var y = 0;\n      for (var i = 0; i < a.length; i++) {\n        y += a[i] * Math.pow(x, i);\n      }\n      return y;\n    },\n\n    /**\n     * Request for an animation frame. If the native <code>requestAnimationFrame</code>\n     * method is supported, it will be used. Otherwise, we use timeouts with a\n     * 30ms delay. The HighResolutionTime will be used if supported but the time given\n     * to the callback will still be a timestamp starting at 1 January 1970 00:00:00 UTC.\n     *\n     * @param callback {Function} The callback function which will get the current\n     *   time as argument (which could be a float for higher precision).\n     * @param context {var} The context of the callback.\n     * @return {Number} The id of the request.\n     */\n    request(callback, context) {\n      var req = qx.core.Environment.get(\"css.animation.requestframe\");\n\n      var cb = function (time) {\n        // check for high resolution time\n        if (time < 1e10) {\n          time = qx.bom.AnimationFrame.__start + time;\n        }\n\n        time = time || Date.now();\n        callback.call(context, time);\n      };\n      if (req) {\n        return window[req](cb);\n      } else {\n        // make sure to use an indirection because setTimeout passes a\n        // number as first argument as well\n        return window.setTimeout(function () {\n          cb();\n        }, qx.bom.AnimationFrame.TIMEOUT);\n      }\n    }\n  },\n\n  /**\n   * @ignore(performance.timing.*)\n   */\n  defer(statics) {\n    // check and use the high resolution start time if available\n    statics.__start =\n      window.performance &&\n      performance.timing &&\n      performance.timing.navigationStart;\n    // if not, simply use the current time\n    if (!statics.__start) {\n      statics.__start = Date.now();\n    }\n  }\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACC,SAAS,CAACG,MAAM,CAAC,uBAAuB,EAAE;IAC3CC,MAAM,EAAEL,EAAE,CAACM,KAAK,CAACC,OAAO;IAExBC,MAAM,EAAE;MACN;MACAC,GAAG,EAAEC,SAAS;MAEd;AACJ;AACA;AACA;MACIC,KAAK,EAAE;IACT,CAAC;IAEDC,OAAO,EAAE;MACPC,QAAU,EAAE,KAAK;MAEjB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;MACIC,aAAa,yBAACC,QAAQ,EAAE;QACtB,IAAI,CAACF,QAAU,GAAG,KAAK;QAEvB,IAAIG,KAAK,GACPC,MAAM,CAACC,WAAW,IAAIA,WAAW,CAACC,GAAG,GACjCD,WAAW,CAACC,GAAG,EAAE,GAAGnB,EAAE,CAACoB,GAAG,CAACC,cAAc,CAACC,QAAO,GACjDC,IAAI,CAACJ,GAAG,EAAE;QAChB,IAAIK,EAAE,GAAG,SAALA,EAAE,CAAaC,IAAI,EAAE;UACvB,IAAI,IAAI,CAACZ,QAAU,EAAE;YACnB,IAAI,CAACa,EAAE,GAAG,IAAI;YACd;UACF;;UAEA;UACA,IAAID,IAAI,IAAIT,KAAK,GAAGD,QAAQ,EAAE;YAC5B,IAAI,CAACY,IAAI,CAAC,KAAK,CAAC;YAChB,IAAI,CAACD,EAAE,GAAG,IAAI;UAChB,CAAC,MAAM;YACL,IAAIE,UAAU,GAAGC,IAAI,CAACC,GAAG,CAACL,IAAI,GAAGT,KAAK,EAAE,CAAC,CAAC;YAC1C,IAAI,CAACW,IAAI,CAAC,OAAO,EAAEC,UAAU,CAAC;YAC9B,IAAI,CAACF,EAAE,GAAG1B,EAAE,CAACoB,GAAG,CAACC,cAAc,CAACU,OAAO,CAACP,EAAE,EAAE,IAAI,CAAC;UACnD;QACF,CAAC;QAED,IAAI,CAACE,EAAE,GAAG1B,EAAE,CAACoB,GAAG,CAACC,cAAc,CAACU,OAAO,CAACP,EAAE,EAAE,IAAI,CAAC;MACnD,CAAC;MAED;AACJ;AACA;AACA;MACIQ,cAAc,4BAAG;QACf,IAAI,CAACnB,QAAU,GAAG,IAAI;MACxB;IACF,CAAC;IAEDoB,OAAO,EAAE;MACP;AACJ;AACA;MACIC,OAAO,EAAE,EAAE;MAEX;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIC,eAAe,2BAACC,IAAI,EAAEC,CAAC,EAAE;QACvB,IAAID,IAAI,IAAI,SAAS,EAAE;UACrB,IAAIE,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;QAC9D,CAAC,MAAM,IAAIF,IAAI,IAAI,UAAU,EAAE;UAC7B,IAAIE,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC;QAC/D,CAAC,MAAM,IAAIF,IAAI,IAAI,QAAQ,EAAE;UAC3B,OAAOC,CAAC;QACV,CAAC,MAAM,IAAID,IAAI,IAAI,aAAa,EAAE;UAChC,IAAIE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;QAC/D,CAAC,MAAM;UACL;UACA,IAAIA,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,MAAM,CAAC;QAC/D;;QAEA;QACA;QACA;QACA;QACA,IAAIC,CAAC,GAAG,CAAC;QACT,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;UACjCD,CAAC,IAAID,CAAC,CAACE,CAAC,CAAC,GAAGX,IAAI,CAACa,GAAG,CAACL,CAAC,EAAEG,CAAC,CAAC;QAC5B;QACA,OAAOD,CAAC;MACV,CAAC;MAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIR,OAAO,mBAACY,QAAQ,EAAEC,OAAO,EAAE;QACzB,IAAIC,GAAG,GAAG7C,EAAE,CAAC8C,IAAI,CAACC,WAAW,CAACC,GAAG,CAAC,4BAA4B,CAAC;QAE/D,IAAIxB,EAAE,GAAG,SAALA,EAAE,CAAaC,IAAI,EAAE;UACvB;UACA,IAAIA,IAAI,GAAG,IAAI,EAAE;YACfA,IAAI,GAAGzB,EAAE,CAACoB,GAAG,CAACC,cAAc,CAACC,QAAO,GAAGG,IAAI;UAC7C;UAEAA,IAAI,GAAGA,IAAI,IAAIF,IAAI,CAACJ,GAAG,EAAE;UACzBwB,QAAQ,CAACM,IAAI,CAACL,OAAO,EAAEnB,IAAI,CAAC;QAC9B,CAAC;QACD,IAAIoB,GAAG,EAAE;UACP,OAAO5B,MAAM,CAAC4B,GAAG,CAAC,CAACrB,EAAE,CAAC;QACxB,CAAC,MAAM;UACL;UACA;UACA,OAAOP,MAAM,CAACiC,UAAU,CAAC,YAAY;YACnC1B,EAAE,EAAE;UACN,CAAC,EAAExB,EAAE,CAACoB,GAAG,CAACC,cAAc,CAACa,OAAO,CAAC;QACnC;MACF;IACF,CAAC;IAED;AACF;AACA;IACEiB,KAAK,iBAAClB,OAAO,EAAE;MACb;MACAA,OAAO,CAACX,QAAO,GACbL,MAAM,CAACC,WAAW,IAClBA,WAAW,CAACkC,MAAM,IAClBlC,WAAW,CAACkC,MAAM,CAACC,eAAe;MACpC;MACA,IAAI,CAACpB,OAAO,CAACX,QAAO,EAAE;QACpBW,OAAO,CAACX,QAAO,GAAGC,IAAI,CAACJ,GAAG,EAAE;MAC9B;IACF;EACF,CAAC,CAAC;EAhNFnB,EAAE,CAACoB,GAAG,CAACC,cAAc,CAAClB,aAAa,GAAGA,aAAa;AAAC"
}