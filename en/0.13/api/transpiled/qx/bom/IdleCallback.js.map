{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "core",
    "Object",
    "statics",
    "TIMEOUT",
    "REMAINING",
    "request",
    "callback",
    "context",
    "timeout",
    "cb",
    "deadline",
    "call",
    "Environment",
    "get",
    "window",
    "requestIdleCallback",
    "started",
    "Date",
    "getTime",
    "timeRemaining",
    "now",
    "Math",
    "max",
    "bom",
    "IdleCallback",
    "didTimeout",
    "setTimeout",
    "cancel",
    "handle",
    "cancelIdleCallback",
    "clearTimeout"
  ],
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/framework/source/class/qx/bom/IdleCallback.js"
  ],
  "sourcesContent": [
    "/* ************************************************************************\r\n\r\n   qooxdoo - the new era of web development\r\n\r\n   http://qooxdoo.org\r\n\r\n   Copyright:\r\n     2016 GONICUS GmbH, Germany, http://www.gonicus.de\r\n\r\n   License:\r\n     MIT: https://opensource.org/licenses/MIT\r\n     See the LICENSE file in the project's top-level directory for details.\r\n\r\n   Authors:\r\n     * Cajus Pollmeier (cajus)\r\n\r\n************************************************************************ */\r\n\r\n/**\r\n * This is a cross browser wrapper for requestIdleCallback. For further\r\n * information about the feature, take a look at spec:\r\n * https://www.w3.org/TR/requestidlecallback/\r\n *\r\n * Here is a sample usage:\r\n * <pre class='javascript'>var cb = function(deadline) {\r\n *   while (deadline.timeRemaining() > 0) {\r\n *     // ... do some last tasks\r\n *   }\r\n * };\r\n *\r\n * qx.bom.IdleCallback.request(cb, this);\r\n * </pre>\r\n */\r\nqx.Bootstrap.define(\"qx.bom.IdleCallback\", {\r\n  extend: qx.core.Object,\r\n\r\n  statics: {\r\n    /**\r\n     * The default time in ms the setTimeout() fallback implementation uses. There is no\r\n     * way to detect if the browser has some spare IDLE time, it defaults to zero - meaning\r\n     * that the callback will be called as soon as possible.\r\n     */\r\n    TIMEOUT: 0,\r\n\r\n    /**\r\n     * The default remaining time in ms the timeout fallback implementation uses. Since we\r\n     * cannot know how much time is available, this is a hard coded time bucket available\r\n     * for actions done in the callback.\r\n     */\r\n    REMAINING: 250,\r\n\r\n    /**\r\n     * Request for an IDLE callback. If the native <code>requestIdleCallback</code>\r\n     * method is supported, it will be used. Otherwise, we use timeouts with a\r\n     * 30ms delay. The HighResolutionTime will be used if supported but the time given\r\n     * to the callback will still be a timestamp starting at 1 January 1970 00:00:00 UTC.\r\n     *\r\n     * @param callback {Function} The callback function which will get a deadline\r\n     *   object. It contains a <code>timeRemaining()</code> call which returns the\r\n     *   remaining milliseconds and the <code>didTimeout</code> flag which indicates\r\n     *   whether the callback was fired due to a timeout. The latter is always false\r\n     *   in case of the emulation.\r\n     * @param context {var} The context of the callback.\r\n     * @param timeout {Number} Timeout in milliseconds.\r\n     * @return {Number} Handle for that request\r\n     */\r\n    request(callback, context, timeout) {\r\n      var cb = function (deadline) {\r\n        return callback.call(context, deadline);\r\n      };\r\n\r\n      if (qx.core.Environment.get(\"client.idle\")) {\r\n        return window.requestIdleCallback(cb, timeout);\r\n      } else {\r\n        var deadline = {\r\n          started: new Date().getTime(),\r\n\r\n          timeRemaining() {\r\n            var now = new Date().getTime();\r\n            return Math.max(\r\n              qx.bom.IdleCallback.REMAINING - (now - this.started),\r\n              0\r\n            );\r\n          },\r\n\r\n          didTimeout: false\r\n        };\r\n\r\n        // make sure to use an indirection because setTimeout passes a\r\n        // number as first argument as well\r\n        return window.setTimeout(function () {\r\n          cb(deadline);\r\n        }, qx.bom.IdleCallback.TIMEOUT);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Cancel a requested IDLE callback.\r\n     *\r\n     * @param handle {Number} Handle acquired by <code>qx.bom.IdleCallback.request()</code>.\r\n     */\r\n    cancel(handle) {\r\n      if (qx.core.Environment.get(\"client.idle\")) {\r\n        window.cancelIdleCallback(handle);\r\n      } else {\r\n        window.clearTimeout(handle);\r\n      }\r\n    }\r\n  }\r\n});\r\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;EAAAA,EAAE,CAACC,SAAS,CAACC,oBAAoB,CAACC,aAAa,CAAC;EAAhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAH,EAAE,CAACC,SAAS,CAACG,MAAM,CAAC,qBAAqB,EAAE;IACzCC,MAAM,EAAEL,EAAE,CAACM,IAAI,CAACC,MAAM;IAEtBC,OAAO,EAAE;MACP;AACJ;AACA;AACA;AACA;MACIC,OAAO,EAAE,CAAC;MAEV;AACJ;AACA;AACA;AACA;MACIC,SAAS,EAAE,GAAG;MAEd;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACIC,OAAO,WAAAA,QAACC,QAAQ,EAAEC,OAAO,EAAEC,OAAO,EAAE;QAClC,IAAIC,EAAE,GAAG,SAALA,EAAEA,CAAaC,QAAQ,EAAE;UAC3B,OAAOJ,QAAQ,CAACK,IAAI,CAACJ,OAAO,EAAEG,QAAQ,CAAC;QACzC,CAAC;QAED,IAAIhB,EAAE,CAACM,IAAI,CAACY,WAAW,CAACC,GAAG,CAAC,aAAa,CAAC,EAAE;UAC1C,OAAOC,MAAM,CAACC,mBAAmB,CAACN,EAAE,EAAED,OAAO,CAAC;QAChD,CAAC,MAAM;UACL,IAAIE,QAAQ,GAAG;YACbM,OAAO,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;YAE7BC,aAAa,WAAAA,cAAA,EAAG;cACd,IAAIC,GAAG,GAAG,IAAIH,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;cAC9B,OAAOG,IAAI,CAACC,GAAG,CACb5B,EAAE,CAAC6B,GAAG,CAACC,YAAY,CAACpB,SAAS,IAAIgB,GAAG,GAAG,IAAI,CAACJ,OAAO,CAAC,EACpD,CACF,CAAC;YACH,CAAC;YAEDS,UAAU,EAAE;UACd,CAAC;;UAED;UACA;UACA,OAAOX,MAAM,CAACY,UAAU,CAAC,YAAY;YACnCjB,EAAE,CAACC,QAAQ,CAAC;UACd,CAAC,EAAEhB,EAAE,CAAC6B,GAAG,CAACC,YAAY,CAACrB,OAAO,CAAC;QACjC;MACF,CAAC;MAED;AACJ;AACA;AACA;AACA;MACIwB,MAAM,WAAAA,OAACC,MAAM,EAAE;QACb,IAAIlC,EAAE,CAACM,IAAI,CAACY,WAAW,CAACC,GAAG,CAAC,aAAa,CAAC,EAAE;UAC1CC,MAAM,CAACe,kBAAkB,CAACD,MAAM,CAAC;QACnC,CAAC,MAAM;UACLd,MAAM,CAACgB,YAAY,CAACF,MAAM,CAAC;QAC7B;MACF;IACF;EACF,CAAC,CAAC;EA7GFlC,EAAE,CAAC6B,GAAG,CAACC,YAAY,CAAC3B,aAAa,GAAGA,aAAa;AAAC"
}