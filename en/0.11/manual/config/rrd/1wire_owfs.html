

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Temperature from 1wire (local 1wire interface with owfs) &mdash; CometVisu</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="CometVisu" href="../../index.html"/>
        <link rel="up" title="RRD introduction &amp; examples" href="../rrd_examples.html"/>
        <link rel="next" title="CPU load for Linux Systeme" href="cpuload.html"/>
        <link rel="prev" title="RRD introduction &amp; examples" href="../rrd_examples.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> CometVisu
          

          
            
            <img src="../../_static/comet_webapp_icon_android_48.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.11.0-RC6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Installation of the CometVisu</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration of the CometVisu</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../manager.html">The CometVisu Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editor.html">Graphical editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hidden-config.html">Hidden configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../url-params.html">URL-Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#pages-and-structure-of-cometvisu">Pages and structure of CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#navigation-elements-in-the-cometvisu">Navigation elements in the CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#the-available-designs">The available designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-elements-for-designing-the-layout">Basic elements for designing the layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#elements-for-conversion-and-formatting-in-the-cometvisu">Elements for conversion and formatting in the CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#widgets-in-the-cometvisu">Widgets in the CometVisu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#cometvisu-examples">CometVisu - Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#miscellaneous">Miscellaneous</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../notifications.html">Notifications</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../rrd_examples.html">RRD introduction &amp; examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#general-information-about-rrd">General information about RRD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#rrd-and-the-cometvisu">RRD and the CometVisu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#create-the-rrd-database">Create the RRD database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#filling-the-rrd-database">&#8220;Filling&#8221; the RRD database</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rrd_examples.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../rrd_examples.html#examples-of-rrds">Examples of RRDs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hydraulik.html">Instructions for creating an animated hydraulic plan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../customizing.html">Customize CometVisu</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../colab/index.html">Help the CometVisu project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devel/index.html">Information for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CometVisu</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Configuration of the CometVisu</a> &raquo;</li>
        
          <li><a href="../rrd_examples.html">RRD introduction &amp; examples</a> &raquo;</li>
        
      <li>Temperature from 1wire (local 1wire interface with owfs)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="temperature-from-1wire-local-1wire-interface-with-owfs">
<h1>Temperature from 1wire (local 1wire interface with owfs)<a class="headerlink" href="#temperature-from-1wire-local-1wire-interface-with-owfs" title="Permalink to this headline">Â¶</a></h1>
<p>If you use 1wire you can use this script to read the values directly
from a 1wire sensor and fill it into an RRD database. Here the 1wire sensor
has the ID 28.AB8BCB040000, this must be adjusted! This script works like
this if it is stored (and executable) under /var/www/rrd/1wire_temp_outside.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>

<span class="nb">cd</span> /var/www/rrd

<span class="c1"># create database if not exists</span>
<span class="o">[</span> -f 1wire_temp_outside.rrd <span class="o">]</span> <span class="o">||</span> <span class="o">{</span>
/usr/bin/rrdtool create 1wire_temp_outside.rrd --step <span class="m">300</span> <span class="se">\</span>
DS:temp:GAUGE:1200:U:U <span class="se">\</span>
RRA:AVERAGE:0.5:1:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:6:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:36:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:144:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:1008:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:4320:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:52560:3200 <span class="se">\</span>
RRA:AVERAGE:0.5:525600:3200
<span class="o">}</span>

<span class="c1"># read the temperature (degrees celsius)</span>
<span class="nv">TEMPERATURE</span><span class="o">=</span><span class="sb">`</span>owget /uncached/28.AB8BCB040000/temperature<span class="sb">`</span>

<span class="c1"># remove leading character</span>
<span class="nv">TEMPERATURE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$TEMPERATURE</span> <span class="p">|</span> cut -c <span class="m">1</span>-<span class="sb">`</span>

/usr/bin/rrdtool update 1wire_temp_outside.rrd N:<span class="nv">$TEMPERATURE</span>
</pre></div>
</div>
<p>The following line must be added in /etc/crontab to call the script every 5 minutes:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>*/5 *   * * *   root    /var/www/rrd/1wire_temp_outside
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cpuload.html" class="btn btn-neutral float-right" title="CPU load for Linux Systeme" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../rrd_examples.html" class="btn btn-neutral" title="RRD introduction &amp; examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2019 Christian Mayer and the CometVisu contributers.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Version</span>
      v: 0.11.0-RC6
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../../../0.10.2
|0.10/manual/index.html">0.10.2
|0.10</a></dd>
        
          <dd><a href="../../../../0.11.0-RC6|0.11/manual/index.html">0.11.0-RC6|0.11</a></dd>
        
          <dd><a href="../../../../0.12.0-dev|0.12/manual/index.html">0.12.0-dev|0.12</a></dd>
        
          <dd><a href="../../../../latest/manual/index.html">latest</a></dd>
        
      </dl>
      
    </div>
  </div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>