!function(e){var t={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},n=function(e){this.tipPosition={x:0,y:0},this.init(e)};n.prototype.init=function(t){function n(e){var t={};t.x=e.pageX,t.y=e.pageY,i.updateTooltipPosition(t)}function r(e,t,n){var r=i.getDomElement();if(n){var s;s=i.stringFormat(i.tooltipOptions.content,n),r.html(s),i.updateTooltipPosition({x:t.pageX,y:t.pageY}),r.css({left:i.tipPosition.x+i.tooltipOptions.shifts.x,top:i.tipPosition.y+i.tooltipOptions.shifts.y}).show(),"function"==typeof i.tooltipOptions.onHover&&i.tooltipOptions.onHover(n,r)}else r.hide().html("")}var i=this;t.hooks.bindEvents.push(function(t,s){if(i.plotOptions=t.getOptions(),i.plotOptions.tooltip!==!1&&"undefined"!=typeof i.plotOptions.tooltip)i.tooltipOptions=i.plotOptions.tooltipOpts,i.getDomElement(),e(t.getPlaceholder()).bind("plothover",r),e(s).bind("mousemove",n)}),t.hooks.shutdown.push(function(t,i){e(t.getPlaceholder()).unbind("plothover",r),e(i).unbind("mousemove",n)})},n.prototype.getDomElement=function(){var t;return e("#flotTip").length>0?t=e("#flotTip"):(t=e("<div />").attr("id","flotTip"),t.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&t.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),t},n.prototype.updateTooltipPosition=function(t){var n=e("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,r=e("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;t.x-e(window).scrollLeft()>e(window).innerWidth()-n&&(t.x-=n),t.y-e(window).scrollTop()>e(window).innerHeight()-r&&(t.y-=r),this.tipPosition.x=t.x,this.tipPosition.y=t.y},n.prototype.stringFormat=function(e,t){var n,r,i=/%p\.{0,1}(\d{0,})/,s=/%s/,o=/%x\.{0,1}(\d{0,})/,u=/%y\.{0,1}(\d{0,})/,a="%x",f="%y";n=t.datapoint[0],r=t.datapoint[1];if(null===t.series.label&&t.series.originSeries&&(t.series.label=t.series.originSeries.label),"function"==typeof e&&(e=e(t.series.label,n,r,t)),"undefined"!=typeof t.series.percent&&(e=this.adjustValPrecision(i,e,t.series.percent)),e="undefined"!=typeof t.series.label?e.replace(s,t.series.label):e.replace(s,""),this.isTimeMode("xaxis",t)&&this.isXDateFormat(t)&&(e=e.replace(o,this.timestampToDate(n,this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",t)&&this.isYDateFormat(t)&&(e=e.replace(u,this.timestampToDate(r,this.tooltipOptions.yDateFormat))),"number"==typeof n&&(e=this.adjustValPrecision(o,e,n)),"number"==typeof r&&(e=this.adjustValPrecision(u,e,r)),"undefined"!=typeof t.series.xaxis.ticks&&t.series.xaxis.ticks.length>t.dataIndex&&!this.isTimeMode("xaxis",t)&&(e=e.replace(o,t.series.xaxis.ticks[t.dataIndex].label)),"undefined"!=typeof t.series.yaxis.ticks)for(var l in t.series.yaxis.ticks)if(t.series.yaxis.ticks.hasOwnProperty(l)){var c=this.isCategoriesMode("yaxis",t)?t.series.yaxis.ticks[l].label:t.series.yaxis.ticks[l].v;c===r&&(e=e.replace(u,t.series.yaxis.ticks[l].label))}return"undefined"!=typeof t.series.xaxis.tickFormatter&&(e=e.replace(a,t.series.xaxis.tickFormatter(n,t.series.xaxis).replace(/\$/g,"$$"))),"undefined"!=typeof t.series.yaxis.tickFormatter&&(e=e.replace(f,t.series.yaxis.tickFormatter(r,t.series.yaxis).replace(/\$/g,"$$"))),e},n.prototype.isTimeMode=function(e,t){return"undefined"!=typeof t.series[e].options.mode&&"time"===t.series[e].options.mode},n.prototype.isXDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},n.prototype.isYDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},n.prototype.isCategoriesMode=function(e,t){return"undefined"!=typeof t.series[e].options.mode&&"categories"===t.series[e].options.mode},n.prototype.timestampToDate=function(t,n){var r=new Date(1*t);return e.plot.formatDate(r,n,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},n.prototype.adjustValPrecision=function(e,t,n){var r,i=t.match(e);return null!==i&&""!==RegExp.$1&&(r=RegExp.$1,n=n.toFixed(r),t=t.replace(e,n)),t};var r=function(e){new n(e)};e.plot.plugins.push({init:r,options:t,name:"tooltip",version:"0.6.6"})}(jQuery);