qx.$$packageData['1048576']={"resources":{"plugins/calendarlist/calendarlist.php":"cv"}};
qx.Part.$$notifyLoad("1048576", function() {
(function(){var a='</span>',b='POST',d='<div class="calendarList_inline" id="calendarList',f='</div>',g='format',h='',j='interval',k='</span><br>',l='calendarListlocal: no src URL',m=' - ',n="width:",p='cv.plugins.CalendarList',q='calendarname',r='#FFFFFF',s="plugins/calendarlist/calendarlist.php",t="height:",u='magiccookie',v='color',w='<div class="actor calendarListBody">',x="String",y='calendar',z='<span>{date}: {text}{where}</span>',A='li',B="",C=', ',D='userid',E='">',F='C: #%s, Error: %s, calendarList: %s',G='<span style="color:',H='type',I='{date}: {text}{where}',J='json',K='" style="',L=' (',M="Number",N="calendarlist",O=')',P='id',Q=";",R='"></div>',S='days',T='<span>',U='00:00';qx.Class.define(p,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Refresh],properties:{width:{check:x,init:h},height:{check:x,init:h},src:{check:x,init:s},days:{check:M,nullable:true},maxquantity:{check:M,nullable:true}},statics:{calendars:{},parse:function(V,ba,X,W){var Y=cv.parser.WidgetParser.parseElement(this,V,ba,X,W,this.getAttributeToPropertyMappings());cv.parser.WidgetParser.parseRefresh(V,ba);this.calendars[ba]=[];V.querySelectorAll(y).forEach(function(bc){var bb={type:bc.getAttribute(H),userid:bc.getAttribute(D),magiccookie:bc.hasAttribute(u)?bc.getAttribute(u):h,days:bc.hasAttribute(S)?bc.getAttribute(S):Y.days};this.calendars[ba].push(bb);},this);return Y;},getAttributeToPropertyMappings:function(){return {'width':{transform:function(bd){return bd?n+bd+Q:B;}},'height':{transform:function(be){return be?t+be+Q:B;}},'maxquantity':{transform:function(bf){return bf?parseInt(bf):null;}},'days':{transform:function(bg){return bg?parseInt(bg):null;}}};}},members:{_getInnerDomString:function(){return w+d+this.getPath()+K+this.getHeight()+this.getWidth()+R+f;},_onDomReady:function(){cv.ui.structure.AbstractWidget.prototype._onDomReady.call(this);this.refreshAction();},_setupRefreshAction:function(){this._timer=new qx.event.Timer(this.getRefresh());this._timer.addListener(j,this._refreshAction,this);this._timer.start();},_refreshAction:function(){var bi=this.getActor();var bh=this.getSrc();var bk=this.getMaxquantity();var bj=cv.plugins.CalendarList.calendars[this.getPath()];$(function(){$(bi).calendarListlocal({src:qx.util.ResourceManager.getInstance().toUri(bh),maxquantity:bk,calendar:bj});});return false;}},defer:function(bl){cv.parser.WidgetParser.addHandler(N,bl);cv.ui.structure.WidgetFactory.registerClass(N,bl);}});(function($){jQuery.fn.extend({calendarListlocal:function(bm){var bn={src:h,days:30,html:z,wrapper:A,dataType:J,datetime:true};bm=jQuery.extend(bn,bm);return this.each(function(){var o=bm;var c=jQuery(this);if(o.src===h){console.log(l);return;};var bp={'maxquantity':o.maxquantity};for(var i=0;i<o.calendar.length;i++ ){var bq=q+i;var bt=H+i;var br=D+i;var bo=u+i;var bs=S+i;bp[bq]=i;bp[bt]=o.calendar[i].type;bp[br]=o.calendar[i].userid;bp[bo]=o.calendar[i].magiccookie;bp[bs]=o.calendar[i].days;};jQuery.ajax({url:o.src,type:b,data:bp,dataType:o.dataType,error:function(bu,status,e){console.log(F,$(c).attr(P),e,o.src);},success:function(bB){c.html(h);var by=bB.calendarList.calendarListEntries;var bw=by.length;var bD=h;var bA,bx,bE;for(var i=0;i<bw;i++ ){var bC=by[i];var bF=o.html;bA=r;for(var bv=0;bv<o.calendar.length;bv++ ){if(bC.calendarName===bv){if(o.calendar[bv].hasAttribute(v)===true){bA=o.calendar[bv].getAttribute(v);}else {bA=r;};if(o.calendar[bv].hasAttribute(g)===true){bx=o.calendar[bv].getAttribute(g);}else {bx=I;};bF=T+bx+a;};};bD=bC.StartDate;if(bC.StartTime!==U){bD=bD+C+bC.StartTime;};if(bC.StartDate!==bC.EndDate||bC.StartTime!==bC.EndTime){bD=bD+m;};if(bC.StartDate!==bC.EndDate){bD=bD+bC.EndDate+C+bC.EndTime;}else {if(bC.StartTime!==bC.EndTime){bD=bD+bC.EndTime;};};bF=bF.replace(/\{text\}/,bC.description);if(bC.where!==h){bE=L+bC.where+O;}else {bE=bC.where;};bF=bF.replace(/\{where\}/,bE);bF=bF.replace(/\{date\}/,bD);var bz=$(G+bA+E).append(bF).append(k);c.append(bz);};}});});}});})(jQuery);})();
});