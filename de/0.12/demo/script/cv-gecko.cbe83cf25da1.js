qx.$$packageData['8192']={"locales":{},"resources":{"plugins/rsslog/rsslog.css":"cv"},"translations":{"C":{},"de":{},"en":{}}};
qx.Part.$$notifyLoad("8192", function() {
(function(){var a="application/json",b=';',d="div",f="_applyModel",g='rsslogodd',h=' .label',j="rsslog",k="ID: ",l='.mappedValue',m='&nbsp;',n='</a></b><br/>',o='rsslog_futureodd',p=".beforePageChange",q='</b><br/>',r='_big',s="ul",t="last_rowcount",u=', ',v='#',w="model",x="Number",y='<b><a href="',z=', processing item: ',A="close",B="tap",C="id",D="rsslog_ack",E='display',F="path.",G="auto",H="width:",I='rsslog_futureeven',J="itemoffset",K='<b>',L='_big"/>',M="modify",N="success",O="disable",P=' of ',Q="_applySrc",R='rollover',S='">',T='#rss_',U='"></div></div>',V='" style="',W='plugins/rsslog/rsslog.css',X='rsslog_prevday',Y='id',cd="normalizeUrl",ce="display",cf=", Feed: ",bY="Boolean",ca="GET",cb="error",cc="change",ck="no src given, aborting RSS-Log refresh",cl="height:",cm='#dummydiv',cn="90%",cg=' element(s) found, ',ch='.label',ci="SELECT * FROM rss WHERE url='",cj='popup',cr='%d',cS="1",cT='string',cs='C: #rss_%s, Error: %s, Feed: %s',co=' displayrow(s) available',cp='rsslog_separator',cU='<div class="rsslog_popup" id="rss_',cq='boolean',ct='{date}: ',cu='mapping',cw="qx.data.Array",cB="true",cV='',cC='rsslogeven',cx='<li class="rsslogRow odd" id="dummydiv">.</li>',cy='li',cz='first',cA="'",cH='cv.plugins.RssLog',cI="interval",cW='rsslogRow ',cJ="String",cD="big",cE="",cF='span',cG='.main',cO=' ',cP='<span class="mappedValue"></span><span>{text}</span>',cX="?",cQ='modify',cK='disable',cL='C: #',cM='<div class="actor rsslogBody"><div class="rsslog_inline" id="rss_',cN="undefined",cR="last";qx.Class.define(cH,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Refresh,cv.ui.common.Update,cv.ui.common.Operate],properties:{src:{check:cJ,nullable:true,transform:cd,apply:Q},filter:{check:cJ,nullable:true},datetime:{check:bY,init:true},mode:{check:cJ,init:cR},limit:{check:x,init:0},timeformat:{check:cJ,nullable:true},itemoffset:{check:x,init:0},itemack:{check:[M,ce,O],init:M},future:{check:cJ,nullable:true},width:{check:cJ,nullable:true},height:{check:cJ,nullable:true},model:{check:cw,nullable:true,apply:f}},statics:{parse:function(cY,dd,db,da){var dc=cv.parser.WidgetParser.parseElement(this,cY,dd,db,da,this.getAttributeToPropertyMappings());cv.parser.WidgetParser.parseFormat(cY,dd);cv.parser.WidgetParser.parseAddress(cY,dd);cv.parser.WidgetParser.parseRefresh(cY,dd);return dc;},getAttributeToPropertyMappings:function(){return {src:{},width:{},height:{},filter:{},datetime:{"default":true,transform:function(de){if(typeof de===cq){return de;};return de===cB;}},mode:{"default":cR},limit:{"default":0,transform:parseFloat},timeformat:{},itemack:{"default":M},future:{},query:{}};}},members:{__eP:null,__um:null,__oo:null,__un:null,__nG:false,__uo:null,__up:null,__uq:null,__ur:null,normalizeUrl:function(dg){this.__un={};if(dg&&dg.indexOf(cX)>0){var df=qx.util.Uri.parseUri(dg);dg=dg.substring(0,dg.indexOf(cX));this.__un=df.queryKey;};return dg;},_applySrc:function(dh){this.__nG=!dh.match(/rsslog\.php/)&&!dh.match(/rsslog_mysql\.php/)&&!dh.match(/rsslog_oh\.php/);},_getInnerDomString:function(){var di=cV;if(this.getWidth()){di+=H+this.getWidth()+b;};if(this.getHeight()){di+=cl+this.getHeight();};return cM+this.getPath()+V+di+U;},_setupRefreshAction:function(){this._timer=new qx.event.Timer(this.getRefresh());this._timer.addListener(cI,function(){this.refreshRSSlog();},this);this._timer.start();},_onDomReady:function(){if(!this.$$domReady){cv.ui.structure.AbstractWidget.prototype._onDomReady.call(this);qx.event.message.Bus.subscribe(F+this.getParentPage().getPath()+p,this.refreshRSSlog,this);this.__um=cP;if(this.getDatetime()){this.__um=ct+this.__um;};this.__oo=cy;if(cv.Config.currentPageId===this.getParentPage().getPath()){this.refreshRSSlog();};};},_update:function(){this.refreshRSSlog();},_action:function(){var dj=cv.util.String.htmlStringToDomElement(cU+this.getPath()+L);var dl=document.querySelector(v+this.getPath()+h).innerText||cV;var dk=cv.ui.PopupHandler.showPopup(j,{title:dl,content:dj});var parent=cv.util.Tree.getParent(dj,d,null,1)[0];Object.entries({height:cn,width:cn,margin:G}).forEach(function(dm){parent.style[dm[0]]=dm[1];});if(this._timer){this._timer.stop();};qx.event.Registration.addListener(dj,B,function(event){event.stopPropagation();},this);qx.event.Registration.addListener(dk,A,function(){if(dk.getCurrentDomElement()&&dk.getCurrentDomElement().classList.contains(cj)&&this.getItemack()===cQ){qx.event.Timer.once(function(){this.refreshRSSlog();},this,100);for(var dn in this.getAddress()){if(!cv.data.Model.isWriteAddress(this.getAddress()[dn])){continue;};cv.TemplateEngine.getInstance().visu.write(dn,cv.Transform.encode(this.getAddress()[dn][0],0));};};},this);dk.getCurrentDomElement().querySelector(cG).style.overflow=G;this.refreshRSSlog(true);},refreshRSSlog:function(dr){var dp=this.getSrc();if(!dp){this.error(ck);return;};if(!this.__eP){if(!this.__nG){this.__us();}else {this.__ut();};};this.__eP.setUserData(cD,dr);if(this.__eP instanceof qx.io.request.Xhr){this.__eP.send();}else if(this.__eP instanceof qx.data.store.Yql){this.__eP.reload();};var dq=this.getRefresh();if(typeof (dq)!==cN&&dq){if(this._timer&&this._timer.isEnabled()){this._timer.start();};};},__us:function(){var dt=this.getSrc();var ds=Object.assign({},this.__un);if(this.getFilter()){ds.f=this.getFilter();};if(this.getLimit()){ds.limit=this.getLimit();};if(this.getFuture()){ds.future=this.getFuture();};ds.j=1;this.__eP=new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(dt));this.__eP.set({accept:a,requestData:ds,method:ca});this.__eP.addListener(N,this.__uv,this);this.__eP.addListener(cb,function(du){this.error(cs,this.getPath(),du.getTarget().getResponse(),dt);},this);},__ut:function(){if(!this.__eP){this.__eP=new qx.data.store.Yql(ci+this.getSrc()+cA,{manipulateData:function(dv){if(dv.query.results){return dv.query.results.item||dv.query.results.entry;}else {return [];};}});this.__eP.bind(w,this,w);};},_applyModel:function(dx,dw){if(dw){dw.removeListener(cc,this.__uw,this);};if(dx){this.__uw();dx.addListener(cc,this.__uw,this);};},__uu:function(dD,c){c.innerHTML=cV;c.appendChild(dD);var dz=parseInt(c.dataset[t],10)||0;dD.innerHTML=cx;var dC=c.querySelector(cm),dH=dC.getBoundingClientRect(),dG=Math.round(dH.bottom-dH.top);dC.parentNode.removeChild(dC);if(dG!==0){var dB=c.parentNode.parentNode,dy=dB.getBoundingClientRect(),dF=Math.round(dy.bottom-dy.top),dE=dB.querySelector(ch);if(dE){var dA=dE.getBoundingClientRect();dF-=Math.round(dA.bottom-dA.top);};dz=Math.floor(dF/dG);};c.dataset[t]=dz;return dz;},__uv:function(dI){var dJ=dI.getTarget().getResponse();if(typeof dJ===cT){this.error(dJ);return;};this.__ux(dJ.responseData.feed.entries);},__uw:function(){this.__ux(this.getModel().toArray());},__ux:function(dP){var dU=this.__eP.getUserData(cD);var dR=T+this.getPath()+(dU===true?r:cV);var c=document.querySelector(dR);var dQ=dU===true?this.getItemack():(cQ===this.getItemack()?E:this.getItemack());this.debug(k+c.getAttribute(C)+cf+this.getSrc());var dO=document.createElement(s);var dY=this.__uu(dO,c);var dV=dP.length;this.debug(cL+this.getPath()+u+dV+cg+dY+co);var dT=0;if(dV>dY){if(this.getMode()===cz){dT=dV-dY;};if(this.getMode()===R){dT=parseInt(c.dataset[J],10)||0;if(dT===dV){dT=0;};c.dataset[J]=dT+1;};};var eb=g;var dW=dT+dY;dW=(dW>dV)?dV:dW;this.__uo=new Date().strftime(cr);this.__up=false;this.__ur=false;this.__uq=false;for(var i=dT;i<dW;i++ ){this.debug(cL+this.getPath()+z+i+P+dV);var dN=i;dN=(i>=dV)?(dN=dN-dV):dN;var dS=dP[dN];var ea=this.__uy(dS,dU);var dL=qx.dom.Element.create(cy,{'class':cW+eb});dL.innerHTML=ea;if(dS.mapping&&dS.mapping!==cV){var dX=this.applyMapping(dQ===cK?0:dS.state,dS.mapping);var dM=dL.querySelector(l);var self=this;this.defaultValue2DOM(dX,function(e){self._applyValueToDom(dM,e);});};if(this.__up&&dN!==0){dL.classList.add(cp);this.__ur=true;}else {this.__ur=false;};if(this.__ur===true){dL.classList.add(X);};if(this.__uq){dL.classList.add((eb===g)?I:o);};dL.dataset[Y]=dS.id;dL.dataset[cu]=dS.mapping;if(dS.tags){var dK=dL.querySelector(cF);if(Array.isArray(dS.tags)){dK.classList.add.apply(dK.classList,dS.tags);}else {dK.classList.add(dS.tags);};};if(dS.state===cS&&dQ!==cK){dL.classList.add(D);};if(dQ===cQ){qx.event.Registration.addListener(dL,B,this._onTap,this);};dO.appendChild(dL);eb=(eb===g)?cC:g;};},__uy:function(ec,eg){var ef=cE;if(!this.__nG){ef=this.__um;ef=ef.replace(/\{text\}/,ec.content);var ed=new Date(ec.publishedDate);if(ed){ef=(this.getTimeformat())?(ef.replace(/\{date\}/,ed.strftime(this.getTimeformat())+m)):(ef.replace(/\{date\}/,ed.toLocaleDateString()+cO+ed.toLocaleTimeString()+m));var ee=ed.strftime(cr);this.__up=((this.__uo>0)&&(this.__uo!==ee));this.__uo=ee;this.__uq=(ed>new Date());}else {ef=ef.replace(/\{date\}/,cV);};}else {if(eg){return y+ec.getLink()+S+ec.getTitle()+n+ec.getDescription();}else {return K+ec.getTitle()+q+ec.getDescription();};};return ef;},_onTap:function(eh){var el=eh.getCurrentTarget();var eo=el.dataset[Y];var ek=el.dataset[cu];el.classList.toggle(D);var em=+el.classList.contains(D);if(ek&&ek!==cV){var en=this.applyMapping(em,ek);var ei=el.querySelector(l);ei.innerHTML=cV;var self=this;this.defaultValue2DOM(en,function(e){self._applyValueToDom(ei,e);});};var ej=new qx.io.request.Xhr(this.__eP.getUrl());ej.set({method:ca,requestData:Object.assign({},this.__un,{'u':eo,'state':em}),accept:a});ej.send();}},defer:function(ep){var eq=cv.util.ScriptLoader.getInstance();eq.addStyles(W);cv.parser.WidgetParser.addHandler(j,cv.plugins.RssLog);cv.ui.structure.WidgetFactory.registerClass(j,ep);}});})();(function(){var a="callback",b="changePhase",c="fail",d="success",e="qx.data.store.Jsonp",f="String";qx.Class.define(e,{extend:qx.data.store.Json,construct:function(g,h,i){if(i!=undefined){this.setCallbackParam(i);};qx.data.store.Json.call(this,g,h);},properties:{callbackParam:{check:f,init:a,nullable:true},callbackName:{check:f,nullable:true}},members:{_createRequest:function(j){if(this._getRequest()){this._getRequest().dispose();};var k=new qx.io.request.Jsonp();this._setRequest(k);k.setCallbackParam(this.getCallbackParam());k.setCallbackName(this.getCallbackName());k.setUrl(j);k.addListener(d,this._onSuccess,this);var l=this._delegate;if(l&&qx.lang.Type.isFunction(l.configureRequest)){this._delegate.configureRequest(k);};k.addListener(b,this._onChangePhase,this);k.addListener(c,this._onFail,this);k.send();}}});})();(function(){var a="qx.io.request.Jsonp",b="qx.event.type.Event",c="Boolean";qx.Class.define(a,{extend:qx.io.request.AbstractRequest,events:{"success":b,"load":b,"statusError":b},properties:{cache:{check:c,init:true}},members:{_createTransport:function(){return new qx.bom.request.Jsonp();},_getConfiguredUrl:function(){var d=this.getUrl(),e;if(this.getRequestData()){e=this._serializeData(this.getRequestData());d=qx.util.Uri.appendParamsToUrl(d,e);};if(!this.getCache()){d=qx.util.Uri.appendParamsToUrl(d,{nocache:new Date().valueOf()});};return d;},_getParsedResponse:function(){return this._transport.responseJson;},setCallbackParam:function(f){this._transport.setCallbackParam(f);},setCallbackName:function(name){this._transport.setCallbackName(name);}}});})();(function(){var a="qx.bom.request.Jsonp",b="callback",c="open",d="dispose",e="",f="_onNativeLoad",g="qx",h=".callback",i="qx.bom.request.Jsonp.";qx.Bootstrap.define(a,{extend:qx.bom.request.Script,construct:function(){qx.bom.request.Script.apply(this);this.__uG();},members:{responseJson:null,__cF:null,__uz:null,__uA:null,__uB:null,__uC:null,__uD:null,__et:null,__uE:e,open:function(o,k){if(this.__et){return;};var m={},l,n,j=this;this.responseJson=null;this.__uB=false;l=this.__uz||b;n=this.__uA||this.__uE+i+this.__cF+h;if(!this.__uA){this.constructor[this.__cF]=this;}else {if(!window[this.__uA]){this.__uC=true;window[this.__uA]=function(p){j.callback(p);};}else {{};};};{};m[l]=n;this.__uD=k=qx.util.Uri.appendParamsToUrl(k,m);this.__ir(c,[o,k]);},callback:function(q){if(this.__et){return;};this.__uB=true;{};this.responseJson=q;this.constructor[this.__cF]=undefined;this.__uF();},setCallbackParam:function(r){this.__uz=r;return this;},setCallbackName:function(name){this.__uA=name;return this;},setPrefix:function(s){this.__uE=s;},getGeneratedUrl:function(){return this.__uD;},dispose:function(){this.__uF();this.__ir(d);},_onNativeLoad:function(){this.status=this.__uB?200:500;this.__ir(f);},__uF:function(){if(this.__uC&&window[this.__uA]){window[this.__uA]=undefined;this.__uC=false;};},__ir:function(u,t){qx.bom.request.Script.prototype[u].apply(this,t||[]);},__uG:function(){this.__cF=g+(new Date().valueOf())+(e+Math.random()).substring(2,5);}}});})();(function(){var a="://query.yahooapis.com/v1/public/yql?q=",b="callback",c="http",d="env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",e="&format=json&diagnostics=false&",f="https",g="qx.data.store.Yql";qx.Class.define(g,{extend:qx.data.store.Jsonp,construct:function(i,k,l){var j=l?f:c;var h=j+a+encodeURIComponent(i)+e+d;qx.data.store.Jsonp.call(this,h,k,b);}});})();
});