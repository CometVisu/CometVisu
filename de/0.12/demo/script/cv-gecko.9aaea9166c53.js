qx.$$packageData['256']={"locales":{},"resources":{"plugins/clock/clock_pure.svg":[100,100,"svg","cv"]},"translations":{"de":{},"en":{}}};
qx.Part.$$notifyLoad("256", function() {
(function(){var a='minute',b='HotSpotHour',c="clock",d='hour',e='transform',f='drag',g='rotate(',h='<div class="actor" style="width:200px; height: 200px"></div>',i='Error: trying to update unknown clock SVG elements #Hour and/or #Minute',j='svg',k='HotSpotMinute',l='dragstop',m=',50,50)',n=':',o='resource/libs/jquery.svg.min.js',p=':00',q='cv.plugins.Clock',r='#Hour',s='#Minute',t='resource/libs/jquery-ui.min.js',u='plugins/clock/clock_pure.svg',v="transform";qx.Class.define(q,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Update],construct:function(w){w.value=new Date();cv.ui.structure.AbstractWidget.call(this,w);},statics:{parse:function(z,D,B,A){var C=cv.parser.WidgetParser.parseElement(this,z,D,B,A);cv.parser.WidgetParser.parseFormat(z,D);cv.parser.WidgetParser.parseAddress(z,D);return C;}},members:{_getInnerDomString:function(){return h;},_onDomReady:function(){var F=arguments;var E=$(this.getActor());E.svg({loadURL:qx.util.ResourceManager.getInstance().toUri(u),onLoad:function(G){$(G.root().getElementById(b)).draggable().bind(f,{type:d,actor:E},this.dragHelper.bind(this)).bind(l,{actor:E},this.dragAction.bind(this));$(G.root().getElementById(k)).draggable().bind(f,{type:a,actor:E},this.dragHelper.bind(this)).bind(l,{actor:E},this.dragAction.bind(this));this.base(F);Object.getOwnPropertyNames(this.getAddress()).filter(function(H){return cv.data.Model.isReadAddress(this.getAddress()[H]);}.bind(this)).forEach(function(I){this._update(I,this.getValue().getHours()+n+this.getValue().getMinutes()+p,true);},this);}.bind(this)});},initListeners:function(){},_update:function(R,Q,N){var M=this.getDomElement();var L=N?Q:this.defaultValueHandling(R,Q);var J=M.querySelector(j);var O=L.split(n);var P=J.querySelector(r);var K=J.querySelector(s);if(P!==undefined&&K!==undefined){P.setAttribute(v,g+((O[0]%12)*360/12+O[1]*30/60)+m);K.setAttribute(v,g+(O[1]*6)+m);}else {console.error(i);};},dragHelper:function(event){var V=event.data.actor;var T=V.find(j);var x=event.originalEvent.pageX-T.offset().left-50;var y=50-(event.originalEvent.pageY-T.offset().top);var U=(Math.atan2(x,y)*180/Math.PI+360)%360;var Y=this.getValue();var ba;if(event.data.type===d){var X=Y.getHours();var bb=X>=12;var S=Math.floor(U/30);ba=(U%30)*2;if(X%12>9&&S<3){if(bb){bb=false;Y.setDate(Y.getDate()+1);}else {bb=true;};}else if(S>9&&X%12<3){if(bb){bb=false;}else {bb=true;Y.setDate(Y.getDate()-1);};};Y.setHours(S+bb*12);Y.setMinutes(ba);}else {ba=Math.round(U/6);var W=Y.getMinutes();if(W>45&&ba<15){Y.setHours(Y.getHours()+1);}else if(ba>45&&W<15){Y.setHours(Y.getHours()-1);};Y.setMinutes(ba);};V.find(r).attr(e,g+((Y.getHours()%12)*360/12+Y.getMinutes()*30/60)+m);V.find(s).attr(e,g+(Y.getMinutes()*6)+m);},dragAction:function(){var bd=this.getAddress();for(var bc in bd){if(bd[bc][1]===true){continue;};cv.TemplateEngine.getInstance().visu.write(bc,cv.Transform.encode(bd[bc][0],this.getValue()));};}},defer:function(be){cv.parser.WidgetParser.addHandler(c,cv.plugins.Clock);cv.ui.structure.WidgetFactory.registerClass(c,be);var bf=cv.util.ScriptLoader.getInstance();{bf.addScripts([t,o],[0]);};}});})();
});