qx.$$packageData['1102004']={"resources":{}};
qx.Part.$$notifyLoad("1102004", function() {
(function(){var a='aborting restart timer ',b="interval",c='String',d="changeVisible",f='Boolean',g='ms',h='force',i='interval',j='iframe',k='position:fixed',l="",m='IMG',n='none',o="src",p='starting refresh ',q='width',r='height',s="IFRAME",t='?',u='"></body></html>',v='"]',w='img',x="cv.ui.common.Refresh",y=' in ',z='<html><head><title></title></head><body><img src="',A='_applyRestartOnVisible',B="_timer",C='stop refreshing ',D="//",E="error",F='error',G='img[src="',H='#',I='load',J='immediate refresh because refresh time has been reached ',K='Number',L='2d',M="setup.dom.finished",N='canvas',O='weak',P='full';qx.Mixin.define(x,{construct:function(){if(cv.TemplateEngine.getInstance().isDomFinished()){this.setupRefreshAction();}else {qx.event.message.Bus.subscribe(M,function(){this.setupRefreshAction();},this);};this.addListener(d,this._maintainTimerState,this);},properties:{refresh:{check:K,init:0},cachecontrol:{check:c,init:P},restartOnVisible:{check:f,init:false,apply:A}},members:{_timer:null,__eo:null,__rr:false,__rs:null,__rt:null,__ru:false,_applyRestartOnVisible:function(Q){if(Q){this._maintainTimerState();};},_maintainTimerState:function(){if(this.__rt){this.debug(a+this.getPath());this.__rt.stop();this.__rt.dispose();this.__rt=null;};if(!this.isRestartOnVisible()){return;};if(this._timer){if(this.isVisible()){var R=this.getRefresh()-(Date.now()-this.__rs);if(R<=0){this.debug(J+this.getPath());this._timer.start();this._timer.fireEvent(i);}else {this.debug(p+this.getPath()+y+R+g);this.__rt=qx.event.Timer.once(function(){this._timer.start();this._timer.fireEvent(i);this.__rt=null;},this,R);};}else if(this._timer.isEnabled()){this.debug(C+this.getPath());this._timer.stop();};};},setupRefreshAction:function(){if(this.getRefresh()&&this.getRefresh()>0){if(this.__rr===true){return;};this.__rr=true;if(this._setupRefreshAction){this._setupRefreshAction();if(this._timer){this._timer.addListener(i,function(){this.__rs=Date.now();},this);};}else if(!this._timer||!this._timer.isEnabled()){var U=this.getDomElement();var T=U.querySelector(w)||U.querySelector(j);var S=T.getAttribute(o);if(S.indexOf(t)<0&&((T.nodeName===m&&this.getCachecontrol()===P)||T.nodeName!==m)){S+=t;};this._timer=new qx.event.Timer(this.getRefresh());this._timer.addListener(b,function(){this.refreshAction(T,S);},this);this._timer.start();};if(this._timer&&this._timer.isEnabled()){this.__rs=Date.now();this.setRestartOnVisible(true);};};},refreshAction:function(X,V){this.__rs=Date.now();if(this._refreshAction){this._refreshAction();}else {var W=window.location.protocol+D+window.location.host;if(X.nodeName===s&&V.indexOf(W)!==0){X.setAttribute(o,l);qx.event.Timer.once(function(){X.setAttribute(o,V);},this,0);}else {var Y=this.getCachecontrol();if(X.nodeName!==m&&Y===h){Y=P;};switch(Y){case P:X.setAttribute(o,qx.util.Uri.appendParamsToUrl(V,l+new Date().getTime()));break;case O:X.setAttribute(o,V+H+new Date().getTime());break;case h:cv.ui.common.Refresh.__rv(V);};};};}},destruct:function(){if(this._timer){this._timer.stop();this._disposeObjects(B);};},statics:{__rv:function(bb,bh){var bg=0,bd=document.querySelectorAll(G+bb+v),ba=[],bc=function(){bd.forEach(function(bl){var bk=window.document.createElement(N);bk.width=bl.width;bk.height=bl.height;bk.style=k;bk.getContext(L).drawImage(bl,0,0);ba.push(bk);bl.width=bl.width;bl.height=bl.height;bl.parentNode.insertBefore(bk,bl);bl.removeAttribute(o);});},bj=function(){bd.forEach(function(bm){bm.setAttribute(o,bb);bm.removeAttribute(q);bm.removeAttribute(r);});ba.forEach(function(bn){bn.parentNode.removeChild(bn);});},bi=window.document.createElement(j),be,bf=function(e){if(!bg){if(bh){bg=1;}else {bg=2;bc();bi.contentWindow.location.reload(true);};}else if(bg===2){bj((e||window.event).type===E);if(bi.parentNode){bi.parentNode.removeChild(bi);};};};bi.style.display=n;window.parent.document.body.appendChild(bi);bi.addEventListener(I,bf,false);bi.addEventListener(F,bf,false);be=bi.contentWindow.document;be.open();be.write(z+bb+u);be.close();if(bh){return function(bo){if(!bh){return;};bh=false;if(bo){if(bg===1){bg=2;bc();bi.contentWindow.location.reload(true);};}else {bg=3;if(bi.contentWindow.stop){bi.contentWindow.stop();};if(bi.parentNode){bi.parentNode.removeChild(bi);};};};};return null;}}});})();
});