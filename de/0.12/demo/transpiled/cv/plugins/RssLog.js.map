{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/plugins/RssLog.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "AbstractWidget",
    "include",
    "common",
    "Refresh",
    "Update",
    "Operate",
    "properties",
    "src",
    "check",
    "nullable",
    "transform",
    "apply",
    "filter",
    "datetime",
    "init",
    "mode",
    "limit",
    "timeformat",
    "itemoffset",
    "itemack",
    "future",
    "width",
    "height",
    "model",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "getAttributeToPropertyMappings",
    "parseFormat",
    "parseAddress",
    "parseRefresh",
    "value",
    "parseFloat",
    "query",
    "members",
    "__request",
    "__html",
    "__wrapper",
    "__fixedRequestData",
    "__external",
    "__separatordate",
    "__separatoradd",
    "__isFuture",
    "__separatorprevday",
    "normalizeUrl",
    "indexOf",
    "parts",
    "util",
    "Uri",
    "parseUri",
    "substring",
    "queryKey",
    "_applySrc",
    "match",
    "_getInnerDomString",
    "style",
    "getWidth",
    "getHeight",
    "getPath",
    "_setupRefreshAction",
    "_timer",
    "event",
    "Timer",
    "getRefresh",
    "addListener",
    "refreshRSSlog",
    "start",
    "_onDomReady",
    "$$domReady",
    "message",
    "Bus",
    "subscribe",
    "getParentPage",
    "getDatetime",
    "Config",
    "currentPageId",
    "_update",
    "_action",
    "brss",
    "String",
    "htmlStringToDomElement",
    "title",
    "document",
    "querySelector",
    "innerText",
    "popup",
    "PopupHandler",
    "showPopup",
    "content",
    "parent",
    "Tree",
    "getParent",
    "Object",
    "entries",
    "margin",
    "forEach",
    "key_value",
    "stop",
    "Registration",
    "stopPropagation",
    "getCurrentDomElement",
    "classList",
    "contains",
    "getItemack",
    "once",
    "addr",
    "getAddress",
    "Model",
    "isWriteAddress",
    "TemplateEngine",
    "getInstance",
    "visu",
    "write",
    "Transform",
    "encode",
    "overflow",
    "isBig",
    "getSrc",
    "error",
    "__refreshRss",
    "__refreshYql",
    "setUserData",
    "io",
    "request",
    "Xhr",
    "send",
    "store",
    "Yql",
    "reload",
    "refresh",
    "isEnabled",
    "requestData",
    "assign",
    "getFilter",
    "f",
    "getLimit",
    "getFuture",
    "j",
    "ResourceManager",
    "toUri",
    "set",
    "accept",
    "method",
    "__updateRssContent",
    "ev",
    "getTarget",
    "getResponse",
    "manipulateData",
    "results",
    "item",
    "entry",
    "bind",
    "_applyModel",
    "old",
    "removeListener",
    "__updateYqlContent",
    "__prepareContentElement",
    "ul",
    "c",
    "innerHTML",
    "appendChild",
    "displayrows",
    "parseInt",
    "dataset",
    "dummyDiv",
    "rect",
    "getBoundingClientRect",
    "itemheight",
    "Math",
    "round",
    "bottom",
    "top",
    "parentNode",
    "removeChild",
    "widget",
    "widgetRect",
    "displayheight",
    "labelElem",
    "labelElemRect",
    "floor",
    "result",
    "__updateContent",
    "responseData",
    "feed",
    "getModel",
    "toArray",
    "items",
    "getUserData",
    "selector",
    "debug",
    "getAttribute",
    "createElement",
    "itemnum",
    "length",
    "getMode",
    "row",
    "last",
    "Date",
    "strftime",
    "i",
    "idx",
    "itemHtml",
    "__getItemHtml",
    "rowElem",
    "dom",
    "Element",
    "create",
    "mapping",
    "mappedValue",
    "applyMapping",
    "state",
    "span",
    "self",
    "defaultValue2DOM",
    "e",
    "_applyValueToDom",
    "add",
    "id",
    "tags",
    "tmp",
    "Array",
    "isArray",
    "_onTap",
    "replace",
    "entryDate",
    "publishedDate",
    "getTimeformat",
    "toLocaleDateString",
    "toLocaleTimeString",
    "thisday",
    "getLink",
    "getTitle",
    "getDescription",
    "getCurrentTarget",
    "toggle",
    "req",
    "getUrl",
    "defer",
    "loader",
    "ScriptLoader",
    "addStyles",
    "addHandler",
    "plugins",
    "RssLog",
    "WidgetFactory",
    "registerClass"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* RssLog.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * @author Michael Markstaller\n * @since 2011\n * @asset(plugins/rsslog/rsslog.css)\n */\nqx.Class.define('cv.plugins.RssLog', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Refresh, cv.ui.common.Update, cv.ui.common.Operate],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: {\n      check: \"String\",\n      nullable:true,\n      transform: \"normalizeUrl\",\n      apply: \"_applySrc\"\n    },\n    filter: {\n      check: \"String\",\n      nullable:true\n    },\n    datetime: {\n      check: \"Boolean\",\n      init: true\n    },\n    mode: {\n      check: \"String\",\n      init: \"last\"\n    },\n    limit: {\n      check: \"Number\",\n      init: 0\n    },\n    timeformat: {\n      check: \"String\",\n      nullable:true\n    },\n    itemoffset: {\n      check: \"Number\",\n      init: 0\n    },\n    itemack: {\n      check: [\"modify\", \"display\", \"disable\"],\n      init: \"modify\"\n    },\n    future:     {\n      check: \"String\",\n      nullable: true\n    },\n    width: {\n      check: \"String\",\n      nullable: true\n    },\n    height: {\n      check: \"String\",\n      nullable: true\n    },\n    /**\n     * Internal model for YQL data\n     */\n    model: {\n      check : \"qx.data.Array\",\n      nullable: true,\n      apply: \"_applyModel\"\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     * @return {Map} extracted data from config element as key/value map\n     */\n    parse: function (xml, path, flavour, pageType) {\n      var data = cv.parser.WidgetParser.parseElement(this, xml, path, flavour, pageType, this.getAttributeToPropertyMappings());\n      cv.parser.WidgetParser.parseFormat(xml, path);\n      cv.parser.WidgetParser.parseAddress(xml, path);\n      cv.parser.WidgetParser.parseRefresh(xml, path);\n      return data;\n    },\n\n    getAttributeToPropertyMappings: function() {\n      return {\n        src:    {},\n        width:  {},\n        height: {},\n        filter: {},\n        datetime:   {\n          \"default\": true,\n          transform: function(value) {\n            if (typeof value === 'boolean') {\n              return value;\n            }\n            return value === \"true\";\n          }\n        },\n        mode:       { \"default\": \"last\" },\n        limit:      { \"default\": 0, transform: parseFloat },\n        timeformat: {},\n        itemack:    { \"default\": \"modify\"}, // allowed: modify, display, disable\n        future:     {},\n        query:      {}\n      };\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __request: null,\n    __html: null,\n    __wrapper: null,\n    __fixedRequestData: null,\n    __external : false,\n\n    __separatordate: null,\n    __separatoradd: null,\n    __isFuture: null,\n    __separatorprevday: null,\n\n    /**\n     * Strip querystring from URL and store is as Map\n     * @param value {String} URL\n     * @return {String} normalized URL\n     */\n    normalizeUrl: function(value) {\n      this.__fixedRequestData = {};\n      if (value && value.indexOf(\"?\") > 0) {\n        var parts = qx.util.Uri.parseUri(value);\n        value = value.substring(0, value.indexOf(\"?\"));\n        this.__fixedRequestData = parts.queryKey;\n      }\n      return value;\n    },\n\n    // property apply\n    _applySrc: function(value) {\n      this.__external = !value.match(/rsslog\\.php/) && !value.match(/rsslog_mysql\\.php/) && !value.match(/rsslog_oh\\.php/);\n    },\n\n    _getInnerDomString: function () {\n      var style = '';\n      if (this.getWidth()) {\n        style += \"width:\" + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += \"height:\" + this.getHeight();\n      }\n\n      return '<div class=\"actor rsslogBody\"><div class=\"rsslog_inline\" id=\"rss_' + this.getPath() + '\" style=\"' + style + '\"></div></div>';\n    },\n\n    _setupRefreshAction: function() {\n      this._timer = new qx.event.Timer(this.getRefresh());\n      this._timer.addListener(\"interval\", function () {\n        this.refreshRSSlog();\n      }, this);\n      this._timer.start();\n    },\n\n    _onDomReady: function () {\n      if (!this.$$domReady) {\n        this.base(arguments);\n        qx.event.message.Bus.subscribe(\"path.\" + this.getParentPage().getPath() + \".beforePageChange\", this.refreshRSSlog, this);\n        this.__html = '<span class=\"mappedValue\"></span><span>{text}</span>';\n        if (this.getDatetime()) {\n          this.__html = '{date}: ' + this.__html;\n        }\n        this.__wrapper = 'li';\n\n        if (cv.Config.currentPageId === this.getParentPage().getPath()) {\n          this.refreshRSSlog();\n        }\n      }\n    },\n\n    _update: function () {\n      this.refreshRSSlog();\n    },\n\n    _action: function () {\n      var brss = cv.util.String.htmlStringToDomElement('<div class=\"rsslog_popup\" id=\"rss_' + this.getPath() + '_big\"/>');\n      var title = document.querySelector('#' + this.getPath() + ' .label').innerText || '';\n      var popup = cv.ui.PopupHandler.showPopup(\"rsslog\", {title: title, content: brss});\n      var parent = cv.util.Tree.getParent(brss, \"div\", null, 1)[0];\n      Object.entries({height: \"90%\", width: \"90%\", margin: \"auto\"}).forEach(function(key_value){parent.style[key_value[0]]=key_value[1];}); // define parent as 100%!\n      if (this._timer) {\n        this._timer.stop();\n      }\n      qx.event.Registration.addListener(brss, \"tap\", function(event) {\n        // don't let the popup know about the click, or it will close on touch-displays\n        event.stopPropagation();\n      }, this);\n      qx.event.Registration.addListener(popup, \"close\", function () {\n        // reload main data - but only once (popup and popup_background are caught\n        // here).\n        // But delay it so that any change done to the data has a chance to\n        // arrive here.\n\n        if (popup.getCurrentDomElement() && popup.getCurrentDomElement().classList.contains('popup') && this.getItemack() === 'modify') {\n          qx.event.Timer.once(function () {\n            this.refreshRSSlog();\n          }, this, 100);\n          for (var addr in this.getAddress()) {\n            if (!cv.data.Model.isWriteAddress(this.getAddress()[addr])) { continue; }// skip when write flag not set\n            cv.TemplateEngine.getInstance().visu.write(addr, cv.Transform.encode(this.getAddress()[addr][0], 0));\n          }\n        }\n      }, this);\n      popup.getCurrentDomElement().querySelector('.main').style.overflow = \"auto\";\n      this.refreshRSSlog(true);\n    },\n\n    refreshRSSlog: function (isBig) {\n      var src = this.getSrc();\n      if (!src) {\n        this.error(\"no src given, aborting RSS-Log refresh\");\n        return;\n      }\n      if (!this.__request) {\n        if (!this.__external) {\n          this.__refreshRss();\n        }\n        else {\n          this.__refreshYql();\n        }\n      }\n      this.__request.setUserData(\"big\", isBig);\n      if (this.__request instanceof qx.io.request.Xhr) {\n        this.__request.send();\n      } else if (this.__request instanceof qx.data.store.Yql) {\n        this.__request.reload();\n      }\n\n      var refresh = this.getRefresh();\n      if (typeof (refresh) !== \"undefined\" && refresh) {\n        // reload regularly\n        if (this._timer && this._timer.isEnabled()) {\n          this._timer.start();\n        }\n      }\n    },\n\n    /**\n     * Fetch data from builtin PHP script\n     */\n    __refreshRss: function() {\n      var src = this.getSrc();\n      var requestData = Object.assign({}, this.__fixedRequestData);\n      if (this.getFilter()) {\n        requestData.f = this.getFilter();\n      }\n      if (this.getLimit()) {\n        requestData.limit = this.getLimit();\n      }\n      if (this.getFuture()) {\n        requestData.future = this.getFuture();\n      }\n      requestData.j = 1;\n      this.__request = new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(src));\n      this.__request.set({\n        accept: \"application/json\",\n        requestData: requestData,\n        method: \"GET\"\n      });\n      this.__request.addListener(\"success\", this.__updateRssContent, this);\n      this.__request.addListener(\"error\", function(ev) {\n        this.error('C: #rss_%s, Error: %s, Feed: %s', this.getPath(), ev.getTarget().getResponse(), src);\n      }, this);\n    },\n\n    /**\n     * Fetch data from YQL Service\n     */\n    __refreshYql: function() {\n      if (!this.__request) {\n        this.__request = new qx.data.store.Yql(\"SELECT * FROM rss WHERE url='\"+this.getSrc()+\"'\", {\n          manipulateData: function (data) {\n            if (data.query.results) {\n              return data.query.results.item || data.query.results.entry;\n            } else {\n              return [];\n            }\n          }\n        });\n\n        this.__request.bind(\"model\", this, \"model\");\n      }\n    },\n\n    _applyModel: function(value, old) {\n      if (old) {\n        old.removeListener(\"change\", this.__updateYqlContent, this);\n      }\n      if (value) {\n        this.__updateYqlContent();\n        value.addListener(\"change\", this.__updateYqlContent, this);\n      }\n    },\n\n    __prepareContentElement: function(ul, c) {\n      c.innerHTML = '';\n\n      c.appendChild(ul);\n\n      // get height of one entry, calc max num of display items in widget\n      var displayrows = parseInt(c.dataset[\"last_rowcount\"], 10) || 0;\n      ul.innerHTML = '<li class=\"rsslogRow odd\" id=\"dummydiv\">.</li>';\n      var dummyDiv = c.querySelector('#dummydiv'),\n        rect = dummyDiv.getBoundingClientRect(),\n        itemheight = Math.round(rect.bottom - rect.top);\n      dummyDiv.parentNode.removeChild(dummyDiv);\n      if (itemheight !== 0) {\n        var widget = c.parentNode.parentNode, // get the parent widget\n          widgetRect = widget.getBoundingClientRect(),\n          displayheight = Math.round(widgetRect.bottom - widgetRect.top),\n          labelElem = widget.querySelector('.label');\n        if (labelElem) {\n          // max. height of actor is widget-label(if exists)\n          var labelElemRect = labelElem.getBoundingClientRect();\n          displayheight -= Math.round(labelElemRect.bottom - labelElemRect.top);\n        }\n        displayrows = Math.floor(displayheight / itemheight);\n      }\n      c.dataset[\"last_rowcount\"] = displayrows;\n      return displayrows;\n    },\n\n    __updateRssContent: function(ev) {\n      var result = ev.getTarget().getResponse();\n      if (typeof result === 'string') {\n        // no json -> error\n        this.error(result);\n        return;\n      }\n      this.__updateContent(result.responseData.feed.entries);\n    },\n\n    __updateYqlContent: function() {\n      this.__updateContent(this.getModel().toArray());\n    },\n\n    __updateContent: function(items) {\n\n      var isBig = this.__request.getUserData(\"big\");\n      var selector = '#rss_' + this.getPath() + (isBig === true ? '_big' : '');\n      var c = document.querySelector(selector);\n      var itemack = isBig === true ? this.getItemack() : ( 'modify' === this.getItemack() ? 'display' : this.getItemack());\n\n      this.debug(\"ID: \"+c.getAttribute(\"id\")+\", Feed: \"+this.getSrc());\n\n      var ul = document.createElement(\"ul\");\n      var displayrows = this.__prepareContentElement(ul, c);\n\n      var itemnum = items.length;\n      this.debug('C: #'+this.getPath()+', '+itemnum+' element(s) found, '+displayrows+' displayrow(s) available');\n\n      var itemoffset = 0; // correct if mode='last' or itemnum<=displayrows\n\n      if (itemnum > displayrows) { // no need to check mode if items are less than rows\n        if (this.getMode() === 'first') {\n          itemoffset = itemnum - displayrows;\n        }\n        if (this.getMode() === 'rollover') {\n          itemoffset = parseInt(c.dataset[\"itemoffset\"], 10) || 0;\n          if (itemoffset === itemnum) {\n            itemoffset = 0;\n          }\n          c.dataset[\"itemoffset\"] = itemoffset + 1;\n        }\n      }\n\n      var row = 'rsslogodd';\n      var last = itemoffset + displayrows;\n      last = (last > itemnum) ? itemnum : last;\n\n      this.__separatordate = new Date().strftime('%d');\n      this.__separatoradd = false;\n      this.__separatorprevday = false;\n      this.__isFuture = false;\n\n      for (var i = itemoffset; i < last; i++) {\n        this.debug('C: #'+this.getPath()+', processing item: '+i+' of '+itemnum);\n        var idx = i;\n        idx = (i >= itemnum) ? (idx = idx - itemnum) : idx;\n\n        var item = items[idx];\n        var itemHtml = this.__getItemHtml(item, isBig);\n\n        var rowElem = qx.dom.Element.create('li', { 'class' : 'rsslogRow ' + row });\n        rowElem.innerHTML = itemHtml;\n\n        if (item.mapping && item.mapping !== '') {\n          var mappedValue = this.applyMapping(itemack === 'disable' ? 0 : item.state, item.mapping);\n          var span = rowElem.querySelector('.mappedValue');\n          var self = this;\n          this.defaultValue2DOM(mappedValue, function(e){self._applyValueToDom(span,e);});\n        }\n        if (this.__separatoradd && idx !== 0) {\n          rowElem.classList.add('rsslog_separator');\n          this.__separatorprevday = true;\n        }\n        else {\n          this.__separatorprevday = false;\n        }\n\n        if (this.__separatorprevday === true) {\n          rowElem.classList.add('rsslog_prevday');\n        }\n\n        if (this.__isFuture) {\n          rowElem.classList.add((row === 'rsslogodd') ? 'rsslog_futureeven' : 'rsslog_futureodd');\n        }\n\n        rowElem.dataset['id'] = item.id;\n        rowElem.dataset['mapping'] = item.mapping;\n        if (item.tags) {\n          var tmp = rowElem.querySelector('span');\n          if (Array.isArray(item.tags)) {\n            tmp.classList.add.apply( tmp.classList, item.tags );\n          } else {\n            tmp.classList.add(item.tags);\n          }\n        }\n        if (item.state === \"1\" && itemack !== 'disable') {\n          rowElem.classList.add(\"rsslog_ack\");\n        }\n\n        if (itemack === 'modify') {\n          qx.event.Registration.addListener(rowElem, \"tap\", this._onTap, this);\n        }\n        ul.appendChild(rowElem);\n\n        // Alternate row classes\n        row = (row === 'rsslogodd') ? 'rsslogeven' : 'rsslogodd';\n      }\n    },\n\n    __getItemHtml: function(item, isBig) {\n      var itemHtml = \"\";\n      if (!this.__external) {\n        itemHtml = this.__html;\n\n        itemHtml = itemHtml.replace(/\\{text\\}/, item.content);\n        var entryDate = new Date(item.publishedDate);\n        if (entryDate) {\n          itemHtml = (this.getTimeformat()) ?\n            (itemHtml.replace(/\\{date\\}/, entryDate.strftime(this.getTimeformat()) + '&nbsp;')) :\n            (itemHtml.replace(/\\{date\\}/, entryDate.toLocaleDateString() + ' ' + entryDate.toLocaleTimeString() + '&nbsp;'));\n          var thisday = entryDate.strftime('%d');\n          this.__separatoradd = ((this.__separatordate > 0) && (this.__separatordate !== thisday));\n          this.__separatordate = thisday;\n          this.__isFuture = (entryDate > new Date() );\n        }\n        else {\n          itemHtml = itemHtml.replace(/\\{date\\}/, '');\n        }\n      } else {\n        if (isBig) {\n          return '<b><a href=\"' + item.getLink() + '\">' + item.getTitle() + '</a></b><br/>' + item.getDescription();\n        } else {\n          return '<b>' + item.getTitle() + '</b><br/>' + item.getDescription();\n        }\n      }\n\n      return itemHtml;\n    },\n\n    _onTap: function(ev) {\n      var item = ev.getCurrentTarget();\n\n      var id = item.dataset['id'];\n      var mapping = item.dataset['mapping'];\n      item.classList.toggle(\"rsslog_ack\");\n      var state = +item.classList.contains(\"rsslog_ack\"); // the new state is the same as hasClass\n      if (mapping && mapping !== '') {\n        var mappedValue = this.applyMapping(state, mapping);\n        var span = item.querySelector('.mappedValue');\n        span.innerHTML = '';\n        var self = this;\n        this.defaultValue2DOM(mappedValue, function(e){self._applyValueToDom(span,e);});\n      }\n      var req = new qx.io.request.Xhr(this.__request.getUrl());\n      req.set({\n        method: \"GET\",\n        requestData: Object.assign({}, this.__fixedRequestData, {\n          'u': id,\n          'state': state\n        }),\n        accept: \"application/json\"\n      });\n      req.send();\n    }\n  },\n\n  defer: function(statics) {\n    var loader = cv.util.ScriptLoader.getInstance();\n    loader.addStyles('plugins/rsslog/rsslog.css');\n    cv.parser.WidgetParser.addHandler(\"rsslog\", cv.plugins.RssLog);\n    cv.ui.structure.WidgetFactory.registerClass(\"rsslog\", statics);\n  }\n});"
  ]
}