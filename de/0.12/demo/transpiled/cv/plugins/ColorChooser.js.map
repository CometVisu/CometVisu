{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/plugins/ColorChooser.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "AbstractWidget",
    "include",
    "common",
    "Update",
    "Operate",
    "statics",
    "parse",
    "xml",
    "path",
    "flavour",
    "pageType",
    "data",
    "parser",
    "WidgetParser",
    "parseElement",
    "parseFormat",
    "parseAddress",
    "makeAddressListFn",
    "src",
    "transform",
    "mode",
    "variant",
    "properties",
    "valueR",
    "check",
    "init",
    "valueG",
    "valueB",
    "busR",
    "busG",
    "busB",
    "rateLimiter",
    "members",
    "__skipSending",
    "_onDomReady",
    "$actor",
    "$",
    "getPath",
    "farbtastic",
    "color",
    "setValueR",
    "parseInt",
    "substring",
    "setValueG",
    "setValueB",
    "getRateLimiter",
    "_rateLimitedSend",
    "bind",
    "modified",
    "address",
    "getAddress",
    "r",
    "getValueR",
    "g",
    "getValueG",
    "b",
    "getValueB",
    "br",
    "getBusR",
    "bg",
    "getBusG",
    "bb",
    "getBusB",
    "v",
    "templateEngine",
    "TemplateEngine",
    "getInstance",
    "addr",
    "Model",
    "isWriteAddress",
    "variantInfo",
    "Transform",
    "encode",
    "visu",
    "write",
    "rgb",
    "Map",
    "brgb",
    "bv",
    "setBusR",
    "setBusG",
    "setBusB",
    "setRateLimiter",
    "__timer",
    "event",
    "Timer",
    "once",
    "_getInnerDomString",
    "_update",
    "ga",
    "undefined",
    "toHex",
    "x",
    "toString",
    "length",
    "value",
    "decode",
    "jQuery",
    "getActor",
    "get",
    "stop",
    "setColor",
    "defer",
    "loader",
    "util",
    "ScriptLoader",
    "addStyles",
    "addScripts",
    "addHandler",
    "WidgetFactory",
    "registerClass",
    "destruct",
    "__farbtastic",
    "plugins",
    "ColorChooser"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ColorChooser.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n *\n * @since 0.5.2\n * @author Christian Mayer [CometVisu at ChristianMayer dot de]\n *\n * @asset(plugins/colorchooser/farbtastic/farbtastic.js)\n * @asset(plugins/colorchooser/farbtastic/farbtastic.css)\n * @asset(plugins/colorchooser/farbtastic/wheel.png)\n * @asset(plugins/colorchooser/farbtastic/mask.png)\n * @asset(plugins/colorchooser/farbtastic/marker.png)\n */\nqx.Class.define('cv.plugins.ColorChooser', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Update, cv.ui.common.Operate],\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Parses the widgets XML configuration and extracts the given information\n     * to a simple key/value map.\n     *\n     * @param xml {Element} XML-Element\n     * @param path {String} internal path of the widget\n     * @param flavour {String} Flavour of the widget\n     * @param pageType {String} Page type (2d, 3d, ...)\n     */\n    parse: function (xml, path, flavour, pageType) {\n      var data = cv.parser.WidgetParser.parseElement(this, xml, path, flavour, pageType);\n      cv.parser.WidgetParser.parseFormat(xml, path);\n      cv.parser.WidgetParser.parseAddress(xml, path, this.makeAddressListFn);\n      return data;\n    },\n\n    makeAddressListFn: function( src, transform, mode, variant ) {\n      return [ true, variant ];\n    }\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    valueR: {\n      check: \"Number\",\n      init: 0\n    },\n    valueG: {\n      check: \"Number\",\n      init: 0\n    },\n    valueB: {\n      check: \"Number\",\n      init: 0\n    },\n    busR: {\n      check: \"Number\",\n      init: 0\n    },\n    busG: {\n      check: \"Number\",\n      init: 0\n    },\n    busB: {\n      check: \"Number\",\n      init: 0\n    },\n    rateLimiter: {\n      check: \"Boolean\",\n      init: false\n    }\n  },\n\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __skipSending: false,\n\n    _onDomReady: function() {\n      this.base(arguments);\n      var $actor = $( '#' + this.getPath() + ' .actor' );\n      $actor.farbtastic( function(color){\n        this.setValueR(parseInt(color.substring(1, 3), 16) * 100 / 255.0);\n        this.setValueG(parseInt(color.substring(3, 5), 16) * 100 / 255.0);\n        this.setValueB(parseInt(color.substring(5, 7), 16) * 100 / 255.0);\n\n        if( this.getRateLimiter() === false && this.__skipSending === false) {// already requests going?\n          this._rateLimitedSend($actor);\n        }\n      }.bind(this));\n    },\n\n    _rateLimitedSend: function() {\n      var modified = false;\n      var address = this.getAddress();\n      var r  = this.getValueR();\n      var g  = this.getValueG();\n      var b  = this.getValueB();\n      var br = this.getBusR();\n      var bg = this.getBusG();\n      var bb = this.getBusB();\n      var v;\n      var templateEngine = cv.TemplateEngine.getInstance();\n      for( var addr in address )\n      {\n        if( !cv.data.Model.isWriteAddress(address[addr]) ) { continue; } // skip when write flag not set\n        switch( address[addr].variantInfo )\n        {\n          case 'r':\n            v = cv.Transform.encode(address[addr].transform, r );\n            if( v !== cv.Transform.encode(address[addr].transform, br ) )\n            {\n              templateEngine.visu.write( addr, v );\n              modified = true;\n            }\n            break;\n          case 'g':\n            v = cv.Transform.encode(address[addr].transform, g );\n            if( v !== cv.Transform.encode(address[addr].transform, bg ) )\n            {\n              templateEngine.visu.write( addr, v );\n              modified = true;\n            }\n            break;\n          case 'b':\n            v = cv.Transform.encode(address[addr].transform, b );\n            if( v !== cv.Transform.encode(address[addr].transform, bb ) )\n            {\n              templateEngine.visu.write( addr, v );\n              modified = true;\n            }\n            break;\n          case 'rgb':\n            var rgb = new Map([['r',r],['g',g],['b',b]]);\n            var brgb = new Map([['r',br],['g',bg],['b',bb]]);\n            v = cv.Transform.encode(address[addr].transform, rgb );\n            var bv = cv.Transform.encode(address[addr].transform, brgb );\n            if( v !== bv )\n            {\n              templateEngine.visu.write( addr, v );\n              modified = true;\n            }\n            break;\n        }\n      }\n\n      if( modified )\n      {\n        this.setBusR(this.getValueR());\n        this.setBusG(this.getValueG());\n        this.setBusB(this.getValueB());\n        this.setRateLimiter(true);\n        this.__timer = qx.event.Timer.once(this._rateLimitedSend, this, 250); // next call in 250ms\n      } else {\n        this.setRateLimiter(false);\n      }\n    },\n\n    _getInnerDomString: function() {\n      return '<div class=\"actor\"></div>';\n    },\n\n    _update: function( ga, data ) {\n      if (ga === undefined) { return; }\n      function toHex( x ) { var r = parseInt( x ).toString(16); return r.length === 1 ? '0'+r : r; }\n      var\n        value      = cv.Transform.decode( this.getAddress()[ ga ].transform, data ),\n        farbtastic = jQuery.farbtastic( this.getActor() ),\n        color      = farbtastic.color || '#000000';\n\n      switch( this.getAddress()[ ga ].variantInfo )\n      {\n        case 'r':\n          this.setBusR(value);\n          color = color.substring(0,1) +\n            toHex( value*255/100 )+\n            color.substring(3);\n          break;\n\n        case 'g':\n          this.setBusG(value);\n          color = color.substring(0,3) +\n            toHex( value*255/100 )+\n            color.substring(5);\n          break;\n\n        case 'b':\n          this.setBusB(value);\n          color = color.substring(0,5) +\n            toHex( value*255/100 )+\n            color.substring(7);\n          break;\n        case 'rgb':\n          this.setBusR(value.get('r'));\n          this.setBusG(value.get('g'));\n          this.setBusB(value.get('b'));\n          color = color.substring(0,1) +\n            toHex( value.get('r')*255/100 )+\n            toHex( value.get('g')*255/100 )+\n            toHex( value.get('b')*255/100 )+\n            color.substring(7);\n          break;\n      }\n      this.__skipSending = true;\n      if (this.__timer) {\n        this.__timer.stop();\n        this.__timer = null;\n        this.setRateLimiter(false);\n      }\n      farbtastic.setColor( color );\n      this.__skipSending = false;\n    }\n  },\n\n  defer: function(statics) {\n    var loader = cv.util.ScriptLoader.getInstance();\n    loader.addStyles('plugins/colorchooser/farbtastic/farbtastic.css');\n    loader.addScripts('plugins/colorchooser/farbtastic/farbtastic.js');\n    // register the parser\n    cv.parser.WidgetParser.addHandler(\"colorchooser\", statics);\n    cv.ui.structure.WidgetFactory.registerClass(\"colorchooser\", statics);\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this.__farbtastic = null;\n  }\n});"
  ]
}