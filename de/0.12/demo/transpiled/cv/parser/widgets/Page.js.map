{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/parser/widgets/Page.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "statics",
    "parse",
    "page",
    "path",
    "flavour",
    "pageType",
    "storagePath",
    "cv",
    "parser",
    "WidgetParser",
    "getStoragePath",
    "addresses",
    "getAttribute",
    "src",
    "data",
    "Model",
    "getInstance",
    "addAddress",
    "READ",
    "name",
    "backdrop",
    "showtopnavigation",
    "showfooter",
    "shownavbar",
    "top",
    "bottom",
    "left",
    "right",
    "Array",
    "from",
    "children",
    "filter",
    "m",
    "matches",
    "forEach",
    "elem",
    "pos",
    "value",
    "bindClickToWidget",
    "TemplateEngine",
    "wstyle",
    "layout",
    "parseLayout",
    "backdropType",
    "substring",
    "length",
    "setWidgetData",
    "showTopNavigation",
    "showFooter",
    "showNavbarTop",
    "showNavbarBottom",
    "showNavbarLeft",
    "showNavbarRight",
    "backdropAlign",
    "size",
    "address",
    "linkVisible",
    "$$type",
    "parseAddress",
    "parseFormat",
    "parseChildren",
    "linkData",
    "classes",
    "setWidgetLayout",
    "defer",
    "addHandler",
    "widgets",
    "Page"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Page.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n *\n */\nqx.Class.define('cv.parser.widgets.Page', {\n  type: \"static\",\n\n  /*\n   ******************************************************\n   STATICS\n   ******************************************************\n   */\n  statics: {\n\n    parse: function( page, path, flavour, pageType ) {\n\n      var storagePath = cv.parser.WidgetParser.getStoragePath(page, path);\n      var addresses = {};\n      if (page.getAttribute('ga')) {\n        var src = page.getAttribute('ga');\n        cv.data.Model.getInstance().addAddress(src, storagePath);\n        addresses[ src ] = [ 'DPT:1.001', cv.data.Model.READ ];\n      }\n\n      var name    = page.getAttribute('name');\n      pageType = page.getAttribute('type') || 'text';              //text, 2d or 3d\n      var backdrop = page.getAttribute('backdrop');\n      var showtopnavigation = page.getAttribute('showtopnavigation') ? page.getAttribute('showtopnavigation') === \"true\" : null;\n      var showfooter = page.getAttribute('showfooter') ? page.getAttribute('showfooter') === \"true\": true;\n      // make sure the type has the correct value as we need to use it ass CSS class\n      switch (pageType) {\n        case '2d':\n        case '3d':\n          // do nothing, type has correct value\n          break;\n        default:\n          pageType = 'text';\n          break;\n      }\n\n      // automatically set the navbars if not set in the config file\n      var shownavbar = {\n        top    : path === \"id\" ? false : null,\n        bottom : path === \"id\" ? false : null,\n        left   : path === \"id\" ? false : null,\n        right  : path === \"id\" ? false : null\n      };\n      Array.from(page.children).filter(function(m){return m.matches(\"navbar\");}).forEach( function(elem) {\n        shownavbar[ elem.getAttribute('position') || 'left' ] = true;\n      });\n      // overwrite default when set manually in the config\n      ['top', 'left', 'right', 'bottom'].forEach(function(pos) {\n        if (shownavbar[pos] !== null) {\n          // do not override current values\n          return;\n        }\n        var value = page.getAttribute('shownavbar-'+pos);\n        if (typeof value === 'string') {\n          shownavbar[pos] = value === \"true\";\n        }\n      }, this);\n      var bindClickToWidget = cv.TemplateEngine.getInstance().bindClickToWidget;\n      if (page.getAttribute(\"bind_click_to_widget\")) {\n        bindClickToWidget = page.getAttribute(\"bind_click_to_widget\")===\"true\";\n      }\n      if( page.getAttribute('flavour') ) {\n        flavour = page.getAttribute('flavour');// sub design choice\n      }\n      var wstyle  = '';                                     // widget style\n      if( page.getAttribute('align') ) {\n        wstyle += 'text-align:' + page.getAttribute('align') + ';';\n      }\n      if( wstyle !== '' ) {\n        wstyle = 'style=\"' + wstyle + '\"';\n      }\n\n      var layout = cv.parser.WidgetParser.parseLayout( Array.from(page.children).filter(function(m){return m.matches(\"layout\");})[0] );\n      var backdropType = null;\n      if (backdrop) {\n        backdropType = '.svg' === backdrop.substring( backdrop.length - 4 ) ? 'embed' : 'img';\n      }\n\n      var data = cv.data.Model.getInstance().setWidgetData( storagePath, {\n        path              : storagePath,\n        name              : name,\n        pageType          : pageType,\n        showTopNavigation : showtopnavigation,\n        showFooter        : showfooter,\n        showNavbarTop     : shownavbar.top,\n        showNavbarBottom  : shownavbar.bottom,\n        showNavbarLeft    : shownavbar.left,\n        showNavbarRight   : shownavbar.right,\n        backdropAlign     : '2d' === pageType ? (page.getAttribute('backdropalign') || '50% 50%') : null,\n        size              : page.getAttribute('size') || null,\n        address           : addresses,\n        linkVisible       : page.getAttribute('visible') ? page.getAttribute('visible') === \"true\" : true,\n        flavour           : flavour || null,\n        $$type            : \"page\",\n        backdrop          : backdrop || null,\n        backdropType      : backdropType\n      });\n      cv.parser.WidgetParser.parseAddress(page, path);\n      cv.parser.WidgetParser.parseFormat(page, path);\n      // this has to be called manually to allow inheritance of the flavour, pageType values\n      cv.parser.WidgetParser.parseChildren(page, path, flavour, pageType);\n      if (data.linkVisible === true) {\n        var linkData = cv.data.Model.getInstance().setWidgetData( path, {\n          $$type          : \"pagelink\",\n          path            : path,\n          name            : name,\n          classes         : cv.parser.WidgetParser.setWidgetLayout( page, path ) || '',\n          layout          : layout || null,\n          address         : addresses,\n          pageType        : pageType,\n          wstyle          : wstyle || '',\n          bindClickToWidget: bindClickToWidget\n        });\n        return [data, linkData];\n      } else {\n        return data;\n      }\n    }\n  },\n\n  defer: function(statics) {\n    cv.parser.WidgetParser.addHandler(\"page\", statics);\n  }\n});"
  ]
}