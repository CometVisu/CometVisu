{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/ui/MHandleMessage.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "_messages",
    "data",
    "Array",
    "_severities",
    "properties",
    "maxEntries",
    "check",
    "init",
    "event",
    "counter",
    "globalSeverity",
    "rootElementId",
    "nullable",
    "messageElementId",
    "delegate",
    "members",
    "__idCounter",
    "getSeverities",
    "_updateHighestSeverity",
    "severityRank",
    "forEach",
    "message",
    "severity",
    "indexOf",
    "setGlobalSeverity",
    "resetGlobalSeverity",
    "getSeverityColor",
    "_applyMaxEntries",
    "value",
    "getLength",
    "splice",
    "setMaxEntries",
    "handleMessage",
    "config",
    "getDelegate",
    "prepareMessage",
    "found",
    "postHookPayload",
    "unique",
    "some",
    "msg",
    "index",
    "topic",
    "id",
    "tooltip",
    "_getTooltip",
    "hasOwnProperty",
    "deletable",
    "cv",
    "core",
    "notifications",
    "Router",
    "evaluateCondition",
    "changed",
    "setItem",
    "action",
    "removedMessage",
    "removeAt",
    "getGlobalSeverity",
    "getMaxEntries",
    "_disposeMap",
    "push",
    "_list",
    "update",
    "setCounter",
    "postHandleMessage",
    "getMessageIdFromEvent",
    "ev",
    "target",
    "getTarget",
    "deleteTarget",
    "messageId",
    "getAttribute",
    "rootId",
    "getRootElementId",
    "getMessageElementId",
    "startsWith",
    "classList",
    "contains",
    "parseInt",
    "replace",
    "parentNode",
    "_onListTap",
    "result",
    "deleteMessage",
    "performAction",
    "actions",
    "Object",
    "getOwnPropertyNames",
    "type",
    "title",
    "clear",
    "force",
    "removeAll",
    "filter",
    "exclude",
    "getMessage",
    "getItem",
    "getMessages",
    "stopPropagation",
    "preventDefault",
    "toArray",
    "find",
    "remove",
    "_performAction",
    "res",
    "typeActions",
    "isArray",
    "needsConfirmation",
    "handler",
    "ActionRegistry",
    "getActionHandler",
    "handleAction",
    "deleteMessageAfterExecution",
    "destruct",
    "_disposeObjects",
    "ui",
    "MHandleMessage"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* MHandleMessage.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * MHandleMessage mixin provides a handleMessage method for most common use cases in message handling.\n * Holds a list of messages\n *\n * @author Tobias Bräutigam\n * @since 0.11.0\n */\n\nqx.Mixin.define(\"cv.ui.MHandleMessage\", {\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function() {\n    this._messages = new qx.data.Array();\n\n\n    // severities in order of importance -> more important\n    this._severities = [\"low\", \"normal\", \"high\", \"urgent\"];\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    /**\n     * Maximum allowed messages\n     */\n    maxEntries: {\n      check: \"Number\",\n      init: 50,\n      event: \"_applyMaxEntries\"\n    },\n\n    /**\n     * Current amount of messages\n     */\n    counter: {\n      check: \"Number\",\n      init: 0,\n      event: \"changedCounter\"\n    },\n\n    /**\n     * Highest severity of the messages\n     */\n    globalSeverity: {\n      check: [\"low\", \"normal\", \"high\", \"urgent\"],\n      init: \"normal\",\n      event: \"changedGlobalSeverity\"\n    },\n\n    /**\n     * ID of the root element of this message handler (HTML attribute 'id' value)\n     */\n    rootElementId: {\n      check: \"String\",\n      nullable: true\n    },\n\n    /**\n     * Pattern id the message elements IDs (suffix without is,\n     * e.g. messages get mes_1, mes_2, ... mes_ is the messageElementId)\n     */\n    messageElementId: {\n      check: \"String\",\n      nullable: true\n    },\n\n    delegate: {\n      check: \"Object\",\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    _messages: null,\n    _severities: null,\n    __idCounter: 0,\n\n    getSeverities: function() {\n      return this._severities;\n    },\n\n    _updateHighestSeverity: function() {\n      // get the highest severity\n      var severityRank = -1;\n      this._messages.forEach(function(message) {\n        if (message.severity && this._severities.indexOf(message.severity) > severityRank) {\n          severityRank = this._severities.indexOf(message.severity);\n        }\n      }, this);\n      if (severityRank >= 0) {\n        this.setGlobalSeverity(this._severities[severityRank]);\n      } else {\n        this.resetGlobalSeverity();\n      }\n    },\n\n    getSeverityColor: function(severity) {\n      switch(severity) {\n        case \"urgent\":\n          return \"#FF0000\";\n        case \"high\":\n          return \"#FF7900\";\n        default:\n          return \"#1C391C\";\n      }\n    },\n\n    // property apply\n    _applyMaxEntries: function(value) {\n      if (this._messages.getLength() > value) {\n        this._messages.splice(this._messages.getLength() - value);\n      }\n      this._messages.setMaxEntries(value);\n    },\n\n    /**\n     * Handle messages from {@link cv.core.notifications.Router}\n     * @param message {Map}\n     * @param config {Map?} optional configuration of this message for the handler\n     */\n    handleMessage: function(message, config) {\n      var delegate = this.getDelegate() || {};\n      if (delegate.prepareMessage) {\n        delegate.prepareMessage(message, config);\n      }\n      var found = null;\n      var postHookPayload = {};\n      if (message.unique) {\n        // check if message is already shown\n        this._messages.some(function(msg, index) {\n          if (message.topic === msg.topic) {\n            // replace message\n            found = msg;\n            message.id = msg.id;\n            message.tooltip = this._getTooltip(message);\n            if (!message.hasOwnProperty(\"deletable\")) {\n              message.deletable = true;\n            }\n            if (cv.core.notifications.Router.evaluateCondition(message)) {\n              var changed = msg.severity !== message.severity;\n              this._messages.setItem(index, message);\n              postHookPayload.action = \"replaced\";\n              if (changed) {\n                this._updateHighestSeverity();\n              }\n            } else{\n              var removedMessage = this._messages.removeAt(index);\n              postHookPayload.action = \"removed\";\n              postHookPayload.message = removedMessage;\n              if (removedMessage.severity === this.getGlobalSeverity()) {\n                this._updateHighestSeverity();\n              }\n            }\n            // stop search\n            return true;\n          }\n        }, this);\n      }\n      if (!found) {\n        if (cv.core.notifications.Router.evaluateCondition(message)) {\n          message.id = this.__idCounter;\n          this.__idCounter++;\n          message.tooltip = this._getTooltip(message);\n          if (!message.hasOwnProperty(\"deletable\")) {\n            message.deletable = true;\n          }\n          if (this.getMaxEntries() > 0) {\n            if (this._messages.getLength() >= this.getMaxEntries()) {\n              this._messages.splice(0, this._messages.getLength() - this.getMaxEntries() + 1).forEach(this._disposeMap);\n            }\n          }\n          postHookPayload.action = \"added\";\n          this._messages.push(message);\n          this._updateHighestSeverity();\n        }\n      } else if (this._list) {\n        // refresh list\n        this._list.update();\n      }\n      this.setCounter(this._messages.getLength());\n      if (delegate.postHandleMessage) {\n        delegate.postHandleMessage(message, config, postHookPayload);\n      }\n    },\n\n    /**\n     * Finds the message the tap event has been triggered on an returns\n     * an array [messageId, action], where action can be one of \"delete\", \"action\".\n     *\n     * @param ev {Event}\n     * @return {Array} [messageId, action]\n     */\n    getMessageIdFromEvent: function(ev) {\n      // lets find the real target\n      var target = ev.getTarget();\n      var deleteTarget = null;\n      var messageId = -1;\n      var id = target.getAttribute(\"id\");\n      var rootId = this.getRootElementId();\n      var messageElementId = this.getMessageElementId();\n      while (!id || !id.startsWith(rootId)) {\n        if (target.classList.contains(\"delete\")) {\n          deleteTarget = target;\n        }\n        if (id && id.startsWith(messageElementId)) {\n          // found the message container, get message id and stop\n          messageId = parseInt(id.replace(messageElementId, \"\"));\n          break;\n        }\n        target = target.parentNode;\n        if (!target) {\n          break;\n        }\n        id = target.getAttribute(\"id\");\n      }\n      return [messageId, deleteTarget ? \"delete\" : \"action\"];\n    },\n\n    _onListTap: function(ev) {\n      var result = this.getMessageIdFromEvent(ev);\n      if (result[0] >= 0) {\n        if (result[1] === \"delete\") {\n          this.deleteMessage(result[0], ev);\n        } else {\n          this.performAction(result[0], ev);\n        }\n      }\n    },\n\n    _getTooltip: function(message) {\n      var tooltip = message.severity;\n      if (message.actions) {\n        Object.getOwnPropertyNames(message.actions).forEach(function(type) {\n          if (message.actions[type].title) {\n            tooltip = message.actions[type].title;\n          }\n        });\n      }\n      return tooltip;\n    },\n\n    /**\n     * Delete all messages.\n     *\n     * @param force {Boolean} if false: only delete \"deletable\" messages, if true: delete all messages\n     */\n    clear: function(force) {\n      if (force) {\n        this._messages.removeAll();\n        this.__idCounter = 0;\n      } else {\n        // collect all deletable messages\n        var deletable = this._messages.filter(function (message) {\n          return message.deletable === true;\n        }, this);\n        this._messages.exclude(deletable);\n      }\n      this._updateHighestSeverity();\n    },\n\n    getMessage: function(index) {\n      return this._messages.getItem(index);\n    },\n\n    getMessages: function() {\n      return this._messages;\n    },\n\n    /**\n     * Delete a message by index\n     * @param ev {Event}\n     * @param index {Number}\n     */\n    deleteMessage: function(index, ev) {\n      if (ev) {\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n      var message = this._messages.toArray().find(function (msg) {\n        return msg.id === index;\n      });\n      if (message && message.deletable === true) {\n        this._messages.remove(message);\n        if (message.severity === this.getGlobalSeverity()) {\n          this._updateHighestSeverity();\n        }\n        return true;\n      }\n      return false;\n    },\n\n    performAction: function(messageId, ev) {\n      var message = this.getMessage(messageId);\n      if (this._performAction && message) {\n        var res = this._performAction(message);\n        if (res === true) {\n          // skip\n          return;\n        }\n      }\n      if (!message || !message.actions) {\n        return;\n      }\n      Object.getOwnPropertyNames(message.actions).forEach(function(type) {\n        var typeActions = Array.isArray(message.actions[type]) ? message.actions[type] : [message.actions[type]];\n        typeActions.forEach(function(action) {\n          if (!action.needsConfirmation) {\n            var handler = cv.core.notifications.ActionRegistry.getActionHandler(type, action);\n            if (handler) {\n              handler.handleAction(ev);\n              if (action.deleteMessageAfterExecution) {\n                this.deleteMessage(messageId);\n              }\n            }\n          }\n        }, this);\n      }, this);\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this._disposeObjects(\"_messages\");\n  }\n});"
  ]
}