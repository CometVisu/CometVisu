{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Slide.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "structure",
    "AbstractWidget",
    "include",
    "common",
    "Operate",
    "Update",
    "construct",
    "props",
    "__animator",
    "util",
    "LimitedRateUpdateAnimator",
    "__updateHandlePosition",
    "__pageSizeListener",
    "layout",
    "ResizeHandler",
    "states",
    "addListener",
    "__invalidateScreensize",
    "destruct",
    "removeListenerById",
    "__button",
    "properties",
    "min",
    "check",
    "init",
    "max",
    "step",
    "showInvalidValues",
    "sendOnFinish",
    "members",
    "__lastBusValue",
    "undefined",
    "__range",
    "__actorWidth",
    "__buttonWidth",
    "__inDrag",
    "__coordMin",
    "_getInnerDomString",
    "placeholder",
    "getFormat",
    "_onDomReady",
    "__throttled",
    "Function",
    "throttle",
    "__onChangeValue",
    "trailing",
    "getActor",
    "addEventListener",
    "_update",
    "address",
    "data",
    "transform",
    "getAddress",
    "value",
    "Transform",
    "decode",
    "__setSliderTo",
    "isVisible",
    "instant",
    "relaxDisplay",
    "getMin",
    "getMax",
    "getStep",
    "Math",
    "abs",
    "realValue",
    "getShowInvalidValues",
    "stepValue",
    "round",
    "maxSwitchValue",
    "floor",
    "ratio",
    "valueRatio",
    "delta",
    "stepCount",
    "factor",
    "sign",
    "setBasicValue",
    "displayValue",
    "applyMapping",
    "applyFormat",
    "setValue",
    "applyStyling",
    "button",
    "getDomElement",
    "querySelector",
    "defaultValue2DOM",
    "e",
    "innerHTML",
    "setTo",
    "element",
    "_disposeObjects",
    "actor",
    "actorStyles",
    "window",
    "getComputedStyle",
    "parseFloat",
    "getPropertyValue",
    "style",
    "marginLeft",
    "borderRadius",
    "length",
    "width",
    "getBasicValue",
    "handleEvent",
    "event",
    "newRatio",
    "type",
    "document",
    "boundingRect",
    "currentTarget",
    "getBoundingClientRect",
    "computedStyle",
    "left",
    "paddingLeft",
    "clientX",
    "removeEventListener",
    "newValue",
    "getSendOnFinish",
    "call",
    "sendToBackend",
    "defer",
    "statics",
    "WidgetFactory",
    "registerClass",
    "pure",
    "Slide"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* Slide.js \n * \n * copyright (c) 2010-2020, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a horizontal slider to the visu. This can be used, for example, to dim a light or change temperature values.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Slide', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.base(arguments, props);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n    this.__pageSizeListener = cv.ui.layout.ResizeHandler.states.addListener('changePageSizeInvalid',()=>{this.__invalidateScreensize();});\n  },\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    cv.ui.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    min: {\n      check: \"Number\",\n      init: 0\n    },\n    max: {\n      check: \"Number\",\n      init: 100\n    },\n    step: {\n      check: \"Number\",\n      init: 0.5\n    },\n    showInvalidValues: {\n      check: \"Boolean\",\n      init: false\n    },\n    sendOnFinish: {\n      check: \"Boolean\",\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __lastBusValue: {},\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined,  // cache for DOM element\n    __actorWidth: undefined,\n    __buttonWidth: undefined,\n    __pageSizeListener: undefined,\n    __inDrag: false,       // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n\n    // overridden\n    _getInnerDomString: function () {\n      var placeholder = this.getFormat() === '' ? '' : '-';\n      return `\n        <div class=\"actor ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n          <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">`+placeholder+`</button>\n          <div class=\"ui-slider-range value\" style=\"margin-left: 0px; width: 0px;\"></div>\n        </div>\n      `;\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, 250, {trailing: true}, this);\n\n      this.getActor().addEventListener('pointerdown', this);\n    },\n\n    _update: function (address, data) {\n      let transform = this.getAddress()[address].transform;\n      if (this.__inDrag || this.__lastBusValue[transform] === data) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      this.__lastBusValue = {}; // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue[transform] = data;\n\n      let value = cv.Transform.decode(transform, data);\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, !this.isVisible());\n    },\n\n    /**\n     * The the internal slider state and its handle and displayed value\n     * @param value {Number} The new value\n     * @param instant {Boolean} Animate or instant change\n     * @param relaxDisplay {Boolean} Let the handle move to an unstable position\n     *   to give visual feedback that something does happen during interaction\n     * @private\n     */\n    __setSliderTo: function(value, instant, relaxDisplay = false) {\n      let min = this.getMin();\n      let max = this.getMax();\n      let step = this.getStep();\n      if (step === 0 || Math.abs((max-min)/step) > 10000) {\n        // limit too small step size - it's not necessary to have more than\n        // 10000 steps for the range as even the biggest screen doesn't have\n        // that many pixels\n        step = (max-min)/10000;\n      }\n      let realValue = Math.min(Math.max(value, min), max);\n\n      if (!this.getShowInvalidValues()) {\n        // map to closest allowed value\n        let stepValue = Math.round((realValue - min) / step) * step + min;\n        // use max when the value is greater than the middle point between the\n        // biggest allowed step and the maximum\n        let maxSwitchValue = (Math.floor((max - min) / step) * step + min + max) / 2;\n        realValue = realValue < maxSwitchValue ? stepValue : max;\n      }\n\n      let ratio = max===min ? 0 : (realValue-min)/(max-min);\n\n      if (relaxDisplay) {\n        let valueRatio = max===min ? 0 : (Math.min(Math.max(value, min), max)-min)/(max-min);\n        let delta = ratio - valueRatio;\n        let stepCount = (max - min) / step;\n        let factor = (2*stepCount) ** 3;\n        ratio -= Math.min(factor * delta**4, Math.abs(delta)) * Math.sign(delta);\n      }\n\n      // store it to be able to suppress sending of unchanged data\n      this.setBasicValue(realValue);\n\n      if (this.getFormat() !== '') {\n        // #2: map it to a value the user wants to see\n        let displayValue = this.applyMapping(realValue);\n\n        // #3: format it in a way the user understands the value\n        displayValue = this.applyFormat(undefined, displayValue);\n        this.setValue(displayValue);\n\n        this.applyStyling(realValue);\n\n        let button = this.getDomElement().querySelector('button');\n        this.defaultValue2DOM(displayValue, (e) => {button.innerHTML = e;});\n      }\n\n      this.__animator.setTo(ratio, instant);\n    },\n\n    __updateHandlePosition: function (ratio) {\n      if (this.__button === undefined) {\n        let element = this.getDomElement();\n        this.__button = element.querySelector('button');\n        this.__range = element.querySelector('.ui-slider-range');\n      }\n      if (this.__button === null) {\n        // most likely reason: the widget / DOM tree was deleted (e.g. due to\n        // browsing to a new page or during unit tests)\n        this._disposeObjects('__animator');\n        return;\n      }\n      if (this.__actorWidth === undefined || this.__buttonWidth === undefined) {\n        let\n          actor = this.getDomElement().querySelector('.actor'),\n          actorStyles = window.getComputedStyle(actor);\n        this.__actorWidth = parseFloat(actorStyles.getPropertyValue('width'));\n        this.__buttonWidth = parseFloat(window.getComputedStyle(this.__button).getPropertyValue('width'));\n        this.__range.style.marginLeft = '-' + actorStyles.getPropertyValue('padding-left');\n        this.__range.style.borderRadius = actorStyles.getPropertyValue('border-radius');\n      }\n      let length = ratio * this.__actorWidth;\n      this.__button.style.transform = 'translate3d(' + (length-this.__buttonWidth/2) + 'px, 0px, 0px)';\n      this.__range.style.width = length + 'px';\n    },\n\n    __invalidateScreensize: function () {\n      let min = this.getMin();\n      let max = this.getMax();\n      this.__actorWidth = undefined; // invalidate cached values\n      this.__animator.setTo(max===min ? 0 : (this.getBasicValue()-min)/(max-min));\n    },\n\n    handleEvent: function (event) {\n      let newRatio = 0;\n\n      switch(event.type) {\n        case 'pointerdown':\n          this.__inDrag = true;\n          document.addEventListener('pointermove', this);\n          document.addEventListener('pointerup', this);\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMin = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n\n        case 'pointermove':\n          if (!this.__inDrag) {\n            return;\n          }\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n\n        case 'pointerup':\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n      }\n\n      newRatio = Math.min(Math.max(newRatio, 0.0), 1.0); // limit to 0..1\n      let newValue = this.getMin() + newRatio * (this.getMax() - this.getMin());\n      this.__setSliderTo(newValue, this.__inDrag, this.__inDrag);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call(newValue);\n      }\n    },\n\n    __onChangeValue: function(value) {\n      this.__lastBusValue = this.sendToBackend(value, false, this.__lastBusValue );\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass(\"slide\", statics);\n  }\n});\n"
  ]
}