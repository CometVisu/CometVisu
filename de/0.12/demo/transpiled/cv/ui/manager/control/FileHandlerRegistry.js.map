{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/ui/manager/control/FileHandlerRegistry.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "type",
    "construct",
    "__registry",
    "__defaults",
    "registerFileHandler",
    "RegExp",
    "cv",
    "ui",
    "manager",
    "viewer",
    "Image",
    "SUPPORTED_FILES",
    "join",
    "Config",
    "Icons",
    "Folder",
    "Start",
    "editor",
    "Source",
    "Xml",
    "preview",
    "noTemporaryFiles",
    "noReadOnlyFiles",
    "model",
    "CompareFiles",
    "Diff",
    "Preferences",
    "getInstance",
    "addListener",
    "_onChangesDefaultConfigEditor",
    "members",
    "selector",
    "clazz",
    "options",
    "config",
    "assign",
    "Clazz",
    "instance",
    "isClass",
    "instanceOf",
    "selectorId",
    "classname",
    "priority",
    "lang",
    "Type",
    "isRegExp",
    "regex",
    "toString",
    "isFunction",
    "name",
    "isString",
    "includes",
    "fullPath",
    "fileName",
    "getFileHandler",
    "file",
    "handlers",
    "defaultHandler",
    "keys",
    "some",
    "key",
    "test",
    "getFullPath",
    "isTemporary",
    "isWriteable",
    "getFileHandlerById",
    "forEach",
    "__canHandle",
    "push",
    "length",
    "isFake",
    "getDisplayName",
    "split",
    "sort",
    "a",
    "b",
    "handlerId",
    "hasFileHandler",
    "setDefault",
    "getDefaultConfigEditor",
    "DEFAULT_FOR",
    "getName",
    "toLowerCase",
    "getAllFileHandlers",
    "filter",
    "map",
    "destruct",
    "dispose",
    "removeListener",
    "control",
    "FileHandlerRegistry"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/**\n * Central registry for all available file editors/viewers.\n */\nqx.Class.define('cv.ui.manager.control.FileHandlerRegistry', {\n  extend: qx.core.Object,\n  type: 'singleton',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this.__registry = {};\n    this.__defaults = [];\n\n    // register viewers\n    this.registerFileHandler(new RegExp('\\.(' + cv.ui.manager.viewer.Image.SUPPORTED_FILES.join('|') + ')$', 'i'), cv.ui.manager.viewer.Image, {type: 'view'});\n    this.registerFileHandler(cv.ui.manager.viewer.Config.SUPPORTED_FILES, cv.ui.manager.viewer.Config, {type: 'view'});\n    this.registerFileHandler(cv.ui.manager.viewer.Icons.SUPPORTED_FILES, cv.ui.manager.viewer.Icons, {type: 'view'});\n    this.registerFileHandler(cv.ui.manager.viewer.Folder.SUPPORTED_FILES, cv.ui.manager.viewer.Folder, {type: 'view'});\n    this.registerFileHandler(null, cv.ui.manager.Start, {type: 'view'});\n\n    // register the basic editors\n    this.registerFileHandler(cv.ui.manager.editor.Source.SUPPORTED_FILES, cv.ui.manager.editor.Source, {type: 'edit'});\n    this.registerFileHandler(cv.ui.manager.editor.Xml.SUPPORTED_FILES, cv.ui.manager.editor.Xml, {\n      preview: false,\n      type: 'edit',\n      noTemporaryFiles: true, // the old XML-Editor cannot handle temporary files,\n      noReadOnlyFiles: true // readonly nit supported\n    });\n    this.registerFileHandler(cv.ui.manager.model.CompareFiles, cv.ui.manager.editor.Diff, {type: 'view'});\n\n    this.registerFileHandler(\"hidden.php\", cv.ui.manager.editor.Config, {type: 'edit'});\n\n    cv.ui.manager.model.Preferences.getInstance().addListener('changeDefaultConfigEditor', this._onChangesDefaultConfigEditor, this);\n    this._onChangesDefaultConfigEditor();\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __registry: null,\n    __defaults: null,\n\n    /**\n     * Registers an editor for a specific file, that is identified by the given selector.\n     * @param selector {String|RegExp|Class|Function|null} filename-/path or regular expression. If null this is a special handler that must be loaded manually (like cv.ui.manager.Start)\n     * @param clazz {qx.ui.core.Widget} widget class that handles those type of files\n     * @param options {Map?} additional options to store in the registry\n     */\n    registerFileHandler: function (selector, clazz, options) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertTrue(qx.Interface.classImplements(clazz, cv.ui.manager.editor.IEditor));\n      }\n      var config = Object.assign({\n        Clazz: clazz,\n        instance: null\n      }, options || {});\n      if (qx.Class.isClass(selector)) {\n        config.instanceOf = selector;\n        config.selectorId = 'instanceOf:' + selector.classname;\n        // highest priority\n        config.priority = 0;\n      } else if (qx.lang.Type.isRegExp(selector)) {\n        config.regex = selector;\n        config.selectorId = 'regex:' + selector.toString();\n        config.priority = 4;\n      } else if (qx.lang.Type.isFunction(selector)) {\n        config.selectorId = 'function:' + selector.name;\n        config.priority = 3;\n        config.function = selector;\n      } else if (qx.lang.Type.isString(selector)) {\n        // simple file matcher\n        if (selector.includes('/')) {\n          config.fullPath = selector;\n          config.selectorId = 'fullPath:' + selector;\n          config.priority = 1;\n        } else {\n          config.fileName = selector;\n          config.selectorId = 'fileName:' + selector;\n          config.priority = 2;\n        }\n      } else {\n        config.selectorId = 'none';\n        config.priority = 10;\n      }\n      this.__registry[clazz.classname] = config;\n    },\n\n    getFileHandler: function (file, type) {\n      var handlers = [];\n      if (!(file instanceof cv.ui.manager.model.CompareFiles)) {\n        // check if there is a default first\n        var defaultHandler;\n        Object.keys(this.__defaults).some(function (key) {\n          if (this.__defaults[key].regex.test(file.getFullPath()) &&\n            (!file.isTemporary() || !this.__defaults[key].noTemporaryFiles) &&\n            (file.isWriteable() || !this.__defaults[key].noReadOnlyFiles)\n          ) {\n            if (type) {\n              var config = this.getFileHandlerById(this.__defaults[key].clazz.classname);\n              if (config.type === type) {\n                defaultHandler = config;\n              }\n            } else {\n              defaultHandler = this.getFileHandlerById(this.__defaults[key].clazz.classname);\n            }\n            return !!defaultHandler;\n          }\n        }, this);\n        if (defaultHandler) {\n          return defaultHandler;\n        }\n      }\n\n      Object.keys(this.__registry).forEach(function (classname) {\n        var config = this.__registry[classname];\n        if (this.__canHandle(config, file) && (!type || config.type === type)) {\n          handlers.push(config);\n        }\n      }, this);\n      if (handlers.length === 0) {\n        if (!file.isFake() && file.getDisplayName().split('.').length === 1) {\n          // file without file ending => use the source code editor\n          return this.getFileHandlerById('cv.ui.manager.editor.Source');\n        }\n        // no editors found\n        return null;\n      } else if (handlers.length === 1) {\n        return handlers[0];\n      } else {\n        // sort by selector priority (instance, fullpath, filename, regex)\n        handlers.sort(function (a, b) {\n          return a.priority - b.priority;\n        });\n        // no default handler, just take the first one\n        return handlers[0];\n      }\n    },\n\n    getFileHandlerById: function (handlerId) {\n      return this.__registry[handlerId];\n    },\n\n    hasFileHandler: function (file, type) {\n      return Object.keys(this.__registry).some(function (classname) {\n        var config = this.__registry[classname];\n        return this.__canHandle(config, file) && (!type || config.type === type);\n      }, this);\n    },\n\n    /**\n     * Mark the handler with the given classname as default for the selector-id and all others with the same selector id not,\n     * @param selector {RegExp}\n     * @param clazz {qx.Class}\n     * @param noTemporaryFiles {Boolean} flag to prevent this default editor from being used to open temporary files.\n     * @param noReadOnlyFiles {Boolean} fleag to prevent this default editor from being used to open file that are not writeable\n     */\n    setDefault: function (selector, clazz, noTemporaryFiles, noReadOnlyFiles) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertRegExp(selector);\n        qx.core.Assert.assertTrue(qx.Class.isClass(clazz));\n      }\n      this.__defaults[selector.toString()] = {\n        regex: selector,\n        clazz: clazz,\n        noTemporaryFiles: noTemporaryFiles,\n        noReadOnlyFiles: noReadOnlyFiles\n      };\n    },\n\n    _onChangesDefaultConfigEditor: function () {\n      switch (cv.ui.manager.model.Preferences.getInstance().getDefaultConfigEditor()) {\n        case 'source':\n          this.setDefault(cv.ui.manager.editor.Source.DEFAULT_FOR, cv.ui.manager.editor.Source);\n          break;\n\n        case 'xml':\n          this.setDefault(cv.ui.manager.editor.Xml.SUPPORTED_FILES, cv.ui.manager.editor.Xml, true, true);\n          break;\n      }\n    },\n\n    __canHandle: function(config, file) {\n      if (config.noTemporaryFiles === true && file.isTemporary()) {\n        return false;\n      } else if (config.noReadOnlyFiles === true && !file.isWriteable()) {\n          return false;\n      } else if (config.fileName && file.getName() === config.fileName) {\n        return true;\n      } else if (config.fullPath && file.getFullPath() === config.fullPath) {\n        return true;\n      } else if (config.regex && config.regex.test(file.getFullPath().toLowerCase())) {\n        return true;\n      } else if (config.instanceOf && file instanceof config.instanceOf) {\n        return true;\n      } else if (config.function && config.function(file)) {\n        return true;\n      }\n      return false;\n    },\n\n    getAllFileHandlers: function (file, type) {\n      if (qx.core.Environment.get('qx.debug')) {\n        qx.core.Assert.assertTrue(file instanceof cv.ui.manager.model.FileItem || file instanceof cv.ui.manager.model.CompareFiles);\n      }\n      return  Object.keys(this.__registry).filter(function (key) {\n        return this.__canHandle(this.__registry[key], file) && (!type || this.__registry[key].type === type);\n      }, this).map(function (key) {\n        return this.__registry[key];\n      }, this);\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    // cleanup handler instances\n    Object.keys(this.__registry).forEach(function (regex) {\n      if (this.__registry[regex].instance) {\n        this.__registry[regex].instance.dispose();\n        this.__registry[regex].instance = null;\n      }\n    }, this);\n\n    cv.ui.manager.model.Preferences.getInstance().removeListener('changeDefaultConfigEditor', this._onChangesDefaultConfigEditor, this);\n  }\n});\n"
  ]
}