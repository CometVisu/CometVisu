{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/source/class/cv/ui/manager/editor/Source.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "cv",
    "ui",
    "manager",
    "editor",
    "AbstractEditor",
    "construct",
    "_handledActions",
    "_basePath",
    "window",
    "location",
    "origin",
    "pathname",
    "util",
    "LibraryManager",
    "getInstance",
    "get",
    "getContentElement",
    "setAttribute",
    "set",
    "droppable",
    "focusable",
    "addListener",
    "ev",
    "preventDefault",
    "dataTransfer",
    "effectAllowed",
    "dropEffect",
    "core",
    "FocusHandler",
    "setUseTabNavigation",
    "_draw",
    "_initWorker",
    "_currentDecorations",
    "statics",
    "TITLE",
    "locale",
    "Manager",
    "tr",
    "COUNTER",
    "SUPPORTED_FILES",
    "ICON",
    "theme",
    "dark",
    "Images",
    "getIcon",
    "load",
    "callback",
    "context",
    "version",
    "documentationMappingPrefix",
    "sourcePath",
    "Uri",
    "getAbsolute",
    "loader",
    "DynamicScriptLoader",
    "require",
    "config",
    "paths",
    "availableLanguages",
    "getLanguage",
    "noCacheSuffix",
    "Math",
    "random",
    "schema",
    "qxLib",
    "__schema",
    "apply",
    "monaco",
    "languages",
    "typescript",
    "javascriptDefaults",
    "addExtraLib",
    "parsedSchema",
    "Schema",
    "completionProvider",
    "completion",
    "Config",
    "cvCompletionProvider",
    "CometVisu",
    "registerCompletionItemProvider",
    "getProvider",
    "bind",
    "log",
    "Logger",
    "error",
    "getData",
    "start",
    "members",
    "_editor",
    "_workerWrapper",
    "Worker",
    "setEditor",
    "_getDefaultModelOptions",
    "tabSize",
    "indentSize",
    "insertSpaces",
    "Source",
    "domElement",
    "getDomElement",
    "addListenerOnce",
    "create",
    "suggestOnTriggerCharacters",
    "folding",
    "autoIndent",
    "automaticLayout",
    "dragAndDrop",
    "formatOnPaste",
    "formatOnType",
    "minimap",
    "enabled",
    "getFile",
    "_loadFile",
    "onDidChangeModelContent",
    "_onContentChanged",
    "handleAction",
    "actionName",
    "canHandleAction",
    "monacoAction",
    "getAction",
    "run",
    "file",
    "old",
    "close",
    "getType",
    "isSupported",
    "_applyContent",
    "value",
    "model",
    "getModel",
    "open",
    "newModel",
    "getUri",
    "xml",
    "Document",
    "isXmlDocument",
    "documentElement",
    "outerHTML",
    "createModel",
    "_getLanguage",
    "updateOptions",
    "setModel",
    "setValue",
    "readOnly",
    "isWriteable",
    "getCurrentContent",
    "getValue",
    "contentChanged",
    "parts",
    "getName",
    "split",
    "fileType",
    "length",
    "pop",
    "typeExt",
    "getLanguages",
    "some",
    "lang",
    "id",
    "extensions",
    "indexOf",
    "showErrors",
    "path",
    "errorList",
    "markers",
    "currentMessage",
    "forEach",
    "test",
    "push",
    "severity",
    "MarkerSeverity",
    "Error",
    "startLineNumber",
    "line",
    "startColumn",
    "endLineNumber",
    "endColumn",
    "getLineContent",
    "message",
    "shift",
    "parseInt",
    "match",
    "exec",
    "isNaN",
    "slice",
    "join",
    "getFullPath",
    "setModelMarkers",
    "showDecorations",
    "decorators",
    "deltaDecorations",
    "type",
    "found",
    "destruct",
    "dispose"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/**\n * Monaco Texteditor integration\n */\nqx.Class.define('cv.ui.manager.editor.Source', {\n  extend: cv.ui.manager.editor.AbstractEditor,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this._handledActions = ['save', 'cut', 'copy', 'paste', 'undo', 'redo'];\n    this._basePath = window.location.origin + window.location.pathname + qx.util.LibraryManager.getInstance().get(\"cv\", \"resourceUri\") + '/config/';\n    this.getContentElement().setAttribute('contentEditable', 'true');\n    this.set({\n      droppable: false,\n      focusable: true\n    });\n    this.addListener('dragover', function (ev) {\n      ev.preventDefault();\n      ev.dataTransfer.effectAllowed = \"none\";\n      ev.dataTransfer.dropEffect = \"none\";\n    });\n    this.addListener('drop', function (ev) {\n      ev.preventDefault();\n    });\n    this.addListener('appear', function () {\n      qx.ui.core.FocusHandler.getInstance().setUseTabNavigation(false);\n    });\n    this.addListener('disappear', function () {\n      qx.ui.core.FocusHandler.getInstance().setUseTabNavigation(true);\n    });\n    this._draw();\n    this._initWorker();\n    this._currentDecorations = [];\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    TITLE: qx.locale.Manager.tr('Texteditor'),\n    COUNTER: 0,\n    SUPPORTED_FILES: ['xml', 'php', 'css', 'js', 'svg', 'json', 'md', 'yaml', 'conf', 'ts', 'rst', 'py', 'txt'],\n    ICON: cv.theme.dark.Images.getIcon('text', 18),\n\n    load: function (callback, context) {\n      var version = qx.core.Environment.get('qx.debug') ? 'dev' : 'min';\n      window.documentationMappingPrefix = \"../source/editor/\"; // jshint ignore:line\n      var sourcePath = qx.util.Uri.getAbsolute(qx.util.LibraryManager.getInstance().get('cv', 'resourceUri')+ '/..');\n      var loader = new qx.util.DynamicScriptLoader([\n        sourcePath + 'editor/dependencies/jquery.min.js',\n        sourcePath + 'editor/dependencies/jquery.xpath.min.js',\n        sourcePath + 'editor/lib/Messages.js',\n        sourcePath + 'editor/lib/Schema.js',\n        sourcePath + '../node_modules/monaco-editor/' + version + '/vs/loader.js',\n        'manager/xml.js'\n      ]);\n      loader.addListener('ready', function () {\n        window.require.config({\n          paths: {\n            'vs': sourcePath + '../node_modules/monaco-editor/' + version + '/vs'\n          }\n        });\n        window.require.config({\n          'vs/nls' : {\n            availableLanguages: {\n              '*': qx.locale.Manager.getInstance().getLanguage() !== 'en' ? qx.locale.Manager.getInstance().getLanguage() : ''\n            }\n          }\n        });\n        var noCacheSuffix = '?' + Math.random();\n        window.require([\n          'xml!./resource/visu_config.xsd' + noCacheSuffix,\n          'xml!*./resource/manager/completion-libs/qooxdoo.d.ts', // the xml loader can load any file by adding * before the path,\n          'vs/editor/editor.main'\n        ], function (schema, qxLib) {\n          this.__schema = schema;\n          callback.apply(context);\n          window.monaco.languages.typescript.javascriptDefaults.addExtraLib(qxLib, 'qooxdoo.d.ts');\n          var parsedSchema = new window.Schema(\"visu_config.xsd\", schema); // jshint ignore:line\n          var completionProvider = new cv.ui.manager.editor.completion.Config(parsedSchema);\n          var cvCompletionProvider = new cv.ui.manager.editor.completion.CometVisu();\n          window.monaco.languages.registerCompletionItemProvider('xml', completionProvider.getProvider());\n          window.monaco.languages.registerCompletionItemProvider('javascript', cvCompletionProvider.getProvider());\n\n        }.bind(this));\n      }, this);\n      loader.addListener('failed', function (ev) {\n        qx.log.Logger.error(this, ev.getData());\n      }, this);\n      loader.start();\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __schema: null,\n    _editor: null,\n    _basePath: null,\n    _workerWrapper: null,\n    _currentDecorations: null,\n\n    _initWorker: function () {\n      this._workerWrapper = cv.ui.manager.editor.Worker.getInstance();\n      this._workerWrapper.setEditor(this);\n    },\n\n    _getDefaultModelOptions: function () {\n      return {\n        tabSize: 2,\n        indentSize: 2,\n        insertSpaces: true\n      };\n    },\n\n    _draw: function () {\n      if (!window.monaco) {\n        cv.ui.manager.editor.Source.load(this._draw, this);\n      } else {\n        var domElement = this.getContentElement().getDomElement();\n        if (!domElement) {\n          this.addListenerOnce('appear', this._draw, this);\n        } else {\n          this._editor = window.monaco.editor.create(domElement, {\n            suggestOnTriggerCharacters: true,\n            folding: true,\n            autoIndent: true,\n            automaticLayout: true,\n            dragAndDrop: true,\n            formatOnPaste: true,\n            formatOnType: true,\n            minimap: {\n              enabled: true\n            },\n            theme: 'vs-dark'\n          });\n          if (this.getFile()) {\n            this._loadFile(this.getFile());\n          }\n          this._editor.onDidChangeModelContent(this._onContentChanged.bind(this));\n        }\n      }\n    },\n\n    handleAction: function (actionName) {\n      if (this.canHandleAction(actionName)) {\n        var monacoAction;\n        switch (actionName) {\n          case 'cut':\n            monacoAction = this._editor.getAction('editor.action.clipboardCutAction');\n            break;\n          case 'copy':\n            monacoAction = this._editor.getAction('editor.action.clipboardCopyAction');\n            break;\n\n          default:\n            this.base(arguments, actionName);\n            break;\n        }\n        if (monacoAction) {\n          monacoAction.run();\n        }\n      }\n    },\n\n    _loadFile: function (file, old) {\n      if (old && this._workerWrapper) {\n        this._workerWrapper.close(old);\n      }\n      if (this._editor) {\n        if (file && file.getType() === 'file' && this.isSupported(file)) {\n          this.base(arguments, file, old);\n        } else {\n          this.base(arguments, null, old);\n        }\n      }\n    },\n\n    _applyContent: function(value) {\n      var file = this.getFile();\n      if (!file) {\n        return;\n      }\n      var model = this._editor.getModel();\n      if (this._workerWrapper) {\n        this._workerWrapper.open(file, value);\n      }\n      var newModel = window.monaco.editor.getModel(file.getUri());\n      if (!newModel) {\n        // create new model\n        if (qx.xml.Document.isXmlDocument(value)) {\n          value = value.documentElement.outerHTML;\n        }\n        newModel = window.monaco.editor.createModel(value, this._getLanguage(file), file.getUri());\n      }\n\n      if (model !== newModel) {\n        newModel.updateOptions(this._getDefaultModelOptions());\n        this._editor.setModel(newModel);\n      } else {\n        this._editor.setValue(value);\n      }\n      this._editor.updateOptions({ readOnly: !file.isWriteable() });\n    },\n\n    getCurrentContent: function () {\n      return this._editor.getValue();\n    },\n\n    _onContentChanged: function () {\n      if (this._workerWrapper) {\n        this._workerWrapper.contentChanged(this.getFile(), this._editor.getValue());\n      }\n    },\n\n    isSupported: function (file) {\n      var parts = file.getName().split('.')\n      var fileType = parts.length > 1 ? parts.pop() : 'txt';\n      var typeExt = '.' + fileType;\n      return monaco.languages.getLanguages().some(function (lang) {\n        return lang.id === fileType || lang.extensions.indexOf(typeExt) >= 0;\n      });\n    },\n\n    showErrors: function (path, errorList) {\n      var markers = [];\n      var model = this._editor.getModel();\n      if (!model) {\n        return;\n      }\n      // \"file_0.xml:286: element layout: Schemas validity error : Element 'layout': This element is not expected.\"\n      if (errorList) {\n//            console.error(errorList);\n        var currentMessage = null;\n        // collect complete error messages\n        errorList.forEach(function (error) {\n          if (/.*\\.xml:[\\d]+:.+/.test(error)) {\n            if (currentMessage !== null) {\n              markers.push({\n                severity: window.monaco.MarkerSeverity.Error,\n                startLineNumber: currentMessage.line,\n                startColumn: 1,\n                endLineNumber: currentMessage.line,\n                endColumn: model.getLineContent(currentMessage.line).length,\n                message: currentMessage.message\n              });\n            }\n            // add marker for completed message\n            var parts = error.split(\":\");\n            var file = parts.shift();\n            var line = parseInt(parts.shift());\n\n            // in the last part there might be a more precise line number for the error\n            var match = /.+line ([\\d]+) -+/.exec(parts[parts.length-1]);\n            if (match) {\n              line = parseInt(match[1]);\n            }\n            if (isNaN(line)) {\n              return;\n            }\n            // new error line\n            currentMessage = {\n              line: line,\n              message: parts.slice(-2).join(\":\"),\n              file: file\n            };\n          } else {\n            currentMessage.message += \"\\n\"+error;\n          }\n        });\n        if (currentMessage !== null) {\n          // show last error too\n          markers.push({\n            severity: window.monaco.MarkerSeverity.Error,\n            startLineNumber: currentMessage.line,\n            startColumn: 1,\n            endLineNumber: currentMessage.line,\n            endColumn: model.getLineContent(currentMessage.line).length,\n            message: currentMessage.message\n          });\n        }\n      }\n      if (this.getFile().getFullPath() === path) {\n        window.monaco.editor.setModelMarkers(model, '', markers);\n      } else {\n        // TODO: save errors for later\n      }\n    },\n\n    showDecorations: function (path, decorators) {\n      if (this.getFile().getFullPath() === path) {\n        this._editor.deltaDecorations(this._currentDecorations[path], decorators);\n      }\n      this._currentDecorations[path] = decorators;\n    },\n\n    _getLanguage: function (file) {\n      var type = file.getName().split('.').pop();\n      switch (type) {\n        case 'svg':\n          return 'xml';\n        case 'js':\n          return 'javascript';\n        case 'md':\n          return 'markdown';\n        default:\n          if (!type) {\n            return 'txt';\n          }\n          // check if monaco knows this ending, otherwise fallback to plaintext\n          var typeExt = '.' + type;\n          var found = monaco.languages.getLanguages().some(function (lang) {\n            return lang.id === type || lang.extensions.indexOf(typeExt) >= 0;\n          });\n          if (!found) {\n            type = 'txt';\n          }\n          return type\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._workerWrapper = null;\n    if (this._editor) {\n      this._editor.dispose();\n      this._editor = null;\n    }\n    qx.ui.core.FocusHandler.getInstance().setUseTabNavigation(true);\n  }\n});\n"
  ]
}