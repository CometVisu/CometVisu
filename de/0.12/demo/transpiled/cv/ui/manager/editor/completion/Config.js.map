{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/manager/editor/completion/Config.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "schemaNode",
    "__elementCache",
    "_schemaNode",
    "_dataProvider",
    "cv",
    "ui",
    "manager",
    "editor",
    "data",
    "Provider",
    "getInstance",
    "members",
    "__metaElementCache",
    "getLastOpenedTag",
    "text",
    "tags",
    "match",
    "undefined",
    "closingTags",
    "i",
    "length",
    "indexOf",
    "push",
    "substring",
    "tagPosition",
    "lastIndexOf",
    "tag",
    "closingBracketIdx",
    "openedTag",
    "contentSearch",
    "currentAttribute",
    "attrMatch",
    "exec",
    "filteredElementSearch",
    "test",
    "tagName",
    "isAttributeSearch",
    "isContentSearch",
    "splice",
    "findElements",
    "parent",
    "elementName",
    "maxDepth",
    "currentDepth",
    "inMeta",
    "cache",
    "allowedRootElements",
    "pages",
    "allowedElements",
    "getAllowedElements",
    "element",
    "result",
    "isItemAvailable",
    "itemName",
    "maxOccurs",
    "items",
    "count",
    "parseInt",
    "getElementString",
    "indent",
    "prefix",
    "insertText",
    "name",
    "getOwnPropertyNames",
    "allowedAttributes",
    "forEach",
    "attr",
    "attribute",
    "isOptional",
    "defaultValue",
    "requiredElements",
    "getRequiredElements",
    "allowedContent",
    "getAllowedContent",
    "isContentAllowed",
    "_text",
    "_grouping",
    "trim",
    "children",
    "elemName",
    "elem",
    "getAvailableElements",
    "usedItems",
    "availableItems",
    "childElem",
    "getBounds",
    "max",
    "label",
    "kind",
    "window",
    "monaco",
    "languages",
    "CompletionItemKind",
    "Field",
    "detail",
    "type",
    "documentation",
    "getDocumentation",
    "join",
    "getAvailableAttributes",
    "usedChildTags",
    "attrs",
    "Property",
    "getTypeString",
    "getProvider",
    "triggerCharacters",
    "provideCompletionItems",
    "model",
    "position",
    "textUntilPosition",
    "getValueInRange",
    "startLineNumber",
    "startColumn",
    "endLineNumber",
    "lineNumber",
    "endColumn",
    "column",
    "completeText",
    "getValue",
    "metaEndPos",
    "textMeta",
    "mappingNames",
    "stylingNames",
    "templates",
    "map",
    "vmap",
    "regex",
    "templatesStart",
    "templatesString",
    "replace",
    "split",
    "rawTemplate",
    "nameMatch",
    "variables",
    "vregex",
    "lastOpenedTag",
    "openedTags",
    "openedAttributes",
    "parts",
    "shift",
    "cleanedText",
    "xmlDoc",
    "xml",
    "Document",
    "fromString",
    "lastChild",
    "lastElementChild",
    "lastFound",
    "attributes",
    "outerHTML",
    "nodeName",
    "toLowerCase",
    "entry",
    "res",
    "searchedElement",
    "getDesigns",
    "then",
    "sugg",
    "suggestions",
    "getTransforms",
    "getPlugins",
    "getIcons",
    "getInfluxDBs",
    "getInfluxDBFields",
    "includes",
    "influxAttributes",
    "getNamedItem",
    "getInfluxDBTags",
    "value",
    "getInfluxDBValues",
    "keys",
    "EnumMember",
    "templateNames",
    "variableName",
    "locale",
    "Manager",
    "tr",
    "Variable",
    "mappingName",
    "stylingName",
    "getRrds",
    "typeFilter",
    "getMediaFiles",
    "currentItem",
    "getEnumeration",
    "Value",
    "endsWith",
    "bind",
    "destruct",
    "completion",
    "Config"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/**\n * XSD-based code completion provider for the monaco text editor.\n *\n * @since 0.11.0\n * @author Tobias Br√§utigam\n */\nqx.Class.define('cv.ui.manager.editor.completion.Config', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (schemaNode) {\n    this.base(arguments);\n    this.__elementCache = {};\n    this._schemaNode = schemaNode;\n    this._dataProvider = cv.ui.manager.editor.data.Provider.getInstance();\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __elementCache: null,\n    __metaElementCache: null,\n    _schemaNode: null,\n    _dataProvider: null,\n\n    getLastOpenedTag: function (text) {\n      // get all tags inside of the content\n      var tags = text.match(/<\\/*(?=\\S*)([a-zA-Z-]+)/g);\n      if (!tags) {\n        return undefined;\n      }\n      // we need to know which tags are closed\n      var closingTags = [];\n      for (var i = tags.length - 1; i >= 0; i--) {\n        if (tags[i].indexOf('</') === 0) {\n          closingTags.push(tags[i].substring('</'.length));\n        }\n        else {\n          // get the last position of the tag\n          var tagPosition = text.lastIndexOf(tags[i]);\n          var tag = tags[i].substring('<'.length);\n          var closingBracketIdx = text.indexOf('/>', tagPosition);\n          // if the tag wasn't closed\n          if (closingBracketIdx === -1) {\n            // if there are no closing tags or the current tag wasn't closed\n            if (!closingTags.length || closingTags[closingTags.length - 1] !== tag) {\n              // we found our tag, but let's get the information if we are looking for\n              // a child element or an attribute\n              text = text.substring(tagPosition);\n\n              var openedTag = text.indexOf('<') > text.indexOf('>');\n              var contentSearch = false;\n              var currentAttribute = null;\n              if (openedTag) {\n                var attrMatch = /([\\w\\-_\\.\\d]+)=\"[^\"]*$/.exec(text);\n                contentSearch = !!attrMatch;\n                currentAttribute = attrMatch ? attrMatch[1] : null;\n              }\n              var filteredElementSearch = /<[\\w-_\\d]+$/.test(text);\n              return {\n                tagName: tag,\n                currentAttribute: currentAttribute,\n                filteredElementSearch: filteredElementSearch,\n                isAttributeSearch: !filteredElementSearch && openedTag && !contentSearch,\n                isContentSearch: contentSearch,\n                text: text\n              };\n            }\n            // remove the last closed tag\n            closingTags.splice(closingTags.length - 1, 1);\n          }\n          // remove the last checked tag and continue processing the rest of the content\n          text = text.substring(0, tagPosition);\n        }\n      }\n    },\n\n    findElements: function (parent, elementName, maxDepth, currentDepth, inMeta) {\n      var cache = inMeta === true ? this.__metaElementCache : this.__elementCache;\n      if (elementName in cache) {\n        return cache[elementName];\n      }\n      if (maxDepth < currentDepth) {\n        return null;\n      }\n      if (!parent) {\n        parent = this._schemaNode.allowedRootElements.pages;\n      }\n      if (currentDepth === undefined) {\n        currentDepth = 1;\n      }\n      var allowedElements = parent.getAllowedElements();\n      // console.log(parent.name+\" looking for \"+elementName+\" in tree level \"+currentDepth+ \"(<\"+maxDepth+\") (\"+Object.getOwnPropertyNames(allowedElements).join(\", \")+\")\");\n      if (elementName in allowedElements) {\n        // console.log(\"found \"+elementName+\" in tree level \"+currentDepth);\n        this.__elementCache[elementName] = allowedElements[elementName];\n        return allowedElements[elementName];\n      } else {\n        for (var element in allowedElements) {\n          if (inMeta !== true && element === 'meta') {\n            continue;\n          }\n          if (maxDepth > currentDepth) {\n            var result = this.findElements(allowedElements[element], elementName, maxDepth, currentDepth + 1);\n            if (result) {\n              cache[elementName] = result;\n              // console.log(\"found \" + elementName + \" in tree level \" + currentDepth);\n              return result;\n            }\n          }\n        }\n      }\n\n    },\n\n    isItemAvailable: function (itemName, maxOccurs, items) {\n      // the default for 'maxOccurs' is 1\n      maxOccurs = maxOccurs || '1';\n      // the element can appere infinite times, so it is available\n      if (maxOccurs && maxOccurs === 'unbounded') {\n        return true;\n      }\n      // count how many times the element appeared\n      var count = 0;\n      for (var i = 0; i < items.length; i++) {\n        if (items[i] === itemName) {\n          count++;\n        }\n      }\n      // if it didn't appear yet, or it can appear again, then it\n      // is available, otherwise it't not\n      return count === 0 || parseInt(maxOccurs) > count;\n    },\n\n    getElementString: function (element, indent, prefix) {\n      var insertText = indent+prefix+element.name+\" \";\n      // add all required attributes with default values\n      Object.getOwnPropertyNames(element.allowedAttributes).forEach(function(attr) {\n        var attribute = element.allowedAttributes[attr];\n        if (!attribute.isOptional) {\n          insertText += attr+'=\"'+(attribute.defaultValue ? attribute.defaultValue : \"\")+'\" ';\n        }\n      });\n      // add mandatory children\n      var requiredElements = element.getRequiredElements();\n      var allowedContent = element.getAllowedContent();\n      var isContentAllowed = allowedContent._text || requiredElements.length > 0 || !!allowedContent._grouping;\n      if (!isContentAllowed) {\n        // close tag\n        insertText = insertText.trim()+\"/\";\n      } else {\n        // close open tag\n        insertText = insertText.trim()+\">\";\n\n        // insert required elements\n        var children = 0;\n        requiredElements.forEach(function(elemName) {\n          var elem = this.findElements(element, elemName, 1, 0);\n          if (elem) {\n            insertText += \"\\n    \" + this.getElementString(elem, indent + \"    \", \"<\") + \">\";\n            children++;\n          }\n        }, this);\n        // add closing tag\n        if (children > 0) {\n          insertText += \"\\n\"+indent;\n        }\n        insertText += \"</\"+element.name;\n      }\n      return insertText;\n    },\n\n    getAvailableElements: function (element, usedItems) {\n      var availableItems = [];\n      var children = element.getAllowedElements();\n\n      // if there are no such elements, then there are no suggestions\n      if (!children) {\n        return [];\n      }\n      Object.getOwnPropertyNames(children).forEach(function(name) {\n        // get all element attributes\n        var childElem = children[name];\n        // the element is a suggestion if it's available\n        if (this.isItemAvailable(childElem.name, childElem.getBounds().max, usedItems)) {\n          // mark it as a 'field', and get the documentation\n          availableItems.push({\n            label: childElem.name,\n            insertText: this.getElementString(childElem, \"\", \"\"),\n            kind: window.monaco.languages.CompletionItemKind.Field,\n            detail: childElem.type,\n            documentation: childElem.getDocumentation().join(\"\\n\")\n          });\n        }\n      }, this);\n      // return the suggestions we found\n      return availableItems;\n    },\n\n    getAvailableAttributes: function (element, usedChildTags) {\n      var availableItems = [];\n      // get all attributes for the element\n      var attrs = element.allowedAttributes;\n      Object.getOwnPropertyNames(attrs).forEach(function(name) { // jshint ignore:line\n        var attr = attrs[name];\n        // accept it in a suggestion list only the attribute is not used yet\n        if (usedChildTags.indexOf(attr.name) === -1) {\n          // mark it as a 'property', and get it's documentation\n          availableItems.push({\n            label: attr.name,\n            insertText: attr.name+'=\"\"',\n            kind: window.monaco.languages.CompletionItemKind.Property,\n            detail: attr.getTypeString(),\n            documentation: attr.getDocumentation().join(\"\\n\")\n          });\n        }\n      }, this);\n\n      // return the elements we found\n      return availableItems;\n    },\n\n    getProvider: function () {\n      return {\n        triggerCharacters: ['<', '\"'],\n        provideCompletionItems: function (model, position) {\n          // get editor content before the pointer\n          var textUntilPosition = model.getValueInRange({\n            startLineNumber: 1,\n            startColumn: 1,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n          });\n          // parse mappings\n          var completeText = model.getValue();\n          var metaEndPos = completeText.indexOf('</meta>');\n          var textMeta = metaEndPos > 0 ? completeText.substring(0, metaEndPos) : completeText;\n          var mappingNames = [];\n          var stylingNames = [];\n          var templates = {};\n          var map, vmap;\n          var regex = /<mapping name=\"([^\"]+)\"/gm;\n          while ((map = regex.exec(textMeta)) !== null) {\n            mappingNames.push(map[1]);\n          }\n          regex = /<styling name=\"([^\"]+)\"/gm;\n          while ((map = regex.exec(textMeta)) !== null) {\n            stylingNames.push(map[1]);\n          }\n          var templatesStart = textMeta.indexOf('<templates>');\n          if (templatesStart >= 0) {\n            var templatesString = textMeta.substring(templatesStart + 11, textMeta.indexOf('</templates>') - 12).replace(/(?:\\r\\n|\\r|\\n)/g, '');\n            templatesString.split('</template>').forEach(function (rawTemplate) {\n              var nameMatch = /<template name=\"([^\"]+)\"/.exec(rawTemplate);\n              // search for variables\n              var variables = [];\n              var vregex = /{{{?\\s*([\\w\\d]+)\\s*}?}}/gm;\n              while ((vmap = vregex.exec(rawTemplate)) !== null) {\n                variables.push(vmap[1]);\n              }\n              templates[nameMatch[1]] = variables;\n            }, this);\n          }\n\n          // if we want suggestions, inside of which tag are we?\n          var lastOpenedTag = this.getLastOpenedTag(textUntilPosition);\n          // console.log(lastOpenedTag);\n          // get opened tags to see what tag we should look for in the XSD schema\n          var openedTags = [];\n          // attrobutes of the ancestors\n          var openedAttributes = [];\n          // get the elements/attributes that are already mentioned in the element we're in\n          var usedItems = [];\n          var isAttributeSearch = lastOpenedTag && lastOpenedTag.isAttributeSearch;\n          var isContentSearch = lastOpenedTag && lastOpenedTag.isContentSearch;\n          var filteredElementSearch = lastOpenedTag && lastOpenedTag.filteredElementSearch;\n          // no need to calculate the position in the XSD schema if we are in the root element\n          var parts;\n          if (lastOpenedTag) {\n            // try to create a valid XML document\n            parts = lastOpenedTag.text.split(\" \");\n            parts.shift();\n            var cleanedText = textUntilPosition;\n            if (parts.length) {\n              cleanedText = cleanedText.substring(0, cleanedText.length-parts.join(\" \").length)+\">\";\n            }\n            // parse the content (not cleared text) into an xml document\n            var xmlDoc = qx.xml.Document.fromString(cleanedText);\n            var lastChild = xmlDoc.lastElementChild;\n            var i;\n            var lastFound = false;\n            while (lastChild) {\n              openedTags.push(lastChild.tagName);\n              openedAttributes.push(lastChild.attributes);\n              // if we found our last opened tag\n              if (lastChild.tagName === lastOpenedTag.tagName) {\n                lastFound = true;\n                // if we are looking for attributes, then used items should\n                // be the attributes we already used\n                if (lastOpenedTag.isAttributeSearch && lastChild.outerHTML === lastOpenedTag.text) {\n                  var attrs = lastChild.attributes;\n                  for (i = 0; i < attrs.length; i++) {\n                    usedItems.push(attrs[i].nodeName);\n                  }\n                }\n                else {\n                  // if we are looking for child elements, then used items\n                  // should be the elements that were already used\n                  var children = lastChild.children;\n                  for (i = 0; i < children.length; i++) {\n                    if (children[i].tagName.toLowerCase() !== 'parsererror') {\n                      usedItems.push(children[i].tagName);\n                    }\n                  }\n                }\n                break;\n              }\n              // we haven't found the last opened tag yet, so we move to\n              // the next element\n              lastChild = lastChild.lastElementChild;\n            }\n            if (!lastFound) {\n              // fallback -> parse string\n              if (isAttributeSearch || isContentSearch) {\n                parts = lastOpenedTag.text.split(\" \");\n                // skip tag name\n                parts.shift();\n                parts.forEach(function(entry) {\n                  usedItems.push(entry.split(\"=\").shift());\n                });\n              }\n            }\n          }\n          var res = [];\n          var match;\n          // find the last opened tag in the schema to see what elements/attributes it can have\n          var searchedElement = openedTags[openedTags.length-1];\n          if (isContentSearch) {\n            // handle data providers if the is one relevant\n            if (lastOpenedTag.tagName === 'pages' && lastOpenedTag.currentAttribute === 'design') {\n              return this._dataProvider.getDesigns().then(function (sugg) {\n                return {suggestions: sugg};\n              });\n            } else if (lastOpenedTag.tagName === 'address' && lastOpenedTag.currentAttribute === 'transform') {\n              return {suggestions: this._dataProvider.getTransforms()};\n            } else if (lastOpenedTag.tagName === 'plugin' && lastOpenedTag.currentAttribute === 'name') {\n              return {suggestions: this._dataProvider.getPlugins()};\n            } else if (lastOpenedTag.tagName === 'icon' && lastOpenedTag.currentAttribute === 'name') {\n              return {suggestions: this._dataProvider.getIcons()};\n            } else if (lastOpenedTag.tagName === 'influx') {\n              if (lastOpenedTag.currentAttribute === 'measurement') {\n                return this._dataProvider.getInfluxDBs().then(function (suggestions) {\n                  return {suggestions: suggestions};\n                });\n              } else if (lastOpenedTag.currentAttribute === 'field') {\n                match = /measurement=\"([^\"]+)\"/.exec(lastOpenedTag.text);\n                if (match) {\n                  return this._dataProvider.getInfluxDBFields(match[1]).then(function (suggestions) {\n                    return {suggestions: suggestions};\n                  });\n                }\n              }\n            } else if (lastOpenedTag.tagName === 'tag' && (lastOpenedTag.currentAttribute === 'key' || lastOpenedTag.currentAttribute === 'value') && openedTags.includes('influx')) {\n              var influxAttributes = openedAttributes[openedTags.indexOf('influx')];\n              var attr = influxAttributes.getNamedItem('measurement');\n              if (attr) {\n                if (lastOpenedTag.currentAttribute === 'key') {\n                  return this._dataProvider.getInfluxDBTags(attr.value).then(function (suggestions) {\n                    return {suggestions: suggestions};\n                  });\n                } else if (lastOpenedTag.currentAttribute === 'value') {\n                  match = /key=\"([^\"]+)\"/.exec(lastOpenedTag.text);\n                  if (match) {\n                    return this._dataProvider.getInfluxDBValues(attr.value, match[1]).then(function (suggestions) {\n                      return {suggestions: suggestions};\n                    });\n                  }\n                }\n              }\n            } else if (lastOpenedTag.tagName === 'template' && lastOpenedTag.currentAttribute === 'name' && openedTags.includes('meta')) {\n              res = Object.keys(templates).map(function (name) {\n                return {\n                  label: name,\n                  insertText: name,\n                  kind: window.monaco.languages.CompletionItemKind.EnumMember\n                };\n              }, this);\n              return {suggestions: res};\n            } else if (lastOpenedTag.tagName === 'value' &&\n              lastOpenedTag.currentAttribute === 'name' &&\n              !openedTags.includes('meta') &&\n              openedTags.includes('template')) {\n              // TODO: find out template name\n              var templateNames = Object.keys(templates);\n              templateNames.forEach(function (name) {\n                templates[name].forEach(function (variableName) {\n                  res.push({\n                    label: variableName,\n                    insertText: variableName,\n                    detail: qx.locale.Manager.tr('Variable from template %1', name),\n                    kind: window.monaco.languages.CompletionItemKind.Variable\n                  });\n                }, this);\n              }, this);\n              return {suggestions: res};\n            } else if (lastOpenedTag.currentAttribute === 'mapping') {\n              res = mappingNames.map(function (mappingName) {\n                return {\n                  label: mappingName,\n                  insertText: mappingName,\n                  kind: window.monaco.languages.CompletionItemKind.EnumMember\n                };\n              }, this);\n              return {suggestions: res};\n            } else if (lastOpenedTag.currentAttribute === 'styling') {\n              res = stylingNames.map(function (stylingName) {\n                return {\n                  label: stylingName,\n                  insertText: stylingName,\n                  kind: window.monaco.languages.CompletionItemKind.EnumMember\n                };\n              }, this);\n              return {suggestions: res};\n            }\n\n            // TODO: completions that have to be retrieved from the backend\n            // * rrds\n            // * Influx: dbs, tags fields\n            // * media files\n\n            searchedElement = lastOpenedTag.tagName;\n          } else if (!isAttributeSearch && filteredElementSearch) {\n            searchedElement = openedTags[openedTags.length-2];\n          }\n          if (searchedElement === 'rrd') {\n            return {suggestions: this._dataProvider.getRrds()};\n          } else if (searchedElement === 'file' && !isAttributeSearch && !isContentSearch && openedTags.includes('files')) {\n            match = /type=\"([^\"]+)\"/.exec(lastOpenedTag.text);\n            var typeFilter = !!match ? match[1] : null;\n            return this._dataProvider.getMediaFiles(typeFilter).then(function (suggestions) {\n              return {suggestions: suggestions};\n            });\n          }\n          var currentItem = this.findElements(this._schemaNode.allowedRootElements.pages, searchedElement, openedTags.length, openedTags.includes('meta'));\n\n          // return available elements/attributes if the tag exists in the schema, or an empty\n          // array if it doesn't\n          if (isContentSearch) {\n            var currentAttribute = usedItems[usedItems.length-1];\n\n            if (currentItem && currentAttribute in currentItem.allowedAttributes) {\n              var attribute = currentItem.allowedAttributes[currentAttribute];\n              var type = attribute.getTypeString();\n              attribute.getEnumeration().forEach(function(entry) {\n                res.push({\n                  label: entry,\n                  kind: window.monaco.languages.CompletionItemKind.Value,\n                  detail: type,\n                  documentation: attribute.getDocumentation().join(\"\\n\")\n                });\n              });\n            }\n          }\n          else if (isAttributeSearch) {\n            // get attributes completions\n            res = currentItem ? this.getAvailableAttributes(currentItem, usedItems) : [];\n          }\n          else {\n            // get elements completions\n            if (lastOpenedTag && lastOpenedTag.text.endsWith(\"</\")) {\n              res.push({\n                label: lastOpenedTag.tagName,\n                kind: window.monaco.languages.CompletionItemKind.Field\n              });\n            } else {\n              res = currentItem ? this.getAvailableElements(currentItem, usedItems) : [];\n            }\n          }\n          return {suggestions: res};\n        }.bind(this)\n      };\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this.__elementCache = null;\n    this._schemaNode = null;\n    this._dataProvider = null;\n  }\n});\n"
  ]
}