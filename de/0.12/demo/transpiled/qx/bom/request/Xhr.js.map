{
  "version": 3,
  "sources": [
    "/home/travis/build/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/bom/request/Xhr.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "Object",
    "implement",
    "core",
    "IDisposable",
    "construct",
    "boundFunc",
    "bind",
    "__onNativeReadyStateChange",
    "event",
    "GlobalError",
    "observeMethod",
    "__onNativeReadyStateChangeBound",
    "__onNativeAbortBound",
    "__onNativeAbort",
    "__onNativeProgressBound",
    "__onNativeProgress",
    "__onTimeoutBound",
    "__onTimeout",
    "__initNativeXhr",
    "_emitter",
    "Emitter",
    "window",
    "attachEvent",
    "__onUnloadBound",
    "__onUnload",
    "statics",
    "UNSENT",
    "OPENED",
    "HEADERS_RECEIVED",
    "LOADING",
    "DONE",
    "events",
    "members",
    "readyState",
    "responseText",
    "response",
    "responseXML",
    "status",
    "statusText",
    "responseType",
    "timeout",
    "progress",
    "open",
    "method",
    "url",
    "async",
    "user",
    "password",
    "__checkDisposed",
    "Error",
    "__abort",
    "__send",
    "__conditional",
    "__url",
    "__async",
    "__supportsManyRequests",
    "bom",
    "request",
    "Xhr",
    "dispose",
    "__nativeXhr",
    "onreadystatechange",
    "Environment",
    "get",
    "debug",
    "OpenError",
    "util",
    "Request",
    "isCrossDomain",
    "__openError",
    "XDomainRequest",
    "onerror",
    "_emit",
    "setTimeout",
    "__disposed",
    "setRequestHeader",
    "parseInt",
    "key",
    "value",
    "send",
    "data",
    "__timerId",
    "dataType",
    "getClass",
    "__dataTypeWhiteList",
    "indexOf",
    "toString",
    "SendError",
    "_getProtocol",
    "__readyStateChange",
    "that",
    "abort",
    "emit",
    "onload",
    "onloadend",
    "onabort",
    "ontimeout",
    "onprogress",
    "on",
    "name",
    "listener",
    "ctx",
    "getResponseHeader",
    "header",
    "aborted",
    "getAllResponseHeaders",
    "overrideMimeType",
    "mimeType",
    "getRequest",
    "clearTimeout",
    "detachEvent",
    "PropertiesNotAccessable",
    "noop",
    "isDisposed",
    "_createNativeXhr",
    "xhr",
    "XMLHttpRequest",
    "ActiveXObject",
    "error",
    "protocolRe",
    "match",
    "location",
    "protocol",
    "__timeout",
    "lengthComputable",
    "loaded",
    "total",
    "e",
    "nxhr",
    "propertiesReadable",
    "XhrPropertiesNotReadable",
    "__normalizeStatus",
    "__normalizeResponseXML",
    "__readyStateChangeDone",
    "__isNetworkError",
    "isDone",
    "documentElement",
    "dom",
    "validateOnParse",
    "loadXML",
    "version",
    "defer",
    "add"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n************************************************************************ */\n\n/**\n * A wrapper of the XMLHttpRequest host object (or equivalent). The interface is\n * similar to <a href=\"http://www.w3.org/TR/XMLHttpRequest/\">XmlHttpRequest</a>.\n *\n * Hides browser inconsistencies and works around bugs found in popular\n * implementations.\n *\n * <div class=\"desktop\">\n * Example:\n *\n * <pre class=\"javascript\">\n *  var req = new qx.bom.request.Xhr();\n *  req.onload = function() {\n *    // Handle data received\n *    req.responseText;\n *  }\n *\n *  req.open(\"GET\", url);\n *  req.send();\n * </pre>\n *\n * Example for binary data:\n *\n * <pre class=\"javascript\">\n *  var req = new qx.bom.request.Xhr();\n *  req.onload = function() {\n *    // Handle data received\n *    var blob = req.response;\n *    img.src = URL.createObjectURL(blob);\n *  }\n *\n *  req.open(\"GET\", url);\n *  req.responseType = \"blob\";\n *  req.send();\n * </pre>\n \n * </div>\n *\n * @ignore(XDomainRequest)\n * @ignore(qx.event, qx.event.GlobalError.*)\n *\n * @require(qx.bom.request.Xhr#open)\n * @require(qx.bom.request.Xhr#send)\n * @require(qx.bom.request.Xhr#on)\n * @require(qx.bom.request.Xhr#onreadystatechange)\n * @require(qx.bom.request.Xhr#onload)\n * @require(qx.bom.request.Xhr#onloadend)\n * @require(qx.bom.request.Xhr#onerror)\n * @require(qx.bom.request.Xhr#onabort)\n * @require(qx.bom.request.Xhr#ontimeout)\n * @require(qx.bom.request.Xhr#setRequestHeader)\n * @require(qx.bom.request.Xhr#getAllResponseHeaders)\n * @require(qx.bom.request.Xhr#getRequest)\n * @require(qx.bom.request.Xhr#overrideMimeType)\n * @require(qx.bom.request.Xhr#dispose)\n * @require(qx.bom.request.Xhr#isDisposed)\n *\n * @group (IO)\n */\nqx.Bootstrap.define(\"qx.bom.request.Xhr\",\n{\n\n  extend: Object,\n  implement: [ qx.core.IDisposable ],\n\n  construct: function() {\n    var boundFunc = qx.Bootstrap.bind(this.__onNativeReadyStateChange, this);\n\n    // GlobalError shouldn't be included in qx.Website builds so use it\n    // if it's available but otherwise ignore it (see ignore stated above).\n    if (qx.event && qx.event.GlobalError && qx.event.GlobalError.observeMethod) {\n      this.__onNativeReadyStateChangeBound = qx.event.GlobalError.observeMethod(boundFunc);\n    } else {\n      this.__onNativeReadyStateChangeBound = boundFunc;\n    }\n\n    this.__onNativeAbortBound = qx.Bootstrap.bind(this.__onNativeAbort, this);\n    this.__onNativeProgressBound = qx.Bootstrap.bind(this.__onNativeProgress, this);\n    this.__onTimeoutBound = qx.Bootstrap.bind(this.__onTimeout, this);\n\n    this.__initNativeXhr();\n    this._emitter = new qx.event.Emitter();\n\n    // BUGFIX: IE\n    // IE keeps connections alive unless aborted on unload\n    if (window.attachEvent) {\n      this.__onUnloadBound = qx.Bootstrap.bind(this.__onUnload, this);\n      window.attachEvent(\"onunload\", this.__onUnloadBound);\n    }\n  },\n\n  statics :\n  {\n    UNSENT: 0,\n    OPENED: 1,\n    HEADERS_RECEIVED: 2,\n    LOADING: 3,\n    DONE: 4\n  },\n\n\n  events : {\n    /** Fired at ready state changes. */\n    \"readystatechange\" : \"qx.bom.request.Xhr\",\n\n    /** Fired on error. */\n    \"error\" : \"qx.bom.request.Xhr\",\n\n    /** Fired at loadend. */\n    \"loadend\" : \"qx.bom.request.Xhr\",\n\n    /** Fired on timeouts. */\n    \"timeout\" : \"qx.bom.request.Xhr\",\n\n    /** Fired when the request is aborted. */\n    \"abort\" : \"qx.bom.request.Xhr\",\n\n    /** Fired on successful retrieval. */\n    \"load\" : \"qx.bom.request.Xhr\",\n\n    /** Fired on progress. */\n    \"progress\" : \"qx.bom.request.Xhr\"\n  },\n\n\n  members :\n  {\n    /*\n    ---------------------------------------------------------------------------\n      PUBLIC\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * @type {Number} Ready state.\n     *\n     * States can be:\n     * UNSENT:           0,\n     * OPENED:           1,\n     * HEADERS_RECEIVED: 2,\n     * LOADING:          3,\n     * DONE:             4\n     */\n    readyState: 0,\n\n    /**\n     * @type {String} The response of the request as text.\n     */\n    responseText: \"\",\n\n    /**\n     * @type {Object} The response of the request as a Document object.\n     */\n    response: null,\n    \n    /**\n     * @type {Object} The response of the request as object.\n     */\n    responseXML: null,\n\n    /**\n     * @type {Number} The HTTP status code.\n     */\n    status: 0,\n\n    /**\n     * @type {String} The HTTP status text.\n     */\n    statusText: \"\",\n\n    /**\n     * @type {String} The response Type to use in the request\n     */\n    responseType: \"\",\n    /**\n     * @type {Number} Timeout limit in milliseconds.\n     *\n     * 0 (default) means no timeout. Not supported for synchronous requests.\n     */\n    timeout: 0,\n\n    /**\n     * @type {Object} Wrapper to store data of the progress event which contains the keys\n       <code>lengthComputable</code>, <code>loaded</code> and <code>total</code>\n     */\n    progress: null,\n\n\n    /**\n     * Initializes (prepares) request.\n     *\n     * @ignore(XDomainRequest)\n     *\n     * @param method {String?\"GET\"}\n     *  The HTTP method to use.\n     * @param url {String}\n     *  The URL to which to send the request.\n     * @param async {Boolean?true}\n     *  Whether or not to perform the operation asynchronously.\n     * @param user {String?null}\n     *  Optional user name to use for authentication purposes.\n     * @param password {String?null}\n     *  Optional password to use for authentication purposes.\n     */\n    open: function(method, url, async, user, password) {\n      this.__checkDisposed();\n\n      // Mimick native behavior\n      if (typeof url === \"undefined\") {\n        throw new Error(\"Not enough arguments\");\n      } else if (typeof method === \"undefined\") {\n        method = \"GET\";\n      }\n\n      // Reset flags that may have been set on previous request\n      this.__abort = false;\n      this.__send = false;\n      this.__conditional = false;\n\n      // Store URL for later checks\n      this.__url = url;\n\n      if (typeof async == \"undefined\") {\n        async = true;\n      }\n      this.__async = async;\n      // Default values according to spec.\n      this.status = 0;\n      this.statusText = this.responseText = \"\";\n      this.responseXML = null;\n      this.response = null;\n\n      // BUGFIX\n      // IE < 9 and FF < 3.5 cannot reuse the native XHR to issue many requests\n      if (!this.__supportsManyRequests() && this.readyState > qx.bom.request.Xhr.UNSENT) {\n        // XmlHttpRequest Level 1 requires open() to abort any pending requests\n        // associated to the object. Since we're dealing with a new object here,\n        // we have to emulate this behavior. Moreover, allow old native XHR to be garbage collected\n        //\n        // Dispose and abort.\n        //\n        this.dispose();\n\n        // Replace the underlying native XHR with a new one that can\n        // be used to issue new requests.\n        this.__initNativeXhr();\n      }\n\n      // Restore handler in case it was removed before\n      this.__nativeXhr.onreadystatechange = this.__onNativeReadyStateChangeBound;\n\n      try {\n        if (qx.core.Environment.get(\"qx.debug.io\")) {\n          qx.Bootstrap.debug(qx.bom.request.Xhr, \"Open native request with method: \" +\n            method + \", url: \" + url + \", async: \" + async);\n        }\n\n        this.__nativeXhr.open(method, url, async, user, password);\n\n      // BUGFIX: IE, Firefox < 3.5\n      // Some browsers do not support Cross-Origin Resource Sharing (CORS)\n      // for XMLHttpRequest. Instead, an exception is thrown even for async requests\n      // if URL is cross-origin (as per XHR level 1). Use the proprietary XDomainRequest\n      // if available (supports CORS) and handle error (if there is one) this\n      // way. Otherwise just assume network error.\n      //\n      // Basically, this allows to detect network errors.\n      } catch(OpenError) {\n\n        // Only work around exceptions caused by cross domain request attempts\n        if (!qx.util.Request.isCrossDomain(url)) {\n          // Is same origin\n          throw OpenError;\n        }\n\n        if (!this.__async) {\n          this.__openError = OpenError;\n        }\n\n        if (this.__async) {\n          // Try again with XDomainRequest\n          // (Success case not handled on purpose)\n          // - IE 9\n          if (window.XDomainRequest) {\n            this.readyState = 4;\n            this.__nativeXhr = new XDomainRequest();\n            this.__nativeXhr.onerror = qx.Bootstrap.bind(function() {\n              this._emit(\"readystatechange\");\n              this._emit(\"error\");\n              this._emit(\"loadend\");\n            }, this);\n\n            if (qx.core.Environment.get(\"qx.debug.io\")) {\n              qx.Bootstrap.debug(qx.bom.request.Xhr, \"Retry open native request with method: \" +\n                method + \", url: \" + url + \", async: \" + async);\n            }\n            this.__nativeXhr.open(method, url, async, user, password);\n            return;\n          }\n\n          // Access denied\n          // - IE 6: -2146828218\n          // - IE 7: -2147024891\n          // - Legacy Firefox\n          window.setTimeout(qx.Bootstrap.bind(function() {\n            if (this.__disposed) {\n              return;\n            }\n            this.readyState = 4;\n            this._emit(\"readystatechange\");\n            this._emit(\"error\");\n            this._emit(\"loadend\");\n          }, this));\n        }\n\n      }\n\n      // BUGFIX: IE < 9\n      // IE < 9 tends to cache overly aggressive. This may result in stale\n      // representations. Force validating freshness of cached representation.\n      if (qx.core.Environment.get(\"engine.name\") === \"mshtml\" &&\n        qx.core.Environment.get(\"browser.documentmode\") < 9 &&\n        this.__nativeXhr.readyState > 0) {\n          this.__nativeXhr.setRequestHeader(\"If-Modified-Since\", \"-1\");\n        }\n\n      // BUGFIX: Firefox\n      // Firefox < 4 fails to trigger onreadystatechange OPENED for sync requests\n      if (qx.core.Environment.get(\"engine.name\") === \"gecko\" &&\n          parseInt(qx.core.Environment.get(\"engine.version\"), 10) < 2 &&\n          !this.__async) {\n        // Native XHR is already set to readyState DONE. Fake readyState\n        // and call onreadystatechange manually.\n        this.readyState = qx.bom.request.Xhr.OPENED;\n        this._emit(\"readystatechange\");\n      }\n\n    },\n\n    /**\n     * Sets an HTTP request header to be used by the request.\n     *\n     * Note: The request must be initialized before using this method.\n     *\n     * @param key {String}\n     *  The name of the header whose value is to be set.\n     * @param value {String}\n     *  The value to set as the body of the header.\n     * @return {qx.bom.request.Xhr} Self for chaining.\n     */\n    setRequestHeader: function(key, value) {\n      this.__checkDisposed();\n\n      // Detect conditional requests\n      if (key == \"If-Match\" || key == \"If-Modified-Since\" ||\n        key == \"If-None-Match\" || key == \"If-Range\") {\n        this.__conditional = true;\n      }\n\n      this.__nativeXhr.setRequestHeader(key, value);\n      return this;\n    },\n\n    /**\n     * Sends request.\n     *\n     * @param data {String|Document?null}\n     *  Optional data to send.\n     * @return {qx.bom.request.Xhr} Self for chaining.\n     */\n    send: function(data) {\n      this.__checkDisposed();\n\n      // BUGFIX: IE & Firefox < 3.5\n      // For sync requests, some browsers throw error on open()\n      // while it should be on send()\n      //\n      if (!this.__async && this.__openError) {\n        throw this.__openError;\n      }\n\n      // BUGFIX: Opera\n      // On network error, Opera stalls at readyState HEADERS_RECEIVED\n      // This violates the spec. See here http://www.w3.org/TR/XMLHttpRequest2/#send\n      // (Section: If there is a network error)\n      //\n      // To fix, assume a default timeout of 10 seconds. Note: The \"error\"\n      // event will be fired correctly, because the error flag is inferred\n      // from the statusText property. Of course, compared to other\n      // browsers there is an additional call to ontimeout(), but this call\n      // should not harm.\n      //\n      if (qx.core.Environment.get(\"engine.name\") === \"opera\" &&\n          this.timeout === 0) {\n        this.timeout = 10000;\n      }\n\n      // Timeout\n      if (this.timeout > 0) {\n        this.__timerId = window.setTimeout(this.__onTimeoutBound, this.timeout);\n      }\n\n      // BUGFIX: Firefox 2\n      // \"NS_ERROR_XPC_NOT_ENOUGH_ARGS\" when calling send() without arguments\n      data = typeof data == \"undefined\" ? null : data;\n\n      // Whitelisting the allowed data types regarding the spec\n      // -> http://www.w3.org/TR/XMLHttpRequest2/#the-send-method\n      // All other data input will be transformed to a string to e.g. prevent\n      // an SendError in Firefox (at least <= 31) and to harmonize it with the\n      // behaviour of all other browsers (Chrome, IE and Safari)\n      var dataType = qx.Bootstrap.getClass(data);\n      data = (data !== null && this.__dataTypeWhiteList.indexOf(dataType) === -1) ? data.toString() : data;\n\n      // Some browsers may throw an error when sending of async request fails.\n      // This violates the spec which states only sync requests should.\n      try {\n        if (qx.core.Environment.get(\"qx.debug.io\")) {\n          qx.Bootstrap.debug(qx.bom.request.Xhr, \"Send native request\");\n        }\n        if (this.__async) {\n          this.__nativeXhr.responseType = this.responseType;\n        }\n        this.__nativeXhr.send(data);\n      } catch(SendError) {\n        if (!this.__async) {\n          throw SendError;\n        }\n\n        // BUGFIX\n        // Some browsers throws error when file not found via file:// protocol.\n        // Synthesize readyState changes.\n        if (this._getProtocol() === \"file:\") {\n          this.readyState = 2;\n          this.__readyStateChange();\n\n          var that = this;\n          window.setTimeout(function() {\n            if (that.__disposed) {\n              return;\n            }\n            that.readyState = 3;\n            that.__readyStateChange();\n\n            that.readyState = 4;\n            that.__readyStateChange();\n          });\n\n        }\n\n      }\n\n      // BUGFIX: Firefox\n      // Firefox fails to trigger onreadystatechange DONE for sync requests\n      if (qx.core.Environment.get(\"engine.name\") === \"gecko\" && !this.__async) {\n        // Properties all set, only missing native readystatechange event\n        this.__onNativeReadyStateChange();\n      }\n\n      // Set send flag\n      this.__send = true;\n      return this;\n    },\n\n    /**\n     * Abort request - i.e. cancels any network activity.\n     *\n     * Note:\n     *  On Windows 7 every browser strangely skips the loading phase\n     *  when this method is called (because readyState never gets 3).\n     *\n     *  So keep this in mind if you rely on the phases which are\n     *  passed through. They will be \"opened\", \"sent\", \"abort\"\n     *  instead of normally \"opened\", \"sent\", \"loading\", \"abort\".\n     *\n     * @return {qx.bom.request.Xhr} Self for chaining.\n     */\n    abort: function() {\n      this.__checkDisposed();\n\n      this.__abort = true;\n      this.__nativeXhr.abort();\n\n      if (this.__nativeXhr && this.readyState !== qx.bom.request.Xhr.DONE) {\n        this.readyState = this.__nativeXhr.readyState;\n      }\n      return this;\n    },\n\n\n    /**\n     * Helper to emit events and call the callback methods.\n     * @param event {String} The name of the event.\n     */\n    _emit: function(event) {\n      if (this[\"on\" + event]) {\n        this[\"on\" + event]();\n      }\n      this._emitter.emit(event, this);\n    },\n\n    /**\n     * Event handler for XHR event that fires at every state change.\n     *\n     * Replace with custom method to get informed about the communication progress.\n     */\n    onreadystatechange: function() {},\n\n    /**\n     * Event handler for XHR event \"load\" that is fired on successful retrieval.\n     *\n     * Note: This handler is called even when the HTTP status indicates an error.\n     *\n     * Replace with custom method to listen to the \"load\" event.\n     */\n    onload: function() {},\n\n    /**\n     * Event handler for XHR event \"loadend\" that is fired on retrieval.\n     *\n     * Note: This handler is called even when a network error (or similar)\n     * occurred.\n     *\n     * Replace with custom method to listen to the \"loadend\" event.\n     */\n    onloadend: function() {},\n\n    /**\n     * Event handler for XHR event \"error\" that is fired on a network error.\n     *\n     * Replace with custom method to listen to the \"error\" event.\n     */\n    onerror: function() {},\n\n    /**\n    * Event handler for XHR event \"abort\" that is fired when request\n    * is aborted.\n    *\n    * Replace with custom method to listen to the \"abort\" event.\n    */\n    onabort: function() {},\n\n    /**\n    * Event handler for XHR event \"timeout\" that is fired when timeout\n    * interval has passed.\n    *\n    * Replace with custom method to listen to the \"timeout\" event.\n    */\n    ontimeout: function() {},\n\n    /**\n    * Event handler for XHR event \"progress\".\n    *\n    * Replace with custom method to listen to the \"progress\" event.\n    */\n    onprogress: function() {},\n\n\n    /**\n     * Add an event listener for the given event name.\n     *\n     * @param name {String} The name of the event to listen to.\n     * @param listener {Function} The function to execute when the event is fired\n     * @param ctx {var?} The context of the listener.\n     * @return {qx.bom.request.Xhr} Self for chaining.\n     */\n    on: function(name, listener, ctx) {\n      this._emitter.on(name, listener, ctx);\n      return this;\n    },\n\n\n    /**\n     * Get a single response header from response.\n     *\n     * @param header {String}\n     *  Key of the header to get the value from.\n     * @return {String}\n     *  Response header.\n     */\n    getResponseHeader: function(header) {\n      this.__checkDisposed();\n\n      if (qx.core.Environment.get(\"browser.documentmode\") === 9 &&\n        this.__nativeXhr.aborted)\n      {\n        return \"\";\n      }\n\n      return this.__nativeXhr.getResponseHeader(header);\n    },\n\n    /**\n     * Get all response headers from response.\n     *\n     * @return {String} All response headers.\n     */\n    getAllResponseHeaders: function() {\n      this.__checkDisposed();\n\n      if (qx.core.Environment.get(\"browser.documentmode\") === 9 &&\n        this.__nativeXhr.aborted)\n      {\n        return \"\";\n      }\n\n      return this.__nativeXhr.getAllResponseHeaders();\n    },\n\n    /**\n     * Overrides the MIME type returned by the server\n     * and must be called before @send()@.\n     *\n     * Note:\n     *\n     * * IE doesn't support this method so in this case an Error is thrown.\n     * * after calling this method @getResponseHeader(\"Content-Type\")@\n     *   may return the original (Firefox 23, IE 10, Safari 6) or\n     *   the overridden content type (Chrome 28+, Opera 15+).\n     *\n     *\n     * @param mimeType {String} The mimeType for overriding.\n     * @return {qx.bom.request.Xhr} Self for chaining.\n     */\n    overrideMimeType: function(mimeType) {\n      this.__checkDisposed();\n\n      if (this.__nativeXhr.overrideMimeType) {\n        this.__nativeXhr.overrideMimeType(mimeType);\n      } else {\n        throw new Error(\"Native XHR object doesn't support overrideMimeType.\");\n      }\n\n      return this;\n    },\n\n    /**\n     * Get wrapped native XMLHttpRequest (or equivalent).\n     *\n     * Can be XMLHttpRequest or ActiveX.\n     *\n     * @return {Object} XMLHttpRequest or equivalent.\n     */\n    getRequest: function() {\n      return this.__nativeXhr;\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      HELPER\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Dispose object and wrapped native XHR.\n     * @return {Boolean} <code>true</code> if the object was successfully disposed\n     */\n    dispose: function() {\n      if (this.__disposed) {\n        return false;\n      }\n\n      window.clearTimeout(this.__timerId);\n\n      // Remove unload listener in IE. Aborting on unload is no longer required\n      // for this instance.\n      if (window.detachEvent) {\n        window.detachEvent(\"onunload\", this.__onUnloadBound);\n      }\n\n      // May fail in IE\n      try {\n        this.__nativeXhr.onreadystatechange;\n      } catch(PropertiesNotAccessable) {\n        return false;\n      }\n\n      // Clear out listeners\n      var noop = function() {};\n      this.__nativeXhr.onreadystatechange = noop;\n      this.__nativeXhr.onload = noop;\n      this.__nativeXhr.onerror = noop;\n      this.__nativeXhr.onprogress = noop;\n\n      // Abort any network activity\n      this.abort();\n\n      // Remove reference to native XHR\n      this.__nativeXhr = null;\n      this.responseText = null;\n\n      this.__disposed = true;\n      return true;\n    },\n\n\n    /**\n     * Check if the request has already beed disposed.\n     * @return {Boolean} <code>true</code>, if the request has been disposed.\n     */\n    isDisposed : function() {\n      return !!this.__disposed;\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      PROTECTED\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Create XMLHttpRequest (or equivalent).\n     *\n     * @return {Object} XMLHttpRequest or equivalent.\n     *\n     * @ignore(XMLHttpRequest)\n     */\n    _createNativeXhr: function() {\n      var xhr = qx.core.Environment.get(\"io.xhr\");\n\n      if (xhr === \"xhr\") {\n        return new XMLHttpRequest();\n      }\n\n      if (xhr == \"activex\") {\n        return new window.ActiveXObject(\"Microsoft.XMLHTTP\");\n      }\n\n      qx.Bootstrap.error(this, \"No XHR support available.\");\n    },\n\n    /**\n     * Get protocol of requested URL.\n     *\n     * @return {String} The used protocol.\n     */\n    _getProtocol: function() {\n      var url = this.__url;\n      var protocolRe = /^(\\w+:)\\/\\//;\n\n      // Could be http:// from file://\n      if (url !== null && url.match) {\n        var match = url.match(protocolRe);\n        if (match && match[1]) {\n          return match[1];\n        }\n      }\n\n      return window.location.protocol;\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      PRIVATE\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * @type {Object} XMLHttpRequest or equivalent.\n     */\n    __nativeXhr: null,\n\n    /**\n     * @type {Boolean} Whether request is async.\n     */\n    __async: null,\n\n    /**\n     * @type {Function} Bound __onNativeReadyStateChange handler.\n     */\n    __onNativeReadyStateChangeBound: null,\n\n    /**\n     * @type {Function} Bound __onNativeAbort handler.\n     */\n    __onNativeAbortBound: null,\n\n    /**\n     * @type {Function} Bound __onNativeProgress handler.\n     */\n    __onNativeProgressBound: null,\n\n    /**\n     * @type {Function} Bound __onUnload handler.\n     */\n    __onUnloadBound: null,\n\n    /**\n     * @type {Function} Bound __onTimeout handler.\n     */\n    __onTimeoutBound: null,\n\n    /**\n     * @type {Boolean} Send flag\n     */\n    __send: null,\n\n    /**\n     * @type {String} Requested URL\n     */\n    __url: null,\n\n    /**\n     * @type {Boolean} Abort flag\n     */\n    __abort: null,\n\n    /**\n     * @type {Boolean} Timeout flag\n     */\n    __timeout: null,\n\n    /**\n     * @type {Boolean} Whether object has been disposed.\n     */\n    __disposed: null,\n\n    /**\n     * @type {Number} ID of timeout timer.\n     */\n    __timerId: null,\n\n    /**\n     * @type {Error} Error thrown on open, if any.\n     */\n    __openError: null,\n\n    /**\n     * @type {Boolean} Conditional get flag\n     */\n     __conditional: null,\n\n    /**\n     * @type {Array} Whitelist with all allowed data types for the request payload\n     */\n    __dataTypeWhiteList: null,\n\n    /**\n     * Init native XHR.\n     */\n    __initNativeXhr: function() {\n      // Create native XHR or equivalent and hold reference\n      this.__nativeXhr = this._createNativeXhr();\n\n      // Track native ready state changes\n      this.__nativeXhr.onreadystatechange = this.__onNativeReadyStateChangeBound;\n\n      // Track native abort, when supported\n      if (qx.Bootstrap.getClass(this.__nativeXhr.onabort) !== \"Undefined\") {\n        this.__nativeXhr.onabort = this.__onNativeAbortBound;\n      }\n\n      // Track native progress, when supported\n      if (qx.Bootstrap.getClass(this.__nativeXhr.onprogress) !== \"Undefined\") {\n        this.__nativeXhr.onprogress = this.__onNativeProgressBound;\n\n        this.progress = {\n          lengthComputable: false,\n          loaded: 0,\n          total: 0\n        };\n      }\n\n      // Reset flags\n      this.__disposed = this.__send = this.__abort = false;\n\n      // Initialize data white list\n      this.__dataTypeWhiteList = [ \"ArrayBuffer\", \"Blob\", \"File\", \"HTMLDocument\", \"String\", \"FormData\" ];\n    },\n\n    /**\n     * Track native abort.\n     *\n     * In case the end user cancels the request by other\n     * means than calling abort().\n     */\n    __onNativeAbort: function() {\n      // When the abort that triggered this method was not a result from\n      // calling abort()\n      if (!this.__abort) {\n        this.abort();\n      }\n    },\n\n    /**\n     * Track native progress event.\n     @param e {Event} The native progress event.\n     */\n    __onNativeProgress: function(e) {\n      this.progress.lengthComputable = e.lengthComputable;\n      this.progress.loaded = e.loaded;\n      this.progress.total = e.total;\n      this._emit(\"progress\");\n    },\n\n    /**\n     * Handle native onreadystatechange.\n     *\n     * Calls user-defined function onreadystatechange on each\n     * state change and syncs the XHR status properties.\n     */\n    __onNativeReadyStateChange: function() {\n      var nxhr = this.__nativeXhr,\n          propertiesReadable = true;\n\n      if (qx.core.Environment.get(\"qx.debug.io\")) {\n        qx.Bootstrap.debug(qx.bom.request.Xhr, \"Received native readyState: \" + nxhr.readyState);\n      }\n\n      // BUGFIX: IE, Firefox\n      // onreadystatechange() is called twice for readyState OPENED.\n      //\n      // Call onreadystatechange only when readyState has changed.\n      if (this.readyState == nxhr.readyState) {\n        return;\n      }\n\n      // Sync current readyState\n      this.readyState = nxhr.readyState;\n\n      // BUGFIX: IE\n      // Superfluous onreadystatechange DONE when aborting OPENED\n      // without send flag\n      if (this.readyState === qx.bom.request.Xhr.DONE &&\n          this.__abort && !this.__send) {\n        return;\n      }\n\n      // BUGFIX: IE\n      // IE fires onreadystatechange HEADERS_RECEIVED and LOADING when sync\n      //\n      // According to spec, only onreadystatechange OPENED and DONE should\n      // be fired.\n      if (!this.__async && (nxhr.readyState == 2 || nxhr.readyState == 3)) {\n        return;\n      }\n\n      // Default values according to spec.\n      this.status = 0;\n      this.statusText = this.responseText = \"\";\n      this.responseXML = null;\n      this.response = null;\n\n      if (this.readyState >= qx.bom.request.Xhr.HEADERS_RECEIVED) {\n        // In some browsers, XHR properties are not readable\n        // while request is in progress.\n        try {\n          this.status = nxhr.status;\n          this.statusText = nxhr.statusText;\n          this.response = nxhr.response;\n          if ((this.responseType === \"\") || (this.responseType === \"text\")) {\n           this.responseText = nxhr.responseText;\n          }\n          if ((this.responseType === \"\") || (this.responseType === \"document\")) {\n           this.responseXML = nxhr.responseXML;\n          }\n        } catch(XhrPropertiesNotReadable) {\n          propertiesReadable = false;\n        }\n\n        if (propertiesReadable) {\n          this.__normalizeStatus();\n          this.__normalizeResponseXML();\n        }\n      }\n\n      this.__readyStateChange();\n\n      // BUGFIX: IE\n      // Memory leak in XMLHttpRequest (on-page)\n      if (this.readyState == qx.bom.request.Xhr.DONE) {\n        // Allow garbage collecting of native XHR\n        if (nxhr) {\n          nxhr.onreadystatechange = function() {};\n        }\n      }\n\n    },\n\n    /**\n     * Handle readystatechange. Called internally when readyState is changed.\n     */\n    __readyStateChange: function() {\n      // Cancel timeout before invoking handlers because they may throw\n      if (this.readyState === qx.bom.request.Xhr.DONE) {\n        // Request determined DONE. Cancel timeout.\n        window.clearTimeout(this.__timerId);\n      }\n\n      // Always fire \"readystatechange\"\n      this._emit(\"readystatechange\");\n      if (this.readyState === qx.bom.request.Xhr.DONE) {\n        this.__readyStateChangeDone();\n      }\n    },\n\n    /**\n     * Handle readystatechange. Called internally by\n     * {@link #__readyStateChange} when readyState is DONE.\n     */\n    __readyStateChangeDone: function() {\n      // Fire \"timeout\" if timeout flag is set\n      if (this.__timeout) {\n        this._emit(\"timeout\");\n\n        // BUGFIX: Opera\n        // Since Opera does not fire \"error\" on network error, fire additional\n        // \"error\" on timeout (may well be related to network error)\n        if (qx.core.Environment.get(\"engine.name\") === \"opera\") {\n          this._emit(\"error\");\n        }\n\n        this.__timeout = false;\n\n      // Fire either \"abort\", \"load\" or \"error\"\n      } else {\n        if (this.__abort) {\n          this._emit(\"abort\");\n        } else{\n          if (this.__isNetworkError()) {\n            this._emit(\"error\");\n          } else {\n            this._emit(\"load\");\n          }\n        }\n      }\n\n      // Always fire \"onloadend\" when DONE\n      this._emit(\"loadend\");\n    },\n\n    /**\n     * Check for network error.\n     *\n     * @return {Boolean} Whether a network error occurred.\n     */\n    __isNetworkError: function() {\n      var error;\n\n      // Infer the XHR internal error flag from statusText when not aborted.\n      // See http://www.w3.org/TR/XMLHttpRequest2/#error-flag and\n      // http://www.w3.org/TR/XMLHttpRequest2/#the-statustext-attribute\n      //\n      // With file://, statusText is always falsy. Assume network error when\n      // response is empty.\n      if (this._getProtocol() === \"file:\") {\n        error = !this.responseText;\n      } else {\n        error = this.status === 0;\n      }\n\n      return error;\n    },\n\n    /**\n     * Handle faked timeout.\n     */\n    __onTimeout: function() {\n      // Basically, mimick http://www.w3.org/TR/XMLHttpRequest2/#timeout-error\n      var nxhr = this.__nativeXhr;\n      this.readyState = qx.bom.request.Xhr.DONE;\n\n      // Set timeout flag\n      this.__timeout = true;\n\n      // No longer consider request. Abort.\n      nxhr.aborted = true;\n      nxhr.abort();\n      this.responseText = \"\";\n      this.responseXML = null;\n\n      // Signal readystatechange\n      this.__readyStateChange();\n    },\n\n    /**\n     * Normalize status property across browsers.\n     */\n    __normalizeStatus: function() {\n      var isDone = this.readyState === qx.bom.request.Xhr.DONE;\n\n      // BUGFIX: Most browsers\n      // Most browsers tell status 0 when it should be 200 for local files\n      if (this._getProtocol() === \"file:\" && this.status === 0 && isDone) {\n        if (!this.__isNetworkError()) {\n          this.status = 200;\n        }\n      }\n\n      // BUGFIX: IE\n      // IE sometimes tells 1223 when it should be 204\n      if (this.status === 1223) {\n        this.status = 204;\n      }\n\n      // BUGFIX: Opera\n      // Opera tells 0 for conditional requests when it should be 304\n      //\n      // Detect response to conditional request that signals fresh cache.\n      if (qx.core.Environment.get(\"engine.name\") === \"opera\") {\n        if (\n          isDone &&                 // Done\n          this.__conditional &&     // Conditional request\n          !this.__abort &&          // Not aborted\n          this.status === 0         // But status 0!\n        ) {\n          this.status = 304;\n        }\n      }\n    },\n\n    /**\n     * Normalize responseXML property across browsers.\n     */\n    __normalizeResponseXML: function() {\n      // BUGFIX: IE\n      // IE does not recognize +xml extension, resulting in empty responseXML.\n      //\n      // Check if Content-Type is +xml, verify missing responseXML then parse\n      // responseText as XML.\n      if (qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n          (this.getResponseHeader(\"Content-Type\") || \"\").match(/[^\\/]+\\/[^\\+]+\\+xml/) &&\n           this.responseXML && !this.responseXML.documentElement) {\n        var dom = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n        dom.async = false;\n        dom.validateOnParse = false;\n        dom.loadXML(this.responseText);\n        this.responseXML = dom;\n      }\n    },\n\n    /**\n     * Handler for native unload event.\n     */\n    __onUnload: function() {\n      try {\n        // Abort and dispose\n        if (this) {\n          this.dispose();\n        }\n      } catch(e) {}\n    },\n\n    /**\n     * Helper method to determine whether browser supports reusing the\n     * same native XHR to send more requests.\n     * @return {Boolean} <code>true</code> if request object reuse is supported\n     */\n    __supportsManyRequests: function() {\n      var name = qx.core.Environment.get(\"engine.name\");\n      var version = qx.core.Environment.get(\"browser.version\");\n\n      return !(name == \"mshtml\" && version < 9 ||\n               name == \"gecko\" && version < 3.5);\n    },\n\n    /**\n     * Throw when already disposed.\n     */\n    __checkDisposed: function() {\n      if (this.__disposed) {\n        throw new Error(\"Already disposed\");\n      }\n    }\n  },\n\n  defer: function() {\n    qx.core.Environment.add(\"qx.debug.io\", false);\n  }\n});\n"
  ]
}