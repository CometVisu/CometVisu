{
  "version": 3,
  "sources": [
    "/home/runner/work/CometVisu/CometVisu/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/xml/Element.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "statics",
    "__xpe",
    "XML_SERIALIZER",
    "serialize",
    "element",
    "dom",
    "Node",
    "isDocument",
    "documentElement",
    "XMLSerializer",
    "serializeToString",
    "xml",
    "outerHTML",
    "selectSingleNode",
    "query",
    "namespaces",
    "core",
    "Environment",
    "get",
    "XPathEvaluator",
    "xpe",
    "resolver",
    "prefix",
    "createNSResolver",
    "evaluate",
    "XPathResult",
    "FIRST_ORDERED_NODE_TYPE",
    "singleNodeValue",
    "err",
    "Error",
    "namespaceString",
    "ownerDocument",
    "setProperty",
    "selectNodes",
    "result",
    "ORDERED_NODE_SNAPSHOT_TYPE",
    "nodes",
    "i",
    "snapshotLength",
    "snapshotItem",
    "getElementsByTagNameNS",
    "namespaceURI",
    "tagname",
    "doc",
    "Element",
    "getSingleNodeText",
    "node",
    "getText",
    "setAttributeNS",
    "document",
    "namespaceUri",
    "name",
    "value",
    "attr",
    "createNode",
    "nodeValue",
    "setAttributeNode",
    "getAttributeNS",
    "attributes",
    "attribute",
    "getQualifiedItem",
    "createSubElementNS",
    "parent",
    "createElementNS",
    "appendChild",
    "defer",
    "window"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/**\n * Cross browser XML Element API\n *\n * API to select, query and serialize XML elements.\n *\n * Further information:\n *\n * * <a href=\"https://developer.mozilla.org/en-US/docs/Parsing_and_serializing_XML\">MDN Parsing and Serializing XML</a>\n *\n * Please note that nodes selected using the <code>selectSingleNode()</code> and\n * <code>selectNodes()</code> methods remain in their document context so\n * <code>qx.xml.Element.selectNodes(foo, \"//bar\");</code>\n * will search the entire document for any nodes named \"bar\", not just the\n * <code>foo</code> node.\n */\nqx.Class.define(\"qx.xml.Element\",\n{\n  statics :\n  {\n    __xpe : null,\n\n    /**\n     * @type {Boolean} <code>true</code> if the native XMLSerializer should be used,\n     * <code>false</code> otherwise.\n     */\n    XML_SERIALIZER : false,\n\n    /**\n     * The subtree rooted by the specified element or document is serialized to a string.\n     *\n     * @param element {Element | Document} The root of the subtree to be serialized. This could be any node, including a Document.\n     * @return {String} Serialized subtree\n     */\n    serialize : function(element)\n    {\n      if (qx.dom.Node.isDocument(element)) {\n        element = element.documentElement;\n      }\n\n      if (this.XML_SERIALIZER) {\n        return (new XMLSerializer()).serializeToString(element);\n      } else {\n        return element.xml || element.outerHTML;\n      }\n    },\n\n\n    /**\n     * Selects the first XmlNode that matches the XPath expression.\n     *\n     * @param element {Element | Document} root element for the search\n     * @param query {String} XPath query\n     * @param namespaces {Map} optional map of prefixes and their namespace URIs\n     * @return {Element} first matching element\n     */\n    selectSingleNode : function(element, query, namespaces)\n    {\n      if (qx.core.Environment.get(\"html.xpath\")) {\n        if(!this.__xpe) {\n          this.__xpe = new XPathEvaluator();\n        }\n\n        var xpe = this.__xpe;\n\n        var resolver;\n\n        if(namespaces) {\n          resolver = function(prefix){\n            return namespaces[prefix] || null;\n          };\n        }\n        else {\n          resolver = xpe.createNSResolver(element);\n        }\n\n        try {\n          return xpe.evaluate(query, element, resolver, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n        } catch(err) {\n          throw new Error(\"selectSingleNode: query: \" + query + \", element: \" + element + \", error: \" + err);\n        }\n      }\n\n      if (qx.core.Environment.get(\"xml.selectsinglenode\")) {\n        if (namespaces) {\n          var namespaceString = \"\";\n          for (var prefix in namespaces) {\n            namespaceString += \"xmlns:\" + prefix + \"='\" + namespaces[prefix] + \"' \";\n          }\n\n          // If the element is a node, set the selection namespace on its parent document.\n          if (element.ownerDocument) {\n            element.ownerDocument.setProperty(\"SelectionNamespaces\", namespaceString);\n          }\n          // element is a document\n          else {\n            element.setProperty(\"SelectionNamespaces\", namespaceString);\n          }\n\n        }\n\n        return element.selectSingleNode(query);\n      }\n\n      throw new Error(\"No XPath implementation available!\");\n    },\n\n\n    /**\n     * Selects a list of nodes matching the XPath expression.\n     *\n     * @param element {Element | Document} root element for the search\n     * @param query {String} XPath query\n     * @param namespaces {Map} optional map of prefixes and their namespace URIs\n     * @return {Element[]} List of matching elements\n     */\n    selectNodes : function(element, query, namespaces)\n    {\n      if (qx.core.Environment.get(\"html.xpath\")) {\n        var xpe = this.__xpe;\n\n        if(!xpe) {\n          this.__xpe = xpe = new XPathEvaluator();\n        }\n\n        var resolver;\n\n        if(namespaces) {\n          resolver = function(prefix){\n            return namespaces[prefix] || null;\n          };\n        }\n        else {\n          resolver = xpe.createNSResolver(element);\n        }\n\n        try {\n          var result = xpe.evaluate(query, element, resolver, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n        } catch(err) {\n          throw new Error(\"selectNodes: query: \" + query + \", element: \" + element + \", error: \" + err);\n        }\n\n        var nodes = [];\n        for (var i=0; i<result.snapshotLength; i++) {\n          nodes[i] = result.snapshotItem(i);\n        }\n\n        return nodes;\n      }\n\n      if (qx.core.Environment.get(\"xml.selectnodes\")) {\n        if (namespaces) {\n          var namespaceString = \"\";\n          for (var prefix in namespaces) {\n            namespaceString += \"xmlns:\" + prefix + \"='\" + namespaces[prefix] + \"' \";\n          }\n\n          // If the element is a node, set the selection namespace on its parent document.\n          if (element.ownerDocument) {\n            element.ownerDocument.setProperty(\"SelectionNamespaces\", namespaceString);\n          }\n          // element is a document\n          else {\n            element.setProperty(\"SelectionNamespaces\", namespaceString);\n          }\n\n        }\n\n        return element.selectNodes(query);\n      }\n\n      throw new Error(\"No XPath implementation available!\");\n    },\n\n\n    /**\n     * Returns a list of elements with the given tag name belonging to the given namespace\n     *\n     * (See\n     * <a href=\"https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagNameNS\">MDN\n     * Reference</a>).\n     *\n     * @param element {Element | Document} the element from where the search should start.\n     *       Note that only the descendants of this element are included in the search, not the node itself.\n     * @param namespaceURI {var} is the namespace URI of elements to look for . For example, if you need to look\n     *       for XHTML elements, use the XHTML namespace URI, <tt>http://www.w3.org/1999/xhtml/</tt>.\n     * @param tagname {String} the tagname to look for\n     * @return {Element[]} a list of found elements in the order they appear in the tree.\n     */\n    getElementsByTagNameNS : function(element, namespaceURI, tagname)\n    {\n      if (qx.core.Environment.get(\"xml.getelementsbytagnamens\")) {\n        return element.getElementsByTagNameNS(namespaceURI, tagname);\n      }\n\n      if (qx.core.Environment.get(\"xml.domproperties\")) {\n        var doc = element.ownerDocument || element;\n\n        doc.setProperty(\"SelectionLanguage\", \"XPath\");\n        doc.setProperty(\"SelectionNamespaces\", \"xmlns:ns='\" + namespaceURI + \"'\");\n\n        return qx.xml.Element.selectNodes(element, 'descendant-or-self::ns:' + tagname);\n      }\n\n      throw new Error(\"The client does not support this operation!\");\n    },\n\n\n    /**\n     * Selects the first XmlNode that matches the XPath expression and returns the text content of the element\n     *\n     * @param element {Element|Document} root element for the search\n     * @param query {String}  XPath query\n     * @return {String} the joined text content of the found element or null if not appropriate.\n     */\n    getSingleNodeText : function(element, query)\n    {\n      var node = this.selectSingleNode(element, query);\n      return qx.dom.Node.getText(node);\n    },\n\n\n    /**\n     * Adds or sets an attribute with the given namespace on a node\n     *\n     * @param document {Document} The node's parent document, created e.g. by\n     * {@link qx.xml.Document#create}\n     * @param element {Element} XML/DOM element to modify\n     * @param namespaceUri {String} Namespace URI\n     * @param name {String} Attribute name\n     * @param value {String} Attribute value\n     */\n    setAttributeNS : function(document, element, namespaceUri, name, value)\n    {\n      if (qx.core.Environment.get(\"xml.attributens\")) {\n        element.setAttributeNS(namespaceUri, name, value);\n      }\n\n      else if (qx.core.Environment.get(\"xml.createnode\")) {\n        var attr = document.createNode(2, name, namespaceUri);\n        attr.nodeValue = value;\n        element.setAttributeNode(attr);\n      }\n\n      else {\n        throw new Error(\"The client does not support this operation!\");\n      }\n    },\n\n    /**\n     * Get the value of the attribute with the given namespace and name\n     *\n     * @param element {Element} XML/DOM element to modify\n     * @param namespaceUri {String} Namespace URI\n     * @param name {String} Attribute name\n     * @return {String} the value of the attribute, empty string if not found\n     */\n    getAttributeNS : function(element, namespaceUri, name)\n    {\n      if (qx.core.Environment.get(\"xml.attributens\")) {\n        var value = element.getAttributeNS(namespaceUri, name);\n        return value === null ? '' : value;\n      }\n\n      if (qx.core.Environment.get(\"xml.getqualifieditem\")) {\n        var attributes = element.attributes;\n        var value = null;\n        if(attributes)\n        {\n          var attribute = attributes.getQualifiedItem(name,namespaceUri);\n          if(attribute)\n          {\n            value = attribute.nodeValue;\n          }\n        }\n        return value === null ? '' : value;\n      }\n\n      throw new Error(\"The client does not support this operation!\");\n    },\n\n\n    /**\n     * Creates an element with the given namespace and appends it to an existing\n     * element\n     *\n     * @param document {Document} The node's parent document, created e.g. by\n     * {@link qx.xml.Document#create}\n     * @param parent {Element} The parent element for the new sub-element\n     * @param name {String} The new element's name\n     * @param namespaceUri {String} Namespace URI for the new element\n     *\n     * @return {Element} The newly created sub-element\n     */\n    createSubElementNS : function(document, parent, name, namespaceUri) {\n      if (qx.core.Environment.get(\"xml.createelementns\")) {\n        // the \"x\" prefix has no importance. when there's a conflict,\n        // mozilla engine assigns an alternative prefix automatically.\n        // not putting a prefix means to assign default namespace prefix\n        // to the given namespace uri.\n        var node = document.createElementNS(namespaceUri, \"x:\" + name);\n        parent.appendChild(node);\n        return node;\n      }\n\n      if (qx.core.Environment.get(\"xml.createnode\")) {\n        var node = document.createNode(1, name, namespaceUri);\n        parent.appendChild(node);\n        return node;\n      }\n\n      throw new Error(\"The client does not support this operation!\");\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DEFER\n  *****************************************************************************\n  */\n\n  defer : function(statics)\n  {\n    statics.XML_SERIALIZER = (window.XMLSerializer &&\n     !( qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n     qx.core.Environment.get(\"engine.version\") >= 9 &&\n     qx.core.Environment.get(\"browser.documentmode\") >= 9));\n  }\n});\n"
  ]
}