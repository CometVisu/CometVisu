{"version":3,"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Audio.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Break.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/DesignToggle.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/ImageTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Info.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Line.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/MultiTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NavBar.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NotificationCenterBadge.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageJump.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageLink.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PushButton.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Refresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Reload.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Rgb.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Roundbar.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Slide.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Switch.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Text.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Toggle.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Trigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Unknown.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/UrlTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Video.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Web.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/WgPluginInfo.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/WidgetInfoAction.js"],"names":["qx","Class","define","extend","cv","ui","structure","AbstractWidget","include","common","Update","properties","src","check","nullable","id","width","height","autoplay","init","loop","thresholdValue","members","_getInnerDomString","style","this","getWidth","getHeight","isLoop","getId","getSrc","getActor","getDomElement","querySelector","_update","address","value","applyMapping","getThresholdValue","audioWidget","play","defer","statics","WidgetFactory","registerClass","pure","Audio","$$dbClassInfo","Bootstrap","executePendingDefers","AbstractBasicWidget","getDomString","Break","Operate","HasAnimatedButton","construct","props","constructor","call","data","store","Json","io","rest","Client","getBaseUrl","addListener","ev","setAvailableDesigns","getData","availableDesigns","Config","getDesign","_action","path","actor","isCanceled","designs","getAvailableDesigns","oldDesign","textContent","newDesign","getItem","indexOf","length","URL","util","Location","getHref","regexp","RegExp","search","setHref","replace","parts","split","req","Uri","appendParamsToUrl","design","DesignToggle","HasChildren","noWidget","name","target","action","event","getTarget","TemplateEngine","getInstance","scrollToPage","getBubbles","stopPropagation","_onDomReady","Group","prototype","base","hstyle","getAlign","container","getName","getChildrenDomString","getClasses","getStyle","Refresh","cropTop","cropBottom","widthFit","placeholder","__P_55_0","imgStyle","getWidthFit","getCropTop","getCropBottom","top","bottom","__P_55_1","getPlaceholder","ResourceManager","toUri","error","parseUri","protocol","startsWith","handleUpdate","text","valueElem","getValueElement","display","setAttribute","_applyVisible","getRefresh","Image","updateType","suffix","sendValue","Object","keys","getLayout","parser","WidgetParser","extractLayout","getPageType","getUpdateType","__P_56_0","getSuffix","trim","imageChild","url","getSendValue","sendToBackend","ImageTrigger","Info","anonymous","refine","InfoAction","HandleLongpress","downValue","shortDownValue","downLabel","upValue","shortUpValue","upLabel","isAbsolute","min","max","infoPosition","ret_val","actordown","getDownLabel","actorup","getUpLabel","actorinfo","getInfoPosition","getActors","querySelectorAll","initListeners","forEach","Registration","_onPointerDown","__P_57_0","element","classList","contains","parentNode","_onLongTap","__P_57_1","getCurrentTarget","isShort","isDown","getShortDownValue","getShortUpValue","getDownValue","getUpValue","bitMask","getIsAbsolute","bvalue","parseFloat","getBasicValue","isNaN","Math","getMin","getMax","variantInfo","getDownActor","getUpActor","getInfoActor","InfoTrigger","Line","showstatus","elementsPerLine","buttonConfiguration","mapping","getMapping","getElementsPerLine","config","getButtonConfiguration","sort","i","buttonConfig","label","mappedValue","defaultValueHandling","undefined","defaultValue2DOM","e","_processIncomingValue","applyTransform","children","index","Array","hasOwnProperty","isPressed","DeferredCall","remove","add","schedule","getActionValue","isAnonymous","MultiTrigger","scope","position","dynamic","visible","_navbarTop","_navbarLeft","_navbarRight","_navbarBottom","_touchX","_touchY","initializeNavbars","pos","elem","document","innerHTML","self","addEventListener","evt","touches","pPH","pagePartsHandler","navbars","left","mobileDevice","fadeVisible","clientX","clientY","x","y","enoughDistance","abs","toRight","fadeNavbar","getGlobalPath","getPath","pop","join","getPosition","NavBar","message","Bus","subscribe","classes","i_right","setContainerClass","splice","counter","apply","hideWhenEmpty","__P_58_0","NotificationCenterBadge","center","NotificationCenter","getMessages","_onChangeCounter","_onChangeGlobalSeverity","disableBadge","_skipNextEvent","getType","toggleVisibility","__P_58_1","getSeverities","messages","isHideWhenEmpty","getCounter","destruct","removeListener","implement","IPage","__P_59_0","_onChangeVisible","parentPage","getParentPage","debug","tuple","property","defaultValue","charAt","toUpperCase","substr","bind","setInitialized","getAddress","_initOnCreate","allPages","createFinal","unsubscribe","initialized","showTopNavigation","showFooter","showNavbarTop","showNavbarBottom","showNavbarLeft","showNavbarRight","backdropAlign","backdropType","linkVisible","size","backdrop","__P_59_1","__P_59_2","_applyNavbarVisibility","old","i_name","layout","Manager","COLSPAN_CLASS","applyColumnWidths","getBackdrop","ResizeHandler","invalidateBackdrop","pageType","subpage","getFlavour","getSize","getBackdropAlign","getBackdropType","Page","ga","parseInt","list","Model","isWriteAddress","visu","write","Transform","encode","transform","bindClickToWidget","activeScope","targetPath","_onScrollToPage","page_id","page","getInstanceById","model","getWidgetDataByElement","Tree","getParentWidget","pageJumps","markPageJumps","parentName","match","getTargetPath","getPageIdByPath","PageJump","wstyle","_typeof","getWstyle","PageLink","addElementListener","_onPointerUp","off","type","PushButton","BasicUpdate","defaultUpdate","restart","reload","Reload","valElem","decode","bg","window","getComputedStyle","Rgb","__P_60_0","coord","toFixed","createBarPath","startAngle","startArrowPoint","endAngle","endArrowPoint","radius","getBBox","arguments","startArrowPointAngle","endArrowPointAngle","clockwise","rI","rIM","rM","rMO","rO","startInner","cos","sin","startMiddle","startOuter","centerInner","centerOuter","endInner","endMiddle","endOuter","startMiddleFlag","PI","startEndFlag","endMiddleFlag","startMiddleDir","endMiddleDir","arc","start","end","r","flag","cw","Roundbar","rMax","isInside","a","rMiddle","uMiddle","lMiddle","dMiddle","u","d","l","createPointerPath","angle","p","s","c","wx","wy","thickness","tx","ty","indicators","axisradius","axiswidth","axiscolor","ranges","minorradius","minorwidth","minorspacing","minorcolor","majorradius","majorwidth","majorposition","majorcolor","labels","labelstyle","arrowtype","spacing","overflowarrow","fontsize","textx","texty","textlength","textanchor","linespace","bboxgrow","currentRatioValue","targetRatioValue","__P_60_1","bboxAdd","bbox","setCurrentRatioValue","getIndicators","fill","setTargetRatioValue","getStart","getEnd","cntValues","svgMajor","svgMinor","svgLabels","svgRanges","svgIndicators","svgText","getAxisradius","getAxiswidth","sMax","eMax","indicator","startarrow","endarrow","BBox","getMinorwidth","getMinorspacing","rIn","getMinorradius","rOut","test","delta","cnt","getMinorcolor","getMajorwidth","_rIn","getMajorradius","_rOut","getMajorposition","getMajorcolor","getLabelstyle","getLabels","labelnumber","alignmentBaseline","textAnchor","textAngle","orientation","_textAngle","labelid","$$user_path","align","getRanges","range","sRange","eRange","rRange","wRange","thisBBox","number","push","LimitedRateUpdateAnimator","__P_60_2","showValue","getTexty","getTextanchor","getFontsize","getTextx","getLinespace","repeat","textDistribution","middle","textU","textD","getTextlength","html","getBboxgrow","getDebug","sectorPath","axisPath","stroke","getAxiscolor","getTargetRatioValue","tspan","from","getElementsByTagName","valueFormat","applyFormat","setTo","isVisible","ratio","indicatorNumber","getElementsByClassName","targetAngle","getOverflowarrow","isBar","_this","__P_61_0","__P_61_1","__P_61_2","states","__P_61_3","__P_61_4","removeListenerById","__P_61_5","step","showInvalidValues","sendOnFinish","__P_61_6","__P_61_7","__P_61_8","__P_61_9","__P_61_10","getFormat","Slide","__P_61_11","Function","throttle","__P_61_12","trailing","__P_61_13","instant","relaxDisplay","getStep","realValue","getShowInvalidValues","stepValue","round","floor","stepCount","factor","pow","sign","setBasicValue","displayValue","setValue","applyStyling","button","actorStyles","getPropertyValue","marginLeft","borderRadius","_disposeObjects","handleEvent","newRatio","boundingRect","currentTarget","getBoundingClientRect","computedStyle","paddingLeft","removeEventListener","newValue","getSendOnFinish","onValue","offValue","getOffValue","getOnValue","Switch","Text","getNextMappedValue","Toggle","shortValue","Trigger","getShortThreshold","isShortDefault","getShortValue","core","set","$$type","unknownType","parentWidget","locale","tr","getUnknownType","Unknown","params","__P_62_0","getXhr","_applyUrl","setUrl","xhr","request","Xhr","method","accept","requestData","getParams","UrlTrigger","send","isAutoplay","video","pause","Video","frameborder","background","scrolling","webStyle","getFrameborder","getBackground","getScrolling","addr","iframe","refreshAction","getAttribute","Web","variable","__P_63_0","_applyVariable","_onSuccess","executeWhenDomFinished","getRequest","getResponse","getVariable","WgPluginInfo","childObjects","WidgetInfoAction"],"mappings":"gPAsCCA,GAAAC,MAAAC,OAAA,8BACGC,OAAOC,GAAAC,GAAOC,UAAAC,eACdC,QAAQJ,GAAGC,GAAGI,OAAAC,OAQjBC,YACGC,KACEC,MAAK,SAAEC,UAAO,GAATC,IACHF,MAAE,SAAEC,UAAO,GAATE,OACJH,MAAO,SAAEC,UAAO,GAATG,QACPJ,MAAQ,SAAEC,UAAO,GAATI,UACRL,MAAQ,UAAIM,MAAK,GAAPC,MACVP,MAAM,UAAEM,MAAK,GAAPE,gBACNR,MAAA,SAAkBM,KAAK,IAO5BG,SAGKC,mBAAA,WAGE,IAAAC,EAAA,qBAEAA,GAAS,SAAYC,KAAAC,WAAA,wBAGrBF,GAAS,UAAaC,KAAAE,YAAA,cAGtBH,EAAS,UAASA,EAAA,6CAGZJ,EAAAK,KAAYG,SAAK,SAAgB,GACvC,MAAM,iCAANH,KAAAI,QAAA,KAAAX,EAAAE,EAAAI,EAAA,2BAAAC,KAAAK,SAAA,uBAIFC,SAAA,WACA,OAAQN,KAAEO,gBAAWC,cAAA,iBAS1BC,QAAA,SAAAC,EAAAC,SACcX,KAAAY,aAAUZ,KAAVa,sBAEP,IAAIC,EAAad,KAAAM,0BAEfQ,EAAIC,UApCDC,MAzBmC,SAAAC,GAoE5CtC,GAAKC,GAAEC,UAAAqC,cAAkBC,cAAA,QAAAF,MApEmBtC,GAA9CC,GAAAC,UAAAuC,KAAAC,MAAAC,cAAAA,kLCvCD/C,GAAEgD,UAAUC,qBAAqBF,GA+BjC/C,GAAEC,MAAMC,OAAO,8BACdC,OAAQC,GAAGC,GAAGC,UAAU4C,oBAOxB5B,SAEE6B,aAAc,WACZ,MAAO,UAIXV,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,QAASF,MA/CxDtC,GAAEC,GAAGC,UAAUuC,KAAKO,MAAML,cAAgBA,yYCA1C/C,GAAEgD,UAAUC,qBAAqBF,GAiCjC/C,GAAEC,MAAMC,OAAO,qCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAO6C,mBAO7CC,UAAW,SAASC,GAClBpD,GAAAC,GAAAC,UAAAC,eAAAkD,YAAAC,KAAAjC,KAAqB+B,GACP,IAAIxD,GAAG2D,KAAKC,MAAMC,KAAKzD,GAAG0D,GAAGC,KAAKC,OAAOC,aAAe,iBAChEC,YAAY,SAAU,SAAUC,GACpC1C,KAAK2C,oBAAoBD,EAAGE,YAC3B5C,OAQLd,YACE2D,kBAAoBzD,MAAO,QAASM,UAQtCG,SAEEC,mBAAoB,WAClB,MAAO,yDAA2DnB,GAAGmE,OAAOC,YAAc,gBAU5FC,QAAS,SAASC,EAAMC,EAAOC,GAC7B,IAAIA,EAAJ,CAIA,IAAMC,EAAUpD,KAAKqD,sBAEfC,EAAYtD,KAAKO,gBAAgBC,cAAc,UAAU+C,YACzDC,EAAYJ,EAAQK,SAASL,EAAQM,QAAQJ,GAAa,GAAKF,EAAQO,QAEvEC,EAAMjF,GAAGkF,KAAKC,SAASC,UACvBC,EAAS,IAAIC,OAAO,UAAYX,GACtC,IAA4B,IAAxBM,EAAIM,OAAOF,GACbrF,GAAGkF,KAAKC,SAASK,QAAQP,EAAIQ,QAAQJ,EAAQ,UAAUR,QAClD,CACL,IAAMa,EAAQ1F,GAAGkF,KAAKC,SAASC,UAAUO,MAAM,KAC3CC,EAAMhG,GAAGsF,KAAKW,IAAIC,kBAAkBJ,EAAM,IAAKK,OAAQlB,IACvDa,EAAMV,OAAS,IACjBY,GAAO,IAAIF,EAAM,IAEnB1F,GAAGkF,KAAKC,SAASK,QAAQI,OAK/BvD,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,eAAgBF,MAvG/DtC,GAAEC,GAAGC,UAAUuC,KAAKuD,aAAarD,cAAgBA,4OCAjD/C,GAAEgD,UAAUC,qBAAqBF,GAsEjC/C,GAAEC,MAAMC,OAAO,8BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,QAASJ,GAAGC,GAAGI,OAAO4F,YAOtB1F,YACE2F,UACEzF,MAAO,UACPM,MAAM,GAERoF,MACE1F,MAAO,SACPM,KAAM,IAERqF,QACE3F,MAAO,SACPC,UAAU,IASdQ,SASEmF,OAAQ,SAAUC,GAChB,GAAIjF,KAAKkF,YAAa,CACpBvG,GAAGwG,eAAeC,cAAcC,aAAarF,KAAKkF,aAC9CD,EAAMK,cACRL,EAAMM,oBAMZjF,SAAU,WACR,OAAON,KAAKO,iBAIdiF,YAAa,WACX7G,GAAAC,GAAAC,UAAAuC,KAAAqE,MAAAC,UAAAF,YAAAG,KAAA1D,KAAAjC,MACAA,KAAKO,gBAAgBR,MAAM,WAAa,GAI1C2B,aAAc,WAEZ,IAAIkE,EAAS,GACT5F,KAAK6F,aACPD,GAAU,qBAAuB5F,KAAK6F,WAAa,KAGrD,IAAIC,EAAY,yBACZ9F,KAAK+F,YACPD,GAAa,OAASF,EAAS,IAAM5F,KAAK+F,UAAY,SAGxDD,GAAa9F,KAAKgG,uBAClBF,GAAa,SAEb,MAAO,eAAiB9F,KAAKiG,aAAe,KAAOjG,KAAKkG,WAAa,IAAMJ,EAAY,WAI3F9E,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,QAASF,MArJxDtC,GAAEC,GAAGC,UAAUuC,KAAKqE,MAAMnE,cAAgBA,kSCA1C/C,GAAEgD,UAAUC,qBAAqBF,GAiCjC/C,GAAEC,MAAMC,OAAO,8BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAExBC,SAAUJ,GAAGC,GAAGI,OAAOmH,QAASxH,GAAGC,GAAGI,OAAOC,QAO7CC,YACEK,OAAeH,MAAO,SAAUM,KAAM,QACtCF,QAAeJ,MAAO,SAAUC,UAAU,GAC1C+G,SAAehH,MAAO,UACtBiH,YAAejH,MAAO,UACtBD,KAAeC,MAAO,SAAUM,KAAM,IACtC4G,UAAelH,MAAO,UAAWM,MAAM,GACvC6G,aACEnH,OAAQ,OAAQ,MAAO,OAAQ,WAC/BM,KAAM,SASVG,SACE2G,SAAO,KAGP1G,mBAAoB,WAElB,IAAI2G,EAAW,GACXzG,KAAKC,aACPwG,GAAY,SAAWzG,KAAKC,WAAa,MAEhB,IAAvBD,KAAK0G,gBACPD,GAAY,mBAEVzG,KAAKE,cACPuG,GAAY,UAAYzG,KAAKE,YAAc,KAE7C,GAA0B,KAAtBF,KAAK2G,cAAgD,KAAzB3G,KAAK4G,gBAAwB,CAC3D,IAAIC,EAAM,KACNC,EAAS,GACa,KAAtB9G,KAAK2G,eAEPG,EAAS,kBADTD,EAAM,IAAM7G,KAAK2G,eAGU,KAAzB3G,KAAK4G,kBACPE,EAAS,sBAAwBD,EAAM,MAAQ7G,KAAK4G,gBAAkB,MAExEH,GAAY,sBAAwBI,EAAM,IAAMC,EAGlD,IAAI3H,EAAMa,KAAK+G,WACf,IAAK5H,EACH,OAAQa,KAAKgH,kBACX,IAAK,OACH7H,EAAMZ,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAM,uBAClD,MAEF,IAAK,UACHT,GAAY,gBACZ,MAEF,IAAK,MACHzG,KAAKmH,MAAM,8BAIjB,MAAO,gCAAkChI,EAAM,YAAcsH,EAAW,cAM1EM,SAAU,WACR,IAAK/G,KAAKwG,SAAO,CACf,IAAIrH,EAAMa,KAAKK,SACG9B,GAAGsF,KAAKW,IAAI4C,SAASpH,KAAKK,UAC7BgH,UAAalI,EAAImI,WAAW,OAEzCnI,EAAMZ,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAM/H,IAEpDa,KAAKwG,SAAQrH,GAAO,GAEtB,OAAOa,KAAKwG,UAGde,aAAc,SAASC,EAAM9G,GAC3B,IAAM+G,EAAYzH,KAAK0H,kBACvB,GAAKF,EAiBHC,EAAU1H,MAAM4H,QAAU,cAhB1B,OAAQ3H,KAAKgH,kBACX,IAAK,MACHQ,EAAOxH,KAAK+G,WACZU,EAAU1H,MAAM4H,QAAU,SAC1B,MAEF,IAAK,OACHH,EAAOjJ,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAM,uBACnDO,EAAU1H,MAAM4H,QAAU,SAC1B,MAEF,IAAK,UACHF,EAAU1H,MAAM4H,QAAU,OAMhCF,EAAUG,aAAa,MAAOJ,IAIhCE,gBAAiB,WACf,OAAO1H,KAAKO,gBAAgBC,cAAc,QAI5CqH,cAAe,SAASlH,GACtB,IAAM8G,EAAYzH,KAAK0H,mBAClBD,GAAazH,KAAK8H,aAAe,KAGxB,IAAVnH,EACF8G,EAAUG,aAAa,MAAO5H,KAAK+G,YAEnCU,EAAUG,aAAa,MAAO,OAKpC5G,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,QAASF,MAzKxDtC,GAAEC,GAAGC,UAAUuC,KAAK2G,MAAMzG,cAAgBA,gZCA1C/C,GAAEgD,UAAUC,qBAAqBF,GAsEjC/C,GAAEC,MAAMC,OAAO,qCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAO4C,QACbjD,GAAGC,GAAGI,OAAO6C,kBACblD,GAAGC,GAAGI,OAAOmH,QACbxH,GAAGC,GAAGI,OAAOC,QAQfC,YACEM,QAAUJ,MAAO,SAAUC,UAAU,GACrC2I,YAAa5I,MAAO,SAAUM,KAAM,IACpCH,OAAQH,MAAO,SAAUM,KAAM,QAC/BP,KAAOC,MAAO,SAAUC,UAAU,GAClC4I,QAAU7I,MAAO,SAAUC,UAAU,GACrC6I,WAAa9I,MAAO,SAAUM,KAAM,KAQtCG,SAEEC,mBAAoB,WAClB,IAAIC,EAAQ,GACiC,IAAzCoI,OAAOC,KAAKpI,KAAKqI,aAAa1E,SAChC5D,GAASpB,GAAG2J,OAAOC,aAAaC,cAAcxI,KAAKqI,YAAarI,KAAKyI,gBAEnEzI,KAAKE,cACPH,GAAS,UAAYC,KAAKE,YAAc,KAEtCH,EAAM4D,OAAS,IACjB5D,EAAQ,WAAWA,EAAM,KAG3B,IAAImD,EAAQ,sBACiB,SAAzBlD,KAAK0I,gBACPxF,GAAS,aAAelD,KAAK2I,SAAS3I,KAAKK,SAAW,IAAML,KAAK4I,aAAe,IAAM7I,EAAM8I,OAAS,MAErG3F,GAAS,cAAgBnD,EAAQ,MAInC,OADAmD,GAAS,UAIXzC,QAAS,SAASC,EAASC,GACzB,IAAMmI,EAAa9I,KAAKO,gBAAgBC,cAAc,OACtD,GAA6B,SAAzBR,KAAK0I,gBACP,GAAc,IAAV/H,EACFmI,EAAW/I,MAAM4H,QAAU,WACtB,CACLmB,EAAWlB,aAAa,MAAO5H,KAAK2I,SAAS3I,KAAKK,SAAW,IAAML,KAAK4I,cACxEE,EAAW/I,MAAM4H,QAAU,aAExB,GAA6B,WAAzB3H,KAAK0I,gBACd,GAAc,IAAV/H,EACFmI,EAAW/I,MAAM4H,QAAU,WACtB,CACLmB,EAAWlB,aAAa,MAAO5H,KAAK2I,SAAS3I,KAAKK,SAAWM,EAAQ,IAAMX,KAAK4I,cAChFE,EAAW/I,MAAM4H,QAAU,UAUjCgB,SAAU,SAASI,GACCxK,GAAGsF,KAAKW,IAAI4C,SAAS2B,GACxB1B,UAAa0B,EAAIzB,WAAW,OAEzCyB,EAAMxK,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAM6B,IAEpD,OAAOA,GAGT/F,QAAS,WACqB,KAAxBhD,KAAKgJ,gBAGThJ,KAAKiJ,cAAcjJ,KAAKgJ,kBAI5BhI,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,eAAgBF,MArK/DtC,GAAEC,GAAGC,UAAUuC,KAAK8H,aAAa5H,cAAgBA,8JCAjD/C,GAAEgD,UAAUC,qBAAqBF,GAsCjC/C,GAAEC,MAAMC,OAAO,6BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,QAASJ,GAAGC,GAAGI,OAAOC,OAOtBY,SAEEC,mBAAoB,WAClB,MAAO,0DAlDZnB,GAAEC,GAAGC,UAAUuC,KAAK+H,KAAK7H,cAAgBA,qNCAzC/C,GAAEgD,UAAUC,qBAAqBF,GAoEjC/C,GAAEC,MAAMC,OAAO,mCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAExBC,QAASJ,GAAGC,GAAGI,OAAO4F,YAOtB1F,YACEkK,WACEC,QAAQ,EACR3J,MAAM,IAUVG,SAEEC,mBAAoB,WAClB,OAAOE,KAAKgG,yBAIhBhF,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,aAAcF,MAnG7DtC,GAAEC,GAAGC,UAAUuC,KAAKkI,WAAWhI,cAAgBA,yWCA/C/C,GAAEgD,UAAUC,qBAAqBF,GA2BjC/C,GAAEC,MAAMC,OAAO,oCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAO4C,QACbjD,GAAGC,GAAGI,OAAOC,OACbN,GAAGC,GAAGI,OAAO6C,kBACblD,GAAGC,GAAGI,OAAOuK,iBAQfrK,YACEsK,WACEpK,MAAO,SACPM,KAAM,GAER+J,gBACErK,MAAO,SACPC,UAAU,GAEZqK,WACEtK,MAAO,SACPC,UAAU,GAEZsK,SACEvK,MAAO,SACPM,KAAM,GAERkK,cACExK,MAAO,SACPC,UAAU,GAEZwK,SACEzK,MAAO,SACPC,UAAU,GAEZyK,YACE1K,MAAO,UACPM,MAAM,GAERqK,KACE3K,MAAO,SACPM,KAAM,GAERsK,KACE5K,MAAO,SACPM,KAAM,KAERuK,cACE7K,OAAQ,OAAQ,SAAU,SAC1BM,KAAM,WASVG,SAEEC,mBAAoB,WAElB,IAAIoK,EAAU,4BAEVC,EAAY,gDACZnK,KAAK6F,aACPsE,GAAa,sBAAwBnK,KAAK6F,WAAa,MAEzDsE,GAAa,IACbA,GAAa,uBAAyBnK,KAAKoK,gBAAkB,KAAO,SACpED,GAAa,SAEb,IAAIE,EAAU,8CACVrK,KAAK6F,aACPwE,GAAW,sBAAwBrK,KAAK6F,WAAa,MAEvDwE,GAAW,IACXA,GAAW,uBAAyBrK,KAAKsK,cAAgB,KAAO,SAChED,GAAW,SAEX,IAAIE,EAAY,sCACZvK,KAAK6F,aACP0E,GAAa,sBAAwBvK,KAAK6F,WAAa,MAEzD0E,GAAa,oCAEb,OAAQvK,KAAKwK,mBACX,IAAK,SACHN,GAAWC,EACXD,GAAWK,EACXL,GAAWG,EACX,MACF,IAAK,QACHH,GAAWC,EACXD,GAAWG,EACXH,GAAWK,EACX,MACF,QACEL,GAAWK,EACXL,GAAWC,EACXD,GAAWG,EAIf,OAAOH,EAAU,UAGnBO,UAAW,WACT,OAAOzK,KAAKO,gBAAgBmK,iBAAiB,qCAI/CC,cAAe,WACb3K,KAAKyK,YAAYG,QAAQ,SAAS1H,GAChC3E,GAAG0G,MAAM4F,aAAapI,YAAYS,EAAO,cAAelD,KAAK8K,eAAgB9K,OAC5EA,OAGL+K,SAAa,SAAUC,GACrB,MAAQA,EAAQC,UAAUC,SAAS,UAEjC,IADAF,EAAUA,EAAQG,YACNF,UAAUC,SAAS,UAE7B,OAAO,KAGX,OAAOF,GAGTI,WAAY,SAASnG,GACnBjF,KAAKqL,UAAS,EAAOrL,KAAK+K,SAAY9F,EAAMqG,oBAAoBL,UAAUC,SAAS,eAGrFlI,QAAS,SAASiC,GAChBjF,KAAKqL,UAAS,EAAMrL,KAAK+K,SAAY9F,EAAMqG,oBAAoBL,UAAUC,SAAS,eAGpFG,SAAU,SAAUE,EAASC,GAC3B,IAAI7K,EAEFA,EADE4K,GAAwC,OAA7BvL,KAAKyL,qBAA2D,OAA3BzL,KAAK0L,kBAC/CF,EAASxL,KAAKyL,oBAAsBzL,KAAK0L,kBAEzCF,EAASxL,KAAK2L,eAAiB3L,KAAK4L,aAG9C,IAAMC,EAAWN,EAAU,EAAI,EAE/B,GAAIvL,KAAK8L,gBAAiB,CACxB,IAAIC,EAASC,WAAWhM,KAAKiM,iBACzBC,MAAMH,KACRA,EAAS,GAEXpL,EAAQoL,EAASpL,EACjBA,EAAQwL,KAAKnC,IAAIrJ,EAAOX,KAAKoM,UAC7BzL,EAAQwL,KAAKpC,IAAIpJ,EAAOX,KAAKqM,UAE/BrM,KAAKiJ,cAActI,EAAO,SAASD,GACjC,SAAUA,EAAQ4L,YAAcT,MAIpCU,aAAc,WACZ,OAAOvM,KAAKO,gBAAgBC,cAAc,qBAG5CgM,WAAY,WACV,OAAOxM,KAAKO,gBAAgBC,cAAc,mBAG5CiM,aAAc,WACZ,OAAOzM,KAAKO,gBAAgBC,cAAc,4BAI9CQ,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,cAAeF,MA9M9DtC,GAAEC,GAAGC,UAAUuC,KAAKsL,YAAYpL,cAAgBA,2HCAhD/C,GAAEgD,UAAUC,qBAAqBF,GAgCjC/C,GAAEC,MAAMC,OAAO,6BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAOxBe,SAEE6B,aAAc,WACZ,MAAO,QAAU1B,KAAKiG,aAAe,UAAUjG,KAAKiG,aAAa,IAAM,IAAM,SA3ClFtH,GAAEC,GAAGC,UAAUuC,KAAKuL,KAAKrL,cAAgBA,uVCAzC/C,GAAEgD,UAAUC,qBAAqBF,GA4BjC/C,GAAEC,MAAMC,OAAO,qCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAOC,OAAQN,GAAGC,GAAGI,OAAO6C,mBAOlE3C,YACE0N,YACExN,MAAO,UACPM,MAAM,GAERmN,iBACEzN,MAAO,SACPM,KAAM,GAERoN,qBACE1N,MAAO,SACPC,UAAU,IASdQ,SAEEC,mBAAoB,WAElB,IAAIoK,EAAU,mDACR6C,EAAU/M,KAAKgN,aACfH,EAAkB7M,KAAKiN,qBAEvBC,EAASlN,KAAKmN,yBACJhF,OAAOC,KAAK8E,GAAQE,OAE5BxC,QAAQ,SAAUyC,GACxB,IAAMC,EAAeJ,EAAOG,GACxBE,EAAQD,EAAaC,MACzB,GAAIR,EAAS,CACX,IAAMS,EAAcxN,KAAKyN,0BAAqBC,EAAWJ,EAAa3M,OACtE,GAAI6M,IAAgBF,EAAa3M,QAAU4M,EAAO,CAChDA,EAAQ,GACRvN,KAAK2N,iBAAiBH,EAAa,SAAUI,GAC3CL,GAASK,KAKXL,IACFrD,GAAW,yDAA2DqD,EAAQ,gBAE5EV,EAAkB,GAAKQ,EAAIR,GAAoB,IACjD3C,GAAU,UAEXlK,MACH,OAAOkK,EAAU,UAGnBO,UAAW,WACT,OAAOzK,KAAKO,gBAAgBmK,iBAAiB,4BAI/CmD,sBAAuB,SAAUnN,EAASwB,GACxC,OAAOlC,KAAK8N,eAAepN,EAASwB,IAMtCqF,aAAc,WACZ,IAAMwG,EAAW/N,KAAKyK,YAChBqC,EAAsB9M,KAAKmN,yBACjCY,EAASnD,QAAQ,SAAS1H,GACxB,IAAM8K,EAAQC,MAAMvI,UAAUhC,QAAQzB,KAAK8L,EAAU7K,GAAS,EAC9D,GAAIiF,OAAOzC,UAAUwI,eAAejM,KAAK6K,EAAqBkB,GAAQ,CACpE,IAAMG,EAAa,GAAKnO,KAAKiM,iBAAsB,GAAKa,EAAoBkB,GAAOrN,MAInF,IAAIpC,GAAGsF,KAAKuK,aAAa,WACvBlL,EAAM+H,UAAUoD,OAAOF,EAAY,kBAAoB,iBACvDjL,EAAM+H,UAAUqD,IAAIH,EAAY,gBAAkB,oBACjDnO,MAAMuO,aAEVvO,OAOLwO,eAAgB,SAAUvJ,GACxB,IAAM+I,EAAQC,MAAMvI,UAAUhC,QAAQzB,KAAKjC,KAAKO,gBAAgBmK,iBAAiB,2BAA4BzF,EAAMqG,oBAAsB,EACzI,OAAOtL,KAAKmN,yBAAyBa,GAAOrN,OAI9CgK,cAAe,WACT3K,KAAKyO,eAITzO,KAAKyK,YAAYG,QAAQ,SAAS1H,GAChC3E,GAAG0G,MAAM4F,aAAapI,YAAYS,EAAO,MAAOlD,KAAKgF,OAAQhF,MAC7DzB,GAAG0G,MAAM4F,aAAapI,YAAYS,EAAO,cAAelD,KAAK8K,eAAgB9K,OAC5EA,QAIPgB,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,eAAgBF,MAhJ/DtC,GAAEC,GAAGC,UAAUuC,KAAKsN,aAAapN,cAAgBA,oSCAjD/C,GAAEgD,UAAUC,qBAAqBF,GA2BjC/C,GAAEC,MAAMC,OAAO,+BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,QAASJ,GAAGC,GAAGI,OAAO4F,YAOtB1F,YACEkK,WACEC,QAAQ,EACR3J,MAAM,GAERoF,MACE1F,MAAO,SACPC,UAAU,GAEZsP,OACEvP,MAAO,SACPM,MAAO,GAETH,OACEH,MAAO,SACPM,KAAM,OAERkP,UACExP,OAAQ,MAAO,OAAQ,QAAS,UAChCM,KAAM,QAERmP,SACEzP,MAAO,UACPC,UAAW,EACXK,KAAM,MAERoP,SACEzF,QAAQ,EACR3J,MAAM,IASVuB,SACE8N,WAAY,GACZC,YAAa,GACbC,aAAc,GACdC,cAAe,GACfC,QAAS,KACTC,QAAS,KAMTC,kBAAmB,YAChB,MAAO,OAAQ,QAAS,UAAUzE,QAAQ,SAAS0E,GAClD,GAAItP,KAAK,UAAUsP,GAAM,CACvB,IAAMC,EAAOC,SAAShP,cAAc,UAAY8O,GAC5CC,IACFA,EAAKE,WAAazP,KAAK,UAAYsP,MAGtCtP,MAEH,IAAM0P,EAAO1P,KAYbwP,SAASG,iBAAiB,aAAc,SAAUC,GAChD,IAAMC,EAAUD,EAAIC,QAAQ,GACtBC,EAAMnR,GAAGwG,eAAeC,cAAc2K,iBAE5C,MAAiC,IAA7BD,EAAIE,QAAQC,KAAKpB,UACjBlQ,GAAGmE,OAAOoN,eAA6C,IAA7BJ,EAAIE,QAAQC,KAAKpB,UAC3CiB,EAAIE,QAAQC,KAAKE,aAAeN,EAAQO,QAAU,IAFtD,CAMAV,EAAKP,QAAUU,EAAQO,QACvBV,EAAKN,QAAUS,EAAQQ,WACtB,GACHb,SAASG,iBAAiB,WAAY,WACpCD,EAAKP,QAAU,KACfO,EAAKN,QAAU,OACd,GACHI,SAASG,iBAAiB,YAAa,SAAUC,GAC/C,GAAqB,OAAjBF,EAAKP,QAAT,CAIA,IAAMU,EAAUD,EAAIC,QAAQ,GACtBS,EAAIT,EAAQO,QAAUV,EAAKP,QAC3BoB,EAAIV,EAAQQ,QAAUX,EAAKN,QAE3BoB,EAAiBrE,KAAKsE,IAAIH,GADN,GAGpBI,EAAUJ,EAAI,EACpB,GAFmBnE,KAAKsE,IAAIH,GAAKnE,KAAKsE,IAAIF,IAExBC,EAAgB,CAChC,IAAMV,EAAMnR,GAAGwG,eAAeC,cAAc2K,iBAC5C,GAAIW,EAAS,CACXhB,EAAKP,QAAUU,EAAQO,QAPD,GAQtBV,EAAKN,QAAUS,EAAQQ,QAClBP,EAAIE,QAAQC,KAAKE,aACpBL,EAAIa,WAAW,OAAQ,KAAM,SAE1B,CACLjB,EAAKP,QAAUU,EAAQO,QAbD,GActBV,EAAKN,QAAUS,EAAQQ,QACnBP,EAAIE,QAAQC,KAAKE,aACnBL,EAAIa,WAAW,OAAQ,MAAO,UAInC,KASP9Q,SAEE2F,YAAa,aAGboL,cAAe,WACb,IAAMtR,EAAKU,KAAK6Q,UAAUvM,MAAM,KAChChF,EAAGwR,MACH,OAAOxR,EAAGyR,KAAK,KAAO,IAAM/Q,KAAKgR,cAAgB,WAInDtP,aAAc,WACZ,IAAIoE,EAAY,eAAiB9F,KAAKiG,aAAe,SAAWjG,KAAK4Q,gBAAkB,KACnF5Q,KAAK+F,YACPD,GAAa,OAAS9F,KAAK+F,UAAY,SAEzCD,GAAa9F,KAAKgG,uBAElBF,GAAa,SAGb,OAAQ9F,KAAKgR,eACX,IAAK,MACHrS,GAAAC,GAAAC,UAAAuC,KAAA6P,OAAqBlC,YAAcjJ,EACnC,MAEF,IAAK,OACHnH,GAAAC,GAAAC,UAAAuC,KAAA6P,OAAqBjC,aAAelJ,EACpC,MAEF,IAAK,QACHnH,GAAAC,GAAAC,UAAAuC,KAAA6P,OAAqBhC,cAAgBnJ,EACrC,MAEF,IAAK,SACHnH,GAAAC,GAAAC,UAAAuC,KAAA6P,OAAqB/B,eAAiBpJ,EAI1C,MAAO,KAIX9E,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,SAAUF,GACtD1C,GAAG0G,MAAMiM,QAAQC,IAAIC,UAAU,4BAA6BnQ,EAAQoO,kBAAmBpO,MA/M1FtC,GAAEC,GAAGC,UAAUuC,KAAK6P,OAAO3P,cAAgBA,wNCA3C/C,GAAEgD,UAAUC,qBAAqBF,GAmCjC/C,GAAEC,MAAMC,OAAO,gDACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAOxBgD,UAAW,SAASC,GAClB,IAAMsP,EAAUtP,EAAMsP,QAAQxI,OAAOvE,MAAM,KACrCgN,EAAUD,EAAQ3N,QAAQ,SAEhC,IAAiB,IAAb4N,EAAgB,CAElBtR,KAAKuR,kBAAkB,eACvBF,EAAQG,OAAOF,EAAS,GACxBvP,EAAMsP,QAAUA,EAAQN,KAAK,KAE/BpS,GAAAC,GAAAC,UAAAC,eAAAkD,YAAAC,KAAAjC,KAAqB+B,IAQvB7C,YACEuS,SACErS,MAAO,SACPM,KAAM,EACNgS,MAAO,iBAETC,eACEvS,MAAO,UACPM,MAAM,IASVG,SACE+R,SAAgB,KAEhBpM,YAAa,WACX7G,GAAAC,GAAAC,UAAAuC,KAAAyQ,wBAAAnM,UAAAF,YAAAG,KAAA1D,KAAAjC,MACA,IAAM8R,EAASnT,GAAGC,GAAGmT,mBAAmB3M,cACxC0M,EAAOE,cAAcvP,YAAY,eAAgBzC,KAAKiS,iBAAkBjS,MACxEA,KAAKiS,mBACLH,EAAOrP,YAAY,wBAAyBzC,KAAKkS,wBAAyBlS,OAI5E6H,cAAe,SAASlH,GAEtBhC,GAAGC,GAAGmT,mBAAmB3M,cAAc+M,aAAaxR,IAGtDqE,OAAQ,SAAStC,GACX1C,KAAKoS,iBAAmB1P,EAAG2P,UAI/B1T,GAAGC,GAAGmT,mBAAmB3M,cAAckN,mBAHrCtS,KAAKoS,eAAiB,MAM1BG,SAAmB,WACZvS,KAAK4R,WACR5R,KAAK4R,SAAiB5R,KAAKO,gBAAgBC,cAAc,WAE3D,OAAOR,KAAK4R,UAGdM,wBAAyB,SAASxP,GAChC,IAAMuI,EAAYjL,KAAKuS,WAAoBtH,UAC3CA,EAAUoD,OAAOqD,MAAMzG,EAAWtM,GAAGC,GAAGmT,mBAAmB3M,cAAcoN,iBACrE9P,EAAGE,WACLqI,EAAUqD,IAAI5L,EAAGE,YAIrBqP,iBAAkB,WAChB,IAAMQ,EAAW9T,GAAGC,GAAGmT,mBAAmB3M,cAAc4M,cAAcrO,OACtE3D,KAAKuS,WAAoB9C,UAAY,GAAGgD,EACpCzS,KAAK0S,oBACP1S,KAAKuS,WAAoBxS,MAAM4H,QAAuB,IAAb8K,EAAiB,OAAS,UAKvE3S,mBAAoB,WAClB,IAAIC,EAAQ,GACRC,KAAK0S,mBAA2C,IAAtB1S,KAAK2S,eACjC5S,EAAQ,2BAEV,MAAO,2BAA2BA,EAAM,IAAIC,KAAK2S,aAAa,WASlEC,SAAU,WACR,IAAMd,EAASnT,GAAGC,GAAGmT,mBAAmB3M,cACxC0M,EAAOE,cAAca,eAAe,eAAgB7S,KAAKiS,iBAAkBjS,MAC3E8R,EAAOe,eAAe,wBAAyB7S,KAAKkS,wBAAyBlS,OAG/EgB,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,0BAA2BF,MApJ1EtC,GAAEC,GAAGC,UAAUuC,KAAKyQ,wBAAwBvQ,cAAgBA,0dCA5D/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,6BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBgU,UAAWnU,GAAGC,GAAGC,UAAUkU,MAE3BhU,SACEJ,GAAGC,GAAGI,OAAO4F,YACbjG,GAAGC,GAAGI,OAAOC,QAQf6C,UAAW,SAASC,GAClB/B,KAAKgT,UAAuB,gBAAiB,mBAAoB,iBAAkB,mBACnFrU,GAAAC,GAAAC,UAAAC,eAAAkD,YAAAC,KAAAjC,KAAqB+B,GAErB/B,KAAKyC,YAAY,gBAAiBzC,KAAKiT,iBAAkBjT,MAGzD,IAAIzB,GAAGsF,KAAKuK,aAAa,WACvB,IAAM8E,EAAalT,KAAKmT,gBACnBD,EAGHlT,KAAKoT,MAAM,kCAAoCF,EAAWrC,UAAY,OAAS7Q,KAAK6Q,WAFpF7Q,KAAKgT,cAKJ,qBAAqB,IACrB,cAAc,IACd,iBAAiB,IACjB,oBAAoB,IACpB,kBAAkB,IAClB,mBAAmB,IACpBpI,QAAQ,SAAUyI,GAClB,IAAMC,EAAWD,EAAM,GACjBE,EAAeF,EAAM,GACmD,OAA1ErT,KAAK,MAAQsT,EAASE,OAAO,GAAGC,cAAgBH,EAASI,OAAO,QAE9DR,EACFA,EAAWS,KAAKL,EAAUtT,KAAMsT,GAGhCtT,KAAK,MAAQsT,EAASE,OAAO,GAAGC,cAAgBH,EAASI,OAAO,IAAIH,IAGnEL,GACHlT,KAAK4T,gBAAe,IAErB5T,OACFA,MAAMuO,WAELvO,KAAK6T,eACP7T,KAAK8T,eAAgB,IASzB7S,SACE8S,SAAW,GAKXC,YAAa,WACXxE,SAAShP,cAAc,UAAUiP,UAAYzP,KAAK+T,SAClDxV,GAAG0G,MAAMiM,QAAQC,IAAI8C,YAAY,mBAAoBjU,KAAKgU,YAAahU,QAW3Ed,YACEgV,aACE9U,MAAO,UACPM,MAAM,EACNuF,MAAO,qBAGTmE,WACEC,QAAQ,EACR3J,MAAM,GAERoF,MACE1F,MAAO,SACPM,KAAM,GAAIL,UAAU,GAEtB8U,mBACE/U,MAAO,UACPC,UAAU,EACV4F,MAAO,2BAETmP,YACEhV,MAAO,UACPC,UAAU,EACV4F,MAAO,oBAEToP,eACEjV,MAAO,UACPC,UAAU,EACV4F,MAAO,sBACPyM,MAAO,0BAET4C,kBACElV,MAAO,UACPC,UAAU,EACV4F,MAAO,yBACPyM,MAAO,0BAET6C,gBACEnV,MAAO,UACPC,UAAU,EACV4F,MAAO,uBACPyM,MAAO,0BAET8C,iBACEpV,MAAO,UACPC,UAAU,EACV4F,MAAO,wBACPyM,MAAO,0BAET+C,eACE/U,KAAM,UACNL,UAAU,GAEZqV,cAAsBtV,MAAO,SAAUC,UAAU,GACjDsV,aAAsBvV,MAAO,UAAWM,MAAM,EAAML,UAAU,GAC9DuV,MAAsBxV,MAAO,SAAUC,UAAU,GACjDwV,UAAsBzV,MAAO,SAAUC,UAAU,IAQnDQ,SACEmT,SAAqB,KACrB8B,SAAgB,KAChBC,SAAmB,KAEnBC,uBAAwB,SAASrU,EAAOsU,EAAKnQ,GAC3C,GAAc,OAAVnE,EAAgB,CAClB,IAAMuU,EAASlV,KAAKgT,SAAoBtP,QAAQoB,IAChC,IAAZoQ,GACFlV,KAAKgT,SAAoBxB,OAAO0D,EAAQ,GAEF,IAApClV,KAAKgT,SAAoBrP,QAC3B3D,KAAK4T,gBAAe,KAS1BX,iBAAkB,SAASvQ,GACzB,GAAIA,EAAGE,UAAW,CACZ5C,KAAK8U,WAAmBnW,GAAGC,GAAGuW,OAAOC,QAAQC,eAC/CrV,KAAKsV,oBAEHtV,KAAKuV,eACP5W,GAAGC,GAAGuW,OAAOK,cAAcC,uBAQjCH,kBAAmB,WACjB3W,GAAGC,GAAGuW,OAAOC,QAAQE,kBAAkB,IAAItV,KAAK6Q,WAAW,GAC3D7Q,KAAK8U,SAAiBnW,GAAGC,GAAGuW,OAAOC,QAAQC,eAI7C3T,aAAc,WACZ,IAAMgU,EAAW1V,KAAKyI,cAGlBkN,EAAU,yBAA2BD,GADpB1V,KAAK4V,aAAgB,YAAc5V,KAAK4V,aAAgB,IACV,SAAW5V,KAAK6Q,UAAY,KAC3F/K,EAAY,6BAA+B9F,KAAK+F,UAAY,QAEhE,GAAiB,OAAb2P,EAAmB,CACrB,IAAId,EAAO,0BACX,OAAQ5U,KAAK6V,WACX,IAAK,QACHjB,EAAO,GACP,MAEF,IAAK,YACHA,GAAQ,sBACJ5U,KAAK8V,qBACPlB,GAAQ,mBAAqB5U,KAAK8V,mBAAqB,KAO7D,IAAMjB,EAAW7U,KAAKuV,cAClBV,IACF/O,GAAa,IAAM9F,KAAK+V,kBAAoB,SAAWxX,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAM2N,GAAY,+DAAiED,EAAO,OA0C3Le,IADA7P,GAAa9F,KAAKgG,wBACK,eACvBrH,GAAGC,GAAGC,UAAUuC,KAAK4U,KAAKjC,SAAW4B,EAAUhX,GAAGC,GAAGC,UAAUuC,KAAK4U,KAAKjC,UAI3EtT,QAAS,SAASwV,EAAI/T,GAwBpB,GAAuB,IAAnBgU,SAAShU,GAAa,CACxBvD,GAAGwG,eAAeC,cAAcC,aAAarF,KAAK6Q,WAClD7Q,KAAKiJ,cAAc,OAKvBA,cAAe,SAAUtI,GACvB,GAAIX,KAAK6T,WAAY,CACnB,IAAMsC,EAAOnW,KAAK6T,aAClB,IAAK,IAAIvU,KAAM6W,EACb,GAAIhO,OAAOzC,UAAUwI,eAAejM,KAAKkU,EAAM7W,GAAK,CAClD,IAAMoB,EAAUyV,EAAK7W,GACjBX,GAAGuD,KAAKkU,MAAMC,eAAe3V,IAC/B/B,GAAGwG,eAAeC,cAAckR,KAAKC,MAAMjX,EAAIX,GAAG6X,UAAUC,OAAO/V,EAAQgW,UAAW/V,QAQlGK,MAAO,SAASC,GACd1C,GAAG0G,MAAMiM,QAAQC,IAAIC,UAAU,mBAAoBnQ,EAAQ+S,YAAa/S,MA7U3EtC,GAAEC,GAAGC,UAAUuC,KAAK4U,KAAK1U,cAAgBA,qXCAzC/C,GAAEgD,UAAUC,qBAAqBF,GA2BjC/C,GAAEC,MAAMC,OAAO,iCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAO4F,YACbjG,GAAGC,GAAGI,OAAO6C,mBAQfC,UAAW,SAAUC,GACdA,EAAM+C,OAGT/C,EAAM4U,mBAAoB,GAE5BhY,GAAAC,GAAAC,UAAAC,eAAAkD,YAAAC,KAAAjC,KAAqB+B,IAQvB7C,YACE6F,QACE3F,MAAO,SACPM,KAAM,KAERkX,aACExX,OAAQ,SAAU,QAClBM,KAAM,UAERoF,MACE1F,MAAO,SACPC,UAAU,GAEZwX,YACEzX,MAAO,SACPC,UAAU,IASd4B,SAOE6V,gBAAiB,SAASpU,GACxB,IAAMqU,EAAUrU,EAAGE,UACboU,EAAOrY,GAAGC,GAAGC,UAAUqC,cAAc+V,gBAAgBF,GACrDG,EAAQvY,GAAGuD,KAAKkU,MAAMhR,cACtBN,EAAOkS,EAAKjR,UAGlByJ,SAAS9E,iBAAiB,oBAAoBE,QAAQ,SAAS2E,GAC7DA,EAAKtE,UAAUoD,OAAO,WACrBrO,MACHwP,SAAS9E,iBAAiB,6BAA6BE,QAAQ,SAAS2E,GACtEA,EAAKtE,UAAUoD,OAAO,oBACrBrO,MAGHwP,SAAS9E,iBAAiB,aAAaE,QAAQ,SAAS2E,GACtD,IAAMrN,EAAOgV,EAAMC,uBAAuB5H,GACtCzK,IAAS5C,EAAK6C,QAChBwK,EAAKtE,UAAUqD,IAAI,WAEpBtO,MAiBH,IAdA,IAAIkT,EAAavU,GAAGkF,KAAKuT,KAAKC,gBAAgBL,EAAM,QAG9CM,EAAY9H,SAAS9E,iBAAiB,aACtC6M,EAAgB,SAAUC,EAAYjI,GAC1C,IAAMrN,EAAOgV,EAAMC,uBAAuB5H,IACtCiI,IAAetV,EAAK6C,QAAgC,SAArB7C,EAAK0U,cACd,iBAAd1U,EAAKe,MAAsBf,EAAKe,KAAKwU,MAAMD,EAAa,MACpC,iBAApBtV,EAAK2U,YAA4B3U,EAAK2U,WAAWY,MAAMD,EAAa,QAE9EjI,EAAKtE,UAAUqD,IAAI,oBAIhB4E,GAAcvU,GAAGkF,KAAKuT,KAAKC,gBAAgBnE,EAAY,SAAS,CACrEoE,EAAU1M,QAAQ,SAAS2E,GAClCgI,EAAcrE,EAAWnN,UAAWwJ,KAG7B2D,EAAavU,GAAGkF,KAAKuT,KAAKC,gBAAgBnE,EAAY,WAW5DrT,SAGEC,mBAAoB,WAClB,IAAIoD,EAAQ,oCACRlD,KAAK6F,aACP3C,GAASlD,KAAK6F,YAEhB3C,GAAS,KACLlD,KAAK+F,YACP7C,GAAS,sBAAwBlD,KAAK+F,UAAY,UAGpD,OADA7C,GAAS,UACMlD,KAAKgG,wBAItBhB,OAAQ,WACN,IAAID,EAAS/E,KAAKkF,YACW,OAAzBlF,KAAK0X,kBACP3S,EAASpG,GAAGwG,eAAeC,cAAcuS,gBAAgB5S,EAAQ/E,KAAK0X,kBAExE/Y,GAAGwG,eAAeC,cAAcC,aAAaN,KAIjD/D,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,WAAYF,GACxD1C,GAAG0G,MAAMiM,QAAQC,IAAIC,UAAU,mBAAoBnQ,EAAQ6V,gBAAiB7V,MArK/EtC,GAAEC,GAAGC,UAAUuC,KAAKwW,SAAStW,cAAgBA,2eCA7C/C,GAAEgD,UAAUC,qBAAqBF,GA2BjC/C,GAAEC,MAAMC,OAAO,iCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAOxBI,YACE4F,MACE1F,MAAO,SACPM,KAAM,GACNL,UAAU,GAEZwY,QACEzY,MAAO,SACPM,KAAM,IAERgB,SACEtB,MAAO,SACPM,SAEFiX,mBACEtN,QAAQ,EACR3J,MAAM,IASVG,SAEE6B,aAAc,WACZ,IAAMyT,EAASnV,KAAKqI,YAEdtI,EAA0B,WAAlB+X,QAAO3C,GAAsB,GAAK,UAAYxW,GAAG2J,OAAOC,aAAaC,cAAc2M,EAAQnV,KAAKyI,eAAiB,IAE3HyB,EAAU,6CAA+ClK,KAAKiG,aAAe,KAAOlG,EAAQ,IAChGmK,GAAW,sBAAwBlK,KAAK+X,YAAc,iCAAmC/X,KAAK+F,UAAY,aAE1G,OADAmE,GAAW,UAKblF,OAAQ,WACNrG,GAAGwG,eAAeC,cAAcC,aAAarF,KAAK6Q,UAAY,OAIlE7P,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,WAAYF,MAhF3DtC,GAAEC,GAAGC,UAAUuC,KAAK4W,SAAS1W,cAAgBA,oPCA7C/C,GAAEgD,UAAUC,qBAAqBF,GA2BjC/C,GAAEC,MAAMC,OAAO,mCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAOC,QAO7CC,YACEsK,WAAcpK,MAAO,SAAUM,KAAM,KACrCiK,SAAYvK,MAAO,SAAUM,KAAM,MAQrCG,SAEEC,mBAAoB,WAClB,MAAO,uEAIT6K,cAAe,WACb3K,KAAKiY,mBAAmB,cAAejY,KAAK8K,eAAgB9K,MAC5DA,KAAKiY,mBAAmB,YAAajY,KAAKkY,aAAclY,OAS1DuH,aAAc,SAAU5G,GACtB,IAAMuC,EAAQlD,KAAKM,WAEnBK,EAAQ,GAAKX,KAAKiM,gBAClB,IAAMkM,EAAMnY,KAAK4L,aACjB1I,EAAM+H,UAAUoD,OAAO1N,IAAUwX,EAAM,gBAAkB,mBACzDjV,EAAM+H,UAAUqD,IAAI3N,IAAUwX,EAAM,kBAAoB,kBAO1D3J,eAAgB,SAAUvJ,GACxB,MAAmB,cAAfA,EAAMmT,KACDpY,KAAK4L,aAEL5L,KAAK2L,gBAGhBuM,aAAc,WACZ,IAAMhQ,EAAYlI,KAAK4L,aACvB5L,KAAKiJ,cAAcf,EAAW,SAAUxH,GACtC,OAASA,EAAQ4L,aAAuC,OAAxB5L,EAAQ4L,eAI5CxB,eAAgB,WACd,IAAM5C,EAAYlI,KAAK2L,eACvB3L,KAAKiJ,cAAcf,EAAW,SAAUxH,GACtC,OAASA,EAAQ4L,aAAuC,SAAxB5L,EAAQ4L,gBAK9CtL,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,aAAcF,MApG7DtC,GAAEC,GAAGC,UAAUuC,KAAKiX,WAAW/W,cAAgBA,4QCA/C/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,gCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAO6C,kBAAmBlD,GAAGC,GAAGI,OAAOsZ,aAO7EpZ,YACEgJ,WAAa9I,MAAO,SAAUC,UAAU,IAQ1CQ,SAEE2F,YAAa,WACX7G,GAAAC,GAAAC,UAAAuC,KAAA+E,QAAAT,UAAAF,YAAAG,KAAA1D,KAAAjC,MACAA,KAAKuY,mBAAc7K,EAAW1N,KAAKgJ,iBAIrClJ,mBAAoB,WAClB,MAAO,uEAGTkD,QAAS,WACPrE,GAAGwG,eAAeC,cAAckR,KAAKkC,SAAQ,OAzDlD7Z,GAAEC,GAAGC,UAAUuC,KAAK+E,QAAQ7E,cAAgBA,oLCA5C/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,+BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAOC,QAQfY,SAEE6B,aAAc,aAKd5B,mBAAoB,aAIpBW,QAAS,SAAUC,EAASwB,GACZlC,KAAKyN,qBAAqB/M,EAASwB,GACrC,GACVvD,GAAGkF,KAAKC,SAAS2U,QAAO,OAnD/B9Z,GAAEC,GAAGC,UAAUuC,KAAKsX,OAAOpX,cAAgBA,kOCA3C/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,4BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAOC,QAQvBY,SAEEC,mBAAoB,WAClB,MAAO,sDASTW,QAAS,SAASC,EAASwB,GACzB,QAAawL,IAATxL,QAAkCwL,IAAZhN,EAA1B,CAGA,IAAMiY,EAAU3Y,KAAK0H,kBAEf/G,EAAQhC,GAAG6X,UAAUoC,OAAO5Y,KAAK6T,aAAanT,GAASgW,UAAWxU,GAEpE2W,EAAKC,OAAOC,iBAAiBJ,GAAS,oBAAoBvU,QAAQ,gBAAiB,IAAIE,MAAM,KAC/E,IAAduU,EAAGlV,SACLkV,GAAM,EAAG,EAAG,IAEd,OAAQ7Y,KAAK6T,aAAanT,GAAS4L,aACjC,IAAK,IACHuM,EAAG,GAAKlY,EACR,MACF,IAAK,IACHkY,EAAG,GAAKlY,EACR,MACF,IAAK,IACHkY,EAAG,GAAKlY,EAGZgY,EAAQ5Y,MAAM,oBAAsB,OAAS8Y,EAAG,GAAK,KAAOA,EAAG,GAAK,KAAOA,EAAG,GAAK,OAIvF7X,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,MAAOF,MA5EtDtC,GAAEC,GAAGC,UAAUuC,KAAK4X,IAAI1X,cAAgBA,oOCAxC/C,GAAEgD,UAAUC,qBAAqBF,GAqCjC/C,GAAEC,MAAMC,OAAO,iCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,QAASJ,GAAGC,GAAGI,OAAOC,OAOtB6C,UAAW,SAAUC,GACnB/B,KAAKiZ,YACLta,GAAAC,GAAAC,UAAAC,eAAAkD,YAAAC,KAAAjC,KAAqB+B,IAQvBd,SACEiY,MAAO,SAAStK,GACd,OAAOA,EAAS0B,EAAE6I,QAAQ,GAAK,IAAMvK,EAAS2B,EAAE4I,QAAQ,IAc1DC,cAAe,SAASC,EAAYC,EAAiBC,EAAUC,EAAeC,EAAQla,GAAwB,IAAjBma,EAAiBC,UAAAhW,OAAA,QAAA+J,IAAAiM,UAAA,IAAAA,UAAA,GACtGC,EAAuBP,EAAaC,EACpCO,EAAqBN,EAAWC,EAWhCM,EAAYT,EAAaE,EAAW,EAAI,EACxCQ,EAAKN,EACLO,EAAMP,EAAiB,EAARla,EAAY,EAC3B0a,EAAKR,EAAiB,EAARla,EAAY,EAC1B2a,EAAMT,EAAiB,EAARla,EAAY,EAC3B4a,EAAKV,EAASla,EACd6a,GAAc9J,EAAGnE,KAAKkO,IAAIhB,GAAcU,EAAIxJ,GAAIpE,KAAKmO,IAAIjB,GAAcU,GACvEQ,GAAejK,EAAGnE,KAAKkO,IAAIT,GAAwBK,EAAI1J,GAAIpE,KAAKmO,IAAIV,GAAwBK,GAC5FO,GAAclK,EAAGnE,KAAKkO,IAAIhB,GAAcc,EAAI5J,GAAIpE,KAAKmO,IAAIjB,GAAcc,GACvEM,GACJnK,EAAGnE,KAAKkO,KAAKhB,EAAaE,GAAY,GAAKQ,EAC3CxJ,GAAIpE,KAAKmO,KAAKjB,EAAaE,GAAY,GAAKQ,GAExCW,GACJpK,EAAGnE,KAAKkO,KAAKhB,EAAaE,GAAY,GAAKY,EAC3C5J,GAAIpE,KAAKmO,KAAKjB,EAAaE,GAAY,GAAKY,GAExCQ,GAAYrK,EAAGnE,KAAKkO,IAAId,GAAYQ,EAAIxJ,GAAIpE,KAAKmO,IAAIf,GAAYQ,GACjEa,GAAatK,EAAGnE,KAAKkO,IAAIR,GAAsBI,EAAI1J,GAAIpE,KAAKmO,IAAIT,GAAsBI,GACtFY,GAAYvK,EAAGnE,KAAKkO,IAAId,GAAYY,EAAI5J,GAAIpE,KAAKmO,IAAIf,GAAYY,GACjEW,EAAkB3O,KAAKsE,IAAI4I,EAAaO,GAAwBzN,KAAK4O,GAAK,EAAI,EAC9EC,EAAe7O,KAAKsE,IAAI4I,EAAaE,GAAY,EAAIpN,KAAK4O,GAAK,EAAI,EACnEE,EAAgB9O,KAAKsE,IAAI8I,EAAWM,GAAsB1N,KAAK4O,GAAK,EAAI,EACxEG,EAAiB7B,EAAaO,EAAuB,EAAI,EACzDuB,EAAe5B,EAAWM,EAAqB,EAAI,EASzD,SAASuB,EAAIC,EAAOC,EAAKC,EAAGC,EAAMC,GAChC,OAAQJ,EAAM/K,IAAIgL,EAAIhL,GAAO+K,EAAM9K,IAAI+K,EAAI/K,EACvC,GACCpE,KAAKsE,IAAI4K,EAAM/K,EAAEgL,EAAIhL,GAAGnE,KAAKsE,IAAI4K,EAAM9K,EAAE+K,EAAI/K,GAAK,EACjD,IAAM5R,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,MAAMoC,IACzC,IAAKC,EAAGA,EAAG,EAAGC,EAAMC,EAAI9c,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,MAAMoC,IAAMvK,KAAK,KAGhF,GAAI2I,EAAS,CACX,IAAMiC,EAAOxP,KAAKnC,IAAI+P,EAAII,GACpByB,EAAW,SAAUC,GACzB,OAAQxC,EAAawC,GAAKA,EAAItC,GAAcF,EAAawC,GAAKA,EAAItC,GAE9DuC,EAAUF,EAAoB,GAAVzP,KAAK4O,GAAS,IAAMa,EAAmB,EAAVzP,KAAK4O,GAAS,GAAKY,EAAOvB,EAAW9J,EACtFyL,EAAUH,EAAoB,GAAVzP,KAAK4O,GAAS,IAAMa,EAAmB,EAAVzP,KAAK4O,GAAS,IAAMY,EAAOvB,EAAW7J,EACvFyL,EAAUJ,EAAoB,GAAVzP,KAAK4O,GAAS,IAAMa,EAAmB,EAAVzP,KAAK4O,GAAS,IAAMY,EAAOvB,EAAW9J,EACvF2L,EAAUL,EAAoB,GAAVzP,KAAK4O,GAAS,IAAMa,EAAmB,EAAVzP,KAAK4O,GAAS,GAAKY,EAAOvB,EAAW7J,EAC5F,OACE2L,EAAG/P,KAAKpC,IAAIqQ,EAAW7J,EAAGgK,EAAYhK,EAAGiK,EAAWjK,EAAGoK,EAASpK,EAAGqK,EAAUrK,EAAGsK,EAAStK,EAAGwL,GAC5FI,EAAGhQ,KAAKnC,IAAIoQ,EAAW7J,EAAGgK,EAAYhK,EAAGiK,EAAWjK,EAAGoK,EAASpK,EAAGqK,EAAUrK,EAAGsK,EAAStK,EAAG0L,GAC5FG,EAAGjQ,KAAKpC,IAAIqQ,EAAW9J,EAAGiK,EAAYjK,EAAGkK,EAAWlK,EAAGqK,EAASrK,EAAGsK,EAAUtK,EAAGuK,EAASvK,EAAG0L,GAC5FT,EAAGpP,KAAKnC,IAAIoQ,EAAW9J,EAAGiK,EAAYjK,EAAGkK,EAAWlK,EAAGqK,EAASrK,EAAGsK,EAAUtK,EAAGuK,EAASvK,EAAGwL,IAKhG,OAAIvc,EAAQ,GAER,IAAKZ,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,MAAMsB,GACzCY,EAAIZ,EAAYE,EAAaP,EAAIa,EAAclB,GAC/CsB,EAAIV,EAAaG,EAAUV,EAAIa,EAAclB,IAC7C/I,KAAK,KAGD,IAAKpS,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,MAAMkB,GAC/CR,IAAyBP,EACrB,IAAM1a,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,MAAMsB,GAC1CY,EAAIhB,EAAYG,EAAaP,EAAKc,EAAiB,EAAEI,GACrDE,EAAIb,EAAaC,EAAYN,EAAKY,EAAiBI,GACvDE,EAAIZ,EAAYE,EAAaP,EAAIa,EAAclB,GAC/CsB,EAAIV,EAAaG,EAAUV,EAAIa,EAAclB,GAC7CD,IAAuBN,EACnB,IAAM5a,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,MAAMyB,GAC1CS,EAAIP,EAAUD,EAAWV,EAAKe,EAAe,EAAEE,GAC/CC,EAAIR,EAAWD,EAAUX,EAAKiB,EAAeE,GACjDC,EAAIhB,EAAYK,EAAaV,EAAIiB,EAAc,EAAElB,GACjDsB,EAAIX,EAAaL,EAAYL,EAAIiB,EAAc,EAAElB,GACjD,KACA/I,KAAK,KAOTsL,kBAAmB,SAASC,EAAOC,GACjC,IAAMC,EAAIrQ,KAAKmO,IAAIgC,GACbG,EAAItQ,KAAKkO,IAAIiC,GACbI,EAAKD,EAAIF,EAAEhd,MACXod,EAAKH,EAAID,EAAEhd,MAEjB,GAAIgd,EAAEK,UAAY,EAAG,CACnB,IAAMC,GAAML,EAAID,EAAEK,UAAY,EACxBE,EAAKL,EAAIF,EAAEK,UAAY,EAC7B,OACE,IAAK5c,KAAKkZ,OAAO5I,EAAEmM,EAAEF,EAAE9C,OAAOiD,EAAGG,EAAItM,IAAKiM,EAAED,EAAE9C,OAAOkD,EAAGG,KACxD,IAAK9c,KAAKkZ,OAAO5I,EAAEmM,EAAEF,EAAE9C,OAAQlJ,GAAKiM,EAAED,EAAE9C,SACxC,IAAKzZ,KAAKkZ,OAAO5I,EAAEmM,EAAEF,EAAE9C,OAAOiD,EAAGG,EAAItM,IAAKiM,EAAED,EAAE9C,OAAOkD,EAAGG,MACxD/L,KAAK,IAEP,OACE,IAAK/Q,KAAKkZ,OAAO5I,EAAEmM,EAAEF,EAAE9C,OAAQlJ,GAAKiM,EAAED,EAAE9C,SACxC,IAAKzZ,KAAKkZ,OAAO5I,EAAEmM,EAAEF,EAAE9C,OAAOiD,EAAInM,IAAKiM,EAAED,EAAE9C,OAAOkD,MAClD5L,KAAK,MASb7R,YACEkZ,MAAQhZ,MAAO,SACf2d,YAAc3d,MAAO,SAErB2K,KAAO3K,MAAO,UACd4K,KAAO5K,MAAO,UACd4d,YAAc5d,MAAO,UACrB6d,WAAa7d,MAAO,UACpB8d,WAAa9d,MAAO,UACpB+d,QAAU/d,MAAO,SACjBge,aAAehe,MAAO,UACtBie,YAAcje,MAAO,UACrBke,cAAgBle,MAAO,UACvBme,YAAcne,MAAO,UACrBoe,aAAepe,MAAO,UACtBqe,YAAcre,MAAO,UACrBse,eAAiBte,MAAO,UACxBue,YAAcve,MAAO,UACrBwe,QAAUxe,MAAO,SACjBye,YAAcze,MAAO,UACrBic,OAASjc,MAAO,UAChBkc,KAAOlc,MAAO,UACd0e,WAAa1e,MAAO,UACpB2e,SAAW3e,MAAO,UAClB4e,eAAiB5e,MAAO,WACxB6e,UAAY7e,MAAO,UACnB8e,OAAS9e,MAAO,UAChB+e,OAAS/e,MAAO,UAChBgf,YAAchf,MAAO,UACrBif,YAAcjf,MAAO,UACrBkf,WAAalf,MAAO,UACpBmf,UAAYnf,MAAO,UACnBgU,OAAShU,MAAO,WAChBof,mBAAqBpf,MAAO,QAASM,SACrC+e,kBAAoBrf,MAAO,QAASM,UAQtCG,SACE6e,cAAYhR,EACZuL,SAAuB,KAGvBnZ,mBAAoB,WAQlB,SAAS6e,EAAQC,EAAMtO,EAAGC,GACpBqO,EAAK1C,EAAI3L,IACpBqO,EAAK1C,EAAI3L,GAEEqO,EAAKzC,EAAI5L,IACpBqO,EAAKzC,EAAI5L,GAEEqO,EAAKxC,EAAI9L,IACpBsO,EAAKxC,EAAI9L,GAEEsO,EAAKrD,EAAIjL,IACpBsO,EAAKrD,EAAIjL,GAEF,OAAOsO,EAGT5e,KAAK6e,qBAAqB5Q,MAAMjO,KAAK8e,gBAAgBnb,QAAQob,KAAK,IAClE/e,KAAKgf,oBAAoB/Q,MAAMjO,KAAK8e,gBAAgBnb,QAAQob,MAAM,GAAG,GAAO,KAE5E,IAAMrP,EAAO1P,KACPwc,EAAIxc,KAAKif,WACTrR,EAAI5N,KAAKkf,SACTnV,EAAM/J,KAAKoM,SACXpC,EAAMhK,KAAKqM,SACb8S,EAAY,EACZC,EAAW,GACXC,EAAW,GACXC,EAAY,GACZC,EAAY,GACZC,EAAgB,GAChBC,EAAU,GACRrG,EAAgBza,GAAGC,GAAGC,UAAUuC,KAAKsa,SAAStC,cAGhDuC,EAAO3b,KAAK0f,gBAAkB1f,KAAK2f,eACnCC,EAAO,EACPC,EAAO,EACX7f,KAAK8e,gBAAgBlU,QAAQ,SAAUkV,GACrCnE,EAAOxP,KAAKnC,IAAI2R,EAAMmE,EAAUrG,OAAQqG,EAAUrG,OAAOqG,EAAUvgB,OACnEqgB,EAAOzT,KAAKnC,IAAI4V,EAAME,EAAUC,YAChCF,EAAO1T,KAAKnC,IAAI6V,EAAMC,EAAUE,YAElC,IAAIC,EAAO7G,EAAcoD,EAAGoD,EAAMhS,EAAGiS,EAAMlE,EAAM,GAAG,GAEpD,GAAI3b,KAAKkgB,gBAAkB,EAAG,CAC5B,IACEnC,EAAU/R,WAAWhM,KAAKmgB,mBACtBC,EAAMpgB,KAAKqgB,iBACXC,EAAOtgB,KAAKkgB,gBAAkBE,EAEhC,WAAWG,KAAKvgB,KAAKmgB,qBACvBpC,GAAW/T,EAAID,GAAOgU,EAAU,KAGlCsB,GAAY,0BACZ,IAAK,IAAI/C,EAAME,EAAGgE,GAAS5S,EAAE4O,GAAGuB,GAAS/T,EAAID,GAAM0W,GAAKzW,EAAID,GAAKgU,EAAS0C,GAAO,EAAGnE,GAAOkE,EAAOC,IAAO,CACvG,IACEnG,EAAMnO,KAAKmO,IAAIgC,GACXjC,EAAMlO,KAAKkO,IAAIiC,GACrB+C,IACE,IAAK1gB,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,OAAO5I,EAAE+J,EAAI+F,EAAK7P,GAAG+J,EAAI8F,IAC5D,IAAKzhB,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,OAAO5I,EAAE+J,EAAIiG,EAAM/P,GAAG+J,EAAIgG,KAC7DvP,KAAK,IAGPkP,EAAOtB,EADPsB,EAAOtB,EAAQsB,EAAM5F,EAAI+F,GAAM9F,EAAI8F,GACd/F,EAAIiG,GAAOhG,EAAIgG,GAET,KAAzBtgB,KAAK0gB,kBAChBrB,GAAY,mBAAqBrf,KAAK0gB,iBAE/BrB,GAAY,OAGd,GAAIrf,KAAK2gB,gBAAkB,EAAG,CAC5B,IACEC,EAAM5gB,KAAK6gB,iBACPC,EAAO9gB,KAAK2gB,gBAAkBC,EAEpCxB,GAAY,0BAEZpf,KAAK+gB,mBAAmBzc,MAAM,KAAKsG,QAAQ,SAAUgE,GACnD,OAAQA,GACN,IAAK,MACHA,EAAW7E,EACX,MAEF,IAAK,MACH6E,EAAW5E,EAGf,IAAMsS,EAAQE,GAAK5O,EAAI4O,IAAM5N,EAAW7E,IAAQC,EAAMD,GAChDuQ,EAAMnO,KAAKmO,IAAIgC,GACfjC,EAAMlO,KAAKkO,IAAIiC,GACrB8C,IACE,IAAKzgB,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,OAAO5I,EAAE+J,EAAIuG,EAAKrQ,GAAG+J,EAAIsG,IAC5D,IAAKjiB,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASxC,OAAO5I,EAAE+J,EAAIyG,EAAMvQ,GAAG+J,EAAIwG,KAC7D/P,KAAK,IAGPkP,EAAOtB,EADPsB,EAAOtB,EAAQsB,EAAM5F,EAAIuG,GAAMtG,EAAIsG,GACdvG,EAAIyG,GAAOxG,EAAIwG,KAET,KAAzB9gB,KAAKghB,kBAChB5B,GAAY,mBAAqBpf,KAAKghB,iBAE/B5B,GAAY,OAGd,IAAMvB,EAAa7d,KAAKihB,gBACxBjhB,KAAKkhB,YAAYtW,QAAQ,SAAU2C,EAAO4T,GACxC,IAAM7E,EAAQE,GAAK5O,EAAI4O,IAAMjP,EAAM5M,MAAQoJ,IAAQC,EAAMD,GACnDuG,EAAI/C,EAAMkM,OAAStN,KAAKkO,IAAIiC,GAC5B/L,EAAIhD,EAAMkM,QAAUtN,KAAKmO,IAAIgC,GAC/B8E,EAAoB,GACpBC,EAAa,GACbC,EAAY,EAEhB,GAAI/T,EAAMgU,YAAc,EAAG,CACzBjC,GAAa,8BAAgChP,EAAI,QAAUC,EAAI,IAC/D,OAAQhD,EAAMgU,aACZ,QACA,KAAK,EAEDF,EADE/Q,EAAI,GACS,MAAO,SAAU,SAAU/C,EAAMqB,WAEjC,QAAS,SAAU,OAAQrB,EAAMqB,UAE9CzC,KAAKsE,IAAIH,GAAK,IAChB+Q,EAAa,UAGbD,EADE7Q,EAAI,GACgB,WAAY,SAAU,WAAYhD,EAAMqB,WAExC,UAAW,SAAU,YAAarB,EAAMqB,UAE5DzC,KAAKsE,IAAIF,GAAK,IAChB6Q,EAAoB,UAEtB,MAEF,KAAK,EACH,IAAII,EAAqB,KAARlF,EAAcnQ,KAAK4O,GAAK,GACzC,GAAIxK,EAAI,EACN6Q,GAAsB,WAAY,SAAU,WAAY7T,EAAMqB,cACzD,CACLwS,GAAsB,UAAW,SAAU,YAAa7T,EAAMqB,UAC9D4S,GAAa,IAEfH,EAAa,SACb/B,GAAa,sBAAwBkC,EAAY,IAAMlR,EAAI,IAAMC,EAAI,KACrE,MAGF,KAAK,EACH+Q,EAAqB,KAARhF,EAAcnQ,KAAK4O,GAChC,GAAIzK,EAAI,EAAG,CACT+Q,GAAe,MAAO,SAAU,SAAU9T,EAAMqB,UAChD0S,GAAa,SAEbD,GAAe,QAAS,SAAU,OAAQ9T,EAAMqB,UAElDwS,EAAoB,SACpB9B,GAAa,sBAAwBgC,EAAY,IAAMhR,EAAI,IAAMC,EAAI,KAGzE+O,GAAa,uBAAyB8B,EAAoB,IAC1D9B,GAAa,iBAAmB+B,EAAa,IAE1B,KAAfxD,IACFyB,GAAa,WAAazB,EAAa,KAGzCyB,GAAa,IAAM/R,EAAMzI,KAAO,cAC3B,CACL,IAAM2c,EAAU/R,EAAKgS,YAAc,SAAWP,EACxC1F,EAAKe,EAAI5O,EAAI,EAAI,EACnB3K,EAAO,GACP0e,EAAQ,GAEZ,OAAQpU,EAAMgU,aACZ,KAAK,EACHte,GAAQ,IAAKqN,EAAGC,EAAG,IAAKhD,EAAMkM,OAAQlM,EAAMkM,OAAQ,EAAG,EAAGgC,GAAKnL,GAAIC,EAAG,IAAKhD,EAAMkM,OAAQlM,EAAMkM,OAAQ,EAAG,EAAGgC,EAAInL,EAAGC,GAAGQ,KAAK,KAC5H,MAEF,KAAK,EACH9N,GAAQ,KAAMqN,GAAIC,EAAG,IAAKhD,EAAMkM,OAAQlM,EAAMkM,OAAQ,EAAG,EAAGgC,EAAInL,EAAGC,EAAG,IAAKhD,EAAMkM,OAAQlM,EAAMkM,OAAQ,EAAG,EAAGgC,GAAKnL,GAAIC,GAAGQ,KAAK,KAC9H4Q,EAAQ,0CACR,MAEF,KAAK,EACH1e,GAAQ,IAAKqN,EAAGC,EAAG,IAAKhD,EAAMkM,OAAQlM,EAAMkM,OAAQ,EAAG,EAAGgC,GAAKnL,GAAIC,EAAG,IAAKhD,EAAMkM,OAAQlM,EAAMkM,OAAQ,EAAG,EAAGgC,EAAInL,EAAGC,GAAGQ,KAAK,KAC5H4Q,EAAQ,wCAGZrC,GAAa,4DAA8DmC,EAAU,QAAUxe,EAAO,MACtGqc,GAAa,0BAEM,KAAfzB,IACFyB,GAAa,WAAazB,EAAa,KAGzCyB,GAAa,qBAAqBmC,EAAQ,IAAME,EAAQ,IAAMpU,EAAMzI,KAAO,wBAI/E9E,KAAK4hB,YAAYhX,QAAQ,SAAUiX,GACjC,IAAMC,GAAUlU,EAAI4O,IAAMqF,EAAMxG,MAAQtR,IAAQC,EAAMD,GAAOyS,EACvDuF,GAAUnU,EAAI4O,IAAMqF,EAAMvG,IAAMvR,IAAQC,EAAMD,GAAOyS,EACrDwF,EAASH,EAAMpI,QAAU/J,EAAKgQ,gBAC9BuC,EAASJ,EAAMtiB,OAASmQ,EAAKiQ,eAC7BuC,EAAW9I,EAAc0I,EAAQ,EAAGC,EAAQ,EAAGC,EAAQC,GAAQ,GACrE1C,GAAa,0BACbA,GAAanG,EAAc0I,EAAQ,EAAGC,EAAQ,EAAGC,EAAQC,GACrDJ,EAAM9hB,QACRwf,GAAa,YAAcsC,EAAM9hB,OAEnCwf,GAAa,OAGbU,EAAOtB,EADPsB,EAAOtB,EAAQsB,EAAMiC,EAAS9F,EAAG8F,EAAShG,GACrBgG,EAAS3G,EAAG2G,EAAS/F,KAG5Cnc,KAAK0e,YACL1e,KAAK8e,gBAAgBlU,QAAQ,SAAUkV,EAAWqC,GAChDzS,EAAKgP,SAAW0D,KAAK,IAAIzjB,GAAGkF,KAAKwe,0BAA0B3S,EAAK4S,SAA2B5S,EAAMyS,IACjG3C,GAAiB,kCAAoCM,EAAU/f,MAAQ,OAEnE+f,EAAUyC,WACrBpD,MAIK,GAAIA,EAAU,EAAG,CACfM,GAAW,0BAA0Bzf,KAAKwiB,WAAW,kBAChCxiB,KAAKyiB,gBAAiB,gBACxBziB,KAAK0iB,cAAgB,eACzB1iB,KAAK2iB,WAAW,sBAC5B,aAAa3iB,KAAK2iB,WAAW,SAAW3iB,KAAK4iB,eAAiB,eAAeC,OAAO1D,EAAU,GAC/F,UAEF,IAAM2D,GAAqBzH,OAAQ,EAAG,GAAI0H,QAAS,GAAK,IAAMzH,KAAM,EAAG,IAAKtb,KAAKyiB,mBAAqB,EAAG,GACnGO,EAAQ7W,KAAKpC,IAAI,GAAI/J,KAAK0iB,cAAe1iB,KAAK4iB,gBAAkBzD,EAAY,IAAMnf,KAAK4iB,eAAiB,EAAI5iB,KAAK0iB,cAAgB,IACjIO,EAAQ9W,KAAKnC,IAAI,GAAIhK,KAAK0iB,cAAe1iB,KAAK4iB,gBAAkBzD,EAAY,IAAMnf,KAAK4iB,eAAiB,EAAI5iB,KAAK0iB,cAAgB,IAEvIzC,EAAOtB,EADPsB,EAAOtB,EAAQsB,EAAMjgB,KAAK2iB,WAAWG,EAAiB,GAAG9iB,KAAKkjB,gBAAiBljB,KAAKwiB,WAAWQ,GAC1EhjB,KAAK2iB,WAAWG,EAAiB,GAAG9iB,KAAKkjB,gBAAiBljB,KAAKwiB,WAAWS,GAGjG,IAAIE,EAAO,gEAEPlD,EAAK7D,EAAIpc,KAAKojB,cAAchH,EAC5B6D,EAAK/D,EAAIlc,KAAKojB,cAAclH,EAC5B+D,EAAK1E,EAAI0E,EAAK7D,EAAIpc,KAAKojB,cAAchH,EAAIpc,KAAKojB,cAAc7H,EAC5D0E,EAAK9D,EAAI8D,EAAK/D,EAAIlc,KAAKojB,cAAclH,EAAIlc,KAAKojB,cAAcjH,GAC5DpL,KAAK,KAAO,KACZ/Q,KAAKqjB,aACPF,GAAQ,iBAAiBlD,EAAK1E,EAAE0E,EAAK7D,GAAG,cAAc6D,EAAK9D,EAAE8D,EAAK/D,GAAG,QAAS+D,EAAK7D,EAAG,QAAS6D,EAAK/D,EAAG,+CACpF+D,EAAK1E,EAAE0E,EAAK7D,EAAIpc,KAAKojB,cAAchH,EAAIpc,KAAKojB,cAAc7H,GAAG,cAAc0E,EAAK9D,EAAE8D,EAAK/D,EAAIlc,KAAKojB,cAAclH,EAAIlc,KAAKojB,cAAcjH,GAAG,SAAS8D,EAAK7D,EAAIpc,KAAKojB,cAAchH,GAAG,SAAS6D,EAAK/D,EAAIlc,KAAKojB,cAAclH,GAAG,4EAI7O,GAAIlc,KAAK0f,gBAAkB,EAAG,CAC5B,IAAM4D,EAAalK,EAAcoD,EAAG,EAAG5O,EAAG,EAAG5N,KAAK0f,gBAAiB,GAC7D6D,EAAWnK,EAAcoD,EAAG,EAAG5O,EAAG,EAAG5N,KAAK0f,gBAAiB1f,KAAK2f,gBAChE6D,EAAiC,KAAxBxjB,KAAKyjB,oBAAwB/V,EAAY1N,KAAKyjB,eACvD1E,EAAO/e,KAAK2f,eAAiB,EAAI,OAAS6D,EAChDL,GACE,2BAA2BG,EAAW,kCACbC,EAAS,aACjCC,EAAS,UAAUA,EAAS,KAC5BzE,EAAO,SAAUA,EAAO,IACzB,MAGJoE,GAAQ9D,EAAWD,EAAWG,EAAYD,EAAYE,EAAgBC,EAGtE,OAFA0D,GAAQ,gBAWV1iB,QAAS,SAASC,EAASwB,GACzB,QAAawL,IAATxL,QAAkCwL,IAAZhN,EAA1B,CAGA,IAAMgP,EAAO1P,KACPW,EAAQhC,GAAG6X,UAAUoC,OAAO5Y,KAAK6T,aAAanT,GAASgW,UAAWxU,GAClE6C,EAAS/E,KAAK0jB,sBACdC,EAAQ1V,MAAM2V,KAAK5jB,KAAKO,gBAAgBsjB,qBAAqB,UAC7DC,EAAc9jB,KAAK+jB,YAAYrjB,EAASC,GAE9CX,KAAK8e,gBAAgBlU,QAAQ,SAASkV,EAAWzS,GAC/C,GAAI3M,IAAYof,EAAUpf,QAAS,CACjCqE,EAAOsI,KACJlB,KAAKpC,IAAIoC,KAAKnC,IAAIrJ,EAAOmf,EAAU/V,KAAM+V,EAAU9V,KAAK8V,EAAU/V,MAAM+V,EAAU9V,IAAI8V,EAAU/V,KACjGpJ,EAAQmf,EAAU/V,IAClBpJ,EAAQmf,EAAU9V,UAEH0D,IAAbiW,EAAMtW,KACRsW,EAAMtW,GAAG9J,YAAcugB,GAEzBpU,EAAKgP,SAAWrR,GAAG2W,MAAMjf,EAAOsI,GAAG,IAAKqC,EAAKuU,gBAIjDjkB,KAAKgf,oBAAoBja,KAa3Bud,SAA2B,SAAU4B,EAAOC,GACA,IAAtCnkB,KAAKiZ,SAAsBtV,SAE7B3D,KAAKiZ,SAAwBhL,MAAM2V,KAAK5jB,KAAKO,gBAAgB6jB,uBAAuB,eAGtF,IAAMtE,EAAY9f,KAAK8e,gBAAgBqF,GACjCpf,EAAS/E,KAAK0jB,sBAAsBS,GACpC9K,EAAarZ,KAAKif,WAClB1F,EAAWvZ,KAAKkf,SAClBmF,EAAchL,EAAa6K,GAAS3K,EAAWF,GAC7C2E,EAAgBhe,KAAKskB,mBAEtBtG,IACHqG,EAAe9K,EAAWF,EACtBlN,KAAKnC,IAAIqP,EAAYgL,EAAcvE,EAAUE,UAC7C7T,KAAKpC,IAAIsP,EAAYgL,EAAcvE,EAAUE,WAE/CF,EAAUyE,MACZvkB,KAAKiZ,SAAsBkL,GAAiBvc,aAAa,IACvDjJ,GAAGC,GAAGC,UAAUuC,KAAKsa,SAAStC,cAC5BC,GACC2E,GAAiBjZ,EAAO,IAAImf,EAAM,IAAapE,EAAUC,WAAd,EAC5CsE,GACCrG,GAAiBjZ,EAAO,IAAImf,EAAM,IAAapE,EAAUE,SAAd,EAC5CF,EAAUrG,OACVqG,EAAUvgB,QAIdS,KAAKiZ,SAAsBkL,GAAiBvc,aAAa,IACvDjJ,GAAGC,GAAGC,UAAUuC,KAAKsa,SAASW,kBAAkBgI,EAAavE,QA/lBtEnhB,GAAEC,GAAGC,UAAUuC,KAAKsa,SAASpa,cAAgBA,wYCA7C/C,GAAEgD,UAAUC,qBAAqBF,GAyBjC/C,GAAEC,MAAMC,OAAO,8BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAOC,QAO7C6C,UAAW,SAASC,GAAO,IAAAyiB,EAAAxkB,KACzBrB,GAAAC,GAAAC,UAAAC,eAAAkD,YAAAC,KAAAjC,KAAqB+B,GACrB/B,KAAKykB,SAAa,IAAI9lB,GAAGkF,KAAKwe,0BAA0BriB,KAAK0kB,SAAwB1kB,MACrFA,KAAK2kB,SAAqBhmB,GAAGC,GAAGuW,OAAOK,cAAcoP,OAAOniB,YAAY,wBAAyB,WAC/F+hB,EAAKK,aAEP7kB,KAAK8kB,aAOPlS,SAAU,WACRjU,GAAGC,GAAGuW,OAAOK,cAAcoP,OAAOG,mBAAmB/kB,KAAK2kB,UAC1D3kB,KAAK2kB,SAAqB,KAC1B3kB,KAAKglB,SAAW,MAQlB9lB,YACE6K,KACE3K,MAAO,SACPM,KAAM,GAERsK,KACE5K,MAAO,SACPM,KAAM,KAERulB,MACE7lB,MAAO,SACPM,KAAM,IAERwlB,mBACE9lB,MAAO,UACPM,MAAM,GAERylB,cACE/lB,MAAO,UACPM,MAAM,IASVG,SACEilB,SAAgB,KAChBL,SAAY,KACZO,cAAUtX,EACV0X,cAAS1X,EACT2X,cAAc3X,EACd4X,cAAe5X,EACfiX,cAAoBjX,EACpB6X,UAAU,EACVC,eAAY9X,EAGZ5N,mBAAoB,WAElB,MAAO,wSADkC,KAArBE,KAAKylB,YAAqB,GAAK,KAC5C,gIASTjgB,YAAa,WACX7G,GAAAC,GAAAC,UAAAuC,KAAAskB,MAAAhgB,UAAAF,YAAAG,KAAA1D,KAAAjC,MAEAA,KAAK2lB,UAAchnB,GAAGkF,KAAK+hB,SAASC,SAAS7lB,KAAK8lB,UAAiB,KAAMC,UAAU,GAAO/lB,MAE1FA,KAAKM,WAAWqP,iBAAiB,cAAe3P,OAGlDS,QAAS,SAAUC,EAASwB,GAC1B,IAAIwU,EAAY1W,KAAK6T,aAAanT,GAASgW,UAC3C,IAAI1W,KAAKulB,UAAYvlB,KAAK8kB,SAAepO,KAAexU,EAAxD,CAKAlC,KAAK8kB,YACL9kB,KAAK8kB,SAAepO,GAAaxU,EAEjC,IAAIvB,EAAQhC,GAAG6X,UAAUoC,OAAOlC,EAAWxU,GAG3ClC,KAAKgmB,UAAcrlB,GAAQX,KAAKikB,eAWlC+B,UAAe,SAASrlB,EAAOslB,GAA+B,IAAtBC,EAAsBvM,UAAAhW,OAAA,QAAA+J,IAAAiM,UAAA,IAAAA,UAAA,GACxD5P,EAAM/J,KAAKoM,SACXpC,EAAMhK,KAAKqM,SACX4Y,EAAOjlB,KAAKmmB,WACH,IAATlB,GAAc9Y,KAAKsE,KAAKzG,EAAID,GAAKkb,GAAQ,OAI3CA,GAAQjb,EAAID,GAAK,KAEnB,IAAIqc,EAAYja,KAAKpC,IAAIoC,KAAKnC,IAAIrJ,EAAOoJ,GAAMC,GAE/C,IAAKhK,KAAKqmB,uBAAwB,CAEhC,IAAIC,EAAYna,KAAKoa,OAAOH,EAAYrc,GAAOkb,GAAQA,EAAOlb,EAI9Dqc,EAAYA,GADUja,KAAKqa,OAAOxc,EAAMD,GAAOkb,GAAQA,EAAOlb,EAAMC,GAAO,EAClCsc,EAAYtc,EAGvD,IAAIka,EAAQla,IAAMD,EAAM,GAAKqc,EAAUrc,IAAMC,EAAID,GAEjD,GAAImc,EAAc,CAChB,IACI1F,EAAQ0D,GADKla,IAAMD,EAAM,GAAKoC,KAAKpC,IAAIoC,KAAKnC,IAAIrJ,EAAOoJ,GAAMC,GAAKD,IAAMC,EAAID,IAE5E0c,GAAazc,EAAMD,GAAOkb,EAC1ByB,EAAMva,KAAAwa,IAAI,EAAEF,EAAc,GAC9BvC,GAAS/X,KAAKpC,IAAI2c,EAAMva,KAAAwa,IAAGnG,EAAO,GAAGrU,KAAKsE,IAAI+P,IAAUrU,KAAKya,KAAKpG,GAIpExgB,KAAK6mB,cAAcT,GAEnB,GAAyB,KAArBpmB,KAAKylB,YAAoB,CAE3B,IAAIqB,EAAe9mB,KAAKY,aAAawlB,GAGrCU,EAAe9mB,KAAK+jB,iBAAYrW,EAAWoZ,GAC3C9mB,KAAK+mB,SAASD,GAEd9mB,KAAKgnB,aAAaZ,GAElB,IAAIa,EAASjnB,KAAKO,gBAAgBC,cAAc,UAChDR,KAAK2N,iBAAiBmZ,EAAc,SAAAlZ,GAClCqZ,EAAOxX,UAAY7B,IAIvB5N,KAAKykB,SAAWT,MAAME,EAAO+B,IAG/BvB,SAAwB,SAAUR,GAChC,QAAsBxW,IAAlB1N,KAAKglB,SAAwB,CAC/B,IAAIha,EAAUhL,KAAKO,gBACnBP,KAAKglB,SAAWha,EAAQxK,cAAc,UACtCR,KAAKolB,SAAUpa,EAAQxK,cAAc,oBAEvC,GAAsB,OAAlBR,KAAKglB,SAAT,CAMA,QAA0BtX,IAAtB1N,KAAKqlB,eAAqD3X,IAAvB1N,KAAKslB,SAA6B,CACvE,IACEpiB,EAAQlD,KAAKO,gBAAgBC,cAAc,UACvC0mB,EAAcpO,OAAOC,iBAAiB7V,GAC5ClD,KAAKqlB,SAAerZ,WAAWkb,EAAYC,iBAAiB,UAC5DnnB,KAAKslB,SAAgBtZ,WAAW8M,OAAOC,iBAAiB/Y,KAAKglB,UAAUmC,iBAAiB,UACxFnnB,KAAKolB,SAAQrlB,MAAMqnB,WAAa,IAAMF,EAAYC,iBAAiB,gBACnEnnB,KAAKolB,SAAQrlB,MAAMsnB,aAAeH,EAAYC,iBAAiB,iBAEjE,IAAIxjB,EAASugB,EAAQlkB,KAAKqlB,SAC1BrlB,KAAKglB,SAASjlB,MAAM2W,UAAY,gBAAkB/S,EAAO3D,KAAKslB,SAAc,GAAK,gBACjFtlB,KAAKolB,SAAQrlB,MAAMR,MAAQoE,EAAS,UAdlC3D,KAAKsnB,gBAAgB,aAiBzBzC,SAAwB,WACtB,IAAI9a,EAAM/J,KAAKoM,SACXpC,EAAMhK,KAAKqM,SACfrM,KAAKqlB,cAAe3X,EACpB1N,KAAKykB,SAAWT,MAAMha,IAAMD,EAAM,GAAK/J,KAAKiM,gBAAgBlC,IAAMC,EAAID,KAGxEwd,YAAa,SAAUtiB,GACrB,IAAIuiB,EAAW,EAEf,OAAQviB,EAAMmT,MACZ,IAAK,cACHpY,KAAKulB,UAAW,EAChB/V,SAASG,iBAAiB,cAAe3P,MACzCwP,SAASG,iBAAiB,YAAa3P,MACvC,IAAIynB,EAAexiB,EAAMyiB,cAAcC,wBACnCC,EAAgB9O,OAAOC,iBAAiB9T,EAAMyiB,eAClD1nB,KAAKwlB,UAAaiC,EAAaxX,KAAOjE,WAAW4b,EAAcC,aAC/DL,GAAYviB,EAAMmL,QAAUpQ,KAAKwlB,WAAcxlB,KAAKqlB,SACpD,MAGF,IAAK,cACH,IAAKrlB,KAAKulB,SACR,OAEFiC,GAAYviB,EAAMmL,QAAUpQ,KAAKwlB,WAAYxlB,KAAKqlB,SAClD,MAEF,IAAK,YACHrlB,KAAKulB,UAAW,EAChB/V,SAASsY,oBAAoB,cAAe9nB,MAC5CwP,SAASsY,oBAAoB,YAAa9nB,MAC1CwnB,GAAYviB,EAAMmL,QAAUpQ,KAAKwlB,WAAYxlB,KAAKqlB,SAItDmC,EAAWrb,KAAKpC,IAAIoC,KAAKnC,IAAIwd,EAAU,GAAM,GAC7C,IAAIO,EAAW/nB,KAAKoM,SAAWob,GAAYxnB,KAAKqM,SAAWrM,KAAKoM,UAChEpM,KAAKgmB,UAAc+B,EAAU/nB,KAAKulB,SAAUvlB,KAAKulB,UAC5CvlB,KAAKgoB,mBAAoC,cAAf/iB,EAAMmT,MACnCpY,KAAK2lB,UAAY1jB,KAAK8lB,IAI1BjC,UAAiB,SAASnlB,GACxBX,KAAK8kB,SAAiB9kB,KAAKiJ,cAActI,GAAO,EAAOX,KAAK8kB,YAIhE9jB,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,QAASF,MA/QxDtC,GAAEC,GAAGC,UAAUuC,KAAKskB,MAAMpkB,cAAgBA,kMCA1C/C,GAAEgD,UAAUC,qBAAqBF,GA0DjC/C,GAAEC,MAAMC,OAAO,+BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAOC,QAO7CC,YACE+oB,SACE7oB,MAAO,SACPM,KAAM,KAERwoB,UACE9oB,MAAO,SACPM,KAAM,MASVG,SAGEC,mBAAoB,WAClB,MAAO,uEAQTyH,aAAc,SAAS5G,GACrB,IAAMuC,EAAQlD,KAAKM,WAEnBK,EAAQX,KAAKiM,gBACb,IAAMkM,EAAMnY,KAAKmoB,cAEjBjlB,EAAM+H,UAAUoD,OAAO1N,GAASwX,EAAM,gBAAkB,mBACxDjV,EAAM+H,UAAUqD,IAAI3N,GAASwX,EAAM,kBAAoB,kBAOzD3J,eAAgB,WAEd,OAAQxO,KAAKiM,iBAAmBjM,KAAKmoB,cAAgBnoB,KAAKooB,aAAepoB,KAAKmoB,kBA/GnFxpB,GAAEC,GAAGC,UAAUuC,KAAKinB,OAAO/mB,cAAgBA,2HCA3C/C,GAAEgD,UAAUC,qBAAqBF,GAkCjC/C,GAAEC,MAAMC,OAAO,6BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAOxBe,SAEEC,mBAAoB,WAClB,MAAO,OA7CZnB,GAAEC,GAAGC,UAAUuC,KAAKknB,KAAKhnB,cAAgBA,gPCAzC/C,GAAEgD,UAAUC,qBAAqBF,GA4BjC/C,GAAEC,MAAMC,OAAO,+BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SAAUJ,GAAGC,GAAGI,OAAO4C,QAASjD,GAAGC,GAAGI,OAAOC,OAAQN,GAAGC,GAAGI,OAAO6C,mBAOlEhC,SAEEC,mBAAoB,WAClB,MAAO,uEAOT0O,eAAgB,WACd,OAAOxO,KAAKuoB,mBAAmBvoB,KAAKiM,gBAAiBjM,KAAKgN,kBAhD/DrO,GAAEC,GAAGC,UAAUuC,KAAKonB,OAAOlnB,cAAgBA,iSCA3C/C,GAAEgD,UAAUC,qBAAqBF,GA6BjC/C,GAAEC,MAAMC,OAAO,gCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAO4C,QACbjD,GAAGC,GAAGI,OAAO6C,kBACblD,GAAGC,GAAGI,OAAOsZ,YACb3Z,GAAGC,GAAGI,OAAOuK,iBAQfrK,YACEgJ,WAAa9I,MAAO,SAAUM,KAAM,KACpC+oB,YAAcrpB,MAAO,SAAUM,KAAM,MAQvCG,SAEE2F,YAAa,WACX7G,GAAAC,GAAAC,UAAAuC,KAAAsnB,QAAAhjB,UAAAF,YAAAG,KAAA1D,KAAAjC,MACAA,KAAKuY,mBAAc7K,EAAW1N,KAAKgJ,eAAgBhJ,KAAKO,kBAI1DT,mBAAoB,WAClB,MAAO,uEAOTkD,QAAS,WACP,IAAMrC,EAASX,KAAK2oB,oBAAsB,GAAK3oB,KAAK4oB,iBAAoB5oB,KAAK6oB,gBAAkB7oB,KAAKgJ,eACpGhJ,KAAKiJ,cAActI,EAAO,SAASD,GACjC,SAAgC,EAAtBA,EAAQ4L,gBAOtBlB,WAAY,WACVpL,KAAKiJ,cAAcjJ,KAAKgJ,eAAgB,SAAStI,GAC/C,SAAgC,EAAtBA,EAAQ4L,mBAjFzB3N,GAAEC,GAAGC,UAAUuC,KAAKsnB,QAAQpnB,cAAgBA,oLCA5C/C,GAAEgD,UAAUC,qBAAqBF,GA2BjC/C,GAAEC,MAAMC,OAAO,gCACdC,OAAQH,GAAGuqB,KAAK3gB,OAOhBrG,UAAW,SAASC,GAClB/B,KAAK+oB,IAAIhnB,IASX7C,YACE+D,MACE7D,MAAO,SACPM,KAAM,IAERspB,QACE5pB,MAAO,SACPM,KAAM,WAERupB,aACE7pB,MAAO,SACPM,KAAM,IAERgW,UACEtW,OAAQ,OAAQ,KAAM,MACtBM,KAAM,QAERwpB,cACE9pB,MAAO,sCACPM,KAAM,OASVG,SAKEU,cAAe,WACb,OAAOiP,SAAShP,cAAc,IAAMR,KAAK6Q,YAO3CnP,aAAc,WACZ,MAAO,qCAAqCnD,GAAG4qB,OAAO/T,QAAQgU,GAAG,cAAeppB,KAAKqpB,kBAAoB,iBAI7GroB,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,UAAWF,MA5F1DtC,GAAEC,GAAGC,UAAUuC,KAAKkoB,QAAQhoB,cAAgBA,2VCA5C/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,mCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAO4C,QACbjD,GAAGC,GAAGI,OAAO6C,kBACblD,GAAGC,GAAGI,OAAOsZ,aAQfpZ,YACEgJ,WAAa9I,MAAO,SAAUM,KAAM,KACpC6pB,QAAUnqB,MAAO,SAAUM,KAAM,IACjCqJ,KAAO3J,MAAO,SAAUC,UAAU,EAAMqS,MAAO,cAQjD7R,SACE2pB,SAAO,KAEPC,OAAQ,WACN,OAAOzpB,KAAKwpB,UAIdE,UAAW,SAAS/oB,GAClB,GAAIA,EACF,GAAKX,KAAKwpB,SASRxpB,KAAKwpB,SAAMG,OAAOprB,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAMvG,QAT/C,CACf,IAAMipB,EAAM,IAAIrrB,GAAG8D,GAAGwnB,QAAQC,IAAIvrB,GAAGsF,KAAKoD,gBAAgB7B,cAAc8B,MAAMvG,IAC9EipB,EAAIb,KACFgB,OAAQ,MACRC,OAAQ,mBACRC,YAAajqB,KAAKkqB,cAEpBlqB,KAAKwpB,SAAQI,IAQnBpkB,YAAa,WACX7G,GAAAC,GAAAC,UAAAuC,KAAA+oB,WAAAzkB,UAAAF,YAAAG,KAAA1D,KAAAjC,MACAA,KAAKuY,mBAAc7K,EAAW1N,KAAKgJ,eAAgBhJ,KAAKO,kBAI1DT,mBAAoB,WAClB,IAAIoD,EAAQ,qCACRlD,KAAK6F,aACP3C,GAASlD,KAAK6F,YAGhB,OADA3C,GAAS,qCAKXF,QAAS,WACHhD,KAAKwpB,UACPxpB,KAAKwpB,SAAMY,SAUjBxX,SAAU,WACR5S,KAAKsnB,gBAAgB,aAGvBtmB,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,aAAcF,MA5G7DtC,GAAEC,GAAGC,UAAUuC,KAAK+oB,WAAW7oB,cAAgBA,2HCA/C/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,8BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eAOxBI,YACEK,OAAYH,MAAO,SAAUC,UAAU,GACvCG,QAAYJ,MAAO,SAAUC,UAAU,GACvCF,KAAYC,MAAO,SAAUM,KAAM,IACnCD,UAAYL,MAAO,UAAWM,MAAM,IAQtCG,SAEEC,mBAAoB,WAElB,IAAIC,EAAQ,GACRC,KAAKC,aACPF,GAAS,SAAWC,KAAKC,WAAa,KAEpCD,KAAKE,cACPH,GAAS,UAAYC,KAAKE,YAAc,KAE5B,KAAVH,IACTA,EAAQ,UAAYA,EAAQ,KAEvB,IAAMN,EAAWO,KAAKqqB,aAAe,uBAAyB,GAC9D,MAAO,kCAAoCrqB,KAAKK,SAAW,KAAON,EAAQN,EAAW,kCAIvFiI,gBAAiB,WACf,OAAO1H,KAAKO,gBAAgBC,cAAc,UAI5CqH,cAAe,SAASlH,GACtB,IAAM2pB,EAAQtqB,KAAK0H,kBACf4iB,KACY,IAAV3pB,GAAkBX,KAAKqqB,aACzBC,EAAMvpB,OAENupB,EAAMC,aA5Ef5rB,GAAEC,GAAGC,UAAUuC,KAAKopB,MAAMlpB,cAAgBA,2OCA1C/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,4BACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,SACEJ,GAAGC,GAAGI,OAAOC,OACbN,GAAGC,GAAGI,OAAOmH,SAQfjH,YAEEK,OACEH,MAAO,SACPC,UAAU,GAEZG,QACEJ,MAAO,SACPC,UAAU,GAEZorB,aACErrB,MAAO,UACPM,MAAM,GAERgrB,YACEtrB,MAAO,SACPC,UAAU,GAEZsrB,WACEvrB,OAAQ,OAAQ,MAAO,MACvBC,UAAU,GAEZF,KACEC,MAAO,SACPC,UAAU,IASdQ,SAEEC,mBAAoB,WAClB,IAAI8qB,EAAW5qB,KAAKkG,WAChBlG,KAAKC,WACP2qB,GAAY,SAAW5qB,KAAKC,WAAa,IAEzC2qB,GAAY,eAEV5qB,KAAKE,cACP0qB,GAAY,UAAY5qB,KAAKE,YAAc,MAEf,IAA1BF,KAAK6qB,mBACPD,GAAY,iBAEV5qB,KAAK8qB,kBACPF,GAAY,oBAAsB5qB,KAAK8qB,gBAAkB,KAE1C,KAAbF,IACFA,EAAW,UAAYA,EAAW,KAGpC,IAAID,EAAY,GACZ3qB,KAAK+qB,iBACPJ,EAAY,cAAgB3qB,KAAK+qB,eAAiB,KAEpD,MAAO,mCAAqC/qB,KAAKK,SAAW,KAAOuqB,EAAWD,EAAY,oBAS5FlqB,QAAS,SAASC,EAASwB,GACzB,IAAI8oB,EAAOhrB,KAAK6T,aAAanT,GAC7B,GAAKsqB,GAGQ,IAAT9oB,EAAY,CACd,IAAM+oB,EAASjrB,KAAKO,gBAAgBC,cAAc,UAClDR,KAAKkrB,cAAcD,EAAQA,EAAOE,aAAa,QAE/CxsB,GAAGwG,eAAeC,cAAckR,KAAKC,MAAM7V,EAAS/B,GAAG6X,UAAUC,OAAOuU,EAAKtU,UAAW,SAnH/F/X,GAAEC,GAAGC,UAAUuC,KAAKgqB,IAAI9pB,cAAgBA,8PCAxC/C,GAAEgD,UAAUC,qBAAqBF,GA8BjC/C,GAAEC,MAAMC,OAAO,qCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,QAASJ,GAAGC,GAAGI,OAAOC,OAQtBC,YACEmsB,UAAejsB,MAAO,SAAUC,UAAU,EAAMqS,MAAO,mBAQzD7R,SACEyrB,SAAW,KAGXC,eAAgB,SAAS5qB,GACvB,GAAIA,EAAO,CACT,GAAKX,KAAKsrB,SAQRtrB,KAAKsrB,SAAU3B,OAAO,yBAA2BhpB,OAR9B,CAEnBX,KAAKsrB,SAAY,IAAI/sB,GAAG8D,GAAGwnB,QAAQC,IAAI,yBAA2BnpB,GAClEX,KAAKsrB,SAAUvC,KACbiB,OAAQ,qBAEVhqB,KAAKsrB,SAAU7oB,YAAY,UAAWzC,KAAKwrB,WAAYxrB,MAIzDrB,GAAGwG,eAAeC,cAAcqmB,uBAAuBzrB,KAAKsrB,SAAUlB,KAAMpqB,KAAKsrB,YAIrFI,WAAY,WACV,OAAO1rB,KAAKsrB,UAOdE,WAAY,SAAS9oB,GACnB,IACMR,EADMQ,EAAGwC,YACEymB,cACjB3rB,KAAKuY,mBAAc7K,EAAWxL,EAAKlC,KAAK4rB,eAAgB5rB,KAAK0H,oBAI/D5H,mBAAoB,WAClB,MAAO,uDAMTyH,aAAc,WACRvH,KAAKsrB,UACPtrB,KAAKsrB,SAAUlB,SAUrBxX,SAAU,WACR5S,KAAKsnB,gBAAgB,aAGvBtmB,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,gBAAiBF,MA5GhEtC,GAAEC,GAAGC,UAAUuC,KAAKyqB,aAAavqB,cAAgBA,qNCAjD/C,GAAEgD,UAAUC,qBAAqBF,GA0BjC/C,GAAEC,MAAMC,OAAO,yCACdC,OAAQC,GAAGC,GAAGC,UAAUC,eACxBC,QAASJ,GAAGC,GAAGI,OAAO4F,YAOtB1F,YACEkK,WACEC,QAAQ,EACR3J,MAAM,GAERosB,cAAe1sB,MAAO,QAASM,UAQjCG,SAEE6B,aAAc,WACZ,OAAO1B,KAAKgG,yBAIhBhF,MAAO,SAASC,GACdtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,aAAcF,GAC1DtC,GAAGC,GAAGC,UAAUqC,cAAcC,cAAc,eAAgBF,MAzD/DtC,GAAEC,GAAGC,UAAUuC,KAAK2qB,iBAAiBzqB,cAAgBA","sourcesContent":["/* Audio.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The audio widget embeds an audio file, which can be automatically played by incoming data\n *\n * @widgetexample <settings>\n *   <screenshot name=\"audio_example\">\n *    <caption>Default example for defining an audio widget in the configuration</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n * </settings>\n * <audio id=\"audio_widget\" src=\"path/to/audio_file.mp3\">\n *   <layout colspan=\"4\" />\n *   <label>Audio</label>\n *   <address transform=\"DPT:1.001\" mode=\"read\">0/0/0</address>\n * </audio>\n *\n *\n * @author Markus Damman\n * @since 0.8.4 (2014)\n */\n  qx.Class.define('cv.ui.structure.pure.Audio', {\n    extend: cv.ui.structure.AbstractWidget,\n\n    include: cv.ui.common.Update,\n\n    /*\n    ******************************************************\n      PROPERTIES\n    ******************************************************\n    */\n    properties: {\n      src: { check: 'String', nullable: true },\n      id: { check: 'String', nullable: true },\n      width: { check: 'String', nullable: true },\n      height: { check: 'String', nullable: true },\n      autoplay: { check: 'Boolean', init: false },\n      loop: { check: 'Boolean', init: false },\n      thresholdValue: { check: 'Number', init: 1 }\n    },\n\n    /*\n    ******************************************************\n      MEMBERS\n    ******************************************************\n    */\n    members: {\n\n      // overridden\n      _getInnerDomString: function () {\n        // create the main structure\n        // create the actor\n        let style = '';\n        if (this.getWidth()) {\n style += 'width:' + this.getWidth() + ';'; \n}\n        if (this.getHeight()) {\n style += 'height:' + this.getHeight() + ';'; \n}\n        if (style !== '') {\n style = 'style=\"' + style + '\"'; \n}\n        const autoplay = (this.isAutoplay()) ? ' autoplay ' : '';\n        const loop = (this.isLoop()) ? ' loop ' : '';\n        return '<div class=\"actor\"><audio id=\"' + this.getId() + '\" ' + autoplay + loop + style + ' controls> <source src=\"' + this.getSrc()+ '\" > </audio> </div>';\n      },\n\n      // overridden\n      getActor: function() {\n        return this.getDomElement().querySelector('.actor audio');\n      },\n\n      /**\n       * Handles updates of incoming data for this widget\n       *\n       * @param address {String} Source address of the incoming data\n       * @param value {String} Incoming data\n       */\n      _update: function (address, value) {\n        const on = this.applyMapping(this.getThresholdValue());\n        if (value >= on) {\n          const audioWidget = this.getActor();\n          if (audioWidget.paused === true) {\n            audioWidget.play();\n          }\n        }\n      }\n    },\n\n    defer: function(statics) {\n      cv.ui.structure.WidgetFactory.registerClass('audio', statics);\n    }\n  });\n","/* Break.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A break tag is used to start in new line for a grouped and thereby tidy display of\n * elements on one page.\n *\n * <pre class=\"sunlight-highlight-xml\">\n * &lt;break/&gt;\n * </pre>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Break', {\n  extend: cv.ui.structure.AbstractBasicWidget,\n\n  /*\n   ******************************************************\n     MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    getDomString: function () {\n      return '<br/>';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('break', statics);\n  }\n});\n","/* DesignToggle.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a button to toggle through the available designs\n * @widgetexample\n * <designtoggle>\n *   <layout colspan=\"6\"/>\n *   <label>Change Design</label>\n * </designtoggle>\n *\n *\n *\n * @author Christian Mayer\n * @since 0.5.3 (2010)\n */\nqx.Class.define('cv.ui.structure.pure.DesignToggle', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton],\n\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct: function(props) {\n    this.base(arguments, props);\n    const store = new qx.data.store.Json(cv.io.rest.Client.getBaseUrl() + '/data/designs');\n    store.addListener('loaded', function (ev) {\n      this.setAvailableDesigns(ev.getData());\n    }, this);\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    availableDesigns: { check: 'Array', init: [] }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">' + cv.Config.getDesign() + '</div></div>';\n    },\n    /**\n     * Action performed when the widget got clicked\n     *\n     *\n     * @param path {String} - Internal path of the widget\n     * @param actor {Element} - DOMElement\n     * @param isCanceled {Boolean} - If true the action does nothing\n     */\n    _action: function(path, actor, isCanceled) {\n      if (isCanceled) {\n return; \n}\n\n      const designs = this.getAvailableDesigns();\n\n      const oldDesign = this.getDomElement().querySelector('.value').textContent;\n      const newDesign = designs.getItem((designs.indexOf(oldDesign) + 1) % designs.length);\n\n      const URL = cv.util.Location.getHref();\n      const regexp = new RegExp('design=' + oldDesign);\n      if (URL.search(regexp) !== -1) { // has URL-parameter design\n        cv.util.Location.setHref(URL.replace(regexp, 'design='+newDesign));\n      } else {\n        const parts = cv.util.Location.getHref().split('#');\n        let req = qx.util.Uri.appendParamsToUrl(parts[0], {design: newDesign});\n        if (parts.length > 1) {\n          req += '#'+parts[1];\n        }\n        cv.util.Location.setHref(req);\n      }\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('designtoggle', statics);\n  }\n});\n","/* Group.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A group can be used to group a couple of widgets and optionally surround them with a border or name the group.\n *\n * @widgetexample <settings selector=\".widget_container[data-type=group]\">\n *  <screenshot name=\"group_with_border\">\n *    <caption>Group with border and name</caption>\n *    <data address=\"0/0/0\">1</data>\n *    <data address=\"0/0/1\">21</data>\n *  </screenshot>\n *  </settings>\n *  <group name=\"Example Group\">\n *    <layout colspan=\"6\" />\n *    <text><label>Some Text</label></text>\n *    <switch>\n *      <layout colspan=\"3\" />\n *      <label>Switch</label>\n *      <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *    </switch>\n *    <info format=\"%.1f °C\">\n *      <layout colspan=\"3\" />\n *      <label>Temperature</label>\n *      <address transform=\"DPT:9.001\">0/0/1</address>\n *    </info>\n *  </group>\n *\n * @widgetexample <settings selector=\".widget_container[data-type=group]\">\n *  <screenshot name=\"group_without_border\">\n *    <caption>Hidden Group: no border no name</caption>\n *    <data address=\"0/0/0\">1</data>\n *    <data address=\"0/0/1\">21</data>\n *  </screenshot>\n *  </settings>\n *  <group nowidget=\"true\">\n *    <layout colspan=\"6\" />\n *    <text><label>Some Text</label></text>\n *    <switch>\n *      <layout colspan=\"3\" />\n *      <label>Switch</label>\n *      <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *    </switch>\n *    <info format=\"%.1f °C\">\n *      <layout colspan=\"3\" />\n *      <label>Temperature</label>\n *      <address transform=\"DPT:9.001\">0/0/1</address>\n *    </info>\n *  </group>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Group', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    noWidget: {\n      check: 'Boolean',\n      init: false\n    },\n    name: {\n      check: 'String',\n      init: ''\n    },\n    target: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n\n    /**\n     * Action performed when the group got clicked. If a target is specified in the group attributes\n     * the action will switch to the page defined by the target.\n     *\n     *\n     * @param  event {Event}\n     */\n    action: function (event) {\n      if (this.getTarget()) {\n        cv.TemplateEngine.getInstance().scrollToPage(this.getTarget());\n        if (event.getBubbles()) {\n          event.stopPropagation();\n        }\n      }\n    },\n\n    // overridden, group has no actor\n    getActor: function() {\n      return this.getDomElement();\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.getDomElement().style['z-index'] = 1;\n    },\n\n    // overridden\n    getDomString: function () {\n      // heading style\n      let hstyle = '';\n      if (this.getAlign()) {\n        hstyle += 'style=\"text-align:' + this.getAlign() + '\"';\n      }\n\n      let container = '<div class=\"clearfix\">';\n      if (this.getName()) {\n        container += '<h2 ' + hstyle + '>' + this.getName() + '</h2>';\n      }\n\n      container += this.getChildrenDomString();\n      container += '</div>';\n\n      return '<div class=\"' + this.getClasses() + '\" ' + this.getStyle() + '>' + container + '</div>';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('group', statics);\n  }\n});\n","/* Image.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an image to your visualization. Using the auto-refresh setting this widget can be used e.g. to show\n * a camera picture.\n *\n * @widgetexample\n * <image src=\"resource/icons/CometVisu_orange.png\" width=\"45px\" height=\"32px\">\n *   <layout colspan=\"2\" />\n * </image>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n * @asset(qx/static/blank.gif)\n */\nqx.Class.define('cv.ui.structure.pure.Image', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  include: [cv.ui.common.Refresh, cv.ui.common.Update ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width      : { check: 'String', init: '100%' },\n    height     : { check: 'String', nullable: true },\n    cropTop    : { check: 'String' },\n    cropBottom : { check: 'String' },\n    src        : { check: 'String', init: '' },\n    widthFit   : { check: 'Boolean', init: false },\n    placeholder: {\n      check: ['none', 'src', 'hide', 'exclude'],\n      init: 'none'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __src: null,\n\n    // overridden\n    _getInnerDomString: function () {\n      // create the actor\n      let imgStyle = '';\n      if (this.getWidth()) {\n        imgStyle += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getWidthFit() === true) {\n        imgStyle += 'max-width:100%;';\n      }\n      if (this.getHeight()) {\n        imgStyle += 'height:' + this.getHeight() + ';';\n      }\n      if (this.getCropTop() !== '' || this.getCropBottom() !== '') {\n        let top = '0%';\n        let bottom = '';\n        if (this.getCropTop() !== '') {\n          top = '-' + this.getCropTop();\n          bottom = 'margin-bottom:' + top;\n        }\n        if (this.getCropBottom() !== '') {\n          bottom = 'margin-bottom:calc(' + top + ' - ' + this.getCropBottom() + ');';\n        }\n        imgStyle += 'object-position:0% ' + top + ';' + bottom;\n      }\n\n      let src = this.__getSrc();\n      if (!src) {\n        switch (this.getPlaceholder()) {\n          case 'hide':\n            src = qx.util.ResourceManager.getInstance().toUri('qx/static/blank.gif');\n            break;\n\n          case 'exclude':\n            imgStyle += 'display:none;';\n            break;\n\n          case 'src':\n            this.error('no src placeholder defined');\n            break;\n        }\n      }\n      return '<div class=\"actor\"><img src=\"' + src + '\" style=\"' + imgStyle + '\" /></div>';\n    },\n\n    /**\n     * Return the real src value\n     */\n    __getSrc: function() {\n      if (!this.__src) {\n        let src = this.getSrc();\n        const parsedUri = qx.util.Uri.parseUri(this.getSrc());\n        if (!parsedUri.protocol && !src.startsWith('/')) {\n          // is relative URI, use the ResourceManager\n          src = qx.util.ResourceManager.getInstance().toUri(src);\n        }\n        this.__src = src || '';\n      }\n      return this.__src;\n    },\n\n    handleUpdate: function(text, address) {\n      const valueElem = this.getValueElement();\n      if (!text) {\n        switch (this.getPlaceholder()) {\n          case 'src':\n            text = this.__getSrc();\n            valueElem.style.display = 'inline';\n            break;\n\n          case 'hide':\n            text = qx.util.ResourceManager.getInstance().toUri('qx/static/blank.gif');\n            valueElem.style.display = 'inline';\n            break;\n\n          case 'exclude':\n            valueElem.style.display = 'none';\n            break;\n        }\n      } else {\n        valueElem.style.display = 'inline';\n      }\n      valueElem.setAttribute('src', text);\n    },\n\n    // overridden\n    getValueElement: function() {\n      return this.getDomElement().querySelector('img');\n    },\n\n    // overridden\n    _applyVisible: function(value) {\n      const valueElem = this.getValueElement();\n      if (!valueElem || this.getRefresh() > 0) {\n        return;\n      }\n      if (value === true) {\n        valueElem.setAttribute('src', this.__getSrc());\n      } else {\n        valueElem.setAttribute('src', '');\n      }\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('image', statics);\n  }\n});\n","/* ImageTrigger.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an image like the {@link cv.ui.structure.pure.Image} widget, but additionally the image can be changed by incoming\n * data and can send data to the backend by clicking on it.\n * There are two modes to react on incoming data:\n *\n * <ul>\n *  <li><code>type=\"show\"</code>: Hides the image when incoming data === 0</li>\n *  <li><code>type=\"select\"</code>: Changes the image by appending the incoming data to the initial configured image source, or hide it when incoming data === 0</li>\n * </ul>\n * Example:\n * <pre class=\"sunlight-highlight-xml\">\n * &lt;imagetrigger src=\"resource/icons/comet\" suffix=\"svg\" sendValue=\"clicked\" type=\"select\"&gt;\n *    &lt;address transform=\"DPT:16.001\" mode=\"readwrite\"&gt;0/0/0&lt;/address&gt;\n * &lt;/imagetrigger&gt;\n * </pre>\n *\n * initially shows nothing. When the CometVisu receives the string <code>_icon</code> in address <code>0/0/0</code>,\n * the image <code>icons/comet_opt_icon.svg</code> is shown. When the CometVisu receives '0' on address <code>0/0/0</code>,\n * this image is hidden.\n *\n * @widgetexample <settings>\n *   <screenshot name=\"image_trigger\">\n *     <caption>Image changed by incoming data 'blue'</caption>\n *     <data address=\"0/0/0\">blue</data>\n *   </screenshot>\n *   <screenshot name=\"image_trigger_changes\">\n *     <caption>Image changed by incoming data 'grey'</caption>\n *     <data address=\"0/0/0\">grey</data>\n *   </screenshot>\n *  </settings>\n *  <imagetrigger src=\"resource/icons/CometVisu_\" suffix=\"png\" sendValue=\"clicked\" type=\"select\" width=\"45px\" height=\"32px\">\n *    <layout colspan=\"1\" />\n *    <address transform=\"DPT:16.001\" mode=\"readwrite\">0/0/0</address>\n *  </imagetrigger>\n *\n * @widgetexample <settings>\n *   <caption>Disable layout width by settings it to '0', to have widget with === image width</caption>\n *   <screenshot name=\"image_trigger_colspan0\">\n *     <data address=\"0/0/0\">1</data>\n *   </screenshot>\n *  </settings>\n *  <imagetrigger src=\"resource/icons/CometVisu_orange\" suffix=\"png\" sendValue=\"clicked\" type=\"show\" width=\"45px\" height=\"32px\">\n *    <layout colspan=\"0\" />\n *    <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *  </imagetrigger>\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.ImageTrigger', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.Refresh,\n    cv.ui.common.Update\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    height: { check: 'String', nullable: true },\n    updateType: {check: 'String', init: ''},\n    width: {check: 'String', init: '100%'},\n    src: { check: 'String', nullable: true },\n    suffix: { check: 'String', nullable: true },\n    sendValue: { check: 'String', init: ''}\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      let style = '';\n      if (Object.keys(this.getLayout()).length === 0) {\n        style += cv.parser.WidgetParser.extractLayout(this.getLayout(), this.getPageType());\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style.length > 0) {\n        style = ' style=\"'+style+'\"';\n      }\n\n      let actor = '<div class=\"actor\">';\n      if (this.getUpdateType() === 'show') {\n        actor += '<img src=\"' + this.__getUrl(this.getSrc() + '.' + this.getSuffix()) + '\"' + style.trim() + ' />';\n      } else {\n        actor += '<img src=\"\"' + style + ' />';\n      }\n\n      actor += '</div>';\n      return actor;\n    },\n\n    _update: function(address, value) {\n      const imageChild = this.getDomElement().querySelector('img');\n      if (this.getUpdateType() === 'show') {\n        if (value === 0) {\n          imageChild.style.display = 'none';\n        } else {\n          imageChild.setAttribute('src', this.__getUrl(this.getSrc() + '.' + this.getSuffix()));\n          imageChild.style.display = 'block';\n        }\n      } else if (this.getUpdateType() === 'select') {\n        if (value === 0) {\n          imageChild.style.display = 'none';\n        } else {\n          imageChild.setAttribute('src', this.__getUrl(this.getSrc() + value + '.' + this.getSuffix()));\n          imageChild.style.display = 'block';\n        }\n      }\n\n      //TODO: add value if mapping exists\n      //TODO: get image name from mapping\n      //TODO: add bitmask for multiple images\n      //TODO: add SVG-magics\n    },\n\n    __getUrl: function(url) {\n      const parsedUri = qx.util.Uri.parseUri(url);\n      if (!parsedUri.protocol && !url.startsWith('/')) {\n        // is relative URI, use the ResourceManager\n        url = qx.util.ResourceManager.getInstance().toUri(url);\n      }\n      return url;\n    },\n\n    _action: function() {\n      if (this.getSendValue() === '') {\n return; \n}\n      this.sendToBackend(this.getSendValue());\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('imagetrigger', statics);\n  }\n});\n","/* Info.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a dynamic field to the visu that can represent values from the BUS\n * (e.g. 14-byte text or temperature measurements).\n *\n * @widgetexample <settings>\n *   <caption>Show temperature in degree celsius</caption>\n *   <screenshot name=\"info_temp\">\n *     <data address=\"0/0/0\">19</data>\n *   </screenshot>\n * </settings>\n * <info format=\"%.1f °C\">\n *   <label>outside temperature</label>\n *   <address transform=\"DPT:9.001\">0/0/0</address>\n * </info>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Info', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor\"><div class=\"value\">-</div></div>';\n    }\n  }\n});\n\n","/* InfoAction.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The infoaction widget is a combination of an info/text widget and an \"action\"-widget, e.g. switch or trigger.\n *\n * Use case: if you have a group of lights, you can show the number of lights currently switched on\n * and control the whole group in one widget.\n *\n * @widgetexample <settings>\n *   <caption>Example combines an info widget to show the number of lights currently switched on, and an Switch to control them</caption>\n *   <screenshot name=\"infoaction_lights\">\n *     <data address=\"0/0/0\">4</data>\n *     <data address=\"0/0/1\">1</data>\n *   </screenshot>\n * </settings>\n * <meta>\n *  <mappings>\n *    <mapping name=\"OnOff\">\n *      <entry value=\"0\">Off</entry>\n *      <entry value=\"1\">On</entry>\n *    </mapping>\n *  </mappings>\n *  <stylings>\n *    <styling name=\"GreyGreen\">\n *      <entry value=\"0\">grey</entry>\n *      <entry value=\"1\">green</entry>\n *    </styling>\n *  </stylings>\n * </meta>\n * <infoaction>\n *  <layout colspan=\"4\"/>\n *  <label>Lights</label>\n *  <widgetinfo>\n *    <info>\n *     <address transform=\"DPT:9.001\">0/0/0</address>\n *    </info>\n *  </widgetinfo>\n *  <widgetaction>\n *   <switch mapping=\"OnOff\" styling=\"GreyGreen\">\n *    <layout colspan=\"3\" />\n *    <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/1</address>\n *   </switch>\n *  </widgetaction>\n * </infoaction>\n *\n *\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (as widget), 0.9.2 (as plugin)\n */\nqx.Class.define('cv.ui.structure.pure.InfoAction', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    }\n  },\n\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return this.getChildrenDomString();\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infoaction', statics);\n  }\n});\n","/* InfoTrigger.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an element to the visu that contains two buttons and a value indication for feedback\n * from the BUS. (E.g. for multimedia control\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.InfoTrigger', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.Update,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.HandleLongpress\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    'downValue': {\n      check: 'Number',\n      init: 0\n    },\n    'shortDownValue': {\n      check: 'Number',\n      nullable: true\n    },\n    'downLabel': {\n      check: 'String',\n      nullable: true\n    },\n    'upValue': {\n      check: 'Number',\n      init: 0\n    },\n    'shortUpValue': {\n      check: 'Number',\n      nullable: true\n    },\n    'upLabel': {\n      check: 'String',\n      nullable: true\n    },\n    'isAbsolute': {\n      check: 'Boolean',\n      init: false\n    },\n    'min': {\n      check: 'Number',\n      init: 0\n    },\n    'max': {\n      check: 'Number',\n      init: 255\n    },\n    'infoPosition': {\n      check: ['left', 'middle', 'right'],\n      init: 'middle'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      // create buttons + info\n      let ret_val = '<div style=\"float:left;\">';\n\n      let actordown = '<div class=\"actor switchUnpressed downlabel\" ';\n      if (this.getAlign()) {\n        actordown += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actordown += '>';\n      actordown += '<div class=\"label\">' + (this.getDownLabel() || '-') + '</div>';\n      actordown += '</div>';\n\n      let actorup = '<div class=\"actor switchUnpressed uplabel\" ';\n      if (this.getAlign()) {\n        actorup += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorup += '>';\n      actorup += '<div class=\"label\">' + (this.getUpLabel() || '+') + '</div>';\n      actorup += '</div>';\n\n      let actorinfo = '<div class=\"actor switchInvisible\" ';\n      if (this.getAlign()) {\n        actorinfo += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorinfo += '><div class=\"value\">-</div></div>';\n\n      switch (this.getInfoPosition()) {\n        case 'middle':\n          ret_val += actordown;\n          ret_val += actorinfo;\n          ret_val += actorup;\n          break;\n        case 'right':\n          ret_val += actordown;\n          ret_val += actorup;\n          ret_val += actorinfo;\n          break;\n        default:\n          ret_val += actorinfo;\n          ret_val += actordown;\n          ret_val += actorup;\n          break;\n      }\n\n      return ret_val + '</div>';\n    },\n\n    getActors: function() {\n      return this.getDomElement().querySelectorAll('.actor.uplabel, .actor.downlabel');\n    },\n\n    // overridden\n    initListeners: function() {\n      this.getActors().forEach(function(actor) {\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    },\n\n    __findActor: function (element) {\n      while (!element.classList.contains('actor')) {\n        element = element.parentNode;\n        if (element.classList.contains('widget')) {\n          // thats too far\n          return null;\n        }\n      }\n      return element;\n    },\n\n    _onLongTap: function(event) {\n      this.__action(false, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    _action: function(event) {\n      this.__action(true, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    __action: function (isShort, isDown) {\n      let value;\n      if (isShort && this.getShortDownValue() !== null && this.getShortUpValue() !== null) {\n        value = isDown ? this.getShortDownValue() : this.getShortUpValue();\n      } else {\n        value = isDown ? this.getDownValue() : this.getUpValue();\n      }\n\n      const bitMask = (isShort ? 1 : 2);\n\n      if (this.getIsAbsolute()) {\n        let bvalue = parseFloat(this.getBasicValue());\n        if (isNaN(bvalue)) {\n          bvalue = 0; // anything is better than NaN...\n        }\n        value = bvalue + value;\n        value = Math.max(value, this.getMin());\n        value = Math.min(value, this.getMax());\n      }\n      this.sendToBackend(value, function(address) {\n        return !!(address.variantInfo & bitMask);\n      });\n    },\n\n    getDownActor: function() {\n      return this.getDomElement().querySelector('.actor.downlabel');\n    },\n\n    getUpActor: function() {\n      return this.getDomElement().querySelector('.actor.uplabel');\n    },\n\n    getInfoActor: function() {\n      return this.getDomElement().querySelector('.actor.switchInvisible');\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infotrigger', statics);\n  }\n});\n","/* Line.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A line tag is used to display a horizontal line in the browser to allow for a grouped and thereby tidy display of\n * elements on one page. To specify the width of the line an optional &lt;layout/&gt;-child can be added.\n *\n * @widgetexample <settings selector=\"hr\">\n *   <caption>A line tag which uses 50% of the screen size (6 of 12 available columns)</caption>\n * </settings>\n * <line><layout colspan=\"6\"/></line>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Line', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    getDomString: function () {\n      return '<hr ' + (this.getClasses() ? 'class=\"'+this.getClasses()+'\"' : '') + '/>';\n    }\n  }\n});\n","/* MultiTrigger.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a widget with multiple buttons to the visu.\n * Thus, e.g. change the operating mode of the heating system\n * (Comfort -> Night -> Absent -> Frost protection) or create scene functions.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.MultiTrigger', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    showstatus: {\n      check: 'Boolean',\n      init: false\n    },\n    elementsPerLine: {\n      check: 'Number',\n      init: 2\n    },\n    buttonConfiguration: {\n      check: 'Object',\n      nullable: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      // create the actor\n      let ret_val = '<div class=\"actor_container\" style=\"float:left\">';\n      const mapping = this.getMapping();\n      const elementsPerLine = this.getElementsPerLine();\n\n      const config = this.getButtonConfiguration();\n      const indices = Object.keys(config).sort();\n\n      indices.forEach(function (i) {\n        const buttonConfig = config[i];\n        let label = buttonConfig.label;\n        if (mapping) {\n          const mappedValue = this.defaultValueHandling(undefined, buttonConfig.value);\n          if (mappedValue !== buttonConfig.value || !label) {\n            label = '';\n            this.defaultValue2DOM(mappedValue, function (e) {\n              label += e;\n            });\n          }\n        }\n\n        if (label) {\n          ret_val += '<div class=\"actor switchUnpressed\"><div class=\"value\">' + label + '</div></div>';\n        }\n        if (elementsPerLine > 0 && i % elementsPerLine === 0) {\n          ret_val+= '<br/>';\n        }\n      }, this);\n      return ret_val + '</div>';\n    },\n\n    getActors: function() {\n      return this.getDomElement().querySelectorAll('.actor_container .actor');\n    },\n\n    // overridden, only transform the value, do not apply it to DOM\n    _processIncomingValue: function (address, data) {\n      return this.applyTransform(address, data);\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     */\n    handleUpdate: function () {\n      const children = this.getActors();\n      const buttonConfiguration = this.getButtonConfiguration();\n      children.forEach(function(actor) {\n        const index = Array.prototype.indexOf.call(children, actor) + 1;\n        if (Object.prototype.hasOwnProperty.call(buttonConfiguration, index)) {\n          const isPressed = ('' + this.getBasicValue()) === ('' + buttonConfiguration[index].value); // compare as string\n\n          // delay this a little bit to give the HasAnimatedButton stuff time to finish\n          // otherwise it might override the settings here\n          new qx.util.DeferredCall(function () {\n            actor.classList.remove(isPressed ? 'switchUnpressed' : 'switchPressed');\n            actor.classList.add(isPressed ? 'switchPressed' : 'switchUnpressed');\n          }, this).schedule();\n        }\n      }, this);\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @param event\n     */\n    getActionValue: function (event) {\n      const index = Array.prototype.indexOf.call(this.getDomElement().querySelectorAll('.actor_container .actor'), event.getCurrentTarget()) + 1;\n      return this.getButtonConfiguration()[index].value;\n    },\n\n    // overridden\n    initListeners: function() {\n      if (this.isAnonymous()) {\n return; \n}\n\n      this.getActors().forEach(function(actor) {\n        qx.event.Registration.addListener(actor, 'tap', this.action, this);\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('multitrigger', statics);\n  }\n});\n","/* NavBar.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the widget navbar, you can add a navigation menu to the entire visu.\n * The menu can be displayed on a page (top, bottom, left, right).\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.NavBar', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    name: {\n      check: 'String',\n      nullable: true\n    },\n    scope: {\n      check: 'Number',\n      init: -1\n    },\n    width: {\n      check: 'String',\n      init: '300'\n    },\n    position: {\n      check: ['top', 'left', 'right', 'bottom'], \n      init: 'left'\n    },\n    dynamic: {\n      check: 'Boolean',\n      nullable : true,\n      init: null\n    },\n    visible: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    _navbarTop: '',\n    _navbarLeft: '',\n    _navbarRight: '',\n    _navbarBottom: '',\n    _touchX: null,\n    _touchY: null,\n\n    /**\n     * Called on setup.dom.finished event with high priority. Adds the navbar dom string\n     * to the DOM-Tree\n     */\n    initializeNavbars: function() {\n      ['Top', 'Left', 'Right', 'Bottom'].forEach(function(pos) {\n        if (this['_navbar'+pos]) {\n          const elem = document.querySelector('#navbar' + pos);\n          if (elem) {\n            elem.innerHTML += this['_navbar' + pos];\n          }\n        }\n      }, this);\n\n      const self = this;\n      // Event handlers to allow navbar fade in and fade out.\n      // Currently only implemented for the major use case of a left navbar.\n      // TODO add logic for other navbars as well\n      // Logic:\n      //   To fade in the touch must start on the left screen side and then\n      //   swipe right.\n      //   To fade out all places on the screen are fine.\n      //   There is a minimum swipe distance and the direction must be mostly\n      //   horizontal (up to +/-45° tolerance is allowed)\n      //   When during a valid swipe the direction is reversed the fading\n      //   action is also reverted.\n      document.addEventListener('touchstart', function (evt) {\n        const touches = evt.touches[0];\n        const pPH = cv.TemplateEngine.getInstance().pagePartsHandler;\n\n        if (pPH.navbars.left.dynamic === false ||\n          (!cv.Config.mobileDevice && pPH.navbars.left.dynamic !== true) ||\n          (!pPH.navbars.left.fadeVisible && touches.clientX > 20)) { // left navbar is not visible but the finger isn't on the left end -> not relevant\n          return;\n        }\n\n        self._touchX = touches.clientX;\n        self._touchY = touches.clientY;\n      }, false);\n      document.addEventListener('touchend', function () {\n        self._touchX = null;\n        self._touchY = null;\n      }, false);\n      document.addEventListener('touchmove', function (evt) {\n        if (self._touchX === null) {\n          return; // early exit as this touch isn't relevant for us\n        }\n\n        const touches = evt.touches[0];\n        const x = touches.clientX - self._touchX;\n        const y = touches.clientY - self._touchY;\n        const necessaryDistance = 10;\n        const enoughDistance = Math.abs(x) > necessaryDistance;\n        const horizontal = Math.abs(x) > Math.abs(y);\n        const toRight = x > 0;\n        if (horizontal && enoughDistance) {\n          const pPH = cv.TemplateEngine.getInstance().pagePartsHandler;\n          if (toRight) {\n            self._touchX = touches.clientX - necessaryDistance;\n            self._touchY = touches.clientY;\n            if (!pPH.navbars.left.fadeVisible) {\n              pPH.fadeNavbar('Left', 'in', 250);\n            }\n          } else { // !toRight\n            self._touchX = touches.clientX + necessaryDistance;\n            self._touchY = touches.clientY;\n            if (pPH.navbars.left.fadeVisible) {\n              pPH.fadeNavbar('Left', 'out', 250);\n            }\n          }\n        }\n      }, false);\n    }\n  },\n  \n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n    },\n    \n    getGlobalPath: function () {\n      const id = this.getPath().split('_');\n      id.pop();\n      return id.join('_') + '_' + this.getPosition() + '_navbar';\n    },\n\n    // overridden\n    getDomString: function () {\n      let container = '<div class=\"' + this.getClasses() + '\" id=\"' + this.getGlobalPath() + '\">';\n      if (this.getName()) {\n        container += '<h2>' + this.getName() + '</h2>';\n      }\n      container += this.getChildrenDomString();\n\n      container += '</div>';\n\n      // add this to the navbars in DOM not inside the page\n      switch (this.getPosition()) {\n        case 'top':\n          this.self(arguments)._navbarTop += container;\n          break;\n\n        case 'left':\n          this.self(arguments)._navbarLeft += container;\n          break;\n\n        case 'right':\n          this.self(arguments)._navbarRight += container;\n          break;\n\n        case 'bottom':\n          this.self(arguments)._navbarBottom += container;\n          break;\n      }\n\n      return '';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('navbar', statics);\n    qx.event.message.Bus.subscribe('setup.dom.finished.before', statics.initializeNavbars, statics);\n  }\n});\n","/* NotificationCenterBadge.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Shows the current number of messages in {@link cv.ui.NotificationCenter} and opens it on click.\n *\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a centered text widget</caption>\n *   <screenshot name=\"text_example\" />\n * </settings>\n * <notificationcenterbadge>\n *  <layout colspan=\"0\" />\n * </notificationcenterbadge>\n *\n * @author Tobias Bräutigam\n * @since 0.11.0\n */\nqx.Class.define('cv.ui.structure.pure.NotificationCenterBadge', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    const classes = props.classes.trim().split(' ');\n    const i_right = classes.indexOf('right');\n\n    if (i_right !== -1) {\n      // do not align, but float the container instead\n      this.setContainerClass('float-right');\n      classes.splice(i_right, 1);\n      props.classes = classes.join(' ');\n    }\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    counter: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyCounter'\n    },\n    hideWhenEmpty: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __badgeElement: null,\n\n    _onDomReady: function() {\n      this.base(arguments);\n      const center = cv.ui.NotificationCenter.getInstance();\n      center.getMessages().addListener('changeLength', this._onChangeCounter, this);\n      this._onChangeCounter();\n      center.addListener('changedGlobalSeverity', this._onChangeGlobalSeverity, this);\n    },\n\n    // property apply\n    _applyVisible: function(value) {\n      // hide NotificationCenters own badge while we are visible\n      cv.ui.NotificationCenter.getInstance().disableBadge(value);\n    },\n\n    action: function(ev) {\n      if (this._skipNextEvent === ev.getType()) {\n        this._skipNextEvent = null;\n        return;\n      }\n      cv.ui.NotificationCenter.getInstance().toggleVisibility();\n    },\n\n    __getBadgeElement: function() {\n      if (!this.__badgeElement) {\n        this.__badgeElement = this.getDomElement().querySelector('.badge');\n      }\n      return this.__badgeElement;\n    },\n\n    _onChangeGlobalSeverity: function(ev) {\n      const classList = this.__getBadgeElement().classList;\n      classList.remove.apply(classList, cv.ui.NotificationCenter.getInstance().getSeverities());\n      if (ev.getData()) {\n        classList.add(ev.getData());\n      }\n    },\n\n    _onChangeCounter: function() {\n      const messages = cv.ui.NotificationCenter.getInstance().getMessages().length;\n      this.__getBadgeElement().innerHTML = ''+messages;\n      if (this.isHideWhenEmpty()) {\n        this.__getBadgeElement().style.display = messages === 0 ? 'none' : 'block';\n      }\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      let style = '';\n      if (this.isHideWhenEmpty() && this.getCounter() === 0) {\n        style = ' style=\"display: none;\"';\n      }\n      return '<div class=\"actor badge\"'+style+'>'+this.getCounter()+'</div>';\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    const center = cv.ui.NotificationCenter.getInstance();\n    center.getMessages().removeListener('changeLength', this._onChangeCounter, this);\n    center.removeListener('changedGlobalSeverity', this._onChangeGlobalSeverity, this);\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('notificationcenterbadge', statics);\n  }\n});\n","/* Page.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Creates a new sub page and adds a corresponding link to the current page.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Page', {\n  extend: cv.ui.structure.AbstractWidget,\n  implement: cv.ui.structure.IPage,\n\n  include: [\n    cv.ui.common.HasChildren,\n    cv.ui.common.Update\n  ],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.__waitForProperties = ['showNavbarTop', 'showNavbarBottom', 'showNavbarLeft', 'showNavbarRight'];\n    this.base(arguments, props);\n\n    this.addListener('changeVisible', this._onChangeVisible, this);\n\n    // break out of the constructor\n    new qx.util.DeferredCall(function() {\n      const parentPage = this.getParentPage();\n      if (!parentPage) {\n        this.__waitForProperties = [];\n      } else {\n        this.debug('binding navbar visibility from ' + parentPage.getPath() + ' to ' + this.getPath());\n      }\n      [\n        ['showTopNavigation', true],\n        ['showFooter', true],\n        ['showNavbarTop', false],\n        ['showNavbarBottom', false],\n        ['showNavbarLeft', false],\n        ['showNavbarRight', false]\n      ].forEach(function (tuple) {\n        const property = tuple[0];\n        const defaultValue = tuple[1];\n        if (this['get' + property.charAt(0).toUpperCase() + property.substr(1)]() === null) {\n          // inherit from parent\n          if (parentPage) {\n            parentPage.bind(property, this, property);\n          } else {\n            // we have not parent page, because we are the root page, use the default value\n            this['set' + property.charAt(0).toUpperCase() + property.substr(1)](defaultValue);\n          }\n        }\n        if (!parentPage) {\n          this.setInitialized(true);\n        }\n      }, this);\n    }, this).schedule();\n\n    if (this.getAddress()) {\n      this._initOnCreate = true;\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    allPages : '',\n\n    /**\n     * Append the complete generated HTML code to the DOM tree at the end of the generation process\n     */\n    createFinal: function() { // special function - only for pages!\n      document.querySelector('#pages').innerHTML = this.allPages;\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this.createFinal, this);\n    }\n\n  },\n\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    initialized: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeInitialized'\n    },\n\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    name: {\n      check: 'String',\n      init: '', nullable: true\n    },\n    showTopNavigation : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowTopNavigation'\n    },\n    showFooter        : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowFooter'\n    },\n    showNavbarTop : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarTop',\n      apply: '_applyNavbarVisibility'\n    },\n    showNavbarBottom : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarBottom',\n      apply: '_applyNavbarVisibility'\n    },\n    showNavbarLeft : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarLeft',\n      apply: '_applyNavbarVisibility'\n    },\n    showNavbarRight : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarRight',\n      apply: '_applyNavbarVisibility'\n    },\n    backdropAlign     : {\n      init: '50% 50%',\n      nullable: true\n    },\n    backdropType      : { check: 'String', nullable: true },\n    linkVisible       : { check: 'Boolean', init: true, nullable: true },\n    size              : { check: 'String', nullable: true },\n    backdrop          : { check: 'String', nullable: true }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __waitForProperties: null,\n    __colspanClass: null,\n    __normalizedDomId: null,\n\n    _applyNavbarVisibility: function(value, old, name) {\n      if (value !== null) {\n        const i_name = this.__waitForProperties.indexOf(name);\n        if (i_name !== -1) {\n          this.__waitForProperties.splice(i_name, 1);\n        }\n        if (this.__waitForProperties.length === 0) {\n          this.setInitialized(true);\n        }\n      }\n    },\n\n    /**\n     * If the page gets visible the colspan sized must be checked\n     * @param ev {Event}\n     */\n    _onChangeVisible: function(ev) {\n      if (ev.getData()) {\n        if (this.__colspanClass !== cv.ui.layout.Manager.COLSPAN_CLASS) {\n          this.applyColumnWidths();\n        }\n        if (this.getBackdrop()) {\n          cv.ui.layout.ResizeHandler.invalidateBackdrop();\n        }\n      }\n    },\n\n    /**\n     * Set childrens column widths\n     */\n    applyColumnWidths: function() {\n      cv.ui.layout.Manager.applyColumnWidths('#'+this.getPath(), false);\n      this.__colspanClass = cv.ui.layout.Manager.COLSPAN_CLASS;\n    },\n\n    // overridden\n    getDomString: function() {\n      const pageType = this.getPageType();\n\n      const subpageClass = this.getFlavour() ? (' flavour_' + this.getFlavour()) : '';\n      let subpage = '<div class=\"page type_' + pageType + subpageClass + '\" id=\"' + this.getPath() + '\">';\n      let container = '<div class=\"clearfix\"><h1>' + this.getName() + '</h1>';\n\n      if (pageType === '2d') {\n        let size = 'width:100%;height:100%;';\n        switch (this.getSize()) {\n          case 'fixed':\n            size = '';\n            break;\n\n          case 'contained':\n            size += 'object-fit:contain;';\n            if (this.getBackdropAlign()) {\n              size += 'object-position:' + this.getBackdropAlign() + ';';\n            }\n            break;\n\n          default: // default: assume scaled\n        }\n\n        const backdrop = this.getBackdrop();\n        if (backdrop) {\n          container += '<' + this.getBackdropType() + ' src=\"' + qx.util.ResourceManager.getInstance().toUri(backdrop) + '\" style=\"position: absolute; top: 0px; left: 0px;z-index:-1;' + size + '\"/>';\n        }\n      } /* ---Disable 3D for 0.8---\n      else if (pageType === \"3d\" && false) {\n         var floorplan = JSFloorPlan3D( container, backdrop );\n         floorplan.moveToRoom( 'Underground', false, true, false );\n         container.data( 'JSFloorPlan3D', floorplan );\n         container.find('canvas').css({position: 'absolute', top: '0px', left: '0px', 'z-index':'-1', width:'100%',height:'100%'});\n         subpage.click( {JSFloorPlan3D:floorplan,callback:function(event){\n         var j = this.JSFloorPlan3D;\n         j.moveToRoom( j.getState('showFloor'), event.room.room, true, true, function(){\n         container.trigger( 'update3d', j );\n         });\n         }}, floorplan.translateMouseEvent );\n         $(window).bind( 'resize', function(){ floorplan.resize($('.page').width(), $('.page').height(), true);} );\n         if (page.getAttribute('azimut')) {\n         cv.TemplateEngine.getInstance().addAddress( page.getAttribute('azimut'), path + '_' );\n         address[ page.getAttribute('azimut') ] = [ 'DPT:9.001', 0, 'azimut' ];\n         }\n         if (page.getAttribute('elevation')) {\n         cv.TemplateEngine.getInstance().addAddress( page.getAttribute('elevation'), path + '_' );\n         address[ page.getAttribute('elevation') ] = [ 'DPT:9.001', 0, 'elevation' ];\n         };\n         if (page.getAttribute('floor')) {\n         cv.TemplateEngine.getInstance().addAddress( page.getAttribute('floor'), path + '_' );\n         address[ page.getAttribute('floor') ] = [ 'DPT:5.004', 0, 'floor' ];\n         };\n\n         $( childs ).each( function(i,a){\n         if( this.tagName === 'filter' )\n         {\n         var floorFilter = $(this).attr('floor');\n         var roomFilter  = $(this).attr('room');\n         childs.splice( i, 1 );                 // remove filter element\n         $(this).children().each( function(j){  // and add it's children\n         $(this).find('layout').attr({floorFilter:floorFilter,roomFilter:roomFilter});\n         childs.splice( i+j, 0, this );\n         });\n         }\n         });\n      } */\n      container += this.getChildrenDomString();\n      subpage += container + '</div></div>';\n      cv.ui.structure.pure.Page.allPages = subpage + cv.ui.structure.pure.Page.allPages;\n      return undefined;\n    },\n\n    _update: function(ga, data) {\n      // widgetData  = cv.data.Model.getInstance().getWidgetDataByElement( element );\n      // var value = this.defaultValueHandling( ga, data, widgetData );\n      // var type = widgetData.address[ ga ][2];\n      // switch( type )\n      // {\n      //   case 'azimut':\n      //     widgetData.JSFloorPlan3D.setState('currentAzimut', value, true);\n      //     element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     break;\n      //\n      //   case 'elevation':\n      //     widgetData.JSFloorPlan3D.setState('currentElevation', value, true);\n      //     element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     break;\n      //\n      //   case 'floor':\n      //     widgetData.JSFloorPlan3D.moveToRoom( value, false, true, true, function(){\n      //       element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     });\n      //     break;\n      //\n      //   default:\n      // TODO: data comparision has to be refactored to use DPT and a value\n      if (parseInt(data) === 1) {\n        cv.TemplateEngine.getInstance().scrollToPage(this.getPath());\n        this.sendToBackend('0');\n      }\n      // }\n    },\n\n    sendToBackend: function (value) {\n      if (this.getAddress) {\n        const list = this.getAddress();\n        for (let id in list) {\n          if (Object.prototype.hasOwnProperty.call(list, id)) {\n            const address = list[id];\n            if (cv.data.Model.isWriteAddress(address)) {\n              cv.TemplateEngine.getInstance().visu.write(id, cv.Transform.encode(address.transform, value));\n            }\n          }\n        }\n      }\n    }\n  },\n\n  defer: function(statics) {\n    qx.event.message.Bus.subscribe('setup.dom.append', statics.createFinal, statics);\n  }\n});\n","/* PageJump.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The pagejump widget can be used to link the visu pages.\n * The function is similar to hyperlinks.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.PageJump', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.HasChildren,\n    cv.ui.common.HasAnimatedButton\n  ],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (props) {\n    if (!props.name) {\n      // when there is no name the widget has no actor as clickable subelement, so we need\n      // to bind the click events to the whole widget\n      props.bindClickToWidget = true;\n    }\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    target : {\n      check: 'String',\n      init: '0'\n    },\n    activeScope : {\n      check: ['target', 'path'],\n      init: 'target'\n    },\n    name : {\n      check: 'String',\n      nullable: true\n    },\n    targetPath : {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Handle page change events and update the active state of this PageJump\n     *\n     * @param ev {Event}\n     * @protected\n     */\n    _onScrollToPage: function(ev) {\n      const page_id = ev.getData();\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(page_id);\n      const model = cv.data.Model.getInstance();\n      const name = page.getName();\n\n      // remove old active classes\n      document.querySelectorAll('.pagejump.active').forEach(function(elem) {\n        elem.classList.remove('active');\n      }, this);\n      document.querySelectorAll('.pagejump.active_ancestor').forEach(function(elem) {\n        elem.classList.remove('active_ancestor');\n      }, this);\n\n      // and set the new active ones\n      document.querySelectorAll('.pagejump').forEach(function(elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (name === data.target) {\n          elem.classList.add('active');\n        }\n      }, this);\n\n      // now set the active ancestors\n      let parentPage = cv.util.Tree.getParentWidget(page, 'page');\n      // set for all parent pages apart from the root page\n\n      const pageJumps = document.querySelectorAll('.pagejump');\n      const markPageJumps = function (parentName, elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (parentName === data.target || (data.activeScope === 'path' && (\n            (typeof data.path === 'string') && data.path.match(parentName + '$') ||\n            (typeof data.targetPath === 'string') && data.targetPath.match(parentName + '$'))\n        )) {\n          elem.classList.add('active_ancestor');\n        }\n      };\n\n      while (parentPage && cv.util.Tree.getParentWidget(parentPage, 'page')) {\n        pageJumps.forEach(function(elem) {\n markPageJumps(parentPage.getName(), elem); \n});\n        // recursively find pagejumps for parent pages\n        parentPage = cv.util.Tree.getParentWidget(parentPage, 'page');\n      }\n    }\n  },\n\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n\n    // overridden\n    _getInnerDomString: function() {\n      let actor = '<div class=\"actor switchUnpressed';\n      if (this.getAlign()) {\n        actor += this.getAlign();\n      }\n      actor += '\">';\n      if (this.getName()) {\n        actor += '<div class=\"value\">' + this.getName() + '</div>';\n      }\n      actor += '</div>';\n      return actor + this.getChildrenDomString();\n    },\n\n    // overridden\n    action: function() {\n      let target = this.getTarget();\n      if (this.getTargetPath() !== null) {\n        target = cv.TemplateEngine.getInstance().getPageIdByPath(target, this.getTargetPath());\n      }\n      cv.TemplateEngine.getInstance().scrollToPage(target);\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagejump', statics);\n    qx.event.message.Bus.subscribe('path.pageChanged', statics._onScrollToPage, statics);\n  }\n});\n","/* PageLink.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * PageLink Widget for visible pages. Do not use this directly because the pagelink widget\n * is automatically added when you use a page widget with parameter <code>visible=true</code>.\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (2017)\n */\nqx.Class.define('cv.ui.structure.pure.PageLink', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    name : {\n      check: 'String',\n      init: '',\n      nullable: true\n    },\n    wstyle : {\n      check: 'String',\n      init: ''\n    },\n    address : {\n      check: 'Object',\n      init: {}\n    },\n    bindClickToWidget: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    getDomString: function() {\n      const layout = this.getLayout();\n\n      const style = typeof layout === 'object' ? '' : 'style=\"' + cv.parser.WidgetParser.extractLayout(layout, this.getPageType()) + '\"';\n\n      let ret_val = '<div class=\"widget clearfix link pagelink ' + this.getClasses() + '\" ' + style + '>';\n      ret_val += '<div class=\"actor\" ' + this.getWstyle() + '><a href=\"javascript:void(0)\">' + this.getName() + '</a></div>';\n      ret_val += '</div>';\n      return ret_val;\n    },\n\n    // overridden\n    action: function() {\n      cv.TemplateEngine.getInstance().scrollToPage(this.getPath() + '_');\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagelink', statics);\n  }\n});\n","/* PushButton.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a button to the visu that sends a defined value to the BUS when you press and release.\n * E.g. pushing a 1 and releasing a 0. This makes it possible, for example,\n * to simulate a push button to open and close a garage door, blinds or blinds.\n *\n * @since 2013\n */\nqx.Class.define('cv.ui.structure.pure.PushButton', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    'downValue': {check: 'String', init: '1'},\n    'upValue': {check: 'String', init: '0'}\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    // overridden\n    initListeners: function() {\n      this.addElementListener('pointerdown', this._onPointerDown, this);\n      this.addElementListener('pointerup', this._onPointerUp, this);\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     *\n     * @param value {any} incoming data (already transformed + mapped)\n     */\n    handleUpdate: function (value) {\n      const actor = this.getActor();\n      // compare against the unmapped value\n      value = '' + this.getBasicValue();\n      const off = this.getUpValue();\n      actor.classList.remove(value === off ? 'switchPressed' : 'switchUnpressed');\n      actor.classList.add(value === off ? 'switchUnpressed' : 'switchPressed');\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @param event\n     */\n    getActionValue: function (event) {\n      if (event.type === 'pointerup') {\n        return this.getUpValue();\n      } \n        return this.getDownValue();\n    },\n\n    _onPointerUp: function () {\n      const sendValue = this.getUpValue();\n      this.sendToBackend(sendValue, function (address) {\n        return (!address.variantInfo || address.variantInfo === 'up');\n      });\n    },\n\n    _onPointerDown: function () {\n      const sendValue = this.getDownValue();\n      this.sendToBackend(sendValue, function (address) {\n        return (!address.variantInfo || address.variantInfo === 'down');\n      });\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pushbutton', statics);\n  }\n});\n","/* Refresh.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the widget refresh, the visu is added a switch, which allows the visu to reload the displayed data.\n *\n * @author Christian Mayer\n * @since 2014\n */\nqx.Class.define('cv.ui.structure.pure.Refresh', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton, cv.ui.common.BasicUpdate],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', nullable: true }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.defaultUpdate(undefined, this.getSendValue());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    _action: function() {\n      cv.TemplateEngine.getInstance().visu.restart(true);\n    }\n  }\n});\n","/* Reload.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the reload widget, the visu is added a switch, which allows to reload the full visu in the browser.\n *\n * @author Christian Mayer\n * @since 2014\n */\nqx.Class.define('cv.ui.structure.pure.Reload', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.Update\n  ],\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden, return undefined to prevent widget from being renderered into DOM\n    getDomString: function() {\n      return;\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return;\n    },\n\n    _update: function (address, data) {\n      const value = this.defaultValueHandling(address, data);\n      if (value > 0) {\n        cv.util.Location.reload(true);\n      }\n    }\n  }\n});\n","/* Rgb.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the RGB widget you can display a colour in the visu.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Rgb', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Update],\n\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor\"><div class=\"value\"></div></div>';\n    },\n\n    /**\n     * Updates the RGB widget by setting the background color\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update: function(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const valElem = this.getValueElement();\n\n      const value = cv.Transform.decode(this.getAddress()[address].transform, data);\n\n      let bg = window.getComputedStyle(valElem)['background-color'].replace(/[a-zA-Z()\\s]/g, '').split(/,/);\n      if (bg.length !== 3) {\n        bg = [0, 0, 0];\n      }\n      switch (this.getAddress()[address].variantInfo) {\n        case 'r':\n          bg[0] = value;\n          break;\n        case 'g':\n          bg[1] = value;\n          break;\n        case 'b':\n          bg[2] = value;\n          break;\n      }\n      valElem.style['background-color'] = 'rgb(' + bg[0] + ', ' + bg[1] + ', ' + bg[2] + ')';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('rgb', statics);\n  }\n});\n","/* Roundbar.js\n * \n * copyright (c) 2010-2020, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a display to the visu that can represent values from the BUS\n * and shows them with a round bar.\n *\n * @widgetexample <settings>\n *    <caption>Example roundbar widget</caption>\n *    <screenshot name=\"roundbar_simple\">\n *      <data address=\"3/3/1\">63.3</data>\n *    </screenshot>\n *  </settings>\n *  <roundbar>\n *      <address transform=\"DPT:9.001\" mode=\"read\">3/3/1</address>\n *  </roundbar>\n *\n * @author Christian Mayer\n * @since 0.12.0 (2020)\n */\nqx.Class.define('cv.ui.structure.pure.Roundbar', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (props) {\n    this.__indicatorDOMElement = [];\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    coord: function(position) {\n      return position.x.toFixed(1) + ' ' + position.y.toFixed(1);\n    },\n    /**\n     * Create the SVG path for the round bar.\n     * Angle = 0 === horizontal on the right\n     *\n     * @param startAngle {Float}\n     * @param startArrowPoint {Float}\n     * @param endAngle {Float}\n     * @param endArrowPoint {Float}\n     * @param radius {Float}\n     * @param width {Float}\n     * @param getBBox {Boolean} return the bounding box instead of the path itself\n     */\n    createBarPath: function(startAngle, startArrowPoint, endAngle, endArrowPoint, radius, width, getBBox = false) {\n      const startArrowPointAngle = startAngle + startArrowPoint;\n      const endArrowPointAngle = endAngle + endArrowPoint;\n\n      // The path to generate is using those positions:\n      // rO             -- outer --\n      // rMO        /// outermiddle \\\\\\\n      // rM      //       middle        \\\\\n      // rIM   /        innermiddle        \\\n      // rI   /         -- inner --         \\\n      //     |        /             \\        |\n      //     |_______|               |_______|\n      //       start      center        end\n      const clockwise = startAngle > endAngle ? 1 : 0;\n      const rI = radius;\n      const rIM = radius + width * 1 / 4;\n      const rM = radius + width * 2 / 4;\n      const rMO = radius + width * 3 / 4;\n      const rO = radius + width;\n      const startInner = {x: Math.cos(startAngle) * rI, y: -Math.sin(startAngle) * rI};\n      const startMiddle = {x: Math.cos(startArrowPointAngle) * rM, y: -Math.sin(startArrowPointAngle) * rM};\n      const startOuter = {x: Math.cos(startAngle) * rO, y: -Math.sin(startAngle) * rO};\n      const centerInner = {\n        x: Math.cos((startAngle + endAngle) / 2) * rI,\n        y: -Math.sin((startAngle + endAngle) / 2) * rI\n      };\n      const centerOuter = {\n        x: Math.cos((startAngle + endAngle) / 2) * rO,\n        y: -Math.sin((startAngle + endAngle) / 2) * rO\n      };\n      const endInner = {x: Math.cos(endAngle) * rI, y: -Math.sin(endAngle) * rI};\n      const endMiddle = {x: Math.cos(endArrowPointAngle) * rM, y: -Math.sin(endArrowPointAngle) * rM};\n      const endOuter = {x: Math.cos(endAngle) * rO, y: -Math.sin(endAngle) * rO};\n      const startMiddleFlag = Math.abs(startAngle - startArrowPointAngle) > Math.PI ? 1 : 0;\n      const startEndFlag = Math.abs(startAngle - endAngle) / 2 > Math.PI ? 1 : 0;\n      const endMiddleFlag = Math.abs(endAngle - endArrowPointAngle) > Math.PI ? 1 : 0;\n      const startMiddleDir = startAngle < startArrowPointAngle ? 1 : 0;\n      const endMiddleDir = endAngle < endArrowPointAngle ? 1 : 0;\n\n      /**\n       * @param start\n       * @param end\n       * @param r\n       * @param flag\n       * @param cw\n       */\n      function arc(start, end, r, flag, cw) {\n        return (start.x===end.x) && (start.y===end.y)\n          ? ''\n          : (Math.abs(start.x-end.x)+Math.abs(start.y-end.y) < 2)\n            ? 'L' + cv.ui.structure.pure.Roundbar.coord(end)\n            : ['A', r, r, 0, flag, cw, cv.ui.structure.pure.Roundbar.coord(end)].join(' ');\n      }\n\n      if (getBBox) {\n        const rMax = Math.max(rI, rO);\n        const isInside = function (a) {\n          return (startAngle < a && a < endAngle) || (startAngle > a && a > endAngle);\n        };\n        const rMiddle = isInside(-Math.PI * 4 / 2) || isInside(Math.PI * 0 / 2) ? rMax : startInner.x;\n        const uMiddle = isInside(-Math.PI * 3 / 2) || isInside(Math.PI * 1 / 2) ? -rMax : startInner.y;\n        const lMiddle = isInside(-Math.PI * 2 / 2) || isInside(Math.PI * 2 / 2) ? -rMax : startInner.x;\n        const dMiddle = isInside(-Math.PI * 1 / 2) || isInside(Math.PI * 3 / 2) ? rMax : startInner.y;\n        return {\n          u: Math.min(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, uMiddle),\n          d: Math.max(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, dMiddle),\n          l: Math.min(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, lMiddle),\n          r: Math.max(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, rMiddle)\n        };\n      }\n\n      // a thin bar path should just be a single line\n      if (width < 1.0) {\n        return [\n          'M', cv.ui.structure.pure.Roundbar.coord(startOuter),\n          arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n          arc(centerOuter, endOuter, rO, startEndFlag, clockwise)\n        ].join('');\n      }\n\n      return ['M', cv.ui.structure.pure.Roundbar.coord(startInner),\n        startArrowPointAngle === startAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(startOuter)\n          : arc(startInner, startMiddle, rIM, startMiddleFlag, 1-startMiddleDir) +\n            arc(startMiddle, startOuter, rMO, startMiddleFlag, startMiddleDir),\n        arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n        arc(centerOuter, endOuter, rO, startEndFlag, clockwise),\n        endArrowPointAngle === endAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(endInner)\n          : arc(endOuter, endMiddle, rMO, endMiddleFlag, 1-endMiddleDir) +\n            arc(endMiddle, endInner, rIM, endMiddleFlag, endMiddleDir),\n        arc(startInner, centerInner, rI, startEndFlag, 1-clockwise),\n        arc(centerInner, startInner, rI, startEndFlag, 1-clockwise),\n        'Z'\n      ].join('');\n    },\n    /**\n     * Create the SVG path for an pointer.\n     * @param angle {Float}\n     * @param p {Object} Indicator object\n     */\n    createPointerPath: function(angle, p) {\n      const s = Math.sin(angle);\n      const c = Math.cos(angle);\n      const wx = c * p.width;\n      const wy = s * p.width;\n\n      if (p.thickness > 0) {\n        const tx = -s * p.thickness / 2;\n        const ty = c * p.thickness / 2;\n        return [\n          'M', this.coord({x:c*p.radius+wx-tx, y: -(s*p.radius+wy-ty)}),\n          'L', this.coord({x:c*p.radius, y: -(s*p.radius)}),\n          'L', this.coord({x:c*p.radius+wx+tx, y: -(s*p.radius+wy+ty)})\n        ].join('');\n      } \n        return [\n          'M', this.coord({x:c*p.radius, y: -(s*p.radius)}),\n          'L', this.coord({x:c*p.radius+wx, y: -(s*p.radius+wy)})\n        ].join('');\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    type: { check: 'Array' },\n    indicators: { check: 'Array' },\n\n    min: { check: 'Number' },\n    max: { check: 'Number' },\n    axisradius: { check: 'Number' },\n    axiswidth: { check: 'Number' },\n    axiscolor: { check: 'String' },\n    ranges: { check: 'Array' },\n    minorradius: { check: 'Number' },\n    minorwidth: { check: 'Number' },\n    minorspacing: { check: 'String' },\n    minorcolor: { check: 'String' },\n    majorradius: { check: 'Number' },\n    majorwidth: { check: 'Number' },\n    majorposition: { check: 'String' },\n    majorcolor: { check: 'String' },\n    labels: { check: 'Array' },\n    labelstyle: { check: 'String' },\n    start: { check: 'Number' },\n    end: { check: 'Number' },\n    arrowtype: { check: 'Number' },\n    spacing: { check: 'Number' },\n    overflowarrow: { check: 'Boolean' },\n    fontsize: { check: 'Number' },\n    textx: { check: 'Number' },\n    texty: { check: 'Number' },\n    textlength: { check: 'Number' },\n    textanchor: { check: 'String' },\n    linespace: { check: 'Number' },\n    bboxgrow: { check: 'Object' },\n    debug: { check: 'Boolean' },\n    currentRatioValue: { check: 'Array', init: [] },\n    targetRatioValue: { check: 'Array', init: [] }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __animator: undefined,\n    __indicatorDOMElement: null,\n\n    // overridden\n    _getInnerDomString: function () {\n      /**\n       * Grow the bounding box to also contain the parameters x and y\n       * @param bbox {Object} The initial bounding box\n       * @param x {Float}\n       * @param y {Float}\n       * @returns {Object} The enlarged bounding box\n       */\n      function bboxAdd(bbox, x, y) {\n        if (bbox.u > y) {\n bbox.u = y; \n}\n        if (bbox.d < y) {\n bbox.d = y; \n}\n        if (bbox.l > x) {\n bbox.l = x; \n}\n        if (bbox.r < x) {\n bbox.r = x; \n}\n        return bbox;\n      }\n\n      this.setCurrentRatioValue(Array(this.getIndicators().length).fill(0));\n      this.setTargetRatioValue(Array(this.getIndicators().length).fill([0, false, false]));\n\n      const self = this;\n      const s = this.getStart();\n      const e = this.getEnd();\n      const min = this.getMin();\n      const max = this.getMax();\n      let cntValues = 0;\n      let svgMajor = '';\n      let svgMinor = '';\n      let svgLabels = '';\n      let svgRanges = '';\n      let svgIndicators = '';\n      let svgText = '';\n      const createBarPath = cv.ui.structure.pure.Roundbar.createBarPath;\n\n      // Determine the bounding box, first get the biggest radius that must fit\n      let rMax = this.getAxisradius() + this.getAxiswidth();\n      let sMax = 0;\n      let eMax = 0;\n      this.getIndicators().forEach(function (indicator) {\n        rMax = Math.max(rMax, indicator.radius, indicator.radius+indicator.width);\n        sMax = Math.max(sMax, indicator.startarrow);\n        eMax = Math.max(eMax, indicator.endarrow);\n      });\n      let BBox = createBarPath(s, sMax, e, eMax, rMax, 0, true);\n\n      if (this.getMinorwidth() > 0) {\n        let\n          spacing = parseFloat(this.getMinorspacing());\n          let rIn = this.getMinorradius();\n          let rOut = this.getMinorwidth() + rIn;\n\n        if (/^[0-9]+%/.test(this.getMinorspacing())) { // special case: percentage\n          spacing = (max-min) * spacing / 100;\n        }\n\n        svgMinor += '<path class=\"minor\" d=\"';\n        for (var angle=s, delta = (e-s)*spacing/(max-min), cnt=(max-min)/spacing; cnt >= 0; angle+=delta, cnt--) {\n          var\n            sin = Math.sin(angle);\n            var cos = Math.cos(angle);\n          svgMinor += [\n            'M', cv.ui.structure.pure.Roundbar.coord({x:cos*rIn, y:-sin*rIn }),\n            'L', cv.ui.structure.pure.Roundbar.coord({x:cos*rOut, y:-sin*rOut})\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos*rIn, -sin*rIn);\n          BBox = bboxAdd(BBox, cos*rOut, -sin*rOut);\n        }\n        if (this.getMinorcolor() !== '') {\n svgMinor += '\" style=\"stroke:' + this.getMinorcolor(); \n}\n        svgMinor += '\" />';\n      }\n\n      if (this.getMajorwidth() > 0) {\n        let\n          rIn = this.getMajorradius();\n          let rOut = this.getMajorwidth() + rIn;\n\n        svgMajor += '<path class=\"major\" d=\"';\n\n        this.getMajorposition().split(';').forEach(function (position) {\n          switch (position) {\n            case 'min':\n              position = min;\n              break;\n\n            case 'max':\n              position = max;\n              break;\n          }\n          const angle = s + (e - s) * (position - min) / (max - min);\n          const sin = Math.sin(angle);\n          const cos = Math.cos(angle);\n          svgMajor += [\n            'M', cv.ui.structure.pure.Roundbar.coord({x:cos*rIn, y:-sin*rIn }),\n            'L', cv.ui.structure.pure.Roundbar.coord({x:cos*rOut, y:-sin*rOut})\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos*rIn, -sin*rIn);\n          BBox = bboxAdd(BBox, cos*rOut, -sin*rOut);\n        });\n        if (this.getMajorcolor() !== '') {\n svgMajor += '\" style=\"stroke:' + this.getMajorcolor(); \n}\n        svgMajor += '\" />';\n      }\n\n      const labelstyle = this.getLabelstyle();\n      this.getLabels().forEach(function (label, labelnumber) {\n        const angle = s + (e - s) * (label.value - min) / (max - min);\n        const x = label.radius * Math.cos(angle);\n        const y = label.radius * -Math.sin(angle);\n        let alignmentBaseline = '';\n        let textAnchor = '';\n        let textAngle = 0;\n\n        if (label.orientation < 3) {\n          svgLabels += '<text class=\"axislabel\" x=\"' + x + '\" y=\"' + y + '\"';\n          switch (label.orientation) {\n            default:\n            case 0: // horizontal\n              if (x < 0) {\n                textAnchor = (['end', 'middle', 'start'])[label.position];\n              } else {\n                textAnchor = (['start', 'middle', 'end'])[label.position];\n              }\n              if (Math.abs(x) < 1) {\n                textAnchor = 'middle';\n              }\n              if (y < 0) {\n                alignmentBaseline = (['baseline', 'middle', 'hanging'])[label.position];\n              } else {\n                alignmentBaseline = (['hanging', 'middle', 'baseline'])[label.position];\n              }\n              if (Math.abs(y) < 1) {\n                alignmentBaseline = 'middle';\n              }\n              break;\n\n            case 1: { // parallel\n              let textAngle = -angle * 180 / Math.PI + 90;\n              if (y < 0) {\n                alignmentBaseline = (['baseline', 'middle', 'hanging'])[label.position];\n              } else {\n                alignmentBaseline = (['hanging', 'middle', 'baseline'])[label.position];\n                textAngle += 180;\n              }\n              textAnchor = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n            }\n\n            case 2: // perpendicular\n              textAngle = -angle * 180 / Math.PI;\n              if (x < 0) {\n                textAnchor = (['end', 'middle', 'start'])[label.position];\n                textAngle += 180;\n              } else {\n                textAnchor = (['start', 'middle', 'end'])[label.position];\n              }\n              alignmentBaseline = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n          }\n          svgLabels += ' dominant-baseline=\"' + alignmentBaseline + '\"';\n          svgLabels += ' text-anchor=\"' + textAnchor + '\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '>' + label.name + '</text>';\n        } else { // label.orientation >= 3 -> round\n          const labelid = self.$$user_path + '_label' + labelnumber;\n          const cw = s < e ? 0 : 1;\n          let path = '';\n          let align = '';\n\n          switch (label.orientation) {\n            case 3: // roundstart\n              path = ['M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y].join(' ');\n              break;\n\n            case 4: // roundmiddle\n              path = ['M', -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y].join(' ');\n              align = ' startOffset=\"50%\" text-anchor=\"middle\"';\n              break;\n\n            case 5: // roundend\n              path = ['M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y].join(' ');\n              align = ' startOffset=\"100%\" text-anchor=\"end\"';\n              break;\n          }\n          svgLabels += '<path style=\"stroke:none; fill:none; stroke-width:0\" id=\"' + labelid + '\" d=\"' + path + '\"/>';\n          svgLabels += '<text class=\"axislabel\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '><textPath href=\"#'+labelid+'\"' + align + '>' + label.name + '</textPath></text>';\n        }\n      });\n\n      this.getRanges().forEach(function (range) {\n        const sRange = (e - s) * (range.start - min) / (max - min) + s;\n        const eRange = (e - s) * (range.end - min) / (max - min) + s;\n        const rRange = range.radius || self.getAxisradius();\n        const wRange = range.width || self.getAxiswidth();\n        const thisBBox = createBarPath(sRange, 0, eRange, 0, rRange, wRange, true);\n        svgRanges += '<path class=\"range\" d=\"';\n        svgRanges += createBarPath(sRange, 0, eRange, 0, rRange, wRange);\n        if (range.style) {\n          svgRanges += '\" style=\"' + range.style;\n        }\n        svgRanges += '\" />';\n\n        BBox = bboxAdd(BBox, thisBBox.l, thisBBox.u);\n        BBox = bboxAdd(BBox, thisBBox.r, thisBBox.d);\n      });\n\n      this.__animator = [];\n      this.getIndicators().forEach(function (indicator, number) {\n        self.__animator.push(new cv.util.LimitedRateUpdateAnimator(self.__updateIndicatorPosition, self, number));\n        svgIndicators += '<path class=\"indicator\" style=\"' + indicator.style + '\" />';\n\n        if (indicator.showValue) {\n cntValues++; \n}\n      });\n\n      if (cntValues>0) {\n        svgText += '<text class=\"value\" y=\"'+this.getTexty()+'\"' +\n          ' text-anchor=\"' + this.getTextanchor() +'\"' +\n          ' font-size=\"' + this.getFontsize() + '\">' +\n          '<tspan x=\"'+this.getTextx()+'\" dy=\"0\">-</tspan>' +\n          ('<tspan x=\"'+this.getTextx()+'\" dy=\"' + this.getLinespace() + '\">-</tspan>').repeat(cntValues-1) +\n          '</text>';\n\n        const textDistribution = ({start: [0, 1], middle: [0.5, 0.5], end: [1, 0]})[this.getTextanchor()] || [0, 1];\n        const textU = Math.min(0, -this.getFontsize(), this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0));\n        const textD = Math.max(0, -this.getFontsize(), this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0));\n        BBox = bboxAdd(BBox, this.getTextx()-textDistribution[0]*this.getTextlength(), this.getTexty()+textU);\n        BBox = bboxAdd(BBox, this.getTextx()+textDistribution[1]*this.getTextlength(), this.getTexty()+textD);\n      }\n\n      let html = '<div class=\"actor\">' +\n        '<svg width=\"100%\" height=\"100%\" viewBox=\"' + [\n          BBox.l - this.getBboxgrow().l,\n          BBox.u - this.getBboxgrow().u,\n          BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r,\n          BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d\n        ].join(' ') + '\">';\n      if (this.getDebug()) {\n        html += '<rect width=\"'+(BBox.r-BBox.l)+'\" height=\"'+(BBox.d-BBox.u)+'\" x=\"'+(BBox.l)+'\" y=\"'+(BBox.u)+'\" stroke=\"blue\" fill=\"none\" />' +\n          '<rect width=\"'+(BBox.r-BBox.l + this.getBboxgrow().l + this.getBboxgrow().r)+'\" height=\"'+(BBox.d-BBox.u + this.getBboxgrow().u + this.getBboxgrow().d)+'\" x=\"'+(BBox.l - this.getBboxgrow().l)+'\" y=\"'+(BBox.u - this.getBboxgrow().u)+'\" stroke=\"green\" fill=\"none\" />' +\n          '<circle cx=\"0\" cy=\"0\" r=\"3\" fill=\"red\" />';\n      }\n\n      if (this.getAxisradius() > 0) {\n        const sectorPath = createBarPath(s, 0, e, 0, this.getAxisradius(), 0);\n        const axisPath = createBarPath(s, 0, e, 0, this.getAxisradius(), this.getAxiswidth());\n        const stroke = this.getAxiscolor() === '' ? undefined : this.getAxiscolor();\n        const fill = this.getAxiswidth() < 1 ? 'none' : stroke;\n        html +=\n          '<path class=\"sector\" d=\"'+sectorPath+' L0 0Z\"/>' +\n          '<path class=\"axis\" d=\"'+axisPath+'\" style=\"' +\n          (stroke ? 'stroke:'+stroke : '') +\n          (fill ? ';fill:' +fill : '') +\n          '\"/>';\n      }\n\n      html += svgMinor + svgMajor + svgRanges + svgLabels + svgIndicators + svgText;\n      html += '</svg></div>';\n\n      return html;\n    },\n\n    /**\n     * Updates the roundbar widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update: function(address, data) {\n      if (data === undefined || address === undefined) {\n return; \n}\n      const self = this;\n      const value = cv.Transform.decode(this.getAddress()[address].transform, data);\n      const target = this.getTargetRatioValue();\n      const tspan = Array.from(this.getDomElement().getElementsByTagName('tspan'));\n      const valueFormat = this.applyFormat(address, value);\n\n      this.getIndicators().forEach(function(indicator, i) {\n        if (address === indicator.address) {\n          target[i] = [\n            (Math.min(Math.max(value, indicator.min), indicator.max)-indicator.min)/(indicator.max-indicator.min),\n            value < indicator.min,\n            value > indicator.max\n          ];\n          if (tspan[i] !== undefined) {\n            tspan[i].textContent = valueFormat;\n          }\n          self.__animator[i].setTo(target[i][0], !self.isVisible());\n        }\n      });\n\n      this.setTargetRatioValue(target);\n    },\n\n    /**\n     * Callback to update the display of the indicators.\n     *\n     * Note: It is a design decision not to pool multiple updates in one requestAnimationFrame which might be beneficial\n     * performance wise. But as it's assumed that a typical visu config is only containing one roundbar per address\n     * a pooling wouldn't make a difference on the one hand but complicate the code on the other hand.\n     * Even with a few roundbars using the same address the performance impact is negligible.\n     * @param ratio\n     * @param indicatorNumber\n     */\n    __updateIndicatorPosition: function (ratio, indicatorNumber) {\n      if (this.__indicatorDOMElement.length === 0) {\n        // cache\n        this.__indicatorDOMElement = Array.from(this.getDomElement().getElementsByClassName('indicator'));\n      }\n\n      const indicator = this.getIndicators()[indicatorNumber];\n      const target = this.getTargetRatioValue()[indicatorNumber];\n      const startAngle = this.getStart();\n      const endAngle = this.getEnd();\n      let targetAngle = startAngle + ratio * (endAngle - startAngle);\n      const overflowarrow = this.getOverflowarrow();\n\n      if (!overflowarrow) {\n        targetAngle = (endAngle > startAngle)\n          ? Math.max(startAngle, targetAngle - indicator.endarrow)\n          : Math.min(startAngle, targetAngle - indicator.endarrow);\n      }\n      if (indicator.isBar) {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute('d',\n          cv.ui.structure.pure.Roundbar.createBarPath(\n            startAngle,\n            (overflowarrow&&!(target[1]&&ratio<0.01)) ? 0 : indicator.startarrow,\n            targetAngle,\n            (overflowarrow&&!(target[2]&&ratio>0.99)) ? 0 : indicator.endarrow,\n            indicator.radius,\n            indicator.width\n          )\n        );\n      } else {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute('d',\n          cv.ui.structure.pure.Roundbar.createPointerPath(targetAngle, indicator)\n        );\n      }\n    }\n  }\n});\n\n","/* Slide.js \n * \n * copyright (c) 2010-2020, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a horizontal slider to the visu. This can be used, for example, to dim a light or change temperature values.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Slide', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.base(arguments, props);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n    this.__pageSizeListener = cv.ui.layout.ResizeHandler.states.addListener('changePageSizeInvalid', () => {\n      this.__invalidateScreensize();\n    });\n    this.__lastBusValue = {};\n  },\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    cv.ui.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    min: {\n      check: 'Number',\n      init: 0\n    },\n    max: {\n      check: 'Number',\n      init: 100\n    },\n    step: {\n      check: 'Number',\n      init: 0.5\n    },\n    showInvalidValues: {\n      check: 'Boolean',\n      init: false\n    },\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __lastBusValue: null,\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined, // cache for DOM element\n    __actorWidth: undefined,\n    __buttonWidth: undefined,\n    __pageSizeListener: undefined,\n    __inDrag: false, // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n\n    // overridden\n    _getInnerDomString: function () {\n      const placeholder = this.getFormat() === '' ? '' : '-';\n      return `\n        <div class=\"actor ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n          <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">`+placeholder+`</button>\n          <div class=\"ui-slider-range value\" style=\"margin-left: 0px; width: 0px;\"></div>\n        </div>\n      `;\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, 250, {trailing: true}, this);\n\n      this.getActor().addEventListener('pointerdown', this);\n    },\n\n    _update: function (address, data) {\n      let transform = this.getAddress()[address].transform;\n      if (this.__inDrag || this.__lastBusValue[transform] === data) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      this.__lastBusValue = {}; // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue[transform] = data;\n\n      let value = cv.Transform.decode(transform, data);\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, !this.isVisible());\n    },\n\n    /**\n     * The the internal slider state and its handle and displayed value\n     * @param value {Number} The new value\n     * @param instant {Boolean} Animate or instant change\n     * @param relaxDisplay {Boolean} Let the handle move to an unstable position\n     *   to give visual feedback that something does happen during interaction\n     * @private\n     */\n    __setSliderTo: function(value, instant, relaxDisplay = false) {\n      let min = this.getMin();\n      let max = this.getMax();\n      let step = this.getStep();\n      if (step === 0 || Math.abs((max-min)/step) > 10000) {\n        // limit too small step size - it's not necessary to have more than\n        // 10000 steps for the range as even the biggest screen doesn't have\n        // that many pixels\n        step = (max-min)/10000;\n      }\n      let realValue = Math.min(Math.max(value, min), max);\n\n      if (!this.getShowInvalidValues()) {\n        // map to closest allowed value\n        let stepValue = Math.round((realValue - min) / step) * step + min;\n        // use max when the value is greater than the middle point between the\n        // biggest allowed step and the maximum\n        let maxSwitchValue = (Math.floor((max - min) / step) * step + min + max) / 2;\n        realValue = realValue < maxSwitchValue ? stepValue : max;\n      }\n\n      let ratio = max===min ? 0 : (realValue-min)/(max-min);\n\n      if (relaxDisplay) {\n        let valueRatio = max===min ? 0 : (Math.min(Math.max(value, min), max)-min)/(max-min);\n        let delta = ratio - valueRatio;\n        let stepCount = (max - min) / step;\n        let factor = (2*stepCount) ** 3;\n        ratio -= Math.min(factor * delta**4, Math.abs(delta)) * Math.sign(delta);\n      }\n\n      // store it to be able to suppress sending of unchanged data\n      this.setBasicValue(realValue);\n\n      if (this.getFormat() !== '') {\n        // #2: map it to a value the user wants to see\n        let displayValue = this.applyMapping(realValue);\n\n        // #3: format it in a way the user understands the value\n        displayValue = this.applyFormat(undefined, displayValue);\n        this.setValue(displayValue);\n\n        this.applyStyling(realValue);\n\n        let button = this.getDomElement().querySelector('button');\n        this.defaultValue2DOM(displayValue, e => {\n          button.innerHTML = e;\n        });\n      }\n\n      this.__animator.setTo(ratio, instant);\n    },\n\n    __updateHandlePosition: function (ratio) {\n      if (this.__button === undefined) {\n        let element = this.getDomElement();\n        this.__button = element.querySelector('button');\n        this.__range = element.querySelector('.ui-slider-range');\n      }\n      if (this.__button === null) {\n        // most likely reason: the widget / DOM tree was deleted (e.g. due to\n        // browsing to a new page or during unit tests)\n        this._disposeObjects('__animator');\n        return;\n      }\n      if (this.__actorWidth === undefined || this.__buttonWidth === undefined) {\n        let\n          actor = this.getDomElement().querySelector('.actor');\n          let actorStyles = window.getComputedStyle(actor);\n        this.__actorWidth = parseFloat(actorStyles.getPropertyValue('width'));\n        this.__buttonWidth = parseFloat(window.getComputedStyle(this.__button).getPropertyValue('width'));\n        this.__range.style.marginLeft = '-' + actorStyles.getPropertyValue('padding-left');\n        this.__range.style.borderRadius = actorStyles.getPropertyValue('border-radius');\n      }\n      let length = ratio * this.__actorWidth;\n      this.__button.style.transform = 'translate3d(' + (length-this.__buttonWidth/2) + 'px, 0px, 0px)';\n      this.__range.style.width = length + 'px';\n    },\n\n    __invalidateScreensize: function () {\n      let min = this.getMin();\n      let max = this.getMax();\n      this.__actorWidth = undefined; // invalidate cached values\n      this.__animator.setTo(max===min ? 0 : (this.getBasicValue()-min)/(max-min));\n    },\n\n    handleEvent: function (event) {\n      let newRatio = 0;\n\n      switch (event.type) {\n        case 'pointerdown': {\n          this.__inDrag = true;\n          document.addEventListener('pointermove', this);\n          document.addEventListener('pointerup', this);\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMin = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          newRatio = (event.clientX - this.__coordMin) / this.__actorWidth;\n          break;\n        }\n\n        case 'pointermove':\n          if (!this.__inDrag) {\n            return;\n          }\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n\n        case 'pointerup':\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n      }\n\n      newRatio = Math.min(Math.max(newRatio, 0.0), 1.0); // limit to 0..1\n      let newValue = this.getMin() + newRatio * (this.getMax() - this.getMin());\n      this.__setSliderTo(newValue, this.__inDrag, this.__inDrag);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call(newValue);\n      }\n    },\n\n    __onChangeValue: function(value) {\n      this.__lastBusValue = this.sendToBackend(value, false, this.__lastBusValue);\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('slide', statics);\n  }\n});\n","/* Switch.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The switch widget shows two states (e.g. ON and OFF) and can toggle between them.\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a switch widget using mapping and styling</caption>\n *   <screenshot name=\"switch_example_on\">\n *    <caption>Switch turned on</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n *   <screenshot name=\"switch_example_off\">\n *    <caption>Switch turned off</caption>\n *    <data address=\"0/0/0\">0</data>\n *   </screenshot>\n * </settings>\n * <meta>\n *  <mappings>\n *    <mapping name=\"OnOff\">\n *      <entry value=\"0\">O</entry>\n *      <entry value=\"1\">I</entry>\n *    </mapping>\n *  </mappings>\n *  <stylings>\n *    <styling name=\"GreyGreen\">\n *      <entry value=\"0\">grey</entry>\n *      <entry value=\"1\">green</entry>\n *    </styling>\n *  </stylings>\n * </meta>\n * <switch mapping=\"OnOff\" styling=\"GreyGreen\">\n *   <layout colspan=\"3\" />\n *   <label>Switch</label>\n *   <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n * </switch>\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Switch', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n    offValue: {\n      check: 'String',\n      init: '0'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param value {any} incoming data (already transformed + mapped)\n     */\n    handleUpdate: function(value) {\n      const actor = this.getActor();\n      // compare against the unmapped value\n      value = this.getBasicValue();\n      const off = this.getOffValue();\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      actor.classList.remove(value == off ? 'switchPressed' : 'switchUnpressed'); // jshint ignore:line\n      actor.classList.add(value == off ? 'switchUnpressed' : 'switchPressed'); // jshint ignore:line\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @return {var}\n     */\n    getActionValue: function () {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      return (this.getBasicValue() == this.getOffValue() ? this.getOnValue() : this.getOffValue()); // jshint ignore:line\n    }\n  }\n});\n","/* Text.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The text-tag defines static (non-changing) text to be displayed on a page. The content of a &lt;label&gt; with free text.\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a centered text widget</caption>\n *   <screenshot name=\"text_example\" />\n * </settings>\n * <text align=\"center\"><label>Example text</label></text>\n *\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Text', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '';\n    }\n  }\n});\n","/* Toggle.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The toggle widget is similar to the switch, but it can take more than two states.\n * Can be used to change the operating modes of the heating system.\n * Each time the toggle is pressed, the toggle takes the next possible state.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Toggle', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @return {var}\n     */\n    getActionValue: function () {\n      return this.getNextMappedValue(this.getBasicValue(), this.getMapping());\n    }\n  }\n});\n","/* Trigger.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a button to the visu with which exactly a defined value for a short,\n * as well as a defined value for a long key pressure, can be sent to the BUS,\n * e.g. for recalling and storing scenes or driving roller blinds. (Short = stop, long = drive).\n * The address for short and long term may vary.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Trigger', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.BasicUpdate,\n    cv.ui.common.HandleLongpress\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', init: '0' },\n    shortValue: { check: 'String', init: '0' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.defaultUpdate(undefined, this.getSendValue(), this.getDomElement());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Handle a short tap event and send the value for short pressing the trigger to the backend.\n     * If there is no short threshold set, this send the value for long presses to the backend.\n     */\n    _action: function() {\n      const value = (this.getShortThreshold() > 0 || this.isShortDefault()) ? this.getShortValue() : this.getSendValue();\n      this.sendToBackend(value, function(address) {\n        return !!(address.variantInfo & 1);\n      });\n    },\n\n    /**\n     * Handle a long tap event and send the value for long pressing the trigger to the backend.\n     */\n    _onLongTap: function() {\n      this.sendToBackend(this.getSendValue(), function(address) {\n        return !!(address.variantInfo & 2);\n      });\n    }\n  }\n});\n","/* Unknown.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Fallback widget shown when an unknown widget is defined in the configuration.\n * You must not use this one directly.\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Unknown', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.set(props);\n  },\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    path: {\n      check: 'String',\n      init: ''\n    },\n    $$type: {\n      check: 'String',\n      init: 'Unknown'\n    },\n    unknownType: {\n      check: 'String',\n      init: ''\n    },\n    pageType: {\n      check: ['text', '2d', '3d'],\n      init: 'text'\n    },\n    parentWidget: {\n      check: 'cv.ui.structure.AbstractBasicWidget',\n      init: null\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    /**\n     * Returns the DOM-Element of this widget\n     * @return {Element} the DOM element\n     */\n    getDomElement: function () {\n      return document.querySelector('#' + this.getPath());\n    },\n\n    /**\n     * Return the HTML string for this widget\n     * @return {String} HTML code\n     */\n    getDomString: function () {\n      return '<div class=\"widget clearfix\"><pre>'+qx.locale.Manager.tr('unknown: %1', this.getUnknownType()) + '</pre></div>';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('unknown', statics);\n  }\n});\n\n","/* UrlTrigger.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The UrlTrigger widget adds a button to the visualization that queries data from a URL in the background.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.UrlTrigger', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.BasicUpdate\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', init: '0' },\n    params: { check: 'String', init: '' },\n    url: { check: 'String', nullable: true, apply: '_applyUrl' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __xhr: null,\n\n    getXhr: function () {\n      return this.__xhr;\n    },\n\n    // property apply\n    _applyUrl: function(value) {\n      if (value) {\n        if (!this.__xhr) {\n          const xhr = new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(value));\n          xhr.set({\n            method: 'GET',\n            accept: 'application/html',\n            requestData: this.getParams()\n          });\n          this.__xhr = xhr;\n        } else {\n          this.__xhr.setUrl(qx.util.ResourceManager.getInstance().toUri(value));\n        }\n      }\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.defaultUpdate(undefined, this.getSendValue(), this.getDomElement());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      let actor = '<div class=\"actor switchUnpressed ';\n      if (this.getAlign()) {\n        actor += this.getAlign();\n      }\n      actor += '\"><div class=\"value\"></div></div>';\n      return actor;\n    },\n\n    // overridden\n    _action: function() {\n      if (this.__xhr) {\n        this.__xhr.send();\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this._disposeObjects('__xhr');\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('urltrigger', statics);\n  }\n});\n","/* Video.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a video or live stream to the visu. Currently, most sources do not support this yet.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Video', {\n  extend: cv.ui.structure.AbstractWidget,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width   : { check: 'String', nullable: true },\n    height  : { check: 'String', nullable: true },\n    src     : { check: 'String', init: '' },\n    autoplay: { check: 'Boolean', init: false }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      // create the actor\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style !== '') {\n style = 'style=\"' + style + '\"'; \n}\n      const autoplay = this.isAutoplay() ? ' autoplay=\"autoplay\"' : '';\n      return '<div class=\"actor\"><video src=\"' + this.getSrc() + '\" ' + style + autoplay + '  controls=\"controls\" /></div>';\n    },\n\n    // overridden\n    getValueElement: function() {\n      return this.getDomElement().querySelector('video');\n    },\n\n    // overridden\n    _applyVisible: function(value) {\n      const video = this.getValueElement();\n      if (video) {\n        if (value === true && this.isAutoplay()) {\n          video.play();\n        } else {\n          video.pause();\n        }\n      }\n    }\n  }\n});\n","/* Web.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an area to the visu, where external websites can be displayed.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Web', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: [\n    cv.ui.common.Update,\n    cv.ui.common.Refresh\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n\n    width: {\n      check: 'String',\n      nullable: true\n    },\n    height: {\n      check: 'String',\n      nullable: true\n    },\n    frameborder: {\n      check: 'Boolean',\n      init: false\n    },\n    background: {\n      check: 'String',\n      nullable: true\n    },\n    scrolling: {\n      check: ['auto', 'yes', 'no'],\n      nullable: true\n    },\n    src: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      let webStyle = this.getStyle();\n      if (this.getWidth()) {\n        webStyle += 'width:' + this.getWidth() + ';';\n      } else { // default width is 100% of widget space (fix bug #3175343 part 1)\n        webStyle += 'width: 100%;';\n      }\n      if (this.getHeight()) {\n        webStyle += 'height:' + this.getHeight() + ';';\n      }\n      if (this.getFrameborder() === false) {\n        webStyle += 'border: 0px ;';\n      }\n      if (this.getBackground()) {\n        webStyle += 'background-color:' + this.getBackground() + ';';\n      }\n      if (webStyle !== '') {\n        webStyle = 'style=\"' + webStyle + '\"';\n      }\n\n      let scrolling = '';\n      if (this.getScrolling()) {\n        scrolling = 'scrolling=\"' + this.getScrolling() + '\"';\n      } // add scrolling parameter to iframe\n      return '<div class=\"actor\"><iframe src=\"' + this.getSrc() + '\" ' + webStyle + scrolling + '></iframe></div>';\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data (already transformed + mapped)\n     */\n    _update: function(address, data) {\n      let addr = this.getAddress()[address];\n      if (!addr) {\n        return;\n      }\n      if (data === 1) {\n        const iframe = this.getDomElement().querySelector('iframe');\n        this.refreshAction(iframe, iframe.getAttribute('src'));\n        // reset the value\n        cv.TemplateEngine.getInstance().visu.write(address, cv.Transform.encode(addr.transform, 0));\n      }\n    }\n  }\n});\n\n","/* WgPluginInfo.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an dynamic field to the visu that shows live information from a WireGate plugin.\n * \n * Note: The service helper from\n * https://raw.githubusercontent.com/OpenAutomationProject/Wiregate/master/tools/wg-plugindb/wg-plugindb.php\n * must be \"installed\" in the directory /var/www/ (i.e. the web root)\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.WgPluginInfo', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    variable   : { check: 'String', nullable: true, apply: '_applyVariable' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __request: null,\n\n    // property apply\n    _applyVariable: function(value) {\n      if (value) {\n        if (!this.__request) {\n          // create the request\n          this.__request = new qx.io.request.Xhr('/wg-plugindb.php?name=' + value);\n          this.__request.set({\n            accept: 'application/json'\n          });\n          this.__request.addListener('success', this._onSuccess, this);\n        } else {\n          this.__request.setUrl('/wg-plugindb.php?name=' + value);\n        }\n        cv.TemplateEngine.getInstance().executeWhenDomFinished(this.__request.send, this.__request);\n      }\n    },\n\n    getRequest: function () {\n      return this.__request;\n    },\n\n    /**\n     * Handle successful requests from {@link qx.io.request.Xhr}\n     * @param ev {Event}\n     */\n    _onSuccess: function(ev) {\n      const req = ev.getTarget();\n      const data = req.getResponse();\n      this.defaultUpdate(undefined, data[this.getVariable()], this.getValueElement());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Triggers an {@link qx.io.request.Xhr} request to query the plugin value\n     */\n    handleUpdate: function() {\n      if (this.__request) {\n        this.__request.send();\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this._disposeObjects('__request');\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('wgplugin_info', statics);\n  }\n});\n","/* WidgetInfoAction.js \n * \n * copyright (c) 2010-2017, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * This is a helper class for the InfoAction widget it cannot be used directly\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (as widget), 0.9.2 (as plugin)\n */\nqx.Class.define('cv.ui.structure.pure.WidgetInfoAction', {\n  extend: cv.ui.structure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    childObjects: {check: 'Array', init: []}\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    getDomString: function () {\n      return this.getChildrenDomString();\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('widgetinfo', statics);\n    cv.ui.structure.WidgetFactory.registerClass('widgetaction', statics);\n  }\n});\n"]}