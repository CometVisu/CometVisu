if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.min.js")){!function(t){t.color={};t.color.make=function(e,i,o,n){var a={};a.r=e||0;a.g=i||0;a.b=o||0;a.a=null!=n?n:1;a.add=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]+=e;return a.normalize()};a.scale=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]*=e;return a.normalize()};a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"};a.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}a.r=t(0,parseInt(a.r),255);a.g=t(0,parseInt(a.g),255);a.b=t(0,parseInt(a.b),255);a.a=t(0,a.a,1);return a};a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)};return a.normalize()};t.color.extract=function(e,i){var o;do{if(""!=(o=e.css(i).toLowerCase())&&"transparent"!=o)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));"rgba(0, 0, 0, 0)"==o&&(o="transparent");return t.color.parse(o)};t.color.parse=function(i){var o,n=t.color.make;if(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10));if(o=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10),parseFloat(o[4]));if(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]));if(o=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]),parseFloat(o[4]));if(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return n(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16));if(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return n(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16));var a=t.trim(i).toLowerCase();return"transparent"==a?n(255,255,255,0):n((o=e[a]||[0,0,0])[0],o[1],o[2])};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery);!function(t){var e=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function i(e,i){var o=i.children("."+e)[0];if(null==o){(o=document.createElement("canvas")).className=e;t(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i);if(!o.getContext){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");o=window.G_vmlCanvasManager.initElement(o)}}this.element=o;var n=this.context=o.getContext("2d"),a=window.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=a/r;this.resize(i.width(),i.height());this.textContainer=null;this.text={};this._textCache={}}i.prototype.resize=function(t,e){if(t<=0||e<=0)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var i=this.element,o=this.context,n=this.pixelRatio;if(this.width!=t){i.width=t*n;i.style.width=t+"px";this.width=t}if(this.height!=e){i.height=e*n;i.style.height=e+"px";this.height=e}o.restore();o.save();o.scale(n,n)};i.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};i.prototype.render=function(){var t=this._textCache;for(var i in t)if(e.call(t,i)){var o=this.getTextLayer(i),n=t[i];o.hide();for(var a in n)if(e.call(n,a)){var r=n[a];for(var s in r)if(e.call(r,s)){for(var l,c=r[s].positions,h=0;l=c[h];h++)if(l.active){if(!l.rendered){o.append(l.element);l.rendered=!0}}else{c.splice(h--,1);l.rendered&&l.element.detach()}0==c.length&&delete r[s]}}o.show()}};i.prototype.getTextLayer=function(e){var i=this.text[e];if(null==i){null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element));i=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return i};i.prototype.getTextInfo=function(e,i,o,n,a){var r,s,l,c;i=""+i;r="object"==typeof o?o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:o;null==(s=this._textCache[e])&&(s=this._textCache[e]={});null==(l=s[r])&&(l=s[r]={});if(null==(c=l[i])){var h=t("<div></div>").html(i).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof o?h.css({font:r,color:o.color}):"string"==typeof o&&h.addClass(o);c=l[i]={width:h.outerWidth(!0),height:h.outerHeight(!0),element:h,positions:[]};h.detach()}return c};i.prototype.addText=function(t,e,i,o,n,a,r,s,l){var c=this.getTextInfo(t,o,n,a,r),h=c.positions;"center"==s?e-=c.width/2:"right"==s&&(e-=c.width);"middle"==l?i-=c.height/2:"bottom"==l&&(i-=c.height);for(var u,d=0;u=h[d];d++)if(u.x==e&&u.y==i){u.active=!0;return}u={active:!0,rendered:!1,element:h.length?c.element.clone():c.element,x:e,y:i};h.push(u);u.element.css({top:Math.round(i),left:Math.round(e),"text-align":s})};i.prototype.removeText=function(t,i,o,n,a,r){if(null==n){var s=this._textCache[t];if(null!=s)for(var l in s)if(e.call(s,l)){var c=s[l];for(var h in c)if(e.call(c,h))for(var u=c[h].positions,d=0;p=u[d];d++)p.active=!1}}else{var p;for(u=this.getTextInfo(t,n,a,r).positions,d=0;p=u[d];d++)p.x==i&&p.y==o&&(p.active=!1)}};function o(e,o,n,a){var r=[],s={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,h=null,u=null,d=null,p=[],f=[],g={left:0,right:0,top:0,bottom:0},m=0,x=0,v={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},b=this;b.setData=k;b.setupGrid=A;b.draw=P;b.getPlaceholder=function(){return e};b.getCanvas=function(){return l.element};b.getPlotOffset=function(){return g};b.width=function(){return m};b.height=function(){return x};b.offset=function(){var t=h.offset();t.left+=g.left;t.top+=g.top;return t};b.getData=function(){return r};b.getAxes=function(){var e={};t.each(p.concat(f),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)});return e};b.getXAxes=function(){return p};b.getYAxes=function(){return f};b.c2p=M;b.p2c=function(t){var e,i,o,n={};for(e=0;e<p.length;++e)if((i=p[e])&&i.used){o="x"+i.n;null==t[o]&&1==i.n&&(o="x");if(null!=t[o]){n.left=i.p2c(t[o]);break}}for(e=0;e<f.length;++e)if((i=f[e])&&i.used){o="y"+i.n;null==t[o]&&1==i.n&&(o="y");if(null!=t[o]){n.top=i.p2c(t[o]);break}}return n};b.getOptions=function(){return s};b.highlight=Y;b.unhighlight=X;b.triggerRedrawOverlay=_;b.pointOffset=function(t){return{left:parseInt(p[w(t,"x")-1].p2c(+t.x)+g.left,10),top:parseInt(f[w(t,"y")-1].p2c(+t.y)+g.top,10)}};b.shutdown=C;b.destroy=function(){C();e.removeData("plot").empty();r=[];s=null;l=null;c=null;h=null;u=null;d=null;p=[];f=[];v=null;q=[];b=null};b.resize=function(){var t=e.width(),i=e.height();l.resize(t,i);c.resize(t,i)};b.hooks=v;!function(){for(var e={Canvas:i},o=0;o<a.length;++o){var n=a[o];n.init(b,e);n.options&&t.extend(!0,s,n.options)}}();!function(i){t.extend(!0,s,i);i&&i.colors&&(s.colors=i.colors);null==s.xaxis.color&&(s.xaxis.color=t.color.parse(s.grid.color).scale("a",.22).toString());null==s.yaxis.color&&(s.yaxis.color=t.color.parse(s.grid.color).scale("a",.22).toString());null==s.xaxis.tickColor&&(s.xaxis.tickColor=s.grid.tickColor||s.xaxis.color);null==s.yaxis.tickColor&&(s.yaxis.tickColor=s.grid.tickColor||s.yaxis.color);null==s.grid.borderColor&&(s.grid.borderColor=s.grid.color);null==s.grid.tickColor&&(s.grid.tickColor=t.color.parse(s.grid.color).scale("a",.22).toString());var o,n,a,r=e.css("font-size"),l=r?+r.replace("px",""):13,c={style:e.css("font-style"),size:Math.round(.8*l),variant:e.css("font-variant"),weight:e.css("font-weight"),family:e.css("font-family")};a=s.xaxes.length||1;for(o=0;o<a;++o){(n=s.xaxes[o])&&!n.tickColor&&(n.tickColor=n.color);n=t.extend(!0,{},s.xaxis,n);s.xaxes[o]=n;if(n.font){n.font=t.extend({},c,n.font);n.font.color||(n.font.color=n.color);n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size))}}a=s.yaxes.length||1;for(o=0;o<a;++o){(n=s.yaxes[o])&&!n.tickColor&&(n.tickColor=n.color);n=t.extend(!0,{},s.yaxis,n);s.yaxes[o]=n;if(n.font){n.font=t.extend({},c,n.font);n.font.color||(n.font.color=n.color);n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size))}}s.xaxis.noTicks&&null==s.xaxis.ticks&&(s.xaxis.ticks=s.xaxis.noTicks);s.yaxis.noTicks&&null==s.yaxis.ticks&&(s.yaxis.ticks=s.yaxis.noTicks);if(s.x2axis){s.xaxes[1]=t.extend(!0,{},s.xaxis,s.x2axis);s.xaxes[1].position="top";null==s.x2axis.min&&(s.xaxes[1].min=null);null==s.x2axis.max&&(s.xaxes[1].max=null)}if(s.y2axis){s.yaxes[1]=t.extend(!0,{},s.yaxis,s.y2axis);s.yaxes[1].position="right";null==s.y2axis.min&&(s.yaxes[1].min=null);null==s.y2axis.max&&(s.yaxes[1].max=null)}s.grid.coloredAreas&&(s.grid.markings=s.grid.coloredAreas);s.grid.coloredAreasColor&&(s.grid.markingsColor=s.grid.coloredAreasColor);s.lines&&t.extend(!0,s.series.lines,s.lines);s.points&&t.extend(!0,s.series.points,s.points);s.bars&&t.extend(!0,s.series.bars,s.bars);null!=s.shadowSize&&(s.series.shadowSize=s.shadowSize);null!=s.highlightColor&&(s.series.highlightColor=s.highlightColor);for(o=0;o<s.xaxes.length;++o)S(p,o+1).options=s.xaxes[o];for(o=0;o<s.yaxes.length;++o)S(f,o+1).options=s.yaxes[o];for(var h in v)s.hooks[h]&&s.hooks[h].length&&(v[h]=v[h].concat(s.hooks[h]));y(v.processOptions,[s])}(n);!function(){e.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove();"static"==e.css("position")&&e.css("position","relative");l=new i("flot-base",e);c=new i("flot-overlay",e);u=l.context;d=c.context;h=t(c.element).unbind();var o=e.data("plot");if(o){o.shutdown();c.clear()}e.data("plot",b)}();k(o);A();P();!function(){if(s.grid.hoverable){h.mousemove(j);h.bind("mouseleave",R)}s.grid.clickable&&h.click(E);y(v.bindEvents,[h])}();function y(t,e){e=[b].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function k(e){r=function(e){for(var i=[],o=0;o<e.length;++o){var n=t.extend(!0,{},s.series);if(null!=e[o].data){n.data=e[o].data;delete e[o].data;t.extend(!0,n,e[o]);e[o].data=n.data}else n.data=e[o];i.push(n)}return i}(e);!function(){var e,i=r.length,o=-1;for(e=0;e<r.length;++e){var n=r[e].color;if(null!=n){i--;"number"==typeof n&&n>o&&(o=n)}}i<=o&&(i=o+1);var a,l=[],c=s.colors,h=c.length,u=0;for(e=0;e<i;e++){a=t.color.parse(c[e%h]||"#666");e%h==0&&e&&(u=u>=0?u<.5?-u-.2:0:-u);l[e]=a.scale("rgb",1+u)}var d,g=0;for(e=0;e<r.length;++e){if(null==(d=r[e]).color){d.color=l[g].toString();++g}else"number"==typeof d.color&&(d.color=l[d.color].toString());if(null==d.lines.show){var m,x=!0;for(m in d)if(d[m]&&d[m].show){x=!1;break}x&&(d.lines.show=!0)}null==d.lines.zero&&(d.lines.zero=!!d.lines.fill);d.xaxis=S(p,w(d,"x"));d.yaxis=S(f,w(d,"y"))}}();!function(){var e,i,o,n,a,s,l,c,h,u,d,p,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=Number.MAX_VALUE;function x(t,e,i){e<t.datamin&&e!=-m&&(t.datamin=e);i>t.datamax&&i!=m&&(t.datamax=i)}t.each(T(),function(t,e){e.datamin=f;e.datamax=g;e.used=!1});for(e=0;e<r.length;++e){(a=r[e]).datapoints={points:[]};y(v.processRawData,[a,a.data,a.datapoints])}for(e=0;e<r.length;++e){a=r[e];d=a.data;if(!(p=a.datapoints.format)){(p=[]).push({x:!0,number:!0,required:!0});p.push({y:!0,number:!0,required:!0});if(a.bars.show||a.lines.show&&a.lines.fill){var b=!!(a.bars.show&&a.bars.zero||a.lines.show&&a.lines.zero);p.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:b});if(a.bars.horizontal){delete p[p.length-1].y;p[p.length-1].x=!0}}a.datapoints.format=p}if(null==a.datapoints.pointsize){a.datapoints.pointsize=p.length;l=a.datapoints.pointsize;s=a.datapoints.points;var k=a.lines.show&&a.lines.steps;a.xaxis.used=a.yaxis.used=!0;for(i=o=0;i<d.length;++i,o+=l){var w=null==(u=d[i]);if(!w)for(n=0;n<l;++n){c=u[n];if(h=p[n]){if(h.number&&null!=c){c=+c;isNaN(c)?c=null:c==1/0?c=m:c==-1/0&&(c=-m)}if(null==c){h.required&&(w=!0);null!=h.defaultValue&&(c=h.defaultValue)}}s[o+n]=c}if(w)for(n=0;n<l;++n){if(null!=(c=s[o+n])&&!1!==(h=p[n]).autoscale){h.x&&x(a.xaxis,c,c);h.y&&x(a.yaxis,c,c)}s[o+n]=null}else if(k&&o>0&&null!=s[o-l]&&s[o-l]!=s[o]&&s[o-l+1]!=s[o+1]){for(n=0;n<l;++n)s[o+l+n]=s[o+n];s[o+1]=s[o-l+1];o+=l}}}}for(e=0;e<r.length;++e){a=r[e];y(v.processDatapoints,[a,a.datapoints])}for(e=0;e<r.length;++e){a=r[e];s=a.datapoints.points;l=a.datapoints.pointsize;p=a.datapoints.format;var M=f,S=f,C=g,z=g;for(i=0;i<s.length;i+=l)if(null!=s[i])for(n=0;n<l;++n){c=s[i+n];if((h=p[n])&&!1!==h.autoscale&&c!=m&&c!=-m){if(h.x){c<M&&(M=c);c>C&&(C=c)}if(h.y){c<S&&(S=c);c>z&&(z=c)}}}if(a.bars.show){var A;switch(a.bars.align){case"left":A=0;break;case"right":A=-a.bars.barWidth;break;default:A=-a.bars.barWidth/2}if(a.bars.horizontal){S+=A;z+=A+a.bars.barWidth}else{M+=A;C+=A+a.bars.barWidth}}x(a.xaxis,M,C);x(a.yaxis,S,z)}t.each(T(),function(t,e){e.datamin==f&&(e.datamin=null);e.datamax==g&&(e.datamax=null)})}()}function w(t,e){var i=t[e+"axis"];"object"==typeof i&&(i=i.n);"number"!=typeof i&&(i=1);return i}function T(){return t.grep(p.concat(f),function(t){return t})}function M(t){var e,i,o={};for(e=0;e<p.length;++e)(i=p[e])&&i.used&&(o["x"+i.n]=i.c2p(t.left));for(e=0;e<f.length;++e)(i=f[e])&&i.used&&(o["y"+i.n]=i.c2p(t.top));void 0!==o.x1&&(o.x=o.x1);void 0!==o.y1&&(o.y=o.y1);return o}function S(e,i){e[i-1]||(e[i-1]={n:i,direction:e==p?"x":"y",options:t.extend(!0,{},e==p?s.xaxis:s.yaxis)});return e[i-1]}function C(){I&&clearTimeout(I);h.unbind("mousemove",j);h.unbind("mouseleave",R);h.unbind("click",E);y(v.shutdown,[h])}function z(e){var i=e.labelWidth,o=e.labelHeight,n=e.options.position,a="x"===e.direction,r=e.options.tickLength,c=s.grid.axisMargin,h=s.grid.labelMargin,u=!0,d=!0,m=!0,x=!1;t.each(a?p:f,function(t,i){if(i&&(i.show||i.reserveSpace)){i===e?x=!0:i.options.position===n&&(x?d=!1:u=!1);x||(m=!1)}});d&&(c=0);null==r&&(r=m?"full":5);isNaN(+r)||(h+=+r);if(a){o+=h;if("bottom"==n){g.bottom+=o+c;e.box={top:l.height-g.bottom,height:o}}else{e.box={top:g.top+c,height:o};g.top+=o+c}}else{i+=h;if("left"==n){e.box={left:g.left+c,width:i};g.left+=i+c}else{g.right+=i+c;e.box={left:l.width-g.right,width:i}}}e.position=n;e.tickLength=r;e.box.padding=h;e.innermost=u}function A(){var i,o=T(),n=s.grid.show;for(var a in g){var c=s.grid.margin||0;g[a]="number"==typeof c?c:c[a]||0}y(v.processOffset,[g]);for(var a in g)"object"==typeof s.grid.borderWidth?g[a]+=n?s.grid.borderWidth[a]:0:g[a]+=n?s.grid.borderWidth:0;t.each(o,function(t,e){var i=e.options;e.show=null==i.show?e.used:i.show;e.reserveSpace=null==i.reserveSpace?e.show:i.reserveSpace;!function(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),o=+(null!=e.max?e.max:t.datamax),n=o-i;if(0==n){var a=0==o?1:.01;null==e.min&&(i-=a);null!=e.max&&null==e.min||(o+=a)}else{var r=e.autoscaleMargin;if(null!=r){null==e.min&&(i-=n*r)<0&&null!=t.datamin&&t.datamin>=0&&(i=0);null==e.max&&(o+=n*r)>0&&null!=t.datamax&&t.datamax<=0&&(o=0)}}t.min=i;t.max=o}(e)});if(n){var h=t.grep(o,function(t){return t.show||t.reserveSpace});t.each(h,function(e,i){!function(e){var i,o=e.options;i="number"==typeof o.ticks&&o.ticks>0?o.ticks:.3*Math.sqrt("x"==e.direction?l.width:l.height);var n=(e.max-e.min)/i,a=-Math.floor(Math.log(n)/Math.LN10),r=o.tickDecimals;null!=r&&a>r&&(a=r);var s,c=Math.pow(10,-a),h=n/c;if(h<1.5)s=1;else if(h<3){s=2;if(h>2.25&&(null==r||a+1<=r)){s=2.5;++a}}else s=h<7.5?5:10;s*=c;null!=o.minTickSize&&s<o.minTickSize&&(s=o.minTickSize);e.delta=n;e.tickDecimals=Math.max(0,null!=r?r:a);e.tickSize=o.tickSize||s;if("time"==o.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(!e.tickGenerator){e.tickGenerator=function(t){var e,i,o,n=[],a=(i=t.min,(o=t.tickSize)*Math.floor(i/o)),r=0,s=Number.NaN;do{e=s;s=a+r*t.tickSize;n.push(s);++r}while(s<t.max&&s!=e);return n};e.tickFormatter=function(t,e){var i=e.tickDecimals?Math.pow(10,e.tickDecimals):1,o=""+Math.round(t*i)/i;if(null!=e.tickDecimals){var n=o.indexOf("."),a=-1==n?0:o.length-n-1;if(a<e.tickDecimals)return(a?o:o+".")+(""+i).substr(1,e.tickDecimals-a)}return o}}t.isFunction(o.tickFormatter)&&(e.tickFormatter=function(t,e){return""+o.tickFormatter(t,e)});if(null!=o.alignTicksWithAxis){var u=("x"==e.direction?p:f)[o.alignTicksWithAxis-1];if(u&&u.used&&u!=e){var d=e.tickGenerator(e);if(d.length>0){null==o.min&&(e.min=Math.min(e.min,d[0]));null==o.max&&d.length>1&&(e.max=Math.max(e.max,d[d.length-1]))}e.tickGenerator=function(t){var e,i,o=[];for(i=0;i<u.ticks.length;++i){e=(u.ticks[i].v-u.min)/(u.max-u.min);e=t.min+e*(t.max-t.min);o.push(e)}return o};if(!e.mode&&null==o.tickDecimals){var g=Math.max(0,1-Math.floor(Math.log(e.delta)/Math.LN10)),m=e.tickGenerator(e);m.length>1&&/\..*0$/.test((m[1]-m[0]).toFixed(g))||(e.tickDecimals=g)}}}}(i);!function(e){var i,o,n=e.options.ticks,a=[];null==n||"number"==typeof n&&n>0?a=e.tickGenerator(e):n&&(a=t.isFunction(n)?n(e):n);e.ticks=[];for(i=0;i<a.length;++i){var r=null,s=a[i];if("object"==typeof s){o=+s[0];s.length>1&&(r=s[1])}else o=+s;null==r&&(r=e.tickFormatter(o,e));isNaN(o)||e.ticks.push({v:o,label:r})}}(i);!function(t,e){if(t.options.autoscaleMargin&&e.length>0){null==t.options.min&&(t.min=Math.min(t.min,e[0].v));null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v))}}(i,i.ticks);!function(t){for(var e=t.options,i=t.ticks||[],o=e.labelWidth||0,n=e.labelHeight||0,a=o||("x"==t.direction?Math.floor(l.width/(i.length||1)):null),r=t.direction+"Axis "+t.direction+t.n+"Axis",s="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+r,c=e.font||"flot-tick-label tickLabel",h=0;h<i.length;++h){var u=i[h];if(u.label){var d=l.getTextInfo(s,u.label,c,null,a);o=Math.max(o,d.width);n=Math.max(n,d.height)}}t.labelWidth=e.labelWidth||o;t.labelHeight=e.labelHeight||n}(i)});for(i=h.length-1;i>=0;--i)z(h[i]);!function(){var e,i=s.grid.minBorderMargin;if(null==i){i=0;for(e=0;e<r.length;++e)i=Math.max(i,2*(r[e].points.radius+r[e].points.lineWidth/2))}var o={left:i,right:i,top:i,bottom:i};t.each(T(),function(t,e){if(e.reserveSpace&&e.ticks&&e.ticks.length)if("x"===e.direction){o.left=Math.max(o.left,e.labelWidth/2);o.right=Math.max(o.right,e.labelWidth/2)}else{o.bottom=Math.max(o.bottom,e.labelHeight/2);o.top=Math.max(o.top,e.labelHeight/2)}});g.left=Math.ceil(Math.max(o.left,g.left));g.right=Math.ceil(Math.max(o.right,g.right));g.top=Math.ceil(Math.max(o.top,g.top));g.bottom=Math.ceil(Math.max(o.bottom,g.bottom))}();t.each(h,function(t,e){!function(t){if("x"==t.direction){t.box.left=g.left-t.labelWidth/2;t.box.width=l.width-g.left-g.right+t.labelWidth}else{t.box.top=g.top-t.labelHeight/2;t.box.height=l.height-g.bottom-g.top+t.labelHeight}}(e)})}m=l.width-g.left-g.right;x=l.height-g.bottom-g.top;t.each(o,function(t,e){!function(t){function e(t){return t}var i,o,n=t.options.transform||e,a=t.options.inverseTransform;if("x"==t.direction){i=t.scale=m/Math.abs(n(t.max)-n(t.min));o=Math.min(n(t.max),n(t.min))}else{i=-(i=t.scale=x/Math.abs(n(t.max)-n(t.min)));o=Math.max(n(t.max),n(t.min))}t.p2c=n==e?function(t){return(t-o)*i}:function(t){return(n(t)-o)*i};t.c2p=a?function(t){return a(o+t/i)}:function(t){return o+t/i}}(e)});n&&t.each(T(),function(t,e){var i,o,n,a,r,s=e.box,c=e.direction+"Axis "+e.direction+e.n+"Axis",h="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+c,u=e.options.font||"flot-tick-label tickLabel";l.removeText(h);if(e.show&&0!=e.ticks.length)for(var d=0;d<e.ticks.length;++d)if(!(!(i=e.ticks[d]).label||i.v<e.min||i.v>e.max)){if("x"==e.direction){a="center";o=g.left+e.p2c(i.v);if("bottom"==e.position)n=s.top+s.padding;else{n=s.top+s.height-s.padding;r="bottom"}}else{r="middle";n=g.top+e.p2c(i.v);if("left"==e.position){o=s.left+s.width-s.padding;a="right"}else o=s.left+s.padding}l.addText(h,o,n,i.label,u,null,null,a,r)}});!function(){null!=s.legend.container?t(s.legend.container).html(""):e.find(".legend").remove();if(!s.legend.show)return;for(var i,o,n=[],a=[],l=!1,c=s.legend.labelFormatter,h=0;h<r.length;++h)(i=r[h]).label&&(o=c?c(i.label,i):i.label)&&a.push({label:o,color:i.color});if(s.legend.sorted)if(t.isFunction(s.legend.sorted))a.sort(s.legend.sorted);else if("reverse"==s.legend.sorted)a.reverse();else{var u="descending"!=s.legend.sorted;a.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=u?1:-1})}for(var h=0;h<a.length;++h){var d=a[h];if(h%s.legend.noColumns==0){l&&n.push("</tr>");n.push("<tr>");l=!0}n.push('<td class="legendColorBox"><div style="border:1px solid '+s.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+d.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+d.label+"</td>")}l&&n.push("</tr>");if(0==n.length)return;var p='<table style="font-size:smaller;color:'+s.grid.color+'">'+n.join("")+"</table>";if(null!=s.legend.container)t(s.legend.container).html(p);else{var f="",m=s.legend.position,x=s.legend.margin;null==x[0]&&(x=[x,x]);"n"==m.charAt(0)?f+="top:"+(x[1]+g.top)+"px;":"s"==m.charAt(0)&&(f+="bottom:"+(x[1]+g.bottom)+"px;");"e"==m.charAt(1)?f+="right:"+(x[0]+g.right)+"px;":"w"==m.charAt(1)&&(f+="left:"+(x[0]+g.left)+"px;");var v=t('<div class="legend">'+p.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(e);if(0!=s.legend.backgroundOpacity){var b=s.legend.backgroundColor;if(null==b){(b=(b=s.grid.backgroundColor)&&"string"==typeof b?t.color.parse(b):t.color.extract(v,"background-color")).a=1;b=b.toString()}var y=v.children();t('<div style="position:absolute;width:'+y.width()+"px;height:"+y.height()+"px;"+f+"background-color:"+b+';"> </div>').prependTo(v).css("opacity",s.legend.backgroundOpacity)}}}()}function P(){l.clear();y(v.drawBackground,[u]);var t=s.grid;t.show&&t.backgroundColor&&function(){u.save();u.translate(g.left,g.top);u.fillStyle=$(s.grid.backgroundColor,x,0,"rgba(255, 255, 255, 0)");u.fillRect(0,0,m,x);u.restore()}();t.show&&!t.aboveData&&L();for(var e=0;e<r.length;++e){y(v.drawSeries,[u,r[e]]);W(r[e])}y(v.draw,[u]);t.show&&t.aboveData&&L();l.render();_()}function D(t,e){for(var i,o,n,a,r=T(),s=0;s<r.length;++s)if((i=r[s]).direction==e){t[a=e+i.n+"axis"]||1!=i.n||(a=e+"axis");if(t[a]){o=t[a].from;n=t[a].to;break}}if(!t[a]){i="x"==e?p[0]:f[0];o=t[e+"1"];n=t[e+"2"]}if(null!=o&&null!=n&&o>n){var l=o;o=n;n=l}return{from:o,to:n,axis:i}}function L(){var e,i,o,n;u.save();u.translate(g.left,g.top);var a=s.grid.markings;if(a){if(t.isFunction(a)){(i=b.getAxes()).xmin=i.xaxis.min;i.xmax=i.xaxis.max;i.ymin=i.yaxis.min;i.ymax=i.yaxis.max;a=a(i)}for(e=0;e<a.length;++e){var r=a[e],l=D(r,"x"),c=D(r,"y");null==l.from&&(l.from=l.axis.min);null==l.to&&(l.to=l.axis.max);null==c.from&&(c.from=c.axis.min);null==c.to&&(c.to=c.axis.max);if(!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min);l.to=Math.min(l.to,l.axis.max);c.from=Math.max(c.from,c.axis.min);c.to=Math.min(c.to,c.axis.max);var h=l.from===l.to,d=c.from===c.to;if(!h||!d){l.from=Math.floor(l.axis.p2c(l.from));l.to=Math.floor(l.axis.p2c(l.to));c.from=Math.floor(c.axis.p2c(c.from));c.to=Math.floor(c.axis.p2c(c.to));if(h||d){var p=r.lineWidth||s.grid.markingsLineWidth,f=p%2?.5:0;u.beginPath();u.strokeStyle=r.color||s.grid.markingsColor;u.lineWidth=p;if(h){u.moveTo(l.to+f,c.from);u.lineTo(l.to+f,c.to)}else{u.moveTo(l.from,c.to+f);u.lineTo(l.to,c.to+f)}u.stroke()}else{u.fillStyle=r.color||s.grid.markingsColor;u.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}}}}i=T();o=s.grid.borderWidth;for(var v=0;v<i.length;++v){var y,k,w,M,S=i[v],C=S.box,z=S.tickLength;if(S.show&&0!=S.ticks.length){u.lineWidth=1;if("x"==S.direction){y=0;k="full"==z?"top"==S.position?0:x:C.top-g.top+("top"==S.position?C.height:0)}else{k=0;y="full"==z?"left"==S.position?0:m:C.left-g.left+("left"==S.position?C.width:0)}if(!S.innermost){u.strokeStyle=S.options.color;u.beginPath();w=M=0;"x"==S.direction?w=m+1:M=x+1;1==u.lineWidth&&("x"==S.direction?k=Math.floor(k)+.5:y=Math.floor(y)+.5);u.moveTo(y,k);u.lineTo(y+w,k+M);u.stroke()}u.strokeStyle=S.options.tickColor;u.beginPath();for(e=0;e<S.ticks.length;++e){var A=S.ticks[e].v;w=M=0;if(!(isNaN(A)||A<S.min||A>S.max||"full"==z&&("object"==typeof o&&o[S.position]>0||o>0)&&(A==S.min||A==S.max))){if("x"==S.direction){y=S.p2c(A);M="full"==z?-x:z;"top"==S.position&&(M=-M)}else{k=S.p2c(A);w="full"==z?-m:z;"left"==S.position&&(w=-w)}1==u.lineWidth&&("x"==S.direction?y=Math.floor(y)+.5:k=Math.floor(k)+.5);u.moveTo(y,k);u.lineTo(y+w,k+M)}}u.stroke()}}if(o){n=s.grid.borderColor;if("object"==typeof o||"object"==typeof n){"object"!=typeof o&&(o={top:o,right:o,bottom:o,left:o});"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n});if(o.top>0){u.strokeStyle=n.top;u.lineWidth=o.top;u.beginPath();u.moveTo(0-o.left,0-o.top/2);u.lineTo(m,0-o.top/2);u.stroke()}if(o.right>0){u.strokeStyle=n.right;u.lineWidth=o.right;u.beginPath();u.moveTo(m+o.right/2,0-o.top);u.lineTo(m+o.right/2,x);u.stroke()}if(o.bottom>0){u.strokeStyle=n.bottom;u.lineWidth=o.bottom;u.beginPath();u.moveTo(m+o.right,x+o.bottom/2);u.lineTo(0,x+o.bottom/2);u.stroke()}if(o.left>0){u.strokeStyle=n.left;u.lineWidth=o.left;u.beginPath();u.moveTo(0-o.left/2,x+o.bottom);u.lineTo(0-o.left/2,0);u.stroke()}}else{u.lineWidth=o;u.strokeStyle=s.grid.borderColor;u.strokeRect(-o/2,-o/2,m+o,x+o)}}u.restore()}function W(t){t.lines.show&&function(t){function e(t,e,i,o,n){var a=t.points,r=t.pointsize,s=null,l=null;u.beginPath();for(var c=r;c<a.length;c+=r){var h=a[c-r],d=a[c-r+1],p=a[c],f=a[c+1];if(null!=h&&null!=p){if(d<=f&&d<n.min){if(f<n.min)continue;h=(n.min-d)/(f-d)*(p-h)+h;d=n.min}else if(f<=d&&f<n.min){if(d<n.min)continue;p=(n.min-d)/(f-d)*(p-h)+h;f=n.min}if(d>=f&&d>n.max){if(f>n.max)continue;h=(n.max-d)/(f-d)*(p-h)+h;d=n.max}else if(f>=d&&f>n.max){if(d>n.max)continue;p=(n.max-d)/(f-d)*(p-h)+h;f=n.max}if(h<=p&&h<o.min){if(p<o.min)continue;d=(o.min-h)/(p-h)*(f-d)+d;h=o.min}else if(p<=h&&p<o.min){if(h<o.min)continue;f=(o.min-h)/(p-h)*(f-d)+d;p=o.min}if(h>=p&&h>o.max){if(p>o.max)continue;d=(o.max-h)/(p-h)*(f-d)+d;h=o.max}else if(p>=h&&p>o.max){if(h>o.max)continue;f=(o.max-h)/(p-h)*(f-d)+d;p=o.max}h==s&&d==l||u.moveTo(o.p2c(h)+e,n.p2c(d)+i);s=p;l=f;u.lineTo(o.p2c(p)+e,n.p2c(f)+i)}}u.stroke()}u.save();u.translate(g.left,g.top);u.lineJoin="round";var i=t.lines.lineWidth,o=t.shadowSize;if(i>0&&o>0){u.lineWidth=o;u.strokeStyle="rgba(0,0,0,0.1)";var n=Math.PI/18;e(t.datapoints,Math.sin(n)*(i/2+o/2),Math.cos(n)*(i/2+o/2),t.xaxis,t.yaxis);u.lineWidth=o/2;e(t.datapoints,Math.sin(n)*(i/2+o/4),Math.cos(n)*(i/2+o/4),t.xaxis,t.yaxis)}u.lineWidth=i;u.strokeStyle=t.color;var a=O(t.lines,t.color,0,x);if(a){u.fillStyle=a;!function(t,e,i){var o=t.points,n=t.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,s=!1,l=1,c=0,h=0;for(;!(n>0&&r>o.length+n);){var d=o[(r+=n)-n],p=o[r-n+l],f=o[r],g=o[r+l];if(s){if(n>0&&null!=d&&null==f){h=r;n=-n;l=2;continue}if(n<0&&r==c+n){u.fill();s=!1;l=1;r=c=h+(n=-n);continue}}if(null!=d&&null!=f){if(d<=f&&d<e.min){if(f<e.min)continue;p=(e.min-d)/(f-d)*(g-p)+p;d=e.min}else if(f<=d&&f<e.min){if(d<e.min)continue;g=(e.min-d)/(f-d)*(g-p)+p;f=e.min}if(d>=f&&d>e.max){if(f>e.max)continue;p=(e.max-d)/(f-d)*(g-p)+p;d=e.max}else if(f>=d&&f>e.max){if(d>e.max)continue;g=(e.max-d)/(f-d)*(g-p)+p;f=e.max}if(!s){u.beginPath();u.moveTo(e.p2c(d),i.p2c(a));s=!0}if(p>=i.max&&g>=i.max){u.lineTo(e.p2c(d),i.p2c(i.max));u.lineTo(e.p2c(f),i.p2c(i.max))}else if(p<=i.min&&g<=i.min){u.lineTo(e.p2c(d),i.p2c(i.min));u.lineTo(e.p2c(f),i.p2c(i.min))}else{var m=d,x=f;if(p<=g&&p<i.min&&g>=i.min){d=(i.min-p)/(g-p)*(f-d)+d;p=i.min}else if(g<=p&&g<i.min&&p>=i.min){f=(i.min-p)/(g-p)*(f-d)+d;g=i.min}if(p>=g&&p>i.max&&g<=i.max){d=(i.max-p)/(g-p)*(f-d)+d;p=i.max}else if(g>=p&&g>i.max&&p<=i.max){f=(i.max-p)/(g-p)*(f-d)+d;g=i.max}d!=m&&u.lineTo(e.p2c(m),i.p2c(p));u.lineTo(e.p2c(d),i.p2c(p));u.lineTo(e.p2c(f),i.p2c(g));if(f!=x){u.lineTo(e.p2c(f),i.p2c(g));u.lineTo(e.p2c(x),i.p2c(g))}}}}}(t.datapoints,t.xaxis,t.yaxis)}i>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis);u.restore()}(t);t.bars.show&&function(t){u.save();u.translate(g.left,g.top);u.lineWidth=t.bars.lineWidth;u.strokeStyle=t.color;var e;switch(t.bars.align){case"left":e=0;break;case"right":e=-t.bars.barWidth;break;default:e=-t.bars.barWidth/2}var i=t.bars.fill?function(e,i){return O(t.bars,t.color,e,i)}:null;!function(e,i,o,n,a,r){for(var s=e.points,l=e.pointsize,c=0;c<s.length;c+=l)null!=s[c]&&F(s[c],s[c+1],s[c+2],i,o,n,a,r,u,t.bars.horizontal,t.bars.lineWidth)}(t.datapoints,e,e+t.bars.barWidth,i,t.xaxis,t.yaxis);u.restore()}(t);t.points.show&&function(t){function e(t,e,i,o,n,a,r,s){for(var l=t.points,c=t.pointsize,h=0;h<l.length;h+=c){var d=l[h],p=l[h+1];if(!(null==d||d<a.min||d>a.max||p<r.min||p>r.max)){u.beginPath();d=a.p2c(d);p=r.p2c(p)+o;"circle"==s?u.arc(d,p,e,0,n?Math.PI:2*Math.PI,!1):s(u,d,p,e,n);u.closePath();if(i){u.fillStyle=i;u.fill()}u.stroke()}}}u.save();u.translate(g.left,g.top);var i=t.points.lineWidth,o=t.shadowSize,n=t.points.radius,a=t.points.symbol;0==i&&(i=1e-4);if(i>0&&o>0){var r=o/2;u.lineWidth=r;u.strokeStyle="rgba(0,0,0,0.1)";e(t.datapoints,n,null,r+r/2,!0,t.xaxis,t.yaxis,a);u.strokeStyle="rgba(0,0,0,0.2)";e(t.datapoints,n,null,r/2,!0,t.xaxis,t.yaxis,a)}u.lineWidth=i;u.strokeStyle=t.color;e(t.datapoints,n,O(t.points,t.color),0,!1,t.xaxis,t.yaxis,a);u.restore()}(t)}function F(t,e,i,o,n,a,r,s,l,c,h){var u,d,p,f,g,m,x,v,b;if(c){v=m=x=!0;g=!1;f=e+o;p=e+n;if((d=t)<(u=i)){b=d;d=u;u=b;g=!0;m=!1}}else{g=m=x=!0;v=!1;u=t+o;d=t+n;if((f=e)<(p=i)){b=f;f=p;p=b;v=!0;x=!1}}if(!(d<r.min||u>r.max||f<s.min||p>s.max)){if(u<r.min){u=r.min;g=!1}if(d>r.max){d=r.max;m=!1}if(p<s.min){p=s.min;v=!1}if(f>s.max){f=s.max;x=!1}u=r.p2c(u);p=s.p2c(p);d=r.p2c(d);f=s.p2c(f);if(a){l.fillStyle=a(p,f);l.fillRect(u,f,d-u,p-f)}if(h>0&&(g||m||x||v)){l.beginPath();l.moveTo(u,p);g?l.lineTo(u,f):l.moveTo(u,f);x?l.lineTo(d,f):l.moveTo(d,f);m?l.lineTo(d,p):l.moveTo(d,p);v?l.lineTo(u,p):l.moveTo(u,p);l.stroke()}}}function O(e,i,o,n){var a=e.fill;if(!a)return null;if(e.fillColor)return $(e.fillColor,o,n,i);var r=t.color.parse(i);r.a="number"==typeof a?a:.4;r.normalize();return r.toString()}var q=[],I=null;function j(t){s.grid.hoverable&&H("plothover",t,function(t){return 0!=t.hoverable})}function R(t){s.grid.hoverable&&H("plothover",t,function(t){return!1})}function E(t){H("plotclick",t,function(t){return 0!=t.clickable})}function H(t,i,o){var n=h.offset(),a=i.pageX-n.left-g.left,l=i.pageY-n.top-g.top,c=M({left:a,top:l});c.pageX=i.pageX;c.pageY=i.pageY;var u=function(t,e,i){var o,n,a,l=s.grid.mouseActiveRadius,c=l*l+1,h=null;for(o=r.length-1;o>=0;--o)if(i(r[o])){var u=r[o],d=u.xaxis,p=u.yaxis,f=u.datapoints.points,g=d.c2p(t),m=p.c2p(e),x=l/d.scale,v=l/p.scale;a=u.datapoints.pointsize;d.options.inverseTransform&&(x=Number.MAX_VALUE);p.options.inverseTransform&&(v=Number.MAX_VALUE);if(u.lines.show||u.points.show)for(n=0;n<f.length;n+=a){var b=f[n],y=f[n+1];if(null!=b&&!(b-g>x||b-g<-x||y-m>v||y-m<-v)){var k=Math.abs(d.p2c(b)-t),w=Math.abs(p.p2c(y)-e),T=k*k+w*w;if(T<c){c=T;h=[o,n/a]}}}if(u.bars.show&&!h){var M,S;switch(u.bars.align){case"left":M=0;break;case"right":M=-u.bars.barWidth;break;default:M=-u.bars.barWidth/2}S=M+u.bars.barWidth;for(n=0;n<f.length;n+=a){b=f[n],y=f[n+1];var C=f[n+2];null!=b&&(r[o].bars.horizontal?g<=Math.max(C,b)&&g>=Math.min(C,b)&&m>=y+M&&m<=y+S:g>=b+M&&g<=b+S&&m>=Math.min(C,y)&&m<=Math.max(C,y))&&(h=[o,n/a])}}}if(h){o=h[0];n=h[1];a=r[o].datapoints.pointsize;return{datapoint:r[o].datapoints.points.slice(n*a,(n+1)*a),dataIndex:n,series:r[o],seriesIndex:o}}return null}(a,l,o);if(u){u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+n.left+g.left,10);u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+n.top+g.top,10)}if(s.grid.autoHighlight){for(var d=0;d<q.length;++d){var p=q[d];p.auto!=t||u&&p.series==u.series&&p.point[0]==u.datapoint[0]&&p.point[1]==u.datapoint[1]||X(p.series,p.point)}u&&Y(u.series,u.datapoint,t)}e.trigger(t,[c,u])}function _(){var t=s.interaction.redrawOverlayInterval;-1!=t?I||(I=setTimeout(N,t)):N()}function N(){I=null;d.save();c.clear();d.translate(g.left,g.top);var t,e;for(t=0;t<q.length;++t)(e=q[t]).series.bars.show?U(e.series,e.point):G(e.series,e.point);d.restore();y(v.drawOverlay,[d])}function Y(t,e,i){"number"==typeof t&&(t=r[t]);if("number"==typeof e){var o=t.datapoints.pointsize;e=t.datapoints.points.slice(o*e,o*(e+1))}var n=B(t,e);if(-1==n){q.push({series:t,point:e,auto:i});_()}else i||(q[n].auto=!1)}function X(t,e){if(null!=t||null!=e){"number"==typeof t&&(t=r[t]);if("number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var o=B(t,e);if(-1!=o){q.splice(o,1);_()}}else{q=[];_()}}function B(t,e){for(var i=0;i<q.length;++i){var o=q[i];if(o.series==t&&o.point[0]==e[0]&&o.point[1]==e[1])return i}return-1}function G(e,i){var o=i[0],n=i[1],a=e.xaxis,r=e.yaxis,s="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(o<a.min||o>a.max||n<r.min||n>r.max)){var l=e.points.radius+e.points.lineWidth/2;d.lineWidth=l;d.strokeStyle=s;var c=1.5*l;o=a.p2c(o);n=r.p2c(n);d.beginPath();"circle"==e.points.symbol?d.arc(o,n,c,0,2*Math.PI,!1):e.points.symbol(d,o,n,c,!1);d.closePath();d.stroke()}}function U(e,i){var o,n="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),a=n;switch(e.bars.align){case"left":o=0;break;case"right":o=-e.bars.barWidth;break;default:o=-e.bars.barWidth/2}d.lineWidth=e.bars.lineWidth;d.strokeStyle=n;F(i[0],i[1],i[2]||0,o,o+e.bars.barWidth,function(){return a},e.xaxis,e.yaxis,d,e.bars.horizontal,e.bars.lineWidth)}function $(e,i,o,n){if("string"==typeof e)return e;for(var a=u.createLinearGradient(0,o,0,i),r=0,s=e.colors.length;r<s;++r){var l=e.colors[r];if("string"!=typeof l){var c=t.color.parse(n);null!=l.brightness&&(c=c.scale("rgb",l.brightness));null!=l.opacity&&(c.a*=l.opacity);l=c.toString()}a.addColorStop(r/(s-1),l)}return a}}t.plot=function(e,i,n){return new o(t(e),i,n,t.plot.plugins)};t.plot.version="0.8.3";t.plot.plugins=[];t.fn.plot=function(e,i){return this.each(function(){t.plot(this,e,i)})}}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.min.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.touch.min.js")){!function(t){t.plot.plugins.push({init:function(e){function i(t){var i=e.getPlaceholder(),o=e.getOptions();if(f.x-=t.x,f.y-=t.y,o.touch.css)switch(o.touch.pan.toLowerCase()){case"x":i.css("transform","translateX("+f.x+"px)");break;case"y":i.css("transform","translateY("+f.y+"px)");break;default:i.css("transform","translate("+f.x+"px,"+f.y+"px)")}}function o(t){var i=e.getPlaceholder(),o=e.getOptions();if(g*=1+t/100,o.touch.css)switch(o.touch.scale.toLowerCase()){case"x":i.css("transform","scaleX("+g+")");break;case"y":i.css("transform","scaleY("+g+")");break;default:i.css("transform","scale("+g+")")}}function n(){return(new Date).getTime()}function a(){var t=e.getOptions();r(),"function"==typeof t.touch.callback?t.touch.callback():(e.setupGrid(),e.draw())}function r(){var i=e.getOptions();if((0!==f.x||0!==f.y)&&t.each(e.getAxes(),function(t,e){if(e.direction===i.touch.pan.toLowerCase()||"xy"==i.touch.pan.toLowerCase()){var o=e.c2p(e.p2c(e.touch.min)-f[e.direction]),n=e.c2p(e.p2c(e.touch.max)-f[e.direction]);e.options.min=o,e.options.max=n}}),1!==g){var o=e.width(),n=e.height(),a={x:Math.round(m.x/100*o),y:Math.round(m.y/100*n)},r={x:{min:a.x-m.x/100*o/g,max:a.x+(1-m.x/100)*o/g},y:{min:a.y-m.y/100*n/g,max:a.y+(1-m.y/100)*n/g}};t.each(e.getAxes(),function(t,e){if(e.direction===i.touch.scale.toLowerCase()||"xy"==i.touch.scale.toLowerCase()){var o=e.c2p(r[e.direction].min),n=e.c2p(r[e.direction].max);if(o>n){var a=o;o=n,n=a}e.options.min=o,e.options.max=n}})}}if(t.support.touch="ontouchend"in document,t.support.touch){var s,l,c=!1,h=!1,u={x:-1,y:-1},d=u,p=0,f={x:0,y:0},g=1,m={x:50,y:50},x=(new Date).getTime(),v=0;e.hooks.processOptions.push(function(e,i){var o=e.getPlaceholder();if((i=e.getOptions()).touch.autoWidth&&o.css("width","100%"),i.touch.autoHeight){var n=o.parent(),a=0;n.siblings().each(function(){a-=t(this).outerHeight()}),a-=parseInt(n.css("padding-top"),10),a-=parseInt(n.css("padding-bottom"),10),a+=window.innerHeight,o.css("height",0>=a?100:a+"px")}}),e.hooks.bindEvents.push(function(e,r){var b=e.getPlaceholder();e.getOptions().touch.css&&b.parent("div").css({overflow:"hidden"}),b.bind("touchstart",function(i){clearTimeout(s);var o=i.originalEvent.touches,a=e.getPlaceholder(),r=e.getOptions();t.each(e.getAxes(),function(t,e){(e.direction===r.touch.scale.toLowerCase()||"xy"==r.touch.scale.toLowerCase())&&(e.touch={min:e.min,max:e.max})}),l=n(),1===o.length?(c=!0,u={x:o[0].pageX,y:o[0].pageY},p=0,v++):2===o.length&&(h=!0,u={x:(o[0].pageX+o[1].pageX)/2,y:(o[0].pageY+o[1].pageY)/2},p=Math.sqrt(Math.pow(o[1].pageX-o[0].pageX,2)+Math.pow(o[1].pageY-o[0].pageY,2)));var f=a.offset(),g={x:f.left,y:f.top,width:a.width(),height:a.height()};return(d={x:u.x,y:u.y}).x<g.x?d.x=g.x:d.x>g.x+g.width&&(d.x=g.x+g.width),d.y<g.y?d.y=g.y:d.y>g.y+g.height&&(d.y=g.y+g.height),m={x:Math.round(d.x/g.width*100),y:Math.round(d.y/g.height*100)},r.touch.css&&a.css("transform-origin",m.x+"% "+m.y+"%"),a.trigger("touchstarted",[d]),!1}),b.bind("touchmove",function(t){var n,r,s=e.getOptions(),l=t.originalEvent.touches;if(c&&1===l.length?(n={x:l[0].pageX,y:l[0].pageY},i({x:u.x-n.x,y:u.y-n.y}),u=n,p=0):h&&2===l.length&&(r=Math.sqrt(Math.pow(l[1].pageX-l[0].pageX,2)+Math.pow(l[1].pageY-l[0].pageY,2)),n={x:(l[0].pageX+l[1].pageX)/2,y:(l[0].pageY+l[1].pageY)/2},o(r-p),u=n,p=r),!s.touch.css){var d=(new Date).getTime();d-x>50&&(x=d,window.requestAnimationFrame(a))}}),b.bind("touchend",function(i){var o=e.getPlaceholder(),a=e.getOptions(),r=i.originalEvent.changedTouches;if(setTimeout(function(){v=0},a.touch.dbltapThreshold),c&&1===r.length&&l+a.touch.tapThreshold-n()>=0&&d.x>=u.x-a.touch.tapPrecision&&d.x<=u.x+a.touch.tapPrecision&&d.y>=u.y-a.touch.tapPrecision&&d.y<=u.y+a.touch.tapPrecision){if(2===v?o.trigger("dbltap",[u]):o.trigger("tap",[u]),a.touch.simulClick){var x=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,detail:v,screenX:r[0].screenX,screenY:r[0].screenY,clientX:r[0].clientX,clientY:r[0].clientY,button:0});r[0].target.dispatchEvent(x)}}else{var b={};c1={x:0,y:0},c2={x:e.width(),y:e.height()},t.each(e.getAxes(),function(t,e){if(e.used){var i=e.c2p(c1[e.direction]),o=e.c2p(c2[e.direction]);b[t]={from:Math.min(i,o),to:Math.max(i,o)}}}),s=setTimeout(function(){o.trigger("touchended",[b])},a.touch.delayTouchEnded)}c=!1,h=!1,d=u={x:-1,y:-1},p=0,f={x:0,y:0},g=1,m={x:50,y:50},a.touch.css&&o.css({transform:"translate("+f.x+"px,"+f.y+"px) scale("+g+")","transform-origin":m.x+"% "+m.y+"%"})})}),e.hooks.shutdown.push(function(t,e){t.getPlaceholder().unbind("touchstart").unbind("touchmove").unbind("touchend")})}},options:{touch:{pan:"xy",scale:"xy",css:!1,autoWidth:!1,autoHeight:!1,delayTouchEnded:500,callback:null,simulClick:!0,tapThreshold:150,dbltapThreshold:200,tapPrecision:30}},name:"touch",version:"3.0"})}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.touch.min.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.canvas.min.js")){!function(t){var e,i,o,n=Object.prototype.hasOwnProperty;t.plot.plugins.push({init:function(a,r){var s=r.Canvas;null==e&&(i=s.prototype.getTextInfo,o=s.prototype.addText,e=s.prototype.render);s.prototype.render=function(){if(!a.getOptions().canvas)return e.call(this);var t=this.context,i=this._textCache;t.save();t.textBaseline="middle";for(var o in i)if(n.call(i,o)){var r=i[o];for(var s in r)if(n.call(r,s)){var l=r[s],c=!0;for(var h in l)if(n.call(l,h)){var u=l[h],d=u.positions,p=u.lines;if(c){t.fillStyle=u.font.color;t.font=u.font.definition;c=!1}for(var f,g=0;f=d[g];g++)if(f.active)for(var m,x=0;m=f.lines[x];x++)t.fillText(p[x].text,m[0],m[1]);else d.splice(g--,1);0==d.length&&delete l[h]}}}t.restore()};s.prototype.getTextInfo=function(e,o,n,r,s){if(!a.getOptions().canvas)return i.call(this,e,o,n,r,s);var l,c,h,u;o=""+o;l="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px "+n.family:n;null==(c=this._textCache[e])&&(c=this._textCache[e]={});null==(h=c[l])&&(h=c[l]={});if(null==(u=h[o])){var d=this.context;if("object"!=typeof n){var p=t("<div>&nbsp;</div>").css("position","absolute").addClass("string"==typeof n?n:null).appendTo(this.getTextLayer(e));(n={lineHeight:p.height(),style:p.css("font-style"),variant:p.css("font-variant"),weight:p.css("font-weight"),family:p.css("font-family"),color:p.css("color")}).size=p.css("line-height",1).height();p.remove()}l=n.style+" "+n.variant+" "+n.weight+" "+n.size+"px "+n.family;u=h[o]={width:0,height:0,positions:[],lines:[],font:{definition:l,color:n.color}};d.save();d.font=l;for(var f=(o+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n"),g=0;g<f.length;++g){var m=f[g],x=d.measureText(m);u.width=Math.max(x.width,u.width);u.height+=n.lineHeight;u.lines.push({text:m,width:x.width,height:n.lineHeight})}d.restore()}return u};s.prototype.addText=function(t,e,i,n,r,s,l,c,h){if(!a.getOptions().canvas)return o.call(this,t,e,i,n,r,s,l,c,h);var u,d=this.getTextInfo(t,n,r,s,l),p=d.positions,f=d.lines;i+=d.height/f.length/2;i="middle"==h?Math.round(i-d.height/2):"bottom"==h?Math.round(i-d.height):Math.round(i);window.opera&&window.opera.version().split(".")[0]<12&&(i-=2);for(var g,m=0;g=p[m];m++)if(g.x==e&&g.y==i){g.active=!0;return}g={active:!0,lines:[],x:e,y:i};p.push(g);for(m=0;u=f[m];m++){"center"==c?g.lines.push([Math.round(e-u.width/2),i]):"right"==c?g.lines.push([Math.round(e-u.width),i]):g.lines.push([Math.round(e),i]);i+=u.height}}},options:{canvas:!0},name:"canvas",version:"1.0"})}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.canvas.min.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.resize.min.js")){!function(t,e,i){"$:nomunge";var o,n=[],a=t.resize=t.extend(t.resize,{}),r=!1,s="setTimeout",l="resize",c=l+"-special-event",h="pendingDelay",u="activeDelay",d="throttleWindow";a[h]=200;a[u]=20;a[d]=!0;t.event.special[l]={setup:function(){if(!a[d]&&this[s])return!1;var e=t(this);n.push(this);e.data(c,{w:e.width(),h:e.height()});if(1===n.length){o=i;p()}},teardown:function(){if(!a[d]&&this[s])return!1;for(var e=t(this),i=n.length-1;i>=0;i--)if(n[i]==this){n.splice(i,1);break}e.removeData(c);if(!n.length){r?cancelAnimationFrame(o):clearTimeout(o);o=null}},add:function(e){if(!a[d]&&this[s])return!1;var o;function n(e,n,a){var r=t(this),s=r.data(c)||{};s.w=n!==i?n:r.width();s.h=a!==i?a:r.height();o.apply(this,arguments)}if(t.isFunction(e)){o=e;return n}o=e.handler;e.handler=n}};function p(i){!0===r&&(r=i||1);for(var s=n.length-1;s>=0;s--){var u=t(n[s]);if(u[0]==e||u.is(":visible")){var d=u.width(),f=u.height(),g=u.data(c);if(g&&(d!==g.w||f!==g.h)){u.trigger(l,[g.w=d,g.h=f]);r=i||!0}}else{(g=u.data(c)).w=0;g.h=0}}if(null!==o)if(r&&(null==i||i-r<1e3))o=e.requestAnimationFrame(p);else{o=setTimeout(p,a[h]);r=!1}}e.requestAnimationFrame||(e.requestAnimationFrame=e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,i){return e.setTimeout(function(){t((new Date).getTime())},a[u])});e.cancelAnimationFrame||(e.cancelAnimationFrame=e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout)}(jQuery,this);!function(t){jQuery.plot.plugins.push({init:function(t){function e(){var e=t.getPlaceholder();if(0!=e.width()&&0!=e.height()){t.resize();t.setupGrid();t.draw()}}t.hooks.bindEvents.push(function(t,i){t.getPlaceholder().resize(e)});t.hooks.shutdown.push(function(t,i){t.getPlaceholder().unbind("resize",e)})},options:{},name:"resize",version:"1.0"})}();cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.resize.min.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.time.min.js")){!function(t){function e(t,e){return e*Math.floor(t/e)}function i(t,e,i,o){if("function"==typeof t.strftime)return t.strftime(e);var n,a=function(t,e){t=""+t;e=""+(null==e?"0":e);return 1==t.length?e+t:t},r=[],s=!1,l=t.getHours(),c=l<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);null==o&&(o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);n=l>12?l-12:0==l?12:l;for(var h=0;h<e.length;++h){var u=e.charAt(h);if(s){switch(u){case"a":u=""+o[t.getDay()];break;case"b":u=""+i[t.getMonth()];break;case"d":u=a(t.getDate());break;case"e":u=a(t.getDate()," ");break;case"h":case"H":u=a(l);break;case"I":u=a(n);break;case"l":u=a(n," ");break;case"m":u=a(t.getMonth()+1);break;case"M":u=a(t.getMinutes());break;case"q":u=""+(Math.floor(t.getMonth()/3)+1);break;case"S":u=a(t.getSeconds());break;case"y":u=a(t.getFullYear()%100);break;case"Y":u=""+t.getFullYear();break;case"p":u=c?"am":"pm";break;case"P":u=c?"AM":"PM";break;case"w":u=""+t.getDay()}r.push(u);s=!1}else"%"==u?s=!0:r.push(u)}return r.join("")}function o(t){function e(t,e,i,o){t[e]=function(){return i[o].apply(i,arguments)}}var i={date:t};void 0!=t.strftime&&e(i,"strftime",t,"strftime");e(i,"getTime",t,"getTime");e(i,"setTime",t,"setTime");for(var o=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],n=0;n<o.length;n++){e(i,"get"+o[n],t,"getUTC"+o[n]);e(i,"set"+o[n],t,"setUTC"+o[n])}return i}function n(t,e){if("browser"==e.timezone)return new Date(t);if(e.timezone&&"utc"!=e.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var i=new timezoneJS.Date;i.setTimezone(e.timezone);i.setTime(t);return i}return o(new Date(t))}return o(new Date(t))}var a={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],s=r.concat([[3,"month"],[6,"month"],[1,"year"]]),l=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);t.plot.plugins.push({init:function(o){o.hooks.processOptions.push(function(o,r){t.each(o.getAxes(),function(t,o){var r=o.options;if("time"==r.mode){o.tickGenerator=function(t){var i=[],o=n(t.min,r),c=0,h=r.tickSize&&"quarter"===r.tickSize[1]||r.minTickSize&&"quarter"===r.minTickSize[1]?l:s;null!=r.minTickSize&&(c="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*a[r.minTickSize[1]]);for(var u=0;u<h.length-1&&!(t.delta<(h[u][0]*a[h[u][1]]+h[u+1][0]*a[h[u+1][1]])/2&&h[u][0]*a[h[u][1]]>=c);++u);var d=h[u][0],p=h[u][1];if("year"==p){if(null!=r.minTickSize&&"year"==r.minTickSize[1])d=Math.floor(r.minTickSize[0]);else{var f=Math.pow(10,Math.floor(Math.log(t.delta/a.year)/Math.LN10)),g=t.delta/a.year/f;d=g<1.5?1:g<3?2:g<7.5?5:10;d*=f}d<1&&(d=1)}t.tickSize=r.tickSize||[d,p];var m=t.tickSize[0];p=t.tickSize[1];var x=m*a[p];"second"==p?o.setSeconds(e(o.getSeconds(),m)):"minute"==p?o.setMinutes(e(o.getMinutes(),m)):"hour"==p?o.setHours(e(o.getHours(),m)):"month"==p?o.setMonth(e(o.getMonth(),m)):"quarter"==p?o.setMonth(3*e(o.getMonth()/3,m)):"year"==p&&o.setFullYear(e(o.getFullYear(),m));o.setMilliseconds(0);x>=a.minute&&o.setSeconds(0);x>=a.hour&&o.setMinutes(0);x>=a.day&&o.setHours(0);x>=4*a.day&&o.setDate(1);x>=2*a.month&&o.setMonth(e(o.getMonth(),3));x>=2*a.quarter&&o.setMonth(e(o.getMonth(),6));x>=a.year&&o.setMonth(0);var v,b=0,y=Number.NaN;do{v=y;y=o.getTime();i.push(y);if("month"==p||"quarter"==p)if(m<1){o.setDate(1);var k=o.getTime();o.setMonth(o.getMonth()+("quarter"==p?3:1));var w=o.getTime();o.setTime(y+b*a.hour+(w-k)*m);b=o.getHours();o.setHours(0)}else o.setMonth(o.getMonth()+m*("quarter"==p?3:1));else"year"==p?o.setFullYear(o.getFullYear()+m):o.setTime(y+x)}while(y<t.max&&y!=v);return i};o.tickFormatter=function(t,e){var o=n(t,e.options);if(null!=r.timeformat)return i(o,r.timeformat,r.monthNames,r.dayNames);var s=e.options.tickSize&&"quarter"==e.options.tickSize[1]||e.options.minTickSize&&"quarter"==e.options.minTickSize[1],l=e.tickSize[0]*a[e.tickSize[1]],c=e.max-e.min,h=r.twelveHourClock?" %p":"",u=r.twelveHourClock?"%I":"%H";return i(o,l<a.minute?u+":%M:%S"+h:l<a.day?c<2*a.day?u+":%M"+h:"%b %d "+u+":%M"+h:l<a.month?"%b %d":s&&l<a.quarter||!s&&l<a.year?c<a.year?"%b":"%b %Y":s&&l<a.year?c<a.year?"Q%q":"Q%q %Y":"%Y",r.monthNames,r.dayNames)}}})})},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"});t.plot.formatDate=i;t.plot.dateGenerator=n}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.time.min.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.axislabels.js")){!function(t){function e(){return!!document.createElement("canvas").getContext&&"function"==typeof document.createElement("canvas").getContext("2d").fillText}function i(){var t=document.createElement("div");return void 0!==t.style.MozTransition||void 0!==t.style.OTransition||void 0!==t.style.webkitTransition||void 0!==t.style.transition}function o(t,e,i,o,n){this.axisName=t;this.position=e;this.padding=i;this.plot=o;this.opts=n;this.width=0;this.height=0}o.prototype.cleanup=function(){};n.prototype=new o;n.prototype.constructor=n;function n(t,e,i,n,a){o.prototype.constructor.call(this,t,e,i,n,a)}n.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14);this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels,this.padding,this.opts.axisLabelFontSizePixels,this.padding;if("left"==this.position||"right"==this.position){this.width=this.opts.axisLabelFontSizePixels+this.padding;this.height=0}else{this.width=0;this.height=this.opts.axisLabelFontSizePixels+this.padding}};n.prototype.draw=function(t){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var e=this.plot.getCanvas().getContext("2d");e.save();e.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily;e.fillStyle=this.opts.axisLabelColour;var i,o,n=e.measureText(this.opts.axisLabel).width,a=this.opts.axisLabelFontSizePixels,r=0;if("top"==this.position){i=t.left+t.width/2-n/2;o=t.top+.72*a}else if("bottom"==this.position){i=t.left+t.width/2-n/2;o=t.top+t.height-.72*a}else if("left"==this.position){i=t.left+.72*a;o=t.height/2+t.top+n/2;r=-Math.PI/2}else if("right"==this.position){i=t.left+t.width-.72*a;o=t.height/2+t.top-n/2;r=Math.PI/2}e.translate(i,o);e.rotate(r);e.fillText(this.opts.axisLabel,0,0);e.restore()};a.prototype=new o;a.prototype.constructor=a;function a(t,e,i,n,a){o.prototype.constructor.call(this,t,e,i,n,a);this.elem=null}a.prototype.calculateSize=function(){var e=t('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(e);this.labelWidth=e.outerWidth(!0);this.labelHeight=e.outerHeight(!0);e.remove();this.width=this.height=0;"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding};a.prototype.cleanup=function(){this.elem&&this.elem.remove()};a.prototype.draw=function(e){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove();this.elem=t('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem);if("top"==this.position){this.elem.css("left",e.left+e.width/2-this.labelWidth/2+"px");this.elem.css("top",e.top+"px")}else if("bottom"==this.position){this.elem.css("left",e.left+e.width/2-this.labelWidth/2+"px");this.elem.css("top",e.top+e.height-this.labelHeight+"px")}else if("left"==this.position){this.elem.css("top",e.top+e.height/2-this.labelHeight/2+"px");this.elem.css("left",e.left+"px")}else if("right"==this.position){this.elem.css("top",e.top+e.height/2-this.labelHeight/2+"px");this.elem.css("left",e.left+e.width-this.labelWidth+"px")}};r.prototype=new a;r.prototype.constructor=r;function r(t,e,i,o,n){a.prototype.constructor.call(this,t,e,i,o,n)}r.prototype.calculateSize=function(){a.prototype.calculateSize.call(this);this.width=this.height=0;"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding};r.prototype.transforms=function(t,e,i){var o={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=e||0!=i){var n=" translate("+e+"px, "+i+"px)";o["-moz-transform"]+=n;o["-webkit-transform"]+=n;o["-o-transform"]+=n;o["-ms-transform"]+=n}if(0!=t){var a=" rotate("+t+"deg)";o["-moz-transform"]+=a;o["-webkit-transform"]+=a;o["-o-transform"]+=a;o["-ms-transform"]+=a}var r="top: 0; left: 0; ";for(var s in o)o[s]&&(r+=s+":"+o[s]+";");return r+=";"};r.prototype.calculateOffsets=function(t){var e={x:0,y:0,degrees:0};if("bottom"==this.position){e.x=t.left+t.width/2-this.labelWidth/2;e.y=t.top+t.height-this.labelHeight}else if("top"==this.position){e.x=t.left+t.width/2-this.labelWidth/2;e.y=t.top}else if("left"==this.position){e.degrees=-90;e.x=t.left-this.labelWidth/2+this.labelHeight/2;e.y=t.height/2+t.top}else if("right"==this.position){e.degrees=90;e.x=t.left+t.width-this.labelWidth/2-this.labelHeight/2;e.y=t.height/2+t.top}return e};r.prototype.draw=function(e){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var i=this.calculateOffsets(e);this.elem=t('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; color: '+this.opts.color+"; "+this.transforms(i.degrees,i.x,i.y)+'">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem)};s.prototype=new r;s.prototype.constructor=s;function s(t,e,i,o,n){r.prototype.constructor.call(this,t,e,i,o,n);this.requiresResize=!1}s.prototype.transforms=function(t,e,i){var o="";if(0!=t){for(var n=t/90;n<0;)n+=4;o+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+n+"); ";this.requiresResize="right"==this.position}0!=e&&(o+="left: "+e+"px; ");0!=i&&(o+="top: "+i+"px; ");return o};s.prototype.calculateOffsets=function(t){var e=r.prototype.calculateOffsets.call(this,t);if("top"==this.position)e.y=t.top+1;else if("left"==this.position){e.x=t.left;e.y=t.height/2+t.top-this.labelWidth/2}else if("right"==this.position){e.x=t.left+t.width-this.labelHeight;e.y=t.height/2+t.top-this.labelWidth/2}return e};s.prototype.draw=function(t){r.prototype.draw.call(this,t);if(this.requiresResize){this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label");this.elem.css("width",this.labelWidth);this.elem.css("height",this.labelHeight)}};t.plot.plugins.push({init:function(o){var l=!1,c={};o.hooks.draw.push(function(o,h){var u=!1;if(l){l=!1;t.each(o.getAxes(),function(t,e){var i=e.options||o.getOptions()[t];i&&i.axisLabel&&e.show&&c[t].draw(e.box)})}else{t.each(o.getAxes(),function(t,l){var h=l.options||o.getOptions()[t];if(t in c){l.labelHeight=l.labelHeight-c[t].height;l.labelWidth=l.labelWidth-c[t].width;h.labelHeight=l.labelHeight;h.labelWidth=l.labelWidth;c[t].cleanup();delete c[t]}if(h&&h.axisLabel&&l.show){u=!0;var d=null;if(h.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)d=h.axisLabelUseHtml||!i()&&!e()&&!h.axisLabelUseCanvas?a:h.axisLabelUseCanvas||!i()?n:r;else{var p=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(p)&&(rv=parseFloat(RegExp.$1));d=rv>=9&&!h.axisLabelUseCanvas&&!h.axisLabelUseHtml?r:h.axisLabelUseCanvas||h.axisLabelUseHtml?h.axisLabelUseCanvas?n:a:s}var f=void 0===h.axisLabelPadding?2:h.axisLabelPadding;c[t]=new d(t,l.position,f,o,h);c[t].calculateSize();h.labelHeight=l.labelHeight+c[t].height;h.labelWidth=l.labelWidth+c[t].width}});if(u){l=!0;o.setupGrid();o.draw()}}})},options:{},name:"axisLabels",version:"2.0"})}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.axislabels.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.tooltip.min.js")){!function(t){var e=function(t){this.tipPosition={x:0,y:0},this.init(t)};e.prototype.init=function(e){function i(t){var e={};e.x=t.pageX,e.y=t.pageY,n.updateTooltipPosition(e)}function o(t,e,i){var o=n.getDomElement();if(i){var a;a=n.stringFormat(n.tooltipOptions.content,i),o.html(a),n.updateTooltipPosition({x:e.pageX,y:e.pageY}),o.css({left:n.tipPosition.x+n.tooltipOptions.shifts.x,top:n.tipPosition.y+n.tooltipOptions.shifts.y}).show(),"function"==typeof n.tooltipOptions.onHover&&n.tooltipOptions.onHover(i,o)}else o.hide().html("")}var n=this;e.hooks.bindEvents.push(function(e,a){if(n.plotOptions=e.getOptions(),!1!==n.plotOptions.tooltip&&void 0!==n.plotOptions.tooltip){n.tooltipOptions=n.plotOptions.tooltipOpts;n.getDomElement();t(e.getPlaceholder()).bind("plothover",o),t(a).bind("mousemove",i)}}),e.hooks.shutdown.push(function(e,n){t(e.getPlaceholder()).unbind("plothover",o),t(n).unbind("mousemove",i)})},e.prototype.getDomElement=function(){var e;return t("#flotTip").length>0?e=t("#flotTip"):((e=t("<div />").attr("id","flotTip")).appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},e.prototype.updateTooltipPosition=function(e){var i=t("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,o=t("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;e.x-t(window).scrollLeft()>t(window).innerWidth()-i&&(e.x-=i),e.y-t(window).scrollTop()>t(window).innerHeight()-o&&(e.y-=o),this.tipPosition.x=e.x,this.tipPosition.y=e.y},e.prototype.stringFormat=function(t,e){var i,o,n=/%s/,a=/%x\.{0,1}(\d{0,})/,r=/%y\.{0,1}(\d{0,})/;i=e.datapoint[0],o=e.datapoint[1];if(null===e.series.label&&e.series.originSeries&&(e.series.label=e.series.originSeries.label),"function"==typeof t&&(t=t(e.series.label,i,o,e)),void 0!==e.series.percent&&(t=this.adjustValPrecision(/%p\.{0,1}(\d{0,})/,t,e.series.percent)),t=void 0!==e.series.label?t.replace(n,e.series.label):t.replace(n,""),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(a,this.timestampToDate(i,this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(r,this.timestampToDate(o,this.tooltipOptions.yDateFormat))),"number"==typeof i&&(t=this.adjustValPrecision(a,t,i)),"number"==typeof o&&(t=this.adjustValPrecision(r,t,o)),void 0!==e.series.xaxis.ticks&&e.series.xaxis.ticks.length>e.dataIndex&&!this.isTimeMode("xaxis",e)&&(t=t.replace(a,e.series.xaxis.ticks[e.dataIndex].label)),void 0!==e.series.yaxis.ticks)for(var s in e.series.yaxis.ticks)if(e.series.yaxis.ticks.hasOwnProperty(s)){(this.isCategoriesMode("yaxis",e)?e.series.yaxis.ticks[s].label:e.series.yaxis.ticks[s].v)===o&&(t=t.replace(r,e.series.yaxis.ticks[s].label))}return void 0!==e.series.xaxis.tickFormatter&&(t=t.replace("%x",e.series.xaxis.tickFormatter(i,e.series.xaxis).replace(/\$/g,"$$"))),void 0!==e.series.yaxis.tickFormatter&&(t=t.replace("%y",e.series.yaxis.tickFormatter(o,e.series.yaxis).replace(/\$/g,"$$"))),t},e.prototype.isTimeMode=function(t,e){return void 0!==e.series[t].options.mode&&"time"===e.series[t].options.mode},e.prototype.isXDateFormat=function(){return void 0!==this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},e.prototype.isYDateFormat=function(){return void 0!==this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},e.prototype.isCategoriesMode=function(t,e){return void 0!==e.series[t].options.mode&&"categories"===e.series[t].options.mode},e.prototype.timestampToDate=function(e,i){var o=new Date(1*e);return t.plot.formatDate(o,i,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},e.prototype.adjustValPrecision=function(t,e,i){var o;return null!==e.match(t)&&""!==RegExp.$1&&(o=RegExp.$1,i=i.toFixed(o),e=e.replace(t,i)),e};t.plot.plugins.push({init:function(t){new e(t)},options:{tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},name:"tooltip",version:"0.6.6"})}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.tooltip.min.js")}if(!cv.util.ScriptLoader.isMarkedAsLoaded("plugins/diagram/dep/flot/jquery.flot.navigate.min.js")){!function(t){function e(n){var c,h=this,u=n.data||{};if(u.elem)h=n.dragTarget=u.elem,n.dragProxy=l.proxy||h,n.cursorOffsetX=u.pageX-u.left,n.cursorOffsetY=u.pageY-u.top,n.offsetX=n.pageX-n.cursorOffsetX,n.offsetY=n.pageY-n.cursorOffsetY;else if(l.dragging||u.which>0&&n.which!=u.which||t(n.target).is(u.not))return;switch(n.type){case"mousedown":return t.extend(u,t(h).offset(),{elem:h,target:n.target,pageX:n.pageX,pageY:n.pageY}),r.add(document,"mousemove mouseup",e,u),a(h,!1),l.dragging=null,!1;case!l.dragging&&"mousemove":if(o(n.pageX-u.pageX)+o(n.pageY-u.pageY)<u.distance)break;n.target=u.target,!1!==(c=i(n,"dragstart",h))&&(l.dragging=h,l.proxy=n.dragProxy=t(c||h)[0]);case"mousemove":if(l.dragging){if(c=i(n,"drag",h),s.drop&&(s.drop.allowed=!1!==c,s.drop.handler(n)),!1!==c)break;n.type="mouseup"}case"mouseup":r.remove(document,"mousemove mouseup",e),l.dragging&&(s.drop&&s.drop.handler(n),i(n,"dragend",h)),a(h,!0),l.dragging=l.proxy=u.elem=!1}return!0}function i(e,i,o){e.type=i;var n=t.event.dispatch.call(o,e);return!1!==n&&(n||e.result)}function o(t){return Math.pow(t,2)}function n(){return!1===l.dragging}function a(t,e){t&&(t.unselectable=e?"off":"on",t.onselectstart=function(){return e},t.style&&(t.style.MozUserSelect=e?"":"none"))}t.fn.drag=function(t,e,i){return e&&this.bind("dragstart",t),i&&this.bind("dragend",i),t?this.bind("drag",e||t):this.trigger("drag")};var r=t.event,s=r.special,l=s.drag={not:":input",distance:0,which:1,dragging:!1,setup:function(i){(i=t.extend({distance:l.distance,which:l.which,not:l.not},i||{})).distance=o(i.distance),r.add(this,"mousedown",e,i),this.attachEvent&&this.attachEvent("ondragstart",n)},teardown:function(){r.remove(this,"mousedown",e),this===l.dragging&&(l.dragging=l.proxy=!1),a(this,!0),this.detachEvent&&this.detachEvent("ondragstart",n)}};s.dragstart=s.dragend={setup:function(){},teardown:function(){}}}(jQuery);!function(t){function e(e){var i=e||window.event,o=[].slice.call(arguments,1),n=0,a=0,r=0;(e=t.event.fix(i)).type="mousewheel";i.wheelDelta&&(n=i.wheelDelta/120);i.detail&&(n=-i.detail/3);r=n;void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(r=0,a=-1*n);void 0!==i.wheelDeltaY&&(r=i.wheelDeltaY/120);void 0!==i.wheelDeltaX&&(a=-1*i.wheelDeltaX/120);o.unshift(e,n,a,r);return(t.event.dispatch||t.event.handle).apply(this,o)}var i=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var o=i.length;o;)t.event.fixHooks[i[--o]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery);!function(t){t.plot.plugins.push({init:function(e){function i(t,i){var o=e.offset();o.left=t.pageX-o.left;o.top=t.pageY-o.top;i?e.zoomOut({center:o}):e.zoom({center:o})}function o(t,e){t.preventDefault();i(t,e<0);return!1}var n="default",a=0,r=0,s=null;function l(t){if(1!=t.which)return!1;var i=e.getPlaceholder().css("cursor");i&&(n=i);e.getPlaceholder().css("cursor",e.getOptions().pan.cursor);a=t.pageX;r=t.pageY}function c(t){var i=e.getOptions().pan.frameRate;!s&&i&&(s=setTimeout(function(){e.pan({left:a-t.pageX,top:r-t.pageY});a=t.pageX;r=t.pageY;s=null},1/i*1e3))}function h(t){if(s){clearTimeout(s);s=null}e.getPlaceholder().css("cursor",n);e.pan({left:a-t.pageX,top:r-t.pageY})}e.zoomOut=function(t){t||(t={});t.amount||(t.amount=e.getOptions().zoom.amount);t.amount=1/t.amount;e.zoom(t)};e.zoom=function(i){i||(i={});var o=i.center,n=i.amount||e.getOptions().zoom.amount,a=e.width(),r=e.height();o||(o={left:a/2,top:r/2});var s=o.left/a,l=o.top/r,c={x:{min:o.left-s*a/n,max:o.left+(1-s)*a/n},y:{min:o.top-l*r/n,max:o.top+(1-l)*r/n}};t.each(e.getAxes(),function(t,e){var i=e.options,o=c[e.direction].min,a=c[e.direction].max,r=i.zoomRange,s=i.panRange;if(!1!==r){if((o=e.c2p(o))>(a=e.c2p(a))){var l=o;o=a;a=l}if(s){null!=s[0]&&o<s[0]&&(o=s[0]);null!=s[1]&&a>s[1]&&(a=s[1])}var h=a-o;if(!r||!(null!=r[0]&&h<r[0]&&n>1||null!=r[1]&&h>r[1]&&n<1)){i.min=o;i.max=a}}});e.setupGrid();e.draw();i.preventEvent||e.getPlaceholder().trigger("plotzoom",[e,i])};e.pan=function(i){var o={x:+i.left,y:+i.top};isNaN(o.x)&&(o.x=0);isNaN(o.y)&&(o.y=0);t.each(e.getAxes(),function(t,e){var i,n,a=e.options,r=o[e.direction];i=e.c2p(e.p2c(e.min)+r),n=e.c2p(e.p2c(e.max)+r);var s=a.panRange;if(!1!==s){if(s){if(null!=s[0]&&s[0]>i){i+=r=s[0]-i;n+=r}if(null!=s[1]&&s[1]<n){i+=r=s[1]-n;n+=r}}a.min=i;a.max=n}});e.setupGrid();e.draw();i.preventEvent||e.getPlaceholder().trigger("plotpan",[e,i])};e.hooks.bindEvents.push(function(t,e){var n=t.getOptions();if(n.zoom.interactive){e[n.zoom.trigger](i);e.mousewheel(o)}if(n.pan.interactive){e.bind("dragstart",{distance:10},l);e.bind("drag",c);e.bind("dragend",h)}});e.hooks.shutdown.push(function(t,e){e.unbind(t.getOptions().zoom.trigger,i);e.unbind("mousewheel",o);e.unbind("dragstart",l);e.unbind("drag",c);e.unbind("dragend",h);s&&clearTimeout(s)})},options:{xaxis:{zoomRange:null,panRange:null},zoom:{interactive:!1,trigger:"dblclick",amount:1.5},pan:{interactive:!1,cursor:"move",frameRate:20}},name:"navigate",version:"1.3"})}(jQuery);cv.util.ScriptLoader.markAsLoaded("plugins/diagram/dep/flot/jquery.flot.navigate.min.js")}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.AbstractWidget":{construct:!0,require:!0},"cv.ui.common.Operate":{require:!0},"cv.ui.common.Refresh":{require:!0},"qx.util.Function":{construct:!0},"cv.parser.WidgetParser":{},"cv.data.Model":{},"cv.TemplateEngine":{},"qx.io.request.Xhr":{},"qx.event.Timer":{},"qx.dom.Element":{},"cv.ui.PopupHandler":{},"qx.event.Registration":{},"cv.util.ScriptLoader":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.plugins.diagram.AbstractDiagram",{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Operate,cv.ui.common.Refresh],type:"abstract",construct:function(t){cv.ui.structure.AbstractWidget.constructor.call(this,t);this._debouncedLoadDiagramData=qx.util.Function.debounce(this.loadDiagramData.bind(this),200)},statics:{cache:{},parse:function(t,e,i,o,n){n=n?Object.assign(n,this.getAttributeToPropertyMappings()):this.getAttributeToPropertyMappings();cv.parser.WidgetParser.parseElement(this,t,e,i,o,n);cv.parser.WidgetParser.parseRefresh(t,e);var a=t.getAttribute("legend")||"both";return cv.data.Model.getInstance().setWidgetData(e,{content:this.getDiagramElements(t),legendInline:["both","inline"].indexOf(a)>=0,legendPopup:["both","popup"].indexOf(a)>=0})},getAttributeToPropertyMappings:function(){return{series:{default:"day"},seriesStart:{default:"end-month"},seriesEnd:{default:"now"},seriesResolution:{default:300,transform:parseInt},period:{default:1,transform:parseInt},legendposition:{default:"ne"},timeformat:{},timeformatTooltip:{default:"%d.%m.%Y %H:%M"},zoomYAxis:{transform:function(t){return"true"===t}},title:{target:"title"},refresh:{},gridcolor:{default:"#81664B"},previewlabels:{transform:function(t){return"true"===t}},popup:{transform:function(t){return"true"===t}},tooltip:{transform:function(t){return"true"===t}}}},getDiagramElements:function(t){var e={axes:[],axesnum:0,ts:[],tsnum:0},i=[];t.querySelectorAll("axis").forEach(function(t){var o=t.getAttribute("unit")||"";e.axes[e.axesnum]={axisLabel:t.getAttribute("label")||null,position:t.getAttribute("position")||"left",min:t.getAttribute("min")||null,max:t.getAttribute("max")||null,unit:o,tickDecimals:t.getAttribute("decimals")||null,tickFormatter:function(t,e){return t.toFixed(e.tickDecimals)+o}};e.axesnum++;i[t.textContent]=e.axesnum},this);t.querySelectorAll("influx,rrd").forEach(function(t){var o="rrd"===t.tagName?t.textContent:t.getAttribute("measurement"),n="true"===(t.getAttribute("steps")||"false"),a=t.getAttribute("fillMissing");e.ts[e.tsnum]={tsType:t.tagName,src:o,color:t.getAttribute("color"),label:t.getAttribute("label")||o,axisIndex:i[t.getAttribute("yaxis")]||1,steps:n,fill:"true"===(t.getAttribute("fill")||"false"),scaling:parseFloat(t.getAttribute("scaling"))||1,cFunc:t.getAttribute("consolidationFunction")||("rrd"===t.tagName?"AVERAGE":"MEAN"),fillTs:null===a?n?"previous":"linear":a,resol:parseInt(t.getAttribute("resolution")),offset:parseInt(t.getAttribute("offset")),style:t.getAttribute("style")||"lines",align:t.getAttribute("align")||"center",barWidth:t.getAttribute("barWidth")||1};if("influx"===t.tagName){e.ts[e.tsnum].filter=this.getInfluxFilter(t,"AND");e.ts[e.tsnum].field=t.getAttribute("field");e.ts[e.tsnum].authentication=t.getAttribute("authentication")}else{var r=t.getAttribute("datasourceIndex")||0;r<0&&(r=0);e.ts[e.tsnum].dsIndex=r}e.tsnum++},this);return e},getInfluxFilter:function(t,e){for(var i=t.children,o=i.length,n="",a=0;a<o;a++){var r=i[a];""!=n&&(n+=" "+e+" ");switch(r.tagName){case"and":n+=this.getInfluxFilter(r,"AND");break;case"or":n+=this.getInfluxFilter(r,"OR");break;case"tag":n+=r.getAttribute("key")+" "+r.getAttribute("operator")+" '"+r.getAttribute("value")+"'"}}return e?"("+n+")":n},lookupTsCache:function(t,e,i,o,n,a,r,s){var l=("influx"===t.tsType?"resource/plugins/diagram/influxfetch.php?ts="+t.src:cv.TemplateEngine.getInstance().visu.getResourcePath("rrd")+"?rrd="+encodeURIComponent(t.src)+".rrd")+"&ds="+encodeURIComponent(t.cFunc)+"&start="+("rrd"===t.tsType?e:encodeURIComponent(e))+"&end="+("rrd"===t.tsType?i:encodeURIComponent(i))+"&res="+encodeURIComponent(o)+(t.fillTs?"&fill="+encodeURIComponent(t.fillTs):"")+(t.filter?"&filter="+encodeURIComponent(t.filter):"")+(t.field?"&field="+encodeURIComponent(t.field):"")+(t.authentication?"&auth="+encodeURIComponent(t.authentication):""),c=l+("rrd"===t.tsType?"|"+t.dsIndex:""),h=!(c in this.cache);if(a||h||!("data"in this.cache[c])||void 0!==n&&Date.now()-this.cache[c].timestamp>1e3*n){h&&(this.cache[c]={waitingCallbacks:[]});this.cache[c].waitingCallbacks.push([r,s]);if(1===this.cache[c].waitingCallbacks.length){this.cache[c].xhr&&this.cache[c].xhr.dispose();var u=new qx.io.request.Xhr(l),d=this;u.set({accept:"application/json"});u.addListener("success",function(e){d._onSuccess(t,c,e)},this);u.addListener("statusError",function(e){d._onStatusError(t,c,e)},this);this.cache[c].xhr=u;u.send()}}else r(this.cache[c].data,s)},_onSuccess:function(t,e,i){var o=i.getTarget().getResponse();if(null!==o){for(var n=t.offset?1e3*t.offset:0,a=new Array(o.length),r=0,s=o.length;r<s;r++)"rrd"===t.tsType?a[r]=[o[r][0]+n,parseFloat(o[r][1][t.dsIndex])*t.scaling]:a[r]=[o[r][0]+n,parseFloat(o[r][1])*t.scaling];o=a}this.cache[e].data=o;this.cache[e].timestamp=Date.now();this.cache[e].waitingCallbacks.forEach(function(t){t[0](o,t[1])},this);this.cache[e].waitingCallbacks.length=0},_onStatusError:function(t,e,i){console.log("_onStatusError",t,e,i);var o=[];this.cache[e].data=o;this.cache[e].timestamp=Date.now();this.cache[e].waitingCallbacks.forEach(function(t){t[0](o,t[1])},this);this.cache[e].waitingCallbacks.length=0}},properties:{content:{check:"Object",init:{}},title:{check:"String",nullable:!0,apply:"_applyTitle"},series:{check:["hour","day","week","month","year","fullday","custom"],init:"day"},seriesStart:{check:"String",init:"end-month"},seriesEnd:{check:"String",init:"now"},seriesResolution:{check:"Number",init:300},period:{check:"Number",init:1},legendInline:{check:"Boolean",init:!0},legendPopup:{check:"Boolean",init:!0},legendposition:{check:["nw","ne","sw","se"],init:"ne"},timeformat:{check:"String",nullable:!0},timeformatTooltip:{check:"String",init:"%d.%m.%Y %H:%M"},zoomYAxis:{check:"Boolean",init:!1},gridcolor:{check:"String",init:"#81664B"},previewlabels:{check:"Boolean",init:!1},popup:{check:"Boolean",init:!1},tooltip:{check:"Boolean",init:!1}},members:{_init:null,popupplot:null,plot:null,plotted:null,_timerPopup:null,__isPopup:!1,_applyTitle:function(t){t&&this.setLabel('<div class="label">'+t+"</div>")},_setupRefreshAction:function(){if(this.getRefresh()){if(!this._timer){this._timer=new qx.event.Timer(this.getRefresh());this._timer.addListener("interval",function(){this.loadDiagramData(this.plot,!1,!0)},this)}if(!this._timerPopup){this._timerPopup=new qx.event.Timer(this.getRefresh());this._timerPopup.addListener("interval",function(){this.loadDiagramData(this.popupplot,!1,!0)},this)}}},_stopRefresh:function(t){t&&t.isEnabled()&&t.stop()},_startRefresh:function(t,e){if(t){t.isEnabled()||t.start();!0===e&&t.fireEvent("interval")}},_action:function(){var t=qx.dom.Element.create("div",{class:"diagram",id:this.getPath()+"_big",style:"height: 90%"});this._init=!0;cv.ui.PopupHandler.showPopup("diagram",{title:this.getLabel(),content:t,page:this.getParentPage().getPath()}).addListener("close",function(){this._stopRefresh(this._timerPopup);qx.event.Registration.removeAllListeners(t);if(this.popupplot){this.popupplot.shutdown();this.popupplot=null}},this);var e=t.parentNode;Object.entries({height:"100%",width:"95%",margin:"auto"}).forEach(function(t){e.style[t[0]]=t[1]});t.innerHTML="";qx.event.Registration.addListener(t,"tap",function(t){t.stopPropagation()},this);this.initDiagram(!0);this._startRefresh(this._timerPopup,!0)},initDiagram:function(t){if(this._init){this._init=!1;t=t||this.__isPopup;var e={canvas:!0,tooltip:this.getTooltip(),tooltipOpts:{content:"<center>%x<br/>%y</center>",xDateFormat:this.getTimeformatTooltip(),shifts:{x:20,y:10},defaultTheme:!1},zoom:{interactive:t,trigger:"dblclick",amount:1.5},pan:{interactive:t,cursor:"move",frameRate:20,triggerOnDrag:!1},yaxes:JSON.parse(JSON.stringify(this.getContent().axes)),xaxes:[{mode:"time",timeformat:this.getTimeformat()}],legend:{show:t&&this.isLegendPopup()||!t&&this.isLegendInline(),backgroundColor:"#101010",position:this.getLegendposition()},grid:{show:!0,aboveData:!1,color:this.getGridcolor(),backgroundColor:"#000000",tickColor:this.getGridcolor(),markingsColor:this.getGridcolor(),borderColor:this.getGridcolor(),hoverable:!0},touch:{pan:t?"x":"none",scale:t?"x":"none",autoWidth:!1,autoHeight:!1,delayTouchEnded:500,callback:null,simulClick:!0,tapThreshold:150,dbltapThreshold:200,tapPrecision:30}};e.yaxes.forEach(function(t){Object.assign(t,{axisLabelColour:this.getGridcolor(),color:this.getGridcolor()})},this);e.xaxes.forEach(function(t){Object.assign(t,{axisLabelColour:this.getGridcolor(),color:this.getGridcolor()})},this);t&&Object.assign(e,{yaxis:{isPopup:!0,zoomRange:!!this.getZoomYAxis()&&[null,null]},xaxis:{zoomRange:[null,null],panRange:[null,null]}});if(this.getTooltip()){e.grid.hoverable=!0;e.grid.clickable=!0}if(!t&&!this.getPreviewlabels()){Object.assign(e,{xaxes:[{ticks:0,mode:e.xaxes[0].mode}]});0===e.yaxes.length&&(e.yaxes[0]={});e.yaxes.forEach(function(t){Object.assign(t,{ticks:0,axisLabel:null})},this)}var i=t?$("#"+this.getPath()+"_big"):$("#"+this.getPath()+" .actor div");i.empty();var o=$.plot(i,[],e);if(t){this.debug("popup plot generated");this.popupplot=o}else{this.debug("plot generated");this.plot=o}this.plotted=!0;var n=this;i.bind("plotpan",function(e,i){n._debouncedLoadDiagramData(i,t,!1)}).bind("plotzoom",function(){n.loadDiagramData(o,t,!1)}).bind("touchended",function(){n.loadDiagramData(o,t,!1)}).bind("tap",function(){var e=$(this).closest(".widget_container")[0];if(!t&&void 0!==e){var i=$(this).closest(".actor")[0],o=e.id;void 0!==i&&o.length>0&&n.action()}});t||o.getPlaceholder().unbind("touchstart").unbind("touchmove").unbind("touchend");this.loadDiagramData(o,t,!1)}},getSeriesSettings:function(t,e){var i={start:null,end:null,res:null};if("custom"===this.getSeries()){i.start=this.getSeriesStart();i.end=this.getSeriesEnd();i.res=this.getSeriesResolution()}else{var o={hour:{res:"60",start:"hour",end:"now"},day:{res:"300",start:"day",end:"now"},fullday:{res:"300",start:"day",end:"midnight+24hour"},week:{res:"1800",start:"week",end:"now"},month:{res:"21600",start:"month",end:"now"},year:{res:"432000",start:"year",end:"now"}}[this.getSeries()];if(!o)return;i.start="end-"+this.getPeriod()+o.start;i.end=o.end;i.res=o.res}t.datamin&&t.datamax&&e&&(i.start=(t.min/1e3).toFixed(0));return i},loadDiagramData:function(t,e,i){if(t){var o=this.getSeriesSettings(t.getAxes().xaxis,e);if(o){var n=[],a=0,r=0;this.getContent().ts.forEach(function(e,s){var l=e.resol?e.resol:o.res,c=this.getRefresh()?this.getRefresh():l;cv.plugins.diagram.AbstractDiagram.lookupTsCache(e,o.start,o.end,l,c,i,function(i){a++;if(null!==i){r++;n[s]={label:e.label,color:e.color,data:i,yaxis:parseInt(e.axisIndex),bars:{show:"bars"===e.style,fill:e.fill,barWidth:parseInt(e.barWidth),align:e.align},lines:{show:"lines"===e.style,steps:e.steps,fill:e.fill,zero:!1},points:{show:"points"===e.style,fill:e.fill}}}if(a===this.getContent().tsnum){var o;if(r===a)o=n;else{o=[];for(var l=-1,c=0;c<r;c++)for(var h=l+1;h<n.length;h++)if(null!==n[h]){o[c]=n[h];l=h;break}}t.setData(o);t.setupGrid();t.draw();n=[]}}.bind(this))},this)}}}},destruct:function(){this._timerPopup&&this._disposeObjects("_timerPopup")},defer:function(){cv.util.ScriptLoader.getInstance().addScripts(["plugins/diagram/dep/flot/jquery.flot.min.js","plugins/diagram/dep/flot/jquery.flot.touch.min.js","plugins/diagram/dep/flot/jquery.flot.canvas.min.js","plugins/diagram/dep/flot/jquery.flot.resize.min.js","plugins/diagram/dep/flot/jquery.flot.time.min.js","plugins/diagram/dep/flot/jquery.flot.axislabels.js","plugins/diagram/dep/flot/jquery.flot.tooltip.min.js","plugins/diagram/dep/flot/jquery.flot.navigate.min.js"],[0])}});cv.plugins.diagram.AbstractDiagram.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.plugins.diagram.AbstractDiagram":{construct:!0,require:!0},"qx.event.message.Bus":{},"qx.util.DeferredCall":{},"cv.parser.WidgetParser":{defer:"runtime"},"cv.ui.structure.WidgetFactory":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.plugins.diagram.Diagram",{extend:cv.plugins.diagram.AbstractDiagram,construct:function(t){this._init=!0;cv.plugins.diagram.AbstractDiagram.constructor.call(this,t)},properties:{width:{check:"String",nullable:!0},height:{check:"String",nullable:!0}},statics:{parse:function(t,e,i,o){return cv.plugins.diagram.AbstractDiagram.parse(t,e,i,o,this.getAttributeToPropertyMappings())},getAttributeToPropertyMappings:function(){return{width:{transform:function(t){return t?parseInt(t)+"px":null}},height:{transform:function(t){return t?parseInt(t)+"px":null}}}}},members:{__vlid1:null,_onDomReady:function(){if(!this.$$domReady){var t=this.getParentPage().getPath(),e=qx.event.message.Bus;this.setRestartOnVisible(!0);e.subscribe("path."+t+".beforePageChange",function(){this._init||this.loadDiagramData(this.plot,!1,!1)},this);e.subscribe("page."+t+".appear",function(){this._init&&this.initDiagram(!1)},this);this.isVisible()?new qx.util.DeferredCall(function(){this._init?this.initDiagram(!1):this.loadDiagramData(this.plot,!1,!1)},this).schedule():this.__vlid1=this.addListener("changeVisible",function(t){if(t.getData()){this._init?this.initDiagram(!1):this.loadDiagramData(this.plot,!1,!1);this.removeListenerById(this.__vlid1);this.__vlid1=null}},this);this.$$domReady=!0;this.initListeners()}},_getInnerDomString:function(){return'<div class="actor clickable" style="height: 100%; min-height: 40px;"><div class="'+(this.getPreviewlabels()?"diagram_inline":"diagram_preview")+'" style="'+("min-height: 40px"+(this.getWidth()?";width:"+this.getWidth():"")+(this.getHeight()?";height:"+this.getHeight():";height: 100%"))+'">loading...</div></div>'}},defer:function(t){cv.parser.WidgetParser.addHandler("diagram",t);cv.ui.structure.WidgetFactory.registerClass("diagram",t)}});cv.plugins.diagram.Diagram.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.plugins.diagram.AbstractDiagram":{construct:!0,require:!0},"cv.ui.common.Update":{require:!0},"cv.parser.WidgetParser":{defer:"runtime"},"cv.ui.structure.WidgetFactory":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.plugins.diagram.Info",{extend:cv.plugins.diagram.AbstractDiagram,include:[cv.ui.common.Update],construct:function(t){this._init=!1;cv.plugins.diagram.AbstractDiagram.constructor.call(this,t)},statics:{parse:function(t,e,i,o){var n=cv.plugins.diagram.AbstractDiagram.parse(t,e,i,o);cv.parser.WidgetParser.parseAddress(t,e);cv.parser.WidgetParser.parseFormat(t,e);return n}},members:{_getInnerDomString:function(){return'<div class="actor clickable switchUnpressed"><div class="value">-</div></div>'},_update:function(t,e){if(void 0!==t&&void 0!==e)return this.defaultUpdate(t,e,this.getDomElement(),!0,this.getPath())}},defer:function(t){cv.parser.WidgetParser.addHandler("diagram_info",t);cv.ui.structure.WidgetFactory.registerClass("diagram_info",t)}});cv.plugins.diagram.Info.$$dbClassInfo=t}();
//# sourceMappingURL=part-3.js.map