qx.$$packageData['8192']={"locales":{},"resources":{"plugins/rsslog/rsslog.css":"cv"},"translations":{"C":{},"de":{},"en":{}}};
qx.Part.$$notifyLoad("8192", function() {
(function(){var a="application/json",b=';',d="div",e="_applyModel",f='rsslogodd',g=' .label',h="rsslog",j="ID: ",k='.mappedValue',l='&nbsp;',m='</a></b><br/>',n='rsslog_futureodd',o=".beforePageChange",p='</b><br/>',q='_big',r="ul",s="last_rowcount",t=', ',u='#',v="model",w="Number",x='<b><a href="',y=', processing item: ',z="close",A="tap",B="id",C="rsslog_ack",D='display',E="path.",F="auto",G="width:",H='rsslog_futureeven',I="itemoffset",J='<b>',K='_big"/>',L="modify",M="success",N="html",O="disable",P=' of ',Q="_applySrc",R='rollover',S='">',T='#rss_',U='"></div></div>',V='" style="',W="overflow",X='rsslog_prevday',Y='id',cd="normalizeUrl",ce="display",cf=", Feed: ",bY="Boolean",ca="GET",cb="error",cc="change",ck="no src given, aborting RSS-Log refresh",cl="height:",cm='#dummydiv',cn="90%",cg=' element(s) found, ',ch='.label',ci="SELECT * FROM rss WHERE url='",cj='popup',cr='%d',cS="1",cT='plugins/rsslog/rsslog.css',cs='C: #rss_%s, Error: %s, Feed: %s',co=' displayrow(s) available',cp='rsslog_separator',cU='<div class="rsslog_popup" id="rss_',cq='boolean',ct='{date}: ',cu='mapping',cw="qx.data.Array",cB="true",cV='',cC='rsslogeven',cx='<li class="rsslogRow odd" id="dummydiv">.</li>',cy='li',cz='first',cA="'",cH='cv.plugins.RssLog',cI="interval",cW='rsslogRow ',cJ="String",cD="big",cE="",cF='span',cG='.main',cO=' ',cP='<span class="mappedValue"></span><span>{text}</span>',cX="?",cQ='modify',cK='disable',cL='C: #',cM='<div class="actor rsslogBody"><div class="rsslog_inline" id="rss_',cN="undefined",cR="last";qx.Class.define(cH,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Refresh,cv.ui.common.Update,cv.ui.common.Operate],properties:{src:{check:cJ,nullable:true,transform:cd,apply:Q},filter:{check:cJ,nullable:true},datetime:{check:bY,init:true},mode:{check:cJ,init:cR},limit:{check:w,init:0},timeformat:{check:cJ,nullable:true},itemoffset:{check:w,init:0},itemack:{check:[L,ce,O],init:L},future:{check:cJ,nullable:true},width:{check:cJ,nullable:true},height:{check:cJ,nullable:true},model:{check:cw,nullable:true,apply:e}},statics:{parse:function(cY,dd,db,da){var dc=cv.parser.WidgetParser.parseElement(this,cY,dd,db,da,this.getAttributeToPropertyMappings());cv.parser.WidgetParser.parseFormat(cY,dd);cv.parser.WidgetParser.parseAddress(cY,dd);cv.parser.WidgetParser.parseRefresh(cY,dd);return dc;},getAttributeToPropertyMappings:function(){return {src:{},width:{},height:{},filter:{},datetime:{"default":true,transform:function(de){if(typeof de===cq){return de;};return de===cB;}},mode:{"default":cR},limit:{"default":0,transform:parseFloat},timeformat:{},itemack:{"default":L},future:{},query:{}};}},members:{__fg:null,__ui:null,__om:null,__uj:null,__nE:false,__uk:null,__ul:null,__um:null,__un:null,normalizeUrl:function(dg){this.__uj={};if(dg&&dg.indexOf(cX)>0){var df=qx.util.Uri.parseUri(dg);dg=dg.substring(0,dg.indexOf(cX));this.__uj=df.queryKey;};return dg;},_applySrc:function(dh){this.__nE=!dh.match(/rsslog\.php/)&&!dh.match(/rsslog_mysql\.php/)&&!dh.match(/rsslog_oh\.php/);},_getInnerDomString:function(){var di=cV;if(this.getWidth()){di+=G+this.getWidth()+b;};if(this.getHeight()){di+=cl+this.getHeight();};return cM+this.getPath()+V+di+U;},_setupRefreshAction:function(){this._timer=new qx.event.Timer(this.getRefresh());this._timer.addListener(cI,function(){this.refreshRSSlog();},this);this._timer.start();},_onDomReady:function(){if(!this.$$domReady){cv.ui.structure.AbstractWidget.prototype._onDomReady.call(this);qx.event.message.Bus.subscribe(E+this.getParentPage().getPath()+o,this.refreshRSSlog,this);this.__ui=cP;if(this.getDatetime()){this.__ui=ct+this.__ui;};this.__om=cy;if(cv.Config.currentPageId===this.getParentPage().getPath()){this.refreshRSSlog();};};},_update:function(){this.refreshRSSlog();},_action:function(){var dj=qx.bom.Html.clean([cU+this.getPath()+K])[0];var dl=qx.dom.Node.getText(qx.bom.Selector.query(u+this.getPath()+g)[0])||cV;var dk=cv.ui.PopupHandler.showPopup(h,{title:dl,content:dj});var parent=cv.util.Tree.getParent(dj,d,null,1)[0];qx.bom.element.Style.setStyles(parent,{height:cn,width:cn,margin:F});if(this._timer){this._timer.stop();};qx.event.Registration.addListener(dj,A,function(event){event.stopPropagation();},this);qx.event.Registration.addListener(dk,z,function(){if(dk.getCurrentDomElement()&&qx.bom.element.Class.has(dk.getCurrentDomElement(),cj)&&this.getItemack()===cQ){qx.event.Timer.once(function(){this.refreshRSSlog();},this,100);for(var dm in this.getAddress()){if(!cv.data.Model.isWriteAddress(this.getAddress()[dm])){continue;};cv.TemplateEngine.getInstance().visu.write(dm,cv.Transform.encode(this.getAddress()[dm][0],0));};};},this);qx.bom.element.Style.set(qx.bom.Selector.query(cG,dk.getCurrentDomElement())[0],W,F);this.refreshRSSlog(true);},refreshRSSlog:function(dq){var dn=this.getSrc();if(!dn){this.error(ck);return;};if(!this.__fg){if(!this.__nE){this.__uo();}else {this.__up();};};this.__fg.setUserData(cD,dq);if(this.__fg instanceof qx.io.request.Xhr){this.__fg.send();}else if(this.__fg instanceof qx.data.store.Yql){this.__fg.reload();};var dp=this.getRefresh();if(typeof (dp)!==cN&&dp){if(this._timer&&this._timer.isEnabled()){this._timer.start();};};},__uo:function(){var ds=this.getSrc();var dr=qx.lang.Object.clone(this.__uj);if(this.getFilter()){dr.f=this.getFilter();};if(this.getLimit()){dr.limit=this.getLimit();};if(this.getFuture()){dr.future=this.getFuture();};dr.j=1;this.__fg=new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(ds));this.__fg.set({accept:a,requestData:dr,method:ca});this.__fg.addListener(M,this.__ur,this);this.__fg.addListener(cb,function(dt){this.error(cs,this.getPath(),dt.getTarget().getResponse(),ds);},this);},__up:function(){if(!this.__fg){this.__fg=new qx.data.store.Yql(ci+this.getSrc()+cA,{manipulateData:function(du){if(du.query.results){return du.query.results.item||du.query.results.entry;}else {return [];};}});this.__fg.bind(v,this,v);};},_applyModel:function(dw,dv){if(dv){dv.removeListener(cc,this.__us,this);};if(dw){this.__us();dw.addListener(cc,this.__us,this);};},__uq:function(dA,c){qx.dom.Element.empty(c);qx.dom.Element.insertEnd(dA,c);var dx=parseInt(qx.bom.element.Dataset.get(c,s),10)||0;qx.bom.Html.clean([cx],null,c);var dz=qx.bom.Selector.query(cm,c)[0];var dD=qx.bom.element.Dimension.getHeight(dz);qx.dom.Element.remove(dz);if(dD!==0){var dy=qx.dom.Element.getParentElement(qx.dom.Element.getParentElement(c));var dC=qx.bom.element.Dimension.getHeight(dy);var dB=qx.bom.Selector.query(ch,dy)[0];if(dB){dC-=qx.bom.element.Dimension.getHeight(dB);};dx=Math.floor(dC/dD);};qx.bom.element.Dataset.set(c,s,dx);return dx;},__ur:function(dE){var dF=dE.getTarget().getResponse();if(qx.lang.Type.isString(dF)){this.error(dF);return;};this.__ut(dF.responseData.feed.entries);},__us:function(){this.__ut(this.getModel().toArray());},__ut:function(dL){var dR=this.__fg.getUserData(cD);var dO=T+this.getPath()+(dR===true?q:cV);var c=qx.bom.Selector.query(dO)[0];var dN=dR===true?this.getItemack():(cQ===this.getItemack()?D:this.getItemack());this.debug(j+qx.bom.element.Attribute.get(c,B)+cf+this.getSrc());var dK=qx.dom.Element.create(r);var dM=this.__uq(dK,c);var dS=dL.length;this.debug(cL+this.getPath()+t+dS+cg+dM+co);var dQ=0;if(dS>dM){if(this.getMode()===cz){dQ=dS-dM;};if(this.getMode()===R){dQ=parseInt(qx.bom.element.Dataset.get(c,I),10)||0;if(dQ===dS){dQ=0;};qx.bom.element.Dataset.set(c,I,dQ+1);};};var dW=f;var dT=dQ+dM;dT=(dT>dS)?dS:dT;this.__uk=new Date().strftime(cr);this.__ul=false;this.__un=false;this.__um=false;for(var i=dQ;i<dT;i++ ){this.debug(cL+this.getPath()+y+i+P+dS);var dJ=i;dJ=(i>=dS)?(dJ=dJ-dS):dJ;var dP=dL[dJ];var dV=this.__uu(dP,dR);var dH=qx.dom.Element.create(cy,{'class':cW+dW});qx.bom.element.Attribute.set(dH,N,dV);if(dP.mapping&&dP.mapping!==cV){var dU=this.applyMapping(dN===cK?0:dP.state,dP.mapping);var dI=qx.bom.Selector.query(k,dH)[0];this.defaultValue2DOM(dU,qx.lang.Function.curry(this._applyValueToDom,dI));};if(this.__ul&&dJ!==0){qx.bom.element.Class.add(dH,cp);this.__un=true;}else {this.__un=false;};if(this.__un===true){qx.bom.element.Class.add(dH,X);};if(this.__um){qx.bom.element.Class.add(dH,(dW===f)?H:n);};qx.bom.element.Dataset.set(dH,Y,dP.id);qx.bom.element.Dataset.set(dH,cu,dP.mapping);if(dP.tags){var dG=qx.bom.Selector.query(cF,dH)[0];if(qx.lang.Type.isArray(dP.tags)){dP.tags.forEach(qx.lang.Function.curry(qx.bom.element.Class.add,dG),this);}else {qx.bom.element.Class.add(dG,dP.tags);};};if(dP.state===cS&&dN!==cK){qx.bom.element.Class.add(dH,C);};if(dN===cQ){qx.event.Registration.addListener(dH,A,this._onTap,this);};qx.dom.Element.insertEnd(dH,dK);dW=(dW===f)?cC:f;};},__uu:function(dX,ec){var eb=cE;if(!this.__nE){eb=this.__ui;eb=eb.replace(/\{text\}/,dX.content);var dY=new Date(dX.publishedDate);if(dY){eb=(this.getTimeformat())?(eb.replace(/\{date\}/,dY.strftime(this.getTimeformat())+l)):(eb.replace(/\{date\}/,dY.toLocaleDateString()+cO+dY.toLocaleTimeString()+l));var ea=dY.strftime(cr);this.__ul=((this.__uk>0)&&(this.__uk!==ea));this.__uk=ea;this.__um=(dY>new Date());}else {eb=eb.replace(/\{date\}/,cV);};}else {if(ec){return x+dX.getLink()+S+dX.getTitle()+m+dX.getDescription();}else {return J+dX.getTitle()+p+dX.getDescription();};};return eb;},_onTap:function(ed){var eh=ed.getCurrentTarget();var ek=qx.bom.element.Dataset.get(eh,Y);var eg=qx.bom.element.Dataset.get(eh,cu);qx.bom.element.Class.toggle(eh,C);var ei=+qx.bom.element.Class.has(eh,C);if(eg&&eg!==cV){var ej=this.applyMapping(ei,eg);var ee=qx.bom.Selector.query(k,eh)[0];qx.dom.Element.empty(ee);this.defaultValue2DOM(ej,qx.lang.Function.curry(this._applyValueToDom,ee));};var ef=new qx.io.request.Xhr(this.__fg.getUrl());ef.set({method:ca,requestData:qx.lang.Object.mergeWith(qx.lang.Object.clone(this.__uj),{'u':ek,'state':ei}),accept:a});ef.send();}},defer:function(el){var em=cv.util.ScriptLoader.getInstance();em.addStyles(cT);cv.parser.WidgetParser.addHandler(h,cv.plugins.RssLog);cv.ui.structure.WidgetFactory.registerClass(h,el);}});})();(function(){var a="callback",b="changePhase",c="fail",d="success",e="qx.data.store.Jsonp",f="String";qx.Class.define(e,{extend:qx.data.store.Json,construct:function(g,h,i){if(i!=undefined){this.setCallbackParam(i);};qx.data.store.Json.call(this,g,h);},properties:{callbackParam:{check:f,init:a,nullable:true},callbackName:{check:f,nullable:true}},members:{_createRequest:function(j){if(this._getRequest()){this._getRequest().dispose();};var k=new qx.io.request.Jsonp();this._setRequest(k);k.setCallbackParam(this.getCallbackParam());k.setCallbackName(this.getCallbackName());k.setUrl(j);k.addListener(d,this._onSuccess,this);var l=this._delegate;if(l&&qx.lang.Type.isFunction(l.configureRequest)){this._delegate.configureRequest(k);};k.addListener(b,this._onChangePhase,this);k.addListener(c,this._onFail,this);k.send();}}});})();(function(){var a="qx.io.request.Jsonp",b="qx.event.type.Event",c="Boolean";qx.Class.define(a,{extend:qx.io.request.AbstractRequest,events:{"success":b,"load":b,"statusError":b},properties:{cache:{check:c,init:true}},members:{_createTransport:function(){return new qx.bom.request.Jsonp();},_getConfiguredUrl:function(){var d=this.getUrl(),e;if(this.getRequestData()){e=this._serializeData(this.getRequestData());d=qx.util.Uri.appendParamsToUrl(d,e);};if(!this.getCache()){d=qx.util.Uri.appendParamsToUrl(d,{nocache:new Date().valueOf()});};return d;},_getParsedResponse:function(){return this._transport.responseJson;},setCallbackParam:function(f){this._transport.setCallbackParam(f);},setCallbackName:function(name){this._transport.setCallbackName(name);}}});})();(function(){var a="qx.bom.request.Jsonp",b="callback",c="open",d="dispose",e="",f="_onNativeLoad",g="qx",h=".callback",i="qx.bom.request.Jsonp.";qx.Bootstrap.define(a,{extend:qx.bom.request.Script,construct:function(){qx.bom.request.Script.apply(this);this.__uC();},members:{responseJson:null,__cF:null,__uv:null,__uw:null,__ux:null,__uy:null,__uz:null,__eu:null,__uA:e,open:function(o,k){if(this.__eu){return;};var m={},l,n,j=this;this.responseJson=null;this.__ux=false;l=this.__uv||b;n=this.__uw||this.__uA+i+this.__cF+h;if(!this.__uw){this.constructor[this.__cF]=this;}else {if(!window[this.__uw]){this.__uy=true;window[this.__uw]=function(p){j.callback(p);};}else {{};};};{};m[l]=n;this.__uz=k=qx.util.Uri.appendParamsToUrl(k,m);this.__iv(c,[o,k]);},callback:function(q){if(this.__eu){return;};this.__ux=true;{};this.responseJson=q;this.constructor[this.__cF]=undefined;this.__uB();},setCallbackParam:function(r){this.__uv=r;return this;},setCallbackName:function(name){this.__uw=name;return this;},setPrefix:function(s){this.__uA=s;},getGeneratedUrl:function(){return this.__uz;},dispose:function(){this.__uB();this.__iv(d);},_onNativeLoad:function(){this.status=this.__ux?200:500;this.__iv(f);},__uB:function(){if(this.__uy&&window[this.__uw]){window[this.__uw]=undefined;this.__uy=false;};},__iv:function(u,t){qx.bom.request.Script.prototype[u].apply(this,t||[]);},__uC:function(){this.__cF=g+(new Date().valueOf())+(e+Math.random()).substring(2,5);}}});})();(function(){var a="://query.yahooapis.com/v1/public/yql?q=",b="callback",c="http",d="env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",e="&format=json&diagnostics=false&",f="https",g="qx.data.store.Yql";qx.Class.define(g,{extend:qx.data.store.Jsonp,construct:function(i,k,l){var j=l?f:c;var h=j+a+encodeURIComponent(i)+e+d;qx.data.store.Jsonp.call(this,h,k,b);}});})();
});