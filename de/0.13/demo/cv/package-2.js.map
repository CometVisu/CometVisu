{"version":3,"names":["_next","_throw","key","arg","info","gen","value","error","reject","done","resolve","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","asyncGeneratorStep","err","undefined","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","_createClass","Constructor","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","call","TypeError","Number","_classCallCheck","instance","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_createForOfIteratorHelper","allowArrayLike","it","iterator","Array","isArray","_unsupportedIterableToArray","F","s","n","_e","f","normalCompletion","didErr","step","next","_e2","minLen","_arrayLikeToArray","toString","slice","name","from","test","arr","len","arr2","$$dbClassInfo","dependsOn","usage","require","defer","qx","Bootstrap","executePendingDefers","Class","define","extend","core","type","implement","cv","ui","structure","IController","__P_72_0","bom","Stylesheet","includeFile","util","ResourceManager","getInstance","toUri","replace","Config","forceReload","Date","now","statics","PREFIX","__P_72_1","__P_72_2","MAPPING_PARAM_REGEX","register","webComponentName","qxClass","onComponentCreated","element","tagName","toLowerCase","hasOwnProperty","QxClass","push","log","Logger","properties","renderTarget","check","init","document","body","namespace","members","__P_72_3","__P_72_4","getHtmlStructure","supports","feature","subfeature","initLayout","__P_72_5","location","hash","scrollToPage","substring","getInitialPageId","onHistoryRequest","anchor","pageId","skipHistory","page","querySelector","classList","contains","_step","_iterator","querySelectorAll","remove","_step2","_iterator2","add","parentElement","nodeName","headline","getAttribute","pageTitle","History","addToHistory","event","message","Bus","dispatchByName","warn","parseBackendSettings","xml","_this","io","BackendConnections","initBackendClient","login","configSettings","credentials","debug","startInitialRequest","parseSettings","config","_this2","settings","configElement","documentElement","bindClickToWidget","translate","cacheUsed","templates","ajaxRequest","request","Xhr","set","accept","cache","addListenerOnce","child","content","getTarget","getResponse","getRenderTarget","registerTemplates","xmlns","text","getResponseText","DOMParser","parseFromString","firstElementChild","appendChild","TemplateEngine","setDomFinished","addListener","status","getTransport","Request","isSuccessful","send","forEach","template","customElements","tile","Controller","_TemplatedElement","_super","_class","TemplatedElement","preParse","_this3","_regeneratorRuntime","mark","_callee","theme","data","wrap","_context","prev","hasAttribute","window","matchMedia","matches","setAttribute","Model","updateFrom","addEventListener","abrupt","stop","createUI","doc","_i","_arr","_step3","attr","_iterator3","concat","trNameElement","match","exec","translation","locale","Manager","getLanguage","textContent","trim","_step4","_iterator4","trTextElement","_key","_translation","doScreenSave","screensave_page","getInitialAddresses","firstPage","id","addMapping","mapping","removeMapping","mapValue","mappingName","store","params","JSON","parse","replaceAll","addStyling","styling","removeStyling","styleValue","stylingName","parseLabel","cvTestMode","Application","structureController","_HTMLElement","_super2","templateId","_this4","controller","getElementById","_step5","slotAttributes","cloneNode","_iterator5","_loop","slot","slotName","replacementSelector","slotParentScope","parseInt","slotContents","attrs","l","attributes","includes","slotContent","newNode","keys","attrName","removeAttribute","parentNode","insertBefore","replaced","_i2","children","getAttributeNames","targets","targetName","endsWith","elem","_toConsumableArray","startsWith","innerHTML","_wrapNativeSuper","HTMLElement","Mixin","openedPopups","events","closed","_childPopup","_initPopupChild","popup","_element","Registration","_openPopupChild","last","parent","open","_closePopupChild","close","registerModalPopup","_onPointerDown","blocker","createElement","style","display","MPopup","unregisterModalPopup","removeListener","index","indexOf","splice","ev","Tree","isChildOf","preventDefault","destruct","refresh","_refreshTimer","_lastRefresh","_applyRefresh","restartWith","Timer","__P_73_0","isVisible","start","_applyVisible","getInterval","_disposeObjects","MRefresh","_observer","ResizeObserver","entries","observer","getResizeTarget","some","entry","fireDataEvent","resized","resizeTarget","nullable","_applyResizeTarget","oldElement","unobserve","observe","disconnect","MResize","_observeVisibility","IntersectionObserver","_instance","setVisible","intersectionRatio","visible","MVisibility","connected","_initialized","_applyConnected","_init","_disconnected","getElement","QxConnector","isSubClassOf","elements","AbstractCustomElement","Error","setConnected","oldValue","newValue","hasProperty","styleClass","enabled","visibility","_writeAddresses","_visibleDisplayMode","hasReadAddress","writeAddresses","address","onStateUpdate","stopPropagation","_applyValue","isConnected","mappedValue","sprintf","toLocaleString","_updateValue","setStyleClass","_applyStyleClass","classes","_applyEnabled","_applyVisibility","opacity","getComputedStyle","getPropertyValue","detail","setEnabled","state","setVisibility","setValue","components","AbstractComponent","__P_74_0","Map","on","onClass","offClass","onValue","offValue","progress","transform","__P_74_1","__P_74_2","_parseInt","val","intVal","isNaN","setType","setName","setProgress","setOnValue","setOffValue","eventSource","level","addr","click","onClicked","pointerup","onPointerUp","pointerdown","onPointerDown","getOwnPropertyNames","eventName","triggerAddresses","filter","once","setOn","getOnValue","hasDown","hasUp","_initProgress","Math","PI","svg","createElementNS","circle","Button","superclass","getType","_applyOn","isOn","getOffValue","setId","updateValue","getOnClass","getOffClass","_applyProgress","valueElement","_applyName","source","Address","addressElement","createRipple","CustomEvent","dispatchEvent","button","currentTarget","container","diameter","max","clientWidth","clientHeight","radius","width","height","x","clientX","offsetLeft","y","clientY","offsetTop","offsetParent","left","top","ripple","_QxConnector","__P_84_0","__P_84_1","model","backendName","addAddress","mode","getState","fireStateUpdate","addUpdateListener","allowDuplicates","encoding","encodedValue","Transform","encodeBusAndRaw","raw","lastSentValue","delay","getClient","write","bus","transformedState","decode","bubbles","cancelable","addressValue","variant","isRead","isWrite","getValue","Clazz","exports","Op","hasOwn","obj","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","methodName","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","awrap","async","iter","object","reverse","pop","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","include","ChartCounter","JS_LOADED","_ref","timer","counter","d3","ScriptLoader","includeScript","_x","_x2","formatDefaultLocale","decimal","thousands","grouping","currency","timeFormatDefaultLocale","dateTime","date","time","periods","days","shortDays","months","shortMonths","CONFIG","_downloadedImage","_url","_headers","_request","_chart","_width","_height","_loaded","_dataSetConfigs","_callee2","chartId","buttonAddress","icon","tileAddress","tileWidget","_context2","Chart","_loadData","url","client","dataSets","series","seriesConfig","xTicks","timeMinute","every","timeHour","timeDay","promises","dataSet","ts","assign","showArea","color","title","end","item","split","map","part","toUpperCase","join","parseFloat","setTime","getTime","getResourcePath","src","Fetch","fetch","hasCustomChartsDataProcessor","processChartsData","_onStatusError","all","responses","_onSuccess","chartData","tsdata","_step3$value","_slicedToArray","minVal","min","d","maxVal","format","timeFormat","formatString","multiTimeFormat","getMilliseconds","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","_lineChart","z","chartTitle","xDomain","extent","yDomain","mixBlendMode","xFormat","formatsArray","found","fmt","multiFormat","notifications","Router","dispatchMessage","tr","severity","stringify","c","defined","curve","curveLinear","marginTop","marginRight","marginBottom","marginLeft","xType","scaleTime","xRange","yType","scaleLinear","yRange","yFormat","yLabel","zDomain","strokeLinecap","strokeLinejoin","strokeWidth","strokeOpacity","xPadding","X","Y","Z","O","InternSet","I","range","has","xScale","yScale","xAxis","axisBottom","ticks","tickSizeOuter","tickFormat","yAxis","axisLeft","T","select","linePath","tooltip","append","dot","_d3$pointer","pointer","_d3$pointer2","xm","ym","least","hypot","scaleFactorX","offsetWidth","scaleFactorY","offsetHeight","ttNode","node","timeString","lineTitle","html","property","dispatch","relatedTarget","targetTouches","pathRect","getBoundingClientRect","passive","showXAxis","showYAxis","g","lineGroups","areaGroups","barGroups","get","size","line","selectAll","area","y0","y1","xBarScale","scaleBand","domain","padding","bandwidth","throttleInterval","CC_COUNTER","__P_75_0","setThrottleInterval","addresses","_mode","variantInfo","parser","pure","widgets","ColorChooser","makeAddressListFn","Color","path","$$type","layout","colspan","controls","getThrottleInterval","parseAttributes","_onColorChanged","getDomString","_onDomReady","setResizeTarget","invalidateScreensize","getColor","rgb","getComponent","v","__P_75_1","r","b","round","padStart","alpha","backgroundColor","_idRegex","__P_76_0","_transformId","Icon","_applyId","_applyColor","img","base","origin","pathname","URL","useProxy","rest","Client","getBaseUrl","searchParams","btoa","_loadImage","setRefresh","XMLHttpRequest","responseType","setRequestHeader","onreadystatechange","readyState","DONE","createObjectURL","response","onload","revokeObjectURL","random","Image","_e3","refine","_target","_timer","_model","_getModel","_filterModel","_sortModel","_limit","_modelInstance","refreshOnUpdate","Function","readAddresses","evCopy","sortBy","sortModifier","right","leftVal","rightVal","localeCompare","options","proxyParam","listmodel","Registry","modelInstance","_entry$split$map","_entry$split$map2","getModel","script","innerText","a","List","_callee3","newModel","whenEmptyTemplate","emptyModel","emptyElem","itemTemplate","_context3","t0","t1","sort","removeChild","_elem$getAttribute$sp","_elem$getAttribute$sp2","ListItem","fireEvent","appearance","depth","domReady","showLabels","_applyAppearance","main","_applyDepth","isDomReady","_generateMenu","_onDomAppended","setDomReady","unsubscribe","_applyModel","rootList","ham","href","onclick","_onHamburgerMenu","subscribe","_onPageChange","_onSwipe","_icon","setShowLabels","setModel","currentPage","replaceChildren","__P_77_0","_rootList","pageName","pageIcon","li","isShowLabels","createTextNode","onClick","toggleClass","toggle","_closeAll","getDirection","current","previousElementSibling","except","parentList","currentLevel","pages","getDepth","details","summary","pointerType","offsetX","subList","pageElement","getData","link","_step6","_iterator6","activeName","Menu","_currentState","MenuAction","hasAddress","PL_COUNTER","__P_78_0","pluginName","baseName","scriptLoader","Plugin","loadPluginPart","plugins","requestAnimationFrame","isFinished","Part","getParts","load","__P_79_0","__P_79_1","__P_79_2","__P_79_3","__P_79_4","__P_79_5","__P_79_6","__P_79_7","__P_79_8","_queuedFitText","RoundProgress","hasFixedRadius","normalizedRadius","setMin","setMax","code","bg","isPropertyInitialized","getProgress","__P_79_9","angle","angleRad","cos","sin","valueInRange","getMin","percent","getMax","_fitText","__P_79_10","getContext","compStyle","font","metrics","measureText","factor","fontSize","floor","_applyText","__P_80_0","__P_80_1","__P_80_2","Select","option","_sendSelection","predictive","stepWidth","showValue","__P_81_0","__P_81_1","Slider","_applyThrottleInterval","oninput","setStepWidth","setShowValue","_applyShowValue","decreaseElement","onDecrease","increaseElement","onIncrease","throttle","onInput","trailing","abort","_applyMin","_applyMax","valueLabel","firstChild","isShowValue","__P_81_2","getStepWidth","Spinner","setMode","decrease","decreaseIcon","increase","increaseIcon","getMode","__P_82_0","_queuedOverflowDetection","_debouncedDetectOverflow","Value","debounce","_detectOverflow","__P_83_0","setText","_name","__P_85_0","uri","uriString","username","password","backendUrlConfigKey","backendUrl","server","hasClient","configuredIn","notification","topic","unique","deletable","addBackendClient","_client","update","setDefaultBackendName","doSubscribe","_step$value","onUpdate","addressesToSubscribe","getAddresses","isDomFinished","resetDefaultBackendName","terminate","removeClient","dispose","Backend","loaderElement","loadXml","htmlContent","handleError","getUrl","textStatus","additionalErrorInfo","actions","Loader","__P_86_0","Mapping","exactMatch","_convert","formula","_formula","defaultValue","isDefaultValue","rangeMin","rangeMax","POSITIVE_INFINITY","floatValue","Styling","Group","label","_toggleOpen","_supportsContentVisibility","InstallTrigger","contentVisibility","_class2","Page","_closeButton","Popup","header","timeoutSeconds","_autoCloseTimer","backgroundImage","_fullScreenMode","Tile","setBackgroundImage","resetPopup","_applyBackgroundImage","overlay","closeButton","setPopup","keepState","_applyPopup","restart"],"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MPopup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MRefresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MResize.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MVisibility.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AbstractCustomElement.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/AbstractComponent.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Button.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Address.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Color.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Icon.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/List.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/ListItem.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/MenuAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/RoundProgress.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Select.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Slider.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Spinner.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Value.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Backend.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Loader.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Mapping.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Styling.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Popup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js"],"sourcesContent":["/* Controller.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Controller for the 'tile' structure.\n *\n * This structure is based on web-components and does not need a parser to work.\n * The config file is directly attached to the document body.\n * The widgets in this structure register a customElement and the browser automatically creates instances\n * of this widgets once the customElement is added to the body.\n *\n * The basic structure is a set of pages that contain a list of tiles.\n * Each tile contains a grid of 3 rows and 3 columns. The components can be added to a cell of that grid\n * but also can spread over more then one cell by using row-/column spanning.\n *\n * This structure provides some tiles with a pre-defined content, e.g. a <cv-switch> which\n * contains of a button in the middle of the tile and a primary- and secondary label in the third row.\n *\n * Those pre-defined tiles are provided by a <template> (@see https://developer.mozilla.org/de/docs/Web/HTML/Element/template}\n * User are able to define own templates for re-usable tiles if they need one that this structure does not provide.\n *\n * @asset(structures/tile/*)\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__HTML_STRUCT = '';\n    qx.bom.Stylesheet.includeFile(\n      qx.util.ResourceManager.getInstance().toUri('designs/tile-globals.scss').replace('.scss', '.css') +\n        (cv.Config.forceReload === true ? '?' + Date.now() : '')\n    );\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    // prefix for all custom components uses/provided by this structure\n    PREFIX: 'cv-',\n    __MAP: {},\n    __I: {},\n\n    MAPPING_PARAM_REGEX: /^(.+)\\(([^)]+)\\)$/,\n\n    register(webComponentName, qxClass) {\n      this.__MAP[webComponentName] = qxClass;\n    },\n\n    onComponentCreated(element) {\n      const name = element.tagName.toLowerCase();\n      if (Object.prototype.hasOwnProperty.call(this, name)) {\n        const QxClass = this.__MAP[name];\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          this.__I[name] = [];\n        }\n        this.__I[name].push(new QxClass(element));\n      } else {\n        qx.log.Logger.error(this, 'no QxClass registered for custom element ' + name);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    /**\n     * The target this structure should be inserted into\n     */\n    renderTarget: {\n      check: 'Element',\n      init: document.body\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __HTML_STRUCT: null,\n    __mappings: null,\n    __stylings: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    supports(feature, subfeature) {\n      return false;\n    },\n\n    initLayout() {},\n\n    __gotoStartPage() {\n      // open first page\n      if (!document.location.hash) {\n        this.scrollToPage(this.getInitialPageId());\n      } else {\n        this.scrollToPage(document.location.hash.substring(1));\n      }\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor);\n      }\n    },\n\n    scrollToPage(pageId, skipHistory) {\n      if (!pageId) {\n        return;\n      }\n      const page = document.querySelector('#' + pageId);\n      if (page) {\n        if (!page.classList.contains('active')) {\n          for (let oldPage of document.querySelectorAll('cv-page.active')) {\n            oldPage.classList.remove('active');\n          }\n          for (let oldPage of document.querySelectorAll('cv-page.sub-active')) {\n            oldPage.classList.remove('sub-active');\n          }\n          page.classList.add('active');\n          // mark parent pages that there is a active subpage\n          let parentElement = page.parentElement;\n          while (parentElement && parentElement.nodeName.toLowerCase() !== 'main') {\n            if (parentElement.nodeName.toLowerCase() === 'cv-page') {\n              parentElement.classList.add('sub-active');\n            }\n            parentElement = parentElement.parentElement;\n          }\n\n          if (skipHistory === undefined) {\n            const headline = page.getAttribute('name');\n            let pageTitle = 'CometVisu';\n            if (headline) {\n              pageTitle = headline + ' - ' + pageTitle;\n            }\n            qx.bom.History.getInstance().addToHistory(pageId, pageTitle);\n          }\n          qx.event.message.Bus.dispatchByName('cv.ui.structure.tile.currentPage', page);\n        }\n      } else {\n        this.warn('no page with id', pageId, 'found');\n      }\n    },\n\n    // not needed, backend parse/init themselves\n    parseBackendSettings(xml) {\n      if (xml.querySelectorAll('cv-backend').length === 0) {\n        // no backends defined, use the default one;\n        const client = cv.io.BackendConnections.initBackendClient();\n        client.login(true, cv.Config.configSettings.credentials, () => {\n          this.debug('logged in');\n          cv.io.BackendConnections.startInitialRequest();\n        });\n      }\n      return false;\n    },\n\n    /**\n     * Parses structure specific settings\n     * @param config {XMLDocument} loaded config\n     */\n    parseSettings(config) {\n      document.body.classList.add('loading-structure');\n      const settings = cv.Config.configSettings;\n      const configElement = config.documentElement;\n      settings.bindClickToWidget = configElement.getAttribute('bind_click_to_widget') === 'true';\n      this.translate(config);\n\n      if (!cv.Config.cacheUsed) {\n        const templates = qx.util.ResourceManager.getInstance().toUri('structures/tile/templates.xml');\n\n        const ajaxRequest = new qx.io.request.Xhr(templates);\n        ajaxRequest.set({\n          accept: 'application/xml',\n          cache: !cv.Config.forceReload\n        });\n\n        ajaxRequest.addListenerOnce('success', e => {\n          let content = e.getTarget().getResponse();\n          const target = this.getRenderTarget();\n          this.debug('creating pages');\n          // register custom elements for templates in this document\n          this.registerTemplates(content);\n          let child;\n          // we need the documents to be in HTML namespace\n          if (!content.documentElement.xmlns) {\n            let text = e.getTarget().getResponseText();\n            text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n            const parser = new DOMParser();\n            content = parser.parseFromString(text, 'text/xml');\n          }\n          while ((child = content.documentElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n\n          while ((child = configElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n          document.body.classList.remove('loading-structure');\n          this.debug('finalizing');\n          qx.event.message.Bus.dispatchByName('setup.dom.append');\n          this.debug('pages created');\n          this.__gotoStartPage();\n          this.debug('setup.dom.finished');\n          qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n          cv.TemplateEngine.getInstance().setDomFinished(true);\n        });\n        ajaxRequest.addListener('statusError', e => {\n          const status = e.getTarget().getTransport().status;\n          if (!qx.util.Request.isSuccessful(status)) {\n            this.error('filenotfound', templates);\n          }\n          document.body.classList.remove('loading-structure');\n        });\n\n        ajaxRequest.send();\n      }\n    },\n\n    /**\n     * Registers customElements for all templates in the given xml that are direct children of a <templates structure=\"tile\"> element\n     * @param xml {XMLDocument}\n     */\n    registerTemplates(xml) {\n      xml.querySelectorAll('templates[structure=\\'tile\\'] > template').forEach(template => {\n        customElements.define(\n          cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'),\n          class extends TemplatedElement {\n            constructor() {\n              super(template.getAttribute('id'));\n            }\n          }\n        );\n      });\n    },\n\n    /**\n     * Pre parsing hook, do everything here that is needed before the real parsing process can start\n     * @param xml {XMLDocument}\n     */\n    async preParse(xml) {\n      if (xml.documentElement.hasAttribute('theme')) {\n        let theme = xml.documentElement.getAttribute('theme');\n        const data = {};\n        if (theme === 'system') {\n          if (window.matchMedia) {\n            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n            document.documentElement.setAttribute('data-theme', theme);\n            data['theme'] = theme;\n            cv.data.Model.getInstance().updateFrom('system', data);\n            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');\n\n              data['theme'] = e.matches ? 'dark' : 'light';\n              cv.data.Model.getInstance().updateFrom('system', data);\n            });\n          } else {\n            this.error('system theme detection not possible in this browser');\n          }\n        } else {\n          document.documentElement.setAttribute('data-theme', theme);\n          data['theme'] = theme;\n          cv.data.Model.getInstance().updateFrom('system', data);\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param config {Object} loaded config file usually an XMLDocument but other structures might use different formats\n     */\n    createUI(config) {},\n\n    translate(doc) {\n      for (const attr of ['name', 'label']) {\n        for (const trNameElement of doc.querySelectorAll(`*[${attr}^=\"tr(\"]`)) {\n          const match = /^tr\\('([^']+)'\\)$/.exec(trNameElement.getAttribute(attr));\n\n          if (!match) {\n            this.warn('attribute content no valid translation string', trNameElement.getAttribute(attr));\n\n            continue;\n          }\n          const key = match[1];\n          const translation = doc.querySelector(\n            `cv-translations > language[name=\"${qx.locale.Manager.getInstance().getLanguage()}\"] > tr[key='${key}']`\n          );\n\n          if (translation) {\n            trNameElement.setAttribute(attr, translation.textContent.trim());\n          } else {\n            trNameElement.setAttribute(attr, key);\n            this.warn(`[${qx.locale.Manager.getInstance().getLanguage()}] no translation found for: \"${key}\"`);\n          }\n        }\n      }\n      for (const trTextElement of doc.querySelectorAll('*[tr=\"true\"]')) {\n        const key = trTextElement.textContent.trim();\n        const translation = doc.querySelector(\n          `cv-translations > language[name=\"${qx.locale.Manager.getInstance().getLanguage()}\"] > tr[key='${key}']`\n        );\n\n        if (translation) {\n          trTextElement.textContent = translation.textContent.trim();\n        } else {\n          this.warn(`[${qx.locale.Manager.getInstance().getLanguage()}] no translation found for: \"${key}\"`);\n        }\n      }\n    },\n\n    /**\n     * Handle fired event from screensaver\n     * @return {Array<string>} Array with addresses\n     */\n    doScreenSave() {\n      if (cv.Config.configSettings.screensave_page) {\n        this.scrollToPage(cv.Config.configSettings.screensave_page);\n      }\n    },\n\n    /**\n     * Return the addresses needed to update all states on the initially loaded page\n     */\n    getInitialAddresses() {\n      return [];\n    },\n\n    /**\n     * Returns the widget id of the page item initially loaded\n     * @returns {String} widget path like 'id_'...\n     */\n    getInitialPageId() {\n      const firstPage = document.querySelector('cv-page');\n      return firstPage ? firstPage.id : '';\n    },\n\n    /**\n     *\n     * @param name {String} mapping name\n     * @param mapping {cv.ui.structure.tile.elements.Mapping}\n     */\n    addMapping(name, mapping) {\n      if (!this.__mappings) {\n        this.__mappings = {};\n      }\n      this.__mappings[name] = mapping;\n    },\n\n    removeMapping(name) {\n      if (this.__mappings) {\n        delete this.__mappings[name];\n      }\n    },\n\n    mapValue(mappingName, value, store) {\n      let match;\n      let params = [];\n      if ((match = cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(mappingName)) !== null) {\n        // this mapping name contains a parameter\n        try {\n          params = JSON.parse(`[${match[2].replaceAll('\\'', '\"')}]`);\n        } catch (e) {\n          this.error('error parsing parameters from ' + mappingName);\n        }\n        mappingName = match[1];\n      }\n      if (this.__mappings && Object.prototype.hasOwnProperty.call(this.__mappings, mappingName)) {\n        return this.__mappings[mappingName].mapValue(value, store, params);\n      }\n      return value;\n    },\n\n    /**\n     * @param name {String} styling name\n     * @param styling {cv.ui.structure.tile.elements.Styling}\n     */\n    addStyling(name, styling) {\n      if (!this.__stylings) {\n        this.__stylings = {};\n      }\n      this.__stylings[name] = styling;\n    },\n\n    removeStyling(name) {\n      if (this.__stylings) {\n        delete this.__stylings[name];\n      }\n    },\n\n    styleValue(stylingName, value, store) {\n      if (this.__stylings && Object.prototype.hasOwnProperty.call(this.__stylings, stylingName)) {\n        return this.__stylings[stylingName].mapValue(value, store);\n      }\n      return value;\n    },\n\n    // for compatibility with pure controller\n    parseLabel() {\n      return '';\n    }\n  },\n\n  defer(statics) {\n    if (!window.cvTestMode) {\n      // do not apply ourselves automatically in test mode\n      cv.Application.structureController = statics.getInstance();\n    }\n  }\n});\n\nclass TemplatedElement extends HTMLElement {\n  constructor(templateId) {\n    super();\n    const controller = cv.ui.structure.tile.Controller.getInstance();\n    let template = document.getElementById(templateId);\n    if (template) {\n      const slotAttributes = ['name', 'replaces', 'parent-scope'];\n      const content = template.content.cloneNode(true);\n      // move slots into template\n      for (let slot of content.querySelectorAll('slot')) {\n        const slotName = slot.getAttribute('name');\n        const replacementSelector = slot.hasAttribute('replaces') ? slot.getAttribute('replaces') : '';\n        const slotParentScope = slot.hasAttribute('parent-scope') ? parseInt(slot.getAttribute('parent-scope')) : 0;\n        let slotContents = this.querySelectorAll(`[slot='${slotName}']`);\n        const attrs = {};\n        for (let i = 0, l = slot.attributes.length; i < l; i++) {\n          if (!slotAttributes.includes(slot.attributes[i].name)) {\n            attrs[slot.attributes[i].name] = slot.attributes[i].value;\n          }\n        }\n        if (slotContents.length > 0) {\n          Array.from(slotContents).forEach(slotContent => {\n            const newNode = slotContent.cloneNode(true);\n            Object.keys(attrs).forEach(attrName => {\n              if (newNode.hasAttribute(attrName)) {\n                if (attrName === 'class') {\n                  // append it\n                  newNode.classList.add(attrs[attrName]);\n                } else {\n                  qx.log.Logger.debug(controller, '[' + templateId + '] attribute', attrName, 'already set, skipping');\n                }\n              } else {\n                newNode.setAttribute(attrName, attrs[attrName]);\n              }\n            });\n            newNode.removeAttribute('slot');\n            slot.parentNode.insertBefore(newNode, slot);\n          });\n          slot.remove();\n          if (replacementSelector) {\n            content.querySelectorAll(replacementSelector).forEach(replaced => {\n              replaced.remove();\n            });\n          }\n        } else {\n          qx.log.Logger.debug(controller, '[' + templateId + '] no content for slot', slotName, ' removing');\n\n          let parentNode = slot.parentNode;\n          if (slotParentScope > 0) {\n            // got slotParentScope elements up and remove that one\n            let i = slotParentScope - 1;\n            while (i > 0) {\n              parentNode = parentNode.parentNode;\n              i--;\n            }\n            if (parentNode) {\n              parentNode.remove();\n            }\n          } else {\n            slot.remove();\n            if (parentNode.children.length === 0) {\n              // also remove slots parent when it has no content\n              parentNode.remove();\n            }\n          }\n        }\n      }\n      // transfer attribute slots\n      const attributes = this.getAttributeNames();\n      attributes.forEach(name => {\n        let value = this.getAttribute(name);\n        const targets = content.querySelectorAll('[slot-' + name + ']');\n        let targetName = name;\n        // allow names like percent-mapping that should also be mapped to a certain elements 'mapping' attribute\n        if (name.endsWith('-mapping')) {\n          targetName = 'mapping';\n        } else if (name.endsWith('-styling')) {\n          targetName = 'styling';\n        } else if (name.endsWith('-format')) {\n          targetName = 'format';\n        }\n        targets.forEach(target => {\n          if (targetName !== name && target.hasAttribute('slot-' + name)) {\n            target.setAttribute(name, value || target.getAttribute('slot-' + name));\n\n            target.removeAttribute('slot-' + name);\n          } else {\n            target.setAttribute(targetName, value || target.getAttribute('slot-' + targetName));\n\n            target.removeAttribute('slot-' + targetName);\n          }\n        });\n        if (targets.length > 0) {\n          this.removeAttribute(name);\n        }\n      });\n      content.querySelectorAll('*').forEach(elem => {\n        [...elem.attributes].forEach(attr => {\n          if (attr.name.startsWith('slot-')) {\n            let targetName = attr.name.substring(5);\n            // only e.g. map slot-progress-mapping to mapping if we have no slot-mapping attribute\n            if (attr.name.endsWith('-mapping') && elem.hasAttribute('slot-mapping')) {\n              targetName = 'mapping';\n            } else if (attr.name.endsWith('-styling') && elem.hasAttribute('slot-styling')) {\n              targetName = 'styling';\n            } else if (attr.name.endsWith('-format') && elem.hasAttribute('slot-format')) {\n              targetName = 'format';\n            }\n            if (attr.value) {\n              elem.setAttribute(targetName, attr.value);\n            }\n            elem.removeAttribute(attr.name);\n          }\n        });\n      });\n\n      // clear content\n      this.innerHTML = '';\n      this.appendChild(content);\n    } else {\n      qx.log.Logger.error(controller, '[' + templateId + '] no template found for id', templateId);\n    }\n  }\n}\n","/* MPopup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Handles cv-popup children and some general popup tasks, like global registration and close on click outside, modal blocker etc.\n */\nqx.Mixin.define('cv.ui.structure.tile.MPopup', {\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  events: {\n    closed: 'qx.event.type.Event'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _childPopup: null,\n\n    _initPopupChild() {\n      const popup = (this._childPopup = this._element.querySelector(':scope > cv-popup'));\n      if (popup) {\n        qx.event.Registration.addListener(this._element, 'tap', this._openPopupChild, this);\n\n        // we need to tell the parent widget that is inside a group that wen have a popup here\n        let parent = popup.parentElement;\n        let last;\n        while (parent) {\n          if (parent.tagName.toLowerCase() === 'cv-group') {\n            last.classList.add('has-popup');\n          } else if (parent.tagName.toLowerCase() === 'cv-page') {\n            break;\n          }\n          last = parent;\n          parent = parent.parentElement;\n        }\n      }\n    },\n\n    _openPopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup:not([open])');\n\n      if (popup) {\n        popup.getInstance().open();\n      }\n    },\n\n    _closePopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup[open]');\n      if (popup) {\n        popup.getInstance().close();\n      }\n    },\n\n    registerModalPopup() {\n      qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('modal-popup-blocker');\n        document.body.appendChild(blocker);\n      }\n      blocker.style.display = 'block';\n      cv.ui.structure.tile.MPopup.openedPopups.push(this);\n    },\n\n    unregisterModalPopup() {\n      qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n      const index = cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);\n      cv.ui.structure.tile.MPopup.openedPopups.splice(index, 1);\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (blocker && cv.ui.structure.tile.MPopup.openedPopups.length === 0) {\n        blocker.style.display = 'none';\n      }\n    },\n\n    _onPointerDown(ev) {\n      if (!cv.util.Tree.isChildOf(ev.getTarget(), this._element)) {\n        // clicked outside -> close\n        this.close();\n        ev.preventDefault();\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(this._element, 'tap', this._openPopupChild, this);\n\n    this._childPopup = null;\n  }\n});\n","/* MRefresh.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a refresh attribute that triggers a 'refresh' method which must be implemented by classes including this mixin.\n */\nqx.Mixin.define('cv.ui.structure.tile.MRefresh', {\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    refresh: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyRefresh'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _refreshTimer: null,\n    _lastRefresh: null,\n\n    _applyRefresh(value) {\n      if (value === 0) {\n        if (this._refreshTimer) {\n          this._refreshTimer.stop();\n        }\n      } else if (!this._refreshTimer) {\n        this._refreshTimer = new qx.event.Timer(value * 1000);\n        this._refreshTimer.addListener('interval', this.__doRefresh, this);\n        if (typeof this.isVisible === 'function') {\n          if (this.isVisible()) {\n            this._refreshTimer.start();\n          }\n        } else {\n          this._refreshTimer.start();\n        }\n      } else {\n        this._refreshTimer.restartWith(value * 1000);\n      }\n    },\n\n    _applyVisible(isVisible) {\n      if (isVisible) {\n        if (this._refreshTimer) {\n          this._refreshTimer.start();\n          if (!this._lastRefresh || Date.now() - this._lastRefresh >= this._refreshTimer.getInterval()) {\n            // last execution time too old, refresh now\n            this.__doRefresh();\n          }\n        } else if (!this._lastRefresh) {\n          // refresh once when the item becomes visible\n          this.__doRefresh();\n        }\n      } else if (this._refreshTimer) {\n        this._refreshTimer.stop();\n      }\n    },\n\n    __doRefresh() {\n      if (typeof this.refresh === 'function') {\n        this.refresh();\n        this._lastRefresh = Date.now();\n      } else {\n        this.error('refresh method must be implemented!');\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_refreshTimer');\n  }\n});\n","/* MResize.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements resizing\n * @ignore(ResizeObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MResize', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observer = new ResizeObserver((entries, observer) => {\n      const element = this.getResizeTarget();\n      entries.some(entry => {\n        if (entry.target === element) {\n          this.fireDataEvent('resized', entry);\n          return true;\n        }\n        return false;\n      });\n    });\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    resized: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    resizeTarget: {\n      check: 'Element',\n      nullable: true,\n      apply: '_applyResizeTarget'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {ResizeObserver}\n     */\n    _observer: null,\n\n    _applyResizeTarget(element, oldElement) {\n      if (oldElement) {\n        this._observer.unobserve(oldElement);\n      }\n      if (element) {\n        this._observer.observe(element);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._observer.disconnect();\n    this._observer = null;\n  }\n});\n","/* MVisibility.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements visibility\n * @ignore(IntersectionObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MVisibility', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observeVisibility();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    observer: new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.target._instance) {\n          entry.target._instance.setVisible(entry.intersectionRatio > 0);\n        }\n      });\n    })\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visible: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _observeVisibility() {\n      if (this._element) {\n        cv.ui.structure.tile.MVisibility.observer.observe(this._element);\n      } else {\n        this.warn('no element to observe defined');\n      }\n    }\n  }\n});\n","/* AbstractCustomElement.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.elements.AbstractCustomElement', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    this._element = element;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connected: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyConnected',\n      event: 'changeConnected'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {HTMLElement}\n     */\n    _element: null,\n\n    _initialized: false,\n\n    _applyConnected(value) {\n      if (value && !this._initialized) {\n        this._init();\n        this._initialized = true;\n      } else {\n        this._disconnected();\n        this._initialized = false;\n      }\n    },\n    _init() {},\n\n    _disconnected() {},\n\n    getElement() {\n      return this._element;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._element = null;\n  }\n});\n\n/* eslint-disable-next-line no-redeclare */\nclass QxConnector extends HTMLElement {\n  constructor(QxClass) {\n    super();\n    if (qx.Class.isSubClassOf(QxClass, cv.ui.structure.tile.elements.AbstractCustomElement)) {\n      this._instance = new QxClass(this);\n    } else {\n      throw Error(QxClass + ' must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement');\n    }\n    if (this.hasAttribute('colspan')) {\n      this.classList.add('colspan-' + this.getAttribute('colspan'));\n    }\n    if (this.hasAttribute('rowspan')) {\n      this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n    }\n  }\n\n  getInstance() {\n    return this._instance;\n  }\n\n  connectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(true);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(false);\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (this._instance && qx.Class.hasProperty(this._instance.constructor, name)) {\n      this._instance.set(name, newValue);\n    }\n  }\n}\n\nwindow.QxConnector = QxConnector;\n","/* AbstractComponent.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Base class for all components.\n */\nqx.Class.define('cv.ui.structure.tile.components.AbstractComponent', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      apply: '_applyValue',\n      init: null\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    enabled: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyEnabled'\n    },\n\n    visibility: {\n      check: ['visible', 'excluded', 'hidden'],\n      init: 'visible',\n      apply: '_applyVisibility',\n      event: 'changeVisibility'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    _visibleDisplayMode: null,\n\n    _init() {\n      const element = this._element;\n      let hasReadAddress = false;\n      const writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    // property apply\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(this._element.getAttribute('mapping'), value);\n        }\n        if (this._element.hasAttribute('format')) {\n          mappedValue = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            mappedValue instanceof Date ? mappedValue.toLocaleString() : mappedValue\n          );\n        }\n        this._updateValue(mappedValue, value);\n        if (this._element.hasAttribute('styling')) {\n          let styleClass = cv.Application.structureController.styleValue(this._element.getAttribute('styling'), value);\n\n          this.setStyleClass(styleClass);\n        }\n      }\n    },\n\n    // needs to be implemented by inheriting classes\n    _updateValue(mappedValue, value) {},\n\n    // property apply\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyEnabled(value) {\n      let blocker = this._element.querySelector(':scope > .blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('blocker');\n        this._element.appendChild(blocker);\n        blocker.addEventListener('click', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerdown', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerup', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n      }\n      this._element.setAttribute('disabled', value === false ? 'true' : 'false');\n\n      blocker.style.display = value === true ? 'none' : 'block';\n    },\n\n    _applyVisibility(value, oldValue) {\n      if (oldValue === 'hidden') {\n        this._element.style.opacity = '1.0';\n      }\n      switch (value) {\n        case 'visible':\n          if (this._visibleDisplayMode) {\n            this._element.style.display = this._visibleDisplayMode || 'initial';\n          }\n          break;\n\n        case 'hidden':\n          this._element.style.opacity = '0';\n          break;\n\n        case 'excluded':\n          this._visibleDisplayMode = getComputedStyle(this._element).getPropertyValue('display');\n          this._element.style.display = 'none';\n          break;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     * @return {Boolean} true of the update has been handled\n     */\n    onStateUpdate(ev) {\n      switch (ev.detail.target) {\n        case 'enabled':\n          this.setEnabled(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n        case 'show-exclude':\n          this.setVisibility(ev.detail.state ? 'visible' : 'excluded');\n          ev.stopPropagation();\n          return true;\n        case 'show-hide':\n          this.setVisibility(ev.detail.state ? 'visible' : 'hidden');\n          ev.stopPropagation();\n          return true;\n        case '':\n          this.setValue(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n      }\n\n      return false;\n    }\n  }\n});\n","/* Button.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Button', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__store = new Map();\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['button', 'trigger', 'push'],\n      init: 'button'\n    },\n\n    on: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOn'\n    },\n\n    onClass: {\n      check: 'String',\n      init: 'active'\n    },\n\n    offClass: {\n      check: 'String',\n      init: 'inactive'\n    },\n\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      apply: '_applyName'\n    },\n\n    progress: {\n      check: 'Number',\n      init: -1,\n      apply: '_applyProgress',\n      transform: '_parseInt'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    __textLabel: null,\n    __circumference: null,\n    /**\n     * @var {Map} value store for addresses to be able to use them e.g. in mapping formulas\n     */\n    __store: null,\n\n    _parseInt(val) {\n      const intVal = parseInt(val);\n      return Number.isNaN(intVal) ? 0 : intVal;\n    },\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      if (element.hasAttribute('name')) {\n        this.setName(element.getAttribute('name'));\n      }\n      if (element.hasAttribute('progress')) {\n        this.setProgress(element.getAttribute('progress'));\n      }\n      if (element.hasAttribute('on-value')) {\n        this.setOnValue(element.getAttribute('on-value'));\n      }\n      if (element.hasAttribute('off-value')) {\n        this.setOffValue(element.getAttribute('off-value'));\n      }\n      let hasReadAddress = false;\n      let writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      if (writeAddresses.length > 0) {\n        const events = {};\n        let eventSource = element;\n        if (element.getAttribute('whole-tile') === 'true') {\n          // find parent tile and use it as event source\n          let parent = element.parentElement;\n          let level = 0;\n          while (level <= 2) {\n            parent = parent.parentElement;\n            level++;\n            if (parent.tagName.toLowerCase() === 'cv-tile') {\n              eventSource = parent;\n              eventSource.classList.add('clickable');\n            }\n          }\n        }\n        writeAddresses.forEach(addr => {\n          let event = addr.hasAttribute('on') ? addr.getAttribute('on') : 'click';\n          switch (event) {\n            case 'click':\n              events.click = this.onClicked.bind(this);\n              break;\n            case 'up':\n              events.pointerup = this.onPointerUp.bind(this);\n              break;\n            case 'down':\n              events.pointerdown = this.onPointerDown.bind(this);\n              break;\n          }\n        });\n        Object.getOwnPropertyNames(events).forEach(eventName =>\n          eventSource.addEventListener(eventName, ev => {\n            events[eventName](ev);\n          })\n        );\n      }\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      } else if (element.hasAttribute('mapping') || element.hasAttribute('styling')) {\n        // apply the trigger state\n        const triggerAddresses = writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on'));\n\n        if (triggerAddresses.length === 1) {\n          const value = triggerAddresses[0].getAttribute('value');\n          qx.event.Timer.once(\n            () => {\n              // using == comparisons to make sure that e.g. 1 equals \"1\"\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setOn(value == this.getOnValue());\n            },\n            this,\n            1000\n          );\n        }\n      }\n\n      // detect button type\n      if (\n        !hasReadAddress &&\n        writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on')).length === 1\n      ) {\n        // only one write address with a fixed value and no special event => simple trigger\n        this.setType('trigger');\n      } else {\n        let hasDown = false;\n        let hasUp = false;\n        writeAddresses.some(addr => {\n          if (addr.hasAttribute('value') && addr.hasAttribute('on')) {\n            if (!hasDown) {\n              hasDown = addr.getAttribute('on') === 'down';\n            }\n            if (!hasUp) {\n              hasUp = addr.getAttribute('on') === 'up';\n            }\n          }\n          return hasUp && hasDown;\n        });\n        if (hasUp && hasDown) {\n          // has an address for up and one for down event with a fixed value -> pushbutton\n          this.setType('push');\n        }\n      }\n    },\n\n    _initProgress() {\n      const element = this._element;\n      this.__circumference = 100 * Math.PI;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('viewBox', '0 0 100 100');\n      svg.setAttribute('type', 'circle');\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\n      circle.classList.add('bar');\n      circle.setAttribute('r', '49');\n      circle.setAttribute('cx', '50');\n      circle.setAttribute('cy', '50');\n      circle.setAttribute('stroke-width', '2');\n      circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n      circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n      svg.appendChild(circle);\n      element.appendChild(svg);\n      // make sure that we do not override the progress bar by state appearance\n      element.classList.add('progress');\n    },\n\n    _applyConnected(value) {\n      super._applyConnected(value);\n      if (value) {\n        if (this.getType() !== 'trigger') {\n          // delay this because we need the mappings to be ready\n          qx.event.Timer.once(this._applyOn, this, 1000);\n        }\n      }\n    },\n    _applyOn() {\n      if (this.isConnected()) {\n        let value = this.isOn() ? this.getOnValue() : this.getOffValue();\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(\n            this._element.getAttribute('mapping'),\n            value,\n            this.__store\n          );\n        }\n        const target = this._element.querySelector('.value');\n        if (target && target.tagName.toLowerCase() === 'cv-icon') {\n          if (target._instance) {\n            target._instance.setId(mappedValue);\n          } else {\n            target.textContent = mappedValue;\n          }\n        } else {\n          this.updateValue(mappedValue);\n        }\n        let styleClass = this.isOn() ? this.getOnClass() : this.getOffClass();\n        if (this._element.hasAttribute('styling')) {\n          styleClass = cv.Application.structureController.styleValue(\n            this._element.getAttribute('styling'),\n            value,\n            this.__store\n          );\n        }\n        this.setStyleClass(styleClass);\n      }\n    },\n\n    _applyProgress(value) {\n      let valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n      if (!valueElement) {\n        this._initProgress();\n        valueElement = this._element.querySelector(':scope > svg > circle.bar');\n      }\n      if (valueElement) {\n        if (this._element.hasAttribute('progress-mapping')) {\n          value = cv.Application.structureController.mapValue(\n            this._element.getAttribute('progress-mapping'),\n            value,\n            this.__store\n          );\n        }\n        valueElement.setAttribute(\n          'stroke-dashoffset',\n          '' + (this.__circumference - (value / 100) * this.__circumference)\n        );\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyName(value) {\n      if (!this.__textLabel) {\n        this.__textLabel = document.createElement('label');\n        this.__textLabel.classList.add('button-label');\n        this._element.appendChild(this.__textLabel);\n      }\n      this.__textLabel.textContent = value;\n    },\n\n    updateValue(value) {\n      const elem = this._element.querySelector('span.value');\n      if (elem) {\n        elem.innerHTML = value;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == this.getOnValue();\n      let target = ev.detail.target || 'default';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      if (target === 'default') {\n        this.setOn(value);\n      } else if (target === 'progress') {\n        this.setProgress(ev.detail.state);\n      } else if (target.startsWith('store:')) {\n        this.__store.set(target.substring(6), ev.detail.state);\n      } else if (target === 'store') {\n        // use address as store key\n        this.__store.set(ev.detail.address, ev.detail.state);\n      }\n    },\n\n    onClicked(event) {\n      this.createRipple(event);\n      if (!this._writeAddresses) {\n        this._writeAddresses = Array.prototype.filter.call(\n          this._element.querySelectorAll('addresses > cv-address'),\n          address => !address.hasAttribute('mode') || address.getAttribute('mode') !== 'read'\n        );\n      }\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: this.isOn() ? this.getOffValue() : this.getOnValue(),\n          source: this\n        }\n      });\n\n      if (this.getType() === 'trigger') {\n        // simulate feedback\n        this.setOn(true);\n        qx.event.Timer.once(\n          () => {\n            this.setOn(false);\n          },\n          null,\n          250\n        );\n      }\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      event.stopPropagation();\n    },\n\n    onPointerDown() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'down' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    onPointerUp() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'up' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    createRipple(event) {\n      const button = event.currentTarget;\n      let container = button.querySelector(':scope .ripple-container');\n      if (!container) {\n        container = document.createElement('div');\n        container.classList.add('ripple-container');\n        button.appendChild(container);\n      }\n      const circle = document.createElement('span');\n      const diameter = Math.max(button.clientWidth, button.clientHeight);\n      const radius = diameter / 2;\n      circle.style.width = circle.style.height = `${diameter}px`;\n      let x = event.clientX - (button.offsetLeft + radius);\n      let y = event.clientY - (button.offsetTop + radius);\n      if (button === this._element) {\n        x -= button.offsetParent.offsetLeft;\n        y -= button.offsetParent.offsetTop;\n      }\n      circle.style.left = `${x}px`;\n      circle.style.top = `${y}px`;\n      circle.classList.add('ripple');\n      // remove old ones\n      container.querySelectorAll('.ripple').forEach(ripple => ripple.remove());\n      container.appendChild(circle);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'button',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Address.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Address element that connect a widget/component to the backend.\n *\n *  @author Tobias Bräutigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Address', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __lastValue: null,\n    __transformedValue: null,\n\n    _init() {\n      const element = this._element;\n      const address = element.textContent.trim();\n      if (address) {\n        const model = cv.data.Model.getInstance();\n        const backendName = element.getAttribute('backend');\n        model.addAddress(address, element.getAttribute('id'), backendName);\n        const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'readwrite';\n        if (mode !== 'write') {\n          // subscribe\n          // this is a read address register for updates\n          const state = model.getState(address, backendName);\n          if (state !== undefined) {\n            this.fireStateUpdate(address, state);\n          }\n          //add listener\n          model.addUpdateListener(address, this.fireStateUpdate, this, backendName);\n        }\n        if (mode !== 'read') {\n          // listen for sendState events\n          element.addEventListener('sendState', ev => {\n            let value = null;\n            if (Object.prototype.hasOwnProperty.call(ev.detail, 'value')) {\n              value = ev.detail.value;\n            }\n            if (element.hasAttribute('value')) {\n              // address has a fixed value that must be sent\n              value = element.getAttribute('value');\n            }\n            const allowDuplicates =\n              ev.detail.source &&\n              ev.detail.source instanceof cv.ui.structure.tile.components.Button &&\n              (ev.detail.source.getType() === 'trigger' || ev.detail.source.getType() === 'push');\n            if (value !== null) {\n              const encoding = element.getAttribute('transform') || 'raw';\n              const encodedValue = cv.Transform.encodeBusAndRaw({ transform: encoding }, value);\n\n              // noinspection EqualityComparisonWithCoercionJS\n              if (\n                allowDuplicates ||\n                !Object.prototype.hasOwnProperty.call(element, 'lastSentValue') ||\n                encodedValue.raw !== element.lastSentValue\n              ) {\n                if (element.hasAttribute('delay')) {\n                  const delay = parseInt(element.getAttribute('delay'));\n                  this.debug(`send with delay of ${delay}ms`);\n                  qx.event.Timer.once(\n                    () => {\n                      cv.io.BackendConnections.getClient(backendName).write(\n                        element.textContent,\n                        encodedValue.bus,\n                        element\n                      );\n\n                      if (!allowDuplicates) {\n                        element.lastSentValue = encodedValue.raw;\n                      }\n                    },\n                    this,\n                    delay\n                  );\n                } else {\n                  cv.io.BackendConnections.getClient(backendName).write(element.textContent, encodedValue.bus, element);\n\n                  if (!allowDuplicates) {\n                    element.lastSentValue = encodedValue.raw;\n                  }\n                }\n              }\n            }\n          });\n        }\n      }\n    },\n\n    /**\n     * Creates a 'stateUpdate' event with the transformed value and dispatches it to the <cv-address>-Element.\n     * @param address {String} address\n     * @param state {variant} state to send\n     */\n    fireStateUpdate(address, state) {\n      if (this.__lastValue !== state || this._element.getAttribute('send-mode') === 'always') {\n        let transform = this._element.getAttribute('transform') || 'raw';\n        let transformedState = cv.Transform.decode({ transform: transform }, state);\n\n        let mapping = '';\n        if (this._element.hasAttribute('mapping')) {\n          mapping = this._element.getAttribute('mapping');\n          transformedState = cv.Application.structureController.mapValue(mapping, transformedState);\n        }\n        if (this._element.hasAttribute('format')) {\n          transformedState = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            transformedState instanceof Date ? transformedState.toLocaleString() : transformedState\n          );\n        }\n        const ev = new CustomEvent('stateUpdate', {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            address: this._element.textContent.trim(),\n            state: transformedState,\n            target: this._element.getAttribute('target') || '',\n            raw: state,\n            mapping: mapping,\n            addressValue: this._element.hasAttribute('value') ? this._element.getAttribute('value') : null,\n            source: this,\n            variant: this._element.hasAttribute('variant') ? this._element.getAttribute('variant') : null\n          }\n        });\n\n        this.__transformedValue = transformedState;\n        //console.log(ev.detail);\n        this._element.dispatchEvent(ev);\n        this.__lastValue = state;\n        // reset lastSentValue\n        if (state !== this._element.lastSentValue) {\n          this._element.lastSentValue = null;\n        }\n      }\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a read address\n     */\n    isRead() {\n      return this._element.getAttribute('mode') !== 'write';\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a write address\n     */\n    isWrite() {\n      return this._element.getAttribute('mode') !== 'read';\n    },\n\n    getValue() {\n      return this.__transformedValue;\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Chart.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ChartCounter: 0,\n\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loaded d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          decimal: ',',\n          thousands: '.',\n          grouping: [3],\n          currency: ['€', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          dateTime: '%A, der %e. %B %Y, %X',\n          date: '%d.%m.%Y',\n          time: '%H:%M:%S',\n          periods: ['AM', 'PM'],\n          days: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],\n\n          shortDays: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],\n          months: [\n            'Januar',\n            'Februar',\n            'März',\n            'April',\n            'Mai',\n            'Juni',\n            'Juli',\n            'August',\n            'September',\n            'Oktober',\n            'November',\n            'Dezember'\n          ],\n\n          shortMonths: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez']\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['axis-mixed', 'bar', 'line', 'scatter', 'pie', 'percentage'],\n      init: 'line'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _chart: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n\n    async _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      if (this.isVisible()) {\n        this._loadData();\n      }\n      if (element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        const chartId = 'chart-' + cv.ui.structure.tile.components.Chart.ChartCounter;\n        // add fullscreen button + address\n        const button = document.createElement('cv-button');\n        button.classList.add('fullscreen');\n        const buttonAddress = document.createElement('cv-address');\n        buttonAddress.setAttribute('backend', 'system');\n        buttonAddress.textContent = `state:${chartId}-popup`;\n        button.appendChild(buttonAddress);\n        const icon = document.createElement('cv-icon');\n        icon.textContent = 'ri-fullscreen-line';\n        button.appendChild(icon);\n        element.parentElement.insertBefore(button, element);\n\n        // address\n        const tileAddress = document.createElement('cv-address');\n        tileAddress.setAttribute('mode', 'read');\n        tileAddress.setAttribute('target', 'fullscreen-popup');\n        tileAddress.setAttribute('backend', 'system');\n        tileAddress.setAttribute('send-mode', 'always');\n        tileAddress.textContent = buttonAddress.textContent;\n        element.parentElement.appendChild(tileAddress);\n\n        // listen to parent tile of popup is opened or not\n        let parent = element;\n        while (parent && parent.nodeName.toLowerCase() !== 'cv-tile') {\n          parent = parent.parentElement;\n        }\n        if (parent) {\n          const tileWidget = parent.getInstance();\n          tileWidget.addListener('closed', () => {\n            const ev = new CustomEvent('sendState', {\n              detail: {\n                value: 0,\n                source: this\n              }\n            });\n            buttonAddress.dispatchEvent(ev);\n          });\n\n          // because we added a read address to the tile after is has been initialized we need to init the listener here manually\n          parent.addEventListener('stateUpdate', ev => {\n            tileWidget.onStateUpdate(ev);\n            // cancel event here\n            ev.stopPropagation();\n          });\n        }\n      }\n\n      cv.ui.structure.tile.components.Chart.ChartCounter++;\n    },\n\n    _applyVisible(value) {\n      if (value && typeof window.d3 === 'object') {\n        this._loadData();\n      }\n    },\n\n    _loadData() {\n      if (this._loaded && Date.now() - this._loaded < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      let url;\n      const dataSets = this._element.querySelectorAll(':scope > dataset');\n      const series = this._element.getAttribute('series') || 'day';\n      const seriesConfig = {};\n      switch (series) {\n        case 'hour':\n          seriesConfig.xTicks = d3.timeMinute.every(5);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'day':\n          seriesConfig.xTicks = d3.timeHour.every(4);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'week':\n          seriesConfig.xTicks = d3.timeDay.every(1);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'month':\n          seriesConfig.xTicks = d3.timeDay.every(5);\n          seriesConfig.start = 'end-1' + series;\n          break;\n\n        case 'year':\n          seriesConfig.xTicks = d3.timeDay.every(31);\n          seriesConfig.start = 'end-1' + series;\n          break;\n      }\n      const promises = [];\n      this._dataSetConfigs = {};\n      for (let dataSet of dataSets) {\n        let ts = Object.assign({\n          showArea: true,\n          color: '#FF9900',\n          type: 'line',\n          title: '',\n          start: 'end-1day',\n          end: 'now',\n          xTicks: d3.timeHour.every(4)\n        }, seriesConfig);\n\n        let attr;\n        let name;\n        let value;\n        for (let i = 0; i < dataSet.attributes.length; i++) {\n          attr = dataSet.attributes.item(i);\n          // CamelCase attribute names\n          name = attr.name\n            .split('-')\n            .map((part, i) => {\n              if (i > 0) {\n                return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n              }\n              return part;\n            })\n            .join('');\n          value = attr.value;\n          if (value === 'true' || value === 'false') {\n            value = value === 'true';\n          } else if (/^\\d+$/.test(value)) {\n            value = parseInt(value);\n          } else if (/^[\\d.]+$/.test(value)) {\n            value = parseFloat(value);\n          }\n          ts[name] = value;\n        }\n        let start = new Date();\n        start.setTime(start.getTime() - 60 * 60 * 24 * 1000);\n        url = client.getResourcePath('charts', {\n          src: ts.src,\n          start: ts.start,\n          end: ts.end\n        });\n\n        if (!url) {\n          continue;\n        }\n        this._dataSetConfigs[ts.src] = ts;\n        promises.push(\n          cv.io.Fetch.fetch(url, null, false, client)\n            .then(data => {\n              if (client.hasCustomChartsDataProcessor(data)) {\n                data = client.processChartsData(data, ts);\n              }\n              return {\n                data: data,\n                ts: ts\n              };\n            })\n            .catch(err => {\n              this._onStatusError(ts, url, err);\n            })\n        );\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess(data) {\n      if (!this.isVisible()) {\n        return;\n      }\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              src: entry.ts.src,\n              time,\n              value\n            });\n          }\n        }\n      }\n      let minVal = d3.min(chartData, d => +d.value);\n      let maxVal = d3.max(chartData, d => +d.value) + 1;\n      if (minVal > 1.0) {\n        minVal -= 1;\n      }\n\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n      let timeFormat = null;\n      if (this._element.hasAttribute('x-format')) {\n        const formatString = this._element.getAttribute('x-format');\n        timeFormat = date => d3.timeFormat(formatString)(date);\n      } else {\n        // format auto-detection\n        timeFormat = this.multiTimeFormat([\n          [\n            '.%L',\n            function (d) {\n              return d.getMilliseconds();\n            }\n          ],\n\n          [\n            ':%S',\n            function (d) {\n              return d.getSeconds();\n            }\n          ],\n\n          [\n            '%H:%M',\n            function (d) {\n              return d.getMinutes();\n            }\n          ],\n\n          [\n            '%H',\n            function (d) {\n              return d.getHours();\n            }\n          ],\n\n          [\n            '%a %d',\n            function (d) {\n              return d.getDay() && d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%b %d',\n            function (d) {\n              return d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%B',\n            function (d) {\n              return d.getMonth();\n            }\n          ],\n\n          [\n            '%Y',\n            function () {\n              return true;\n            }\n          ]\n        ]);\n      }\n\n\n      this._chart = this._lineChart(chartData, {\n        x: d => d.time,\n        y: d => d.value,\n        z: d => d.src,\n        color: d => {\n          return d && this._dataSetConfigs[d].color;\n        },\n        title: d => {\n          return cv.util.String.sprintf(format, d.value);\n        },\n        chartTitle: this._element.hasAttribute('title') ? this._element.getAttribute('title') : null,\n        //yLabel: ts.unit,\n        xDomain: d3.extent(chartData, d => d.time),\n        yDomain: [minVal, maxVal],\n        showArea: d => {\n          return this._dataSetConfigs[d].showArea;\n        },\n        mixBlendMode: 'normal',\n        xFormat: timeFormat\n      });\n\n      this._loaded = Date.now();\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n       * @param date\n       */\n      function multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), err)\n      });\n\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param c\n     * @private\n     */\n    _lineChart(data, c) {\n      if (!cv.ui.structure.tile.components.Chart.CONFIG) {\n        cv.ui.structure.tile.components.Chart.CONFIG = {\n          x: d => d[0], // given d in data, returns the (temporal) x-value\n          y: d => d[1], // given d in data, returns the (quantitative) y-value\n          z: () => 1, // given d in data, returns the (categorical) z-value\n          chartTitle: undefined, // title for the chart\n          title: undefined, // given d in data, returns the title text\n          defined: undefined, // for gaps in data\n          curve: d3.curveLinear, // method of interpolation between points\n          marginTop: 24, // top margin, in pixels\n          marginRight: 24, // right margin, in pixels\n          marginBottom: 24, // bottom margin, in pixels\n          marginLeft: 30, // left margin, in pixels\n          width: 392, // outer width, in pixels\n          height: 192, // outer height, in pixels\n          xType: d3.scaleTime, // type of x-scale\n          xDomain: undefined, // [xmin, xmax]\n          xRange: undefined, // [left, right]\n          xFormat: undefined, // a format specifier string for the x-axis\n          yType: d3.scaleLinear, // type of y-scale\n          yDomain: undefined, // [ymin, ymax]\n          yRange: undefined, // [bottom, top]\n          yFormat: undefined, // a format specifier string for the y-axis\n          yLabel: undefined, // a label for the y-axis\n          zDomain: undefined, // array of z-values\n          color: 'currentColor', // stroke color of line, as a constant or a function of *z*\n          strokeLinecap: undefined, // stroke line cap of line\n          strokeLinejoin: undefined, // stroke line join of line\n          strokeWidth: 1.5, // stroke width of line\n          strokeOpacity: undefined, // stroke opacity of line\n          mixBlendMode: 'multiply', // blend mode of lines\n          showArea: undefined, // show area below the line,\n          xPadding: 0.1 // amount of x-range to reserve to separate bars\n        };\n      }\n      const config = Object.assign({}, cv.ui.structure.tile.components.Chart.CONFIG, c);\n\n      config.xRange = [config.marginLeft, config.width - config.marginRight]; // [left, right]\n      config.yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n      // Compute values.\n      const X = d3.map(data, config.x);\n      const Y = d3.map(data, config.y);\n      const Z = d3.map(data, config.z);\n      const O = d3.map(data, d => d);\n      if (config.defined === undefined) {\n        config.defined = (d, i) => !isNaN(X[i]) && !isNaN(Y[i]);\n      }\n      //const D = d3.map(data, config.defined);\n\n      // Compute default domains, and unique the z-domain.\n      if (config.xDomain === undefined) {\n        config.xDomain = d3.extent(X);\n      }\n      if (config.yDomain === undefined) {\n        config.yDomain = [0, d3.max(Y, d => (typeof d === 'string' ? +d : d))];\n      }\n      if (config.zDomain === undefined) {\n        config.zDomain = Z;\n      }\n      config.zDomain = new d3.InternSet(config.zDomain);\n\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => config.zDomain.has(Z[i]));\n\n      // Construct scales and axes.\n      const xScale = config.xType(config.xDomain, config.xRange);\n      const yScale = config.yType(config.yDomain, config.yRange);\n      const xAxis = d3\n        .axisBottom(xScale)\n        .ticks(config.width / 80)\n        .tickSizeOuter(0)\n        .tickFormat(config.xFormat);\n      const yAxis = d3.axisLeft(yScale).ticks(config.height / 60, config.yFormat);\n\n      // Compute titles.\n      const T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n\n      d3.select(this._element).select('svg').remove();\n\n      const tooltip = d3.select(this._element)\n        .append('div')\n        .style('opacity', 0)\n        .attr('class', 'tooltip');\n\n      let linePath;\n\n      const pointerMoved = event => {\n        const [xm, ym] = d3.pointer(event);\n        const i = d3.least(I, i => Math.hypot(xScale(X[i]) - xm, yScale(Y[i]) - ym));\n        const scaleFactorX = this._element.offsetWidth / config.width;\n        const scaleFactorY = this._element.offsetHeight / config.height;\n        // closest point\n        dot.attr('transform', `translate(${xScale(X[i])},${yScale(Y[i])})`);\n        if (T) {\n          const ttNode = tooltip.node();\n          const timeString = config.xFormat(new Date(X[i]));\n          const top = ym*scaleFactorY - ttNode.offsetHeight - 40;\n          let left = (xm*scaleFactorX + ttNode.offsetWidth) > this._element.offsetWidth ? xm*scaleFactorX - ttNode.offsetWidth : xm*scaleFactorX;\n\n          const key = Z[i];\n          const lineTitle = this._dataSetConfigs[key] && this._dataSetConfigs[key].title ? this._dataSetConfigs[key].title + ': ' : '';\n          tooltip\n            .html(`${timeString}<br/>${lineTitle}${T[i]}`)\n            .style('left', left + 'px')\n            .style('top', top + 'px');\n        }\n        svg.property('value', O[i]).dispatch('input', { bubbles: true });\n      };\n\n      const pointerEntered = () => {\n        dot.attr('display', null);\n        tooltip.style('opacity', 1);\n      };\n\n      const pointerLeft = ev => {\n        if (ev.relatedTarget !== tooltip.node()) {\n          dot.attr('display', 'none');\n          svg.node().value = null;\n          svg.dispatch('input', {bubbles: true});\n          tooltip.style('opacity', 0);\n        }\n      };\n\n      const svg = d3\n        .select(this._element)\n        .append('svg')\n        .attr('viewBox', [0, 0, config.width, config.height])\n        .attr('style', 'max-width: 100%; height: auto; height: intrinsic;')\n        .style('-webkit-tap-highlight-color', 'transparent')\n        .on('pointerenter', pointerEntered)\n        .on('pointermove', pointerMoved)\n        .on('pointerleave', pointerLeft)\n        .on(\n          'touchmove',\n          event => {\n            let y = event.targetTouches[0].clientY;\n            if (linePath) {\n              const pathRect = linePath.node().getBoundingClientRect();\n              if (y > pathRect.y && y < pathRect.y + pathRect.height) {\n                event.preventDefault();\n              }\n            }\n          },\n          { passive: false }\n        );\n\n      const showXAxis = !this._element.hasAttribute('show-x-axis') || this._element.getAttribute('show-x-axis') === 'true';\n      const showYAxis = !this._element.hasAttribute('show-y-axis') || this._element.getAttribute('show-y-axis') === 'true';\n      if (showXAxis) {\n        svg\n          .append('g')\n          .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n          .call(xAxis);\n      }\n      if (showYAxis) {\n        svg\n          .append('g')\n          .attr('transform', `translate(${config.marginLeft},0)`)\n          .call(yAxis)\n          .call(g => g.select('.domain').remove())\n          .call(g =>\n            g\n              .append('text')\n              .attr('x', -config.marginLeft)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(config.yLabel)\n          );\n      }\n\n      if (config.chartTitle) {\n        svg.append('text')\n          .attr('x', (config.width / 2))\n          .attr('y', config.marginTop)\n          .attr('class', 'chart-title')\n          .text(config.chartTitle);\n      }\n\n      const lineGroups = new Map();\n      const areaGroups = new Map();\n      const barGroups = new Map();\n      for (let i of I) {\n        const key = Z[i];\n        if (typeof config.showArea === 'function' && config.showArea(key)) {\n          if (!areaGroups.has(key)) {\n            areaGroups.set(key, []);\n          }\n          areaGroups.get(key).push(i);\n        }\n        switch (this._dataSetConfigs[key].type) {\n          case 'line':\n            if (!lineGroups.has(key)) {\n              lineGroups.set(key, []);\n            }\n            lineGroups.get(key).push(i);\n            break;\n\n          case 'bar':\n            if (!barGroups.has(key)) {\n              barGroups.set(key, []);\n            }\n            barGroups.get(key).push(i);\n            break;\n        }\n      }\n\n      if (lineGroups.size > 0) {\n        // Construct a line generator.\n        const line = d3\n          .line()\n          //.defined(i => D[i])\n          .curve(config.curve)\n          .x(i => xScale(X[i]))\n          .y(i => yScale(Y[i]));\n\n        linePath = svg\n          .append('g')\n          .attr('fill', 'none')\n          .attr('stroke', typeof config.color === 'string' ? config.color : null)\n          .attr('stroke-linecap', config.strokeLinecap)\n          .attr('stroke-linejoin', config.strokeLinejoin)\n          .attr('stroke-width', config.strokeWidth)\n          .attr('stroke-opacity', config.strokeOpacity)\n          .selectAll('path')\n          .data(lineGroups)\n          .join('path')\n          .style('mix-blend-mode', config.mixBlendMode)\n          .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          .attr('d', d => line(d[1]));\n      }\n\n      // Add the area\n      if (areaGroups.size > 0) {\n        const area = d3\n          .area()\n          //.defined(i => D[i])\n          .curve(config.curve)\n          .x(i => xScale(X[i]))\n          .y0(() => config.yRange[0])\n          .y1(i => yScale(Y[i]));\n\n        svg\n          .append('g')\n          .attr('stroke', 'none')\n          .attr('fill', typeof config.color === 'string' ? config.color + '30' : null)\n          .selectAll('path')\n          .data(areaGroups)\n          .join('path')\n          .style('mix-blend-mode', config.mixBlendMode)\n          .attr('fill', typeof config.color === 'function' ? p => config.color(p[0]) + '30' : null)\n          .attr('d', d => area(d[1]));\n      }\n\n      if (barGroups.size > 0) {\n        const xBarScale = d3.scaleBand().domain(X).range(config.xRange).padding(config.xPadding);\n        svg\n          .append('g')\n          .selectAll('g')\n          .data(barGroups)\n          .join('g')\n          .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) + '30' : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n          .attr('x', d => xBarScale(X[d.value]))\n          .attr('y', d => yScale(Y[d.value]))\n          .attr('height', d => config.yRange[0] - yScale(Y[d.value]))\n          .attr('width', xBarScale.bandwidth());\n      }\n\n      const dot = svg.append('g').attr('display', 'none').attr('fill', 'currentColor');\n\n      dot.append('circle').attr('r', 2.5);\n\n      dot\n        .append('text')\n        .attr('font-family', 'sans-serif')\n        .attr('font-size', 10)\n        .attr('text-anchor', 'middle')\n        .attr('y', -8);\n\n      return Object.assign(svg.node(), { value: null });\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._chart = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'chart',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Color.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a html color input\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Color', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MResize,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    CC_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __colorChooser: null,\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      }\n\n      // init components\n      const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'popup';\n      if (mode === 'popup') {\n        let popup = element.querySelector(':scope > cv-popup');\n        if (!popup) {\n          popup = document.createElement('cv-popup');\n          popup.setAttribute('modal', 'true');\n          if (element.hasAttribute('title')) {\n            popup.setAttribute('title', element.getAttribute('title'));\n          }\n          const addresses = {};\n          for (const elem of element.querySelectorAll(':scope > cv-address')) {\n            let src = elem.textContent;\n            let transform = elem.getAttribute('transform');\n            let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n            switch (elem.getAttribute('mode')) {\n              case 'disable':\n                mode = 0;\n                break;\n              case 'read':\n                mode = 1;\n                break;\n              case 'write':\n                mode = 2;\n                break;\n              case 'readwrite':\n                mode = 1 | 2;\n                break;\n            }\n            let variantInfo = cv.parser.pure.widgets.ColorChooser.makeAddressListFn(src, transform, mode, elem.getAttribute('variant'));\n            addresses[src.trim()] = {\n              transform: transform,\n              mode: mode,\n              variantInfo: variantInfo[1]\n            };\n          }\n          cv.ui.structure.tile.components.Color.CC_COUNTER++;\n          const path = 'id_0_'+cv.ui.structure.tile.components.Color.CC_COUNTER;\n          const props = {\n            path: path,\n            $$type: 'colorchooser',\n            classes: 'widget colorchooser',\n            layout: {\n              colspan: 1\n            },\n            controls: element.hasAttribute('controls') ? element.getAttribute('controls') : 'triangle',\n            address: addresses,\n            throttleInterval: this.getThrottleInterval()\n          };\n          cv.parser.pure.widgets.ColorChooser.parseAttributes(element, props);\n          this.__colorChooser = new cv.ui.structure.pure.ColorChooser(props);\n          this.__colorChooser.addListener('colorChanged', this._onColorChanged, this);\n          this._onColorChanged();\n          popup.innerHTML = `<div class=\"widget_container\" style=\"margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center\" id=\"${path}\" data-type=\"colorchooser\">${this.__colorChooser.getDomString()}</div>`;\n          element.appendChild(popup);\n          element.addEventListener('click', ev => {\n            if (ev.path.indexOf(popup) < 0) {\n              popup.getInstance().open();\n            }\n          });\n          qx.event.Timer.once(() => {\n            this.__colorChooser._onDomReady();\n          }, this, 0);\n\n          this.setResizeTarget(popup);\n          this.addListener('resized', () => {\n            this.__colorChooser.invalidateScreensize();\n          });\n        }\n      }\n    },\n\n    _onColorChanged() {\n      const color = this.__colorChooser.getColor();\n      const rgb = color.getComponent('rgb');\n      const v = color.getComponent('v');\n      this.setValue(\n        `#${this.__convertToHex(rgb.r)}${this.__convertToHex(rgb.g)}${this.__convertToHex(rgb.b)}${this.__convertToHex(v)}`\n      );\n    },\n\n    __convertToHex(v) {\n      return Math.round(v * 255)\n        .toString(16)\n        .padStart(2, '0');\n    },\n\n    _updateValue(mappedValue, value) {\n      let target = this._element.querySelector(':scope > .value');\n      const rgb = mappedValue.substring(0, 7);\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        const alpha = mappedValue.length === 9 ? parseInt(mappedValue.substring(7, 9), 16) / 255 : 1.0;\n\n        switch (tagName) {\n          case 'cv-icon':\n            target.style.color = rgb;\n            target.style.opacity = Math.max(alpha, 0.2); // do not blend it out totally\n            break;\n        }\n      } else {\n        // only if we do not have another value handler\n        this._element.style.backgroundColor = mappedValue;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._disposeObjects('__colorChooser');\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'color',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Icon.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.components.Icon', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._idRegex = /^[^\\s]+$/;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyId',\n      // the id is used as 'class' property and therefore must not have spaces\n      transform: '_transformId'\n    },\n\n    color: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __initialized: false,\n    _idRegex: null,\n\n    _transformId(value) {\n      if (this._idRegex.test(value)) {\n        return value;\n      }\n      this.error('invalid icon id:', value);\n      return null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.textContent.trim()) {\n        this.__initialized = true;\n        this.setId(element.textContent.trim());\n      } else {\n        const it = element.classList.values();\n        for (let name of it) {\n          if (name.startsWith('ri-') || name.startsWith('knxuf-')) {\n            this.setId(name);\n            break;\n          }\n        }\n      }\n      this.__initialized = true;\n    },\n\n    _applyId(value, oldValue) {\n      const element = this._element;\n      if (this.__initialized) {\n        if (oldValue) {\n          element.classList.remove(oldValue);\n        }\n        if (value) {\n          // default is an icon font that uses CSS classes\n          element.classList.add(value);\n          if (element.textContent) {\n            element.textContent = '';\n          }\n        }\n      }\n    },\n\n    _applyColor(value, oldValue) {\n      const element = this._element;\n      if (oldValue) {\n        element.classList.remove(oldValue);\n      }\n      if (value) {\n        element.classList.add(value);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'icon',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n\n        static get observedAttributes() {\n          return ['color'];\n        }\n      }\n    );\n  }\n});\n","/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an image.\n *\n * HINT: Proxy mode needs an PHP environment with php-curl installed.\n */\nqx.Class.define('cv.ui.structure.tile.components.Image', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n\n    _init() {\n      const element = this._element;\n      let img = element.querySelector(':scope > img');\n      if (!img) {\n        img = document.createElement('img');\n        element.appendChild(img);\n      }\n      element.addEventListener('click', () => this.refresh());\n      let src = element.getAttribute('src');\n      let base = window.location.origin;\n      if (src.substring(0, 1) !== '/' && src.substring(0, 4) !== 'http') {\n        // relative url\n        base += window.location.pathname;\n      }\n      this._url = new URL(src, base);\n      const useProxy = element.hasAttribute('proxy') && element.getAttribute('proxy') === 'true';\n      if (useProxy) {\n        this._url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n\n        this._url.searchParams.set('url', element.getAttribute('src'));\n      }\n      this._headers = {};\n      if (element.hasAttribute('auth-type')) {\n        if (useProxy) {\n          this._url.searchParams.set('auth-type', element.getAttribute('auth-type').toLowerCase());\n        } else {\n          switch (element.getAttribute('auth-type').toLowerCase()) {\n            case 'basic':\n              this._headers['Authorization'] = 'Basic ' + window.btoa(element.getAttribute('username') + ':' + element.getAttribute('password'));\n              break;\n\n            case 'bearer':\n              this._headers['Authorization'] = 'Bearer ' + element.getAttribute('username');\n              break;\n\n            default:\n              this.error('unknown authorization type' +  element.getAttribute('auth-type'));\n              break;\n          }\n        }\n      }\n      this._loadImage();\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n    },\n\n    _loadImage() {\n      let img = this._element.querySelector(':scope > img');\n      if (Object.keys(this._headers).length > 0) {\n        let request = new XMLHttpRequest();\n        request.responseType = 'blob';\n        request.open('get', this._url.toString(), true);\n        Object.keys(this._headers).forEach(name => {\n          request.setRequestHeader(name, this._headers[name]);\n        });\n        request.onreadystatechange = e => {\n          if (request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            img.src = URL.createObjectURL(request.response);\n            img.onload = () => {\n              URL.revokeObjectURL(img.src);\n            };\n          }\n        };\n        request.send(null);\n      } else {\n        img.src = this._url.toString();\n      }\n    },\n\n    refresh() {\n      let img = this._element.querySelector(':scope > img');\n      if (img) {\n        this._url.searchParams.set('r', '' + Math.random());\n        this._loadImage();\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'refresh') {\n          if (ev.detail.state) {\n            this.refresh();\n          }\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'image',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* List.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a list of items. A &lt;template&gt;-element defines the content of the list-items and a model is used to\n * generate those items and apply the models content to the list-items.\n * It allows custom Javascript code in a &lt;script&gt;-Element to fill the model or address-Elements as model source.\n * The model can be refreshed in a time defined interval, which is set by the 'refresh' attribute.\n *\n * @widgetexample <settings>\n *    <caption>Example list</caption>\n *    <screenshot name=\"list_simple\"/>\n *  </settings>\n    <cv-list refresh=\"10\">\n      <model>\n        <script><![CDATA[\n         for (let i = 0; i < Math.round(Math.random()*10); i++) {\n           model.push({\n             label: 'This is list item no ' + i,\n             subLabel: 'Sublabel number ' + i\n           })\n         }\n         ]]>\n         </script>\n       </model>\n       <template>\n         <li>\n           <label class=\"primary\">${label}</label>\n           <label class=\"secondary\">${subLabel}</label>\n         </li>\n       </template>\n       <template when=\"empty\">\n         <li>\n           <label class=\"primary\">Model is empty!</label>\n         </li>\n       </template>\n   </cv-list>\n */\nqx.Class.define('cv.ui.structure.tile.components.List', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      refine: true,\n      init: []\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _timer: null,\n    _model: null,\n    _getModel: null,\n    _filterModel: null,\n    _sortModel: null,\n    _limit: null,\n    _modelInstance: null,\n\n    _init() {\n      const element = this._element;\n      this._model = [];\n      let refreshOnUpdate = false;\n      const model = element.querySelector('model');\n      if (!model) {\n        this.error('cv-list needs a model');\n        return;\n      }\n      if (model.hasAttribute('filter')) {\n        this._filterModel = new Function('item', 'index', '\"use strict\"; return ' + model.getAttribute('filter'));\n      }\n      if (model.hasAttribute('limit')) {\n        this._limit = parseInt(model.getAttribute('limit'));\n      }\n      const readAddresses = model.querySelectorAll(':scope > cv-address:not([mode=\"write\"])');\n\n      // if we have top level write addresses, we need to listen to sendState Events from the list items\n      for (let address of element.querySelectorAll(':scope > cv-address')) {\n        if (address.getAttribute('mode') !== 'read') {\n          element.addEventListener('sendState', ev => {\n            // forward event copy (dispatching the same is not possible) to all write addresses\n            const evCopy = new CustomEvent('sendState', {\n              bubbles: ev.bubbles,\n              cancelable: ev.cancelable,\n              detail: ev.detail\n            });\n            for (let a of element.querySelectorAll(':scope > cv-address')) {\n              a.dispatchEvent(evCopy);\n            }\n          });\n          break;\n        }\n      }\n\n      if (model.hasAttribute('sort-by')) {\n        const sortBy = model.getAttribute('sort-by');\n        // reverse order in 'desc' sort mode\n        const sortModifier = model.getAttribute('sort-mode') === 'desc' ? -1 : 1;\n        this._sortModel = (left, right) => {\n          const leftVal = left[sortBy];\n          const rightVal = right[sortBy];\n          if (leftVal === rightVal) {\n            return 0;\n          } else if (typeof leftVal === typeof rightVal) {\n            switch (typeof leftVal) {\n              case 'number':\n                return (leftVal - rightVal) * sortModifier;\n\n              case 'boolean':\n                return (leftVal ? -1 : 1) * sortModifier;\n\n              case 'string':\n                return leftVal.localeCompare(rightVal) * sortModifier;\n\n              default:\n                return JSON.stringify(leftVal).localeCompare(JSON.stringify(rightVal)) * sortModifier;\n            }\n          } else if (leftVal === undefined || leftVal === null) {\n            return 1 * sortModifier;\n          } else if (rightVal === undefined || rightVal === null) {\n            return -1 * sortModifier;\n          }\n          return 0;\n        };\n      }\n      if (model.hasAttribute('src') || model.hasAttribute('config-section')) {\n        // fetch from url\n        this._getModel = async () => {\n          const options = {};\n          for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n            if (model.hasAttribute(proxyParam)) {\n              options[proxyParam] = model.getAttribute(proxyParam);\n            }\n          }\n          const res = await cv.io.Fetch.fetch(model.getAttribute('src'), options, model.getAttribute('proxy') === 'true');\n          return res;\n        };\n      } else if (model.hasAttribute('class')) {\n        // initialize internal class instance that implements cv.io.listmodel.IListModel\n        const Clazz = cv.io.listmodel.Registry.get(model.getAttribute('class'));\n        if (Clazz) {\n          const modelInstance = new Clazz();\n          if (model.hasAttribute('parameters')) {\n            const props = {};\n            for (let entry of model.getAttribute('parameters').split(',')) {\n              const [name, value] = entry.split('=').map(n => n.trim());\n              props[name] = value.startsWith('\\'') ? value.substring(1, value.length-1) : value;\n            }\n            modelInstance.set(props);\n          }\n          this._getModel = async () => {\n            await modelInstance.refresh();\n            return modelInstance.getModel();\n          };\n        } else {\n          this.error(`clazz \"cv.io.listmodel.${model.getAttribute('class')}\" not found`);\n        }\n      } else {\n        const script = model.querySelector(':scope > script');\n        const data = model.querySelectorAll(':scope > cv-data');\n        if (script) {\n          this._getModel = new Function('\"use strict\";let model = []; ' + script.innerText.trim() + '; return model');\n\n          this._model = this._getModel();\n        } else if (readAddresses.length > 0) {\n          // model has an address that triggers a refresh on update, so we just have to read the model from the updated value\n          this._getModel = this.getValue;\n          refreshOnUpdate = true;\n        } else if (data.length > 0) {\n          this._model = [];\n          this._getModel = () => this._model;\n          data.forEach((elem, i) => {\n            const d = {\n              index: i\n            };\n\n            for (const a of elem.attributes) {\n              d[a.name] = a.value;\n            }\n            this._model.push(d);\n          });\n        } else {\n          this.error(\n            'cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.'\n          );\n\n          return;\n        }\n      }\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => this.onStateUpdate(ev));\n      }\n      if (!refreshOnUpdate) {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        }\n        if (element.hasAttribute('refresh')) {\n          this.setRefresh(parseInt(element.getAttribute('refresh')));\n        }\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'refresh') {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        } else {\n          // reset lastRefresh to that the refresh get called when this item gets visible\n          this._lastRefresh = null;\n        }\n      } else {\n        super.onStateUpdate(ev);\n      }\n      // cancel event here\n      ev.stopPropagation();\n    },\n\n    _applyValue() {\n      // reset last refresh, because with new data its obsolete\n      this._lastRefresh = 0;\n      this.refresh();\n    },\n\n    async refresh() {\n      const element = this._element;\n      const template = element.querySelector(':scope > template:not([when])');\n      let newModel = [];\n      if (typeof this._getModel === 'function') {\n        newModel = this._getModel();\n      }\n      if (newModel instanceof Promise) {\n        try {\n          newModel = await newModel;\n        } catch (e) {\n          this.error('error refreshing async model:', e);\n        }\n      }\n      let target = element.querySelector(':scope > ul');\n      if (template.getAttribute('wrap') === 'false') {\n        target = element;\n      } else if (template.hasAttribute('target')) {\n        switch (template.getAttribute('target')) {\n          case 'parent':\n            target = element.parentElement;\n            // we do not need the list to be visible then\n            element.style.display = 'none';\n            break;\n          default:\n            throw new Error('invalid target: ' + template.getAttribute('target'));\n        }\n      } else if (!target) {\n        target = document.createElement('ul');\n        target.classList.add('content');\n        element.appendChild(target);\n      }\n      this.debug('refreshing with new model length', newModel.length);\n      if (Array.isArray(newModel) || newModel instanceof qx.data.Array) {\n        if (typeof this._filterModel === 'function') {\n          newModel = newModel.filter(this._filterModel);\n        }\n        if (typeof this._sortModel === 'function') {\n          newModel.sort(this._sortModel);\n        }\n        if (this._limit) {\n          newModel = newModel.slice(0, this._limit);\n        }\n        if (newModel.length === 0) {\n          const whenEmptyTemplate = element.querySelector(':scope > template[when=\"empty\"]');\n\n          if (whenEmptyTemplate && !target.querySelector(':scope > .empty-model')) {\n            while (target.firstElementChild && target.firstElementChild.hasAttribute('data-row')) {\n              target.removeChild(target.firstElementChild);\n            }\n            const emptyModel = whenEmptyTemplate.content.firstElementChild.cloneNode(true);\n            emptyModel.classList.add('empty-model');\n            target.appendChild(emptyModel);\n            return;\n          }\n        } else {\n          const emptyElem = target.querySelector(':scope > .empty-model');\n          if (emptyElem) {\n            emptyElem.remove();\n          }\n        }\n        const itemTemplate = document.createElement('template');\n        // remove entries we do not need anymore\n        for (let i = newModel.length; i < this._model.length; i++) {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          if (elem) {\n            elem.remove();\n          }\n        }\n\n        const getValue = (name, entry) => {\n          let index = -1;\n          if (name.endsWith(']')) {\n            // array access\n            index = parseInt(name.substring(name.indexOf('[') + 1, name.length - 1));\n            if (isNaN(index)) {\n              this.error(\n                'error parsing array index from ' + name,\n                name.substring(name.indexOf('[') + 1, name.length - 1)\n              );\n              return '';\n            }\n            name = name.substring(0, name.indexOf('['));\n          }\n          if (Object.prototype.hasOwnProperty.call(entry, name)) {\n            let val = entry[name];\n            if (index >= 0 && Array.isArray(val)) {\n              return val[index];\n            }\n            return val;\n          }\n          return '';\n        };\n        newModel.forEach((entry, i) => {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          const html = template.innerHTML.replaceAll(/\\${([^}]+)}/g, (match, content) => {\n            if (content === 'index') {\n              return '' + i;\n            }\n            if (content.includes('||')) {\n              // elements are or'ed use the first one with value\n              let val = '';\n              for (let name of content.split('||').map(n => n.trim())) {\n                val = getValue(name, entry);\n                if (val) {\n                  return val;\n                }\n              }\n            }\n            return getValue(content, entry);\n          });\n\n          itemTemplate.innerHTML = html;\n          // check for elements with when attributes\n          itemTemplate.content.firstElementChild.querySelectorAll('[when]').forEach(elem => {\n            const [leftVal, rightVal] = elem\n              .getAttribute('when')\n              .split('=')\n              .map(n => n.trim());\n            // noinspection EqualityComparisonWithCoercionJS\n            if (leftVal != rightVal) {\n              elem.parentElement.removeChild(elem);\n            } else {\n              elem.removeAttribute('when');\n            }\n          });\n          if (elem) {\n            // update existing\n            elem.innerHTML = itemTemplate.content.firstElementChild.innerHTML;\n            elem.setAttribute('data-row', '' + i);\n          } else {\n            // append new child\n            itemTemplate.content.firstElementChild.setAttribute('data-row', '' + i);\n\n            target.appendChild(itemTemplate.content.cloneNode(true));\n          }\n        });\n        this._model = newModel;\n      } else {\n        this.error('model must be an array', newModel);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_modelInstance', '_timer');\n    this._model = null;\n    this._filterModel = null;\n    this._sortModel = null;\n    this._target = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'list',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an item in a list.\n */\nqx.Class.define('cv.ui.structure.tile.components.ListItem', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      // install fireEvent function\n      this._element.fireEvent = (name, value) => {\n        const ev = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            value: value,\n            source: this\n          }\n        });\n        this._element.dispatchEvent(ev);\n      };\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'listitem',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: ['pages', 'menuItems'],\n      apply: '_applyModel'\n    },\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n\n    showLabels: {\n      check: 'Boolean',\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _applyModel(model) {\n      if (model) {\n        const rootList = document.createElement('ul');\n        this._element.appendChild(rootList);\n\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n\n        if (model === 'pages') {\n          // add hamburger menu\n          const ham = document.createElement('a');\n          ham.href = '#';\n          ham.classList.add('menu');\n          ham.onclick = event => this._onHamburgerMenu(event);\n          const icon = document.createElement('i');\n\n          ham.appendChild(icon);\n          this._element.appendChild(ham);\n\n          qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n          qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n          qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n          icon.classList.add('ri-menu-line');\n        } else if (model === 'menuItems') {\n          // add hamburger menu\n          const icon = document.createElement('i');\n          icon.classList.add('ri-more-2-fill');\n          this._element.appendChild(icon);\n          // listen on whole element\n          this._element.onclick = event => this._onHamburgerMenu(event);\n          rootList.classList.add('context-menu');\n          this._generateMenu();\n        }\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.hasAttribute('model') ? element.getAttribute('model')\n        : (element.querySelectorAll(':scope > cv-menu-item').length > 0) ? 'menuItems' : null;\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      this.setModel(model);\n    },\n\n    _generateMenu() {\n      switch (this.getModel()) {\n        case 'pages': {\n          const currentPage = window.location.hash.substring(1);\n          let parentElement = document.querySelector('main');\n          if (parentElement) {\n            const firstPage = document.querySelector('cv-page');\n            if (firstPage) {\n              parentElement = firstPage.parentElement;\n            }\n          }\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n          }\n          break;\n        }\n        case 'menuItems': {\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            for (let item of this._element.querySelectorAll(':scope > cv-menu-item')) {\n              const pageName = item.getAttribute('name') || '';\n              const pageIcon = item.getAttribute('icon') || '';\n              const li = document.createElement('li');\n              if (pageIcon) {\n                const i = document.createElement('i');\n                i.classList.add(pageIcon);\n                i.title = pageName;\n                li.appendChild(i);\n              }\n              if (this.isShowLabels()) {\n                const text = document.createTextNode(pageName);\n                li.appendChild(text);\n              }\n              li.addEventListener('click', event => {\n                item.getInstance().onClick(event);\n              });\n              rootList.appendChild(li);\n            }\n          }\n          break;\n        }\n      }\n    },\n\n    _onHamburgerMenu(event) {\n      let toggleClass = 'open';\n      if (this.getModel() === 'pages') {\n        toggleClass = 'responsive';\n        for (let detail of this._element.querySelectorAll('details')) {\n          detail.setAttribute('open', '');\n        }\n      }\n      this._element.classList.toggle(toggleClass);\n      event.stopPropagation();\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (\n        target.classList.contains('menu') ||\n        (target.parentElement && target.parentElement.classList.contains('menu')) ||\n        target.nodeName.toLowerCase() === 'cv-menu' ||\n        (target.parentElement && target.parentElement.nodeName.toLowerCase() === 'cv-menu')\n      ) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== 'summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 100);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (\n          current &&\n          current.previousElementSibling &&\n          current.previousElementSibling.tagName.toLowerCase() === 'li'\n        ) {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('open')) {\n        this._element.classList.remove('open');\n      } else if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n    },\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels()) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if (\n          (depth < 0 || depth > currentLevel) &&\n          page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0\n        ) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          summary.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              details.removeAttribute('open');\n            } else {\n              details.setAttribute('open', '');\n            }\n          });\n          a.addEventListener('click', ev => {\n            // only stop propagation if we are not close to the right border\n            if (ev.pointerType !== 'touch' || ev.currentTarget.clientWidth - ev.offsetX >= 8) {\n              ev.stopPropagation();\n            }\n          });\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n          }\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel++);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[href=\"#${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n        static get observedAttributes() {\n          return ['appearance', 'depth'];\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Represents an action that should be executed when the related menu item has been clicked.\n */\nqx.Class.define('cv.ui.structure.tile.components.MenuAction', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _currentState: null,\n\n    _init() {\n      super._init();\n      const action = this._element.getAttribute('action');\n      switch (action) {\n        case 'toggleState': {\n          let hasAddress = false;\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            hasAddress = true;\n            if (address.getAttribute('mode') !== 'write') {\n              this._element.addEventListener('stateUpdate', ev => {\n                this.onStateUpdate(ev);\n                // cancel event here\n                ev.stopPropagation();\n              });\n            }\n          }\n          if (!hasAddress) {\n            this.error('a cv-menu-item with action \"toggleState\" needs at least one cv-address to read the write the state,');\n          }\n          break;\n        }\n        case 'popup':\n          if (!this._element.querySelector(':scope > cv-popup')) {\n            this.error('a cv-menu-item with action \"popup\" must have a cv-popup as child.');\n          }\n          break;\n      }\n    },\n\n    onClick(event) {\n      switch (this._element.getAttribute('action')) {\n        case 'popup': {\n          const popup = this._element.querySelector(':scope > cv-popup');\n          if (popup) {\n            popup.getInstance().open();\n          }\n          event.stopPropagation();\n          break;\n        }\n        case 'toggleState': {\n          const ev = new CustomEvent('sendState', {\n            detail: {\n              value: !this._currentState,\n              source: this\n            }\n          });\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            if (address.getAttribute('mode') !== 'read') {\n              address.dispatchEvent(ev);\n            }\n          }\n          event.stopPropagation();\n          break;\n        }\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == '1';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      this._currentState = value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu-item',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let baseName in cv.plugins) {\n            if (baseName.toLowerCase() === name) {\n              Clazz = cv.plugins[baseName];\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            const props = Clazz.parse(this._element.firstElementChild, id, '', 'text');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          } else {\n            this.error('no main plugin class found for ' + pluginName);\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* RoundProgress.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a round progress bar (partially filled circle).\n * This component must be used inside a cv-value component, it is not meant to be used standalone.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.RoundProgress', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    text: {\n      check: 'String',\n      apply: '_applyText'\n    },\n\n    type: {\n      check: ['circle', 'semiCircle'],\n      init: 'circle'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __writeAddresses: null,\n    __circumference: null,\n    __start: null,\n    __normalizedRadius: null,\n    __radius: null,\n    __label: null,\n    __canvas: null,\n    __availableLabelWidth: null,\n    __defaultLabelFontSize: null,\n    _queuedFitText: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      const style = document.querySelector(':root').style;\n      const hasFixedRadius = element.hasAttribute('radius');\n      const radius = (this.__radius =\n        element.getAttribute('radius') || parseInt(style.getPropertyValue('--tileCellWidth')) || 56);\n      const strokeWidth = element.getAttribute('stroke') || 8;\n      const normalizedRadius = (this.__normalizedRadius = radius - strokeWidth / 2);\n      this.__circumference = normalizedRadius * 2 * Math.PI;\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      const type = this.getType();\n      let height = type === 'semiCircle' ? radius : radius * 2;\n      let code = `<svg height=\"${height}\" width=\"${radius * 2}\" type=\"${type}\">`;\n      if (type === 'circle') {\n        if (!element.hasAttribute('no-background')) {\n          code += `<circle class=\"bg\" \n                r=\"${normalizedRadius}\" \n                cx=\"50%\" \n                cy=\"50%\" \n                fill=\"transparent\" \n                stroke-width=\"${strokeWidth}\"/>`;\n        }\n        code += `<circle class=\"bar\" \n              r=\"${normalizedRadius}\" \n              cx=\"50%\" \n              cy=\"50%\" \n              stroke-width=\"${strokeWidth}\" \n              stroke-dasharray=\"${this.__circumference} ${this.__circumference}\" \n              stroke-dashoffset=\"${this.__circumference}\"/>`;\n      } else if (type === 'semiCircle') {\n        if (!element.hasAttribute('no-background')) {\n          code += `<path class=\"bg\" d=\"M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 1 ${\n            radius * 2 - strokeWidth / 2\n          } ${radius}\" fill=\"transparent\" stroke-width=\"${strokeWidth}\"/>`;\n        }\n        this.__start = {\n          x: strokeWidth / 2,\n          y: radius\n        };\n\n        code += `<path class=\"bar\" d=\"M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 0 ${\n          strokeWidth / 2\n        } ${radius}\" fill=\"transparent\" stroke-width=\"${strokeWidth}\"/>`;\n      }\n      code += '</svg><label></label>';\n      element.innerHTML = code;\n\n      this.__availableLabelWidth = radius * 2 - strokeWidth * 2 - 24;\n\n      if (!hasFixedRadius) {\n        qx.event.message.Bus.subscribe('cv.design.tile.cellWidthChanged', ev => {\n          this.__radius = ev.getData();\n          this.__normalizedRadius = this.__radius - strokeWidth / 2;\n          this.__circumference = this.__normalizedRadius * 2 * Math.PI;\n          height = type === 'semiCircle' ? this.__radius : this.__radius * 2;\n          const svg = element.querySelector(':scope > svg');\n          svg.setAttribute('height', '' + height);\n          svg.setAttribute('width', '' + this.__radius * 2);\n          if (type === 'circle') {\n            this._element.querySelectorAll(':scope > svg > circle').forEach(circle => {\n              circle.setAttribute('r', '' + this.__normalizedRadius);\n              if (circle.classList.contains('bar')) {\n                circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n                circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n              }\n            });\n          } else if (type === 'semiCircle') {\n            this.__start.y = this.__radius;\n            const bg = this._element.querySelector(':scope > svg > path.bg');\n            if (bg) {\n              bg.setAttribute(\n                'd',\n                `M ${strokeWidth / 2} ${this.__radius} A ${this.__normalizedRadius} ${this.__normalizedRadius} 0 0 1 ${\n                  this.__radius * 2 - strokeWidth / 2\n                } ${this.__radius}`\n              );\n            }\n          }\n          this._applyProgress(this.isPropertyInitialized('progress') ? this.getProgress() : 0);\n        });\n      }\n    },\n\n    __convert(angle) {\n      const angleRad = angle * (Math.PI / 180.0);\n      return {\n        x: this.__radius - this.__normalizedRadius * Math.cos(angleRad),\n        y: this.__radius - this.__normalizedRadius * Math.sin(angleRad)\n      };\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueElement;\n        let end;\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n\n        switch (this.getType()) {\n          case 'circle':\n            valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n            valueElement.setAttribute(\n              'stroke-dashoffset',\n              '' + this.__circumference - (percent / 100) * this.__circumference\n            );\n\n            break;\n\n          case 'semiCircle':\n            valueElement = this._element.querySelector(':scope > svg > path.bar');\n\n            end = this.__convert((180 / 100) * percent);\n            valueElement.setAttribute(\n              'd',\n              [\n                'M',\n                this.__start.x,\n                this.__start.y,\n                'A',\n                this.__normalizedRadius,\n                this.__normalizedRadius,\n                0,\n                0,\n                1,\n                end.x,\n                end.y\n              ].join(' ')\n            );\n\n            break;\n        }\n      }\n    },\n\n    _fitText() {\n      if (this.__label && this.__label.textContent) {\n        if (this.isVisible()) {\n          if (!this.__canvas) {\n            this.__canvas = document.createElement('canvas');\n            this.__context = this.__canvas.getContext('2d');\n            const compStyle = window.getComputedStyle(this.__label);\n            this.__context.font = compStyle.getPropertyValue('font');\n            this.__defaultLabelFontSize = compStyle.getPropertyValue('font-size');\n          }\n          const metrics = this.__context.measureText(this.__label.textContent);\n          if (metrics.width > this.__availableLabelWidth) {\n            // adjust font-size\n            const factor = this.__availableLabelWidth / metrics.width;\n            this.__label.style.fontSize = Math.floor(parseInt(this.__defaultLabelFontSize) * factor) + 'px';\n          } else {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n          this._queuedFitText = false;\n        } else {\n          this._queuedFitText = true;\n        }\n      }\n    },\n\n    _applyVisible(visible) {\n      if (visible && this._queuedFitText) {\n        this._fitText();\n      }\n    },\n\n    _applyText(value) {\n      if (this.isConnected()) {\n        if (!this.__label) {\n          this.__label = this._element.querySelector(':scope > label');\n        }\n        this.__label.textContent = value;\n        if (!value) {\n          // empty text, just reset to default font size\n          if (this.__defaultLabelFontSize) {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n        } else {\n          this._fitText();\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__label = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'round-progress',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Select.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Allows the selection of one element out of a list of <cv-option> elements\n */\nqx.Class.define('cv.ui.structure.tile.components.Select', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __options: null,\n    __value: null,\n    __popup: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this.__options = new Map();\n\n      const popup = (this.__popup = document.createElement('div'));\n      popup.classList.add('popup');\n      element.querySelectorAll(':scope > cv-option').forEach((option, i) => {\n        popup.appendChild(option);\n        if (!option.hasAttribute('key')) {\n          option.setAttribute('key', '' + i);\n        }\n        this.__options.set(option.getAttribute('key'), option);\n      });\n      const value = (this.__value = document.createElement('span'));\n      value.classList.add('value');\n      element.appendChild(value);\n      element.appendChild(popup);\n      const handle = document.createElement('cv-icon');\n      handle.classList.add('dropdown');\n      handle.classList.add('ri-arrow-down-s-line');\n      element.appendChild(handle);\n\n      if (this._writeAddresses.length > 0) {\n        element.addEventListener('click', ev => this.onClicked(ev));\n      }\n    },\n\n    onClicked(ev) {\n      const style = getComputedStyle(this.__popup);\n      for (let target of ev.path) {\n        if (target.tagName.toLowerCase() === 'cv-option') {\n          // select this option\n          this._sendSelection(target.getAttribute('key'), true);\n          break;\n        }\n        if (target === ev.currentTarget) {\n          break;\n        }\n      }\n      // open popup\n      if (style.getPropertyValue('display') === 'none') {\n        this.__popup.style.display = 'block';\n      } else {\n        this.__popup.style.display = 'none';\n      }\n    },\n\n    _sendSelection(key, predictive) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: key,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      if (predictive === true) {\n        this.setValue(key);\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this.__options.has(mappedValue)) {\n        this.__value.innerHTML = '';\n        const current = this.__options.get(mappedValue);\n        if (current.children.length > 0) {\n          // if we have non text children, we only use them (only icons no text)\n          for (const child of current.children) {\n            this.__value.appendChild(child.cloneNode());\n          }\n        } else {\n          this.__value.innerHTML = current.innerHTML;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'select',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Slider.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a range slider.\n */\nqx.Class.define('cv.ui.structure.tile.components.Slider', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 5\n    },\n\n    min: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyMin'\n    },\n\n    max: {\n      check: 'Number',\n      init: 100,\n      apply: '_applyMax'\n    },\n\n    showValue: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowValue'\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __throttled: null,\n    __input: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      } else {\n        this._applyThrottleInterval(this.getThrottleInterval());\n      }\n\n      // init components\n      let input = element.querySelector(':scope > input');\n      if (!input) {\n        input = document.createElement('input');\n        input.classList.add('slider');\n        input.setAttribute('type', 'range');\n        element.insertBefore(input, element.querySelector(':scope > .up'));\n        input.oninput = () => this.__throttled.call();\n      }\n      this.__input = input;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseInt(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('min')) {\n        this.setMin(parseInt(element.getAttribute('min')));\n      }\n      if (element.hasAttribute('max')) {\n        this.setMax(parseInt(element.getAttribute('max')));\n      }\n      if (element.hasAttribute('hide-value') && element.getAttribute('hide-value') === 'true') {\n        this.setShowValue(false);\n      } else {\n        this._applyShowValue(true);\n      }\n\n      const decreaseElement = element.querySelector(':scope > .decrease');\n      if (decreaseElement) {\n        decreaseElement.addEventListener('click', ev => this.onDecrease());\n      }\n      const increaseElement = element.querySelector(':scope > .increase');\n      if (increaseElement) {\n        increaseElement.addEventListener('click', ev => this.onIncrease());\n      }\n    },\n\n    _applyThrottleInterval(value) {\n      if (value > 0) {\n        this.__throttled = cv.util.Function.throttle(this.onInput, value, { trailing: true }, this);\n      } else {\n        // no throttling, direct call\n        this.__throttled = {\n          call: () => this.onInput(),\n          abort: () => {}\n        };\n      }\n    },\n\n    _applyMin(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('min', '' + value);\n    },\n\n    _applyMax(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('max', '' + value);\n    },\n\n    _applyShowValue(value) {\n      let valueLabel = this._element.querySelector(':scope > label.value');\n      if (value) {\n        if (!valueLabel) {\n          valueLabel = document.createElement('label');\n          valueLabel.classList.add('value');\n          valueLabel.classList.add('secondary');\n          this._element.insertBefore(valueLabel, this._element.firstChild);\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector(':scope > input');\n      if (target) {\n        target.value = value;\n      }\n      if (this.isShowValue()) {\n        let valueLabel = this._element.querySelector(':scope > label.value');\n        if (valueLabel) {\n          valueLabel.innerText = mappedValue;\n        }\n      }\n    },\n\n    onInput() {\n      this.__sendValue(this.__input.value);\n    },\n\n    onDecrease() {\n      const value = this.getValue() - this.getStepWidth();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getValue() + this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'slider',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Spinner.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a number value that can be increased and decreased by a defined step width.\n */\nqx.Class.define('cv.ui.structure.tile.components.Spinner', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 1.0\n    },\n\n    mode: {\n      check: ['relative', 'absolute'],\n      init: 'absolute'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseFloat(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('mode')) {\n        this.setMode(element.getAttribute('mode'));\n      }\n      // init components\n      let valueElement = element.querySelector(':scope > .value');\n      if (!valueElement) {\n        valueElement = document.createElement('label');\n        valueElement.classList.add('value');\n        valueElement.classList.add('primary');\n        element.appendChild(valueElement);\n      }\n      // add increase / decrease buttons\n      const decrease = document.createElement('div');\n      decrease.classList.add('clickable');\n      decrease.classList.add('left');\n      const decreaseIcon = document.createElement('cv-icon');\n      decreaseIcon.classList.add('ri-arrow-down-s-line');\n      decrease.addEventListener('click', () => this.onDecrease());\n      decrease.appendChild(decreaseIcon);\n      element.insertBefore(decrease, valueElement);\n\n      const increase = document.createElement('div');\n      increase.classList.add('clickable');\n      increase.classList.add('right');\n      const increaseIcon = document.createElement('cv-icon');\n      increaseIcon.classList.add('ri-arrow-up-s-line');\n      increase.appendChild(increaseIcon);\n      increase.addEventListener('click', () => this.onIncrease());\n      element.appendChild(increase);\n    },\n\n    onDecrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() - this.getStepWidth() : this.getStepWidth() * -1;\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() + this.getStepWidth() : this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    _updateValue(mappedValue) {\n      const target = this._element.querySelector('.value');\n      if (target) {\n        target.innerHTML = mappedValue;\n      }\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'spinner',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Value.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a value from the backend, as label or image/icon\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Value', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MResize],\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _queuedOverflowDetection: null,\n    _debouncedDetectOverflow: null,\n\n    _init() {\n      super._init();\n      this._debouncedDetectOverflow = qx.util.Function.debounce(this._detectOverflow, 20);\n\n      const target = this._element.querySelector('.value');\n      if (target && target.tagName.toLowerCase() === 'label') {\n        // check for overflowing text, when labels parent gets resized\n        this.setResizeTarget(this._element);\n        this.addListener('resized', this._debouncedDetectOverflow, this);\n      }\n    },\n\n    _applyVisible(visible) {\n      if (visible) {\n        if (this._queuedOverflowDetection) {\n          this._debouncedDetectOverflow();\n        }\n      } else {\n        const target = this._element.querySelector('.value');\n        if (target && target.classList.contains('scroll')) {\n          target.classList.remove('scroll');\n        }\n      }\n    },\n\n    _detectOverflow() {\n      const target = this._element.querySelector('.value');\n      if (this.isVisible()) {\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > target.parentElement.clientWidth) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector('.value');\n      let styleClass = '';\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        switch (tagName) {\n          case 'cv-icon':\n            target._instance.setId(mappedValue);\n            if (this._element.hasAttribute('styling')) {\n              styleClass = cv.Application.structureController.styleValue(\n                this._element.getAttribute('styling'),\n                value,\n                this.__store\n              );\n            }\n            target._instance.setStyleClass(styleClass);\n            break;\n          case 'meter':\n            target.setAttribute('value', mappedValue);\n            target.innerHTML = '' + mappedValue;\n            break;\n          case 'cv-round-progress':\n            if (typeof value === 'string') {\n              value = parseInt(value);\n            }\n            target._instance.setProgress(value);\n            target._instance.setText('' + mappedValue);\n            break;\n          case 'label':\n            target.innerHTML = mappedValue;\n            this._debouncedDetectOverflow();\n            break;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'value',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Backend.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * <cv-backend> Custom element to define a backend connection\n */\nqx.Class.define('cv.ui.structure.tile.elements.Backend', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _name: null,\n    __applyValues: null,\n\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const uriString = element.hasAttribute('uri') ? element.getAttribute('uri') : '';\n      let uri;\n      if (uriString) {\n        try {\n          uri = new URL(uriString, window.location.origin + window.location.pathname);\n        } catch (e) {\n          this.error('Error parsing uri: ' + uriString);\n        }\n      }\n\n      if (type) {\n        let credentials = null;\n        if (element.hasAttribute('username')) {\n          credentials = {\n            username: element.getAttribute('username'),\n            password: element.getAttribute('password') || ''\n          };\n        } else if (uri && uri.username) {\n          credentials = {\n            username: uri.username,\n            password: uri.password\n          };\n        }\n        const model = cv.data.Model.getInstance();\n        let backendUrl = uri ? uri.toString() : null;\n        let backendUrlConfigKey;\n        switch (type) {\n          case 'knxd':\n            backendUrlConfigKey = 'backendKnxdUrl';\n            break;\n          case 'openhab':\n            backendUrlConfigKey = 'backendOpenHABUrl';\n            break;\n          case 'mqtt':\n            backendUrlConfigKey = 'backendMQTTUrl';\n            break;\n        }\n\n        if (backendUrlConfigKey) {\n          // override by URL settings\n          if (cv.Config.URL[backendUrlConfigKey]) {\n            backendUrl = cv.Config.URL[backendUrlConfigKey];\n          } else if (!backendUrl && cv.Config.server[backendUrlConfigKey]) {\n            backendUrl = cv.Config.server[backendUrlConfigKey];\n          }\n        }\n        let name = type;\n        if (element.hasAttribute('name')) {\n          name = element.getAttribute('name');\n        } else if (!cv.io.BackendConnections.hasClient('main')) {\n          // we need one main backend\n          name = 'main';\n        } else if (cv.io.BackendConnections.getClient('main').configuredIn === 'config') {\n          qx.log.Logger.warn(\n            this,\n            `there is already a backend registered with name \"main\" and type ${type} skipping this one`\n          );\n\n          return;\n        }\n        qx.log.Logger.debug(this, 'init backend', name);\n        if (cv.io.BackendConnections.hasClient(name)) {\n          const notification = {\n            topic: 'cv.config.error',\n            title: qx.locale.Manager.tr('Config error'),\n            message: qx.locale.Manager.tr('There already exists a backend named: \"%1\"', name),\n\n            severity: 'urgent',\n            unique: true,\n            deletable: true\n          };\n\n          cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n          return;\n        }\n        const client = cv.io.BackendConnections.addBackendClient(name, type, backendUrl, 'config');\n\n        this._client = client;\n        this._name = name;\n        this.__applyValues = [];\n        client.update = data => model.updateFrom(name, data); // override clients update function\n        client.login(true, credentials, () => {\n          this.debug(name, 'connected');\n          if (element.hasAttribute('default') && element.getAttribute('default') === 'true') {\n            model.setDefaultBackendName(name);\n          }\n          const doSubscribe = () => {\n            for (const [address, value] of this.__applyValues) {\n              this.debug(name, 'apply update', address, value);\n              model.onUpdate(address, value, name);\n            }\n            const addressesToSubscribe = model.getAddresses(name);\n            this.debug(name, 'subscribing to', addressesToSubscribe.length, 'addresses');\n\n            if (addressesToSubscribe.length !== 0) {\n              client.subscribe(addressesToSubscribe);\n            }\n          };\n          if (cv.TemplateEngine.getInstance().isDomFinished()) {\n            doSubscribe();\n          } else {\n            qx.event.message.Bus.subscribe(\n              'setup.dom.finished',\n              function () {\n                doSubscribe();\n              },\n              this\n            );\n          }\n        });\n\n        for (const data of element.querySelectorAll(':scope > cv-data')) {\n          if (data.hasAttribute('address')) {\n            let value = data.textContent.trim();\n            if (data.hasAttribute('transform')) {\n              const encoding = data.getAttribute('transform');\n              const encodedValue = cv.Transform.encodeBusAndRaw({ transform: encoding }, value);\n\n              value = encodedValue.bus;\n            }\n            this.__applyValues.push([data.getAttribute('address'), value]);\n          }\n        }\n      } else {\n        this.error('<cv-backend> must have a type attribute');\n      }\n    },\n\n    _disconnected() {\n      if (this._client) {\n        const model = cv.data.Model.getInstance();\n        if (this._element.hasAttribute('default') && this._element.getAttribute('default') === 'true') {\n          model.resetDefaultBackendName();\n        }\n        this._client.terminate();\n        cv.io.BackendConnections.removeClient(this._client);\n        this._client.dispose();\n        this._client = null;\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'backend',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Loader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Loads external content like CSS/JS files, config-content or a template file.\n *\n *  @author Tobias Bräutigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Loader', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const src = element.getAttribute('src');\n      let loaderElement;\n      if (src) {\n        switch (type) {\n          case 'css':\n            loaderElement = document.createElement('link');\n            loaderElement.setAttribute('type', 'text/css');\n            loaderElement.setAttribute('rel', 'stylesheet');\n            loaderElement.setAttribute('href', src);\n            break;\n\n          case 'js':\n            loaderElement = document.createElement('script');\n            loaderElement.setAttribute('type', 'text/javascript');\n            loaderElement.setAttribute('src', src);\n            break;\n\n          case 'templates':\n            this.loadXml(src, type);\n            break;\n        }\n\n        if (loaderElement) {\n          element.appendChild(loaderElement);\n        }\n      }\n    },\n\n    loadXml(uri) {\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n\n      ajaxRequest.addListenerOnce('success', function (e) {\n        let content = e.getTarget().getResponse();\n        let htmlContent = content;\n        const target = cv.Application.structureController.getRenderTarget();\n        // we need the documents to be in HTML namespace\n        if (!htmlContent.documentElement.xmlns) {\n          let text = e.getTarget().getResponseText();\n          text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n          const parser = new DOMParser();\n          htmlContent = parser.parseFromString(text, 'text/xml');\n        }\n        let child;\n        while ((child = htmlContent.documentElement.firstElementChild)) {\n          target.appendChild(child);\n        }\n        // register custom elements for templates in this document\n        cv.Application.structureController.registerTemplates(content);\n      });\n      ajaxRequest.addListener('statusError', e => {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.handleError('filenotfound', ajaxRequest.getUrl());\n        } else {\n          this.handleError(status, null);\n        }\n      });\n\n      ajaxRequest.send();\n    },\n\n    handleError(textStatus, additionalErrorInfo) {\n      const title = qx.locale.Manager.tr('File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid XML file!');\n          break;\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: File not found, %1.', additionalErrorInfo).translate().toString();\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n\n      const notification = {\n        topic: 'cv.error',\n        title: title,\n        message: message\n      };\n\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n      this.error(this, message.toString());\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'loader',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Mapping.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Mapping maps a value to another value that can be used to show e.g. the current state.\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Mapping', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__cache = {};\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __cache: null,\n\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      // avoid adding styling elements here as they inherit this method but call the super method too\n      if (this._element.tagName.toLowerCase().endsWith('mapping')) {\n        if (value) {\n          cv.Application.structureController.addMapping(this._element.getAttribute('name'), this);\n        } else {\n          cv.Application.structureController.removeMapping(this._element.getAttribute('name'));\n        }\n      }\n    },\n\n    /**\n     *\n     * @param val {variant}\n     * @param store {Map<string, variant>?} optional stored values from other addresses\n     * @param params {Array<variant>?} optional array of parameters for the mapping\n     * @return {string|*|string}\n     */\n    mapValue(val, store, params) {\n      if (Object.prototype.hasOwnProperty.call(this.__cache, val)) {\n        return this.__cache[val];\n      }\n      let mappedValue = '' + val;\n      const exactMatch = this._element.querySelector(':scope > entry[value=\"' + val + '\"]');\n\n      let type = this._element.hasAttribute('type') ? this._element.getAttribute('type') : 'string';\n      if (exactMatch) {\n        mappedValue = this._convert(exactMatch.innerHTML.trim(), type);\n        this.__cache[val] = mappedValue;\n        return mappedValue;\n      }\n      const formula = this._element.querySelector(':scope > formula');\n      if (formula) {\n        if (!formula._formula) {\n          let content = formula.textContent;\n          formula._formula = new Function('x', 'store', 'params', 'let y;' + content + '; return y;');\n        }\n        mappedValue = this._convert(formula._formula(val, store, params), type);\n        return mappedValue;\n      }\n      const entries = this._element.querySelectorAll(':scope > entry');\n      let defaultValue = null;\n\n      const mapped = Array.from(entries).some(entry => {\n        let matches = false;\n        let isDefaultValue = entry.hasAttribute('default') && entry.getAttribute('default') === 'true';\n        if (entry.hasAttribute('value')) {\n          const value = entry.getAttribute('value');\n          if (value === (val ? val : 'NULL') || value === '*') {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = this._convert(value, type);\n          }\n        } else if (entry.hasAttribute('range-min')) {\n          const rangeMin = parseFloat(entry.getAttribute('range-min'));\n          const rangeMax = entry.hasAttribute('range-max')\n            ? parseFloat(entry.getAttribute('range-max'))\n            : Number.POSITIVE_INFINITY;\n          const floatValue = parseFloat(val);\n          if (rangeMin <= floatValue && floatValue <= rangeMax) {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = rangeMin;\n          }\n        }\n        return matches;\n      });\n      if (!mapped && defaultValue !== null) {\n        mappedValue = this.mapValue(defaultValue);\n      }\n      this.__cache[val] = mappedValue;\n      return mappedValue;\n    },\n\n    _convert(value, type) {\n      switch (type.toLowerCase()) {\n        case 'boolean':\n          return value === 'true';\n        case 'integer':\n          return parseInt(value);\n        case 'float':\n          return parseFloat(value);\n        default:\n          return value;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__cache = null;\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'mapping',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Styling.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Styling maps a value to another value that can be used to style a component\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Styling', {\n  extend: cv.ui.structure.tile.elements.Mapping,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      if (value) {\n        cv.Application.structureController.addStyling(this._element.getAttribute('name'), this);\n      } else {\n        cv.Application.structureController.removeStyling(this._element.getAttribute('name'));\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'styling',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Group.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a group of widgets that can be hidden (works like the <detail> HTML Element)\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Group', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      let label = null;\n      let summary = null;\n      const needsSummary = element.hasAttribute('name') || element.hasAttribute('icon');\n      if (needsSummary) {\n        summary = element.querySelector(':scope > summary');\n        if (!summary) {\n          summary = document.createElement('summary');\n          element.insertBefore(summary, element.firstChild);\n        }\n        if (element.hasAttribute('name')) {\n          label = element.querySelector(':scope > summary > label.title');\n          if (!label) {\n            label = document.createElement('label');\n            label.classList.add('title');\n            summary.insertBefore(label, summary.firstChild);\n          }\n          label.classList.add('last-of-title');\n          label.textContent = element.getAttribute('name');\n        }\n        if (element.hasAttribute('icon')) {\n          let icon = element.querySelector(':scope > summary > cv-icon.title');\n          if (!icon) {\n            icon = document.createElement('cv-icon');\n            icon.classList.add('title');\n            summary.insertBefore(icon, summary.firstChild);\n          }\n          if (!label) {\n            icon.classList.add('last-of-title');\n          }\n          icon.classList.add(element.getAttribute('icon'));\n        }\n      }\n      const empty = !element.querySelector(':scope > *:not(summary)');\n      if (empty) {\n        element.classList.add('empty');\n      } else if (summary) {\n        qx.event.Registration.addListener(summary, 'click', this._toggleOpen, this);\n      }\n    },\n\n    _toggleOpen() {\n      if (this._element.hasAttribute('open')) {\n        this._element.removeAttribute('open');\n      } else {\n        this._element.setAttribute('open', 'true');\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'summary') {\n          let target = this._element.querySelector(':scope > summary > label.value');\n\n          if (!target) {\n            target = document.createElement('label');\n            target.classList.add('value');\n            const summary = this._element.querySelector(':scope > summary');\n            summary.appendChild(target);\n          }\n          target.textContent = ev.detail.state;\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'group',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a new sub page and adds a corresponding link to the current page.\n *\n * @ignore(InstallTrigger)\n * @author Tobias Bräutigam\n * @since 2021\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Page', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visibility: {\n      refine: true,\n      init: 'excluded'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _supportsContentVisibility: null,\n\n    _init() {\n      if (typeof InstallTrigger !== 'undefined') {\n        // firefox does not support content-visibility CSS property\n        // see: https://developer.mozilla.org/en-US/docs/Web/CSS/content-visibility\n        this._element.classList.add('no-content-visibility');\n        this._supportsContentVisibility = false;\n      } else {\n        this._supportsContentVisibility = true;\n      }\n    },\n\n    _applyVisibility(value) {\n      switch (value) {\n        case 'visible':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'visible';\n          } else if (this._visibleDisplayMode) {\n            this._element.style.display = this._visibleDisplayMode || 'initial';\n          }\n          break;\n\n        case 'hidden':\n        case 'excluded':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'hidden';\n          } else {\n            this._visibleDisplayMode = getComputedStyle(this._element).getPropertyValue('display');\n            this._element.style.display = 'none';\n          }\n          break;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'page',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'row',\n      class extends HTMLElement {\n        constructor() {\n          super();\n          if (this.hasAttribute('colspan')) {\n            this.classList.add('colspan-' + this.getAttribute('colspan'));\n          }\n          if (this.hasAttribute('rowspan')) {\n            this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n          }\n        }\n      }\n    );\n  }\n});\n","/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a popup that contains arbitrary content and can be opened as an overlay over the current UI.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Popup', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _closeButton: null,\n\n    _init() {\n      super._init();\n      const popup = this._element;\n      const closeable = !popup.hasAttribute('closeable') || popup.getAttribute('closeable') === 'true';\n      if (closeable) {\n        this._closeButton = document.createElement('button');\n        this._closeButton.classList.add('close');\n        const icon = document.createElement('i');\n        icon.classList.add('ri-close-line');\n        this._closeButton.appendChild(icon);\n        popup.insertBefore(this._closeButton, popup.firstChild);\n        this._closeButton.addEventListener('click', () => this.close());\n      }\n      popup.addEventListener('close', ev => {\n        this.close();\n      });\n      if (popup.hasAttribute('title')) {\n        const header = document.createElement('header');\n        popup.insertBefore(header, popup.firstChild);\n        const title = document.createElement('h2');\n        title.textContent = popup.getAttribute('title');\n        header.appendChild(title);\n      }\n      if (popup.hasAttribute('auto-close-timeout')) {\n        const timeoutSeconds = parseInt(popup.getAttribute('auto-close-timeout'));\n\n        if (!isNaN(timeoutSeconds)) {\n          this._autoCloseTimer = new qx.event.Timer(timeoutSeconds * 1000);\n          this._autoCloseTimer.addListener('interval', () => {\n            this._autoCloseTimer.stop();\n            this.close();\n          });\n        } else {\n          this.error('invalid auto-close-timeout value:', popup.getAttribute('auto-close-timeout'));\n        }\n      }\n    },\n\n    open() {\n      const popup = this._element;\n      if (!popup.hasAttribute('open')) {\n        popup.setAttribute('open', '');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.registerModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.start();\n        }\n      }\n    },\n\n    close() {\n      const popup = this._element;\n      if (popup) {\n        popup.removeAttribute('open');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.unregisterModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.stop();\n        }\n        popup.dispatchEvent(new CustomEvent('closed'));\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget.\n     * The popup handles the special address-targets:\n     *  - open: opens the popup when the address value is 'true' or 1 => no auto closing\n     *  - close: closes the popup when the address value is 'false' or 0 => no auto opening\n     *  - open-close: the upper both combined => popup visibility fully dependent on the address value, auto-opening + auto-closing\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'open':\n            if (ev.detail.state) {\n              this.open();\n            }\n            break;\n\n          case 'open-close':\n            if (ev.detail.state) {\n              this.open();\n            } else {\n              this.close();\n            }\n            break;\n\n          case 'close':\n            if (!ev.detail.state) {\n              this.close();\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n            break;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_autoCloseTimer');\n    if (this._closeButton) {\n      this._closeButton.remove();\n      this._closeButton = null;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'popup',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n\n    _init() {\n      super._init();\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else {\n        let closeButton = this._element.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          this._element.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        this._element.classList.add('popup');\n        if (this._fullScreenMode) {\n          this._element.classList.add('fullscreen');\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else {\n        this._element.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._element.classList.remove('fullscreen');\n        }\n        let closeButton = this._element.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"],"mappings":"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"}