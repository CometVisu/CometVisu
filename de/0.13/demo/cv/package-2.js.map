{"version":3,"names":["qx","Class","define","extend","core","Object","type","implement","cv","ui","structure","IController","construct","constructor","call","this","__P_72_0","bom","Stylesheet","includeFile","util","ResourceManager","getInstance","toUri","replace","Config","forceReload","Date","now","locale","Manager","addListener","_onChangeLocale","statics","PREFIX","__P_72_1","__P_72_2","MAPPING_PARAM_REGEX","register","webComponentName","qxClass","onComponentCreated","element","name","tagName","toLowerCase","QxClass","log","Logger","error","properties","renderTarget","check","init","document","body","namespace","scrolled","apply","members","__P_72_3","__P_72_4","getHtmlStructure","supports","feature","subfeature","initLayout","__P_72_5","location","hash","scrollToPage","substring","getInitialPageId","onHistoryRequest","anchor","pageId","skipHistory","page","classList","contains","_step","_iterator","_createForOfIteratorHelper","querySelectorAll","s","n","done","value","remove","err","e","f","_step2","_iterator2","parentElement","nodeName","add","headline","getAttribute","pageTitle","warn","parseBackendSettings","xml","parseSettings","config","_this","settings","configSettings","configElement","documentElement","bindClickToWidget","translate","templates","ajaxRequest","io","request","Xhr","set","accept","cache","addListenerOnce","content","getTarget","getResponse","text","getResponseText","DOMParser","parseFromString","target","appendChild","child","TemplateEngine","setDomFinished","main","querySelector","shrinkHeight","canAnimate","addEventListener","style","_step3","_iterator3","elem","getComputedStyle","height","setScrolled","scrollTop","isScrolled","status","getTransport","send","_applyScrolled","_step4","_iterator4","_step5","_iterator5","registerTemplates","forEach","template","customElements","tile","Controller","_TemplatedElement","_classCallCheck","_class","TemplatedElement","preParse","_this2","theme","data","_regeneratorRuntime","wrap","_context","prev","next","hasAttribute","window","matchMedia","matches","setAttribute","Model","updateFrom","stop","_callee","createUI","observeVisibility","_step6","observer","IntersectionObserver","entries","entry","isIntersecting","removeAttribute","unobserve","root","_iterator6","iframe","observe","doc","rememberKeys","useKeys","language","getLanguage","match","exec","search","_trKeys","_step7","attr","_arr","_i","_iterator7","trNameElement","translation","concat","key","textContent","trim","_step8","_iterator8","trTextElement","_translation","_key","doScreenSave","screensave_page","getInitialAddresses","firstPage","id","addMapping","mapping","removeMapping","mapValue","mappingName","store","params","JSON","parse","replaceAll","addStyling","styling","removeStyling","styleValue","stylingName","prototype","hasOwnProperty","parseLabel","defer","cvTestMode","Application","structureController","destruct","removeListener","_this3","controller","getElementById","templateId","_step9","slotAttributes","cloneNode","_iterator9","_step10","_loop","slot","slotName","replacementSelector","slotParentScope","parseInt","includes","attributes","i","attrs","Array","from","slotContents","slotContent","newNode","keys","attrName","debug","parentNode","insertBefore","replaced","_i2","_iterator10","targetName","endsWith","_step11","_iterator11","targetValue","_step12","_iterator12","split","_entry$split4","_slicedToArray","_entry$split3","_value","_assertThisInitialized","_toConsumableArray","startsWith","Bootstrap","executePendingDefers","$$dbClassInfo","Mixin","_onPointerDownBounded","_onPointerDown","bind","openedPopups","events","closed","_childPopup","_initPopupChild","popup","_element","event","Registration","_openPopupChild","last","parent","open","_closePopupChild","close","registerModalPopup","blocker","createElement","display","MPopup","push","unregisterModalPopup","removeEventListener","index","indexOf","splice","length","ev","Tree","isChildOf","preventDefault","stopImmediatePropagation","Timer","once","hasMixin","MVisibility","__P_73_0","refresh","_refreshTimer","_lastRefresh","_applyRefresh","restartWith","__P_73_1","isVisible","start","getData","getInterval","_disposeObjects","MRefresh","_observeVisibility","_instance","setVisible","visible","_observer","ResizeObserver","getResizeTarget","some","fireDataEvent","resized","resizeTarget","nullable","_applyResizeTarget","oldElement","disconnect","MResize","connected","_initialized","_applyConnected","_init","_disconnected","getElement","QxConnector","_HTMLElement","_super","isSubClassOf","elements","AbstractCustomElement","Error","setConnected","oldValue","newValue","hasProperty","HTMLElement","styleClass","enabled","visibility","widget","inPopup","_writeAddresses","_headerFooterParent","_checkIfWidget","isWidget","isPopup","localName","setInPopup","setWidget","hasReadAddress","writeAddresses","address","onStateUpdate","stopPropagation","appendToHeader","align","header","firstElementChild","targetParent","getHeader","selector","appendToFooter","footer","getFooter","_applyValue","isConnected","mappedValue","String","sprintf","toLocaleString","_updateValue","setStyleClass","_applyStyleClass","classes","_applyEnabled","_applyVisibility","opacity","detail","setEnabled","state","setVisibility","setValue","components","AbstractComponent","message","Bus","subscribe","_update","_list","list","listItems","activePage","startPage","currentPage","li","_createListItem","unshift","replaceChildren","a","unsubscribe","_QxConnector","_inherits","_createSuper","_createClass","Breadcrumbs","__P_74_0","Map","on","onClass","offClass","onValue","offValue","progress","transform","__P_74_1","__P_74_2","_parseInt","val","intVal","Number","isNaN","setType","setName","setProgress","setOnValue","setOffValue","eventSource","level","addr","click","onClicked","pointerup","onPointerUp","pointerdown","onPointerDown","getOwnPropertyNames","eventName","triggerAddresses","filter","setOn","getOnValue","hasDown","hasUp","_initProgress","Math","PI","svg","createElementNS","circle","Button","superclass","getType","_applyOn","isOn","getOffValue","setId","updateValue","getOnClass","getOffClass","_applyProgress","valueElement","_applyName","innerHTML","source","Address","addressElement","createRipple","relPath","baseVersion","Version","VERSION","slice","join","CustomEvent","dispatchEvent","_this4","button","currentTarget","container","diameter","max","clientWidth","clientHeight","radius","width","x","clientX","offsetLeft","y","clientY","offsetTop","offsetParent","left","top","ripple","__P_85_0","__P_85_1","model","backendName","addAddress","mode","getState","undefined","fireStateUpdate","addUpdateListener","allowDuplicates","encoding","encodedValue","Transform","encodeBusAndRaw","ignoreError","variantInfo","qos","raw","lastSentValue","delay","BackendConnections","getClient","write","bus","transformedState","decode","targetConfig","shift","bubbles","cancelable","addressValue","variant","isRead","isWrite","getValue","Clazz","exports","Op","hasOwn","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","obj","defineProperty","enumerable","configurable","writable","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","method","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","_typeof","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","object","reverse","pop","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","include","ChartCounter","DEFAULT_ASPECT_RATIO","JS_LOADED","_ref","_asyncToGenerator","timer","counter","d3","ScriptLoader","includeScript","_x","_x2","arguments","formatDefaultLocale","decimal","getDecimalSeparator","toString","thousands","getGroupSeparator","grouping","currency","timeFormatDefaultLocale","dateTime","date","time","periods","getAmMarker","getPmMarker","days","getDayNames","map","t","shortDays","months","getMonthNames","shortMonths","CONFIG","currentSeries","currentPeriod","startTime","endTime","_id","_downloadedImage","_url","_headers","_request","_width","_height","_loaded","_dataSetConfigs","_initializing","_navigationEnabled","__P_75_1","__P_75_2","__P_75_3","__P_75_4","__P_75_5","__P_75_6","_dot","_svg","_tooltip","_titleString","__P_75_7","__P_75_8","_chartConf","_callee2","chartId","inBackground","title","span","seriesSelection","_span","option","_s","_button","popupAddress","tileAddress","tileWidget","noToolTips","format","timeFormat","formatString","datasetSources","_context2","Chart","setCurrentSeries","getCurrentSeries","_buttonFactory","tr","_onSeriesPrev","_seriesToShort","_onSeriesChange","getPropertyValue","disabled","_onSeriesNext","onUpdate","_onRendered","setRefresh","select","append","_onPointerEntered","_onPointerMoved","_onPointerLeft","targetTouches","pathRect","getBoundingClientRect","passive","multiTimeFormat","d","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","z","src","color","curve","curveLinear","marginTop","marginRight","marginBottom","marginLeft","aspectRatio","xType","scaleTime","xFormat","yType","scaleLinear","yFormat","yLabel","strokeLinecap","strokeLinejoin","strokeWidth","strokeOpacity","mixBlendMode","showArea","showXAxis","showYAxis","xPadding","__P_75_9","targetDataset","ts","aggregationInterval","mins","round","_renderChart","setCurrentPeriod","getCurrentPeriod","resetCurrentPeriod","_loadData","_refreshData","nextButton","getStartTime","getEndTime","__P_75_0","series","end","periodStart","interval","setHours","setDate","setMonth","setFullYear","getFullYear","startTs","getTime","endTs","setStartTime","setEndTime","client","url","dataSets","promises","dataSet","chartType","item","part","toUpperCase","test","parseFloat","getResourcePath","Fetch","cachedFetch","ttl","getRefresh","hasCustomChartsDataProcessor","processChartsData","_onStatusError","all","responses","_onSuccess","chartData","tsdata","_step4$value2","assign","overflow","requestAnimationFrame","setTimeout","retries","clearTimeout","_this$_getSize3","_getSize","_this$_getSize4","padding","containerWidth","offsetWidth","containerHeight","offsetHeight","formatsArray","found","fmt","multiFormat","notifications","Router","dispatchMessage","severity","stringify","_getSvgElement","empty","single","X","Y","Z","O","T","_this5","_helpers","xDomain","extent","minVal","min","maxVal","yDomain","zDomain","InternSet","I","range","has","maxValue","toFixed","xTicks","yTicks","additionalXRangePadding","xRange","yRange","xAxis","axisBottom","ticks","tickSizeOuter","tickFormat","yAxis","axisLeft","showGrid","xGrid","tickSize","yGrid","yAxisElement","label","g","xBar","xzScale","lineGroups","areaGroups","barGroups","stackedBarGroups","lineFunctions","areaFunctions","_loop2","idx","curveName","curveFunction","curveStep","curveNatural","line","minY","area","y0","y1","scaleBand","xz","size","lineContainer","fill","stroke","areaContainer","__P_75_10","barContainer","domain","bandwidth","_loop3","_loop4","_loop5","_loop6","transition","duration","ease","easeLinear","selectAll","enter","p","linear","yMin","_loop7","_step10$value","targetContainer","yValue","NaN","get","sum","di","v","lineElem","x1","x2","valueElem","_this6","__P_75_11","relatedTarget","raise","node","dispatch","center","xm","ym","_d3$pointer","pointer","_d3$pointer2","_this$_helpers2","_this$_chartConf2","least","hypot","scaleFactorX","scaleFactorY","xOffset","cursorOffset","pointerType","timeString","lineTitle","property","icon","_button$classList","chartTitle","_shownDateRange","DateFormat","getDateTimeFormat","trc","getWeekNumber","yearStart","ceil","throttleInterval","CC_COUNTER","__P_76_0","setThrottleInterval","addresses","_mode","parser","pure","widgets","ColorChooser","makeAddressListFn","Color","path","props","$$type","layout","colspan","controls","getThrottleInterval","parseAttributes","_onColorChanged","getDomString","composedPath","_onDomReady","setResizeTarget","invalidateScreensize","getColor","rgb","getComponent","__P_76_1","r","b","padStart","alpha","backgroundColor","_idRegex","__P_77_0","_transformId","Icon","it","_applyId","_applyColor","img","base","origin","pathname","URL","useProxy","rest","Client","getBaseUrl","searchParams","btoa","_loadImage","XMLHttpRequest","responseType","setRequestHeader","onreadystatechange","readyState","DONE","createObjectURL","response","onload","revokeObjectURL","random","Image","refine","_target","_timer","_model","_getModel","_filterModel","_sortModel","_limit","_modelInstance","refreshOnUpdate","Function","readAddresses","evCopy","sortBy","sortModifier","right","leftVal","rightVal","localeCompare","options","proxyParam","res","listmodel","Registry","modelInstance","_entry$split$map3","_entry$split$map4","getModel","script","innerText","List","_callee3","newModel","whenEmptyTemplate","emptyModel","emptyElem","itemTemplate","_context3","t0","t1","isArray","sort","removeChild","html","_elem$getAttribute$sp","_elem$getAttribute$sp2","ListItem","fireEvent","appearance","depth","domReady","showLabels","_applyAppearance","_applyDepth","isDomReady","_generateMenu","_onDomAppended","setDomReady","_applyModel","rootList","ham","href","onclick","_onHamburgerMenu","_onPageChange","_onSwipe","_icon","setShowLabels","setModel","__P_78_0","_rootList","pageName","pageIcon","isShowLabels","createTextNode","onClick","toggleClass","toggle","_closeAll","getDirection","current","previousElementSibling","except","_openDetail","first","_closeDetail","parentList","currentLevel","pages","getDepth","details","summary","_pageIcon","expander","subList","pageElement","link","activeName","Menu","_currentState","MenuAction","hasAddress","PL_COUNTER","__P_79_0","pluginName","baseName","scriptLoader","Plugin","loadPluginPart","plugins","isFinished","Part","getParts","load","_applyVisible","__P_80_0","__P_80_1","__P_80_2","__P_80_3","__P_80_4","__P_80_5","__P_80_6","__P_80_7","__P_80_8","_queuedFitText","RoundProgress","hasFixedRadius","normalizedRadius","setMin","setMax","ns","bg","bar","_bg","_bar","_bg2","isPropertyInitialized","getProgress","__P_80_9","angle","angleRad","cos","sin","valueInRange","getMin","percent","getMax","_fitText","__P_80_10","getContext","compStyle","font","metrics","measureText","factor","fontSize","floor","_applyText","__P_81_0","__P_81_1","__P_81_2","Select","_sendSelection","predictive","children","stepWidth","showValue","__P_82_0","__P_82_1","Slider","_applyThrottleInterval","input","oninput","setStepWidth","setShowValue","_applyShowValue","decreaseElement","onDecrease","increaseElement","onIncrease","throttle","onInput","trailing","abort","_applyMin","_applyMax","valueLabel","firstChild","isShowValue","__P_82_2","getStepWidth","Spinner","setMode","decrease","decreaseIcon","increase","increaseIcon","getMode","__P_83_0","_queuedOverflowDetection","_debouncedDetectOverflow","Value","debounce","_detectOverflow","__P_84_0","setText","_name","__P_86_0","className","isRegistered","addClassLoadedListener","uri","uriString","credentials","username","password","backendUrlConfigKey","backendUrl","server","hasClient","configuredIn","notification","topic","unique","deletable","addBackendClient","_client","update","setResourcePath","login","setDefaultBackendName","doSubscribe","_step2$value2","addressesToSubscribe","getAddresses","isDomFinished","resetDefaultBackendName","terminate","removeClient","dispose","Backend","loaderElement","loadXml","htmlContent","getRenderTarget","xmlns","Request","isSuccessful","handleError","getUrl","textStatus","additionalErrorInfo","actions","Loader","__P_87_0","Mapping","exactMatch","_convert","formula","_formula","defaultValue","isDefaultValue","rangeMin","rangeMax","POSITIVE_INFINITY","floatValue","stateConfig","NotificationCenter","addressContainer","skipInitial","valueMapping","addressMapping","_onStateUpdate","iconClasses","titleElem","titleTemplate","messageElem","messageTemplate","condition","addressConfig","retain","registerStateUpdateHandler","initial","changed","_address$split","_address$split2","router","enableStateUpdateHandler","changeStateUpdateHandlerSeverity","StateNotification","Styling","Group","_toggleOpen","_supportsContentVisibility","_visibleDisplayMode","browserEngine","Environment","contentVisibility","_class2","_super2","_wrapNativeSuper","Page","_closeButton","Popup","timeoutSeconds","_autoCloseTimer","backgroundImage","outdated","checkOutdated","outdatedMessage","fullscreenChanged","_fullScreenMode","_dateFormat","_checkOutdatedTimerId","_lastUpdate","_maxAge","_hideTimer","Tile","getDateFormat","getTimeFormat","setBackgroundImage","resetPopup","_applyBackgroundImage","overlay","_applyOutdated","getOutdatedMessage","nextElementSibling","_applyOutdatedMessage","_applyCheckOutdated","TimerManager","age","setOutdated","setOutdatedMessage","resetOutdatedMessage","closeButton","setPopup","keepState","_applyPopup","restart","WidgetPair"],"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MPopup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MRefresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MVisibility.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MResize.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AbstractCustomElement.js",".","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/AbstractComponent.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Breadcrumbs.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Button.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Address.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Color.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Icon.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/List.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/ListItem.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/MenuAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/RoundProgress.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Select.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Slider.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Spinner.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Value.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Backend.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Loader.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Mapping.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/StateNotification.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Styling.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Popup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/WidgetPair.js"],"sourcesContent":["/* Controller.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Controller for the 'tile' structure.\n *\n * This structure is based on web-components and does not need a parser to work.\n * The config file is directly attached to the document body.\n * The widgets in this structure register a customElement and the browser automatically creates instances\n * of this widgets once the customElement is added to the body.\n *\n * The basic structure is a set of pages that contain a list of tiles.\n * Each tile contains a grid of 3 rows and 3 columns. The components can be added to a cell of that grid\n * but also can spread over more than one cell by using row-/column spanning.\n *\n * This structure provides some tiles with a pre-defined content, e.g. a <cv-switch> which\n * contains of a button in the middle of the tile and a primary- and secondary label in the third row.\n *\n * Those pre-defined tiles are provided by a <template> (@see https://developer.mozilla.org/de/docs/Web/HTML/Element/template)\n * User are able to define own templates for re-usable tiles if they need one that this structure does not provide.\n *\n * @asset(structures/tile/*)\n * @author Tobias BrÃ¤utigam\n * @since 2022\n * @ignore(IntersectionObserver)\n */\nqx.Class.define('cv.ui.structure.tile.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__HTML_STRUCT = '';\n    qx.bom.Stylesheet.includeFile(\n      qx.util.ResourceManager.getInstance().toUri('designs/tile-globals.scss').replace('.scss', '.css') +\n        (cv.Config.forceReload === true ? '?' + Date.now() : '')\n    );\n    qx.locale.Manager.getInstance().addListener('changeLocale', this._onChangeLocale, this);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    // prefix for all custom components uses/provided by this structure\n    PREFIX: 'cv-',\n    __MAP: {},\n    __I: {},\n\n    MAPPING_PARAM_REGEX: /^(.+)\\(([^)]+)\\)$/,\n\n    register(webComponentName, qxClass) {\n      this.__MAP[webComponentName] = qxClass;\n    },\n\n    onComponentCreated(element) {\n      const name = element.tagName.toLowerCase();\n      if (Object.prototype.hasOwnProperty.call(this, name)) {\n        const QxClass = this.__MAP[name];\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          this.__I[name] = [];\n        }\n        this.__I[name].push(new QxClass(element));\n      } else {\n        qx.log.Logger.error(this, 'no QxClass registered for custom element ' + name);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    /**\n     * The target this structure should be inserted into\n     */\n    renderTarget: {\n      check: 'Element',\n      init: document.body\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    },\n\n    scrolled: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyScrolled'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __HTML_STRUCT: null,\n    __mappings: null,\n    __stylings: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    supports(feature, subfeature) {\n      return false;\n    },\n\n    initLayout() {},\n\n    __gotoStartPage() {\n      // open first page\n      if (!document.location.hash) {\n        this.scrollToPage(this.getInitialPageId());\n      } else {\n        this.scrollToPage(document.location.hash.substring(1));\n      }\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor);\n      }\n    },\n\n    scrollToPage(pageId, skipHistory) {\n      if (!pageId) {\n        return;\n      }\n      const page = document.querySelector('#' + pageId);\n      if (page) {\n        if (!page.classList.contains('active')) {\n          for (let oldPage of document.querySelectorAll('cv-page.active')) {\n            oldPage.classList.remove('active');\n          }\n          for (let oldPage of document.querySelectorAll('cv-page.sub-active')) {\n            oldPage.classList.remove('sub-active');\n          }\n          page.classList.add('active');\n          // mark parent pages that there is an active subpage\n          let parentElement = page.parentElement;\n          while (parentElement && parentElement.nodeName.toLowerCase() !== 'main') {\n            if (parentElement.nodeName.toLowerCase() === 'cv-page') {\n              parentElement.classList.add('sub-active');\n            }\n            parentElement = parentElement.parentElement;\n          }\n\n          if (skipHistory === undefined) {\n            const headline = page.getAttribute('name');\n            let pageTitle = 'CometVisu';\n            if (headline) {\n              pageTitle = headline + ' - ' + pageTitle;\n            }\n            qx.bom.History.getInstance().addToHistory(pageId, pageTitle);\n          }\n          qx.event.message.Bus.dispatchByName('cv.ui.structure.tile.currentPage', page);\n        }\n      } else {\n        this.warn('no page with id', pageId, 'found');\n      }\n    },\n\n    // not needed, backend parse/init themselves\n    parseBackendSettings(xml) {\n/*      if (xml.querySelectorAll('cv-backend').length === 0) {\n        // no backends defined, use the default one;\n        const client = cv.io.BackendConnections.initBackendClient();\n        client.login(true, cv.Config.configSettings.credentials, () => {\n          this.debug('logged in');\n          cv.io.BackendConnections.startInitialRequests();\n        });\n      }*/\n      return false;\n    },\n\n    /**\n     * Parses structure specific settings\n     * @param config {XMLDocument} loaded config\n     */\n    parseSettings(config) {\n      document.body.classList.add('loading-structure');\n      const settings = cv.Config.configSettings;\n      const configElement = config.documentElement;\n      settings.bindClickToWidget = configElement.getAttribute('bind_click_to_widget') === 'true';\n      this.translate(config, true);\n\n      if (!cv.Config.cacheUsed) {\n        const templates = qx.util.ResourceManager.getInstance().toUri('structures/tile/templates.xml');\n\n        const ajaxRequest = new qx.io.request.Xhr(templates);\n        ajaxRequest.set({\n          accept: 'application/xml',\n          cache: !cv.Config.forceReload\n        });\n\n        ajaxRequest.addListenerOnce('success', e => {\n          let content = e.getTarget().getResponse();\n          const target = this.getRenderTarget();\n          this.debug('creating pages');\n          // register custom elements for templates in this document\n          this.registerTemplates(content);\n          let child;\n          // we need the documents to be in HTML namespace\n          if (!content.documentElement.xmlns) {\n            let text = e.getTarget().getResponseText();\n            text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n            const parser = new DOMParser();\n            content = parser.parseFromString(text, 'text/xml');\n          }\n          while ((child = content.documentElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n\n          while ((child = configElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n          document.body.classList.remove('loading-structure');\n          this.debug('finalizing');\n          this.observeVisibility();\n          qx.event.message.Bus.dispatchByName('setup.dom.append');\n          this.debug('pages created');\n          this.__gotoStartPage();\n          this.debug('setup.dom.finished');\n          qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n          cv.TemplateEngine.getInstance().setDomFinished(true);\n\n          const main = document.body.querySelector(':scope > main');\n          if (main) {\n            let shrinkHeight = -1;\n            let canAnimate = false;\n            main.addEventListener('scroll', () => {\n              // we need to know the space that we gain in height, when the shrinked elements are not shown\n              // and must not start the effect before we reach that threshold, otherwise\n              // main.scrollTop would go back to 0 because we have more height available and do not have to scroll+\n              // anymore, that would lead to an endless toggling this effect\n              // so long story short: avoid that applying this effect would lead to: main.scrollTop === 0\n              if (shrinkHeight < 0) {\n                shrinkHeight = 1;\n                let style;\n                for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n                  style = getComputedStyle(elem);\n                  if (!canAnimate) {\n                    // we need at least one element that has a defined height, to get a working animation\n                    canAnimate = !!elem.style.height;\n                  }\n                  shrinkHeight += parseInt(style.height) +\n                    parseInt(style.paddingTop) +\n                    parseInt(style.paddingBottom) +\n                    parseInt(style.marginTop) +\n                    parseInt(style.marginBottom);\n                }\n              }\n              if (!this.isScrolled() && main.scrollTop > shrinkHeight) {\n                this.setScrolled(true);\n                if (!canAnimate) {\n                  main.scrollTop -= shrinkHeight;\n                }\n              } else if (this.isScrolled() && main.scrollTop === 0) {\n                this.setScrolled(false);\n                shrinkHeight = -1;\n              }\n            });\n          }\n        });\n        ajaxRequest.addListener('statusError', e => {\n          const status = e.getTarget().getTransport().status;\n          if (!qx.util.Request.isSuccessful(status)) {\n            this.error('filenotfound', templates);\n          }\n          document.body.classList.remove('loading-structure');\n        });\n\n        ajaxRequest.send();\n      }\n    },\n\n    _applyScrolled(value) {\n      if (value) {\n        for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n          elem.classList.add('scrolled');\n        }\n      } else {\n        for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n          elem.classList.remove('scrolled');\n        }\n      }\n    },\n\n    /**\n     * Registers customElements for all templates in the given xml that are direct children of a <templates structure=\"tile\"> element\n     * @param xml {XMLDocument}\n     */\n    registerTemplates(xml) {\n      xml.querySelectorAll('templates[structure=\\'tile\\'] > template').forEach(template => {\n        customElements.define(\n          cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'),\n          class extends TemplatedElement {\n            constructor() {\n              super(template.getAttribute('id'));\n            }\n          }\n        );\n      });\n    },\n\n    /**\n     * Pre parsing hook, do everything here that is needed before the real parsing process can start\n     * @param xml {XMLDocument}\n     */\n    async preParse(xml) {\n      if (xml.documentElement.hasAttribute('theme')) {\n        let theme = xml.documentElement.getAttribute('theme');\n        const data = {};\n        if (theme === 'system') {\n          if (window.matchMedia) {\n            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n            document.documentElement.setAttribute('data-theme', theme);\n            data['theme'] = theme;\n            cv.data.Model.getInstance().updateFrom('system', data);\n            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');\n\n              data['theme'] = e.matches ? 'dark' : 'light';\n              cv.data.Model.getInstance().updateFrom('system', data);\n            });\n          } else {\n            this.error('system theme detection not possible in this browser');\n          }\n        } else {\n          document.documentElement.setAttribute('data-theme', theme);\n          data['theme'] = theme;\n          cv.data.Model.getInstance().updateFrom('system', data);\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param config {Object} loaded config file usually an XMLDocument but other structures might use different formats\n     */\n    createUI(config) {},\n\n    observeVisibility() {\n      // find all pages with an iframe with attribute \"data-src\" and observe its parent page\n      const observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting && entry.target.hasAttribute('data-src')) {\n            entry.target.setAttribute('src', entry.target.getAttribute('data-src'));\n            entry.target.removeAttribute('data-src');\n            observer.unobserve(entry.target);\n          }\n        }, {\n          root: document.querySelector('body > main')\n        });\n      });\n      for (const iframe of document.querySelectorAll('iframe[data-src], img[data-src]')) {\n        observer.observe(iframe);\n      }\n    },\n\n    translate(doc, rememberKeys, useKeys) {\n      let language = qx.locale.Manager.getInstance().getLanguage();\n      let match = /locale=([a-z]{2,3})/.exec(document.location.search);\n      if (match) {\n        language = match[1];\n      }\n      if (rememberKeys) {\n        this._trKeys = {};\n      }\n      for (const attr of ['name', 'label', 'title', 'format']) {\n        for (const trNameElement of doc.querySelectorAll(`*[${attr}^=\"tr(\"]`)) {\n          const match = /^tr\\('([^']+)'\\)$/.exec(trNameElement.getAttribute(attr));\n\n          if (!match && !useKeys) {\n            this.warn('attribute content no valid translation string', trNameElement.getAttribute(attr));\n\n            continue;\n          }\n          const key = useKeys ? this._trKeys[trNameElement.getAttribute(attr)] : match[1];\n          const translation = doc.querySelector(\n            `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n          );\n\n          if (translation) {\n            if (rememberKeys) {\n              this._trKeys[translation.textContent.trim()] = key;\n            }\n            trNameElement.setAttribute(attr, translation.textContent.trim());\n          } else {\n            trNameElement.setAttribute(attr, key);\n            this.warn(`[${language}] no translation found for: \"${key}\"`);\n          }\n        }\n      }\n      for (const trTextElement of doc.querySelectorAll('*[tr=\"true\"]')) {\n        const key = useKeys ? this._trKeys[trTextElement.textContent.trim()] : trTextElement.textContent.trim();\n        const translation = doc.querySelector(\n          `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n        );\n\n        if (translation) {\n          if (rememberKeys) {\n            this._trKeys[translation.textContent.trim()] = key;\n          }\n          trTextElement.textContent = translation.textContent.trim();\n        } else {\n          trTextElement.textContent = key;\n          this.warn(`[${language}] no translation found for: \"${key}\"`);\n        }\n      }\n    },\n\n    /**\n     * Handle fired event from screensaver\n     * @return {Array<string>} Array with addresses\n     */\n    doScreenSave() {\n      if (cv.Config.configSettings.screensave_page) {\n        this.scrollToPage(cv.Config.configSettings.screensave_page);\n      }\n    },\n\n    /**\n     * Return the addresses needed to update all states on the initially loaded page\n     */\n    getInitialAddresses() {\n      return [];\n    },\n\n    /**\n     * Returns the widget id of the page item initially loaded\n     * @returns {String} widget path like 'id_'...\n     */\n    getInitialPageId() {\n      const firstPage = document.querySelector('cv-page');\n      return firstPage ? firstPage.id : '';\n    },\n\n    /**\n     *\n     * @param name {String} mapping name\n     * @param mapping {cv.ui.structure.tile.elements.Mapping}\n     */\n    addMapping(name, mapping) {\n      if (!this.__mappings) {\n        this.__mappings = {};\n      }\n      this.__mappings[name] = mapping;\n    },\n\n    removeMapping(name) {\n      if (this.__mappings) {\n        delete this.__mappings[name];\n      }\n    },\n\n    mapValue(mappingName, value, store) {\n      let match;\n      let params = [];\n      if ((match = cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(mappingName)) !== null) {\n        // this mapping name contains a parameter\n        try {\n          params = JSON.parse(`[${match[2].replaceAll('\\'', '\"')}]`);\n        } catch (e) {\n          this.error('error parsing parameters from ' + mappingName);\n        }\n        mappingName = match[1];\n      }\n      if (this.__mappings && Object.prototype.hasOwnProperty.call(this.__mappings, mappingName)) {\n        return this.__mappings[mappingName].mapValue(value, store, params);\n      }\n      return value;\n    },\n\n    /**\n     * @param name {String} styling name\n     * @param styling {cv.ui.structure.tile.elements.Styling}\n     */\n    addStyling(name, styling) {\n      if (!this.__stylings) {\n        this.__stylings = {};\n      }\n      this.__stylings[name] = styling;\n    },\n\n    removeStyling(name) {\n      if (this.__stylings) {\n        delete this.__stylings[name];\n      }\n    },\n\n    styleValue(stylingName, value, store) {\n      if (this.__stylings && Object.prototype.hasOwnProperty.call(this.__stylings, stylingName)) {\n        return this.__stylings[stylingName].mapValue(value, store);\n      }\n      return value;\n    },\n\n    // for compatibility with pure controller\n    parseLabel() {\n      return '';\n    },\n\n    _onChangeLocale() {\n      this.translate(document.body, false, true);\n    }\n  },\n\n  defer(statics) {\n    if (!window.cvTestMode) {\n      // do not apply ourselves automatically in test mode\n      cv.Application.structureController = statics.getInstance();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.locale.Manager.getInstance().removeListener('changeLocale', this._onChangeLocale, this);\n  }\n});\n\nclass TemplatedElement extends HTMLElement {\n  constructor(templateId) {\n    super();\n    const controller = cv.ui.structure.tile.Controller.getInstance();\n    let template = document.getElementById(templateId);\n    if (template) {\n      const slotAttributes = ['name', 'replaces', 'parent-scope'];\n      const content = template.content.cloneNode(true);\n\n      // copy all attributes, except 'id' of the template itself to the widget\n      for (const name of template.getAttributeNames()) {\n        if (name !== 'id') {\n          this.setAttribute(name, template.getAttribute(name));\n        }\n      }\n\n      // move slots into template\n      for (let slot of content.querySelectorAll('slot')) {\n        const slotName = slot.getAttribute('name');\n        const replacementSelector = slot.hasAttribute('replaces') ? slot.getAttribute('replaces') : '';\n        const slotParentScope = slot.hasAttribute('parent-scope') ? parseInt(slot.getAttribute('parent-scope')) : 0;\n        let slotContents = this.querySelectorAll(`[slot='${slotName}']`);\n        const attrs = {};\n        for (let i = 0, l = slot.attributes.length; i < l; i++) {\n          if (!slotAttributes.includes(slot.attributes[i].name)) {\n            attrs[slot.attributes[i].name] = slot.attributes[i].value;\n          }\n        }\n        if (slotContents.length > 0) {\n          Array.from(slotContents).forEach(slotContent => {\n            const newNode = slotContent.cloneNode(true);\n            Object.keys(attrs).forEach(attrName => {\n              if (newNode.hasAttribute(attrName)) {\n                if (attrName === 'class') {\n                  // append it\n                  newNode.classList.add(attrs[attrName]);\n                } else {\n                  qx.log.Logger.debug(controller, '[' + templateId + '] attribute', attrName, 'already set, skipping');\n                }\n              } else {\n                newNode.setAttribute(attrName, attrs[attrName]);\n              }\n            });\n            newNode.removeAttribute('slot');\n            slot.parentNode.insertBefore(newNode, slot);\n          });\n          slot.remove();\n          if (replacementSelector) {\n            content.querySelectorAll(replacementSelector).forEach(replaced => {\n              replaced.remove();\n            });\n          }\n        } else {\n          let parentNode = slot.parentNode;\n          if (slotParentScope > 0) {\n            // got slotParentScope elements up and remove that one\n            let i = slotParentScope - 1;\n            while (i > 0) {\n              parentNode = parentNode.parentNode;\n              i--;\n            }\n            if (parentNode) {\n              parentNode.remove();\n            }\n          } else {\n            slot.remove();\n            if (parentNode.children.length === 0) {\n              // also remove slots parent when it has no content\n              parentNode.remove();\n            }\n          }\n        }\n      }\n      // transfer attribute slots\n      const attributes = this.getAttributeNames();\n      attributes.forEach(name => {\n        let value = this.getAttribute(name);\n        const targets = content.querySelectorAll('[slot-' + name + ']');\n        let targetName = name;\n        // allow names like percent-mapping that should also be mapped to a certain elements 'mapping' attribute\n        if (name.endsWith('-mapping')) {\n          targetName = 'mapping';\n        } else if (name.endsWith('-styling')) {\n          targetName = 'styling';\n        } else if (name.endsWith('-format')) {\n          targetName = 'format';\n        }\n        for (const target of targets) {\n          if (targetName !== name && target.hasAttribute('slot-' + name)) {\n            const targetValue = target.getAttribute('slot-' + name);\n            if (targetValue.startsWith(':')) {\n              // this template slot-attribute contains some configuration\n              for (const entry of targetValue.substring(1).split(',')) {\n                const [key, value] = entry.split('=');\n                switch (key) {\n                  case 'target':\n                    name = value;\n                    break;\n                  default:\n                    qx.log.Logger.error(this, 'unhandled slot-attribute configuration key', key);\n                    break;\n                }\n              }\n            }\n            target.setAttribute(name, value);\n\n            target.removeAttribute('slot-' + name);\n          } else {\n            target.setAttribute(targetName, value);\n\n            target.removeAttribute('slot-' + targetName);\n          }\n        }\n        if (targets.length > 0) {\n          this.removeAttribute(name);\n        }\n      });\n      content.querySelectorAll('*').forEach(elem => {\n        [...elem.attributes].forEach(attr => {\n          if (attr.name.startsWith('slot-')) {\n            let targetName = attr.name.substring(5);\n            // only e.g. map slot-progress-mapping to mapping if we have no slot-mapping attribute\n            if (attr.name.endsWith('-mapping') && elem.hasAttribute('slot-mapping')) {\n              targetName = 'mapping';\n            } else if (attr.name.endsWith('-styling') && elem.hasAttribute('slot-styling')) {\n              targetName = 'styling';\n            } else if (attr.name.endsWith('-format') && elem.hasAttribute('slot-format')) {\n              targetName = 'format';\n            }\n            if (attr.value && !attr.value.startsWith(':')) {\n              elem.setAttribute(targetName, attr.value);\n            }\n            elem.removeAttribute(attr.name);\n          }\n        });\n      });\n\n      // clear content\n      this.innerHTML = '';\n      this.appendChild(content);\n      this.classList.add('cv-widget');\n    } else {\n      qx.log.Logger.error(controller, '[' + templateId + '] no template found for id', templateId);\n    }\n  }\n}\n","/* MPopup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Handles cv-popup children and some general popup tasks, like global registration and close on click outside, modal blocker etc.\n */\nqx.Mixin.define('cv.ui.structure.tile.MPopup', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._onPointerDownBounded = this._onPointerDown.bind(this);\n  },\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  events: {\n    closed: 'qx.event.type.Event'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _childPopup: null,\n    _onPointerDownBounded: null,\n\n    _initPopupChild() {\n      const popup = (this._childPopup = this._element.querySelector(':scope > cv-popup'));\n      if (popup) {\n        qx.event.Registration.addListener(this._element, 'tap', this._openPopupChild, this);\n\n        // we need to tell the parent widget that is inside a group that wen have a popup here\n        let parent = popup.parentElement;\n        let last;\n        while (parent) {\n          if (parent.tagName.toLowerCase() === 'cv-group') {\n            last.classList.add('has-popup');\n          } else if (parent.tagName.toLowerCase() === 'cv-page') {\n            break;\n          }\n          last = parent;\n          parent = parent.parentElement;\n        }\n      }\n    },\n\n    _openPopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup:not([open])');\n\n      if (popup) {\n        popup.getInstance().open();\n      }\n    },\n\n    _closePopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup[open]');\n      if (popup) {\n        popup.getInstance().close();\n      }\n    },\n\n    registerModalPopup() {\n      document.addEventListener('pointerup', this._onPointerDownBounded);\n\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('modal-popup-blocker');\n        document.body.appendChild(blocker);\n      }\n      blocker.style.display = 'block';\n      cv.ui.structure.tile.MPopup.openedPopups.push(this);\n    },\n\n    unregisterModalPopup() {\n      document.removeEventListener('pointerup', this._onPointerDownBounded);\n\n      const index = cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);\n      cv.ui.structure.tile.MPopup.openedPopups.splice(index, 1);\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (blocker && cv.ui.structure.tile.MPopup.openedPopups.length === 0) {\n        blocker.style.display = 'none';\n      }\n    },\n\n    _onPointerDown(ev) {\n      if (!cv.util.Tree.isChildOf(ev.target, this._element)) {\n        ev.preventDefault();\n        ev.stopImmediatePropagation();\n        // clicked outside -> close (with delay to capture composed events)\n        qx.event.Timer.once(this.close, this, 100);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(this._element, 'tap', this._openPopupChild, this);\n\n    this._childPopup = null;\n  }\n});\n","/* MRefresh.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a refresh attribute that triggers a 'refresh' method which must be implemented by classes including this mixin.\n */\nqx.Mixin.define('cv.ui.structure.tile.MRefresh', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    if (qx.Class.hasMixin(this.constructor, cv.ui.structure.tile.MVisibility)) {\n      this.addListener('changeVisible', this.__onVisibilityChange, this);\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    refresh: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyRefresh'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _refreshTimer: null,\n    _lastRefresh: null,\n\n    _applyRefresh(value) {\n      if (value === 0) {\n        if (this._refreshTimer) {\n          this._refreshTimer.stop();\n        }\n      } else if (!this._refreshTimer) {\n        this._refreshTimer = new qx.event.Timer(value * 1000);\n        this._refreshTimer.addListener('interval', this.__doRefresh, this);\n        if (typeof this.isVisible === 'function') {\n          if (this.isVisible()) {\n            this._refreshTimer.start();\n          }\n        } else {\n          this._refreshTimer.start();\n        }\n      } else {\n        this._refreshTimer.restartWith(value * 1000);\n      }\n    },\n\n    __onVisibilityChange(ev) {\n      if (ev.getData()) {\n        if (this._refreshTimer) {\n          this._refreshTimer.start();\n          if (!this._lastRefresh || Date.now() - this._lastRefresh >= this._refreshTimer.getInterval()) {\n            // last execution time too old, refresh now\n            this.__doRefresh();\n          }\n        } else if (!this._lastRefresh) {\n          // refresh once when the item becomes visible\n          this.__doRefresh();\n        }\n      } else if (this._refreshTimer) {\n        this._refreshTimer.stop();\n      }\n    },\n\n    __doRefresh() {\n      if (typeof this.refresh === 'function') {\n        this.refresh();\n        this._lastRefresh = Date.now();\n      } else {\n        this.error('refresh method must be implemented!');\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_refreshTimer');\n  }\n});\n","/* MVisibility.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements visibility\n * @ignore(IntersectionObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MVisibility', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observeVisibility();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    observer: new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.target._instance) {\n          entry.target._instance.setVisible(entry.isIntersecting);\n        }\n      }, {\n        root: document.querySelector('body > main')\n      });\n    })\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visible: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _observeVisibility() {\n      if (this._element) {\n        cv.ui.structure.tile.MVisibility.observer.observe(this._element);\n      } else {\n        this.warn('no element to observe defined');\n      }\n    }\n  }\n});\n","/* MResize.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements resizing\n * @ignore(ResizeObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MResize', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observer = new ResizeObserver((entries, observer) => {\n      const element = this.getResizeTarget();\n      entries.some(entry => {\n        if (entry.target === element) {\n          this.fireDataEvent('resized', entry);\n          return true;\n        }\n        return false;\n      });\n    });\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    resized: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    resizeTarget: {\n      check: 'Element',\n      nullable: true,\n      apply: '_applyResizeTarget'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {ResizeObserver}\n     */\n    _observer: null,\n\n    _applyResizeTarget(element, oldElement) {\n      if (oldElement) {\n        this._observer.unobserve(oldElement);\n      }\n      if (element) {\n        this._observer.observe(element);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._observer.disconnect();\n    this._observer = null;\n  }\n});\n","/* AbstractCustomElement.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.elements.AbstractCustomElement', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    this._element = element;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connected: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyConnected',\n      event: 'changeConnected'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {HTMLElement}\n     */\n    _element: null,\n\n    _initialized: false,\n\n    _applyConnected(value) {\n      if (value && !this._initialized) {\n        this._init();\n        this._initialized = true;\n      } else {\n        this._disconnected();\n        this._initialized = false;\n      }\n    },\n    _init() {},\n\n    _disconnected() {},\n\n    getElement() {\n      return this._element;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._element = null;\n  }\n});\n\n/* eslint-disable-next-line no-redeclare */\nclass QxConnector extends HTMLElement {\n  constructor(QxClass) {\n    super();\n    if (qx.Class.isSubClassOf(QxClass, cv.ui.structure.tile.elements.AbstractCustomElement)) {\n      this._instance = new QxClass(this);\n    } else {\n      throw Error(QxClass + ' must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement');\n    }\n    if (this.hasAttribute('colspan')) {\n      this.classList.add('colspan-' + this.getAttribute('colspan'));\n    }\n    if (this.hasAttribute('rowspan')) {\n      this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n    }\n  }\n\n  getInstance() {\n    return this._instance;\n  }\n\n  connectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(true);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(false);\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (this._instance && qx.Class.hasProperty(this._instance.constructor, name)) {\n      this._instance.set(name, newValue);\n    }\n  }\n}\n\nwindow.QxConnector = QxConnector;\n",null,"/* AbstractComponent.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Base class for all components.\n */\nqx.Class.define('cv.ui.structure.tile.components.AbstractComponent', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      apply: '_applyValue',\n      init: null\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    enabled: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyEnabled'\n    },\n\n    visibility: {\n      check: ['visible', 'excluded', 'hidden'],\n      init: 'visible',\n      apply: '_applyVisibility',\n      event: 'changeVisibility'\n    },\n\n    /**\n     * True if this tile is the content of a template based widget\n     */\n    widget: {\n      check: 'Boolean',\n      init: 'false'\n    },\n\n    /**\n     * True if this tile is the content of a popup\n     */\n    inPopup: {\n      check: 'Boolean',\n      init: 'false'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    _headerFooterParent: null,\n\n    _checkIfWidget() {\n      let isWidget = false;\n      let isPopup = false;\n      if (this._element.parentElement.localName === 'cv-popup') {\n        this._headerFooterParent = this._element.parentElement;\n        isPopup = true;\n      } else {\n        let tile = this._element;\n        let i = 0;\n        // we are looking for cv-tile parent which is the direct child of a widget\n        while (tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n          i++;\n          if (i > 2) {\n            tile = null;\n            break;\n          }\n        }\n        if (tile) {\n          let parent = tile.parentElement;\n          this._headerFooterParent = parent;\n          if (parent.localName === 'cv-popup') {\n            isPopup = true;\n          } else if (parent.localName.startsWith('cv-')) {\n            isWidget = parent.localName === 'cv-widget' || !!document.getElementById(parent.localName.substring(3));\n          }\n        }\n      }\n      this.setInPopup(isPopup);\n      this.setWidget(isWidget);\n    },\n\n    _init() {\n      this._checkIfWidget();\n\n      const element = this._element;\n      let hasReadAddress = false;\n      const writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    /**\n     * Append the given element to a header inside the widget this component is a direct child of.\n     * If the header does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     * @param align {String} center (default), left or right\n     */\n    appendToHeader(element, align) {\n      if (this._headerFooterParent) {\n        let header = this._headerFooterParent.querySelector(':scope > header');\n        if (!header) {\n          header = document.createElement('header');\n          this._headerFooterParent.insertBefore(header, this._headerFooterParent.firstElementChild);\n        }\n        let targetParent = header;\n        if (align) {\n          targetParent = header.querySelector('.' + align);\n          if (!targetParent) {\n            targetParent = document.createElement('div');\n            targetParent.classList.add(align);\n          }\n          header.appendChild(targetParent);\n        }\n        targetParent.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the header or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getHeader(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > header');\n        } \n          const header = this._headerFooterParent.querySelector(':scope > header');\n          if (header) {\n            return header.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Append the given element to a footer inside the widget this component is a direct child of.\n     * If the footer does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     */\n    appendToFooter(element) {\n      if (this._headerFooterParent) {\n        let footer = this._headerFooterParent.querySelector(':scope > footer');\n        if (!footer) {\n          footer = document.createElement('footer');\n          this._headerFooterParent.appendChild(footer);\n        }\n        footer.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the footer or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getFooter(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > footer');\n        } \n          const footer = this._headerFooterParent.querySelector(':scope > footer');\n          if (footer) {\n            return footer.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    // property apply\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping') && this._element.getAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(this._element.getAttribute('mapping'), value);\n        }\n        if (this._element.hasAttribute('format') && this._element.getAttribute('format')) {\n          mappedValue = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            mappedValue instanceof Date ? mappedValue.toLocaleString() : mappedValue\n          );\n        }\n        this._updateValue(mappedValue, value);\n        if (this._element.hasAttribute('styling') && this._element.getAttribute('styling')) {\n          let styleClass = cv.Application.structureController.styleValue(this._element.getAttribute('styling'), value);\n\n          this.setStyleClass(styleClass);\n        }\n      }\n    },\n\n    // needs to be implemented by inheriting classes\n    _updateValue(mappedValue, value) {},\n\n    // property apply\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyEnabled(value) {\n      let blocker = this._element.querySelector(':scope > .blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('blocker');\n        this._element.appendChild(blocker);\n        blocker.addEventListener('click', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerdown', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerup', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n      }\n      this._element.setAttribute('disabled', value === false ? 'true' : 'false');\n\n      blocker.style.display = value === true ? 'none' : 'block';\n    },\n\n    _applyVisibility(value, oldValue) {\n      const target = this.isWidget() ? this._element.parentElement : this._element;\n      if (oldValue === 'hidden') {\n        target.style.opacity = '1.0';\n      }\n      switch (value) {\n        case 'visible':\n          target.style.display = null;\n          break;\n\n        case 'hidden':\n          target.style.opacity = '0';\n          break;\n\n        case 'excluded':\n          target.style.display = 'none';\n          break;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     * @return {Boolean} true of the update has been handled\n     */\n    onStateUpdate(ev) {\n      switch (ev.detail.target) {\n        case 'enabled':\n          this.setEnabled(ev.detail.state === 1);\n          ev.stopPropagation();\n          return true;\n        case 'show-exclude':\n          this.setVisibility(ev.detail.state ? 'visible' : 'excluded');\n          ev.stopPropagation();\n          return true;\n        case 'show-hide':\n          this.setVisibility(ev.detail.state ? 'visible' : 'hidden');\n          ev.stopPropagation();\n          return true;\n        case '':\n          this.setValue(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n      }\n\n      return false;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._writeAddresses = null;\n    this._headerFooterParent = null;\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates breadcrumb navigation bar down to the currently shown page.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Breadcrumbs', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._update, this);\n    },\n\n    _update() {\n      let list = this._element.querySelector(':scope > ul');\n      if (!list) {\n        list = document.createElement('ul');\n        this._element.appendChild(list);\n      }\n      const listItems = [];\n      const activePage = document.body.querySelector('cv-page.active');\n      const startPage = document.body.querySelector('main > cv-page:first-of-type');\n\n      if (activePage && activePage !== startPage) {\n        let currentPage = activePage;\n        while (currentPage) {\n          let li = this._createListItem(currentPage.getAttribute('id'), currentPage.getAttribute('name'));\n          listItems.unshift(li);\n          let parent = currentPage.parentElement;\n          while (parent) {\n            if (parent.localName === 'cv-page') {\n              currentPage = parent;\n              break;\n            }\n            parent = parent.parentElement;\n          }\n          if (!parent || currentPage === startPage) {\n            break;\n          }\n        }\n      }\n      let start = list.querySelector(':scope > li.start');\n      if (!start) {\n        start = this._createListItem(startPage.getAttribute('id'), startPage.getAttribute('name'));\n        start.classList.add('start');\n      }\n      listItems.unshift(start);\n\n      list.replaceChildren(...listItems);\n    },\n\n    _createListItem(pageId, text) {\n      const li = document.createElement('li');\n      const a = document.createElement('a');\n      a.setAttribute('href', '#' + pageId);\n      a.textContent = text;\n      li.appendChild(a);\n      return li;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._update, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'breadcrumbs',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Button.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Button', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__store = new Map();\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['button', 'trigger', 'push'],\n      init: 'button'\n    },\n\n    on: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOn'\n    },\n\n    onClass: {\n      check: 'String',\n      init: 'active'\n    },\n\n    offClass: {\n      check: 'String',\n      init: 'inactive'\n    },\n\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      apply: '_applyName'\n    },\n\n    progress: {\n      check: 'Number',\n      init: -1,\n      apply: '_applyProgress',\n      transform: '_parseInt'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    __textLabel: null,\n    __circumference: null,\n    /**\n     * @var {Map} value store for addresses to be able to use them e.g. in mapping formulas\n     */\n    __store: null,\n\n    _parseInt(val) {\n      const intVal = parseInt(val);\n      return Number.isNaN(intVal) ? 0 : intVal;\n    },\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      if (element.hasAttribute('name')) {\n        this.setName(element.getAttribute('name'));\n      }\n      if (element.hasAttribute('progress')) {\n        this.setProgress(element.getAttribute('progress'));\n      }\n      if (element.hasAttribute('on-value')) {\n        this.setOnValue(element.getAttribute('on-value'));\n      }\n      if (element.hasAttribute('off-value')) {\n        this.setOffValue(element.getAttribute('off-value'));\n      }\n      let hasReadAddress = false;\n      let writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      const events = {};\n      if (writeAddresses.length > 0) {\n        let eventSource = element;\n        if (element.getAttribute('whole-tile') === 'true') {\n          // find parent tile and use it as event source\n          let parent = element.parentElement;\n          let level = 0;\n          while (level <= 2) {\n            parent = parent.parentElement;\n            level++;\n            if (parent.tagName.toLowerCase() === 'cv-tile') {\n              eventSource = parent;\n              eventSource.classList.add('clickable');\n            }\n          }\n        }\n        writeAddresses.forEach(addr => {\n          let event = addr.hasAttribute('on') ? addr.getAttribute('on') : 'click';\n          switch (event) {\n            case 'click':\n              events.click = this.onClicked.bind(this);\n              break;\n            case 'up':\n              events.pointerup = this.onPointerUp.bind(this);\n              break;\n            case 'down':\n              events.pointerdown = this.onPointerDown.bind(this);\n              break;\n          }\n        });\n        Object.getOwnPropertyNames(events).forEach(eventName =>\n          eventSource.addEventListener(eventName, ev => {\n            events[eventName](ev);\n          })\n        );\n      }\n      if (element.hasAttribute('doc-link') && !Object.prototype.hasOwnProperty.call(events, 'click')) {\n        element.addEventListener('click', ev => {\n          this.onClicked(ev);\n        });\n      }\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      } else if (element.hasAttribute('mapping') || element.hasAttribute('styling')) {\n        // apply the trigger state\n        const triggerAddresses = writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on'));\n\n        if (triggerAddresses.length === 1) {\n          const value = triggerAddresses[0].getAttribute('value');\n          qx.event.Timer.once(\n            () => {\n              // using == comparisons to make sure that e.g. 1 equals \"1\"\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setOn(value == this.getOnValue());\n            },\n            this,\n            1000\n          );\n        }\n      }\n\n      // detect button type\n      if (\n        !hasReadAddress &&\n        writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on')).length === 1\n      ) {\n        // only one write address with a fixed value and no special event => simple trigger\n        this.setType('trigger');\n      } else {\n        let hasDown = false;\n        let hasUp = false;\n        writeAddresses.some(addr => {\n          if (addr.hasAttribute('value') && addr.hasAttribute('on')) {\n            if (!hasDown) {\n              hasDown = addr.getAttribute('on') === 'down';\n            }\n            if (!hasUp) {\n              hasUp = addr.getAttribute('on') === 'up';\n            }\n          }\n          return hasUp && hasDown;\n        });\n        if (hasUp && hasDown) {\n          // has an address for up and one for down event with a fixed value -> pushbutton\n          this.setType('push');\n        }\n      }\n    },\n\n    _initProgress() {\n      const element = this._element;\n      this.__circumference = 100 * Math.PI;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('viewBox', '0 0 100 100');\n      svg.setAttribute('type', 'circle');\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\n      circle.classList.add('bar');\n      circle.setAttribute('r', '49');\n      circle.setAttribute('cx', '50');\n      circle.setAttribute('cy', '50');\n      circle.setAttribute('stroke-width', '2');\n      circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n      circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n      svg.appendChild(circle);\n      element.appendChild(svg);\n      // make sure that we do not override the progress bar by state appearance\n      element.classList.add('progress');\n    },\n\n    _applyConnected(value) {\n      super._applyConnected(value);\n      if (value) {\n        if (this.getType() !== 'trigger') {\n          // delay this because we need the mappings to be ready\n          qx.event.Timer.once(this._applyOn, this, 1000);\n        }\n      }\n    },\n    _applyOn() {\n      if (this.isConnected()) {\n        let value = this.isOn() ? this.getOnValue() : this.getOffValue();\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(\n            this._element.getAttribute('mapping'),\n            value,\n            this.__store\n          );\n        }\n        const target = this._element.querySelector('.value');\n        if (target && target.tagName.toLowerCase() === 'cv-icon') {\n          if (target._instance) {\n            target._instance.setId(mappedValue);\n          } else {\n            target.textContent = mappedValue;\n          }\n        } else {\n          this.updateValue(mappedValue);\n        }\n        let styleClass = this.isOn() ? this.getOnClass() : this.getOffClass();\n        if (this._element.hasAttribute('styling')) {\n          styleClass = cv.Application.structureController.styleValue(\n            this._element.getAttribute('styling'),\n            value,\n            this.__store\n          );\n        }\n        this.setStyleClass(styleClass);\n      }\n    },\n\n    _applyProgress(value) {\n      let valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n      if (!valueElement) {\n        this._initProgress();\n        valueElement = this._element.querySelector(':scope > svg > circle.bar');\n      }\n      if (valueElement) {\n        if (this._element.hasAttribute('progress-mapping')) {\n          value = cv.Application.structureController.mapValue(\n            this._element.getAttribute('progress-mapping'),\n            value,\n            this.__store\n          );\n        }\n        valueElement.setAttribute(\n          'stroke-dashoffset',\n          '' + (this.__circumference - (value / 100) * this.__circumference)\n        );\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyName(value) {\n      if (!this.__textLabel) {\n        this.__textLabel = document.createElement('label');\n        this.__textLabel.classList.add('button-label');\n        this._element.appendChild(this.__textLabel);\n      }\n      this.__textLabel.textContent = value;\n    },\n\n    updateValue(value) {\n      const elem = this._element.querySelector('span.value');\n      if (elem) {\n        elem.innerHTML = value;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == this.getOnValue();\n      let target = ev.detail.target || 'default';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      if (target === 'default') {\n        this.setOn(value);\n      } else if (target === 'progress') {\n        this.setProgress(ev.detail.state);\n      } else if (target.startsWith('store:')) {\n        this.__store.set(target.substring(6), ev.detail.state);\n      } else if (target === 'store') {\n        // use address as store key\n        this.__store.set(ev.detail.address, ev.detail.state);\n      }\n    },\n\n    onClicked(event) {\n      this.createRipple(event);\n      if (this._element.hasAttribute('doc-link')) {\n        let relPath = this._element.getAttribute('doc-link');\n        // add locale and version\n        const baseVersion = cv.Version.VERSION.split('.').slice(0, 2).join('.');\n        let language = qx.locale.Manager.getInstance().getLanguage();\n        if (language !== 'de') {\n          // documentation only exists in 'de' and 'en'\n          language = 'en';\n        }\n        window.open(`https://www.cometvisu.org/CometVisu/${language}/${baseVersion}/manual/${relPath}`);\n        event.stopPropagation();\n      } else {\n        if (!this._writeAddresses) {\n          this._writeAddresses = Array.prototype.filter.call(\n            this._element.querySelectorAll('addresses > cv-address'),\n            address => !address.hasAttribute('mode') || address.getAttribute('mode') !== 'read'\n          );\n        }\n        const ev = new CustomEvent('sendState', {\n          detail: {\n            value: this.isOn() ? this.getOffValue() : this.getOnValue(),\n            source: this\n          }\n        });\n\n        if (this.getType() === 'trigger') {\n          // simulate feedback\n          this.setOn(true);\n          qx.event.Timer.once(\n            () => {\n              this.setOn(false);\n            },\n            null,\n            250\n          );\n        }\n        this._writeAddresses\n          .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n          .forEach(address => address.dispatchEvent(ev));\n        event.stopPropagation();\n      }\n    },\n\n    onPointerDown() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'down' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    onPointerUp() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'up' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    createRipple(event) {\n      const button = event.currentTarget;\n      let container = button.querySelector(':scope .ripple-container');\n      if (!container) {\n        container = document.createElement('div');\n        container.classList.add('ripple-container');\n        button.appendChild(container);\n      }\n      const circle = document.createElement('span');\n      const diameter = Math.max(button.clientWidth, button.clientHeight);\n      const radius = diameter / 2;\n      circle.style.width = circle.style.height = `${diameter}px`;\n      let x = event.clientX - (button.offsetLeft + radius);\n      let y = event.clientY - (button.offsetTop + radius);\n      if (button === this._element) {\n        x -= button.offsetParent.offsetLeft;\n        y -= button.offsetParent.offsetTop;\n      }\n      circle.style.left = `${x}px`;\n      circle.style.top = `${y}px`;\n      circle.classList.add('ripple');\n      // remove old ones\n      container.querySelectorAll('.ripple').forEach(ripple => ripple.remove());\n      container.appendChild(circle);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'button',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Address.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Address element that connect a widget/component to the backend.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Address', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __lastValue: null,\n    __transformedValue: null,\n\n    _init() {\n      const element = this._element;\n      const address = element.textContent.trim();\n      if (address) {\n        const model = cv.data.Model.getInstance();\n        const backendName = element.getAttribute('backend');\n        model.addAddress(address, element.getAttribute('id'), backendName);\n        const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'readwrite';\n        if (mode !== 'write') {\n          // subscribe\n          // this is a read address register for updates\n          const state = model.getState(address, backendName);\n          if (state !== undefined) {\n            this.fireStateUpdate(address, state);\n          }\n          //add listener\n          model.addUpdateListener(address, this.fireStateUpdate, this, backendName);\n\n          if (element.hasAttribute('target') && element.getAttribute('target').startsWith('last-update')) {\n            if (state === undefined) {\n              // notify tile that we have no value, so its outdated\n              this.fireStateUpdate(address, '-');\n            }\n          }\n        }\n        if (mode !== 'read') {\n          // listen for sendState events\n          element.addEventListener('sendState', ev => {\n            let value = null;\n            if (Object.prototype.hasOwnProperty.call(ev.detail, 'value')) {\n              value = ev.detail.value;\n            }\n            if (element.hasAttribute('value')) {\n              // address has a fixed value that must be sent\n              value = element.getAttribute('value');\n            }\n            const allowDuplicates =\n              ev.detail.source &&\n              ev.detail.source instanceof cv.ui.structure.tile.components.Button &&\n              (ev.detail.source.getType() === 'trigger' || ev.detail.source.getType() === 'push');\n            if (value !== null) {\n              const encoding = element.getAttribute('transform') || 'raw';\n              const encodedValue = cv.Transform.encodeBusAndRaw({\n                transform: encoding,\n                selector: this._element.getAttribute('selector'),\n                ignoreError: this._element.getAttribute('ignore-error') === 'true',\n                variantInfo: this._element.getAttribute('variant'),\n                qos: (this._element.getAttribute('qos') || 0) | 0\n              }, value);\n\n              // noinspection EqualityComparisonWithCoercionJS\n              if (\n                allowDuplicates ||\n                !Object.prototype.hasOwnProperty.call(element, 'lastSentValue') ||\n                encodedValue.raw !== element.lastSentValue\n              ) {\n                if (element.hasAttribute('delay')) {\n                  const delay = parseInt(element.getAttribute('delay'));\n                  this.debug(`send with delay of ${delay}ms`);\n                  qx.event.Timer.once(\n                    () => {\n                      cv.io.BackendConnections.getClient(backendName).write(\n                        address,\n                        encodedValue.bus,\n                        element\n                      );\n\n                      if (!allowDuplicates) {\n                        element.lastSentValue = encodedValue.raw;\n                      }\n                    },\n                    this,\n                    delay\n                  );\n                } else {\n                  cv.io.BackendConnections.getClient(backendName).write(address, encodedValue.bus, element);\n\n                  if (!allowDuplicates) {\n                    element.lastSentValue = encodedValue.raw;\n                  }\n                }\n              }\n            }\n          });\n        }\n      }\n    },\n\n    /**\n     * Creates a 'stateUpdate' event with the transformed value and dispatches it to the <cv-address>-Element.\n     * @param address {String} address\n     * @param state {variant} state to send\n     */\n    fireStateUpdate(address, state) {\n      if (this.__lastValue !== state || this._element.getAttribute('send-mode') === 'always') {\n        let transform = this._element.getAttribute('transform') || 'raw';\n        let transformedState = cv.Transform.decode({\n          transform: transform,\n          selector: this._element.getAttribute('selector'),\n          ignoreError: this._element.getAttribute('ignore-error') === 'true',\n          variantInfo: this._element.getAttribute('variant'),\n          qos: (this._element.getAttribute('qos') || 0) | 0\n        }, state);\n\n        let mapping = '';\n        if (this._element.hasAttribute('mapping')) {\n          mapping = this._element.getAttribute('mapping');\n          transformedState = cv.Application.structureController.mapValue(mapping, transformedState);\n        }\n        if (this._element.hasAttribute('format')) {\n          transformedState = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            transformedState instanceof Date ? transformedState.toLocaleString() : transformedState\n          );\n        }\n        let targetConfig = this._element.hasAttribute('target') ? this._element.getAttribute('target').split(':') : [];\n        const target = targetConfig.length > 0 ? targetConfig.shift() : '';\n        const ev = new CustomEvent('stateUpdate', {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            address: this._element.textContent.trim(),\n            state: transformedState,\n            target: target,\n            targetConfig: targetConfig,\n            raw: state,\n            mapping: mapping,\n            addressValue: this._element.hasAttribute('value') ? this._element.getAttribute('value') : null,\n            source: this,\n            variant: this._element.hasAttribute('variant') ? this._element.getAttribute('variant') : null\n          }\n        });\n\n        this.__transformedValue = transformedState;\n        //console.log(ev.detail);\n        this._element.dispatchEvent(ev);\n        this.__lastValue = state;\n        // reset lastSentValue\n        if (state !== this._element.lastSentValue) {\n          this._element.lastSentValue = null;\n        }\n      }\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a read address\n     */\n    isRead() {\n      return this._element.getAttribute('mode') !== 'write';\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a write address\n     */\n    isWrite() {\n      return this._element.getAttribute('mode') !== 'read';\n    },\n\n    getValue() {\n      return this.__transformedValue;\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Chart.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.MVisibility,\n    cv.ui.structure.tile.MRefresh,\n    cv.ui.structure.tile.MResize\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ChartCounter: 0,\n    DEFAULT_ASPECT_RATIO: 392/192,\n\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loaded d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          decimal: qx.locale.Number.getDecimalSeparator().translate().toString(),\n          thousands: qx.locale.Number.getGroupSeparator().translate().toString(),\n          grouping: [3],\n          currency: ['â¬', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          dateTime: '%A, der %e. %B %Y, %X',\n          date: '%d.%m.%Y',\n          time: '%H:%M:%S',\n          periods: [qx.locale.Date.getAmMarker().translate().toString(), qx.locale.Date.getPmMarker().translate().toString()],\n          days: qx.locale.Date.getDayNames('wide', null, 'format').map(t => t.translate().toString()),\n\n          shortDays: qx.locale.Date.getDayNames('narrow', null, 'stand-alone').map(t => t.translate().toString()),\n          months: qx.locale.Date.getMonthNames('wide').map(t => t.translate().toString()),\n          shortMonths: qx.locale.Date.getMonthNames('narrow', null, 'stand-alone').map(t => t.translate().toString())\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    currentSeries: {\n      check: ['hour', 'day', 'week', 'month', 'year'],\n      init: 'day',\n      apply: '__updateTimeRange'\n    },\n\n    currentPeriod: {\n      check: 'Number',\n      init: 0,\n      apply: '__updateTimeRange'\n    },\n\n    startTime: {\n      check: 'Number',\n      init: 0\n    },\n\n    endTime: {\n      check: 'Number',\n      init: 0\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _id: null,\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n    _initializing: null,\n    _navigationEnabled: null,\n    __toolTipTimer: null,\n    __showTooltip: false,\n    __debouncedOnResize: null,\n    __resizeTimeout: null,\n    __startTs: null,\n    __endTs: null,\n\n    /**\n    * @type {d3.Selection}\n    */\n    _dot: null,\n    /**\n     * @type {d3.Selection}\n     */\n    _svg: null,\n    /**\n     * @type {HTMLElement}\n     */\n    _tooltip: null,\n    /**\n     * @type {String}\n     */\n    _titleString: null,\n\n    __helpers: null,\n    __config: null,\n    // all chart properties\n    _chartConf: null,\n\n    async _init() {\n      this._checkIfWidget();\n\n      this._initializing = true;\n      const element = this._element;\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      this._id = cv.ui.structure.tile.components.Chart.ChartCounter++;\n      const chartId = 'chart-' + this._id;\n      element.setAttribute('data-chart-id', this._id.toString());\n      const inBackground = this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true';\n\n      let title = this.getHeader('label.title');\n      if (!inBackground && element.hasAttribute('title') && !title) {\n        title = document.createElement('label');\n        title.classList.add('title');\n        let span = document.createElement('span');\n        title.appendChild(span);\n        span.textContent = element.getAttribute('title');\n        this.appendToHeader(title);\n      }\n\n      if (title) {\n        // save base title for updating\n        this._titleString = title.textContent.trim();\n      }\n\n      let seriesSelection = [];\n      if (!inBackground && element.hasAttribute('selection')) {\n        const s = element.getAttribute('selection');\n        if (s === 'none') {\n          seriesSelection = [];\n        } else if (s === 'all') {\n          seriesSelection = ['hour', 'day', 'week', 'month', 'year'];\n        } else {\n          seriesSelection = s.split(',').map(n => n.trim().toLowerCase());\n        }\n      }\n      if (element.hasAttribute('series')) {\n        this.setCurrentSeries(element.getAttribute('series'));\n      }\n      const currentSeries = this.getCurrentSeries();\n      if (seriesSelection.length > 0 && !seriesSelection.includes(currentSeries)) {\n        seriesSelection.push(currentSeries);\n      }\n      this._navigationEnabled = seriesSelection.length > 0;\n      if (seriesSelection.length > 0) {\n        // back button\n        let button = this._buttonFactory('ri-arrow-left-s-line', ['prev']);\n        button.setAttribute('title', qx.locale.Manager.tr('previous'));\n        button.addEventListener('click', () => this._onSeriesPrev());\n\n        if (!title) {\n          title = document.createElement('label');\n          title.classList.add('title');\n          let span = document.createElement('span');\n          title.appendChild(span);\n          this.appendToHeader(title);\n        }\n\n        title.parentElement.insertBefore(button, title);\n        const i = document.createElement('i');\n        i.classList.add('ri-arrow-down-s-fill');\n        title.appendChild(i);\n\n        // current selection\n        const popup = document.createElement('div');\n        popup.classList.add('popup', 'series');\n        let option;\n        for (const s of seriesSelection) {\n          option = document.createElement('cv-option');\n          option.setAttribute('key', s);\n          if (s === currentSeries) {\n            option.setAttribute('selected', 'selected');\n          }\n          option.textContent = this._seriesToShort(s);\n          option.addEventListener('click', ev => {\n            popup.style.display = 'none';\n            this._onSeriesChange(ev.target.getAttribute('key'));\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n          popup.appendChild(option);\n        }\n        title.appendChild(popup);\n\n        // make title clickable\n        title.classList.add('clickable');\n        title.addEventListener('click', ev => {\n          const style = getComputedStyle(popup);\n          if (style.getPropertyValue('display') === 'none') {\n            popup.style.display = 'flex';\n          } else {\n            popup.style.display = 'none';\n          }\n          ev.stopPropagation();\n          ev.preventDefault();\n        });\n\n        // forward button\n        button = this._buttonFactory('ri-arrow-right-s-line', ['next']);\n        button.setAttribute('title', qx.locale.Manager.tr('next'));\n        // initially we cannot go into the future\n        button.disabled = true;\n        button.addEventListener('click', () => this._onSeriesNext());\n        this.appendToHeader(button);\n      }\n      if (!inBackground && element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        // add fullscreen button + address\n        const button = this._buttonFactory('ri-fullscreen-line', ['fullscreen']);\n        button.setAttribute('data-value', '0');\n\n        const popupAddress = `state:${chartId}-popup`;\n\n        button.addEventListener('click', () => {\n          cv.data.Model.getInstance().onUpdate(popupAddress, button.getAttribute('data-value') === '0' ? '1' : '0', 'system');\n        });\n\n        this.appendToHeader(button, 'right');\n\n        // address\n        const tileAddress = document.createElement('cv-address');\n        tileAddress.setAttribute('mode', 'read');\n        tileAddress.setAttribute('target', 'fullscreen-popup');\n        tileAddress.setAttribute('backend', 'system');\n        tileAddress.setAttribute('send-mode', 'always');\n        tileAddress.textContent = popupAddress;\n        element.parentElement.appendChild(tileAddress);\n\n        // listen to parent tile of popup is opened or not\n        let parent = element;\n        while (parent && parent.nodeName.toLowerCase() !== 'cv-tile') {\n          parent = parent.parentElement;\n        }\n        if (parent) {\n          const tileWidget = parent.getInstance();\n          tileWidget.addListener('closed', () => cv.data.Model.getInstance().onUpdate(popupAddress, '0', 'system'));\n\n          // because we added a read address to the tile after is has been initialized we need to init the listener here manually\n          parent.addEventListener('stateUpdate', ev => {\n            tileWidget.onStateUpdate(ev);\n            // cancel event here\n            ev.stopPropagation();\n          });\n\n        // only on mobile we need this, because of height: auto\n          if (document.body.classList.contains('mobile')) {\n            tileWidget.addListener('fullscreenChanged', () => {\n              this._onRendered();\n            });\n          }\n        }\n      }\n\n\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n\n      // create needed elements\n\n      const svg = d3.select(this._element)\n        .append('svg');\n\n      let noToolTips = false;\n      if (inBackground) {\n        noToolTips = true;\n        svg.style('opacity', 0.4);\n      }\n\n      if (!noToolTips) {\n        this._tooltip = document.createElement('div');\n        this._tooltip.classList.add('tooltip');\n        this._tooltip.style.display = 'none';\n        this._element.appendChild(this._tooltip);\n\n        svg.on('pointerenter', this._onPointerEntered.bind(this));\n        svg.on('pointermove', this._onPointerMoved.bind(this));\n        svg.on('pointerleave', this._onPointerLeft.bind(this));\n      }\n      svg.on(\n        'touchmove',\n        event => {\n          if (this._loaded) {\n            let y = event.targetTouches[0].clientY;\n            const pathRect = this._element.querySelector(':scope > svg').getBoundingClientRect();\n            if (y > pathRect.y && y < pathRect.y + pathRect.height) {\n              event.preventDefault();\n            }\n          }\n        },\n        { passive: false }\n      );\n\n      // init some fixed settings\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n      let timeFormat = null;\n      if (this._element.hasAttribute('x-format')) {\n        const formatString = this._element.getAttribute('x-format');\n        timeFormat = date => d3.timeFormat(formatString)(date);\n      } else {\n        // format auto-detection\n        timeFormat = this.multiTimeFormat([\n          [\n            '%H:%M:%S',\n            function (d) {\n              return d.getSeconds();\n            }\n          ],\n\n          [\n            '%H:%M',\n            function (d) {\n              return d.getMinutes();\n            }\n          ],\n\n          [\n            '%H',\n            function (d) {\n              return d.getHours();\n            }\n          ],\n\n          [\n            '%a %d',\n            function (d) {\n              return d.getDay() && d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%b %d',\n            function (d) {\n              return d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%B',\n            function (d) {\n              return d.getMonth();\n            }\n          ],\n\n          [\n            '%Y',\n            function () {\n              return true;\n            }\n          ]\n        ]);\n      }\n      this.__config = {\n        x: d => d.time, // given d in data, returns the (temporal) x-value\n        y: d => +d.value, // given d in data, returns the (quantitative) y-value\n        z: d => d.src, // given d in data, returns the (categorical) z-value\n        color: d => d && this._dataSetConfigs[d].color, // stroke color of line, as a constant or a function of *z*\n        title: d => cv.util.String.sprintf(format, d.value), // given d in data, returns the title text\n        curve: d3.curveLinear, // method of interpolation between points\n        marginTop: 12, // top margin, in pixels\n        marginRight: 24, // right margin, in pixels\n        marginBottom: 20, // bottom margin, in pixels\n        marginLeft: 24, // left margin, in pixels\n        width: 392, // outer width, in pixels\n        height: 192, // outer height, in pixels\n        aspectRatio: 392/192,\n        xType: d3.scaleTime, // type of x-scale\n        xFormat: timeFormat, // a format specifier string for the x-axis\n        yType: d3.scaleLinear, // type of y-scale\n        yFormat: undefined, // a format specifier string for the y-axis\n        yLabel: undefined, // a label for the y-axis\n        strokeLinecap: undefined, // stroke line cap of line\n        strokeLinejoin: undefined, // stroke line join of line\n        strokeWidth: 1.5, // stroke width of line\n        strokeOpacity: undefined, // stroke opacity of line\n        mixBlendMode: 'normal', // blend mode of lines\n        showArea: d => this._dataSetConfigs[d].showArea, // show area below the line,\n        showXAxis: !this._element.hasAttribute('show-x-axis') || this._element.getAttribute('show-x-axis') === 'true',\n        showYAxis: !this._element.hasAttribute('show-y-axis') || this._element.getAttribute('show-y-axis') === 'true',\n        xPadding: 0.1 // amount of x-range to reserve to separate bars\n      };\n\n      this._initializing = false;\n      this.__updateTitle();\n\n      // check if we have a read address for live updates\n      const datasetSources = Array.from(this._element.querySelectorAll(':scope > dataset')).map(elem => elem.getAttribute('src'));\n      const readAddresses = Array.from(element.querySelectorAll(':scope > cv-address:not([mode=\"write\"])')).filter(elem => datasetSources.includes(elem.getAttribute('target')));\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    onStateUpdate(ev) {\n      const targetDataset = this._element.querySelector(':scope > dataset[src=\"'+ev.detail.target+'\"]');\n      const config = this._dataSetConfigs ? this._dataSetConfigs[ev.detail.target] : null;\n      if (targetDataset && config) {\n        let ts = Date.now();\n        if (config.aggregationInterval) {\n          const mins = config.aggregationInterval * 60 * 1000;\n          ts = Math.round(ts / mins) * mins;\n        }\n        this._renderChart({\n          src: ev.detail.target,\n          time: ts,\n          value: ev.detail.state\n        }, true);\n      }\n    },\n\n    _onSeriesPrev() {\n      this.setCurrentPeriod(this.getCurrentPeriod()+1);\n    },\n\n    _onSeriesChange(select) {\n      this._initializing = true;\n      // reset offset when series changed\n      this.resetCurrentPeriod();\n      this._initializing = false;\n      // reset configuration, we need a new one\n      this._chartConf = null;\n      this.setCurrentSeries(select);\n    },\n\n    _onSeriesNext() {\n      const currentPeriod = this.getCurrentPeriod();\n      if (currentPeriod > 0) {\n        this.setCurrentPeriod(currentPeriod-1);\n      }\n    },\n\n    refresh() {\n      this._loaded = false;\n      this._loadData();\n    },\n\n    // triggered after a change os series or period\n    _refreshData() {\n      const nextButton = this.getHeader('.next');\n      if (nextButton) {\n        if (this.getCurrentPeriod() === 0) {\n          nextButton.setAttribute('disabled', 'disabled');\n        } else {\n          nextButton.removeAttribute('disabled');\n        }\n      }\n\n      if (!this._initializing && this.getStartTime() > 0 && this.getEndTime() > 0) {\n        this._loaded = false;\n        this._loadData();\n      }\n      this.__updateTitle();\n    },\n\n    __updateTimeRange() {\n      const series = this.getCurrentSeries();\n\n      const currentPeriod = this.getCurrentPeriod();\n      let end = new Date();\n      let periodStart = new Date();\n      let interval = 0;\n      switch (series) {\n        case 'hour':\n          interval = 60 * 60;\n          periodStart.setHours(periodStart.getHours() - currentPeriod, 0, 0, 0);\n          if (currentPeriod > 0) {\n            end.setHours(periodStart.getHours() + 1, 0, 0, 0);\n          }\n          break;\n\n        case 'day':\n          interval = 24 * 60 * 60;\n          periodStart.setDate(periodStart.getDate() - currentPeriod);\n          periodStart.setHours(0, 0, 0, 0);\n          if (currentPeriod > 0) {\n            end.setDate(periodStart.getDate() + 1);\n            end.setHours(0, 0, 0, 0);\n          }\n          break;\n\n        case 'week':\n          interval = 7 * 24 * 60 * 60;\n          periodStart.setDate(-periodStart.getDay() - 7 * currentPeriod);\n          periodStart.setHours(0, 0, 0, 0);\n          if (currentPeriod > 0) {\n            end.setDate(periodStart.getDate() + 7);\n            end.setHours(0, 0, 0, 0);\n          }\n          break;\n\n        case 'month':\n          interval = 30 * 24 * 60 * 60;\n          periodStart.setMonth(periodStart.getMonth() - currentPeriod);\n          periodStart.setDate(1);\n          periodStart.setHours(0, 0, 0, 0);\n          if (currentPeriod > 0) {\n            end.setMonth(periodStart.getMonth() + 1, 1);\n            end.setHours(0, 0, 0, 0);\n          }\n          break;\n\n        case 'year':\n          interval = 365 * 24 * 60 * 60;\n          periodStart.setFullYear(periodStart.getFullYear() - currentPeriod);\n          periodStart.setMonth(0, 1);\n          periodStart.setHours(0, 0, 0, 0);\n          if (currentPeriod > 0) {\n            end.setFullYear(periodStart.getFullYear() + 1);\n            end.setMonth(periodStart.getMonth() + 1, 1);\n            end.setHours(0, 0, 0, 0);\n          }\n          break;\n      }\n      let startTs = Math.round(periodStart.getTime()/1000);\n      let endTs = Math.round(end.getTime()/1000);\n      if (this._element.getAttribute('background') === 'true' || !this._element.hasAttribute('selection')) {\n        // when have no nagivation, we can just use the old relative time range now - interval\n        startTs = endTs -  interval;\n      }\n      this.setStartTime(startTs);\n      this.setEndTime(endTs);\n      this._refreshData();\n    },\n\n    _loadData() {\n      if (this._loaded && Date.now() - this._loaded < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      if (!client) {\n        return;\n      }\n      if (!client.isConnected()) {\n        client.addListenerOnce('changeConnected', () => {\n          this._loadData();\n        });\n        return;\n      }\n      let url;\n      const dataSets = this._element.querySelectorAll(':scope > dataset');\n\n      const promises = [];\n      if (!this._dataSetConfigs) {\n        this._dataSetConfigs = {};\n        for (let dataSet of dataSets) {\n          let ts = {\n            showArea: true,\n            color: '#FF9900',\n            chartType: 'line',\n            title: '',\n            curve: 'linear',\n            aggregationInterval: 0\n          };\n\n          let attr;\n          let name;\n          let value;\n          for (let i = 0; i < dataSet.attributes.length; i++) {\n            attr = dataSet.attributes.item(i);\n            // CamelCase attribute names\n            name = attr.name\n              .split('-')\n              .map((part, i) => {\n                if (i > 0) {\n                  return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n                }\n                return part;\n              })\n              .join('');\n            value = attr.value;\n            if (value === 'true' || value === 'false') {\n              value = value === 'true';\n            } else if (/^\\d+$/.test(value)) {\n              value = parseInt(value);\n            } else if (/^[\\d.]+$/.test(value)) {\n              value = parseFloat(value);\n            }\n            ts[name] = value;\n          }\n          this._dataSetConfigs[ts.src] = ts;\n        }\n      }\n\n      for (const src in this._dataSetConfigs) {\n        url = client.getResourcePath('charts', {\n          src: src,\n          start: this.getStartTime(),\n          end: this.getEndTime()\n        });\n\n        const ts = this._dataSetConfigs[src];\n\n        if (!url) {\n          continue;\n        }\n\n        this.debug('loading', url);\n        promises.push(\n          cv.io.Fetch.cachedFetch(url, {ttl: this.getRefresh()}, false, client)\n            .then(data => {\n              this.debug('successfully loaded', url);\n              if (client.hasCustomChartsDataProcessor(data)) {\n                data = client.processChartsData(data, ts);\n              }\n              if (!this._lastRefresh) {\n                this._lastRefresh = Date.now();\n              }\n              return {\n                data: data || [],\n                ts: ts\n              };\n            })\n            .catch(err => {\n              this._onStatusError(ts, url, err);\n              return {\n                data: [],\n                ts: ts\n              };\n            })\n        );\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess(data) {\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          // TODO: stacked bar times (entry.ts.chartType === 'stacked-bar') must be aggregated, they have to be at the same time index for stacking\n          const mins = entry.ts.aggregationInterval > 0 ? entry.ts.aggregationInterval * 60 * 1000 : 0;\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              src: entry.ts.src,\n              time: mins > 0\n                ? Math.round(time / mins) * mins : time,\n              value\n            });\n          }\n        }\n      }\n\n      if (this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true') {\n        // no margins\n        this.__config = Object.assign(this.__config, {\n          marginRight: 0,\n          marginBottom: 0,\n          marginLeft: 0\n        });\n\n        // because we have no margins we need to cut the overflow on the tile\n        let tile = this._element.parentElement;\n        while (tile && tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n        }\n        if (tile && tile.localName === 'cv-tile') {\n          tile.style.overflow = 'hidden';\n        }\n      }\n\n      // wait some time to let the element size settle\n      window.requestAnimationFrame(() => {\n        setTimeout(() => {\n          this._onRendered(chartData);\n        }, 100);\n      });\n    },\n\n    _onRendered(chartData, retries) {\n      if (this.__resizeTimeout) {\n        clearTimeout(this.__resizeTimeout);\n        this.__resizeTimeout = null;\n      }\n      if (this.isVisible()) {\n        const [width, height] = this._getSize();\n        if ((width < 20 || height < 10) && (!retries || retries <= 5)) {\n          // this makes no sense\n          this.__resizeTimeout = setTimeout(() => {\n            this._onRendered(chartData, retries > 0 ? retries + 1 : 1);\n          }, 150);\n        }\n        if (width < 20 || height < 10) {\n          // do nothing, these values are invalid\n          return;\n        }\n\n        this.__config.width = width;\n        this.__config.height = height;\n        d3.select(this._element).select('svg')\n          .attr('viewBox', `0, 0, ${width}, ${height}`);\n        if (chartData) {\n          this._renderChart(chartData);\n          this._loaded = Date.now();\n        }\n      }\n    },\n\n    _getSize() {\n      const parent = this._element.parentElement;\n      let padding = this._element.getAttribute('background') === 'true' ? 0 : 8;\n      let containerWidth = this._element.offsetWidth - padding;\n      let containerHeight = this._element.offsetHeight - padding;\n      let factor = 1;\n\n      const landscape = containerWidth > containerHeight;\n      let width = 0;\n      let height = 0;\n\n      if (landscape && containerHeight > 0) {\n        // obeying aspect ratio in landscape mode is not necessary\n        width = Math.round(containerWidth / factor);\n        height = Math.round(containerHeight / factor);\n      } else {\n        width = Math.round(containerWidth / factor);\n        height = width / cv.ui.structure.tile.components.Chart.DEFAULT_ASPECT_RATIO;\n      }\n      if (!this._element.style.height && (parent.localName === 'cv-popup' && (parent.getAttribute('fullscreen') === 'true') ||\n        (this._element.getAttribute('allow-fullscreen') === 'true' &&\n          parent.parentElement.classList.contains('fullscreen')))) {\n        // the parent container has height: auto, so we need to have one\n        this._element.style.height = (height + this.__config.marginTop + this.__config.marginBottom) + 'px';\n      }\n      return [width, height];\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n       * @param date\n       */\n      function multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), JSON.stringify(err))\n      });\n\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n    /**\n     * Get svg element selection (create if not exists)\n     * @param parent d3.selection of the parent this element should be a child of\n     * @param nodeName {String} Element name\n     * @param classes {Array<String>} array of css classes used to identify this element\n     * @param attributes {Map<String, String>?} set these attributes if the element has to be created, when it already exists these are ignored\n     * @private\n     */\n    _getSvgElement(parent, nodeName, classes, attributes) {\n      let elem = parent.select(nodeName + '.' + classes.join('.'));\n      if (elem.empty()) {\n        elem = parent.append(nodeName).attr('class', classes.join(' '));\n        if (attributes) {\n          for (const name in attributes) {\n            elem.attr(name, attributes[name]);\n          }\n        }\n      }\n      return elem;\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param single\n     * @private\n     */\n    _renderChart(data, single) {\n      const config = this.__config;\n      const svg = d3.select(this._element).select('svg');\n\n      // Compute values.\n      let X;\n      let Y;\n      let Z;\n      let O;\n      let T;\n      if (single) {\n        if (!this._helpers) {\n          return;\n        }\n        X = this._helpers.X;\n        Y = this._helpers.Y;\n        Z = this._helpers.Z;\n        O = this._helpers.O;\n        T = this._helpers.T;\n        if (X[X.length-1] === data.time) {\n          // replace last value instead of adding one\n          Y[Y.length-1] = data.value;\n        } else {\n          X.push(data.time);\n          Y.push(data.value);\n          Z.push(data.src);\n          O.push(data);\n          T.push(config.title === undefined ? data.src : config.title === null ? null : config.title(data));\n\n          // cleanup\n          X.shift();\n          Y.shift();\n          Z.shift();\n          O.shift();\n          T.shift();\n        }\n      } else {\n        X = d3.map(data, config.x);\n        Y = d3.map(data, config.y);\n        Z = d3.map(data, config.z);\n        O = d3.map(data, d => d);\n        // Compute titles.\n        T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n      }\n\n      // Compute default domains, and unique the z-domain.\n      let xDomain = d3.extent(X);\n      let minVal = 0;\n      if (this._element.hasAttribute('zero-based') && this._element.getAttribute('zero-based') === 'false') {\n        minVal = d3.min(Y);\n        if (minVal > 1.0) {\n          minVal -= 1;\n        }\n      }\n      let maxVal = d3.max(Y);\n      if (maxVal > 1.0) {\n        // add some inner chart padding\n        maxVal += 1;\n      } else {\n        maxVal += 0.1;\n      }\n      const yDomain = [minVal, maxVal];\n      const zDomain = new d3.InternSet(Z);\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => zDomain.has(Z[i]));\n\n      if (config.showYAxis) {\n        const maxValue = config.yFormat ? config.yFormat(yDomain[1]) : yDomain[1].toFixed(maxVal < 1 ? 2 : 1);\n        // check if we need more space for the y-axis\n        if (maxValue.length >= 2) {\n          config.marginLeft = maxValue.length * 8;\n        }\n      }\n\n      const xTicks = config.width / 80;\n      const yTicks = config.height / 60;\n      const additionalXRangePadding = this._element.getAttribute('background') === 'true' ? 0 : 2;\n\n      const xRange = [config.marginLeft + additionalXRangePadding, config.width - config.marginRight - additionalXRangePadding]; // [left, right]\n      if (!this._chartConf) {\n        const yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n        // initialize everything once\n        this._chartConf = {\n          // x/y scales\n          x: config.xType().range(xRange),\n          y: config.yType().range(yRange)\n        };\n        this._chartConf.xAxis = config.showXAxis\n          ? d3.axisBottom(this._chartConf.x)\n            .ticks(xTicks)\n            .tickSizeOuter(0)\n            .tickFormat(config.xFormat)\n          : undefined;\n        this._chartConf.yAxis = config.showYAxis\n          ? d3.axisLeft(this._chartConf.y).ticks(yTicks, config.yFormat)\n          : undefined;\n\n\n        // add elements\n        const showGrid = this._element.hasAttribute('show-grid') ? this._element.getAttribute('show-grid') : 'xy';\n        if (showGrid.includes('x')) {\n          this._chartConf.xGrid = d3.axisBottom(this._chartConf.x).ticks(xTicks)\n            .tickSize(-config.height + config.marginBottom + config.marginTop)\n            .tickFormat('');\n          this._getSvgElement(svg, 'g', ['grid', 'x'], {\n            transform: `translate(0,${config.height - config.marginBottom})`\n          })\n            .call(this._chartConf.xGrid);\n        }\n        if (showGrid.includes('y')) {\n          this._chartConf.yGrid = d3.axisLeft(this._chartConf.y).ticks(yTicks)\n            .tickSize(-config.width + config.marginRight + config.marginLeft)\n            .tickFormat('');\n\n          this._getSvgElement(svg, 'g', ['grid', 'y'], {\n            transform: `translate(${config.marginLeft},0)`\n          })\n            .call(this._chartConf.yGrid);\n        }\n\n        if (config.showXAxis) {\n          this._getSvgElement(svg, 'g', ['axis', 'x'])\n            .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n            .call(this._chartConf.xAxis);\n        }\n\n        if (config.showYAxis) {\n          let yAxisElement = this._getSvgElement(svg, 'g', ['axis', 'y'])\n            .attr('transform', `translate(${config.marginLeft},0)`);\n\n          if (config.label && yAxisElement.select('text').empty()) {\n            yAxisElement.append('text')\n              .attr('x', -config.marginLeft)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(config.yLabel);\n          }\n\n          yAxisElement\n            .call(this._chartConf.yAxis)\n            .call(g => g.select('.domain').remove());\n        }\n\n        // find chart types\n        const lineGroups = new Map();\n        const areaGroups = new Map();\n        const barGroups = new Map();\n        const stackedBarGroups = new Map();\n        const lineFunctions = {};\n        const areaFunctions = {};\n        let xBar;\n        let xzScale;\n\n        for (const key of zDomain) {\n          switch (this._dataSetConfigs[key].chartType) {\n            case 'line': {\n              const idx = I.filter(i => Z[i] === key);\n              lineGroups.set(key, idx);\n              const curveName = this._dataSetConfigs[key].curve || 'linear';\n              if (!Object.prototype.hasOwnProperty.call(lineFunctions, curveName)) {\n                let curveFunction;\n                switch (curveName) {\n                  case 'linear':\n                    curveFunction = d3.curveLinear;\n                    break;\n\n                  case 'step':\n                    curveFunction = d3.curveStep;\n                    break;\n\n                  case 'natural':\n                    curveFunction = d3.curveNatural;\n                    break;\n                }\n\n                if (curveFunction) {\n                  // Construct a line generator.\n                  lineFunctions[curveName] = d3\n                    .line()\n                    .curve(curveFunction)\n                    .x(i => this._chartConf.x(this._helpers.X[i]))\n                    .y(i => this._chartConf.y(this._helpers.Y[i]));\n                }\n\n                if (this._dataSetConfigs[key].chartType === 'line' && typeof config.showArea === 'function' && config.showArea(key)) {\n                  areaGroups.set(key, idx);\n                  if (curveFunction) {\n                    // Construct a line generator.\n                    const minY = this._chartConf.y.range()[0];\n                    areaFunctions[curveName] = d3\n                      .area()\n                      .curve(curveFunction)\n                      .x(i => this._chartConf.x(this._helpers.X[i]))\n                      .y0(() => minY)\n                      .y1(i => this._chartConf.y(this._helpers.Y[i]));\n                  }\n                }\n              }\n              break;\n            }\n\n            case 'bar':\n              barGroups.set(key, I.filter(i => Z[i] === key));\n              if (!xBar) {\n                xBar = d3.scaleBand().range(this._chartConf.x.range()).padding(config.xPadding);\n              }\n              if (!xzScale) {\n                xzScale = d3.scaleBand().padding(0.05);\n              }\n              break;\n\n            case 'stacked-bar':\n              stackedBarGroups.set(key, I.filter(i => Z[i] === key));\n              break;\n          }\n        }\n\n        this._chartConf.lineGroups = lineGroups;\n        this._chartConf.areaGroups = areaGroups;\n        this._chartConf.barGroups = barGroups;\n        this._chartConf.stackedBarGroups = stackedBarGroups;\n        this._chartConf.lineFunctions = lineFunctions;\n        this._chartConf.areaFunctions = areaFunctions;\n        this._chartConf.xBar = xBar;\n        if (xzScale) {\n          this._chartConf.xz = xzScale;\n        }\n\n        // prepare elements for chart elements\n        if (this._chartConf.lineGroups.size > 0) {\n          this._chartConf.lineContainer = this._getSvgElement(svg, 'g', ['line'], {\n            fill: 'none',\n            stroke: typeof config.color === 'string' ? config.color : null,\n            'stroke-linecap': config.strokeLinecap,\n            'stroke-linejoin': config.strokeLinejoin,\n            'stroke-width': config.strokeWidth,\n            'stroke-opacity': config.strokeOpacity\n          });\n        }\n        if (this._chartConf.areaGroups.size > 0) {\n          this._chartConf.areaContainer = this._getSvgElement(svg, 'g', ['area'], {\n            stroke: 'none',\n            fill: typeof config.color === 'string' ? this.__opacifyColor(config.color, '30') : null\n          });\n        }\n        if (this._chartConf.barGroups.size > 0) {\n          this._chartConf.barContainer = this._getSvgElement(svg, 'g', ['bars']);\n        }\n      }\n\n      // apply domains to scales\n      this._chartConf.x.domain(xDomain);\n      this._chartConf.y.domain(yDomain);\n\n      this._helpers = { X, Y, I, T, Z, O };\n\n      if (this._chartConf.xAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'x'])\n          .call(this._chartConf.xAxis);\n      }\n\n      if (this._chartConf.yAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'y'])\n          .call(this._chartConf.yAxis);\n      }\n      if (this._chartConf.xBar) {\n        this._chartConf.xBar.domain(new d3.InternSet(X));\n      }\n      if (this._chartConf.xz) {\n        this._chartConf.xz.domain(zDomain);\n        this._chartConf.x.range([xRange[0], xRange[1] - this._chartConf.xBar.bandwidth()]);\n        this._chartConf.xz.range([0, this._chartConf.xBar.bandwidth()]);\n      }\n\n      // update groups\n      for (const key of this._chartConf.lineGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key);\n        this._chartConf.lineGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.areaGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.areaGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.barGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.barGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.stackedBarGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.stackedBarGroups.set(key, idx);\n      }\n\n      this.__config = config;\n      this._dot = svg.select('g.dot');\n\n      const t = d3.transition()\n        .duration(single ? 0 : 500)\n        .ease(d3.easeLinear);\n\n      if (this._chartConf.lineContainer) {\n        this._chartConf.lineContainer\n          .selectAll('path')\n          .data(this._chartConf.lineGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.lineFunctions[curveName] || this._chartConf.lineFunctions.linear;\n            const val = func(d[1]);\n            return val;\n          });\n      }\n\n      // Add the area\n      if (this._chartConf.areaContainer) {\n        this._chartConf.areaContainer\n          .selectAll('path')\n          .data(this._chartConf.areaGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('fill', typeof config.color === 'function' ? p => this.__opacifyColor(config.color(p[0]), '30') : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.areaFunctions[curveName] || this._chartConf.areaFunctions.linear;\n            return func(d[1]);\n          });\n      }\n\n      if (this._chartConf.barContainer) {\n        const yMin = this._chartConf.y.range()[0];\n        this._chartConf.barContainer\n          .selectAll('g')\n          .data(this._chartConf.barGroups)\n          .join('g')\n          .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n          .attr('x', d => {\n            const x = this._chartConf.x(X[d.value]);\n            const xz =  this._chartConf.xz(d.key);\n            return x + xz;\n          })\n          .attr('y', d => this._chartConf.y(Y[d.value]))\n          .attr('width', this._chartConf.xz.bandwidth())\n          .transition(t)\n          .attr('height', d => yMin - this._chartConf.y(Y[d.value]));\n      }\n\n      // add fixed/calculated lines\n      for (const [i, line] of this._element.querySelectorAll(':scope > h-line').entries()) {\n        const src = line.getAttribute('src');\n        let targetContainer = null;\n        let data = null;\n        let yValue = NaN;\n        if (src) {\n          if (this._chartConf.lineGroups.get(src)) {\n            targetContainer = this._chartConf.lineContainer;\n            data = this._chartConf.lineGroups.get(src);\n          } else if (this._chartConf.areaGroups.get(src)) {\n            targetContainer = this._chartConf.areaContainer;\n            data = this._chartConf.areaGroups.get(src);\n          } else if (this._chartConf.barGroups.get(src)) {\n            targetContainer = this._chartConf.barContainer;\n            data = this._chartConf.barGroups.get(src);\n          }\n          if (!data) {\n            this.error('no data found for src ' + src);\n            continue;\n          }\n          switch (line.getAttribute('value')) {\n            case 'avg': {\n              let sum = 0.0;\n              for (const di of data) {\n                sum += Y[di];\n              }\n              yValue = sum / data.length;\n              break;\n            }\n\n            case 'max':\n              yValue = d3.max(Y.filter((v, i) => data.includes(i), d => d));\n              break;\n\n            case 'min':\n              yValue = d3.min(Y.filter((v, i) => data.includes(i), d => d));\n              break;\n\n            default:\n              this.error('unknown value calculation: ' + line.getAttribute('value'));\n              break;\n          }\n        } else {\n          targetContainer = this._chartConf.lineContainer || this._chartConf.areaContainer || this._chartConf.barContainer;\n          yValue = parseFloat(line.getAttribute('value'));\n          data = [0, X.length-1];\n        }\n        if (!targetContainer) {\n          continue;\n        }\n\n        let lineElem = targetContainer.select('.line-' + i);\n        if (isNaN(yValue) && !lineElem.empty()) {\n          // remove line\n          lineElem.remove();\n          if (line.getAttribute('show-value') === 'true') {\n            targetContainer.select('.line-value-' + i).remove();\n          }\n        } else if (!isNaN(yValue)) {\n          const color = line.getAttribute('color') || 'currentColor';\n          if (lineElem.empty()) {\n            lineElem = targetContainer.append('line')\n              .attr('class', 'line-' + i)\n              .attr('stroke', color);\n          }\n          const x1 = this._chartConf.x(X[data[0]]);\n          const x2 = this._chartConf.x(X[X.length -1]); // always draw until end of chart (not until end of src dataset)\n          const y = this._chartConf.y(yValue);\n          lineElem\n            .attr('x1', x1)\n            .attr('x2', x2)\n            .attr('y1', y)\n            .attr('y2', y);\n\n          if (line.getAttribute('show-value') === 'true') {\n            const format = line.hasAttribute('format') ? line.getAttribute('format')\n              : (this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s');\n            let valueElem = targetContainer.select('.line-value-' + i);\n            if (valueElem.empty()) {\n              valueElem = targetContainer.append('text')\n                .attr('class', 'line-value-' + i)\n                .attr('fill', line.getAttribute('value-color') || color)\n                .attr('font-size', '10')\n                .attr('text-anchor', 'start');\n            }\n            // show value on right side of the chart\n            valueElem\n              .attr('x', x2 + 2)\n              .attr('y', y + 5)\n              .text(cv.util.String.sprintf(format, yValue));\n          }\n        }\n      }\n\n      // dot must be added last\n      const dot = svg.select('g.dot');\n      if (dot.empty()) {\n        svg.append('g')\n          .attr('class', 'dot')\n          .attr('display', 'none')\n          .attr('fill', 'currentColor')\n          .append('circle')\n          .attr('r', 2.5);\n      }\n      this._dot = svg.select('g.dot');\n    },\n\n    _onPointerEntered(ev) {\n      if (this._loaded) {\n        this.__toolTipTimer = setTimeout(() => {\n          this.__activateTooltip(true, ev);\n          this.__toolTipTimer = null;\n        }, 500);\n      }\n    },\n\n    _onPointerLeft(ev) {\n      if (this.__toolTipTimer) {\n        clearTimeout(this.__toolTipTimer);\n      }\n\n      if (this._loaded) {\n        if (ev.relatedTarget !== this._tooltip) {\n          this.__activateTooltip(false);\n        }\n      }\n    },\n\n    __activateTooltip(val, ev) {\n      this.__showTooltip = val;\n      if (val) {\n        if (this._dot) {\n          this._dot.attr('display', null);\n          this._dot.raise();\n        }\n        this._tooltip.style.display = 'block';\n        this._onPointerMoved(null, true);\n      } else {\n        if (this._dot) {\n          this._dot.attr('display', 'none');\n        }\n        const svg = d3.select(this._element).select('svg');\n        svg.node().value = null;\n        svg.dispatch('input', {bubbles: true});\n        this._tooltip.style.display = 'none';\n      }\n    },\n\n    _onPointerMoved(event, center) {\n      if (this._loaded && this.__showTooltip) {\n        let xm = 0;\n        let ym = 0;\n        if (event) {\n          [xm, ym] = d3.pointer(event);\n        } else if (center) {\n          xm = this.__config.width/2;\n          ym = this.__config.height/2;\n        } else {\n          return;\n        }\n        const {X, Y, I, T, Z, O} = this._helpers;\n        const {x, y, xz} = this._chartConf;\n        const i = d3.least(I, i => Math.hypot(x(X[i]) - xm, y(Y[i]) - ym));\n        const scaleFactorX = this._element.offsetWidth / this.__config.width;\n        const scaleFactorY = this._element.offsetHeight / this.__config.height;\n        // closest point\n        const xOffset = xz ? (xz(Z[i]) + (typeof xz.bandwidth === 'function' ? xz.bandwidth() / 2 : 0)) : 0;\n        this._dot.attr('transform', `translate(${x(X[i]) + xOffset},${y(Y[i])})`);\n        if (T) {\n          const cursorOffset = event && event.pointerType === 'mouse' ? 16 : 40;\n          const timeString = this.__config.xFormat(new Date(X[i]));\n          let top = ym * scaleFactorY - this._tooltip.offsetHeight;\n          if (top < 0) {\n            top += cursorOffset + this._tooltip.offsetHeight;\n          } else {\n            top -= cursorOffset;\n          }\n\n          let left = xm * scaleFactorX;\n          if (left > this._element.offsetWidth / 2) {\n            left -= this._tooltip.offsetWidth + cursorOffset;\n          } else {\n            left += cursorOffset;\n          }\n\n          const key = Z[i];\n          const lineTitle = this._dataSetConfigs[key] && this._dataSetConfigs[key].title ? this._dataSetConfigs[key].title + ': ' : '';\n          this._tooltip.innerHTML = `${timeString}<br/>${lineTitle}${T[i]}`;\n          this._tooltip.style.left = left + 'px';\n          this._tooltip.style.top = top + 'px';\n        }\n        d3.select(this._element).select('svg').property('value', O[i]).dispatch('input', {bubbles: true});\n      }\n    },\n\n    _buttonFactory(icon, classes) {\n      const button = document.createElement('button');\n      button.classList.add(...classes);\n      if (icon) {\n        const i = document.createElement('i');\n        i.classList.add(icon);\n        button.appendChild(i);\n      }\n      return button;\n    },\n\n    __updateTitle() {\n      if (this._navigationEnabled) {\n        let title = this.getHeader('label.title span');\n        if (title) {\n          let chartTitle = this._titleString || '';\n          title.textContent = (chartTitle ? chartTitle + ' - ' : '') + this._shownDateRange();\n        }\n      }\n    },\n\n    /**\n     * Converts series to a shot string that is shown in a select box\n     * @param series\n     * @private\n     */\n    _seriesToShort(series) {\n      switch (series) {\n        case 'hour':\n          return qx.locale.Manager.tr('Hour');\n\n        case 'day':\n          return qx.locale.Manager.tr('Day');\n\n        case 'week':\n          return qx.locale.Manager.tr('Week');\n\n        case 'month':\n          return qx.locale.Manager.tr('Month');\n\n        case 'year':\n          return qx.locale.Manager.tr('Year');\n      }\n      return '';\n    },\n\n    /**\n     * Convert the currently shown date range into a human-readable string\n     * @private\n     */\n    _shownDateRange() {\n      const series = this.getCurrentSeries();\n      const currentPeriod = this.getCurrentPeriod();\n      const date = new Date();\n      let format = new qx.util.format.DateFormat();\n      switch (series) {\n        case 'hour':\n          date.setHours(date.getHours() - currentPeriod, 0, 0);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('hmm', 'h:mm'));\n          return format.format(date);\n\n        case 'day':\n          if (currentPeriod === 0) {\n            return qx.locale.Manager.tr('today');\n          } else if (currentPeriod === 1) {\n            return qx.locale.Manager.tr('yesterday');\n          }\n          date.setDate(date.getDate() - currentPeriod);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMMd', 'd. MMM'));\n          return format.format(date);\n\n        case 'week':\n          date.setDate(date.getDate() - currentPeriod*7);\n          return qx.locale.Manager.trc('CW = calendar week', 'CW %1', this.getWeekNumber(date));\n\n        case 'month':\n          date.setMonth(date.getMonth() - currentPeriod);\n          if (date.getFullYear() === new Date().getFullYear()) {\n            // no year needed\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMM', 'MMM'));\n          } else {\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('yyMMM', 'MMM yy'));\n          }\n          return format.format(date);\n\n        case 'year':\n          return date.getFullYear() - currentPeriod;\n      }\n      return '';\n    },\n\n   getWeekNumber(d) {\n      d = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      // Set to the nearest Thursday: current date + 4 - current day number\n      d.setDate(d.getDate() + 4 - (d.getDay() || 7));\n      // Get first day of year\n      const yearStart = new Date(d.getFullYear(), 0, 1);\n      // Calculate full weeks to the nearest Thursday\n      return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n    },\n\n    /**\n     * add opacity to color\n     * @param color\n     * @param opacity {string} hex number 0 - 255\n     * @return {string|*}\n     * @private\n     */\n    __opacifyColor(color, opacity) {\n      if (color.startsWith('rgb(')) {\n        return 'rgba(' + color.substring(4, color.length-1) + ', ' + (parseInt(opacity, 16) / 255).toFixed(2) + ')';\n      } else if (color.startsWith('#') && color.length === 7) {\n        return color + opacity;\n      }\n      return color;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._chartConf = null;\n    this._helpers = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'chart',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Color.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a html color input\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Color', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MResize,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    CC_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __colorChooser: null,\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      }\n\n      // init components\n      const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'popup';\n      if (mode === 'popup') {\n        let popup = element.querySelector(':scope > cv-popup');\n        if (!popup) {\n          popup = document.createElement('cv-popup');\n          popup.setAttribute('modal', 'true');\n          if (element.hasAttribute('title')) {\n            popup.setAttribute('title', element.getAttribute('title'));\n          }\n          const addresses = {};\n          for (const elem of element.querySelectorAll(':scope > cv-address')) {\n            let src = elem.textContent;\n            let transform = elem.getAttribute('transform');\n            let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n            switch (elem.getAttribute('mode')) {\n              case 'disable':\n                mode = 0;\n                break;\n              case 'read':\n                mode = 1;\n                break;\n              case 'write':\n                mode = 2;\n                break;\n              case 'readwrite':\n                mode = 1 | 2;\n                break;\n            }\n            let variantInfo = cv.parser.pure.widgets.ColorChooser.makeAddressListFn(src, transform, mode, elem.getAttribute('variant'));\n            addresses[src.trim()] = {\n              transform: transform,\n              mode: mode,\n              variantInfo: variantInfo[1]\n            };\n          }\n          cv.ui.structure.tile.components.Color.CC_COUNTER++;\n          const path = 'id_0_'+cv.ui.structure.tile.components.Color.CC_COUNTER;\n          const props = {\n            path: path,\n            $$type: 'colorchooser',\n            classes: 'widget colorchooser',\n            layout: {\n              colspan: 1\n            },\n            controls: element.hasAttribute('controls') ? element.getAttribute('controls') : 'triangle',\n            address: addresses,\n            throttleInterval: this.getThrottleInterval()\n          };\n          cv.parser.pure.widgets.ColorChooser.parseAttributes(element, props);\n          this.__colorChooser = new cv.ui.structure.pure.ColorChooser(props);\n          this.__colorChooser.addListener('colorChanged', this._onColorChanged, this);\n          this._onColorChanged();\n          popup.innerHTML = `<div class=\"widget_container\" style=\"margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center\" id=\"${path}\" data-type=\"colorchooser\">${this.__colorChooser.getDomString()}</div>`;\n          element.appendChild(popup);\n          element.addEventListener('click', ev => {\n            const path = ev.path || (ev.composedPath && ev.composedPath());\n            if (path && path.indexOf(popup) < 0) {\n              popup.getInstance().open();\n            }\n          });\n          qx.event.Timer.once(() => {\n            this.__colorChooser._onDomReady();\n          }, this, 0);\n\n          this.setResizeTarget(popup);\n          this.addListener('resized', () => {\n            this.__colorChooser.invalidateScreensize();\n          });\n        }\n      }\n    },\n\n    _onColorChanged() {\n      const color = this.__colorChooser.getColor();\n      const rgb = color.getComponent('rgb');\n      const v = color.getComponent('v');\n      this.setValue(\n        `#${this.__convertToHex(rgb.r)}${this.__convertToHex(rgb.g)}${this.__convertToHex(rgb.b)}${this.__convertToHex(v)}`\n      );\n    },\n\n    __convertToHex(v) {\n      return Math.round(v * 255)\n        .toString(16)\n        .padStart(2, '0');\n    },\n\n    _updateValue(mappedValue, value) {\n      let target = this._element.querySelector(':scope > .value');\n      const rgb = mappedValue.substring(0, 7);\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        const alpha = mappedValue.length === 9 ? parseInt(mappedValue.substring(7, 9), 16) / 255 : 1.0;\n\n        switch (tagName) {\n          case 'cv-icon':\n            target.style.color = rgb;\n            target.style.opacity = Math.max(alpha, 0.2); // do not blend it out totally\n            break;\n        }\n      } else {\n        // only if we do not have another value handler\n        this._element.style.backgroundColor = mappedValue;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._disposeObjects('__colorChooser');\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'color',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Icon.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.components.Icon', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._idRegex = /^[^\\s]+$/;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyId',\n      // the id is used as 'class' property and therefore must not have spaces\n      transform: '_transformId'\n    },\n\n    color: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __initialized: false,\n    _idRegex: null,\n\n    _transformId(value) {\n      if (this._idRegex.test(value)) {\n        return value;\n      }\n      this.error('invalid icon id:', value);\n      return null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.textContent.trim()) {\n        this.__initialized = true;\n        this.setId(element.textContent.trim());\n      } else {\n        const it = element.classList.values();\n        for (let name of it) {\n          if (name.startsWith('ri-') || name.startsWith('knxuf-')) {\n            this.setId(name);\n            break;\n          }\n        }\n      }\n      this.__initialized = true;\n    },\n\n    _applyId(value, oldValue) {\n      const element = this._element;\n      if (this.__initialized) {\n        if (oldValue) {\n          element.classList.remove(oldValue);\n        }\n        if (value) {\n          // default is an icon font that uses CSS classes\n          element.classList.add(value);\n          if (element.textContent) {\n            element.textContent = '';\n          }\n        }\n      }\n    },\n\n    _applyColor(value, oldValue) {\n      const element = this._element;\n      if (oldValue) {\n        element.classList.remove(oldValue);\n      }\n      if (value) {\n        element.classList.add(value);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'icon',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n\n        static get observedAttributes() {\n          return ['color'];\n        }\n      }\n    );\n  }\n});\n","/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an image.\n *\n * HINT: Proxy mode needs an PHP environment with php-curl installed.\n */\nqx.Class.define('cv.ui.structure.tile.components.Image', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n\n    _init() {\n      const element = this._element;\n      let img = element.querySelector(':scope > img');\n      if (!img) {\n        img = document.createElement('img');\n        element.appendChild(img);\n      }\n      element.addEventListener('click', () => this.refresh());\n      let src = element.getAttribute('src');\n      let base = window.location.origin;\n      if (src.substring(0, 1) !== '/' && src.substring(0, 4) !== 'http') {\n        // relative url\n        base += window.location.pathname;\n      }\n      this._url = new URL(src, base);\n      const useProxy = element.hasAttribute('proxy') && element.getAttribute('proxy') === 'true';\n      if (useProxy) {\n        this._url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n\n        this._url.searchParams.set('url', element.getAttribute('src'));\n      }\n      this._headers = {};\n      if (element.hasAttribute('auth-type')) {\n        if (useProxy) {\n          this._url.searchParams.set('auth-type', element.getAttribute('auth-type').toLowerCase());\n        } else {\n          switch (element.getAttribute('auth-type').toLowerCase()) {\n            case 'basic':\n              this._headers['Authorization'] = 'Basic ' + window.btoa(element.getAttribute('username') + ':' + element.getAttribute('password'));\n              break;\n\n            case 'bearer':\n              this._headers['Authorization'] = 'Bearer ' + element.getAttribute('username');\n              break;\n\n            default:\n              this.error('unknown authorization type' +  element.getAttribute('auth-type'));\n              break;\n          }\n        }\n      }\n      this._loadImage();\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n    },\n\n    _loadImage() {\n      let img = this._element.querySelector(':scope > img');\n      if (Object.keys(this._headers).length > 0) {\n        let request = new XMLHttpRequest();\n        request.responseType = 'blob';\n        request.open('get', this._url.toString(), true);\n        Object.keys(this._headers).forEach(name => {\n          request.setRequestHeader(name, this._headers[name]);\n        });\n        request.onreadystatechange = e => {\n          if (request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            img.src = URL.createObjectURL(request.response);\n            img.onload = () => {\n              URL.revokeObjectURL(img.src);\n            };\n          }\n        };\n        request.send(null);\n      } else {\n        img.src = this._url.toString();\n      }\n    },\n\n    refresh() {\n      let img = this._element.querySelector(':scope > img');\n      if (img) {\n        this._url.searchParams.set('r', '' + Math.random());\n        this._loadImage();\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'refresh') {\n          if (ev.detail.state) {\n            this.refresh();\n          }\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'image',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* List.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a list of items. A &lt;template&gt;-element defines the content of the list-items and a model is used to\n * generate those items and apply the models content to the list-items.\n * It allows custom Javascript code in a &lt;script&gt;-Element to fill the model or address-Elements as model source.\n * The model can be refreshed in a time defined interval, which is set by the 'refresh' attribute.\n *\n * @widgetexample <settings>\n *    <caption>Example list</caption>\n *    <screenshot name=\"list_simple\"/>\n *  </settings>\n    <cv-list refresh=\"10\">\n      <model>\n        <script><![CDATA[\n         for (let i = 0; i < Math.round(Math.random()*10); i++) {\n           model.push({\n             label: 'This is list item no ' + i,\n             subLabel: 'Sublabel number ' + i\n           })\n         }\n         ]]>\n         </script>\n       </model>\n       <template>\n         <li>\n           <label class=\"primary\">${label}</label>\n           <label class=\"secondary\">${subLabel}</label>\n         </li>\n       </template>\n       <template when=\"empty\">\n         <li>\n           <label class=\"primary\">Model is empty!</label>\n         </li>\n       </template>\n   </cv-list>\n */\nqx.Class.define('cv.ui.structure.tile.components.List', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      refine: true,\n      init: []\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _timer: null,\n    _model: null,\n    _getModel: null,\n    _filterModel: null,\n    _sortModel: null,\n    _limit: null,\n    _modelInstance: null,\n\n    _init() {\n      const element = this._element;\n      this._model = [];\n      let refreshOnUpdate = false;\n      const model = element.querySelector('model');\n      if (element.parentElement) {\n        element.parentElement.classList.add('has-list');\n      }\n      if (!model) {\n        this.error('cv-list needs a model');\n        return;\n      }\n      if (model.hasAttribute('filter')) {\n        this._filterModel = new Function('item', 'index', '\"use strict\"; return ' + model.getAttribute('filter'));\n      }\n      if (model.hasAttribute('limit')) {\n        this._limit = parseInt(model.getAttribute('limit'));\n      }\n      const readAddresses = model.querySelectorAll(':scope > cv-address:not([mode=\"write\"])');\n\n      // if we have top level write addresses, we need to listen to sendState Events from the list items\n      for (let address of element.querySelectorAll(':scope > cv-address')) {\n        if (address.getAttribute('mode') !== 'read') {\n          element.addEventListener('sendState', ev => {\n            // forward event copy (dispatching the same is not possible) to all write addresses\n            const evCopy = new CustomEvent('sendState', {\n              bubbles: ev.bubbles,\n              cancelable: ev.cancelable,\n              detail: ev.detail\n            });\n            for (let a of element.querySelectorAll(':scope > cv-address')) {\n              a.dispatchEvent(evCopy);\n            }\n          });\n          break;\n        }\n      }\n\n      if (model.hasAttribute('sort-by')) {\n        const sortBy = model.getAttribute('sort-by');\n        // reverse order in 'desc' sort mode\n        const sortModifier = model.getAttribute('sort-mode') === 'desc' ? -1 : 1;\n        this._sortModel = (left, right) => {\n          const leftVal = left[sortBy];\n          const rightVal = right[sortBy];\n          if (leftVal === rightVal) {\n            return 0;\n          } else if (typeof leftVal === typeof rightVal) {\n            switch (typeof leftVal) {\n              case 'number':\n                return (leftVal - rightVal) * sortModifier;\n\n              case 'boolean':\n                return (leftVal ? -1 : 1) * sortModifier;\n\n              case 'string':\n                return leftVal.localeCompare(rightVal) * sortModifier;\n\n              default:\n                return JSON.stringify(leftVal).localeCompare(JSON.stringify(rightVal)) * sortModifier;\n            }\n          } else if (leftVal === undefined || leftVal === null) {\n            return 1 * sortModifier;\n          } else if (rightVal === undefined || rightVal === null) {\n            return -1 * sortModifier;\n          }\n          return 0;\n        };\n      }\n      if (model.hasAttribute('src') || model.hasAttribute('config-section')) {\n        // fetch from url\n        this._getModel = async () => {\n          const options = {\n            ttl: this.getRefresh()\n          };\n          for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n            if (model.hasAttribute(proxyParam)) {\n              options[proxyParam] = model.getAttribute(proxyParam);\n            }\n          }\n          const res = await cv.io.Fetch.cachedFetch(model.getAttribute('src'), options, model.getAttribute('proxy') === 'true');\n          return res;\n        };\n      } else if (model.hasAttribute('class')) {\n        // initialize internal class instance that implements cv.io.listmodel.IListModel\n        const Clazz = cv.io.listmodel.Registry.get(model.getAttribute('class'));\n        if (Clazz) {\n          const modelInstance = new Clazz();\n          if (model.hasAttribute('parameters')) {\n            const props = {};\n            for (let entry of model.getAttribute('parameters').split(',')) {\n              const [name, value] = entry.split('=').map(n => n.trim());\n              props[name] = value.startsWith('\\'') ? value.substring(1, value.length-1) : value;\n            }\n            modelInstance.set(props);\n          }\n          this._getModel = async () => {\n            await modelInstance.refresh();\n            return modelInstance.getModel();\n          };\n        } else {\n          this.error(`clazz \"cv.io.listmodel.${model.getAttribute('class')}\" not found`);\n        }\n      } else {\n        const script = model.querySelector(':scope > script');\n        const data = model.querySelectorAll(':scope > cv-data');\n        if (script) {\n          this._getModel = new Function('\"use strict\";let model = []; ' + script.innerText.trim() + '; return model');\n\n          this._model = this._getModel();\n        } else if (readAddresses.length > 0) {\n          // model has an address that triggers a refresh on update, so we just have to read the model from the updated value\n          this._getModel = this.getValue;\n          refreshOnUpdate = true;\n        } else if (data.length > 0) {\n          this._model = [];\n          this._getModel = () => this._model;\n          data.forEach((elem, i) => {\n            const d = {\n              index: i\n            };\n\n            for (const a of elem.attributes) {\n              d[a.name] = a.value;\n            }\n            this._model.push(d);\n          });\n        } else {\n          this.error(\n            'cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.'\n          );\n\n          return;\n        }\n      }\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => this.onStateUpdate(ev));\n      }\n      if (!refreshOnUpdate) {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        }\n        if (element.hasAttribute('refresh')) {\n          this.setRefresh(parseInt(element.getAttribute('refresh')));\n        }\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'refresh') {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        } else {\n          // reset lastRefresh to that the refresh get called when this item gets visible\n          this._lastRefresh = null;\n        }\n      } else {\n        super.onStateUpdate(ev);\n      }\n      // cancel event here\n      ev.stopPropagation();\n    },\n\n    _applyValue() {\n      // reset last refresh, because with new data its obsolete\n      this._lastRefresh = 0;\n      this.refresh();\n    },\n\n    async refresh() {\n      const element = this._element;\n      const template = element.querySelector(':scope > template:not([when])');\n      let newModel = [];\n      if (typeof this._getModel === 'function') {\n        newModel = this._getModel();\n      }\n      if (newModel instanceof Promise) {\n        try {\n          newModel = await newModel;\n        } catch (e) {\n          this.error('error refreshing async model:', e);\n        }\n      }\n      let target = element.querySelector(':scope > ul');\n      if (template.getAttribute('wrap') === 'false') {\n        target = element;\n      } else if (template.hasAttribute('target')) {\n        switch (template.getAttribute('target')) {\n          case 'parent':\n            target = element.parentElement;\n            // we do not need the list to be visible then\n            element.style.display = 'none';\n            break;\n          default:\n            throw new Error('invalid target: ' + template.getAttribute('target'));\n        }\n      } else if (!target) {\n        target = document.createElement('ul');\n        target.classList.add('content');\n        element.appendChild(target);\n      }\n      this.debug('refreshing with new model length', newModel.length);\n      if (Array.isArray(newModel) || newModel instanceof qx.data.Array) {\n        if (typeof this._filterModel === 'function') {\n          newModel = newModel.filter(this._filterModel);\n        }\n        if (typeof this._sortModel === 'function') {\n          newModel.sort(this._sortModel);\n        }\n        if (this._limit) {\n          newModel = newModel.slice(0, this._limit);\n        }\n        if (newModel.length === 0) {\n          const whenEmptyTemplate = element.querySelector(':scope > template[when=\"empty\"]');\n\n          if (whenEmptyTemplate && !target.querySelector(':scope > .empty-model')) {\n            while (target.firstElementChild && target.firstElementChild.hasAttribute('data-row')) {\n              target.removeChild(target.firstElementChild);\n            }\n            const emptyModel = whenEmptyTemplate.content.firstElementChild.cloneNode(true);\n            emptyModel.classList.add('empty-model');\n            target.appendChild(emptyModel);\n            return;\n          }\n        } else {\n          const emptyElem = target.querySelector(':scope > .empty-model');\n          if (emptyElem) {\n            emptyElem.remove();\n          }\n        }\n        const itemTemplate = document.createElement('template');\n        // remove entries we do not need anymore\n        for (let i = newModel.length; i < this._model.length; i++) {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          if (elem) {\n            elem.remove();\n          }\n        }\n\n        const getValue = (name, entry) => {\n          let index = -1;\n          if (name.endsWith(']')) {\n            // array access\n            index = parseInt(name.substring(name.indexOf('[') + 1, name.length - 1));\n            if (isNaN(index)) {\n              this.error(\n                'error parsing array index from ' + name,\n                name.substring(name.indexOf('[') + 1, name.length - 1)\n              );\n              return '';\n            }\n            name = name.substring(0, name.indexOf('['));\n          }\n          if (Object.prototype.hasOwnProperty.call(entry, name)) {\n            let val = entry[name];\n            if (index >= 0 && Array.isArray(val)) {\n              return val[index];\n            }\n            return val;\n          }\n          return '';\n        };\n        newModel.forEach((entry, i) => {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          const html = template.innerHTML.replaceAll(/\\${([^}]+)}/g, (match, content) => {\n            if (content === 'index') {\n              return '' + i;\n            }\n            if (content.includes('||')) {\n              // elements are or'ed use the first one with value\n              let val = '';\n              for (let name of content.split('||').map(n => n.trim())) {\n                val = getValue(name, entry);\n                if (val) {\n                  return val;\n                }\n              }\n            }\n            return getValue(content, entry);\n          });\n\n          itemTemplate.innerHTML = html;\n          // check for elements with when attributes\n          itemTemplate.content.firstElementChild.querySelectorAll('[when]').forEach(elem => {\n            const [leftVal, rightVal] = elem\n              .getAttribute('when')\n              .split('=')\n              .map(n => n.trim());\n            // noinspection EqualityComparisonWithCoercionJS\n            if (leftVal != rightVal) {\n              elem.parentElement.removeChild(elem);\n            } else {\n              elem.removeAttribute('when');\n            }\n          });\n          if (elem) {\n            // update existing\n            elem.innerHTML = itemTemplate.content.firstElementChild.innerHTML;\n            elem.setAttribute('data-row', '' + i);\n          } else {\n            // append new child\n            itemTemplate.content.firstElementChild.setAttribute('data-row', '' + i);\n\n            target.appendChild(itemTemplate.content.cloneNode(true));\n          }\n        });\n        this._model = newModel;\n      } else {\n        this.error('model must be an array', newModel);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_modelInstance', '_timer');\n    this._model = null;\n    this._filterModel = null;\n    this._sortModel = null;\n    this._target = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'list',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an item in a list.\n */\nqx.Class.define('cv.ui.structure.tile.components.ListItem', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      // install fireEvent function\n      this._element.fireEvent = (name, value) => {\n        const ev = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            value: value,\n            source: this\n          }\n        });\n        this._element.dispatchEvent(ev);\n      };\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'listitem',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: ['pages', 'menuItems'],\n      apply: '_applyModel'\n    },\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n\n    showLabels: {\n      check: 'Boolean',\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _applyModel(model) {\n      if (model) {\n        const rootList = document.createElement('ul');\n        this._element.appendChild(rootList);\n\n        if (model === 'pages') {\n          // add hamburger menu\n          const ham = document.createElement('a');\n          ham.href = '#';\n          ham.classList.add('menu');\n          ham.onclick = event => this._onHamburgerMenu(event);\n          const icon = document.createElement('i');\n\n          ham.appendChild(icon);\n          this._element.appendChild(ham);\n\n          qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n          qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n          qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n          icon.classList.add('ri-menu-line');\n        } else if (model === 'menuItems') {\n          // add hamburger menu\n          const icon = document.createElement('i');\n          icon.classList.add('ri-more-2-fill');\n          this._element.appendChild(icon);\n          // listen on whole element\n          this._element.onclick = event => this._onHamburgerMenu(event);\n          rootList.classList.add('context-menu');\n          this._generateMenu();\n        }\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.hasAttribute('model') ? element.getAttribute('model')\n        : (element.querySelectorAll(':scope > cv-menu-item').length > 0) ? 'menuItems' : null;\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      this.setModel(model);\n    },\n\n    _generateMenu() {\n      switch (this.getModel()) {\n        case 'pages': {\n          const currentPage = window.location.hash.substring(1);\n          let parentElement = document.querySelector('main');\n          if (parentElement) {\n            const firstPage = document.querySelector('cv-page');\n            if (firstPage) {\n              parentElement = firstPage.parentElement;\n            }\n          }\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n          }\n          break;\n        }\n        case 'menuItems': {\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            for (let item of this._element.querySelectorAll(':scope > cv-menu-item')) {\n              const pageName = item.getAttribute('name') || '';\n              const pageIcon = item.getAttribute('icon') || '';\n              const li = document.createElement('li');\n              if (pageIcon) {\n                const i = document.createElement('i');\n                i.classList.add(pageIcon);\n                i.title = pageName;\n                li.appendChild(i);\n              }\n              if (this.isShowLabels()) {\n                const text = document.createTextNode(pageName);\n                li.appendChild(text);\n              }\n              li.addEventListener('click', event => {\n                item.getInstance().onClick(event);\n              });\n              rootList.appendChild(li);\n            }\n          }\n          break;\n        }\n      }\n    },\n\n    _onHamburgerMenu(event) {\n      let toggleClass = 'open';\n      if (this.getModel() === 'pages') {\n        toggleClass = 'responsive';\n        for (let detail of this._element.querySelectorAll('.details')) {\n          detail.setAttribute('open', '');\n        }\n      }\n      this._element.classList.toggle(toggleClass);\n      event.stopPropagation();\n      if (this._element.classList.contains(toggleClass)) {\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (\n        target.classList.contains('menu') ||\n        (target.parentElement && target.parentElement.classList.contains('menu')) ||\n        target.nodeName.toLowerCase() === 'cv-menu' ||\n        (target.parentElement && target.parentElement.nodeName.toLowerCase() === 'cv-menu')\n      ) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== '.summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 500);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (\n          current &&\n          current.previousElementSibling &&\n          current.previousElementSibling.tagName.toLowerCase() === 'li'\n        ) {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('open')) {\n        this._element.classList.remove('open');\n      } else if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('.details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _openDetail(item) {\n      const first = this._element.querySelectorAll('.details[open]').length === 0;\n      item.setAttribute('open', '');\n      if (first) {\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _closeDetail(item) {\n      item.removeAttribute('open');\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        // remove listeners\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        a.setAttribute('data-page-id', pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels() || currentLevel > 0) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if (\n          (depth < 0 || depth > currentLevel) &&\n          page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0\n        ) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          a.setAttribute('href', '#');\n\n          a.addEventListener('click', ev => {\n            cv.Application.structureController.scrollToPage(pageId);\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n          }\n          const expander = document.createElement('i');\n          expander.classList.add('expander');\n          expander.classList.add('ri-arrow-down-s-line');\n          summary.appendChild(expander);\n          expander.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              this._closeDetail(details);\n            } else {\n              this._openDetail(details);\n            }\n          });\n\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel+1);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[data-page-id=\"${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n        static get observedAttributes() {\n          return ['appearance', 'depth'];\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Represents an action that should be executed when the related menu item has been clicked.\n */\nqx.Class.define('cv.ui.structure.tile.components.MenuAction', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _currentState: null,\n\n    _init() {\n      super._init();\n      const action = this._element.getAttribute('action');\n      switch (action) {\n        case 'toggleState': {\n          let hasAddress = false;\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            hasAddress = true;\n            if (address.getAttribute('mode') !== 'write') {\n              this._element.addEventListener('stateUpdate', ev => {\n                this.onStateUpdate(ev);\n                // cancel event here\n                ev.stopPropagation();\n              });\n            }\n          }\n          if (!hasAddress) {\n            this.error('a cv-menu-item with action \"toggleState\" needs at least one cv-address to read the write the state,');\n          }\n          break;\n        }\n        case 'popup':\n          if (!this._element.querySelector(':scope > cv-popup')) {\n            this.error('a cv-menu-item with action \"popup\" must have a cv-popup as child.');\n          }\n          break;\n      }\n    },\n\n    onClick(event) {\n      switch (this._element.getAttribute('action')) {\n        case 'popup': {\n          const popup = this._element.querySelector(':scope > cv-popup');\n          if (popup) {\n            popup.getInstance().open();\n          }\n          event.stopPropagation();\n          break;\n        }\n        case 'toggleState': {\n          const ev = new CustomEvent('sendState', {\n            detail: {\n              value: !this._currentState,\n              source: this\n            }\n          });\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            if (address.getAttribute('mode') !== 'read') {\n              address.dispatchEvent(ev);\n            }\n          }\n          event.stopPropagation();\n          break;\n        }\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == '1';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      this._currentState = value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu-item',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let baseName in cv.plugins) {\n            if (baseName.toLowerCase() === name) {\n              Clazz = cv.plugins[baseName];\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            // must be converted to real XML document, otherwise attributes cannot be accessed\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(this._element.innerHTML, 'application/xml');\n            const props = Clazz.parse(doc.firstElementChild, id, '', 'text');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          } else {\n            this.error('no main plugin class found for ' + pluginName);\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* RoundProgress.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a round progress bar (partially filled circle).\n * This component must be used inside a cv-value component, it is not meant to be used standalone.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.RoundProgress', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    text: {\n      check: 'String',\n      apply: '_applyText'\n    },\n\n    type: {\n      check: ['circle', 'semiCircle'],\n      init: 'circle'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __writeAddresses: null,\n    __circumference: null,\n    __start: null,\n    __normalizedRadius: null,\n    __radius: null,\n    __label: null,\n    __canvas: null,\n    __availableLabelWidth: null,\n    __defaultLabelFontSize: null,\n    _queuedFitText: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      const style = document.querySelector(':root').style;\n      const hasFixedRadius = element.hasAttribute('radius');\n      const radius = (this.__radius =\n        element.getAttribute('radius') || parseInt(style.getPropertyValue('--tileCellWidth')) || 56);\n      const strokeWidth = element.getAttribute('stroke') || 8;\n      const normalizedRadius = (this.__normalizedRadius = radius - strokeWidth / 2);\n      this.__circumference = normalizedRadius * 2 * Math.PI;\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      const type = this.getType();\n      let height = type === 'semiCircle' ? radius : radius * 2;\n      const ns = 'http://www.w3.org/2000/svg';\n      const svg = document.createElementNS(ns, 'svg');\n      svg.setAttribute('height', height);\n      svg.setAttribute('width', '' + (radius * 2));\n      svg.setAttribute('type', type);\n\n      if (type === 'circle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'circle');\n          bg.classList.add('bg');\n          bg.setAttribute('r', '' +normalizedRadius);\n          bg.setAttribute('cx', '50%');\n          bg.setAttribute('cy', '50%');\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        const bar = document.createElementNS(ns, 'circle');\n        bar.classList.add('bar');\n        bar.setAttribute('r', '' +normalizedRadius);\n        bar.setAttribute('cx', '50%');\n        bar.setAttribute('cy', '50%');\n        bar.setAttribute('stroke-width', strokeWidth);\n        bar.setAttribute('stroke-dasharray', `${this.__circumference} ${this.__circumference}`);\n        bar.setAttribute('stroke-dashoffset', this.__circumference);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      } else if (type === 'semiCircle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'path');\n          bg.classList.add('bg');\n          bg.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 1 ${\n            radius * 2 - strokeWidth / 2\n          } ${radius}`);\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        this.__start = {\n          x: strokeWidth / 2,\n          y: radius\n        };\n        const bar = document.createElementNS(ns, 'path');\n        bar.classList.add('bar');\n        bar.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 0 ${\n          strokeWidth / 2\n        } ${radius}`);\n        bar.setAttribute('fill', 'transparent');\n        bar.setAttribute('stroke-width', strokeWidth);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      }\n      element.replaceChildren(svg, document.createElement('label'));\n\n      this.__availableLabelWidth = radius * 2 - strokeWidth * 2 - 24;\n\n      if (!hasFixedRadius) {\n        qx.event.message.Bus.subscribe('cv.design.tile.cellWidthChanged', ev => {\n          this.__radius = ev.getData();\n          this.__normalizedRadius = this.__radius - strokeWidth / 2;\n          this.__circumference = this.__normalizedRadius * 2 * Math.PI;\n          height = type === 'semiCircle' ? this.__radius : this.__radius * 2;\n          const svg = element.querySelector(':scope > svg');\n          svg.setAttribute('height', '' + height);\n          svg.setAttribute('width', '' + this.__radius * 2);\n          if (type === 'circle') {\n            this._element.querySelectorAll(':scope > svg > circle').forEach(circle => {\n              circle.setAttribute('r', '' + this.__normalizedRadius);\n              if (circle.classList.contains('bar')) {\n                circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n                circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n              }\n            });\n          } else if (type === 'semiCircle') {\n            this.__start.y = this.__radius;\n            const bg = this._element.querySelector(':scope > svg > path.bg');\n            if (bg) {\n              bg.setAttribute(\n                'd',\n                `M ${strokeWidth / 2} ${this.__radius} A ${this.__normalizedRadius} ${this.__normalizedRadius} 0 0 1 ${\n                  this.__radius * 2 - strokeWidth / 2\n                } ${this.__radius}`\n              );\n            }\n          }\n          this._applyProgress(this.isPropertyInitialized('progress') ? this.getProgress() : 0);\n        });\n      }\n    },\n\n    __convert(angle) {\n      const angleRad = angle * (Math.PI / 180.0);\n      return {\n        x: this.__radius - this.__normalizedRadius * Math.cos(angleRad),\n        y: this.__radius - this.__normalizedRadius * Math.sin(angleRad)\n      };\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueElement;\n        let end;\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n\n        switch (this.getType()) {\n          case 'circle':\n            valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n            valueElement.setAttribute(\n              'stroke-dashoffset',\n              '' + this.__circumference - (percent / 100) * this.__circumference\n            );\n\n            break;\n\n          case 'semiCircle':\n            valueElement = this._element.querySelector(':scope > svg > path.bar');\n\n            end = this.__convert((180 / 100) * percent);\n            valueElement.setAttribute(\n              'd',\n              [\n                'M',\n                this.__start.x,\n                this.__start.y,\n                'A',\n                this.__normalizedRadius,\n                this.__normalizedRadius,\n                0,\n                0,\n                1,\n                end.x,\n                end.y\n              ].join(' ')\n            );\n\n            break;\n        }\n      }\n    },\n\n    _fitText() {\n      if (this.__label && this.__label.textContent) {\n        if (this.isVisible()) {\n          if (!this.__canvas) {\n            this.__canvas = document.createElement('canvas');\n            this.__context = this.__canvas.getContext('2d');\n            const compStyle = window.getComputedStyle(this.__label);\n            this.__context.font = compStyle.getPropertyValue('font');\n            this.__defaultLabelFontSize = compStyle.getPropertyValue('font-size');\n          }\n          const metrics = this.__context.measureText(this.__label.textContent);\n          if (metrics.width > this.__availableLabelWidth) {\n            // adjust font-size\n            const factor = this.__availableLabelWidth / metrics.width;\n            this.__label.style.fontSize = Math.floor(parseInt(this.__defaultLabelFontSize) * factor) + 'px';\n          } else {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n          this._queuedFitText = false;\n        } else {\n          this._queuedFitText = true;\n        }\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData() && this._queuedFitText) {\n        this._fitText();\n      }\n    },\n\n    _applyText(value) {\n      if (this.isConnected()) {\n        if (!this.__label) {\n          this.__label = this._element.querySelector(':scope > label');\n        }\n        this.__label.textContent = value;\n        if (!value) {\n          // empty text, just reset to default font size\n          if (this.__defaultLabelFontSize) {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n        } else {\n          this._fitText();\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__label = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'round-progress',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Select.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Allows the selection of one element out of a list of <cv-option> elements\n */\nqx.Class.define('cv.ui.structure.tile.components.Select', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __options: null,\n    __value: null,\n    __popup: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this.__options = new Map();\n\n      const popup = (this.__popup = document.createElement('div'));\n      popup.classList.add('popup');\n      element.querySelectorAll(':scope > cv-option').forEach((option, i) => {\n        popup.appendChild(option);\n        if (!option.hasAttribute('key')) {\n          option.setAttribute('key', '' + i);\n        }\n        this.__options.set(option.getAttribute('key'), option);\n      });\n      const value = (this.__value = document.createElement('span'));\n      value.classList.add('value');\n      element.appendChild(value);\n      element.appendChild(popup);\n      const handle = document.createElement('cv-icon');\n      handle.classList.add('dropdown');\n      handle.classList.add('ri-arrow-down-s-line');\n      element.appendChild(handle);\n\n      if (this._writeAddresses.length > 0) {\n        element.addEventListener('click', ev => this.onClicked(ev));\n      }\n    },\n\n    onClicked(ev) {\n      const style = getComputedStyle(this.__popup);\n      let target = ev.target;\n      // find out event target (either the cv-select of cv-option\n      while (target !== ev.currentTarget && target.tagName.toLowerCase() !== 'cv-option') {\n        target = target.parentElement;\n      }\n      if (target.tagName.toLowerCase() === 'cv-option') {\n        // select this option\n        this._sendSelection(target.getAttribute('key'), true);\n      }\n      // open popup\n      if (style.getPropertyValue('display') === 'none') {\n        this.__popup.style.display = 'block';\n      } else {\n        this.__popup.style.display = 'none';\n      }\n    },\n\n    _sendSelection(key, predictive) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: key,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      if (predictive === true) {\n        this.setValue(key);\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this.__options.has(mappedValue)) {\n        this.__value.innerHTML = '';\n        const current = this.__options.get(mappedValue);\n        if (current.children.length > 0) {\n          // if we have non text children, we only use them (only icons no text)\n          for (const child of current.children) {\n            this.__value.appendChild(child.cloneNode());\n          }\n        } else {\n          this.__value.innerHTML = current.innerHTML;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'select',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Slider.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a range slider.\n */\nqx.Class.define('cv.ui.structure.tile.components.Slider', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 5\n    },\n\n    min: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyMin'\n    },\n\n    max: {\n      check: 'Number',\n      init: 100,\n      apply: '_applyMax'\n    },\n\n    showValue: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowValue'\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __throttled: null,\n    __input: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      } else {\n        this._applyThrottleInterval(this.getThrottleInterval());\n      }\n\n      // init components\n      let input = element.querySelector(':scope > input');\n      if (!input) {\n        input = document.createElement('input');\n        input.classList.add('slider');\n        input.setAttribute('type', 'range');\n        element.insertBefore(input, element.querySelector(':scope > .up'));\n        input.oninput = () => this.__throttled.call();\n      }\n      this.__input = input;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseInt(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('min')) {\n        this.setMin(parseInt(element.getAttribute('min')));\n      }\n      if (element.hasAttribute('max')) {\n        this.setMax(parseInt(element.getAttribute('max')));\n      }\n      if (element.hasAttribute('hide-value') && element.getAttribute('hide-value') === 'true') {\n        this.setShowValue(false);\n      } else {\n        this._applyShowValue(true);\n      }\n\n      const decreaseElement = element.querySelector(':scope > .decrease');\n      if (decreaseElement) {\n        decreaseElement.addEventListener('click', ev => this.onDecrease());\n      }\n      const increaseElement = element.querySelector(':scope > .increase');\n      if (increaseElement) {\n        increaseElement.addEventListener('click', ev => this.onIncrease());\n      }\n    },\n\n    _applyThrottleInterval(value) {\n      if (value > 0) {\n        this.__throttled = cv.util.Function.throttle(this.onInput, value, { trailing: true }, this);\n      } else {\n        // no throttling, direct call\n        this.__throttled = {\n          call: () => this.onInput(),\n          abort: () => {}\n        };\n      }\n    },\n\n    _applyMin(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('min', '' + value);\n    },\n\n    _applyMax(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('max', '' + value);\n    },\n\n    _applyShowValue(value) {\n      let valueLabel = this._element.querySelector(':scope > label.value');\n      if (value) {\n        if (!valueLabel) {\n          valueLabel = document.createElement('label');\n          valueLabel.classList.add('value');\n          valueLabel.classList.add('secondary');\n          this._element.insertBefore(valueLabel, this._element.firstChild);\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector(':scope > input');\n      if (target) {\n        target.value = value;\n      }\n      if (this.isShowValue()) {\n        let valueLabel = this._element.querySelector(':scope > label.value');\n        if (valueLabel) {\n          valueLabel.innerText = mappedValue;\n        }\n      }\n    },\n\n    onInput() {\n      this.__sendValue(this.__input.value);\n    },\n\n    onDecrease() {\n      const value = this.getValue() - this.getStepWidth();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getValue() + this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'slider',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Spinner.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a number value that can be increased and decreased by a defined step width.\n */\nqx.Class.define('cv.ui.structure.tile.components.Spinner', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 1.0\n    },\n\n    mode: {\n      check: ['relative', 'absolute'],\n      init: 'absolute'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseFloat(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('mode')) {\n        this.setMode(element.getAttribute('mode'));\n      }\n      // init components\n      let valueElement = element.querySelector(':scope > .value');\n      if (!valueElement) {\n        valueElement = document.createElement('label');\n        valueElement.classList.add('value');\n        valueElement.classList.add('primary');\n        element.appendChild(valueElement);\n      }\n      // add increase / decrease buttons\n      const decrease = document.createElement('div');\n      decrease.classList.add('clickable');\n      decrease.classList.add('left');\n      const decreaseIcon = document.createElement('cv-icon');\n      decreaseIcon.classList.add('ri-arrow-down-s-line');\n      decrease.addEventListener('click', () => this.onDecrease());\n      decrease.appendChild(decreaseIcon);\n      element.insertBefore(decrease, valueElement);\n\n      const increase = document.createElement('div');\n      increase.classList.add('clickable');\n      increase.classList.add('right');\n      const increaseIcon = document.createElement('cv-icon');\n      increaseIcon.classList.add('ri-arrow-up-s-line');\n      increase.appendChild(increaseIcon);\n      increase.addEventListener('click', () => this.onIncrease());\n      element.appendChild(increase);\n    },\n\n    onDecrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() - this.getStepWidth() : this.getStepWidth() * -1;\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() + this.getStepWidth() : this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    _updateValue(mappedValue) {\n      const target = this._element.querySelector('.value');\n      if (target) {\n        target.innerHTML = mappedValue;\n      }\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'spinner',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Value.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a value from the backend, as label or image/icon\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Value', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MResize],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _queuedOverflowDetection: null,\n    _debouncedDetectOverflow: null,\n\n    _init() {\n      super._init();\n      this._debouncedDetectOverflow = qx.util.Function.debounce(this._detectOverflow, 20);\n\n      const target = this._element.querySelector('.value');\n      if (target && target.tagName.toLowerCase() === 'label') {\n        // check for overflowing text, when labels parent gets resized\n        this.setResizeTarget(this._element);\n        this.addListener('resized', this._debouncedDetectOverflow, this);\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData()) {\n        if (this._queuedOverflowDetection) {\n          this._debouncedDetectOverflow();\n        }\n      } else {\n        const target = this._element.querySelector('.value');\n        if (target && target.classList.contains('scroll')) {\n          target.classList.remove('scroll');\n        }\n      }\n    },\n\n    _detectOverflow() {\n      const target = this._element.querySelector('.value');\n      if (this.isVisible()) {\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > target.parentElement.clientWidth) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      let styleClass = '';\n      for (const target of this._element.querySelectorAll('.value')) {\n        const tagName = target.tagName.toLowerCase();\n        switch (tagName) {\n          case 'cv-icon':\n            target._instance.setId(mappedValue);\n            if (this._element.hasAttribute('styling')) {\n              styleClass = cv.Application.structureController.styleValue(\n                this._element.getAttribute('styling'),\n                value,\n                this.__store\n              );\n            }\n            target._instance.setStyleClass(styleClass);\n            break;\n          case 'meter':\n            target.setAttribute('value', value);\n            break;\n          case 'cv-round-progress':\n            if (typeof value === 'string') {\n              value = parseInt(value);\n            }\n            target._instance.setProgress(value);\n            target._instance.setText('' + mappedValue);\n            break;\n          case 'label':\n            target.innerHTML = mappedValue;\n            this._debouncedDetectOverflow();\n            break;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'value',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Backend.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * <cv-backend> Custom element to define a backend connection\n */\nqx.Class.define('cv.ui.structure.tile.elements.Backend', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _name: null,\n    __applyValues: null,\n\n    _init() {\n      const element = this._element;\n      let type = element.getAttribute('type');\n      if (type && type.startsWith('class:')) {\n        const className = type.split(':').pop();\n        if (!cv.io.BackendConnections.isRegistered(className)) {\n          // wait until client class has been loaded\n          cv.io.BackendConnections.addClassLoadedListener(className, () => {\n            this._init();\n          });\n          return;\n        }\n        type = className;\n      }\n      const uriString = element.hasAttribute('uri') ? element.getAttribute('uri') : '';\n      let uri;\n      if (uriString) {\n        try {\n          uri = new URL(uriString, window.location.origin + window.location.pathname);\n        } catch (e) {\n          this.error('Error parsing uri: ' + uriString);\n        }\n      }\n\n      if (type) {\n        let credentials = null;\n        if (element.hasAttribute('username')) {\n          credentials = {\n            username: element.getAttribute('username'),\n            password: element.getAttribute('password') || ''\n          };\n        } else if (uri && uri.username) {\n          credentials = {\n            username: uri.username,\n            password: uri.password\n          };\n        }\n        const model = cv.data.Model.getInstance();\n        let backendUrl = uri ? uri.toString() : null;\n        let backendUrlConfigKey;\n        switch (type) {\n          case 'knxd':\n            backendUrlConfigKey = 'backendKnxdUrl';\n            break;\n          case 'openhab':\n            backendUrlConfigKey = 'backendOpenHABUrl';\n            break;\n          case 'mqtt':\n            backendUrlConfigKey = 'backendMQTTUrl';\n            break;\n        }\n\n        if (backendUrlConfigKey) {\n          // override by URL settings\n          if (cv.Config.URL[backendUrlConfigKey]) {\n            backendUrl = cv.Config.URL[backendUrlConfigKey];\n          } else if (!backendUrl && cv.Config.server[backendUrlConfigKey]) {\n            backendUrl = cv.Config.server[backendUrlConfigKey];\n          }\n        }\n        let name = type;\n        if (element.hasAttribute('name')) {\n          name = element.getAttribute('name');\n        } else if (!cv.io.BackendConnections.hasClient('main')) {\n          // we need one main backend\n          name = 'main';\n        } else if (cv.io.BackendConnections.getClient('main').configuredIn === 'config') {\n          qx.log.Logger.warn(\n            this,\n            `there is already a backend registered with name \"main\" and type ${type} skipping this one`\n          );\n\n          return;\n        }\n        qx.log.Logger.debug(this, 'init backend', name);\n        if (cv.io.BackendConnections.hasClient(name)) {\n          const notification = {\n            topic: 'cv.config.error',\n            title: qx.locale.Manager.tr('Config error'),\n            message: qx.locale.Manager.tr('There already exists a backend named: \"%1\"', name),\n\n            severity: 'urgent',\n            unique: true,\n            deletable: true\n          };\n\n          cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n          return;\n        }\n        const client = cv.io.BackendConnections.addBackendClient(name, type, backendUrl, 'config');\n\n        this._client = client;\n        this._name = name;\n        this.__applyValues = [];\n        client.update = data => model.updateFrom(name, data); // override clients update function\n\n        for (const data of element.querySelectorAll(':scope > cv-resource')) {\n          client.setResourcePath(data.getAttribute('name'), data.textContent.trim());\n        }\n\n        client.login(true, credentials, () => {\n          this.debug(name, 'connected');\n          if (element.hasAttribute('default') && element.getAttribute('default') === 'true') {\n            model.setDefaultBackendName(name);\n          }\n          const doSubscribe = () => {\n            for (const [address, value] of this.__applyValues) {\n              this.debug(name, 'apply update', address, value);\n              model.onUpdate(address, value, name);\n            }\n            const addressesToSubscribe = model.getAddresses(name);\n            this.debug(name, 'subscribing to', addressesToSubscribe.length, 'addresses');\n\n            if (addressesToSubscribe.length !== 0) {\n              client.subscribe(addressesToSubscribe);\n            }\n          };\n          if (cv.TemplateEngine.getInstance().isDomFinished()) {\n            doSubscribe();\n          } else {\n            qx.event.message.Bus.subscribe(\n              'setup.dom.finished',\n              function () {\n                doSubscribe();\n              },\n              this\n            );\n          }\n        });\n      } else {\n        this.error('<cv-backend> must have a type attribute');\n      }\n    },\n\n    _disconnected() {\n      if (this._client) {\n        const model = cv.data.Model.getInstance();\n        if (this._element.hasAttribute('default') && this._element.getAttribute('default') === 'true') {\n          model.resetDefaultBackendName();\n        }\n        this._client.terminate();\n        cv.io.BackendConnections.removeClient(this._client);\n        this._client.dispose();\n        this._client = null;\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'backend',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Loader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Loads external content like CSS/JS files, config-content or a template file.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Loader', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const src = element.getAttribute('src');\n      let loaderElement;\n      if (src) {\n        switch (type) {\n          case 'css':\n            loaderElement = document.createElement('link');\n            loaderElement.setAttribute('type', 'text/css');\n            loaderElement.setAttribute('rel', 'stylesheet');\n            loaderElement.setAttribute('href', src);\n            break;\n\n          case 'js':\n            loaderElement = document.createElement('script');\n            loaderElement.setAttribute('type', 'text/javascript');\n            loaderElement.setAttribute('src', src);\n            break;\n\n          case 'templates':\n            this.loadXml(src, type);\n            break;\n        }\n\n        if (loaderElement) {\n          element.appendChild(loaderElement);\n        }\n      }\n    },\n\n    loadXml(uri) {\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n\n      ajaxRequest.addListenerOnce('success', function (e) {\n        let content = e.getTarget().getResponse();\n        let htmlContent = content;\n        const target = cv.Application.structureController.getRenderTarget();\n        // we need the documents to be in HTML namespace\n        if (!htmlContent.documentElement.xmlns) {\n          let text = e.getTarget().getResponseText();\n          text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n          const parser = new DOMParser();\n          htmlContent = parser.parseFromString(text, 'text/xml');\n        }\n        let child;\n        while ((child = htmlContent.documentElement.firstElementChild)) {\n          target.appendChild(child);\n        }\n        // register custom elements for templates in this document\n        cv.Application.structureController.registerTemplates(content);\n      });\n      ajaxRequest.addListener('statusError', e => {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.handleError('filenotfound', ajaxRequest.getUrl());\n        } else {\n          this.handleError(status, null);\n        }\n      });\n\n      ajaxRequest.send();\n    },\n\n    handleError(textStatus, additionalErrorInfo) {\n      const title = qx.locale.Manager.tr('File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid XML file!');\n          break;\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: File not found, %1.', additionalErrorInfo).translate().toString();\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n\n      const notification = {\n        topic: 'cv.error',\n        title: title,\n        message: message\n      };\n\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n      this.error(this, message.toString());\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'loader',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Mapping.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Mapping maps a value to another value that can be used to show e.g. the current state.\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Mapping', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__cache = {};\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __cache: null,\n\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      // avoid adding styling elements here as they inherit this method but call the super method too\n      if (this._element.tagName.toLowerCase().endsWith('mapping')) {\n        if (value) {\n          cv.Application.structureController.addMapping(this._element.getAttribute('name'), this);\n        } else {\n          cv.Application.structureController.removeMapping(this._element.getAttribute('name'));\n        }\n      }\n    },\n\n    /**\n     *\n     * @param val {variant}\n     * @param store {Map<string, variant>?} optional stored values from other addresses\n     * @param params {Array<variant>?} optional array of parameters for the mapping\n     * @return {string|*|string}\n     */\n    mapValue(val, store, params) {\n      if (Object.prototype.hasOwnProperty.call(this.__cache, val)) {\n        return this.__cache[val];\n      }\n      let mappedValue = '' + val;\n      const exactMatch = this._element.querySelector(':scope > entry[value=\"' + val + '\"]');\n\n      let type = this._element.hasAttribute('type') ? this._element.getAttribute('type') : 'string';\n      if (exactMatch) {\n        mappedValue = this._convert(exactMatch.innerHTML.trim(), type);\n        this.__cache[val] = mappedValue;\n        return mappedValue;\n      }\n      const formula = this._element.querySelector(':scope > formula');\n      if (formula) {\n        if (!formula._formula) {\n          let content = formula.textContent;\n          formula._formula = new Function('x', 'store', 'params', 'let y;' + content + '; return y;');\n        }\n        mappedValue = this._convert(formula._formula(val, store, params), type);\n        return mappedValue;\n      }\n      const entries = this._element.querySelectorAll(':scope > entry');\n      let defaultValue = null;\n\n      const mapped = Array.from(entries).some(entry => {\n        let matches = false;\n        let isDefaultValue = entry.hasAttribute('default') && entry.getAttribute('default') === 'true';\n        if (entry.hasAttribute('value')) {\n          const value = entry.getAttribute('value');\n          if (value === (val ? val : 'NULL') || value === '*') {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = this._convert(value, type);\n          }\n        } else if (entry.hasAttribute('range-min')) {\n          const rangeMin = parseFloat(entry.getAttribute('range-min'));\n          const rangeMax = entry.hasAttribute('range-max')\n            ? parseFloat(entry.getAttribute('range-max'))\n            : Number.POSITIVE_INFINITY;\n          const floatValue = parseFloat(val);\n          if (rangeMin <= floatValue && floatValue <= rangeMax) {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = rangeMin;\n          }\n        }\n        return matches;\n      });\n      if (!mapped && defaultValue !== null) {\n        mappedValue = this.mapValue(defaultValue);\n      }\n      this.__cache[val] = mappedValue;\n      return mappedValue;\n    },\n\n    _convert(value, type) {\n      switch (type.toLowerCase()) {\n        case 'boolean':\n          return value === 'true';\n        case 'integer':\n          return parseInt(value);\n        case 'float':\n          return parseFloat(value);\n        default:\n          return value;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__cache = null;\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'mapping',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* StateNotification.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Parse notification settings and load them into the cv.core.notifications.Router\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.StateNotification', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n    const stateConfig = {};\n    const elem = this._element;\n    const target =\n      cv.core.notifications.Router.getTarget(elem.getAttribute('target')) || cv.ui.NotificationCenter.getInstance();\n\n    const addressContainer = elem.querySelector('cv-addresses');\n\n    const config = {\n      target: target,\n      severity: elem.getAttribute('severity'),\n      skipInitial: elem.getAttribute('skip-initial') !== 'false',\n      deletable: elem.getAttribute('deletable') !== 'false',\n      unique: elem.getAttribute('unique') === 'true',\n      valueMapping: addressContainer.getAttribute('value-mapping'),\n      addressMapping: addressContainer.getAttribute('address-mapping'),\n      enabled: !elem.hasAttribute('enabled') || elem.getAttribute('enabled') === 'true'\n    };\n    if (elem.hasAttribute('id')) {\n      config.id = elem.getAttribute('id');\n      // notifications with id can be changed by the system backend, so we need to listen to some addresses\n      const model = cv.data.Model.getInstance();\n      model.addUpdateListener(`notification:${config.id}:enabled`, this._onStateUpdate, this, 'system');\n      model.addUpdateListener(`notification:${config.id}:severity`, this._onStateUpdate, this, 'system');\n\n      model.onUpdate(`notification:${config.id}:enabled`, config.enabled, 'system');\n      model.onUpdate(`notification:${config.id}:severity`, config.severity, 'system');\n    }\n\n    const name = elem.getAttribute('name');\n    if (name) {\n      config.topic = 'cv.state.' + name;\n    }\n    const icon = elem.getAttribute('icon');\n    if (icon) {\n      config.icon = icon;\n      const iconClasses = elem.getAttribute('icon-classes');\n      if (iconClasses) {\n        config.iconClasses = iconClasses;\n      }\n    }\n\n    // templates\n    const titleElem = elem.querySelector('cv-title-template');\n    if (titleElem) {\n      config.titleTemplate = titleElem.innerHTML;\n    }\n    const messageElem = elem.querySelector('cv-message-template');\n    if (messageElem) {\n      config.messageTemplate = messageElem.innerHTML;\n    }\n\n    // condition\n    const conditionElem = elem.querySelector('cv-condition');\n    let condition = conditionElem.textContent;\n    if (condition === 'true') {\n      condition = true;\n    } else if (condition === 'false') {\n      condition = false;\n    }\n    config.condition = condition;\n\n    let address;\n    for (const addressElement of addressContainer.querySelectorAll(':scope > cv-address')) {\n      address = addressElement.textContent.trim();\n      if (!Object.prototype.hasOwnProperty.call(stateConfig, address)) {\n        stateConfig[address] = [];\n      }\n      const addressConfig = Object.assign({}, config);\n      let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n      switch (addressElement.getAttribute('mode')) {\n        case 'disable':\n          mode = 0;\n          break;\n        case 'read':\n          mode = 1;\n          break;\n        case 'write':\n          mode = 2;\n          break;\n        case 'readwrite':\n          mode = 1 | 2;\n          break;\n      }\n      addressConfig.addressConfig = {\n        transform: addressElement.getAttribute('transform'),\n        mode: mode,\n        selector: addressElement.getAttribute('selector'),\n        ignoreError: addressElement.getAttribute('ignore-error') === 'true',\n        qos: (addressElement.getAttribute('qos') || 0) | 0, // force integer\n        retain: addressElement.getAttribute('retain') === 'true',\n        variantInfo: addressElement.getAttribute('variant')\n      };\n      stateConfig[address].push(addressConfig);\n    }\n    cv.core.notifications.Router.getInstance().registerStateUpdateHandler(stateConfig);\n  },\n\n    _onStateUpdate(address, state, initial, changed) {\n      const [, id, property] = address.split(':');\n      const router = cv.core.notifications.Router.getInstance();\n      if (property === 'enabled') {\n        router.enableStateUpdateHandler(id, state == 1);\n      } else if (property === 'severity') {\n        router.changeStateUpdateHandlerSeverity(id, state);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'state-notification',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Styling.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Styling maps a value to another value that can be used to style a component\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Styling', {\n  extend: cv.ui.structure.tile.elements.Mapping,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      if (value) {\n        cv.Application.structureController.addStyling(this._element.getAttribute('name'), this);\n      } else {\n        cv.Application.structureController.removeStyling(this._element.getAttribute('name'));\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'styling',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Group.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a group of widgets that can be hidden (works like the <detail> HTML Element)\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Group', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      let label = null;\n      let summary = null;\n      const needsSummary = element.hasAttribute('name') || element.hasAttribute('icon');\n      if (needsSummary) {\n        summary = element.querySelector(':scope > summary');\n        if (!summary) {\n          summary = document.createElement('summary');\n          element.insertBefore(summary, element.firstChild);\n        }\n        if (element.hasAttribute('name')) {\n          label = element.querySelector(':scope > summary > label.title');\n          if (!label) {\n            label = document.createElement('label');\n            label.classList.add('title');\n            summary.insertBefore(label, summary.firstChild);\n          }\n          label.classList.add('last-of-title');\n          label.textContent = element.getAttribute('name');\n        }\n        if (element.hasAttribute('icon')) {\n          let icon = element.querySelector(':scope > summary > cv-icon.title');\n          if (!icon) {\n            icon = document.createElement('cv-icon');\n            icon.classList.add('title');\n            summary.insertBefore(icon, summary.firstChild);\n          }\n          if (!label) {\n            icon.classList.add('last-of-title');\n          }\n          icon.classList.add(element.getAttribute('icon'));\n        }\n      }\n      const empty = !element.querySelector(':scope > *:not(summary)');\n      if (empty) {\n        element.classList.add('empty');\n      } else if (summary) {\n        qx.event.Registration.addListener(summary, 'click', this._toggleOpen, this);\n      }\n    },\n\n    _toggleOpen() {\n      if (this._element.hasAttribute('open')) {\n        this._element.removeAttribute('open');\n      } else {\n        this._element.setAttribute('open', 'true');\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'summary') {\n          let target = this._element.querySelector(':scope > summary > label.value');\n\n          if (!target) {\n            target = document.createElement('label');\n            target.classList.add('value');\n            const summary = this._element.querySelector(':scope > summary');\n            summary.appendChild(target);\n          }\n          target.textContent = ev.detail.state;\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'group',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a new sub-page and adds a corresponding link to the current page.\n *\n * @ignore(InstallTrigger)\n * @author Tobias BrÃ¤utigam\n * @since 2021\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Page', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visibility: {\n      refine: true,\n      init: 'excluded'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _supportsContentVisibility: null,\n    _visibleDisplayMode: null,\n\n    _init() {\n      const browserEngine = qx.core.Environment.get('browser.name');\n      if (browserEngine.includes('firefox') || browserEngine.includes('safari')) {\n        // firefox/safari do not support content-visibility CSS property\n        // see: https://caniuse.com/css-content-visibility\n        this._element.classList.add('no-content-visibility');\n        this._supportsContentVisibility = false;\n      } else {\n        this._supportsContentVisibility = true;\n      }\n    },\n\n    _applyVisibility(value) {\n      switch (value) {\n        case 'visible':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'visible';\n          } else if (this._visibleDisplayMode) {\n            this._element.style.display = this._visibleDisplayMode || 'initial';\n          }\n          break;\n\n        case 'hidden':\n        case 'excluded':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'hidden';\n          } else {\n            this._visibleDisplayMode = getComputedStyle(this._element).getPropertyValue('display');\n            this._element.style.display = 'none';\n          }\n          break;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'page',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'row',\n      class extends HTMLElement {\n        constructor() {\n          super();\n          if (this.hasAttribute('colspan')) {\n            this.classList.add('colspan-' + this.getAttribute('colspan'));\n          }\n          if (this.hasAttribute('rowspan')) {\n            this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n          }\n        }\n      }\n    );\n  }\n});\n","/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a popup that contains arbitrary content and can be opened as an overlay over the current UI.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Popup', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _closeButton: null,\n\n    _init() {\n      super._init();\n      const popup = this._element;\n      const closeable = !popup.hasAttribute('closeable') || popup.getAttribute('closeable') === 'true';\n      if (closeable) {\n        this._closeButton = document.createElement('button');\n        this._closeButton.classList.add('close');\n        const icon = document.createElement('i');\n        icon.classList.add('ri-close-line');\n        this._closeButton.appendChild(icon);\n        popup.insertBefore(this._closeButton, popup.firstChild);\n        this._closeButton.addEventListener('click', () => this.close());\n      }\n      popup.addEventListener('close', ev => {\n        this.close();\n      });\n      if (popup.hasAttribute('title')) {\n        const header = document.createElement('header');\n        popup.insertBefore(header, popup.firstChild);\n        const title = document.createElement('h2');\n        title.textContent = popup.getAttribute('title');\n        header.appendChild(title);\n      }\n      if (popup.hasAttribute('auto-close-timeout')) {\n        const timeoutSeconds = parseInt(popup.getAttribute('auto-close-timeout'));\n\n        if (!isNaN(timeoutSeconds)) {\n          this._autoCloseTimer = new qx.event.Timer(timeoutSeconds * 1000);\n          this._autoCloseTimer.addListener('interval', () => {\n            this._autoCloseTimer.stop();\n            this.close();\n          });\n        } else {\n          this.error('invalid auto-close-timeout value:', popup.getAttribute('auto-close-timeout'));\n        }\n      }\n    },\n\n    open() {\n      const popup = this._element;\n      if (!popup.hasAttribute('open')) {\n        popup.setAttribute('open', '');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.registerModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.start();\n        }\n      }\n    },\n\n    close() {\n      const popup = this._element;\n      if (popup) {\n        popup.removeAttribute('open');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.unregisterModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.stop();\n        }\n        popup.dispatchEvent(new CustomEvent('closed'));\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget.\n     * The popup handles the special address-targets:\n     *  - open: opens the popup when the address value is 'true' or 1 => no auto closing\n     *  - close: closes the popup when the address value is 'false' or 0 => no auto opening\n     *  - open-close: the upper both combined => popup visibility fully dependent on the address value, auto-opening + auto-closing\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'open':\n            if (ev.detail.state) {\n              this.open();\n            }\n            break;\n\n          case 'open-close':\n            if (ev.detail.state) {\n              this.open();\n            } else {\n              this.close();\n            }\n            break;\n\n          case 'close':\n            if (!ev.detail.state) {\n              this.close();\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n            break;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_autoCloseTimer');\n    if (this._closeButton) {\n      this._closeButton.remove();\n      this._closeButton = null;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'popup',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    },\n\n    outdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOutdated'\n    },\n\n    checkOutdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCheckOutdated'\n    },\n\n    outdatedMessage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyOutdatedMessage'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    fullscreenChanged: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n    _dateFormat: null,\n    _checkOutdatedTimerId: null,\n    _lastUpdate: null,\n    _maxAge: null,\n    _hideTimer: null,\n\n    _init() {\n      super._init();\n      this._dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('medium') + ' ' + qx.locale.Date.getTimeFormat('medium'));\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n      if (this._element.querySelector(':scope > label.title')) {\n        this._element.classList.add('has-title');\n      }\n\n      this._hideTimer = new qx.event.Timer(5000);\n      this._hideTimer.addListener('interval', () => {\n        const elem = this._element.querySelector(':scope > .outdated-value');\n        if (elem.style.display !== 'none') {\n          elem.style.display = 'none';\n        }\n        this._hideTimer.stop();\n      });\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    _applyOutdated(value) {\n      let elem = this._element.querySelector(':scope > .outdated');\n      if (value) {\n        this._element.classList.add('outdated');\n        if (!elem) {\n          elem = document.createElement('div');\n          elem.classList.add('outdated');\n          elem.textContent = '!';\n          this._element.insertBefore(elem, this._element.firstElementChild);\n          // capture all clicks by stealing the initial event\n          elem.addEventListener('pointerdown', ev => {\n            ev.stopImmediatePropagation();\n          });\n          elem.addEventListener('click', ev => {\n            // show last updated value for 5 seconds\n            let valueElem = this._element.querySelector(':scope > .outdated-value');\n            if (!valueElem) {\n              valueElem = document.createElement('div');\n              valueElem.classList.add('outdated-value');\n              valueElem.textContent = this.getOutdatedMessage();\n              this._element.appendChild(valueElem);\n              this._element.insertBefore(valueElem, elem.nextElementSibling);\n              // capture all clicks by stealing the initial event\n              valueElem.addEventListener('pointerdown', ev => {\n                ev.stopImmediatePropagation();\n                valueElem.style.display = 'none';\n              });\n            } else {\n              valueElem.style.display = 'block';\n            }\n            this._hideTimer.start();\n          });\n        }\n        elem.style.display = 'block';\n      } else {\n        this._element.classList.remove('outdated');\n        if (elem) {\n          elem.style.display = 'none';\n        }\n      }\n    },\n\n    _applyOutdatedMessage(value) {\n      this._element.setAttribute('title', value);\n      let valueElem = this._element.querySelector(':scope > .outdated-value');\n      if (valueElem) {\n        valueElem.textContent = value;\n      }\n    },\n\n    _applyCheckOutdated(value) {\n      const timer = qx.util.TimerManager.getInstance();\n      if (value) {\n        this._checkOutdatedTimerId = timer.start(this.checkOutdated, 5000, this);\n      } else if (this._checkOutdatedTimerId) {\n        timer.stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    },\n\n    checkOutdated() {\n      if (this._lastUpdate instanceof Date) {\n        const age = Math.floor((Date.now() - this._lastUpdate.getTime()) / 1000);\n        this.setOutdated(age > this._maxAge);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: %1', this._dateFormat.format(this._lastUpdate)));\n      } else if (this._lastUpdate === '-') {\n        this.setOutdated(true);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n      } else {\n        this.error('last-update value must be a Date object, but is of type:', typeof this._lastUpdate, this._lastUpdate);\n        this.resetOutdatedMessage();\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else if (this._headerFooterParent) {\n        const target = this._headerFooterParent;\n        let closeButton = target.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          target.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        target.classList.add('popup');\n        if (this._fullScreenMode) {\n          target.classList.add('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else if (this._headerFooterParent) {\n        this._headerFooterParent.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._headerFooterParent.classList.remove('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        let closeButton = this._headerFooterParent.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          case 'last-update':\n            this._maxAge = ev.detail.targetConfig && ev.detail.targetConfig.length > 0 ? parseInt(ev.detail.targetConfig.shift()) : Number.POSITIVE_INFINITY;\n            this._lastUpdate = ev.detail.state;\n            this.checkOutdated();\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    },\n\n    /*\n    ***********************************************\n      DESTRUCTOR\n    ***********************************************\n    */\n    destruct() {\n      this._disposeObjects('_dateFormat');\n      if (this._checkOutdatedTimerId) {\n        qx.util.TimerManager.getInstance().stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows two half sized widgets as pair.\n */\nqx.Class.define('cv.ui.structure.tile.widgets.WidgetPair', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'widget-pair',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"],"mappings":"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"}