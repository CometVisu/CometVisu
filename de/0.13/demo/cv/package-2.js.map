{"version":3,"names":["i","n","a","c","u","value","e","done","t","Promise","resolve","then","r","o","_asyncToGenerator","this","arguments","apply","_next","asyncGeneratorStep","_throw","_createForOfIteratorHelper","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","f","TypeError","call","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","$$dbClassInfo","dependsOn","usage","defer","require","construct","qx","Bootstrap","executePendingDefers","Class","define","extend","core","Object","type","implement","cv","ui","structure","IController","__P_73_0","bom","Stylesheet","includeFile","util","ResourceManager","getInstance","toUri","replace","Config","forceReload","Date","now","locale","Manager","addListener","_onChangeLocale","statics","PREFIX","__P_73_1","__P_73_2","MAPPING_PARAM_REGEX","register","webComponentName","qxClass","onComponentCreated","element","tagName","toLowerCase","prototype","hasOwnProperty","QxClass","push","log","Logger","error","properties","renderTarget","check","init","document","body","namespace","scrolled","members","__P_73_3","__P_73_4","_templateWidgets","getHtmlStructure","supports","feature","subfeature","initLayout","__P_73_5","location","hash","scrollToPage","substring","getInitialPageId","onHistoryRequest","anchor","pageId","skipHistory","page","querySelector","classList","contains","_step","_iterator","querySelectorAll","remove","err","_step2","_iterator2","add","parentElement","nodeName","undefined","headline","getAttribute","pageTitle","History","addToHistory","event","message","Bus","dispatchByName","warn","parseBackendSettings","xml","parseSettings","config","_this","settings","configSettings","configElement","documentElement","bindClickToWidget","translate","cacheUsed","templates","ajaxRequest","io","request","Xhr","set","accept","cache","addListenerOnce","child","content","getTarget","getResponse","target","getRenderTarget","debug","registerTemplates","xmlns","text","getResponseText","DOMParser","parseFromString","firstElementChild","appendChild","observeVisibility","TemplateEngine","setDomFinished","main","shrinkHeight","canAnimate","addEventListener","style","_step3","_iterator3","elem","getComputedStyle","height","parseInt","paddingTop","paddingBottom","marginTop","marginBottom","isScrolled","scrollTop","setScrolled","enablePullToRefresh","status","getTransport","Request","isSuccessful","send","_applyScrolled","_step4","_iterator4","_step5","_iterator5","preParse","_this2","_regeneratorRuntime","mark","_callee","theme","data","wrap","_context","prev","hasAttribute","window","matchMedia","matches","setAttribute","Model","updateFrom","abrupt","stop","createUI","_step6","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","removeAttribute","unobserve","root","_iterator6","iframe","observe","doc","rememberKeys","useKeys","language","getLanguage","match","exec","search","_trKeys","_i","_arr","_step7","attr","_iterator7","concat","trNameElement","_match","key","translation","textContent","trim","_step8","_iterator8","trTextElement","_key","_translation","doScreenSave","screensave_page","getInitialAddresses","firstPage","id","addMapping","mapping","removeMapping","mapValue","mappingName","store","params","tile","Controller","JSON","parse","replaceAll","addStyling","styling","removeStyling","styleValue","stylingName","parseLabel","scrollContainer","startY","refreshSpinner","createElement","icon","append","eventSource","onMove","ev","touches","clientY","onEnd","_finish","reload","removeEventListener","isTemplateWidget","includes","_this3","_step9","_iterator9","_loop","template","className","lang","String","firstUp","camelCase","Clazz","getByName","widgets","TemplateWidget","customElements","_TemplatedElement","_classCallCheck","_class","_callSuper","_inherits","_createClass","TemplatedElement","updateSentryScope","sentryEnabled","Sentry","setTag","getDesign","cvTestMode","Application","structureController","destruct","removeListener","QxConnector","_HTMLElement","_this4","isSubClassOf","elements","AbstractCustomElement","Error","_instance","setConnected","oldValue","newValue","hasProperty","_wrapNativeSuper","HTMLElement","_QxConnector","_this5","renderAttributeName","_possibleConstructorReturn","controller","getElementById","templateId","_step10","slotAttributes","cloneNode","_iterator10","getAttributeNames","_step11","_iterator11","_loop2","slot","slotName","replacementSelector","slotParentScope","slotContents","attrs","l","attributes","slotContent","newNode","keys","attrName","parentNode","insertBefore","replaced","_i2","children","_step12","_iterator12","_step14","_name","slotAttributeName","targets","targetName","_iterator14","targetValue","startsWith","_step15","_iterator15","split","_entry$split","_entry$split2","_slicedToArray","val","_step13","_iterator13","_i3","_arr2","_toConsumableArray","attrValue","_targetName","endsWith","_step16","parts","_iterator16","_entry$split3","_entry$split4","_key2","_val","innerHTML","_element","connected","_initialized","_applyConnected","_init","_disconnected","getElement","_preMappingHooks","nullable","styleClass","enabled","visibility","widget","inPopup","dateFormats","_writeAddresses","_headerFooterParent","_tileElement","__P_76_0","_checkEnvironment","localName","_getTileParent","parent","setInPopup","hasReadAddress","writeAddresses","address","onStateUpdate","stopPropagation","mobile","desktop","Init","getApplication","__P_76_1","isMobile","appendToHeader","align","header","targetParent","getHeader","selector","appendToFooter","footer","getFooter","registerPreMappingHook","callback","context","some","unregisterPreMappingHook","filter","_applyValue","isConnected","mappedValue","hookEntry","format","components","AbstractComponent","DateFormat","sprintf","toLocaleString","_updateValue","setStyleClass","_applyStyleClass","classes","_applyEnabled","blocker","preventDefault","display","_applyVisibility","isWidget","opacity","active","detail","addressValue","state","setEnabled","setVisibility","targetConfig","setValue","refine","Mixin","fullscreen","__P_74_1","__P_74_2","__P_74_3","getUuid","Uuid","createUuidV4","getPopupAddress","__P_74_0","sendValue","onUpdate","_initFullscreenSwitch","button","_buttonFactory","toggleFullscreen","tileAddress","tileWidget","setFullscreen","_button$classList","MFullscreen","_onPointerDownBounded","_onPointerDown","bind","_openPopupChildBounded","_openPopupChild","openedPopups","events","closed","_childPopup","_initPopupChild","popup","last","open","_closePopupChild","close","registerModalPopup","MPopup","unregisterModalPopup","index","indexOf","splice","Tree","isChildOf","stopImmediatePropagation","Timer","once","hasMixin","MVisibility","__P_75_0","refresh","_refreshTimer","_lastRefresh","_applyRefresh","restartWith","__P_75_1","isVisible","start","getData","getInterval","_disposeObjects","MRefresh","_observeVisibility","setVisible","visible","_observer","ResizeObserver","fireDataEvent","resized","resizeTarget","_applyResizeTarget","oldElement","disconnect","MResize","_parseInt","_parseFloat","parseFloat","_parseBoolean","MStringTransforms","subscribe","_update","_list","list","listItems","activePage","startPage","currentPage","li","_createListItem","unshift","replaceChildren","unsubscribe","Breadcrumbs","__P_77_0","Map","on","onClass","offClass","onValue","offValue","progress","transform","__P_77_1","__P_77_2","_triggerOnValue","intVal","Number","isNaN","setType","setName","setProgress","setOnValue","setOffValue","level","addr","click","onClicked","pointerup","onPointerUp","pointerdown","onPointerDown","getOwnPropertyNames","eventName","triggerAddresses","hasDown","hasUp","getOnValue","setOn","_initProgress","Math","PI","svg","createElementNS","circle","Button","superclass","getType","_applyOn","isOn","getOffValue","setId","updateValue","getOnClass","getOffClass","_applyProgress","valueElement","_applyName","source","Address","addressElement","createRipple","relPath","baseVersion","Version","VERSION","join","CustomEvent","wa","simulatedValue","dispatchEvent","currentTarget","container","diameter","max","clientWidth","clientHeight","radius","width","x","clientX","offsetLeft","y","offsetTop","offsetParent","left","top","ripple","__P_93_0","__P_93_1","_stateUpdateTarget","getAddress","model","backendName","addAddress","mode","getState","fireStateUpdate","addUpdateListener","allowDuplicates","encoding","encodedValue","Transform","encodeBusAndRaw","ignoreError","variantInfo","qos","client","BackendConnections","getClient","raw","lastSentValue","delay","write","bus","transformedState","decode","shift","bubbles","cancelable","variant","isRead","isWrite","getValue","defineProperty","asyncIterator","toStringTag","enumerable","configurable","writable","Generator","create","Context","makeInvokeMethod","tryCatch","arg","h","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","__await","callInvokeWithMethodAndArg","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","setPrototypeOf","__proto__","awrap","async","reverse","pop","charAt","rval","handle","complete","finish","catch","delegateYield","include","ChartCounter","DEFAULT_ASPECT_RATIO","JS_LOADED","_ref","reject","timer","counter","d3","ScriptLoader","includeScript","t0","_x","_x2","formatDefaultLocale","decimal","getDecimalSeparator","thousands","getGroupSeparator","grouping","currency","timeFormatDefaultLocale","dateTime","date","time","periods","getAmMarker","getPmMarker","days","getDayNames","map","shortDays","months","getMonthNames","shortMonths","CONFIG","currentSeries","currentPeriod","startTime","endTime","_id","_downloadedImage","_url","_headers","_request","_width","_height","_loaded","_dataSetConfigs","_initializing","_navigationEnabled","__P_78_1","__P_78_2","__P_78_3","__P_78_4","__P_78_5","__P_78_6","__P_78_7","_dot","_svg","_tooltip","_titleString","__P_78_8","__P_78_9","_chartConf","_callee2","inBackground","title","span","seriesSelection","_span","option","_s","noToolTips","timeFormat","formatString","datasetSources","_context2","Chart","setCurrentSeries","getCurrentSeries","tr","_onSeriesPrev","_seriesToShort","_onSeriesChange","getPropertyValue","disabled","_onSeriesNext","_onRendered","setRefresh","select","_onPointerEntered","_onPointerMoved","_onPointerLeft","targetTouches","pathRect","getBoundingClientRect","passive","multiTimeFormat","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","z","color","curve","curveLinear","marginRight","marginLeft","aspectRatio","xType","scaleTime","xFormat","yType","scaleLinear","yFormat","yLabel","strokeLinecap","strokeLinejoin","strokeWidth","strokeOpacity","mixBlendMode","showArea","gradient","showXAxis","showYAxis","xPadding","__P_78_10","_onLocaleChanged","targetDataset","ts","aggregationInterval","mins","round","_renderChart","src","setCurrentPeriod","getCurrentPeriod","resetCurrentPeriod","__P_78_0","_loadData","_refreshData","nextButton","getStartTime","getEndTime","_applyCurrentSeries","series","currentSelection","alreadySelected","newSelection","end","periodStart","interval","setHours","setDate","setTime","getTime","setMonth","setFullYear","getFullYear","startTs","endTs","setStartTime","setEndTime","url","dataSets","line","promises","dataSet","chartType","item","part","toUpperCase","subType","timeseries","FluxSource","isInline","fluxQuery","ConfigCache","hashCode","setQueryTemplate","OpenhabPersistenceSource","RRDSource","DemoSource","Plugin","proxy","options","ttl","getRefresh","getRequestConfig","assign","fetch","fetchData","processResponse","_onStatusError","Fetch","cachedFetch","all","responses","_onSuccess","chartData","tsdata","_step6$value","overflow","requestAnimationFrame","setTimeout","retries","clearTimeout","_this$_getSize","_getSize","_this$_getSize2","padding","containerWidth","offsetWidth","containerHeight","offsetHeight","formatsArray","found","fmt","multiFormat","notifications","Router","dispatchMessage","severity","stringify","_getSvgElement","empty","single","X","Y","Z","O","T","_this6","_helpers","xDomain","extent","minVal","maxVal","min","yDomain","zDomain","InternSet","I","range","has","maxValue","toFixed","xTicks","yTicks","additionalXRangePadding","xRange","yRange","xAxis","axisBottom","ticks","tickSizeOuter","tickFormat","yAxis","axisLeft","showGrid","xGrid","tickSize","yGrid","yAxisElement","label","xBar","xzScale","lineGroups","areaGroups","barGroups","stackedBarGroups","lineFunctions","areaFunctions","idx","curveName","curveFunction","curveStep","curveNatural","minY","area","y0","y1","scaleBand","xz","size","lineContainer","fill","stroke","areaContainer","__P_78_11","barContainer","domain","bandwidth","_loop3","_loop4","_loop5","_loop6","targetContainer","_data","lineElem","x1","x2","transition","duration","ease","easeLinear","selectAll","_ref2","_ref3","k","enter","linear","gradId","_lg","yMin","__P_78_12","_this7","_loop7","_step11$value","NaN","get","sum","di","formatAttribute","y2","_this7$_chartConf$x$d","_this7$_chartConf$x$d2","xMin","xMax","_this7$_chartConf$y$d","_this7$_chartConf$y$d2","yMax","valueElem","_this8","__P_78_13","relatedTarget","raise","node","dispatch","center","xm","ym","_d3$pointer","pointer","_d3$pointer2","_this$_helpers","_this$_chartConf","least","hypot","scaleFactorX","scaleFactorY","xOffset","cursorOffset","pointerType","timeString","lineTitle","property","chartTitle","_shownDateRange","getDateTimeFormat","trc","getWeekNumber","yearStart","ceil","throttleInterval","CC_COUNTER","__P_79_0","setThrottleInterval","addresses","_mode","parser","pure","ColorChooser","makeAddressListFn","Color","path","props","$$type","layout","colspan","controls","getThrottleInterval","parseAttributes","_onColorChanged","getDomString","composedPath","_onDomReady","setResizeTarget","invalidateScreensize","getColor","rgb","getComponent","__P_79_1","b","padStart","alpha","backgroundColor","_cells","_isLayoutValid","debouncedLayoutAll","module","Function","debounce","_layoutAll","rows","columns","outerPadding","spacing","cellWidth","cellHeight","viewBox","__P_91_0","_invalidateLayout","cellId","position","getCells","getRows","getColumns","row","column","_this$getNextFreeCell","getNextFreeCell","_this$getNextFreeCell2","_Object$keys","getOuterPadding","getSpacing","getCellWidth","getCellHeight","_r","_c","_r2","_c2","floor","MSvgGrid","pan","pagination","centerX","centerY","fullscreenViewBox","SVG","_dragPoint","_startPoint","_expiredTouchStart","_viewBoxBinding","_lastBBox","_additionalViewBoxUpdate","_ready","getSvg","Flow","_updateDimensions","layoutEvent","_updateCellSize","getFullscreenViewBox","removeBinding","setViewBox","resetViewBox","_updateViewBox","getPan","_applyPan","_applyPagination","getPagination","house","_center","_applyCenterX","__P_80_0","_applyCenterY","total","skip","__P_80_1","__P_80_2","rowElements","sorted","sort","columnElements","_drag","CTM","getScreenCTM","inverse","matrixTransform","baseVal","_cancelEvent","_startDrag","drag","_endDrag","_touchStart","timeStamp","resetDrag","draggable","createSVGPoint","startDrag","endDrag","touchStart","showV","addButtons","removeButtons","_addButtons","dir","_removeButtons","_dir","_button","_updatePaginationButtons","_enablePaginationButton","_paginateLeft","_paginateRight","_paginateTop","_paginateBottom","Registration","_this$getViewBox$spli","getViewBox","_this$getViewBox$spli2","_i4","_paginate","direction","_this$getViewBox$spli3","_this$getViewBox$spli4","contentBoxSize","SVGElement","contentRect","isFullscreen","minSize","screen","availHeight","availWidth","setOuterPadding","setSpacing","bbox","getBBox","resetOuterPadding","resetSpacing","totalOuterPadding","visibleColumns","visibleRows","gridViewBox","firstColumn","lastColumn","firstRow","lastRow","gridParts","col","usedColumns","usedRows","_elem","visibleWidth","visibleHeight","heightDiff","widthDiff","box","changed","setCellWidth","setCellHeight","_stringToBool","_Class","_defineProperty","_idRegex","__P_81_0","_transformId","Icon","it","_applyId","_applyColor","img","base","origin","pathname","URL","useProxy","rest","Client","getBaseUrl","searchParams","btoa","_loadImage","XMLHttpRequest","responseType","setRequestHeader","onreadystatechange","readyState","DONE","createObjectURL","response","onload","revokeObjectURL","random","Image","_target","_timer","_model","_getModel","_filterModel","_sortModel","_limit","_modelInstance","refreshOnUpdate","readAddresses","evCopy","sortBy","sortModifier","right","leftVal","rightVal","localeCompare","proxyParam","res","listmodel","Registry","modelInstance","_entry$split$map","_entry$split$map2","getModel","script","innerText","templateRoot","collectData","attrib","$$model","action","handleEvent","List","_callee3","newModel","whenEmptyTemplate","emptyModel","emptyElem","itemTemplate","_context3","t1","removeChild","html","_content$split","_content$split2","_content$split3","_name2","code","_val2","func","_elem$getAttribute$sp","_elem$getAttribute$sp2","_initElement","ListItem","fireEvent","appearance","depth","domReady","showLabels","_applyAppearance","_applyDepth","isDomReady","_generateMenu","_applyShowLabels","_onDomAppended","setDomReady","_applyModel","rootList","ham","href","onclick","_onHamburgerMenu","_onPageChange","_onSwipe","_icon","setShowLabels","setModel","__P_82_0","_rootList","pageName","pageIcon","isShowLabels","createTextNode","onClick","toggleClass","toggle","_closeAll","getDirection","current","previousElementSibling","except","_openDetail","first","_closeDetail","parentList","currentLevel","pages","getDepth","details","summary","_pageIcon","expander","subList","pageElement","link","activeName","Menu","_currentState","MenuAction","hasAddress","PL_COUNTER","__P_83_0","pluginName","baseName","scriptLoader","loadPluginPart","plugins","isFinished","Part","getParts","load","_applyVisible","__P_84_0","__P_84_1","__P_84_2","__P_84_3","__P_84_4","__P_84_5","__P_84_6","__P_84_7","__P_84_8","_queuedFitText","RoundProgress","hasFixedRadius","normalizedRadius","setMin","setMax","ns","bg","bar","_bg","_bar","_bg2","isPropertyInitialized","getProgress","__P_84_9","angle","angleRad","cos","sin","valueInRange","getMin","percent","getMax","_fitText","__P_84_10","getContext","compStyle","font","metrics","measureText","factor","fontSize","_applyText","show","__P_85_0","__P_85_1","__P_85_2","Select","_toggleOptions","_sendSelection","predictive","getShow","childNodes","_child","nodeType","Node","TEXT_NODE","ELEMENT_NODE","_applyShow","stepWidth","showValue","__P_86_0","__P_86_1","Slider","_applyThrottleInterval","input","oninput","setStepWidth","setShowValue","_applyShowValue","decreaseElement","onDecrease","increaseElement","onIncrease","throttle","onInput","trailing","abort","_applyMin","_applyMax","_applyStepWidth","valueLabel","firstChild","isShowValue","__P_86_2","getStepWidth","Spinner","setMode","decrease","decreaseIcon","increase","increaseIcon","getMode","__P_87_0","_queuedOverflowDetection","_debouncedDetectOverflow","Value","_detectOverflow","__P_88_0","setText","DefaultSize","rowspan","_parentGridLayout","_findParentGridLayout","parentInstance","hasOwnMixin","_applyToSvg","oldVal","_updateWidth","getColspan","setWidth","_updateHeight","getRowspan","setHeight","_applyPosition","getRow","getColumn","_applySize","_applyTitle","_applyTitleOverride","MGraphicsElement","iconColor","scale","offsetY","offsetX","_iconSize","_iconPosition","_debouncedUpdateRSize","getParentSvg","ownerSVGElement","TextValue","getScale","_updateSize","group","_applyIcon","getIcon","_centerY","_centerX","getTitle","newScale","setScale","_applyScale","setOffsetY","getHeight","setOffsetX","getWidth","_applyOffsetY","_applyOffsetX","_text","_applyIconColor","iconName","fo","textAlign","getIconColor","wAttr","foregroundColor","_noValue","hasNoValue","preMappingHook","abs","_applyForegroundColor","energy","MEntity","typeSettings","pv","battery","grid","charger","heatpump","consumer","unit","_autoFormat","_applyType","EnergyEntity","attribute","_applyUnit","getUnit","_applyDirection","setColor","_arrow","__P_89_0","resetColor","arrow","getOffsetY","_connections","_inverseConnections","connectTo","connectFrom","connectionPoints","useConnectionSum","_connectorTo","_connectorFrom","_useConnectionsSumAsValue","addConnection","other","getUseConnectionSum","_updateConnectionsSum","addInverseConnection","removeConnection","removeInverseConnection","_applyUseConnectionSum","_other","_updateDirection","_connectors","connector","setShowDirection","_applyConnectTo","targetId","setTarget","_initConnection","_applyConnectionPoints","getConnectionPoints","_applyConnectFrom","sourceId","setSource","Connector","PowerEntity","connectors","_connectors2","sourceConnectionPoint","targetConnectionPoint","_value$split","_value$split2","getSource","clear","MConnectable","_updatePosition","__P_90_0","_debouncedUpdatePosition","_sourceObserver","MutationObserver","_onMutation","_targetObserver","C","validate","showDirection","inverted","_path","_applySource","_applyTarget","sourceEntity","targetEntity","sourceRoot","targetRoot","setRoot","appendC","records","mutation","attributeName","retried","sourceCoord","Svg","targetCoord","startX","endX","endY","getSourceConnectionPoint","getTargetConnectionPoint","dx","cx","dy","cy","sqrt","pow","rsl","getRadius","rtl","yS","yT","xS","xT","getId","setInverted","drawPath","_applyRoot","oldRoot","_initArrowMarkers","_applyShowDirection","getShowDirection","markerId","__P_90_1","isInverted","arrowId","getStyleClass","getRoot","newMarker","errorMessage","_validateConnectionPoint","ValidationError","defs","arrowPath","use","showProgress","amount","__P_92_0","_radius","_iconOffset","_fixedRadius","RoundValue","getStroke","_debouncedUpdateRadius","_updateRadius","_applyRadius","setShowProgress","sumGroup","setAmount","newRadius","_applyAmount","updateIconPosition","__P_92_1","__P_92_2","halfSize","iconContainer","_updateNormalizedRadius","_applyStroke","_applyShowProgress","sizeReference","setUseConnectionSum","getConnectTo","getConnectFrom","AddressGroup","debouncedCalc","_updateCalculation","changeValue","operator","valid","nonZeroValues","_values","__P_94_0","resetValue","_applyValid","setNonZeroValues","getOperator","reduce","accumulator","currentValue","isFinite","setValid","getFactor","isRound","__P_95_0","isRegistered","addClassLoadedListener","uri","uriString","credentials","username","password","backendUrlConfigKey","backendUrl","server","hasClient","configuredIn","notification","topic","unique","deletable","addBackendClient","_client","update","setResourcePath","login","setDefaultBackendName","doSubscribe","_step2$value","startInitialRequest","isDomFinished","resetDefaultBackendName","terminate","removeClient","dispose","Backend","loaderElement","loadXml","htmlContent","handleError","getUrl","textStatus","additionalErrorInfo","actions","Loader","__P_96_0","Mapping","emptyWhenNoMatch","exactMatch","_convert","formula","_formula","defaultValue","isDefaultValue","rangeMin","rangeMax","POSITIVE_INFINITY","floatValue","stateConfig","NotificationCenter","addressContainer","skipInitial","valueMapping","addressMapping","_onStateUpdate","iconClasses","titleElem","titleTemplate","messageElem","messageTemplate","condition","addressConfig","retain","registerStateUpdateHandler","initial","_address$split","_address$split2","router","enableStateUpdateHandler","changeStateUpdateHandlerSeverity","StateNotification","Styling","ref","Dynamic","setRef","_applyRef","old","lastChild","remotes","clonedNode","modifyTarget","_ref$getAttribute$spl","_ref$getAttribute$spl2","Group","_toggleOpen","_supportsContentVisibility","_visibleDisplayMode","browserEngine","Environment","contentVisibility","_class2","Page","_closeButton","Popup","timeoutSeconds","_autoCloseTimer","backgroundImage","outdated","checkOutdated","outdatedMessage","fullscreenChanged","_fullScreenMode","_dateFormat","_checkOutdatedTimerId","_lastUpdate","_maxAge","_hideTimer","Tile","setWidget","getDateFormat","getTimeFormat","setBackgroundImage","resetPopup","_this$_element$getAtt","_applyBackgroundImage","overlay","_applyOutdated","getOutdatedMessage","nextElementSibling","_applyOutdatedMessage","_applyCheckOutdated","TimerManager","setOutdated","setOutdatedMessage","age","resetOutdatedMessage","closeButton","setPopup","keepState","_applyPopup","restart","_loadContent","Web","WidgetPair"],"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AbstractCustomElement.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/AbstractComponent.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/TemplateWidget.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MFullscreen.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MPopup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MRefresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MVisibility.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MResize.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MStringTransforms.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Breadcrumbs.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Button.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Address.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Color.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/MSvgGrid.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Flow.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Icon.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/List.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/ListItem.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/MenuAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/RoundProgress.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Select.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Slider.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Spinner.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Value.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/MGraphicsElement.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/TextValue.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/MEntity.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/EnergyEntity.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/MConnectable.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/Connector.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/RoundValue.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/PowerEntity.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AddressGroup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Backend.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Loader.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Mapping.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/StateNotification.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Styling.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Dynamic.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Popup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Web.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/WidgetPair.js"],"sourcesContent":["/* Controller.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Controller for the 'tile' structure.\n *\n * This structure is based on web-components and does not need a parser to work.\n * The config file is directly attached to the document body.\n * The widgets in this structure register a customElement and the browser automatically creates instances\n * of this widgets once the customElement is added to the body.\n *\n * The basic structure is a set of pages that contain a list of tiles.\n * Each tile contains a grid of 3 rows and 3 columns. The components can be added to a cell of that grid\n * but also can spread over more than one cell by using row-/column spanning.\n *\n * This structure provides some tiles with a pre-defined content, e.g. a <cv-switch> which\n * contains of a button in the middle of the tile and a primary- and secondary label in the third row.\n *\n * Those pre-defined tiles are provided by a <template> (@see https://developer.mozilla.org/de/docs/Web/HTML/Element/template)\n * User are able to define own templates for re-usable tiles if they need one that this structure does not provide.\n *\n * @asset(structures/tile/*)\n * @author Tobias Bräutigam\n * @since 2022\n * @ignore(IntersectionObserver)\n */\nqx.Class.define('cv.ui.structure.tile.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__HTML_STRUCT = '';\n    qx.bom.Stylesheet.includeFile(\n      qx.util.ResourceManager.getInstance().toUri('designs/tile-globals.scss').replace('.scss', '.css') +\n        (cv.Config.forceReload === true ? '?' + Date.now() : '')\n    );\n    qx.locale.Manager.getInstance().addListener('changeLocale', this._onChangeLocale, this);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    // prefix for all custom components uses/provided by this structure\n    PREFIX: 'cv-',\n    __MAP: {},\n    __I: {},\n\n    MAPPING_PARAM_REGEX: /^(.+)\\(([^)]+)\\)$/,\n\n    register(webComponentName, qxClass) {\n      this.__MAP[webComponentName] = qxClass;\n    },\n\n    onComponentCreated(element) {\n      const name = element.tagName.toLowerCase();\n      if (Object.prototype.hasOwnProperty.call(this, name)) {\n        const QxClass = this.__MAP[name];\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          this.__I[name] = [];\n        }\n        this.__I[name].push(new QxClass(element));\n      } else {\n        qx.log.Logger.error(this, 'no QxClass registered for custom element ' + name);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    /**\n     * The target this structure should be inserted into\n     */\n    renderTarget: {\n      check: 'Element',\n      init: document.body\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    },\n\n    scrolled: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyScrolled'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __HTML_STRUCT: null,\n    __mappings: null,\n    __stylings: null,\n    _templateWidgets: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    supports(feature, subfeature) {\n      return false;\n    },\n\n    initLayout() {},\n\n    __gotoStartPage() {\n      // open first page\n      if (!document.location.hash) {\n        this.scrollToPage(this.getInitialPageId());\n      } else {\n        this.scrollToPage(document.location.hash.substring(1));\n      }\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor);\n      }\n    },\n\n    scrollToPage(pageId, skipHistory) {\n      if (!pageId) {\n        return;\n      }\n      const page = document.querySelector('cv-page#' + pageId);\n      if (page) {\n        if (!page.classList.contains('active')) {\n          for (let oldPage of document.querySelectorAll('cv-page.active')) {\n            oldPage.classList.remove('active');\n          }\n          for (let oldPage of document.querySelectorAll('cv-page.sub-active')) {\n            oldPage.classList.remove('sub-active');\n          }\n          page.classList.add('active');\n          // mark parent pages that there is an active subpage\n          let parentElement = page.parentElement;\n          while (parentElement && parentElement.nodeName.toLowerCase() !== 'main') {\n            if (parentElement.nodeName.toLowerCase() === 'cv-page') {\n              parentElement.classList.add('sub-active');\n            }\n            parentElement = parentElement.parentElement;\n          }\n\n          if (skipHistory === undefined) {\n            const headline = page.getAttribute('name');\n            let pageTitle = 'CometVisu';\n            if (headline) {\n              pageTitle = headline + ' - ' + pageTitle;\n            }\n            qx.bom.History.getInstance().addToHistory(pageId, pageTitle);\n          }\n          qx.event.message.Bus.dispatchByName('cv.ui.structure.tile.currentPage', page);\n        }\n      } else {\n        this.warn('no page with id', pageId, 'found');\n      }\n    },\n\n    // not needed, backend parse/init themselves\n    parseBackendSettings(xml) {\n/*      if (xml.querySelectorAll('cv-backend').length === 0) {\n        // no backends defined, use the default one;\n        const client = cv.io.BackendConnections.initBackendClient();\n        client.login(true, cv.Config.configSettings.credentials, () => {\n          this.debug('logged in');\n          cv.io.BackendConnections.startInitialRequests();\n        });\n      }*/\n      return false;\n    },\n\n    /**\n     * Parses structure specific settings\n     * @param config {XMLDocument} loaded config\n     */\n    parseSettings(config) {\n      document.body.classList.add('loading-structure');\n      const settings = cv.Config.configSettings;\n      const configElement = config.documentElement;\n      settings.bindClickToWidget = configElement.getAttribute('bind_click_to_widget') === 'true';\n      this.translate(config, true);\n\n      if (!cv.Config.cacheUsed) {\n        const templates = qx.util.ResourceManager.getInstance().toUri('structures/tile/templates.xml');\n\n        const ajaxRequest = new qx.io.request.Xhr(templates);\n        ajaxRequest.set({\n          accept: 'application/xml',\n          cache: !cv.Config.forceReload\n        });\n\n        ajaxRequest.addListenerOnce('success', e => {\n          let content = e.getTarget().getResponse();\n          const target = this.getRenderTarget();\n          this.debug('creating pages');\n          // register custom elements for templates in this document\n          this.registerTemplates(content);\n          let child;\n          // we need the documents to be in HTML namespace\n          if (!content.documentElement.xmlns) {\n            let text = e.getTarget().getResponseText();\n            text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n            const parser = new DOMParser();\n            content = parser.parseFromString(text, 'text/xml');\n          }\n          while ((child = content.documentElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n\n          while ((child = configElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n          document.body.classList.remove('loading-structure');\n          this.debug('finalizing');\n          this.observeVisibility();\n          qx.event.message.Bus.dispatchByName('setup.dom.append');\n          this.debug('pages created');\n          this.__gotoStartPage();\n          this.debug('setup.dom.finished');\n          qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n          cv.TemplateEngine.getInstance().setDomFinished(true);\n\n          if (qx.core.Environment.get('qx.debug')) {\n            cv.report.Replay.start();\n          }\n\n          const main = document.body.querySelector(':scope > main');\n          if (main) {\n            let shrinkHeight = -1;\n            let canAnimate = false;\n            main.addEventListener('scroll', () => {\n              // we need to know the space that we gain in height, when the shrinked elements are not shown\n              // and must not start the effect before we reach that threshold, otherwise\n              // main.scrollTop would go back to 0 because we have more height available and do not have to scroll+\n              // anymore, that would lead to an endless toggling this effect\n              // so long story short: avoid that applying this effect would lead to: main.scrollTop === 0\n              if (shrinkHeight < 0) {\n                shrinkHeight = 1;\n                let style;\n                for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n                  style = getComputedStyle(elem);\n                  if (!canAnimate) {\n                    // we need at least one element that has a defined height, to get a working animation\n                    canAnimate = !!elem.style.height;\n                  }\n                  shrinkHeight += parseInt(style.height) +\n                    parseInt(style.paddingTop) +\n                    parseInt(style.paddingBottom) +\n                    parseInt(style.marginTop) +\n                    parseInt(style.marginBottom);\n                }\n              }\n              if (!this.isScrolled() && main.scrollTop > shrinkHeight) {\n                this.setScrolled(true);\n                if (!canAnimate) {\n                  main.scrollTop -= shrinkHeight;\n                }\n              } else if (this.isScrolled() && main.scrollTop === 0) {\n                this.setScrolled(false);\n                shrinkHeight = -1;\n              }\n            });\n          }\n\n          this.enablePullToRefresh();\n        });\n        ajaxRequest.addListener('statusError', e => {\n          const status = e.getTarget().getTransport().status;\n          if (!qx.util.Request.isSuccessful(status)) {\n            this.error('filenotfound', templates);\n          }\n          document.body.classList.remove('loading-structure');\n        });\n\n        ajaxRequest.send();\n      }\n    },\n\n    _applyScrolled(value) {\n      if (value) {\n        for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n          elem.classList.add('scrolled');\n        }\n      } else {\n        for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n          elem.classList.remove('scrolled');\n        }\n      }\n    },\n\n    /**\n     * Pre parsing hook, do everything here that is needed before the real parsing process can start\n     * @param xml {XMLDocument}\n     */\n    async preParse(xml) {\n      if (xml.documentElement.hasAttribute('theme')) {\n        let theme = xml.documentElement.getAttribute('theme');\n        const data = {};\n        if (theme === 'system') {\n          if (window.matchMedia) {\n            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n            document.documentElement.setAttribute('data-theme', theme);\n            data['theme'] = theme;\n            cv.data.Model.getInstance().updateFrom('system', data);\n            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');\n\n              data['theme'] = e.matches ? 'dark' : 'light';\n              cv.data.Model.getInstance().updateFrom('system', data);\n            });\n          } else {\n            this.error('system theme detection not possible in this browser');\n          }\n        } else {\n          document.documentElement.setAttribute('data-theme', theme);\n          data['theme'] = theme;\n          cv.data.Model.getInstance().updateFrom('system', data);\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param config {Object} loaded config file usually an XMLDocument but other structures might use different formats\n     */\n    createUI(config) {\n    },\n\n    observeVisibility() {\n      // find all pages with an iframe with attribute \"data-src\" and observe its parent page\n      const observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting && entry.target.hasAttribute('data-src')) {\n            entry.target.setAttribute('src', entry.target.getAttribute('data-src'));\n            entry.target.removeAttribute('data-src');\n            observer.unobserve(entry.target);\n          }\n        }, {\n          root: document.querySelector('body > main')\n        });\n      });\n      for (const iframe of document.querySelectorAll('iframe[data-src], img[data-src]')) {\n        observer.observe(iframe);\n      }\n    },\n\n    translate(doc, rememberKeys, useKeys) {\n      let language = qx.locale.Manager.getInstance().getLanguage();\n      let match = /locale=([a-z]{2,3})/.exec(document.location.search);\n      if (match) {\n        language = match[1];\n      }\n      if (rememberKeys) {\n        this._trKeys = {};\n      }\n      for (const attr of ['name', 'label', 'title', 'format']) {\n        for (const trNameElement of doc.querySelectorAll(`*[${attr}^=\"tr(\"]`)) {\n          const match = /^tr\\('([^']+)'\\)$/.exec(trNameElement.getAttribute(attr));\n\n          if (!match && !useKeys) {\n            this.warn('attribute content no valid translation string', trNameElement.getAttribute(attr));\n\n            continue;\n          }\n          const key = useKeys ? this._trKeys[trNameElement.getAttribute(attr)] : match[1];\n          const translation = doc.querySelector(\n            `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n          );\n\n          if (translation) {\n            if (rememberKeys) {\n              this._trKeys[translation.textContent.trim()] = key;\n            }\n            trNameElement.setAttribute(attr, translation.textContent.trim());\n          } else {\n            trNameElement.setAttribute(attr, key);\n            this.warn(`[${language}] no translation found for: \"${key}\"`);\n          }\n        }\n      }\n      for (const trTextElement of doc.querySelectorAll('*[tr=\"true\"]')) {\n        const key = useKeys ? this._trKeys[trTextElement.textContent.trim()] : trTextElement.textContent.trim();\n        const translation = doc.querySelector(\n          `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n        );\n\n        if (translation) {\n          if (rememberKeys) {\n            this._trKeys[translation.textContent.trim()] = key;\n          }\n          trTextElement.textContent = translation.textContent.trim();\n        } else {\n          trTextElement.textContent = key;\n          this.warn(`[${language}] no translation found for: \"${key}\"`);\n        }\n      }\n    },\n\n    /**\n     * Handle fired event from screensaver\n     * @return {Array<string>} Array with addresses\n     */\n    doScreenSave() {\n      if (cv.Config.configSettings.screensave_page) {\n        this.scrollToPage(cv.Config.configSettings.screensave_page);\n      }\n    },\n\n    /**\n     * Return the addresses needed to update all states on the initially loaded page\n     */\n    getInitialAddresses() {\n      return [];\n    },\n\n    /**\n     * Returns the widget id of the page item initially loaded\n     * @returns {String} widget path like 'id_'...\n     */\n    getInitialPageId() {\n      const firstPage = document.querySelector('cv-page');\n      return firstPage ? firstPage.id : '';\n    },\n\n    /**\n     *\n     * @param name {String} mapping name\n     * @param mapping {cv.ui.structure.tile.elements.Mapping}\n     */\n    addMapping(name, mapping) {\n      if (!this.__mappings) {\n        this.__mappings = {};\n      }\n      this.__mappings[name] = mapping;\n    },\n\n    removeMapping(name) {\n      if (this.__mappings) {\n        delete this.__mappings[name];\n      }\n    },\n\n    mapValue(mappingName, value, store) {\n      let match;\n      let params = [];\n      if ((match = cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(mappingName)) !== null) {\n        // this mapping name contains a parameter\n        try {\n          params = JSON.parse(`[${match[2].replaceAll('\\'', '\"')}]`);\n        } catch (e) {\n          this.error('error parsing parameters from ' + mappingName);\n        }\n        mappingName = match[1];\n      }\n      if (this.__mappings && Object.prototype.hasOwnProperty.call(this.__mappings, mappingName)) {\n        return this.__mappings[mappingName].mapValue(value, store, params);\n      }\n      return value;\n    },\n\n    /**\n     * @param name {String} styling name\n     * @param styling {cv.ui.structure.tile.elements.Styling}\n     */\n    addStyling(name, styling) {\n      if (!this.__stylings) {\n        this.__stylings = {};\n      }\n      this.__stylings[name] = styling;\n    },\n\n    removeStyling(name) {\n      if (this.__stylings) {\n        delete this.__stylings[name];\n      }\n    },\n\n    styleValue(stylingName, value, store) {\n      if (this.__stylings && Object.prototype.hasOwnProperty.call(this.__stylings, stylingName)) {\n        return this.__stylings[stylingName].mapValue(value, store);\n      }\n      return '';\n    },\n\n    // for compatibility with pure controller\n    parseLabel() {\n      return '';\n    },\n\n    _onChangeLocale() {\n      this.translate(document.body, false, true);\n    },\n\n    enablePullToRefresh() {\n      let startY = 0;\n      let scrollContainer;\n\n      const refreshSpinner = document.createElement('div');\n      refreshSpinner.classList.add('pull-to-refresh');\n      const icon = document.createElement('i');\n      icon.classList.add('ri-loader-4-fill');\n      refreshSpinner.append(icon);\n      document.body.append(refreshSpinner);\n      const eventSource = document;\n\n      const onMove = ev => {\n        const touchY = ev.touches[0].clientY;\n        const touchDiff = touchY - startY;\n        if (touchDiff > 60 && scrollContainer.scrollTop === 0) {\n          refreshSpinner.classList.add('visible');\n        } else {\n          refreshSpinner.classList.remove('visible');\n        }\n      };\n      const onEnd = () => {\n        finish();\n        if (refreshSpinner.classList.contains('visible')) {\n          refreshSpinner.classList.remove('visible');\n          location.reload();\n        }\n      };\n      const finish = () => {\n        eventSource.removeEventListener('touchmove', onMove);\n        eventSource.removeEventListener('touchend', onEnd);\n        eventSource.removeEventListener('touchcancel', finish);\n      };\n      eventSource.addEventListener('touchstart', ev => {\n        startY = ev.touches[0].clientY;\n        scrollContainer = document.querySelector('main');\n        if (scrollContainer && scrollContainer.scrollTop === 0) {\n          eventSource.addEventListener('touchmove', onMove);\n          eventSource.addEventListener('touchend', onEnd);\n          eventSource.addEventListener('touchcancel', finish);\n        }\n      });\n    },\n\n    isTemplateWidget(name) {\n      return this._templateWidgets.includes(name);\n    },\n\n    /**\n     * Registers customElements for all templates in the given xml that are direct children of a <templates structure=\"tile\"> element\n     * @param xml {XMLDocument}\n     */\n    registerTemplates(xml) {\n      if (this._templateWidgets === null) {\n        this._templateWidgets = [];\n      }\n      for (const template of xml.querySelectorAll('templates[structure=\\'tile\\'] > template')) {\n        const className = qx.lang.String.firstUp(qx.lang.String.camelCase(template.getAttribute('id')));\n        let Clazz = qx.Class.getByName(`cv.ui.structure.tile.widgets.${className}`);\n        if (!Clazz) {\n          Clazz = cv.ui.structure.tile.widgets.TemplateWidget;\n        }\n        customElements.define(\n          cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'),\n          class extends TemplatedElement {\n            constructor() {\n              super(template.getAttribute('id'), Clazz);\n            }\n          }\n        );\n        this._templateWidgets.push(cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'));\n      }\n    },\n    updateSentryScope() {\n      if (cv.Config.sentryEnabled && window.Sentry) {\n        Sentry.setTag('ui.structure', 'tile');\n        Sentry.setTag('ui.design', cv.Config.getDesign());\n      }\n    }\n  },\n\n  defer(statics) {\n    if (!window.cvTestMode) {\n      // do not apply ourselves automatically in test mode\n      cv.Application.structureController = statics.getInstance();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.locale.Manager.getInstance().removeListener('changeLocale', this._onChangeLocale, this);\n  }\n});\n\n\n/* eslint-disable-next-line no-redeclare */\nclass QxConnector extends HTMLElement {\n  constructor(QxClass) {\n    super();\n    if (QxClass) {\n      if (qx.Class.isSubClassOf(QxClass, cv.ui.structure.tile.elements.AbstractCustomElement)) {\n        this._instance = new QxClass(this);\n      } else {\n        throw Error(QxClass + ' must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement');\n      }\n    }\n    if (this.hasAttribute('colspan')) {\n      this.classList.add('colspan-' + this.getAttribute('colspan'));\n    }\n    if (this.hasAttribute('rowspan')) {\n      this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n    }\n  }\n\n  getInstance() {\n    return this._instance;\n  }\n\n  connectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(true);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(false);\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    name = qx.lang.String.camelCase(name);\n    if (this._instance && qx.Class.hasProperty(this._instance.constructor, name)) {\n      this._instance.set(name, newValue);\n    }\n  }\n}\n\nwindow.QxConnector = QxConnector;\n\nclass TemplatedElement extends QxConnector {\n  constructor(templateId, QxClass) {\n    super(QxClass);\n    const renderAttributeName = 'data-cv-rendered';\n    if (this.getAttribute(renderAttributeName) === 'true') {\n      // do not render the template twice\n      return;\n    }\n    const controller = cv.ui.structure.tile.Controller.getInstance();\n    let template = document.getElementById(templateId);\n    if (template) {\n      const slotAttributes = ['name', 'replaces', 'parent-scope'];\n      const content = template.content.cloneNode(true);\n\n      // copy all attributes, except 'id' of the template itself to the widget\n      for (const name of template.getAttributeNames()) {\n        if (name !== 'id' && !this.hasAttribute(name)) {\n          this.setAttribute(name, template.getAttribute(name));\n        }\n      }\n\n      // move slots into template\n      for (let slot of content.querySelectorAll('slot')) {\n        const slotName = slot.getAttribute('name');\n        const replacementSelector = slot.hasAttribute('replaces') ? slot.getAttribute('replaces') : '';\n        const slotParentScope = slot.hasAttribute('parent-scope') ? parseInt(slot.getAttribute('parent-scope')) : 0;\n        let slotContents = this.querySelectorAll(`[slot='${slotName}']`);\n        if (slotContents.length === 0 && slotName === 'default') {\n          // add all elements that have no slot to this default slot\n          slotContents = this.querySelectorAll(':scope > *:not([slot])');\n        }\n        const attrs = {};\n        for (let i = 0, l = slot.attributes.length; i < l; i++) {\n          if (!slotAttributes.includes(slot.attributes[i].name)) {\n            attrs[slot.attributes[i].name] = slot.attributes[i].value;\n          }\n        }\n        if (slotContents.length > 0) {\n          Array.from(slotContents).forEach(slotContent => {\n            const newNode = slotContent.cloneNode(true);\n            Object.keys(attrs).forEach(attrName => {\n              if (newNode.hasAttribute(attrName)) {\n                if (attrName === 'class') {\n                  // append it\n                  newNode.classList.add(attrs[attrName]);\n                } else {\n                  qx.log.Logger.debug(controller, '[' + templateId + '] attribute', attrName, 'already set, skipping');\n                }\n              } else {\n                newNode.setAttribute(attrName, attrs[attrName]);\n              }\n            });\n            newNode.removeAttribute('slot');\n            slot.parentNode.insertBefore(newNode, slot);\n          });\n          slot.remove();\n          if (replacementSelector) {\n            content.querySelectorAll(replacementSelector).forEach(replaced => {\n              replaced.remove();\n            });\n          }\n        } else {\n          let parentNode = slot.parentNode;\n          if (slotParentScope > 0) {\n            // got slotParentScope elements up and remove that one\n            let i = slotParentScope - 1;\n            while (i > 0) {\n              parentNode = parentNode.parentNode;\n              i--;\n            }\n            if (parentNode) {\n              parentNode.remove();\n            }\n          } else {\n            slot.remove();\n            if (parentNode.children.length === 0 && slotParentScope >= 0) {\n              // also remove slots parent when it has no content\n              // can be obeyed by setting parent-scope=\"-1\"\n              parentNode.remove();\n            }\n          }\n        }\n      }\n      // transfer attribute slots\n      const attributes = this.getAttributeNames();\n      for (const name of attributes) {\n        let value = this.getAttribute(name);\n        const slotAttributeName = `slot-${name}`;\n        const targets = content.querySelectorAll(`[${slotAttributeName}]`);\n        let targetName = name;\n\n        for (const target of targets) {\n          if (target.hasAttribute(slotAttributeName)) {\n            const targetValue = target.getAttribute(slotAttributeName);\n            if (targetValue.startsWith(':')) {\n              // this template slot-attribute contains some configuration\n              for (const entry of targetValue.substring(1).split(',')) {\n                const [key, val] = entry.split('=');\n                switch (key) {\n                  case 'target':\n                    targetName = val;\n                    break;\n                  case 'value':\n                    // not needed here\n                    break;\n                  default:\n                    qx.log.Logger.error(this, 'unhandled slot-attribute configuration key', key);\n                    break;\n                }\n              }\n            }\n          }\n\n          target.setAttribute(targetName, value);\n          target.removeAttribute(slotAttributeName);\n        }\n        if (targets.length > 0) {\n          this.removeAttribute(name);\n        }\n      }\n\n      for (const elem of content.querySelectorAll('*')) {\n        for (const attr of [...elem.attributes]) {\n          if (attr.name.startsWith('slot-')) {\n            let attrValue = attr.value;\n            let targetName = attr.name.substring(5);\n            // only e.g. map slot-progress-mapping to mapping if we have no slot-mapping attribute\n            if (attr.name.endsWith('-mapping') && elem.hasAttribute('slot-mapping')) {\n              targetName = 'mapping';\n            } else if (attr.name.endsWith('-styling') && elem.hasAttribute('slot-styling')) {\n              targetName = 'styling';\n            } else if (attr.name.endsWith('-format') && elem.hasAttribute('slot-format')) {\n              targetName = 'format';\n            } else if (attr.value.startsWith(':')) {\n              attrValue = '';\n              // this template slot-attribute contains some configuration\n              const parts = attr.value.substring(1).split(',');\n              for (const entry of parts) {\n                const [key, val] = entry.split('=');\n                switch (key) {\n                  case 'target':\n                    targetName = val;\n                    break;\n                  case 'value':\n                    attrValue = val;\n                    break;\n                  default:\n                    qx.log.Logger.error(this, 'unhandled slot-attribute configuration key', key);\n                    break;\n                }\n              }\n            }\n            if (attrValue) {\n              elem.setAttribute(targetName, attrValue);\n            }\n            elem.removeAttribute(attr.name);\n          }\n        }\n      }\n\n      // clear content\n      this.innerHTML = '';\n      this.appendChild(content);\n      this.classList.add('cv-widget');\n      this.setAttribute(renderAttributeName, 'true');\n    } else {\n      qx.log.Logger.error(controller, '[' + templateId + '] no template found for id', templateId);\n    }\n  }\n}\n","/* AbstractCustomElement.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.elements.AbstractCustomElement', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    this._element = element;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connected: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyConnected',\n      event: 'changeConnected'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {HTMLElement}\n     */\n    _element: null,\n\n    _initialized: false,\n\n    _applyConnected(value) {\n      if (value && !this._initialized) {\n        this._init();\n        this._initialized = true;\n      } else {\n        this._disconnected();\n        this._initialized = false;\n      }\n    },\n    _init() {},\n\n    _disconnected() {},\n\n    getElement() {\n      return this._element;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._element = null;\n  }\n});\n","/* AbstractComponent.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Base class for all components.\n */\nqx.Class.define('cv.ui.structure.tile.components.AbstractComponent', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._preMappingHooks = [];\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      apply: '_applyValue',\n      init: null,\n      nullable: true,\n      event: 'changeValue'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass',\n      event: 'changeStyleClass'\n    },\n\n    enabled: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyEnabled'\n    },\n\n    visibility: {\n      check: ['visible', 'excluded', 'hidden'],\n      init: 'visible',\n      apply: '_applyVisibility',\n      event: 'changeVisibility'\n    },\n\n    /**\n     * True if this tile is the content of a template based widget\n     */\n    widget: {\n      check: 'Boolean',\n      init: false\n    },\n\n    /**\n     * True if this tile is the content of a popup\n     */\n    inPopup: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    dateFormats: {}\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    _headerFooterParent: null,\n    _preMappingHooks: null,\n    _tileElement: null,\n    __mobileReplacements: null,\n\n    _checkEnvironment() {\n      let inPopup = false;\n      if (this._element.parentElement.localName === 'cv-popup') {\n        this._headerFooterParent = this._element.parentElement;\n        inPopup = true;\n      } else {\n        let tile = this._getTileParent();\n        if (tile) {\n          let parent = tile.parentElement;\n          this._headerFooterParent = parent;\n          if (parent.localName === 'cv-popup') {\n            inPopup = true;\n          }\n        }\n      }\n      this.setInPopup(inPopup);\n    },\n\n    _getTileParent() {\n      if (!this._tileElement) {\n        let tile = this._element;\n        let i = 0;\n        while (tile && tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n          i++;\n          if (i > 2) {\n            tile = null;\n            break;\n          }\n        }\n        if (tile && tile.localName === 'cv-tile') {\n          this._tileElement = tile;\n        }\n      }\n      return this._tileElement;\n    },\n\n    _init() {\n      this._checkEnvironment();\n\n      const element = this._element;\n      let hasReadAddress = false;\n      const writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n      if (!hasReadAddress) {\n        // address groups are read-only\n        hasReadAddress = element.querySelectorAll(':scope > cv-address-group').length > 0;\n      }\n\n      this._writeAddresses = writeAddresses;\n\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n\n      // has mobile attributes\n      this.__mobileReplacements = [];\n\n      const check = element => {\n        for (const name of element.getAttributeNames()) {\n          if (name.startsWith('mobile-')) {\n            const targetName = name.substring(7);\n            this.__mobileReplacements.push({\n              name: targetName,\n              mobile: element.getAttribute(name),\n              desktop: element.getAttribute(targetName),\n              target: element\n            });\n          }\n        }\n      };\n      check(element);\n      if (this._headerFooterParent && this._headerFooterParent.localName === 'cv-widget') {\n        check(this._headerFooterParent);\n      }\n\n      if (this.__mobileReplacements.length > 0) {\n        qx.core.Init.getApplication().addListener('changeMobile', this.__updateAttributes, this);\n      }\n\n      if (document.body.classList.contains('mobile')) {\n        this.__updateAttributes();\n      }\n    },\n\n    __updateAttributes() {\n      const isMobile = document.body.classList.contains('mobile');\n      for (const entry of this.__mobileReplacements) {\n        entry.target.setAttribute(entry.name, isMobile ? entry.mobile : entry.desktop);\n      }\n    },\n\n    getElement() {\n      return this._element;\n    },\n\n    /**\n     * Append the given element to a header inside the widget this component is a direct child of.\n     * If the header does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     * @param align {String} center (default), left or right\n     */\n    appendToHeader(element, align = undefined) {\n      if (this._headerFooterParent) {\n        let header = this._headerFooterParent.querySelector(':scope > header');\n        if (!header) {\n          header = document.createElement('header');\n          this._headerFooterParent.insertBefore(header, this._headerFooterParent.firstElementChild);\n        }\n        let targetParent = header;\n        if (align) {\n          targetParent = header.querySelector('.' + align);\n          if (!targetParent) {\n            targetParent = document.createElement('div');\n            targetParent.classList.add(align);\n          }\n          header.appendChild(targetParent);\n        }\n        targetParent.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the header or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getHeader(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > header');\n        } \n          const header = this._headerFooterParent.querySelector(':scope > header');\n          if (header) {\n            return header.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Append the given element to a footer inside the widget this component is a direct child of.\n     * If the footer does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     */\n    appendToFooter(element) {\n      if (this._headerFooterParent) {\n        let footer = this._headerFooterParent.querySelector(':scope > footer');\n        if (!footer) {\n          footer = document.createElement('footer');\n          this._headerFooterParent.appendChild(footer);\n        }\n        footer.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the footer or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getFooter(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > footer');\n        } \n          const footer = this._headerFooterParent.querySelector(':scope > footer');\n          if (footer) {\n            return footer.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Register hook function {Function(value: number) : number} that is called before the mapping gets applied.\n     * It must return a number that is used as a new value for mapping.\n     * @param callback {{(value: number) : number}}\n     * @param context {object}\n     */\n    registerPreMappingHook(callback, context) {\n      const exists = this._preMappingHooks.some(e => e[0] === callback);\n      if (!exists) {\n        this._preMappingHooks.push([callback, context || this]);\n      }\n    },\n\n    /**\n     * Unregister pre-mapping hook\n     * @param callback {{(value: number) : number}}\n     */\n    unregisterPreMappingHook(callback) {\n      this._preMappingHooks = this._preMappingHooks.filter(e => e[0] !== callback);\n    },\n\n    // property apply\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        for (const hookEntry of this._preMappingHooks) {\n          mappedValue = hookEntry[0].call(hookEntry[1], mappedValue);\n        }\n        if (mappedValue !== null) {\n          if (this._element.hasAttribute('mapping') && this._element.getAttribute('mapping')) {\n            mappedValue = cv.Application.structureController.mapValue(this._element.getAttribute('mapping'), mappedValue);\n          }\n          if (this._element.hasAttribute('format') && this._element.getAttribute('format')) {\n            const format = this._element.getAttribute('format');\n            if (mappedValue instanceof Date && !format.includes('%')) {\n              if (!cv.ui.structure.tile.components.AbstractComponent.dateFormats[format]) {\n                cv.ui.structure.tile.components.AbstractComponent[format] = new qx.util.format.DateFormat(format);\n              }\n              mappedValue = cv.ui.structure.tile.components.AbstractComponent[format].format(mappedValue);\n            } else {\n              mappedValue = cv.util.String.sprintf(\n                format,\n                mappedValue instanceof Date ? mappedValue.toLocaleString() : mappedValue);\n            }\n          }\n        }\n        this._updateValue(mappedValue, value);\n        if (this._element.hasAttribute('styling') && this._element.getAttribute('styling')) {\n          let styleClass = cv.Application.structureController.styleValue(this._element.getAttribute('styling'), value);\n          this.setStyleClass(styleClass);\n        }\n      }\n    },\n\n    // needs to be implemented by inheriting classes\n    _updateValue(mappedValue, value) {},\n\n    // property apply\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyEnabled(value) {\n      let blocker = this._element.querySelector(':scope > .blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('blocker');\n        this._element.appendChild(blocker);\n        blocker.addEventListener('click', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerdown', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerup', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n      }\n      this._element.setAttribute('disabled', value === false ? 'true' : 'false');\n\n      blocker.style.display = value === true ? 'none' : 'block';\n    },\n\n    _applyVisibility(value, oldValue) {\n      const target = this.isWidget() ? this._element.parentElement : this._element;\n      if (oldValue === 'hidden') {\n        target.style.opacity = '1.0';\n      }\n      switch (value) {\n        case 'visible':\n          target.style.display = null;\n          break;\n\n        case 'hidden':\n          target.style.opacity = '0';\n          break;\n\n        case 'excluded':\n          target.style.display = 'none';\n          break;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     * @return {Boolean} true of the update has been handled\n     */\n    onStateUpdate(ev) {\n      // noinspection EqualityComparisonWithCoercionJS\n      const active = ev.detail.addressValue === null ? !!ev.detail.state : ev.detail.addressValue == ev.detail.state;\n      switch (ev.detail.target) {\n        case 'enabled':\n          this.setEnabled(active);\n          ev.stopPropagation();\n          return true;\n\n        case 'show-exclude':\n          this.setVisibility(active ? 'visible' : 'excluded');\n          ev.stopPropagation();\n          return true;\n\n        case 'show-hide':\n          this.setVisibility(active ? 'visible' : 'hidden');\n          ev.stopPropagation();\n          return true;\n\n        case 'styling': {\n          let styling = '';\n          if (ev.detail.targetConfig) {\n            // use address styling if available\n            styling = ev.detail.targetConfig[0];\n          } else if (this._element.hasAttribute('styling') && this._element.getAttribute('styling')) {\n            // fallback to element styling\n            styling = this._element.getAttribute('styling');\n          }\n          const styleClass = cv.Application.structureController.styleValue(styling, ev.detail.state);\n          this.setStyleClass(styleClass);\n          ev.stopPropagation();\n          return true;\n        }\n\n        case '':\n          this.setValue(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n      }\n\n      return false;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._writeAddresses = null;\n    this._headerFooterParent = null;\n    qx.core.Init.getApplication().removeListener('changeMobile', this.__updateAttributes, this);\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.widgets.TemplateWidget', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    widget: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _checkEnvironment() {\n      this._headerFooterParent = this._element;\n    },\n\n    _getTileParent() {\n      if (!this._tileElement) {\n        this._tileElement = this._element.querySelector(':scope > cv-tile');\n      }\n      return this._tileElement;\n    }\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n *\n */\nqx.Mixin.define('cv.ui.structure.tile.MFullscreen', {\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    fullscreen: {\n      check: 'Boolean',\n      init: false,\n      apply: '__applyFullscreen',\n      event: 'changeFullscreen'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __uuid: null,\n    __popupAddress: null,\n    __button: null,\n\n    getUuid() {\n      if (!this.__uuid) {\n        this.__uuid = qx.util.Uuid.createUuidV4();\n      }\n      return this.__uuid;\n    },\n\n    getPopupAddress() {\n      if (!this.__popupAddress) {\n        this.__popupAddress = `state:${this.getUuid()}-popup`;\n      }\n      return this.__popupAddress;\n    },\n\n    __applyFullscreen(value) {\n      const sendValue = value ? '1' : '0';\n      this.__button.setAttribute('data-value', sendValue);\n      cv.data.Model.getInstance().onUpdate(this.getPopupAddress(), sendValue, 'system');\n    },\n\n    _initFullscreenSwitch() {\n      // add fullscreen button + address\n      const button= this.__button = this._buttonFactory('ri-fullscreen-line', ['fullscreen']);\n      button.setAttribute('data-value', '0');\n      button.addEventListener('click', () => this.toggleFullscreen());\n      this.appendToHeader(button, 'right');\n\n      // address\n      const tileAddress = document.createElement('cv-address');\n      tileAddress.setAttribute('mode', 'read');\n      tileAddress.setAttribute('target', 'fullscreen-popup');\n      tileAddress.setAttribute('backend', 'system');\n      tileAddress.setAttribute('send-mode', 'always');\n      tileAddress.textContent = this.getPopupAddress();\n      this._element.parentElement.appendChild(tileAddress);\n\n      // listen to parent tile of popup is opened or not\n      let parent = this._element;\n      while (parent && parent.nodeName.toLowerCase() !== 'cv-tile') {\n        parent = parent.parentElement;\n      }\n      if (parent) {\n        const tileWidget = parent.getInstance();\n        tileWidget.addListener('closed', () => this.setFullscreen(false));\n\n        // because we added a read address to the tile after it has been initialized we need to init the listener here manually\n        parent.addEventListener('stateUpdate', ev => {\n          tileWidget.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    _buttonFactory(icon, classes) {\n      const button = document.createElement('button');\n      button.classList.add(...classes);\n      if (icon) {\n        const i = document.createElement('i');\n        i.classList.add(icon);\n        button.appendChild(i);\n      }\n      return button;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__button = null;\n  }\n});\n","/* MPopup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Handles cv-popup children and some general popup tasks, like global registration and close on click outside, modal blocker etc.\n */\nqx.Mixin.define('cv.ui.structure.tile.MPopup', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._onPointerDownBounded = this._onPointerDown.bind(this);\n    this._openPopupChildBounded = this._openPopupChild.bind(this);\n  },\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  events: {\n    closed: 'qx.event.type.Event'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _childPopup: null,\n    _onPointerDownBounded: null,\n    _openPopupChildBounded: null,\n\n    _initPopupChild() {\n      const popup = (this._childPopup = this._element.querySelector(':scope > cv-popup'));\n      if (popup) {\n        this._element.addEventListener('click', this._openPopupChildBounded);\n\n        // we need to tell the parent widget that is inside a group that wen have a popup here\n        let parent = popup.parentElement;\n        let last;\n        while (parent) {\n          if (parent.tagName.toLowerCase() === 'cv-group') {\n            last.classList.add('has-popup');\n          } else if (parent.tagName.toLowerCase() === 'cv-page') {\n            break;\n          }\n          last = parent;\n          parent = parent.parentElement;\n        }\n      }\n    },\n\n    _openPopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup:not([open])');\n\n      if (popup) {\n        popup.getInstance().open();\n      }\n    },\n\n    _closePopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup[open]');\n      if (popup) {\n        popup.getInstance().close();\n      }\n    },\n\n    registerModalPopup() {\n      document.addEventListener('pointerup', this._onPointerDownBounded);\n\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('modal-popup-blocker');\n        document.body.appendChild(blocker);\n      }\n      blocker.style.display = 'block';\n      cv.ui.structure.tile.MPopup.openedPopups.push(this);\n    },\n\n    unregisterModalPopup() {\n      document.removeEventListener('pointerup', this._onPointerDownBounded);\n\n      const index = cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);\n      cv.ui.structure.tile.MPopup.openedPopups.splice(index, 1);\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (blocker && cv.ui.structure.tile.MPopup.openedPopups.length === 0) {\n        blocker.style.display = 'none';\n      }\n    },\n\n    _onPointerDown(ev) {\n      const element = this._headerFooterParent || this._element;\n      if (!cv.util.Tree.isChildOf(ev.target, element)) {\n        ev.preventDefault();\n        ev.stopImmediatePropagation();\n        // clicked outside -> close (with delay to capture composed events)\n        qx.event.Timer.once(this.close, this, 100);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._element.removeEventListener('click', this._openPopupChildBounded);\n\n    this._childPopup = null;\n  }\n});\n","/* MRefresh.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a refresh attribute that triggers a 'refresh' method which must be implemented by classes including this mixin.\n */\nqx.Mixin.define('cv.ui.structure.tile.MRefresh', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    if (qx.Class.hasMixin(this.constructor, cv.ui.structure.tile.MVisibility)) {\n      this.addListener('changeVisible', this.__onVisibilityChange, this);\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    refresh: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyRefresh'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _refreshTimer: null,\n    _lastRefresh: null,\n\n    _applyRefresh(value) {\n      if (value === 0) {\n        if (this._refreshTimer) {\n          this._refreshTimer.stop();\n        }\n      } else if (!this._refreshTimer) {\n        this._refreshTimer = new qx.event.Timer(value * 1000);\n        this._refreshTimer.addListener('interval', this.__doRefresh, this);\n        if (typeof this.isVisible === 'function') {\n          if (this.isVisible()) {\n            this._refreshTimer.start();\n          }\n        } else {\n          this._refreshTimer.start();\n        }\n      } else {\n        this._refreshTimer.restartWith(value * 1000);\n      }\n    },\n\n    __onVisibilityChange(ev) {\n      if (ev.getData()) {\n        if (this._refreshTimer) {\n          this._refreshTimer.start();\n          if (!this._lastRefresh || Date.now() - this._lastRefresh >= this._refreshTimer.getInterval()) {\n            // last execution time too old, refresh now\n            this.__doRefresh();\n          }\n        } else if (!this._lastRefresh) {\n          // refresh once when the item becomes visible\n          this.__doRefresh();\n        }\n      } else if (this._refreshTimer) {\n        this._refreshTimer.stop();\n      }\n    },\n\n    __doRefresh() {\n      if (typeof this.refresh === 'function') {\n        this.refresh();\n        this._lastRefresh = Date.now();\n      } else {\n        this.error('refresh method must be implemented!');\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_refreshTimer');\n  }\n});\n","/* MVisibility.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements visibility\n * @ignore(IntersectionObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MVisibility', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observeVisibility();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    observer: new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.target._instance) {\n          entry.target._instance.setVisible(entry.isIntersecting);\n        }\n      }, {\n        root: document.querySelector('body > main')\n      });\n    })\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visible: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _observeVisibility() {\n      if (this._element) {\n        cv.ui.structure.tile.MVisibility.observer.observe(this._element);\n      } else {\n        this.warn('no element to observe defined');\n      }\n    }\n  }\n});\n","/* MResize.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements resizing\n * @ignore(ResizeObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MResize', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observer = new ResizeObserver((entries, observer) => {\n      for (const entry of entries) {\n        this.fireDataEvent('resized', entry);\n      }\n    });\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    resized: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    resizeTarget: {\n      check: 'Element',\n      nullable: true,\n      apply: '_applyResizeTarget'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {ResizeObserver}\n     */\n    _observer: null,\n\n    _applyResizeTarget(element, oldElement) {\n      if (oldElement) {\n        this._observer.unobserve(oldElement);\n      }\n      if (element) {\n        this._observer.observe(element);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._observer.disconnect();\n    this._observer = null;\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Provides all transform helper functions for converting a string value,\n * to other scalar property types.\n *\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Mixin.define('cv.ui.structure.tile.MStringTransforms', {\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _parseInt(val) {\n      if (typeof val === 'string') {\n        return parseInt(val, 10);\n      }\n      return val;\n    },\n\n    _parseFloat(val) {\n      if (typeof val === 'string') {\n        return parseFloat(val);\n      }\n      return val;\n    },\n\n    _parseBoolean(val) {\n      if (typeof val === 'string') {\n        return val === 'true';\n      }\n      return val;\n    }\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates breadcrumb navigation bar down to the currently shown page.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Breadcrumbs', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._update, this);\n    },\n\n    _update() {\n      let list = this._element.querySelector(':scope > ul');\n      if (!list) {\n        list = document.createElement('ul');\n        this._element.appendChild(list);\n      }\n      const listItems = [];\n      const activePage = document.body.querySelector('cv-page.active');\n      const startPage = document.body.querySelector('main > cv-page:first-of-type');\n\n      if (activePage && activePage !== startPage) {\n        let currentPage = activePage;\n        while (currentPage) {\n          let li = this._createListItem(currentPage.getAttribute('id'), currentPage.getAttribute('name'));\n          listItems.unshift(li);\n          let parent = currentPage.parentElement;\n          while (parent) {\n            if (parent.localName === 'cv-page') {\n              currentPage = parent;\n              break;\n            }\n            parent = parent.parentElement;\n          }\n          if (!parent || currentPage === startPage) {\n            break;\n          }\n        }\n      }\n      let start = list.querySelector(':scope > li.start');\n      if (!start) {\n        start = this._createListItem(startPage.getAttribute('id'), startPage.getAttribute('name'));\n        start.classList.add('start');\n      }\n      listItems.unshift(start);\n\n      list.replaceChildren(...listItems);\n    },\n\n    _createListItem(pageId, text) {\n      const li = document.createElement('li');\n      const a = document.createElement('a');\n      a.setAttribute('href', '#' + pageId);\n      a.textContent = text;\n      li.appendChild(a);\n      return li;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._update, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'breadcrumbs',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Button.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Button', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__store = new Map();\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['button', 'trigger', 'push'],\n      init: 'button'\n    },\n\n    on: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOn'\n    },\n\n    onClass: {\n      check: 'String',\n      init: 'active'\n    },\n\n    offClass: {\n      check: 'String',\n      init: 'inactive'\n    },\n\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      apply: '_applyName'\n    },\n\n    progress: {\n      check: 'Number',\n      init: -1,\n      apply: '_applyProgress',\n      transform: '_parseInt'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    __textLabel: null,\n    __circumference: null,\n    /**\n     * @var {Map} value store for addresses to be able to use them e.g. in mapping formulas\n     */\n    __store: null,\n    _triggerOnValue: null,\n\n    _parseInt(val) {\n      const intVal = parseInt(val);\n      return Number.isNaN(intVal) ? 0 : intVal;\n    },\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      if (element.hasAttribute('name')) {\n        this.setName(element.getAttribute('name'));\n      }\n      if (element.hasAttribute('progress')) {\n        this.setProgress(element.getAttribute('progress'));\n      }\n      if (element.hasAttribute('on-value')) {\n        this.setOnValue(element.getAttribute('on-value'));\n      }\n      if (element.hasAttribute('off-value')) {\n        this.setOffValue(element.getAttribute('off-value'));\n      }\n      let hasReadAddress = false;\n      let writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      const events = {};\n      if (writeAddresses.length > 0) {\n        let eventSource = element;\n        if (element.getAttribute('whole-tile') === 'true') {\n          // find parent tile and use it as event source\n          let parent = element.parentElement;\n          let level = 0;\n          while (level <= 2) {\n            parent = parent.parentElement;\n            level++;\n            if (parent.tagName.toLowerCase() === 'cv-tile') {\n              eventSource = parent;\n              eventSource.classList.add('clickable');\n            }\n          }\n        }\n        writeAddresses.forEach(addr => {\n          let event = addr.hasAttribute('on') ? addr.getAttribute('on') : 'click';\n          switch (event) {\n            case 'click':\n              events.click = this.onClicked.bind(this);\n              break;\n            case 'up':\n              events.pointerup = this.onPointerUp.bind(this);\n              break;\n            case 'down':\n              events.pointerdown = this.onPointerDown.bind(this);\n              break;\n          }\n        });\n        Object.getOwnPropertyNames(events).forEach(eventName =>\n          eventSource.addEventListener(eventName, ev => {\n            events[eventName](ev);\n          })\n        );\n      }\n      if (element.hasAttribute('doc-link') && !Object.prototype.hasOwnProperty.call(events, 'click')) {\n        element.addEventListener('click', ev => {\n          this.onClicked(ev);\n        });\n      }\n      let triggerAddresses = [];\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      } else if (element.hasAttribute('mapping') || element.hasAttribute('styling')) {\n        // apply the trigger state\n        triggerAddresses = writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on'));\n      }\n\n      // detect button type\n      if (\n        !hasReadAddress &&\n        triggerAddresses.length === 1\n      ) {\n        // only one write address with a fixed value and no special event => simple trigger\n        this.setType('trigger');\n\n        if (!element.hasAttribute('on-value')) {\n          // we consider the trigger address value as on-value when no one is given\n          this._triggerOnValue = triggerAddresses[0].getAttribute('value');\n        } else {\n          this._triggerOnValue = this.getOnValue();\n        }\n\n        const value = triggerAddresses[0].getAttribute('value');\n        qx.event.Timer.once(\n          () => {\n            // set it to the opposite of what is being sent when clicked to make the feedback simulation work\n            // e.g. value=\"1\", trigger is off and when clicked for a short amount of time in on state,\n            // using == comparisons to make sure that e.g. 1 equals \"1\"\n            // noinspection EqualityComparisonWithCoercionJS\n            this.setOn(value != this._triggerOnValue);\n          },\n          this,\n          1000\n        );\n      } else {\n        let hasDown = false;\n        let hasUp = false;\n        writeAddresses.some(addr => {\n          if (addr.hasAttribute('value') && addr.hasAttribute('on')) {\n            if (!hasDown) {\n              hasDown = addr.getAttribute('on') === 'down';\n            }\n            if (!hasUp) {\n              hasUp = addr.getAttribute('on') === 'up';\n            }\n          }\n          return hasUp && hasDown;\n        });\n        if (hasUp && hasDown) {\n          // has an address for up and one for down event with a fixed value -> pushbutton\n          this.setType('push');\n        }\n      }\n    },\n\n    _initProgress() {\n      const element = this._element;\n      this.__circumference = 100 * Math.PI;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('viewBox', '0 0 100 100');\n      svg.setAttribute('type', 'circle');\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\n      circle.classList.add('bar');\n      circle.setAttribute('r', '49');\n      circle.setAttribute('cx', '50');\n      circle.setAttribute('cy', '50');\n      circle.setAttribute('stroke-width', '2');\n      circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n      circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n      svg.appendChild(circle);\n      element.appendChild(svg);\n      // make sure that we do not override the progress bar by state appearance\n      element.classList.add('progress');\n    },\n\n    _applyConnected(value) {\n      super._applyConnected(value);\n      if (value) {\n        if (this.getType() !== 'trigger') {\n          // delay this because we need the mappings to be ready\n          qx.event.Timer.once(this._applyOn, this, 1000);\n        }\n      }\n    },\n    _applyOn() {\n      if (this.isConnected()) {\n        let value = this.isOn() ? this.getOnValue() : this.getOffValue();\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(\n            this._element.getAttribute('mapping'),\n            value,\n            this.__store\n          );\n        }\n        const target = this._element.querySelector('.value');\n        if (target && target.tagName.toLowerCase() === 'cv-icon') {\n          if (target._instance) {\n            target._instance.setId(mappedValue);\n          } else {\n            target.textContent = mappedValue;\n          }\n        } else {\n          this.updateValue(mappedValue);\n        }\n        let styleClass = this.isOn() ? this.getOnClass() : this.getOffClass();\n        if (this._element.hasAttribute('styling')) {\n          styleClass = cv.Application.structureController.styleValue(\n            this._element.getAttribute('styling'),\n            value,\n            this.__store\n          );\n        }\n        this.setStyleClass(styleClass);\n      }\n    },\n\n    _applyProgress(value) {\n      let valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n      if (!valueElement) {\n        this._initProgress();\n        valueElement = this._element.querySelector(':scope > svg > circle.bar');\n      }\n      if (valueElement) {\n        if (this._element.hasAttribute('progress-mapping')) {\n          value = cv.Application.structureController.mapValue(\n            this._element.getAttribute('progress-mapping'),\n            value,\n            this.__store\n          );\n        }\n        valueElement.setAttribute(\n          'stroke-dashoffset',\n          '' + (this.__circumference - (value / 100) * this.__circumference)\n        );\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyName(value) {\n      if (!this.__textLabel) {\n        this.__textLabel = document.createElement('label');\n        this.__textLabel.classList.add('button-label');\n        this._element.appendChild(this.__textLabel);\n      }\n      this.__textLabel.textContent = value;\n    },\n\n    updateValue(value) {\n      const elem = this._element.querySelector('span.value');\n      if (elem) {\n        elem.innerHTML = value;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == this.getOnValue();\n      let target = ev.detail.target || 'default';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      if (target === 'default') {\n        this.setOn(value);\n      } else if (target === 'progress') {\n        this.setProgress(ev.detail.state);\n      } else if (target.startsWith('store:')) {\n        this.__store.set(target.substring(6), ev.detail.state);\n      } else if (target === 'store') {\n        // use targetConfig as store key if available, address as fallback\n        this.__store.set(ev.detail.targetConfig && ev.detail.targetConfig.length === 1 ? ev.detail.targetConfig[0] : ev.detail.address, ev.detail.state);\n      }\n    },\n\n    onClicked(event) {\n      this.createRipple(event);\n      if (this._element.hasAttribute('doc-link')) {\n        let relPath = this._element.getAttribute('doc-link');\n        // add locale and version\n        const baseVersion = cv.Version.VERSION.split('.').slice(0, 2).join('.');\n        let language = qx.locale.Manager.getInstance().getLanguage();\n        if (language !== 'de') {\n          // documentation only exists in 'de' and 'en'\n          language = 'en';\n        }\n        window.open(`https://www.cometvisu.org/CometVisu/${language}/${baseVersion}/manual/${relPath}`);\n        event.stopPropagation();\n      } else {\n        if (!this._writeAddresses) {\n          this._writeAddresses = Array.prototype.filter.call(\n            this._element.querySelectorAll('addresses > cv-address'),\n            address => !address.hasAttribute('mode') || address.getAttribute('mode') !== 'read'\n          );\n        }\n        const ev = new CustomEvent('sendState', {\n          detail: {\n            value: this.isOn() ? this.getOffValue() : this.getOnValue(),\n            source: this\n          }\n        });\n\n        const wa = this._writeAddresses\n          .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click');\n\n        if (this.getType() === 'trigger') {\n          // simulate feedback\n          // using == comparisons to make sure that e.g. 1 equals \"1\"\n          // noinspection EqualityComparisonWithCoercionJS\n          const simulatedValue = wa[0].getAttribute('value') == this._triggerOnValue;\n          this.setOn(simulatedValue);\n          qx.event.Timer.once(\n            () => {\n              this.setOn(!simulatedValue);\n            },\n            null,\n            500\n          );\n        }\n        wa.forEach(address => address.dispatchEvent(ev));\n        event.stopPropagation();\n      }\n    },\n\n    onPointerDown() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'down' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    onPointerUp() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'up' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    createRipple(event) {\n      const button = event.currentTarget;\n      let container = button.querySelector(':scope .ripple-container');\n      if (!container) {\n        container = document.createElement('div');\n        container.classList.add('ripple-container');\n        button.appendChild(container);\n      }\n      const circle = document.createElement('span');\n      const diameter = Math.max(button.clientWidth, button.clientHeight);\n      const radius = diameter / 2;\n      circle.style.width = circle.style.height = `${diameter}px`;\n      let x = event.clientX - (button.offsetLeft + radius);\n      let y = event.clientY - (button.offsetTop + radius);\n      if (button === this._element) {\n        x -= button.offsetParent.offsetLeft;\n        y -= button.offsetParent.offsetTop;\n      }\n      circle.style.left = `${x}px`;\n      circle.style.top = `${y}px`;\n      circle.classList.add('ripple');\n      // remove old ones\n      container.querySelectorAll('.ripple').forEach(ripple => ripple.remove());\n      container.appendChild(circle);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'button',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Address.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Address element that connect a widget/component to the backend.\n *\n *  @author Tobias Bräutigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Address', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __lastValue: null,\n    __transformedValue: null,\n    _stateUpdateTarget: null,\n\n    getAddress() {\n      return this._element.textContent.trim();\n    },\n\n\n    _init() {\n      const element = this._element;\n      this._stateUpdateTarget = element;\n      const address = this.getAddress();\n      if (address) {\n        const model = cv.data.Model.getInstance();\n        const backendName = element.getAttribute('backend');\n        model.addAddress(address, element.getAttribute('id'), backendName);\n        const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'readwrite';\n        if (mode !== 'write') {\n          // subscribe\n          // this is a read address register for updates\n          const state = model.getState(address, backendName);\n          if (state !== undefined) {\n            this.fireStateUpdate(address, state);\n          }\n          //add listener\n          model.addUpdateListener(address, this.fireStateUpdate, this, backendName);\n\n          if (element.hasAttribute('target') && element.getAttribute('target').startsWith('last-update')) {\n            if (state === undefined) {\n              // notify tile that we have no value, so its outdated\n              this.fireStateUpdate(address, '-');\n            }\n          }\n        }\n        if (mode !== 'read') {\n          // listen for sendState events\n          element.addEventListener('sendState', ev => {\n            let value = null;\n            if (Object.prototype.hasOwnProperty.call(ev.detail, 'value')) {\n              value = ev.detail.value;\n            }\n            let allowDuplicates =\n              ev.detail.source &&\n              ev.detail.source instanceof cv.ui.structure.tile.components.Button &&\n              (ev.detail.source.getType() === 'trigger' || ev.detail.source.getType() === 'push');\n\n            if (element.hasAttribute('value')) {\n              // address has a fixed value that must be sent\n              value = element.getAttribute('value');\n              allowDuplicates = true;\n            }\n\n            if (value !== null) {\n              const encoding = element.getAttribute('transform') || 'raw';\n              const encodedValue = cv.Transform.encodeBusAndRaw({\n                transform: encoding,\n                selector: this._element.getAttribute('selector'),\n                ignoreError: this._element.getAttribute('ignore-error') === 'true',\n                variantInfo: this._element.getAttribute('variant'),\n                qos: (this._element.getAttribute('qos') || 0) | 0\n              }, value);\n\n              const client = cv.io.BackendConnections.getClient(backendName);\n              if (!client) {\n                this.error('no client found for backend', backendName);\n                return;\n              }\n              // noinspection EqualityComparisonWithCoercionJS\n              if (\n                allowDuplicates ||\n                !Object.prototype.hasOwnProperty.call(element, 'lastSentValue') ||\n                encodedValue.raw !== element.lastSentValue\n              ) {\n                if (element.hasAttribute('delay')) {\n                  const delay = parseInt(element.getAttribute('delay'));\n                  this.debug(`send with delay of ${delay}ms`);\n                  qx.event.Timer.once(\n                    () => {\n                      client.write(\n                        address,\n                        encodedValue.bus,\n                        element\n                      );\n\n                      if (!allowDuplicates) {\n                        element.lastSentValue = encodedValue.raw;\n                      }\n                    },\n                    this,\n                    delay\n                  );\n                } else {\n                  client.write(address, encodedValue.bus, element);\n\n                  if (!allowDuplicates) {\n                    element.lastSentValue = encodedValue.raw;\n                  }\n                }\n              }\n            }\n          });\n        }\n      }\n    },\n\n    /**\n     * Creates a 'stateUpdate' event with the transformed value and dispatches it to the <cv-address>-Element.\n     * @param address {String} address\n     * @param state {variant} state to send\n     */\n    fireStateUpdate(address, state) {\n      if (this.__lastValue !== state || this._element.getAttribute('send-mode') === 'always') {\n        let transform = this._element.getAttribute('transform') || 'raw';\n        let transformedState = cv.Transform.decode({\n          transform: transform,\n          selector: this._element.getAttribute('selector'),\n          ignoreError: this._element.getAttribute('ignore-error') === 'true',\n          variantInfo: this._element.getAttribute('variant'),\n          qos: (this._element.getAttribute('qos') || 0) | 0\n        }, state);\n\n        let mapping = '';\n        if (this._element.hasAttribute('mapping')) {\n          mapping = this._element.getAttribute('mapping');\n          transformedState = cv.Application.structureController.mapValue(mapping, transformedState);\n        }\n        if (this._element.hasAttribute('format')) {\n          transformedState = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            transformedState instanceof Date ? transformedState.toLocaleString() : transformedState\n          );\n        }\n        let targetConfig = this._element.hasAttribute('target') ? this._element.getAttribute('target').split(':') : [];\n        const target = targetConfig.length > 0 ? targetConfig.shift() : '';\n        const ev = new CustomEvent('stateUpdate', {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            address: this.getAddress(),\n            state: transformedState,\n            target: target,\n            targetConfig: targetConfig,\n            raw: state,\n            mapping: mapping,\n            addressValue: this._element.hasAttribute('value') ? this._element.getAttribute('value') : null,\n            source: this,\n            variant: this._element.hasAttribute('variant') ? this._element.getAttribute('variant') : null\n          }\n        });\n\n        this.__transformedValue = transformedState;\n        //console.log(ev.detail);\n        this._stateUpdateTarget.dispatchEvent(ev);\n        this.__lastValue = state;\n        // reset lastSentValue\n        if (state !== this._element.lastSentValue) {\n          this._element.lastSentValue = null;\n        }\n      }\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a read address\n     */\n    isRead() {\n      return this._element.getAttribute('mode') !== 'write';\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a write address\n     */\n    isWrite() {\n      return this._element.getAttribute('mode') !== 'read';\n    },\n\n    getValue() {\n      return this.__transformedValue;\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Chart.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @asset(libs/d3.min.js.map)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.MVisibility,\n    cv.ui.structure.tile.MRefresh,\n    cv.ui.structure.tile.MResize,\n    cv.ui.structure.tile.MFullscreen\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ChartCounter: 0,\n    DEFAULT_ASPECT_RATIO: 392/192,\n\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      try {\n        await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n      } catch (e) {\n        qx.log.Logger.error(this, 'Error loading D3:', e);\n        reject(new Error('Error loading d3 library'));\n        return;\n      }\n\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loading d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          decimal: qx.locale.Number.getDecimalSeparator().translate().toString(),\n          thousands: qx.locale.Number.getGroupSeparator().translate().toString(),\n          grouping: [3],\n          currency: ['€', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          dateTime: '%A, der %e. %B %Y, %X',\n          date: '%d.%m.%Y',\n          time: '%H:%M:%S',\n          periods: [qx.locale.Date.getAmMarker().translate().toString(), qx.locale.Date.getPmMarker().translate().toString()],\n          days: qx.locale.Date.getDayNames('wide', null, 'format').map(t => t.translate().toString()),\n\n          shortDays: qx.locale.Date.getDayNames('narrow', null, 'stand-alone').map(t => t.translate().toString()),\n          months: qx.locale.Date.getMonthNames('wide').map(t => t.translate().toString()),\n          shortMonths: qx.locale.Date.getMonthNames('narrow', null, 'stand-alone').map(t => t.translate().toString())\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    currentSeries: {\n      check: ['hour', 'day', 'week', 'month', 'year'],\n      init: 'day',\n      apply: '_applyCurrentSeries'\n    },\n\n    currentPeriod: {\n      check: 'Number',\n      init: 0,\n      apply: '__updateTimeRange'\n    },\n\n    startTime: {\n      check: 'Number',\n      init: 0\n    },\n\n    endTime: {\n      check: 'Number',\n      init: 0\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _id: null,\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n    _initializing: null,\n    _navigationEnabled: null,\n    __toolTipTimer: null,\n    __showTooltip: false,\n    __debouncedOnResize: null,\n    __resizeTimeout: null,\n    __startTs: null,\n    __endTs: null,\n    __srcToHash: null,\n\n    /**\n    * @type {d3.Selection}\n    */\n    _dot: null,\n    /**\n     * @type {d3.Selection}\n     */\n    _svg: null,\n    /**\n     * @type {HTMLElement}\n     */\n    _tooltip: null,\n    /**\n     * @type {String}\n     */\n    _titleString: null,\n\n    __helpers: null,\n    __config: null,\n    // all chart properties\n    _chartConf: null,\n\n    async _init() {\n      this._checkEnvironment();\n\n      this._initializing = true;\n      this.__srcToHash = {};\n      const element = this._element;\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      this._id = cv.ui.structure.tile.components.Chart.ChartCounter++;\n\n      element.setAttribute('data-chart-id', this._id.toString());\n      const inBackground = this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true';\n\n      let title = this.getHeader('label.title');\n      if (!inBackground && element.hasAttribute('title') && !title) {\n        title = document.createElement('label');\n        title.classList.add('title');\n        let span = document.createElement('span');\n        title.appendChild(span);\n        span.textContent = element.getAttribute('title');\n        this.appendToHeader(title);\n      }\n\n      if (title) {\n        // save base title for updating\n        this._titleString = title.textContent.trim();\n      }\n\n      let seriesSelection = [];\n      if (!inBackground && element.hasAttribute('selection')) {\n        const s = element.getAttribute('selection');\n        if (s === 'none') {\n          seriesSelection = [];\n        } else if (s === 'all') {\n          seriesSelection = ['hour', 'day', 'week', 'month', 'year'];\n        } else {\n          seriesSelection = s.split(',').map(n => n.trim().toLowerCase());\n        }\n      }\n      if (element.hasAttribute('series')) {\n        this.setCurrentSeries(element.getAttribute('series'));\n      }\n      const currentSeries = this.getCurrentSeries();\n      if (seriesSelection.length > 0 && !seriesSelection.includes(currentSeries)) {\n        seriesSelection.push(currentSeries);\n      }\n      this._navigationEnabled = seriesSelection.length > 0;\n      if (seriesSelection.length > 0) {\n        // back button\n        let button = this._buttonFactory('ri-arrow-left-s-line', ['prev']);\n        button.setAttribute('title', qx.locale.Manager.tr('previous'));\n        button.addEventListener('click', () => this._onSeriesPrev());\n\n        if (!title) {\n          title = document.createElement('label');\n          title.classList.add('title');\n          let span = document.createElement('span');\n          title.appendChild(span);\n          this.appendToHeader(title);\n        }\n\n        title.parentElement.insertBefore(button, title);\n        const i = document.createElement('i');\n        i.classList.add('ri-arrow-down-s-fill');\n        title.appendChild(i);\n\n        // current selection\n        const popup = document.createElement('div');\n        popup.classList.add('popup', 'series');\n        let option;\n        for (const s of seriesSelection) {\n          option = document.createElement('cv-option');\n          option.setAttribute('key', s);\n          if (s === currentSeries) {\n            option.setAttribute('selected', 'selected');\n          }\n          option.textContent = this._seriesToShort(s);\n          option.addEventListener('click', ev => {\n            popup.style.display = 'none';\n            this._onSeriesChange(ev.target.getAttribute('key'));\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n          popup.appendChild(option);\n        }\n        title.appendChild(popup);\n\n        // make title clickable\n        title.classList.add('clickable');\n        title.addEventListener('click', ev => {\n          const style = getComputedStyle(popup);\n          if (style.getPropertyValue('display') === 'none') {\n            popup.style.display = 'flex';\n          } else {\n            popup.style.display = 'none';\n          }\n          ev.stopPropagation();\n          ev.preventDefault();\n        });\n\n        // forward button\n        button = this._buttonFactory('ri-arrow-right-s-line', ['next']);\n        button.setAttribute('title', qx.locale.Manager.tr('next'));\n        // initially we cannot go into the future\n        button.disabled = true;\n        button.addEventListener('click', () => this._onSeriesNext());\n        this.appendToHeader(button);\n      }\n      if (!inBackground && element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        this._initFullscreenSwitch();\n\n        // only on mobile we need this, because of height: auto\n        if (document.body.classList.contains('mobile')) {\n          this.addListener('changeFullscreen', () => this._onRendered());\n        }\n      }\n\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n\n      // create needed elements\n\n      const svg = d3.select(this._element)\n        .append('svg');\n\n      let noToolTips = false;\n      if (inBackground) {\n        noToolTips = true;\n        svg.style('opacity', 0.4);\n      }\n\n      if (!noToolTips) {\n        this._tooltip = document.createElement('div');\n        this._tooltip.classList.add('tooltip');\n        this._tooltip.style.display = 'none';\n        this._element.appendChild(this._tooltip);\n\n        svg.on('pointerenter', ev => this._onPointerEntered(ev));\n        svg.on('pointermove', ev => this._onPointerMoved(ev));\n        svg.on('pointerleave', ev => this._onPointerLeft(ev));\n      }\n      svg.on(\n        'touchmove',\n        event => {\n          if (this._loaded) {\n            let y = event.targetTouches[0].clientY;\n            const pathRect = this._element.querySelector(':scope > svg').getBoundingClientRect();\n            if (y > pathRect.y && y < pathRect.y + pathRect.height) {\n              event.preventDefault();\n            }\n          }\n        },\n        { passive: false }\n      );\n\n      // init some fixed settings\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n      let timeFormat = null;\n      if (this._element.hasAttribute('x-format')) {\n        const formatString = this._element.getAttribute('x-format');\n        timeFormat = date => d3.timeFormat(formatString)(date);\n      } else {\n        // format auto-detection\n        timeFormat = this.multiTimeFormat([\n          [\n            '%H:%M:%S',\n            function (d) {\n              return d.getSeconds();\n            }\n          ],\n\n          [\n            '%H:%M',\n            function (d) {\n              return d.getMinutes();\n            }\n          ],\n\n          [\n            '%H',\n            function (d) {\n              return d.getHours();\n            }\n          ],\n\n          [\n            '%a %d',\n            function (d) {\n              return d.getDay() && d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%b %d',\n            function (d) {\n              return d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%B',\n            function (d) {\n              return d.getMonth();\n            }\n          ],\n\n          [\n            '%Y',\n            function () {\n              return true;\n            }\n          ]\n        ]);\n      }\n      this.__config = {\n        x: d => d.time, // given d in data, returns the (temporal) x-value\n        y: d => +d.value, // given d in data, returns the (quantitative) y-value\n        z: d => d.key, // given d in data, returns the (categorical) z-value\n        color: d => d && this._dataSetConfigs[d].color, // stroke color of line, as a constant or a function of *z*\n        title: d => cv.util.String.sprintf(format, d.value), // given d in data, returns the title text\n        curve: d3.curveLinear, // method of interpolation between points\n        marginTop: 12, // top margin, in pixels\n        marginRight: 24, // right margin, in pixels\n        marginBottom: 20, // bottom margin, in pixels\n        marginLeft: 24, // left margin, in pixels\n        width: 392, // outer width, in pixels\n        height: 192, // outer height, in pixels\n        aspectRatio: 392/192,\n        xType: d3.scaleTime, // type of x-scale\n        xFormat: timeFormat, // a format specifier string for the x-axis\n        yType: d3.scaleLinear, // type of y-scale\n        yFormat: undefined, // a format specifier string for the y-axis\n        yLabel: undefined, // a label for the y-axis\n        strokeLinecap: undefined, // stroke line cap of line\n        strokeLinejoin: undefined, // stroke line join of line\n        strokeWidth: 1.5, // stroke width of line\n        strokeOpacity: undefined, // stroke opacity of line\n        mixBlendMode: 'normal', // blend mode of lines\n        showArea: d => this._dataSetConfigs[d].showArea, // show area below the line,\n        gradient: d => this._dataSetConfigs[d].gradient, // use gradient for area\n        showXAxis: !this._element.hasAttribute('show-x-axis') || this._element.getAttribute('show-x-axis') === 'true',\n        showYAxis: !this._element.hasAttribute('show-y-axis') || this._element.getAttribute('show-y-axis') === 'true',\n        xPadding: 0.1 // amount of x-range to reserve to separate bars\n      };\n\n      this._initializing = false;\n      this.__updateTitle();\n      qx.locale.Manager.getInstance().addListener('changeLocale', this._onLocaleChanged, this);\n\n      // check if we have a read address for live updates\n      const datasetSources = Array.from(this._element.querySelectorAll(':scope > dataset')).map(elem => elem.getAttribute('src'));\n      const readAddresses = Array.from(element.querySelectorAll(':scope > cv-address:not([mode=\"write\"])')).filter(elem => datasetSources.includes(elem.getAttribute('target')));\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    _onLocaleChanged() {\n      this.__updateTitle();\n      const popup = this._headerFooterParent.querySelector('div.popup.series');\n      if (popup) {\n        for (const option of popup.querySelectorAll('cv-option')) {\n          option.textContent = this._seriesToShort(option.getAttribute('key'));\n        }\n      }\n    },\n\n    onStateUpdate(ev) {\n      const targetDataset = this._element.querySelector(':scope > dataset[src=\"'+ev.detail.target+'\"]');\n      const config = this._dataSetConfigs ? this._dataSetConfigs[ev.detail.target] : null;\n      if (targetDataset && config) {\n        let ts = Date.now();\n        if (config.aggregationInterval) {\n          const mins = config.aggregationInterval * 60 * 1000;\n          ts = Math.round(ts / mins) * mins;\n        }\n        this._renderChart({\n          src: ev.detail.target,\n          time: ts,\n          value: ev.detail.state\n        }, true);\n      }\n    },\n\n    _onSeriesPrev() {\n      this.setCurrentPeriod(this.getCurrentPeriod()+1);\n    },\n\n    _onSeriesChange(select) {\n      if (this.getCurrentSeries() !== select) {\n        this._initializing = true;\n        // reset offset when series changed\n        this.resetCurrentPeriod();\n        this._initializing = false;\n        // reset configuration, we need a new one\n        this._chartConf = null;\n        this.setCurrentSeries(select);\n      }\n    },\n\n    _onSeriesNext() {\n      const currentPeriod = this.getCurrentPeriod();\n      if (currentPeriod > 0) {\n        this.setCurrentPeriod(currentPeriod-1);\n      }\n    },\n\n    refresh() {\n      this._loaded = false;\n      this.__updateTimeRange();\n      this._loadData();\n    },\n\n    // triggered after a change os series or period\n    _refreshData() {\n      const nextButton = this.getHeader('.next');\n      if (nextButton) {\n        if (this.getCurrentPeriod() === 0) {\n          nextButton.setAttribute('disabled', 'disabled');\n        } else {\n          nextButton.removeAttribute('disabled');\n        }\n      }\n\n      if (!this._initializing && this.getStartTime() > 0 && this.getEndTime() > 0) {\n        this._loaded = false;\n        this._loadData();\n      }\n      this.__updateTitle();\n    },\n\n    _applyCurrentSeries(series) {\n      const currentSelection = this.getHeader('.popup.series > cv-option[selected=\"selected\"]');\n      let alreadySelected = false;\n      if (currentSelection) {\n        if (currentSelection.getAttribute('key') !== series) {\n          currentSelection.removeAttribute('selected');\n        } else {\n          alreadySelected = true;\n        }\n      }\n      if (!alreadySelected) {\n        const newSelection = this.getHeader(`.popup.series > cv-option[key=\"${series}\"]`);\n        if (newSelection) {\n          newSelection.setAttribute('selected', 'selected');\n        }\n      }\n      this.__updateTimeRange();\n    },\n\n    __updateTimeRange() {\n      const series = this.getCurrentSeries();\n\n      const currentPeriod = this.getCurrentPeriod();\n      let end = new Date();\n      let periodStart = new Date();\n      let interval = 0;\n      switch (series) {\n        case 'hour':\n          interval = 60 * 60;\n          periodStart.setHours(periodStart.getHours() - currentPeriod, 0, 0, 0);\n          end.setHours(periodStart.getHours() + 1, 0, 0, 0);\n          break;\n\n        case 'day':\n          interval = 24 * 60 * 60;\n          periodStart.setDate(periodStart.getDate() - currentPeriod);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setTime(periodStart.getTime());\n          end.setDate(periodStart.getDate() + 1);\n          end.setHours(0, 0, 0, 0);\n          break;\n\n        case 'week':\n          interval = 7 * 24 * 60 * 60;\n          periodStart.setDate(periodStart.getDate() - (periodStart.getDay() || 7) + 1 - 7 * currentPeriod);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setTime(periodStart.getTime());\n          end.setDate(periodStart.getDate() + 7);\n          end.setHours(0, 0, 0, 0);\n          break;\n\n        case 'month':\n          interval = 30 * 24 * 60 * 60;\n          periodStart.setMonth(periodStart.getMonth() - currentPeriod);\n          periodStart.setDate(1);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setTime(periodStart.getTime());\n          end.setMonth(periodStart.getMonth() + 1, 1);\n          end.setHours(0, 0, 0, 0);\n          break;\n\n        case 'year':\n          interval = 365 * 24 * 60 * 60;\n          periodStart.setFullYear(periodStart.getFullYear() - currentPeriod);\n          periodStart.setMonth(0, 1);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setFullYear(periodStart.getFullYear() + 1);\n          end.setMonth(periodStart.getMonth() + 1, 1);\n          end.setHours(0, 0, 0, 0);\n          break;\n      }\n      let startTs = Math.round(periodStart.getTime()/1000);\n      let endTs = Math.round(end.getTime()/1000);\n      if (this._element.getAttribute('background') === 'true' || !this._element.hasAttribute('selection')) {\n        // when have no navigation, we can just use the old relative time range now - interval\n        startTs = endTs -  interval;\n      }\n      this.setStartTime(startTs);\n      this.setEndTime(endTs);\n      this._refreshData();\n    },\n\n    _loadData() {\n      if (this._loaded && Date.now() - this._loaded < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      if (!client) {\n        return;\n      }\n      if (!client.isConnected()) {\n        client.addListenerOnce('changeConnected', () => {\n          this._loadData();\n        });\n        return;\n      }\n      let url;\n      const dataSets = Array.from(this._element.querySelectorAll(':scope > dataset'));\n      const datasetSources = dataSets.map(elem => elem.getAttribute('src'));\n      for (const line of this._element.querySelectorAll(':scope > h-line, v-line')) {\n        if (line.hasAttribute('src') && !datasetSources.includes(line.getAttribute('src'))) {\n          dataSets.push(line);\n        }\n      }\n\n      const promises = [];\n      if (!this._dataSetConfigs) {\n        this._dataSetConfigs = {};\n        for (let dataSet of dataSets) {\n          let ts = {\n            showArea: dataSet.localName === 'dataset',\n            color: '#FF9900',\n            chartType: 'line',\n            element: dataSet,\n            title: '',\n            curve: 'linear',\n            aggregationInterval: 0\n          };\n\n          let attr;\n          let name;\n          let value;\n          for (let i = 0; i < dataSet.attributes.length; i++) {\n            attr = dataSet.attributes.item(i);\n            // CamelCase attribute names\n            name = attr.name\n              .split('-')\n              .map((part, i) => {\n                if (i > 0) {\n                  return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n                }\n                return part;\n              })\n              .join('');\n            value = attr.value;\n            if (value === 'true' || value === 'false') {\n              value = value === 'true';\n            } else if (/^\\d+$/.test(value)) {\n              value = parseInt(value);\n            } else if (/^[\\d.]+$/.test(value)) {\n              value = parseFloat(value);\n            }\n            ts[name] = value;\n          }\n          let type = ts.src.split('://')[0].toLowerCase();\n          if (type.startsWith('plugin+')) {\n            ts.subType = type.substring(7);\n            type = type.substring(0, 6);\n          }\n          ts.type = type;\n          let key = ts.src;\n          switch (type) {\n            case 'flux':\n              ts.source = new cv.io.timeseries.FluxSource(ts.src, this);\n              if (ts.source.isInline()) {\n                const fluxQuery = dataSet.textContent.trim();\n                key = cv.ConfigCache.hashCode(fluxQuery).toString();\n                if (!this.__srcToHash[ts.src]) {\n                  this.__srcToHash[ts.src] = key;\n                } else {\n                  this.error(`duplicate flux inline source, you must append an unique anchor ID like ${ts.src}#12345`, ts.src);\n                }\n                ts.source.setQueryTemplate(fluxQuery);\n              }\n              break;\n\n            case 'openhab':\n              ts.source = new cv.io.timeseries.OpenhabPersistenceSource(ts.src, this);\n              break;\n\n            case 'rrd':\n              ts.source = new cv.io.timeseries.RRDSource(ts.src, this);\n              break;\n\n            case 'demo':\n              ts.source = new cv.io.timeseries.DemoSource(ts.src, this);\n              break;\n\n            case 'plugin':\n              ts.source = new cv.io.timeseries.Plugin(ts.src, this);\n              break;\n\n            default:\n              this.error('unknown chart data source type ' + type);\n              break;\n          }\n          ts.key = key;\n          this._dataSetConfigs[key] = ts;\n        }\n      }\n\n      for (const key in this._dataSetConfigs) {\n        const ts = this._dataSetConfigs[key];\n        let proxy = false;\n        let options = {ttl: this.getRefresh()};\n        if (ts.source) {\n          const config = ts.source.getRequestConfig(\n            this.getStartTime(),\n            this.getEndTime(),\n            this.getCurrentSeries(),\n            this.getCurrentPeriod()\n          );\n          url = config.url;\n          proxy = config.proxy;\n          options = Object.assign(options, config.options);\n\n          if (config.fetch === false) {\n            // data retrieval is handled by the source itself\n            promises.push(ts.source.fetchData(this.getStartTime(), this.getEndTime(), this.getCurrentSeries(), this.getCurrentPeriod())\n              .then(data => {\n                this.debug('data successfully loaded by source');\n                if (ts.source) {\n                  data = ts.source.processResponse(data);\n                }\n                if (!this._lastRefresh) {\n                  this._lastRefresh = Date.now();\n                }\n                return {\n                  data: data || [],\n                  ts: ts\n                };\n              })\n              .catch(err => {\n                this._onStatusError(ts, url, err);\n                return {\n                  data: [],\n                  ts: ts\n                };\n              })\n            );\n          }\n        }\n\n        if (!url) {\n          continue;\n        }\n\n        this.debug('loading', url);\n        promises.push(\n          cv.io.Fetch.cachedFetch(url, options, proxy, client)\n            .then(data => {\n              this.debug('successfully loaded', url);\n              if (ts.source) {\n                data = ts.source.processResponse(data);\n              }\n              if (!this._lastRefresh) {\n                this._lastRefresh = Date.now();\n              }\n              return {\n                data: data || [],\n                ts: ts\n              };\n            })\n            .catch(err => {\n              this._onStatusError(ts, url, err);\n              return {\n                data: [],\n                ts: ts\n              };\n            })\n        );\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess(data) {\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          // TODO: stacked bar times (entry.ts.chartType === 'stacked-bar') must be aggregated, they have to be at the same time index for stacking\n          const mins = entry.ts.aggregationInterval > 0 ? entry.ts.aggregationInterval * 60 * 1000 : 0;\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              key: entry.ts.key,\n              src: entry.ts.src,\n              time: mins > 0\n                ? Math.round(time / mins) * mins : time,\n              value\n            });\n          }\n        }\n      }\n\n      if (this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true') {\n        // no margins\n        this.__config = Object.assign(this.__config, {\n          marginRight: 0,\n          marginBottom: 0,\n          marginLeft: 0\n        });\n\n        // because we have no margins we need to cut the overflow on the tile\n        let tile = this._element.parentElement;\n        while (tile && tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n        }\n        if (tile && tile.localName === 'cv-tile') {\n          tile.style.overflow = 'hidden';\n        }\n      }\n\n      // wait some time to let the element size settle\n      window.requestAnimationFrame(() => {\n        setTimeout(() => {\n          this._onRendered(chartData);\n        }, 100);\n      });\n    },\n\n    _onRendered(chartData, retries) {\n      if (this.__resizeTimeout) {\n        clearTimeout(this.__resizeTimeout);\n        this.__resizeTimeout = null;\n      }\n      if (this.isVisible()) {\n        const [width, height] = this._getSize();\n        if ((width < 20 || height < 10) && (!retries || retries <= 5)) {\n          // this makes no sense\n          this.__resizeTimeout = setTimeout(() => {\n            this._onRendered(chartData, retries > 0 ? retries + 1 : 1);\n          }, 150);\n        }\n        if (width < 20 || height < 10) {\n          // do nothing, these values are invalid\n          return;\n        }\n\n        this.__config.width = width;\n        this.__config.height = height;\n        d3.select(this._element).select('svg')\n          .attr('viewBox', `0, 0, ${width}, ${height}`);\n        if (chartData) {\n          this._renderChart(chartData);\n          this._loaded = Date.now();\n        }\n      }\n    },\n\n    _getSize() {\n      const parent = this._element.parentElement;\n      let padding = this._element.getAttribute('background') === 'true' ? 0 : 8;\n      let containerWidth = this._element.offsetWidth - padding;\n      let containerHeight = this._element.offsetHeight - padding;\n      let factor = 1;\n\n      const landscape = containerWidth > containerHeight;\n      let width = 0;\n      let height = 0;\n\n      if (landscape && containerHeight > 0) {\n        // obeying aspect ratio in landscape mode is not necessary\n        width = Math.round(containerWidth / factor);\n        height = Math.round(containerHeight / factor);\n      } else {\n        width = Math.round(containerWidth / factor);\n        height = width / cv.ui.structure.tile.components.Chart.DEFAULT_ASPECT_RATIO;\n      }\n      if (!this._element.style.height && (parent.localName === 'cv-popup' && (parent.getAttribute('fullscreen') === 'true') ||\n        (this._element.getAttribute('allow-fullscreen') === 'true' &&\n          parent.parentElement.classList.contains('fullscreen')))) {\n        // the parent container has height: auto, so we need to have one\n        this._element.style.height = (height + this.__config.marginTop + this.__config.marginBottom) + 'px';\n      }\n      return [width, height];\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n       * @param date\n       */\n      function multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), JSON.stringify(err))\n      });\n\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n    /**\n     * Get svg element selection (create if not exists)\n     * @param parent d3.selection of the parent this element should be a child of\n     * @param nodeName {String} Element name\n     * @param classes {Array<String>} array of css classes used to identify this element\n     * @param attributes {Map<String, String>?} set these attributes if the element has to be created, when it already exists these are ignored\n     * @private\n     */\n    _getSvgElement(parent, nodeName, classes, attributes) {\n      let elem = parent.select(nodeName + '.' + classes.join('.'));\n      if (elem.empty()) {\n        elem = parent.append(nodeName).attr('class', classes.join(' '));\n        if (attributes) {\n          for (const name in attributes) {\n            elem.attr(name, attributes[name]);\n          }\n        }\n      }\n      return elem;\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param single\n     * @private\n     */\n    _renderChart(data, single) {\n      const config = this.__config;\n      const svg = d3.select(this._element).select('svg');\n\n      // Compute values.\n      let X;\n      let Y;\n      let Z;\n      let O;\n      let T;\n      if (single) {\n        if (!this._helpers) {\n          return;\n        }\n        X = this._helpers.X;\n        Y = this._helpers.Y;\n        Z = this._helpers.Z;\n        O = this._helpers.O;\n        T = this._helpers.T;\n        if (X[X.length-1] === data.time) {\n          // replace last value instead of adding one\n          Y[Y.length-1] = data.value;\n        } else {\n          X.push(data.time);\n          Y.push(data.value);\n          Z.push(data.key);\n          O.push(data);\n          T.push(config.title === undefined ? data.src : config.title === null ? null : config.title(data));\n\n          // cleanup\n          X.shift();\n          Y.shift();\n          Z.shift();\n          O.shift();\n          T.shift();\n        }\n      } else {\n        X = d3.map(data, config.x);\n        Y = d3.map(data, config.y);\n        Z = d3.map(data, config.z);\n        O = d3.map(data, d => d);\n        // Compute titles.\n        T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n      }\n\n      // Compute default domains, and unique the z-domain.\n      let xDomain = d3.extent(X);\n      let minVal = 0;\n      let maxVal = 0;\n      if (this._element.hasAttribute('min')) {\n        const min = parseFloat(this._element.getAttribute('min'));\n        if (!isNaN(min)) {\n          minVal = min;\n        }\n      } else {\n        minVal = d3.min(Y);\n        if (minVal > 1.0) {\n          minVal -= 1;\n        }\n      }\n      if (this._element.hasAttribute('max')) {\n        const max = parseFloat(this._element.getAttribute('max'));\n        if (!isNaN(max)) {\n          maxVal = max;\n        }\n      } else {\n        maxVal = d3.max(Y);\n        if (maxVal > 1.0) {\n          // add some inner chart padding\n          maxVal += 1;\n        } else {\n          maxVal += 0.1;\n        }\n      }\n      const yDomain = [minVal, maxVal];\n      const zDomain = new d3.InternSet(Z);\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => zDomain.has(Z[i]));\n\n      if (config.showYAxis) {\n        const maxValue = config.yFormat ? config.yFormat(yDomain[1]) : yDomain[1].toFixed(maxVal < 1 ? 2 : 1);\n        // check if we need more space for the y-axis\n        if (maxValue.length >= 2) {\n          config.marginLeft = maxValue.length * 8;\n        }\n      }\n\n      const xTicks = config.width / 80;\n      const yTicks = config.height / 60;\n      const additionalXRangePadding = this._element.getAttribute('background') === 'true' ? 0 : 2;\n\n      const xRange = [config.marginLeft + additionalXRangePadding, config.width - config.marginRight - additionalXRangePadding]; // [left, right]\n      if (!this._chartConf) {\n        const yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n        // initialize everything once\n        this._chartConf = {\n          // x/y scales\n          x: config.xType().range(xRange),\n          y: config.yType().range(yRange)\n        };\n        this._chartConf.xAxis = config.showXAxis\n          ? d3.axisBottom(this._chartConf.x)\n            .ticks(xTicks)\n            .tickSizeOuter(0)\n            .tickFormat(config.xFormat)\n          : undefined;\n        this._chartConf.yAxis = config.showYAxis\n          ? d3.axisLeft(this._chartConf.y).ticks(yTicks, config.yFormat)\n          : undefined;\n\n\n        // add elements\n        const showGrid = this._element.hasAttribute('show-grid') ? this._element.getAttribute('show-grid') : 'xy';\n        if (showGrid.includes('x')) {\n          this._chartConf.xGrid = d3.axisBottom(this._chartConf.x).ticks(xTicks)\n            .tickSize(-config.height + config.marginBottom + config.marginTop)\n            .tickFormat('');\n          this._getSvgElement(svg, 'g', ['grid', 'x'], {\n            transform: `translate(0,${config.height - config.marginBottom})`\n          })\n            .call(this._chartConf.xGrid);\n        }\n        if (showGrid.includes('y')) {\n          this._chartConf.yGrid = d3.axisLeft(this._chartConf.y).ticks(yTicks)\n            .tickSize(-config.width + config.marginRight + config.marginLeft)\n            .tickFormat('');\n\n          this._getSvgElement(svg, 'g', ['grid', 'y'], {\n            transform: `translate(${config.marginLeft},0)`\n          })\n            .call(this._chartConf.yGrid);\n        }\n\n        if (config.showXAxis) {\n          this._getSvgElement(svg, 'g', ['axis', 'x'])\n            .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n            .call(this._chartConf.xAxis);\n        }\n\n        if (config.showYAxis) {\n          let yAxisElement = this._getSvgElement(svg, 'g', ['axis', 'y'])\n            .attr('transform', `translate(${config.marginLeft},0)`);\n\n          if (config.label && yAxisElement.select('text').empty()) {\n            yAxisElement.append('text')\n              .attr('x', -config.marginLeft)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(config.yLabel);\n          }\n\n          yAxisElement\n            .call(this._chartConf.yAxis)\n            .call(g => g.select('.domain').remove());\n        }\n\n        // find chart types\n        const lineGroups = new Map();\n        const areaGroups = new Map();\n        const barGroups = new Map();\n        const stackedBarGroups = new Map();\n        const lineFunctions = {};\n        const areaFunctions = {};\n        let xBar;\n        let xzScale;\n\n        for (const key in this._dataSetConfigs) {\n          switch (this._dataSetConfigs[key].chartType) {\n            case 'line': {\n              const idx = I.filter(i => Z[i] === key);\n              lineGroups.set(key, idx);\n              const curveName = this._dataSetConfigs[key].curve || 'linear';\n              if (!Object.prototype.hasOwnProperty.call(lineFunctions, curveName)) {\n                let curveFunction;\n                switch (curveName) {\n                  case 'linear':\n                    curveFunction = d3.curveLinear;\n                    break;\n\n                  case 'step':\n                    curveFunction = d3.curveStep;\n                    break;\n\n                  case 'natural':\n                    curveFunction = d3.curveNatural;\n                    break;\n                }\n\n                if (curveFunction) {\n                  // Construct a line generator.\n                  lineFunctions[curveName] = d3\n                    .line()\n                    .curve(curveFunction)\n                    .x(i => this._chartConf.x(this._helpers.X[i]))\n                    .y(i => this._chartConf.y(this._helpers.Y[i]));\n                }\n\n                if (this._dataSetConfigs[key].chartType === 'line' && typeof config.showArea === 'function' && config.showArea(key)) {\n                  areaGroups.set(key, idx);\n                  if (curveFunction) {\n                    // Construct a line generator.\n                    const minY = this._chartConf.y.range()[0];\n                    areaFunctions[curveName] = d3\n                      .area()\n                      .curve(curveFunction)\n                      .x(i => this._chartConf.x(this._helpers.X[i]))\n                      .y0(() => minY)\n                      .y1(i => this._chartConf.y(this._helpers.Y[i]));\n                  }\n                }\n              }\n              break;\n            }\n\n            case 'bar':\n              barGroups.set(key, I.filter(i => Z[i] === key));\n              if (!xBar) {\n                xBar = d3.scaleBand().range(this._chartConf.x.range()).padding(config.xPadding);\n              }\n              if (!xzScale) {\n                xzScale = d3.scaleBand().padding(0.05);\n              }\n              break;\n\n            case 'stacked-bar':\n              stackedBarGroups.set(key, I.filter(i => Z[i] === key));\n              break;\n          }\n        }\n\n        this._chartConf.lineGroups = lineGroups;\n        this._chartConf.areaGroups = areaGroups;\n        this._chartConf.barGroups = barGroups;\n        this._chartConf.stackedBarGroups = stackedBarGroups;\n        this._chartConf.lineFunctions = lineFunctions;\n        this._chartConf.areaFunctions = areaFunctions;\n        this._chartConf.xBar = xBar;\n        if (xzScale) {\n          this._chartConf.xz = xzScale;\n        }\n\n        // prepare elements for chart elements\n        if (this._chartConf.lineGroups.size > 0) {\n          this._chartConf.lineContainer = this._getSvgElement(svg, 'g', ['line'], {\n            fill: 'none',\n            stroke: typeof config.color === 'string' ? config.color : null,\n            'stroke-linecap': config.strokeLinecap,\n            'stroke-linejoin': config.strokeLinejoin,\n            'stroke-width': config.strokeWidth,\n            'stroke-opacity': config.strokeOpacity\n          });\n        }\n        if (this._chartConf.areaGroups.size > 0) {\n          this._chartConf.areaContainer = this._getSvgElement(svg, 'g', ['area'], {\n            stroke: 'none',\n            fill: typeof config.color === 'string' ? this.__opacifyColor(config.color, '30') : null\n          });\n        }\n        if (this._chartConf.barGroups.size > 0) {\n          this._chartConf.barContainer = this._getSvgElement(svg, 'g', ['bars']);\n        }\n      }\n\n      // apply domains to scales\n      this._chartConf.x.domain(xDomain);\n      this._chartConf.y.domain(yDomain);\n\n      this._helpers = { X, Y, I, T, Z, O };\n\n      if (this._chartConf.xAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'x'])\n          .call(this._chartConf.xAxis);\n      }\n\n      if (this._chartConf.yAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'y'])\n          .call(this._chartConf.yAxis);\n      }\n      if (this._chartConf.xBar) {\n        this._chartConf.xBar.domain(new d3.InternSet(X));\n      }\n      if (this._chartConf.xz) {\n        this._chartConf.xz.domain(zDomain);\n        this._chartConf.x.range([xRange[0], xRange[1] - this._chartConf.xBar.bandwidth()]);\n        this._chartConf.xz.range([0, this._chartConf.xBar.bandwidth()]);\n      }\n\n      // update groups\n      for (const key of this._chartConf.lineGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key);\n        this._chartConf.lineGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.areaGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.areaGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.barGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.barGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.stackedBarGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.stackedBarGroups.set(key, idx);\n      }\n\n      this.__config = config;\n      this._dot = svg.select('g.dot');\n\n      // show zero line in grid for non-zero based charts\n      if (minVal !== 0) {\n        let targetContainer = this._chartConf.lineContainer || this._chartConf.areaContainer || this._chartConf.barContainer;\n        let yValue = 0.0;\n        let data = [0, X.length-1];\n        let lineElem = targetContainer.select('.zero-line');\n        if (lineElem.empty()) {\n          lineElem = targetContainer.append('line')\n            .attr('class', 'zero-line')\n            .attr('stroke', 'currentColor')\n            .attr('stroke-opacity', '15%');\n        }\n        if (X.length > 0) {\n          const x1 = this._chartConf.x(X[data[0]]);\n          const x2 = this._chartConf.x(X[X.length - 1]); // always draw until end of chart (not until end of src dataset)\n          const y = this._chartConf.y(yValue);\n          lineElem\n            .attr('x1', x1)\n            .attr('x2', x2)\n            .attr('y1', y)\n            .attr('y2', y);\n        }\n      }\n\n      const t = d3.transition()\n        .duration(single ? 0 : 500)\n        .ease(d3.easeLinear);\n\n      if (this._chartConf.lineContainer) {\n        this._chartConf.lineContainer\n          .selectAll('path')\n          .data(new Map([...this._chartConf.lineGroups].filter(([k, v]) => {\n            const config = this._dataSetConfigs[k];\n            // do not use h-/v-line here, only datasets\n            return config.element.localName === 'dataset';\n          })))\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.lineFunctions[curveName] || this._chartConf.lineFunctions.linear;\n            const val = func(d[1]);\n            return val;\n          });\n      }\n\n      // Add the area\n      if (this._chartConf.areaContainer) {\n        this._chartConf.areaContainer\n          .selectAll('path')\n          .data(this._chartConf.areaGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('fill', typeof config.color === 'function' ? p => {\n                const color = config.color(p[0]);\n                const gradient = typeof config.gradient === 'function' ? config.gradient(p[0]) : false;\n                if (gradient) {\n                  const gradId = `${color.replaceAll(/\\W/g, '')}Grad`;\n                  let lg = svg.select('#' + gradId);\n                  if (lg.empty()) {\n                    const lg = svg.append('defs').append('linearGradient')\n                      .attr('id', gradId)\n                      .attr('x1', '0%')\n                      .attr('x2', '0%')\n                      .attr('y1', '0%')\n                      .attr('y2', '100%');\n                    \n                    lg.append('stop')\n                      .attr('offset', '0%')\n                      .style('stop-color', color)\n                      .style('stop-opacity', 0.7);\n\n                    lg.append('stop')\n                      .attr('offset', '100%')\n                      .style('stop-color', color)\n                      .style('stop-opacity', 0);\n                  }\n                  return 'url(#' + gradId + ')';\n                } \n                  return this.__opacifyColor(color, '30');\n              }: null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.areaFunctions[curveName] || this._chartConf.areaFunctions.linear;\n            return func(d[1]);\n          });\n      }\n\n      if (this._chartConf.barContainer) {\n        const yMin = this._chartConf.y.range()[0];\n        this._chartConf.barContainer\n          .selectAll('g')\n          .data(this._chartConf.barGroups)\n          .join('g')\n          .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n          .attr('x', d => {\n            const x = this._chartConf.x(X[d.value]);\n            const xz =  this._chartConf.xz(d.key);\n            return x + xz;\n          })\n          .attr('y', d => this._chartConf.y(Y[d.value]))\n          .attr('width', this._chartConf.xz.bandwidth())\n          .transition(t)\n          .attr('height', d => yMin - this._chartConf.y(Y[d.value]));\n      }\n\n      // add fixed/calculated lines\n      this.__addLines(X, Y);\n\n      // dot must be added last\n      const dot = svg.select('g.dot');\n      if (dot.empty()) {\n        svg.append('g')\n          .attr('class', 'dot')\n          .attr('display', 'none')\n          .attr('fill', 'currentColor')\n          .append('circle')\n          .attr('r', 2.5);\n      }\n      this._dot = svg.select('g.dot');\n    },\n\n    __addLines(X, Y) {\n      for (const [i, line] of this._element.querySelectorAll(':scope > h-line, v-line').entries()) {\n        let key = line.getAttribute('src');\n        if (this.__srcToHash[key]) {\n          key = this.__srcToHash[key];\n        }\n        const name = line.localName;\n        let targetContainer = null;\n        let data = null;\n        let value = NaN;\n        if (key) {\n          if (this._chartConf.lineGroups.get(key)) {\n            targetContainer = this._chartConf.lineContainer;\n            data = this._chartConf.lineGroups.get(key);\n          } else if (this._chartConf.areaGroups.get(key)) {\n            targetContainer = this._chartConf.areaContainer;\n            data = this._chartConf.areaGroups.get(key);\n          } else if (this._chartConf.barGroups.get(key)) {\n            targetContainer = this._chartConf.barContainer;\n            data = this._chartConf.barGroups.get(key);\n          }\n          if (!data) {\n            this.error('no data found for key ' + key);\n            continue;\n          }\n          if (name === 'h-line') {\n            // we can only do calculations for values on the Y-Axis for horizontal lines\n            switch (line.getAttribute('value')) {\n              case 'avg': {\n                let sum = 0.0;\n                for (const di of data) {\n                  sum += Y[di];\n                }\n                value = sum / data.length;\n                break;\n              }\n\n              case 'max':\n                value = d3.max(Y.filter((v, i) => data.includes(i), d => d));\n                break;\n\n              case 'min':\n                value = d3.min(Y.filter((v, i) => data.includes(i), d => d));\n                break;\n\n              default:\n                this.error('unknown value calculation: ' + line.getAttribute('value'));\n                break;\n            }\n          } else {\n            value = X[data[0]];\n          }\n        } else {\n          targetContainer = this._chartConf.lineContainer || this._chartConf.areaContainer || this._chartConf.barContainer;\n          if (name === 'h-line') {\n            value = parseFloat(line.getAttribute('value'));\n          } else {\n            value = new Date(line.getAttribute('value')).getTime();\n          }\n          data = [0, X.length-1];\n        }\n        if (!targetContainer) {\n          continue;\n        }\n\n        let lineElem = targetContainer.select(`.${name}-${i}`);\n        if (isNaN(value) && !lineElem.empty()) {\n          // remove line\n          lineElem.remove();\n          if (line.getAttribute('show-value') === 'true') {\n            targetContainer.select(`.${name}-value-${i}`).remove();\n          }\n        } else if (!isNaN(value)) {\n          const color = line.getAttribute('color') || 'currentColor';\n          if (lineElem.empty()) {\n            lineElem = targetContainer.append('line')\n              .attr('class', `${name}-${i}`)\n              .attr('stroke', color);\n          }\n          let formatAttribute = 'y-format';\n          let x1;\n          let x2;\n          let y1;\n          let y2 = 0;\n          if (name === 'h-line') {\n            const [xMin, xMax] = this._chartConf.x.domain();\n            x1 = this._chartConf.x(xMin);\n            x2 = this._chartConf.x(xMax); // always draw until end of chart (not until end of src dataset)\n            y1 = this._chartConf.y(value);\n            y2 = y1;\n          } else {\n            const [yMin, yMax] = this._chartConf.y.domain();\n            y1 = this._chartConf.y(yMin);\n            y2 = this._chartConf.y(yMax);\n            x1 = this._chartConf.x(value);\n            x2 = x1;\n\n            formatAttribute = 'x-format';\n          }\n\n          lineElem\n            .attr('x1', x1)\n            .attr('x2', x2)\n            .attr('y1', y1)\n            .attr('y2', y2);\n\n          if (line.getAttribute('show-value') === 'true') {\n            const format = line.hasAttribute('format') ? line.getAttribute('format')\n              : (this._element.hasAttribute(formatAttribute) ? this._element.getAttribute(formatAttribute) : '%s');\n            let valueElem = targetContainer.select(`.${name}-value-${i}`);\n            if (valueElem.empty()) {\n              valueElem = targetContainer.append('text')\n                .attr('class', `${name}-value-${i}`)\n                .attr('fill', line.getAttribute('value-color') || color)\n                .attr('font-size', '10')\n                .attr('text-anchor', 'start');\n            }\n            if (name === 'h-line') {\n              // show value on right side of the chart\n              valueElem\n                .attr('x', x2 + 2)\n                .attr('y', y1 + 5)\n                .text(cv.util.String.sprintf(format, value));\n            } else {\n              // show value on top of the chart\n              valueElem\n                .attr('x', x1 + 2)\n                .attr('y', y2)\n                .text(d3.timeFormat(format)(value));\n            }\n          }\n        }\n      }\n    },\n\n    _onPointerEntered(ev) {\n      if (this._loaded) {\n        this.__toolTipTimer = setTimeout(() => {\n          this.__activateTooltip(true, ev);\n          this.__toolTipTimer = null;\n        }, 500);\n      }\n    },\n\n    _onPointerLeft(ev) {\n      if (this.__toolTipTimer) {\n        clearTimeout(this.__toolTipTimer);\n      }\n\n      if (this._loaded) {\n        if (ev.relatedTarget !== this._tooltip) {\n          this.__activateTooltip(false);\n        }\n      }\n    },\n\n    __activateTooltip(val, ev) {\n      this.__showTooltip = val;\n      if (val) {\n        if (this._dot) {\n          this._dot.attr('display', null);\n          this._dot.raise();\n        }\n        this._tooltip.style.display = 'block';\n        this._onPointerMoved(null, true);\n      } else {\n        if (this._dot) {\n          this._dot.attr('display', 'none');\n        }\n        const svg = d3.select(this._element).select('svg');\n        svg.node().value = null;\n        svg.dispatch('input', {bubbles: true});\n        this._tooltip.style.display = 'none';\n      }\n    },\n\n    _onPointerMoved(event, center) {\n      if (this._loaded && this.__showTooltip) {\n        let xm = 0;\n        let ym = 0;\n        if (event) {\n          [xm, ym] = d3.pointer(event);\n        } else if (center) {\n          xm = this.__config.width/2;\n          ym = this.__config.height/2;\n        } else {\n          return;\n        }\n        const {X, Y, I, T, Z, O} = this._helpers;\n        const {x, y, xz} = this._chartConf;\n        const i = d3.least(I, i => Math.hypot(x(X[i]) - xm, y(Y[i]) - ym));\n        const scaleFactorX = this._element.offsetWidth / this.__config.width;\n        const scaleFactorY = this._element.offsetHeight / this.__config.height;\n        // closest point\n        const xOffset = xz ? (xz(Z[i]) + (typeof xz.bandwidth === 'function' ? xz.bandwidth() / 2 : 0)) : 0;\n        this._dot.attr('transform', `translate(${x(X[i]) + xOffset},${y(Y[i])})`);\n        if (T) {\n          const cursorOffset = event && event.pointerType === 'mouse' ? 16 : 40;\n          const timeString = this.__config.xFormat(new Date(X[i]));\n          let top = ym * scaleFactorY - this._tooltip.offsetHeight;\n          if (top < 0) {\n            top += cursorOffset + this._tooltip.offsetHeight;\n          } else {\n            top -= cursorOffset;\n          }\n\n          let left = xm * scaleFactorX;\n          if (left > this._element.offsetWidth / 2) {\n            left -= this._tooltip.offsetWidth + cursorOffset;\n          } else {\n            left += cursorOffset;\n          }\n\n          const key = Z[i];\n          const lineTitle = this._dataSetConfigs[key] && this._dataSetConfigs[key].title ? this._dataSetConfigs[key].title + ': ' : '';\n          this._tooltip.innerHTML = `${timeString}<br/>${lineTitle}${T[i]}`;\n          this._tooltip.style.left = left + 'px';\n          this._tooltip.style.top = top + 'px';\n        }\n        d3.select(this._element).select('svg').property('value', O[i]).dispatch('input', {bubbles: true});\n      }\n    },\n\n    __updateTitle() {\n      if (this._navigationEnabled) {\n        let title = this.getHeader('label.title span');\n        if (title) {\n          let chartTitle = this._titleString || '';\n          title.textContent = (chartTitle ? chartTitle + ' - ' : '') + this._shownDateRange();\n        }\n      }\n    },\n\n    /**\n     * Converts series to a shot string that is shown in a select box\n     * @param series\n     * @private\n     */\n    _seriesToShort(series) {\n      switch (series) {\n        case 'hour':\n          return qx.locale.Manager.tr('Hour');\n\n        case 'day':\n          return qx.locale.Manager.tr('Day');\n\n        case 'week':\n          return qx.locale.Manager.tr('Week');\n\n        case 'month':\n          return qx.locale.Manager.tr('Month');\n\n        case 'year':\n          return qx.locale.Manager.tr('Year');\n      }\n      return '';\n    },\n\n    /**\n     * Convert the currently shown date range into a human-readable string\n     * @private\n     */\n    _shownDateRange() {\n      const series = this.getCurrentSeries();\n      const currentPeriod = this.getCurrentPeriod();\n      const date = new Date();\n      let format = new qx.util.format.DateFormat();\n      switch (series) {\n        case 'hour':\n          date.setHours(date.getHours() - currentPeriod, 0, 0);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('hmm', 'h:mm'));\n          return format.format(date);\n\n        case 'day':\n          if (currentPeriod === 0) {\n            return qx.locale.Manager.tr('today');\n          } else if (currentPeriod === 1) {\n            return qx.locale.Manager.tr('yesterday');\n          }\n          date.setDate(date.getDate() - currentPeriod);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMMd', 'd. MMM'));\n          return format.format(date);\n\n        case 'week':\n          date.setDate(date.getDate() - currentPeriod*7);\n          return qx.locale.Manager.trc('CW = calendar week', 'CW %1', this.getWeekNumber(date));\n\n        case 'month':\n          date.setMonth(date.getMonth() - currentPeriod);\n          if (date.getFullYear() === new Date().getFullYear()) {\n            // no year needed\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMM', 'MMM'));\n          } else {\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('yyMMM', 'MMM yy'));\n          }\n          return format.format(date);\n\n        case 'year':\n          return date.getFullYear() - currentPeriod;\n      }\n      return '';\n    },\n\n   getWeekNumber(d) {\n      d = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      // Set to the nearest Thursday: current date + 4 - current day number\n      d.setDate(d.getDate() + 4 - (d.getDay() || 7));\n      // Get first day of year\n      const yearStart = new Date(d.getFullYear(), 0, 1);\n      // Calculate full weeks to the nearest Thursday\n      return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n    },\n\n    /**\n     * add opacity to color\n     * @param color\n     * @param opacity {string} hex number 0 - 255\n     * @return {string|*}\n     * @private\n     */\n    __opacifyColor(color, opacity) {\n      if (color.startsWith('var(')) {\n        color = getComputedStyle(document.documentElement).getPropertyValue(color.substring(4, color.length-1));\n      }\n      if (color.startsWith('rgb(')) {\n        return 'rgba(' + color.substring(4, color.length-1) + ', ' + (parseInt(opacity, 16) / 255).toFixed(2) + ')';\n      } else if (color.startsWith('#') && color.length === 7) {\n        return color + opacity;\n      }\n      return color;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._chartConf = null;\n    this._helpers = null;\n    qx.locale.Manager.getInstance().removeListener('changeLocale', this._onLocaleChanged, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'chart',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Color.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a html color input\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Color', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MResize,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    CC_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __colorChooser: null,\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      }\n\n      // init components\n      const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'popup';\n      if (mode === 'popup') {\n        let popup = element.querySelector(':scope > cv-popup');\n        if (!popup) {\n          popup = document.createElement('cv-popup');\n          popup.setAttribute('modal', 'true');\n          if (element.hasAttribute('title')) {\n            popup.setAttribute('title', element.getAttribute('title'));\n          }\n          const addresses = {};\n          for (const elem of element.querySelectorAll(':scope > cv-address')) {\n            let src = elem.textContent;\n            let transform = elem.getAttribute('transform');\n            let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n            switch (elem.getAttribute('mode')) {\n              case 'disable':\n                mode = 0;\n                break;\n              case 'read':\n                mode = 1;\n                break;\n              case 'write':\n                mode = 2;\n                break;\n              case 'readwrite':\n                mode = 1 | 2;\n                break;\n            }\n            let variantInfo = cv.parser.pure.widgets.ColorChooser.makeAddressListFn(src, transform, mode, elem.getAttribute('variant'));\n            addresses[src.trim()] = {\n              transform: transform,\n              mode: mode,\n              variantInfo: variantInfo[1]\n            };\n          }\n          cv.ui.structure.tile.components.Color.CC_COUNTER++;\n          const path = 'id_0_'+cv.ui.structure.tile.components.Color.CC_COUNTER;\n          const props = {\n            path: path,\n            $$type: 'colorchooser',\n            classes: 'widget colorchooser',\n            layout: {\n              colspan: 1\n            },\n            controls: element.hasAttribute('controls') ? element.getAttribute('controls') : 'triangle',\n            address: addresses,\n            throttleInterval: this.getThrottleInterval()\n          };\n          cv.parser.pure.widgets.ColorChooser.parseAttributes(element, props);\n          this.__colorChooser = new cv.ui.structure.pure.ColorChooser(props);\n          this.__colorChooser.addListener('colorChanged', this._onColorChanged, this);\n          this._onColorChanged();\n          popup.innerHTML = `<div class=\"widget_container\" style=\"margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center\" id=\"${path}\" data-type=\"colorchooser\">${this.__colorChooser.getDomString()}</div>`;\n          element.appendChild(popup);\n          element.addEventListener('click', ev => {\n            const path = ev.path || (ev.composedPath && ev.composedPath());\n            if (path && path.indexOf(popup) < 0) {\n              popup.getInstance().open();\n            }\n          });\n          qx.event.Timer.once(() => {\n            this.__colorChooser._onDomReady();\n          }, this, 0);\n\n          this.setResizeTarget(popup);\n          this.addListener('resized', () => {\n            this.__colorChooser.invalidateScreensize();\n          });\n        }\n      }\n    },\n\n    _onColorChanged() {\n      const color = this.__colorChooser.getColor();\n      const rgb = color.getComponent('rgb');\n      const v = color.getComponent('v');\n      this.setValue(\n        `#${this.__convertToHex(rgb.r)}${this.__convertToHex(rgb.g)}${this.__convertToHex(rgb.b)}${this.__convertToHex(v)}`\n      );\n    },\n\n    __convertToHex(v) {\n      return Math.round(v * 255)\n        .toString(16)\n        .padStart(2, '0');\n    },\n\n    _updateValue(mappedValue, value) {\n      let target = this._element.querySelector(':scope > .value');\n      const rgb = mappedValue.substring(0, 7);\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        const alpha = mappedValue.length === 9 ? parseInt(mappedValue.substring(7, 9), 16) / 255 : 1.0;\n\n        switch (tagName) {\n          case 'cv-icon':\n            target.style.color = rgb;\n            target.style.opacity = Math.max(alpha, 0.2); // do not blend it out totally\n            break;\n        }\n      } else {\n        // only if we do not have another value handler\n        this._element.style.backgroundColor = mappedValue;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._disposeObjects('__colorChooser');\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'color',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Mixin for SVG elements that provide a grid layout.\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Mixin.define('cv.ui.structure.tile.components.svg.MSvgGrid', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._cells = {};\n    this._isLayoutValid = true;\n    this.debouncedLayoutAll = qx.module.util.Function.debounce(this._layoutAll.bind(this), 100);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    rows: {\n      check: 'Number',\n      init: 3,\n      event: 'changeRows',\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    columns: {\n      check: 'Number',\n      init: 3,\n      event: 'changeColumns',\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    outerPadding: {\n      check: 'Number',\n      event: 'changeOuterPadding',\n      init: 4,\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    spacing: {\n      check: 'Number',\n      init: 8,\n      event: 'changeSpacing',\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    cellWidth: {\n      check: 'Number',\n      init: 56,\n      apply: '_invalidateLayout',\n      event: 'changeSize',\n      transform: '__toInt'\n    },\n\n    cellHeight: {\n      check: 'Number',\n      init: 56,\n      apply: '_invalidateLayout',\n      event: 'changeSize',\n      transform: '__toInt'\n    },\n\n    viewBox: {\n      check: 'String',\n      nullable: true,\n      event: 'changeViewBox'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _cells: null,\n    _isLayoutValid: null,\n\n    __toInt(value) {\n      if (typeof value === 'string') {\n        return parseInt(value);\n      }\n      return value;\n    },\n\n    _invalidateLayout() {\n      this._isLayoutValid = false;\n      this.debouncedLayoutAll();\n    },\n\n    _layoutAll() {\n      this.debug('re-layout all items');\n      for (const cellId in this._cells) {\n        const position = cellId.split('-').map(i => parseFloat(i));\n        this.layout(this._cells[cellId], position[0], position[1], true);\n      }\n      this._isLayoutValid = true;\n    },\n\n    /**\n     * Returns the number of cells in this grid\n     * @returns {number}\n     */\n    getCells() {\n      return this.getRows() * this.getColumns();\n    },\n\n    /**\n     * Add a SVGElement to a cell in the grid.\n     * @param element {SVGGraphicsElement} element to place\n     * @param row {number} row number (-1 to find next free row)\n     * @param column {number} column cumber (-1 to use next free cell)\n     * @param replace {boolean} it true replace current item in cell, otherwise the element will not be added when the cell is not empty\n     * @param retries {number} internal value used to limit layout retries for one element. Do not set this externally!\n     */\n    layout(element, row = -1, column = -1, replace = false, retries = 0) {\n      if (row === -1 || column === -1) {\n        const [r, c] = this.getNextFreeCell(row, column);\n        if (r === -1 || c === -1) {\n          this.error('no next free cell found, element could not be placed');\n          return;\n        }\n        row = r;\n        column = c;\n      }\n      const cellId = row + '-' + column;\n      if (this._cells[cellId] && !replace) {\n        this.error(`cell ${row}/${column} is not empty`);\n        return;\n      }\n\n      // remove old positions\n      for (const id of Object.keys(this._cells)) {\n        if (id !== cellId && this._cells[id] === element) {\n          delete this._cells[id];\n        }\n      }\n      let x = this.getOuterPadding() + column * this.getSpacing() + column * this.getCellWidth();\n      let y  = this.getOuterPadding() + row * this.getSpacing() + row * this.getCellHeight();\n      element.setAttribute('x', `${x}`);\n      element.setAttribute('y', `${y}`);\n      this._cells[cellId] = element;\n    },\n\n    getNextFreeCell(row, column) {\n      let cellId;\n      if (row === -1 && column === -1) {\n        for (let r = 0; r < this.getRows(); r++) {\n          for (let c = 0; c < this.getColumns(); c++) {\n            cellId = r + '-' + c;\n            if (!this._cells[cellId]) {\n              return [r,  c];\n            }\n          }\n        }\n      } else if (row === -1) {\n        for (let r = 0; r < this.getRows(); r++) {\n          cellId = r + '-' + column;\n          if (!this._cells[cellId]) {\n            return [r, column];\n          }\n        }\n      } else if (column === -1) {\n        for (let c = 0; c < this.getColumns(); c++) {\n          cellId = row + '-' + c;\n          if (!this._cells[cellId]) {\n            return [row, column];\n          }\n        }\n      } else {\n        let startCell = row * this.getColumns() + column;\n        let r;\n        let c;\n        for (let i = startCell; i < this.getCells(); i++) {\n          r = Math.floor(i / this.getColumns());\n          c = i % this.getColumns();\n          cellId = r + '-' + c;\n          if (!this._cells[cellId]) {\n            return [r,  c];\n          }\n        }\n      }\n      return [row, column];\n    }\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Flow management widget.\n *\n * @author Tobias Bräutigam\n * @since 2023\n *\n * @ignore(d3.select)\n * @ignore(screen)\n * @ignore(SVGElement)\n */\nqx.Class.define('cv.ui.structure.tile.components.Flow', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.components.svg.MSvgGrid,\n    cv.ui.structure.tile.MResize,\n    cv.ui.structure.tile.MStringTransforms,\n    cv.ui.structure.tile.MFullscreen\n  ],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    pan: {\n      check: 'Boolean',\n      init: false,\n      transform: '_stringToBool',\n      apply: '_applyPan'\n    },\n\n    pagination: {\n      check: ['none', 'horizontal', 'vertical', 'both'],\n      init: 'none',\n      apply: '_applyPagination'\n    },\n\n    centerX: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCenterX',\n      transform: '_parseBoolean'\n    },\n\n    centerY: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCenterY',\n      transform: '_parseBoolean'\n    },\n\n    fullscreenViewBox: {\n      check: 'String',\n      nullable: true,\n      event: 'changeFullscreenViewBox'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    SVG: null,\n    _dragPoint: null,\n    _startPoint: null,\n    _expiredTouchStart: null,\n    _viewBoxBinding: null,\n    _lastBBox: null,\n    _additionalViewBoxUpdate: null,\n    _ready: null,\n\n    getSvg() {\n      if (!this.SVG) {\n        this.SVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this._element.appendChild(this.SVG);\n      }\n      return this.SVG;\n    },\n\n    _init() {\n      super._init();\n      this.getSvg();\n\n      this.setResizeTarget(this._element);\n      this._observer.observe(this.SVG);\n      this.addListener('resized', this._updateDimensions, this);\n      for (const layoutEvent of ['changeRows', 'changeColumns', 'changeOuterPadding', 'changeSpacing']) {\n        this.addListener(layoutEvent, this._updateCellSize, this);\n      }\n\n      let title = this.getHeader('label.title');\n      const element = this._element;\n      if (element.hasAttribute('title') && !title) {\n        title = document.createElement('label');\n        title.classList.add('title');\n        let span = document.createElement('span');\n        title.appendChild(span);\n        span.textContent = element.getAttribute('title');\n        this.appendToHeader(title);\n      }\n\n      if (element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        this._initFullscreenSwitch();\n        this.addListener('changeFullscreen', ev => {\n          if (ev.getData()) {\n            if (!this._viewBoxBinding && this.getFullscreenViewBox()) {\n              this._viewBoxBinding = this.bind('fullscreenViewBox', this, 'viewBox');\n            }\n          } else if (this._viewBoxBinding) {\n            this.removeBinding(this._viewBoxBinding);\n            this._viewBoxBinding = null;\n\n            // restore old value\n            if (this._element.hasAttribute('view-box')) {\n              this.setViewBox(this._element.getAttribute('view-box'));\n            } else {\n              this.resetViewBox();\n            }\n          }\n          this._updateDimensions();\n        });\n      }\n\n      this.addListener('changeViewBox', this._updateViewBox, this);\n      window.requestAnimationFrame(() => this._updateViewBox());\n      if (this.getPan()) {\n        this._applyPan(true);\n      }\n      this._applyPagination(this.getPagination());\n\n      if (element.querySelectorAll(':scope > cv-power-entity:not([type=\"house\"]), :scope > cv-svg-round-value').length === 0) {\n        // remove the house\n        const house = element.querySelector(':scope > cv-power-entity[type=\"house\"]');\n        if (house) {\n          house.remove();\n        }\n      }\n\n      // make sure that the initial setup viewBox changes are not animated\n      setTimeout(() => {\n        this._ready = true;\n        this._center();\n      }, 2000);\n    },\n\n    _applyCenterX(value) {\n      if (value) {\n        this.__applyCenter('row', this.getRows());\n      }\n    },\n\n    _applyCenterY(value) {\n      if (value) {\n        this.__applyCenter('column', this.getColumns());\n      }\n    },\n\n    __applyCenter(selector, total) {\n      // do not center the middle one(s)\n      let skip = [];\n      if (total > 2) {\n        if (total % 2 > 0) {\n          skip.push(Math.floor(total / 2));\n        } else {\n          skip.push((total / 2) - 1);\n          skip.push(total / 2);\n        }\n      }\n      for (let i = 0; i < total; i++) {\n        if (!skip.includes(i)) {\n          if (selector === 'row') {\n            this.__adjustRow(this._element.querySelectorAll(`:scope > *[row=\"${i}\"]`));\n          } else {\n            this.__adjustColumn(this._element.querySelectorAll(`:scope > *[column=\"${i}\"]`));\n          }\n        }\n      }\n    },\n\n    __adjustRow(rowElements) {\n      if (rowElements.length === 1) {\n        rowElements[0].setAttribute('column', '1');\n      } else if (rowElements.length === 2) {\n        const sorted = Array.from(rowElements);\n        sorted.sort((a, b) => parseFloat(a.getAttribute('column')) - parseFloat(b.getAttribute('column')));\n        sorted[0].setAttribute('column', '0.5');\n        sorted[1].setAttribute('column', '1.5');\n      }\n    },\n\n    __adjustColumn(columnElements) {\n      if (columnElements.length === 1) {\n        columnElements[0].setAttribute('row', '1');\n      } else if (columnElements.length === 2) {\n        const sorted = Array.from(columnElements);\n        sorted.sort((a, b) => parseFloat(a.getAttribute('row')) - parseFloat(b.getAttribute('row')));\n        sorted[0].setAttribute('row', '0.5');\n        sorted[1].setAttribute('row', '1.5');\n      }\n    },\n\n    _drag(ev) {\n      ev.preventDefault();\n      ev.stopImmediatePropagation();\n      const CTM = this.SVG.getScreenCTM().inverse();\n      this._dragPoint.x = ev.clientX;\n      this._dragPoint.y = ev.clientY;\n      this._dragPoint = this._dragPoint.matrixTransform(CTM);\n      this.SVG.viewBox.baseVal.x -= this._dragPoint.x - this._startPoint.x;\n      this.SVG.viewBox.baseVal.y -= this._dragPoint.y - this._startPoint.y;\n    },\n\n    _cancelEvent(ev) {\n      ev.preventDefault();\n      ev.stopImmediatePropagation();\n    },\n\n    _startDrag(ev) {\n      if (typeof this.drag !== 'function') {\n        this.drag = this._drag.bind(this);\n      }\n      this._element.addEventListener('pointermove', this.drag);\n      this._element.addEventListener('touchmove', this._cancelEvent);\n\n      const CTM = this.SVG.getScreenCTM().inverse();\n      this._dragPoint.x = ev.clientX;\n      this._dragPoint.y = ev.clientY;\n      this._startPoint = this._dragPoint.matrixTransform(CTM);\n    },\n\n    _endDrag(ev) {\n      if (this.drag) {\n        this._element.removeEventListener('pointermove', this.drag);\n      }\n      this._element.removeEventListener('touchmove', this._cancelEvent);\n    },\n\n    _touchStart(ev) {\n      if (ev.touches.length === 1) {\n        if (!this._expiredTouchStart) {\n          this._expiredTouchStart = ev.timeStamp + 400;\n        } else if (ev.timeStamp <= this._expiredTouchStart) {\n          // remove the default of this event ( Zoom )\n          //ev.preventDefault()\n          this.resetDrag();\n          // then reset the variable for other \"double Touches\" event\n          this._expiredTouchStart = null;\n        } else {\n          // if the second touch was expired, make it as it's the first\n          this._expiredTouchStart = ev.timeStamp + 400;\n        }\n      }\n      ev.preventDefault();\n    },\n\n    _applyPan(draggable) {\n      if (this.SVG) {\n        if (draggable) {\n          this._dragPoint = this.SVG.createSVGPoint();\n\n          if (typeof this.startDrag !== 'function') {\n            this.startDrag = this._startDrag.bind(this);\n          }\n          if (typeof this.endDrag !== 'function') {\n            this.endDrag = this._endDrag.bind(this);\n          }\n          if (typeof this.resetDrag !== 'function') {\n            this.resetDrag = this._updateViewBox.bind(this);\n          }\n          if (typeof this.touchStart !== 'function') {\n            this.touchStart = this._touchStart.bind(this);\n          }\n\n          this._element.addEventListener('pointerdown', this.startDrag);\n          this._element.addEventListener('pointerup', this.endDrag);\n          this._element.addEventListener('pointerleave', this.endDrag);\n          this._element.addEventListener('pointercancel', this.endDrag);\n          this._element.addEventListener('dblclick', this.resetDrag);\n          this._element.addEventListener('touchstart', this.touchStart);\n        } else {\n          this._element.removeEventListener('pointerdown', this.startDrag);\n          this._element.removeEventListener('pointerup', this.endDrag);\n          this._element.removeEventListener('pointerleave', this.endDrag);\n          this._element.removeEventListener('pointercancel', this.endDrag);\n          this._element.removeEventListener('dblclick', this.resetDrag);\n          this._element.removeEventListener('touchstart', this.touchStart);\n        }\n      }\n    },\n\n    _applyPagination(value) {\n      const showH = value === 'both' || value === 'horizontal';\n      const showV = value === 'both' || value === 'vertical';\n      const addButtons = [];\n      const removeButtons = [];\n      if (showH) {\n        addButtons.push('left');\n        addButtons.push('right');\n      } else {\n        removeButtons.push('left');\n        removeButtons.push('right');\n      }\n      if (showV) {\n        addButtons.push('top');\n        addButtons.push('bottom');\n      } else {\n        removeButtons.push('top');\n        removeButtons.push('bottom');\n      }\n      for (const dir of addButtons) {\n        let button = this._element.querySelector(`div.pagination.${dir}`);\n        if (!button) {\n          button = document.createElement('div');\n          button.classList.add('pagination', dir);\n          this._element.appendChild(button);\n        }\n      }\n\n      for (const dir of removeButtons) {\n        let button = this._element.querySelector(`div.pagination.${dir}`);\n        if (button) {\n          button.remove();\n        }\n      }\n\n      this._updatePaginationButtons();\n    },\n\n    _enablePaginationButton(button, dir, enabled) {\n      let callback;\n      switch (dir) {\n        case 'left':\n          callback = this._paginateLeft;\n          break;\n\n        case 'right':\n          callback = this._paginateRight;\n          break;\n\n        case 'top':\n          callback = this._paginateTop;\n          break;\n\n        case 'bottom':\n          callback = this._paginateBottom;\n          break;\n      }\n      if (enabled) {\n        button.classList.add('clickable');\n        qx.event.Registration.addListener(button, 'tap', callback, this);\n      } else {\n        if (button.classList.contains('clickable')) {\n          button.classList.remove('clickable');\n        }\n        qx.event.Registration.removeListener(button, 'tap', callback, this);\n      }\n    },\n\n    _updatePaginationButtons() {\n      let [column, row, width, height] = this.getViewBox().split(' ').map(v => parseInt(v));\n      for (const dir of ['top', 'bottom', 'left', 'right']) {\n        const button = this._element.querySelector(`div.pagination.${dir}`);\n        if (!button) {\n          continue;\n        }\n        switch (dir) {\n          case 'left':\n            this._enablePaginationButton(button, dir, column - width >= 0);\n            break;\n\n          case 'right':\n            this._enablePaginationButton(button, dir, column+width < this.getColumns());\n            break;\n\n          case 'top':\n            this._enablePaginationButton(button, dir, row - height >= 0);\n            break;\n\n          case 'bottom':\n            this._enablePaginationButton(button, dir, row + height < this.getRows());\n            break;\n        }\n      }\n    },\n\n    _paginateLeft() {\n      this._paginate('left');\n    },\n\n    _paginateRight() {\n      this._paginate('right');\n    },\n\n    _paginateTop() {\n      this._paginate('top');\n    },\n\n    _paginateBottom() {\n      this._paginate('bottom');\n    },\n\n    _paginate(direction) {\n      let [column, row, width, height] = this.getViewBox().split(' ').map(v => parseInt(v));\n      switch (direction) {\n        case 'left':\n          if (column - width >= 0) {\n            column -= width;\n          }\n          break;\n\n        case 'right':\n          if (column+width < this.getColumns()) {\n            column += width;\n          }\n          break;\n\n        case 'top':\n          if (row - height >= 0) {\n            row -= height;\n          }\n          break;\n\n        case 'bottom':\n          if (row + height < this.getRows()) {\n            row += height;\n          }\n      }\n      this._element.setAttribute('view-box', `${column} ${row} ${width} ${height}`);\n    },\n\n    _updateDimensions(ev) {\n      if (ev) {\n        const entry = ev.getData();\n        if (entry.contentBoxSize) {\n          if (entry.target instanceof SVGElement) {\n            this._center(entry.contentRect.width, entry.contentRect.height);\n            return;\n          }\n        }\n      }\n      const isFullscreen = this.isFullscreen();\n      if (isFullscreen) {\n        const minSize = Math.min(screen.availHeight, screen.availWidth);\n        if (minSize > 600) {\n          this.setOuterPadding(16);\n          this.setSpacing(32);\n        } else if (minSize >= 400) {\n          this.setOuterPadding(16);\n          this.setSpacing(26);\n        }\n        // set fixed height\n        let height = 0;\n        if (screen.availHeight > screen.availWidth) {\n          const bbox = this.SVG.getBBox();\n          height = Math.min(screen.availHeight, Math.max(bbox.height, this.getRows() * 100));\n        } else {\n          height = screen.availHeight;\n        }\n        if (this._tileElement) {\n          this._tileElement.style.height = `${height}px`;\n        }\n      } else {\n        if (this._tileElement) {\n          this._tileElement.style.height = 'unset';\n        }\n        if (this._element.hasAttribute('outer-padding')) {\n          this.setOuterPadding(this._element.getAttribute('outer-padding'));\n        } else {\n          this.resetOuterPadding();\n        }\n        if (this._element.hasAttribute('spacing')) {\n          this.setSpacing(this._element.getAttribute('spacing'));\n        } else {\n          this.resetSpacing();\n        }\n      }\n      window.requestAnimationFrame(() => this._updateCellSize());\n    },\n\n    _updateViewBox() {\n      const viewBox = this.getViewBox();\n      if (viewBox) {\n        const parts = viewBox.split(' ').map(v => parseInt(v));\n        if (parts.length === 4) {\n          this._updatePaginationButtons();\n          const totalOuterPadding = this.getOuterPadding() * 2;\n          const x = this.getCellWidth() * parts[0] + (parts[0] > 1 ? (parts[0]-1) * this.getSpacing() : 0);\n          const y = this.getCellHeight() * parts[1] + (parts[1] > 1 ? (parts[1]-1) * this.getSpacing() : 0);\n          const width = totalOuterPadding + this.getCellWidth() * parts[2] + (parts[2] > 1 ? (parts[2]-1) * this.getSpacing() : 0);\n          const height = totalOuterPadding + this.getCellHeight() * parts[3] + (parts[3] > 1 ? (parts[3]-1) * this.getSpacing() : 0);\n\n          if (this._ready && typeof window.d3 === 'object') {\n            const svg = d3.select(this._element).select('svg');\n            svg.transition()\n              .duration(500)\n              .attr('viewBox', `${x} ${y} ${width} ${height}`);\n            setTimeout(() => this._center(), 510);\n          } else {\n            this.SVG.setAttribute('viewBox', `${x} ${y} ${width} ${height}`);\n            setTimeout(() => this._center(), 10);\n          }\n        }\n      } else {\n        this.SVG.removeAttribute('viewBox');\n      }\n    },\n\n    _center(width, height) {\n      if (this.SVG && this._ready) {\n        const bbox = this.SVG.getBBox();\n        if (this._lastBBox && (this._lastBBox.width === bbox.width &&\n          this._lastBBox.height === bbox.height &&\n          this._lastBBox.x === bbox.x &&\n          this._lastBBox.y === bbox.y\n        )) {\n          // no change\n          return;\n        }\n        if (!width || !height) {\n          const parts = this.SVG.hasAttribute('viewBox') ? this.SVG.getAttribute('viewBox').split(' ').map(v => parseInt(v)) : [];\n          if (parts.length === 4) {\n            width = parts[2];\n            height = parts[3];\n          } else {\n            return;\n          }\n        }\n\n        const totalOuterPadding = this.getOuterPadding() * 2;\n        let visibleColumns = this.getColumns();\n        let visibleRows = this.getRows();\n        const gridViewBox = this.getViewBox();\n        let firstColumn = 0;\n        let lastColumn = 2;\n        let firstRow = 0;\n        let lastRow = 2;\n        if (gridViewBox) {\n          const gridParts = gridViewBox.split(' ').map(s => parseInt(s));\n          visibleColumns = gridParts[2] - gridParts[0];\n          visibleRows = gridParts[3] - gridParts[1];\n          firstColumn = gridParts[0];\n          lastColumn = firstColumn + gridParts[2] - 1;\n          firstRow = gridParts[1];\n          lastRow = firstRow + gridParts[3] - 1;\n        }\n        let usedColumns = 3;\n        let usedRows = 3;\n        let col;\n        let row;\n        for (const elem of this._element.querySelectorAll('*[column]')) {\n          col = parseInt(elem.getAttribute('column')) + 1;\n          if (firstColumn <= col && lastColumn > col && col > usedColumns) {\n            usedColumns = col;\n          }\n        }\n        for (const elem of this._element.querySelectorAll('*[row]')) {\n          row = parseInt(elem.getAttribute('row')) + 1;\n          if (firstRow <= col && lastRow > row && row > usedRows) {\n            usedRows = row;\n          }\n        }\n\n        const visibleWidth = usedColumns > visibleColumns ? visibleColumns / this.getColumns() : 1.0;\n        const visibleHeight = usedRows > visibleRows ? visibleRows / this.getRows() : 1.0;\n\n        const heightDiff = height - totalOuterPadding - bbox.y - bbox.height * visibleHeight;\n        const widthDiff = width - totalOuterPadding - bbox.x - bbox.width * visibleWidth;\n\n        if (heightDiff > 0 || widthDiff > 0) {\n          this.SVG.setAttribute('transform', `translate(${Math.max(0, widthDiff / 2)}, ${Math.max(0, heightDiff / 2)})`);\n        } else {\n          this.SVG.removeAttribute('transform');\n        }\n        this._lastBBox = bbox;\n        window.requestAnimationFrame(() => this._center());\n      }\n    },\n\n    _updateCellSize() {\n      if (this._element.clientWidth === 0 || this._element.clientHeight === 0) {\n        return;\n      }\n      let visibleColumns = this.getColumns();\n      let visibleRows = this.getRows();\n      const viewBox = this.getViewBox();\n      if (viewBox) {\n        const box = viewBox.split(' ').map(v => parseInt(v));\n        visibleColumns = box[2];\n        visibleRows = box[3];\n      }\n      const padding = this.getOuterPadding() * 2;\n      const spacing = this.getSpacing() / 2;\n      const cellWidth = Math.floor((this._element.clientWidth - padding) / visibleColumns - spacing);\n      const cellHeight = Math.floor((this._element.clientHeight - padding) / visibleRows - spacing);\n      this.debug('cellWidth', cellWidth, 'cellHeight', cellHeight);\n      const changed = this.getCellWidth() !== cellWidth || this.getCellHeight() !== cellHeight;\n      this.setCellWidth(cellWidth);\n      this.setCellHeight(cellHeight);\n      if (changed) {\n        window.requestAnimationFrame(() => {\n          this._updateViewBox();\n        });\n      }\n    },\n\n    _stringToBool(value) {\n      if (typeof value === 'string') {\n        return value === 'true';\n      } else if (value === null || value === undefined) {\n        return false;\n      }\n      return value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'flow',\n      class extends QxConnector {\n        // @ignore\n        static observedAttributes = ['view-box', 'fullscreen-view-box', 'pan', 'rows', 'columns', 'cell-width', 'cell-height', 'outer-padding', 'spacing', 'pagination', 'center-x', 'center-y'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Icon.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.components.Icon', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._idRegex = /^[^\\s]+$/;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyId',\n      // the id is used as 'class' property and therefore must not have spaces\n      transform: '_transformId'\n    },\n\n    color: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __initialized: false,\n    _idRegex: null,\n\n    _transformId(value) {\n      if (this._idRegex.test(value)) {\n        return value;\n      }\n      this.error('invalid icon id:', value);\n      return null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.textContent.trim()) {\n        this.__initialized = true;\n        this.setId(element.textContent.trim());\n      } else {\n        const it = element.classList.values();\n        for (let name of it) {\n          if (name.startsWith('ri-') || name.startsWith('knxuf-')) {\n            this.setId(name);\n            break;\n          }\n        }\n      }\n      this.__initialized = true;\n    },\n\n    _applyId(value, oldValue) {\n      const element = this._element;\n      if (this.__initialized) {\n        if (oldValue) {\n          element.classList.remove(oldValue);\n        }\n        if (value) {\n          // default is an icon font that uses CSS classes\n          element.classList.add(value);\n          if (element.textContent) {\n            element.textContent = '';\n          }\n        }\n      }\n    },\n\n    _applyColor(value, oldValue) {\n      const element = this._element;\n      if (oldValue) {\n        element.classList.remove(oldValue);\n      }\n      if (value) {\n        if (value.startsWith('#') || value.startsWith('rgb')) {\n          element.style.color = value;\n        } else {\n          element.classList.add(value);\n        }\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'icon',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n\n        static get observedAttributes() {\n          return ['color'];\n        }\n      }\n    );\n  }\n});\n","/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an image.\n *\n * HINT: Proxy mode needs an PHP environment with php-curl installed.\n */\nqx.Class.define('cv.ui.structure.tile.components.Image', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n\n    _init() {\n      const element = this._element;\n      let img = element.querySelector(':scope > img');\n      if (!img) {\n        img = document.createElement('img');\n        element.appendChild(img);\n      }\n      element.addEventListener('click', () => this.refresh());\n      let src = element.getAttribute('src');\n      let base = window.location.origin;\n      if (src.substring(0, 1) !== '/' && src.substring(0, 4) !== 'http') {\n        // relative url\n        base += window.location.pathname;\n      }\n      this._url = new URL(src, base);\n      const useProxy = element.hasAttribute('proxy') && element.getAttribute('proxy') === 'true';\n      if (useProxy) {\n        this._url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n\n        this._url.searchParams.set('url', element.getAttribute('src'));\n      }\n      this._headers = {};\n      if (element.hasAttribute('auth-type')) {\n        if (useProxy) {\n          this._url.searchParams.set('auth-type', element.getAttribute('auth-type').toLowerCase());\n        } else {\n          switch (element.getAttribute('auth-type').toLowerCase()) {\n            case 'basic':\n              this._headers['Authorization'] = 'Basic ' + window.btoa(element.getAttribute('username') + ':' + element.getAttribute('password'));\n              break;\n\n            case 'bearer':\n              this._headers['Authorization'] = 'Bearer ' + element.getAttribute('username');\n              break;\n\n            default:\n              this.error('unknown authorization type' +  element.getAttribute('auth-type'));\n              break;\n          }\n        }\n      }\n      this._loadImage();\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n    },\n\n    _loadImage() {\n      let img = this._element.querySelector(':scope > img');\n      if (Object.keys(this._headers).length > 0) {\n        let request = new XMLHttpRequest();\n        request.responseType = 'blob';\n        request.open('get', this._url.toString(), true);\n        Object.keys(this._headers).forEach(name => {\n          request.setRequestHeader(name, this._headers[name]);\n        });\n        request.onreadystatechange = e => {\n          if (request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            img.src = URL.createObjectURL(request.response);\n            img.onload = () => {\n              URL.revokeObjectURL(img.src);\n            };\n          }\n        };\n        request.send(null);\n      } else {\n        img.src = this._url.toString();\n      }\n    },\n\n    refresh() {\n      let img = this._element.querySelector(':scope > img');\n      if (img) {\n        this._url.searchParams.set('r', '' + Math.random());\n        this._loadImage();\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'refresh') {\n          if (ev.detail.state) {\n            this.refresh();\n          }\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'image',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* List.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a list of items. A &lt;template&gt;-element defines the content of the list-items and a model is used to\n * generate those items and apply the models content to the list-items.\n * It allows custom Javascript code in a &lt;script&gt;-Element to fill the model or address-Elements as model source.\n * The model can be refreshed in a time defined interval, which is set by the 'refresh' attribute.\n *\n * @widgetexample <settings>\n *    <caption>Example list</caption>\n *    <screenshot name=\"list_simple\"/>\n *  </settings>\n    <cv-list refresh=\"10\">\n      <model>\n        <script><![CDATA[\n         for (let i = 0; i < Math.round(Math.random()*10); i++) {\n           model.push({\n             label: 'This is list item no ' + i,\n             subLabel: 'Sublabel number ' + i\n           })\n         }\n         ]]>\n         </script>\n       </model>\n       <template>\n         <li>\n           <label class=\"primary\">${label}</label>\n           <label class=\"secondary\">${subLabel}</label>\n         </li>\n       </template>\n       <template when=\"empty\">\n         <li>\n           <label class=\"primary\">Model is empty!</label>\n         </li>\n       </template>\n   </cv-list>\n */\nqx.Class.define('cv.ui.structure.tile.components.List', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.MVisibility,\n    cv.ui.structure.tile.MRefresh,\n    cv.ui.structure.tile.MFullscreen\n  ],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      refine: true,\n      init: []\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _timer: null,\n    _model: null,\n    _getModel: null,\n    _filterModel: null,\n    _sortModel: null,\n    _limit: null,\n    _modelInstance: null,\n\n    _init() {\n      this._checkEnvironment();\n      const element = this._element;\n      this._model = [];\n      let refreshOnUpdate = false;\n      const model = element.querySelector('model');\n      if (element.parentElement) {\n        element.parentElement.classList.add('has-list');\n      }\n      if (!model) {\n        this.error('cv-list needs a model');\n        return;\n      }\n      if (model.hasAttribute('filter')) {\n        this._filterModel = new Function('item', 'index', '\"use strict\"; return ' + model.getAttribute('filter'));\n      }\n      if (model.hasAttribute('limit')) {\n        this._limit = parseInt(model.getAttribute('limit'));\n      }\n      const readAddresses = model.querySelectorAll(':scope > cv-address:not([mode=\"write\"])');\n\n      // if we have top level write addresses, we need to listen to sendState Events from the list items\n      for (let address of element.querySelectorAll(':scope > cv-address')) {\n        if (address.getAttribute('mode') !== 'read') {\n          element.addEventListener('sendState', ev => {\n            // forward event copy (dispatching the same is not possible) to all write addresses\n            const evCopy = new CustomEvent('sendState', {\n              bubbles: ev.bubbles,\n              cancelable: ev.cancelable,\n              detail: ev.detail\n            });\n            for (let a of element.querySelectorAll(':scope > cv-address')) {\n              a.dispatchEvent(evCopy);\n            }\n          });\n          break;\n        }\n      }\n\n      if (model.hasAttribute('sort-by')) {\n        const sortBy = model.getAttribute('sort-by');\n        // reverse order in 'desc' sort mode\n        const sortModifier = model.getAttribute('sort-mode') === 'desc' ? -1 : 1;\n        this._sortModel = (left, right) => {\n          const leftVal = left[sortBy];\n          const rightVal = right[sortBy];\n          if (leftVal === rightVal) {\n            return 0;\n          } else if (typeof leftVal === typeof rightVal) {\n            switch (typeof leftVal) {\n              case 'number':\n                return (leftVal - rightVal) * sortModifier;\n\n              case 'boolean':\n                return (leftVal ? -1 : 1) * sortModifier;\n\n              case 'string':\n                return leftVal.localeCompare(rightVal) * sortModifier;\n\n              default:\n                return JSON.stringify(leftVal).localeCompare(JSON.stringify(rightVal)) * sortModifier;\n            }\n          } else if (leftVal === undefined || leftVal === null) {\n            return 1 * sortModifier;\n          } else if (rightVal === undefined || rightVal === null) {\n            return -1 * sortModifier;\n          }\n          return 0;\n        };\n      }\n      if (model.hasAttribute('src') || model.hasAttribute('config-section')) {\n        // fetch from url\n        this._getModel = async () => {\n          const options = {\n            ttl: this.getRefresh()\n          };\n          for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n            if (model.hasAttribute(proxyParam)) {\n              options[proxyParam] = model.getAttribute(proxyParam);\n            }\n          }\n          const res = await cv.io.Fetch.cachedFetch(model.getAttribute('src'), options, model.getAttribute('proxy') === 'true');\n          return res;\n        };\n      } else if (model.hasAttribute('class')) {\n        // initialize internal class instance that implements cv.io.listmodel.IListModel\n        const Clazz = cv.io.listmodel.Registry.get(model.getAttribute('class'));\n        if (Clazz) {\n          const modelInstance = this._modelInstance = new Clazz();\n          modelInstance.addListener('refresh', () => this.refresh());\n          if (model.hasAttribute('parameters')) {\n            const props = {};\n            for (let entry of model.getAttribute('parameters').split(',')) {\n              const [name, value] = entry.split('=').map(n => n.trim());\n              props[name] = value.startsWith('\\'') ? value.substring(1, value.length-1) : value;\n            }\n            modelInstance.set(props);\n          }\n          this._getModel = async () => {\n            await modelInstance.refresh();\n            return modelInstance.getModel();\n          };\n        } else {\n          this.error(`clazz \"cv.io.listmodel.${model.getAttribute('class')}\" not found`);\n        }\n      } else {\n        const script = model.querySelector(':scope > script');\n        const data = model.querySelectorAll(':scope > cv-data');\n        if (script) {\n          this._getModel = new Function('\"use strict\";let model = []; ' + script.innerText.trim() + '; return model');\n\n          this._model = this._getModel();\n        } else if (readAddresses.length > 0) {\n          // model has an address that triggers a refresh on update, so we just have to read the model from the updated value\n          this._getModel = this.getValue;\n          refreshOnUpdate = true;\n        } else if (data.length > 0) {\n          this._model = [];\n          this._getModel = () => this._model;\n          data.forEach((elem, i) => {\n            const d = {\n              index: i\n            };\n\n            for (const a of elem.attributes) {\n              d[a.name] = a.value;\n            }\n            this._model.push(d);\n          });\n        } else {\n          this.error(\n            'cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.'\n          );\n\n          return;\n        }\n      }\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => this.onStateUpdate(ev));\n      }\n      if (!refreshOnUpdate) {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        }\n        if (element.hasAttribute('refresh')) {\n          this.setRefresh(parseInt(element.getAttribute('refresh')));\n        }\n      }\n\n      this._element.addEventListener('click', ev => {\n        let templateRoot = ev.target;\n        let data = {};\n        const collectData = elem => {\n          if (elem) {\n            for (let i = 0; i < elem.attributes.length; i++) {\n              let attrib = elem.attributes[i];\n              if (attrib.name.startsWith('data-')) {\n                data[attrib.name.substring(5)] = attrib.value;\n              }\n            }\n          }\n        };\n        collectData(templateRoot);\n        let level = 0;\n        let model = templateRoot.$$model;\n        while (templateRoot && (!model || !data.action) && level <= 5) {\n          templateRoot = templateRoot.parentElement;\n          if (templateRoot === this._element) {\n            break;\n          }\n          if (templateRoot) {\n            if (!model && templateRoot.$$model) {\n              model = templateRoot.$$model;\n            }\n            if (!data.action && templateRoot.hasAttribute('data-action')) {\n              collectData(templateRoot);\n            }\n          }\n          level++;\n        }\n\n        if (data.action && this._modelInstance && this._modelInstance.handleEvent(ev, data, model)) {\n          ev.stopPropagation();\n        }\n      });\n\n      if (element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        this._initFullscreenSwitch();\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'refresh') {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        } else {\n          // reset lastRefresh to that the refresh get called when this item gets visible\n          this._lastRefresh = null;\n        }\n      } else {\n        super.onStateUpdate(ev);\n      }\n      // cancel event here\n      ev.stopPropagation();\n    },\n\n    _applyValue() {\n      // reset last refresh, because with new data its obsolete\n      this._lastRefresh = 0;\n      this.refresh();\n    },\n\n    async refresh() {\n      const element = this._element;\n      const template = element.querySelector(':scope > template:not([when])');\n      let newModel = [];\n      if (typeof this._getModel === 'function') {\n        newModel = this._getModel();\n      }\n      if (newModel instanceof Promise) {\n        try {\n          newModel = await newModel;\n        } catch (e) {\n          this.error('error refreshing async model:', e);\n        }\n      }\n      let target = element.querySelector(':scope > ul');\n      if (template.getAttribute('wrap') === 'false') {\n        target = element;\n      } else if (template.hasAttribute('target')) {\n        switch (template.getAttribute('target')) {\n          case 'parent':\n            target = element.parentElement;\n            // we do not need the list to be visible then\n            element.style.display = 'none';\n            break;\n          default:\n            throw new Error('invalid target: ' + template.getAttribute('target'));\n        }\n      } else if (!target) {\n        target = document.createElement('ul');\n        target.classList.add('content');\n        element.appendChild(target);\n      }\n      this.debug('refreshing with new model length', newModel.length);\n      if (Array.isArray(newModel) || newModel instanceof qx.data.Array) {\n        if (typeof this._filterModel === 'function') {\n          newModel = newModel.filter(this._filterModel);\n        }\n        if (typeof this._sortModel === 'function') {\n          newModel.sort(this._sortModel);\n        }\n        if (this._limit) {\n          newModel = newModel.slice(0, this._limit);\n        }\n        if (newModel.length === 0) {\n          const whenEmptyTemplate = element.querySelector(':scope > template[when=\"empty\"]');\n\n          // remove old entries\n          while (target.firstElementChild && target.firstElementChild.hasAttribute('data-row')) {\n            target.removeChild(target.firstElementChild);\n          }\n\n          if (whenEmptyTemplate && !target.querySelector(':scope > .empty-model')) {\n            const emptyModel = whenEmptyTemplate.content.firstElementChild.cloneNode(true);\n            emptyModel.classList.add('empty-model');\n            target.appendChild(emptyModel);\n            return;\n          }\n        } else {\n          const emptyElem = target.querySelector(':scope > .empty-model');\n          if (emptyElem) {\n            emptyElem.remove();\n          }\n\n          let child;\n          for (let i = target.children.length-1; i >=0; i--) {\n            child = target.children[i];\n            if (child.hasAttribute('data-row') && parseInt(child.getAttribute('data-row')) >= newModel.length) {\n              target.removeChild(child);\n            }\n          }\n        }\n        const itemTemplate = document.createElement('template');\n        // remove entries we do not need anymore\n        for (let i = newModel.length; i < this._model.length; i++) {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          if (elem) {\n            elem.remove();\n          }\n        }\n\n        const getValue = (name, entry) => {\n          let index = -1;\n          if (name.endsWith(']')) {\n            // array access\n            index = parseInt(name.substring(name.indexOf('[') + 1, name.length - 1));\n            if (isNaN(index)) {\n              this.error(\n                'error parsing array index from ' + name,\n                name.substring(name.indexOf('[') + 1, name.length - 1)\n              );\n              return '';\n            }\n            name = name.substring(0, name.indexOf('['));\n          }\n          if (Object.prototype.hasOwnProperty.call(entry, name)) {\n            let val = entry[name];\n            if (index >= 0 && Array.isArray(val)) {\n              return val[index];\n            }\n            return val;\n          }\n          return '';\n        };\n        newModel.forEach((entry, i) => {\n          let elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          const html = template.innerHTML.replaceAll(/\\${([^}]+)}/g, (match, content) => {\n            if (content === 'index') {\n              return '' + i;\n            }\n            if (content.includes('||')) {\n              // elements are or'ed use the first one with value\n              let val = '';\n              for (let name of content.split('||').map(n => n.trim())) {\n                val = getValue(name, entry);\n                if (val) {\n                  return val;\n                }\n              }\n            } else if (content.includes('|')) {\n              // formatting rules\n              const [name, format] = content.split('|');\n              const val = getValue(name, entry);\n              if (val instanceof Date) {\n                const df = new qx.util.format.DateFormat(format);\n                return df.format(val);\n              } else if (val) {\n                return val;\n              }\n            } else if (content.includes('.')) {\n              // first part is an object value, the latter part is JS code then\n              const [name] = content.split('.', 1);\n              const code = content.substring(name.length+1);\n              const val = getValue(name, entry);\n              if (val instanceof Object) {\n                try {\n                  const func = new Function('obj', `return obj.${code};`);\n                  return func(val);\n                } catch (e) {}\n              }\n            }\n            return getValue(content, entry);\n          });\n\n          itemTemplate.innerHTML = html;\n          // check for elements with when attributes\n          itemTemplate.content.firstElementChild.querySelectorAll('[when]').forEach(elem => {\n            const [leftVal, rightVal] = elem\n              .getAttribute('when')\n              .split('=')\n              .map(n => n.trim());\n            // noinspection EqualityComparisonWithCoercionJS\n            if (leftVal != rightVal) {\n              elem.parentElement.removeChild(elem);\n            } else {\n              elem.removeAttribute('when');\n            }\n          });\n          if (elem) {\n            // update existing\n            elem.innerHTML = itemTemplate.content.firstElementChild.innerHTML;\n            elem.setAttribute('data-row', '' + i);\n            this._initElement(elem, entry);\n          } else {\n            // append new child\n            itemTemplate.content.firstElementChild.setAttribute('data-row', '' + i);\n            elem = itemTemplate.content.cloneNode(true);\n            this._initElement(elem.firstElementChild, entry);\n            target.appendChild(elem);\n          }\n        });\n        this._model = newModel;\n      } else {\n        this.error('model must be an array', newModel);\n      }\n    },\n\n    _initElement(elem, entry) {\n      elem.$$model = entry;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_modelInstance', '_timer');\n    this._model = null;\n    this._filterModel = null;\n    this._sortModel = null;\n    this._target = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'list',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an item in a list.\n */\nqx.Class.define('cv.ui.structure.tile.components.ListItem', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      // install fireEvent function\n      this._element.fireEvent = (name, value) => {\n        const ev = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            value: value,\n            source: this\n          }\n        });\n        this._element.dispatchEvent(ev);\n      };\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'listitem',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MStringTransforms],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: ['pages', 'menuItems'],\n      apply: '_applyModel'\n    },\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n\n    showLabels: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowLabels',\n      transform: '_parseBoolean'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _applyShowLabels(val) {\n      if (val) {\n        this._element.classList.remove('compact');\n      } else {\n        this._element.classList.add('compact');\n      }\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _applyModel(model) {\n      if (model) {\n        const rootList = document.createElement('ul');\n        this._element.appendChild(rootList);\n\n        if (model === 'pages') {\n          // add hamburger menu\n          const ham = document.createElement('a');\n          ham.href = '#';\n          ham.classList.add('menu');\n          ham.onclick = event => this._onHamburgerMenu(event);\n          const icon = document.createElement('i');\n\n          ham.appendChild(icon);\n          this._element.appendChild(ham);\n\n          qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n          qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n          qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n          icon.classList.add('ri-menu-line');\n        } else if (model === 'menuItems') {\n          // add hamburger menu\n          const icon = document.createElement('i');\n          icon.classList.add('ri-more-2-fill');\n          this._element.appendChild(icon);\n          // listen on whole element\n          this._element.onclick = event => this._onHamburgerMenu(event);\n          rootList.classList.add('context-menu');\n          this._generateMenu();\n        }\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.hasAttribute('model') ? element.getAttribute('model')\n        : (element.querySelectorAll(':scope > cv-menu-item').length > 0) ? 'menuItems' : null;\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      this.setModel(model);\n    },\n\n    _generateMenu() {\n      switch (this.getModel()) {\n        case 'pages': {\n          const currentPage = window.location.hash.substring(1);\n          let parentElement = document.querySelector('main');\n          if (parentElement) {\n            const firstPage = document.querySelector('cv-page');\n            if (firstPage) {\n              parentElement = firstPage.parentElement;\n            }\n          }\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n          }\n          break;\n        }\n        case 'menuItems': {\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            for (let item of this._element.querySelectorAll(':scope > cv-menu-item')) {\n              const pageName = item.getAttribute('name') || '';\n              const pageIcon = item.getAttribute('icon') || '';\n              const li = document.createElement('li');\n              if (pageIcon) {\n                const i = document.createElement('i');\n                i.classList.add(pageIcon);\n                i.title = pageName;\n                li.appendChild(i);\n              }\n              if (this.isShowLabels()) {\n                const text = document.createTextNode(pageName);\n                li.appendChild(text);\n              }\n              li.addEventListener('click', event => {\n                item.getInstance().onClick(event);\n              });\n              rootList.appendChild(li);\n            }\n          }\n          break;\n        }\n      }\n    },\n\n    _onHamburgerMenu(event) {\n      let toggleClass = 'open';\n      if (this.getModel() === 'pages') {\n        toggleClass = 'responsive';\n        for (let detail of this._element.querySelectorAll('.details')) {\n          detail.setAttribute('open', '');\n        }\n      }\n      this._element.classList.toggle(toggleClass);\n      event.stopPropagation();\n      if (this._element.classList.contains(toggleClass)) {\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (\n        target.classList.contains('menu') ||\n        (target.parentElement && target.parentElement.classList.contains('menu')) ||\n        target.nodeName.toLowerCase() === 'cv-menu' ||\n        (target.parentElement && target.parentElement.nodeName.toLowerCase() === 'cv-menu')\n      ) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== '.summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 500);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (\n          current &&\n          current.previousElementSibling &&\n          current.previousElementSibling.tagName.toLowerCase() === 'li'\n        ) {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('open')) {\n        this._element.classList.remove('open');\n      } else if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('.details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _openDetail(item) {\n      const first = this._element.querySelectorAll('.details[open]').length === 0;\n      item.setAttribute('open', '');\n      if (first) {\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _closeDetail(item) {\n      item.removeAttribute('open');\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        // remove listeners\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        a.setAttribute('data-page-id', pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels() || currentLevel > 0) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if (\n          (depth < 0 || depth > currentLevel) &&\n          page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0\n        ) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          a.setAttribute('href', '#');\n\n          a.addEventListener('click', ev => {\n            cv.Application.structureController.scrollToPage(pageId);\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n            p.addEventListener('click', ev => {\n              if (details.hasAttribute('open')) {\n                this._closeDetail(details);\n              } else {\n                this._openDetail(details);\n              }\n            });\n          }\n          const expander = document.createElement('i');\n          expander.classList.add('expander');\n          expander.classList.add('ri-arrow-down-s-line');\n          summary.appendChild(expander);\n          expander.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              this._closeDetail(details);\n            } else {\n              this._openDetail(details);\n            }\n          });\n\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel+1);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[data-page-id=\"${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n        static get observedAttributes() {\n          return ['appearance', 'depth', 'show-labels'];\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Represents an action that should be executed when the related menu item has been clicked.\n */\nqx.Class.define('cv.ui.structure.tile.components.MenuAction', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _currentState: null,\n\n    _init() {\n      super._init();\n      const action = this._element.getAttribute('action');\n      switch (action) {\n        case 'toggleState': {\n          let hasAddress = false;\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            hasAddress = true;\n            if (address.getAttribute('mode') !== 'write') {\n              this._element.addEventListener('stateUpdate', ev => {\n                this.onStateUpdate(ev);\n                // cancel event here\n                ev.stopPropagation();\n              });\n            }\n          }\n          if (!hasAddress) {\n            this.error('a cv-menu-item with action \"toggleState\" needs at least one cv-address to read the write the state,');\n          }\n          break;\n        }\n        case 'popup':\n          if (!this._element.querySelector(':scope > cv-popup')) {\n            this.error('a cv-menu-item with action \"popup\" must have a cv-popup as child.');\n          }\n          break;\n      }\n    },\n\n    onClick(event) {\n      switch (this._element.getAttribute('action')) {\n        case 'popup': {\n          const popup = this._element.querySelector(':scope > cv-popup');\n          if (popup) {\n            popup.getInstance().open();\n          }\n          event.stopPropagation();\n          break;\n        }\n        case 'toggleState': {\n          const ev = new CustomEvent('sendState', {\n            detail: {\n              value: !this._currentState,\n              source: this\n            }\n          });\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            if (address.getAttribute('mode') !== 'read') {\n              address.dispatchEvent(ev);\n            }\n          }\n          event.stopPropagation();\n          break;\n        }\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == '1';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      this._currentState = value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu-item',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let baseName in cv.plugins) {\n            if (baseName.toLowerCase() === name) {\n              Clazz = cv.plugins[baseName];\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            // must be converted to real XML document, otherwise attributes cannot be accessed\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(this._element.innerHTML, 'application/xml');\n            const props = Clazz.parse(doc.firstElementChild, id, '', 'text');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          } else {\n            this.error('no main plugin class found for ' + pluginName);\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* RoundProgress.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a round progress bar (partially filled circle).\n * This component must be used inside a cv-value component, it is not meant to be used standalone.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.RoundProgress', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    text: {\n      check: 'String',\n      apply: '_applyText'\n    },\n\n    type: {\n      check: ['circle', 'semiCircle'],\n      init: 'circle'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __writeAddresses: null,\n    __circumference: null,\n    __start: null,\n    __normalizedRadius: null,\n    __radius: null,\n    __label: null,\n    __canvas: null,\n    __availableLabelWidth: null,\n    __defaultLabelFontSize: null,\n    _queuedFitText: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      const style = document.querySelector(':root').style;\n      const hasFixedRadius = element.hasAttribute('radius');\n      const radius = (this.__radius =\n        element.getAttribute('radius') || parseInt(style.getPropertyValue('--tileCellWidth')) || 56);\n      const strokeWidth = element.getAttribute('stroke') || 8;\n      const normalizedRadius = (this.__normalizedRadius = radius - strokeWidth / 2);\n      this.__circumference = normalizedRadius * 2 * Math.PI;\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      const type = this.getType();\n      let height = type === 'semiCircle' ? radius : radius * 2;\n      const ns = 'http://www.w3.org/2000/svg';\n      const svg = document.createElementNS(ns, 'svg');\n      svg.setAttribute('height', height);\n      svg.setAttribute('width', '' + (radius * 2));\n      svg.setAttribute('type', type);\n\n      if (type === 'circle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'circle');\n          bg.classList.add('bg');\n          bg.setAttribute('r', '' +normalizedRadius);\n          bg.setAttribute('cx', '50%');\n          bg.setAttribute('cy', '50%');\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        const bar = document.createElementNS(ns, 'circle');\n        bar.classList.add('bar');\n        bar.setAttribute('r', '' +normalizedRadius);\n        bar.setAttribute('cx', '50%');\n        bar.setAttribute('cy', '50%');\n        bar.setAttribute('stroke-width', strokeWidth);\n        bar.setAttribute('stroke-dasharray', `${this.__circumference} ${this.__circumference}`);\n        bar.setAttribute('stroke-dashoffset', this.__circumference);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      } else if (type === 'semiCircle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'path');\n          bg.classList.add('bg');\n          bg.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 1 ${\n            radius * 2 - strokeWidth / 2\n          } ${radius}`);\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        this.__start = {\n          x: strokeWidth / 2,\n          y: radius\n        };\n        const bar = document.createElementNS(ns, 'path');\n        bar.classList.add('bar');\n        bar.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 0 ${\n          strokeWidth / 2\n        } ${radius}`);\n        bar.setAttribute('fill', 'transparent');\n        bar.setAttribute('stroke-width', strokeWidth);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      }\n      element.replaceChildren(svg, document.createElement('label'));\n\n      this.__availableLabelWidth = radius * 2 - strokeWidth * 2 - 24;\n\n      if (!hasFixedRadius) {\n        qx.event.message.Bus.subscribe('cv.design.tile.cellWidthChanged', ev => {\n          this.__radius = ev.getData();\n          this.__normalizedRadius = this.__radius - strokeWidth / 2;\n          this.__circumference = this.__normalizedRadius * 2 * Math.PI;\n          height = type === 'semiCircle' ? this.__radius : this.__radius * 2;\n          const svg = element.querySelector(':scope > svg');\n          svg.setAttribute('height', '' + height);\n          svg.setAttribute('width', '' + this.__radius * 2);\n          if (type === 'circle') {\n            this._element.querySelectorAll(':scope > svg > circle').forEach(circle => {\n              circle.setAttribute('r', '' + this.__normalizedRadius);\n              if (circle.classList.contains('bar')) {\n                circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n                circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n              }\n            });\n          } else if (type === 'semiCircle') {\n            this.__start.y = this.__radius;\n            const bg = this._element.querySelector(':scope > svg > path.bg');\n            if (bg) {\n              bg.setAttribute(\n                'd',\n                `M ${strokeWidth / 2} ${this.__radius} A ${this.__normalizedRadius} ${this.__normalizedRadius} 0 0 1 ${\n                  this.__radius * 2 - strokeWidth / 2\n                } ${this.__radius}`\n              );\n            }\n          }\n          this._applyProgress(this.isPropertyInitialized('progress') ? this.getProgress() : 0);\n        });\n      }\n    },\n\n    __convert(angle) {\n      const angleRad = angle * (Math.PI / 180.0);\n      return {\n        x: this.__radius - this.__normalizedRadius * Math.cos(angleRad),\n        y: this.__radius - this.__normalizedRadius * Math.sin(angleRad)\n      };\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueElement;\n        let end;\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n\n        switch (this.getType()) {\n          case 'circle':\n            valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n            valueElement.setAttribute(\n              'stroke-dashoffset',\n              '' + this.__circumference - (percent / 100) * this.__circumference\n            );\n\n            break;\n\n          case 'semiCircle':\n            valueElement = this._element.querySelector(':scope > svg > path.bar');\n\n            end = this.__convert((180 / 100) * percent);\n            valueElement.setAttribute(\n              'd',\n              [\n                'M',\n                this.__start.x,\n                this.__start.y,\n                'A',\n                this.__normalizedRadius,\n                this.__normalizedRadius,\n                0,\n                0,\n                1,\n                end.x,\n                end.y\n              ].join(' ')\n            );\n\n            break;\n        }\n      }\n    },\n\n    _fitText() {\n      if (this.__label && this.__label.textContent) {\n        if (this.isVisible()) {\n          if (!this.__canvas) {\n            this.__canvas = document.createElement('canvas');\n            this.__context = this.__canvas.getContext('2d');\n            const compStyle = window.getComputedStyle(this.__label);\n            this.__context.font = compStyle.getPropertyValue('font');\n            this.__defaultLabelFontSize = compStyle.getPropertyValue('font-size');\n          }\n          const metrics = this.__context.measureText(this.__label.textContent);\n          if (metrics.width > this.__availableLabelWidth) {\n            // adjust font-size\n            const factor = this.__availableLabelWidth / metrics.width;\n            this.__label.style.fontSize = Math.floor(parseInt(this.__defaultLabelFontSize) * factor) + 'px';\n          } else {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n          this._queuedFitText = false;\n        } else {\n          this._queuedFitText = true;\n        }\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData() && this._queuedFitText) {\n        this._fitText();\n      }\n    },\n\n    _applyText(value) {\n      if (this.isConnected()) {\n        if (!this.__label) {\n          this.__label = this._element.querySelector(':scope > label');\n        }\n        this.__label.textContent = value;\n        if (!value) {\n          // empty text, just reset to default font size\n          if (this.__defaultLabelFontSize) {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n        } else {\n          this._fitText();\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__label = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'round-progress',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Select.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Allows the selection of one element out of a list of <cv-option> elements\n */\nqx.Class.define('cv.ui.structure.tile.components.Select', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    show: {\n      check: ['icon', 'label', 'both'],\n      init: 'both',\n      apply: '_applyShow'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __options: null,\n    __value: null,\n    __popup: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this.__options = new Map();\n\n      const popup = (this.__popup = document.createElement('div'));\n      popup.classList.add('popup');\n      element.querySelectorAll(':scope > cv-option').forEach((option, i) => {\n        popup.appendChild(option);\n        if (!option.hasAttribute('key')) {\n          option.setAttribute('key', '' + i);\n        }\n        this.__options.set(option.getAttribute('key'), option);\n      });\n      const value = (this.__value = document.createElement('span'));\n      value.classList.add('value');\n      element.appendChild(value);\n      element.appendChild(popup);\n      const handle = document.createElement('cv-icon');\n      handle.classList.add('dropdown');\n      handle.classList.add('ri-arrow-down-s-line');\n      element.appendChild(handle);\n\n      if (this._writeAddresses.length > 0) {\n        element.addEventListener('click', ev => this.onClicked(ev));\n      }\n    },\n\n    _toggleOptions(close) {\n      // open popup\n      const style = getComputedStyle(this.__popup);\n      if (style.getPropertyValue('display') === 'none' && !close) {\n        this.__popup.style.display = 'block';\n        window.requestAnimationFrame(() => {\n          // delay adding this listener, otherwise it would fire immediately\n          // also the native addEventListener does not allow the listener to be re-added once removed, so we use the qx way here\n          // which works fine\n          qx.event.Registration.addListener(document.body, 'click', this.handleEvent, this, true);\n        });\n      } else {\n        this.__popup.style.display = 'none';\n        qx.event.Registration.removeListener(document.body, 'click', this.handleEvent, this, true);\n      }\n    },\n\n    handleEvent(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this._toggleOptions(true);\n    },\n\n    onClicked(ev) {\n      let target = ev.target;\n      // find out event target (either the cv-select of cv-option\n      while (target !== ev.currentTarget && target.tagName.toLowerCase() !== 'cv-option') {\n        target = target.parentElement;\n      }\n      if (target.tagName.toLowerCase() === 'cv-option') {\n        // select this option\n        this._sendSelection(target.getAttribute('key'), true);\n      }\n      this._toggleOptions();\n    },\n\n    _sendSelection(key, predictive) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: key,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      if (predictive === true) {\n        this.setValue(key);\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const key = typeof mappedValue !== 'undefined' ? '' + mappedValue : '';\n      if (this.__options.has(key)) {\n        this.__value.innerHTML = '';\n        const current = this.__options.get(key);\n        switch (this.getShow()) {\n          case 'icon':\n            // if we have non text children, we only use them (only icons no text)\n            for (const child of current.children) {\n              if (child.nodeName.toLowerCase() === 'cv-icon') {\n                this.__value.appendChild(child.cloneNode());\n              }\n            }\n            break;\n\n          case 'label':\n            for (const child of current.childNodes) {\n              if (child.nodeType === Node.TEXT_NODE || (child.nodeType === Node.ELEMENT_NODE && child.nodeName.toLowerCase() === 'label')) {\n                this.__value.appendChild(child.cloneNode());\n              }\n            }\n            break;\n\n          case 'both':\n            this.__value.innerHTML = current.innerHTML;\n            break;\n        }\n      }\n    },\n\n    _applyShow(show) {\n      if (this.getValue()) {\n        this._updateValue(this.getValue());\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'select',\n      class extends QxConnector {\n        static observedAttributes = ['show'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Slider.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a range slider.\n */\nqx.Class.define('cv.ui.structure.tile.components.Slider', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 5,\n      apply: '_applyStepWidth'\n    },\n\n    min: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyMin'\n    },\n\n    max: {\n      check: 'Number',\n      init: 100,\n      apply: '_applyMax'\n    },\n\n    showValue: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowValue'\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __throttled: null,\n    __input: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      } else {\n        this._applyThrottleInterval(this.getThrottleInterval());\n      }\n\n      // init components\n      let input = element.querySelector(':scope > input');\n      if (!input) {\n        input = document.createElement('input');\n        input.classList.add('slider');\n        input.setAttribute('type', 'range');\n        element.insertBefore(input, element.querySelector(':scope > .up'));\n        input.oninput = () => this.__throttled.call();\n      }\n      this.__input = input;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseInt(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('min')) {\n        this.setMin(parseInt(element.getAttribute('min')));\n      }\n      if (element.hasAttribute('max')) {\n        this.setMax(parseInt(element.getAttribute('max')));\n      }\n      if (element.hasAttribute('hide-value') && element.getAttribute('hide-value') === 'true') {\n        this.setShowValue(false);\n      } else {\n        this._applyShowValue(true);\n      }\n\n      const decreaseElement = element.querySelector(':scope > .decrease');\n      if (decreaseElement) {\n        decreaseElement.addEventListener('click', ev => this.onDecrease());\n      }\n      const increaseElement = element.querySelector(':scope > .increase');\n      if (increaseElement) {\n        increaseElement.addEventListener('click', ev => this.onIncrease());\n      }\n    },\n\n    _applyThrottleInterval(value) {\n      if (value > 0) {\n        this.__throttled = cv.util.Function.throttle(this.onInput, value, { trailing: true }, this);\n      } else {\n        // no throttling, direct call\n        this.__throttled = {\n          call: () => this.onInput(),\n          abort: () => {}\n        };\n      }\n    },\n\n    _applyMin(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('min', '' + value);\n    },\n\n    _applyMax(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('max', '' + value);\n    },\n\n    _applyStepWidth(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('step', '' + value);\n    },\n\n    _applyShowValue(value) {\n      let valueLabel = this._element.querySelector(':scope > label.value');\n      if (value) {\n        if (!valueLabel) {\n          valueLabel = document.createElement('label');\n          valueLabel.classList.add('value');\n          valueLabel.classList.add('secondary');\n          this._element.insertBefore(valueLabel, this._element.firstChild);\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector(':scope > input');\n      if (target) {\n        target.value = value;\n      }\n      if (this.isShowValue()) {\n        let valueLabel = this._element.querySelector(':scope > label.value');\n        if (valueLabel) {\n          valueLabel.innerText = mappedValue;\n        }\n      }\n    },\n\n    onInput() {\n      this.__sendValue(this.__input.value);\n    },\n\n    onDecrease() {\n      const value = this.getValue() - this.getStepWidth();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getValue() + this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'slider',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Spinner.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a number value that can be increased and decreased by a defined step width.\n */\nqx.Class.define('cv.ui.structure.tile.components.Spinner', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 1.0\n    },\n\n    mode: {\n      check: ['relative', 'absolute'],\n      init: 'absolute'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseFloat(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('mode')) {\n        this.setMode(element.getAttribute('mode'));\n      }\n      // init components\n      let valueElement = element.querySelector(':scope > .value');\n      if (!valueElement) {\n        valueElement = document.createElement('label');\n        valueElement.classList.add('value');\n        valueElement.classList.add('primary');\n        element.appendChild(valueElement);\n      }\n      // add increase / decrease buttons\n      const decrease = document.createElement('div');\n      decrease.classList.add('clickable');\n      decrease.classList.add('left');\n      const decreaseIcon = document.createElement('cv-icon');\n      decreaseIcon.classList.add('ri-arrow-down-s-line');\n      decrease.addEventListener('click', ev => this.onDecrease(ev));\n      decrease.appendChild(decreaseIcon);\n      element.insertBefore(decrease, valueElement);\n\n      const increase = document.createElement('div');\n      increase.classList.add('clickable');\n      increase.classList.add('right');\n      const increaseIcon = document.createElement('cv-icon');\n      increaseIcon.classList.add('ri-arrow-up-s-line');\n      increase.appendChild(increaseIcon);\n      increase.addEventListener('click', ev => this.onIncrease(ev));\n      element.appendChild(increase);\n    },\n\n    onDecrease(ev) {\n      const value = this.getMode() === 'absolute' ? this.getValue() - this.getStepWidth() : this.getStepWidth() * -1;\n      ev.stopPropagation();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease(ev) {\n      const value = this.getMode() === 'absolute' ? this.getValue() + this.getStepWidth() : this.getStepWidth();\n      ev.stopPropagation();\n      this.__sendValue(value, 'increase');\n    },\n\n    _updateValue(mappedValue) {\n      const target = this._element.querySelector('.value');\n      if (target) {\n        target.innerHTML = mappedValue;\n      }\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'spinner',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Value.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a value from the backend, as label or image/icon\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Value', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MResize],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _queuedOverflowDetection: null,\n    _debouncedDetectOverflow: null,\n\n    _init() {\n      super._init();\n      this._debouncedDetectOverflow = qx.util.Function.debounce(this._detectOverflow, 20);\n\n      const target = this._element.querySelector('.value');\n      if (target && target.tagName.toLowerCase() === 'label') {\n        // check for overflowing text, when labels parent gets resized\n        this.setResizeTarget(this._element);\n        this.addListener('resized', this._debouncedDetectOverflow, this);\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData()) {\n        if (this._queuedOverflowDetection) {\n          this._debouncedDetectOverflow();\n        }\n      } else {\n        const target = this._element.querySelector('.value');\n        if (target && target.classList.contains('scroll')) {\n          target.classList.remove('scroll');\n        }\n      }\n    },\n\n    _detectOverflow() {\n      const target = this._element.querySelector('.value');\n      if (this.isVisible()) {\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > target.parentElement.clientWidth) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      let styleClass = '';\n      for (const target of this._element.querySelectorAll('.value')) {\n        const tagName = target.tagName.toLowerCase();\n        switch (tagName) {\n          case 'cv-icon':\n            if (this._element.hasAttribute('styling')) {\n              styleClass = cv.Application.structureController.styleValue(\n                this._element.getAttribute('styling'),\n                value,\n                this.__store\n              );\n            }\n            if (target._instance) {\n              target._instance.setId('' + mappedValue);\n              target._instance.setStyleClass(styleClass);\n            } else {\n              // try again in next frame\n              window.requestAnimationFrame(() => {\n                if (target._instance) {\n                  target._instance.setId('' + mappedValue);\n                  target._instance.setStyleClass(styleClass);\n                } else {\n                  this.error('id and styleClass could not be applied, custom element not initialized yet!');\n                }\n              });\n            }\n            break;\n          case 'meter':\n            target.setAttribute('value', value);\n            break;\n          case 'cv-round-progress':\n            if (typeof value === 'string') {\n              value = parseInt(value);\n            }\n            target._instance.setProgress(value);\n            target._instance.setText('' + mappedValue);\n            break;\n          case 'label':\n            target.innerHTML = mappedValue;\n            this._debouncedDetectOverflow();\n            break;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'value',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\nqx.Mixin.define('cv.ui.structure.tile.components.svg.MGraphicsElement', {\n  include: cv.ui.structure.tile.MStringTransforms,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    DefaultSize: 56\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    row: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyPosition',\n      transform: '_parseFloat'\n    },\n\n    column: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyPosition',\n      transform: '_parseFloat'\n    },\n\n    x: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyToSvg'\n    },\n\n    y: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyToSvg'\n    },\n\n    rowspan: {\n      check: 'Number',\n      init: 1,\n      apply: '_updateHeight',\n      transform: '_parseFloat'\n    },\n\n    colspan: {\n      check: 'Number',\n      init: 1,\n      apply: '_updateWidth',\n      transform: '_parseFloat'\n    },\n\n    height: {\n      check: 'Number',\n      init: 0,\n      apply: '_applySize',\n      event: 'heightChanged'\n    },\n\n    width: {\n      check: 'Number',\n      init: 0,\n      apply: '_applySize',\n      event: 'widthChanged'\n    },\n\n    title: {\n      check: 'String',\n      init: '',\n      apply: '_applyTitle'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _parentGridLayout: null,\n\n    _findParentGridLayout() {\n      let parentInstance = null;\n      let p = this._element.parentElement;\n      while (p && !parentInstance) {\n        if (p.nodeName.toLowerCase().startsWith('cv-') && p._instance && qx.Class.hasOwnMixin(p._instance.constructor, cv.ui.structure.tile.components.svg.MSvgGrid)) {\n          parentInstance = p._instance;\n        } else if (p.nodeName.toLowerCase() === 'cv-page') {\n          // do not look outside the page\n          break;\n        } else {\n          p = p.parentElement;\n        }\n      }\n      this._parentGridLayout = parentInstance;\n    },\n\n    _applyToSvg(val, oldVal, name) {\n      if (this._svg) {\n        this._svg.setAttribute(name, val);\n      }\n    },\n\n    _updateWidth() {\n      if (this._parentGridLayout && this._svg) {\n        const width = this._parentGridLayout.getCellWidth() * this.getColspan() + this._parentGridLayout.getSpacing() * (this.getColspan() - 1);\n        this.setWidth(width);\n      }\n    },\n\n    _updateHeight() {\n      if (this._parentGridLayout && this._svg) {\n        const height = this._parentGridLayout.getCellHeight() * this.getRowspan() + this._parentGridLayout.getSpacing() * (this.getRowspan() - 1);\n        this.setHeight(height);\n      }\n    },\n\n    _applyPosition() {\n      if (this._parentGridLayout && this._svg) {\n        this._parentGridLayout.layout(this._svg, this.getRow(), this.getColumn());\n      }\n    },\n\n    _applySize(value, oldValue, name) {\n      if (this._svg) {\n        this._svg.setAttribute(name, `${value}`);\n      }\n    },\n\n    _applyTitle(value, oldValue) {\n      if (typeof this._applyTitleOverride === 'function') {\n        this._applyTitleOverride(value, oldValue);\n      } else if (this._target) {\n        let title = this._target.querySelector(':scope > title');\n        if (value) {\n          if (!title) {\n            title = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n            this._target.appendChild(title);\n          }\n          title.textContent = value;\n        } else if (title) {\n          title.remove();\n        }\n      }\n    }\n  }\n});\n","/**\n * TextValue shows an element that contains of an icon, an optional tile\n * and a value-text.\n *\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Class.define('cv.ui.structure.tile.components.svg.TextValue', {\n  extend: cv.ui.structure.tile.components.Value,\n  include: cv.ui.structure.tile.components.svg.MGraphicsElement,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    icon: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyIcon'\n    },\n\n    color: {\n      check: 'String',\n      init: 'var(--primaryText)',\n      apply: '_applyColor'\n    },\n\n    iconColor: {\n      check: 'String',\n      init: 'var(--primaryText)',\n      apply: '_applyIconColor'\n    },\n\n    scale: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyScale'\n    },\n\n    offsetY: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyOffsetY'\n    },\n\n    offsetX: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyOffsetX'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _svg: null,\n    _iconSize: null,\n    _iconPosition: null,\n    _debouncedUpdateRSize: null,\n\n    getSvg() {\n      return this._svg;\n    },\n\n    getParentSvg() {\n      return this._svg ? this._svg.ownerSVGElement : null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this._findParentGridLayout();\n      const parent = this._parentGridLayout ? this._parentGridLayout.getSvg() : element;\n      this._iconSize = 24 * this.getScale();\n      this._debouncedUpdateRSize = qx.util.Function.debounce(this._updateSize.bind(this), 10);\n      this._parentGridLayout.addListener('changeSize', this._debouncedUpdateRSize, this);\n\n      const ns = 'http://www.w3.org/2000/svg';\n\n      // add surrounding svg node\n      const svg = this._svg = document.createElementNS(ns, 'svg');\n      svg.classList.add('text-value');\n      for (const name of ['x', 'y']) {\n        if (element.hasAttribute(name)) {\n          svg.setAttribute(name, element.getAttribute(name));\n        }\n      }\n      parent.appendChild(svg);\n\n      const group = document.createElementNS(ns, 'g');\n      svg.appendChild(group);\n      this._target = group;\n\n      if (element.hasAttribute('icon')) {\n        this._applyIcon(this.getIcon());\n      }\n\n      const value = document.createElementNS(ns, 'text');\n      value.setAttribute('x', '0');\n      value.setAttribute('y', '32');\n      value.setAttribute('alignment-baseline', 'central');\n      value.setAttribute('class', 'value');\n      value.setAttribute('fill', this.getColor());\n      this._target.appendChild(value);\n\n      this.addListener('heightChanged', this._centerY, this);\n      this.addListener('widthChanged', this._centerX, this);\n\n      this._updateHeight();\n      this._updateWidth();\n\n      this._applyPosition();\n      this._applyTitleOverride(this.getTitle());\n    },\n\n    _updateSize() {\n      const newScale = Math.min(2.5, (Math.min(this._parentGridLayout.getCellWidth(), this._parentGridLayout.getCellHeight()) - this._parentGridLayout.getSpacing()) / cv.ui.structure.tile.components.svg.MGraphicsElement.DefaultSize);\n      if (newScale === 0.0) {\n        return;\n      }\n      this.debug('new scale:', newScale);\n      this.setScale(newScale);\n    },\n\n    _applyScale(scale) {\n      if (this._target) {\n        this._target.setAttribute('transform', `scale(${scale})`);\n      }\n      if (this._svg) {\n        this.setHeight(cv.ui.structure.tile.components.svg.MGraphicsElement.DefaultSize * scale * this.getRowspan());\n        this.setWidth(cv.ui.structure.tile.components.svg.MGraphicsElement.DefaultSize * scale * this.getColspan());\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this._target) {\n        const target = this._target.querySelector('.value');\n        target.textContent = mappedValue;\n        this._debouncedDetectOverflow();\n      }\n    },\n\n    _centerY() {\n      this.setOffsetY(this.getHeight() / 2 - this._svg.getBBox().height / 2);\n    },\n\n    _centerX() {\n      this.setOffsetX(this.getWidth() / 2 - this._svg.getBBox().width / 2);\n    },\n\n    _applyOffsetY(value) {\n      const icon = this._target.querySelector('.icon-container');\n      if (icon) {\n        icon.setAttribute('y', `${value}`);\n      }\n      let text = this._target.querySelector('text.value');\n      if (text) {\n        text.setAttribute('y', '' + (value + 32));\n      }\n      text = this._target.querySelector('text.title');\n      if (text) {\n        text.setAttribute('y', '' + (value + 16));\n      }\n    },\n\n    _applyOffsetX() {\n    },\n\n    _applyTitleOverride(title) {\n      if (this._target) {\n        if (title) {\n          let text = this._target.querySelector('text.title');\n          if (!text) {\n            text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n            text.setAttribute('x', '0');\n            text.setAttribute('y', '16');\n            text.setAttribute('alignment-baseline',  'central');\n            text.classList.add('title');\n            this._target.appendChild(text);\n          }\n          text.textContent = title;\n        } else {\n          let text = this._target.querySelector('text.title');\n          if (text) {\n            text.remove();\n          }\n        }\n      }\n    },\n\n    _applyColor(color) {\n      if (this._target) {\n        const target = this._target.querySelector('.value');\n        if (color) {\n          target.setAttribute('fill', color);\n        } else {\n          target.removeAttribute('fill');\n        }\n      }\n    },\n\n    _applyIconColor(color) {\n      const icon = this._target ? this._target.querySelector('cv-icon') : null;\n      if (icon) {\n        icon.style.color = color || 'inherit';\n      }\n    },\n\n    _applyIcon(iconName) {\n      if (!this._target) {\n        return;\n      }\n      let icon = this._target.querySelector('cv-icon');\n      if (iconName) {\n        if (!icon) {\n          const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\n          fo.setAttribute('class', 'icon-container');\n          fo.setAttribute('width', this._iconSize + 'px');\n          fo.setAttribute('height', this._iconSize + 'px');\n          fo.style.textAlign = 'center';\n\n          icon = document.createElement('cv-icon');\n          icon.classList.add(iconName);\n          icon.style.fontSize = this._iconSize + 'px';\n          if (this.getIconColor()) {\n            icon.style.color = this.getIconColor();\n          }\n          fo.appendChild(icon);\n          const value = this._target.querySelector('.value');\n          if (value) {\n            this._target.insertBefore(fo, value);\n          } else {\n            this._target.appendChild(fo);\n          }\n        }\n      } else if (icon) {\n        this._target.remove(icon);\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._target.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _detectOverflow() {\n      if (this.isVisible()) {\n        const target = this._target.querySelector('.value');\n        let width = 0;\n        const wAttr = this._svg.getAttribute('width');\n        if (wAttr) {\n          width = parseInt(wAttr, 10);\n        } else {\n          const sizeReference = this._svg.getBBox();\n          width = sizeReference.width;\n        }\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > width) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'svg-text-value',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'radius', 'stroke', 'title'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Mixin for all Entity-Classes.\n *\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Mixin.define('cv.ui.structure.tile.components.energy.MEntity', {\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['pv', 'battery', 'grid', 'house', 'charger', 'heatpump', 'consumer'],\n      nullable: true,\n      apply: '_applyType'\n    },\n\n    foregroundColor: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyForegroundColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _noValue: null,\n\n    hasNoValue() {\n      return this._noValue;\n    },\n\n    preMappingHook(value) {\n      // we only show positive values here, power flow is shown via connection direction\n      return Math.abs(value);\n    },\n\n    _applyForegroundColor(value) {\n      const bar = this._svg ? this._svg.querySelector('circle.bar') : null;\n      if (bar) {\n        bar.style.stroke = value;\n      }\n    }\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * TextValue for energy entities.\n *\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Class.define('cv.ui.structure.tile.components.energy.EnergyEntity', {\n  extend: cv.ui.structure.tile.components.svg.TextValue,\n  include: cv.ui.structure.tile.components.energy.MEntity,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    typeSettings: {\n      pv: {\n        icon: 'knxuf-weather_sun',\n        color: 'var(--pvColor)'\n      },\n      battery: {\n        icon: 'knxuf-measure_battery_100'\n      },\n      grid: {\n        icon: 'knxuf-scene_power_grid'\n      },\n      house: {\n        icon: 'knxuf-control_building_empty'\n      },\n      charger: {\n        icon: 'knxuf-veh_wallbox',\n        color: 'var(--powerConsumeColor)'\n      },\n      heatpump: {\n        icon: 'knxuf-sani_earth_source_heat_pump',\n        color: 'var(--powerConsumeColor)'\n      },\n      consumer: {\n        icon: 'knxuf-measure_smart_meter',\n        color: 'var(--powerConsumeColor)'\n      }\n    }\n  },\n\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    direction: {\n      check: ['incoming', 'outgoing', 'none'],\n      init: 'none',\n      apply: '_applyDirection'\n    },\n\n    unit: {\n      check: ['Wh', 'kWh'],\n      init: 'kWh',\n      apply: '_applyUnit'\n    }\n  },\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _autoFormat: null,\n\n    _applyType(value) {\n      const settings = cv.ui.structure.tile.components.energy.EnergyEntity.typeSettings[value];\n      if (settings) {\n        for (const attribute in settings) {\n          this._element.setAttribute(attribute, settings[attribute]);\n        }\n      }\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('id')) {\n        this._svg.setAttribute('id', element.getAttribute('id'));\n      }\n      this._autoFormat = !element.hasAttribute('format');\n      this._applyUnit(this.getUnit());\n      const direction = this.getDirection();\n      if (direction !== 'none') {\n        this._applyDirection(direction);\n      }\n    },\n\n    _applyUnit(value) {\n      if (this.isConnected() && this._autoFormat) {\n        if (!this._element.hasAttribute('format')) {\n          switch (value) {\n            case 'Wh':\n              this._element.setAttribute('format', '%d Wh');\n              break;\n\n            case 'kWh':\n              this._element.setAttribute('format', '%.2f kWh');\n              break;\n\n            default:\n              this._element.removeAttribute('format');\n              break;\n          }\n        }\n      }\n    },\n\n    _applyDirection(direction) {\n      if (direction === 'none') {\n        this.resetColor();\n        let arrow = this._target ? this._target.querySelector('path.direction') : null;\n        if (arrow) {\n          arrow.remove();\n        }\n        return;\n      }\n      switch (this.getType()) {\n        case 'battery':\n          this.setColor(direction === 'incoming' ? 'var(--batteryConsumeColor)' : 'var(--batteryInjectColor)');\n          break;\n\n        case 'grid':\n          this.setColor(direction === 'incoming' ? 'var(--gridConsumeColor)' : 'var(--gridInjectColor)');\n          break;\n      }\n      if (this._target) {\n        let arrow = this._target.querySelector('path.energy-direction');\n        if (!arrow) {\n          arrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          arrow.classList.add('energy-direction');\n          arrow.setAttribute('d', 'M 0 0 L 6 4 L 0 8');\n          arrow.setAttribute('stroke', this.getIconColor());\n          arrow.setAttribute('stroke-width', '1');\n          arrow.setAttribute('fill', 'transparent');\n          this._target.appendChild(arrow);\n        }\n        this.__updateDirectionPosition();\n      }\n    },\n\n    _applyOffsetY(value) {\n      super._applyOffsetY(value);\n      this.__updateDirectionPosition();\n    },\n\n    _applyScale(scale) {\n      super._applyScale(scale);\n      this.__updateDirectionPosition();\n    },\n\n    __updateDirectionPosition() {\n      let arrow = this._target.querySelector('path.energy-direction');\n      if (arrow) {\n        arrow.setAttribute('transform', `translate(28, ${this.getOffsetY() + 8}) rotate(${this.getDirection() === 'incoming' ? '90' : '-90'}, 3, 4)`);\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'energy-entity',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'type', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'direction', 'unit', 'color'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Mixin for all SVG based components that can be connected to each other.\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Mixin.define('cv.ui.structure.tile.components.energy.MConnectable', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._connections = [];\n    this._inverseConnections = [];\n  },\n\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connectTo: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyConnectTo'\n    },\n\n    connectFrom: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyConnectFrom'\n    },\n\n    connectionPoints: {\n      check: 'String',\n      init: 'auto',\n      apply: '_applyConnectionPoints'\n    },\n\n    useConnectionSum: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyUseConnectionSum'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _connectorTo: null,\n    _connectorFrom: null,\n    _useConnectionsSumAsValue: null,\n    /**\n     * @type {Array<cv.ui.structure.tile.components.energy.PowerEntity>}\n     */\n    _connections: null,\n    /**\n     * @type {Array<cv.ui.structure.tile.components.energy.PowerEntity>}\n     */\n    _inverseConnections: null,\n\n\n    /**\n     * Adds an incoming connection from another PowerEntity\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity} connected from other to this\n     */\n    addConnection(other) {\n      if (!this._connections.includes(other)) {\n        this._connections.push(other);\n        if (this.getUseConnectionSum()) {\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    /**\n     * Adds an incoming inverse connection from another PowerEntity.\n     * Inverse connection means that the sign of the other entity is flipped for summing all values\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity} connected from other to this\n     */\n    addInverseConnection(other) {\n      if (!this._inverseConnections.includes(other)) {\n        this._inverseConnections.push(other);\n        if (this.getUseConnectionSum()) {\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    /**\n     * Remove an incoming connection from another PowerEntity\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity}\n     */\n    removeConnection(other) {\n      if (this._connections.includes(other)) {\n        this._connections.remove(other);\n        if (this.getUseConnectionSum()) {\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    /**\n     * Remove an incoming inverse connection from another PowerEntity\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity}\n     */\n    removeInverseConnection(other) {\n      if (this._inverseConnections.includes(other)) {\n        this._inverseConnections.remove(other);\n        if (this.getUseConnectionSum()) {\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    _applyUseConnectionSum(value) {\n      if (value) {\n        for (const other of this._connections) {\n          // refresh connections\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n        for (const other of this._inverseConnections) {\n          // refresh connections\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    _updateConnectionsSum() {\n      let sum = 0.0;\n      for (const other of this._connections) {\n        sum += other.getValue();\n      }\n      for (const other of this._inverseConnections) {\n        sum -= other.getValue();\n      }\n      this.setValue(sum);\n    },\n\n    _updateDirection() {\n      const value = Math.round(this.getValue());\n      const connectors = [this._connectorTo, this._connectorFrom];\n      for (const connector of connectors) {\n        if (connector) {\n          if (value < 0) {\n            connector.setShowDirection('source');\n          } else if (value > 0) {\n            connector.setShowDirection('target');\n          } else {\n            connector.setShowDirection('none');\n          }\n        }\n      }\n    },\n\n    _applyConnectTo(targetId) {\n      if (this._svg && targetId) {\n        const parent = this._element.parentElement;\n        const target = parent.querySelector('#' + targetId);\n        if (target && target.nodeName.toLowerCase() === 'cv-power-entity') {\n          if (!this._connectorTo) {\n            this._connectorTo = this._initConnection(this, target._instance);\n            this._applyConnectionPoints(this.getConnectionPoints());\n            this._updateDirection();\n            // we are the power source for the target\n            target._instance.addConnection(this);\n          } else {\n            this._connectorTo.setTarget(target._instance);\n          }\n        }\n      }\n      if (targetId) {\n        this.registerPreMappingHook(this.preMappingHook, this);\n      } else {\n        this.unregisterPreMappingHook(this.preMappingHook);\n      }\n    },\n\n    _applyConnectFrom(sourceId) {\n      if (this._svg && sourceId) {\n        const parent = this._element.parentElement;\n        const source = parent.querySelector('#' + sourceId);\n        if (source && source.nodeName.toLowerCase() === 'cv-power-entity') {\n          if (!this._connectorFrom) {\n            this._connectorFrom = this._initConnection(source._instance, this);\n            this._applyConnectionPoints(this.getConnectionPoints());\n            this._updateDirection();\n            // we take power from the target\n            source._instance.addInverseConnection(this);\n          } else {\n            this._connectorFrom.setSource(source._instance);\n          }\n        }\n      }\n    },\n\n    /**\n     *\n     * @param source {cv.ui.structure.tile.components.energy.PowerEntity}\n     * @param target {cv.ui.structure.tile.components.energy.PowerEntity}\n     * @returns {cv.ui.structure.tile.components.svg.Connector}\n     * @private\n     */\n    _initConnection(source, target) {\n      const connector = new cv.ui.structure.tile.components.svg.Connector(source, target);\n      if (source.hasNoValue()) {\n        const targetId = target.getElement().getAttribute('id');\n        const parentElement = this._element.parentElement.querySelector('#' + targetId);\n        if (parentElement && parentElement._instance && parentElement._instance instanceof cv.ui.structure.tile.components.energy.PowerEntity && !parentElement._instance.hasNoValue()) {\n          // use styleClass from target\n          parentElement._instance.bind('styleClass', connector, 'styleClass');\n        }\n      } else {\n        this.bind('styleClass', connector, 'styleClass');\n      }\n      return connector;\n    },\n\n    _applyConnectionPoints(value) {\n      if (value) {\n        const connectors = [];\n        if (this._connectorTo) {\n          connectors.push(this._connectorTo);\n        }\n        if (this._connectorFrom) {\n          connectors.push(this._connectorFrom);\n        }\n        for (const connector of connectors) {\n          if (value === 'auto') {\n            connector.set({\n              sourceConnectionPoint: 'auto',\n              targetConnectionPoint: 'auto'\n            });\n          } else {\n            const [source, target] = value.split('-');\n            connector.set({\n              sourceConnectionPoint: source,\n              targetConnectionPoint: target\n            });\n          }\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    const source = this.getSource();\n    const target = this.getTarget();\n    if (target) {\n      target.removeConnection(this);\n    }\n    if (source) {\n      source.removeInverseConnection(this);\n    }\n\n    this._disposeObjects('_connectorTo', '_connectorFrom');\n    this._connections.clear();\n    this._inverseConnections.clear();\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Draws a line between two SVGGraphicsElements.\n *\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Class.define('cv.ui.structure.tile.components.svg.Connector', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(source, target) {\n    super();\n    this._updatePosition = this.__updatePosition.bind(this);\n    this._debouncedUpdatePosition = qx.util.Function.debounce(this._updatePosition, 50);\n    this._sourceObserver = new MutationObserver(this._onMutation.bind(this));\n    this._targetObserver = new MutationObserver(this._onMutation.bind(this));\n    this.setSource(source);\n    this.setTarget(target);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    C: 0\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true\n    },\n    source: {\n      check: 'cv.ui.structure.tile.components.energy.PowerEntity',\n      apply: '_applySource',\n      nullable: true\n    },\n    target: {\n      check: 'cv.ui.structure.tile.components.energy.PowerEntity',\n      apply: '_applyTarget',\n      nullable: true\n    },\n    root: {\n      check: 'SVGSVGElement',\n      apply: '_applyRoot',\n      nullable: true\n    },\n    sourceConnectionPoint: {\n      check: ['top', 'right', 'bottom', 'left', 'auto'],\n      init: 'auto',\n      apply: '__updatePosition',\n      validate : '_validateConnectionPoint'\n    },\n    targetConnectionPoint: {\n      check: ['top', 'right', 'bottom', 'left', 'auto'],\n      init: 'auto',\n      apply: '__updatePosition',\n      validate : '_validateConnectionPoint'\n    },\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    showDirection: {\n      check: ['none', 'source', 'target', 'both'],\n      init: 'none',\n      apply: '_applyShowDirection'\n    },\n\n    inverted: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyShowDirection'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _path: null,\n    /**\n     * @type {MutationObserver}\n     */\n    _sourceObserver: null,\n    /**\n     * @type {MutationObserver}\n     */\n    _targetObserver: null,\n\n    _applySource(value, oldValue) {\n      if (oldValue) {\n        this._sourceObserver.disconnect();\n      }\n      if (value) {\n        this._init();\n        this._sourceObserver.observe(value.getSvg(), {attributes: true});\n      }\n    },\n\n    _applyTarget(value, oldValue) {\n      if (oldValue) {\n        this._targetObserver.disconnect();\n      }\n      if (value) {\n        this._init();\n        this._targetObserver.observe(value.getSvg(), {attributes: true});\n      }\n    },\n\n    _init() {\n      const sourceEntity = this.getSource();\n      const targetEntity = this.getTarget();\n\n      if (sourceEntity && targetEntity) {\n        const source = sourceEntity.getSvg();\n        const target = targetEntity.getSvg();\n        // find common root\n        let sourceRoot = source.ownerSVGElement;\n        let targetRoot = target.ownerSVGElement;\n        while (sourceRoot !== targetRoot) {\n          let changed = false;\n          if (sourceRoot.ownerSVGElement) {\n            sourceRoot = sourceRoot.ownerSVGElement;\n            changed = true;\n          }\n          if (targetRoot.ownerSVGElement) {\n            targetRoot = targetRoot.ownerSVGElement;\n            changed = true;\n          }\n          if (!changed) {\n            break;\n          }\n        }\n        const root = sourceRoot || targetRoot;\n        this.setRoot(root);\n\n        let id = '';\n        let appendC = false;\n        if (source.hasAttribute('id')) {\n          id += source.getAttribute('id');\n        } else {\n          id += source.nodeName;\n          appendC = true;\n        }\n        id += '-';\n        if (target.hasAttribute('id')) {\n          id += target.getAttribute('id');\n        } else {\n          id += target.nodeName;\n          appendC = true;\n        }\n        if (appendC) {\n          id += cv.ui.structure.tile.components.svg.Connector.C++;\n        }\n\n        let path = root.querySelector('#' + id);\n        this.setId(id);\n        if (!path) {\n          path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          path._instance = this;\n          path.setAttribute('id', id);\n          path.setAttribute('stroke', 'var(--borderColor)');\n          path.setAttribute('fill', 'transparent');\n          path.setAttribute('stroke-width', '2');\n          path.setAttribute('class', 'connection');\n          root.insertBefore(path, root.firstChild);\n        }\n        this._path = path;\n        setTimeout(() => {\n          this.__updatePosition();\n        }, 1000);\n      }\n    },\n\n    _onMutation(records, observer) {\n      for (const mutation of records) {\n        if (mutation.type === 'attributes' && (mutation.attributeName === 'x' || mutation.attributeName === 'y')) {\n          this._debouncedUpdatePosition();\n        }\n      }\n    },\n\n    __updatePosition(retried = false) {\n      const sourceEntity = this.getSource();\n      const targetEntity = this.getTarget();\n\n      if (sourceEntity && targetEntity && this._path) {\n        const source = sourceEntity.getSvg();\n        const target = targetEntity.getSvg();\n        let sourceCoord = cv.util.Svg.getBBox(source);\n        let targetCoord = cv.util.Svg.getBBox(target);\n\n        let startX = 0;\n        let startY = 0;\n        let endX = 0;\n        let endY = 0;\n\n        let sourceConnectionPoint = this.getSourceConnectionPoint();\n        let targetConnectionPoint = this.getTargetConnectionPoint();\n        if (sourceConnectionPoint === 'auto' || targetConnectionPoint === 'auto') {\n          const dx = targetCoord.cx - sourceCoord.cx;\n          const dy = targetCoord.cy - sourceCoord.cy;\n          const l = Math.sqrt(dx**2 + dy**2);\n          if (l === 0) {\n            if (!retried) {\n              setTimeout(() => {\n                this._updatePosition(true);\n              }, 1000);\n            }\n            return;\n          }\n          const rsl = sourceEntity.getRadius() / l;\n          const rtl = targetEntity.getRadius() / l;\n          const yS = sourceCoord.cy + dy * rsl;\n          const yT = targetCoord.cy - dy * rtl;\n          const xS = sourceCoord.cx + dx * rsl;\n          const xT = targetCoord.cx - dx * rtl;\n\n          this.debug(this.getId(), `(${xS}, ${yS}) -> (${xT}, ${yT})`);\n\n          if (sourceConnectionPoint === 'auto') {\n            startX = xS;\n            startY = yS;\n          }\n          if (targetConnectionPoint === 'auto') {\n            endX = xT;\n            endY = yT;\n          }\n        }\n\n        switch (sourceConnectionPoint) {\n          case 'bottom':\n            startX = sourceCoord.cx;\n            startY = sourceCoord.y + sourceCoord.height;\n            break;\n\n          case 'top':\n            startX = sourceCoord.cx;\n            startY = sourceCoord.y;\n            break;\n\n          case 'right':\n            startX = sourceCoord.x + sourceCoord.width;\n            startY = sourceCoord.cy;\n            break;\n\n          case 'left':\n            startX = sourceCoord.x;\n            startY = sourceCoord.cy;\n            break;\n        }\n\n        switch (targetConnectionPoint) {\n          case 'bottom':\n            endX = targetCoord.cx;\n            endY = targetCoord.y + targetCoord.height;\n            break;\n\n          case 'top':\n            endX = targetCoord.cx;\n            endY = targetCoord.y;\n            break;\n\n          case 'right':\n            endX = targetCoord.x + targetCoord.width;\n            endY = targetCoord.cy;\n            break;\n\n          case 'left':\n            endX = targetCoord.x;\n            endY = targetCoord.cy;\n            break;\n        }\n\n        // make sure that we always draw the path from left to right\n        if (startX > endX) {\n          this.setInverted(true);\n          this.drawPath(this._path, endX, endY, startX, startY);\n        } else {\n          this.setInverted(false);\n          this.drawPath(this._path, startX, startY, endX, endY);\n        }\n      }\n    },\n\n    drawPath(path, startX, startY, endX, endY) {\n       /* const deltaX = (endX - startX) * 0.15;\n      const deltaY = (endY - startY) * 0.15;\n      // for further calculations which ever is the shortest distance\n      const delta  =  deltaY < Math.abs(deltaX) ? deltaY : Math.abs(deltaX);\n\n      let arc1 = 0;\n      let arc2 = 1;\n      if (startX > endX) {\n        arc1 = 1;\n        arc2 = 0;\n      }\n\n      // 1. move a bit down, 2. arch,  3. move a bit to the right, 4.arch, 5. move down to the end\n      path.setAttribute('d',  'M'  + startX + ' ' + startY +\n        ' V' + (startY + delta) +\n        ' A' + delta + ' ' +  delta + ' 0 0 ' + arc1 + ' ' + (startX + delta*Math.sign(deltaX)) + ' ' + (startY + 2*delta) +\n        ' H' + (endX - delta*Math.sign(deltaX)) +\n        ' A' + delta + ' ' +  delta + ' 0 0 ' + arc2 + ' ' + endX + ' ' + (startY + 3*delta) +\n        ' V' + endY);*/\n\n      // draw straight line\n      path.setAttribute('d',  `M${startX} ${startY} L ${endX} ${endY}`);\n    },\n\n    _applyRoot(root, oldRoot) {\n      if (oldRoot) {\n        oldRoot.removeEventListener('resize', this._updatePosition);\n      }\n      if (root) {\n        root.addEventListener('resize', this._updatePosition);\n        this._initArrowMarkers(root);\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      if (this._path) {\n        if (oldValue) {\n          this._path.classList.remove(oldValue);\n        }\n        if (value) {\n          this._path.classList.add(value);\n        }\n        this._applyShowDirection();\n      }\n    },\n\n    _applyShowDirection() {\n      const value = this.getShowDirection();\n      let markerId = '';\n      if (value === 'none') {\n        this._path.removeAttribute('marker-start');\n        this._path.removeAttribute('marker-end');\n      } else if (value === 'both') {\n        markerId = this.__getMarkerId();\n        this._path.setAttribute('marker-start', `url(#${markerId})`);\n        this._path.setAttribute('marker-end', `url(#${markerId})`);\n      } else if ((value === 'source' && !this.isInverted()) || (value === 'target' && this.isInverted())) {\n        markerId = this.__getMarkerId();\n        this._path.setAttribute('marker-start', `url(#${markerId})`);\n        this._path.removeAttribute('marker-end');\n      } else if ((value === 'target' && !this.isInverted()) || (value === 'source' && this.isInverted())) {\n        markerId = this.__getMarkerId();\n        this._path.removeAttribute('marker-start');\n        this._path.setAttribute('marker-end', `url(#${markerId})`);\n      }\n    },\n\n    __getMarkerId() {\n      const arrowId = 'arrow';\n      const styleClass = this.getStyleClass();\n      if (styleClass) {\n        const id = `${arrowId}-${styleClass}`;\n        // check if we have a marker with this ID\n        const root = this.getRoot();\n        try {\n          let marker = root.querySelector(`#${id}`);\n          if (!marker) {\n            const baseMarker = root.querySelector(`#${arrowId}`);\n            const newMarker = baseMarker.cloneNode(true);\n            newMarker.removeAttribute('fill');\n            newMarker.setAttribute('class', 'connection ' + styleClass);\n            newMarker.setAttribute('id', id);\n            root.querySelector('defs').appendChild(newMarker);\n          }\n        } catch (e) {\n          this.log.error('error getting arrow:', e.errorMessage);\n        }\n        return id;\n      }\n      return arrowId;\n    },\n\n    _validateConnectionPoint(value) {\n      if (!['top', 'right', 'bottom', 'left', 'auto'].includes(value)) {\n        throw new qx.core.ValidationError(\n          'Validation Error: ', value + ' is no valid connection point.'\n        );\n      }\n    },\n\n    _initArrowMarkers(svg) {\n      let defs = svg.querySelector('defs');\n      const ns = 'http://www.w3.org/2000/svg';\n      if (!defs) {\n        defs = document.createElementNS(ns, 'defs');\n        svg.appendChild(defs);\n      }\n\n      // define paths for re-use\n      let arrowPath = defs.querySelector('#h-arrow-path');\n      if (!arrowPath) {\n        arrowPath = document.createElementNS(ns, 'path');\n        arrowPath.setAttribute('id', 'h-arrow-path');\n        arrowPath.setAttribute('d', 'M 0 0 L 10 5 L 0 10 z');\n        defs.appendChild(arrowPath);\n      }\n/*\n      let vertArrowPath = defs.querySelector('#v-arrow-path');\n      if (!vertArrowPath) {\n        vertArrowPath = document.createElementNS(ns, 'path');\n        vertArrowPath.setAttribute('id', 'v-arrow-path');\n        vertArrowPath.setAttribute('d', 'M 0 10 L 10 10 L 5 0 z');\n        defs.appendChild(vertArrowPath);\n      }*/\n\n      let arrow = defs.querySelector('#arrow');\n      if (!arrow) {\n        arrow = document.createElementNS(ns, 'marker');\n        arrow.setAttribute('id', 'arrow');\n        arrow.setAttribute('viewBox', '0 0 10 10');\n        arrow.setAttribute('refX', '10');\n        arrow.setAttribute('refY', '5');\n        arrow.setAttribute('markerWidth', '5');\n        arrow.setAttribute('markerHeight', '5');\n        arrow.setAttribute('markerUnits', 'strokeWidth');\n        arrow.setAttribute('fill', 'var(--borderColor)');\n        arrow.setAttribute('orient', 'auto-start-reverse');\n        let use = document.createElementNS(ns, 'use');\n        use.setAttribute('href', '#h-arrow-path');\n        arrow.appendChild(use);\n        defs.appendChild(arrow);\n      }\n\n      /*let vertArrow = defs.querySelector('#vertical-arrow');\n      if (!vertArrow) {\n        const vertArrow = arrow.cloneNode(true);\n        vertArrow.setAttribute('id', 'vertical-arrow');\n        vertArrow.setAttribute('orient', '270');\n        defs.appendChild(vertArrow);\n      }*/\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._path = null;\n    this._sourceObserver.disconnect();\n    this._sourceObserver = null;\n    this._targetObserver.disconnect();\n    this._targetObserver = null;\n  }\n});\n","/**\n * RoundValue shows an element that contains of an icon and a value-text inside\n * a colored circle. The circle can also show a progress value in another color.\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Class.define('cv.ui.structure.tile.components.svg.RoundValue', {\n  extend: cv.ui.structure.tile.components.Value,\n  include: cv.ui.structure.tile.components.svg.MGraphicsElement,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    },\n\n    showProgress: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyShowProgress'\n    },\n\n    icon: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyIcon'\n    },\n\n    radius: {\n      check: 'Number',\n      init: 30,\n      apply: '_applyRadius',\n      transform: '_parseInt'\n    },\n\n    stroke: {\n      check: 'Number',\n      init: 2,\n      apply: '_applyStroke',\n      transform: '_parseFloat'\n    },\n\n    amount: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyAmount'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _svg: null,\n    __normalizedRadius: null,\n    _radius: null,\n    _iconSize: null,\n    _iconOffset: null,\n    _fixedRadius: null,\n\n    getSvg() {\n      return this._svg;\n    },\n\n    getParentSvg() {\n      return this._svg ? this._svg.ownerSVGElement : null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this._fixedRadius = element.hasAttribute('radius');\n      const radius = this.getRadius();\n      const strokeWidth = this.getStroke();\n      this._findParentGridLayout();\n      if (this._parentGridLayout && !this._fixedRadius) {\n        this._debouncedUpdateRadius = qx.util.Function.debounce(this._updateRadius.bind(this), 10);\n        this._parentGridLayout.addListener('changeSize', this._debouncedUpdateRadius, this);\n      }\n      const parent = this._parentGridLayout ? this._parentGridLayout.getSvg() : element;\n\n      const ns = 'http://www.w3.org/2000/svg';\n\n      // add surrounding svg node\n      const svg = this._svg = document.createElementNS(ns, 'svg');\n      this.setHeight(radius * 2);\n      this.setWidth(radius * 2);\n      svg.setAttribute('type', 'circle');\n      for (const name of ['x', 'y']) {\n        if (element.hasAttribute(name)) {\n          svg.setAttribute(name, element.getAttribute(name));\n        }\n      }\n      parent.appendChild(svg);\n\n      const group = document.createElementNS(ns, 'g');\n      group.classList.add('round-value');\n      group.setAttribute('fill', 'transparent');\n      group.setAttribute('stroke-width', strokeWidth);\n      svg.appendChild(group);\n      this._target = group;\n\n      this._applyRadius(radius);\n\n      if (!element.hasAttribute('no-background')) {\n        const bg = document.createElementNS(ns, 'circle');\n        bg.classList.add('bg');\n        if (this.__normalizedRadius) {\n          bg.setAttribute('r', '' + this.__normalizedRadius);\n        }\n        bg.setAttribute('cx', '50%');\n        bg.setAttribute('cy', '50%');\n        if (element.hasAttribute('background-color')) {\n          bg.style.stroke = element.getAttribute('background-color');\n        }\n        this._target.appendChild(bg);\n      }\n\n      this.setShowProgress(element.querySelectorAll(':scope > cv-address[target=\"progress\"], :scope > cv-address-group[target=\"progress\"]').length > 0);\n\n      if (element.hasAttribute('icon')) {\n        this._applyIcon(this.getIcon());\n      }\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      const value = document.createElementNS(ns, 'text');\n      value.setAttribute('text-anchor', 'middle');\n      value.setAttribute('alignment-baseline', 'central');\n      value.setAttribute('x', '50%');\n      value.setAttribute('y', '70%');\n      value.setAttribute('class', 'value');\n      value.setAttribute('fill', 'var(--primaryText)');\n      value.style.fontSize = `${this._iconSize-4}px`;\n      this._target.appendChild(value);\n\n      this._updateHeight();\n      this._updateWidth();\n\n      // check if we have a sum of multiple addresses, then show the amount\n      let sumGroup = element.querySelector(':scope > cv-address-group[operator=\"+\"]');\n      if (sumGroup) {\n        if (!sumGroup._instance) {\n          window.requestAnimationFrame(() => {\n            sumGroup._instance.bind('nonZeroValues', this, 'amount');\n          });\n        } else {\n          sumGroup._instance.bind('nonZeroValues', this, 'amount');\n        }\n      } else {\n        this.setAmount(element.querySelectorAll(':scope > cv-address:not([target])').length);\n      }\n\n      this._applyPosition();\n      this._applyTitle(this.getTitle());\n    },\n\n    _updateRadius() {\n      if (this._parentGridLayout) {\n        const newRadius = Math.floor((Math.min(this._parentGridLayout.getCellWidth(), this._parentGridLayout.getCellHeight())) / 2);\n        if (this.getRadius() !== newRadius) {\n          this._element.setAttribute('radius', '' + newRadius);\n        }\n      }\n    },\n\n    _applyAmount(value) {\n      let amount = this._target.querySelector('text.amount');\n      let updateIconPosition = false;\n      if (value > 1) {\n        // show it\n        if (!amount) {\n          amount = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n          amount.setAttribute('text-anchor', 'right');\n          amount.setAttribute('alignment-baseline', 'central');\n          amount.setAttribute('fill', 'var(--primaryText)');\n          amount.classList.add('amount');\n          amount.style.fontSize = `${this._iconSize - 5}px`;\n          this._target.appendChild(amount);\n          this.__updateAmountPosition();\n        }\n        if (this._iconOffset !== 5) {\n          this._iconOffset = 5;\n          updateIconPosition = true;\n        }\n        amount.textContent = value + 'x';\n      } else if (amount) {\n        amount.remove();\n        if (this._iconOffset !== 0) {\n          this._iconOffset = 0;\n          updateIconPosition = true;\n        }\n      }\n      if (updateIconPosition) {\n        this.__updateIconPosition();\n      }\n    },\n\n    __updateAmountPosition() {\n      let amount = this._target.querySelector('text.amount');\n      if (amount) {\n        const radius = this.getRadius();\n        const halfSize = this._iconSize / 2;\n        const x = radius * 0.8 - halfSize;\n        const y = radius * 0.85 - halfSize;\n        amount.setAttribute('x', `${x}`);\n        amount.setAttribute('y', `${y}`);\n      }\n    },\n\n    __updateIconPosition() {\n      const icon = this._target.querySelector('cv-icon');\n      if (icon) {\n        icon.style.fontSize = this._iconSize + 'px';\n      }\n      const iconContainer = this._target.querySelector('foreignObject.icon-container');\n      if (iconContainer) {\n        const radius = this.getRadius();\n        const halfSize = this._iconSize / 2;\n        const x = radius - halfSize + this._iconOffset;\n        const y = radius * 0.6 - halfSize;\n        iconContainer.setAttribute('x', `${x}`);\n        iconContainer.setAttribute('y', `${y}`);\n        iconContainer.setAttribute('width', this._iconSize + '');\n        iconContainer.setAttribute('height', this._iconSize + '');\n      }\n    },\n\n    _applyRadius(radius) {\n      this._updateNormalizedRadius();\n      this._iconSize = Math.round(radius / 2);\n      if (this._target) {\n        this.__updateIconPosition();\n        const value = this._target.querySelector('.value');\n        if (value) {\n          value.style.fontSize = `${this._iconSize - 4}px`;\n        }\n        this.__updateAmountPosition();\n      }\n      if (this._svg) {\n        this.setHeight(radius * 2);\n        this.setWidth(radius * 2);\n      }\n    },\n\n    _applyStroke(stroke) {\n      this._updateNormalizedRadius();\n      if (this._target) {\n        this._target.setAttribute('stroke-width', stroke);\n      }\n    },\n\n    _updateNormalizedRadius() {\n      if (this._target) {\n        const newValue = this.getRadius() - this.getStroke() / 2;\n        if (this.__normalizedRadius !== newValue) {\n          this.__normalizedRadius = newValue;\n          const bg = this._target.querySelector('circle.bg');\n          if (bg) {\n            bg.setAttribute('r', '' + this.__normalizedRadius);\n          }\n\n          const bar = this._target.querySelector('circle.bar');\n          if (bar) {\n            bar.setAttribute('r', '' + this.__normalizedRadius);\n          }\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this._target) {\n        const target = this._target.querySelector('.value');\n        if (target) {\n          target.textContent = mappedValue;\n          this._debouncedDetectOverflow();\n        }\n      }\n    },\n\n    _applyShowProgress(value) {\n      if (value) {\n        let bar = this._target.querySelector('circle.bar');\n        this._target.classList.add('shows-progress');\n        if (!bar) {\n          bar = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n          bar.classList.add('bar');\n          bar.setAttribute('r', '' + this.__normalizedRadius);\n          bar.setAttribute('cx', '50%');\n          bar.setAttribute('cy', '50%');\n          bar.setAttribute('pathLength', '100');\n          bar.setAttribute('stroke-dashoffset', '25');\n          bar.setAttribute('stroke-dasharray', '0 100');\n          if (this._element.hasAttribute('foreground-color')) {\n            bar.style.stroke = this._element.getAttribute('foreground-color');\n          }\n          this._target.appendChild(bar);\n        }\n      } else {\n        let bar = this._target.querySelector('circle.bar');\n        if (bar) {\n          this._target.removeChild(bar);\n        }\n        this._target.classList.remove('shows-progress');\n      }\n    },\n\n    _applyIcon(iconName) {\n      if (!this._target) {\n        return;\n      }\n      let icon = this._target.querySelector('cv-icon');\n      if (iconName) {\n        if (!icon) {\n          const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\n          fo.setAttribute('class', 'icon-container');\n          fo.style.textAlign = 'center';\n\n          icon = document.createElement('cv-icon');\n          icon.classList.add(iconName);\n          icon.style.fontSize = this._iconSize + 'px';\n          fo.appendChild(icon);\n          this._target.appendChild(fo);\n          this.__updateIconPosition();\n        }\n      } else if (icon) {\n        this._target.remove(icon);\n      }\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n        let title = this._target.querySelector(':scope > title');\n        if (!title) {\n          title = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n          this._target.appendChild(title);\n        }\n        title.textContent = percent + '%';\n\n        const valueElement = this._target.querySelector('circle.bar');\n        valueElement.setAttribute('stroke-dasharray', `${percent} ${100 - percent}`);\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._target.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _detectOverflow() {\n      if (this.isVisible()) {\n        const target = this._target.querySelector('.value');\n        const sizeReference = this._target.querySelector('circle.bg').getBBox();\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > sizeReference.width) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'progress') {\n        this.setProgress(ev.detail.state);\n        ev.stopPropagation();\n        return true;\n      }\n      return super.onStateUpdate(ev);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'svg-round-value',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'radius', 'stroke', 'title'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * cv.ui.structure.tile.components.svg.RoundValue for power entities.\n * @since 2023\n * @author Tobias Bräutigam\n */\nqx.Class.define('cv.ui.structure.tile.components.energy.PowerEntity', {\n  extend: cv.ui.structure.tile.components.svg.RoundValue,\n  include: [\n    cv.ui.structure.tile.components.energy.MEntity,\n    cv.ui.structure.tile.components.energy.MConnectable\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    typeSettings: {\n      pv: {\n        icon: 'knxuf-weather_sun',\n        styling: 'tile-pv-power'\n      },\n      battery: {\n        icon: 'knxuf-measure_battery_100',\n        styling: 'tile-battery-power',\n        'foreground-color': 'var(--batteryConsumeColor)'\n      },\n      grid: {\n        icon: 'knxuf-scene_power_grid',\n        styling: 'tile-grid-power'\n      },\n      house: {\n        icon: 'knxuf-control_building_empty'\n      },\n      charger: {\n        icon: 'knxuf-veh_wallbox'\n      },\n      heatpump: {\n        icon: 'knxuf-sani_earth_source_heat_pump'\n      },\n      consumer: {\n        icon: 'knxuf-measure_smart_meter'\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyType(value) {\n      const settings = cv.ui.structure.tile.components.energy.PowerEntity.typeSettings[value];\n      if (settings) {\n        for (const attribute in settings) {\n          this._element.setAttribute(attribute, settings[attribute]);\n        }\n      }\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('id')) {\n        this._svg.setAttribute('id', element.getAttribute('id'));\n      }\n      if (!element.hasAttribute('mapping')) {\n        element.setAttribute('mapping', 'tile-kilo-watts');\n      }\n      this._noValue = element.querySelectorAll(':scope > cv-address, :scope > cv-address-group').length === 0;\n      this.setUseConnectionSum(this._noValue && this.getType() === 'house');\n      if (this._noValue && this.getType() !== 'house') {\n        // this has no addresses and therefore no values, we only show the icon then without circle\n        for (const elem of this._svg.querySelectorAll('circle, text:not(.icon)')) {\n          elem.remove();\n        }\n        this._iconSize = 32;\n        const icon = this._svg.querySelector('text.icon');\n        if (icon) {\n          icon.style.fontSize = this._iconSize + 'px';\n        }\n      }\n      window.requestAnimationFrame(() => {\n        this._applyConnectTo(this.getConnectTo());\n        this._applyConnectFrom(this.getConnectFrom());\n      });\n\n      this.addListener('changeValue', this._updateDirection, this);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'power-entity',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'type', 'stroke', 'radius', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'foreground-color', 'connect-to', 'connect-from', 'connection-points', 'title'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Aggregates values from sub-elements like other cv.ui.structure.tile.elements.AddressGroups\n * or cv.ui.structure.tile.elements.Address.\n *\n *  @author Tobias Bräutigam\n *  @since 2023\n */\nqx.Class.define('cv.ui.structure.tile.elements.AddressGroup', {\n  extend: cv.ui.structure.tile.elements.Address,\n  include: cv.ui.structure.tile.MStringTransforms,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    if (!element.hasAttribute('id')) {\n      element.setAttribute('id', `address-group_${cv.ui.structure.tile.elements.AddressGroup.C++}`);\n    }\n    this.debouncedCalc = qx.util.Function.debounce(this._updateCalculation.bind(this), 10);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    C: 0\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    changeValue: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n    operator: {\n      check: ['+', '-', '/', '*'],\n      init: '+',\n      apply: '_updateCalculation'\n    },\n\n    round: {\n      check: 'Boolean',\n      init: false,\n      transform: '_parseBoolean'\n    },\n\n    factor: {\n      check: 'Number',\n      init: 1,\n      transform: '_parseFloat'\n    },\n\n    valid: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyValid'\n    },\n\n    nonZeroValues: {\n      check: 'Number',\n      init: 0,\n      event: 'changeNonZeroValues'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _i: null,\n    _values: null,\n    __value: null,\n\n    setValue(val) {\n      if (this.__value !== val) {\n        const oldValue = this.__value;\n        this.__value = val;\n        this.fireDataEvent('changeValue', val, oldValue);\n        this._applyValue(val);\n      }\n    },\n\n    getValue() {\n      return this.__value;\n    },\n\n    resetValue() {\n      this.__value = null;\n    },\n\n    getAddress() {\n      return this._element.getAttribute('id');\n    },\n\n    _init() {\n      const element = this._element;\n      this._values = new Array(element.children.length).fill(0);\n      this._stateUpdateTarget = element.parentElement;\n      element.addEventListener('stateUpdate', ev => {\n        this.onStateUpdate(ev);\n        // cancel event here\n        ev.stopPropagation();\n      });\n    },\n\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('data-value', '' + value);\n        this.fireStateUpdate(this.getAddress(), value);\n      }\n    },\n\n    _applyValid(valid) {\n      this._element.setAttribute('data-valid', '' + valid);\n    },\n\n    _updateCalculation() {\n      if (this.isConnected()) {\n        let val = 0;\n        if (this._values.length > 0) {\n          this.setNonZeroValues(this._values.filter(v => v !== 0).length);\n          switch (this.getOperator()) {\n            case '+':\n              val = this._values.reduce((accumulator, currentValue) => accumulator + currentValue, val);\n              break;\n\n            case '-':\n              // subtract all from first one\n              val = this._values[0];\n              for (let i = 1; i < this._values.length; i++) {\n                val -= this._values[i];\n              }\n              break;\n\n            case '*':\n              val = this._values.reduce((accumulator, currentValue) => accumulator * currentValue, val);\n              break;\n\n            case '/':\n              // divide all from first one\n              val = this._values[0];\n              for (let i = 1; i < this._values.length; i++) {\n                val /= this._values[i];\n              }\n              break;\n          }\n        }\n        const valid = !isNaN(val) && isFinite(val);\n        this.setValid(valid);\n        if (valid) {\n          val *= this.getFactor();\n          if (this.isRound()) {\n            val = Math.round(val);\n          }\n          this.setValue(val);\n        } else {\n          this.resetValue();\n        }\n      }\n    },\n\n    onStateUpdate(ev) {\n      const index = Array.prototype.indexOf.call(this._element.children, ev.detail.source.getElement());\n      if (index >= 0) {\n        let val = ev.detail.state;\n        if (typeof val === 'string') {\n          val = parseFloat(val);\n        }\n        if (typeof val === 'number') {\n          this._values[index] = val;\n          this.debouncedCalc();\n        } else {\n          this.error('update value is not a number', typeof val, 'calculation not possible');\n        }\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address-group',\n      class extends QxConnector {\n        static observedAttributes = ['round', 'operator', 'factor'];\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n\n","/* Backend.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * <cv-backend> Custom element to define a backend connection\n */\nqx.Class.define('cv.ui.structure.tile.elements.Backend', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _name: null,\n    __applyValues: null,\n\n    _init() {\n      const element = this._element;\n      let type = element.getAttribute('type');\n      if (type && type.startsWith('class:')) {\n        const className = type.split(':').pop();\n        if (!cv.io.BackendConnections.isRegistered(className)) {\n          // wait until client class has been loaded\n          cv.io.BackendConnections.addClassLoadedListener(className, () => {\n            this._init();\n          });\n          return;\n        }\n        type = className;\n      }\n      const uriString = element.hasAttribute('uri') ? element.getAttribute('uri') : '';\n      let uri;\n      if (uriString) {\n        try {\n          uri = new URL(uriString, window.location.origin + window.location.pathname);\n        } catch (e) {\n          this.error('Error parsing uri: ' + uriString);\n        }\n      }\n\n      if (type) {\n        let credentials = null;\n        if (element.hasAttribute('username')) {\n          credentials = {\n            username: element.getAttribute('username'),\n            password: element.getAttribute('password') || ''\n          };\n        } else if (uri && uri.username) {\n          credentials = {\n            username: uri.username,\n            password: uri.password\n          };\n        }\n        const model = cv.data.Model.getInstance();\n        let backendUrl = uri ? uri.toString() : null;\n        let backendUrlConfigKey;\n        switch (type) {\n          case 'knxd':\n            backendUrlConfigKey = 'backendKnxdUrl';\n            break;\n          case 'openhab':\n            backendUrlConfigKey = 'backendOpenHABUrl';\n            break;\n          case 'mqtt':\n            backendUrlConfigKey = 'backendMQTTUrl';\n            break;\n        }\n\n        if (backendUrlConfigKey) {\n          // override by URL settings\n          if (cv.Config.URL[backendUrlConfigKey]) {\n            backendUrl = cv.Config.URL[backendUrlConfigKey];\n          } else if (!backendUrl && cv.Config.server[backendUrlConfigKey]) {\n            backendUrl = cv.Config.server[backendUrlConfigKey];\n          }\n        }\n        let name = type;\n        if (element.hasAttribute('name')) {\n          name = element.getAttribute('name');\n        } else if (!cv.io.BackendConnections.hasClient('main')) {\n          // we need one main backend\n          name = 'main';\n        } else if (cv.io.BackendConnections.getClient('main').configuredIn === 'config') {\n          qx.log.Logger.warn(\n            this,\n            `there is already a backend registered with name \"main\" and type ${type} skipping this one`\n          );\n\n          return;\n        }\n        qx.log.Logger.debug(this, 'init backend', name);\n        if (cv.io.BackendConnections.hasClient(name)) {\n          const notification = {\n            topic: 'cv.config.error',\n            title: qx.locale.Manager.tr('Config error'),\n            message: qx.locale.Manager.tr('There already exists a backend named: \"%1\"', name),\n\n            severity: 'urgent',\n            unique: true,\n            deletable: true\n          };\n\n          cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n          return;\n        }\n        const client = cv.io.BackendConnections.addBackendClient(name, type, backendUrl, 'config');\n\n        this._client = client;\n        this._name = name;\n        this.__applyValues = [];\n        client.update = data => model.updateFrom(name, data); // override clients update function\n\n        for (const data of element.querySelectorAll(':scope > cv-resource')) {\n          client.setResourcePath(data.getAttribute('name'), data.textContent.trim());\n        }\n\n        client.login(true, credentials, () => {\n          this.debug(name, 'connected');\n          if (element.hasAttribute('default') && element.getAttribute('default') === 'true') {\n            model.setDefaultBackendName(name);\n          }\n          const doSubscribe = () => {\n            for (const [address, value] of this.__applyValues) {\n              this.debug(name, 'apply update', address, value);\n              model.onUpdate(address, value, name);\n            }\n            cv.io.BackendConnections.startInitialRequest(name);\n          };\n          if (cv.TemplateEngine.getInstance().isDomFinished()) {\n            doSubscribe();\n          } else {\n            qx.event.message.Bus.subscribe(\n              'setup.dom.finished',\n              function () {\n                doSubscribe();\n              },\n              this\n            );\n          }\n        });\n      } else {\n        this.error('<cv-backend> must have a type attribute');\n      }\n    },\n\n    _disconnected() {\n      if (this._client) {\n        const model = cv.data.Model.getInstance();\n        if (this._element.hasAttribute('default') && this._element.getAttribute('default') === 'true') {\n          model.resetDefaultBackendName();\n        }\n        this._client.terminate();\n        cv.io.BackendConnections.removeClient(this._client);\n        this._client.dispose();\n        this._client = null;\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'backend',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Loader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Loads external content like CSS/JS files, config-content or a template file.\n *\n *  @author Tobias Bräutigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Loader', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const src = element.getAttribute('src');\n      let loaderElement;\n      if (src) {\n        switch (type) {\n          case 'css':\n            loaderElement = document.createElement('link');\n            loaderElement.setAttribute('type', 'text/css');\n            loaderElement.setAttribute('rel', 'stylesheet');\n            loaderElement.setAttribute('href', src);\n            break;\n\n          case 'js':\n            loaderElement = document.createElement('script');\n            loaderElement.setAttribute('type', 'text/javascript');\n            loaderElement.setAttribute('src', src);\n            break;\n\n          case 'templates':\n            this.loadXml(src, type);\n            break;\n        }\n\n        if (loaderElement) {\n          element.appendChild(loaderElement);\n        }\n      }\n    },\n\n    loadXml(uri) {\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n\n      ajaxRequest.addListenerOnce('success', function (e) {\n        let content = e.getTarget().getResponse();\n        let htmlContent = content;\n        const target = cv.Application.structureController.getRenderTarget();\n        // we need the documents to be in HTML namespace\n        if (!htmlContent.documentElement.xmlns) {\n          let text = e.getTarget().getResponseText();\n          text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n          const parser = new DOMParser();\n          htmlContent = parser.parseFromString(text, 'text/xml');\n        }\n        let child;\n        while ((child = htmlContent.documentElement.firstElementChild)) {\n          target.appendChild(child);\n        }\n        // register custom elements for templates in this document\n        cv.Application.structureController.registerTemplates(content);\n      });\n      ajaxRequest.addListener('statusError', e => {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.handleError('filenotfound', ajaxRequest.getUrl());\n        } else {\n          this.handleError(status, null);\n        }\n      });\n\n      ajaxRequest.send();\n    },\n\n    handleError(textStatus, additionalErrorInfo) {\n      const title = qx.locale.Manager.tr('File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid XML file!');\n          break;\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: File not found, %1.', additionalErrorInfo).translate().toString();\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n\n      const notification = {\n        topic: 'cv.error',\n        title: title,\n        message: message\n      };\n\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n      this.error(this, message.toString());\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'loader',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Mapping.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Mapping maps a value to another value that can be used to show e.g. the current state.\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Mapping', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__cache = {};\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __cache: null,\n\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      // avoid adding styling elements here as they inherit this method but call the super method too\n      if (this._element.tagName.toLowerCase().endsWith('mapping')) {\n        if (value) {\n          cv.Application.structureController.addMapping(this._element.getAttribute('name'), this);\n        } else {\n          cv.Application.structureController.removeMapping(this._element.getAttribute('name'));\n        }\n      }\n    },\n\n    /**\n     *\n     * @param val {variant}\n     * @param store {Map<string, variant>?} optional stored values from other addresses\n     * @param params {Array<variant>?} optional array of parameters for the mapping\n     * @param emptyWhenNoMatch {Boolean} return empty string when no mapped value is found, otherwise the value is returned (default)\n     * @return {string|*|string}\n     */\n    mapValue(val, store, params, emptyWhenNoMatch = false) {\n      if (Object.prototype.hasOwnProperty.call(this.__cache, val)) {\n        return this.__cache[val];\n      }\n      let mappedValue = emptyWhenNoMatch ? '' : '' + val;\n      const exactMatch = this._element.querySelector(':scope > entry[value=\"' + val + '\"]');\n\n      let type = this._element.hasAttribute('type') ? this._element.getAttribute('type') : 'string';\n      if (exactMatch) {\n        mappedValue = this._convert(exactMatch.innerHTML.trim(), type);\n        this.__cache[val] = mappedValue;\n        return mappedValue;\n      }\n      const formula = this._element.querySelector(':scope > formula');\n      if (formula) {\n        if (!formula._formula) {\n          let content = formula.textContent;\n          formula._formula = new Function('x', 'store', 'params', 'let y;' + content + '; return y;');\n        }\n        mappedValue = this._convert(formula._formula(val, store, params), type);\n        return mappedValue;\n      }\n      const entries = this._element.querySelectorAll(':scope > entry');\n      let defaultValue = null;\n\n      const mapped = Array.from(entries).some(entry => {\n        let matches = false;\n        let isDefaultValue = entry.hasAttribute('default') && entry.getAttribute('default') === 'true';\n        if (entry.hasAttribute('value')) {\n          const value = entry.getAttribute('value');\n          if (value === (val ? val : 'NULL') || value === '*') {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = this._convert(value, type);\n          }\n        } else if (entry.hasAttribute('range-min')) {\n          const rangeMin = parseFloat(entry.getAttribute('range-min'));\n          const rangeMax = entry.hasAttribute('range-max')\n            ? parseFloat(entry.getAttribute('range-max'))\n            : Number.POSITIVE_INFINITY;\n          const floatValue = parseFloat(val);\n          if (rangeMin <= floatValue && floatValue <= rangeMax) {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = rangeMin;\n          }\n        }\n        return matches;\n      });\n      if (!mapped && defaultValue !== null) {\n        mappedValue = this.mapValue(defaultValue);\n      }\n      this.__cache[val] = mappedValue;\n      return mappedValue;\n    },\n\n    _convert(value, type) {\n      switch (type.toLowerCase()) {\n        case 'boolean':\n          return value === 'true';\n        case 'integer':\n          return parseInt(value);\n        case 'float':\n          return parseFloat(value);\n        default:\n          return value;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__cache = null;\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'mapping',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* StateNotification.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Parse notification settings and load them into the cv.core.notifications.Router\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.StateNotification', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n    const stateConfig = {};\n    const elem = this._element;\n    const target =\n      cv.core.notifications.Router.getTarget(elem.getAttribute('target')) || cv.ui.NotificationCenter.getInstance();\n\n    const addressContainer = elem.querySelector('cv-addresses');\n\n    const config = {\n      target: target,\n      severity: elem.getAttribute('severity'),\n      skipInitial: elem.getAttribute('skip-initial') !== 'false',\n      deletable: elem.getAttribute('deletable') !== 'false',\n      unique: elem.getAttribute('unique') === 'true',\n      valueMapping: addressContainer.getAttribute('value-mapping'),\n      addressMapping: addressContainer.getAttribute('address-mapping'),\n      enabled: !elem.hasAttribute('enabled') || elem.getAttribute('enabled') === 'true'\n    };\n    if (elem.hasAttribute('id')) {\n      config.id = elem.getAttribute('id');\n      // notifications with id can be changed by the system backend, so we need to listen to some addresses\n      const model = cv.data.Model.getInstance();\n      model.addUpdateListener(`notification:${config.id}:enabled`, this._onStateUpdate, this, 'system');\n      model.addUpdateListener(`notification:${config.id}:severity`, this._onStateUpdate, this, 'system');\n\n      model.onUpdate(`notification:${config.id}:enabled`, config.enabled, 'system');\n      model.onUpdate(`notification:${config.id}:severity`, config.severity, 'system');\n    }\n\n    const name = elem.getAttribute('name');\n    if (name) {\n      config.topic = 'cv.state.' + name;\n    }\n    const icon = elem.getAttribute('icon');\n    if (icon) {\n      config.icon = icon;\n      const iconClasses = elem.getAttribute('icon-classes');\n      if (iconClasses) {\n        config.iconClasses = iconClasses;\n      }\n    }\n\n    // templates\n    const titleElem = elem.querySelector('cv-title-template');\n    if (titleElem) {\n      config.titleTemplate = titleElem.innerHTML;\n    }\n    const messageElem = elem.querySelector('cv-message-template');\n    if (messageElem) {\n      config.messageTemplate = messageElem.innerHTML;\n    }\n\n    // condition\n    const conditionElem = elem.querySelector('cv-condition');\n    let condition = conditionElem.textContent;\n    if (condition === 'true') {\n      condition = true;\n    } else if (condition === 'false') {\n      condition = false;\n    }\n    config.condition = condition;\n\n    let address;\n    for (const addressElement of addressContainer.querySelectorAll(':scope > cv-address')) {\n      address = addressElement.textContent.trim();\n      if (!Object.prototype.hasOwnProperty.call(stateConfig, address)) {\n        stateConfig[address] = [];\n      }\n      const addressConfig = Object.assign({}, config);\n      let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n      switch (addressElement.getAttribute('mode')) {\n        case 'disable':\n          mode = 0;\n          break;\n        case 'read':\n          mode = 1;\n          break;\n        case 'write':\n          mode = 2;\n          break;\n        case 'readwrite':\n          mode = 1 | 2;\n          break;\n      }\n      addressConfig.addressConfig = {\n        transform: addressElement.getAttribute('transform'),\n        mode: mode,\n        selector: addressElement.getAttribute('selector'),\n        ignoreError: addressElement.getAttribute('ignore-error') === 'true',\n        qos: (addressElement.getAttribute('qos') || 0) | 0, // force integer\n        retain: addressElement.getAttribute('retain') === 'true',\n        variantInfo: addressElement.getAttribute('variant')\n      };\n      stateConfig[address].push(addressConfig);\n    }\n    cv.core.notifications.Router.getInstance().registerStateUpdateHandler(stateConfig);\n  },\n\n    _onStateUpdate(address, state, initial, changed) {\n      const [, id, property] = address.split(':');\n      const router = cv.core.notifications.Router.getInstance();\n      if (property === 'enabled') {\n        router.enableStateUpdateHandler(id, state == 1);\n      } else if (property === 'severity') {\n        router.changeStateUpdateHandlerSeverity(id, state);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'state-notification',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Styling.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Styling maps a value to another value that can be used to style a component\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Styling', {\n  extend: cv.ui.structure.tile.elements.Mapping,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      if (value) {\n        cv.Application.structureController.addStyling(this._element.getAttribute('name'), this);\n      } else {\n        cv.Application.structureController.removeStyling(this._element.getAttribute('name'));\n      }\n    },\n\n    mapValue(val, store, params) {\n      return super.mapValue(val, store, params, true);\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'styling',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2024, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Shows content of other widgets based on the current state.\n * This allows to dynamically show parts of the config on other places, dependent\n * on an address state. E.g. you can show the config part of the room you are currently\n * in on your dashboard.\n *\n * @since 2025\n * @author Tobias Bräutigam\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Dynamic', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    ref: {\n      check: 'Element',\n      nullable: true,\n      apply: '_applyRef'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n    },\n\n    _updateValue(mappedValue, value) {\n      this.setRef(this._element.querySelector(':scope > cv-ref[when=\"' + mappedValue + '\"]'));\n    },\n\n    _applyRef(ref, old) {\n      if (old) {\n        while (old.firstChild) {\n          old.removeChild(old.lastChild);\n        }\n        old.removeAttribute('active');\n      }\n      if (ref) {\n        let remotes = [];\n        try {\n          remotes = document.body.querySelectorAll(ref.getAttribute('selector'));\n        } catch (e) {\n          this.error(e);\n          return;\n        }\n        for (const remote of remotes) {\n          const clonedNode = remote.cloneNode(true);\n          ref.append(clonedNode);\n          if (ref.hasAttribute('modify-attribute')) {\n            let modifyTarget = clonedNode;\n            if (ref.hasAttribute('modify-attribute-target')) {\n              modifyTarget = clonedNode.querySelector(ref.getAttribute('modify-selector'));\n              if (!modifyTarget) {\n                this.error('modify-selector not found: ' + ref.getAttribute('modify-selector'));\n                return;\n              }\n            }\n            const [attribute, value] = ref.getAttribute('modify-attribute').split(':');\n            modifyTarget.setAttribute(attribute, value);\n          }\n          ref.setAttribute('active', 'true');\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'dynamic',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n\n\n","/* Group.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a group of widgets that can be hidden (works like the <detail> HTML Element)\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Group', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      let label = null;\n      let summary = null;\n      const needsSummary = element.hasAttribute('name') || element.hasAttribute('icon');\n      if (needsSummary) {\n        summary = element.querySelector(':scope > summary');\n        if (!summary) {\n          summary = document.createElement('summary');\n          element.insertBefore(summary, element.firstChild);\n        }\n        if (element.hasAttribute('name')) {\n          label = element.querySelector(':scope > summary > label.title');\n          if (!label) {\n            label = document.createElement('label');\n            label.classList.add('title');\n            summary.insertBefore(label, summary.firstChild);\n          }\n          label.classList.add('last-of-title');\n          label.textContent = element.getAttribute('name');\n        }\n        if (element.hasAttribute('icon')) {\n          let icon = element.querySelector(':scope > summary > cv-icon.title');\n          if (!icon) {\n            icon = document.createElement('cv-icon');\n            icon.classList.add('title');\n            summary.insertBefore(icon, summary.firstChild);\n          }\n          if (!label) {\n            icon.classList.add('last-of-title');\n          }\n          icon.classList.add(element.getAttribute('icon'));\n        }\n      }\n      const empty = !element.querySelector(':scope > *:not(summary)');\n      if (empty) {\n        element.classList.add('empty');\n      } else if (summary) {\n        qx.event.Registration.addListener(summary, 'click', this._toggleOpen, this);\n      }\n    },\n\n    _toggleOpen() {\n      if (this._element.hasAttribute('open')) {\n        this._element.removeAttribute('open');\n      } else {\n        this._element.setAttribute('open', 'true');\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'summary') {\n          let target = this._element.querySelector(':scope > summary > label.value');\n\n          if (!target) {\n            target = document.createElement('label');\n            target.classList.add('value');\n            const summary = this._element.querySelector(':scope > summary');\n            summary.appendChild(target);\n          }\n          target.textContent = ev.detail.state;\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'group',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a new sub-page and adds a corresponding link to the current page.\n *\n * @ignore(InstallTrigger)\n * @author Tobias Bräutigam\n * @since 2021\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Page', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visibility: {\n      refine: true,\n      init: 'excluded'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _supportsContentVisibility: null,\n    _visibleDisplayMode: null,\n\n    _init() {\n      const browserEngine = qx.core.Environment.get('browser.name');\n      if (browserEngine.includes('firefox') || browserEngine.includes('safari')) {\n        // firefox/safari do not support content-visibility CSS property\n        // see: https://caniuse.com/css-content-visibility\n        this._element.classList.add('no-content-visibility');\n        this._supportsContentVisibility = false;\n      } else {\n        this._supportsContentVisibility = true;\n      }\n    },\n\n    _applyVisibility(value) {\n      switch (value) {\n        case 'visible':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'visible';\n          } else if (this._visibleDisplayMode) {\n            this._element.style.display = this._visibleDisplayMode || 'initial';\n          }\n          break;\n\n        case 'hidden':\n        case 'excluded':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'hidden';\n          } else {\n            this._visibleDisplayMode = getComputedStyle(this._element).getPropertyValue('display');\n            this._element.style.display = 'none';\n          }\n          break;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'page',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'row',\n      class extends HTMLElement {\n        constructor() {\n          super();\n          if (this.hasAttribute('colspan')) {\n            this.classList.add('colspan-' + this.getAttribute('colspan'));\n          }\n          if (this.hasAttribute('rowspan')) {\n            this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n          }\n        }\n      }\n    );\n  }\n});\n","/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a popup that contains arbitrary content and can be opened as an overlay over the current UI.\n *\n * @author Tobias Bräutigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Popup', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _closeButton: null,\n\n    _init() {\n      super._init();\n      const popup = this._element;\n      const closeable = !popup.hasAttribute('closeable') || popup.getAttribute('closeable') === 'true';\n      if (closeable) {\n        this._closeButton = document.createElement('button');\n        this._closeButton.classList.add('close');\n        const icon = document.createElement('i');\n        icon.classList.add('ri-close-line');\n        this._closeButton.appendChild(icon);\n        popup.insertBefore(this._closeButton, popup.firstChild);\n        this._closeButton.addEventListener('click', ev => {\n          ev.stopPropagation();\n          this.close();\n        });\n      }\n      popup.addEventListener('close', ev => {\n        this.close();\n      });\n      if (popup.hasAttribute('title')) {\n        const header = document.createElement('header');\n        popup.insertBefore(header, popup.firstChild);\n        const title = document.createElement('h2');\n        title.textContent = popup.getAttribute('title');\n        header.appendChild(title);\n      }\n      if (popup.hasAttribute('auto-close-timeout')) {\n        const timeoutSeconds = parseInt(popup.getAttribute('auto-close-timeout'));\n\n        if (!isNaN(timeoutSeconds)) {\n          this._autoCloseTimer = new qx.event.Timer(timeoutSeconds * 1000);\n          this._autoCloseTimer.addListener('interval', () => {\n            this._autoCloseTimer.stop();\n            this.close();\n          });\n        } else {\n          this.error('invalid auto-close-timeout value:', popup.getAttribute('auto-close-timeout'));\n        }\n      }\n    },\n\n    open() {\n      const popup = this._element;\n      if (!popup.hasAttribute('open')) {\n        popup.setAttribute('open', '');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.registerModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.start();\n        }\n      }\n    },\n\n    close() {\n      const popup = this._element;\n      if (popup) {\n        popup.removeAttribute('open');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.unregisterModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.stop();\n        }\n        popup.dispatchEvent(new CustomEvent('closed'));\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget.\n     * The popup handles the special address-targets:\n     *  - open: opens the popup when the address value is 'true' or 1 => no auto closing\n     *  - close: closes the popup when the address value is 'false' or 0 => no auto opening\n     *  - open-close: the upper both combined => popup visibility fully dependent on the address value, auto-opening + auto-closing\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'open':\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.open();\n              }\n            } else if (ev.detail.state) {\n              this.open();\n            }\n            break;\n\n          case 'open-close':\n            if (ev.detail.state) {\n              this.open();\n            } else {\n              this.close();\n            }\n            break;\n\n          case 'close':\n            if (!ev.detail.state) {\n              this.close();\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n            break;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_autoCloseTimer');\n    if (this._closeButton) {\n      this._closeButton.remove();\n      this._closeButton = null;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'popup',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    },\n\n    outdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOutdated'\n    },\n\n    checkOutdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCheckOutdated'\n    },\n\n    outdatedMessage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyOutdatedMessage'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    fullscreenChanged: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n    _dateFormat: null,\n    _checkOutdatedTimerId: null,\n    _lastUpdate: null,\n    _maxAge: null,\n    _hideTimer: null,\n\n    _checkEnvironment() {\n      super._checkEnvironment();\n      const parent = this._element.parentElement;\n      let isWidget = parent.localName === 'cv-widget' || !!document.getElementById(parent.localName.substring(3));\n      this.setWidget(isWidget);\n    },\n\n    _init() {\n      super._init();\n      this._dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('medium') + ' ' + qx.locale.Date.getTimeFormat('medium'));\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n      if (this._element.querySelector(':scope > label.title')) {\n        this._element.classList.add('has-title');\n      }\n\n      this._hideTimer = new qx.event.Timer(5000);\n      this._hideTimer.addListener('interval', () => {\n        const elem = this._element.querySelector(':scope > .outdated-value');\n        if (elem.style.display !== 'none') {\n          elem.style.display = 'none';\n        }\n        this._hideTimer.stop();\n      });\n\n      if (this._element.hasAttribute('href')) {\n        this._element.addEventListener('click', ev => {\n          window.open(this._element.getAttribute('href'), this._element.getAttribute('target') ?? '_blank');\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    _applyOutdated(value) {\n      let elem = this._element.querySelector(':scope > .outdated');\n      if (value) {\n        this._element.classList.add('outdated');\n        if (!elem) {\n          elem = document.createElement('div');\n          elem.classList.add('outdated');\n          elem.textContent = '!';\n          this._element.insertBefore(elem, this._element.firstElementChild);\n          // capture all clicks by stealing the initial event\n          elem.addEventListener('pointerdown', ev => {\n            ev.stopImmediatePropagation();\n          });\n          elem.addEventListener('click', ev => {\n            // show last updated value for 5 seconds\n            let valueElem = this._element.querySelector(':scope > .outdated-value');\n            if (!valueElem) {\n              valueElem = document.createElement('div');\n              valueElem.classList.add('outdated-value');\n              valueElem.textContent = this.getOutdatedMessage();\n              this._element.appendChild(valueElem);\n              this._element.insertBefore(valueElem, elem.nextElementSibling);\n              // capture all clicks by stealing the initial event\n              valueElem.addEventListener('pointerdown', ev => {\n                ev.stopImmediatePropagation();\n                valueElem.style.display = 'none';\n              });\n            } else {\n              valueElem.style.display = 'block';\n            }\n            this._hideTimer.start();\n          });\n        }\n        elem.style.display = 'block';\n      } else {\n        this._element.classList.remove('outdated');\n        if (elem) {\n          elem.style.display = 'none';\n        }\n      }\n    },\n\n    _applyOutdatedMessage(value) {\n      this._element.setAttribute('title', value);\n      let valueElem = this._element.querySelector(':scope > .outdated-value');\n      if (valueElem) {\n        valueElem.textContent = value;\n      }\n    },\n\n    _applyCheckOutdated(value) {\n      const timer = qx.util.TimerManager.getInstance();\n      if (value) {\n        this._checkOutdatedTimerId = timer.start(this.checkOutdated, 5000, this);\n      } else if (this._checkOutdatedTimerId) {\n        timer.stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    },\n\n    checkOutdated() {\n      if (this._lastUpdate instanceof Date) {\n        if (isNaN(this._lastUpdate.getTime())) {\n          this.setOutdated(true);\n          this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n        } else {\n          const age = Math.floor((Date.now() - this._lastUpdate.getTime()) / 1000);\n          this.setOutdated(age > this._maxAge);\n          this.setOutdatedMessage(qx.locale.Manager.tr('Last update: %1', this._dateFormat.format(this._lastUpdate)));\n        }\n      } else if (this._lastUpdate === '-') {\n        this.setOutdated(true);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n      } else {\n        this.error('last-update value must be a Date object, but is of type:', typeof this._lastUpdate, this._lastUpdate);\n        this.resetOutdatedMessage();\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else if (this._headerFooterParent) {\n        const target = this._headerFooterParent;\n        let closeButton = target.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          target.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        target.classList.add('popup');\n        if (this._fullScreenMode) {\n          target.classList.add('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else if (this._headerFooterParent) {\n        this._headerFooterParent.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._headerFooterParent.classList.remove('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        let closeButton = this._headerFooterParent.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          case 'last-update':\n            this._maxAge = ev.detail.targetConfig && ev.detail.targetConfig.length > 0 ? parseInt(ev.detail.targetConfig.shift()) : Number.POSITIVE_INFINITY;\n            this._lastUpdate = ev.detail.state;\n            this.checkOutdated();\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    },\n\n    /*\n    ***********************************************\n      DESTRUCTOR\n    ***********************************************\n    */\n    destruct() {\n      this._disposeObjects('_dateFormat');\n      if (this._checkOutdatedTimerId) {\n        qx.util.TimerManager.getInstance().stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2010-2024, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Shows HTML content in an iframe\n *\n * HINT: Proxy mode needs an PHP environment with php-curl installed.\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Web', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._loadContent, this);\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @type {URL}\n     */\n    _url: null,\n\n    _init() {\n      const element = this._element;\n      let iframe = element.querySelector(':scope > iframe');\n      if (!iframe) {\n        iframe = document.createElement('iframe');\n        iframe.setAttribute('width', '100%');\n        iframe.setAttribute('height', '100%');\n        element.appendChild(iframe);\n      }\n      const src = element.getAttribute('src');\n      if (src) {\n        let base = window.location.origin;\n        if (src.substring(0, 1) !== '/' && src.substring(0, 4) !== 'http') {\n          // relative url\n          base += window.location.pathname;\n        }\n        this._url = new URL(src, base);\n        this._loadContent();\n        if (element.hasAttribute('refresh')) {\n          this.setRefresh(parseInt(element.getAttribute('refresh')));\n        }\n      }\n      const useProxy = element.hasAttribute('proxy') && element.getAttribute('proxy') === 'true';\n      if (useProxy) {\n        this._url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n\n        this._url.searchParams.set('url', element.getAttribute('src'));\n      }\n      this._headers = {};\n      if (element.hasAttribute('auth-type')) {\n        if (useProxy) {\n          this._url.searchParams.set('auth-type', element.getAttribute('auth-type').toLowerCase());\n        }\n      }\n    },\n\n    _loadContent() {\n      if (this.isVisible() && this._url) {\n        let iframe = this._element.querySelector(':scope > iframe');\n        iframe.src = this._url.toString();\n      }\n    },\n\n    refresh() {\n      let iframe = this._element.querySelector(':scope > iframe');\n      if (iframe) {\n        this._url.searchParams.set('r', '' + Math.random());\n        this._loadContent();\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'web',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows two half sized widgets as pair.\n */\nqx.Class.define('cv.ui.structure.tile.widgets.WidgetPair', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'widget-pair',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"],"mappings":"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","ignoreList":[]}