{"version":3,"names":["_next","_throw","key","arg","info","gen","value","error","reject","done","resolve","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","asyncGeneratorStep","err","undefined","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","e","_e","f","TypeError","normalCompletion","didErr","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","$$dbClassInfo","dependsOn","usage","defer","require","construct","qx","Bootstrap","executePendingDefers","Class","define","extend","core","type","implement","cv","ui","structure","IController","__P_72_0","bom","Stylesheet","includeFile","util","ResourceManager","getInstance","toUri","replace","Config","forceReload","Date","now","locale","Manager","addListener","_onChangeLocale","statics","PREFIX","__P_72_1","__P_72_2","MAPPING_PARAM_REGEX","register","webComponentName","qxClass","onComponentCreated","element","tagName","toLowerCase","hasOwnProperty","QxClass","push","log","Logger","properties","renderTarget","check","init","document","body","namespace","scrolled","members","__P_72_3","__P_72_4","_templateWidgets","getHtmlStructure","supports","feature","subfeature","initLayout","__P_72_5","location","hash","scrollToPage","substring","getInitialPageId","onHistoryRequest","anchor","pageId","skipHistory","page","querySelector","classList","contains","_step","_iterator","querySelectorAll","remove","_step2","_iterator2","add","parentElement","nodeName","headline","getAttribute","pageTitle","History","addToHistory","event","message","Bus","dispatchByName","warn","parseBackendSettings","xml","parseSettings","config","_this","settings","configSettings","configElement","documentElement","bindClickToWidget","translate","cacheUsed","templates","ajaxRequest","io","request","Xhr","set","accept","cache","addListenerOnce","child","content","getTarget","getResponse","target","getRenderTarget","debug","registerTemplates","xmlns","text","getResponseText","DOMParser","parseFromString","firstElementChild","appendChild","observeVisibility","TemplateEngine","setDomFinished","main","shrinkHeight","canAnimate","addEventListener","style","_step3","_iterator3","elem","getComputedStyle","height","parseInt","paddingTop","paddingBottom","marginTop","marginBottom","isScrolled","scrollTop","setScrolled","enablePullToRefresh","status","getTransport","Request","isSuccessful","send","_applyScrolled","_step4","_iterator4","_step5","_iterator5","preParse","_this2","_regeneratorRuntime","mark","_callee","theme","data","wrap","_context","prev","hasAttribute","window","matchMedia","matches","setAttribute","Model","updateFrom","abrupt","stop","createUI","_step6","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","removeAttribute","unobserve","root","_iterator6","iframe","observe","doc","rememberKeys","useKeys","language","getLanguage","match","exec","search","_trKeys","_i","_arr","_step7","attr","_iterator7","concat","trNameElement","_match","translation","textContent","trim","_step8","_iterator8","trTextElement","_key","_translation","doScreenSave","screensave_page","getInitialAddresses","firstPage","id","addMapping","mapping","removeMapping","mapValue","mappingName","store","params","tile","Controller","JSON","parse","replaceAll","addStyling","styling","removeStyling","styleValue","stylingName","parseLabel","scrollContainer","startY","refreshSpinner","createElement","icon","append","eventSource","onMove","ev","touches","clientY","onEnd","finish","reload","removeEventListener","isTemplateWidget","includes","_this3","_step9","_iterator9","_loop","template","className","lang","String","firstUp","camelCase","Clazz","getByName","widgets","TemplateWidget","customElements","_TemplatedElement","_super","_createSuper","_class","_classCallCheck","_createClass","TemplatedElement","cvTestMode","Application","structureController","destruct","removeListener","QxConnector","_HTMLElement","_super2","_this4","isSubClassOf","elements","AbstractCustomElement","Error","_instance","_assertThisInitialized","setConnected","oldValue","newValue","hasProperty","_wrapNativeSuper","HTMLElement","_QxConnector","_super3","templateId","_this5","controller","getElementById","_step10","slotAttributes","cloneNode","_iterator10","getAttributeNames","_step11","_iterator11","_loop2","slot","slotName","replacementSelector","slotParentScope","slotContents","attrs","l","attributes","slotContent","newNode","keys","attrName","parentNode","insertBefore","replaced","_i2","children","_step12","_iterator12","_step14","_name","slotAttributeName","targets","targetName","_iterator14","targetValue","startsWith","_step15","_iterator15","split","_entry$split","_entry$split2","_slicedToArray","val","_step13","_iterator13","_i3","_arr2","_toConsumableArray","attrValue","_targetName","endsWith","_step16","parts","_iterator16","_entry$split3","_entry$split4","_key2","_val","innerHTML","_element","connected","_initialized","_applyConnected","_init","_disconnected","getElement","_preMappingHooks","nullable","styleClass","enabled","visibility","widget","inPopup","_writeAddresses","_headerFooterParent","_tileElement","__P_75_0","_checkEnvironment","localName","_getTileParent","parent","setInPopup","hasReadAddress","writeAddresses","address","onStateUpdate","stopPropagation","mobile","desktop","Init","getApplication","__P_75_1","isMobile","appendToHeader","align","header","targetParent","getHeader","selector","appendToFooter","footer","getFooter","registerPreMappingHook","callback","context","some","unregisterPreMappingHook","filter","_applyValue","isConnected","mappedValue","hookEntry","sprintf","toLocaleString","_updateValue","setStyleClass","_applyStyleClass","classes","_applyEnabled","blocker","preventDefault","display","_applyVisibility","isWidget","opacity","detail","setEnabled","state","setVisibility","setValue","components","AbstractComponent","refine","Mixin","fullscreen","__P_73_1","__P_73_2","__P_73_3","getUuid","Uuid","createUuidV4","getPopupAddress","__P_73_0","sendValue","onUpdate","_initFullscreenSwitch","button","_buttonFactory","toggleFullscreen","tileAddress","tileWidget","setFullscreen","_button$classList","MFullscreen","_onPointerDownBounded","_onPointerDown","bind","openedPopups","events","closed","_childPopup","_initPopupChild","popup","Registration","_openPopupChild","last","open","_closePopupChild","close","registerModalPopup","MPopup","unregisterModalPopup","index","indexOf","splice","Tree","isChildOf","stopImmediatePropagation","Timer","once","hasMixin","MVisibility","__P_74_0","refresh","_refreshTimer","_lastRefresh","_applyRefresh","restartWith","__P_74_1","isVisible","start","getData","getInterval","_disposeObjects","MRefresh","_observeVisibility","setVisible","visible","_observer","ResizeObserver","fireDataEvent","resized","resizeTarget","_applyResizeTarget","oldElement","disconnect","MResize","_parseInt","_parseFloat","parseFloat","_parseBoolean","MStringTransforms","subscribe","_update","_list","list","listItems","activePage","startPage","currentPage","li","_createListItem","unshift","replaceChildren","a","unsubscribe","_inherits","Breadcrumbs","__P_76_0","Map","on","onClass","offClass","onValue","offValue","progress","transform","__P_76_1","__P_76_2","intVal","Number","isNaN","setType","setName","setProgress","setOnValue","setOffValue","level","addr","click","onClicked","pointerup","onPointerUp","pointerdown","onPointerDown","getOwnPropertyNames","eventName","triggerAddresses","setOn","getOnValue","hasDown","hasUp","_initProgress","Math","PI","svg","createElementNS","circle","Button","superclass","getType","_applyOn","isOn","getOffValue","setId","updateValue","getOnClass","getOffClass","_applyProgress","valueElement","_applyName","source","Address","addressElement","createRipple","relPath","baseVersion","Version","VERSION","join","CustomEvent","dispatchEvent","currentTarget","container","diameter","max","clientWidth","clientHeight","radius","width","x","clientX","offsetLeft","y","offsetTop","offsetParent","left","top","ripple","__P_92_0","__P_92_1","_stateUpdateTarget","getAddress","model","backendName","addAddress","mode","getState","fireStateUpdate","addUpdateListener","allowDuplicates","encoding","encodedValue","Transform","encodeBusAndRaw","ignoreError","variantInfo","qos","raw","lastSentValue","delay","BackendConnections","getClient","write","bus","transformedState","decode","targetConfig","shift","bubbles","cancelable","addressValue","variant","isRead","isWrite","getValue","t","r","defineProperty","c","asyncIterator","u","toStringTag","enumerable","configurable","writable","Generator","create","Context","makeInvokeMethod","tryCatch","h","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","__await","callInvokeWithMethodAndArg","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","setPrototypeOf","__proto__","awrap","async","reverse","pop","charAt","rval","handle","complete","catch","delegateYield","include","ChartCounter","DEFAULT_ASPECT_RATIO","JS_LOADED","_ref","timer","counter","d3","ScriptLoader","includeScript","_x","_x2","formatDefaultLocale","decimal","getDecimalSeparator","thousands","getGroupSeparator","grouping","currency","timeFormatDefaultLocale","dateTime","date","time","periods","getAmMarker","getPmMarker","days","getDayNames","map","shortDays","months","getMonthNames","shortMonths","CONFIG","currentSeries","currentPeriod","startTime","endTime","_id","_downloadedImage","_url","_headers","_request","_width","_height","_loaded","_dataSetConfigs","_initializing","_navigationEnabled","__P_77_1","__P_77_2","__P_77_3","__P_77_4","__P_77_5","__P_77_6","_dot","_svg","_tooltip","_titleString","__P_77_7","__P_77_8","_chartConf","_callee2","inBackground","title","span","seriesSelection","_span","option","_s","noToolTips","format","timeFormat","formatString","datasetSources","_context2","Chart","setCurrentSeries","getCurrentSeries","tr","_onSeriesPrev","_seriesToShort","_onSeriesChange","getPropertyValue","disabled","_onSeriesNext","_onRendered","setRefresh","select","_onPointerEntered","_onPointerMoved","_onPointerLeft","targetTouches","pathRect","getBoundingClientRect","passive","multiTimeFormat","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","z","color","curve","curveLinear","marginRight","marginLeft","aspectRatio","xType","scaleTime","xFormat","yType","scaleLinear","yFormat","yLabel","strokeLinecap","strokeLinejoin","strokeWidth","strokeOpacity","mixBlendMode","showArea","showXAxis","showYAxis","xPadding","__P_77_9","targetDataset","ts","aggregationInterval","mins","round","_renderChart","src","setCurrentPeriod","getCurrentPeriod","resetCurrentPeriod","__P_77_0","_loadData","_refreshData","nextButton","getStartTime","getEndTime","_applyCurrentSeries","series","currentSelection","alreadySelected","newSelection","end","periodStart","interval","setHours","setDate","setTime","getTime","setMonth","setFullYear","getFullYear","startTs","endTs","setStartTime","setEndTime","client","url","dataSets","promises","dataSet","chartType","item","part","toUpperCase","timeseries","FluxSource","isInline","fluxQuery","ConfigCache","hashCode","setQueryTemplate","OpenhabPersistenceSource","RRDSource","DemoSource","proxy","options","ttl","getRefresh","getRequestConfig","assign","Fetch","cachedFetch","processResponse","_onStatusError","all","responses","_onSuccess","chartData","tsdata","_step4$value","overflow","requestAnimationFrame","setTimeout","retries","clearTimeout","_this$_getSize","_getSize","_this$_getSize2","padding","containerWidth","offsetWidth","containerHeight","offsetHeight","formatsArray","found","fmt","multiFormat","notifications","Router","dispatchMessage","severity","stringify","_getSvgElement","empty","single","X","Y","Z","O","T","_helpers","xDomain","extent","minVal","maxVal","min","yDomain","zDomain","InternSet","I","range","has","maxValue","toFixed","xTicks","yTicks","additionalXRangePadding","xRange","yRange","xAxis","axisBottom","ticks","tickSizeOuter","tickFormat","yAxis","axisLeft","showGrid","xGrid","tickSize","yGrid","yAxisElement","label","xBar","xzScale","lineGroups","areaGroups","barGroups","stackedBarGroups","lineFunctions","areaFunctions","idx","curveName","curveFunction","curveStep","curveNatural","line","minY","area","y0","y1","scaleBand","xz","size","lineContainer","fill","stroke","areaContainer","__P_77_10","barContainer","domain","bandwidth","_loop3","_loop4","_loop5","_loop6","targetContainer","_data","lineElem","x1","x2","transition","duration","ease","easeLinear","selectAll","enter","linear","yMin","_loop7","_step9$value","yValue","NaN","get","sum","di","_x3","_x4","_y","valueElem","_this6","__P_77_11","relatedTarget","raise","node","dispatch","center","xm","ym","_d3$pointer","pointer","_d3$pointer2","_this$_helpers","_this$_chartConf","least","hypot","scaleFactorX","scaleFactorY","xOffset","cursorOffset","pointerType","timeString","lineTitle","property","chartTitle","_shownDateRange","DateFormat","getDateTimeFormat","trc","getWeekNumber","yearStart","ceil","throttleInterval","CC_COUNTER","__P_78_0","setThrottleInterval","addresses","_mode","parser","pure","ColorChooser","makeAddressListFn","Color","path","props","$$type","layout","colspan","controls","getThrottleInterval","parseAttributes","_onColorChanged","getDomString","composedPath","_onDomReady","setResizeTarget","invalidateScreensize","getColor","rgb","getComponent","__P_78_1","b","padStart","alpha","backgroundColor","_cells","_isLayoutValid","debouncedLayoutAll","module","Function","debounce","_layoutAll","rows","columns","outerPadding","spacing","cellWidth","cellHeight","viewBox","__P_90_0","_invalidateLayout","cellId","position","getCells","getRows","getColumns","row","column","_this$getNextFreeCell","getNextFreeCell","_this$getNextFreeCell2","_Object$keys","getOuterPadding","getSpacing","getCellWidth","getCellHeight","_r","_c","_r2","_c2","floor","MSvgGrid","pan","pagination","centerX","centerY","fullscreenViewBox","SVG","_dragPoint","_startPoint","_expiredTouchStart","_viewBoxBinding","_lastBBox","_additionalViewBoxUpdate","_ready","getSvg","Flow","_updateDimensions","layoutEvent","_updateCellSize","removeBinding","setViewBox","resetViewBox","_updateViewBox","getPan","_applyPan","_applyPagination","getPagination","house","_center","_applyCenterX","__P_79_0","_applyCenterY","total","skip","__P_79_1","__P_79_2","rowElements","sorted","sort","columnElements","_drag","CTM","getScreenCTM","inverse","matrixTransform","baseVal","_cancelEvent","_startDrag","drag","_endDrag","_touchStart","timeStamp","resetDrag","draggable","createSVGPoint","startDrag","endDrag","touchStart","showV","addButtons","removeButtons","_addButtons","dir","_removeButtons","_dir","_button","_updatePaginationButtons","_enablePaginationButton","_paginateLeft","_paginateRight","_paginateTop","_paginateBottom","_this$getViewBox$spli","getViewBox","_this$getViewBox$spli2","_i4","_paginate","direction","_this$getViewBox$spli3","_this$getViewBox$spli4","contentBoxSize","SVGElement","contentRect","isFullscreen","minSize","screen","availHeight","availWidth","setOuterPadding","setSpacing","bbox","getBBox","resetOuterPadding","resetSpacing","totalOuterPadding","visibleColumns","visibleRows","gridViewBox","firstColumn","lastColumn","firstRow","lastRow","gridParts","col","usedColumns","usedRows","_elem","visibleWidth","visibleHeight","heightDiff","widthDiff","box","changed","setCellWidth","setCellHeight","_stringToBool","_defineProperty","_idRegex","__P_80_0","_transformId","Icon","_applyId","_applyColor","img","base","origin","pathname","URL","useProxy","rest","Client","getBaseUrl","searchParams","btoa","_loadImage","XMLHttpRequest","responseType","setRequestHeader","onreadystatechange","readyState","DONE","createObjectURL","response","onload","revokeObjectURL","random","Image","_target","_timer","_model","_getModel","_filterModel","_sortModel","_limit","_modelInstance","refreshOnUpdate","readAddresses","evCopy","sortBy","sortModifier","right","leftVal","rightVal","localeCompare","proxyParam","res","listmodel","Registry","modelInstance","_entry$split$map","_entry$split$map2","getModel","script","innerText","templateRoot","collectData","attrib","$$model","action","handleEvent","List","_callee3","newModel","whenEmptyTemplate","emptyModel","emptyElem","itemTemplate","_context3","t0","t1","removeChild","html","_content$split","_content$split2","_content$split3","_name2","code","_val2","func","_elem$getAttribute$sp","_elem$getAttribute$sp2","_initElement","ListItem","fireEvent","appearance","depth","domReady","showLabels","_applyAppearance","_applyDepth","isDomReady","_generateMenu","_onDomAppended","setDomReady","_applyModel","rootList","ham","href","onclick","_onHamburgerMenu","_onPageChange","_onSwipe","_icon","setShowLabels","setModel","__P_81_0","_rootList","pageName","pageIcon","isShowLabels","createTextNode","onClick","toggleClass","toggle","_closeAll","getDirection","current","previousElementSibling","except","_openDetail","first","_closeDetail","parentList","currentLevel","pages","getDepth","details","summary","_pageIcon","expander","subList","pageElement","link","activeName","Menu","_currentState","MenuAction","hasAddress","PL_COUNTER","__P_82_0","pluginName","baseName","scriptLoader","Plugin","loadPluginPart","plugins","isFinished","Part","getParts","load","_applyVisible","__P_83_0","__P_83_1","__P_83_2","__P_83_3","__P_83_4","__P_83_5","__P_83_6","__P_83_7","__P_83_8","_queuedFitText","RoundProgress","hasFixedRadius","normalizedRadius","setMin","setMax","ns","bg","bar","_bg","_bar","_bg2","isPropertyInitialized","getProgress","__P_83_9","angle","angleRad","cos","sin","valueInRange","getMin","percent","getMax","_fitText","__P_83_10","getContext","compStyle","font","metrics","measureText","factor","fontSize","_applyText","__P_84_0","__P_84_1","__P_84_2","Select","_sendSelection","predictive","stepWidth","showValue","__P_85_0","__P_85_1","Slider","_applyThrottleInterval","input","oninput","setStepWidth","setShowValue","_applyShowValue","decreaseElement","onDecrease","increaseElement","onIncrease","throttle","onInput","trailing","abort","_applyMin","_applyMax","_applyStepWidth","valueLabel","firstChild","isShowValue","__P_85_2","getStepWidth","Spinner","setMode","decrease","decreaseIcon","increase","increaseIcon","getMode","__P_86_0","_queuedOverflowDetection","_debouncedDetectOverflow","Value","_detectOverflow","__P_87_0","setText","DefaultSize","rowspan","_parentGridLayout","_findParentGridLayout","parentInstance","hasOwnMixin","_applyToSvg","oldVal","_updateWidth","getColspan","setWidth","_updateHeight","getRowspan","setHeight","_applyPosition","getRow","getColumn","_applySize","_applyTitle","_applyTitleOverride","MGraphicsElement","iconColor","scale","offsetY","offsetX","_iconSize","_iconPosition","_debouncedUpdateRSize","getParentSvg","ownerSVGElement","TextValue","getScale","_updateSize","group","_applyIcon","getIcon","_centerY","_centerX","getTitle","newScale","setScale","_applyScale","setOffsetY","getHeight","setOffsetX","getWidth","_applyOffsetY","_applyOffsetX","_text","_applyIconColor","iconName","fo","textAlign","getIconColor","wAttr","foregroundColor","_noValue","hasNoValue","preMappingHook","abs","_applyForegroundColor","energy","MEntity","typeSettings","pv","battery","grid","charger","heatpump","consumer","unit","_autoFormat","_applyType","EnergyEntity","attribute","_applyUnit","getUnit","_applyDirection","setColor","_arrow","__P_88_0","resetColor","arrow","getOffsetY","_connections","_inverseConnections","connectTo","connectFrom","connectionPoints","useConnectionSum","_connectorTo","_connectorFrom","_useConnectionsSumAsValue","addConnection","other","getUseConnectionSum","_updateConnectionsSum","addInverseConnection","removeConnection","removeInverseConnection","_applyUseConnectionSum","_other","_updateDirection","_connectors","connector","setShowDirection","_applyConnectTo","targetId","setTarget","_initConnection","_applyConnectionPoints","getConnectionPoints","_applyConnectFrom","sourceId","setSource","Connector","PowerEntity","connectors","_connectors2","sourceConnectionPoint","targetConnectionPoint","_value$split","_value$split2","getSource","clear","MConnectable","_updatePosition","__P_89_0","_debouncedUpdatePosition","_sourceObserver","MutationObserver","_onMutation","_targetObserver","C","validate","showDirection","inverted","_path","_applySource","_applyTarget","sourceEntity","targetEntity","sourceRoot","targetRoot","setRoot","appendC","records","mutation","attributeName","retried","sourceCoord","Svg","targetCoord","startX","endX","endY","getSourceConnectionPoint","getTargetConnectionPoint","dx","cx","dy","cy","sqrt","pow","rsl","getRadius","rtl","yS","yT","xS","xT","getId","setInverted","drawPath","_applyRoot","oldRoot","_initArrowMarkers","_applyShowDirection","getShowDirection","markerId","__P_89_1","isInverted","arrowId","getStyleClass","getRoot","newMarker","errorMessage","_validateConnectionPoint","ValidationError","defs","arrowPath","use","showProgress","amount","__P_91_0","_radius","_iconOffset","_fixedRadius","RoundValue","getStroke","_debouncedUpdateRadius","_updateRadius","_applyRadius","setShowProgress","sumGroup","setAmount","newRadius","_applyAmount","updateIconPosition","__P_91_1","__P_91_2","halfSize","iconContainer","_updateNormalizedRadius","_applyStroke","_applyShowProgress","sizeReference","setUseConnectionSum","getConnectTo","getConnectFrom","AddressGroup","debouncedCalc","_updateCalculation","changeValue","operator","valid","nonZeroValues","_values","__P_93_0","resetValue","_applyValid","setNonZeroValues","getOperator","reduce","accumulator","currentValue","isFinite","setValid","getFactor","isRound","__P_94_0","isRegistered","addClassLoadedListener","uri","uriString","credentials","username","password","backendUrlConfigKey","backendUrl","server","hasClient","configuredIn","notification","topic","unique","deletable","addBackendClient","_client","update","setResourcePath","login","setDefaultBackendName","doSubscribe","_step2$value","addressesToSubscribe","getAddresses","isDomFinished","resetDefaultBackendName","terminate","removeClient","dispose","Backend","loaderElement","loadXml","htmlContent","handleError","getUrl","textStatus","additionalErrorInfo","actions","Loader","__P_95_0","Mapping","emptyWhenNoMatch","exactMatch","_convert","formula","_formula","defaultValue","isDefaultValue","rangeMin","rangeMax","POSITIVE_INFINITY","floatValue","stateConfig","NotificationCenter","addressContainer","skipInitial","valueMapping","addressMapping","_onStateUpdate","iconClasses","titleElem","titleTemplate","messageElem","messageTemplate","condition","addressConfig","retain","registerStateUpdateHandler","initial","_address$split","_address$split2","router","enableStateUpdateHandler","changeStateUpdateHandlerSeverity","StateNotification","Styling","Group","_toggleOpen","_supportsContentVisibility","_visibleDisplayMode","browserEngine","Environment","contentVisibility","_class2","Page","_closeButton","Popup","timeoutSeconds","_autoCloseTimer","backgroundImage","outdated","checkOutdated","outdatedMessage","fullscreenChanged","_fullScreenMode","_dateFormat","_checkOutdatedTimerId","_lastUpdate","_maxAge","_hideTimer","Tile","setWidget","getDateFormat","getTimeFormat","setBackgroundImage","resetPopup","_applyBackgroundImage","overlay","_applyOutdated","getOutdatedMessage","nextElementSibling","_applyOutdatedMessage","_applyCheckOutdated","TimerManager","setOutdated","setOutdatedMessage","age","resetOutdatedMessage","closeButton","setPopup","keepState","_applyPopup","restart","WidgetPair"],"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AbstractCustomElement.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/AbstractComponent.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/TemplateWidget.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MFullscreen.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MPopup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MRefresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MVisibility.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MResize.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MStringTransforms.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Breadcrumbs.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Button.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Address.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Color.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/MSvgGrid.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Flow.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Icon.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/List.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/ListItem.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/MenuAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/RoundProgress.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Select.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Slider.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Spinner.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Value.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/MGraphicsElement.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/TextValue.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/MEntity.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/EnergyEntity.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/MConnectable.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/Connector.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/svg/RoundValue.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/energy/PowerEntity.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AddressGroup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Backend.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Loader.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Mapping.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/StateNotification.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Styling.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Popup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/WidgetPair.js"],"sourcesContent":["/* Controller.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Controller for the 'tile' structure.\n *\n * This structure is based on web-components and does not need a parser to work.\n * The config file is directly attached to the document body.\n * The widgets in this structure register a customElement and the browser automatically creates instances\n * of this widgets once the customElement is added to the body.\n *\n * The basic structure is a set of pages that contain a list of tiles.\n * Each tile contains a grid of 3 rows and 3 columns. The components can be added to a cell of that grid\n * but also can spread over more than one cell by using row-/column spanning.\n *\n * This structure provides some tiles with a pre-defined content, e.g. a <cv-switch> which\n * contains of a button in the middle of the tile and a primary- and secondary label in the third row.\n *\n * Those pre-defined tiles are provided by a <template> (@see https://developer.mozilla.org/de/docs/Web/HTML/Element/template)\n * User are able to define own templates for re-usable tiles if they need one that this structure does not provide.\n *\n * @asset(structures/tile/*)\n * @author Tobias BrÃ¤utigam\n * @since 2022\n * @ignore(IntersectionObserver)\n */\nqx.Class.define('cv.ui.structure.tile.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__HTML_STRUCT = '';\n    qx.bom.Stylesheet.includeFile(\n      qx.util.ResourceManager.getInstance().toUri('designs/tile-globals.scss').replace('.scss', '.css') +\n        (cv.Config.forceReload === true ? '?' + Date.now() : '')\n    );\n    qx.locale.Manager.getInstance().addListener('changeLocale', this._onChangeLocale, this);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    // prefix for all custom components uses/provided by this structure\n    PREFIX: 'cv-',\n    __MAP: {},\n    __I: {},\n\n    MAPPING_PARAM_REGEX: /^(.+)\\(([^)]+)\\)$/,\n\n    register(webComponentName, qxClass) {\n      this.__MAP[webComponentName] = qxClass;\n    },\n\n    onComponentCreated(element) {\n      const name = element.tagName.toLowerCase();\n      if (Object.prototype.hasOwnProperty.call(this, name)) {\n        const QxClass = this.__MAP[name];\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          this.__I[name] = [];\n        }\n        this.__I[name].push(new QxClass(element));\n      } else {\n        qx.log.Logger.error(this, 'no QxClass registered for custom element ' + name);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    /**\n     * The target this structure should be inserted into\n     */\n    renderTarget: {\n      check: 'Element',\n      init: document.body\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    },\n\n    scrolled: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyScrolled'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __HTML_STRUCT: null,\n    __mappings: null,\n    __stylings: null,\n    _templateWidgets: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    supports(feature, subfeature) {\n      return false;\n    },\n\n    initLayout() {},\n\n    __gotoStartPage() {\n      // open first page\n      if (!document.location.hash) {\n        this.scrollToPage(this.getInitialPageId());\n      } else {\n        this.scrollToPage(document.location.hash.substring(1));\n      }\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor);\n      }\n    },\n\n    scrollToPage(pageId, skipHistory) {\n      if (!pageId) {\n        return;\n      }\n      const page = document.querySelector('cv-page#' + pageId);\n      if (page) {\n        if (!page.classList.contains('active')) {\n          for (let oldPage of document.querySelectorAll('cv-page.active')) {\n            oldPage.classList.remove('active');\n          }\n          for (let oldPage of document.querySelectorAll('cv-page.sub-active')) {\n            oldPage.classList.remove('sub-active');\n          }\n          page.classList.add('active');\n          // mark parent pages that there is an active subpage\n          let parentElement = page.parentElement;\n          while (parentElement && parentElement.nodeName.toLowerCase() !== 'main') {\n            if (parentElement.nodeName.toLowerCase() === 'cv-page') {\n              parentElement.classList.add('sub-active');\n            }\n            parentElement = parentElement.parentElement;\n          }\n\n          if (skipHistory === undefined) {\n            const headline = page.getAttribute('name');\n            let pageTitle = 'CometVisu';\n            if (headline) {\n              pageTitle = headline + ' - ' + pageTitle;\n            }\n            qx.bom.History.getInstance().addToHistory(pageId, pageTitle);\n          }\n          qx.event.message.Bus.dispatchByName('cv.ui.structure.tile.currentPage', page);\n        }\n      } else {\n        this.warn('no page with id', pageId, 'found');\n      }\n    },\n\n    // not needed, backend parse/init themselves\n    parseBackendSettings(xml) {\n/*      if (xml.querySelectorAll('cv-backend').length === 0) {\n        // no backends defined, use the default one;\n        const client = cv.io.BackendConnections.initBackendClient();\n        client.login(true, cv.Config.configSettings.credentials, () => {\n          this.debug('logged in');\n          cv.io.BackendConnections.startInitialRequests();\n        });\n      }*/\n      return false;\n    },\n\n    /**\n     * Parses structure specific settings\n     * @param config {XMLDocument} loaded config\n     */\n    parseSettings(config) {\n      document.body.classList.add('loading-structure');\n      const settings = cv.Config.configSettings;\n      const configElement = config.documentElement;\n      settings.bindClickToWidget = configElement.getAttribute('bind_click_to_widget') === 'true';\n      this.translate(config, true);\n\n      if (!cv.Config.cacheUsed) {\n        const templates = qx.util.ResourceManager.getInstance().toUri('structures/tile/templates.xml');\n\n        const ajaxRequest = new qx.io.request.Xhr(templates);\n        ajaxRequest.set({\n          accept: 'application/xml',\n          cache: !cv.Config.forceReload\n        });\n\n        ajaxRequest.addListenerOnce('success', e => {\n          let content = e.getTarget().getResponse();\n          const target = this.getRenderTarget();\n          this.debug('creating pages');\n          // register custom elements for templates in this document\n          this.registerTemplates(content);\n          let child;\n          // we need the documents to be in HTML namespace\n          if (!content.documentElement.xmlns) {\n            let text = e.getTarget().getResponseText();\n            text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n            const parser = new DOMParser();\n            content = parser.parseFromString(text, 'text/xml');\n          }\n          while ((child = content.documentElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n\n          while ((child = configElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n          document.body.classList.remove('loading-structure');\n          this.debug('finalizing');\n          this.observeVisibility();\n          qx.event.message.Bus.dispatchByName('setup.dom.append');\n          this.debug('pages created');\n          this.__gotoStartPage();\n          this.debug('setup.dom.finished');\n          qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n          cv.TemplateEngine.getInstance().setDomFinished(true);\n\n          const main = document.body.querySelector(':scope > main');\n          if (main) {\n            let shrinkHeight = -1;\n            let canAnimate = false;\n            main.addEventListener('scroll', () => {\n              // we need to know the space that we gain in height, when the shrinked elements are not shown\n              // and must not start the effect before we reach that threshold, otherwise\n              // main.scrollTop would go back to 0 because we have more height available and do not have to scroll+\n              // anymore, that would lead to an endless toggling this effect\n              // so long story short: avoid that applying this effect would lead to: main.scrollTop === 0\n              if (shrinkHeight < 0) {\n                shrinkHeight = 1;\n                let style;\n                for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n                  style = getComputedStyle(elem);\n                  if (!canAnimate) {\n                    // we need at least one element that has a defined height, to get a working animation\n                    canAnimate = !!elem.style.height;\n                  }\n                  shrinkHeight += parseInt(style.height) +\n                    parseInt(style.paddingTop) +\n                    parseInt(style.paddingBottom) +\n                    parseInt(style.marginTop) +\n                    parseInt(style.marginBottom);\n                }\n              }\n              if (!this.isScrolled() && main.scrollTop > shrinkHeight) {\n                this.setScrolled(true);\n                if (!canAnimate) {\n                  main.scrollTop -= shrinkHeight;\n                }\n              } else if (this.isScrolled() && main.scrollTop === 0) {\n                this.setScrolled(false);\n                shrinkHeight = -1;\n              }\n            });\n          }\n\n          this.enablePullToRefresh();\n        });\n        ajaxRequest.addListener('statusError', e => {\n          const status = e.getTarget().getTransport().status;\n          if (!qx.util.Request.isSuccessful(status)) {\n            this.error('filenotfound', templates);\n          }\n          document.body.classList.remove('loading-structure');\n        });\n\n        ajaxRequest.send();\n      }\n    },\n\n    _applyScrolled(value) {\n      if (value) {\n        for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n          elem.classList.add('scrolled');\n        }\n      } else {\n        for (const elem of document.body.querySelectorAll(':scope > header [hide-on-scroll=\"true\"]')) {\n          elem.classList.remove('scrolled');\n        }\n      }\n    },\n\n    /**\n     * Pre parsing hook, do everything here that is needed before the real parsing process can start\n     * @param xml {XMLDocument}\n     */\n    async preParse(xml) {\n      if (xml.documentElement.hasAttribute('theme')) {\n        let theme = xml.documentElement.getAttribute('theme');\n        const data = {};\n        if (theme === 'system') {\n          if (window.matchMedia) {\n            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n            document.documentElement.setAttribute('data-theme', theme);\n            data['theme'] = theme;\n            cv.data.Model.getInstance().updateFrom('system', data);\n            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');\n\n              data['theme'] = e.matches ? 'dark' : 'light';\n              cv.data.Model.getInstance().updateFrom('system', data);\n            });\n          } else {\n            this.error('system theme detection not possible in this browser');\n          }\n        } else {\n          document.documentElement.setAttribute('data-theme', theme);\n          data['theme'] = theme;\n          cv.data.Model.getInstance().updateFrom('system', data);\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param config {Object} loaded config file usually an XMLDocument but other structures might use different formats\n     */\n    createUI(config) {\n    },\n\n    observeVisibility() {\n      // find all pages with an iframe with attribute \"data-src\" and observe its parent page\n      const observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting && entry.target.hasAttribute('data-src')) {\n            entry.target.setAttribute('src', entry.target.getAttribute('data-src'));\n            entry.target.removeAttribute('data-src');\n            observer.unobserve(entry.target);\n          }\n        }, {\n          root: document.querySelector('body > main')\n        });\n      });\n      for (const iframe of document.querySelectorAll('iframe[data-src], img[data-src]')) {\n        observer.observe(iframe);\n      }\n    },\n\n    translate(doc, rememberKeys, useKeys) {\n      let language = qx.locale.Manager.getInstance().getLanguage();\n      let match = /locale=([a-z]{2,3})/.exec(document.location.search);\n      if (match) {\n        language = match[1];\n      }\n      if (rememberKeys) {\n        this._trKeys = {};\n      }\n      for (const attr of ['name', 'label', 'title', 'format']) {\n        for (const trNameElement of doc.querySelectorAll(`*[${attr}^=\"tr(\"]`)) {\n          const match = /^tr\\('([^']+)'\\)$/.exec(trNameElement.getAttribute(attr));\n\n          if (!match && !useKeys) {\n            this.warn('attribute content no valid translation string', trNameElement.getAttribute(attr));\n\n            continue;\n          }\n          const key = useKeys ? this._trKeys[trNameElement.getAttribute(attr)] : match[1];\n          const translation = doc.querySelector(\n            `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n          );\n\n          if (translation) {\n            if (rememberKeys) {\n              this._trKeys[translation.textContent.trim()] = key;\n            }\n            trNameElement.setAttribute(attr, translation.textContent.trim());\n          } else {\n            trNameElement.setAttribute(attr, key);\n            this.warn(`[${language}] no translation found for: \"${key}\"`);\n          }\n        }\n      }\n      for (const trTextElement of doc.querySelectorAll('*[tr=\"true\"]')) {\n        const key = useKeys ? this._trKeys[trTextElement.textContent.trim()] : trTextElement.textContent.trim();\n        const translation = doc.querySelector(\n          `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n        );\n\n        if (translation) {\n          if (rememberKeys) {\n            this._trKeys[translation.textContent.trim()] = key;\n          }\n          trTextElement.textContent = translation.textContent.trim();\n        } else {\n          trTextElement.textContent = key;\n          this.warn(`[${language}] no translation found for: \"${key}\"`);\n        }\n      }\n    },\n\n    /**\n     * Handle fired event from screensaver\n     * @return {Array<string>} Array with addresses\n     */\n    doScreenSave() {\n      if (cv.Config.configSettings.screensave_page) {\n        this.scrollToPage(cv.Config.configSettings.screensave_page);\n      }\n    },\n\n    /**\n     * Return the addresses needed to update all states on the initially loaded page\n     */\n    getInitialAddresses() {\n      return [];\n    },\n\n    /**\n     * Returns the widget id of the page item initially loaded\n     * @returns {String} widget path like 'id_'...\n     */\n    getInitialPageId() {\n      const firstPage = document.querySelector('cv-page');\n      return firstPage ? firstPage.id : '';\n    },\n\n    /**\n     *\n     * @param name {String} mapping name\n     * @param mapping {cv.ui.structure.tile.elements.Mapping}\n     */\n    addMapping(name, mapping) {\n      if (!this.__mappings) {\n        this.__mappings = {};\n      }\n      this.__mappings[name] = mapping;\n    },\n\n    removeMapping(name) {\n      if (this.__mappings) {\n        delete this.__mappings[name];\n      }\n    },\n\n    mapValue(mappingName, value, store) {\n      let match;\n      let params = [];\n      if ((match = cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(mappingName)) !== null) {\n        // this mapping name contains a parameter\n        try {\n          params = JSON.parse(`[${match[2].replaceAll('\\'', '\"')}]`);\n        } catch (e) {\n          this.error('error parsing parameters from ' + mappingName);\n        }\n        mappingName = match[1];\n      }\n      if (this.__mappings && Object.prototype.hasOwnProperty.call(this.__mappings, mappingName)) {\n        return this.__mappings[mappingName].mapValue(value, store, params);\n      }\n      return value;\n    },\n\n    /**\n     * @param name {String} styling name\n     * @param styling {cv.ui.structure.tile.elements.Styling}\n     */\n    addStyling(name, styling) {\n      if (!this.__stylings) {\n        this.__stylings = {};\n      }\n      this.__stylings[name] = styling;\n    },\n\n    removeStyling(name) {\n      if (this.__stylings) {\n        delete this.__stylings[name];\n      }\n    },\n\n    styleValue(stylingName, value, store) {\n      if (this.__stylings && Object.prototype.hasOwnProperty.call(this.__stylings, stylingName)) {\n        return this.__stylings[stylingName].mapValue(value, store);\n      }\n      return '';\n    },\n\n    // for compatibility with pure controller\n    parseLabel() {\n      return '';\n    },\n\n    _onChangeLocale() {\n      this.translate(document.body, false, true);\n    },\n\n    enablePullToRefresh() {\n      let startY = 0;\n      let scrollContainer;\n\n      const refreshSpinner = document.createElement('div');\n      refreshSpinner.classList.add('pull-to-refresh');\n      const icon = document.createElement('i');\n      icon.classList.add('ri-loader-4-fill');\n      refreshSpinner.append(icon);\n      document.body.append(refreshSpinner);\n      const eventSource = document;\n\n      const onMove = ev => {\n        const touchY = ev.touches[0].clientY;\n        const touchDiff = touchY - startY;\n        if (touchDiff > 60 && scrollContainer.scrollTop === 0) {\n          refreshSpinner.classList.add('visible');\n        } else {\n          refreshSpinner.classList.remove('visible');\n        }\n      };\n      const onEnd = () => {\n        finish();\n        if (refreshSpinner.classList.contains('visible')) {\n          refreshSpinner.classList.remove('visible');\n          location.reload();\n        }\n      };\n      const finish = () => {\n        eventSource.removeEventListener('touchmove', onMove);\n        eventSource.removeEventListener('touchend', onEnd);\n        eventSource.removeEventListener('touchcancel', finish);\n      };\n      eventSource.addEventListener('touchstart', ev => {\n        startY = ev.touches[0].clientY;\n        scrollContainer = document.querySelector('main');\n        if (scrollContainer && scrollContainer.scrollTop === 0) {\n          eventSource.addEventListener('touchmove', onMove);\n          eventSource.addEventListener('touchend', onEnd);\n          eventSource.addEventListener('touchcancel', finish);\n        }\n      });\n    },\n\n    isTemplateWidget(name) {\n      return this._templateWidgets.includes(name);\n    },\n\n    /**\n     * Registers customElements for all templates in the given xml that are direct children of a <templates structure=\"tile\"> element\n     * @param xml {XMLDocument}\n     */\n    registerTemplates(xml) {\n      if (this._templateWidgets === null) {\n        this._templateWidgets = [];\n      }\n      for (const template of xml.querySelectorAll('templates[structure=\\'tile\\'] > template')) {\n        const className = qx.lang.String.firstUp(qx.lang.String.camelCase(template.getAttribute('id')));\n        let Clazz = qx.Class.getByName(`cv.ui.structure.tile.widgets.${className}`);\n        if (!Clazz) {\n          Clazz = cv.ui.structure.tile.widgets.TemplateWidget;\n        }\n        customElements.define(\n          cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'),\n          class extends TemplatedElement {\n            constructor() {\n              super(template.getAttribute('id'), Clazz);\n            }\n          }\n        );\n        this._templateWidgets.push(cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'));\n      }\n    }\n  },\n\n  defer(statics) {\n    if (!window.cvTestMode) {\n      // do not apply ourselves automatically in test mode\n      cv.Application.structureController = statics.getInstance();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.locale.Manager.getInstance().removeListener('changeLocale', this._onChangeLocale, this);\n  }\n});\n\n\n/* eslint-disable-next-line no-redeclare */\nclass QxConnector extends HTMLElement {\n  constructor(QxClass) {\n    super();\n    if (QxClass) {\n      if (qx.Class.isSubClassOf(QxClass, cv.ui.structure.tile.elements.AbstractCustomElement)) {\n        this._instance = new QxClass(this);\n      } else {\n        throw Error(QxClass + ' must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement');\n      }\n    }\n    if (this.hasAttribute('colspan')) {\n      this.classList.add('colspan-' + this.getAttribute('colspan'));\n    }\n    if (this.hasAttribute('rowspan')) {\n      this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n    }\n  }\n\n  getInstance() {\n    return this._instance;\n  }\n\n  connectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(true);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(false);\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    name = qx.lang.String.camelCase(name);\n    if (this._instance && qx.Class.hasProperty(this._instance.constructor, name)) {\n      this._instance.set(name, newValue);\n    }\n  }\n}\n\nwindow.QxConnector = QxConnector;\n\nclass TemplatedElement extends QxConnector {\n  constructor(templateId, QxClass) {\n    super(QxClass);\n    const controller = cv.ui.structure.tile.Controller.getInstance();\n    let template = document.getElementById(templateId);\n    if (template) {\n      const slotAttributes = ['name', 'replaces', 'parent-scope'];\n      const content = template.content.cloneNode(true);\n\n      // copy all attributes, except 'id' of the template itself to the widget\n      for (const name of template.getAttributeNames()) {\n        if (name !== 'id' && !this.hasAttribute(name)) {\n          this.setAttribute(name, template.getAttribute(name));\n        }\n      }\n\n      // move slots into template\n      for (let slot of content.querySelectorAll('slot')) {\n        const slotName = slot.getAttribute('name');\n        const replacementSelector = slot.hasAttribute('replaces') ? slot.getAttribute('replaces') : '';\n        const slotParentScope = slot.hasAttribute('parent-scope') ? parseInt(slot.getAttribute('parent-scope')) : 0;\n        let slotContents = this.querySelectorAll(`[slot='${slotName}']`);\n        if (slotContents.length === 0 && slotName === 'default') {\n          // add all elements that have no slot to this default slot\n          slotContents = this.querySelectorAll(':scope > *:not([slot])');\n        }\n        const attrs = {};\n        for (let i = 0, l = slot.attributes.length; i < l; i++) {\n          if (!slotAttributes.includes(slot.attributes[i].name)) {\n            attrs[slot.attributes[i].name] = slot.attributes[i].value;\n          }\n        }\n        if (slotContents.length > 0) {\n          Array.from(slotContents).forEach(slotContent => {\n            const newNode = slotContent.cloneNode(true);\n            Object.keys(attrs).forEach(attrName => {\n              if (newNode.hasAttribute(attrName)) {\n                if (attrName === 'class') {\n                  // append it\n                  newNode.classList.add(attrs[attrName]);\n                } else {\n                  qx.log.Logger.debug(controller, '[' + templateId + '] attribute', attrName, 'already set, skipping');\n                }\n              } else {\n                newNode.setAttribute(attrName, attrs[attrName]);\n              }\n            });\n            newNode.removeAttribute('slot');\n            slot.parentNode.insertBefore(newNode, slot);\n          });\n          slot.remove();\n          if (replacementSelector) {\n            content.querySelectorAll(replacementSelector).forEach(replaced => {\n              replaced.remove();\n            });\n          }\n        } else {\n          let parentNode = slot.parentNode;\n          if (slotParentScope > 0) {\n            // got slotParentScope elements up and remove that one\n            let i = slotParentScope - 1;\n            while (i > 0) {\n              parentNode = parentNode.parentNode;\n              i--;\n            }\n            if (parentNode) {\n              parentNode.remove();\n            }\n          } else {\n            slot.remove();\n            if (parentNode.children.length === 0 && slotParentScope >= 0) {\n              // also remove slots parent when it has no content\n              // can be obeyed by setting parent-scope=\"-1\"\n              parentNode.remove();\n            }\n          }\n        }\n      }\n      // transfer attribute slots\n      const attributes = this.getAttributeNames();\n      for (const name of attributes) {\n        let value = this.getAttribute(name);\n        const slotAttributeName = `slot-${name}`;\n        const targets = content.querySelectorAll(`[${slotAttributeName}]`);\n        let targetName = name;\n\n        for (const target of targets) {\n          if (target.hasAttribute(slotAttributeName)) {\n            const targetValue = target.getAttribute(slotAttributeName);\n            if (targetValue.startsWith(':')) {\n              // this template slot-attribute contains some configuration\n              for (const entry of targetValue.substring(1).split(',')) {\n                const [key, val] = entry.split('=');\n                switch (key) {\n                  case 'target':\n                    targetName = val;\n                    break;\n                  case 'value':\n                    // not needed here\n                    break;\n                  default:\n                    qx.log.Logger.error(this, 'unhandled slot-attribute configuration key', key);\n                    break;\n                }\n              }\n            }\n          }\n\n          target.setAttribute(targetName, value);\n          target.removeAttribute(slotAttributeName);\n        }\n        if (targets.length > 0) {\n          this.removeAttribute(name);\n        }\n      }\n\n      for (const elem of content.querySelectorAll('*')) {\n        for (const attr of [...elem.attributes]) {\n          if (attr.name.startsWith('slot-')) {\n            let attrValue = attr.value;\n            let targetName = attr.name.substring(5);\n            // only e.g. map slot-progress-mapping to mapping if we have no slot-mapping attribute\n            if (attr.name.endsWith('-mapping') && elem.hasAttribute('slot-mapping')) {\n              targetName = 'mapping';\n            } else if (attr.name.endsWith('-styling') && elem.hasAttribute('slot-styling')) {\n              targetName = 'styling';\n            } else if (attr.name.endsWith('-format') && elem.hasAttribute('slot-format')) {\n              targetName = 'format';\n            } else if (attr.value.startsWith(':')) {\n              attrValue = '';\n              // this template slot-attribute contains some configuration\n              const parts = attr.value.substring(1).split(',');\n              for (const entry of parts) {\n                const [key, val] = entry.split('=');\n                switch (key) {\n                  case 'target':\n                    targetName = val;\n                    break;\n                  case 'value':\n                    attrValue = val;\n                    break;\n                  default:\n                    qx.log.Logger.error(this, 'unhandled slot-attribute configuration key', key);\n                    break;\n                }\n              }\n            }\n            if (attrValue) {\n              elem.setAttribute(targetName, attrValue);\n            }\n            elem.removeAttribute(attr.name);\n          }\n        }\n      }\n\n      // clear content\n      this.innerHTML = '';\n      this.appendChild(content);\n      this.classList.add('cv-widget');\n    } else {\n      qx.log.Logger.error(controller, '[' + templateId + '] no template found for id', templateId);\n    }\n  }\n}\n","/* AbstractCustomElement.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.elements.AbstractCustomElement', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    this._element = element;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connected: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyConnected',\n      event: 'changeConnected'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {HTMLElement}\n     */\n    _element: null,\n\n    _initialized: false,\n\n    _applyConnected(value) {\n      if (value && !this._initialized) {\n        this._init();\n        this._initialized = true;\n      } else {\n        this._disconnected();\n        this._initialized = false;\n      }\n    },\n    _init() {},\n\n    _disconnected() {},\n\n    getElement() {\n      return this._element;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._element = null;\n  }\n});\n","/* AbstractComponent.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Base class for all components.\n */\nqx.Class.define('cv.ui.structure.tile.components.AbstractComponent', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._preMappingHooks = [];\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      apply: '_applyValue',\n      init: null,\n      nullable: true,\n      event: 'changeValue'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass',\n      event: 'changeStyleClass'\n    },\n\n    enabled: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyEnabled'\n    },\n\n    visibility: {\n      check: ['visible', 'excluded', 'hidden'],\n      init: 'visible',\n      apply: '_applyVisibility',\n      event: 'changeVisibility'\n    },\n\n    /**\n     * True if this tile is the content of a template based widget\n     */\n    widget: {\n      check: 'Boolean',\n      init: false\n    },\n\n    /**\n     * True if this tile is the content of a popup\n     */\n    inPopup: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    _headerFooterParent: null,\n    _preMappingHooks: null,\n    _tileElement: null,\n    __mobileReplacements: null,\n\n    _checkEnvironment() {\n      let inPopup = false;\n      if (this._element.parentElement.localName === 'cv-popup') {\n        this._headerFooterParent = this._element.parentElement;\n        inPopup = true;\n      } else {\n        let tile = this._getTileParent();\n        if (tile) {\n          let parent = tile.parentElement;\n          this._headerFooterParent = parent;\n          if (parent.localName === 'cv-popup') {\n            inPopup = true;\n          }\n        }\n      }\n      this.setInPopup(inPopup);\n    },\n\n    _getTileParent() {\n      if (!this._tileElement) {\n        let tile = this._element;\n        let i = 0;\n        while (tile && tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n          i++;\n          if (i > 2) {\n            tile = null;\n            break;\n          }\n        }\n        if (tile && tile.localName === 'cv-tile') {\n          this._tileElement = tile;\n        }\n      }\n      return this._tileElement;\n    },\n\n    _init() {\n      this._checkEnvironment();\n\n      const element = this._element;\n      let hasReadAddress = false;\n      const writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n      if (!hasReadAddress) {\n        // address groups are read-only\n        hasReadAddress = element.querySelectorAll(':scope > cv-address-group').length > 0;\n      }\n\n      this._writeAddresses = writeAddresses;\n\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n\n      // has mobile attributes\n      this.__mobileReplacements = [];\n\n      const check = element => {\n        for (const name of element.getAttributeNames()) {\n          if (name.startsWith('mobile-')) {\n            const targetName = name.substring(7);\n            this.__mobileReplacements.push({\n              name: targetName,\n              mobile: element.getAttribute(name),\n              desktop: element.getAttribute(targetName),\n              target: element\n            });\n          }\n        }\n      };\n      check(element);\n      if (this._headerFooterParent && this._headerFooterParent.localName === 'cv-widget') {\n        check(this._headerFooterParent);\n      }\n\n      if (this.__mobileReplacements.length > 0) {\n        qx.core.Init.getApplication().addListener('changeMobile', this.__updateAttributes, this);\n      }\n\n      if (document.body.classList.contains('mobile')) {\n        this.__updateAttributes();\n      }\n    },\n\n    __updateAttributes() {\n      const isMobile = document.body.classList.contains('mobile');\n      for (const entry of this.__mobileReplacements) {\n        entry.target.setAttribute(entry.name, isMobile ? entry.mobile : entry.desktop);\n      }\n    },\n\n    getElement() {\n      return this._element;\n    },\n\n    /**\n     * Append the given element to a header inside the widget this component is a direct child of.\n     * If the header does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     * @param align {String} center (default), left or right\n     */\n    appendToHeader(element, align = undefined) {\n      if (this._headerFooterParent) {\n        let header = this._headerFooterParent.querySelector(':scope > header');\n        if (!header) {\n          header = document.createElement('header');\n          this._headerFooterParent.insertBefore(header, this._headerFooterParent.firstElementChild);\n        }\n        let targetParent = header;\n        if (align) {\n          targetParent = header.querySelector('.' + align);\n          if (!targetParent) {\n            targetParent = document.createElement('div');\n            targetParent.classList.add(align);\n          }\n          header.appendChild(targetParent);\n        }\n        targetParent.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the header or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getHeader(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > header');\n        } \n          const header = this._headerFooterParent.querySelector(':scope > header');\n          if (header) {\n            return header.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Append the given element to a footer inside the widget this component is a direct child of.\n     * If the footer does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     */\n    appendToFooter(element) {\n      if (this._headerFooterParent) {\n        let footer = this._headerFooterParent.querySelector(':scope > footer');\n        if (!footer) {\n          footer = document.createElement('footer');\n          this._headerFooterParent.appendChild(footer);\n        }\n        footer.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the footer or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getFooter(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > footer');\n        } \n          const footer = this._headerFooterParent.querySelector(':scope > footer');\n          if (footer) {\n            return footer.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Register hook function {Function(value: number) : number} that is called before the mapping gets applied.\n     * It must return a number that is used as a new value for mapping.\n     * @param callback {{(value: number) : number}}\n     * @param context {object}\n     */\n    registerPreMappingHook(callback, context) {\n      const exists = this._preMappingHooks.some(e => e[0] === callback);\n      if (!exists) {\n        this._preMappingHooks.push([callback, context || this]);\n      }\n    },\n\n    /**\n     * Unregister pre-mapping hook\n     * @param callback {{(value: number) : number}}\n     */\n    unregisterPreMappingHook(callback) {\n      this._preMappingHooks = this._preMappingHooks.filter(e => e[0] !== callback);\n    },\n\n    // property apply\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        for (const hookEntry of this._preMappingHooks) {\n          mappedValue = hookEntry[0].call(hookEntry[1], mappedValue);\n        }\n        if (mappedValue !== null) {\n          if (this._element.hasAttribute('mapping') && this._element.getAttribute('mapping')) {\n            mappedValue = cv.Application.structureController.mapValue(this._element.getAttribute('mapping'), mappedValue);\n          }\n          if (this._element.hasAttribute('format') && this._element.getAttribute('format')) {\n            mappedValue = cv.util.String.sprintf(\n              this._element.getAttribute('format'),\n              mappedValue instanceof Date ? mappedValue.toLocaleString() : mappedValue\n            );\n          }\n        }\n        this._updateValue(mappedValue, value);\n        if (this._element.hasAttribute('styling') && this._element.getAttribute('styling')) {\n          let styleClass = cv.Application.structureController.styleValue(this._element.getAttribute('styling'), value);\n          this.setStyleClass(styleClass);\n        }\n      }\n    },\n\n    // needs to be implemented by inheriting classes\n    _updateValue(mappedValue, value) {},\n\n    // property apply\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyEnabled(value) {\n      let blocker = this._element.querySelector(':scope > .blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('blocker');\n        this._element.appendChild(blocker);\n        blocker.addEventListener('click', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerdown', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerup', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n      }\n      this._element.setAttribute('disabled', value === false ? 'true' : 'false');\n\n      blocker.style.display = value === true ? 'none' : 'block';\n    },\n\n    _applyVisibility(value, oldValue) {\n      const target = this.isWidget() ? this._element.parentElement : this._element;\n      if (oldValue === 'hidden') {\n        target.style.opacity = '1.0';\n      }\n      switch (value) {\n        case 'visible':\n          target.style.display = null;\n          break;\n\n        case 'hidden':\n          target.style.opacity = '0';\n          break;\n\n        case 'excluded':\n          target.style.display = 'none';\n          break;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     * @return {Boolean} true of the update has been handled\n     */\n    onStateUpdate(ev) {\n      switch (ev.detail.target) {\n        case 'enabled':\n          this.setEnabled(ev.detail.state === 1);\n          ev.stopPropagation();\n          return true;\n        case 'show-exclude':\n          this.setVisibility(ev.detail.state ? 'visible' : 'excluded');\n          ev.stopPropagation();\n          return true;\n        case 'show-hide':\n          this.setVisibility(ev.detail.state ? 'visible' : 'hidden');\n          ev.stopPropagation();\n          return true;\n        case '':\n          this.setValue(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n      }\n\n      return false;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._writeAddresses = null;\n    this._headerFooterParent = null;\n    qx.core.Init.getApplication().removeListener('changeMobile', this.__updateAttributes, this);\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.widgets.TemplateWidget', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    widget: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _checkEnvironment() {\n      this._headerFooterParent = this._element;\n    },\n\n    _getTileParent() {\n      if (!this._tileElement) {\n        this._tileElement = this._element.querySelector(':scope > cv-tile');\n      }\n      return this._tileElement;\n    }\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n *\n */\nqx.Mixin.define('cv.ui.structure.tile.MFullscreen', {\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    fullscreen: {\n      check: 'Boolean',\n      init: false,\n      apply: '__applyFullscreen',\n      event: 'changeFullscreen'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __uuid: null,\n    __popupAddress: null,\n    __button: null,\n\n    getUuid() {\n      if (!this.__uuid) {\n        this.__uuid = qx.util.Uuid.createUuidV4();\n      }\n      return this.__uuid;\n    },\n\n    getPopupAddress() {\n      if (!this.__popupAddress) {\n        this.__popupAddress = `state:${this.getUuid()}-popup`;\n      }\n      return this.__popupAddress;\n    },\n\n    __applyFullscreen(value) {\n      const sendValue = value ? '1' : '0';\n      this.__button.setAttribute('data-value', sendValue);\n      cv.data.Model.getInstance().onUpdate(this.getPopupAddress(), sendValue, 'system');\n    },\n\n    _initFullscreenSwitch() {\n      // add fullscreen button + address\n      const button= this.__button = this._buttonFactory('ri-fullscreen-line', ['fullscreen']);\n      button.setAttribute('data-value', '0');\n      button.addEventListener('click', () => this.toggleFullscreen());\n      this.appendToHeader(button, 'right');\n\n      // address\n      const tileAddress = document.createElement('cv-address');\n      tileAddress.setAttribute('mode', 'read');\n      tileAddress.setAttribute('target', 'fullscreen-popup');\n      tileAddress.setAttribute('backend', 'system');\n      tileAddress.setAttribute('send-mode', 'always');\n      tileAddress.textContent = this.getPopupAddress();\n      this._element.parentElement.appendChild(tileAddress);\n\n      // listen to parent tile of popup is opened or not\n      let parent = this._element;\n      while (parent && parent.nodeName.toLowerCase() !== 'cv-tile') {\n        parent = parent.parentElement;\n      }\n      if (parent) {\n        const tileWidget = parent.getInstance();\n        tileWidget.addListener('closed', () => this.setFullscreen(false));\n\n        // because we added a read address to the tile after it has been initialized we need to init the listener here manually\n        parent.addEventListener('stateUpdate', ev => {\n          tileWidget.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    _buttonFactory(icon, classes) {\n      const button = document.createElement('button');\n      button.classList.add(...classes);\n      if (icon) {\n        const i = document.createElement('i');\n        i.classList.add(icon);\n        button.appendChild(i);\n      }\n      return button;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__button = null;\n  }\n});\n","/* MPopup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Handles cv-popup children and some general popup tasks, like global registration and close on click outside, modal blocker etc.\n */\nqx.Mixin.define('cv.ui.structure.tile.MPopup', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._onPointerDownBounded = this._onPointerDown.bind(this);\n  },\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  events: {\n    closed: 'qx.event.type.Event'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _childPopup: null,\n    _onPointerDownBounded: null,\n\n    _initPopupChild() {\n      const popup = (this._childPopup = this._element.querySelector(':scope > cv-popup'));\n      if (popup) {\n        qx.event.Registration.addListener(this._element, 'tap', this._openPopupChild, this);\n\n        // we need to tell the parent widget that is inside a group that wen have a popup here\n        let parent = popup.parentElement;\n        let last;\n        while (parent) {\n          if (parent.tagName.toLowerCase() === 'cv-group') {\n            last.classList.add('has-popup');\n          } else if (parent.tagName.toLowerCase() === 'cv-page') {\n            break;\n          }\n          last = parent;\n          parent = parent.parentElement;\n        }\n      }\n    },\n\n    _openPopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup:not([open])');\n\n      if (popup) {\n        popup.getInstance().open();\n      }\n    },\n\n    _closePopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup[open]');\n      if (popup) {\n        popup.getInstance().close();\n      }\n    },\n\n    registerModalPopup() {\n      document.addEventListener('pointerup', this._onPointerDownBounded);\n\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('modal-popup-blocker');\n        document.body.appendChild(blocker);\n      }\n      blocker.style.display = 'block';\n      cv.ui.structure.tile.MPopup.openedPopups.push(this);\n    },\n\n    unregisterModalPopup() {\n      document.removeEventListener('pointerup', this._onPointerDownBounded);\n\n      const index = cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);\n      cv.ui.structure.tile.MPopup.openedPopups.splice(index, 1);\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (blocker && cv.ui.structure.tile.MPopup.openedPopups.length === 0) {\n        blocker.style.display = 'none';\n      }\n    },\n\n    _onPointerDown(ev) {\n      if (!cv.util.Tree.isChildOf(ev.target, this._element)) {\n        ev.preventDefault();\n        ev.stopImmediatePropagation();\n        // clicked outside -> close (with delay to capture composed events)\n        qx.event.Timer.once(this.close, this, 100);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(this._element, 'tap', this._openPopupChild, this);\n\n    this._childPopup = null;\n  }\n});\n","/* MRefresh.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a refresh attribute that triggers a 'refresh' method which must be implemented by classes including this mixin.\n */\nqx.Mixin.define('cv.ui.structure.tile.MRefresh', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    if (qx.Class.hasMixin(this.constructor, cv.ui.structure.tile.MVisibility)) {\n      this.addListener('changeVisible', this.__onVisibilityChange, this);\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    refresh: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyRefresh'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _refreshTimer: null,\n    _lastRefresh: null,\n\n    _applyRefresh(value) {\n      if (value === 0) {\n        if (this._refreshTimer) {\n          this._refreshTimer.stop();\n        }\n      } else if (!this._refreshTimer) {\n        this._refreshTimer = new qx.event.Timer(value * 1000);\n        this._refreshTimer.addListener('interval', this.__doRefresh, this);\n        if (typeof this.isVisible === 'function') {\n          if (this.isVisible()) {\n            this._refreshTimer.start();\n          }\n        } else {\n          this._refreshTimer.start();\n        }\n      } else {\n        this._refreshTimer.restartWith(value * 1000);\n      }\n    },\n\n    __onVisibilityChange(ev) {\n      if (ev.getData()) {\n        if (this._refreshTimer) {\n          this._refreshTimer.start();\n          if (!this._lastRefresh || Date.now() - this._lastRefresh >= this._refreshTimer.getInterval()) {\n            // last execution time too old, refresh now\n            this.__doRefresh();\n          }\n        } else if (!this._lastRefresh) {\n          // refresh once when the item becomes visible\n          this.__doRefresh();\n        }\n      } else if (this._refreshTimer) {\n        this._refreshTimer.stop();\n      }\n    },\n\n    __doRefresh() {\n      if (typeof this.refresh === 'function') {\n        this.refresh();\n        this._lastRefresh = Date.now();\n      } else {\n        this.error('refresh method must be implemented!');\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_refreshTimer');\n  }\n});\n","/* MVisibility.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements visibility\n * @ignore(IntersectionObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MVisibility', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observeVisibility();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    observer: new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.target._instance) {\n          entry.target._instance.setVisible(entry.isIntersecting);\n        }\n      }, {\n        root: document.querySelector('body > main')\n      });\n    })\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visible: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _observeVisibility() {\n      if (this._element) {\n        cv.ui.structure.tile.MVisibility.observer.observe(this._element);\n      } else {\n        this.warn('no element to observe defined');\n      }\n    }\n  }\n});\n","/* MResize.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements resizing\n * @ignore(ResizeObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MResize', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observer = new ResizeObserver((entries, observer) => {\n      for (const entry of entries) {\n        this.fireDataEvent('resized', entry);\n      }\n    });\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    resized: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    resizeTarget: {\n      check: 'Element',\n      nullable: true,\n      apply: '_applyResizeTarget'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {ResizeObserver}\n     */\n    _observer: null,\n\n    _applyResizeTarget(element, oldElement) {\n      if (oldElement) {\n        this._observer.unobserve(oldElement);\n      }\n      if (element) {\n        this._observer.observe(element);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._observer.disconnect();\n    this._observer = null;\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Provides all transform helper functions for converting a string value,\n * to other scalar property types.\n *\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Mixin.define('cv.ui.structure.tile.MStringTransforms', {\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _parseInt(val) {\n      if (typeof val === 'string') {\n        return parseInt(val, 10);\n      }\n      return val;\n    },\n\n    _parseFloat(val) {\n      if (typeof val === 'string') {\n        return parseFloat(val);\n      }\n      return val;\n    },\n\n    _parseBoolean(val) {\n      if (typeof val === 'string') {\n        return val === 'true';\n      }\n      return val;\n    }\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates breadcrumb navigation bar down to the currently shown page.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Breadcrumbs', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._update, this);\n    },\n\n    _update() {\n      let list = this._element.querySelector(':scope > ul');\n      if (!list) {\n        list = document.createElement('ul');\n        this._element.appendChild(list);\n      }\n      const listItems = [];\n      const activePage = document.body.querySelector('cv-page.active');\n      const startPage = document.body.querySelector('main > cv-page:first-of-type');\n\n      if (activePage && activePage !== startPage) {\n        let currentPage = activePage;\n        while (currentPage) {\n          let li = this._createListItem(currentPage.getAttribute('id'), currentPage.getAttribute('name'));\n          listItems.unshift(li);\n          let parent = currentPage.parentElement;\n          while (parent) {\n            if (parent.localName === 'cv-page') {\n              currentPage = parent;\n              break;\n            }\n            parent = parent.parentElement;\n          }\n          if (!parent || currentPage === startPage) {\n            break;\n          }\n        }\n      }\n      let start = list.querySelector(':scope > li.start');\n      if (!start) {\n        start = this._createListItem(startPage.getAttribute('id'), startPage.getAttribute('name'));\n        start.classList.add('start');\n      }\n      listItems.unshift(start);\n\n      list.replaceChildren(...listItems);\n    },\n\n    _createListItem(pageId, text) {\n      const li = document.createElement('li');\n      const a = document.createElement('a');\n      a.setAttribute('href', '#' + pageId);\n      a.textContent = text;\n      li.appendChild(a);\n      return li;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._update, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'breadcrumbs',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Button.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Button', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__store = new Map();\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['button', 'trigger', 'push'],\n      init: 'button'\n    },\n\n    on: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOn'\n    },\n\n    onClass: {\n      check: 'String',\n      init: 'active'\n    },\n\n    offClass: {\n      check: 'String',\n      init: 'inactive'\n    },\n\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      apply: '_applyName'\n    },\n\n    progress: {\n      check: 'Number',\n      init: -1,\n      apply: '_applyProgress',\n      transform: '_parseInt'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    __textLabel: null,\n    __circumference: null,\n    /**\n     * @var {Map} value store for addresses to be able to use them e.g. in mapping formulas\n     */\n    __store: null,\n\n    _parseInt(val) {\n      const intVal = parseInt(val);\n      return Number.isNaN(intVal) ? 0 : intVal;\n    },\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      if (element.hasAttribute('name')) {\n        this.setName(element.getAttribute('name'));\n      }\n      if (element.hasAttribute('progress')) {\n        this.setProgress(element.getAttribute('progress'));\n      }\n      if (element.hasAttribute('on-value')) {\n        this.setOnValue(element.getAttribute('on-value'));\n      }\n      if (element.hasAttribute('off-value')) {\n        this.setOffValue(element.getAttribute('off-value'));\n      }\n      let hasReadAddress = false;\n      let writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      const events = {};\n      if (writeAddresses.length > 0) {\n        let eventSource = element;\n        if (element.getAttribute('whole-tile') === 'true') {\n          // find parent tile and use it as event source\n          let parent = element.parentElement;\n          let level = 0;\n          while (level <= 2) {\n            parent = parent.parentElement;\n            level++;\n            if (parent.tagName.toLowerCase() === 'cv-tile') {\n              eventSource = parent;\n              eventSource.classList.add('clickable');\n            }\n          }\n        }\n        writeAddresses.forEach(addr => {\n          let event = addr.hasAttribute('on') ? addr.getAttribute('on') : 'click';\n          switch (event) {\n            case 'click':\n              events.click = this.onClicked.bind(this);\n              break;\n            case 'up':\n              events.pointerup = this.onPointerUp.bind(this);\n              break;\n            case 'down':\n              events.pointerdown = this.onPointerDown.bind(this);\n              break;\n          }\n        });\n        Object.getOwnPropertyNames(events).forEach(eventName =>\n          eventSource.addEventListener(eventName, ev => {\n            events[eventName](ev);\n          })\n        );\n      }\n      if (element.hasAttribute('doc-link') && !Object.prototype.hasOwnProperty.call(events, 'click')) {\n        element.addEventListener('click', ev => {\n          this.onClicked(ev);\n        });\n      }\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      } else if (element.hasAttribute('mapping') || element.hasAttribute('styling')) {\n        // apply the trigger state\n        const triggerAddresses = writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on'));\n\n        if (triggerAddresses.length === 1) {\n          const value = triggerAddresses[0].getAttribute('value');\n          qx.event.Timer.once(\n            () => {\n              // using == comparisons to make sure that e.g. 1 equals \"1\"\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setOn(value == this.getOnValue());\n            },\n            this,\n            1000\n          );\n        }\n      }\n\n      // detect button type\n      if (\n        !hasReadAddress &&\n        writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on')).length === 1\n      ) {\n        // only one write address with a fixed value and no special event => simple trigger\n        this.setType('trigger');\n      } else {\n        let hasDown = false;\n        let hasUp = false;\n        writeAddresses.some(addr => {\n          if (addr.hasAttribute('value') && addr.hasAttribute('on')) {\n            if (!hasDown) {\n              hasDown = addr.getAttribute('on') === 'down';\n            }\n            if (!hasUp) {\n              hasUp = addr.getAttribute('on') === 'up';\n            }\n          }\n          return hasUp && hasDown;\n        });\n        if (hasUp && hasDown) {\n          // has an address for up and one for down event with a fixed value -> pushbutton\n          this.setType('push');\n        }\n      }\n    },\n\n    _initProgress() {\n      const element = this._element;\n      this.__circumference = 100 * Math.PI;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('viewBox', '0 0 100 100');\n      svg.setAttribute('type', 'circle');\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\n      circle.classList.add('bar');\n      circle.setAttribute('r', '49');\n      circle.setAttribute('cx', '50');\n      circle.setAttribute('cy', '50');\n      circle.setAttribute('stroke-width', '2');\n      circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n      circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n      svg.appendChild(circle);\n      element.appendChild(svg);\n      // make sure that we do not override the progress bar by state appearance\n      element.classList.add('progress');\n    },\n\n    _applyConnected(value) {\n      super._applyConnected(value);\n      if (value) {\n        if (this.getType() !== 'trigger') {\n          // delay this because we need the mappings to be ready\n          qx.event.Timer.once(this._applyOn, this, 1000);\n        }\n      }\n    },\n    _applyOn() {\n      if (this.isConnected()) {\n        let value = this.isOn() ? this.getOnValue() : this.getOffValue();\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(\n            this._element.getAttribute('mapping'),\n            value,\n            this.__store\n          );\n        }\n        const target = this._element.querySelector('.value');\n        if (target && target.tagName.toLowerCase() === 'cv-icon') {\n          if (target._instance) {\n            target._instance.setId(mappedValue);\n          } else {\n            target.textContent = mappedValue;\n          }\n        } else {\n          this.updateValue(mappedValue);\n        }\n        let styleClass = this.isOn() ? this.getOnClass() : this.getOffClass();\n        if (this._element.hasAttribute('styling')) {\n          styleClass = cv.Application.structureController.styleValue(\n            this._element.getAttribute('styling'),\n            value,\n            this.__store\n          );\n        }\n        this.setStyleClass(styleClass);\n      }\n    },\n\n    _applyProgress(value) {\n      let valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n      if (!valueElement) {\n        this._initProgress();\n        valueElement = this._element.querySelector(':scope > svg > circle.bar');\n      }\n      if (valueElement) {\n        if (this._element.hasAttribute('progress-mapping')) {\n          value = cv.Application.structureController.mapValue(\n            this._element.getAttribute('progress-mapping'),\n            value,\n            this.__store\n          );\n        }\n        valueElement.setAttribute(\n          'stroke-dashoffset',\n          '' + (this.__circumference - (value / 100) * this.__circumference)\n        );\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyName(value) {\n      if (!this.__textLabel) {\n        this.__textLabel = document.createElement('label');\n        this.__textLabel.classList.add('button-label');\n        this._element.appendChild(this.__textLabel);\n      }\n      this.__textLabel.textContent = value;\n    },\n\n    updateValue(value) {\n      const elem = this._element.querySelector('span.value');\n      if (elem) {\n        elem.innerHTML = value;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == this.getOnValue();\n      let target = ev.detail.target || 'default';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      if (target === 'default') {\n        this.setOn(value);\n      } else if (target === 'progress') {\n        this.setProgress(ev.detail.state);\n      } else if (target.startsWith('store:')) {\n        this.__store.set(target.substring(6), ev.detail.state);\n      } else if (target === 'store') {\n        // use address as store key\n        this.__store.set(ev.detail.address, ev.detail.state);\n      }\n    },\n\n    onClicked(event) {\n      this.createRipple(event);\n      if (this._element.hasAttribute('doc-link')) {\n        let relPath = this._element.getAttribute('doc-link');\n        // add locale and version\n        const baseVersion = cv.Version.VERSION.split('.').slice(0, 2).join('.');\n        let language = qx.locale.Manager.getInstance().getLanguage();\n        if (language !== 'de') {\n          // documentation only exists in 'de' and 'en'\n          language = 'en';\n        }\n        window.open(`https://www.cometvisu.org/CometVisu/${language}/${baseVersion}/manual/${relPath}`);\n        event.stopPropagation();\n      } else {\n        if (!this._writeAddresses) {\n          this._writeAddresses = Array.prototype.filter.call(\n            this._element.querySelectorAll('addresses > cv-address'),\n            address => !address.hasAttribute('mode') || address.getAttribute('mode') !== 'read'\n          );\n        }\n        const ev = new CustomEvent('sendState', {\n          detail: {\n            value: this.isOn() ? this.getOffValue() : this.getOnValue(),\n            source: this\n          }\n        });\n\n        if (this.getType() === 'trigger') {\n          // simulate feedback\n          this.setOn(true);\n          qx.event.Timer.once(\n            () => {\n              this.setOn(false);\n            },\n            null,\n            250\n          );\n        }\n        this._writeAddresses\n          .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n          .forEach(address => address.dispatchEvent(ev));\n        event.stopPropagation();\n      }\n    },\n\n    onPointerDown() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'down' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    onPointerUp() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'up' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    createRipple(event) {\n      const button = event.currentTarget;\n      let container = button.querySelector(':scope .ripple-container');\n      if (!container) {\n        container = document.createElement('div');\n        container.classList.add('ripple-container');\n        button.appendChild(container);\n      }\n      const circle = document.createElement('span');\n      const diameter = Math.max(button.clientWidth, button.clientHeight);\n      const radius = diameter / 2;\n      circle.style.width = circle.style.height = `${diameter}px`;\n      let x = event.clientX - (button.offsetLeft + radius);\n      let y = event.clientY - (button.offsetTop + radius);\n      if (button === this._element) {\n        x -= button.offsetParent.offsetLeft;\n        y -= button.offsetParent.offsetTop;\n      }\n      circle.style.left = `${x}px`;\n      circle.style.top = `${y}px`;\n      circle.classList.add('ripple');\n      // remove old ones\n      container.querySelectorAll('.ripple').forEach(ripple => ripple.remove());\n      container.appendChild(circle);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'button',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Address.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Address element that connect a widget/component to the backend.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Address', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __lastValue: null,\n    __transformedValue: null,\n    _stateUpdateTarget: null,\n\n    getAddress() {\n      return this._element.textContent.trim();\n    },\n\n\n    _init() {\n      const element = this._element;\n      this._stateUpdateTarget = element;\n      const address = this.getAddress();\n      if (address) {\n        const model = cv.data.Model.getInstance();\n        const backendName = element.getAttribute('backend');\n        model.addAddress(address, element.getAttribute('id'), backendName);\n        const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'readwrite';\n        if (mode !== 'write') {\n          // subscribe\n          // this is a read address register for updates\n          const state = model.getState(address, backendName);\n          if (state !== undefined) {\n            this.fireStateUpdate(address, state);\n          }\n          //add listener\n          model.addUpdateListener(address, this.fireStateUpdate, this, backendName);\n\n          if (element.hasAttribute('target') && element.getAttribute('target').startsWith('last-update')) {\n            if (state === undefined) {\n              // notify tile that we have no value, so its outdated\n              this.fireStateUpdate(address, '-');\n            }\n          }\n        }\n        if (mode !== 'read') {\n          // listen for sendState events\n          element.addEventListener('sendState', ev => {\n            let value = null;\n            if (Object.prototype.hasOwnProperty.call(ev.detail, 'value')) {\n              value = ev.detail.value;\n            }\n            if (element.hasAttribute('value')) {\n              // address has a fixed value that must be sent\n              value = element.getAttribute('value');\n            }\n            const allowDuplicates =\n              ev.detail.source &&\n              ev.detail.source instanceof cv.ui.structure.tile.components.Button &&\n              (ev.detail.source.getType() === 'trigger' || ev.detail.source.getType() === 'push');\n            if (value !== null) {\n              const encoding = element.getAttribute('transform') || 'raw';\n              const encodedValue = cv.Transform.encodeBusAndRaw({\n                transform: encoding,\n                selector: this._element.getAttribute('selector'),\n                ignoreError: this._element.getAttribute('ignore-error') === 'true',\n                variantInfo: this._element.getAttribute('variant'),\n                qos: (this._element.getAttribute('qos') || 0) | 0\n              }, value);\n\n              // noinspection EqualityComparisonWithCoercionJS\n              if (\n                allowDuplicates ||\n                !Object.prototype.hasOwnProperty.call(element, 'lastSentValue') ||\n                encodedValue.raw !== element.lastSentValue\n              ) {\n                if (element.hasAttribute('delay')) {\n                  const delay = parseInt(element.getAttribute('delay'));\n                  this.debug(`send with delay of ${delay}ms`);\n                  qx.event.Timer.once(\n                    () => {\n                      cv.io.BackendConnections.getClient(backendName).write(\n                        address,\n                        encodedValue.bus,\n                        element\n                      );\n\n                      if (!allowDuplicates) {\n                        element.lastSentValue = encodedValue.raw;\n                      }\n                    },\n                    this,\n                    delay\n                  );\n                } else {\n                  cv.io.BackendConnections.getClient(backendName).write(address, encodedValue.bus, element);\n\n                  if (!allowDuplicates) {\n                    element.lastSentValue = encodedValue.raw;\n                  }\n                }\n              }\n            }\n          });\n        }\n      }\n    },\n\n    /**\n     * Creates a 'stateUpdate' event with the transformed value and dispatches it to the <cv-address>-Element.\n     * @param address {String} address\n     * @param state {variant} state to send\n     */\n    fireStateUpdate(address, state) {\n      if (this.__lastValue !== state || this._element.getAttribute('send-mode') === 'always') {\n        let transform = this._element.getAttribute('transform') || 'raw';\n        let transformedState = cv.Transform.decode({\n          transform: transform,\n          selector: this._element.getAttribute('selector'),\n          ignoreError: this._element.getAttribute('ignore-error') === 'true',\n          variantInfo: this._element.getAttribute('variant'),\n          qos: (this._element.getAttribute('qos') || 0) | 0\n        }, state);\n\n        let mapping = '';\n        if (this._element.hasAttribute('mapping')) {\n          mapping = this._element.getAttribute('mapping');\n          transformedState = cv.Application.structureController.mapValue(mapping, transformedState);\n        }\n        if (this._element.hasAttribute('format')) {\n          transformedState = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            transformedState instanceof Date ? transformedState.toLocaleString() : transformedState\n          );\n        }\n        let targetConfig = this._element.hasAttribute('target') ? this._element.getAttribute('target').split(':') : [];\n        const target = targetConfig.length > 0 ? targetConfig.shift() : '';\n        const ev = new CustomEvent('stateUpdate', {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            address: this.getAddress(),\n            state: transformedState,\n            target: target,\n            targetConfig: targetConfig,\n            raw: state,\n            mapping: mapping,\n            addressValue: this._element.hasAttribute('value') ? this._element.getAttribute('value') : null,\n            source: this,\n            variant: this._element.hasAttribute('variant') ? this._element.getAttribute('variant') : null\n          }\n        });\n\n        this.__transformedValue = transformedState;\n        //console.log(ev.detail);\n        this._stateUpdateTarget.dispatchEvent(ev);\n        this.__lastValue = state;\n        // reset lastSentValue\n        if (state !== this._element.lastSentValue) {\n          this._element.lastSentValue = null;\n        }\n      }\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a read address\n     */\n    isRead() {\n      return this._element.getAttribute('mode') !== 'write';\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a write address\n     */\n    isWrite() {\n      return this._element.getAttribute('mode') !== 'read';\n    },\n\n    getValue() {\n      return this.__transformedValue;\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Chart.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.MVisibility,\n    cv.ui.structure.tile.MRefresh,\n    cv.ui.structure.tile.MResize,\n    cv.ui.structure.tile.MFullscreen\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ChartCounter: 0,\n    DEFAULT_ASPECT_RATIO: 392/192,\n\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loaded d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          decimal: qx.locale.Number.getDecimalSeparator().translate().toString(),\n          thousands: qx.locale.Number.getGroupSeparator().translate().toString(),\n          grouping: [3],\n          currency: ['â¬', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          dateTime: '%A, der %e. %B %Y, %X',\n          date: '%d.%m.%Y',\n          time: '%H:%M:%S',\n          periods: [qx.locale.Date.getAmMarker().translate().toString(), qx.locale.Date.getPmMarker().translate().toString()],\n          days: qx.locale.Date.getDayNames('wide', null, 'format').map(t => t.translate().toString()),\n\n          shortDays: qx.locale.Date.getDayNames('narrow', null, 'stand-alone').map(t => t.translate().toString()),\n          months: qx.locale.Date.getMonthNames('wide').map(t => t.translate().toString()),\n          shortMonths: qx.locale.Date.getMonthNames('narrow', null, 'stand-alone').map(t => t.translate().toString())\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    currentSeries: {\n      check: ['hour', 'day', 'week', 'month', 'year'],\n      init: 'day',\n      apply: '_applyCurrentSeries'\n    },\n\n    currentPeriod: {\n      check: 'Number',\n      init: 0,\n      apply: '__updateTimeRange'\n    },\n\n    startTime: {\n      check: 'Number',\n      init: 0\n    },\n\n    endTime: {\n      check: 'Number',\n      init: 0\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _id: null,\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n    _initializing: null,\n    _navigationEnabled: null,\n    __toolTipTimer: null,\n    __showTooltip: false,\n    __debouncedOnResize: null,\n    __resizeTimeout: null,\n    __startTs: null,\n    __endTs: null,\n\n    /**\n    * @type {d3.Selection}\n    */\n    _dot: null,\n    /**\n     * @type {d3.Selection}\n     */\n    _svg: null,\n    /**\n     * @type {HTMLElement}\n     */\n    _tooltip: null,\n    /**\n     * @type {String}\n     */\n    _titleString: null,\n\n    __helpers: null,\n    __config: null,\n    // all chart properties\n    _chartConf: null,\n\n    async _init() {\n      this._checkEnvironment();\n\n      this._initializing = true;\n      const element = this._element;\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      this._id = cv.ui.structure.tile.components.Chart.ChartCounter++;\n\n      element.setAttribute('data-chart-id', this._id.toString());\n      const inBackground = this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true';\n\n      let title = this.getHeader('label.title');\n      if (!inBackground && element.hasAttribute('title') && !title) {\n        title = document.createElement('label');\n        title.classList.add('title');\n        let span = document.createElement('span');\n        title.appendChild(span);\n        span.textContent = element.getAttribute('title');\n        this.appendToHeader(title);\n      }\n\n      if (title) {\n        // save base title for updating\n        this._titleString = title.textContent.trim();\n      }\n\n      let seriesSelection = [];\n      if (!inBackground && element.hasAttribute('selection')) {\n        const s = element.getAttribute('selection');\n        if (s === 'none') {\n          seriesSelection = [];\n        } else if (s === 'all') {\n          seriesSelection = ['hour', 'day', 'week', 'month', 'year'];\n        } else {\n          seriesSelection = s.split(',').map(n => n.trim().toLowerCase());\n        }\n      }\n      if (element.hasAttribute('series')) {\n        this.setCurrentSeries(element.getAttribute('series'));\n      }\n      const currentSeries = this.getCurrentSeries();\n      if (seriesSelection.length > 0 && !seriesSelection.includes(currentSeries)) {\n        seriesSelection.push(currentSeries);\n      }\n      this._navigationEnabled = seriesSelection.length > 0;\n      if (seriesSelection.length > 0) {\n        // back button\n        let button = this._buttonFactory('ri-arrow-left-s-line', ['prev']);\n        button.setAttribute('title', qx.locale.Manager.tr('previous'));\n        button.addEventListener('click', () => this._onSeriesPrev());\n\n        if (!title) {\n          title = document.createElement('label');\n          title.classList.add('title');\n          let span = document.createElement('span');\n          title.appendChild(span);\n          this.appendToHeader(title);\n        }\n\n        title.parentElement.insertBefore(button, title);\n        const i = document.createElement('i');\n        i.classList.add('ri-arrow-down-s-fill');\n        title.appendChild(i);\n\n        // current selection\n        const popup = document.createElement('div');\n        popup.classList.add('popup', 'series');\n        let option;\n        for (const s of seriesSelection) {\n          option = document.createElement('cv-option');\n          option.setAttribute('key', s);\n          if (s === currentSeries) {\n            option.setAttribute('selected', 'selected');\n          }\n          option.textContent = this._seriesToShort(s);\n          option.addEventListener('click', ev => {\n            popup.style.display = 'none';\n            this._onSeriesChange(ev.target.getAttribute('key'));\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n          popup.appendChild(option);\n        }\n        title.appendChild(popup);\n\n        // make title clickable\n        title.classList.add('clickable');\n        title.addEventListener('click', ev => {\n          const style = getComputedStyle(popup);\n          if (style.getPropertyValue('display') === 'none') {\n            popup.style.display = 'flex';\n          } else {\n            popup.style.display = 'none';\n          }\n          ev.stopPropagation();\n          ev.preventDefault();\n        });\n\n        // forward button\n        button = this._buttonFactory('ri-arrow-right-s-line', ['next']);\n        button.setAttribute('title', qx.locale.Manager.tr('next'));\n        // initially we cannot go into the future\n        button.disabled = true;\n        button.addEventListener('click', () => this._onSeriesNext());\n        this.appendToHeader(button);\n      }\n      if (!inBackground && element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        this._initFullscreenSwitch();\n\n        // only on mobile we need this, because of height: auto\n        if (document.body.classList.contains('mobile')) {\n          this.addListener('changeFullscreen', () => this._onRendered());\n        }\n      }\n\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n\n      // create needed elements\n\n      const svg = d3.select(this._element)\n        .append('svg');\n\n      let noToolTips = false;\n      if (inBackground) {\n        noToolTips = true;\n        svg.style('opacity', 0.4);\n      }\n\n      if (!noToolTips) {\n        this._tooltip = document.createElement('div');\n        this._tooltip.classList.add('tooltip');\n        this._tooltip.style.display = 'none';\n        this._element.appendChild(this._tooltip);\n\n        svg.on('pointerenter', this._onPointerEntered.bind(this));\n        svg.on('pointermove', this._onPointerMoved.bind(this));\n        svg.on('pointerleave', this._onPointerLeft.bind(this));\n      }\n      svg.on(\n        'touchmove',\n        event => {\n          if (this._loaded) {\n            let y = event.targetTouches[0].clientY;\n            const pathRect = this._element.querySelector(':scope > svg').getBoundingClientRect();\n            if (y > pathRect.y && y < pathRect.y + pathRect.height) {\n              event.preventDefault();\n            }\n          }\n        },\n        { passive: false }\n      );\n\n      // init some fixed settings\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n      let timeFormat = null;\n      if (this._element.hasAttribute('x-format')) {\n        const formatString = this._element.getAttribute('x-format');\n        timeFormat = date => d3.timeFormat(formatString)(date);\n      } else {\n        // format auto-detection\n        timeFormat = this.multiTimeFormat([\n          [\n            '%H:%M:%S',\n            function (d) {\n              return d.getSeconds();\n            }\n          ],\n\n          [\n            '%H:%M',\n            function (d) {\n              return d.getMinutes();\n            }\n          ],\n\n          [\n            '%H',\n            function (d) {\n              return d.getHours();\n            }\n          ],\n\n          [\n            '%a %d',\n            function (d) {\n              return d.getDay() && d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%b %d',\n            function (d) {\n              return d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%B',\n            function (d) {\n              return d.getMonth();\n            }\n          ],\n\n          [\n            '%Y',\n            function () {\n              return true;\n            }\n          ]\n        ]);\n      }\n      this.__config = {\n        x: d => d.time, // given d in data, returns the (temporal) x-value\n        y: d => +d.value, // given d in data, returns the (quantitative) y-value\n        z: d => d.key, // given d in data, returns the (categorical) z-value\n        color: d => d && this._dataSetConfigs[d].color, // stroke color of line, as a constant or a function of *z*\n        title: d => cv.util.String.sprintf(format, d.value), // given d in data, returns the title text\n        curve: d3.curveLinear, // method of interpolation between points\n        marginTop: 12, // top margin, in pixels\n        marginRight: 24, // right margin, in pixels\n        marginBottom: 20, // bottom margin, in pixels\n        marginLeft: 24, // left margin, in pixels\n        width: 392, // outer width, in pixels\n        height: 192, // outer height, in pixels\n        aspectRatio: 392/192,\n        xType: d3.scaleTime, // type of x-scale\n        xFormat: timeFormat, // a format specifier string for the x-axis\n        yType: d3.scaleLinear, // type of y-scale\n        yFormat: undefined, // a format specifier string for the y-axis\n        yLabel: undefined, // a label for the y-axis\n        strokeLinecap: undefined, // stroke line cap of line\n        strokeLinejoin: undefined, // stroke line join of line\n        strokeWidth: 1.5, // stroke width of line\n        strokeOpacity: undefined, // stroke opacity of line\n        mixBlendMode: 'normal', // blend mode of lines\n        showArea: d => this._dataSetConfigs[d].showArea, // show area below the line,\n        showXAxis: !this._element.hasAttribute('show-x-axis') || this._element.getAttribute('show-x-axis') === 'true',\n        showYAxis: !this._element.hasAttribute('show-y-axis') || this._element.getAttribute('show-y-axis') === 'true',\n        xPadding: 0.1 // amount of x-range to reserve to separate bars\n      };\n\n      this._initializing = false;\n      this.__updateTitle();\n\n      // check if we have a read address for live updates\n      const datasetSources = Array.from(this._element.querySelectorAll(':scope > dataset')).map(elem => elem.getAttribute('src'));\n      const readAddresses = Array.from(element.querySelectorAll(':scope > cv-address:not([mode=\"write\"])')).filter(elem => datasetSources.includes(elem.getAttribute('target')));\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    onStateUpdate(ev) {\n      const targetDataset = this._element.querySelector(':scope > dataset[src=\"'+ev.detail.target+'\"]');\n      const config = this._dataSetConfigs ? this._dataSetConfigs[ev.detail.target] : null;\n      if (targetDataset && config) {\n        let ts = Date.now();\n        if (config.aggregationInterval) {\n          const mins = config.aggregationInterval * 60 * 1000;\n          ts = Math.round(ts / mins) * mins;\n        }\n        this._renderChart({\n          src: ev.detail.target,\n          time: ts,\n          value: ev.detail.state\n        }, true);\n      }\n    },\n\n    _onSeriesPrev() {\n      this.setCurrentPeriod(this.getCurrentPeriod()+1);\n    },\n\n    _onSeriesChange(select) {\n      this._initializing = true;\n      // reset offset when series changed\n      this.resetCurrentPeriod();\n      this._initializing = false;\n      // reset configuration, we need a new one\n      this._chartConf = null;\n      this.setCurrentSeries(select);\n    },\n\n    _onSeriesNext() {\n      const currentPeriod = this.getCurrentPeriod();\n      if (currentPeriod > 0) {\n        this.setCurrentPeriod(currentPeriod-1);\n      }\n    },\n\n    refresh() {\n      this._loaded = false;\n      this.__updateTimeRange();\n      this._loadData();\n    },\n\n    // triggered after a change os series or period\n    _refreshData() {\n      const nextButton = this.getHeader('.next');\n      if (nextButton) {\n        if (this.getCurrentPeriod() === 0) {\n          nextButton.setAttribute('disabled', 'disabled');\n        } else {\n          nextButton.removeAttribute('disabled');\n        }\n      }\n\n      if (!this._initializing && this.getStartTime() > 0 && this.getEndTime() > 0) {\n        this._loaded = false;\n        this._loadData();\n      }\n      this.__updateTitle();\n    },\n\n    _applyCurrentSeries(series) {\n      const currentSelection = this.getHeader('.popup.series > cv-option[selected=\"selected\"]');\n      let alreadySelected = false;\n      if (currentSelection) {\n        if (currentSelection.getAttribute('key') !== series) {\n          currentSelection.removeAttribute('selected');\n        } else {\n          alreadySelected = true;\n        }\n      }\n      if (!alreadySelected) {\n        const newSelection = this.getHeader(`.popup.series > cv-option[key=\"${series}\"]`);\n        if (newSelection) {\n          newSelection.setAttribute('selected', 'selected');\n        }\n      }\n      this.__updateTimeRange();\n    },\n\n    __updateTimeRange() {\n      const series = this.getCurrentSeries();\n\n      const currentPeriod = this.getCurrentPeriod();\n      let end = new Date();\n      let periodStart = new Date();\n      let interval = 0;\n      switch (series) {\n        case 'hour':\n          interval = 60 * 60;\n          periodStart.setHours(periodStart.getHours() - currentPeriod, 0, 0, 0);\n          end.setHours(periodStart.getHours() + 1, 0, 0, 0);\n          break;\n\n        case 'day':\n          interval = 24 * 60 * 60;\n          periodStart.setDate(periodStart.getDate() - currentPeriod);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setDate(periodStart.getDate() + 1);\n          end.setHours(0, 0, 0, 0);\n          break;\n\n        case 'week':\n          interval = 7 * 24 * 60 * 60;\n          periodStart.setDate(periodStart.getDate() - (periodStart.getDay() || 7) + 1 - 7 * currentPeriod);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setTime(periodStart.getTime());\n          end.setDate(periodStart.getDate() + 7);\n          end.setHours(0, 0, 0, 0);\n          break;\n\n        case 'month':\n          interval = 30 * 24 * 60 * 60;\n          periodStart.setMonth(periodStart.getMonth() - currentPeriod);\n          periodStart.setDate(1);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setMonth(periodStart.getMonth() + 1, 1);\n          end.setHours(0, 0, 0, 0);\n          break;\n\n        case 'year':\n          interval = 365 * 24 * 60 * 60;\n          periodStart.setFullYear(periodStart.getFullYear() - currentPeriod);\n          periodStart.setMonth(0, 1);\n          periodStart.setHours(0, 0, 0, 0);\n          end.setFullYear(periodStart.getFullYear() + 1);\n          end.setMonth(periodStart.getMonth() + 1, 1);\n          end.setHours(0, 0, 0, 0);\n          break;\n      }\n      let startTs = Math.round(periodStart.getTime()/1000);\n      let endTs = Math.round(end.getTime()/1000);\n      if (this._element.getAttribute('background') === 'true' || !this._element.hasAttribute('selection')) {\n        // when have no navigation, we can just use the old relative time range now - interval\n        startTs = endTs -  interval;\n      }\n      this.setStartTime(startTs);\n      this.setEndTime(endTs);\n      this._refreshData();\n    },\n\n    _loadData() {\n      if (this._loaded && Date.now() - this._loaded < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      if (!client) {\n        return;\n      }\n      if (!client.isConnected()) {\n        client.addListenerOnce('changeConnected', () => {\n          this._loadData();\n        });\n        return;\n      }\n      let url;\n      const dataSets = this._element.querySelectorAll(':scope > dataset');\n\n      const promises = [];\n      if (!this._dataSetConfigs) {\n        this._dataSetConfigs = {};\n        for (let dataSet of dataSets) {\n          let ts = {\n            showArea: true,\n            color: '#FF9900',\n            chartType: 'line',\n            title: '',\n            curve: 'linear',\n            aggregationInterval: 0\n          };\n\n          let attr;\n          let name;\n          let value;\n          for (let i = 0; i < dataSet.attributes.length; i++) {\n            attr = dataSet.attributes.item(i);\n            // CamelCase attribute names\n            name = attr.name\n              .split('-')\n              .map((part, i) => {\n                if (i > 0) {\n                  return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n                }\n                return part;\n              })\n              .join('');\n            value = attr.value;\n            if (value === 'true' || value === 'false') {\n              value = value === 'true';\n            } else if (/^\\d+$/.test(value)) {\n              value = parseInt(value);\n            } else if (/^[\\d.]+$/.test(value)) {\n              value = parseFloat(value);\n            }\n            ts[name] = value;\n          }\n          const type = ts.src.split('://')[0].toLowerCase();\n          ts.type = type;\n          let key = ts.src;\n          switch (type) {\n            case 'flux':\n              ts.source = new cv.io.timeseries.FluxSource(ts.src);\n              if (ts.source.isInline()) {\n                const fluxQuery = dataSet.textContent.trim();\n                key = cv.ConfigCache.hashCode(fluxQuery).toString();\n                ts.source.setQueryTemplate(fluxQuery);\n              }\n              break;\n\n            case 'openhab':\n              ts.source = new cv.io.timeseries.OpenhabPersistenceSource(ts.src);\n              break;\n\n            case 'rrd':\n              ts.source = new cv.io.timeseries.RRDSource(ts.src);\n              break;\n\n            case 'demo':\n              ts.source = new cv.io.timeseries.DemoSource(ts.src);\n              break;\n\n            default:\n              this.error('unknown chart data source type ' + type);\n              break;\n          }\n          ts.key = key;\n          this._dataSetConfigs[key] = ts;\n        }\n      }\n\n      for (const src in this._dataSetConfigs) {\n        const ts = this._dataSetConfigs[src];\n        let proxy = false;\n        let options = {ttl: this.getRefresh()};\n        if (ts.source) {\n          const config = ts.source.getRequestConfig(\n            this.getStartTime(),\n            this.getEndTime(),\n            this.getCurrentSeries(),\n            this.getCurrentPeriod()\n          );\n          url = config.url;\n          proxy = config.proxy;\n          options = Object.assign(options, config.options);\n        }\n\n        if (!url) {\n          continue;\n        }\n\n        this.debug('loading', url);\n        promises.push(\n          cv.io.Fetch.cachedFetch(url, options, proxy, client)\n            .then(data => {\n              this.debug('successfully loaded', url);\n              if (ts.source) {\n                data = ts.source.processResponse(data);\n              }\n              if (!this._lastRefresh) {\n                this._lastRefresh = Date.now();\n              }\n              return {\n                data: data || [],\n                ts: ts\n              };\n            })\n            .catch(err => {\n              this._onStatusError(ts, url, err);\n              return {\n                data: [],\n                ts: ts\n              };\n            })\n        );\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess(data) {\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          // TODO: stacked bar times (entry.ts.chartType === 'stacked-bar') must be aggregated, they have to be at the same time index for stacking\n          const mins = entry.ts.aggregationInterval > 0 ? entry.ts.aggregationInterval * 60 * 1000 : 0;\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              key: entry.ts.key,\n              src: entry.ts.src,\n              time: mins > 0\n                ? Math.round(time / mins) * mins : time,\n              value\n            });\n          }\n        }\n      }\n\n      if (this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true') {\n        // no margins\n        this.__config = Object.assign(this.__config, {\n          marginRight: 0,\n          marginBottom: 0,\n          marginLeft: 0\n        });\n\n        // because we have no margins we need to cut the overflow on the tile\n        let tile = this._element.parentElement;\n        while (tile && tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n        }\n        if (tile && tile.localName === 'cv-tile') {\n          tile.style.overflow = 'hidden';\n        }\n      }\n\n      // wait some time to let the element size settle\n      window.requestAnimationFrame(() => {\n        setTimeout(() => {\n          this._onRendered(chartData);\n        }, 100);\n      });\n    },\n\n    _onRendered(chartData, retries) {\n      if (this.__resizeTimeout) {\n        clearTimeout(this.__resizeTimeout);\n        this.__resizeTimeout = null;\n      }\n      if (this.isVisible()) {\n        const [width, height] = this._getSize();\n        if ((width < 20 || height < 10) && (!retries || retries <= 5)) {\n          // this makes no sense\n          this.__resizeTimeout = setTimeout(() => {\n            this._onRendered(chartData, retries > 0 ? retries + 1 : 1);\n          }, 150);\n        }\n        if (width < 20 || height < 10) {\n          // do nothing, these values are invalid\n          return;\n        }\n\n        this.__config.width = width;\n        this.__config.height = height;\n        d3.select(this._element).select('svg')\n          .attr('viewBox', `0, 0, ${width}, ${height}`);\n        if (chartData) {\n          this._renderChart(chartData);\n          this._loaded = Date.now();\n        }\n      }\n    },\n\n    _getSize() {\n      const parent = this._element.parentElement;\n      let padding = this._element.getAttribute('background') === 'true' ? 0 : 8;\n      let containerWidth = this._element.offsetWidth - padding;\n      let containerHeight = this._element.offsetHeight - padding;\n      let factor = 1;\n\n      const landscape = containerWidth > containerHeight;\n      let width = 0;\n      let height = 0;\n\n      if (landscape && containerHeight > 0) {\n        // obeying aspect ratio in landscape mode is not necessary\n        width = Math.round(containerWidth / factor);\n        height = Math.round(containerHeight / factor);\n      } else {\n        width = Math.round(containerWidth / factor);\n        height = width / cv.ui.structure.tile.components.Chart.DEFAULT_ASPECT_RATIO;\n      }\n      if (!this._element.style.height && (parent.localName === 'cv-popup' && (parent.getAttribute('fullscreen') === 'true') ||\n        (this._element.getAttribute('allow-fullscreen') === 'true' &&\n          parent.parentElement.classList.contains('fullscreen')))) {\n        // the parent container has height: auto, so we need to have one\n        this._element.style.height = (height + this.__config.marginTop + this.__config.marginBottom) + 'px';\n      }\n      return [width, height];\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n       * @param date\n       */\n      function multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), JSON.stringify(err))\n      });\n\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n    /**\n     * Get svg element selection (create if not exists)\n     * @param parent d3.selection of the parent this element should be a child of\n     * @param nodeName {String} Element name\n     * @param classes {Array<String>} array of css classes used to identify this element\n     * @param attributes {Map<String, String>?} set these attributes if the element has to be created, when it already exists these are ignored\n     * @private\n     */\n    _getSvgElement(parent, nodeName, classes, attributes) {\n      let elem = parent.select(nodeName + '.' + classes.join('.'));\n      if (elem.empty()) {\n        elem = parent.append(nodeName).attr('class', classes.join(' '));\n        if (attributes) {\n          for (const name in attributes) {\n            elem.attr(name, attributes[name]);\n          }\n        }\n      }\n      return elem;\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param single\n     * @private\n     */\n    _renderChart(data, single) {\n      const config = this.__config;\n      const svg = d3.select(this._element).select('svg');\n\n      // Compute values.\n      let X;\n      let Y;\n      let Z;\n      let O;\n      let T;\n      if (single) {\n        if (!this._helpers) {\n          return;\n        }\n        X = this._helpers.X;\n        Y = this._helpers.Y;\n        Z = this._helpers.Z;\n        O = this._helpers.O;\n        T = this._helpers.T;\n        if (X[X.length-1] === data.time) {\n          // replace last value instead of adding one\n          Y[Y.length-1] = data.value;\n        } else {\n          X.push(data.time);\n          Y.push(data.value);\n          Z.push(data.key);\n          O.push(data);\n          T.push(config.title === undefined ? data.src : config.title === null ? null : config.title(data));\n\n          // cleanup\n          X.shift();\n          Y.shift();\n          Z.shift();\n          O.shift();\n          T.shift();\n        }\n      } else {\n        X = d3.map(data, config.x);\n        Y = d3.map(data, config.y);\n        Z = d3.map(data, config.z);\n        O = d3.map(data, d => d);\n        // Compute titles.\n        T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n      }\n\n      // Compute default domains, and unique the z-domain.\n      let xDomain = d3.extent(X);\n      let minVal = 0;\n      let maxVal = 0;\n      if (this._element.hasAttribute('min')) {\n        const min = parseFloat(this._element.getAttribute('min'));\n        if (!isNaN(min)) {\n          minVal = min;\n        }\n      } else {\n        minVal = d3.min(Y);\n        if (minVal > 1.0) {\n          minVal -= 1;\n        }\n      }\n      if (this._element.hasAttribute('max')) {\n        const max = parseFloat(this._element.getAttribute('max'));\n        if (!isNaN(max)) {\n          maxVal = max;\n        }\n      } else {\n        maxVal = d3.max(Y);\n        if (maxVal > 1.0) {\n          // add some inner chart padding\n          maxVal += 1;\n        } else {\n          maxVal += 0.1;\n        }\n      }\n      const yDomain = [minVal, maxVal];\n      const zDomain = new d3.InternSet(Z);\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => zDomain.has(Z[i]));\n\n      if (config.showYAxis) {\n        const maxValue = config.yFormat ? config.yFormat(yDomain[1]) : yDomain[1].toFixed(maxVal < 1 ? 2 : 1);\n        // check if we need more space for the y-axis\n        if (maxValue.length >= 2) {\n          config.marginLeft = maxValue.length * 8;\n        }\n      }\n\n      const xTicks = config.width / 80;\n      const yTicks = config.height / 60;\n      const additionalXRangePadding = this._element.getAttribute('background') === 'true' ? 0 : 2;\n\n      const xRange = [config.marginLeft + additionalXRangePadding, config.width - config.marginRight - additionalXRangePadding]; // [left, right]\n      if (!this._chartConf) {\n        const yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n        // initialize everything once\n        this._chartConf = {\n          // x/y scales\n          x: config.xType().range(xRange),\n          y: config.yType().range(yRange)\n        };\n        this._chartConf.xAxis = config.showXAxis\n          ? d3.axisBottom(this._chartConf.x)\n            .ticks(xTicks)\n            .tickSizeOuter(0)\n            .tickFormat(config.xFormat)\n          : undefined;\n        this._chartConf.yAxis = config.showYAxis\n          ? d3.axisLeft(this._chartConf.y).ticks(yTicks, config.yFormat)\n          : undefined;\n\n\n        // add elements\n        const showGrid = this._element.hasAttribute('show-grid') ? this._element.getAttribute('show-grid') : 'xy';\n        if (showGrid.includes('x')) {\n          this._chartConf.xGrid = d3.axisBottom(this._chartConf.x).ticks(xTicks)\n            .tickSize(-config.height + config.marginBottom + config.marginTop)\n            .tickFormat('');\n          this._getSvgElement(svg, 'g', ['grid', 'x'], {\n            transform: `translate(0,${config.height - config.marginBottom})`\n          })\n            .call(this._chartConf.xGrid);\n        }\n        if (showGrid.includes('y')) {\n          this._chartConf.yGrid = d3.axisLeft(this._chartConf.y).ticks(yTicks)\n            .tickSize(-config.width + config.marginRight + config.marginLeft)\n            .tickFormat('');\n\n          this._getSvgElement(svg, 'g', ['grid', 'y'], {\n            transform: `translate(${config.marginLeft},0)`\n          })\n            .call(this._chartConf.yGrid);\n        }\n\n        if (config.showXAxis) {\n          this._getSvgElement(svg, 'g', ['axis', 'x'])\n            .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n            .call(this._chartConf.xAxis);\n        }\n\n        if (config.showYAxis) {\n          let yAxisElement = this._getSvgElement(svg, 'g', ['axis', 'y'])\n            .attr('transform', `translate(${config.marginLeft},0)`);\n\n          if (config.label && yAxisElement.select('text').empty()) {\n            yAxisElement.append('text')\n              .attr('x', -config.marginLeft)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(config.yLabel);\n          }\n\n          yAxisElement\n            .call(this._chartConf.yAxis)\n            .call(g => g.select('.domain').remove());\n        }\n\n        // find chart types\n        const lineGroups = new Map();\n        const areaGroups = new Map();\n        const barGroups = new Map();\n        const stackedBarGroups = new Map();\n        const lineFunctions = {};\n        const areaFunctions = {};\n        let xBar;\n        let xzScale;\n\n        for (const key in this._dataSetConfigs) {\n          switch (this._dataSetConfigs[key].chartType) {\n            case 'line': {\n              const idx = I.filter(i => Z[i] === key);\n              lineGroups.set(key, idx);\n              const curveName = this._dataSetConfigs[key].curve || 'linear';\n              if (!Object.prototype.hasOwnProperty.call(lineFunctions, curveName)) {\n                let curveFunction;\n                switch (curveName) {\n                  case 'linear':\n                    curveFunction = d3.curveLinear;\n                    break;\n\n                  case 'step':\n                    curveFunction = d3.curveStep;\n                    break;\n\n                  case 'natural':\n                    curveFunction = d3.curveNatural;\n                    break;\n                }\n\n                if (curveFunction) {\n                  // Construct a line generator.\n                  lineFunctions[curveName] = d3\n                    .line()\n                    .curve(curveFunction)\n                    .x(i => this._chartConf.x(this._helpers.X[i]))\n                    .y(i => this._chartConf.y(this._helpers.Y[i]));\n                }\n\n                if (this._dataSetConfigs[key].chartType === 'line' && typeof config.showArea === 'function' && config.showArea(key)) {\n                  areaGroups.set(key, idx);\n                  if (curveFunction) {\n                    // Construct a line generator.\n                    const minY = this._chartConf.y.range()[0];\n                    areaFunctions[curveName] = d3\n                      .area()\n                      .curve(curveFunction)\n                      .x(i => this._chartConf.x(this._helpers.X[i]))\n                      .y0(() => minY)\n                      .y1(i => this._chartConf.y(this._helpers.Y[i]));\n                  }\n                }\n              }\n              break;\n            }\n\n            case 'bar':\n              barGroups.set(key, I.filter(i => Z[i] === key));\n              if (!xBar) {\n                xBar = d3.scaleBand().range(this._chartConf.x.range()).padding(config.xPadding);\n              }\n              if (!xzScale) {\n                xzScale = d3.scaleBand().padding(0.05);\n              }\n              break;\n\n            case 'stacked-bar':\n              stackedBarGroups.set(key, I.filter(i => Z[i] === key));\n              break;\n          }\n        }\n\n        this._chartConf.lineGroups = lineGroups;\n        this._chartConf.areaGroups = areaGroups;\n        this._chartConf.barGroups = barGroups;\n        this._chartConf.stackedBarGroups = stackedBarGroups;\n        this._chartConf.lineFunctions = lineFunctions;\n        this._chartConf.areaFunctions = areaFunctions;\n        this._chartConf.xBar = xBar;\n        if (xzScale) {\n          this._chartConf.xz = xzScale;\n        }\n\n        // prepare elements for chart elements\n        if (this._chartConf.lineGroups.size > 0) {\n          this._chartConf.lineContainer = this._getSvgElement(svg, 'g', ['line'], {\n            fill: 'none',\n            stroke: typeof config.color === 'string' ? config.color : null,\n            'stroke-linecap': config.strokeLinecap,\n            'stroke-linejoin': config.strokeLinejoin,\n            'stroke-width': config.strokeWidth,\n            'stroke-opacity': config.strokeOpacity\n          });\n        }\n        if (this._chartConf.areaGroups.size > 0) {\n          this._chartConf.areaContainer = this._getSvgElement(svg, 'g', ['area'], {\n            stroke: 'none',\n            fill: typeof config.color === 'string' ? this.__opacifyColor(config.color, '30') : null\n          });\n        }\n        if (this._chartConf.barGroups.size > 0) {\n          this._chartConf.barContainer = this._getSvgElement(svg, 'g', ['bars']);\n        }\n      }\n\n      // apply domains to scales\n      this._chartConf.x.domain(xDomain);\n      this._chartConf.y.domain(yDomain);\n\n      this._helpers = { X, Y, I, T, Z, O };\n\n      if (this._chartConf.xAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'x'])\n          .call(this._chartConf.xAxis);\n      }\n\n      if (this._chartConf.yAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'y'])\n          .call(this._chartConf.yAxis);\n      }\n      if (this._chartConf.xBar) {\n        this._chartConf.xBar.domain(new d3.InternSet(X));\n      }\n      if (this._chartConf.xz) {\n        this._chartConf.xz.domain(zDomain);\n        this._chartConf.x.range([xRange[0], xRange[1] - this._chartConf.xBar.bandwidth()]);\n        this._chartConf.xz.range([0, this._chartConf.xBar.bandwidth()]);\n      }\n\n      // update groups\n      for (const key of this._chartConf.lineGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key);\n        this._chartConf.lineGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.areaGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.areaGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.barGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.barGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.stackedBarGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.stackedBarGroups.set(key, idx);\n      }\n\n      this.__config = config;\n      this._dot = svg.select('g.dot');\n\n      // show zero line in grid for non-zero based charts\n      if (minVal !== 0) {\n        let targetContainer = this._chartConf.lineContainer || this._chartConf.areaContainer || this._chartConf.barContainer;\n        let yValue = 0.0;\n        let data = [0, X.length-1];\n        let lineElem = targetContainer.select('.zero-line');\n        if (lineElem.empty()) {\n          lineElem = targetContainer.append('line')\n            .attr('class', 'zero-line')\n            .attr('stroke', 'currentColor')\n            .attr('stroke-opacity', '15%');\n        }\n        if (X.length > 0) {\n          const x1 = this._chartConf.x(X[data[0]]);\n          const x2 = this._chartConf.x(X[X.length - 1]); // always draw until end of chart (not until end of src dataset)\n          const y = this._chartConf.y(yValue);\n          lineElem\n            .attr('x1', x1)\n            .attr('x2', x2)\n            .attr('y1', y)\n            .attr('y2', y);\n        }\n      }\n\n      const t = d3.transition()\n        .duration(single ? 0 : 500)\n        .ease(d3.easeLinear);\n\n      if (this._chartConf.lineContainer) {\n        this._chartConf.lineContainer\n          .selectAll('path')\n          .data(this._chartConf.lineGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.lineFunctions[curveName] || this._chartConf.lineFunctions.linear;\n            const val = func(d[1]);\n            return val;\n          });\n      }\n\n      // Add the area\n      if (this._chartConf.areaContainer) {\n        this._chartConf.areaContainer\n          .selectAll('path')\n          .data(this._chartConf.areaGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('fill', typeof config.color === 'function' ? p => this.__opacifyColor(config.color(p[0]), '30') : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.areaFunctions[curveName] || this._chartConf.areaFunctions.linear;\n            return func(d[1]);\n          });\n      }\n\n      if (this._chartConf.barContainer) {\n        const yMin = this._chartConf.y.range()[0];\n        this._chartConf.barContainer\n          .selectAll('g')\n          .data(this._chartConf.barGroups)\n          .join('g')\n          .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n          .attr('x', d => {\n            const x = this._chartConf.x(X[d.value]);\n            const xz =  this._chartConf.xz(d.key);\n            return x + xz;\n          })\n          .attr('y', d => this._chartConf.y(Y[d.value]))\n          .attr('width', this._chartConf.xz.bandwidth())\n          .transition(t)\n          .attr('height', d => yMin - this._chartConf.y(Y[d.value]));\n      }\n\n      // add fixed/calculated lines\n      for (const [i, line] of this._element.querySelectorAll(':scope > h-line').entries()) {\n        const src = line.getAttribute('src');\n        let targetContainer = null;\n        let data = null;\n        let yValue = NaN;\n        if (src) {\n          if (this._chartConf.lineGroups.get(src)) {\n            targetContainer = this._chartConf.lineContainer;\n            data = this._chartConf.lineGroups.get(src);\n          } else if (this._chartConf.areaGroups.get(src)) {\n            targetContainer = this._chartConf.areaContainer;\n            data = this._chartConf.areaGroups.get(src);\n          } else if (this._chartConf.barGroups.get(src)) {\n            targetContainer = this._chartConf.barContainer;\n            data = this._chartConf.barGroups.get(src);\n          }\n          if (!data) {\n            this.error('no data found for src ' + src);\n            continue;\n          }\n          switch (line.getAttribute('value')) {\n            case 'avg': {\n              let sum = 0.0;\n              for (const di of data) {\n                sum += Y[di];\n              }\n              yValue = sum / data.length;\n              break;\n            }\n\n            case 'max':\n              yValue = d3.max(Y.filter((v, i) => data.includes(i), d => d));\n              break;\n\n            case 'min':\n              yValue = d3.min(Y.filter((v, i) => data.includes(i), d => d));\n              break;\n\n            default:\n              this.error('unknown value calculation: ' + line.getAttribute('value'));\n              break;\n          }\n        } else {\n          targetContainer = this._chartConf.lineContainer || this._chartConf.areaContainer || this._chartConf.barContainer;\n          yValue = parseFloat(line.getAttribute('value'));\n          data = [0, X.length-1];\n        }\n        if (!targetContainer) {\n          continue;\n        }\n\n        let lineElem = targetContainer.select('.line-' + i);\n        if (isNaN(yValue) && !lineElem.empty()) {\n          // remove line\n          lineElem.remove();\n          if (line.getAttribute('show-value') === 'true') {\n            targetContainer.select('.line-value-' + i).remove();\n          }\n        } else if (!isNaN(yValue)) {\n          const color = line.getAttribute('color') || 'currentColor';\n          if (lineElem.empty()) {\n            lineElem = targetContainer.append('line')\n              .attr('class', 'line-' + i)\n              .attr('stroke', color);\n          }\n          const x1 = this._chartConf.x(X[data[0]]);\n          const x2 = this._chartConf.x(X[X.length -1]); // always draw until end of chart (not until end of src dataset)\n          const y = this._chartConf.y(yValue);\n          lineElem\n            .attr('x1', x1)\n            .attr('x2', x2)\n            .attr('y1', y)\n            .attr('y2', y);\n\n          if (line.getAttribute('show-value') === 'true') {\n            const format = line.hasAttribute('format') ? line.getAttribute('format')\n              : (this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s');\n            let valueElem = targetContainer.select('.line-value-' + i);\n            if (valueElem.empty()) {\n              valueElem = targetContainer.append('text')\n                .attr('class', 'line-value-' + i)\n                .attr('fill', line.getAttribute('value-color') || color)\n                .attr('font-size', '10')\n                .attr('text-anchor', 'start');\n            }\n            // show value on right side of the chart\n            valueElem\n              .attr('x', x2 + 2)\n              .attr('y', y + 5)\n              .text(cv.util.String.sprintf(format, yValue));\n          }\n        }\n      }\n\n      // dot must be added last\n      const dot = svg.select('g.dot');\n      if (dot.empty()) {\n        svg.append('g')\n          .attr('class', 'dot')\n          .attr('display', 'none')\n          .attr('fill', 'currentColor')\n          .append('circle')\n          .attr('r', 2.5);\n      }\n      this._dot = svg.select('g.dot');\n    },\n\n    _onPointerEntered(ev) {\n      if (this._loaded) {\n        this.__toolTipTimer = setTimeout(() => {\n          this.__activateTooltip(true, ev);\n          this.__toolTipTimer = null;\n        }, 500);\n      }\n    },\n\n    _onPointerLeft(ev) {\n      if (this.__toolTipTimer) {\n        clearTimeout(this.__toolTipTimer);\n      }\n\n      if (this._loaded) {\n        if (ev.relatedTarget !== this._tooltip) {\n          this.__activateTooltip(false);\n        }\n      }\n    },\n\n    __activateTooltip(val, ev) {\n      this.__showTooltip = val;\n      if (val) {\n        if (this._dot) {\n          this._dot.attr('display', null);\n          this._dot.raise();\n        }\n        this._tooltip.style.display = 'block';\n        this._onPointerMoved(null, true);\n      } else {\n        if (this._dot) {\n          this._dot.attr('display', 'none');\n        }\n        const svg = d3.select(this._element).select('svg');\n        svg.node().value = null;\n        svg.dispatch('input', {bubbles: true});\n        this._tooltip.style.display = 'none';\n      }\n    },\n\n    _onPointerMoved(event, center) {\n      if (this._loaded && this.__showTooltip) {\n        let xm = 0;\n        let ym = 0;\n        if (event) {\n          [xm, ym] = d3.pointer(event);\n        } else if (center) {\n          xm = this.__config.width/2;\n          ym = this.__config.height/2;\n        } else {\n          return;\n        }\n        const {X, Y, I, T, Z, O} = this._helpers;\n        const {x, y, xz} = this._chartConf;\n        const i = d3.least(I, i => Math.hypot(x(X[i]) - xm, y(Y[i]) - ym));\n        const scaleFactorX = this._element.offsetWidth / this.__config.width;\n        const scaleFactorY = this._element.offsetHeight / this.__config.height;\n        // closest point\n        const xOffset = xz ? (xz(Z[i]) + (typeof xz.bandwidth === 'function' ? xz.bandwidth() / 2 : 0)) : 0;\n        this._dot.attr('transform', `translate(${x(X[i]) + xOffset},${y(Y[i])})`);\n        if (T) {\n          const cursorOffset = event && event.pointerType === 'mouse' ? 16 : 40;\n          const timeString = this.__config.xFormat(new Date(X[i]));\n          let top = ym * scaleFactorY - this._tooltip.offsetHeight;\n          if (top < 0) {\n            top += cursorOffset + this._tooltip.offsetHeight;\n          } else {\n            top -= cursorOffset;\n          }\n\n          let left = xm * scaleFactorX;\n          if (left > this._element.offsetWidth / 2) {\n            left -= this._tooltip.offsetWidth + cursorOffset;\n          } else {\n            left += cursorOffset;\n          }\n\n          const key = Z[i];\n          const lineTitle = this._dataSetConfigs[key] && this._dataSetConfigs[key].title ? this._dataSetConfigs[key].title + ': ' : '';\n          this._tooltip.innerHTML = `${timeString}<br/>${lineTitle}${T[i]}`;\n          this._tooltip.style.left = left + 'px';\n          this._tooltip.style.top = top + 'px';\n        }\n        d3.select(this._element).select('svg').property('value', O[i]).dispatch('input', {bubbles: true});\n      }\n    },\n\n    __updateTitle() {\n      if (this._navigationEnabled) {\n        let title = this.getHeader('label.title span');\n        if (title) {\n          let chartTitle = this._titleString || '';\n          title.textContent = (chartTitle ? chartTitle + ' - ' : '') + this._shownDateRange();\n        }\n      }\n    },\n\n    /**\n     * Converts series to a shot string that is shown in a select box\n     * @param series\n     * @private\n     */\n    _seriesToShort(series) {\n      switch (series) {\n        case 'hour':\n          return qx.locale.Manager.tr('Hour');\n\n        case 'day':\n          return qx.locale.Manager.tr('Day');\n\n        case 'week':\n          return qx.locale.Manager.tr('Week');\n\n        case 'month':\n          return qx.locale.Manager.tr('Month');\n\n        case 'year':\n          return qx.locale.Manager.tr('Year');\n      }\n      return '';\n    },\n\n    /**\n     * Convert the currently shown date range into a human-readable string\n     * @private\n     */\n    _shownDateRange() {\n      const series = this.getCurrentSeries();\n      const currentPeriod = this.getCurrentPeriod();\n      const date = new Date();\n      let format = new qx.util.format.DateFormat();\n      switch (series) {\n        case 'hour':\n          date.setHours(date.getHours() - currentPeriod, 0, 0);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('hmm', 'h:mm'));\n          return format.format(date);\n\n        case 'day':\n          if (currentPeriod === 0) {\n            return qx.locale.Manager.tr('today');\n          } else if (currentPeriod === 1) {\n            return qx.locale.Manager.tr('yesterday');\n          }\n          date.setDate(date.getDate() - currentPeriod);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMMd', 'd. MMM'));\n          return format.format(date);\n\n        case 'week':\n          date.setDate(date.getDate() - currentPeriod*7);\n          return qx.locale.Manager.trc('CW = calendar week', 'CW %1', this.getWeekNumber(date));\n\n        case 'month':\n          date.setMonth(date.getMonth() - currentPeriod);\n          if (date.getFullYear() === new Date().getFullYear()) {\n            // no year needed\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMM', 'MMM'));\n          } else {\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('yyMMM', 'MMM yy'));\n          }\n          return format.format(date);\n\n        case 'year':\n          return date.getFullYear() - currentPeriod;\n      }\n      return '';\n    },\n\n   getWeekNumber(d) {\n      d = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      // Set to the nearest Thursday: current date + 4 - current day number\n      d.setDate(d.getDate() + 4 - (d.getDay() || 7));\n      // Get first day of year\n      const yearStart = new Date(d.getFullYear(), 0, 1);\n      // Calculate full weeks to the nearest Thursday\n      return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n    },\n\n    /**\n     * add opacity to color\n     * @param color\n     * @param opacity {string} hex number 0 - 255\n     * @return {string|*}\n     * @private\n     */\n    __opacifyColor(color, opacity) {\n      if (color.startsWith('var(')) {\n        color = getComputedStyle(document.documentElement).getPropertyValue(color.substring(4, color.length-1));\n      }\n      if (color.startsWith('rgb(')) {\n        return 'rgba(' + color.substring(4, color.length-1) + ', ' + (parseInt(opacity, 16) / 255).toFixed(2) + ')';\n      } else if (color.startsWith('#') && color.length === 7) {\n        return color + opacity;\n      }\n      return color;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._chartConf = null;\n    this._helpers = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'chart',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Color.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a html color input\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Color', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MResize,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    CC_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __colorChooser: null,\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      }\n\n      // init components\n      const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'popup';\n      if (mode === 'popup') {\n        let popup = element.querySelector(':scope > cv-popup');\n        if (!popup) {\n          popup = document.createElement('cv-popup');\n          popup.setAttribute('modal', 'true');\n          if (element.hasAttribute('title')) {\n            popup.setAttribute('title', element.getAttribute('title'));\n          }\n          const addresses = {};\n          for (const elem of element.querySelectorAll(':scope > cv-address')) {\n            let src = elem.textContent;\n            let transform = elem.getAttribute('transform');\n            let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n            switch (elem.getAttribute('mode')) {\n              case 'disable':\n                mode = 0;\n                break;\n              case 'read':\n                mode = 1;\n                break;\n              case 'write':\n                mode = 2;\n                break;\n              case 'readwrite':\n                mode = 1 | 2;\n                break;\n            }\n            let variantInfo = cv.parser.pure.widgets.ColorChooser.makeAddressListFn(src, transform, mode, elem.getAttribute('variant'));\n            addresses[src.trim()] = {\n              transform: transform,\n              mode: mode,\n              variantInfo: variantInfo[1]\n            };\n          }\n          cv.ui.structure.tile.components.Color.CC_COUNTER++;\n          const path = 'id_0_'+cv.ui.structure.tile.components.Color.CC_COUNTER;\n          const props = {\n            path: path,\n            $$type: 'colorchooser',\n            classes: 'widget colorchooser',\n            layout: {\n              colspan: 1\n            },\n            controls: element.hasAttribute('controls') ? element.getAttribute('controls') : 'triangle',\n            address: addresses,\n            throttleInterval: this.getThrottleInterval()\n          };\n          cv.parser.pure.widgets.ColorChooser.parseAttributes(element, props);\n          this.__colorChooser = new cv.ui.structure.pure.ColorChooser(props);\n          this.__colorChooser.addListener('colorChanged', this._onColorChanged, this);\n          this._onColorChanged();\n          popup.innerHTML = `<div class=\"widget_container\" style=\"margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center\" id=\"${path}\" data-type=\"colorchooser\">${this.__colorChooser.getDomString()}</div>`;\n          element.appendChild(popup);\n          element.addEventListener('click', ev => {\n            const path = ev.path || (ev.composedPath && ev.composedPath());\n            if (path && path.indexOf(popup) < 0) {\n              popup.getInstance().open();\n            }\n          });\n          qx.event.Timer.once(() => {\n            this.__colorChooser._onDomReady();\n          }, this, 0);\n\n          this.setResizeTarget(popup);\n          this.addListener('resized', () => {\n            this.__colorChooser.invalidateScreensize();\n          });\n        }\n      }\n    },\n\n    _onColorChanged() {\n      const color = this.__colorChooser.getColor();\n      const rgb = color.getComponent('rgb');\n      const v = color.getComponent('v');\n      this.setValue(\n        `#${this.__convertToHex(rgb.r)}${this.__convertToHex(rgb.g)}${this.__convertToHex(rgb.b)}${this.__convertToHex(v)}`\n      );\n    },\n\n    __convertToHex(v) {\n      return Math.round(v * 255)\n        .toString(16)\n        .padStart(2, '0');\n    },\n\n    _updateValue(mappedValue, value) {\n      let target = this._element.querySelector(':scope > .value');\n      const rgb = mappedValue.substring(0, 7);\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        const alpha = mappedValue.length === 9 ? parseInt(mappedValue.substring(7, 9), 16) / 255 : 1.0;\n\n        switch (tagName) {\n          case 'cv-icon':\n            target.style.color = rgb;\n            target.style.opacity = Math.max(alpha, 0.2); // do not blend it out totally\n            break;\n        }\n      } else {\n        // only if we do not have another value handler\n        this._element.style.backgroundColor = mappedValue;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._disposeObjects('__colorChooser');\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'color',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Mixin for SVG elements that provide a grid layout.\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Mixin.define('cv.ui.structure.tile.components.svg.MSvgGrid', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._cells = {};\n    this._isLayoutValid = true;\n    this.debouncedLayoutAll = qx.module.util.Function.debounce(this._layoutAll.bind(this), 100);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    rows: {\n      check: 'Number',\n      init: 3,\n      event: 'changeRows',\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    columns: {\n      check: 'Number',\n      init: 3,\n      event: 'changeColumns',\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    outerPadding: {\n      check: 'Number',\n      event: 'changeOuterPadding',\n      init: 4,\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    spacing: {\n      check: 'Number',\n      init: 8,\n      event: 'changeSpacing',\n      apply: '_invalidateLayout',\n      transform: '__toInt'\n    },\n\n    cellWidth: {\n      check: 'Number',\n      init: 56,\n      apply: '_invalidateLayout',\n      event: 'changeSize',\n      transform: '__toInt'\n    },\n\n    cellHeight: {\n      check: 'Number',\n      init: 56,\n      apply: '_invalidateLayout',\n      event: 'changeSize',\n      transform: '__toInt'\n    },\n\n    viewBox: {\n      check: 'String',\n      nullable: true,\n      event: 'changeViewBox'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _cells: null,\n    _isLayoutValid: null,\n\n    __toInt(value) {\n      if (typeof value === 'string') {\n        return parseInt(value);\n      }\n      return value;\n    },\n\n    _invalidateLayout() {\n      this._isLayoutValid = false;\n      this.debouncedLayoutAll();\n    },\n\n    _layoutAll() {\n      this.debug('re-layout all items');\n      for (const cellId in this._cells) {\n        const position = cellId.split('-').map(i => parseFloat(i));\n        this.layout(this._cells[cellId], position[0], position[1], true);\n      }\n      this._isLayoutValid = true;\n    },\n\n    /**\n     * Returns the number of cells in this grid\n     * @returns {number}\n     */\n    getCells() {\n      return this.getRows() * this.getColumns();\n    },\n\n    /**\n     * Add a SVGElement to a cell in the grid.\n     * @param element {SVGGraphicsElement} element to place\n     * @param row {number} row number (-1 to find next free row)\n     * @param column {number} column cumber (-1 to use next free cell)\n     * @param replace {boolean} it true replace current item in cell, otherwise the element will not be added when the cell is not empty\n     * @param retries {number} internal value used to limit layout retries for one element. Do not set this externally!\n     */\n    layout(element, row = -1, column = -1, replace = false, retries = 0) {\n      if (row === -1 || column === -1) {\n        const [r, c] = this.getNextFreeCell(row, column);\n        if (r === -1 || c === -1) {\n          this.error('no next free cell found, element could not be placed');\n          return;\n        }\n        row = r;\n        column = c;\n      }\n      const cellId = row + '-' + column;\n      if (this._cells[cellId] && !replace) {\n        this.error(`cell ${row}/${column} is not empty`);\n        return;\n      }\n\n      // remove old positions\n      for (const id of Object.keys(this._cells)) {\n        if (id !== cellId && this._cells[id] === element) {\n          delete this._cells[id];\n        }\n      }\n      let x = this.getOuterPadding() + column * this.getSpacing() + column * this.getCellWidth();\n      let y  = this.getOuterPadding() + row * this.getSpacing() + row * this.getCellHeight();\n      element.setAttribute('x', `${x}`);\n      element.setAttribute('y', `${y}`);\n      this._cells[cellId] = element;\n    },\n\n    getNextFreeCell(row, column) {\n      let cellId;\n      if (row === -1 && column === -1) {\n        for (let r = 0; r < this.getRows(); r++) {\n          for (let c = 0; c < this.getColumns(); c++) {\n            cellId = r + '-' + c;\n            if (!this._cells[cellId]) {\n              return [r,  c];\n            }\n          }\n        }\n      } else if (row === -1) {\n        for (let r = 0; r < this.getRows(); r++) {\n          cellId = r + '-' + column;\n          if (!this._cells[cellId]) {\n            return [r, column];\n          }\n        }\n      } else if (column === -1) {\n        for (let c = 0; c < this.getColumns(); c++) {\n          cellId = row + '-' + c;\n          if (!this._cells[cellId]) {\n            return [row, column];\n          }\n        }\n      } else {\n        let startCell = row * this.getColumns() + column;\n        let r;\n        let c;\n        for (let i = startCell; i < this.getCells(); i++) {\n          r = Math.floor(i / this.getColumns());\n          c = i % this.getColumns();\n          cellId = r + '-' + c;\n          if (!this._cells[cellId]) {\n            return [r,  c];\n          }\n        }\n      }\n      return [row, column];\n    }\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Flow management widget.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2023\n *\n * @ignore(d3.select)\n * @ignore(screen)\n * @ignore(SVGElement)\n */\nqx.Class.define('cv.ui.structure.tile.components.Flow', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.components.svg.MSvgGrid,\n    cv.ui.structure.tile.MResize,\n    cv.ui.structure.tile.MStringTransforms,\n    cv.ui.structure.tile.MFullscreen\n  ],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    pan: {\n      check: 'Boolean',\n      init: false,\n      transform: '_stringToBool',\n      apply: '_applyPan'\n    },\n\n    pagination: {\n      check: ['none', 'horizontal', 'vertical', 'both'],\n      init: 'none',\n      apply: '_applyPagination'\n    },\n\n    centerX: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCenterX',\n      transform: '_parseBoolean'\n    },\n\n    centerY: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCenterY',\n      transform: '_parseBoolean'\n    },\n\n    fullscreenViewBox: {\n      check: 'String',\n      nullable: true,\n      event: 'changeFullscreenViewBox'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    SVG: null,\n    _dragPoint: null,\n    _startPoint: null,\n    _expiredTouchStart: null,\n    _viewBoxBinding: null,\n    _lastBBox: null,\n    _additionalViewBoxUpdate: null,\n    _ready: null,\n\n    getSvg() {\n      if (!this.SVG) {\n        this.SVG = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this._element.appendChild(this.SVG);\n      }\n      return this.SVG;\n    },\n\n    _init() {\n      super._init();\n      this.getSvg();\n\n      this.setResizeTarget(this._element);\n      this._observer.observe(this.SVG);\n      this.addListener('resized', this._updateDimensions, this);\n      for (const layoutEvent of ['changeRows', 'changeColumns', 'changeOuterPadding', 'changeSpacing']) {\n        this.addListener(layoutEvent, this._updateCellSize, this);\n      }\n\n      let title = this.getHeader('label.title');\n      const element = this._element;\n      if (element.hasAttribute('title') && !title) {\n        title = document.createElement('label');\n        title.classList.add('title');\n        let span = document.createElement('span');\n        title.appendChild(span);\n        span.textContent = element.getAttribute('title');\n        this.appendToHeader(title);\n      }\n\n      if (element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        this._initFullscreenSwitch();\n        this.addListener('changeFullscreen', ev => {\n          if (ev.getData()) {\n            if (!this._viewBoxBinding) {\n              this._viewBoxBinding = this.bind('fullscreenViewBox', this, 'viewBox');\n            }\n          } else if (this._viewBoxBinding) {\n            this.removeBinding(this._viewBoxBinding);\n            this._viewBoxBinding = null;\n\n            // restore old value\n            if (this._element.hasAttribute('view-box')) {\n              this.setViewBox(this._element.getAttribute('view-box'));\n            } else {\n              this.resetViewBox();\n            }\n          }\n          this._updateDimensions();\n        });\n      }\n\n      this.addListener('changeViewBox', this._updateViewBox, this);\n      window.requestAnimationFrame(() => this._updateViewBox());\n      if (this.getPan()) {\n        this._applyPan(true);\n      }\n      this._applyPagination(this.getPagination());\n\n      if (element.querySelectorAll(':scope > cv-power-entity:not([type=\"house\"]), :scope > cv-svg-round-value').length === 0) {\n        // remove the house\n        const house = element.querySelector(':scope > cv-power-entity[type=\"house\"]');\n        if (house) {\n          house.remove();\n        }\n      }\n\n      // make sure that the initial setup viewBox changes are not animated\n      setTimeout(() => {\n        this._ready = true;\n        this._center();\n      }, 2000);\n    },\n\n    _applyCenterX(value) {\n      if (value) {\n        this.__applyCenter('row', this.getRows());\n      }\n    },\n\n    _applyCenterY(value) {\n      if (value) {\n        this.__applyCenter('column', this.getColumns());\n      }\n    },\n\n    __applyCenter(selector, total) {\n      // do not center the middle one(s)\n      let skip = [];\n      if (total > 2) {\n        if (total % 2 > 0) {\n          skip.push(Math.floor(total / 2));\n        } else {\n          skip.push((total / 2) - 1);\n          skip.push(total / 2);\n        }\n      }\n      for (let i = 0; i < total; i++) {\n        if (!skip.includes(i)) {\n          if (selector === 'row') {\n            this.__adjustRow(this._element.querySelectorAll(`:scope > *[row=\"${i}\"]`));\n          } else {\n            this.__adjustColumn(this._element.querySelectorAll(`:scope > *[column=\"${i}\"]`));\n          }\n        }\n      }\n    },\n\n    __adjustRow(rowElements) {\n      if (rowElements.length === 1) {\n        rowElements[0].setAttribute('column', '1');\n      } else if (rowElements.length === 2) {\n        const sorted = Array.from(rowElements);\n        sorted.sort((a, b) => parseFloat(a.getAttribute('column')) - parseFloat(b.getAttribute('column')));\n        sorted[0].setAttribute('column', '0.5');\n        sorted[1].setAttribute('column', '1.5');\n      }\n    },\n\n    __adjustColumn(columnElements) {\n      if (columnElements.length === 1) {\n        columnElements[0].setAttribute('row', '1');\n      } else if (columnElements.length === 2) {\n        const sorted = Array.from(columnElements);\n        sorted.sort((a, b) => parseFloat(a.getAttribute('row')) - parseFloat(b.getAttribute('row')));\n        sorted[0].setAttribute('row', '0.5');\n        sorted[1].setAttribute('row', '1.5');\n      }\n    },\n\n    _drag(ev) {\n      ev.preventDefault();\n      ev.stopImmediatePropagation();\n      const CTM = this.SVG.getScreenCTM().inverse();\n      this._dragPoint.x = ev.clientX;\n      this._dragPoint.y = ev.clientY;\n      this._dragPoint = this._dragPoint.matrixTransform(CTM);\n      this.SVG.viewBox.baseVal.x -= this._dragPoint.x - this._startPoint.x;\n      this.SVG.viewBox.baseVal.y -= this._dragPoint.y - this._startPoint.y;\n    },\n\n    _cancelEvent(ev) {\n      ev.preventDefault();\n      ev.stopImmediatePropagation();\n    },\n\n    _startDrag(ev) {\n      if (typeof this.drag !== 'function') {\n        this.drag = this._drag.bind(this);\n      }\n      this._element.addEventListener('pointermove', this.drag);\n      this._element.addEventListener('touchmove', this._cancelEvent);\n\n      const CTM = this.SVG.getScreenCTM().inverse();\n      this._dragPoint.x = ev.clientX;\n      this._dragPoint.y = ev.clientY;\n      this._startPoint = this._dragPoint.matrixTransform(CTM);\n    },\n\n    _endDrag(ev) {\n      this._element.removeEventListener('pointermove', this.drag);\n      this._element.removeEventListener('touchmove', this._cancelEvent);\n    },\n\n    _touchStart(ev) {\n      if (ev.touches.length === 1) {\n        if (!this._expiredTouchStart) {\n          this._expiredTouchStart = ev.timeStamp + 400;\n        } else if (ev.timeStamp <= this._expiredTouchStart) {\n          // remove the default of this event ( Zoom )\n          //ev.preventDefault()\n          this.resetDrag();\n          // then reset the variable for other \"double Touches\" event\n          this._expiredTouchStart = null;\n        } else {\n          // if the second touch was expired, make it as it's the first\n          this._expiredTouchStart = ev.timeStamp + 400;\n        }\n      }\n      ev.preventDefault();\n    },\n\n    _applyPan(draggable) {\n      if (this.SVG) {\n        if (draggable) {\n          this._dragPoint = this.SVG.createSVGPoint();\n\n          if (typeof this.startDrag !== 'function') {\n            this.startDrag = this._startDrag.bind(this);\n          }\n          if (typeof this.endDrag !== 'function') {\n            this.endDrag = this._endDrag.bind(this);\n          }\n          if (typeof this.resetDrag !== 'function') {\n            this.resetDrag = this._updateViewBox.bind(this);\n          }\n          if (typeof this.touchStart !== 'function') {\n            this.touchStart = this._touchStart.bind(this);\n          }\n\n          this._element.addEventListener('pointerdown', this.startDrag);\n          this._element.addEventListener('pointerup', this.endDrag);\n          this._element.addEventListener('pointerleave', this.endDrag);\n          this._element.addEventListener('pointercancel', this.endDrag);\n          this._element.addEventListener('dblclick', this.resetDrag);\n          this._element.addEventListener('touchstart', this.touchStart);\n        } else {\n          this._element.removeEventListener('pointerdown', this.startDrag);\n          this._element.removeEventListener('pointerup', this.endDrag);\n          this._element.removeEventListener('pointerleave', this.endDrag);\n          this._element.removeEventListener('pointercancel', this.endDrag);\n          this._element.removeEventListener('dblclick', this.resetDrag);\n          this._element.removeEventListener('touchstart', this.touchStart);\n        }\n      }\n    },\n\n    _applyPagination(value) {\n      const showH = value === 'both' || value === 'horizontal';\n      const showV = value === 'both' || value === 'vertical';\n      const addButtons = [];\n      const removeButtons = [];\n      if (showH) {\n        addButtons.push('left');\n        addButtons.push('right');\n      } else {\n        removeButtons.push('left');\n        removeButtons.push('right');\n      }\n      if (showV) {\n        addButtons.push('top');\n        addButtons.push('bottom');\n      } else {\n        removeButtons.push('top');\n        removeButtons.push('bottom');\n      }\n      for (const dir of addButtons) {\n        let button = this._element.querySelector(`div.pagination.${dir}`);\n        if (!button) {\n          button = document.createElement('div');\n          button.classList.add('pagination', dir);\n          this._element.appendChild(button);\n        }\n      }\n\n      for (const dir of removeButtons) {\n        let button = this._element.querySelector(`div.pagination.${dir}`);\n        if (button) {\n          button.remove();\n        }\n      }\n\n      this._updatePaginationButtons();\n    },\n\n    _enablePaginationButton(button, dir, enabled) {\n      let callback;\n      switch (dir) {\n        case 'left':\n          callback = this._paginateLeft;\n          break;\n\n        case 'right':\n          callback = this._paginateRight;\n          break;\n\n        case 'top':\n          callback = this._paginateTop;\n          break;\n\n        case 'bottom':\n          callback = this._paginateBottom;\n          break;\n      }\n      if (enabled) {\n        button.classList.add('clickable');\n        qx.event.Registration.addListener(button, 'tap', callback, this);\n      } else {\n        if (button.classList.contains('clickable')) {\n          button.classList.remove('clickable');\n        }\n        qx.event.Registration.removeListener(button, 'tap', callback, this);\n      }\n    },\n\n    _updatePaginationButtons() {\n      let [column, row, width, height] = this.getViewBox().split(' ').map(v => parseInt(v));\n      for (const dir of ['top', 'bottom', 'left', 'right']) {\n        const button = this._element.querySelector(`div.pagination.${dir}`);\n        if (!button) {\n          continue;\n        }\n        switch (dir) {\n          case 'left':\n            this._enablePaginationButton(button, dir, column - width >= 0);\n            break;\n\n          case 'right':\n            this._enablePaginationButton(button, dir, column+width < this.getColumns());\n            break;\n\n          case 'top':\n            this._enablePaginationButton(button, dir, row - height >= 0);\n            break;\n\n          case 'bottom':\n            this._enablePaginationButton(button, dir, row + height < this.getRows());\n            break;\n        }\n      }\n    },\n\n    _paginateLeft() {\n      this._paginate('left');\n    },\n\n    _paginateRight() {\n      this._paginate('right');\n    },\n\n    _paginateTop() {\n      this._paginate('top');\n    },\n\n    _paginateBottom() {\n      this._paginate('bottom');\n    },\n\n    _paginate(direction) {\n      let [column, row, width, height] = this.getViewBox().split(' ').map(v => parseInt(v));\n      switch (direction) {\n        case 'left':\n          if (column - width >= 0) {\n            column -= width;\n          }\n          break;\n\n        case 'right':\n          if (column+width < this.getColumns()) {\n            column += width;\n          }\n          break;\n\n        case 'top':\n          if (row - height >= 0) {\n            row -= height;\n          }\n          break;\n\n        case 'bottom':\n          if (row + height < this.getRows()) {\n            row += height;\n          }\n      }\n      this._element.setAttribute('view-box', `${column} ${row} ${width} ${height}`);\n    },\n\n    _updateDimensions(ev) {\n      if (ev) {\n        const entry = ev.getData();\n        if (entry.contentBoxSize) {\n          if (entry.target instanceof SVGElement) {\n            this._center(entry.contentRect.width, entry.contentRect.height);\n            return;\n          }\n        }\n      }\n      const isFullscreen = this.isFullscreen();\n      if (isFullscreen) {\n        const minSize = Math.min(screen.availHeight, screen.availWidth);\n        if (minSize > 600) {\n          this.setOuterPadding(16);\n          this.setSpacing(32);\n        } else if (minSize >= 400) {\n          this.setOuterPadding(16);\n          this.setSpacing(26);\n        }\n        // set fixed height\n        let height = 0;\n        if (screen.availHeight > screen.availWidth) {\n          const bbox = this.SVG.getBBox();\n          height = Math.min(screen.availHeight, Math.max(bbox.height, this.getRows() * 100));\n        } else {\n          height = screen.availHeight;\n        }\n        if (this._tileElement) {\n          this._tileElement.style.height = `${height}px`;\n        }\n      } else {\n        if (this._tileElement) {\n          this._tileElement.style.height = 'unset';\n        }\n        if (this._element.hasAttribute('outer-padding')) {\n          this.setOuterPadding(this._element.getAttribute('outer-padding'));\n        } else {\n          this.resetOuterPadding();\n        }\n        if (this._element.hasAttribute('spacing')) {\n          this.setSpacing(this._element.getAttribute('spacing'));\n        } else {\n          this.resetSpacing();\n        }\n      }\n      window.requestAnimationFrame(() => this._updateCellSize());\n    },\n\n    _updateViewBox() {\n      const viewBox = this.getViewBox();\n      if (viewBox) {\n        const parts = viewBox.split(' ').map(v => parseInt(v));\n        if (parts.length === 4) {\n          this._updatePaginationButtons();\n          const totalOuterPadding = this.getOuterPadding() * 2;\n          const x = this.getCellWidth() * parts[0] + (parts[0] > 1 ? (parts[0]-1) * this.getSpacing() : 0);\n          const y = this.getCellHeight() * parts[1] + (parts[1] > 1 ? (parts[1]-1) * this.getSpacing() : 0);\n          const width = totalOuterPadding + this.getCellWidth() * parts[2] + (parts[2] > 1 ? (parts[2]-1) * this.getSpacing() : 0);\n          const height = totalOuterPadding + this.getCellHeight() * parts[3] + (parts[3] > 1 ? (parts[3]-1) * this.getSpacing() : 0);\n\n          if (this._ready && typeof window.d3 === 'object') {\n            const svg = d3.select(this._element).select('svg');\n            svg.transition()\n              .duration(500)\n              .attr('viewBox', `${x} ${y} ${width} ${height}`);\n            setTimeout(() => this._center(), 510);\n          } else {\n            this.SVG.setAttribute('viewBox', `${x} ${y} ${width} ${height}`);\n            setTimeout(() => this._center(), 10);\n          }\n        }\n      } else {\n        this.SVG.removeAttribute('viewBox');\n      }\n    },\n\n    _center(width, height) {\n      if (this.SVG && this._ready) {\n        const bbox = this.SVG.getBBox();\n        if (this._lastBBox && (this._lastBBox.width === bbox.width && this._lastBBox.height === bbox.height)) {\n          // no change\n          return;\n        }\n        if (!width || !height) {\n          const parts = this.SVG.hasAttribute('viewBox') ? this.SVG.getAttribute('viewBox').split(' ').map(v => parseInt(v)) : [];\n          if (parts.length === 4) {\n            width = parts[2];\n            height = parts[3];\n          } else {\n            return;\n          }\n        }\n\n        const totalOuterPadding = this.getOuterPadding() * 2;\n        let visibleColumns = this.getColumns();\n        let visibleRows = this.getRows();\n        const gridViewBox = this.getViewBox();\n        let firstColumn = 0;\n        let lastColumn = 2;\n        let firstRow = 0;\n        let lastRow = 2;\n        if (gridViewBox) {\n          const gridParts = gridViewBox.split(' ').map(s => parseInt(s));\n          visibleColumns = gridParts[2] - gridParts[0];\n          visibleRows = gridParts[3] - gridParts[1];\n          firstColumn = gridParts[0];\n          lastColumn = firstColumn + gridParts[2] - 1;\n          firstRow = gridParts[1];\n          lastRow = firstRow + gridParts[3] - 1;\n        }\n        let usedColumns = 3;\n        let usedRows = 3;\n        let col;\n        let row;\n        for (const elem of this._element.querySelectorAll('*[column]')) {\n          col = parseInt(elem.getAttribute('column')) + 1;\n          if (firstColumn <= col && lastColumn > col && col > usedColumns) {\n            usedColumns = col;\n          }\n        }\n        for (const elem of this._element.querySelectorAll('*[row]')) {\n          row = parseInt(elem.getAttribute('row')) + 1;\n          if (firstRow <= col && lastRow > row && row > usedRows) {\n            usedRows = row;\n          }\n        }\n\n        const visibleWidth = usedColumns > visibleColumns ? visibleColumns / this.getColumns() : 1.0;\n        const visibleHeight = usedRows > visibleRows ? visibleRows / this.getRows() : 1.0;\n\n        const heightDiff = height - totalOuterPadding - bbox.height * visibleHeight;\n        const widthDiff = width - totalOuterPadding - bbox.width * visibleWidth;\n        if (heightDiff > 0 || widthDiff > 0) {\n          this.SVG.setAttribute('transform', `translate(${Math.max(0, widthDiff / 2)}, ${Math.max(0, heightDiff / 2)})`);\n        } else {\n          this.SVG.removeAttribute('transform');\n        }\n        this._lastBBox = bbox;\n        window.requestAnimationFrame(() => this._center());\n      }\n    },\n\n    _updateCellSize() {\n      if (this._element.clientWidth === 0 || this._element.clientHeight === 0) {\n        return;\n      }\n      let visibleColumns = this.getColumns();\n      let visibleRows = this.getRows();\n      const viewBox = this.getViewBox();\n      if (viewBox) {\n        const box = viewBox.split(' ').map(v => parseInt(v));\n        visibleColumns = box[2];\n        visibleRows = box[3];\n      }\n      const padding = this.getOuterPadding() * 2;\n      const spacing = this.getSpacing() / 2;\n      const cellWidth = Math.floor((this._element.clientWidth - padding) / visibleColumns - spacing);\n      const cellHeight = Math.floor((this._element.clientHeight - padding) / visibleRows - spacing);\n      this.debug('cellWidth', cellWidth, 'cellHeight', cellHeight);\n      const changed = this.getCellWidth() !== cellWidth || this.getCellHeight() !== cellHeight;\n      this.setCellWidth(cellWidth);\n      this.setCellHeight(cellHeight);\n      if (changed) {\n        window.requestAnimationFrame(() => {\n          this._updateViewBox();\n        });\n      }\n    },\n\n    _stringToBool(value) {\n      if (typeof value === 'string') {\n        return value === 'true';\n      } else if (value === null || value === undefined) {\n        return false;\n      }\n      return value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'flow',\n      class extends QxConnector {\n        // @ignore\n        static observedAttributes = ['view-box', 'fullscreen-view-box', 'pan', 'rows', 'columns', 'cell-width', 'cell-height', 'outer-padding', 'spacing', 'pagination', 'center-x', 'center-y'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Icon.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.components.Icon', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._idRegex = /^[^\\s]+$/;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyId',\n      // the id is used as 'class' property and therefore must not have spaces\n      transform: '_transformId'\n    },\n\n    color: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __initialized: false,\n    _idRegex: null,\n\n    _transformId(value) {\n      if (this._idRegex.test(value)) {\n        return value;\n      }\n      this.error('invalid icon id:', value);\n      return null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.textContent.trim()) {\n        this.__initialized = true;\n        this.setId(element.textContent.trim());\n      } else {\n        const it = element.classList.values();\n        for (let name of it) {\n          if (name.startsWith('ri-') || name.startsWith('knxuf-')) {\n            this.setId(name);\n            break;\n          }\n        }\n      }\n      this.__initialized = true;\n    },\n\n    _applyId(value, oldValue) {\n      const element = this._element;\n      if (this.__initialized) {\n        if (oldValue) {\n          element.classList.remove(oldValue);\n        }\n        if (value) {\n          // default is an icon font that uses CSS classes\n          element.classList.add(value);\n          if (element.textContent) {\n            element.textContent = '';\n          }\n        }\n      }\n    },\n\n    _applyColor(value, oldValue) {\n      const element = this._element;\n      if (oldValue) {\n        element.classList.remove(oldValue);\n      }\n      if (value) {\n        if (value.startsWith('#') || value.startsWith('rgb')) {\n          element.style.color = value;\n        } else {\n          element.classList.add(value);\n        }\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'icon',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n\n        static get observedAttributes() {\n          return ['color'];\n        }\n      }\n    );\n  }\n});\n","/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an image.\n *\n * HINT: Proxy mode needs an PHP environment with php-curl installed.\n */\nqx.Class.define('cv.ui.structure.tile.components.Image', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n\n    _init() {\n      const element = this._element;\n      let img = element.querySelector(':scope > img');\n      if (!img) {\n        img = document.createElement('img');\n        element.appendChild(img);\n      }\n      element.addEventListener('click', () => this.refresh());\n      let src = element.getAttribute('src');\n      let base = window.location.origin;\n      if (src.substring(0, 1) !== '/' && src.substring(0, 4) !== 'http') {\n        // relative url\n        base += window.location.pathname;\n      }\n      this._url = new URL(src, base);\n      const useProxy = element.hasAttribute('proxy') && element.getAttribute('proxy') === 'true';\n      if (useProxy) {\n        this._url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n\n        this._url.searchParams.set('url', element.getAttribute('src'));\n      }\n      this._headers = {};\n      if (element.hasAttribute('auth-type')) {\n        if (useProxy) {\n          this._url.searchParams.set('auth-type', element.getAttribute('auth-type').toLowerCase());\n        } else {\n          switch (element.getAttribute('auth-type').toLowerCase()) {\n            case 'basic':\n              this._headers['Authorization'] = 'Basic ' + window.btoa(element.getAttribute('username') + ':' + element.getAttribute('password'));\n              break;\n\n            case 'bearer':\n              this._headers['Authorization'] = 'Bearer ' + element.getAttribute('username');\n              break;\n\n            default:\n              this.error('unknown authorization type' +  element.getAttribute('auth-type'));\n              break;\n          }\n        }\n      }\n      this._loadImage();\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n    },\n\n    _loadImage() {\n      let img = this._element.querySelector(':scope > img');\n      if (Object.keys(this._headers).length > 0) {\n        let request = new XMLHttpRequest();\n        request.responseType = 'blob';\n        request.open('get', this._url.toString(), true);\n        Object.keys(this._headers).forEach(name => {\n          request.setRequestHeader(name, this._headers[name]);\n        });\n        request.onreadystatechange = e => {\n          if (request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            img.src = URL.createObjectURL(request.response);\n            img.onload = () => {\n              URL.revokeObjectURL(img.src);\n            };\n          }\n        };\n        request.send(null);\n      } else {\n        img.src = this._url.toString();\n      }\n    },\n\n    refresh() {\n      let img = this._element.querySelector(':scope > img');\n      if (img) {\n        this._url.searchParams.set('r', '' + Math.random());\n        this._loadImage();\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'refresh') {\n          if (ev.detail.state) {\n            this.refresh();\n          }\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'image',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* List.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a list of items. A &lt;template&gt;-element defines the content of the list-items and a model is used to\n * generate those items and apply the models content to the list-items.\n * It allows custom Javascript code in a &lt;script&gt;-Element to fill the model or address-Elements as model source.\n * The model can be refreshed in a time defined interval, which is set by the 'refresh' attribute.\n *\n * @widgetexample <settings>\n *    <caption>Example list</caption>\n *    <screenshot name=\"list_simple\"/>\n *  </settings>\n    <cv-list refresh=\"10\">\n      <model>\n        <script><![CDATA[\n         for (let i = 0; i < Math.round(Math.random()*10); i++) {\n           model.push({\n             label: 'This is list item no ' + i,\n             subLabel: 'Sublabel number ' + i\n           })\n         }\n         ]]>\n         </script>\n       </model>\n       <template>\n         <li>\n           <label class=\"primary\">${label}</label>\n           <label class=\"secondary\">${subLabel}</label>\n         </li>\n       </template>\n       <template when=\"empty\">\n         <li>\n           <label class=\"primary\">Model is empty!</label>\n         </li>\n       </template>\n   </cv-list>\n */\nqx.Class.define('cv.ui.structure.tile.components.List', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.MVisibility,\n    cv.ui.structure.tile.MRefresh,\n    cv.ui.structure.tile.MFullscreen\n  ],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      refine: true,\n      init: []\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _timer: null,\n    _model: null,\n    _getModel: null,\n    _filterModel: null,\n    _sortModel: null,\n    _limit: null,\n    _modelInstance: null,\n\n    _init() {\n      this._checkEnvironment();\n      const element = this._element;\n      this._model = [];\n      let refreshOnUpdate = false;\n      const model = element.querySelector('model');\n      if (element.parentElement) {\n        element.parentElement.classList.add('has-list');\n      }\n      if (!model) {\n        this.error('cv-list needs a model');\n        return;\n      }\n      if (model.hasAttribute('filter')) {\n        this._filterModel = new Function('item', 'index', '\"use strict\"; return ' + model.getAttribute('filter'));\n      }\n      if (model.hasAttribute('limit')) {\n        this._limit = parseInt(model.getAttribute('limit'));\n      }\n      const readAddresses = model.querySelectorAll(':scope > cv-address:not([mode=\"write\"])');\n\n      // if we have top level write addresses, we need to listen to sendState Events from the list items\n      for (let address of element.querySelectorAll(':scope > cv-address')) {\n        if (address.getAttribute('mode') !== 'read') {\n          element.addEventListener('sendState', ev => {\n            // forward event copy (dispatching the same is not possible) to all write addresses\n            const evCopy = new CustomEvent('sendState', {\n              bubbles: ev.bubbles,\n              cancelable: ev.cancelable,\n              detail: ev.detail\n            });\n            for (let a of element.querySelectorAll(':scope > cv-address')) {\n              a.dispatchEvent(evCopy);\n            }\n          });\n          break;\n        }\n      }\n\n      if (model.hasAttribute('sort-by')) {\n        const sortBy = model.getAttribute('sort-by');\n        // reverse order in 'desc' sort mode\n        const sortModifier = model.getAttribute('sort-mode') === 'desc' ? -1 : 1;\n        this._sortModel = (left, right) => {\n          const leftVal = left[sortBy];\n          const rightVal = right[sortBy];\n          if (leftVal === rightVal) {\n            return 0;\n          } else if (typeof leftVal === typeof rightVal) {\n            switch (typeof leftVal) {\n              case 'number':\n                return (leftVal - rightVal) * sortModifier;\n\n              case 'boolean':\n                return (leftVal ? -1 : 1) * sortModifier;\n\n              case 'string':\n                return leftVal.localeCompare(rightVal) * sortModifier;\n\n              default:\n                return JSON.stringify(leftVal).localeCompare(JSON.stringify(rightVal)) * sortModifier;\n            }\n          } else if (leftVal === undefined || leftVal === null) {\n            return 1 * sortModifier;\n          } else if (rightVal === undefined || rightVal === null) {\n            return -1 * sortModifier;\n          }\n          return 0;\n        };\n      }\n      if (model.hasAttribute('src') || model.hasAttribute('config-section')) {\n        // fetch from url\n        this._getModel = async () => {\n          const options = {\n            ttl: this.getRefresh()\n          };\n          for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n            if (model.hasAttribute(proxyParam)) {\n              options[proxyParam] = model.getAttribute(proxyParam);\n            }\n          }\n          const res = await cv.io.Fetch.cachedFetch(model.getAttribute('src'), options, model.getAttribute('proxy') === 'true');\n          return res;\n        };\n      } else if (model.hasAttribute('class')) {\n        // initialize internal class instance that implements cv.io.listmodel.IListModel\n        const Clazz = cv.io.listmodel.Registry.get(model.getAttribute('class'));\n        if (Clazz) {\n          const modelInstance = this._modelInstance = new Clazz();\n          modelInstance.addListener('refresh', () => this.refresh());\n          if (model.hasAttribute('parameters')) {\n            const props = {};\n            for (let entry of model.getAttribute('parameters').split(',')) {\n              const [name, value] = entry.split('=').map(n => n.trim());\n              props[name] = value.startsWith('\\'') ? value.substring(1, value.length-1) : value;\n            }\n            modelInstance.set(props);\n          }\n          this._getModel = async () => {\n            await modelInstance.refresh();\n            return modelInstance.getModel();\n          };\n        } else {\n          this.error(`clazz \"cv.io.listmodel.${model.getAttribute('class')}\" not found`);\n        }\n      } else {\n        const script = model.querySelector(':scope > script');\n        const data = model.querySelectorAll(':scope > cv-data');\n        if (script) {\n          this._getModel = new Function('\"use strict\";let model = []; ' + script.innerText.trim() + '; return model');\n\n          this._model = this._getModel();\n        } else if (readAddresses.length > 0) {\n          // model has an address that triggers a refresh on update, so we just have to read the model from the updated value\n          this._getModel = this.getValue;\n          refreshOnUpdate = true;\n        } else if (data.length > 0) {\n          this._model = [];\n          this._getModel = () => this._model;\n          data.forEach((elem, i) => {\n            const d = {\n              index: i\n            };\n\n            for (const a of elem.attributes) {\n              d[a.name] = a.value;\n            }\n            this._model.push(d);\n          });\n        } else {\n          this.error(\n            'cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.'\n          );\n\n          return;\n        }\n      }\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => this.onStateUpdate(ev));\n      }\n      if (!refreshOnUpdate) {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        }\n        if (element.hasAttribute('refresh')) {\n          this.setRefresh(parseInt(element.getAttribute('refresh')));\n        }\n      }\n\n      this._element.addEventListener('click', ev => {\n        let templateRoot = ev.target;\n        let data = {};\n        const collectData = elem => {\n          if (elem) {\n            for (let i = 0; i < elem.attributes.length; i++) {\n              let attrib = elem.attributes[i];\n              if (attrib.name.startsWith('data-')) {\n                data[attrib.name.substring(5)] = attrib.value;\n              }\n            }\n          }\n        };\n        collectData(templateRoot);\n        let level = 0;\n        let model = templateRoot.$$model;\n        while (templateRoot && (!model || !data.action) && level <= 5) {\n          templateRoot = templateRoot.parentElement;\n          if (templateRoot === this._element) {\n            break;\n          }\n          if (templateRoot) {\n            if (!model && templateRoot.$$model) {\n              model = templateRoot.$$model;\n            }\n            if (!data.action && templateRoot.hasAttribute('data-action')) {\n              collectData(templateRoot);\n            }\n          }\n          level++;\n        }\n\n        if (data.action && this._modelInstance && this._modelInstance.handleEvent(ev, data, model)) {\n          ev.stopPropagation();\n        }\n      });\n\n      if (element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        this._initFullscreenSwitch();\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'refresh') {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        } else {\n          // reset lastRefresh to that the refresh get called when this item gets visible\n          this._lastRefresh = null;\n        }\n      } else {\n        super.onStateUpdate(ev);\n      }\n      // cancel event here\n      ev.stopPropagation();\n    },\n\n    _applyValue() {\n      // reset last refresh, because with new data its obsolete\n      this._lastRefresh = 0;\n      this.refresh();\n    },\n\n    async refresh() {\n      const element = this._element;\n      const template = element.querySelector(':scope > template:not([when])');\n      let newModel = [];\n      if (typeof this._getModel === 'function') {\n        newModel = this._getModel();\n      }\n      if (newModel instanceof Promise) {\n        try {\n          newModel = await newModel;\n        } catch (e) {\n          this.error('error refreshing async model:', e);\n        }\n      }\n      let target = element.querySelector(':scope > ul');\n      if (template.getAttribute('wrap') === 'false') {\n        target = element;\n      } else if (template.hasAttribute('target')) {\n        switch (template.getAttribute('target')) {\n          case 'parent':\n            target = element.parentElement;\n            // we do not need the list to be visible then\n            element.style.display = 'none';\n            break;\n          default:\n            throw new Error('invalid target: ' + template.getAttribute('target'));\n        }\n      } else if (!target) {\n        target = document.createElement('ul');\n        target.classList.add('content');\n        element.appendChild(target);\n      }\n      this.debug('refreshing with new model length', newModel.length);\n      if (Array.isArray(newModel) || newModel instanceof qx.data.Array) {\n        if (typeof this._filterModel === 'function') {\n          newModel = newModel.filter(this._filterModel);\n        }\n        if (typeof this._sortModel === 'function') {\n          newModel.sort(this._sortModel);\n        }\n        if (this._limit) {\n          newModel = newModel.slice(0, this._limit);\n        }\n        if (newModel.length === 0) {\n          const whenEmptyTemplate = element.querySelector(':scope > template[when=\"empty\"]');\n\n          // remove old entries\n          while (target.firstElementChild && target.firstElementChild.hasAttribute('data-row')) {\n            target.removeChild(target.firstElementChild);\n          }\n\n          if (whenEmptyTemplate && !target.querySelector(':scope > .empty-model')) {\n            const emptyModel = whenEmptyTemplate.content.firstElementChild.cloneNode(true);\n            emptyModel.classList.add('empty-model');\n            target.appendChild(emptyModel);\n            return;\n          }\n        } else {\n          const emptyElem = target.querySelector(':scope > .empty-model');\n          if (emptyElem) {\n            emptyElem.remove();\n          }\n\n          let child;\n          for (let i = target.children.length-1; i >=0; i--) {\n            child = target.children[i];\n            if (child.hasAttribute('data-row') && parseInt(child.getAttribute('data-row')) >= newModel.length) {\n              target.removeChild(child);\n            }\n          }\n        }\n        const itemTemplate = document.createElement('template');\n        // remove entries we do not need anymore\n        for (let i = newModel.length; i < this._model.length; i++) {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          if (elem) {\n            elem.remove();\n          }\n        }\n\n        const getValue = (name, entry) => {\n          let index = -1;\n          if (name.endsWith(']')) {\n            // array access\n            index = parseInt(name.substring(name.indexOf('[') + 1, name.length - 1));\n            if (isNaN(index)) {\n              this.error(\n                'error parsing array index from ' + name,\n                name.substring(name.indexOf('[') + 1, name.length - 1)\n              );\n              return '';\n            }\n            name = name.substring(0, name.indexOf('['));\n          }\n          if (Object.prototype.hasOwnProperty.call(entry, name)) {\n            let val = entry[name];\n            if (index >= 0 && Array.isArray(val)) {\n              return val[index];\n            }\n            return val;\n          }\n          return '';\n        };\n        newModel.forEach((entry, i) => {\n          let elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          const html = template.innerHTML.replaceAll(/\\${([^}]+)}/g, (match, content) => {\n            if (content === 'index') {\n              return '' + i;\n            }\n            if (content.includes('||')) {\n              // elements are or'ed use the first one with value\n              let val = '';\n              for (let name of content.split('||').map(n => n.trim())) {\n                val = getValue(name, entry);\n                if (val) {\n                  return val;\n                }\n              }\n            } else if (content.includes('|')) {\n              // formatting rules\n              const [name, format] = content.split('|');\n              const val = getValue(name, entry);\n              if (val instanceof Date) {\n                const df = new qx.util.format.DateFormat(format);\n                return df.format(val);\n              } else if (val) {\n                return val;\n              }\n            } else if (content.includes('.')) {\n              // first part is an object value, the latter part is JS code then\n              const [name] = content.split('.', 1);\n              const code = content.substring(name.length+1);\n              const val = getValue(name, entry);\n              if (val instanceof Object) {\n                try {\n                  const func = new Function('obj', `return obj.${code};`);\n                  return func(val);\n                } catch (e) {}\n              }\n            }\n            return getValue(content, entry);\n          });\n\n          itemTemplate.innerHTML = html;\n          // check for elements with when attributes\n          itemTemplate.content.firstElementChild.querySelectorAll('[when]').forEach(elem => {\n            const [leftVal, rightVal] = elem\n              .getAttribute('when')\n              .split('=')\n              .map(n => n.trim());\n            // noinspection EqualityComparisonWithCoercionJS\n            if (leftVal != rightVal) {\n              elem.parentElement.removeChild(elem);\n            } else {\n              elem.removeAttribute('when');\n            }\n          });\n          if (elem) {\n            // update existing\n            elem.innerHTML = itemTemplate.content.firstElementChild.innerHTML;\n            elem.setAttribute('data-row', '' + i);\n            this._initElement(elem, entry);\n          } else {\n            // append new child\n            itemTemplate.content.firstElementChild.setAttribute('data-row', '' + i);\n            elem = itemTemplate.content.cloneNode(true);\n            this._initElement(elem.firstElementChild, entry);\n            target.appendChild(elem);\n          }\n        });\n        this._model = newModel;\n      } else {\n        this.error('model must be an array', newModel);\n      }\n    },\n\n    _initElement(elem, entry) {\n      elem.$$model = entry;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_modelInstance', '_timer');\n    this._model = null;\n    this._filterModel = null;\n    this._sortModel = null;\n    this._target = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'list',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an item in a list.\n */\nqx.Class.define('cv.ui.structure.tile.components.ListItem', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      // install fireEvent function\n      this._element.fireEvent = (name, value) => {\n        const ev = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            value: value,\n            source: this\n          }\n        });\n        this._element.dispatchEvent(ev);\n      };\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'listitem',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: ['pages', 'menuItems'],\n      apply: '_applyModel'\n    },\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n\n    showLabels: {\n      check: 'Boolean',\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _applyModel(model) {\n      if (model) {\n        const rootList = document.createElement('ul');\n        this._element.appendChild(rootList);\n\n        if (model === 'pages') {\n          // add hamburger menu\n          const ham = document.createElement('a');\n          ham.href = '#';\n          ham.classList.add('menu');\n          ham.onclick = event => this._onHamburgerMenu(event);\n          const icon = document.createElement('i');\n\n          ham.appendChild(icon);\n          this._element.appendChild(ham);\n\n          qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n          qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n          qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n          icon.classList.add('ri-menu-line');\n        } else if (model === 'menuItems') {\n          // add hamburger menu\n          const icon = document.createElement('i');\n          icon.classList.add('ri-more-2-fill');\n          this._element.appendChild(icon);\n          // listen on whole element\n          this._element.onclick = event => this._onHamburgerMenu(event);\n          rootList.classList.add('context-menu');\n          this._generateMenu();\n        }\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.hasAttribute('model') ? element.getAttribute('model')\n        : (element.querySelectorAll(':scope > cv-menu-item').length > 0) ? 'menuItems' : null;\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      this.setModel(model);\n    },\n\n    _generateMenu() {\n      switch (this.getModel()) {\n        case 'pages': {\n          const currentPage = window.location.hash.substring(1);\n          let parentElement = document.querySelector('main');\n          if (parentElement) {\n            const firstPage = document.querySelector('cv-page');\n            if (firstPage) {\n              parentElement = firstPage.parentElement;\n            }\n          }\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n          }\n          break;\n        }\n        case 'menuItems': {\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            for (let item of this._element.querySelectorAll(':scope > cv-menu-item')) {\n              const pageName = item.getAttribute('name') || '';\n              const pageIcon = item.getAttribute('icon') || '';\n              const li = document.createElement('li');\n              if (pageIcon) {\n                const i = document.createElement('i');\n                i.classList.add(pageIcon);\n                i.title = pageName;\n                li.appendChild(i);\n              }\n              if (this.isShowLabels()) {\n                const text = document.createTextNode(pageName);\n                li.appendChild(text);\n              }\n              li.addEventListener('click', event => {\n                item.getInstance().onClick(event);\n              });\n              rootList.appendChild(li);\n            }\n          }\n          break;\n        }\n      }\n    },\n\n    _onHamburgerMenu(event) {\n      let toggleClass = 'open';\n      if (this.getModel() === 'pages') {\n        toggleClass = 'responsive';\n        for (let detail of this._element.querySelectorAll('.details')) {\n          detail.setAttribute('open', '');\n        }\n      }\n      this._element.classList.toggle(toggleClass);\n      event.stopPropagation();\n      if (this._element.classList.contains(toggleClass)) {\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (\n        target.classList.contains('menu') ||\n        (target.parentElement && target.parentElement.classList.contains('menu')) ||\n        target.nodeName.toLowerCase() === 'cv-menu' ||\n        (target.parentElement && target.parentElement.nodeName.toLowerCase() === 'cv-menu')\n      ) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== '.summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 500);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (\n          current &&\n          current.previousElementSibling &&\n          current.previousElementSibling.tagName.toLowerCase() === 'li'\n        ) {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('open')) {\n        this._element.classList.remove('open');\n      } else if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('.details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _openDetail(item) {\n      const first = this._element.querySelectorAll('.details[open]').length === 0;\n      item.setAttribute('open', '');\n      if (first) {\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _closeDetail(item) {\n      item.removeAttribute('open');\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        // remove listeners\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        a.setAttribute('data-page-id', pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels() || currentLevel > 0) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if (\n          (depth < 0 || depth > currentLevel) &&\n          page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0\n        ) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          a.setAttribute('href', '#');\n\n          a.addEventListener('click', ev => {\n            cv.Application.structureController.scrollToPage(pageId);\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n            p.addEventListener('click', ev => {\n              if (details.hasAttribute('open')) {\n                this._closeDetail(details);\n              } else {\n                this._openDetail(details);\n              }\n            });\n          }\n          const expander = document.createElement('i');\n          expander.classList.add('expander');\n          expander.classList.add('ri-arrow-down-s-line');\n          summary.appendChild(expander);\n          expander.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              this._closeDetail(details);\n            } else {\n              this._openDetail(details);\n            }\n          });\n\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel+1);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[data-page-id=\"${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n        static get observedAttributes() {\n          return ['appearance', 'depth'];\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Represents an action that should be executed when the related menu item has been clicked.\n */\nqx.Class.define('cv.ui.structure.tile.components.MenuAction', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _currentState: null,\n\n    _init() {\n      super._init();\n      const action = this._element.getAttribute('action');\n      switch (action) {\n        case 'toggleState': {\n          let hasAddress = false;\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            hasAddress = true;\n            if (address.getAttribute('mode') !== 'write') {\n              this._element.addEventListener('stateUpdate', ev => {\n                this.onStateUpdate(ev);\n                // cancel event here\n                ev.stopPropagation();\n              });\n            }\n          }\n          if (!hasAddress) {\n            this.error('a cv-menu-item with action \"toggleState\" needs at least one cv-address to read the write the state,');\n          }\n          break;\n        }\n        case 'popup':\n          if (!this._element.querySelector(':scope > cv-popup')) {\n            this.error('a cv-menu-item with action \"popup\" must have a cv-popup as child.');\n          }\n          break;\n      }\n    },\n\n    onClick(event) {\n      switch (this._element.getAttribute('action')) {\n        case 'popup': {\n          const popup = this._element.querySelector(':scope > cv-popup');\n          if (popup) {\n            popup.getInstance().open();\n          }\n          event.stopPropagation();\n          break;\n        }\n        case 'toggleState': {\n          const ev = new CustomEvent('sendState', {\n            detail: {\n              value: !this._currentState,\n              source: this\n            }\n          });\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            if (address.getAttribute('mode') !== 'read') {\n              address.dispatchEvent(ev);\n            }\n          }\n          event.stopPropagation();\n          break;\n        }\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == '1';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      this._currentState = value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu-item',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let baseName in cv.plugins) {\n            if (baseName.toLowerCase() === name) {\n              Clazz = cv.plugins[baseName];\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            // must be converted to real XML document, otherwise attributes cannot be accessed\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(this._element.innerHTML, 'application/xml');\n            const props = Clazz.parse(doc.firstElementChild, id, '', 'text');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          } else {\n            this.error('no main plugin class found for ' + pluginName);\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* RoundProgress.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a round progress bar (partially filled circle).\n * This component must be used inside a cv-value component, it is not meant to be used standalone.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.RoundProgress', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    text: {\n      check: 'String',\n      apply: '_applyText'\n    },\n\n    type: {\n      check: ['circle', 'semiCircle'],\n      init: 'circle'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __writeAddresses: null,\n    __circumference: null,\n    __start: null,\n    __normalizedRadius: null,\n    __radius: null,\n    __label: null,\n    __canvas: null,\n    __availableLabelWidth: null,\n    __defaultLabelFontSize: null,\n    _queuedFitText: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      const style = document.querySelector(':root').style;\n      const hasFixedRadius = element.hasAttribute('radius');\n      const radius = (this.__radius =\n        element.getAttribute('radius') || parseInt(style.getPropertyValue('--tileCellWidth')) || 56);\n      const strokeWidth = element.getAttribute('stroke') || 8;\n      const normalizedRadius = (this.__normalizedRadius = radius - strokeWidth / 2);\n      this.__circumference = normalizedRadius * 2 * Math.PI;\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      const type = this.getType();\n      let height = type === 'semiCircle' ? radius : radius * 2;\n      const ns = 'http://www.w3.org/2000/svg';\n      const svg = document.createElementNS(ns, 'svg');\n      svg.setAttribute('height', height);\n      svg.setAttribute('width', '' + (radius * 2));\n      svg.setAttribute('type', type);\n\n      if (type === 'circle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'circle');\n          bg.classList.add('bg');\n          bg.setAttribute('r', '' +normalizedRadius);\n          bg.setAttribute('cx', '50%');\n          bg.setAttribute('cy', '50%');\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        const bar = document.createElementNS(ns, 'circle');\n        bar.classList.add('bar');\n        bar.setAttribute('r', '' +normalizedRadius);\n        bar.setAttribute('cx', '50%');\n        bar.setAttribute('cy', '50%');\n        bar.setAttribute('stroke-width', strokeWidth);\n        bar.setAttribute('stroke-dasharray', `${this.__circumference} ${this.__circumference}`);\n        bar.setAttribute('stroke-dashoffset', this.__circumference);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      } else if (type === 'semiCircle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'path');\n          bg.classList.add('bg');\n          bg.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 1 ${\n            radius * 2 - strokeWidth / 2\n          } ${radius}`);\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        this.__start = {\n          x: strokeWidth / 2,\n          y: radius\n        };\n        const bar = document.createElementNS(ns, 'path');\n        bar.classList.add('bar');\n        bar.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 0 ${\n          strokeWidth / 2\n        } ${radius}`);\n        bar.setAttribute('fill', 'transparent');\n        bar.setAttribute('stroke-width', strokeWidth);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      }\n      element.replaceChildren(svg, document.createElement('label'));\n\n      this.__availableLabelWidth = radius * 2 - strokeWidth * 2 - 24;\n\n      if (!hasFixedRadius) {\n        qx.event.message.Bus.subscribe('cv.design.tile.cellWidthChanged', ev => {\n          this.__radius = ev.getData();\n          this.__normalizedRadius = this.__radius - strokeWidth / 2;\n          this.__circumference = this.__normalizedRadius * 2 * Math.PI;\n          height = type === 'semiCircle' ? this.__radius : this.__radius * 2;\n          const svg = element.querySelector(':scope > svg');\n          svg.setAttribute('height', '' + height);\n          svg.setAttribute('width', '' + this.__radius * 2);\n          if (type === 'circle') {\n            this._element.querySelectorAll(':scope > svg > circle').forEach(circle => {\n              circle.setAttribute('r', '' + this.__normalizedRadius);\n              if (circle.classList.contains('bar')) {\n                circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n                circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n              }\n            });\n          } else if (type === 'semiCircle') {\n            this.__start.y = this.__radius;\n            const bg = this._element.querySelector(':scope > svg > path.bg');\n            if (bg) {\n              bg.setAttribute(\n                'd',\n                `M ${strokeWidth / 2} ${this.__radius} A ${this.__normalizedRadius} ${this.__normalizedRadius} 0 0 1 ${\n                  this.__radius * 2 - strokeWidth / 2\n                } ${this.__radius}`\n              );\n            }\n          }\n          this._applyProgress(this.isPropertyInitialized('progress') ? this.getProgress() : 0);\n        });\n      }\n    },\n\n    __convert(angle) {\n      const angleRad = angle * (Math.PI / 180.0);\n      return {\n        x: this.__radius - this.__normalizedRadius * Math.cos(angleRad),\n        y: this.__radius - this.__normalizedRadius * Math.sin(angleRad)\n      };\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueElement;\n        let end;\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n\n        switch (this.getType()) {\n          case 'circle':\n            valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n            valueElement.setAttribute(\n              'stroke-dashoffset',\n              '' + this.__circumference - (percent / 100) * this.__circumference\n            );\n\n            break;\n\n          case 'semiCircle':\n            valueElement = this._element.querySelector(':scope > svg > path.bar');\n\n            end = this.__convert((180 / 100) * percent);\n            valueElement.setAttribute(\n              'd',\n              [\n                'M',\n                this.__start.x,\n                this.__start.y,\n                'A',\n                this.__normalizedRadius,\n                this.__normalizedRadius,\n                0,\n                0,\n                1,\n                end.x,\n                end.y\n              ].join(' ')\n            );\n\n            break;\n        }\n      }\n    },\n\n    _fitText() {\n      if (this.__label && this.__label.textContent) {\n        if (this.isVisible()) {\n          if (!this.__canvas) {\n            this.__canvas = document.createElement('canvas');\n            this.__context = this.__canvas.getContext('2d');\n            const compStyle = window.getComputedStyle(this.__label);\n            this.__context.font = compStyle.getPropertyValue('font');\n            this.__defaultLabelFontSize = compStyle.getPropertyValue('font-size');\n          }\n          const metrics = this.__context.measureText(this.__label.textContent);\n          if (metrics.width > this.__availableLabelWidth) {\n            // adjust font-size\n            const factor = this.__availableLabelWidth / metrics.width;\n            this.__label.style.fontSize = Math.floor(parseInt(this.__defaultLabelFontSize) * factor) + 'px';\n          } else {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n          this._queuedFitText = false;\n        } else {\n          this._queuedFitText = true;\n        }\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData() && this._queuedFitText) {\n        this._fitText();\n      }\n    },\n\n    _applyText(value) {\n      if (this.isConnected()) {\n        if (!this.__label) {\n          this.__label = this._element.querySelector(':scope > label');\n        }\n        this.__label.textContent = value;\n        if (!value) {\n          // empty text, just reset to default font size\n          if (this.__defaultLabelFontSize) {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n        } else {\n          this._fitText();\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__label = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'round-progress',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Select.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Allows the selection of one element out of a list of <cv-option> elements\n */\nqx.Class.define('cv.ui.structure.tile.components.Select', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __options: null,\n    __value: null,\n    __popup: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this.__options = new Map();\n\n      const popup = (this.__popup = document.createElement('div'));\n      popup.classList.add('popup');\n      element.querySelectorAll(':scope > cv-option').forEach((option, i) => {\n        popup.appendChild(option);\n        if (!option.hasAttribute('key')) {\n          option.setAttribute('key', '' + i);\n        }\n        this.__options.set(option.getAttribute('key'), option);\n      });\n      const value = (this.__value = document.createElement('span'));\n      value.classList.add('value');\n      element.appendChild(value);\n      element.appendChild(popup);\n      const handle = document.createElement('cv-icon');\n      handle.classList.add('dropdown');\n      handle.classList.add('ri-arrow-down-s-line');\n      element.appendChild(handle);\n\n      if (this._writeAddresses.length > 0) {\n        element.addEventListener('click', ev => this.onClicked(ev));\n      }\n    },\n\n    onClicked(ev) {\n      const style = getComputedStyle(this.__popup);\n      let target = ev.target;\n      // find out event target (either the cv-select of cv-option\n      while (target !== ev.currentTarget && target.tagName.toLowerCase() !== 'cv-option') {\n        target = target.parentElement;\n      }\n      if (target.tagName.toLowerCase() === 'cv-option') {\n        // select this option\n        this._sendSelection(target.getAttribute('key'), true);\n      }\n      // open popup\n      if (style.getPropertyValue('display') === 'none') {\n        this.__popup.style.display = 'block';\n      } else {\n        this.__popup.style.display = 'none';\n      }\n    },\n\n    _sendSelection(key, predictive) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: key,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      if (predictive === true) {\n        this.setValue(key);\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this.__options.has(mappedValue)) {\n        this.__value.innerHTML = '';\n        const current = this.__options.get(mappedValue);\n        if (current.children.length > 0) {\n          // if we have non text children, we only use them (only icons no text)\n          for (const child of current.children) {\n            this.__value.appendChild(child.cloneNode());\n          }\n        } else {\n          this.__value.innerHTML = current.innerHTML;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'select',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Slider.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a range slider.\n */\nqx.Class.define('cv.ui.structure.tile.components.Slider', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 5,\n      apply: '_applyStepWidth'\n    },\n\n    min: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyMin'\n    },\n\n    max: {\n      check: 'Number',\n      init: 100,\n      apply: '_applyMax'\n    },\n\n    showValue: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowValue'\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __throttled: null,\n    __input: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      } else {\n        this._applyThrottleInterval(this.getThrottleInterval());\n      }\n\n      // init components\n      let input = element.querySelector(':scope > input');\n      if (!input) {\n        input = document.createElement('input');\n        input.classList.add('slider');\n        input.setAttribute('type', 'range');\n        element.insertBefore(input, element.querySelector(':scope > .up'));\n        input.oninput = () => this.__throttled.call();\n      }\n      this.__input = input;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseInt(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('min')) {\n        this.setMin(parseInt(element.getAttribute('min')));\n      }\n      if (element.hasAttribute('max')) {\n        this.setMax(parseInt(element.getAttribute('max')));\n      }\n      if (element.hasAttribute('hide-value') && element.getAttribute('hide-value') === 'true') {\n        this.setShowValue(false);\n      } else {\n        this._applyShowValue(true);\n      }\n\n      const decreaseElement = element.querySelector(':scope > .decrease');\n      if (decreaseElement) {\n        decreaseElement.addEventListener('click', ev => this.onDecrease());\n      }\n      const increaseElement = element.querySelector(':scope > .increase');\n      if (increaseElement) {\n        increaseElement.addEventListener('click', ev => this.onIncrease());\n      }\n    },\n\n    _applyThrottleInterval(value) {\n      if (value > 0) {\n        this.__throttled = cv.util.Function.throttle(this.onInput, value, { trailing: true }, this);\n      } else {\n        // no throttling, direct call\n        this.__throttled = {\n          call: () => this.onInput(),\n          abort: () => {}\n        };\n      }\n    },\n\n    _applyMin(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('min', '' + value);\n    },\n\n    _applyMax(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('max', '' + value);\n    },\n\n    _applyStepWidth(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('step', '' + value);\n    },\n\n    _applyShowValue(value) {\n      let valueLabel = this._element.querySelector(':scope > label.value');\n      if (value) {\n        if (!valueLabel) {\n          valueLabel = document.createElement('label');\n          valueLabel.classList.add('value');\n          valueLabel.classList.add('secondary');\n          this._element.insertBefore(valueLabel, this._element.firstChild);\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector(':scope > input');\n      if (target) {\n        target.value = value;\n      }\n      if (this.isShowValue()) {\n        let valueLabel = this._element.querySelector(':scope > label.value');\n        if (valueLabel) {\n          valueLabel.innerText = mappedValue;\n        }\n      }\n    },\n\n    onInput() {\n      this.__sendValue(this.__input.value);\n    },\n\n    onDecrease() {\n      const value = this.getValue() - this.getStepWidth();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getValue() + this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'slider',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Spinner.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a number value that can be increased and decreased by a defined step width.\n */\nqx.Class.define('cv.ui.structure.tile.components.Spinner', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 1.0\n    },\n\n    mode: {\n      check: ['relative', 'absolute'],\n      init: 'absolute'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseFloat(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('mode')) {\n        this.setMode(element.getAttribute('mode'));\n      }\n      // init components\n      let valueElement = element.querySelector(':scope > .value');\n      if (!valueElement) {\n        valueElement = document.createElement('label');\n        valueElement.classList.add('value');\n        valueElement.classList.add('primary');\n        element.appendChild(valueElement);\n      }\n      // add increase / decrease buttons\n      const decrease = document.createElement('div');\n      decrease.classList.add('clickable');\n      decrease.classList.add('left');\n      const decreaseIcon = document.createElement('cv-icon');\n      decreaseIcon.classList.add('ri-arrow-down-s-line');\n      decrease.addEventListener('click', () => this.onDecrease());\n      decrease.appendChild(decreaseIcon);\n      element.insertBefore(decrease, valueElement);\n\n      const increase = document.createElement('div');\n      increase.classList.add('clickable');\n      increase.classList.add('right');\n      const increaseIcon = document.createElement('cv-icon');\n      increaseIcon.classList.add('ri-arrow-up-s-line');\n      increase.appendChild(increaseIcon);\n      increase.addEventListener('click', () => this.onIncrease());\n      element.appendChild(increase);\n    },\n\n    onDecrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() - this.getStepWidth() : this.getStepWidth() * -1;\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() + this.getStepWidth() : this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    _updateValue(mappedValue) {\n      const target = this._element.querySelector('.value');\n      if (target) {\n        target.innerHTML = mappedValue;\n      }\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'spinner',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Value.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a value from the backend, as label or image/icon\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Value', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MResize],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _queuedOverflowDetection: null,\n    _debouncedDetectOverflow: null,\n\n    _init() {\n      super._init();\n      this._debouncedDetectOverflow = qx.util.Function.debounce(this._detectOverflow, 20);\n\n      const target = this._element.querySelector('.value');\n      if (target && target.tagName.toLowerCase() === 'label') {\n        // check for overflowing text, when labels parent gets resized\n        this.setResizeTarget(this._element);\n        this.addListener('resized', this._debouncedDetectOverflow, this);\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData()) {\n        if (this._queuedOverflowDetection) {\n          this._debouncedDetectOverflow();\n        }\n      } else {\n        const target = this._element.querySelector('.value');\n        if (target && target.classList.contains('scroll')) {\n          target.classList.remove('scroll');\n        }\n      }\n    },\n\n    _detectOverflow() {\n      const target = this._element.querySelector('.value');\n      if (this.isVisible()) {\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > target.parentElement.clientWidth) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      let styleClass = '';\n      for (const target of this._element.querySelectorAll('.value')) {\n        const tagName = target.tagName.toLowerCase();\n        switch (tagName) {\n          case 'cv-icon':\n            target._instance.setId(mappedValue);\n            if (this._element.hasAttribute('styling')) {\n              styleClass = cv.Application.structureController.styleValue(\n                this._element.getAttribute('styling'),\n                value,\n                this.__store\n              );\n            }\n            target._instance.setStyleClass(styleClass);\n            break;\n          case 'meter':\n            target.setAttribute('value', value);\n            break;\n          case 'cv-round-progress':\n            if (typeof value === 'string') {\n              value = parseInt(value);\n            }\n            target._instance.setProgress(value);\n            target._instance.setText('' + mappedValue);\n            break;\n          case 'label':\n            target.innerHTML = mappedValue;\n            this._debouncedDetectOverflow();\n            break;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'value',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\nqx.Mixin.define('cv.ui.structure.tile.components.svg.MGraphicsElement', {\n  include: cv.ui.structure.tile.MStringTransforms,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    DefaultSize: 56\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    row: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyPosition',\n      transform: '_parseFloat'\n    },\n\n    column: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyPosition',\n      transform: '_parseFloat'\n    },\n\n    x: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyToSvg'\n    },\n\n    y: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyToSvg'\n    },\n\n    rowspan: {\n      check: 'Number',\n      init: 1,\n      apply: '_updateHeight',\n      transform: '_parseFloat'\n    },\n\n    colspan: {\n      check: 'Number',\n      init: 1,\n      apply: '_updateWidth',\n      transform: '_parseFloat'\n    },\n\n    height: {\n      check: 'Number',\n      init: 0,\n      apply: '_applySize',\n      event: 'heightChanged'\n    },\n\n    width: {\n      check: 'Number',\n      init: 0,\n      apply: '_applySize',\n      event: 'widthChanged'\n    },\n\n    title: {\n      check: 'String',\n      init: '',\n      apply: '_applyTitle'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _parentGridLayout: null,\n\n    _findParentGridLayout() {\n      let parentInstance = null;\n      let p = this._element.parentElement;\n      while (p && !parentInstance) {\n        if (p.nodeName.toLowerCase().startsWith('cv-') && p._instance && qx.Class.hasOwnMixin(p._instance.constructor, cv.ui.structure.tile.components.svg.MSvgGrid)) {\n          parentInstance = p._instance;\n        } else if (p.nodeName.toLowerCase() === 'cv-page') {\n          // do not look outside the page\n          break;\n        } else {\n          p = p.parentElement;\n        }\n      }\n      this._parentGridLayout = parentInstance;\n    },\n\n    _applyToSvg(val, oldVal, name) {\n      if (this._svg) {\n        this._svg.setAttribute(name, val);\n      }\n    },\n\n    _updateWidth() {\n      if (this._parentGridLayout && this._svg) {\n        const width = this._parentGridLayout.getCellWidth() * this.getColspan() + this._parentGridLayout.getSpacing() * (this.getColspan() - 1);\n        this.setWidth(width);\n      }\n    },\n\n    _updateHeight() {\n      if (this._parentGridLayout && this._svg) {\n        const height = this._parentGridLayout.getCellHeight() * this.getRowspan() + this._parentGridLayout.getSpacing() * (this.getRowspan() - 1);\n        this.setHeight(height);\n      }\n    },\n\n    _applyPosition() {\n      if (this._parentGridLayout && this._svg) {\n        this._parentGridLayout.layout(this._svg, this.getRow(), this.getColumn());\n      }\n    },\n\n    _applySize(value, oldValue, name) {\n      if (this._svg) {\n        this._svg.setAttribute(name, `${value}`);\n      }\n    },\n\n    _applyTitle(value, oldValue) {\n      if (typeof this._applyTitleOverride === 'function') {\n        this._applyTitleOverride(value, oldValue);\n      } else if (this._target) {\n        let title = this._target.querySelector(':scope > title');\n        if (value) {\n          if (!title) {\n            title = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n            this._target.appendChild(title);\n          }\n          title.textContent = value;\n        } else if (title) {\n          title.remove();\n        }\n      }\n    }\n  }\n});\n","/**\n * TextValue shows an element that contains of an icon, an optional tile\n * and a value-text.\n *\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Class.define('cv.ui.structure.tile.components.svg.TextValue', {\n  extend: cv.ui.structure.tile.components.Value,\n  include: cv.ui.structure.tile.components.svg.MGraphicsElement,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    icon: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyIcon'\n    },\n\n    color: {\n      check: 'String',\n      init: 'var(--primaryText)',\n      apply: '_applyColor'\n    },\n\n    iconColor: {\n      check: 'String',\n      init: 'var(--primaryText)',\n      apply: '_applyIconColor'\n    },\n\n    scale: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyScale'\n    },\n\n    offsetY: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyOffsetY'\n    },\n\n    offsetX: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyOffsetX'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _svg: null,\n    _iconSize: null,\n    _iconPosition: null,\n    _debouncedUpdateRSize: null,\n\n    getSvg() {\n      return this._svg;\n    },\n\n    getParentSvg() {\n      return this._svg ? this._svg.ownerSVGElement : null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this._findParentGridLayout();\n      const parent = this._parentGridLayout ? this._parentGridLayout.getSvg() : element;\n      this._iconSize = 24 * this.getScale();\n      this._debouncedUpdateRSize = qx.util.Function.debounce(this._updateSize.bind(this), 10);\n      this._parentGridLayout.addListener('changeSize', this._debouncedUpdateRSize, this);\n\n      const ns = 'http://www.w3.org/2000/svg';\n\n      // add surrounding svg node\n      const svg = this._svg = document.createElementNS(ns, 'svg');\n      svg.classList.add('text-value');\n      for (const name of ['x', 'y']) {\n        if (element.hasAttribute(name)) {\n          svg.setAttribute(name, element.getAttribute(name));\n        }\n      }\n      parent.appendChild(svg);\n\n      const group = document.createElementNS(ns, 'g');\n      svg.appendChild(group);\n      this._target = group;\n\n      if (element.hasAttribute('icon')) {\n        this._applyIcon(this.getIcon());\n      }\n\n      const value = document.createElementNS(ns, 'text');\n      value.setAttribute('x', '0');\n      value.setAttribute('y', '32');\n      value.setAttribute('alignment-baseline', 'central');\n      value.setAttribute('class', 'value');\n      value.setAttribute('fill', this.getColor());\n      this._target.appendChild(value);\n\n      this.addListener('heightChanged', this._centerY, this);\n      this.addListener('widthChanged', this._centerX, this);\n\n      this._updateHeight();\n      this._updateWidth();\n\n      this._applyPosition();\n      this._applyTitleOverride(this.getTitle());\n    },\n\n    _updateSize() {\n      const newScale = Math.min(2.5, (Math.min(this._parentGridLayout.getCellWidth(), this._parentGridLayout.getCellHeight()) - this._parentGridLayout.getSpacing()) / cv.ui.structure.tile.components.svg.MGraphicsElement.DefaultSize);\n      if (newScale === 0.0) {\n        return;\n      }\n      this.debug('new scale:', newScale);\n      this.setScale(newScale);\n    },\n\n    _applyScale(scale) {\n      if (this._target) {\n        this._target.setAttribute('transform', `scale(${scale})`);\n      }\n      if (this._svg) {\n        this.setHeight(cv.ui.structure.tile.components.svg.MGraphicsElement.DefaultSize * scale * this.getRowspan());\n        this.setWidth(cv.ui.structure.tile.components.svg.MGraphicsElement.DefaultSize * scale * this.getColspan());\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this._target) {\n        const target = this._target.querySelector('.value');\n        target.textContent = mappedValue;\n        this._debouncedDetectOverflow();\n      }\n    },\n\n    _centerY() {\n      this.setOffsetY(this.getHeight() / 2 - this._svg.getBBox().height / 2);\n    },\n\n    _centerX() {\n      this.setOffsetX(this.getWidth() / 2 - this._svg.getBBox().width / 2);\n    },\n\n    _applyOffsetY(value) {\n      const icon = this._target.querySelector('.icon-container');\n      if (icon) {\n        icon.setAttribute('y', `${value}`);\n      }\n      let text = this._target.querySelector('text.value');\n      if (text) {\n        text.setAttribute('y', '' + (value + 32));\n      }\n      text = this._target.querySelector('text.title');\n      if (text) {\n        text.setAttribute('y', '' + (value + 16));\n      }\n    },\n\n    _applyOffsetX() {\n    },\n\n    _applyTitleOverride(title) {\n      if (this._target) {\n        if (title) {\n          let text = this._target.querySelector('text.title');\n          if (!text) {\n            text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n            text.setAttribute('x', '0');\n            text.setAttribute('y', '16');\n            text.setAttribute('alignment-baseline',  'central');\n            text.classList.add('title');\n            this._target.appendChild(text);\n          }\n          text.textContent = title;\n        } else {\n          let text = this._target.querySelector('text.title');\n          if (text) {\n            text.remove();\n          }\n        }\n      }\n    },\n\n    _applyColor(color) {\n      if (this._target) {\n        const target = this._target.querySelector('.value');\n        if (color) {\n          target.setAttribute('fill', color);\n        } else {\n          target.removeAttribute('fill');\n        }\n      }\n    },\n\n    _applyIconColor(color) {\n      const icon = this._target ? this._target.querySelector('cv-icon') : null;\n      if (icon) {\n        icon.style.color = color || 'inherit';\n      }\n    },\n\n    _applyIcon(iconName) {\n      if (!this._target) {\n        return;\n      }\n      let icon = this._target.querySelector('cv-icon');\n      if (iconName) {\n        if (!icon) {\n          const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\n          fo.setAttribute('class', 'icon-container');\n          fo.setAttribute('width', this._iconSize + 'px');\n          fo.setAttribute('height', this._iconSize + 'px');\n          fo.style.textAlign = 'center';\n\n          icon = document.createElement('cv-icon');\n          icon.classList.add(iconName);\n          icon.style.fontSize = this._iconSize + 'px';\n          if (this.getIconColor()) {\n            icon.style.color = this.getIconColor();\n          }\n          fo.appendChild(icon);\n          const value = this._target.querySelector('.value');\n          if (value) {\n            this._target.insertBefore(fo, value);\n          } else {\n            this._target.appendChild(fo);\n          }\n        }\n      } else if (icon) {\n        this._target.remove(icon);\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._target.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _detectOverflow() {\n      if (this.isVisible()) {\n        const target = this._target.querySelector('.value');\n        let width = 0;\n        const wAttr = this._svg.getAttribute('width');\n        if (wAttr) {\n          width = parseInt(wAttr, 10);\n        } else {\n          const sizeReference = this._svg.getBBox();\n          width = sizeReference.width;\n        }\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > width) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'svg-text-value',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'radius', 'stroke', 'title'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Mixin for all Entity-Classes.\n *\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Mixin.define('cv.ui.structure.tile.components.energy.MEntity', {\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['pv', 'battery', 'grid', 'house', 'charger', 'heatpump', 'consumer'],\n      nullable: true,\n      apply: '_applyType'\n    },\n\n    foregroundColor: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyForegroundColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _noValue: null,\n\n    hasNoValue() {\n      return this._noValue;\n    },\n\n    preMappingHook(value) {\n      // we only show positive values here, power flow is shown via connection direction\n      return Math.abs(value);\n    },\n\n    _applyForegroundColor(value) {\n      const bar = this._svg ? this._svg.querySelector('circle.bar') : null;\n      if (bar) {\n        bar.style.stroke = value;\n      }\n    }\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * TextValue for energy entities.\n *\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Class.define('cv.ui.structure.tile.components.energy.EnergyEntity', {\n  extend: cv.ui.structure.tile.components.svg.TextValue,\n  include: cv.ui.structure.tile.components.energy.MEntity,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    typeSettings: {\n      pv: {\n        icon: 'knxuf-weather_sun',\n        color: 'var(--pvColor)'\n      },\n      battery: {\n        icon: 'knxuf-measure_battery_100'\n      },\n      grid: {\n        icon: 'knxuf-scene_power_grid'\n      },\n      house: {\n        icon: 'knxuf-control_building_empty'\n      },\n      charger: {\n        icon: 'knxuf-veh_wallbox',\n        color: 'var(--powerConsumeColor)'\n      },\n      heatpump: {\n        icon: 'knxuf-sani_earth_source_heat_pump',\n        color: 'var(--powerConsumeColor)'\n      },\n      consumer: {\n        icon: 'knxuf-measure_smart_meter',\n        color: 'var(--powerConsumeColor)'\n      }\n    }\n  },\n\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    direction: {\n      check: ['incoming', 'outgoing', 'none'],\n      init: 'none',\n      apply: '_applyDirection'\n    },\n\n    unit: {\n      check: ['Wh', 'kWh'],\n      init: 'kWh',\n      apply: '_applyUnit'\n    }\n  },\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _autoFormat: null,\n\n    _applyType(value) {\n      const settings = cv.ui.structure.tile.components.energy.EnergyEntity.typeSettings[value];\n      if (settings) {\n        for (const attribute in settings) {\n          this._element.setAttribute(attribute, settings[attribute]);\n        }\n      }\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('id')) {\n        this._svg.setAttribute('id', element.getAttribute('id'));\n      }\n      this._autoFormat = !element.hasAttribute('format');\n      this._applyUnit(this.getUnit());\n      const direction = this.getDirection();\n      if (direction !== 'none') {\n        this._applyDirection(direction);\n      }\n    },\n\n    _applyUnit(value) {\n      if (this.isConnected() && this._autoFormat) {\n        if (!this._element.hasAttribute('format')) {\n          switch (value) {\n            case 'Wh':\n              this._element.setAttribute('format', '%d Wh');\n              break;\n\n            case 'kWh':\n              this._element.setAttribute('format', '%.2f kWh');\n              break;\n\n            default:\n              this._element.removeAttribute('format');\n              break;\n          }\n        }\n      }\n    },\n\n    _applyDirection(direction) {\n      if (direction === 'none') {\n        this.resetColor();\n        let arrow = this._target ? this._target.querySelector('path.direction') : null;\n        if (arrow) {\n          arrow.remove();\n        }\n        return;\n      }\n      switch (this.getType()) {\n        case 'battery':\n          this.setColor(direction === 'incoming' ? 'var(--batteryConsumeColor)' : 'var(--batteryInjectColor)');\n          break;\n\n        case 'grid':\n          this.setColor(direction === 'incoming' ? 'var(--gridConsumeColor)' : 'var(--gridInjectColor)');\n          break;\n      }\n      if (this._target) {\n        let arrow = this._target.querySelector('path.energy-direction');\n        if (!arrow) {\n          arrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          arrow.classList.add('energy-direction');\n          arrow.setAttribute('d', 'M 0 0 L 6 4 L 0 8');\n          arrow.setAttribute('stroke', this.getIconColor());\n          arrow.setAttribute('stroke-width', '1');\n          arrow.setAttribute('fill', 'transparent');\n          this._target.appendChild(arrow);\n        }\n        this.__updateDirectionPosition();\n      }\n    },\n\n    _applyOffsetY(value) {\n      super._applyOffsetY(value);\n      this.__updateDirectionPosition();\n    },\n\n    _applyScale(scale) {\n      super._applyScale(scale);\n      this.__updateDirectionPosition();\n    },\n\n    __updateDirectionPosition() {\n      let arrow = this._target.querySelector('path.energy-direction');\n      if (arrow) {\n        arrow.setAttribute('transform', `translate(28, ${this.getOffsetY() + 8}) rotate(${this.getDirection() === 'incoming' ? '90' : '-90'}, 3, 4)`);\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'energy-entity',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'type', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'direction', 'unit', 'color'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Mixin for all SVG based components that can be connected to each other.\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Mixin.define('cv.ui.structure.tile.components.energy.MConnectable', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._connections = [];\n    this._inverseConnections = [];\n  },\n\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connectTo: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyConnectTo'\n    },\n\n    connectFrom: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyConnectFrom'\n    },\n\n    connectionPoints: {\n      check: 'String',\n      init: 'auto',\n      apply: '_applyConnectionPoints'\n    },\n\n    useConnectionSum: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyUseConnectionSum'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _connectorTo: null,\n    _connectorFrom: null,\n    _useConnectionsSumAsValue: null,\n    /**\n     * @type {Array<cv.ui.structure.tile.components.energy.PowerEntity>}\n     */\n    _connections: null,\n    /**\n     * @type {Array<cv.ui.structure.tile.components.energy.PowerEntity>}\n     */\n    _inverseConnections: null,\n\n\n    /**\n     * Adds an incoming connection from another PowerEntity\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity} connected from other to this\n     */\n    addConnection(other) {\n      if (!this._connections.includes(other)) {\n        this._connections.push(other);\n        if (this.getUseConnectionSum()) {\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    /**\n     * Adds an incoming inverse connection from another PowerEntity.\n     * Inverse connection means that the sign of the other entity is flipped for summing all values\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity} connected from other to this\n     */\n    addInverseConnection(other) {\n      if (!this._inverseConnections.includes(other)) {\n        this._inverseConnections.push(other);\n        if (this.getUseConnectionSum()) {\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    /**\n     * Remove an incoming connection from another PowerEntity\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity}\n     */\n    removeConnection(other) {\n      if (this._connections.includes(other)) {\n        this._connections.remove(other);\n        if (this.getUseConnectionSum()) {\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    /**\n     * Remove an incoming inverse connection from another PowerEntity\n     * @param other {cv.ui.structure.tile.components.energy.PowerEntity}\n     */\n    removeInverseConnection(other) {\n      if (this._inverseConnections.includes(other)) {\n        this._inverseConnections.remove(other);\n        if (this.getUseConnectionSum()) {\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    _applyUseConnectionSum(value) {\n      if (value) {\n        for (const other of this._connections) {\n          // refresh connections\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n        for (const other of this._inverseConnections) {\n          // refresh connections\n          other.removeListener('changeValue', this._updateConnectionsSum, this);\n          other.addListener('changeValue', this._updateConnectionsSum, this);\n        }\n      }\n    },\n\n    _updateConnectionsSum() {\n      let sum = 0.0;\n      for (const other of this._connections) {\n        sum += other.getValue();\n      }\n      for (const other of this._inverseConnections) {\n        sum -= other.getValue();\n      }\n      this.setValue(sum);\n    },\n\n    _updateDirection() {\n      const value = Math.round(this.getValue());\n      const connectors = [this._connectorTo, this._connectorFrom];\n      for (const connector of connectors) {\n        if (connector) {\n          if (value < 0) {\n            connector.setShowDirection('source');\n          } else if (value > 0) {\n            connector.setShowDirection('target');\n          } else {\n            connector.setShowDirection('none');\n          }\n        }\n      }\n    },\n\n    _applyConnectTo(targetId) {\n      if (this._svg && targetId) {\n        const parent = this._element.parentElement;\n        const target = parent.querySelector('#' + targetId);\n        if (target && target.nodeName.toLowerCase() === 'cv-power-entity') {\n          if (!this._connectorTo) {\n            this._connectorTo = this._initConnection(this, target._instance);\n            this._applyConnectionPoints(this.getConnectionPoints());\n            this._updateDirection();\n            // we are the power source for the target\n            target._instance.addConnection(this);\n          } else {\n            this._connectorTo.setTarget(target._instance);\n          }\n        }\n      }\n      if (targetId) {\n        this.registerPreMappingHook(this.preMappingHook, this);\n      } else {\n        this.unregisterPreMappingHook(this.preMappingHook);\n      }\n    },\n\n    _applyConnectFrom(sourceId) {\n      if (this._svg && sourceId) {\n        const parent = this._element.parentElement;\n        const source = parent.querySelector('#' + sourceId);\n        if (source && source.nodeName.toLowerCase() === 'cv-power-entity') {\n          if (!this._connectorFrom) {\n            this._connectorFrom = this._initConnection(source._instance, this);\n            this._applyConnectionPoints(this.getConnectionPoints());\n            this._updateDirection();\n            // we take power from the target\n            source._instance.addInverseConnection(this);\n          } else {\n            this._connectorFrom.setSource(source._instance);\n          }\n        }\n      }\n    },\n\n    /**\n     *\n     * @param source {cv.ui.structure.tile.components.energy.PowerEntity}\n     * @param target {cv.ui.structure.tile.components.energy.PowerEntity}\n     * @returns {cv.ui.structure.tile.components.svg.Connector}\n     * @private\n     */\n    _initConnection(source, target) {\n      const connector = new cv.ui.structure.tile.components.svg.Connector(source, target);\n      if (source.hasNoValue()) {\n        const targetId = target.getElement().getAttribute('id');\n        const parentElement = this._element.parentElement.querySelector('#' + targetId);\n        if (parentElement && parentElement._instance && parentElement._instance instanceof cv.ui.structure.tile.components.energy.PowerEntity && !parentElement._instance.hasNoValue()) {\n          // use styleClass from target\n          parentElement._instance.bind('styleClass', connector, 'styleClass');\n        }\n      } else {\n        this.bind('styleClass', connector, 'styleClass');\n      }\n      return connector;\n    },\n\n    _applyConnectionPoints(value) {\n      if (value) {\n        const connectors = [];\n        if (this._connectorTo) {\n          connectors.push(this._connectorTo);\n        }\n        if (this._connectorFrom) {\n          connectors.push(this._connectorFrom);\n        }\n        for (const connector of connectors) {\n          if (value === 'auto') {\n            connector.set({\n              sourceConnectionPoint: 'auto',\n              targetConnectionPoint: 'auto'\n            });\n          } else {\n            const [source, target] = value.split('-');\n            connector.set({\n              sourceConnectionPoint: source,\n              targetConnectionPoint: target\n            });\n          }\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    const source = this.getSource();\n    const target = this.getTarget();\n    if (target) {\n      target.removeConnection(this);\n    }\n    if (source) {\n      source.removeInverseConnection(this);\n    }\n\n    this._disposeObjects('_connectorTo', '_connectorFrom');\n    this._connections.clear();\n    this._inverseConnections.clear();\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Draws a line between two SVGGraphicsElements.\n *\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Class.define('cv.ui.structure.tile.components.svg.Connector', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(source, target) {\n    super();\n    this._updatePosition = this.__updatePosition.bind(this);\n    this._debouncedUpdatePosition = qx.util.Function.debounce(this._updatePosition, 50);\n    this._sourceObserver = new MutationObserver(this._onMutation.bind(this));\n    this._targetObserver = new MutationObserver(this._onMutation.bind(this));\n    this.setSource(source);\n    this.setTarget(target);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    C: 0\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true\n    },\n    source: {\n      check: 'cv.ui.structure.tile.components.energy.PowerEntity',\n      apply: '_applySource',\n      nullable: true\n    },\n    target: {\n      check: 'cv.ui.structure.tile.components.energy.PowerEntity',\n      apply: '_applyTarget',\n      nullable: true\n    },\n    root: {\n      check: 'SVGSVGElement',\n      apply: '_applyRoot',\n      nullable: true\n    },\n    sourceConnectionPoint: {\n      check: ['top', 'right', 'bottom', 'left', 'auto'],\n      init: 'auto',\n      apply: '__updatePosition',\n      validate : '_validateConnectionPoint'\n    },\n    targetConnectionPoint: {\n      check: ['top', 'right', 'bottom', 'left', 'auto'],\n      init: 'auto',\n      apply: '__updatePosition',\n      validate : '_validateConnectionPoint'\n    },\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    showDirection: {\n      check: ['none', 'source', 'target', 'both'],\n      init: 'none',\n      apply: '_applyShowDirection'\n    },\n\n    inverted: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyShowDirection'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _path: null,\n    /**\n     * @type {MutationObserver}\n     */\n    _sourceObserver: null,\n    /**\n     * @type {MutationObserver}\n     */\n    _targetObserver: null,\n\n    _applySource(value, oldValue) {\n      if (oldValue) {\n        this._sourceObserver.disconnect();\n      }\n      if (value) {\n        this._init();\n        this._sourceObserver.observe(value.getSvg(), {attributes: true});\n      }\n    },\n\n    _applyTarget(value, oldValue) {\n      if (oldValue) {\n        this._targetObserver.disconnect();\n      }\n      if (value) {\n        this._init();\n        this._targetObserver.observe(value.getSvg(), {attributes: true});\n      }\n    },\n\n    _init() {\n      const sourceEntity = this.getSource();\n      const targetEntity = this.getTarget();\n\n      if (sourceEntity && targetEntity) {\n        const source = sourceEntity.getSvg();\n        const target = targetEntity.getSvg();\n        // find common root\n        let sourceRoot = source.ownerSVGElement;\n        let targetRoot = target.ownerSVGElement;\n        while (sourceRoot !== targetRoot) {\n          let changed = false;\n          if (sourceRoot.ownerSVGElement) {\n            sourceRoot = sourceRoot.ownerSVGElement;\n            changed = true;\n          }\n          if (targetRoot.ownerSVGElement) {\n            targetRoot = targetRoot.ownerSVGElement;\n            changed = true;\n          }\n          if (!changed) {\n            break;\n          }\n        }\n        const root = sourceRoot || targetRoot;\n        this.setRoot(root);\n\n        let id = '';\n        let appendC = false;\n        if (source.hasAttribute('id')) {\n          id += source.getAttribute('id');\n        } else {\n          id += source.nodeName;\n          appendC = true;\n        }\n        id += '-';\n        if (target.hasAttribute('id')) {\n          id += target.getAttribute('id');\n        } else {\n          id += target.nodeName;\n          appendC = true;\n        }\n        if (appendC) {\n          id += cv.ui.structure.tile.components.svg.Connector.C++;\n        }\n\n        let path = root.querySelector('#' + id);\n        this.setId(id);\n        if (!path) {\n          path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          path._instance = this;\n          path.setAttribute('id', id);\n          path.setAttribute('stroke', 'var(--borderColor)');\n          path.setAttribute('fill', 'transparent');\n          path.setAttribute('stroke-width', '2');\n          path.setAttribute('class', 'connection');\n          root.insertBefore(path, root.firstChild);\n        }\n        this._path = path;\n        setTimeout(() => {\n          this.__updatePosition();\n        }, 1000);\n      }\n    },\n\n    _onMutation(records, observer) {\n      for (const mutation of records) {\n        if (mutation.type === 'attributes' && (mutation.attributeName === 'x' || mutation.attributeName === 'y')) {\n          this._debouncedUpdatePosition();\n        }\n      }\n    },\n\n    __updatePosition(retried = false) {\n      const sourceEntity = this.getSource();\n      const targetEntity = this.getTarget();\n\n      if (sourceEntity && targetEntity && this._path) {\n        const source = sourceEntity.getSvg();\n        const target = targetEntity.getSvg();\n        let sourceCoord = cv.util.Svg.getBBox(source);\n        let targetCoord = cv.util.Svg.getBBox(target);\n\n        let startX = 0;\n        let startY = 0;\n        let endX = 0;\n        let endY = 0;\n\n        let sourceConnectionPoint = this.getSourceConnectionPoint();\n        let targetConnectionPoint = this.getTargetConnectionPoint();\n        if (sourceConnectionPoint === 'auto' || targetConnectionPoint === 'auto') {\n          const dx = targetCoord.cx - sourceCoord.cx;\n          const dy = targetCoord.cy - sourceCoord.cy;\n          const l = Math.sqrt(dx**2 + dy**2);\n          if (l === 0) {\n            if (!retried) {\n              setTimeout(() => {\n                this._updatePosition(true);\n              }, 1000);\n            }\n            return;\n          }\n          const rsl = sourceEntity.getRadius() / l;\n          const rtl = targetEntity.getRadius() / l;\n          const yS = sourceCoord.cy + dy * rsl;\n          const yT = targetCoord.cy - dy * rtl;\n          const xS = sourceCoord.cx + dx * rsl;\n          const xT = targetCoord.cx - dx * rtl;\n\n          this.debug(this.getId(), `(${xS}, ${yS}) -> (${xT}, ${yT})`);\n\n          if (sourceConnectionPoint === 'auto') {\n            startX = xS;\n            startY = yS;\n          }\n          if (targetConnectionPoint === 'auto') {\n            endX = xT;\n            endY = yT;\n          }\n        }\n\n        switch (sourceConnectionPoint) {\n          case 'bottom':\n            startX = sourceCoord.cx;\n            startY = sourceCoord.y + sourceCoord.height;\n            break;\n\n          case 'top':\n            startX = sourceCoord.cx;\n            startY = sourceCoord.y;\n            break;\n\n          case 'right':\n            startX = sourceCoord.x + sourceCoord.width;\n            startY = sourceCoord.cy;\n            break;\n\n          case 'left':\n            startX = sourceCoord.x;\n            startY = sourceCoord.cy;\n            break;\n        }\n\n        switch (targetConnectionPoint) {\n          case 'bottom':\n            endX = targetCoord.cx;\n            endY = targetCoord.y + targetCoord.height;\n            break;\n\n          case 'top':\n            endX = targetCoord.cx;\n            endY = targetCoord.y;\n            break;\n\n          case 'right':\n            endX = targetCoord.x + targetCoord.width;\n            endY = targetCoord.cy;\n            break;\n\n          case 'left':\n            endX = targetCoord.x;\n            endY = targetCoord.cy;\n            break;\n        }\n\n        // make sure that we always draw the path from left to right\n        if (startX > endX) {\n          this.setInverted(true);\n          this.drawPath(this._path, endX, endY, startX, startY);\n        } else {\n          this.setInverted(false);\n          this.drawPath(this._path, startX, startY, endX, endY);\n        }\n      }\n    },\n\n    drawPath(path, startX, startY, endX, endY) {\n       /* const deltaX = (endX - startX) * 0.15;\n      const deltaY = (endY - startY) * 0.15;\n      // for further calculations which ever is the shortest distance\n      const delta  =  deltaY < Math.abs(deltaX) ? deltaY : Math.abs(deltaX);\n\n      let arc1 = 0;\n      let arc2 = 1;\n      if (startX > endX) {\n        arc1 = 1;\n        arc2 = 0;\n      }\n\n      // 1. move a bit down, 2. arch,  3. move a bit to the right, 4.arch, 5. move down to the end\n      path.setAttribute('d',  'M'  + startX + ' ' + startY +\n        ' V' + (startY + delta) +\n        ' A' + delta + ' ' +  delta + ' 0 0 ' + arc1 + ' ' + (startX + delta*Math.sign(deltaX)) + ' ' + (startY + 2*delta) +\n        ' H' + (endX - delta*Math.sign(deltaX)) +\n        ' A' + delta + ' ' +  delta + ' 0 0 ' + arc2 + ' ' + endX + ' ' + (startY + 3*delta) +\n        ' V' + endY);*/\n\n      // draw straight line\n      path.setAttribute('d',  `M${startX} ${startY} L ${endX} ${endY}`);\n    },\n\n    _applyRoot(root, oldRoot) {\n      if (oldRoot) {\n        oldRoot.removeEventListener('resize', this._updatePosition);\n      }\n      if (root) {\n        root.addEventListener('resize', this._updatePosition);\n        this._initArrowMarkers(root);\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      if (this._path) {\n        if (oldValue) {\n          this._path.classList.remove(oldValue);\n        }\n        if (value) {\n          this._path.classList.add(value);\n        }\n        this._applyShowDirection();\n      }\n    },\n\n    _applyShowDirection() {\n      const value = this.getShowDirection();\n      let markerId = '';\n      if (value === 'none') {\n        this._path.removeAttribute('marker-start');\n        this._path.removeAttribute('marker-end');\n      } else if (value === 'both') {\n        markerId = this.__getMarkerId();\n        this._path.setAttribute('marker-start', `url(#${markerId})`);\n        this._path.setAttribute('marker-end', `url(#${markerId})`);\n      } else if ((value === 'source' && !this.isInverted()) || (value === 'target' && this.isInverted())) {\n        markerId = this.__getMarkerId();\n        this._path.setAttribute('marker-start', `url(#${markerId})`);\n        this._path.removeAttribute('marker-end');\n      } else if ((value === 'target' && !this.isInverted()) || (value === 'source' && this.isInverted())) {\n        markerId = this.__getMarkerId();\n        this._path.removeAttribute('marker-start');\n        this._path.setAttribute('marker-end', `url(#${markerId})`);\n      }\n    },\n\n    __getMarkerId() {\n      const arrowId = 'arrow';\n      const styleClass = this.getStyleClass();\n      if (styleClass) {\n        const id = `${arrowId}-${styleClass}`;\n        // check if we have a marker with this ID\n        const root = this.getRoot();\n        try {\n          let marker = root.querySelector(`#${id}`);\n          if (!marker) {\n            const baseMarker = root.querySelector(`#${arrowId}`);\n            const newMarker = baseMarker.cloneNode(true);\n            newMarker.removeAttribute('fill');\n            newMarker.setAttribute('class', 'connection ' + styleClass);\n            newMarker.setAttribute('id', id);\n            root.querySelector('defs').appendChild(newMarker);\n          }\n        } catch (e) {\n          this.log.error('error getting arrow:', e.errorMessage);\n        }\n        return id;\n      }\n      return arrowId;\n    },\n\n    _validateConnectionPoint(value) {\n      if (!['top', 'right', 'bottom', 'left', 'auto'].includes(value)) {\n        throw new qx.core.ValidationError(\n          'Validation Error: ', value + ' is no valid connection point.'\n        );\n      }\n    },\n\n    _initArrowMarkers(svg) {\n      let defs = svg.querySelector('defs');\n      const ns = 'http://www.w3.org/2000/svg';\n      if (!defs) {\n        defs = document.createElementNS(ns, 'defs');\n        svg.appendChild(defs);\n      }\n\n      // define paths for re-use\n      let arrowPath = defs.querySelector('#h-arrow-path');\n      if (!arrowPath) {\n        arrowPath = document.createElementNS(ns, 'path');\n        arrowPath.setAttribute('id', 'h-arrow-path');\n        arrowPath.setAttribute('d', 'M 0 0 L 10 5 L 0 10 z');\n        defs.appendChild(arrowPath);\n      }\n/*\n      let vertArrowPath = defs.querySelector('#v-arrow-path');\n      if (!vertArrowPath) {\n        vertArrowPath = document.createElementNS(ns, 'path');\n        vertArrowPath.setAttribute('id', 'v-arrow-path');\n        vertArrowPath.setAttribute('d', 'M 0 10 L 10 10 L 5 0 z');\n        defs.appendChild(vertArrowPath);\n      }*/\n\n      let arrow = defs.querySelector('#arrow');\n      if (!arrow) {\n        arrow = document.createElementNS(ns, 'marker');\n        arrow.setAttribute('id', 'arrow');\n        arrow.setAttribute('viewBox', '0 0 10 10');\n        arrow.setAttribute('refX', '10');\n        arrow.setAttribute('refY', '5');\n        arrow.setAttribute('markerWidth', '5');\n        arrow.setAttribute('markerHeight', '5');\n        arrow.setAttribute('markerUnits', 'strokeWidth');\n        arrow.setAttribute('fill', 'var(--borderColor)');\n        arrow.setAttribute('orient', 'auto-start-reverse');\n        let use = document.createElementNS(ns, 'use');\n        use.setAttribute('href', '#h-arrow-path');\n        arrow.appendChild(use);\n        defs.appendChild(arrow);\n      }\n\n      /*let vertArrow = defs.querySelector('#vertical-arrow');\n      if (!vertArrow) {\n        const vertArrow = arrow.cloneNode(true);\n        vertArrow.setAttribute('id', 'vertical-arrow');\n        vertArrow.setAttribute('orient', '270');\n        defs.appendChild(vertArrow);\n      }*/\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._path = null;\n    this._sourceObserver.disconnect();\n    this._sourceObserver = null;\n    this._targetObserver.disconnect();\n    this._targetObserver = null;\n  }\n});\n","/**\n * RoundValue shows an element that contains of an icon and a value-text inside\n * a colored circle. The circle can also show a progress value in another color.\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Class.define('cv.ui.structure.tile.components.svg.RoundValue', {\n  extend: cv.ui.structure.tile.components.Value,\n  include: cv.ui.structure.tile.components.svg.MGraphicsElement,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    },\n\n    showProgress: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyShowProgress'\n    },\n\n    icon: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyIcon'\n    },\n\n    radius: {\n      check: 'Number',\n      init: 30,\n      apply: '_applyRadius',\n      transform: '_parseInt'\n    },\n\n    stroke: {\n      check: 'Number',\n      init: 2,\n      apply: '_applyStroke',\n      transform: '_parseFloat'\n    },\n\n    amount: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyAmount'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _svg: null,\n    __normalizedRadius: null,\n    _radius: null,\n    _iconSize: null,\n    _iconOffset: null,\n    _fixedRadius: null,\n\n    getSvg() {\n      return this._svg;\n    },\n\n    getParentSvg() {\n      return this._svg ? this._svg.ownerSVGElement : null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this._fixedRadius = element.hasAttribute('radius');\n      const radius = this.getRadius();\n      const strokeWidth = this.getStroke();\n      this._findParentGridLayout();\n      if (this._parentGridLayout && !this._fixedRadius) {\n        this._debouncedUpdateRadius = qx.util.Function.debounce(this._updateRadius.bind(this), 10);\n        this._parentGridLayout.addListener('changeSize', this._debouncedUpdateRadius, this);\n      }\n      const parent = this._parentGridLayout ? this._parentGridLayout.getSvg() : element;\n\n      const ns = 'http://www.w3.org/2000/svg';\n\n      // add surrounding svg node\n      const svg = this._svg = document.createElementNS(ns, 'svg');\n      this.setHeight(radius * 2);\n      this.setWidth(radius * 2);\n      svg.setAttribute('type', 'circle');\n      for (const name of ['x', 'y']) {\n        if (element.hasAttribute(name)) {\n          svg.setAttribute(name, element.getAttribute(name));\n        }\n      }\n      parent.appendChild(svg);\n\n      const group = document.createElementNS(ns, 'g');\n      group.classList.add('round-value');\n      group.setAttribute('fill', 'transparent');\n      group.setAttribute('stroke-width', strokeWidth);\n      svg.appendChild(group);\n      this._target = group;\n\n      this._applyRadius(radius);\n\n      if (!element.hasAttribute('no-background')) {\n        const bg = document.createElementNS(ns, 'circle');\n        bg.classList.add('bg');\n        if (this.__normalizedRadius) {\n          bg.setAttribute('r', '' + this.__normalizedRadius);\n        }\n        bg.setAttribute('cx', '50%');\n        bg.setAttribute('cy', '50%');\n        if (element.hasAttribute('background-color')) {\n          bg.style.stroke = element.getAttribute('background-color');\n        }\n        this._target.appendChild(bg);\n      }\n\n      this.setShowProgress(element.querySelectorAll(':scope > cv-address[target=\"progress\"], :scope > cv-address-group[target=\"progress\"]').length > 0);\n\n      if (element.hasAttribute('icon')) {\n        this._applyIcon(this.getIcon());\n      }\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      const value = document.createElementNS(ns, 'text');\n      value.setAttribute('text-anchor', 'middle');\n      value.setAttribute('alignment-baseline', 'central');\n      value.setAttribute('x', '50%');\n      value.setAttribute('y', '70%');\n      value.setAttribute('class', 'value');\n      value.setAttribute('fill', 'var(--primaryText)');\n      value.style.fontSize = `${this._iconSize-4}px`;\n      this._target.appendChild(value);\n\n      this._updateHeight();\n      this._updateWidth();\n\n      // check if we have a sum of multiple addresses, then show the amount\n      let sumGroup = element.querySelector(':scope > cv-address-group[operator=\"+\"]');\n      if (sumGroup) {\n        if (!sumGroup._instance) {\n          window.requestAnimationFrame(() => {\n            sumGroup._instance.bind('nonZeroValues', this, 'amount');\n          });\n        } else {\n          sumGroup._instance.bind('nonZeroValues', this, 'amount');\n        }\n      } else {\n        this.setAmount(element.querySelectorAll(':scope > cv-address:not([target])').length);\n      }\n\n      this._applyPosition();\n      this._applyTitle(this.getTitle());\n    },\n\n    _updateRadius() {\n      if (this._parentGridLayout) {\n        const newRadius = Math.floor((Math.min(this._parentGridLayout.getCellWidth(), this._parentGridLayout.getCellHeight())) / 2);\n        if (this.getRadius() !== newRadius) {\n          this._element.setAttribute('radius', '' + newRadius);\n        }\n      }\n    },\n\n    _applyAmount(value) {\n      let amount = this._target.querySelector('text.amount');\n      let updateIconPosition = false;\n      if (value > 1) {\n        // show it\n        if (!amount) {\n          amount = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n          amount.setAttribute('text-anchor', 'right');\n          amount.setAttribute('alignment-baseline', 'central');\n          amount.setAttribute('fill', 'var(--primaryText)');\n          amount.classList.add('amount');\n          amount.style.fontSize = `${this._iconSize - 5}px`;\n          this._target.appendChild(amount);\n          this.__updateAmountPosition();\n        }\n        if (this._iconOffset !== 5) {\n          this._iconOffset = 5;\n          updateIconPosition = true;\n        }\n        amount.textContent = value + 'x';\n      } else if (amount) {\n        amount.remove();\n        if (this._iconOffset !== 0) {\n          this._iconOffset = 0;\n          updateIconPosition = true;\n        }\n      }\n      if (updateIconPosition) {\n        this.__updateIconPosition();\n      }\n    },\n\n    __updateAmountPosition() {\n      let amount = this._target.querySelector('text.amount');\n      if (amount) {\n        const radius = this.getRadius();\n        const halfSize = this._iconSize / 2;\n        const x = radius * 0.8 - halfSize;\n        const y = radius * 0.85 - halfSize;\n        amount.setAttribute('x', `${x}`);\n        amount.setAttribute('y', `${y}`);\n      }\n    },\n\n    __updateIconPosition() {\n      const icon = this._target.querySelector('cv-icon');\n      if (icon) {\n        icon.style.fontSize = this._iconSize + 'px';\n      }\n      const iconContainer = this._target.querySelector('foreignObject.icon-container');\n      if (iconContainer) {\n        const radius = this.getRadius();\n        const halfSize = this._iconSize / 2;\n        const x = radius - halfSize + this._iconOffset;\n        const y = radius * 0.6 - halfSize;\n        iconContainer.setAttribute('x', `${x}`);\n        iconContainer.setAttribute('y', `${y}`);\n        iconContainer.setAttribute('width', this._iconSize + '');\n        iconContainer.setAttribute('height', this._iconSize + '');\n      }\n    },\n\n    _applyRadius(radius) {\n      this._updateNormalizedRadius();\n      this._iconSize = Math.round(radius / 2);\n      if (this._target) {\n        this.__updateIconPosition();\n        const value = this._target.querySelector('.value');\n        if (value) {\n          value.style.fontSize = `${this._iconSize - 4}px`;\n        }\n        this.__updateAmountPosition();\n      }\n      if (this._svg) {\n        this.setHeight(radius * 2);\n        this.setWidth(radius * 2);\n      }\n    },\n\n    _applyStroke(stroke) {\n      this._updateNormalizedRadius();\n      if (this._target) {\n        this._target.setAttribute('stroke-width', stroke);\n      }\n    },\n\n    _updateNormalizedRadius() {\n      if (this._target) {\n        const newValue = this.getRadius() - this.getStroke() / 2;\n        if (this.__normalizedRadius !== newValue) {\n          this.__normalizedRadius = newValue;\n          const bg = this._target.querySelector('circle.bg');\n          if (bg) {\n            bg.setAttribute('r', '' + this.__normalizedRadius);\n          }\n\n          const bar = this._target.querySelector('circle.bar');\n          if (bar) {\n            bar.setAttribute('r', '' + this.__normalizedRadius);\n          }\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this._target) {\n        const target = this._target.querySelector('.value');\n        if (target) {\n          target.textContent = mappedValue;\n          this._debouncedDetectOverflow();\n        }\n      }\n    },\n\n    _applyShowProgress(value) {\n      if (value) {\n        let bar = this._target.querySelector('circle.bar');\n        this._target.classList.add('shows-progress');\n        if (!bar) {\n          bar = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n          bar.classList.add('bar');\n          bar.setAttribute('r', '' + this.__normalizedRadius);\n          bar.setAttribute('cx', '50%');\n          bar.setAttribute('cy', '50%');\n          bar.setAttribute('pathLength', '100');\n          bar.setAttribute('stroke-dashoffset', '25');\n          bar.setAttribute('stroke-dasharray', '0 100');\n          if (this._element.hasAttribute('foreground-color')) {\n            bar.style.stroke = this._element.getAttribute('foreground-color');\n          }\n          this._target.appendChild(bar);\n        }\n      } else {\n        let bar = this._target.querySelector('circle.bar');\n        if (bar) {\n          this._target.removeChild(bar);\n        }\n        this._target.classList.remove('shows-progress');\n      }\n    },\n\n    _applyIcon(iconName) {\n      if (!this._target) {\n        return;\n      }\n      let icon = this._target.querySelector('cv-icon');\n      if (iconName) {\n        if (!icon) {\n          const fo = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\n          fo.setAttribute('class', 'icon-container');\n          fo.style.textAlign = 'center';\n\n          icon = document.createElement('cv-icon');\n          icon.classList.add(iconName);\n          icon.style.fontSize = this._iconSize + 'px';\n          fo.appendChild(icon);\n          this._target.appendChild(fo);\n          this.__updateIconPosition();\n        }\n      } else if (icon) {\n        this._target.remove(icon);\n      }\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n        let title = this._target.querySelector(':scope > title');\n        if (!title) {\n          title = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n          this._target.appendChild(title);\n        }\n        title.textContent = percent + '%';\n\n        const valueElement = this._target.querySelector('circle.bar');\n        valueElement.setAttribute('stroke-dasharray', `${percent} ${100 - percent}`);\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._target.classList;\n      if (oldValue && classes.contains(oldValue)) {\n        classes.remove(oldValue);\n      }\n      if (value) {\n        classes.add(value);\n      }\n    },\n\n    _detectOverflow() {\n      if (this.isVisible()) {\n        const target = this._target.querySelector('.value');\n        const sizeReference = this._target.querySelector('circle.bg').getBBox();\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > sizeReference.width) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'progress') {\n        this.setProgress(ev.detail.state);\n        ev.stopPropagation();\n        return true;\n      }\n      return super.onStateUpdate(ev);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'svg-round-value',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'radius', 'stroke', 'title'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * cv.ui.structure.tile.components.svg.RoundValue for power entities.\n * @since 2023\n * @author Tobias BrÃ¤utigam\n */\nqx.Class.define('cv.ui.structure.tile.components.energy.PowerEntity', {\n  extend: cv.ui.structure.tile.components.svg.RoundValue,\n  include: [\n    cv.ui.structure.tile.components.energy.MEntity,\n    cv.ui.structure.tile.components.energy.MConnectable\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    typeSettings: {\n      pv: {\n        icon: 'knxuf-weather_sun',\n        styling: 'tile-pv-power'\n      },\n      battery: {\n        icon: 'knxuf-measure_battery_100',\n        styling: 'tile-battery-power',\n        'foreground-color': 'var(--batteryConsumeColor)'\n      },\n      grid: {\n        icon: 'knxuf-scene_power_grid',\n        styling: 'tile-grid-power'\n      },\n      house: {\n        icon: 'knxuf-control_building_empty'\n      },\n      charger: {\n        icon: 'knxuf-veh_wallbox'\n      },\n      heatpump: {\n        icon: 'knxuf-sani_earth_source_heat_pump'\n      },\n      consumer: {\n        icon: 'knxuf-measure_smart_meter'\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyType(value) {\n      const settings = cv.ui.structure.tile.components.energy.PowerEntity.typeSettings[value];\n      if (settings) {\n        for (const attribute in settings) {\n          this._element.setAttribute(attribute, settings[attribute]);\n        }\n      }\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('id')) {\n        this._svg.setAttribute('id', element.getAttribute('id'));\n      }\n      if (!element.hasAttribute('mapping')) {\n        element.setAttribute('mapping', 'tile-kilo-watts');\n      }\n      this._noValue = element.querySelectorAll(':scope > cv-address, :scope > cv-address-group').length === 0;\n      this.setUseConnectionSum(this._noValue && this.getType() === 'house');\n      if (this._noValue && this.getType() !== 'house') {\n        // this has no addresses and therefore no values, we only show the icon then without circle\n        for (const elem of this._svg.querySelectorAll('circle, text:not(.icon)')) {\n          elem.remove();\n        }\n        this._iconSize = 32;\n        const icon = this._svg.querySelector('text.icon');\n        if (icon) {\n          icon.style.fontSize = this._iconSize + 'px';\n        }\n      }\n      window.requestAnimationFrame(() => {\n        this._applyConnectTo(this.getConnectTo());\n        this._applyConnectFrom(this.getConnectFrom());\n      });\n\n      this.addListener('changeValue', this._updateDirection, this);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'power-entity',\n      class extends QxConnector {\n        static observedAttributes = ['icon', 'type', 'stroke', 'radius', 'x', 'y', 'row', 'column', 'rowspan', 'colspan', 'foreground-color', 'connect-to', 'connect-from', 'connection-points', 'title'];\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/*\n * Copyright (c) 2023, Christian Mayer and the CometVisu contributors.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n *\n */\n\n/**\n * Aggregates values from sub-elements like other cv.ui.structure.tile.elements.AddressGroups\n * or cv.ui.structure.tile.elements.Address.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2023\n */\nqx.Class.define('cv.ui.structure.tile.elements.AddressGroup', {\n  extend: cv.ui.structure.tile.elements.Address,\n  include: cv.ui.structure.tile.MStringTransforms,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    if (!element.hasAttribute('id')) {\n      element.setAttribute('id', `address-group_${cv.ui.structure.tile.elements.AddressGroup.C++}`);\n    }\n    this.debouncedCalc = qx.util.Function.debounce(this._updateCalculation.bind(this), 10);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    C: 0\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    changeValue: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n    operator: {\n      check: ['+', '-', '/', '*'],\n      init: '+',\n      apply: '_updateCalculation'\n    },\n\n    round: {\n      check: 'Boolean',\n      init: false,\n      transform: '_parseBoolean'\n    },\n\n    factor: {\n      check: 'Number',\n      init: 1,\n      transform: '_parseFloat'\n    },\n\n    valid: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyValid'\n    },\n\n    nonZeroValues: {\n      check: 'Number',\n      init: 0,\n      event: 'changeNonZeroValues'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _i: null,\n    _values: null,\n    __value: null,\n\n    setValue(val) {\n      if (this.__value !== val) {\n        const oldValue = this.__value;\n        this.__value = val;\n        this.fireDataEvent('changeValue', val, oldValue);\n        this._applyValue(val);\n      }\n    },\n\n    getValue() {\n      return this.__value;\n    },\n\n    resetValue() {\n      this.__value = null;\n    },\n\n    getAddress() {\n      return this._element.getAttribute('id');\n    },\n\n    _init() {\n      const element = this._element;\n      this._values = new Array(element.children.length).fill(0);\n      this._stateUpdateTarget = element.parentElement;\n      element.addEventListener('stateUpdate', ev => {\n        this.onStateUpdate(ev);\n        // cancel event here\n        ev.stopPropagation();\n      });\n    },\n\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('data-value', '' + value);\n        this.fireStateUpdate(this.getAddress(), value);\n      }\n    },\n\n    _applyValid(valid) {\n      this._element.setAttribute('data-valid', '' + valid);\n    },\n\n    _updateCalculation() {\n      if (this.isConnected()) {\n        let val = 0;\n        if (this._values.length > 0) {\n          this.setNonZeroValues(this._values.filter(v => v !== 0).length);\n          switch (this.getOperator()) {\n            case '+':\n              val = this._values.reduce((accumulator, currentValue) => accumulator + currentValue, val);\n              break;\n\n            case '-':\n              // subtract all from first one\n              val = this._values[0];\n              for (let i = 1; i < this._values.length; i++) {\n                val -= this._values[i];\n              }\n              break;\n\n            case '*':\n              val = this._values.reduce((accumulator, currentValue) => accumulator * currentValue, val);\n              break;\n\n            case '/':\n              // divide all from first one\n              val = this._values[0];\n              for (let i = 1; i < this._values.length; i++) {\n                val /= this._values[i];\n              }\n              break;\n          }\n        }\n        const valid = !isNaN(val) && isFinite(val);\n        this.setValid(valid);\n        if (valid) {\n          val *= this.getFactor();\n          if (this.isRound()) {\n            val = Math.round(val);\n          }\n          this.setValue(val);\n        } else {\n          this.resetValue();\n        }\n      }\n    },\n\n    onStateUpdate(ev) {\n      const index = Array.prototype.indexOf.call(this._element.children, ev.detail.source.getElement());\n      if (index >= 0) {\n        this._values[index] = ev.detail.state;\n        this.debouncedCalc();\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address-group',\n      class extends QxConnector {\n        static observedAttributes = ['round', 'operator', 'factor'];\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n\n","/* Backend.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * <cv-backend> Custom element to define a backend connection\n */\nqx.Class.define('cv.ui.structure.tile.elements.Backend', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _name: null,\n    __applyValues: null,\n\n    _init() {\n      const element = this._element;\n      let type = element.getAttribute('type');\n      if (type && type.startsWith('class:')) {\n        const className = type.split(':').pop();\n        if (!cv.io.BackendConnections.isRegistered(className)) {\n          // wait until client class has been loaded\n          cv.io.BackendConnections.addClassLoadedListener(className, () => {\n            this._init();\n          });\n          return;\n        }\n        type = className;\n      }\n      const uriString = element.hasAttribute('uri') ? element.getAttribute('uri') : '';\n      let uri;\n      if (uriString) {\n        try {\n          uri = new URL(uriString, window.location.origin + window.location.pathname);\n        } catch (e) {\n          this.error('Error parsing uri: ' + uriString);\n        }\n      }\n\n      if (type) {\n        let credentials = null;\n        if (element.hasAttribute('username')) {\n          credentials = {\n            username: element.getAttribute('username'),\n            password: element.getAttribute('password') || ''\n          };\n        } else if (uri && uri.username) {\n          credentials = {\n            username: uri.username,\n            password: uri.password\n          };\n        }\n        const model = cv.data.Model.getInstance();\n        let backendUrl = uri ? uri.toString() : null;\n        let backendUrlConfigKey;\n        switch (type) {\n          case 'knxd':\n            backendUrlConfigKey = 'backendKnxdUrl';\n            break;\n          case 'openhab':\n            backendUrlConfigKey = 'backendOpenHABUrl';\n            break;\n          case 'mqtt':\n            backendUrlConfigKey = 'backendMQTTUrl';\n            break;\n        }\n\n        if (backendUrlConfigKey) {\n          // override by URL settings\n          if (cv.Config.URL[backendUrlConfigKey]) {\n            backendUrl = cv.Config.URL[backendUrlConfigKey];\n          } else if (!backendUrl && cv.Config.server[backendUrlConfigKey]) {\n            backendUrl = cv.Config.server[backendUrlConfigKey];\n          }\n        }\n        let name = type;\n        if (element.hasAttribute('name')) {\n          name = element.getAttribute('name');\n        } else if (!cv.io.BackendConnections.hasClient('main')) {\n          // we need one main backend\n          name = 'main';\n        } else if (cv.io.BackendConnections.getClient('main').configuredIn === 'config') {\n          qx.log.Logger.warn(\n            this,\n            `there is already a backend registered with name \"main\" and type ${type} skipping this one`\n          );\n\n          return;\n        }\n        qx.log.Logger.debug(this, 'init backend', name);\n        if (cv.io.BackendConnections.hasClient(name)) {\n          const notification = {\n            topic: 'cv.config.error',\n            title: qx.locale.Manager.tr('Config error'),\n            message: qx.locale.Manager.tr('There already exists a backend named: \"%1\"', name),\n\n            severity: 'urgent',\n            unique: true,\n            deletable: true\n          };\n\n          cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n          return;\n        }\n        const client = cv.io.BackendConnections.addBackendClient(name, type, backendUrl, 'config');\n\n        this._client = client;\n        this._name = name;\n        this.__applyValues = [];\n        client.update = data => model.updateFrom(name, data); // override clients update function\n\n        for (const data of element.querySelectorAll(':scope > cv-resource')) {\n          client.setResourcePath(data.getAttribute('name'), data.textContent.trim());\n        }\n\n        client.login(true, credentials, () => {\n          this.debug(name, 'connected');\n          if (element.hasAttribute('default') && element.getAttribute('default') === 'true') {\n            model.setDefaultBackendName(name);\n          }\n          const doSubscribe = () => {\n            for (const [address, value] of this.__applyValues) {\n              this.debug(name, 'apply update', address, value);\n              model.onUpdate(address, value, name);\n            }\n            const addressesToSubscribe = model.getAddresses(name);\n            this.debug(name, 'subscribing to', addressesToSubscribe.length, 'addresses');\n\n            if (addressesToSubscribe.length !== 0) {\n              client.subscribe(addressesToSubscribe);\n            }\n          };\n          if (cv.TemplateEngine.getInstance().isDomFinished()) {\n            doSubscribe();\n          } else {\n            qx.event.message.Bus.subscribe(\n              'setup.dom.finished',\n              function () {\n                doSubscribe();\n              },\n              this\n            );\n          }\n        });\n      } else {\n        this.error('<cv-backend> must have a type attribute');\n      }\n    },\n\n    _disconnected() {\n      if (this._client) {\n        const model = cv.data.Model.getInstance();\n        if (this._element.hasAttribute('default') && this._element.getAttribute('default') === 'true') {\n          model.resetDefaultBackendName();\n        }\n        this._client.terminate();\n        cv.io.BackendConnections.removeClient(this._client);\n        this._client.dispose();\n        this._client = null;\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'backend',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Loader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Loads external content like CSS/JS files, config-content or a template file.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Loader', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const src = element.getAttribute('src');\n      let loaderElement;\n      if (src) {\n        switch (type) {\n          case 'css':\n            loaderElement = document.createElement('link');\n            loaderElement.setAttribute('type', 'text/css');\n            loaderElement.setAttribute('rel', 'stylesheet');\n            loaderElement.setAttribute('href', src);\n            break;\n\n          case 'js':\n            loaderElement = document.createElement('script');\n            loaderElement.setAttribute('type', 'text/javascript');\n            loaderElement.setAttribute('src', src);\n            break;\n\n          case 'templates':\n            this.loadXml(src, type);\n            break;\n        }\n\n        if (loaderElement) {\n          element.appendChild(loaderElement);\n        }\n      }\n    },\n\n    loadXml(uri) {\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n\n      ajaxRequest.addListenerOnce('success', function (e) {\n        let content = e.getTarget().getResponse();\n        let htmlContent = content;\n        const target = cv.Application.structureController.getRenderTarget();\n        // we need the documents to be in HTML namespace\n        if (!htmlContent.documentElement.xmlns) {\n          let text = e.getTarget().getResponseText();\n          text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n          const parser = new DOMParser();\n          htmlContent = parser.parseFromString(text, 'text/xml');\n        }\n        let child;\n        while ((child = htmlContent.documentElement.firstElementChild)) {\n          target.appendChild(child);\n        }\n        // register custom elements for templates in this document\n        cv.Application.structureController.registerTemplates(content);\n      });\n      ajaxRequest.addListener('statusError', e => {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.handleError('filenotfound', ajaxRequest.getUrl());\n        } else {\n          this.handleError(status, null);\n        }\n      });\n\n      ajaxRequest.send();\n    },\n\n    handleError(textStatus, additionalErrorInfo) {\n      const title = qx.locale.Manager.tr('File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid XML file!');\n          break;\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: File not found, %1.', additionalErrorInfo).translate().toString();\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n\n      const notification = {\n        topic: 'cv.error',\n        title: title,\n        message: message\n      };\n\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n      this.error(this, message.toString());\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'loader',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Mapping.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Mapping maps a value to another value that can be used to show e.g. the current state.\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Mapping', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__cache = {};\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __cache: null,\n\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      // avoid adding styling elements here as they inherit this method but call the super method too\n      if (this._element.tagName.toLowerCase().endsWith('mapping')) {\n        if (value) {\n          cv.Application.structureController.addMapping(this._element.getAttribute('name'), this);\n        } else {\n          cv.Application.structureController.removeMapping(this._element.getAttribute('name'));\n        }\n      }\n    },\n\n    /**\n     *\n     * @param val {variant}\n     * @param store {Map<string, variant>?} optional stored values from other addresses\n     * @param params {Array<variant>?} optional array of parameters for the mapping\n     * @param emptyWhenNoMatch {Boolean} return empty string when no mapped value is found, otherwise the value is returned (default)\n     * @return {string|*|string}\n     */\n    mapValue(val, store, params, emptyWhenNoMatch = false) {\n      if (Object.prototype.hasOwnProperty.call(this.__cache, val)) {\n        return this.__cache[val];\n      }\n      let mappedValue = emptyWhenNoMatch ? '' : '' + val;\n      const exactMatch = this._element.querySelector(':scope > entry[value=\"' + val + '\"]');\n\n      let type = this._element.hasAttribute('type') ? this._element.getAttribute('type') : 'string';\n      if (exactMatch) {\n        mappedValue = this._convert(exactMatch.innerHTML.trim(), type);\n        this.__cache[val] = mappedValue;\n        return mappedValue;\n      }\n      const formula = this._element.querySelector(':scope > formula');\n      if (formula) {\n        if (!formula._formula) {\n          let content = formula.textContent;\n          formula._formula = new Function('x', 'store', 'params', 'let y;' + content + '; return y;');\n        }\n        mappedValue = this._convert(formula._formula(val, store, params), type);\n        return mappedValue;\n      }\n      const entries = this._element.querySelectorAll(':scope > entry');\n      let defaultValue = null;\n\n      const mapped = Array.from(entries).some(entry => {\n        let matches = false;\n        let isDefaultValue = entry.hasAttribute('default') && entry.getAttribute('default') === 'true';\n        if (entry.hasAttribute('value')) {\n          const value = entry.getAttribute('value');\n          if (value === (val ? val : 'NULL') || value === '*') {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = this._convert(value, type);\n          }\n        } else if (entry.hasAttribute('range-min')) {\n          const rangeMin = parseFloat(entry.getAttribute('range-min'));\n          const rangeMax = entry.hasAttribute('range-max')\n            ? parseFloat(entry.getAttribute('range-max'))\n            : Number.POSITIVE_INFINITY;\n          const floatValue = parseFloat(val);\n          if (rangeMin <= floatValue && floatValue <= rangeMax) {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = rangeMin;\n          }\n        }\n        return matches;\n      });\n      if (!mapped && defaultValue !== null) {\n        mappedValue = this.mapValue(defaultValue);\n      }\n      this.__cache[val] = mappedValue;\n      return mappedValue;\n    },\n\n    _convert(value, type) {\n      switch (type.toLowerCase()) {\n        case 'boolean':\n          return value === 'true';\n        case 'integer':\n          return parseInt(value);\n        case 'float':\n          return parseFloat(value);\n        default:\n          return value;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__cache = null;\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'mapping',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* StateNotification.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Parse notification settings and load them into the cv.core.notifications.Router\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.StateNotification', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n    const stateConfig = {};\n    const elem = this._element;\n    const target =\n      cv.core.notifications.Router.getTarget(elem.getAttribute('target')) || cv.ui.NotificationCenter.getInstance();\n\n    const addressContainer = elem.querySelector('cv-addresses');\n\n    const config = {\n      target: target,\n      severity: elem.getAttribute('severity'),\n      skipInitial: elem.getAttribute('skip-initial') !== 'false',\n      deletable: elem.getAttribute('deletable') !== 'false',\n      unique: elem.getAttribute('unique') === 'true',\n      valueMapping: addressContainer.getAttribute('value-mapping'),\n      addressMapping: addressContainer.getAttribute('address-mapping'),\n      enabled: !elem.hasAttribute('enabled') || elem.getAttribute('enabled') === 'true'\n    };\n    if (elem.hasAttribute('id')) {\n      config.id = elem.getAttribute('id');\n      // notifications with id can be changed by the system backend, so we need to listen to some addresses\n      const model = cv.data.Model.getInstance();\n      model.addUpdateListener(`notification:${config.id}:enabled`, this._onStateUpdate, this, 'system');\n      model.addUpdateListener(`notification:${config.id}:severity`, this._onStateUpdate, this, 'system');\n\n      model.onUpdate(`notification:${config.id}:enabled`, config.enabled, 'system');\n      model.onUpdate(`notification:${config.id}:severity`, config.severity, 'system');\n    }\n\n    const name = elem.getAttribute('name');\n    if (name) {\n      config.topic = 'cv.state.' + name;\n    }\n    const icon = elem.getAttribute('icon');\n    if (icon) {\n      config.icon = icon;\n      const iconClasses = elem.getAttribute('icon-classes');\n      if (iconClasses) {\n        config.iconClasses = iconClasses;\n      }\n    }\n\n    // templates\n    const titleElem = elem.querySelector('cv-title-template');\n    if (titleElem) {\n      config.titleTemplate = titleElem.innerHTML;\n    }\n    const messageElem = elem.querySelector('cv-message-template');\n    if (messageElem) {\n      config.messageTemplate = messageElem.innerHTML;\n    }\n\n    // condition\n    const conditionElem = elem.querySelector('cv-condition');\n    let condition = conditionElem.textContent;\n    if (condition === 'true') {\n      condition = true;\n    } else if (condition === 'false') {\n      condition = false;\n    }\n    config.condition = condition;\n\n    let address;\n    for (const addressElement of addressContainer.querySelectorAll(':scope > cv-address')) {\n      address = addressElement.textContent.trim();\n      if (!Object.prototype.hasOwnProperty.call(stateConfig, address)) {\n        stateConfig[address] = [];\n      }\n      const addressConfig = Object.assign({}, config);\n      let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n      switch (addressElement.getAttribute('mode')) {\n        case 'disable':\n          mode = 0;\n          break;\n        case 'read':\n          mode = 1;\n          break;\n        case 'write':\n          mode = 2;\n          break;\n        case 'readwrite':\n          mode = 1 | 2;\n          break;\n      }\n      addressConfig.addressConfig = {\n        transform: addressElement.getAttribute('transform'),\n        mode: mode,\n        selector: addressElement.getAttribute('selector'),\n        ignoreError: addressElement.getAttribute('ignore-error') === 'true',\n        qos: (addressElement.getAttribute('qos') || 0) | 0, // force integer\n        retain: addressElement.getAttribute('retain') === 'true',\n        variantInfo: addressElement.getAttribute('variant')\n      };\n      stateConfig[address].push(addressConfig);\n    }\n    cv.core.notifications.Router.getInstance().registerStateUpdateHandler(stateConfig);\n  },\n\n    _onStateUpdate(address, state, initial, changed) {\n      const [, id, property] = address.split(':');\n      const router = cv.core.notifications.Router.getInstance();\n      if (property === 'enabled') {\n        router.enableStateUpdateHandler(id, state == 1);\n      } else if (property === 'severity') {\n        router.changeStateUpdateHandlerSeverity(id, state);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'state-notification',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Styling.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Styling maps a value to another value that can be used to style a component\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Styling', {\n  extend: cv.ui.structure.tile.elements.Mapping,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      if (value) {\n        cv.Application.structureController.addStyling(this._element.getAttribute('name'), this);\n      } else {\n        cv.Application.structureController.removeStyling(this._element.getAttribute('name'));\n      }\n    },\n\n    mapValue(val, store, params) {\n      return super.mapValue(val, store, params, true);\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'styling',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Group.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a group of widgets that can be hidden (works like the <detail> HTML Element)\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Group', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      let label = null;\n      let summary = null;\n      const needsSummary = element.hasAttribute('name') || element.hasAttribute('icon');\n      if (needsSummary) {\n        summary = element.querySelector(':scope > summary');\n        if (!summary) {\n          summary = document.createElement('summary');\n          element.insertBefore(summary, element.firstChild);\n        }\n        if (element.hasAttribute('name')) {\n          label = element.querySelector(':scope > summary > label.title');\n          if (!label) {\n            label = document.createElement('label');\n            label.classList.add('title');\n            summary.insertBefore(label, summary.firstChild);\n          }\n          label.classList.add('last-of-title');\n          label.textContent = element.getAttribute('name');\n        }\n        if (element.hasAttribute('icon')) {\n          let icon = element.querySelector(':scope > summary > cv-icon.title');\n          if (!icon) {\n            icon = document.createElement('cv-icon');\n            icon.classList.add('title');\n            summary.insertBefore(icon, summary.firstChild);\n          }\n          if (!label) {\n            icon.classList.add('last-of-title');\n          }\n          icon.classList.add(element.getAttribute('icon'));\n        }\n      }\n      const empty = !element.querySelector(':scope > *:not(summary)');\n      if (empty) {\n        element.classList.add('empty');\n      } else if (summary) {\n        qx.event.Registration.addListener(summary, 'click', this._toggleOpen, this);\n      }\n    },\n\n    _toggleOpen() {\n      if (this._element.hasAttribute('open')) {\n        this._element.removeAttribute('open');\n      } else {\n        this._element.setAttribute('open', 'true');\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'summary') {\n          let target = this._element.querySelector(':scope > summary > label.value');\n\n          if (!target) {\n            target = document.createElement('label');\n            target.classList.add('value');\n            const summary = this._element.querySelector(':scope > summary');\n            summary.appendChild(target);\n          }\n          target.textContent = ev.detail.state;\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'group',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a new sub-page and adds a corresponding link to the current page.\n *\n * @ignore(InstallTrigger)\n * @author Tobias BrÃ¤utigam\n * @since 2021\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Page', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visibility: {\n      refine: true,\n      init: 'excluded'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _supportsContentVisibility: null,\n    _visibleDisplayMode: null,\n\n    _init() {\n      const browserEngine = qx.core.Environment.get('browser.name');\n      if (browserEngine.includes('firefox') || browserEngine.includes('safari')) {\n        // firefox/safari do not support content-visibility CSS property\n        // see: https://caniuse.com/css-content-visibility\n        this._element.classList.add('no-content-visibility');\n        this._supportsContentVisibility = false;\n      } else {\n        this._supportsContentVisibility = true;\n      }\n    },\n\n    _applyVisibility(value) {\n      switch (value) {\n        case 'visible':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'visible';\n          } else if (this._visibleDisplayMode) {\n            this._element.style.display = this._visibleDisplayMode || 'initial';\n          }\n          break;\n\n        case 'hidden':\n        case 'excluded':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'hidden';\n          } else {\n            this._visibleDisplayMode = getComputedStyle(this._element).getPropertyValue('display');\n            this._element.style.display = 'none';\n          }\n          break;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'page',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'row',\n      class extends HTMLElement {\n        constructor() {\n          super();\n          if (this.hasAttribute('colspan')) {\n            this.classList.add('colspan-' + this.getAttribute('colspan'));\n          }\n          if (this.hasAttribute('rowspan')) {\n            this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n          }\n        }\n      }\n    );\n  }\n});\n","/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a popup that contains arbitrary content and can be opened as an overlay over the current UI.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Popup', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _closeButton: null,\n\n    _init() {\n      super._init();\n      const popup = this._element;\n      const closeable = !popup.hasAttribute('closeable') || popup.getAttribute('closeable') === 'true';\n      if (closeable) {\n        this._closeButton = document.createElement('button');\n        this._closeButton.classList.add('close');\n        const icon = document.createElement('i');\n        icon.classList.add('ri-close-line');\n        this._closeButton.appendChild(icon);\n        popup.insertBefore(this._closeButton, popup.firstChild);\n        this._closeButton.addEventListener('click', () => this.close());\n      }\n      popup.addEventListener('close', ev => {\n        this.close();\n      });\n      if (popup.hasAttribute('title')) {\n        const header = document.createElement('header');\n        popup.insertBefore(header, popup.firstChild);\n        const title = document.createElement('h2');\n        title.textContent = popup.getAttribute('title');\n        header.appendChild(title);\n      }\n      if (popup.hasAttribute('auto-close-timeout')) {\n        const timeoutSeconds = parseInt(popup.getAttribute('auto-close-timeout'));\n\n        if (!isNaN(timeoutSeconds)) {\n          this._autoCloseTimer = new qx.event.Timer(timeoutSeconds * 1000);\n          this._autoCloseTimer.addListener('interval', () => {\n            this._autoCloseTimer.stop();\n            this.close();\n          });\n        } else {\n          this.error('invalid auto-close-timeout value:', popup.getAttribute('auto-close-timeout'));\n        }\n      }\n    },\n\n    open() {\n      const popup = this._element;\n      if (!popup.hasAttribute('open')) {\n        popup.setAttribute('open', '');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.registerModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.start();\n        }\n      }\n    },\n\n    close() {\n      const popup = this._element;\n      if (popup) {\n        popup.removeAttribute('open');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.unregisterModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.stop();\n        }\n        popup.dispatchEvent(new CustomEvent('closed'));\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget.\n     * The popup handles the special address-targets:\n     *  - open: opens the popup when the address value is 'true' or 1 => no auto closing\n     *  - close: closes the popup when the address value is 'false' or 0 => no auto opening\n     *  - open-close: the upper both combined => popup visibility fully dependent on the address value, auto-opening + auto-closing\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'open':\n            if (ev.detail.state) {\n              this.open();\n            }\n            break;\n\n          case 'open-close':\n            if (ev.detail.state) {\n              this.open();\n            } else {\n              this.close();\n            }\n            break;\n\n          case 'close':\n            if (!ev.detail.state) {\n              this.close();\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n            break;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_autoCloseTimer');\n    if (this._closeButton) {\n      this._closeButton.remove();\n      this._closeButton = null;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'popup',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    },\n\n    outdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOutdated'\n    },\n\n    checkOutdated: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyCheckOutdated'\n    },\n\n    outdatedMessage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyOutdatedMessage'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    fullscreenChanged: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n    _dateFormat: null,\n    _checkOutdatedTimerId: null,\n    _lastUpdate: null,\n    _maxAge: null,\n    _hideTimer: null,\n\n    _checkEnvironment() {\n      super._checkEnvironment();\n      const parent = this._element.parentElement;\n      let isWidget = parent.localName === 'cv-widget' || !!document.getElementById(parent.localName.substring(3));\n      this.setWidget(isWidget);\n    },\n\n    _init() {\n      super._init();\n      this._dateFormat = new qx.util.format.DateFormat(qx.locale.Date.getDateFormat('medium') + ' ' + qx.locale.Date.getTimeFormat('medium'));\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n      if (this._element.querySelector(':scope > label.title')) {\n        this._element.classList.add('has-title');\n      }\n\n      this._hideTimer = new qx.event.Timer(5000);\n      this._hideTimer.addListener('interval', () => {\n        const elem = this._element.querySelector(':scope > .outdated-value');\n        if (elem.style.display !== 'none') {\n          elem.style.display = 'none';\n        }\n        this._hideTimer.stop();\n      });\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    _applyOutdated(value) {\n      let elem = this._element.querySelector(':scope > .outdated');\n      if (value) {\n        this._element.classList.add('outdated');\n        if (!elem) {\n          elem = document.createElement('div');\n          elem.classList.add('outdated');\n          elem.textContent = '!';\n          this._element.insertBefore(elem, this._element.firstElementChild);\n          // capture all clicks by stealing the initial event\n          elem.addEventListener('pointerdown', ev => {\n            ev.stopImmediatePropagation();\n          });\n          elem.addEventListener('click', ev => {\n            // show last updated value for 5 seconds\n            let valueElem = this._element.querySelector(':scope > .outdated-value');\n            if (!valueElem) {\n              valueElem = document.createElement('div');\n              valueElem.classList.add('outdated-value');\n              valueElem.textContent = this.getOutdatedMessage();\n              this._element.appendChild(valueElem);\n              this._element.insertBefore(valueElem, elem.nextElementSibling);\n              // capture all clicks by stealing the initial event\n              valueElem.addEventListener('pointerdown', ev => {\n                ev.stopImmediatePropagation();\n                valueElem.style.display = 'none';\n              });\n            } else {\n              valueElem.style.display = 'block';\n            }\n            this._hideTimer.start();\n          });\n        }\n        elem.style.display = 'block';\n      } else {\n        this._element.classList.remove('outdated');\n        if (elem) {\n          elem.style.display = 'none';\n        }\n      }\n    },\n\n    _applyOutdatedMessage(value) {\n      this._element.setAttribute('title', value);\n      let valueElem = this._element.querySelector(':scope > .outdated-value');\n      if (valueElem) {\n        valueElem.textContent = value;\n      }\n    },\n\n    _applyCheckOutdated(value) {\n      const timer = qx.util.TimerManager.getInstance();\n      if (value) {\n        this._checkOutdatedTimerId = timer.start(this.checkOutdated, 5000, this);\n      } else if (this._checkOutdatedTimerId) {\n        timer.stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    },\n\n    checkOutdated() {\n      if (this._lastUpdate instanceof Date) {\n        if (isNaN(this._lastUpdate.getTime())) {\n          this.setOutdated(true);\n          this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n        } else {\n          const age = Math.floor((Date.now() - this._lastUpdate.getTime()) / 1000);\n          this.setOutdated(age > this._maxAge);\n          this.setOutdatedMessage(qx.locale.Manager.tr('Last update: %1', this._dateFormat.format(this._lastUpdate)));\n        }\n      } else if (this._lastUpdate === '-') {\n        this.setOutdated(true);\n        this.setOutdatedMessage(qx.locale.Manager.tr('Last update: unknown'));\n      } else {\n        this.error('last-update value must be a Date object, but is of type:', typeof this._lastUpdate, this._lastUpdate);\n        this.resetOutdatedMessage();\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else if (this._headerFooterParent) {\n        const target = this._headerFooterParent;\n        let closeButton = target.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          target.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        target.classList.add('popup');\n        if (this._fullScreenMode) {\n          target.classList.add('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else if (this._headerFooterParent) {\n        this._headerFooterParent.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._headerFooterParent.classList.remove('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        let closeButton = this._headerFooterParent.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          case 'last-update':\n            this._maxAge = ev.detail.targetConfig && ev.detail.targetConfig.length > 0 ? parseInt(ev.detail.targetConfig.shift()) : Number.POSITIVE_INFINITY;\n            this._lastUpdate = ev.detail.state;\n            this.checkOutdated();\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    },\n\n    /*\n    ***********************************************\n      DESTRUCTOR\n    ***********************************************\n    */\n    destruct() {\n      this._disposeObjects('_dateFormat');\n      if (this._checkOutdatedTimerId) {\n        qx.util.TimerManager.getInstance().stop(this._checkOutdatedTimerId);\n        this._checkOutdatedTimerId = null;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows two half sized widgets as pair.\n */\nqx.Class.define('cv.ui.structure.tile.widgets.WidgetPair', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'widget-pair',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"],"mappings":"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"}