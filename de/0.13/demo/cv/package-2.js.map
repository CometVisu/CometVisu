{"version":3,"names":["_next","_throw","key","arg","info","gen","value","error","reject","done","resolve","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","asyncGeneratorStep","err","undefined","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","_createClass","Constructor","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","call","TypeError","Number","_classCallCheck","instance","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_createForOfIteratorHelper","allowArrayLike","it","iterator","Array","isArray","_unsupportedIterableToArray","F","s","n","_e","f","normalCompletion","didErr","step","next","_e2","minLen","_arrayLikeToArray","toString","slice","name","from","test","arr","len","arr2","$$dbClassInfo","dependsOn","usage","require","defer","qx","Bootstrap","executePendingDefers","Class","define","extend","core","type","implement","cv","ui","structure","IController","__P_72_0","bom","Stylesheet","includeFile","util","ResourceManager","getInstance","toUri","replace","Config","forceReload","Date","now","locale","Manager","addListener","_onChangeLocale","statics","PREFIX","__P_72_1","__P_72_2","MAPPING_PARAM_REGEX","register","webComponentName","qxClass","onComponentCreated","element","tagName","toLowerCase","hasOwnProperty","QxClass","push","log","Logger","properties","renderTarget","check","init","document","body","namespace","members","__P_72_3","__P_72_4","getHtmlStructure","supports","feature","subfeature","initLayout","__P_72_5","location","hash","scrollToPage","substring","getInitialPageId","onHistoryRequest","anchor","pageId","skipHistory","page","querySelector","classList","contains","_step","_iterator","querySelectorAll","remove","_step2","_iterator2","add","parentElement","nodeName","headline","getAttribute","pageTitle","History","addToHistory","event","message","Bus","dispatchByName","warn","parseBackendSettings","xml","_this","io","BackendConnections","initBackendClient","login","configSettings","credentials","debug","startInitialRequest","parseSettings","config","_this2","settings","configElement","documentElement","bindClickToWidget","translate","cacheUsed","templates","ajaxRequest","request","Xhr","set","accept","cache","addListenerOnce","child","content","getTarget","getResponse","getRenderTarget","registerTemplates","xmlns","text","getResponseText","DOMParser","parseFromString","firstElementChild","appendChild","observeVisibility","TemplateEngine","setDomFinished","status","getTransport","Request","isSuccessful","send","forEach","template","customElements","tile","Controller","_TemplatedElement","_super","_class","TemplatedElement","preParse","_this3","_regeneratorRuntime","mark","_callee","theme","data","wrap","_context","prev","hasAttribute","window","matchMedia","matches","setAttribute","Model","updateFrom","addEventListener","abrupt","stop","createUI","_step3","observer","IntersectionObserver","entries","entry","isIntersecting","removeAttribute","unobserve","root","_iterator3","iframe","observe","doc","rememberKeys","useKeys","language","getLanguage","match","exec","search","_trKeys","_i","_arr","_step4","attr","_iterator4","concat","trNameElement","_match","translation","textContent","trim","_step5","_iterator5","trTextElement","_key","_translation","doScreenSave","screensave_page","getInitialAddresses","firstPage","id","addMapping","mapping","removeMapping","mapValue","mappingName","store","params","JSON","parse","replaceAll","addStyling","styling","removeStyling","styleValue","stylingName","parseLabel","cvTestMode","Application","structureController","destruct","removeListener","_HTMLElement","_super2","templateId","_this4","controller","getElementById","_step6","slotAttributes","cloneNode","_iterator6","getAttributeNames","_step7","_iterator7","_loop","slot","slotName","replacementSelector","slotParentScope","parseInt","slotContents","attrs","l","attributes","includes","slotContent","newNode","keys","attrName","parentNode","insertBefore","replaced","_i2","children","targets","targetName","endsWith","elem","_toConsumableArray","startsWith","innerHTML","_wrapNativeSuper","HTMLElement","Mixin","_onPointerDownBounded","_onPointerDown","openedPopups","events","closed","_childPopup","_initPopupChild","popup","_element","Registration","_openPopupChild","last","parent","open","_closePopupChild","close","registerModalPopup","blocker","createElement","style","display","MPopup","unregisterModalPopup","removeEventListener","index","indexOf","splice","ev","Tree","isChildOf","preventDefault","stopImmediatePropagation","Timer","once","hasMixin","MVisibility","__P_73_0","refresh","_refreshTimer","_lastRefresh","_applyRefresh","restartWith","__P_73_1","isVisible","start","getData","getInterval","_disposeObjects","MRefresh","_observeVisibility","_instance","setVisible","visible","_observer","ResizeObserver","getResizeTarget","some","fireDataEvent","resized","resizeTarget","nullable","_applyResizeTarget","oldElement","disconnect","MResize","connected","_initialized","_applyConnected","_init","_disconnected","getElement","QxConnector","isSubClassOf","elements","AbstractCustomElement","Error","setConnected","oldValue","newValue","hasProperty","styleClass","enabled","visibility","widget","inPopup","_writeAddresses","_headerFooterParent","_checkIfWidget","isWidget","isPopup","localName","setInPopup","setWidget","hasReadAddress","writeAddresses","address","onStateUpdate","stopPropagation","appendToHeader","align","header","targetParent","getHeader","selector","appendToFooter","footer","getFooter","_applyValue","isConnected","mappedValue","sprintf","toLocaleString","_updateValue","setStyleClass","_applyStyleClass","classes","_applyEnabled","_applyVisibility","opacity","detail","setEnabled","state","setVisibility","setValue","components","AbstractComponent","subscribe","_update","_list","list","listItems","activePage","startPage","currentPage","li","_createListItem","unshift","replaceChildren","a","unsubscribe","_QxConnector","Breadcrumbs","__P_74_0","Map","on","onClass","offClass","onValue","offValue","progress","transform","__P_74_1","__P_74_2","_parseInt","val","intVal","isNaN","setType","setName","setProgress","setOnValue","setOffValue","eventSource","level","addr","click","onClicked","pointerup","onPointerUp","pointerdown","onPointerDown","getOwnPropertyNames","eventName","triggerAddresses","filter","setOn","getOnValue","hasDown","hasUp","_initProgress","Math","PI","svg","createElementNS","circle","Button","superclass","getType","_applyOn","isOn","getOffValue","setId","updateValue","getOnClass","getOffClass","_applyProgress","valueElement","_applyName","source","Address","addressElement","createRipple","relPath","baseVersion","Version","VERSION","split","join","CustomEvent","dispatchEvent","button","currentTarget","container","diameter","max","clientWidth","clientHeight","radius","width","height","x","clientX","offsetLeft","y","clientY","offsetTop","offsetParent","left","top","ripple","__P_85_0","__P_85_1","model","backendName","addAddress","mode","getState","fireStateUpdate","addUpdateListener","allowDuplicates","encoding","encodedValue","Transform","encodeBusAndRaw","raw","lastSentValue","delay","getClient","write","bus","transformedState","decode","bubbles","cancelable","addressValue","variant","isRead","isWrite","getValue","Clazz","exports","Op","hasOwn","obj","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","methodName","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","awrap","async","iter","object","reverse","pop","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","include","ChartCounter","DEFAULT_ASPECT_RATIO","JS_LOADED","_ref","timer","counter","d3","ScriptLoader","includeScript","_x","_x2","formatDefaultLocale","decimal","getDecimalSeparator","thousands","getGroupSeparator","grouping","currency","timeFormatDefaultLocale","dateTime","date","time","periods","getAmMarker","getPmMarker","days","getDayNames","map","t","shortDays","months","getMonthNames","shortMonths","CONFIG","currentSeries","currentPeriod","_id","_downloadedImage","_url","_headers","_request","_width","_height","_loaded","_dataSetConfigs","_initializing","_navigationEnabled","__P_75_0","__P_75_1","__P_75_2","__P_75_3","_dot","_svg","_tooltip","_titleString","__P_75_4","__P_75_5","_chartConf","_callee2","chartId","inBackground","title","span","seriesSelection","_span","option","_s","_button","popupAddress","tileAddress","tileWidget","noToolTips","format","timeFormat","formatString","datasetSources","_context2","Chart","_loadData","setCurrentSeries","getCurrentSeries","_buttonFactory","tr","_onSeriesPrev","_seriesToShort","_onSeriesChange","getComputedStyle","getPropertyValue","disabled","_onSeriesNext","onUpdate","_onRendered","setRefresh","select","append","_onPointerEntered","_onPointerMoved","_onPointerLeft","targetTouches","_helpers","linePath","pathRect","node","getBoundingClientRect","passive","multiTimeFormat","d","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","z","src","color","curve","curveLinear","marginTop","marginRight","marginBottom","marginLeft","aspectRatio","xType","scaleTime","xFormat","yType","scaleLinear","yFormat","yLabel","strokeLinecap","strokeLinejoin","strokeWidth","strokeOpacity","mixBlendMode","showArea","showXAxis","showYAxis","xPadding","__P_75_6","targetDataset","ts","aggregationInterval","mins","round","_renderChart","setCurrentPeriod","getCurrentPeriod","resetCurrentPeriod","_refreshData","nextButton","client","url","dataSets","series","end","interval","promises","dataSet","chartType","item","part","toUpperCase","parseFloat","getResourcePath","Fetch","cachedFetch","ttl","getRefresh","hasCustomChartsDataProcessor","processChartsData","_onStatusError","all","responses","_onSuccess","chartData","tsdata","_step4$value","_slicedToArray","assign","overflow","requestAnimationFrame","setTimeout","retries","clearTimeout","_this$_getSize","_getSize","_this$_getSize2","padding","containerWidth","offsetWidth","containerHeight","offsetHeight","formatsArray","found","fmt","multiFormat","notifications","Router","dispatchMessage","severity","stringify","_getSvgElement","empty","single","X","Y","Z","O","T","_this5","shift","xDomain","extent","minVal","min","maxVal","yDomain","zDomain","InternSet","I","range","has","maxValue","toFixed","xTicks","yTicks","additionalXRangePadding","xRange","yRange","xAxis","axisBottom","ticks","tickSizeOuter","tickFormat","yAxis","axisLeft","showGrid","xGrid","tickSize","yGrid","yAxisElement","label","g","xBar","xzScale","lineGroups","areaGroups","barGroups","stackedBarGroups","lineFunctions","areaFunctions","_loop2","idx","curveName","curveFunction","curveStep","curveNatural","line","minY","area","y0","y1","scaleBand","xz","size","lineContainer","fill","stroke","areaContainer","__P_75_7","barContainer","domain","bandwidth","_loop3","_loop4","_step8","_iterator8","_loop5","_step9","_iterator9","_loop6","transition","duration","ease","easeLinear","selectAll","enter","linear","yMin","_this6","__P_75_8","relatedTarget","raise","dispatch","center","xm","ym","_d3$pointer","pointer","_d3$pointer2","_this$_helpers","_this$_chartConf","least","hypot","scaleFactorX","scaleFactorY","xOffset","cursorOffset","pointerType","timeString","lineTitle","property","icon","_button$classList","chartTitle","_shownDateRange","DateFormat","setHours","getDateTimeFormat","setDate","trc","getWeekNumber","setMonth","getFullYear","yearStart","ceil","throttleInterval","CC_COUNTER","__P_76_0","setThrottleInterval","addresses","_mode","variantInfo","parser","pure","widgets","ColorChooser","makeAddressListFn","Color","path","$$type","layout","colspan","controls","getThrottleInterval","parseAttributes","_onColorChanged","getDomString","composedPath","_onDomReady","setResizeTarget","invalidateScreensize","getColor","rgb","getComponent","v","__P_76_1","r","b","padStart","alpha","backgroundColor","_idRegex","__P_77_0","_transformId","Icon","_applyId","_applyColor","get","img","base","origin","pathname","URL","useProxy","rest","Client","getBaseUrl","searchParams","btoa","_loadImage","XMLHttpRequest","responseType","setRequestHeader","onreadystatechange","readyState","DONE","createObjectURL","response","onload","revokeObjectURL","random","Image","_e3","refine","_target","_timer","_model","_getModel","_filterModel","_sortModel","_limit","_modelInstance","refreshOnUpdate","Function","readAddresses","evCopy","sortBy","sortModifier","right","leftVal","rightVal","localeCompare","options","proxyParam","listmodel","Registry","modelInstance","_entry$split$map","_entry$split$map2","getModel","script","innerText","List","_callee3","newModel","whenEmptyTemplate","emptyModel","emptyElem","itemTemplate","_context3","t0","t1","sort","removeChild","html","_elem$getAttribute$sp","_elem$getAttribute$sp2","ListItem","fireEvent","appearance","depth","domReady","showLabels","_applyAppearance","main","_applyDepth","isDomReady","_generateMenu","_onDomAppended","setDomReady","_applyModel","rootList","ham","href","onclick","_onHamburgerMenu","_onPageChange","_onSwipe","_icon","setShowLabels","setModel","__P_78_0","_rootList","pageName","pageIcon","isShowLabels","createTextNode","onClick","toggleClass","toggle","_closeAll","getDirection","current","previousElementSibling","except","_openDetail","first","_closeDetail","parentList","currentLevel","pages","getDepth","details","summary","_pageIcon","expander","subList","pageElement","link","activeName","Menu","_currentState","MenuAction","hasAddress","PL_COUNTER","__P_79_0","pluginName","baseName","scriptLoader","Plugin","loadPluginPart","plugins","isFinished","Part","getParts","load","_applyVisible","__P_80_0","__P_80_1","__P_80_2","__P_80_3","__P_80_4","__P_80_5","__P_80_6","__P_80_7","__P_80_8","_queuedFitText","RoundProgress","hasFixedRadius","normalizedRadius","setMin","setMax","ns","bg","bar","_bg","_bar","_bg2","isPropertyInitialized","getProgress","__P_80_9","angle","angleRad","cos","sin","valueInRange","getMin","percent","getMax","_fitText","__P_80_10","getContext","compStyle","font","metrics","measureText","factor","fontSize","floor","_applyText","__P_81_0","__P_81_1","__P_81_2","Select","_sendSelection","predictive","stepWidth","showValue","__P_82_0","__P_82_1","Slider","_applyThrottleInterval","oninput","setStepWidth","setShowValue","_applyShowValue","decreaseElement","onDecrease","increaseElement","onIncrease","throttle","onInput","trailing","abort","_applyMin","_applyMax","valueLabel","firstChild","isShowValue","__P_82_2","getStepWidth","Spinner","setMode","decrease","decreaseIcon","increase","increaseIcon","getMode","__P_83_0","_queuedOverflowDetection","_debouncedDetectOverflow","Value","debounce","_detectOverflow","__P_84_0","setText","_name","__P_86_0","uri","uriString","username","password","backendUrlConfigKey","backendUrl","server","hasClient","configuredIn","notification","topic","unique","deletable","addBackendClient","_client","update","setResourcePath","setDefaultBackendName","doSubscribe","_step2$value","addressesToSubscribe","getAddresses","isDomFinished","resetDefaultBackendName","terminate","removeClient","dispose","Backend","loaderElement","loadXml","htmlContent","handleError","getUrl","textStatus","additionalErrorInfo","actions","Loader","__P_87_0","Mapping","exactMatch","_convert","formula","_formula","defaultValue","isDefaultValue","rangeMin","rangeMax","POSITIVE_INFINITY","floatValue","stateConfig","NotificationCenter","addressContainer","skipInitial","valueMapping","addressMapping","_onStateUpdate","iconClasses","titleElem","titleTemplate","messageElem","messageTemplate","condition","addressConfig","ignoreError","qos","retain","registerStateUpdateHandler","initial","changed","_address$split","_address$split2","router","enableStateUpdateHandler","changeStateUpdateHandlerSeverity","StateNotification","Styling","Group","_toggleOpen","_supportsContentVisibility","_visibleDisplayMode","InstallTrigger","contentVisibility","_class2","Page","_closeButton","Popup","timeoutSeconds","_autoCloseTimer","backgroundImage","fullscreenChanged","_fullScreenMode","Tile","setBackgroundImage","resetPopup","_applyBackgroundImage","overlay","closeButton","setPopup","keepState","_applyPopup","restart"],"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MPopup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MRefresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MVisibility.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/MResize.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/AbstractCustomElement.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/AbstractComponent.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Breadcrumbs.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Button.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Address.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Chart.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Color.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Icon.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/List.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/ListItem.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Menu.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/MenuAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Plugin.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/RoundProgress.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Select.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Slider.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Spinner.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/components/Value.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Backend.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Loader.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Mapping.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/StateNotification.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/elements/Styling.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Popup.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/tile/widgets/Tile.js"],"sourcesContent":["/* Controller.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Controller for the 'tile' structure.\n *\n * This structure is based on web-components and does not need a parser to work.\n * The config file is directly attached to the document body.\n * The widgets in this structure register a customElement and the browser automatically creates instances\n * of this widgets once the customElement is added to the body.\n *\n * The basic structure is a set of pages that contain a list of tiles.\n * Each tile contains a grid of 3 rows and 3 columns. The components can be added to a cell of that grid\n * but also can spread over more than one cell by using row-/column spanning.\n *\n * This structure provides some tiles with a pre-defined content, e.g. a <cv-switch> which\n * contains of a button in the middle of the tile and a primary- and secondary label in the third row.\n *\n * Those pre-defined tiles are provided by a <template> (@see https://developer.mozilla.org/de/docs/Web/HTML/Element/template)\n * User are able to define own templates for re-usable tiles if they need one that this structure does not provide.\n *\n * @asset(structures/tile/*)\n * @author Tobias BrÃ¤utigam\n * @since 2022\n * @ignore(IntersectionObserver)\n */\nqx.Class.define('cv.ui.structure.tile.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__HTML_STRUCT = '';\n    qx.bom.Stylesheet.includeFile(\n      qx.util.ResourceManager.getInstance().toUri('designs/tile-globals.scss').replace('.scss', '.css') +\n        (cv.Config.forceReload === true ? '?' + Date.now() : '')\n    );\n    qx.locale.Manager.getInstance().addListener('changeLocale', this._onChangeLocale, this);\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    // prefix for all custom components uses/provided by this structure\n    PREFIX: 'cv-',\n    __MAP: {},\n    __I: {},\n\n    MAPPING_PARAM_REGEX: /^(.+)\\(([^)]+)\\)$/,\n\n    register(webComponentName, qxClass) {\n      this.__MAP[webComponentName] = qxClass;\n    },\n\n    onComponentCreated(element) {\n      const name = element.tagName.toLowerCase();\n      if (Object.prototype.hasOwnProperty.call(this, name)) {\n        const QxClass = this.__MAP[name];\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          this.__I[name] = [];\n        }\n        this.__I[name].push(new QxClass(element));\n      } else {\n        qx.log.Logger.error(this, 'no QxClass registered for custom element ' + name);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    /**\n     * The target this structure should be inserted into\n     */\n    renderTarget: {\n      check: 'Element',\n      init: document.body\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __HTML_STRUCT: null,\n    __mappings: null,\n    __stylings: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    supports(feature, subfeature) {\n      return false;\n    },\n\n    initLayout() {},\n\n    __gotoStartPage() {\n      // open first page\n      if (!document.location.hash) {\n        this.scrollToPage(this.getInitialPageId());\n      } else {\n        this.scrollToPage(document.location.hash.substring(1));\n      }\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor);\n      }\n    },\n\n    scrollToPage(pageId, skipHistory) {\n      if (!pageId) {\n        return;\n      }\n      const page = document.querySelector('#' + pageId);\n      if (page) {\n        if (!page.classList.contains('active')) {\n          for (let oldPage of document.querySelectorAll('cv-page.active')) {\n            oldPage.classList.remove('active');\n          }\n          for (let oldPage of document.querySelectorAll('cv-page.sub-active')) {\n            oldPage.classList.remove('sub-active');\n          }\n          page.classList.add('active');\n          // mark parent pages that there is an active subpage\n          let parentElement = page.parentElement;\n          while (parentElement && parentElement.nodeName.toLowerCase() !== 'main') {\n            if (parentElement.nodeName.toLowerCase() === 'cv-page') {\n              parentElement.classList.add('sub-active');\n            }\n            parentElement = parentElement.parentElement;\n          }\n\n          if (skipHistory === undefined) {\n            const headline = page.getAttribute('name');\n            let pageTitle = 'CometVisu';\n            if (headline) {\n              pageTitle = headline + ' - ' + pageTitle;\n            }\n            qx.bom.History.getInstance().addToHistory(pageId, pageTitle);\n          }\n          qx.event.message.Bus.dispatchByName('cv.ui.structure.tile.currentPage', page);\n        }\n      } else {\n        this.warn('no page with id', pageId, 'found');\n      }\n    },\n\n    // not needed, backend parse/init themselves\n    parseBackendSettings(xml) {\n      if (xml.querySelectorAll('cv-backend').length === 0) {\n        // no backends defined, use the default one;\n        const client = cv.io.BackendConnections.initBackendClient();\n        client.login(true, cv.Config.configSettings.credentials, () => {\n          this.debug('logged in');\n          cv.io.BackendConnections.startInitialRequest();\n        });\n      }\n      return false;\n    },\n\n    /**\n     * Parses structure specific settings\n     * @param config {XMLDocument} loaded config\n     */\n    parseSettings(config) {\n      document.body.classList.add('loading-structure');\n      const settings = cv.Config.configSettings;\n      const configElement = config.documentElement;\n      settings.bindClickToWidget = configElement.getAttribute('bind_click_to_widget') === 'true';\n      this.translate(config, true);\n\n      if (!cv.Config.cacheUsed) {\n        const templates = qx.util.ResourceManager.getInstance().toUri('structures/tile/templates.xml');\n\n        const ajaxRequest = new qx.io.request.Xhr(templates);\n        ajaxRequest.set({\n          accept: 'application/xml',\n          cache: !cv.Config.forceReload\n        });\n\n        ajaxRequest.addListenerOnce('success', e => {\n          let content = e.getTarget().getResponse();\n          const target = this.getRenderTarget();\n          this.debug('creating pages');\n          // register custom elements for templates in this document\n          this.registerTemplates(content);\n          let child;\n          // we need the documents to be in HTML namespace\n          if (!content.documentElement.xmlns) {\n            let text = e.getTarget().getResponseText();\n            text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n            const parser = new DOMParser();\n            content = parser.parseFromString(text, 'text/xml');\n          }\n          while ((child = content.documentElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n\n          while ((child = configElement.firstElementChild)) {\n            target.appendChild(child);\n          }\n          document.body.classList.remove('loading-structure');\n          this.debug('finalizing');\n          this.observeVisibility();\n          qx.event.message.Bus.dispatchByName('setup.dom.append');\n          this.debug('pages created');\n          this.__gotoStartPage();\n          this.debug('setup.dom.finished');\n          qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n          cv.TemplateEngine.getInstance().setDomFinished(true);\n        });\n        ajaxRequest.addListener('statusError', e => {\n          const status = e.getTarget().getTransport().status;\n          if (!qx.util.Request.isSuccessful(status)) {\n            this.error('filenotfound', templates);\n          }\n          document.body.classList.remove('loading-structure');\n        });\n\n        ajaxRequest.send();\n      }\n    },\n\n    /**\n     * Registers customElements for all templates in the given xml that are direct children of a <templates structure=\"tile\"> element\n     * @param xml {XMLDocument}\n     */\n    registerTemplates(xml) {\n      xml.querySelectorAll('templates[structure=\\'tile\\'] > template').forEach(template => {\n        customElements.define(\n          cv.ui.structure.tile.Controller.PREFIX + template.getAttribute('id'),\n          class extends TemplatedElement {\n            constructor() {\n              super(template.getAttribute('id'));\n            }\n          }\n        );\n      });\n    },\n\n    /**\n     * Pre parsing hook, do everything here that is needed before the real parsing process can start\n     * @param xml {XMLDocument}\n     */\n    async preParse(xml) {\n      if (xml.documentElement.hasAttribute('theme')) {\n        let theme = xml.documentElement.getAttribute('theme');\n        const data = {};\n        if (theme === 'system') {\n          if (window.matchMedia) {\n            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n            document.documentElement.setAttribute('data-theme', theme);\n            data['theme'] = theme;\n            cv.data.Model.getInstance().updateFrom('system', data);\n            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');\n\n              data['theme'] = e.matches ? 'dark' : 'light';\n              cv.data.Model.getInstance().updateFrom('system', data);\n            });\n          } else {\n            this.error('system theme detection not possible in this browser');\n          }\n        } else {\n          document.documentElement.setAttribute('data-theme', theme);\n          data['theme'] = theme;\n          cv.data.Model.getInstance().updateFrom('system', data);\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param config {Object} loaded config file usually an XMLDocument but other structures might use different formats\n     */\n    createUI(config) {},\n\n    observeVisibility() {\n      // find all pages with an iframe with attribute \"data-src\" and observe its parent page\n      const observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting && entry.target.hasAttribute('data-src')) {\n            entry.target.setAttribute('src', entry.target.getAttribute('data-src'));\n            entry.target.removeAttribute('data-src');\n            observer.unobserve(entry.target);\n          }\n        }, {\n          root: document.querySelector('body > main')\n        });\n      });\n      for (const iframe of document.querySelectorAll('iframe[data-src], img[data-src]')) {\n        observer.observe(iframe);\n      }\n    },\n\n    translate(doc, rememberKeys, useKeys) {\n      let language = qx.locale.Manager.getInstance().getLanguage();\n      let match = /locale=([a-z]{2,3})/.exec(document.location.search);\n      if (match) {\n        language = match[1];\n      }\n      if (rememberKeys) {\n        this._trKeys = {};\n      }\n      for (const attr of ['name', 'label', 'title', 'format']) {\n        for (const trNameElement of doc.querySelectorAll(`*[${attr}^=\"tr(\"]`)) {\n          const match = /^tr\\('([^']+)'\\)$/.exec(trNameElement.getAttribute(attr));\n\n          if (!match && !useKeys) {\n            this.warn('attribute content no valid translation string', trNameElement.getAttribute(attr));\n\n            continue;\n          }\n          const key = useKeys ? this._trKeys[trNameElement.getAttribute(attr)] : match[1];\n          const translation = doc.querySelector(\n            `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n          );\n\n          if (translation) {\n            if (rememberKeys) {\n              this._trKeys[translation.textContent.trim()] = key;\n            }\n            trNameElement.setAttribute(attr, translation.textContent.trim());\n          } else {\n            trNameElement.setAttribute(attr, key);\n            this.warn(`[${language}] no translation found for: \"${key}\"`);\n          }\n        }\n      }\n      for (const trTextElement of doc.querySelectorAll('*[tr=\"true\"]')) {\n        const key = useKeys ? this._trKeys[trTextElement.textContent.trim()] : trTextElement.textContent.trim();\n        const translation = doc.querySelector(\n          `cv-translations > language[name=\"${language}\"] > tr[key='${key}']`\n        );\n\n        if (translation) {\n          if (rememberKeys) {\n            this._trKeys[translation.textContent.trim()] = key;\n          }\n          trTextElement.textContent = translation.textContent.trim();\n        } else {\n          trTextElement.textContent = key;\n          this.warn(`[${language}] no translation found for: \"${key}\"`);\n        }\n      }\n    },\n\n    /**\n     * Handle fired event from screensaver\n     * @return {Array<string>} Array with addresses\n     */\n    doScreenSave() {\n      if (cv.Config.configSettings.screensave_page) {\n        this.scrollToPage(cv.Config.configSettings.screensave_page);\n      }\n    },\n\n    /**\n     * Return the addresses needed to update all states on the initially loaded page\n     */\n    getInitialAddresses() {\n      return [];\n    },\n\n    /**\n     * Returns the widget id of the page item initially loaded\n     * @returns {String} widget path like 'id_'...\n     */\n    getInitialPageId() {\n      const firstPage = document.querySelector('cv-page');\n      return firstPage ? firstPage.id : '';\n    },\n\n    /**\n     *\n     * @param name {String} mapping name\n     * @param mapping {cv.ui.structure.tile.elements.Mapping}\n     */\n    addMapping(name, mapping) {\n      if (!this.__mappings) {\n        this.__mappings = {};\n      }\n      this.__mappings[name] = mapping;\n    },\n\n    removeMapping(name) {\n      if (this.__mappings) {\n        delete this.__mappings[name];\n      }\n    },\n\n    mapValue(mappingName, value, store) {\n      let match;\n      let params = [];\n      if ((match = cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(mappingName)) !== null) {\n        // this mapping name contains a parameter\n        try {\n          params = JSON.parse(`[${match[2].replaceAll('\\'', '\"')}]`);\n        } catch (e) {\n          this.error('error parsing parameters from ' + mappingName);\n        }\n        mappingName = match[1];\n      }\n      if (this.__mappings && Object.prototype.hasOwnProperty.call(this.__mappings, mappingName)) {\n        return this.__mappings[mappingName].mapValue(value, store, params);\n      }\n      return value;\n    },\n\n    /**\n     * @param name {String} styling name\n     * @param styling {cv.ui.structure.tile.elements.Styling}\n     */\n    addStyling(name, styling) {\n      if (!this.__stylings) {\n        this.__stylings = {};\n      }\n      this.__stylings[name] = styling;\n    },\n\n    removeStyling(name) {\n      if (this.__stylings) {\n        delete this.__stylings[name];\n      }\n    },\n\n    styleValue(stylingName, value, store) {\n      if (this.__stylings && Object.prototype.hasOwnProperty.call(this.__stylings, stylingName)) {\n        return this.__stylings[stylingName].mapValue(value, store);\n      }\n      return value;\n    },\n\n    // for compatibility with pure controller\n    parseLabel() {\n      return '';\n    },\n\n    _onChangeLocale() {\n      this.translate(document.body, false, true);\n    }\n  },\n\n  defer(statics) {\n    if (!window.cvTestMode) {\n      // do not apply ourselves automatically in test mode\n      cv.Application.structureController = statics.getInstance();\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.locale.Manager.getInstance().removeListener('changeLocale', this._onChangeLocale, this);\n  }\n});\n\nclass TemplatedElement extends HTMLElement {\n  constructor(templateId) {\n    super();\n    const controller = cv.ui.structure.tile.Controller.getInstance();\n    let template = document.getElementById(templateId);\n    if (template) {\n      const slotAttributes = ['name', 'replaces', 'parent-scope'];\n      const content = template.content.cloneNode(true);\n\n      // copy all attributes, except 'id' of the template itself to the widget\n      for (const name of template.getAttributeNames()) {\n        if (name !== 'id') {\n          this.setAttribute(name, template.getAttribute(name));\n        }\n      }\n\n      // move slots into template\n      for (let slot of content.querySelectorAll('slot')) {\n        const slotName = slot.getAttribute('name');\n        const replacementSelector = slot.hasAttribute('replaces') ? slot.getAttribute('replaces') : '';\n        const slotParentScope = slot.hasAttribute('parent-scope') ? parseInt(slot.getAttribute('parent-scope')) : 0;\n        let slotContents = this.querySelectorAll(`[slot='${slotName}']`);\n        const attrs = {};\n        for (let i = 0, l = slot.attributes.length; i < l; i++) {\n          if (!slotAttributes.includes(slot.attributes[i].name)) {\n            attrs[slot.attributes[i].name] = slot.attributes[i].value;\n          }\n        }\n        if (slotContents.length > 0) {\n          Array.from(slotContents).forEach(slotContent => {\n            const newNode = slotContent.cloneNode(true);\n            Object.keys(attrs).forEach(attrName => {\n              if (newNode.hasAttribute(attrName)) {\n                if (attrName === 'class') {\n                  // append it\n                  newNode.classList.add(attrs[attrName]);\n                } else {\n                  qx.log.Logger.debug(controller, '[' + templateId + '] attribute', attrName, 'already set, skipping');\n                }\n              } else {\n                newNode.setAttribute(attrName, attrs[attrName]);\n              }\n            });\n            newNode.removeAttribute('slot');\n            slot.parentNode.insertBefore(newNode, slot);\n          });\n          slot.remove();\n          if (replacementSelector) {\n            content.querySelectorAll(replacementSelector).forEach(replaced => {\n              replaced.remove();\n            });\n          }\n        } else {\n          let parentNode = slot.parentNode;\n          if (slotParentScope > 0) {\n            // got slotParentScope elements up and remove that one\n            let i = slotParentScope - 1;\n            while (i > 0) {\n              parentNode = parentNode.parentNode;\n              i--;\n            }\n            if (parentNode) {\n              parentNode.remove();\n            }\n          } else {\n            slot.remove();\n            if (parentNode.children.length === 0) {\n              // also remove slots parent when it has no content\n              parentNode.remove();\n            }\n          }\n        }\n      }\n      // transfer attribute slots\n      const attributes = this.getAttributeNames();\n      attributes.forEach(name => {\n        let value = this.getAttribute(name);\n        const targets = content.querySelectorAll('[slot-' + name + ']');\n        let targetName = name;\n        // allow names like percent-mapping that should also be mapped to a certain elements 'mapping' attribute\n        if (name.endsWith('-mapping')) {\n          targetName = 'mapping';\n        } else if (name.endsWith('-styling')) {\n          targetName = 'styling';\n        } else if (name.endsWith('-format')) {\n          targetName = 'format';\n        }\n        targets.forEach(target => {\n          if (targetName !== name && target.hasAttribute('slot-' + name)) {\n            target.setAttribute(name, value || target.getAttribute('slot-' + name));\n\n            target.removeAttribute('slot-' + name);\n          } else {\n            target.setAttribute(targetName, value || target.getAttribute('slot-' + targetName));\n\n            target.removeAttribute('slot-' + targetName);\n          }\n        });\n        if (targets.length > 0) {\n          this.removeAttribute(name);\n        }\n      });\n      content.querySelectorAll('*').forEach(elem => {\n        [...elem.attributes].forEach(attr => {\n          if (attr.name.startsWith('slot-')) {\n            let targetName = attr.name.substring(5);\n            // only e.g. map slot-progress-mapping to mapping if we have no slot-mapping attribute\n            if (attr.name.endsWith('-mapping') && elem.hasAttribute('slot-mapping')) {\n              targetName = 'mapping';\n            } else if (attr.name.endsWith('-styling') && elem.hasAttribute('slot-styling')) {\n              targetName = 'styling';\n            } else if (attr.name.endsWith('-format') && elem.hasAttribute('slot-format')) {\n              targetName = 'format';\n            }\n            if (attr.value) {\n              elem.setAttribute(targetName, attr.value);\n            }\n            elem.removeAttribute(attr.name);\n          }\n        });\n      });\n\n      // clear content\n      this.innerHTML = '';\n      this.appendChild(content);\n      this.classList.add('cv-widget');\n    } else {\n      qx.log.Logger.error(controller, '[' + templateId + '] no template found for id', templateId);\n    }\n  }\n}\n","/* MPopup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Handles cv-popup children and some general popup tasks, like global registration and close on click outside, modal blocker etc.\n */\nqx.Mixin.define('cv.ui.structure.tile.MPopup', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._onPointerDownBounded = this._onPointerDown.bind(this);\n  },\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  events: {\n    closed: 'qx.event.type.Event'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _childPopup: null,\n    _onPointerDownBounded: null,\n\n    _initPopupChild() {\n      const popup = (this._childPopup = this._element.querySelector(':scope > cv-popup'));\n      if (popup) {\n        qx.event.Registration.addListener(this._element, 'tap', this._openPopupChild, this);\n\n        // we need to tell the parent widget that is inside a group that wen have a popup here\n        let parent = popup.parentElement;\n        let last;\n        while (parent) {\n          if (parent.tagName.toLowerCase() === 'cv-group') {\n            last.classList.add('has-popup');\n          } else if (parent.tagName.toLowerCase() === 'cv-page') {\n            break;\n          }\n          last = parent;\n          parent = parent.parentElement;\n        }\n      }\n    },\n\n    _openPopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup:not([open])');\n\n      if (popup) {\n        popup.getInstance().open();\n      }\n    },\n\n    _closePopupChild() {\n      const popup = this._element.querySelector(':scope > cv-popup[open]');\n      if (popup) {\n        popup.getInstance().close();\n      }\n    },\n\n    registerModalPopup() {\n      document.addEventListener('pointerup', this._onPointerDownBounded);\n\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('modal-popup-blocker');\n        document.body.appendChild(blocker);\n      }\n      blocker.style.display = 'block';\n      cv.ui.structure.tile.MPopup.openedPopups.push(this);\n    },\n\n    unregisterModalPopup() {\n      document.removeEventListener('pointerup', this._onPointerDownBounded);\n\n      const index = cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);\n      cv.ui.structure.tile.MPopup.openedPopups.splice(index, 1);\n      let blocker = document.body.querySelector('.modal-popup-blocker');\n      if (blocker && cv.ui.structure.tile.MPopup.openedPopups.length === 0) {\n        blocker.style.display = 'none';\n      }\n    },\n\n    _onPointerDown(ev) {\n      if (!cv.util.Tree.isChildOf(ev.target, this._element)) {\n        ev.preventDefault();\n        ev.stopImmediatePropagation();\n        // clicked outside -> close (with delay to capture composed events)\n        qx.event.Timer.once(this.close, this, 100);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(this._element, 'tap', this._openPopupChild, this);\n\n    this._childPopup = null;\n  }\n});\n","/* MRefresh.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a refresh attribute that triggers a 'refresh' method which must be implemented by classes including this mixin.\n */\nqx.Mixin.define('cv.ui.structure.tile.MRefresh', {\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    if (qx.Class.hasMixin(this.constructor, cv.ui.structure.tile.MVisibility)) {\n      this.addListener('changeVisible', this.__onVisibilityChange, this);\n    }\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    refresh: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyRefresh'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _refreshTimer: null,\n    _lastRefresh: null,\n\n    _applyRefresh(value) {\n      if (value === 0) {\n        if (this._refreshTimer) {\n          this._refreshTimer.stop();\n        }\n      } else if (!this._refreshTimer) {\n        this._refreshTimer = new qx.event.Timer(value * 1000);\n        this._refreshTimer.addListener('interval', this.__doRefresh, this);\n        if (typeof this.isVisible === 'function') {\n          if (this.isVisible()) {\n            this._refreshTimer.start();\n          }\n        } else {\n          this._refreshTimer.start();\n        }\n      } else {\n        this._refreshTimer.restartWith(value * 1000);\n      }\n    },\n\n    __onVisibilityChange(ev) {\n      if (ev.getData()) {\n        if (this._refreshTimer) {\n          this._refreshTimer.start();\n          if (!this._lastRefresh || Date.now() - this._lastRefresh >= this._refreshTimer.getInterval()) {\n            // last execution time too old, refresh now\n            this.__doRefresh();\n          }\n        } else if (!this._lastRefresh) {\n          // refresh once when the item becomes visible\n          this.__doRefresh();\n        }\n      } else if (this._refreshTimer) {\n        this._refreshTimer.stop();\n      }\n    },\n\n    __doRefresh() {\n      if (typeof this.refresh === 'function') {\n        this.refresh();\n        this._lastRefresh = Date.now();\n      } else {\n        this.error('refresh method must be implemented!');\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_refreshTimer');\n  }\n});\n","/* MVisibility.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements visibility\n * @ignore(IntersectionObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MVisibility', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observeVisibility();\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    observer: new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.target._instance) {\n          entry.target._instance.setVisible(entry.isIntersecting);\n        }\n      }, {\n        root: document.querySelector('body > main')\n      });\n    })\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visible: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeVisible'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _observeVisibility() {\n      if (this._element) {\n        cv.ui.structure.tile.MVisibility.observer.observe(this._element);\n      } else {\n        this.warn('no element to observe defined');\n      }\n    }\n  }\n});\n","/* MResize.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Detects dom elements resizing\n * @ignore(ResizeObserver)\n */\nqx.Mixin.define('cv.ui.structure.tile.MResize', {\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    this._observer = new ResizeObserver((entries, observer) => {\n      const element = this.getResizeTarget();\n      entries.some(entry => {\n        if (entry.target === element) {\n          this.fireDataEvent('resized', entry);\n          return true;\n        }\n        return false;\n      });\n    });\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    resized: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    resizeTarget: {\n      check: 'Element',\n      nullable: true,\n      apply: '_applyResizeTarget'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {ResizeObserver}\n     */\n    _observer: null,\n\n    _applyResizeTarget(element, oldElement) {\n      if (oldElement) {\n        this._observer.unobserve(oldElement);\n      }\n      if (element) {\n        this._observer.observe(element);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._observer.disconnect();\n    this._observer = null;\n  }\n});\n","/* AbstractCustomElement.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.elements.AbstractCustomElement', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    this._element = element;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    connected: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyConnected',\n      event: 'changeConnected'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    /**\n     * @var {HTMLElement}\n     */\n    _element: null,\n\n    _initialized: false,\n\n    _applyConnected(value) {\n      if (value && !this._initialized) {\n        this._init();\n        this._initialized = true;\n      } else {\n        this._disconnected();\n        this._initialized = false;\n      }\n    },\n    _init() {},\n\n    _disconnected() {},\n\n    getElement() {\n      return this._element;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._element = null;\n  }\n});\n\n/* eslint-disable-next-line no-redeclare */\nclass QxConnector extends HTMLElement {\n  constructor(QxClass) {\n    super();\n    if (qx.Class.isSubClassOf(QxClass, cv.ui.structure.tile.elements.AbstractCustomElement)) {\n      this._instance = new QxClass(this);\n    } else {\n      throw Error(QxClass + ' must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement');\n    }\n    if (this.hasAttribute('colspan')) {\n      this.classList.add('colspan-' + this.getAttribute('colspan'));\n    }\n    if (this.hasAttribute('rowspan')) {\n      this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n    }\n  }\n\n  getInstance() {\n    return this._instance;\n  }\n\n  connectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(true);\n    }\n  }\n\n  disconnectedCallback() {\n    if (this._instance) {\n      this._instance.setConnected(false);\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (this._instance && qx.Class.hasProperty(this._instance.constructor, name)) {\n      this._instance.set(name, newValue);\n    }\n  }\n}\n\nwindow.QxConnector = QxConnector;\n","/* AbstractComponent.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Base class for all components.\n */\nqx.Class.define('cv.ui.structure.tile.components.AbstractComponent', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n  type: 'abstract',\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      apply: '_applyValue',\n      init: null\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    enabled: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyEnabled'\n    },\n\n    visibility: {\n      check: ['visible', 'excluded', 'hidden'],\n      init: 'visible',\n      apply: '_applyVisibility',\n      event: 'changeVisibility'\n    },\n\n    /**\n     * True if this tile is the content of a template based widget\n     */\n    widget: {\n      check: 'Boolean',\n      init: 'false'\n    },\n\n    /**\n     * True if this tile is the content of a popup\n     */\n    inPopup: {\n      check: 'Boolean',\n      init: 'false'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    _headerFooterParent: null,\n\n    _checkIfWidget() {\n      let isWidget = false;\n      let isPopup = false;\n      if (this._element.parentElement.localName === 'cv-popup') {\n        this._headerFooterParent = this._element.parentElement;\n        isPopup = true;\n      } else {\n        let tile = this._element;\n        let i = 0;\n        // we are looking for cv-tile parent which is the direct child of a widget\n        while (tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n          i++;\n          if (i > 2) {\n            tile = null;\n            break;\n          }\n        }\n        if (tile) {\n          let parent = tile.parentElement;\n          this._headerFooterParent = parent;\n          if (parent.localName === 'cv-popup') {\n            isPopup = true;\n          } else if (parent.localName.startsWith('cv-')) {\n            isWidget = parent.localName === 'cv-widget' || !!document.getElementById(parent.localName.substring(3));\n          }\n        }\n      }\n      this.setInPopup(isPopup);\n      this.setWidget(isWidget);\n    },\n\n    _init() {\n      this._checkIfWidget();\n\n      const element = this._element;\n      let hasReadAddress = false;\n      const writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    /**\n     * Append the given element to a header inside the widget this component is a direct child of.\n     * If the header does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     * @param align {String} center (default), left or right\n     */\n    appendToHeader(element, align) {\n      if (this._headerFooterParent) {\n        let header = this._headerFooterParent.querySelector(':scope > header');\n        if (!header) {\n          header = document.createElement('header');\n          this._headerFooterParent.insertBefore(header, this._headerFooterParent.firstElementChild);\n        }\n        let targetParent = header;\n        if (align) {\n          targetParent = header.querySelector('.' + align);\n          if (!targetParent) {\n            targetParent = document.createElement('div');\n            targetParent.classList.add(align);\n          }\n          header.appendChild(targetParent);\n        }\n        targetParent.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the header or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getHeader(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > header');\n        } \n          const header = this._headerFooterParent.querySelector(':scope > header');\n          if (header) {\n            return header.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    /**\n     * Append the given element to a footer inside the widget this component is a direct child of.\n     * If the footer does not exist yet, it will be created.\n     * Does nothing when this component is no direct child of a widget.\n     * @param element {HTMLElement}\n     */\n    appendToFooter(element) {\n      if (this._headerFooterParent) {\n        let footer = this._headerFooterParent.querySelector(':scope > footer');\n        if (!footer) {\n          footer = document.createElement('footer');\n          this._headerFooterParent.appendChild(footer);\n        }\n        footer.appendChild(element);\n      }\n    },\n\n    /**\n     * Gets the footer or an element inside it, if the selector is not empty\n     * @param selector {String} css selector\n     * @return {Element|null}\n     */\n    getFooter(selector) {\n      if (this._headerFooterParent) {\n        if (!selector) {\n          return this._headerFooterParent.querySelector(':scope > footer');\n        } \n          const footer = this._headerFooterParent.querySelector(':scope > footer');\n          if (footer) {\n            return footer.querySelector(selector);\n          }\n      }\n      return null;\n    },\n\n    // property apply\n    _applyValue(value) {\n      if (this.isConnected()) {\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(this._element.getAttribute('mapping'), value);\n        }\n        if (this._element.hasAttribute('format')) {\n          mappedValue = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            mappedValue instanceof Date ? mappedValue.toLocaleString() : mappedValue\n          );\n        }\n        this._updateValue(mappedValue, value);\n        if (this._element.hasAttribute('styling')) {\n          let styleClass = cv.Application.structureController.styleValue(this._element.getAttribute('styling'), value);\n\n          this.setStyleClass(styleClass);\n        }\n      }\n    },\n\n    // needs to be implemented by inheriting classes\n    _updateValue(mappedValue, value) {},\n\n    // property apply\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyEnabled(value) {\n      let blocker = this._element.querySelector(':scope > .blocker');\n      if (!blocker) {\n        blocker = document.createElement('div');\n        blocker.classList.add('blocker');\n        this._element.appendChild(blocker);\n        blocker.addEventListener('click', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerdown', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        blocker.addEventListener('pointerup', ev => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n      }\n      this._element.setAttribute('disabled', value === false ? 'true' : 'false');\n\n      blocker.style.display = value === true ? 'none' : 'block';\n    },\n\n    _applyVisibility(value, oldValue) {\n      const target = this.isWidget() ? this._element.parentElement : this._element;\n      if (oldValue === 'hidden') {\n        target.style.opacity = '1.0';\n      }\n      switch (value) {\n        case 'visible':\n          target.style.display = null;\n          break;\n\n        case 'hidden':\n          target.style.opacity = '0';\n          break;\n\n        case 'excluded':\n          target.style.display = 'none';\n          break;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     * @return {Boolean} true of the update has been handled\n     */\n    onStateUpdate(ev) {\n      switch (ev.detail.target) {\n        case 'enabled':\n          this.setEnabled(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n        case 'show-exclude':\n          this.setVisibility(ev.detail.state ? 'visible' : 'excluded');\n          ev.stopPropagation();\n          return true;\n        case 'show-hide':\n          this.setVisibility(ev.detail.state ? 'visible' : 'hidden');\n          ev.stopPropagation();\n          return true;\n        case '':\n          this.setValue(ev.detail.state);\n          ev.stopPropagation();\n          return true;\n      }\n\n      return false;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._writeAddresses = null;\n    this._headerFooterParent = null;\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates breadcrumb navigation bar down to the currently shown page.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Breadcrumbs', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._update, this);\n    },\n\n    _update() {\n      let list = this._element.querySelector(':scope > ul');\n      if (!list) {\n        list = document.createElement('ul');\n        this._element.appendChild(list);\n      }\n      const listItems = [];\n      const activePage = document.body.querySelector('cv-page.active');\n      const startPage = document.body.querySelector('main > cv-page:first-of-type');\n\n      if (activePage && activePage !== startPage) {\n        let currentPage = activePage;\n        while (currentPage) {\n          let li = this._createListItem(currentPage.getAttribute('id'), currentPage.getAttribute('name'));\n          listItems.unshift(li);\n          let parent = currentPage.parentElement;\n          while (parent) {\n            if (parent.localName === 'cv-page') {\n              currentPage = parent;\n              break;\n            }\n            parent = parent.parentElement;\n          }\n          if (!parent || currentPage === startPage) {\n            break;\n          }\n        }\n      }\n      let start = list.querySelector(':scope > li.start');\n      if (!start) {\n        start = this._createListItem(startPage.getAttribute('id'), startPage.getAttribute('name'));\n        start.classList.add('start');\n      }\n      listItems.unshift(start);\n\n      list.replaceChildren(...listItems);\n    },\n\n    _createListItem(pageId, text) {\n      const li = document.createElement('li');\n      const a = document.createElement('a');\n      a.setAttribute('href', '#' + pageId);\n      a.textContent = text;\n      li.appendChild(a);\n      return li;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._update, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'breadcrumbs',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Button.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Button', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__store = new Map();\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    type: {\n      check: ['button', 'trigger', 'push'],\n      init: 'button'\n    },\n\n    on: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyOn'\n    },\n\n    onClass: {\n      check: 'String',\n      init: 'active'\n    },\n\n    offClass: {\n      check: 'String',\n      init: 'inactive'\n    },\n\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    },\n\n    styleClass: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyStyleClass'\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      apply: '_applyName'\n    },\n\n    progress: {\n      check: 'Number',\n      init: -1,\n      apply: '_applyProgress',\n      transform: '_parseInt'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _writeAddresses: null,\n    __textLabel: null,\n    __circumference: null,\n    /**\n     * @var {Map} value store for addresses to be able to use them e.g. in mapping formulas\n     */\n    __store: null,\n\n    _parseInt(val) {\n      const intVal = parseInt(val);\n      return Number.isNaN(intVal) ? 0 : intVal;\n    },\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      if (element.hasAttribute('name')) {\n        this.setName(element.getAttribute('name'));\n      }\n      if (element.hasAttribute('progress')) {\n        this.setProgress(element.getAttribute('progress'));\n      }\n      if (element.hasAttribute('on-value')) {\n        this.setOnValue(element.getAttribute('on-value'));\n      }\n      if (element.hasAttribute('off-value')) {\n        this.setOffValue(element.getAttribute('off-value'));\n      }\n      let hasReadAddress = false;\n      let writeAddresses = [];\n      Array.prototype.forEach.call(element.querySelectorAll(':scope > cv-address'), address => {\n        const mode = address.hasAttribute('mode') ? address.getAttribute('mode') : 'readwrite';\n        switch (mode) {\n          case 'readwrite':\n            hasReadAddress = true;\n            writeAddresses.push(address);\n            break;\n          case 'read':\n            hasReadAddress = true;\n            break;\n          case 'write':\n            writeAddresses.push(address);\n            break;\n        }\n      });\n\n      this._writeAddresses = writeAddresses;\n\n      const events = {};\n      if (writeAddresses.length > 0) {\n        let eventSource = element;\n        if (element.getAttribute('whole-tile') === 'true') {\n          // find parent tile and use it as event source\n          let parent = element.parentElement;\n          let level = 0;\n          while (level <= 2) {\n            parent = parent.parentElement;\n            level++;\n            if (parent.tagName.toLowerCase() === 'cv-tile') {\n              eventSource = parent;\n              eventSource.classList.add('clickable');\n            }\n          }\n        }\n        writeAddresses.forEach(addr => {\n          let event = addr.hasAttribute('on') ? addr.getAttribute('on') : 'click';\n          switch (event) {\n            case 'click':\n              events.click = this.onClicked.bind(this);\n              break;\n            case 'up':\n              events.pointerup = this.onPointerUp.bind(this);\n              break;\n            case 'down':\n              events.pointerdown = this.onPointerDown.bind(this);\n              break;\n          }\n        });\n        Object.getOwnPropertyNames(events).forEach(eventName =>\n          eventSource.addEventListener(eventName, ev => {\n            events[eventName](ev);\n          })\n        );\n      }\n      if (element.hasAttribute('doc-link') && !Object.prototype.hasOwnProperty.call(events, 'click')) {\n        element.addEventListener('click', ev => {\n          this.onClicked(ev);\n        });\n      }\n      if (hasReadAddress) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      } else if (element.hasAttribute('mapping') || element.hasAttribute('styling')) {\n        // apply the trigger state\n        const triggerAddresses = writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on'));\n\n        if (triggerAddresses.length === 1) {\n          const value = triggerAddresses[0].getAttribute('value');\n          qx.event.Timer.once(\n            () => {\n              // using == comparisons to make sure that e.g. 1 equals \"1\"\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setOn(value == this.getOnValue());\n            },\n            this,\n            1000\n          );\n        }\n      }\n\n      // detect button type\n      if (\n        !hasReadAddress &&\n        writeAddresses.filter(addr => addr.hasAttribute('value') && !addr.hasAttribute('on')).length === 1\n      ) {\n        // only one write address with a fixed value and no special event => simple trigger\n        this.setType('trigger');\n      } else {\n        let hasDown = false;\n        let hasUp = false;\n        writeAddresses.some(addr => {\n          if (addr.hasAttribute('value') && addr.hasAttribute('on')) {\n            if (!hasDown) {\n              hasDown = addr.getAttribute('on') === 'down';\n            }\n            if (!hasUp) {\n              hasUp = addr.getAttribute('on') === 'up';\n            }\n          }\n          return hasUp && hasDown;\n        });\n        if (hasUp && hasDown) {\n          // has an address for up and one for down event with a fixed value -> pushbutton\n          this.setType('push');\n        }\n      }\n    },\n\n    _initProgress() {\n      const element = this._element;\n      this.__circumference = 100 * Math.PI;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('viewBox', '0 0 100 100');\n      svg.setAttribute('type', 'circle');\n      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\n      circle.classList.add('bar');\n      circle.setAttribute('r', '49');\n      circle.setAttribute('cx', '50');\n      circle.setAttribute('cy', '50');\n      circle.setAttribute('stroke-width', '2');\n      circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n      circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n      svg.appendChild(circle);\n      element.appendChild(svg);\n      // make sure that we do not override the progress bar by state appearance\n      element.classList.add('progress');\n    },\n\n    _applyConnected(value) {\n      super._applyConnected(value);\n      if (value) {\n        if (this.getType() !== 'trigger') {\n          // delay this because we need the mappings to be ready\n          qx.event.Timer.once(this._applyOn, this, 1000);\n        }\n      }\n    },\n    _applyOn() {\n      if (this.isConnected()) {\n        let value = this.isOn() ? this.getOnValue() : this.getOffValue();\n        this._element.setAttribute('value', value || '');\n        let mappedValue = value;\n        if (this._element.hasAttribute('mapping')) {\n          mappedValue = cv.Application.structureController.mapValue(\n            this._element.getAttribute('mapping'),\n            value,\n            this.__store\n          );\n        }\n        const target = this._element.querySelector('.value');\n        if (target && target.tagName.toLowerCase() === 'cv-icon') {\n          if (target._instance) {\n            target._instance.setId(mappedValue);\n          } else {\n            target.textContent = mappedValue;\n          }\n        } else {\n          this.updateValue(mappedValue);\n        }\n        let styleClass = this.isOn() ? this.getOnClass() : this.getOffClass();\n        if (this._element.hasAttribute('styling')) {\n          styleClass = cv.Application.structureController.styleValue(\n            this._element.getAttribute('styling'),\n            value,\n            this.__store\n          );\n        }\n        this.setStyleClass(styleClass);\n      }\n    },\n\n    _applyProgress(value) {\n      let valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n      if (!valueElement) {\n        this._initProgress();\n        valueElement = this._element.querySelector(':scope > svg > circle.bar');\n      }\n      if (valueElement) {\n        if (this._element.hasAttribute('progress-mapping')) {\n          value = cv.Application.structureController.mapValue(\n            this._element.getAttribute('progress-mapping'),\n            value,\n            this.__store\n          );\n        }\n        valueElement.setAttribute(\n          'stroke-dashoffset',\n          '' + (this.__circumference - (value / 100) * this.__circumference)\n        );\n      }\n    },\n\n    _applyStyleClass(value, oldValue) {\n      const classes = this._element.classList;\n      if (oldValue) {\n        if (classes.contains(oldValue)) {\n          classes.replace(oldValue, value);\n        } else {\n          classes.add(value);\n          classes.remove(oldValue);\n        }\n      } else if (value) {\n        classes.add(value);\n      }\n    },\n\n    _applyName(value) {\n      if (!this.__textLabel) {\n        this.__textLabel = document.createElement('label');\n        this.__textLabel.classList.add('button-label');\n        this._element.appendChild(this.__textLabel);\n      }\n      this.__textLabel.textContent = value;\n    },\n\n    updateValue(value) {\n      const elem = this._element.querySelector('span.value');\n      if (elem) {\n        elem.innerHTML = value;\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == this.getOnValue();\n      let target = ev.detail.target || 'default';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      if (target === 'default') {\n        this.setOn(value);\n      } else if (target === 'progress') {\n        this.setProgress(ev.detail.state);\n      } else if (target.startsWith('store:')) {\n        this.__store.set(target.substring(6), ev.detail.state);\n      } else if (target === 'store') {\n        // use address as store key\n        this.__store.set(ev.detail.address, ev.detail.state);\n      }\n    },\n\n    onClicked(event) {\n      this.createRipple(event);\n      if (this._element.hasAttribute('doc-link')) {\n        let relPath = this._element.getAttribute('doc-link');\n        // add locale and version\n        const baseVersion = cv.Version.VERSION.split('.').slice(0, 2).join('.');\n        let language = qx.locale.Manager.getInstance().getLanguage();\n        if (language !== 'de') {\n          // documentation only exists in 'de' and 'en'\n          language = 'en';\n        }\n        window.open(`https://www.cometvisu.org/CometVisu/${language}/${baseVersion}/manual/${relPath}`);\n        event.stopPropagation();\n      } else {\n        if (!this._writeAddresses) {\n          this._writeAddresses = Array.prototype.filter.call(\n            this._element.querySelectorAll('addresses > cv-address'),\n            address => !address.hasAttribute('mode') || address.getAttribute('mode') !== 'read'\n          );\n        }\n        const ev = new CustomEvent('sendState', {\n          detail: {\n            value: this.isOn() ? this.getOffValue() : this.getOnValue(),\n            source: this\n          }\n        });\n\n        if (this.getType() === 'trigger') {\n          // simulate feedback\n          this.setOn(true);\n          qx.event.Timer.once(\n            () => {\n              this.setOn(false);\n            },\n            null,\n            250\n          );\n        }\n        this._writeAddresses\n          .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n          .forEach(address => address.dispatchEvent(ev));\n        event.stopPropagation();\n      }\n    },\n\n    onPointerDown() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'down' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    onPointerUp() {\n      this._writeAddresses\n        .filter(addr => addr.getAttribute('on') === 'up' && addr.hasAttribute('value'))\n        .forEach(address => {\n          address.dispatchEvent(\n            new CustomEvent('sendState', {\n              detail: {\n                value: address.getAttribute('value'),\n                source: this\n              }\n            })\n          );\n        });\n    },\n\n    createRipple(event) {\n      const button = event.currentTarget;\n      let container = button.querySelector(':scope .ripple-container');\n      if (!container) {\n        container = document.createElement('div');\n        container.classList.add('ripple-container');\n        button.appendChild(container);\n      }\n      const circle = document.createElement('span');\n      const diameter = Math.max(button.clientWidth, button.clientHeight);\n      const radius = diameter / 2;\n      circle.style.width = circle.style.height = `${diameter}px`;\n      let x = event.clientX - (button.offsetLeft + radius);\n      let y = event.clientY - (button.offsetTop + radius);\n      if (button === this._element) {\n        x -= button.offsetParent.offsetLeft;\n        y -= button.offsetParent.offsetTop;\n      }\n      circle.style.left = `${x}px`;\n      circle.style.top = `${y}px`;\n      circle.classList.add('ripple');\n      // remove old ones\n      container.querySelectorAll('.ripple').forEach(ripple => ripple.remove());\n      container.appendChild(circle);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'button',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Address.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Address element that connect a widget/component to the backend.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Address', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __lastValue: null,\n    __transformedValue: null,\n\n    _init() {\n      const element = this._element;\n      const address = element.textContent.trim();\n      if (address) {\n        const model = cv.data.Model.getInstance();\n        const backendName = element.getAttribute('backend');\n        model.addAddress(address, element.getAttribute('id'), backendName);\n        const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'readwrite';\n        if (mode !== 'write') {\n          // subscribe\n          // this is a read address register for updates\n          const state = model.getState(address, backendName);\n          if (state !== undefined) {\n            this.fireStateUpdate(address, state);\n          }\n          //add listener\n          model.addUpdateListener(address, this.fireStateUpdate, this, backendName);\n        }\n        if (mode !== 'read') {\n          // listen for sendState events\n          element.addEventListener('sendState', ev => {\n            let value = null;\n            if (Object.prototype.hasOwnProperty.call(ev.detail, 'value')) {\n              value = ev.detail.value;\n            }\n            if (element.hasAttribute('value')) {\n              // address has a fixed value that must be sent\n              value = element.getAttribute('value');\n            }\n            const allowDuplicates =\n              ev.detail.source &&\n              ev.detail.source instanceof cv.ui.structure.tile.components.Button &&\n              (ev.detail.source.getType() === 'trigger' || ev.detail.source.getType() === 'push');\n            if (value !== null) {\n              const encoding = element.getAttribute('transform') || 'raw';\n              const encodedValue = cv.Transform.encodeBusAndRaw({ transform: encoding }, value);\n\n              // noinspection EqualityComparisonWithCoercionJS\n              if (\n                allowDuplicates ||\n                !Object.prototype.hasOwnProperty.call(element, 'lastSentValue') ||\n                encodedValue.raw !== element.lastSentValue\n              ) {\n                if (element.hasAttribute('delay')) {\n                  const delay = parseInt(element.getAttribute('delay'));\n                  this.debug(`send with delay of ${delay}ms`);\n                  qx.event.Timer.once(\n                    () => {\n                      cv.io.BackendConnections.getClient(backendName).write(\n                        element.textContent,\n                        encodedValue.bus,\n                        element\n                      );\n\n                      if (!allowDuplicates) {\n                        element.lastSentValue = encodedValue.raw;\n                      }\n                    },\n                    this,\n                    delay\n                  );\n                } else {\n                  cv.io.BackendConnections.getClient(backendName).write(element.textContent, encodedValue.bus, element);\n\n                  if (!allowDuplicates) {\n                    element.lastSentValue = encodedValue.raw;\n                  }\n                }\n              }\n            }\n          });\n        }\n      }\n    },\n\n    /**\n     * Creates a 'stateUpdate' event with the transformed value and dispatches it to the <cv-address>-Element.\n     * @param address {String} address\n     * @param state {variant} state to send\n     */\n    fireStateUpdate(address, state) {\n      if (this.__lastValue !== state || this._element.getAttribute('send-mode') === 'always') {\n        let transform = this._element.getAttribute('transform') || 'raw';\n        let transformedState = cv.Transform.decode({ transform: transform }, state);\n\n        let mapping = '';\n        if (this._element.hasAttribute('mapping')) {\n          mapping = this._element.getAttribute('mapping');\n          transformedState = cv.Application.structureController.mapValue(mapping, transformedState);\n        }\n        if (this._element.hasAttribute('format')) {\n          transformedState = cv.util.String.sprintf(\n            this._element.getAttribute('format'),\n            transformedState instanceof Date ? transformedState.toLocaleString() : transformedState\n          );\n        }\n        const ev = new CustomEvent('stateUpdate', {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            address: this._element.textContent.trim(),\n            state: transformedState,\n            target: this._element.getAttribute('target') || '',\n            raw: state,\n            mapping: mapping,\n            addressValue: this._element.hasAttribute('value') ? this._element.getAttribute('value') : null,\n            source: this,\n            variant: this._element.hasAttribute('variant') ? this._element.getAttribute('variant') : null\n          }\n        });\n\n        this.__transformedValue = transformedState;\n        //console.log(ev.detail);\n        this._element.dispatchEvent(ev);\n        this.__lastValue = state;\n        // reset lastSentValue\n        if (state !== this._element.lastSentValue) {\n          this._element.lastSentValue = null;\n        }\n      }\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a read address\n     */\n    isRead() {\n      return this._element.getAttribute('mode') !== 'write';\n    },\n\n    /**\n     *\n     * @return {boolean} true if this is a write address\n     */\n    isWrite() {\n      return this._element.getAttribute('mode') !== 'read';\n    },\n\n    getValue() {\n      return this.__transformedValue;\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'address',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Chart.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/* eslint-disable arrow-body-style */\n/**\n * Shows an chart.\n * @asset(libs/d3.min.js)\n * @ignore(d3)\n */\nqx.Class.define('cv.ui.structure.tile.components.Chart', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [\n    cv.ui.structure.tile.MVisibility,\n    cv.ui.structure.tile.MRefresh,\n    cv.ui.structure.tile.MResize\n  ],\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    ChartCounter: 0,\n    DEFAULT_ASPECT_RATIO: 392/192,\n\n    JS_LOADED: new Promise(async (resolve, reject) => {\n      const check = () => typeof window.d3 === 'object';\n      await cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri('libs/d3.min.js'));\n\n      if (!check()) {\n        const timer = new qx.event.Timer(50);\n        let counter = 0;\n        timer.addListener('interval', () => {\n          counter++;\n          if (check()) {\n            resolve(true);\n          } else if (counter > 5) {\n            reject(new Error('Error loaded d3 library'));\n          }\n        });\n      } else {\n        resolve(true);\n      }\n    }).then(() => {\n      if (qx.locale.Manager.getInstance().getLanguage() === 'de') {\n        // localize\n        d3.formatDefaultLocale({\n          decimal: qx.locale.Number.getDecimalSeparator().translate().toString(),\n          thousands: qx.locale.Number.getGroupSeparator().translate().toString(),\n          grouping: [3],\n          currency: ['â¬', '']\n        });\n\n        d3.timeFormatDefaultLocale({\n          dateTime: '%A, der %e. %B %Y, %X',\n          date: '%d.%m.%Y',\n          time: '%H:%M:%S',\n          periods: [qx.locale.Date.getAmMarker().translate().toString(), qx.locale.Date.getPmMarker().translate().toString()],\n          days: qx.locale.Date.getDayNames('wide', null, 'format').map(t => t.translate().toString()),\n\n          shortDays: qx.locale.Date.getDayNames('narrow', null, 'stand-alone').map(t => t.translate().toString()),\n          months: qx.locale.Date.getMonthNames('wide').map(t => t.translate().toString()),\n          shortMonths: qx.locale.Date.getMonthNames('narrow', null, 'stand-alone').map(t => t.translate().toString())\n        });\n      }\n    }),\n\n    CONFIG: null\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    currentSeries: {\n      check: ['hour', 'day', 'week', 'month', 'year'],\n      init: 'day',\n      apply: '_refreshData'\n    },\n\n    currentPeriod: {\n      check: 'Number',\n      init: 0,\n      apply: '_refreshData'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _id: null,\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n    _width: null,\n    _height: null,\n    _loaded: null,\n    _dataSetConfigs: null,\n    _initializing: null,\n    _navigationEnabled: null,\n    __toolTipTimer: null,\n    __showTooltip: false,\n    __debouncedOnResize: null,\n    __resizeTimeout: null,\n\n    /**\n    * @type {d3.Selection}\n    */\n    _dot: null,\n    /**\n     * @type {d3.Selection}\n     */\n    _svg: null,\n    /**\n     * @type {HTMLElement}\n     */\n    _tooltip: null,\n    /**\n     * @type {String}\n     */\n    _titleString: null,\n\n    __helpers: null,\n    __config: null,\n    // all chart properties\n    _chartConf: null,\n\n    async _init() {\n      this._checkIfWidget();\n\n      this._initializing = true;\n      const element = this._element;\n      await cv.ui.structure.tile.components.Chart.JS_LOADED;\n      if (this.isVisible()) {\n        this._loadData();\n      }\n      this._id = cv.ui.structure.tile.components.Chart.ChartCounter++;\n      const chartId = 'chart-' + this._id;\n      element.setAttribute('data-chart-id', this._id.toString());\n      const inBackground = this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true';\n\n      let title = this.getHeader('label.title');\n      if (!inBackground && element.hasAttribute('title') && !title) {\n        title = document.createElement('label');\n        title.classList.add('title');\n        let span = document.createElement('span');\n        title.appendChild(span);\n        span.textContent = element.getAttribute('title');\n        this.appendToHeader(title);\n      }\n\n      if (title) {\n        // save base title for updating\n        this._titleString = title.textContent.trim();\n      }\n\n      let seriesSelection = [];\n      if (!inBackground && element.hasAttribute('selection')) {\n        const s = element.getAttribute('selection');\n        if (s === 'none') {\n          seriesSelection = [];\n        } else if (s === 'all') {\n          seriesSelection = ['hour', 'day', 'week', 'month', 'year'];\n        } else {\n          seriesSelection = s.split(',').map(n => n.trim().toLowerCase());\n        }\n      }\n      if (element.hasAttribute('series')) {\n        this.setCurrentSeries(element.getAttribute('series'));\n      }\n      const currentSeries = this.getCurrentSeries();\n      if (seriesSelection.length > 0 && !seriesSelection.includes(currentSeries)) {\n        seriesSelection.push(currentSeries);\n      }\n      this._navigationEnabled = seriesSelection.length > 0;\n      if (seriesSelection.length > 0) {\n        // back button\n        let button = this._buttonFactory('ri-arrow-left-s-line', ['prev']);\n        button.setAttribute('title', qx.locale.Manager.tr('previous'));\n        button.addEventListener('click', () => this._onSeriesPrev());\n\n        if (!title) {\n          title = document.createElement('label');\n          title.classList.add('title');\n          let span = document.createElement('span');\n          title.appendChild(span);\n          this.appendToHeader(title);\n        }\n\n        title.parentElement.insertBefore(button, title);\n        const i = document.createElement('i');\n        i.classList.add('ri-arrow-down-s-fill');\n        title.appendChild(i);\n\n        // current selection\n        const popup = document.createElement('div');\n        popup.classList.add('popup', 'series');\n        let option;\n        for (const s of seriesSelection) {\n          option = document.createElement('cv-option');\n          option.setAttribute('key', s);\n          if (s === currentSeries) {\n            option.setAttribute('selected', 'selected');\n          }\n          option.textContent = this._seriesToShort(s);\n          option.addEventListener('click', ev => {\n            popup.style.display = 'none';\n            this._onSeriesChange(ev.target.getAttribute('key'));\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n          popup.appendChild(option);\n        }\n        title.appendChild(popup);\n\n        // make title clickable\n        title.classList.add('clickable');\n        title.addEventListener('click', ev => {\n          const style = getComputedStyle(popup);\n          if (style.getPropertyValue('display') === 'none') {\n            popup.style.display = 'flex';\n          } else {\n            popup.style.display = 'none';\n          }\n          ev.stopPropagation();\n          ev.preventDefault();\n        });\n\n        // forward button\n        button = this._buttonFactory('ri-arrow-right-s-line', ['next']);\n        button.setAttribute('title', qx.locale.Manager.tr('next'));\n        // initially we cannot go into the future\n        button.disabled = true;\n        button.addEventListener('click', () => this._onSeriesNext());\n        this.appendToHeader(button);\n      }\n      if (!inBackground && element.hasAttribute('allow-fullscreen') && element.getAttribute('allow-fullscreen') === 'true') {\n        // add fullscreen button + address\n        const button = this._buttonFactory('ri-fullscreen-line', ['fullscreen']);\n        button.setAttribute('data-value', '0');\n\n        const popupAddress = `state:${chartId}-popup`;\n\n        button.addEventListener('click', () => {\n          cv.data.Model.getInstance().onUpdate(popupAddress, button.getAttribute('data-value') === '0' ? '1' : '0', 'system');\n        });\n\n        this.appendToHeader(button, 'right');\n\n        // address\n        const tileAddress = document.createElement('cv-address');\n        tileAddress.setAttribute('mode', 'read');\n        tileAddress.setAttribute('target', 'fullscreen-popup');\n        tileAddress.setAttribute('backend', 'system');\n        tileAddress.setAttribute('send-mode', 'always');\n        tileAddress.textContent = popupAddress;\n        element.parentElement.appendChild(tileAddress);\n\n        // listen to parent tile of popup is opened or not\n        let parent = element;\n        while (parent && parent.nodeName.toLowerCase() !== 'cv-tile') {\n          parent = parent.parentElement;\n        }\n        if (parent) {\n          const tileWidget = parent.getInstance();\n          tileWidget.addListener('closed', () => cv.data.Model.getInstance().onUpdate(popupAddress, '0', 'system'));\n\n          // because we added a read address to the tile after is has been initialized we need to init the listener here manually\n          parent.addEventListener('stateUpdate', ev => {\n            tileWidget.onStateUpdate(ev);\n            // cancel event here\n            ev.stopPropagation();\n          });\n\n        // only on mobile we need this, because of height: auto\n          if (document.body.classList.contains('mobile')) {\n            tileWidget.addListener('fullscreenChanged', () => {\n              this._onRendered();\n            });\n          }\n        }\n      }\n\n\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n\n      // create needed elements\n\n      const svg = d3.select(this._element)\n        .append('svg');\n\n      let noToolTips = false;\n      if (inBackground) {\n        noToolTips = true;\n        svg.style('opacity', 0.4);\n      }\n\n      if (!noToolTips) {\n        this._tooltip = document.createElement('div');\n        this._tooltip.classList.add('tooltip');\n        this._tooltip.style.display = 'none';\n        this._element.appendChild(this._tooltip);\n\n        svg.on('pointerenter', this._onPointerEntered.bind(this));\n        svg.on('pointermove', this._onPointerMoved.bind(this));\n        svg.on('pointerleave', this._onPointerLeft.bind(this));\n      }\n      svg.on(\n        'touchmove',\n        event => {\n          if (this._loaded) {\n            let y = event.targetTouches[0].clientY;\n            if (this._helpers.linePath) {\n              const pathRect = this._helpers.linePath.node().getBoundingClientRect();\n              if (y > pathRect.y && y < pathRect.y + pathRect.height) {\n                event.preventDefault();\n              }\n            }\n          }\n        },\n        { passive: false }\n      );\n\n      // init some fixed settings\n      const format = this._element.hasAttribute('y-format') ? this._element.getAttribute('y-format') : '%s';\n      let timeFormat = null;\n      if (this._element.hasAttribute('x-format')) {\n        const formatString = this._element.getAttribute('x-format');\n        timeFormat = date => d3.timeFormat(formatString)(date);\n      } else {\n        // format auto-detection\n        timeFormat = this.multiTimeFormat([\n          [\n            '%H:%M:%S',\n            function (d) {\n              return d.getSeconds();\n            }\n          ],\n\n          [\n            '%H:%M',\n            function (d) {\n              return d.getMinutes();\n            }\n          ],\n\n          [\n            '%H',\n            function (d) {\n              return d.getHours();\n            }\n          ],\n\n          [\n            '%a %d',\n            function (d) {\n              return d.getDay() && d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%b %d',\n            function (d) {\n              return d.getDate() !== 1;\n            }\n          ],\n\n          [\n            '%B',\n            function (d) {\n              return d.getMonth();\n            }\n          ],\n\n          [\n            '%Y',\n            function () {\n              return true;\n            }\n          ]\n        ]);\n      }\n      this.__config = {\n        x: d => d.time, // given d in data, returns the (temporal) x-value\n        y: d => +d.value, // given d in data, returns the (quantitative) y-value\n        z: d => d.src, // given d in data, returns the (categorical) z-value\n        color: d => d && this._dataSetConfigs[d].color, // stroke color of line, as a constant or a function of *z*\n        title: d => cv.util.String.sprintf(format, d.value), // given d in data, returns the title text\n        curve: d3.curveLinear, // method of interpolation between points\n        marginTop: 12, // top margin, in pixels\n        marginRight: 24, // right margin, in pixels\n        marginBottom: 20, // bottom margin, in pixels\n        marginLeft: 24, // left margin, in pixels\n        width: 392, // outer width, in pixels\n        height: 192, // outer height, in pixels\n        aspectRatio: 392/192,\n        xType: d3.scaleTime, // type of x-scale\n        xFormat: timeFormat, // a format specifier string for the x-axis\n        yType: d3.scaleLinear, // type of y-scale\n        yFormat: undefined, // a format specifier string for the y-axis\n        yLabel: undefined, // a label for the y-axis\n        strokeLinecap: undefined, // stroke line cap of line\n        strokeLinejoin: undefined, // stroke line join of line\n        strokeWidth: 1.5, // stroke width of line\n        strokeOpacity: undefined, // stroke opacity of line\n        mixBlendMode: 'normal', // blend mode of lines\n        showArea: d => this._dataSetConfigs[d].showArea, // show area below the line,\n        showXAxis: !this._element.hasAttribute('show-x-axis') || this._element.getAttribute('show-x-axis') === 'true',\n        showYAxis: !this._element.hasAttribute('show-y-axis') || this._element.getAttribute('show-y-axis') === 'true',\n        xPadding: 0.1 // amount of x-range to reserve to separate bars\n      };\n\n      this._initializing = false;\n      this.__updateTitle();\n\n      // check if we have a read address for live updates\n      const datasetSources = Array.from(this._element.querySelectorAll(':scope > dataset')).map(elem => elem.getAttribute('src'));\n      const readAddresses = Array.from(element.querySelectorAll(':scope > cv-address:not([mode=\"write\"])')).filter(elem => datasetSources.includes(elem.getAttribute('target')));\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => {\n          this.onStateUpdate(ev);\n          // cancel event here\n          ev.stopPropagation();\n        });\n      }\n    },\n\n    onStateUpdate(ev) {\n      const targetDataset = this._element.querySelector(':scope > dataset[src=\"'+ev.detail.target+'\"]');\n      const config = this._dataSetConfigs ? this._dataSetConfigs[ev.detail.target] : null;\n      if (targetDataset && config) {\n        let ts = Date.now();\n        if (config.aggregationInterval) {\n          const mins = config.aggregationInterval * 60 * 1000;\n          ts = Math.round(ts / mins) * mins;\n        }\n        this._renderChart({\n          src: ev.detail.target,\n          time: ts,\n          value: ev.detail.state\n        }, true);\n      }\n    },\n\n    _onSeriesPrev() {\n      this.setCurrentPeriod(this.getCurrentPeriod()+1);\n    },\n\n    _onSeriesChange(select) {\n      this._initializing = true;\n      // reset offset when series changed\n      this.resetCurrentPeriod();\n      this._initializing = false;\n      // reset configuration, we need a new one\n      this._chartConf = null;\n      this.setCurrentSeries(select);\n    },\n\n    _onSeriesNext() {\n      const currentPeriod = this.getCurrentPeriod();\n      if (currentPeriod > 0) {\n        this.setCurrentPeriod(currentPeriod-1);\n      }\n    },\n\n    refresh() {\n      this._loaded = false;\n      this._loadData();\n    },\n\n    // triggered after a change os series or period\n    _refreshData() {\n      const nextButton = this.getHeader('.next');\n      if (nextButton) {\n        if (this.getCurrentPeriod() === 0) {\n          nextButton.setAttribute('disabled', 'disabled');\n        } else {\n          nextButton.removeAttribute('disabled');\n        }\n      }\n\n      if (!this._initializing) {\n        this._loaded = false;\n        this._loadData();\n      }\n      this.__updateTitle();\n    },\n\n    _loadData() {\n      if (this._loaded && Date.now() - this._loaded < 300000) {\n        // don't reload within 5 minutes\n        return;\n      }\n      const client = cv.io.BackendConnections.getClient();\n      if (!client) {\n        return;\n      }\n      let url;\n      const dataSets = this._element.querySelectorAll(':scope > dataset');\n      const series = this.getCurrentSeries();\n\n      const currentPeriod = this.getCurrentPeriod();\n      let start = 'end-1' + series;\n      let end = 'now';\n\n      let interval = 0;\n      switch (series) {\n        case 'hour':\n          interval = 60 * 60 * 1000;\n          break;\n\n        case 'day':\n          interval = 24 * 60 * 60 * 1000;\n          break;\n\n        case 'week':\n          interval = 7 * 24 * 60 * 60 * 1000;\n          break;\n\n        case 'month':\n          interval = 30 * 24 * 60 * 60 * 1000;\n          break;\n\n        case 'year':\n          interval = 365 * 24 * 60 * 60 * 1000;\n          break;\n      }\n      if (currentPeriod > 0 && interval > 0) {\n        end = Math.round((Date.now() - currentPeriod * interval) / 1000);\n      }\n\n      const promises = [];\n      if (!this._dataSetConfigs) {\n        this._dataSetConfigs = {};\n        for (let dataSet of dataSets) {\n          let ts = {\n            showArea: true,\n            color: '#FF9900',\n            chartType: 'line',\n            title: '',\n            curve: 'linear',\n            aggregationInterval: 0\n          };\n\n          let attr;\n          let name;\n          let value;\n          for (let i = 0; i < dataSet.attributes.length; i++) {\n            attr = dataSet.attributes.item(i);\n            // CamelCase attribute names\n            name = attr.name\n              .split('-')\n              .map((part, i) => {\n                if (i > 0) {\n                  return `${part.substring(0, 1).toUpperCase()}${part.substring(1)}`;\n                }\n                return part;\n              })\n              .join('');\n            value = attr.value;\n            if (value === 'true' || value === 'false') {\n              value = value === 'true';\n            } else if (/^\\d+$/.test(value)) {\n              value = parseInt(value);\n            } else if (/^[\\d.]+$/.test(value)) {\n              value = parseFloat(value);\n            }\n            ts[name] = value;\n          }\n          this._dataSetConfigs[ts.src] = ts;\n        }\n      }\n\n      for (const src in this._dataSetConfigs) {\n        url = client.getResourcePath('charts', {\n          src: src,\n          start: start,\n          end: end\n        });\n\n        const ts = this._dataSetConfigs[src];\n\n        if (!url) {\n          continue;\n        }\n\n        this.debug('loading', url);\n        promises.push(\n          cv.io.Fetch.cachedFetch(url, {ttl: this.getRefresh()}, false, client)\n            .then(data => {\n              this.debug('successfully loaded', url);\n              if (client.hasCustomChartsDataProcessor(data)) {\n                data = client.processChartsData(data, ts);\n              }\n              if (!this._lastRefresh) {\n                this._lastRefresh = Date.now();\n              }\n              return {\n                data: data || [],\n                ts: ts\n              };\n            })\n            .catch(err => {\n              this._onStatusError(ts, url, err);\n              return {\n                data: [],\n                ts: ts\n              };\n            })\n        );\n      }\n      Promise.all(promises).then(responses => {\n        this._onSuccess(responses);\n      });\n    },\n\n    _onSuccess(data) {\n      let chartData = [];\n\n      for (let entry of data) {\n        let tsdata = entry.data;\n        if (tsdata !== null) {\n          // TODO: stacked bar times (entry.ts.chartType === 'stacked-bar') must be aggregated, they have to be at the same time index for stacking\n          const mins = entry.ts.aggregationInterval > 0 ? entry.ts.aggregationInterval * 60 * 1000 : 0;\n          for (let [time, value] of tsdata) {\n            chartData.push({\n              src: entry.ts.src,\n              time: mins > 0\n                ? Math.round(time / mins) * mins : time,\n              value\n            });\n          }\n        }\n      }\n\n      if (this._element.hasAttribute('background') && this._element.getAttribute('background') === 'true') {\n        // no margins\n        this.__config = Object.assign(this.__config, {\n          marginRight: 0,\n          marginBottom: 0,\n          marginLeft: 0\n        });\n\n        // because we have no margins we need to cut the overflow on the tile\n        let tile = this._element.parentElement;\n        while (tile && tile.localName !== 'cv-tile') {\n          tile = tile.parentElement;\n        }\n        if (tile && tile.localName === 'cv-tile') {\n          tile.style.overflow = 'hidden';\n        }\n      }\n\n      // wait some time to let the element size settle\n      window.requestAnimationFrame(() => {\n        setTimeout(() => {\n          this._onRendered(chartData);\n        }, 100);\n      });\n    },\n\n    _onRendered(chartData, retries) {\n      if (this.__resizeTimeout) {\n        clearTimeout(this.__resizeTimeout);\n        this.__resizeTimeout = null;\n      }\n      if (this.isVisible()) {\n        const [width, height] = this._getSize();\n        if ((width < 20 || height < 10) && (!retries || retries <= 5)) {\n          // this make no sense\n          this.__resizeTimeout = setTimeout(() => {\n            this._onRendered(chartData, retries > 0 ? retries + 1 : 1);\n          }, 150);\n        }\n        if (width < 20 || height < 10) {\n          // dp nothing, these values are invalid\n          return;\n        }\n\n        this.__config.width = width;\n        this.__config.height = height;\n        d3.select(this._element).select('svg')\n          .attr('viewBox', `0, 0, ${width}, ${height}`);\n        if (chartData) {\n          this._renderChart(chartData);\n          this._loaded = Date.now();\n        }\n      }\n    },\n\n    _getSize() {\n      const parent = this._element.parentElement;\n      let padding = this._element.getAttribute('background') === 'true' ? 0 : 8;\n      let containerWidth = this._element.offsetWidth - padding;\n      let containerHeight = this._element.offsetHeight - padding;\n      let factor = 1;\n\n      const landscape = containerWidth > containerHeight;\n      let width = 0;\n      let height = 0;\n\n      if (landscape && containerHeight > 0) {\n        // obeying aspect ratio in landscape mode is not necessary\n        width = Math.round(containerWidth / factor);\n        height = Math.round(containerHeight / factor);\n      } else {\n        width = Math.round(containerWidth / factor);\n        height = width / cv.ui.structure.tile.components.Chart.DEFAULT_ASPECT_RATIO;\n      }\n      if ((parent.localName === 'cv-popup' && parent.getAttribute('fullscreen') === 'true') ||\n        (this._element.getAttribute('allow-fullscreen') === 'true' && parent.parentElement.classList.contains('fullscreen'))) {\n        // the parent container has height: auto, so we need to have one\n        this._element.style.height = (height + padding*2) + 'px';\n      }\n      return [width, height];\n    },\n\n    multiTimeFormat(formatsArray) {\n      /**\n       * @param date\n       */\n      function multiFormat(date) {\n        let i = 0;\n        let found = false;\n        let fmt = '%c';\n        while (!found && i < formatsArray.length) {\n          found = formatsArray[i][1](date);\n          if (found) {\n            fmt = formatsArray[i][0];\n          }\n          i++;\n        }\n        return fmt;\n      }\n      return date => d3.timeFormat(multiFormat(date))(date);\n    },\n\n    _onStatusError(ts, key, err) {\n      cv.core.notifications.Router.dispatchMessage('cv.charts.error', {\n        title: qx.locale.Manager.tr('Communication error'),\n        severity: 'urgent',\n        message: qx.locale.Manager.tr('URL: %1<br/><br/>Response:</br>%2', JSON.stringify(key), err)\n      });\n\n      this.error('Chart _onStatusError', ts, key, err);\n    },\n\n\n    /**\n     * Get svg element selection (create if not exists)\n     * @param parent d3.selection of the parent this element should be a child of\n     * @param nodeName {String} Element name\n     * @param classes {Array<String>} array of css classes used to identify this element\n     * @param attributes {Map<String, String>?} set these attributes if the element has to be created, when it already exists these are ignored\n     * @private\n     */\n    _getSvgElement(parent, nodeName, classes, attributes) {\n      let elem = parent.select(nodeName + '.' + classes.join('.'));\n      if (elem.empty()) {\n        elem = parent.append(nodeName).attr('class', classes.join(' '));\n        if (attributes) {\n          for (const name in attributes) {\n            elem.attr(name, attributes[name]);\n          }\n        }\n      }\n      return elem;\n    },\n\n    /**\n     * Copyright 2021 Observable, Inc.\n     * Released under the ISC license.\n     * https://observablehq.com/@d3/multi-line-chart\n     *\n     * @param data\n     * @param single\n     * @private\n     */\n    _renderChart(data, single) {\n      const config = this.__config;\n      const svg = d3.select(this._element).select('svg');\n\n      // Compute values.\n      let X;\n      let Y;\n      let Z;\n      let O;\n      let T;\n      if (single) {\n        if (!this._helpers) {\n          return;\n        }\n        X = this._helpers.X;\n        Y = this._helpers.Y;\n        Z = this._helpers.Z;\n        O = this._helpers.O;\n        T = this._helpers.T;\n        if (X[X.length-1] === data.time) {\n          // replace last value instead of adding one\n          Y[Y.length-1] = data.value;\n        } else {\n          X.push(data.time);\n          Y.push(data.value);\n          Z.push(data.src);\n          O.push(data);\n          T.push(config.title === undefined ? data.src : config.title === null ? null : config.title(data));\n\n          // cleanup\n          X.shift();\n          Y.shift();\n          Z.shift();\n          O.shift();\n          T.shift();\n        }\n      } else {\n        X = d3.map(data, config.x);\n        Y = d3.map(data, config.y);\n        Z = d3.map(data, config.z);\n        O = d3.map(data, d => d);\n        // Compute titles.\n        T = config.title === undefined ? Z : config.title === null ? null : d3.map(data, config.title);\n      }\n\n      // Compute default domains, and unique the z-domain.\n      let xDomain = d3.extent(X);\n      let minVal = 0;\n      if (this._element.hasAttribute('zero-based') && this._element.getAttribute('zero-based') === 'false') {\n        minVal = d3.min(Y);\n        if (minVal > 1.0) {\n          minVal -= 1;\n        }\n      }\n      let maxVal = d3.max(Y);\n      if (maxVal > 1.0) {\n        // add some inner chart padding\n        maxVal += 1;\n      } else {\n        maxVal += 0.1;\n      }\n      const yDomain = [minVal, maxVal];\n      const zDomain = new d3.InternSet(Z);\n      // Omit any data not present in the z-domain.\n      const I = d3.range(X.length).filter(i => zDomain.has(Z[i]));\n\n      if (config.showYAxis) {\n        const maxValue = config.yFormat ? config.yFormat(yDomain[1]) : yDomain[1].toFixed(maxVal < 1 ? 2 : 1);\n        // check if we need more space for the y-axis\n        if (maxValue.length >= 2) {\n          config.marginLeft = maxValue.length * 8;\n        }\n      }\n\n      const xTicks = config.width / 80;\n      const yTicks = config.height / 60;\n      const additionalXRangePadding = this._element.getAttribute('background') === 'true' ? 0 : 2;\n\n      const xRange = [config.marginLeft + additionalXRangePadding, config.width - config.marginRight - additionalXRangePadding]; // [left, right]\n      if (!this._chartConf) {\n        const yRange = [config.height - config.marginBottom, config.marginTop]; // [bottom, top]\n\n        // initialize everything once\n        this._chartConf = {\n          // x/y scales\n          x: config.xType().range(xRange),\n          y: config.yType().range(yRange)\n        };\n        this._chartConf.xAxis = config.showXAxis\n          ? d3.axisBottom(this._chartConf.x)\n            .ticks(xTicks)\n            .tickSizeOuter(0)\n            .tickFormat(config.xFormat)\n          : undefined;\n        this._chartConf.yAxis = config.showYAxis\n          ? d3.axisLeft(this._chartConf.y).ticks(yTicks, config.yFormat)\n          : undefined;\n\n\n        // add elements\n        const showGrid = this._element.hasAttribute('show-grid') ? this._element.getAttribute('show-grid') : 'xy';\n        if (showGrid.includes('x')) {\n          this._chartConf.xGrid = d3.axisBottom(this._chartConf.x).ticks(xTicks)\n            .tickSize(-config.height + config.marginBottom + config.marginTop)\n            .tickFormat('');\n          this._getSvgElement(svg, 'g', ['grid', 'x'], {\n            transform: `translate(0,${config.height - config.marginBottom})`\n          })\n            .call(this._chartConf.xGrid);\n        }\n        if (showGrid.includes('y')) {\n          this._chartConf.yGrid = d3.axisLeft(this._chartConf.y).ticks(yTicks)\n            .tickSize(-config.width + config.marginRight + config.marginLeft)\n            .tickFormat('');\n\n          this._getSvgElement(svg, 'g', ['grid', 'y'], {\n            transform: `translate(${config.marginLeft},0)`\n          })\n            .call(this._chartConf.yGrid);\n        }\n\n        if (config.showXAxis) {\n          this._getSvgElement(svg, 'g', ['axis', 'x'])\n            .attr('transform', `translate(0,${config.height - config.marginBottom})`)\n            .call(this._chartConf.xAxis);\n        }\n\n        if (config.showYAxis) {\n          let yAxisElement = this._getSvgElement(svg, 'g', ['axis', 'y'])\n            .attr('transform', `translate(${config.marginLeft},0)`);\n\n          if (config.label && yAxisElement.select('text').empty()) {\n            yAxisElement.append('text')\n              .attr('x', -config.marginLeft)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(config.yLabel);\n          }\n\n          yAxisElement\n            .call(this._chartConf.yAxis)\n            .call(g => g.select('.domain').remove());\n        }\n\n        // find chart types\n        const lineGroups = new Map();\n        const areaGroups = new Map();\n        const barGroups = new Map();\n        const stackedBarGroups = new Map();\n        const lineFunctions = {};\n        const areaFunctions = {};\n        let xBar;\n        let xzScale;\n\n        for (const key of zDomain) {\n          switch (this._dataSetConfigs[key].chartType) {\n            case 'line': {\n              const idx = I.filter(i => Z[i] === key);\n              lineGroups.set(key, idx);\n              const curveName = this._dataSetConfigs[key].curve || 'linear';\n              if (!Object.prototype.hasOwnProperty.call(lineFunctions, curveName)) {\n                let curveFunction;\n                switch (curveName) {\n                  case 'linear':\n                    curveFunction = d3.curveLinear;\n                    break;\n\n                  case 'step':\n                    curveFunction = d3.curveStep;\n                    break;\n\n                  case 'natural':\n                    curveFunction = d3.curveNatural;\n                    break;\n                }\n\n                if (curveFunction) {\n                  // Construct a line generator.\n                  lineFunctions[curveName] = d3\n                    .line()\n                    .curve(curveFunction)\n                    .x(i => this._chartConf.x(this._helpers.X[i]))\n                    .y(i => this._chartConf.y(this._helpers.Y[i]));\n                }\n\n                if (this._dataSetConfigs[key].chartType === 'line' && typeof config.showArea === 'function' && config.showArea(key)) {\n                  areaGroups.set(key, idx);\n                  if (curveFunction) {\n                    // Construct a line generator.\n                    const minY = this._chartConf.y.range()[0];\n                    areaFunctions[curveName] = d3\n                      .area()\n                      .curve(curveFunction)\n                      .x(i => this._chartConf.x(this._helpers.X[i]))\n                      .y0(() => minY)\n                      .y1(i => this._chartConf.y(this._helpers.Y[i]));\n                  }\n                }\n              }\n              break;\n            }\n\n            case 'bar':\n              barGroups.set(key, I.filter(i => Z[i] === key));\n              if (!xBar) {\n                xBar = d3.scaleBand().range(this._chartConf.x.range()).padding(config.xPadding);\n              }\n              if (!xzScale) {\n                xzScale = d3.scaleBand().padding(0.05);\n              }\n              break;\n\n            case 'stacked-bar':\n              stackedBarGroups.set(key, I.filter(i => Z[i] === key));\n              break;\n          }\n        }\n\n        this._chartConf.lineGroups = lineGroups;\n        this._chartConf.areaGroups = areaGroups;\n        this._chartConf.barGroups = barGroups;\n        this._chartConf.stackedBarGroups = stackedBarGroups;\n        this._chartConf.lineFunctions = lineFunctions;\n        this._chartConf.areaFunctions = areaFunctions;\n        this._chartConf.xBar = xBar;\n        if (xzScale) {\n          this._chartConf.xz = xzScale;\n        }\n\n        // prepare elements for chart elements\n        if (this._chartConf.lineGroups.size > 0) {\n          this._chartConf.lineContainer = this._getSvgElement(svg, 'g', ['line'], {\n            fill: 'none',\n            stroke: typeof config.color === 'string' ? config.color : null,\n            'stroke-linecap': config.strokeLinecap,\n            'stroke-linejoin': config.strokeLinejoin,\n            'stroke-width': config.strokeWidth,\n            'stroke-opacity': config.strokeOpacity\n          });\n        }\n        if (this._chartConf.areaGroups.size > 0) {\n          this._chartConf.areaContainer = this._getSvgElement(svg, 'g', ['area'], {\n            stroke: 'none',\n            fill: typeof config.color === 'string' ? this.__opacifyColor(config.color, '30') : null\n          });\n        }\n        if (this._chartConf.barGroups.size > 0) {\n          this._chartConf.barContainer = this._getSvgElement(svg, 'g', ['bars']);\n        }\n      }\n\n      // apply domains to scales\n      this._chartConf.x.domain(xDomain);\n      this._chartConf.y.domain(yDomain);\n\n      this._helpers = { X, Y, I, T, Z, O };\n\n      if (this._chartConf.xAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'x'])\n          .call(this._chartConf.xAxis);\n      }\n\n      if (this._chartConf.yAxis) {\n        this._getSvgElement(svg, 'g', ['axis', 'y'])\n          .call(this._chartConf.yAxis);\n      }\n      if (this._chartConf.xBar) {\n        this._chartConf.xBar.domain(new d3.InternSet(X));\n      }\n      if (this._chartConf.xz) {\n        this._chartConf.xz.domain(zDomain);\n        this._chartConf.x.range([xRange[0], xRange[1] - this._chartConf.xBar.bandwidth()]);\n        this._chartConf.xz.range([0, this._chartConf.xBar.bandwidth()]);\n      }\n\n      // update groups\n      for (const key of this._chartConf.lineGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key);\n        this._chartConf.lineGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.areaGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.areaGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.barGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.barGroups.set(key, idx);\n      }\n      for (const key of this._chartConf.stackedBarGroups.keys()) {\n        const idx = I.filter(i => Z[i] === key && Y[i] !== undefined);\n        this._chartConf.stackedBarGroups.set(key, idx);\n      }\n\n      this.__config = config;\n      this._dot = svg.select('g.dot');\n\n      const t = d3.transition()\n        .duration(single ? 0 : 500)\n        .ease(d3.easeLinear);\n\n      if (this._chartConf.lineContainer) {\n        this._chartConf.lineContainer\n          .selectAll('path')\n          .data(this._chartConf.lineGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('stroke', typeof config.color === 'function' ? p => config.color(p[0]) : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.lineFunctions[curveName] || this._chartConf.lineFunctions.linear;\n            const val = func(d[1]);\n            return val;\n          });\n      }\n\n      // Add the area\n      if (this._chartConf.areaContainer) {\n        this._chartConf.areaContainer\n          .selectAll('path')\n          .data(this._chartConf.areaGroups)\n          .join(\n            enter => enter.append('path')\n              .style('mix-blend-mode', config.mixBlendMode)\n              .attr('fill', typeof config.color === 'function' ? p => this.__opacifyColor(config.color(p[0]), '30') : null)\n          )\n          .transition(t)\n          .attr('d', d => {\n            const curveName = this._dataSetConfigs[d[0]].curve || 'linear';\n            const func = this._chartConf.areaFunctions[curveName] || this._chartConf.areaFunctions.linear;\n            return func(d[1]);\n          });\n      }\n\n      if (this._chartConf.barContainer) {\n        const yMin = this._chartConf.y.range()[0];\n        this._chartConf.barContainer\n          .selectAll('g')\n          .data(this._chartConf.barGroups)\n          .join('g')\n          .attr('fill', typeof config.color === 'function' ? d => config.color(d[0]) : null)\n          .selectAll('rect')\n          .data(d => {\n            return d[1].map(val => {\n              return {\n                key: d[0],\n                value: val\n              };\n            });\n          })\n          .join('rect')\n          .attr('x', d => {\n            const x = this._chartConf.x(X[d.value]);\n            const xz =  this._chartConf.xz(d.key);\n            return x + xz;\n          })\n          .attr('y', d => this._chartConf.y(Y[d.value]))\n          .attr('width', this._chartConf.xz.bandwidth())\n          .transition(t)\n          .attr('height', d => yMin - this._chartConf.y(Y[d.value]));\n      }\n\n      // dot must be added last\n      const dot = svg.select('g.dot');\n      if (dot.empty()) {\n        svg.append('g')\n          .attr('class', 'dot')\n          .attr('display', 'none')\n          .attr('fill', 'currentColor')\n          .append('circle')\n          .attr('r', 2.5);\n      }\n      this._dot = svg.select('g.dot');\n    },\n\n    _onPointerEntered(ev) {\n      if (this._loaded) {\n        this.__toolTipTimer = setTimeout(() => {\n          this.__activateTooltip(true, ev);\n          this.__toolTipTimer = null;\n        }, 500);\n      }\n    },\n\n    _onPointerLeft(ev) {\n      if (this.__toolTipTimer) {\n        clearTimeout(this.__toolTipTimer);\n      }\n\n      if (this._loaded) {\n        if (ev.relatedTarget !== this._tooltip) {\n          this.__activateTooltip(false);\n        }\n      }\n    },\n\n    __activateTooltip(val, ev) {\n      this.__showTooltip = val;\n      if (val) {\n        if (this._dot) {\n          this._dot.attr('display', null);\n          this._dot.raise();\n        }\n        this._tooltip.style.display = 'block';\n        this._onPointerMoved(null, true);\n      } else {\n        if (this._dot) {\n          this._dot.attr('display', 'none');\n        }\n        const svg = d3.select(this._element).select('svg');\n        svg.node().value = null;\n        svg.dispatch('input', {bubbles: true});\n        this._tooltip.style.display = 'none';\n      }\n    },\n\n    _onPointerMoved(event, center) {\n      if (this._loaded && this.__showTooltip) {\n        let xm = 0;\n        let ym = 0;\n        if (event) {\n          [xm, ym] = d3.pointer(event);\n        } else if (center) {\n          xm = this.__config.width/2;\n          ym = this.__config.height/2;\n        } else {\n          return;\n        }\n        const {X, Y, I, T, Z, O} = this._helpers;\n        const {x, y, xz} = this._chartConf;\n        const i = d3.least(I, i => Math.hypot(x(X[i]) - xm, y(Y[i]) - ym));\n        const scaleFactorX = this._element.offsetWidth / this.__config.width;\n        const scaleFactorY = this._element.offsetHeight / this.__config.height;\n        // closest point\n        const xOffset = xz ? (xz(Z[i]) + (typeof xz.bandwidth === 'function' ? xz.bandwidth() / 2 : 0)) : 0;\n        this._dot.attr('transform', `translate(${x(X[i]) + xOffset},${y(Y[i])})`);\n        if (T) {\n          const cursorOffset = event && event.pointerType === 'mouse' ? 16 : 40;\n          const timeString = this.__config.xFormat(new Date(X[i]));\n          let top = ym * scaleFactorY - this._tooltip.offsetHeight;\n          if (top < 0) {\n            top += cursorOffset + this._tooltip.offsetHeight;\n          } else {\n            top -= cursorOffset;\n          }\n\n          let left = xm * scaleFactorX;\n          if (left > this._element.offsetWidth / 2) {\n            left -= this._tooltip.offsetWidth + cursorOffset;\n          } else {\n            left += cursorOffset;\n          }\n\n          const key = Z[i];\n          const lineTitle = this._dataSetConfigs[key] && this._dataSetConfigs[key].title ? this._dataSetConfigs[key].title + ': ' : '';\n          this._tooltip.innerHTML = `${timeString}<br/>${lineTitle}${T[i]}`;\n          this._tooltip.style.left = left + 'px';\n          this._tooltip.style.top = top + 'px';\n        }\n        d3.select(this._element).select('svg').property('value', O[i]).dispatch('input', {bubbles: true});\n      }\n    },\n\n    _buttonFactory(icon, classes) {\n      const button = document.createElement('button');\n      button.classList.add(...classes);\n      if (icon) {\n        const i = document.createElement('i');\n        i.classList.add(icon);\n        button.appendChild(i);\n      }\n      return button;\n    },\n\n    __updateTitle() {\n      if (this._navigationEnabled) {\n        let title = this.getHeader('label.title span');\n        if (title) {\n          let chartTitle = this._titleString || '';\n          title.textContent = (chartTitle ? chartTitle + ' - ' : '') + this._shownDateRange();\n        }\n      }\n    },\n\n    /**\n     * Converts series to a shot string that is shown in a select box\n     * @param series\n     * @private\n     */\n    _seriesToShort(series) {\n      switch (series) {\n        case 'hour':\n          return qx.locale.Manager.tr('Hour');\n\n        case 'day':\n          return qx.locale.Manager.tr('Day');\n\n        case 'week':\n          return qx.locale.Manager.tr('Week');\n\n        case 'month':\n          return qx.locale.Manager.tr('Month');\n\n        case 'year':\n          return qx.locale.Manager.tr('Year');\n      }\n      return '';\n    },\n\n    /**\n     * Convert the currently shown date range into a human-readable string\n     * @private\n     */\n    _shownDateRange() {\n      const series = this.getCurrentSeries();\n      const currentPeriod = this.getCurrentPeriod();\n      const date = new Date();\n      let format = new qx.util.format.DateFormat();\n      switch (series) {\n        case 'hour':\n          date.setHours(date.getHours() - currentPeriod, 0, 0);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('hmm', 'h:mm'));\n          return format.format(date);\n\n        case 'day':\n          if (currentPeriod === 0) {\n            return qx.locale.Manager.tr('today');\n          } else if (currentPeriod === 1) {\n            return qx.locale.Manager.tr('yesterday');\n          }\n          date.setDate(date.getDate() - currentPeriod);\n          format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMMd', 'd. MMM'));\n          return format.format(date);\n\n        case 'week':\n          date.setDate(date.getDate() - currentPeriod*7);\n          return qx.locale.Manager.trc('CW = calendar week', 'CW %1', this.getWeekNumber(date));\n\n        case 'month':\n          date.setMonth(date.getMonth() - currentPeriod);\n          if (date.getFullYear() === new Date().getFullYear()) {\n            // no year needed\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('MMM', 'MMM'));\n          } else {\n            format = new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat('yyMMM', 'MMM yy'));\n          }\n          return format.format(date);\n\n        case 'year':\n          return date.getFullYear() - currentPeriod;\n      }\n      return '';\n    },\n\n   getWeekNumber(d) {\n      d = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      // Set to the nearest Thursday: current date + 4 - current day number\n      d.setDate(d.getDate() + 4 - (d.getDay() || 7));\n      // Get first day of year\n      const yearStart = new Date(d.getFullYear(), 0, 1);\n      // Calculate full weeks to the nearest Thursday\n      return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n    },\n\n    /**\n     * add opacity to color\n     * @param color\n     * @param opacity {string} hex number 0 - 255\n     * @return {string|*}\n     * @private\n     */\n    __opacifyColor(color, opacity) {\n      if (color.startsWith('rgb(')) {\n        return 'rgba(' + color.substring(4, color.length-1) + ', ' + (parseInt(opacity, 16) / 255).toFixed(2) + ')';\n      } else if (color.startsWith('#') && color.length === 7) {\n        return color + opacity;\n      }\n      return color;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._chartConf = null;\n    this._helpers = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'chart',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Color.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a html color input\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Color', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MResize,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    CC_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __colorChooser: null,\n\n    _init() {\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      }\n\n      // init components\n      const mode = element.hasAttribute('mode') ? element.getAttribute('mode') : 'popup';\n      if (mode === 'popup') {\n        let popup = element.querySelector(':scope > cv-popup');\n        if (!popup) {\n          popup = document.createElement('cv-popup');\n          popup.setAttribute('modal', 'true');\n          if (element.hasAttribute('title')) {\n            popup.setAttribute('title', element.getAttribute('title'));\n          }\n          const addresses = {};\n          for (const elem of element.querySelectorAll(':scope > cv-address')) {\n            let src = elem.textContent;\n            let transform = elem.getAttribute('transform');\n            let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n            switch (elem.getAttribute('mode')) {\n              case 'disable':\n                mode = 0;\n                break;\n              case 'read':\n                mode = 1;\n                break;\n              case 'write':\n                mode = 2;\n                break;\n              case 'readwrite':\n                mode = 1 | 2;\n                break;\n            }\n            let variantInfo = cv.parser.pure.widgets.ColorChooser.makeAddressListFn(src, transform, mode, elem.getAttribute('variant'));\n            addresses[src.trim()] = {\n              transform: transform,\n              mode: mode,\n              variantInfo: variantInfo[1]\n            };\n          }\n          cv.ui.structure.tile.components.Color.CC_COUNTER++;\n          const path = 'id_0_'+cv.ui.structure.tile.components.Color.CC_COUNTER;\n          const props = {\n            path: path,\n            $$type: 'colorchooser',\n            classes: 'widget colorchooser',\n            layout: {\n              colspan: 1\n            },\n            controls: element.hasAttribute('controls') ? element.getAttribute('controls') : 'triangle',\n            address: addresses,\n            throttleInterval: this.getThrottleInterval()\n          };\n          cv.parser.pure.widgets.ColorChooser.parseAttributes(element, props);\n          this.__colorChooser = new cv.ui.structure.pure.ColorChooser(props);\n          this.__colorChooser.addListener('colorChanged', this._onColorChanged, this);\n          this._onColorChanged();\n          popup.innerHTML = `<div class=\"widget_container\" style=\"margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center\" id=\"${path}\" data-type=\"colorchooser\">${this.__colorChooser.getDomString()}</div>`;\n          element.appendChild(popup);\n          element.addEventListener('click', ev => {\n            const path = ev.path || (ev.composedPath && ev.composedPath());\n            if (path && path.indexOf(popup) < 0) {\n              popup.getInstance().open();\n            }\n          });\n          qx.event.Timer.once(() => {\n            this.__colorChooser._onDomReady();\n          }, this, 0);\n\n          this.setResizeTarget(popup);\n          this.addListener('resized', () => {\n            this.__colorChooser.invalidateScreensize();\n          });\n        }\n      }\n    },\n\n    _onColorChanged() {\n      const color = this.__colorChooser.getColor();\n      const rgb = color.getComponent('rgb');\n      const v = color.getComponent('v');\n      this.setValue(\n        `#${this.__convertToHex(rgb.r)}${this.__convertToHex(rgb.g)}${this.__convertToHex(rgb.b)}${this.__convertToHex(v)}`\n      );\n    },\n\n    __convertToHex(v) {\n      return Math.round(v * 255)\n        .toString(16)\n        .padStart(2, '0');\n    },\n\n    _updateValue(mappedValue, value) {\n      let target = this._element.querySelector(':scope > .value');\n      const rgb = mappedValue.substring(0, 7);\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        const alpha = mappedValue.length === 9 ? parseInt(mappedValue.substring(7, 9), 16) / 255 : 1.0;\n\n        switch (tagName) {\n          case 'cv-icon':\n            target.style.color = rgb;\n            target.style.opacity = Math.max(alpha, 0.2); // do not blend it out totally\n            break;\n        }\n      } else {\n        // only if we do not have another value handler\n        this._element.style.backgroundColor = mappedValue;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    this._disposeObjects('__colorChooser');\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'color',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Icon.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.tile.components.Icon', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this._idRegex = /^[^\\s]+$/;\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    id: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyId',\n      // the id is used as 'class' property and therefore must not have spaces\n      transform: '_transformId'\n    },\n\n    color: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyColor'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __initialized: false,\n    _idRegex: null,\n\n    _transformId(value) {\n      if (this._idRegex.test(value)) {\n        return value;\n      }\n      this.error('invalid icon id:', value);\n      return null;\n    },\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.textContent.trim()) {\n        this.__initialized = true;\n        this.setId(element.textContent.trim());\n      } else {\n        const it = element.classList.values();\n        for (let name of it) {\n          if (name.startsWith('ri-') || name.startsWith('knxuf-')) {\n            this.setId(name);\n            break;\n          }\n        }\n      }\n      this.__initialized = true;\n    },\n\n    _applyId(value, oldValue) {\n      const element = this._element;\n      if (this.__initialized) {\n        if (oldValue) {\n          element.classList.remove(oldValue);\n        }\n        if (value) {\n          // default is an icon font that uses CSS classes\n          element.classList.add(value);\n          if (element.textContent) {\n            element.textContent = '';\n          }\n        }\n      }\n    },\n\n    _applyColor(value, oldValue) {\n      const element = this._element;\n      if (oldValue) {\n        element.classList.remove(oldValue);\n      }\n      if (value) {\n        element.classList.add(value);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'icon',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n\n        static get observedAttributes() {\n          return ['color'];\n        }\n      }\n    );\n  }\n});\n","/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an image.\n *\n * HINT: Proxy mode needs an PHP environment with php-curl installed.\n */\nqx.Class.define('cv.ui.structure.tile.components.Image', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _downloadedImage: null,\n    _url: null,\n    _headers: null,\n    _request: null,\n\n    _init() {\n      const element = this._element;\n      let img = element.querySelector(':scope > img');\n      if (!img) {\n        img = document.createElement('img');\n        element.appendChild(img);\n      }\n      element.addEventListener('click', () => this.refresh());\n      let src = element.getAttribute('src');\n      let base = window.location.origin;\n      if (src.substring(0, 1) !== '/' && src.substring(0, 4) !== 'http') {\n        // relative url\n        base += window.location.pathname;\n      }\n      this._url = new URL(src, base);\n      const useProxy = element.hasAttribute('proxy') && element.getAttribute('proxy') === 'true';\n      if (useProxy) {\n        this._url = new URL(cv.io.rest.Client.getBaseUrl() + '/proxy', window.location.origin);\n\n        this._url.searchParams.set('url', element.getAttribute('src'));\n      }\n      this._headers = {};\n      if (element.hasAttribute('auth-type')) {\n        if (useProxy) {\n          this._url.searchParams.set('auth-type', element.getAttribute('auth-type').toLowerCase());\n        } else {\n          switch (element.getAttribute('auth-type').toLowerCase()) {\n            case 'basic':\n              this._headers['Authorization'] = 'Basic ' + window.btoa(element.getAttribute('username') + ':' + element.getAttribute('password'));\n              break;\n\n            case 'bearer':\n              this._headers['Authorization'] = 'Bearer ' + element.getAttribute('username');\n              break;\n\n            default:\n              this.error('unknown authorization type' +  element.getAttribute('auth-type'));\n              break;\n          }\n        }\n      }\n      this._loadImage();\n      if (element.hasAttribute('refresh')) {\n        this.setRefresh(parseInt(element.getAttribute('refresh')));\n      }\n    },\n\n    _loadImage() {\n      let img = this._element.querySelector(':scope > img');\n      if (Object.keys(this._headers).length > 0) {\n        let request = new XMLHttpRequest();\n        request.responseType = 'blob';\n        request.open('get', this._url.toString(), true);\n        Object.keys(this._headers).forEach(name => {\n          request.setRequestHeader(name, this._headers[name]);\n        });\n        request.onreadystatechange = e => {\n          if (request.readyState === XMLHttpRequest.DONE && request.status === 200) {\n            img.src = URL.createObjectURL(request.response);\n            img.onload = () => {\n              URL.revokeObjectURL(img.src);\n            };\n          }\n        };\n        request.send(null);\n      } else {\n        img.src = this._url.toString();\n      }\n    },\n\n    refresh() {\n      let img = this._element.querySelector(':scope > img');\n      if (img) {\n        this._url.searchParams.set('r', '' + Math.random());\n        this._loadImage();\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'refresh') {\n          if (ev.detail.state) {\n            this.refresh();\n          }\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'image',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* List.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a list of items. A &lt;template&gt;-element defines the content of the list-items and a model is used to\n * generate those items and apply the models content to the list-items.\n * It allows custom Javascript code in a &lt;script&gt;-Element to fill the model or address-Elements as model source.\n * The model can be refreshed in a time defined interval, which is set by the 'refresh' attribute.\n *\n * @widgetexample <settings>\n *    <caption>Example list</caption>\n *    <screenshot name=\"list_simple\"/>\n *  </settings>\n    <cv-list refresh=\"10\">\n      <model>\n        <script><![CDATA[\n         for (let i = 0; i < Math.round(Math.random()*10); i++) {\n           model.push({\n             label: 'This is list item no ' + i,\n             subLabel: 'Sublabel number ' + i\n           })\n         }\n         ]]>\n         </script>\n       </model>\n       <template>\n         <li>\n           <label class=\"primary\">${label}</label>\n           <label class=\"secondary\">${subLabel}</label>\n         </li>\n       </template>\n       <template when=\"empty\">\n         <li>\n           <label class=\"primary\">Model is empty!</label>\n         </li>\n       </template>\n   </cv-list>\n */\nqx.Class.define('cv.ui.structure.tile.components.List', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MRefresh],\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    value: {\n      refine: true,\n      init: []\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _target: null,\n    _timer: null,\n    _model: null,\n    _getModel: null,\n    _filterModel: null,\n    _sortModel: null,\n    _limit: null,\n    _modelInstance: null,\n\n    _init() {\n      const element = this._element;\n      this._model = [];\n      let refreshOnUpdate = false;\n      const model = element.querySelector('model');\n      if (!model) {\n        this.error('cv-list needs a model');\n        return;\n      }\n      if (model.hasAttribute('filter')) {\n        this._filterModel = new Function('item', 'index', '\"use strict\"; return ' + model.getAttribute('filter'));\n      }\n      if (model.hasAttribute('limit')) {\n        this._limit = parseInt(model.getAttribute('limit'));\n      }\n      const readAddresses = model.querySelectorAll(':scope > cv-address:not([mode=\"write\"])');\n\n      // if we have top level write addresses, we need to listen to sendState Events from the list items\n      for (let address of element.querySelectorAll(':scope > cv-address')) {\n        if (address.getAttribute('mode') !== 'read') {\n          element.addEventListener('sendState', ev => {\n            // forward event copy (dispatching the same is not possible) to all write addresses\n            const evCopy = new CustomEvent('sendState', {\n              bubbles: ev.bubbles,\n              cancelable: ev.cancelable,\n              detail: ev.detail\n            });\n            for (let a of element.querySelectorAll(':scope > cv-address')) {\n              a.dispatchEvent(evCopy);\n            }\n          });\n          break;\n        }\n      }\n\n      if (model.hasAttribute('sort-by')) {\n        const sortBy = model.getAttribute('sort-by');\n        // reverse order in 'desc' sort mode\n        const sortModifier = model.getAttribute('sort-mode') === 'desc' ? -1 : 1;\n        this._sortModel = (left, right) => {\n          const leftVal = left[sortBy];\n          const rightVal = right[sortBy];\n          if (leftVal === rightVal) {\n            return 0;\n          } else if (typeof leftVal === typeof rightVal) {\n            switch (typeof leftVal) {\n              case 'number':\n                return (leftVal - rightVal) * sortModifier;\n\n              case 'boolean':\n                return (leftVal ? -1 : 1) * sortModifier;\n\n              case 'string':\n                return leftVal.localeCompare(rightVal) * sortModifier;\n\n              default:\n                return JSON.stringify(leftVal).localeCompare(JSON.stringify(rightVal)) * sortModifier;\n            }\n          } else if (leftVal === undefined || leftVal === null) {\n            return 1 * sortModifier;\n          } else if (rightVal === undefined || rightVal === null) {\n            return -1 * sortModifier;\n          }\n          return 0;\n        };\n      }\n      if (model.hasAttribute('src') || model.hasAttribute('config-section')) {\n        // fetch from url\n        this._getModel = async () => {\n          const options = {\n            ttl: this.getRefresh()\n          };\n          for (const proxyParam of ['self-signed', 'config-section', 'auth-type']) {\n            if (model.hasAttribute(proxyParam)) {\n              options[proxyParam] = model.getAttribute(proxyParam);\n            }\n          }\n          const res = await cv.io.Fetch.cachedFetch(model.getAttribute('src'), options, model.getAttribute('proxy') === 'true');\n          return res;\n        };\n      } else if (model.hasAttribute('class')) {\n        // initialize internal class instance that implements cv.io.listmodel.IListModel\n        const Clazz = cv.io.listmodel.Registry.get(model.getAttribute('class'));\n        if (Clazz) {\n          const modelInstance = new Clazz();\n          if (model.hasAttribute('parameters')) {\n            const props = {};\n            for (let entry of model.getAttribute('parameters').split(',')) {\n              const [name, value] = entry.split('=').map(n => n.trim());\n              props[name] = value.startsWith('\\'') ? value.substring(1, value.length-1) : value;\n            }\n            modelInstance.set(props);\n          }\n          this._getModel = async () => {\n            await modelInstance.refresh();\n            return modelInstance.getModel();\n          };\n        } else {\n          this.error(`clazz \"cv.io.listmodel.${model.getAttribute('class')}\" not found`);\n        }\n      } else {\n        const script = model.querySelector(':scope > script');\n        const data = model.querySelectorAll(':scope > cv-data');\n        if (script) {\n          this._getModel = new Function('\"use strict\";let model = []; ' + script.innerText.trim() + '; return model');\n\n          this._model = this._getModel();\n        } else if (readAddresses.length > 0) {\n          // model has an address that triggers a refresh on update, so we just have to read the model from the updated value\n          this._getModel = this.getValue;\n          refreshOnUpdate = true;\n        } else if (data.length > 0) {\n          this._model = [];\n          this._getModel = () => this._model;\n          data.forEach((elem, i) => {\n            const d = {\n              index: i\n            };\n\n            for (const a of elem.attributes) {\n              d[a.name] = a.value;\n            }\n            this._model.push(d);\n          });\n        } else {\n          this.error(\n            'cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.'\n          );\n\n          return;\n        }\n      }\n      if (readAddresses.length > 0) {\n        element.addEventListener('stateUpdate', ev => this.onStateUpdate(ev));\n      }\n      if (!refreshOnUpdate) {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        }\n        if (element.hasAttribute('refresh')) {\n          this.setRefresh(parseInt(element.getAttribute('refresh')));\n        }\n      }\n    },\n\n    onStateUpdate(ev) {\n      if (ev.detail.target === 'refresh') {\n        if (this.isVisible()) {\n          // only load when visible\n          this.refresh();\n        } else {\n          // reset lastRefresh to that the refresh get called when this item gets visible\n          this._lastRefresh = null;\n        }\n      } else {\n        super.onStateUpdate(ev);\n      }\n      // cancel event here\n      ev.stopPropagation();\n    },\n\n    _applyValue() {\n      // reset last refresh, because with new data its obsolete\n      this._lastRefresh = 0;\n      this.refresh();\n    },\n\n    async refresh() {\n      const element = this._element;\n      const template = element.querySelector(':scope > template:not([when])');\n      let newModel = [];\n      if (typeof this._getModel === 'function') {\n        newModel = this._getModel();\n      }\n      if (newModel instanceof Promise) {\n        try {\n          newModel = await newModel;\n        } catch (e) {\n          this.error('error refreshing async model:', e);\n        }\n      }\n      let target = element.querySelector(':scope > ul');\n      if (template.getAttribute('wrap') === 'false') {\n        target = element;\n      } else if (template.hasAttribute('target')) {\n        switch (template.getAttribute('target')) {\n          case 'parent':\n            target = element.parentElement;\n            // we do not need the list to be visible then\n            element.style.display = 'none';\n            break;\n          default:\n            throw new Error('invalid target: ' + template.getAttribute('target'));\n        }\n      } else if (!target) {\n        target = document.createElement('ul');\n        target.classList.add('content');\n        element.appendChild(target);\n      }\n      this.debug('refreshing with new model length', newModel.length);\n      if (Array.isArray(newModel) || newModel instanceof qx.data.Array) {\n        if (typeof this._filterModel === 'function') {\n          newModel = newModel.filter(this._filterModel);\n        }\n        if (typeof this._sortModel === 'function') {\n          newModel.sort(this._sortModel);\n        }\n        if (this._limit) {\n          newModel = newModel.slice(0, this._limit);\n        }\n        if (newModel.length === 0) {\n          const whenEmptyTemplate = element.querySelector(':scope > template[when=\"empty\"]');\n\n          if (whenEmptyTemplate && !target.querySelector(':scope > .empty-model')) {\n            while (target.firstElementChild && target.firstElementChild.hasAttribute('data-row')) {\n              target.removeChild(target.firstElementChild);\n            }\n            const emptyModel = whenEmptyTemplate.content.firstElementChild.cloneNode(true);\n            emptyModel.classList.add('empty-model');\n            target.appendChild(emptyModel);\n            return;\n          }\n        } else {\n          const emptyElem = target.querySelector(':scope > .empty-model');\n          if (emptyElem) {\n            emptyElem.remove();\n          }\n        }\n        const itemTemplate = document.createElement('template');\n        // remove entries we do not need anymore\n        for (let i = newModel.length; i < this._model.length; i++) {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          if (elem) {\n            elem.remove();\n          }\n        }\n\n        const getValue = (name, entry) => {\n          let index = -1;\n          if (name.endsWith(']')) {\n            // array access\n            index = parseInt(name.substring(name.indexOf('[') + 1, name.length - 1));\n            if (isNaN(index)) {\n              this.error(\n                'error parsing array index from ' + name,\n                name.substring(name.indexOf('[') + 1, name.length - 1)\n              );\n              return '';\n            }\n            name = name.substring(0, name.indexOf('['));\n          }\n          if (Object.prototype.hasOwnProperty.call(entry, name)) {\n            let val = entry[name];\n            if (index >= 0 && Array.isArray(val)) {\n              return val[index];\n            }\n            return val;\n          }\n          return '';\n        };\n        newModel.forEach((entry, i) => {\n          const elem = target.querySelector(`:scope > [data-row=\"${i}\"]`);\n          const html = template.innerHTML.replaceAll(/\\${([^}]+)}/g, (match, content) => {\n            if (content === 'index') {\n              return '' + i;\n            }\n            if (content.includes('||')) {\n              // elements are or'ed use the first one with value\n              let val = '';\n              for (let name of content.split('||').map(n => n.trim())) {\n                val = getValue(name, entry);\n                if (val) {\n                  return val;\n                }\n              }\n            }\n            return getValue(content, entry);\n          });\n\n          itemTemplate.innerHTML = html;\n          // check for elements with when attributes\n          itemTemplate.content.firstElementChild.querySelectorAll('[when]').forEach(elem => {\n            const [leftVal, rightVal] = elem\n              .getAttribute('when')\n              .split('=')\n              .map(n => n.trim());\n            // noinspection EqualityComparisonWithCoercionJS\n            if (leftVal != rightVal) {\n              elem.parentElement.removeChild(elem);\n            } else {\n              elem.removeAttribute('when');\n            }\n          });\n          if (elem) {\n            // update existing\n            elem.innerHTML = itemTemplate.content.firstElementChild.innerHTML;\n            elem.setAttribute('data-row', '' + i);\n          } else {\n            // append new child\n            itemTemplate.content.firstElementChild.setAttribute('data-row', '' + i);\n\n            target.appendChild(itemTemplate.content.cloneNode(true));\n          }\n        });\n        this._model = newModel;\n      } else {\n        this.error('model must be an array', newModel);\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_modelInstance', '_timer');\n    this._model = null;\n    this._filterModel = null;\n    this._sortModel = null;\n    this._target = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'list',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows an item in a list.\n */\nqx.Class.define('cv.ui.structure.tile.components.ListItem', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      // install fireEvent function\n      this._element.fireEvent = (name, value) => {\n        const ev = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            value: value,\n            source: this\n          }\n        });\n        this._element.dispatchEvent(ev);\n      };\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'listitem',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Menu.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Generates a menu of a model, currently only the pages model is implemented.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Menu', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    model: {\n      check: ['pages', 'menuItems'],\n      apply: '_applyModel'\n    },\n    appearance: {\n      check: ['text', 'icons', 'dock'],\n      init: 'text',\n      apply: '_applyAppearance'\n    },\n\n    depth: {\n      check: '!isNaN(value) && value >= -1 && value <= 100',\n      init: -1,\n      apply: '_applyDepth'\n    },\n\n    domReady: {\n      check: 'Boolean',\n      init: false,\n      apply: '_generateMenu'\n    },\n\n    showLabels: {\n      check: 'Boolean',\n      init: true\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyAppearance(value, oldValue) {\n      const main = document.querySelector('main');\n      if (oldValue === 'dock') {\n        main.classList.remove('has-dock');\n      }\n      if (value === 'dock') {\n        main.classList.add('has-dock');\n      }\n    },\n\n    _applyDepth() {\n      if (this.isDomReady()) {\n        this._generateMenu();\n      }\n    },\n\n    _onDomAppended() {\n      this.setDomReady(true);\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this._onDomAppended, this);\n    },\n\n    _applyModel(model) {\n      if (model) {\n        const rootList = document.createElement('ul');\n        this._element.appendChild(rootList);\n\n        if (model === 'pages') {\n          // add hamburger menu\n          const ham = document.createElement('a');\n          ham.href = '#';\n          ham.classList.add('menu');\n          ham.onclick = event => this._onHamburgerMenu(event);\n          const icon = document.createElement('i');\n\n          ham.appendChild(icon);\n          this._element.appendChild(ham);\n\n          qx.event.message.Bus.subscribe('setup.dom.append', this._onDomAppended, this);\n          qx.event.message.Bus.subscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n          qx.event.Registration.addListener(this._element, 'swipe', this._onSwipe, this);\n          icon.classList.add('ri-menu-line');\n        } else if (model === 'menuItems') {\n          // add hamburger menu\n          const icon = document.createElement('i');\n          icon.classList.add('ri-more-2-fill');\n          this._element.appendChild(icon);\n          // listen on whole element\n          this._element.onclick = event => this._onHamburgerMenu(event);\n          rootList.classList.add('context-menu');\n          this._generateMenu();\n        }\n      } else {\n        this.error('visual-model of type', model, 'is not implemented');\n      }\n    },\n\n    _init() {\n      const element = this._element;\n      const model = element.hasAttribute('model') ? element.getAttribute('model')\n        : (element.querySelectorAll(':scope > cv-menu-item').length > 0) ? 'menuItems' : null;\n      if (!model) {\n        this.error('no model defined, menu will be empty');\n        return;\n      }\n      if (element.getAttribute('show-labels') === 'false') {\n        this.setShowLabels(false);\n      }\n      this.setModel(model);\n    },\n\n    _generateMenu() {\n      switch (this.getModel()) {\n        case 'pages': {\n          const currentPage = window.location.hash.substring(1);\n          let parentElement = document.querySelector('main');\n          if (parentElement) {\n            const firstPage = document.querySelector('cv-page');\n            if (firstPage) {\n              parentElement = firstPage.parentElement;\n            }\n          }\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            this.__generatePagesModel(rootList, parentElement, currentPage, 0);\n          }\n          break;\n        }\n        case 'menuItems': {\n          const rootList = this._element.querySelector(':scope > ul');\n          if (rootList) {\n            rootList.replaceChildren();\n            for (let item of this._element.querySelectorAll(':scope > cv-menu-item')) {\n              const pageName = item.getAttribute('name') || '';\n              const pageIcon = item.getAttribute('icon') || '';\n              const li = document.createElement('li');\n              if (pageIcon) {\n                const i = document.createElement('i');\n                i.classList.add(pageIcon);\n                i.title = pageName;\n                li.appendChild(i);\n              }\n              if (this.isShowLabels()) {\n                const text = document.createTextNode(pageName);\n                li.appendChild(text);\n              }\n              li.addEventListener('click', event => {\n                item.getInstance().onClick(event);\n              });\n              rootList.appendChild(li);\n            }\n          }\n          break;\n        }\n      }\n    },\n\n    _onHamburgerMenu(event) {\n      let toggleClass = 'open';\n      if (this.getModel() === 'pages') {\n        toggleClass = 'responsive';\n        for (let detail of this._element.querySelectorAll('.details')) {\n          detail.setAttribute('open', '');\n        }\n      }\n      this._element.classList.toggle(toggleClass);\n      event.stopPropagation();\n      if (this._element.classList.contains(toggleClass)) {\n        // add some general listeners to close\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    /**\n     * @param ev {qx.event.type.Event}\n     * @private\n     */\n    _onPointerDown(ev) {\n      const target = ev.getTarget();\n      if (\n        target.classList.contains('menu') ||\n        (target.parentElement && target.parentElement.classList.contains('menu')) ||\n        target.nodeName.toLowerCase() === 'cv-menu' ||\n        (target.parentElement && target.parentElement.nodeName.toLowerCase() === 'cv-menu')\n      ) {\n        // clicked in hamburger menu, do nothing\n      } else if (target.tagName.toLowerCase() !== '.summary' && target.tagName.toLowerCase() !== 'p') {\n        // defer closing because it would prevent the link clicks and page selection\n        qx.event.Timer.once(this._closeAll, this, 500);\n      } else {\n        // close others\n        this._closeAll(ev.getTarget().parentElement);\n      }\n    },\n\n    _onSwipe(ev) {\n      if (ev.getDirection() === 'left') {\n        // goto next if there is one\n        const next = this._element.querySelector('li.active + li > a');\n        if (next) {\n          next.click();\n        }\n      } else {\n        const current = this._element.querySelector('li.active');\n        if (\n          current &&\n          current.previousElementSibling &&\n          current.previousElementSibling.tagName.toLowerCase() === 'li'\n        ) {\n          const prev = current.previousElementSibling.querySelector(':scope > a');\n          if (prev) {\n            prev.click();\n          }\n        }\n      }\n    },\n\n    /**\n     * Close all open sub-menus\n     * @param except {Element?} do not close this one\n     * @private\n     */\n    _closeAll(except) {\n      if (this._element.classList.contains('open')) {\n        this._element.classList.remove('open');\n      } else if (this._element.classList.contains('responsive')) {\n        this._element.classList.remove('responsive');\n      } else {\n        for (let detail of this._element.querySelectorAll('.details[open]')) {\n          if (!except || detail !== except) {\n            detail.removeAttribute('open');\n          }\n        }\n      }\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _openDetail(item) {\n      const first = this._element.querySelectorAll('.details[open]').length === 0;\n      item.setAttribute('open', '');\n      if (first) {\n        qx.event.Registration.addListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.addListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    _closeDetail(item) {\n      item.removeAttribute('open');\n      if (this._element.querySelectorAll('.details[open]').length === 0) {\n        // remove listeners\n        qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n        qx.event.Registration.removeListener(document.body.querySelector(':scope > main'), 'scroll', this._closeAll, this);\n      }\n    },\n\n    __generatePagesModel(parentList, parentElement, currentPage, currentLevel) {\n      if (!parentElement) {\n        return;\n      }\n      let pages = parentElement.querySelectorAll(':scope > cv-page:not([menu=\"false\"])');\n\n      for (let page of pages.values()) {\n        const pageId = page.getAttribute('id');\n        if (!pageId) {\n          this.error('page has no id, skipping');\n          continue;\n        }\n        const pageName = page.getAttribute('name') || '';\n        const pageIcon = page.getAttribute('icon') || '';\n        const li = document.createElement('li');\n        const a = document.createElement('a');\n        a.setAttribute('href', '#' + pageId);\n        a.setAttribute('data-page-id', pageId);\n        if (pageIcon) {\n          const i = document.createElement('i');\n          i.classList.add(pageIcon);\n          i.title = pageName;\n          a.appendChild(i);\n        }\n        if (this.isShowLabels() || currentLevel > 0) {\n          const text = document.createTextNode(pageName);\n          a.appendChild(text);\n        }\n        if (currentPage === pageId) {\n          li.classList.add('active');\n        }\n        parentList.appendChild(li);\n        const depth = this.getDepth();\n        if (\n          (depth < 0 || depth > currentLevel) &&\n          page.querySelectorAll(':scope > cv-page:not([menu=\"false\"])').length > 0\n        ) {\n          const details = document.createElement('div');\n          details.classList.add('details');\n          const summary = document.createElement('div');\n          summary.classList.add('summary');\n          a.setAttribute('href', '#');\n\n          a.addEventListener('click', ev => {\n            cv.Application.structureController.scrollToPage(pageId);\n            ev.stopPropagation();\n            ev.preventDefault();\n          });\n\n          const pageIcon = page.getAttribute('icon') || '';\n          if (page.querySelector(':scope > *:not(cv-page)')) {\n            // only add this as link, when this page has real content\n            summary.appendChild(a);\n          } else {\n            const p = document.createElement('p');\n            if (pageIcon) {\n              const i = document.createElement('i');\n              i.classList.add(pageIcon);\n              i.title = pageName;\n              p.appendChild(i);\n            }\n            if (this.isShowLabels()) {\n              p.appendChild(document.createTextNode(pageName));\n            }\n            summary.appendChild(p);\n          }\n          const expander = document.createElement('i');\n          expander.classList.add('expander');\n          expander.classList.add('ri-arrow-down-s-line');\n          summary.appendChild(expander);\n          expander.addEventListener('click', ev => {\n            if (details.hasAttribute('open')) {\n              this._closeDetail(details);\n            } else {\n              this._openDetail(details);\n            }\n          });\n\n          details.appendChild(summary);\n          const subList = document.createElement('ul');\n          details.appendChild(subList);\n          this.__generatePagesModel(subList, page, currentPage, currentLevel+1);\n          li.appendChild(details);\n        } else {\n          li.appendChild(a);\n        }\n      }\n    },\n\n    _onPageChange(ev) {\n      const pageElement = ev.getData();\n      // unset all currently active\n      for (let link of this._element.querySelectorAll('li.active, li.sub-active')) {\n        link.classList.remove('active');\n        link.classList.remove('sub-active');\n      }\n      // find link to current page\n      for (let link of this._element.querySelectorAll(`a[data-page-id=\"${pageElement.id}\"]`)) {\n        // activate all parents\n        let parent = link.parentElement;\n        let activeName = 'active';\n        while (parent && parent.tagName.toLowerCase() !== 'cv-menu') {\n          if (parent.tagName.toLowerCase() === 'li') {\n            parent.classList.add(activeName);\n            // all other parents have a sub-menu active\n            activeName = 'sub-active';\n          }\n          parent = parent.parentElement;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.event.Registration.removeListener(document, 'pointerdown', this._onPointerDown, this);\n\n    qx.event.message.Bus.unsubscribe('cv.ui.structure.tile.currentPage', this._onPageChange, this);\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n        static get observedAttributes() {\n          return ['appearance', 'depth'];\n        }\n      }\n    );\n  }\n});\n","/* ListItem.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Represents an action that should be executed when the related menu item has been clicked.\n */\nqx.Class.define('cv.ui.structure.tile.components.MenuAction', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _currentState: null,\n\n    _init() {\n      super._init();\n      const action = this._element.getAttribute('action');\n      switch (action) {\n        case 'toggleState': {\n          let hasAddress = false;\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            hasAddress = true;\n            if (address.getAttribute('mode') !== 'write') {\n              this._element.addEventListener('stateUpdate', ev => {\n                this.onStateUpdate(ev);\n                // cancel event here\n                ev.stopPropagation();\n              });\n            }\n          }\n          if (!hasAddress) {\n            this.error('a cv-menu-item with action \"toggleState\" needs at least one cv-address to read the write the state,');\n          }\n          break;\n        }\n        case 'popup':\n          if (!this._element.querySelector(':scope > cv-popup')) {\n            this.error('a cv-menu-item with action \"popup\" must have a cv-popup as child.');\n          }\n          break;\n      }\n    },\n\n    onClick(event) {\n      switch (this._element.getAttribute('action')) {\n        case 'popup': {\n          const popup = this._element.querySelector(':scope > cv-popup');\n          if (popup) {\n            popup.getInstance().open();\n          }\n          event.stopPropagation();\n          break;\n        }\n        case 'toggleState': {\n          const ev = new CustomEvent('sendState', {\n            detail: {\n              value: !this._currentState,\n              source: this\n            }\n          });\n          for (let address of this._element.querySelectorAll(':scope > cv-address')) {\n            if (address.getAttribute('mode') !== 'read') {\n              address.dispatchEvent(ev);\n            }\n          }\n          event.stopPropagation();\n          break;\n        }\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      // noinspection EqualityComparisonWithCoercionJS\n      let value = ev.detail.state == '1';\n      if (ev.detail.source instanceof cv.ui.structure.tile.elements.Address) {\n        const addressElement = ev.detail.source.getElement();\n        if (addressElement.hasAttribute('value')) {\n          // noinspection EqualityComparisonWithCoercionJS\n          value = ev.detail.state == addressElement.getAttribute('value');\n        }\n      }\n      this._currentState = value;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'menu-item',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/**\n * Wrapper for plugins\n */\nqx.Class.define('cv.ui.structure.tile.components.Plugin', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n   PL_COUNTER: 0\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __widget: null,\n\n    async _init() {\n      super._init();\n      // load plugin\n      let name = '';\n      if (this._element.hasAttribute('name')) {\n        name = this._element.getAttribute('name');\n      } else {\n        name = this._element.firstElementChild.nodeName.toLowerCase();\n      }\n      if (name) {\n        const pluginName = 'plugin-' + name;\n        const part = await this.loadPluginPart(pluginName);\n        if (part) {\n          // find the main class file in the package\n          let Clazz = null;\n          for (let baseName in cv.plugins) {\n            if (baseName.toLowerCase() === name) {\n              Clazz = cv.plugins[baseName];\n              break;\n            }\n          }\n          if (Clazz) {\n            cv.ui.structure.tile.components.Plugin.PL_COUNTER++;\n            const id = 'id_9_' + cv.ui.structure.tile.components.Plugin.PL_COUNTER;\n            const props = Clazz.parse(this._element.firstElementChild, id, '', 'text');\n            cv.TemplateEngine.getInstance().setDomFinished(false);\n            this.__widget = new Clazz(props);\n            this._element.innerHTML = `<div class=\"widget_container\" id=\"${id}\" data-type=\"${props.$$type}\">${this.__widget.getDomString()}</div>`;\n            const scriptLoader = cv.util.ScriptLoader.getInstance();\n            window.requestAnimationFrame(() => {\n              if (!scriptLoader.isFinished()) {\n                // wait until plugin dependencies have been loaded\n                scriptLoader.addListenerOnce('finished', () => {\n                  cv.TemplateEngine.getInstance().setDomFinished(true);\n                });\n              } else {\n                cv.TemplateEngine.getInstance().setDomFinished(true);\n              }\n            });\n          } else {\n            this.error('no main plugin class found for ' + pluginName);\n          }\n        }\n      } else {\n        this.error('no plugin name provided!');\n      }\n    },\n\n    async loadPluginPart(pluginName) {\n      const part = qx.Part.getInstance().getParts()[pluginName];\n      if (part) {\n        return new Promise(resolve => {\n          part.load(() => resolve(part), this);\n        });\n      }\n      this.error('plugin', pluginName, 'does not exist');\n      return Promise.resolve(null);\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'plugin',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* RoundProgress.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a round progress bar (partially filled circle).\n * This component must be used inside a cv-value component, it is not meant to be used standalone.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.RoundProgress', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MVisibility,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    progress: {\n      check: 'Number',\n      apply: '_applyProgress'\n    },\n\n    text: {\n      check: 'String',\n      apply: '_applyText'\n    },\n\n    type: {\n      check: ['circle', 'semiCircle'],\n      init: 'circle'\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __writeAddresses: null,\n    __circumference: null,\n    __start: null,\n    __normalizedRadius: null,\n    __radius: null,\n    __label: null,\n    __canvas: null,\n    __availableLabelWidth: null,\n    __defaultLabelFontSize: null,\n    _queuedFitText: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      const style = document.querySelector(':root').style;\n      const hasFixedRadius = element.hasAttribute('radius');\n      const radius = (this.__radius =\n        element.getAttribute('radius') || parseInt(style.getPropertyValue('--tileCellWidth')) || 56);\n      const strokeWidth = element.getAttribute('stroke') || 8;\n      const normalizedRadius = (this.__normalizedRadius = radius - strokeWidth / 2);\n      this.__circumference = normalizedRadius * 2 * Math.PI;\n\n      if (element.hasAttribute('min')) {\n        const min = parseInt(element.getAttribute('min'));\n        if (!isNaN(min)) {\n          this.setMin(min);\n        }\n      }\n\n      if (element.hasAttribute('max')) {\n        const max = parseInt(element.getAttribute('max'));\n        if (!isNaN(max)) {\n          this.setMax(max);\n        }\n      }\n\n      if (element.hasAttribute('type')) {\n        this.setType(element.getAttribute('type'));\n      }\n      const type = this.getType();\n      let height = type === 'semiCircle' ? radius : radius * 2;\n      const ns = 'http://www.w3.org/2000/svg';\n      const svg = document.createElementNS(ns, 'svg');\n      svg.setAttribute('height', height);\n      svg.setAttribute('width', '' + (radius * 2));\n      svg.setAttribute('type', type);\n\n      if (type === 'circle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'circle');\n          bg.classList.add('bg');\n          bg.setAttribute('r', '' +normalizedRadius);\n          bg.setAttribute('cx', '50%');\n          bg.setAttribute('cy', '50%');\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        const bar = document.createElementNS(ns, 'circle');\n        bar.classList.add('bar');\n        bar.setAttribute('r', '' +normalizedRadius);\n        bar.setAttribute('cx', '50%');\n        bar.setAttribute('cy', '50%');\n        bar.setAttribute('stroke-width', strokeWidth);\n        bar.setAttribute('stroke-dasharray', `${this.__circumference} ${this.__circumference}`);\n        bar.setAttribute('stroke-dashoffset', this.__circumference);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      } else if (type === 'semiCircle') {\n        if (!element.hasAttribute('no-background')) {\n          const bg = document.createElementNS(ns, 'path');\n          bg.classList.add('bg');\n          bg.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 1 ${\n            radius * 2 - strokeWidth / 2\n          } ${radius}`);\n          bg.setAttribute('fill', 'transparent');\n          bg.setAttribute('stroke-width', strokeWidth);\n          if (element.hasAttribute('background-color')) {\n            bg.style.stroke = element.getAttribute('background-color');\n          }\n          svg.appendChild(bg);\n        }\n        this.__start = {\n          x: strokeWidth / 2,\n          y: radius\n        };\n        const bar = document.createElementNS(ns, 'path');\n        bar.classList.add('bar');\n        bar.setAttribute('d', `M ${strokeWidth / 2} ${radius} A ${normalizedRadius} ${normalizedRadius} 0 0 0 ${\n          strokeWidth / 2\n        } ${radius}`);\n        bar.setAttribute('fill', 'transparent');\n        bar.setAttribute('stroke-width', strokeWidth);\n        if (element.hasAttribute('foreground-color')) {\n          bar.style.stroke = element.getAttribute('foreground-color');\n        }\n        svg.appendChild(bar);\n      }\n      element.replaceChildren(svg, document.createElement('label'));\n\n      this.__availableLabelWidth = radius * 2 - strokeWidth * 2 - 24;\n\n      if (!hasFixedRadius) {\n        qx.event.message.Bus.subscribe('cv.design.tile.cellWidthChanged', ev => {\n          this.__radius = ev.getData();\n          this.__normalizedRadius = this.__radius - strokeWidth / 2;\n          this.__circumference = this.__normalizedRadius * 2 * Math.PI;\n          height = type === 'semiCircle' ? this.__radius : this.__radius * 2;\n          const svg = element.querySelector(':scope > svg');\n          svg.setAttribute('height', '' + height);\n          svg.setAttribute('width', '' + this.__radius * 2);\n          if (type === 'circle') {\n            this._element.querySelectorAll(':scope > svg > circle').forEach(circle => {\n              circle.setAttribute('r', '' + this.__normalizedRadius);\n              if (circle.classList.contains('bar')) {\n                circle.setAttribute('stroke-dasharray', this.__circumference + ' ' + this.__circumference);\n\n                circle.setAttribute('stroke-dashoffset', '' + this.__circumference);\n              }\n            });\n          } else if (type === 'semiCircle') {\n            this.__start.y = this.__radius;\n            const bg = this._element.querySelector(':scope > svg > path.bg');\n            if (bg) {\n              bg.setAttribute(\n                'd',\n                `M ${strokeWidth / 2} ${this.__radius} A ${this.__normalizedRadius} ${this.__normalizedRadius} 0 0 1 ${\n                  this.__radius * 2 - strokeWidth / 2\n                } ${this.__radius}`\n              );\n            }\n          }\n          this._applyProgress(this.isPropertyInitialized('progress') ? this.getProgress() : 0);\n        });\n      }\n    },\n\n    __convert(angle) {\n      const angleRad = angle * (Math.PI / 180.0);\n      return {\n        x: this.__radius - this.__normalizedRadius * Math.cos(angleRad),\n        y: this.__radius - this.__normalizedRadius * Math.sin(angleRad)\n      };\n    },\n\n    _applyProgress(value) {\n      if (this.isConnected()) {\n        let valueElement;\n        let end;\n        let valueInRange = value - this.getMin();\n        let percent = Math.max(0, Math.min(100, (100 / (this.getMax() - this.getMin())) * valueInRange));\n\n        switch (this.getType()) {\n          case 'circle':\n            valueElement = this._element.querySelector(':scope > svg > circle.bar');\n\n            valueElement.setAttribute(\n              'stroke-dashoffset',\n              '' + this.__circumference - (percent / 100) * this.__circumference\n            );\n\n            break;\n\n          case 'semiCircle':\n            valueElement = this._element.querySelector(':scope > svg > path.bar');\n\n            end = this.__convert((180 / 100) * percent);\n            valueElement.setAttribute(\n              'd',\n              [\n                'M',\n                this.__start.x,\n                this.__start.y,\n                'A',\n                this.__normalizedRadius,\n                this.__normalizedRadius,\n                0,\n                0,\n                1,\n                end.x,\n                end.y\n              ].join(' ')\n            );\n\n            break;\n        }\n      }\n    },\n\n    _fitText() {\n      if (this.__label && this.__label.textContent) {\n        if (this.isVisible()) {\n          if (!this.__canvas) {\n            this.__canvas = document.createElement('canvas');\n            this.__context = this.__canvas.getContext('2d');\n            const compStyle = window.getComputedStyle(this.__label);\n            this.__context.font = compStyle.getPropertyValue('font');\n            this.__defaultLabelFontSize = compStyle.getPropertyValue('font-size');\n          }\n          const metrics = this.__context.measureText(this.__label.textContent);\n          if (metrics.width > this.__availableLabelWidth) {\n            // adjust font-size\n            const factor = this.__availableLabelWidth / metrics.width;\n            this.__label.style.fontSize = Math.floor(parseInt(this.__defaultLabelFontSize) * factor) + 'px';\n          } else {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n          this._queuedFitText = false;\n        } else {\n          this._queuedFitText = true;\n        }\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData() && this._queuedFitText) {\n        this._fitText();\n      }\n    },\n\n    _applyText(value) {\n      if (this.isConnected()) {\n        if (!this.__label) {\n          this.__label = this._element.querySelector(':scope > label');\n        }\n        this.__label.textContent = value;\n        if (!value) {\n          // empty text, just reset to default font size\n          if (this.__defaultLabelFontSize) {\n            this.__label.style.fontSize = this.__defaultLabelFontSize;\n          }\n        } else {\n          this._fitText();\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__label = null;\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'round-progress',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Select.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Allows the selection of one element out of a list of <cv-option> elements\n */\nqx.Class.define('cv.ui.structure.tile.components.Select', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __options: null,\n    __value: null,\n    __popup: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      this.__options = new Map();\n\n      const popup = (this.__popup = document.createElement('div'));\n      popup.classList.add('popup');\n      element.querySelectorAll(':scope > cv-option').forEach((option, i) => {\n        popup.appendChild(option);\n        if (!option.hasAttribute('key')) {\n          option.setAttribute('key', '' + i);\n        }\n        this.__options.set(option.getAttribute('key'), option);\n      });\n      const value = (this.__value = document.createElement('span'));\n      value.classList.add('value');\n      element.appendChild(value);\n      element.appendChild(popup);\n      const handle = document.createElement('cv-icon');\n      handle.classList.add('dropdown');\n      handle.classList.add('ri-arrow-down-s-line');\n      element.appendChild(handle);\n\n      if (this._writeAddresses.length > 0) {\n        element.addEventListener('click', ev => this.onClicked(ev));\n      }\n    },\n\n    onClicked(ev) {\n      const style = getComputedStyle(this.__popup);\n      let target = ev.target;\n      // find out event target (either the cv-select of cv-option\n      while (target !== ev.currentTarget && target.tagName.toLowerCase() !== 'cv-option') {\n        target = target.parentElement;\n      }\n      if (target.tagName.toLowerCase() === 'cv-option') {\n        // select this option\n        this._sendSelection(target.getAttribute('key'), true);\n      }\n      // open popup\n      if (style.getPropertyValue('display') === 'none') {\n        this.__popup.style.display = 'block';\n      } else {\n        this.__popup.style.display = 'none';\n      }\n    },\n\n    _sendSelection(key, predictive) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: key,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === 'click')\n        .forEach(address => address.dispatchEvent(ev));\n      if (predictive === true) {\n        this.setValue(key);\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      if (this.__options.has(mappedValue)) {\n        this.__value.innerHTML = '';\n        const current = this.__options.get(mappedValue);\n        if (current.children.length > 0) {\n          // if we have non text children, we only use them (only icons no text)\n          for (const child of current.children) {\n            this.__value.appendChild(child.cloneNode());\n          }\n        } else {\n          this.__value.innerHTML = current.innerHTML;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'select',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Slider.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a range slider.\n */\nqx.Class.define('cv.ui.structure.tile.components.Slider', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 5\n    },\n\n    min: {\n      check: 'Number',\n      init: 1,\n      apply: '_applyMin'\n    },\n\n    max: {\n      check: 'Number',\n      init: 100,\n      apply: '_applyMax'\n    },\n\n    showValue: {\n      check: 'Boolean',\n      init: true,\n      apply: '_applyShowValue'\n    },\n\n    throttleInterval: {\n      check: 'Number',\n      init: 250,\n      apply: '_applyThrottleInterval'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __throttled: null,\n    __input: null,\n\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('throttle-interval')) {\n        this.setThrottleInterval(parseInt(element.getAttribute('throttle-interval')));\n      } else {\n        this._applyThrottleInterval(this.getThrottleInterval());\n      }\n\n      // init components\n      let input = element.querySelector(':scope > input');\n      if (!input) {\n        input = document.createElement('input');\n        input.classList.add('slider');\n        input.setAttribute('type', 'range');\n        element.insertBefore(input, element.querySelector(':scope > .up'));\n        input.oninput = () => this.__throttled.call();\n      }\n      this.__input = input;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseInt(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('min')) {\n        this.setMin(parseInt(element.getAttribute('min')));\n      }\n      if (element.hasAttribute('max')) {\n        this.setMax(parseInt(element.getAttribute('max')));\n      }\n      if (element.hasAttribute('hide-value') && element.getAttribute('hide-value') === 'true') {\n        this.setShowValue(false);\n      } else {\n        this._applyShowValue(true);\n      }\n\n      const decreaseElement = element.querySelector(':scope > .decrease');\n      if (decreaseElement) {\n        decreaseElement.addEventListener('click', ev => this.onDecrease());\n      }\n      const increaseElement = element.querySelector(':scope > .increase');\n      if (increaseElement) {\n        increaseElement.addEventListener('click', ev => this.onIncrease());\n      }\n    },\n\n    _applyThrottleInterval(value) {\n      if (value > 0) {\n        this.__throttled = cv.util.Function.throttle(this.onInput, value, { trailing: true }, this);\n      } else {\n        // no throttling, direct call\n        this.__throttled = {\n          call: () => this.onInput(),\n          abort: () => {}\n        };\n      }\n    },\n\n    _applyMin(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('min', '' + value);\n    },\n\n    _applyMax(value) {\n      const input = this._element.querySelector(':scope > input');\n      input.setAttribute('max', '' + value);\n    },\n\n    _applyShowValue(value) {\n      let valueLabel = this._element.querySelector(':scope > label.value');\n      if (value) {\n        if (!valueLabel) {\n          valueLabel = document.createElement('label');\n          valueLabel.classList.add('value');\n          valueLabel.classList.add('secondary');\n          this._element.insertBefore(valueLabel, this._element.firstChild);\n        }\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector(':scope > input');\n      if (target) {\n        target.value = value;\n      }\n      if (this.isShowValue()) {\n        let valueLabel = this._element.querySelector(':scope > label.value');\n        if (valueLabel) {\n          valueLabel.innerText = mappedValue;\n        }\n      }\n    },\n\n    onInput() {\n      this.__sendValue(this.__input.value);\n    },\n\n    onDecrease() {\n      const value = this.getValue() - this.getStepWidth();\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getValue() + this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'slider',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Spinner.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a number value that can be increased and decreased by a defined step width.\n */\nqx.Class.define('cv.ui.structure.tile.components.Spinner', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    stepWidth: {\n      check: 'Number',\n      init: 1.0\n    },\n\n    mode: {\n      check: ['relative', 'absolute'],\n      init: 'absolute'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      if (element.hasAttribute('step-width')) {\n        this.setStepWidth(parseFloat(element.getAttribute('step-width')));\n      }\n      if (element.hasAttribute('mode')) {\n        this.setMode(element.getAttribute('mode'));\n      }\n      // init components\n      let valueElement = element.querySelector(':scope > .value');\n      if (!valueElement) {\n        valueElement = document.createElement('label');\n        valueElement.classList.add('value');\n        valueElement.classList.add('primary');\n        element.appendChild(valueElement);\n      }\n      // add increase / decrease buttons\n      const decrease = document.createElement('div');\n      decrease.classList.add('clickable');\n      decrease.classList.add('left');\n      const decreaseIcon = document.createElement('cv-icon');\n      decreaseIcon.classList.add('ri-arrow-down-s-line');\n      decrease.addEventListener('click', () => this.onDecrease());\n      decrease.appendChild(decreaseIcon);\n      element.insertBefore(decrease, valueElement);\n\n      const increase = document.createElement('div');\n      increase.classList.add('clickable');\n      increase.classList.add('right');\n      const increaseIcon = document.createElement('cv-icon');\n      increaseIcon.classList.add('ri-arrow-up-s-line');\n      increase.appendChild(increaseIcon);\n      increase.addEventListener('click', () => this.onIncrease());\n      element.appendChild(increase);\n    },\n\n    onDecrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() - this.getStepWidth() : this.getStepWidth() * -1;\n      this.__sendValue(value, 'decrease');\n    },\n\n    onIncrease() {\n      const value = this.getMode() === 'absolute' ? this.getValue() + this.getStepWidth() : this.getStepWidth();\n      this.__sendValue(value, 'increase');\n    },\n\n    _updateValue(mappedValue) {\n      const target = this._element.querySelector('.value');\n      if (target) {\n        target.innerHTML = mappedValue;\n      }\n    },\n\n    __sendValue(value, on) {\n      const ev = new CustomEvent('sendState', {\n        detail: {\n          value: value,\n          source: this\n        }\n      });\n\n      this._writeAddresses\n        .filter(addr => !addr.hasAttribute('on') || addr.getAttribute('on') === on)\n        .forEach(address => address.dispatchEvent(ev));\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'spinner',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Value.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a value from the backend, as label or image/icon\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.components.Value', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: [cv.ui.structure.tile.MVisibility, cv.ui.structure.tile.MResize],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.addListener('changeVisible', this._applyVisible, this);\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _queuedOverflowDetection: null,\n    _debouncedDetectOverflow: null,\n\n    _init() {\n      super._init();\n      this._debouncedDetectOverflow = qx.util.Function.debounce(this._detectOverflow, 20);\n\n      const target = this._element.querySelector('.value');\n      if (target && target.tagName.toLowerCase() === 'label') {\n        // check for overflowing text, when labels parent gets resized\n        this.setResizeTarget(this._element);\n        this.addListener('resized', this._debouncedDetectOverflow, this);\n      }\n    },\n\n    _applyVisible(ev) {\n      if (ev.getData()) {\n        if (this._queuedOverflowDetection) {\n          this._debouncedDetectOverflow();\n        }\n      } else {\n        const target = this._element.querySelector('.value');\n        if (target && target.classList.contains('scroll')) {\n          target.classList.remove('scroll');\n        }\n      }\n    },\n\n    _detectOverflow() {\n      const target = this._element.querySelector('.value');\n      if (this.isVisible()) {\n        this._queuedOverflowDetection = false;\n        if (target.clientWidth > target.parentElement.clientWidth) {\n          target.classList.add('scroll');\n        } else {\n          target.classList.remove('scroll');\n        }\n      } else {\n        this._queuedOverflowDetection = true;\n      }\n    },\n\n    _updateValue(mappedValue, value) {\n      const target = this._element.querySelector('.value');\n      let styleClass = '';\n      if (target) {\n        const tagName = target.tagName.toLowerCase();\n        switch (tagName) {\n          case 'cv-icon':\n            target._instance.setId(mappedValue);\n            if (this._element.hasAttribute('styling')) {\n              styleClass = cv.Application.structureController.styleValue(\n                this._element.getAttribute('styling'),\n                value,\n                this.__store\n              );\n            }\n            target._instance.setStyleClass(styleClass);\n            break;\n          case 'meter':\n            target.setAttribute('value', mappedValue);\n            target.innerHTML = '' + mappedValue;\n            break;\n          case 'cv-round-progress':\n            if (typeof value === 'string') {\n              value = parseInt(value);\n            }\n            target._instance.setProgress(value);\n            target._instance.setText('' + mappedValue);\n            break;\n          case 'label':\n            target.innerHTML = mappedValue;\n            this._debouncedDetectOverflow();\n            break;\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'value',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Backend.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * <cv-backend> Custom element to define a backend connection\n */\nqx.Class.define('cv.ui.structure.tile.elements.Backend', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _name: null,\n    __applyValues: null,\n\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const uriString = element.hasAttribute('uri') ? element.getAttribute('uri') : '';\n      let uri;\n      if (uriString) {\n        try {\n          uri = new URL(uriString, window.location.origin + window.location.pathname);\n        } catch (e) {\n          this.error('Error parsing uri: ' + uriString);\n        }\n      }\n\n      if (type) {\n        let credentials = null;\n        if (element.hasAttribute('username')) {\n          credentials = {\n            username: element.getAttribute('username'),\n            password: element.getAttribute('password') || ''\n          };\n        } else if (uri && uri.username) {\n          credentials = {\n            username: uri.username,\n            password: uri.password\n          };\n        }\n        const model = cv.data.Model.getInstance();\n        let backendUrl = uri ? uri.toString() : null;\n        let backendUrlConfigKey;\n        switch (type) {\n          case 'knxd':\n            backendUrlConfigKey = 'backendKnxdUrl';\n            break;\n          case 'openhab':\n            backendUrlConfigKey = 'backendOpenHABUrl';\n            break;\n          case 'mqtt':\n            backendUrlConfigKey = 'backendMQTTUrl';\n            break;\n        }\n\n        if (backendUrlConfigKey) {\n          // override by URL settings\n          if (cv.Config.URL[backendUrlConfigKey]) {\n            backendUrl = cv.Config.URL[backendUrlConfigKey];\n          } else if (!backendUrl && cv.Config.server[backendUrlConfigKey]) {\n            backendUrl = cv.Config.server[backendUrlConfigKey];\n          }\n        }\n        let name = type;\n        if (element.hasAttribute('name')) {\n          name = element.getAttribute('name');\n        } else if (!cv.io.BackendConnections.hasClient('main')) {\n          // we need one main backend\n          name = 'main';\n        } else if (cv.io.BackendConnections.getClient('main').configuredIn === 'config') {\n          qx.log.Logger.warn(\n            this,\n            `there is already a backend registered with name \"main\" and type ${type} skipping this one`\n          );\n\n          return;\n        }\n        qx.log.Logger.debug(this, 'init backend', name);\n        if (cv.io.BackendConnections.hasClient(name)) {\n          const notification = {\n            topic: 'cv.config.error',\n            title: qx.locale.Manager.tr('Config error'),\n            message: qx.locale.Manager.tr('There already exists a backend named: \"%1\"', name),\n\n            severity: 'urgent',\n            unique: true,\n            deletable: true\n          };\n\n          cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n          return;\n        }\n        const client = cv.io.BackendConnections.addBackendClient(name, type, backendUrl, 'config');\n\n        this._client = client;\n        this._name = name;\n        this.__applyValues = [];\n        client.update = data => model.updateFrom(name, data); // override clients update function\n\n        for (const data of element.querySelectorAll(':scope > cv-resource')) {\n          client.setResourcePath(data.getAttribute('name'), data.textContent.trim());\n        }\n\n        client.login(true, credentials, () => {\n          this.debug(name, 'connected');\n          if (element.hasAttribute('default') && element.getAttribute('default') === 'true') {\n            model.setDefaultBackendName(name);\n          }\n          const doSubscribe = () => {\n            for (const [address, value] of this.__applyValues) {\n              this.debug(name, 'apply update', address, value);\n              model.onUpdate(address, value, name);\n            }\n            const addressesToSubscribe = model.getAddresses(name);\n            this.debug(name, 'subscribing to', addressesToSubscribe.length, 'addresses');\n\n            if (addressesToSubscribe.length !== 0) {\n              client.subscribe(addressesToSubscribe);\n            }\n          };\n          if (cv.TemplateEngine.getInstance().isDomFinished()) {\n            doSubscribe();\n          } else {\n            qx.event.message.Bus.subscribe(\n              'setup.dom.finished',\n              function () {\n                doSubscribe();\n              },\n              this\n            );\n          }\n        });\n      } else {\n        this.error('<cv-backend> must have a type attribute');\n      }\n    },\n\n    _disconnected() {\n      if (this._client) {\n        const model = cv.data.Model.getInstance();\n        if (this._element.hasAttribute('default') && this._element.getAttribute('default') === 'true') {\n          model.resetDefaultBackendName();\n        }\n        this._client.terminate();\n        cv.io.BackendConnections.removeClient(this._client);\n        this._client.dispose();\n        this._client = null;\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'backend',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Loader.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Loads external content like CSS/JS files, config-content or a template file.\n *\n *  @author Tobias BrÃ¤utigam\n *  @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Loader', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n      const element = this._element;\n      const type = element.getAttribute('type');\n      const src = element.getAttribute('src');\n      let loaderElement;\n      if (src) {\n        switch (type) {\n          case 'css':\n            loaderElement = document.createElement('link');\n            loaderElement.setAttribute('type', 'text/css');\n            loaderElement.setAttribute('rel', 'stylesheet');\n            loaderElement.setAttribute('href', src);\n            break;\n\n          case 'js':\n            loaderElement = document.createElement('script');\n            loaderElement.setAttribute('type', 'text/javascript');\n            loaderElement.setAttribute('src', src);\n            break;\n\n          case 'templates':\n            this.loadXml(src, type);\n            break;\n        }\n\n        if (loaderElement) {\n          element.appendChild(loaderElement);\n        }\n      }\n    },\n\n    loadXml(uri) {\n      const ajaxRequest = new qx.io.request.Xhr(uri);\n      ajaxRequest.set({\n        accept: 'application/xml',\n        cache: !cv.Config.forceReload\n      });\n\n      ajaxRequest.addListenerOnce('success', function (e) {\n        let content = e.getTarget().getResponse();\n        let htmlContent = content;\n        const target = cv.Application.structureController.getRenderTarget();\n        // we need the documents to be in HTML namespace\n        if (!htmlContent.documentElement.xmlns) {\n          let text = e.getTarget().getResponseText();\n          text = text.replace('<templates', '<templates xmlns=\"http://www.w3.org/1999/xhtml\"');\n\n          const parser = new DOMParser();\n          htmlContent = parser.parseFromString(text, 'text/xml');\n        }\n        let child;\n        while ((child = htmlContent.documentElement.firstElementChild)) {\n          target.appendChild(child);\n        }\n        // register custom elements for templates in this document\n        cv.Application.structureController.registerTemplates(content);\n      });\n      ajaxRequest.addListener('statusError', e => {\n        const status = e.getTarget().getTransport().status;\n        if (!qx.util.Request.isSuccessful(status)) {\n          this.handleError('filenotfound', ajaxRequest.getUrl());\n        } else {\n          this.handleError(status, null);\n        }\n      });\n\n      ajaxRequest.send();\n    },\n\n    handleError(textStatus, additionalErrorInfo) {\n      const title = qx.locale.Manager.tr('File Error!').translate().toString();\n      let message = '';\n      let actions;\n      switch (textStatus) {\n        case 'parsererror':\n          message = qx.locale.Manager.tr('Invalid XML file!');\n          break;\n        case 'filenotfound':\n          message = qx.locale.Manager.tr('404: File not found, %1.', additionalErrorInfo).translate().toString();\n          break;\n        default:\n          message = qx.locale.Manager.tr('Unhandled error of type \"%1\"', textStatus).translate().toString();\n          if (additionalErrorInfo) {\n            message += ': ' + additionalErrorInfo;\n          } else {\n            message += '.';\n          }\n      }\n\n      const notification = {\n        topic: 'cv.error',\n        title: title,\n        message: message\n      };\n\n      if (actions) {\n        notification.actions = actions;\n      }\n      cv.core.notifications.Router.dispatchMessage(notification.topic, notification);\n\n      this.error(this, message.toString());\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'loader',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Mapping.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Mapping maps a value to another value that can be used to show e.g. the current state.\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Mapping', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(element) {\n    super(element);\n    this.__cache = {};\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __cache: null,\n\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      // avoid adding styling elements here as they inherit this method but call the super method too\n      if (this._element.tagName.toLowerCase().endsWith('mapping')) {\n        if (value) {\n          cv.Application.structureController.addMapping(this._element.getAttribute('name'), this);\n        } else {\n          cv.Application.structureController.removeMapping(this._element.getAttribute('name'));\n        }\n      }\n    },\n\n    /**\n     *\n     * @param val {variant}\n     * @param store {Map<string, variant>?} optional stored values from other addresses\n     * @param params {Array<variant>?} optional array of parameters for the mapping\n     * @return {string|*|string}\n     */\n    mapValue(val, store, params) {\n      if (Object.prototype.hasOwnProperty.call(this.__cache, val)) {\n        return this.__cache[val];\n      }\n      let mappedValue = '' + val;\n      const exactMatch = this._element.querySelector(':scope > entry[value=\"' + val + '\"]');\n\n      let type = this._element.hasAttribute('type') ? this._element.getAttribute('type') : 'string';\n      if (exactMatch) {\n        mappedValue = this._convert(exactMatch.innerHTML.trim(), type);\n        this.__cache[val] = mappedValue;\n        return mappedValue;\n      }\n      const formula = this._element.querySelector(':scope > formula');\n      if (formula) {\n        if (!formula._formula) {\n          let content = formula.textContent;\n          formula._formula = new Function('x', 'store', 'params', 'let y;' + content + '; return y;');\n        }\n        mappedValue = this._convert(formula._formula(val, store, params), type);\n        return mappedValue;\n      }\n      const entries = this._element.querySelectorAll(':scope > entry');\n      let defaultValue = null;\n\n      const mapped = Array.from(entries).some(entry => {\n        let matches = false;\n        let isDefaultValue = entry.hasAttribute('default') && entry.getAttribute('default') === 'true';\n        if (entry.hasAttribute('value')) {\n          const value = entry.getAttribute('value');\n          if (value === (val ? val : 'NULL') || value === '*') {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = this._convert(value, type);\n          }\n        } else if (entry.hasAttribute('range-min')) {\n          const rangeMin = parseFloat(entry.getAttribute('range-min'));\n          const rangeMax = entry.hasAttribute('range-max')\n            ? parseFloat(entry.getAttribute('range-max'))\n            : Number.POSITIVE_INFINITY;\n          const floatValue = parseFloat(val);\n          if (rangeMin <= floatValue && floatValue <= rangeMax) {\n            mappedValue = this._convert(entry.innerHTML.trim(), type);\n            matches = true;\n          }\n          if (isDefaultValue) {\n            defaultValue = rangeMin;\n          }\n        }\n        return matches;\n      });\n      if (!mapped && defaultValue !== null) {\n        mappedValue = this.mapValue(defaultValue);\n      }\n      this.__cache[val] = mappedValue;\n      return mappedValue;\n    },\n\n    _convert(value, type) {\n      switch (type.toLowerCase()) {\n        case 'boolean':\n          return value === 'true';\n        case 'integer':\n          return parseInt(value);\n        case 'float':\n          return parseFloat(value);\n        default:\n          return value;\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this.__cache = null;\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'mapping',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* StateNotification.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Parse notification settings and load them into the cv.core.notifications.Router\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.StateNotification', {\n  extend: cv.ui.structure.tile.elements.AbstractCustomElement,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _init() {\n    const stateConfig = {};\n    const elem = this._element;\n    const target =\n      cv.core.notifications.Router.getTarget(elem.getAttribute('target')) || cv.ui.NotificationCenter.getInstance();\n\n    const addressContainer = elem.querySelector('cv-addresses');\n\n    const config = {\n      target: target,\n      severity: elem.getAttribute('severity'),\n      skipInitial: elem.getAttribute('skip-initial') !== 'false',\n      deletable: elem.getAttribute('deletable') !== 'false',\n      unique: elem.getAttribute('unique') === 'true',\n      valueMapping: addressContainer.getAttribute('value-mapping'),\n      addressMapping: addressContainer.getAttribute('address-mapping'),\n      enabled: !elem.hasAttribute('enabled') || elem.getAttribute('enabled') === 'true'\n    };\n    if (elem.hasAttribute('id')) {\n      config.id = elem.getAttribute('id');\n      // notifications with id can be changed by the system backend, so we need to listen to some addresses\n      const model = cv.data.Model.getInstance();\n      model.addUpdateListener(`notification:${config.id}:enabled`, this._onStateUpdate, this, 'system');\n      model.addUpdateListener(`notification:${config.id}:severity`, this._onStateUpdate, this, 'system');\n\n      model.onUpdate(`notification:${config.id}:enabled`, config.enabled, 'system');\n      model.onUpdate(`notification:${config.id}:severity`, config.severity, 'system');\n    }\n\n    const name = elem.getAttribute('name');\n    if (name) {\n      config.topic = 'cv.state.' + name;\n    }\n    const icon = elem.getAttribute('icon');\n    if (icon) {\n      config.icon = icon;\n      const iconClasses = elem.getAttribute('icon-classes');\n      if (iconClasses) {\n        config.iconClasses = iconClasses;\n      }\n    }\n\n    // templates\n    const titleElem = elem.querySelector('cv-title-template');\n    if (titleElem) {\n      config.titleTemplate = titleElem.innerHTML;\n    }\n    const messageElem = elem.querySelector('cv-message-template');\n    if (messageElem) {\n      config.messageTemplate = messageElem.innerHTML;\n    }\n\n    // condition\n    const conditionElem = elem.querySelector('cv-condition');\n    let condition = conditionElem.textContent;\n    if (condition === 'true') {\n      condition = true;\n    } else if (condition === 'false') {\n      condition = false;\n    }\n    config.condition = condition;\n\n    let address;\n    for (const addressElement of addressContainer.querySelectorAll(':scope > cv-address')) {\n      address = addressElement.textContent.trim();\n      if (!Object.prototype.hasOwnProperty.call(stateConfig, address)) {\n        stateConfig[address] = [];\n      }\n      const addressConfig = Object.assign({}, config);\n      let mode = 1 | 2; // Bit 0 = read, Bit 1 = write  => 1|2 = 3 = readwrite\n      switch (addressElement.getAttribute('mode')) {\n        case 'disable':\n          mode = 0;\n          break;\n        case 'read':\n          mode = 1;\n          break;\n        case 'write':\n          mode = 2;\n          break;\n        case 'readwrite':\n          mode = 1 | 2;\n          break;\n      }\n      addressConfig.addressConfig = {\n        transform: addressElement.getAttribute('transform'),\n        mode: mode,\n        selector: addressElement.getAttribute('selector'),\n        ignoreError: addressElement.getAttribute('ignore-error') === 'true',\n        qos: (addressElement.getAttribute('qos') || 0) | 0, // force integer\n        retain: addressElement.getAttribute('retain') === 'true',\n        variantInfo: addressElement.getAttribute('variant')\n      };\n      stateConfig[address].push(addressConfig);\n    }\n    cv.core.notifications.Router.getInstance().registerStateUpdateHandler(stateConfig);\n  },\n\n    _onStateUpdate(address, state, initial, changed) {\n      const [, id, property] = address.split(':');\n      const router = cv.core.notifications.Router.getInstance();\n      if (property === 'enabled') {\n        router.enableStateUpdateHandler(id, state == 1);\n      } else if (property === 'severity') {\n        router.changeStateUpdateHandlerSeverity(id, state);\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'state-notification',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Styling.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Styling maps a value to another value that can be used to style a component\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.elements.Styling', {\n  extend: cv.ui.structure.tile.elements.Mapping,\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _applyConnected(value, oldValue, name) {\n      super._applyConnected(value, oldValue, name);\n      if (value) {\n        cv.Application.structureController.addStyling(this._element.getAttribute('name'), this);\n      } else {\n        cv.Application.structureController.removeStyling(this._element.getAttribute('name'));\n      }\n    }\n  },\n\n  defer(Clazz) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'styling',\n      class extends QxConnector {\n        constructor() {\n          super(Clazz);\n        }\n      }\n    );\n  }\n});\n","/* Group.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a group of widgets that can be hidden (works like the <detail> HTML Element)\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Group', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _init() {\n      super._init();\n      const element = this._element;\n      let label = null;\n      let summary = null;\n      const needsSummary = element.hasAttribute('name') || element.hasAttribute('icon');\n      if (needsSummary) {\n        summary = element.querySelector(':scope > summary');\n        if (!summary) {\n          summary = document.createElement('summary');\n          element.insertBefore(summary, element.firstChild);\n        }\n        if (element.hasAttribute('name')) {\n          label = element.querySelector(':scope > summary > label.title');\n          if (!label) {\n            label = document.createElement('label');\n            label.classList.add('title');\n            summary.insertBefore(label, summary.firstChild);\n          }\n          label.classList.add('last-of-title');\n          label.textContent = element.getAttribute('name');\n        }\n        if (element.hasAttribute('icon')) {\n          let icon = element.querySelector(':scope > summary > cv-icon.title');\n          if (!icon) {\n            icon = document.createElement('cv-icon');\n            icon.classList.add('title');\n            summary.insertBefore(icon, summary.firstChild);\n          }\n          if (!label) {\n            icon.classList.add('last-of-title');\n          }\n          icon.classList.add(element.getAttribute('icon'));\n        }\n      }\n      const empty = !element.querySelector(':scope > *:not(summary)');\n      if (empty) {\n        element.classList.add('empty');\n      } else if (summary) {\n        qx.event.Registration.addListener(summary, 'click', this._toggleOpen, this);\n      }\n    },\n\n    _toggleOpen() {\n      if (this._element.hasAttribute('open')) {\n        this._element.removeAttribute('open');\n      } else {\n        this._element.setAttribute('open', 'true');\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        if (ev.detail.target === 'summary') {\n          let target = this._element.querySelector(':scope > summary > label.value');\n\n          if (!target) {\n            target = document.createElement('label');\n            target.classList.add('value');\n            const summary = this._element.querySelector(':scope > summary');\n            summary.appendChild(target);\n          }\n          target.textContent = ev.detail.state;\n        } else {\n          this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'group',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a new sub-page and adds a corresponding link to the current page.\n *\n * @ignore(InstallTrigger)\n * @author Tobias BrÃ¤utigam\n * @since 2021\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Page', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    visibility: {\n      refine: true,\n      init: 'excluded'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _supportsContentVisibility: null,\n    _visibleDisplayMode: null,\n\n    _init() {\n      if (typeof InstallTrigger !== 'undefined') {\n        // firefox does not support content-visibility CSS property\n        // see: https://developer.mozilla.org/en-US/docs/Web/CSS/content-visibility\n        this._element.classList.add('no-content-visibility');\n        this._supportsContentVisibility = false;\n      } else {\n        this._supportsContentVisibility = true;\n      }\n    },\n\n    _applyVisibility(value) {\n      switch (value) {\n        case 'visible':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'visible';\n          } else if (this._visibleDisplayMode) {\n            this._element.style.display = this._visibleDisplayMode || 'initial';\n          }\n          break;\n\n        case 'hidden':\n        case 'excluded':\n          if (this._supportsContentVisibility) {\n            this._element.style.contentVisibility = 'hidden';\n          } else {\n            this._visibleDisplayMode = getComputedStyle(this._element).getPropertyValue('display');\n            this._element.style.display = 'none';\n          }\n          break;\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'page',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'row',\n      class extends HTMLElement {\n        constructor() {\n          super();\n          if (this.hasAttribute('colspan')) {\n            this.classList.add('colspan-' + this.getAttribute('colspan'));\n          }\n          if (this.hasAttribute('rowspan')) {\n            this.classList.add('rowspan-' + this.getAttribute('rowspan'));\n          }\n        }\n      }\n    );\n  }\n});\n","/* Popup.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a popup that contains arbitrary content and can be opened as an overlay over the current UI.\n *\n * @author Tobias BrÃ¤utigam\n * @since 2022\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Popup', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    STATICS\n  ***********************************************\n  */\n  statics: {\n    openedPopups: []\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    _closeButton: null,\n\n    _init() {\n      super._init();\n      const popup = this._element;\n      const closeable = !popup.hasAttribute('closeable') || popup.getAttribute('closeable') === 'true';\n      if (closeable) {\n        this._closeButton = document.createElement('button');\n        this._closeButton.classList.add('close');\n        const icon = document.createElement('i');\n        icon.classList.add('ri-close-line');\n        this._closeButton.appendChild(icon);\n        popup.insertBefore(this._closeButton, popup.firstChild);\n        this._closeButton.addEventListener('click', () => this.close());\n      }\n      popup.addEventListener('close', ev => {\n        this.close();\n      });\n      if (popup.hasAttribute('title')) {\n        const header = document.createElement('header');\n        popup.insertBefore(header, popup.firstChild);\n        const title = document.createElement('h2');\n        title.textContent = popup.getAttribute('title');\n        header.appendChild(title);\n      }\n      if (popup.hasAttribute('auto-close-timeout')) {\n        const timeoutSeconds = parseInt(popup.getAttribute('auto-close-timeout'));\n\n        if (!isNaN(timeoutSeconds)) {\n          this._autoCloseTimer = new qx.event.Timer(timeoutSeconds * 1000);\n          this._autoCloseTimer.addListener('interval', () => {\n            this._autoCloseTimer.stop();\n            this.close();\n          });\n        } else {\n          this.error('invalid auto-close-timeout value:', popup.getAttribute('auto-close-timeout'));\n        }\n      }\n    },\n\n    open() {\n      const popup = this._element;\n      if (!popup.hasAttribute('open')) {\n        popup.setAttribute('open', '');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.registerModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.start();\n        }\n      }\n    },\n\n    close() {\n      const popup = this._element;\n      if (popup) {\n        popup.removeAttribute('open');\n        if (popup.hasAttribute('modal') && popup.getAttribute('modal') === 'true') {\n          this.unregisterModalPopup();\n        }\n        if (this._autoCloseTimer) {\n          this._autoCloseTimer.stop();\n        }\n        popup.dispatchEvent(new CustomEvent('closed'));\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget.\n     * The popup handles the special address-targets:\n     *  - open: opens the popup when the address value is 'true' or 1 => no auto closing\n     *  - close: closes the popup when the address value is 'false' or 0 => no auto opening\n     *  - open-close: the upper both combined => popup visibility fully dependent on the address value, auto-opening + auto-closing\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from an cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'open':\n            if (ev.detail.state) {\n              this.open();\n            }\n            break;\n\n          case 'open-close':\n            if (ev.detail.state) {\n              this.open();\n            } else {\n              this.close();\n            }\n            break;\n\n          case 'close':\n            if (!ev.detail.state) {\n              this.close();\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n            break;\n        }\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    this._disposeObjects('_autoCloseTimer');\n    if (this._closeButton) {\n      this._closeButton.remove();\n      this._closeButton = null;\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'popup',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n","/* Tile.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows a tile\n */\nqx.Class.define('cv.ui.structure.tile.widgets.Tile', {\n  extend: cv.ui.structure.tile.components.AbstractComponent,\n  include: cv.ui.structure.tile.MPopup,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    backgroundImage: {\n      check: 'String',\n      nullable: true,\n      apply: '_applyBackgroundImage'\n    },\n\n    /**\n     * Turn this tile into a popup\n     */\n    popup: {\n      check: 'Boolean',\n      init: false,\n      apply: '_applyPopup'\n    }\n  },\n\n  /*\n  ***********************************************\n    EVENTS\n  ***********************************************\n  */\n  events: {\n    fullscreenChanged: 'qx.event.type.Data'\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    _fullScreenMode: null,\n\n    _init() {\n      super._init();\n      this._initPopupChild();\n      if (this._element.hasAttribute('background-image')) {\n        this.setBackgroundImage(this._element.getAttribute('background-image'));\n      }\n      if (this._childPopup) {\n        this._childPopup.addEventListener('closed', () => {\n          this.resetPopup();\n        });\n      }\n    },\n\n    _applyBackgroundImage(value) {\n      if (value) {\n        this._element.style.backgroundImage = `url(${value})`;\n        let overlay = this._element.querySelector(':scope > div.overlay');\n        if (!overlay) {\n          overlay = document.createElement('div');\n          overlay.classList.add('overlay');\n          this._element.insertBefore(overlay, this._element.firstChild);\n        }\n        this._element.classList.add('has-bg-image');\n      } else {\n        this._element.style.backgroundImage = '';\n        this._element.classList.remove('has-bg-image');\n      }\n    },\n\n    open() {\n      if (this._childPopup) {\n        this._openPopupChild();\n      } else if (this._headerFooterParent) {\n        const target = this._headerFooterParent;\n        let closeButton = target.querySelector(':scope > button.close');\n        if (!closeButton) {\n          closeButton = document.createElement('button');\n          closeButton.classList.add('close');\n          const icon = document.createElement('i');\n          icon.classList.add('ri-close-line');\n          closeButton.appendChild(icon);\n          target.appendChild(closeButton);\n          closeButton.addEventListener('click', () => this.setPopup(false));\n        }\n        closeButton.style.display = 'block';\n        target.classList.add('popup');\n        if (this._fullScreenMode) {\n          target.classList.add('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        this.registerModalPopup();\n      }\n    },\n\n    close(keepState) {\n      if (!keepState) {\n        this.setPopup(false);\n      }\n      if (this._childPopup) {\n        this._closePopupChild();\n      } else if (this._headerFooterParent) {\n        this._headerFooterParent.classList.remove('popup');\n        if (this._fullScreenMode) {\n          this._headerFooterParent.classList.remove('fullscreen');\n          this.fireDataEvent('fullscreenChanged', true);\n        }\n        let closeButton = this._headerFooterParent.querySelector(':scope > button.close');\n        if (closeButton) {\n          closeButton.style.display = 'none';\n        }\n        this.unregisterModalPopup();\n      }\n      if (this._autoCloseTimer) {\n        this._autoCloseTimer.stop();\n      }\n      this.fireEvent('closed');\n    },\n\n    _applyPopup(value) {\n      if (value) {\n        this.open();\n      } else {\n        this.close(true);\n      }\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param ev {CustomEvent} stateUpdate event fired from a cv-address component\n     */\n    onStateUpdate(ev) {\n      if (!super.onStateUpdate(ev)) {\n        switch (ev.detail.target) {\n          case 'background-image':\n            this.setBackgroundImage(ev.detail.state);\n            break;\n\n          case 'popup':\n          case 'fullscreen-popup':\n            this._fullScreenMode = ev.detail.target === 'fullscreen-popup';\n            if (ev.detail.addressValue) {\n              // only open when the sent value equals the fixed value\n              // noinspection EqualityComparisonWithCoercionJS\n              if (ev.detail.addressValue == ev.detail.state) {\n                this.setPopup(true);\n                // this is not closing by address, so we set a close timeout to 3 minutes\n                if (!this._autoCloseTimer) {\n                  this._autoCloseTimer = new qx.event.Timer(180 * 1000);\n                  this._autoCloseTimer.addListener('interval', this.close, this);\n                }\n                this._autoCloseTimer.restart();\n              }\n            } else {\n              // open / close depending on value\n              // noinspection EqualityComparisonWithCoercionJS\n              this.setPopup(ev.detail.state == 1);\n            }\n            break;\n\n          default:\n            this.debug('unhandled address target', ev.detail.target);\n        }\n      }\n    }\n  },\n\n  defer(QxClass) {\n    customElements.define(\n      cv.ui.structure.tile.Controller.PREFIX + 'tile',\n      class extends QxConnector {\n        constructor() {\n          super(QxClass);\n        }\n      }\n    );\n  }\n});\n"],"mappings":"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"}