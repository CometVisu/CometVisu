function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(r,t)};return _wrapNativeSuper(t)}function _construct(t,e,r){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));r&&_setPrototypeOf(o,r.prototype);return o};return _construct.apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new S(o||[]);return n(a,"_invoke",{value:P(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function h(){}var _={};c(_,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(A([])));m&&m!==e&&r.call(m,i)&&(_=m);var v=h.prototype=p.prototype=Object.create(_);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){r(t);return}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,s,"next",t)}function s(t){asyncGeneratorStep(i,n,o,a,s,"throw",t)}a(void 0)}))}}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"cv.ui.structure.IController":{require:!0},"qx.bom.Stylesheet":{construct:!0},"qx.util.ResourceManager":{construct:!0},"cv.Config":{construct:!0},"qx.locale.Manager":{construct:!0,defer:"runtime"},"qx.log.Logger":{defer:"runtime"},"qx.bom.History":{},"qx.event.message.Bus":{},"qx.io.request.Xhr":{},"cv.TemplateEngine":{},"qx.util.Request":{},"cv.data.Model":{},"cv.Application":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.Controller",{extend:qx.core.Object,type:"singleton",implement:cv.ui.structure.IController,construct:function(){qx.core.Object.constructor.call(this);this.__P_72_0="";qx.bom.Stylesheet.includeFile(qx.util.ResourceManager.getInstance().toUri("designs/tile-globals.scss").replace(".scss",".css")+(!0===cv.Config.forceReload?"?"+Date.now():""));qx.locale.Manager.getInstance().addListener("changeLocale",this._onChangeLocale,this)},statics:{PREFIX:"cv-",__P_72_1:{},__P_72_2:{},MAPPING_PARAM_REGEX:/^(.+)\(([^)]+)\)$/,register:function(t,e){this.__P_72_1[t]=e},onComponentCreated:function(t){var e=t.tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(this,e)){var r=this.__P_72_1[e];Object.prototype.hasOwnProperty.call(this,e)||(this.__P_72_2[e]=[]);this.__P_72_2[e].push(new r(t))}else qx.log.Logger.error(this,"no QxClass registered for custom element "+e)}},properties:{renderTarget:{check:"Element",init:document.body},namespace:{check:"String",init:""},scrolled:{check:"Boolean",init:!1,apply:"_applyScrolled"}},members:{__P_72_0:null,__P_72_3:null,__P_72_4:null,getHtmlStructure:function(){return this.__P_72_0},supports:function(t,e){return!1},initLayout:function(){},__P_72_5:function(){document.location.hash?this.scrollToPage(document.location.hash.substring(1)):this.scrollToPage(this.getInitialPageId())},onHistoryRequest:function(t){t&&this.scrollToPage(t)},scrollToPage:function(t,e){if(t){var r=document.querySelector("#"+t);if(r){if(!r.classList.contains("active")){var n,o=_createForOfIteratorHelper(document.querySelectorAll("cv-page.active"));try{for(o.s();!(n=o.n()).done;){n.value.classList.remove("active")}}catch(t){o.e(t)}finally{o.f()}var i,a=_createForOfIteratorHelper(document.querySelectorAll("cv-page.sub-active"));try{for(a.s();!(i=a.n()).done;){i.value.classList.remove("sub-active")}}catch(t){a.e(t)}finally{a.f()}r.classList.add("active");for(var s=r.parentElement;s&&"main"!==s.nodeName.toLowerCase();){"cv-page"===s.nodeName.toLowerCase()&&s.classList.add("sub-active");s=s.parentElement}if(void 0===e){var c=r.getAttribute("name"),u="CometVisu";c&&(u=c+" - "+u);qx.bom.History.getInstance().addToHistory(t,u)}qx.event.message.Bus.dispatchByName("cv.ui.structure.tile.currentPage",r)}}else this.warn("no page with id",t,"found")}},parseBackendSettings:function(t){return!1},parseSettings:function(t){var e=this;document.body.classList.add("loading-structure");var r=cv.Config.configSettings,n=t.documentElement;r.bindClickToWidget="true"===n.getAttribute("bind_click_to_widget");this.translate(t,!0);if(!cv.Config.cacheUsed){var o=qx.util.ResourceManager.getInstance().toUri("structures/tile/templates.xml"),i=new qx.io.request.Xhr(o);i.set({accept:"application/xml",cache:!cv.Config.forceReload});i.addListenerOnce("success",(function(t){var r,o=t.getTarget().getResponse(),i=e.getRenderTarget();e.debug("creating pages");e.registerTemplates(o);if(!o.documentElement.xmlns){var a=t.getTarget().getResponseText();a=a.replace("<templates",'<templates xmlns="http://www.w3.org/1999/xhtml"');o=(new DOMParser).parseFromString(a,"text/xml")}for(;r=o.documentElement.firstElementChild;)i.appendChild(r);for(;r=n.firstElementChild;)i.appendChild(r);document.body.classList.remove("loading-structure");e.debug("finalizing");e.observeVisibility();qx.event.message.Bus.dispatchByName("setup.dom.append");e.debug("pages created");e.__P_72_5();e.debug("setup.dom.finished");qx.event.message.Bus.dispatchByName("setup.dom.finished.before");cv.TemplateEngine.getInstance().setDomFinished(!0);var s=document.body.querySelector(":scope > main");if(s){var c=-1,u=!1;s.addEventListener("scroll",(function(){if(c<0){c=1;var t,r,n=_createForOfIteratorHelper(document.body.querySelectorAll(':scope > header [hide-on-scroll="true"]'));try{for(n.s();!(r=n.n()).done;){var o=r.value;t=getComputedStyle(o);u||(u=!!o.style.height);c+=parseInt(t.height)+parseInt(t.paddingTop)+parseInt(t.paddingBottom)+parseInt(t.marginTop)+parseInt(t.marginBottom)}}catch(t){n.e(t)}finally{n.f()}}if(!e.isScrolled()&&s.scrollTop>c){e.setScrolled(!0);u||(s.scrollTop-=c)}else if(e.isScrolled()&&0===s.scrollTop){e.setScrolled(!1);c=-1}}))}}));i.addListener("statusError",(function(t){var r=t.getTarget().getTransport().status;qx.util.Request.isSuccessful(r)||e.error("filenotfound",o);document.body.classList.remove("loading-structure")}));i.send()}},_applyScrolled:function(t){if(t){var e,r=_createForOfIteratorHelper(document.body.querySelectorAll(':scope > header [hide-on-scroll="true"]'));try{for(r.s();!(e=r.n()).done;){e.value.classList.add("scrolled")}}catch(t){r.e(t)}finally{r.f()}}else{var n,o=_createForOfIteratorHelper(document.body.querySelectorAll(':scope > header [hide-on-scroll="true"]'));try{for(o.s();!(n=o.n()).done;){n.value.classList.remove("scrolled")}}catch(t){o.e(t)}finally{o.f()}}},registerTemplates:function(t){t.querySelectorAll("templates[structure='tile'] > template").forEach((function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+t.getAttribute("id"),function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t.getAttribute("id"))}return _createClass(n)}(e))}))},preParse:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.documentElement.hasAttribute("theme")){n=t.documentElement.getAttribute("theme");o={};if("system"===n)if(window.matchMedia){n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.documentElement.setAttribute("data-theme",n);o.theme=n;cv.data.Model.getInstance().updateFrom("system",o);window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){document.documentElement.setAttribute("data-theme",t.matches?"dark":"light");o.theme=t.matches?"dark":"light";cv.data.Model.getInstance().updateFrom("system",o)}))}else e.error("system theme detection not possible in this browser");else{document.documentElement.setAttribute("data-theme",n);o.theme=n;cv.data.Model.getInstance().updateFrom("system",o)}}return r.abrupt("return",!0);case 2:case"end":return r.stop()}}),r)})))()},createUI:function(t){},observeVisibility:function(){var t,e=new IntersectionObserver((function(t,e){t.forEach((function(t){if(t.isIntersecting&&t.target.hasAttribute("data-src")){t.target.setAttribute("src",t.target.getAttribute("data-src"));t.target.removeAttribute("data-src");e.unobserve(t.target)}}),{root:document.querySelector("body > main")})})),r=_createForOfIteratorHelper(document.querySelectorAll("iframe[data-src], img[data-src]"));try{for(r.s();!(t=r.n()).done;){var n=t.value;e.observe(n)}}catch(t){r.e(t)}finally{r.f()}},translate:function(t,e,r){var n=qx.locale.Manager.getInstance().getLanguage(),o=/locale=([a-z]{2,3})/.exec(document.location.search);o&&(n=o[1]);e&&(this._trKeys={});for(var i=0,a=["name","label","title","format"];i<a.length;i++){var s,c=a[i],u=_createForOfIteratorHelper(t.querySelectorAll("*[".concat(c,'^="tr("]')));try{for(u.s();!(s=u.n()).done;){var l=s.value,f=/^tr\('([^']+)'\)$/.exec(l.getAttribute(c));if(f||r){var p=r?this._trKeys[l.getAttribute(c)]:f[1],d=t.querySelector('cv-translations > language[name="'.concat(n,"\"] > tr[key='").concat(p,"']"));if(d){e&&(this._trKeys[d.textContent.trim()]=p);l.setAttribute(c,d.textContent.trim())}else{l.setAttribute(c,p);this.warn("[".concat(n,'] no translation found for: "').concat(p,'"'))}}else this.warn("attribute content no valid translation string",l.getAttribute(c))}}catch(t){u.e(t)}finally{u.f()}}var h,_=_createForOfIteratorHelper(t.querySelectorAll('*[tr="true"]'));try{for(_.s();!(h=_.n()).done;){var y=h.value,m=r?this._trKeys[y.textContent.trim()]:y.textContent.trim(),v=t.querySelector('cv-translations > language[name="'.concat(n,"\"] > tr[key='").concat(m,"']"));if(v){e&&(this._trKeys[v.textContent.trim()]=m);y.textContent=v.textContent.trim()}else{y.textContent=m;this.warn("[".concat(n,'] no translation found for: "').concat(m,'"'))}}}catch(t){_.e(t)}finally{_.f()}},doScreenSave:function(){cv.Config.configSettings.screensave_page&&this.scrollToPage(cv.Config.configSettings.screensave_page)},getInitialAddresses:function(){return[]},getInitialPageId:function(){var t=document.querySelector("cv-page");return t?t.id:""},addMapping:function(t,e){this.__P_72_3||(this.__P_72_3={});this.__P_72_3[t]=e},removeMapping:function(t){this.__P_72_3&&delete this.__P_72_3[t]},mapValue:function(t,e,r){var n,o=[];if(null!==(n=cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(t))){try{o=JSON.parse("[".concat(n[2].replaceAll("'",'"'),"]"))}catch(e){this.error("error parsing parameters from "+t)}t=n[1]}return this.__P_72_3&&Object.prototype.hasOwnProperty.call(this.__P_72_3,t)?this.__P_72_3[t].mapValue(e,r,o):e},addStyling:function(t,e){this.__P_72_4||(this.__P_72_4={});this.__P_72_4[t]=e},removeStyling:function(t){this.__P_72_4&&delete this.__P_72_4[t]},styleValue:function(t,e,r){return this.__P_72_4&&Object.prototype.hasOwnProperty.call(this.__P_72_4,t)?this.__P_72_4[t].mapValue(e,r):e},parseLabel:function(){return""},_onChangeLocale:function(){this.translate(document.body,!1,!0)}},defer:function(t){window.cvTestMode||(cv.Application.structureController=t.getInstance())},destruct:function(){qx.locale.Manager.getInstance().removeListener("changeLocale",this._onChangeLocale,this)}});var e=function(t){"use strict";_inherits(r,t);var e=_createSuper(r);function r(t){var n;_classCallCheck(this,r);n=e.call(this);var o=cv.ui.structure.tile.Controller.getInstance(),i=document.getElementById(t);if(i){var a,s=["name","replaces","parent-scope"],c=i.content.cloneNode(!0),u=_createForOfIteratorHelper(i.getAttributeNames());try{for(u.s();!(a=u.n()).done;){var l=a.value;"id"!==l&&n.setAttribute(l,i.getAttribute(l))}}catch(t){u.e(t)}finally{u.f()}var f,p=_createForOfIteratorHelper(c.querySelectorAll("slot"));try{var d=function(){for(var e=f.value,r=e.getAttribute("name"),i=e.hasAttribute("replaces")?e.getAttribute("replaces"):"",a=e.hasAttribute("parent-scope")?parseInt(e.getAttribute("parent-scope")):0,u=n.querySelectorAll("[slot='".concat(r,"']")),l={},p=0,d=e.attributes.length;p<d;p++)s.includes(e.attributes[p].name)||(l[e.attributes[p].name]=e.attributes[p].value);if(u.length>0){Array.from(u).forEach((function(r){var n=r.cloneNode(!0);Object.keys(l).forEach((function(e){n.hasAttribute(e)?"class"===e?n.classList.add(l[e]):qx.log.Logger.debug(o,"["+t+"] attribute",e,"already set, skipping"):n.setAttribute(e,l[e])}));n.removeAttribute("slot");e.parentNode.insertBefore(n,e)}));e.remove();i&&c.querySelectorAll(i).forEach((function(t){t.remove()}))}else{var h=e.parentNode;if(a>0){for(var _=a-1;_>0;){h=h.parentNode;_--}h&&h.remove()}else{e.remove();0===h.children.length&&h.remove()}}};for(p.s();!(f=p.n()).done;)d()}catch(t){p.e(t)}finally{p.f()}n.getAttributeNames().forEach((function(t){var e=n.getAttribute(t),r=c.querySelectorAll("[slot-"+t+"]"),o=t;t.endsWith("-mapping")?o="mapping":t.endsWith("-styling")?o="styling":t.endsWith("-format")&&(o="format");var i,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(o!==t&&s.hasAttribute("slot-"+t)){var u=s.getAttribute("slot-"+t);if(u.startsWith(":")){var l,f=_createForOfIteratorHelper(u.substring(1).split(","));try{for(f.s();!(l=f.n()).done;){var p=l.value.split("="),d=_slicedToArray(p,2),h=d[0],_=d[1];if("target"===h)t=_;else qx.log.Logger.error(_assertThisInitialized(n),"unhandled slot-attribute configuration key",h)}}catch(t){f.e(t)}finally{f.f()}}s.setAttribute(t,e);s.removeAttribute("slot-"+t)}else{s.setAttribute(o,e);s.removeAttribute("slot-"+o)}}}catch(t){a.e(t)}finally{a.f()}r.length>0&&n.removeAttribute(t)}));c.querySelectorAll("*").forEach((function(t){_toConsumableArray(t.attributes).forEach((function(e){if(e.name.startsWith("slot-")){var r=e.name.substring(5);e.name.endsWith("-mapping")&&t.hasAttribute("slot-mapping")?r="mapping":e.name.endsWith("-styling")&&t.hasAttribute("slot-styling")?r="styling":e.name.endsWith("-format")&&t.hasAttribute("slot-format")&&(r="format");e.value&&!e.value.startsWith(":")&&t.setAttribute(r,e.value);t.removeAttribute(e.name)}}))}));n.innerHTML="";n.appendChild(c);n.classList.add("cv-widget")}else qx.log.Logger.error(o,"["+t+"] no template found for id",t);return n}return _createClass(r)}(_wrapNativeSuper(HTMLElement));cv.ui.structure.tile.Controller.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0},"qx.event.Registration":{},"cv.util.Tree":{},"qx.event.Timer":{}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MPopup",{construct:function(){this._onPointerDownBounded=this._onPointerDown.bind(this)},statics:{openedPopups:[]},events:{closed:"qx.event.type.Event"},members:{_childPopup:null,_onPointerDownBounded:null,_initPopupChild:function(){var t=this._childPopup=this._element.querySelector(":scope > cv-popup");if(t){qx.event.Registration.addListener(this._element,"tap",this._openPopupChild,this);for(var e,r=t.parentElement;r;){if("cv-group"===r.tagName.toLowerCase())e.classList.add("has-popup");else if("cv-page"===r.tagName.toLowerCase())break;e=r;r=r.parentElement}}},_openPopupChild:function(){var t=this._element.querySelector(":scope > cv-popup:not([open])");t&&t.getInstance().open()},_closePopupChild:function(){var t=this._element.querySelector(":scope > cv-popup[open]");t&&t.getInstance().close()},registerModalPopup:function(){document.addEventListener("pointerup",this._onPointerDownBounded);var t=document.body.querySelector(".modal-popup-blocker");if(!t){(t=document.createElement("div")).classList.add("modal-popup-blocker");document.body.appendChild(t)}t.style.display="block";cv.ui.structure.tile.MPopup.openedPopups.push(this)},unregisterModalPopup:function(){document.removeEventListener("pointerup",this._onPointerDownBounded);var t=cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);cv.ui.structure.tile.MPopup.openedPopups.splice(t,1);var e=document.body.querySelector(".modal-popup-blocker");e&&0===cv.ui.structure.tile.MPopup.openedPopups.length&&(e.style.display="none")},_onPointerDown:function(t){if(!cv.util.Tree.isChildOf(t.target,this._element)){t.preventDefault();t.stopImmediatePropagation();qx.event.Timer.once(this.close,this,100)}}},destruct:function(){qx.event.Registration.removeListener(this._element,"tap",this._openPopupChild,this);this._childPopup=null}});cv.ui.structure.tile.MPopup.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0},"qx.Class":{construct:!0},"cv.ui.structure.tile.MVisibility":{construct:!0},"qx.event.Timer":{}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MRefresh",{construct:function(){qx.Class.hasMixin(this.constructor,cv.ui.structure.tile.MVisibility)&&this.addListener("changeVisible",this.__P_73_0,this)},properties:{refresh:{check:"Number",init:0,apply:"_applyRefresh"}},members:{_refreshTimer:null,_lastRefresh:null,_applyRefresh:function(t){if(0===t)this._refreshTimer&&this._refreshTimer.stop();else if(this._refreshTimer)this._refreshTimer.restartWith(1e3*t);else{this._refreshTimer=new qx.event.Timer(1e3*t);this._refreshTimer.addListener("interval",this.__P_73_1,this);"function"==typeof this.isVisible?this.isVisible()&&this._refreshTimer.start():this._refreshTimer.start()}},__P_73_0:function(t){if(t.getData())if(this._refreshTimer){this._refreshTimer.start();(!this._lastRefresh||Date.now()-this._lastRefresh>=this._refreshTimer.getInterval())&&this.__P_73_1()}else this._lastRefresh||this.__P_73_1();else this._refreshTimer&&this._refreshTimer.stop()},__P_73_1:function(){if("function"==typeof this.refresh){this.refresh();this._lastRefresh=Date.now()}else this.error("refresh method must be implemented!")}},destruct:function(){this._disposeObjects("_refreshTimer")}});cv.ui.structure.tile.MRefresh.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MVisibility",{construct:function(){this._observeVisibility()},statics:{observer:new IntersectionObserver((function(t,e){t.forEach((function(t){t.target._instance&&t.target._instance.setVisible(t.isIntersecting)}),{root:document.querySelector("body > main")})}))},properties:{visible:{check:"Boolean",init:!1,event:"changeVisible"}},members:{_observeVisibility:function(){this._element?cv.ui.structure.tile.MVisibility.observer.observe(this._element):this.warn("no element to observe defined")}}});cv.ui.structure.tile.MVisibility.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MResize",{construct:function(){var t=this;this._observer=new ResizeObserver((function(e,r){var n=t.getResizeTarget();e.some((function(e){if(e.target===n){t.fireDataEvent("resized",e);return!0}return!1}))}))},events:{resized:"qx.event.type.Data"},properties:{resizeTarget:{check:"Element",nullable:!0,apply:"_applyResizeTarget"}},members:{_observer:null,_applyResizeTarget:function(t,e){e&&this._observer.unobserve(e);t&&this._observer.observe(t)}},destruct:function(){this._observer.disconnect();this._observer=null}});cv.ui.structure.tile.MResize.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(r,t)};return _wrapNativeSuper(t)}function _construct(t,e,r){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));r&&_setPrototypeOf(o,r.prototype);return o};return _construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.AbstractCustomElement",{extend:qx.core.Object,type:"abstract",construct:function(t){this._element=t},properties:{connected:{check:"Boolean",init:!1,apply:"_applyConnected",event:"changeConnected"}},members:{_element:null,_initialized:!1,_applyConnected:function(t){if(t&&!this._initialized){this._init();this._initialized=!0}else{this._disconnected();this._initialized=!1}},_init:function(){},_disconnected:function(){},getElement:function(){return this._element}},destruct:function(){this._element=null}});var e=function(t){"use strict";_inherits(r,t);var e=_createSuper(r);function r(t){var n;_classCallCheck(this,r);n=e.call(this);if(!qx.Class.isSubClassOf(t,cv.ui.structure.tile.elements.AbstractCustomElement))throw Error(t+" must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement");n._instance=new t(_assertThisInitialized(n));n.hasAttribute("colspan")&&n.classList.add("colspan-"+n.getAttribute("colspan"));n.hasAttribute("rowspan")&&n.classList.add("rowspan-"+n.getAttribute("rowspan"));return n}_createClass(r,[{key:"getInstance",value:function(){return this._instance}},{key:"connectedCallback",value:function(){this._instance&&this._instance.setConnected(!0)}},{key:"disconnectedCallback",value:function(){this._instance&&this._instance.setConnected(!1)}},{key:"attributeChangedCallback",value:function(t,e,r){this._instance&&qx.Class.hasProperty(this._instance.constructor,t)&&this._instance.set(t,r)}}]);return r}(_wrapNativeSuper(HTMLElement));window.QxConnector=e;cv.ui.structure.tile.elements.AbstractCustomElement.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.Application":{},"cv.util.String":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.AbstractComponent",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,type:"abstract",properties:{value:{apply:"_applyValue",init:null},styleClass:{check:"String",nullable:!0,apply:"_applyStyleClass"},enabled:{check:"Boolean",init:!0,apply:"_applyEnabled"},visibility:{check:["visible","excluded","hidden"],init:"visible",apply:"_applyVisibility",event:"changeVisibility"},widget:{check:"Boolean",init:"false"},inPopup:{check:"Boolean",init:"false"}},members:{_writeAddresses:null,_headerFooterParent:null,_checkIfWidget:function(){var t=!1,e=!1;if("cv-popup"===this._element.parentElement.localName){this._headerFooterParent=this._element.parentElement;e=!0}else{for(var r=this._element,n=0;"cv-tile"!==r.localName;){r=r.parentElement;if(++n>2){r=null;break}}if(r){var o=r.parentElement;this._headerFooterParent=o;"cv-popup"===o.localName?e=!0:o.localName.startsWith("cv-")&&(t="cv-widget"===o.localName||!!document.getElementById(o.localName.substring(3)))}}this.setInPopup(e);this.setWidget(t)},_init:function(){var t=this;this._checkIfWidget();var e=this._element,r=!1,n=[];Array.prototype.forEach.call(e.querySelectorAll(":scope > cv-address"),(function(t){switch(t.hasAttribute("mode")?t.getAttribute("mode"):"readwrite"){case"readwrite":r=!0;n.push(t);break;case"read":r=!0;break;case"write":n.push(t)}}));this._writeAddresses=n;r&&e.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}))},appendToHeader:function(t,e){if(this._headerFooterParent){var r=this._headerFooterParent.querySelector(":scope > header");if(!r){r=document.createElement("header");this._headerFooterParent.insertBefore(r,this._headerFooterParent.firstElementChild)}var n=r;if(e){(n=r.querySelector("."+e))||(n=document.createElement("div")).classList.add(e);r.appendChild(n)}n.appendChild(t)}},getHeader:function(t){if(this._headerFooterParent){if(!t)return this._headerFooterParent.querySelector(":scope > header");var e=this._headerFooterParent.querySelector(":scope > header");if(e)return e.querySelector(t)}return null},appendToFooter:function(t){if(this._headerFooterParent){var e=this._headerFooterParent.querySelector(":scope > footer");if(!e){e=document.createElement("footer");this._headerFooterParent.appendChild(e)}e.appendChild(t)}},getFooter:function(t){if(this._headerFooterParent){if(!t)return this._headerFooterParent.querySelector(":scope > footer");var e=this._headerFooterParent.querySelector(":scope > footer");if(e)return e.querySelector(t)}return null},_applyValue:function(t){if(this.isConnected()){this._element.setAttribute("value",t||"");var e=t;this._element.hasAttribute("mapping")&&this._element.getAttribute("mapping")&&(e=cv.Application.structureController.mapValue(this._element.getAttribute("mapping"),t));this._element.hasAttribute("format")&&this._element.getAttribute("format")&&(e=cv.util.String.sprintf(this._element.getAttribute("format"),e instanceof Date?e.toLocaleString():e));this._updateValue(e,t);if(this._element.hasAttribute("styling")&&this._element.getAttribute("styling")){var r=cv.Application.structureController.styleValue(this._element.getAttribute("styling"),t);this.setStyleClass(r)}}},_updateValue:function(t,e){},_applyStyleClass:function(t,e){var r=this._element.classList;if(e)if(r.contains(e))r.replace(e,t);else{r.add(t);r.remove(e)}else t&&r.add(t)},_applyEnabled:function(t){var e=this._element.querySelector(":scope > .blocker");if(!e){(e=document.createElement("div")).classList.add("blocker");this._element.appendChild(e);e.addEventListener("click",(function(t){t.preventDefault();t.stopPropagation()}));e.addEventListener("pointerdown",(function(t){t.preventDefault();t.stopPropagation()}));e.addEventListener("pointerup",(function(t){t.preventDefault();t.stopPropagation()}))}this._element.setAttribute("disabled",!1===t?"true":"false");e.style.display=!0===t?"none":"block"},_applyVisibility:function(t,e){var r=this.isWidget()?this._element.parentElement:this._element;"hidden"===e&&(r.style.opacity="1.0");switch(t){case"visible":r.style.display=null;break;case"hidden":r.style.opacity="0";break;case"excluded":r.style.display="none"}},onStateUpdate:function(t){switch(t.detail.target){case"enabled":this.setEnabled(1===t.detail.state);t.stopPropagation();return!0;case"show-exclude":this.setVisibility(t.detail.state?"visible":"excluded");t.stopPropagation();return!0;case"show-hide":this.setVisibility(t.detail.state?"visible":"hidden");t.stopPropagation();return!0;case"":this.setValue(t.detail.state);t.stopPropagation();return!0}return!1}},destruct:function(){this._writeAddresses=null;this._headerFooterParent=null}});cv.ui.structure.tile.components.AbstractComponent.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"qx.event.message.Bus":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Breadcrumbs",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{},members:{_init:function(){qx.event.message.Bus.subscribe("cv.ui.structure.tile.currentPage",this._update,this)},_update:function(){var t,e=this._element.querySelector(":scope > ul");if(!e){e=document.createElement("ul");this._element.appendChild(e)}var r=[],n=document.body.querySelector("cv-page.active"),o=document.body.querySelector("main > cv-page:first-of-type");if(n&&n!==o)for(var i=n;i;){var a=this._createListItem(i.getAttribute("id"),i.getAttribute("name"));r.unshift(a);for(var s=i.parentElement;s;){if("cv-page"===s.localName){i=s;break}s=s.parentElement}if(!s||i===o)break}var c=e.querySelector(":scope > li.start");c||(c=this._createListItem(o.getAttribute("id"),o.getAttribute("name"))).classList.add("start");r.unshift(c);(t=e).replaceChildren.apply(t,r)},_createListItem:function(t,e){var r=document.createElement("li"),n=document.createElement("a");n.setAttribute("href","#"+t);n.textContent=e;r.appendChild(n);return r}},destruct:function(){qx.event.message.Bus.unsubscribe("cv.ui.structure.tile.currentPage",this._update,this)},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"breadcrumbs",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Breadcrumbs.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{construct:!0,require:!0},"qx.event.Timer":{},"cv.Application":{},"cv.ui.structure.tile.elements.Address":{},"cv.Version":{},"qx.locale.Manager":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Button",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,construct:function(t){cv.ui.structure.tile.elements.AbstractCustomElement.constructor.call(this,t);this.__P_74_0=new Map},properties:{type:{check:["button","trigger","push"],init:"button"},on:{check:"Boolean",init:!1,apply:"_applyOn"},onClass:{check:"String",init:"active"},offClass:{check:"String",init:"inactive"},onValue:{check:"String",init:"1"},offValue:{check:"String",init:"0"},styleClass:{check:"String",nullable:!0,apply:"_applyStyleClass"},name:{check:"String",init:"",apply:"_applyName"},progress:{check:"Number",init:-1,apply:"_applyProgress",transform:"_parseInt"}},members:{_writeAddresses:null,__P_74_1:null,__P_74_2:null,__P_74_0:null,_parseInt:function(t){var e=parseInt(t);return Number.isNaN(e)?0:e},_init:function(){var t=this,e=this._element;e.hasAttribute("type")&&this.setType(e.getAttribute("type"));e.hasAttribute("name")&&this.setName(e.getAttribute("name"));e.hasAttribute("progress")&&this.setProgress(e.getAttribute("progress"));e.hasAttribute("on-value")&&this.setOnValue(e.getAttribute("on-value"));e.hasAttribute("off-value")&&this.setOffValue(e.getAttribute("off-value"));var r=!1,n=[];Array.prototype.forEach.call(e.querySelectorAll(":scope > cv-address"),(function(t){switch(t.hasAttribute("mode")?t.getAttribute("mode"):"readwrite"){case"readwrite":r=!0;n.push(t);break;case"read":r=!0;break;case"write":n.push(t)}}));this._writeAddresses=n;var o={};if(n.length>0){var i=e;if("true"===e.getAttribute("whole-tile"))for(var a=e.parentElement,s=0;s<=2;){s++;"cv-tile"===(a=a.parentElement).tagName.toLowerCase()&&(i=a).classList.add("clickable")}n.forEach((function(e){switch(e.hasAttribute("on")?e.getAttribute("on"):"click"){case"click":o.click=t.onClicked.bind(t);break;case"up":o.pointerup=t.onPointerUp.bind(t);break;case"down":o.pointerdown=t.onPointerDown.bind(t)}}));Object.getOwnPropertyNames(o).forEach((function(t){return i.addEventListener(t,(function(e){o[t](e)}))}))}e.hasAttribute("doc-link")&&!Object.prototype.hasOwnProperty.call(o,"click")&&e.addEventListener("click",(function(e){t.onClicked(e)}));if(r)e.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}));else if(e.hasAttribute("mapping")||e.hasAttribute("styling")){var c=n.filter((function(t){return t.hasAttribute("value")&&!t.hasAttribute("on")}));if(1===c.length){var u=c[0].getAttribute("value");qx.event.Timer.once((function(){t.setOn(u==t.getOnValue())}),this,1e3)}}if(r||1!==n.filter((function(t){return t.hasAttribute("value")&&!t.hasAttribute("on")})).length){var l=!1,f=!1;n.some((function(t){if(t.hasAttribute("value")&&t.hasAttribute("on")){l||(l="down"===t.getAttribute("on"));f||(f="up"===t.getAttribute("on"))}return f&&l}));f&&l&&this.setType("push")}else this.setType("trigger")},_initProgress:function(){var t=this._element;this.__P_74_2=100*Math.PI;var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100");e.setAttribute("type","circle");var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("bar");r.setAttribute("r","49");r.setAttribute("cx","50");r.setAttribute("cy","50");r.setAttribute("stroke-width","2");r.setAttribute("stroke-dasharray",this.__P_74_2+" "+this.__P_74_2);r.setAttribute("stroke-dashoffset",""+this.__P_74_2);e.appendChild(r);t.appendChild(e);t.classList.add("progress")},_applyConnected:function(t){cv.ui.structure.tile.components.Button.superclass.prototype._applyConnected.call(this,t);t&&"trigger"!==this.getType()&&qx.event.Timer.once(this._applyOn,this,1e3)},_applyOn:function(){if(this.isConnected()){var t=this.isOn()?this.getOnValue():this.getOffValue();this._element.setAttribute("value",t||"");var e=t;this._element.hasAttribute("mapping")&&(e=cv.Application.structureController.mapValue(this._element.getAttribute("mapping"),t,this.__P_74_0));var r=this._element.querySelector(".value");r&&"cv-icon"===r.tagName.toLowerCase()?r._instance?r._instance.setId(e):r.textContent=e:this.updateValue(e);var n=this.isOn()?this.getOnClass():this.getOffClass();this._element.hasAttribute("styling")&&(n=cv.Application.structureController.styleValue(this._element.getAttribute("styling"),t,this.__P_74_0));this.setStyleClass(n)}},_applyProgress:function(t){var e=this._element.querySelector(":scope > svg > circle.bar");if(!e){this._initProgress();e=this._element.querySelector(":scope > svg > circle.bar")}if(e){this._element.hasAttribute("progress-mapping")&&(t=cv.Application.structureController.mapValue(this._element.getAttribute("progress-mapping"),t,this.__P_74_0));e.setAttribute("stroke-dashoffset",""+(this.__P_74_2-t/100*this.__P_74_2))}},_applyStyleClass:function(t,e){var r=this._element.classList;if(e)if(r.contains(e))r.replace(e,t);else{r.add(t);r.remove(e)}else t&&r.add(t)},_applyName:function(t){if(!this.__P_74_1){this.__P_74_1=document.createElement("label");this.__P_74_1.classList.add("button-label");this._element.appendChild(this.__P_74_1)}this.__P_74_1.textContent=t},updateValue:function(t){var e=this._element.querySelector("span.value");e&&(e.innerHTML=t)},onStateUpdate:function(t){var e=t.detail.state==this.getOnValue(),r=t.detail.target||"default";if(t.detail.source instanceof cv.ui.structure.tile.elements.Address){var n=t.detail.source.getElement();n.hasAttribute("value")&&(e=t.detail.state==n.getAttribute("value"))}"default"===r?this.setOn(e):"progress"===r?this.setProgress(t.detail.state):r.startsWith("store:")?this.__P_74_0.set(r.substring(6),t.detail.state):"store"===r&&this.__P_74_0.set(t.detail.address,t.detail.state)},onClicked:function(t){var e=this;this.createRipple(t);if(this._element.hasAttribute("doc-link")){var r=this._element.getAttribute("doc-link"),n=cv.Version.VERSION.split(".").slice(0,2).join("."),o=qx.locale.Manager.getInstance().getLanguage();"de"!==o&&(o="en");window.open("https://www.cometvisu.org/CometVisu/".concat(o,"/").concat(n,"/manual/").concat(r));t.stopPropagation()}else{this._writeAddresses||(this._writeAddresses=Array.prototype.filter.call(this._element.querySelectorAll("addresses > cv-address"),(function(t){return!t.hasAttribute("mode")||"read"!==t.getAttribute("mode")})));var i=new CustomEvent("sendState",{detail:{value:this.isOn()?this.getOffValue():this.getOnValue(),source:this}});if("trigger"===this.getType()){this.setOn(!0);qx.event.Timer.once((function(){e.setOn(!1)}),null,250)}this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||"click"===t.getAttribute("on")})).forEach((function(t){return t.dispatchEvent(i)}));t.stopPropagation()}},onPointerDown:function(){var t=this;this._writeAddresses.filter((function(t){return"down"===t.getAttribute("on")&&t.hasAttribute("value")})).forEach((function(e){e.dispatchEvent(new CustomEvent("sendState",{detail:{value:e.getAttribute("value"),source:t}}))}))},onPointerUp:function(){var t=this;this._writeAddresses.filter((function(t){return"up"===t.getAttribute("on")&&t.hasAttribute("value")})).forEach((function(e){e.dispatchEvent(new CustomEvent("sendState",{detail:{value:e.getAttribute("value"),source:t}}))}))},createRipple:function(t){var e=t.currentTarget,r=e.querySelector(":scope .ripple-container");if(!r){(r=document.createElement("div")).classList.add("ripple-container");e.appendChild(r)}var n=document.createElement("span"),o=Math.max(e.clientWidth,e.clientHeight),i=o/2;n.style.width=n.style.height="".concat(o,"px");var a=t.clientX-(e.offsetLeft+i),s=t.clientY-(e.offsetTop+i);if(e===this._element){a-=e.offsetParent.offsetLeft;s-=e.offsetParent.offsetTop}n.style.left="".concat(a,"px");n.style.top="".concat(s,"px");n.classList.add("ripple");r.querySelectorAll(".ripple").forEach((function(t){return t.remove()}));r.appendChild(n)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"button",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Button.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.data.Model":{},"cv.ui.structure.tile.components.Button":{},"cv.Transform":{},"qx.event.Timer":{},"cv.io.BackendConnections":{},"cv.Application":{},"cv.util.String":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Address",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{__P_85_0:null,__P_85_1:null,_init:function(){var t=this,e=this._element,r=e.textContent.trim();if(r){var n=cv.data.Model.getInstance(),o=e.getAttribute("backend");n.addAddress(r,e.getAttribute("id"),o);var i=e.hasAttribute("mode")?e.getAttribute("mode"):"readwrite";if("write"!==i){var a=n.getState(r,o);void 0!==a&&this.fireStateUpdate(r,a);n.addUpdateListener(r,this.fireStateUpdate,this,o);e.hasAttribute("target")&&e.getAttribute("target").startsWith("last-update")&&void 0===a&&this.fireStateUpdate(r,"-")}"read"!==i&&e.addEventListener("sendState",(function(n){var i=null;Object.prototype.hasOwnProperty.call(n.detail,"value")&&(i=n.detail.value);e.hasAttribute("value")&&(i=e.getAttribute("value"));var a=n.detail.source&&n.detail.source instanceof cv.ui.structure.tile.components.Button&&("trigger"===n.detail.source.getType()||"push"===n.detail.source.getType());if(null!==i){var s=e.getAttribute("transform")||"raw",c=cv.Transform.encodeBusAndRaw({transform:s,selector:t._element.getAttribute("selector"),ignoreError:"true"===t._element.getAttribute("ignore-error"),variantInfo:t._element.getAttribute("variant"),qos:0|(t._element.getAttribute("qos")||0)},i);if(a||!Object.prototype.hasOwnProperty.call(e,"lastSentValue")||c.raw!==e.lastSentValue)if(e.hasAttribute("delay")){var u=parseInt(e.getAttribute("delay"));t.debug("send with delay of ".concat(u,"ms"));qx.event.Timer.once((function(){cv.io.BackendConnections.getClient(o).write(r,c.bus,e);a||(e.lastSentValue=c.raw)}),t,u)}else{cv.io.BackendConnections.getClient(o).write(r,c.bus,e);a||(e.lastSentValue=c.raw)}}}))}},fireStateUpdate:function(t,e){if(this.__P_85_0!==e||"always"===this._element.getAttribute("send-mode")){var r=this._element.getAttribute("transform")||"raw",n=cv.Transform.decode({transform:r,selector:this._element.getAttribute("selector"),ignoreError:"true"===this._element.getAttribute("ignore-error"),variantInfo:this._element.getAttribute("variant"),qos:0|(this._element.getAttribute("qos")||0)},e),o="";if(this._element.hasAttribute("mapping")){o=this._element.getAttribute("mapping");n=cv.Application.structureController.mapValue(o,n)}this._element.hasAttribute("format")&&(n=cv.util.String.sprintf(this._element.getAttribute("format"),n instanceof Date?n.toLocaleString():n));var i=this._element.hasAttribute("target")?this._element.getAttribute("target").split(":"):[],a=i.length>0?i.shift():"",s=new CustomEvent("stateUpdate",{bubbles:!0,cancelable:!0,detail:{address:this._element.textContent.trim(),state:n,target:a,targetConfig:i,raw:e,mapping:o,addressValue:this._element.hasAttribute("value")?this._element.getAttribute("value"):null,source:this,variant:this._element.hasAttribute("variant")?this._element.getAttribute("variant"):null}});this.__P_85_1=n;this._element.dispatchEvent(s);this.__P_85_0=e;e!==this._element.lastSentValue&&(this._element.lastSentValue=null)}},isRead:function(){return"write"!==this._element.getAttribute("mode")},isWrite:function(){return"read"!==this._element.getAttribute("mode")},getValue:function(){return this.__P_85_1}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"address",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Address.$$dbClassInfo=t}();function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new S(o||[]);return n(a,"_invoke",{value:P(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function h(){}var _={};c(_,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(A([])));m&&m!==e&&r.call(m,i)&&(_=m);var v=h.prototype=p.prototype=Object.create(_);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){r(t);return}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,s,"next",t)}function s(t){asyncGeneratorStep(i,n,o,a,s,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MRefresh":{require:!0},"cv.ui.structure.tile.MResize":{require:!0},"cv.util.ScriptLoader":{},"qx.util.ResourceManager":{},"qx.event.Timer":{},"qx.locale.Manager":{},"qx.locale.Number":{},"qx.locale.Date":{},"cv.data.Model":{},"cv.util.String":{},"cv.io.BackendConnections":{},"cv.io.timeseries.FluxSource":{},"cv.io.timeseries.OpenhabPersistenceSource":{},"cv.io.timeseries.RRDSource":{},"cv.io.timeseries.DemoSource":{},"cv.io.Fetch":{},"cv.core.notifications.Router":{},"qx.util.format.DateFormat":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Chart",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MRefresh,cv.ui.structure.tile.MResize],statics:{ChartCounter:0,DEFAULT_ASPECT_RATIO:2.0416666666666665,JS_LOADED:new Promise(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e,r){var n,o,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){return"object"===_typeof(window.d3)};t.next=3;return cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri("libs/d3.min.js"));case 3:if(n())e(!0);else{o=new qx.event.Timer(50);i=0;o.addListener("interval",(function(){i++;n()?e(!0):i>5&&r(new Error("Error loaded d3 library"))}))}case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()).then((function(){if("de"===qx.locale.Manager.getInstance().getLanguage()){d3.formatDefaultLocale({decimal:qx.locale.Number.getDecimalSeparator().translate().toString(),thousands:qx.locale.Number.getGroupSeparator().translate().toString(),grouping:[3],currency:["",""]});d3.timeFormatDefaultLocale({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[qx.locale.Date.getAmMarker().translate().toString(),qx.locale.Date.getPmMarker().translate().toString()],days:qx.locale.Date.getDayNames("wide",null,"format").map((function(t){return t.translate().toString()})),shortDays:qx.locale.Date.getDayNames("narrow",null,"stand-alone").map((function(t){return t.translate().toString()})),months:qx.locale.Date.getMonthNames("wide").map((function(t){return t.translate().toString()})),shortMonths:qx.locale.Date.getMonthNames("narrow",null,"stand-alone").map((function(t){return t.translate().toString()}))})}})),CONFIG:null},properties:{currentSeries:{check:["hour","day","week","month","year"],init:"day",apply:"__P_75_0"},currentPeriod:{check:"Number",init:0,apply:"__P_75_0"},startTime:{check:"Number",init:0},endTime:{check:"Number",init:0}},members:{_id:null,_downloadedImage:null,_url:null,_headers:null,_request:null,_width:null,_height:null,_loaded:null,_dataSetConfigs:null,_initializing:null,_navigationEnabled:null,__P_75_1:null,__P_75_2:!1,__P_75_3:null,__P_75_4:null,__P_75_5:null,__P_75_6:null,_dot:null,_svg:null,_tooltip:null,_titleString:null,__P_75_7:null,__P_75_8:null,_chartConf:null,_init:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,s,c,u,l,f,p,d,h,_,y,m,v,b,g,P,w,C,O,S,A,x,E;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._checkIfWidget();t._initializing=!0;r=t._element;e.next=5;return cv.ui.structure.tile.components.Chart.JS_LOADED;case 5:t._id=cv.ui.structure.tile.components.Chart.ChartCounter++;n="chart-"+t._id;r.setAttribute("data-chart-id",t._id.toString());o=t._element.hasAttribute("background")&&"true"===t._element.getAttribute("background");i=t.getHeader("label.title");if(!o&&r.hasAttribute("title")&&!i){(i=document.createElement("label")).classList.add("title");a=document.createElement("span");i.appendChild(a);a.textContent=r.getAttribute("title");t.appendToHeader(i)}i&&(t._titleString=i.textContent.trim());s=[];if(!o&&r.hasAttribute("selection")){c=r.getAttribute("selection");s="none"===c?[]:"all"===c?["hour","day","week","month","year"]:c.split(",").map((function(t){return t.trim().toLowerCase()}))}r.hasAttribute("series")&&t.setCurrentSeries(r.getAttribute("series"));u=t.getCurrentSeries();s.length>0&&!s.includes(u)&&s.push(u);t._navigationEnabled=s.length>0;if(s.length>0){(l=t._buttonFactory("ri-arrow-left-s-line",["prev"])).setAttribute("title",qx.locale.Manager.tr("previous"));l.addEventListener("click",(function(){return t._onSeriesPrev()}));if(!i){(i=document.createElement("label")).classList.add("title");f=document.createElement("span");i.appendChild(f);t.appendToHeader(i)}i.parentElement.insertBefore(l,i);(p=document.createElement("i")).classList.add("ri-arrow-down-s-fill");i.appendChild(p);(d=document.createElement("div")).classList.add("popup","series");_=_createForOfIteratorHelper(s);try{for(_.s();!(y=_.n()).done;){m=y.value;(h=document.createElement("cv-option")).setAttribute("key",m);m===u&&h.setAttribute("selected","selected");h.textContent=t._seriesToShort(m);h.addEventListener("click",(function(e){d.style.display="none";t._onSeriesChange(e.target.getAttribute("key"));e.stopPropagation();e.preventDefault()}));d.appendChild(h)}}catch(t){_.e(t)}finally{_.f()}i.appendChild(d);i.classList.add("clickable");i.addEventListener("click",(function(t){"none"===getComputedStyle(d).getPropertyValue("display")?d.style.display="flex":d.style.display="none";t.stopPropagation();t.preventDefault()}));(l=t._buttonFactory("ri-arrow-right-s-line",["next"])).setAttribute("title",qx.locale.Manager.tr("next"));l.disabled=!0;l.addEventListener("click",(function(){return t._onSeriesNext()}));t.appendToHeader(l)}if(!o&&r.hasAttribute("allow-fullscreen")&&"true"===r.getAttribute("allow-fullscreen")){(v=t._buttonFactory("ri-fullscreen-line",["fullscreen"])).setAttribute("data-value","0");b="state:".concat(n,"-popup");v.addEventListener("click",(function(){cv.data.Model.getInstance().onUpdate(b,"0"===v.getAttribute("data-value")?"1":"0","system")}));t.appendToHeader(v,"right");(g=document.createElement("cv-address")).setAttribute("mode","read");g.setAttribute("target","fullscreen-popup");g.setAttribute("backend","system");g.setAttribute("send-mode","always");g.textContent=b;r.parentElement.appendChild(g);P=r;for(;P&&"cv-tile"!==P.nodeName.toLowerCase();)P=P.parentElement;if(P){(w=P.getInstance()).addListener("closed",(function(){return cv.data.Model.getInstance().onUpdate(b,"0","system")}));P.addEventListener("stateUpdate",(function(t){w.onStateUpdate(t);t.stopPropagation()}));document.body.classList.contains("mobile")&&w.addListener("fullscreenChanged",(function(){t._onRendered()}))}}r.hasAttribute("refresh")&&t.setRefresh(parseInt(r.getAttribute("refresh")));C=d3.select(t._element).append("svg");O=!1;if(o){O=!0;C.style("opacity",.4)}if(!O){t._tooltip=document.createElement("div");t._tooltip.classList.add("tooltip");t._tooltip.style.display="none";t._element.appendChild(t._tooltip);C.on("pointerenter",t._onPointerEntered.bind(t));C.on("pointermove",t._onPointerMoved.bind(t));C.on("pointerleave",t._onPointerLeft.bind(t))}C.on("touchmove",(function(e){if(t._loaded){var r=e.targetTouches[0].clientY,n=t._element.querySelector(":scope > svg").getBoundingClientRect();r>n.y&&r<n.y+n.height&&e.preventDefault()}}),{passive:!1});S=t._element.hasAttribute("y-format")?t._element.getAttribute("y-format"):"%s";A=null;if(t._element.hasAttribute("x-format")){x=t._element.getAttribute("x-format");A=function(t){return d3.timeFormat(x)(t)}}else A=t.multiTimeFormat([["%H:%M:%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]]);t.__P_75_8={x:function(t){return t.time},y:function(t){return+t.value},z:function(t){return t.src},color:function(e){return e&&t._dataSetConfigs[e].color},title:function(t){return cv.util.String.sprintf(S,t.value)},curve:d3.curveLinear,marginTop:12,marginRight:24,marginBottom:20,marginLeft:24,width:392,height:192,aspectRatio:2.0416666666666665,xType:d3.scaleTime,xFormat:A,yType:d3.scaleLinear,yFormat:void 0,yLabel:void 0,strokeLinecap:void 0,strokeLinejoin:void 0,strokeWidth:1.5,strokeOpacity:void 0,mixBlendMode:"normal",showArea:function(e){return t._dataSetConfigs[e].showArea},showXAxis:!t._element.hasAttribute("show-x-axis")||"true"===t._element.getAttribute("show-x-axis"),showYAxis:!t._element.hasAttribute("show-y-axis")||"true"===t._element.getAttribute("show-y-axis"),xPadding:.1};t._initializing=!1;t.__P_75_9();E=Array.from(t._element.querySelectorAll(":scope > dataset")).map((function(t){return t.getAttribute("src")}));Array.from(r.querySelectorAll(':scope > cv-address:not([mode="write"])')).filter((function(t){return E.includes(t.getAttribute("target"))})).length>0&&r.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}));case 35:case"end":return e.stop()}}),e)})))()},onStateUpdate:function(t){var e=this._element.querySelector(':scope > dataset[src="'+t.detail.target+'"]'),r=this._dataSetConfigs?this._dataSetConfigs[t.detail.target]:null;if(e&&r){var n=Date.now();if(r.aggregationInterval){var o=60*r.aggregationInterval*1e3;n=Math.round(n/o)*o}this._renderChart({src:t.detail.target,time:n,value:t.detail.state},!0)}},_onSeriesPrev:function(){this.setCurrentPeriod(this.getCurrentPeriod()+1)},_onSeriesChange:function(t){this._initializing=!0;this.resetCurrentPeriod();this._initializing=!1;this._chartConf=null;this.setCurrentSeries(t)},_onSeriesNext:function(){var t=this.getCurrentPeriod();t>0&&this.setCurrentPeriod(t-1)},refresh:function(){this._loaded=!1;this._loadData()},_refreshData:function(){var t=this.getHeader(".next");t&&(0===this.getCurrentPeriod()?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"));if(!this._initializing&&this.getStartTime()>0&&this.getEndTime()>0){this._loaded=!1;this._loadData()}this.__P_75_9()},__P_75_0:function(){var t=this.getCurrentSeries(),e=this.getCurrentPeriod(),r=new Date,n=new Date,o=0;switch(t){case"hour":o=3600;n.setHours(n.getHours()-e,0,0,0);e>0&&r.setHours(n.getHours()+1,0,0,0);break;case"day":o=86400;n.setDate(n.getDate()-e);n.setHours(0,0,0,0);if(e>0){r.setDate(n.getDate()+1);r.setHours(0,0,0,0)}break;case"week":o=604800;n.setDate(-n.getDay()-7*e);n.setHours(0,0,0,0);if(e>0){r.setDate(n.getDate()+7);r.setHours(0,0,0,0)}break;case"month":o=2592e3;n.setMonth(n.getMonth()-e);n.setDate(1);n.setHours(0,0,0,0);if(e>0){r.setMonth(n.getMonth()+1,1);r.setHours(0,0,0,0)}break;case"year":o=31536e3;n.setFullYear(n.getFullYear()-e);n.setMonth(0,1);n.setHours(0,0,0,0);if(e>0){r.setFullYear(n.getFullYear()+1);r.setMonth(n.getMonth()+1,1);r.setHours(0,0,0,0)}}var i=Math.round(n.getTime()/1e3),a=Math.round(r.getTime()/1e3);"true"!==this._element.getAttribute("background")&&this._element.hasAttribute("selection")||(i=a-o);this.setStartTime(i);this.setEndTime(a);this._refreshData()},_loadData:function(){var t=this;if(!(this._loaded&&Date.now()-this._loaded<3e5)){var e=cv.io.BackendConnections.getClient();if(e)if(e.isConnected()){var r,n=this._element.querySelectorAll(":scope > dataset"),o=[];if(!this._dataSetConfigs){this._dataSetConfigs={};var i,a=_createForOfIteratorHelper(n);try{for(a.s();!(i=a.n()).done;){for(var s=i.value,c={showArea:!0,color:"#FF9900",chartType:"line",title:"",curve:"linear",aggregationInterval:0},u=void 0,l=void 0,f=void 0,p=0;p<s.attributes.length;p++){l=(u=s.attributes.item(p)).name.split("-").map((function(t,e){return e>0?"".concat(t.substring(0,1).toUpperCase()).concat(t.substring(1)):t})).join("");"true"===(f=u.value)||"false"===f?f="true"===f:/^\d+$/.test(f)?f=parseInt(f):/^[\d.]+$/.test(f)&&(f=parseFloat(f));c[l]=f}var d=c.src.split("://")[0].toLowerCase();c.type=d;switch(d){case"flux":c.source=new cv.io.timeseries.FluxSource(c.src);c.source.isInline()&&c.source.setQueryTemplate(s.textContent.trim());break;case"openhab":c.source=new cv.io.timeseries.OpenhabPersistenceSource(c.src);break;case"rrd":c.source=new cv.io.timeseries.RRDSource(c.src);break;case"demo":c.source=new cv.io.timeseries.DemoSource(c.src);break;default:this.error("unknown chart data source type "+d)}this._dataSetConfigs[c.src]=c}}catch(t){a.e(t)}finally{a.f()}}var h=function(){var n=t._dataSetConfigs[_],i=!1,a={ttl:t.getRefresh()};if(n.source){var s=n.source.getRequestConfig(t.getStartTime(),t.getEndTime(),t.getCurrentSeries(),t.getCurrentPeriod());r=s.url;i=s.proxy;a=Object.assign(a,s.options)}if(!r)return 1;t.debug("loading",r);o.push(cv.io.Fetch.cachedFetch(r,a,i,e).then((function(e){t.debug("successfully loaded",r);n.source&&(e=n.source.processResponse(e));t._lastRefresh||(t._lastRefresh=Date.now());return{data:e||[],ts:n}})).catch((function(e){t._onStatusError(n,r,e);return{data:[],ts:n}})))};for(var _ in this._dataSetConfigs)h();Promise.all(o).then((function(e){t._onSuccess(e)}))}else e.addListenerOnce("changeConnected",(function(){t._loadData()}))}},_onSuccess:function(t){var e,r=this,n=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=i.data;if(null!==a){var s,c=i.ts.aggregationInterval>0?60*i.ts.aggregationInterval*1e3:0,u=_createForOfIteratorHelper(a);try{for(u.s();!(s=u.n()).done;){var l=_slicedToArray(s.value,2),f=l[0],p=l[1];n.push({src:i.ts.src,time:c>0?Math.round(f/c)*c:f,value:p})}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){o.e(t)}finally{o.f()}if(this._element.hasAttribute("background")&&"true"===this._element.getAttribute("background")){this.__P_75_8=Object.assign(this.__P_75_8,{marginRight:0,marginBottom:0,marginLeft:0});for(var d=this._element.parentElement;d&&"cv-tile"!==d.localName;)d=d.parentElement;d&&"cv-tile"===d.localName&&(d.style.overflow="hidden")}window.requestAnimationFrame((function(){setTimeout((function(){r._onRendered(n)}),100)}))},_onRendered:function(t,e){var r=this;if(this.__P_75_4){clearTimeout(this.__P_75_4);this.__P_75_4=null}if(this.isVisible()){var n=this._getSize(),o=_slicedToArray(n,2),i=o[0],a=o[1];(i<20||a<10)&&(!e||e<=5)&&(this.__P_75_4=setTimeout((function(){r._onRendered(t,e>0?e+1:1)}),150));if(i<20||a<10)return;this.__P_75_8.width=i;this.__P_75_8.height=a;d3.select(this._element).select("svg").attr("viewBox","0, 0, ".concat(i,", ").concat(a));if(t){this._renderChart(t);this._loaded=Date.now()}}},_getSize:function(){var t=this._element.parentElement,e="true"===this._element.getAttribute("background")?0:8,r=this._element.offsetWidth-e,n=this._element.offsetHeight-e,o=0,i=0;if(r>n&&n>0){o=Math.round(r/1);i=Math.round(n/1)}else i=(o=Math.round(r/1))/cv.ui.structure.tile.components.Chart.DEFAULT_ASPECT_RATIO;!this._element.style.height&&("cv-popup"===t.localName&&"true"===t.getAttribute("fullscreen")||"true"===this._element.getAttribute("allow-fullscreen")&&t.parentElement.classList.contains("fullscreen"))&&(this._element.style.height=i+this.__P_75_8.marginTop+this.__P_75_8.marginBottom+"px");return[o,i]},multiTimeFormat:function(t){return function(e){return d3.timeFormat(function(e){for(var r=0,n=!1,o="%c";!n&&r<t.length;){(n=t[r][1](e))&&(o=t[r][0]);r++}return o}(e))(e)}},_onStatusError:function(t,e,r){cv.core.notifications.Router.dispatchMessage("cv.charts.error",{title:qx.locale.Manager.tr("Communication error"),severity:"urgent",message:qx.locale.Manager.tr("URL: %1<br/><br/>Response:</br>%2",JSON.stringify(e),JSON.stringify(r))});this.error("Chart _onStatusError",t,e,r)},_getSvgElement:function(t,e,r,n){var o=t.select(e+"."+r.join("."));if(o.empty()){o=t.append(e).attr("class",r.join(" "));if(n)for(var i in n)o.attr(i,n[i])}return o},_renderChart:function(t,e){var r,n,o,i,a,s=this,c=this.__P_75_8,u=d3.select(this._element).select("svg");if(e){if(!this._helpers)return;r=this._helpers.X;n=this._helpers.Y;o=this._helpers.Z;i=this._helpers.O;a=this._helpers.T;if(r[r.length-1]===t.time)n[n.length-1]=t.value;else{r.push(t.time);n.push(t.value);o.push(t.src);i.push(t);a.push(void 0===c.title?t.src:null===c.title?null:c.title(t));r.shift();n.shift();o.shift();i.shift();a.shift()}}else{r=d3.map(t,c.x);n=d3.map(t,c.y);o=d3.map(t,c.z);i=d3.map(t,(function(t){return t}));a=void 0===c.title?o:null===c.title?null:d3.map(t,c.title)}var l=d3.extent(r),f=0,p=!this._element.hasAttribute("zero-based")||"true"===this._element.getAttribute("zero-based");p||(f=d3.min(n))>1&&(f-=1);var d=d3.max(n),h=[f,d+=d>1?1:.1],_=new d3.InternSet(o),y=d3.range(r.length).filter((function(t){return _.has(o[t])}));if(c.showYAxis){var m=c.yFormat?c.yFormat(h[1]):h[1].toFixed(d<1?2:1);m.length>=2&&(c.marginLeft=8*m.length)}var v=c.width/80,b=c.height/60,g="true"===this._element.getAttribute("background")?0:2,P=[c.marginLeft+g,c.width-c.marginRight-g];if(!this._chartConf){var w=[c.height-c.marginBottom,c.marginTop];this._chartConf={x:c.xType().range(P),y:c.yType().range(w)};this._chartConf.xAxis=c.showXAxis?d3.axisBottom(this._chartConf.x).ticks(v).tickSizeOuter(0).tickFormat(c.xFormat):void 0;this._chartConf.yAxis=c.showYAxis?d3.axisLeft(this._chartConf.y).ticks(b,c.yFormat):void 0;var C=this._element.hasAttribute("show-grid")?this._element.getAttribute("show-grid"):"xy";if(C.includes("x")){this._chartConf.xGrid=d3.axisBottom(this._chartConf.x).ticks(v).tickSize(-c.height+c.marginBottom+c.marginTop).tickFormat("");this._getSvgElement(u,"g",["grid","x"],{transform:"translate(0,".concat(c.height-c.marginBottom,")")}).call(this._chartConf.xGrid)}if(C.includes("y")){this._chartConf.yGrid=d3.axisLeft(this._chartConf.y).ticks(b).tickSize(-c.width+c.marginRight+c.marginLeft).tickFormat("");this._getSvgElement(u,"g",["grid","y"],{transform:"translate(".concat(c.marginLeft,",0)")}).call(this._chartConf.yGrid)}c.showXAxis&&this._getSvgElement(u,"g",["axis","x"]).attr("transform","translate(0,".concat(c.height-c.marginBottom,")")).call(this._chartConf.xAxis);if(c.showYAxis){var O=this._getSvgElement(u,"g",["axis","y"]).attr("transform","translate(".concat(c.marginLeft,",0)"));c.label&&O.select("text").empty()&&O.append("text").attr("x",-c.marginLeft).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(c.yLabel);O.call(this._chartConf.yAxis).call((function(t){return t.select(".domain").remove()}))}var S,A,x=new Map,E=new Map,T=new Map,k=new Map,j={},q={},R=function(t){switch(s._dataSetConfigs[t].chartType){case"line":var e=y.filter((function(e){return o[e]===t}));x.set(t,e);var r=s._dataSetConfigs[t].curve||"linear";if(!Object.prototype.hasOwnProperty.call(j,r)){var n;switch(r){case"linear":n=d3.curveLinear;break;case"step":n=d3.curveStep;break;case"natural":n=d3.curveNatural}n&&(j[r]=d3.line().curve(n).x((function(t){return s._chartConf.x(s._helpers.X[t])})).y((function(t){return s._chartConf.y(s._helpers.Y[t])})));if("line"===s._dataSetConfigs[t].chartType&&"function"==typeof c.showArea&&c.showArea(t)){E.set(t,e);if(n){var i=s._chartConf.y.range()[0];q[r]=d3.area().curve(n).x((function(t){return s._chartConf.x(s._helpers.X[t])})).y0((function(){return i})).y1((function(t){return s._chartConf.y(s._helpers.Y[t])}))}}}break;case"bar":T.set(t,y.filter((function(e){return o[e]===t})));S||(S=d3.scaleBand().range(s._chartConf.x.range()).padding(c.xPadding));A||(A=d3.scaleBand().padding(.05));break;case"stacked-bar":k.set(t,y.filter((function(e){return o[e]===t})))}};for(var L in this._dataSetConfigs)R(L);this._chartConf.lineGroups=x;this._chartConf.areaGroups=E;this._chartConf.barGroups=T;this._chartConf.stackedBarGroups=k;this._chartConf.lineFunctions=j;this._chartConf.areaFunctions=q;this._chartConf.xBar=S;A&&(this._chartConf.xz=A);this._chartConf.lineGroups.size>0&&(this._chartConf.lineContainer=this._getSvgElement(u,"g",["line"],{fill:"none",stroke:"string"==typeof c.color?c.color:null,"stroke-linecap":c.strokeLinecap,"stroke-linejoin":c.strokeLinejoin,"stroke-width":c.strokeWidth,"stroke-opacity":c.strokeOpacity}));this._chartConf.areaGroups.size>0&&(this._chartConf.areaContainer=this._getSvgElement(u,"g",["area"],{stroke:"none",fill:"string"==typeof c.color?this.__P_75_10(c.color,"30"):null}));this._chartConf.barGroups.size>0&&(this._chartConf.barContainer=this._getSvgElement(u,"g",["bars"]))}this._chartConf.x.domain(l);this._chartConf.y.domain(h);this._helpers={X:r,Y:n,I:y,T:a,Z:o,O:i};this._chartConf.xAxis&&this._getSvgElement(u,"g",["axis","x"]).call(this._chartConf.xAxis);this._chartConf.yAxis&&this._getSvgElement(u,"g",["axis","y"]).call(this._chartConf.yAxis);this._chartConf.xBar&&this._chartConf.xBar.domain(new d3.InternSet(r));if(this._chartConf.xz){this._chartConf.xz.domain(_);this._chartConf.x.range([P[0],P[1]-this._chartConf.xBar.bandwidth()]);this._chartConf.xz.range([0,this._chartConf.xBar.bandwidth()])}var I,M=_createForOfIteratorHelper(this._chartConf.lineGroups.keys());try{var N=function(){var t=I.value,e=y.filter((function(e){return o[e]===t}));s._chartConf.lineGroups.set(t,e)};for(M.s();!(I=M.n()).done;)N()}catch(t){M.e(t)}finally{M.f()}var F,D=_createForOfIteratorHelper(this._chartConf.areaGroups.keys());try{var B=function(){var t=F.value,e=y.filter((function(e){return o[e]===t&&void 0!==n[e]}));s._chartConf.areaGroups.set(t,e)};for(D.s();!(F=D.n()).done;)B()}catch(t){D.e(t)}finally{D.f()}var H,z=_createForOfIteratorHelper(this._chartConf.barGroups.keys());try{var V=function(){var t=H.value,e=y.filter((function(e){return o[e]===t&&void 0!==n[e]}));s._chartConf.barGroups.set(t,e)};for(z.s();!(H=z.n()).done;)V()}catch(t){z.e(t)}finally{z.f()}var U,G=_createForOfIteratorHelper(this._chartConf.stackedBarGroups.keys());try{var $=function(){var t=U.value,e=y.filter((function(e){return o[e]===t&&void 0!==n[e]}));s._chartConf.stackedBarGroups.set(t,e)};for(G.s();!(U=G.n()).done;)$()}catch(t){G.e(t)}finally{G.f()}this.__P_75_8=c;this._dot=u.select("g.dot");if(!p){var W=this._chartConf.lineContainer||this._chartConf.areaContainer||this._chartConf.barContainer,K=[0,r.length-1],X=W.select(".zero-line");X.empty()&&(X=W.append("line").attr("class","zero-line").attr("stroke","currentColor").attr("stroke-opacity","15%"));if(r.length>0){var Y=this._chartConf.x(r[K[0]]),Q=this._chartConf.x(r[r.length-1]),J=this._chartConf.y(0);X.attr("x1",Y).attr("x2",Q).attr("y1",J).attr("y2",J)}}var Z=d3.transition().duration(e?0:500).ease(d3.easeLinear);this._chartConf.lineContainer&&this._chartConf.lineContainer.selectAll("path").data(this._chartConf.lineGroups).join((function(t){return t.append("path").style("mix-blend-mode",c.mixBlendMode).attr("stroke","function"==typeof c.color?function(t){return c.color(t[0])}:null)})).transition(Z).attr("d",(function(t){var e=s._dataSetConfigs[t[0]].curve||"linear";return(s._chartConf.lineFunctions[e]||s._chartConf.lineFunctions.linear)(t[1])}));this._chartConf.areaContainer&&this._chartConf.areaContainer.selectAll("path").data(this._chartConf.areaGroups).join((function(t){return t.append("path").style("mix-blend-mode",c.mixBlendMode).attr("fill","function"==typeof c.color?function(t){return s.__P_75_10(c.color(t[0]),"30")}:null)})).transition(Z).attr("d",(function(t){var e=s._dataSetConfigs[t[0]].curve||"linear";return(s._chartConf.areaFunctions[e]||s._chartConf.areaFunctions.linear)(t[1])}));if(this._chartConf.barContainer){var tt=this._chartConf.y.range()[0];this._chartConf.barContainer.selectAll("g").data(this._chartConf.barGroups).join("g").attr("fill","function"==typeof c.color?function(t){return c.color(t[0])}:null).selectAll("rect").data((function(t){return t[1].map((function(e){return{key:t[0],value:e}}))})).join("rect").attr("x",(function(t){return s._chartConf.x(r[t.value])+s._chartConf.xz(t.key)})).attr("y",(function(t){return s._chartConf.y(n[t.value])})).attr("width",this._chartConf.xz.bandwidth()).transition(Z).attr("height",(function(t){return tt-s._chartConf.y(n[t.value])}))}var et,rt=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > h-line").entries());try{var nt=function(){var t=_slicedToArray(et.value,2),e=t[0],o=t[1],i=o.getAttribute("src"),a=null,c=null,u=NaN;if(i){if(s._chartConf.lineGroups.get(i)){a=s._chartConf.lineContainer;c=s._chartConf.lineGroups.get(i)}else if(s._chartConf.areaGroups.get(i)){a=s._chartConf.areaContainer;c=s._chartConf.areaGroups.get(i)}else if(s._chartConf.barGroups.get(i)){a=s._chartConf.barContainer;c=s._chartConf.barGroups.get(i)}if(!c){s.error("no data found for src "+i);return 0}switch(o.getAttribute("value")){case"avg":var l,f=0,p=_createForOfIteratorHelper(c);try{for(p.s();!(l=p.n()).done;){var d=l.value;f+=n[d]}}catch(t){p.e(t)}finally{p.f()}u=f/c.length;break;case"max":u=d3.max(n.filter((function(t,e){return c.includes(e)}),(function(t){return t})));break;case"min":u=d3.min(n.filter((function(t,e){return c.includes(e)}),(function(t){return t})));break;default:s.error("unknown value calculation: "+o.getAttribute("value"))}}else{a=s._chartConf.lineContainer||s._chartConf.areaContainer||s._chartConf.barContainer;u=parseFloat(o.getAttribute("value"));c=[0,r.length-1]}if(!a)return 0;var h=a.select(".line-"+e);if(isNaN(u)&&!h.empty()){h.remove();"true"===o.getAttribute("show-value")&&a.select(".line-value-"+e).remove()}else if(!isNaN(u)){var _=o.getAttribute("color")||"currentColor";h.empty()&&(h=a.append("line").attr("class","line-"+e).attr("stroke",_));var y=s._chartConf.x(r[c[0]]),m=s._chartConf.x(r[r.length-1]),v=s._chartConf.y(u);h.attr("x1",y).attr("x2",m).attr("y1",v).attr("y2",v);if("true"===o.getAttribute("show-value")){var b=o.hasAttribute("format")?o.getAttribute("format"):s._element.hasAttribute("y-format")?s._element.getAttribute("y-format"):"%s",g=a.select(".line-value-"+e);g.empty()&&(g=a.append("text").attr("class","line-value-"+e).attr("fill",o.getAttribute("value-color")||_).attr("font-size","10").attr("text-anchor","start"));g.attr("x",m+2).attr("y",v+5).text(cv.util.String.sprintf(b,u))}}};for(rt.s();!(et=rt.n()).done;)nt()}catch(t){rt.e(t)}finally{rt.f()}u.select("g.dot").empty()&&u.append("g").attr("class","dot").attr("display","none").attr("fill","currentColor").append("circle").attr("r",2.5);this._dot=u.select("g.dot")},_onPointerEntered:function(t){var e=this;this._loaded&&(this.__P_75_1=setTimeout((function(){e.__P_75_11(!0,t);e.__P_75_1=null}),500))},_onPointerLeft:function(t){this.__P_75_1&&clearTimeout(this.__P_75_1);this._loaded&&t.relatedTarget!==this._tooltip&&this.__P_75_11(!1)},__P_75_11:function(t,e){this.__P_75_2=t;if(t){if(this._dot){this._dot.attr("display",null);this._dot.raise()}this._tooltip.style.display="block";this._onPointerMoved(null,!0)}else{this._dot&&this._dot.attr("display","none");var r=d3.select(this._element).select("svg");r.node().value=null;r.dispatch("input",{bubbles:!0});this._tooltip.style.display="none"}},_onPointerMoved:function(t,e){if(this._loaded&&this.__P_75_2){var r=0,n=0;if(t){var o=d3.pointer(t),i=_slicedToArray(o,2);r=i[0];n=i[1]}else{if(!e)return;r=this.__P_75_8.width/2;n=this.__P_75_8.height/2}var a=this._helpers,s=a.X,c=a.Y,u=a.I,l=a.T,f=a.Z,p=a.O,d=this._chartConf,h=d.x,_=d.y,y=d.xz,m=d3.least(u,(function(t){return Math.hypot(h(s[t])-r,_(c[t])-n)})),v=this._element.offsetWidth/this.__P_75_8.width,b=this._element.offsetHeight/this.__P_75_8.height,g=y?y(f[m])+("function"==typeof y.bandwidth?y.bandwidth()/2:0):0;this._dot.attr("transform","translate(".concat(h(s[m])+g,",").concat(_(c[m]),")"));if(l){var P=t&&"mouse"===t.pointerType?16:40,w=this.__P_75_8.xFormat(new Date(s[m])),C=n*b-this._tooltip.offsetHeight;C<0?C+=P+this._tooltip.offsetHeight:C-=P;var O=r*v;O>this._element.offsetWidth/2?O-=this._tooltip.offsetWidth+P:O+=P;var S=f[m],A=this._dataSetConfigs[S]&&this._dataSetConfigs[S].title?this._dataSetConfigs[S].title+": ":"";this._tooltip.innerHTML="".concat(w,"<br/>").concat(A).concat(l[m]);this._tooltip.style.left=O+"px";this._tooltip.style.top=C+"px"}d3.select(this._element).select("svg").property("value",p[m]).dispatch("input",{bubbles:!0})}},_buttonFactory:function(t,e){var r,n=document.createElement("button");(r=n.classList).add.apply(r,_toConsumableArray(e));if(t){var o=document.createElement("i");o.classList.add(t);n.appendChild(o)}return n},__P_75_9:function(){if(this._navigationEnabled){var t=this.getHeader("label.title span");if(t){var e=this._titleString||"";t.textContent=(e?e+" - ":"")+this._shownDateRange()}}},_seriesToShort:function(t){switch(t){case"hour":return qx.locale.Manager.tr("Hour");case"day":return qx.locale.Manager.tr("Day");case"week":return qx.locale.Manager.tr("Week");case"month":return qx.locale.Manager.tr("Month");case"year":return qx.locale.Manager.tr("Year")}return""},_shownDateRange:function(){var t=this.getCurrentSeries(),e=this.getCurrentPeriod(),r=new Date;new qx.util.format.DateFormat;switch(t){case"hour":r.setHours(r.getHours()-e,0,0);return new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat("hmm","h:mm")).format(r);case"day":if(0===e)return qx.locale.Manager.tr("today");if(1===e)return qx.locale.Manager.tr("yesterday");r.setDate(r.getDate()-e);return new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat("MMMd","d. MMM")).format(r);case"week":r.setDate(r.getDate()-7*e);return qx.locale.Manager.trc("CW = calendar week","CW %1",this.getWeekNumber(r));case"month":r.setMonth(r.getMonth()-e);return(r.getFullYear()===(new Date).getFullYear()?new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat("MMM","MMM")):new qx.util.format.DateFormat(qx.locale.Date.getDateTimeFormat("yyMMM","MMM yy"))).format(r);case"year":return r.getFullYear()-e}return""},getWeekNumber:function(t){(t=new Date(t.getFullYear(),t.getMonth(),t.getDate())).setDate(t.getDate()+4-(t.getDay()||7));var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+1)/7)},__P_75_10:function(t,e){return t.startsWith("rgb(")?"rgba("+t.substring(4,t.length-1)+", "+(parseInt(e,16)/255).toFixed(2)+")":t.startsWith("#")&&7===t.length?t+e:t}},destruct:function(){this._chartConf=null;this._helpers=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"chart",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Chart.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MResize":{require:!0},"cv.parser.pure.widgets.ColorChooser":{},"cv.ui.structure.pure.ColorChooser":{},"qx.event.Timer":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Color",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MResize,properties:{throttleInterval:{check:"Number",init:250,apply:"_applyThrottleInterval"}},statics:{CC_COUNTER:0},members:{__P_76_0:null,_init:function(){var t=this,e=this._element;e.hasAttribute("throttle-interval")&&this.setThrottleInterval(parseInt(e.getAttribute("throttle-interval")));if("popup"===(e.hasAttribute("mode")?e.getAttribute("mode"):"popup")){var r=e.querySelector(":scope > cv-popup");if(!r){(r=document.createElement("cv-popup")).setAttribute("modal","true");e.hasAttribute("title")&&r.setAttribute("title",e.getAttribute("title"));var n,o={},i=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-address"));try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.textContent,c=a.getAttribute("transform"),u=3;switch(a.getAttribute("mode")){case"disable":u=0;break;case"read":u=1;break;case"write":u=2;break;case"readwrite":u=3}var l=cv.parser.pure.widgets.ColorChooser.makeAddressListFn(s,c,u,a.getAttribute("variant"));o[s.trim()]={transform:c,mode:u,variantInfo:l[1]}}}catch(t){i.e(t)}finally{i.f()}cv.ui.structure.tile.components.Color.CC_COUNTER++;var f="id_0_"+cv.ui.structure.tile.components.Color.CC_COUNTER,p={path:f,$$type:"colorchooser",classes:"widget colorchooser",layout:{colspan:1},controls:e.hasAttribute("controls")?e.getAttribute("controls"):"triangle",address:o,throttleInterval:this.getThrottleInterval()};cv.parser.pure.widgets.ColorChooser.parseAttributes(e,p);this.__P_76_0=new cv.ui.structure.pure.ColorChooser(p);this.__P_76_0.addListener("colorChanged",this._onColorChanged,this);this._onColorChanged();r.innerHTML='<div class="widget_container" style="margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center" id="'.concat(f,'" data-type="colorchooser">').concat(this.__P_76_0.getDomString(),"</div>");e.appendChild(r);e.addEventListener("click",(function(t){var e=t.path||t.composedPath&&t.composedPath();e&&e.indexOf(r)<0&&r.getInstance().open()}));qx.event.Timer.once((function(){t.__P_76_0._onDomReady()}),this,0);this.setResizeTarget(r);this.addListener("resized",(function(){t.__P_76_0.invalidateScreensize()}))}}},_onColorChanged:function(){var t=this.__P_76_0.getColor(),e=t.getComponent("rgb"),r=t.getComponent("v");this.setValue("#".concat(this.__P_76_1(e.r)).concat(this.__P_76_1(e.g)).concat(this.__P_76_1(e.b)).concat(this.__P_76_1(r)))},__P_76_1:function(t){return Math.round(255*t).toString(16).padStart(2,"0")},_updateValue:function(t,e){var r=this._element.querySelector(":scope > .value"),n=t.substring(0,7);if(r){var o=r.tagName.toLowerCase(),i=9===t.length?parseInt(t.substring(7,9),16)/255:1;if("cv-icon"===o){r.style.color=n;r.style.opacity=Math.max(i,.2)}}else this._element.style.backgroundColor=t}},destruct:function(){this._disposeObjects("__P_76_0")},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"color",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Color.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{construct:!0,require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Icon",{extend:cv.ui.structure.tile.components.AbstractComponent,construct:function(t){cv.ui.structure.tile.components.AbstractComponent.constructor.call(this,t);this._idRegex=/^[^\s]+$/},properties:{id:{check:"String",nullable:!0,apply:"_applyId",transform:"_transformId"},color:{check:"String",nullable:!0,apply:"_applyColor"}},members:{__P_77_0:!1,_idRegex:null,_transformId:function(t){if(this._idRegex.test(t))return t;this.error("invalid icon id:",t);return null},_init:function(){cv.ui.structure.tile.components.Icon.superclass.prototype._init.call(this);var t=this._element;if(t.textContent.trim()){this.__P_77_0=!0;this.setId(t.textContent.trim())}else{var e,r=t.classList.values(),n=_createForOfIteratorHelper(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.startsWith("ri-")||o.startsWith("knxuf-")){this.setId(o);break}}}catch(t){n.e(t)}finally{n.f()}}this.__P_77_0=!0},_applyId:function(t,e){var r=this._element;if(this.__P_77_0){e&&r.classList.remove(e);if(t){r.classList.add(t);r.textContent&&(r.textContent="")}}},_applyColor:function(t,e){var r=this._element;e&&r.classList.remove(e);t&&r.classList.add(t)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"icon",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}_createClass(n,null,[{key:"observedAttributes",get:function(){return["color"]}}]);return n}(QxConnector))}});cv.ui.structure.tile.components.Icon.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MRefresh":{require:!0},"cv.io.rest.Client":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Image",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MRefresh],members:{_downloadedImage:null,_url:null,_headers:null,_request:null,_init:function(){var t=this,e=this._element,r=e.querySelector(":scope > img");if(!r){r=document.createElement("img");e.appendChild(r)}e.addEventListener("click",(function(){return t.refresh()}));var n=e.getAttribute("src"),o=window.location.origin;"/"!==n.substring(0,1)&&"http"!==n.substring(0,4)&&(o+=window.location.pathname);this._url=new URL(n,o);var i=e.hasAttribute("proxy")&&"true"===e.getAttribute("proxy");if(i){this._url=new URL(cv.io.rest.Client.getBaseUrl()+"/proxy",window.location.origin);this._url.searchParams.set("url",e.getAttribute("src"))}this._headers={};if(e.hasAttribute("auth-type"))if(i)this._url.searchParams.set("auth-type",e.getAttribute("auth-type").toLowerCase());else switch(e.getAttribute("auth-type").toLowerCase()){case"basic":this._headers.Authorization="Basic "+window.btoa(e.getAttribute("username")+":"+e.getAttribute("password"));break;case"bearer":this._headers.Authorization="Bearer "+e.getAttribute("username");break;default:this.error("unknown authorization type"+e.getAttribute("auth-type"))}this._loadImage();e.hasAttribute("refresh")&&this.setRefresh(parseInt(e.getAttribute("refresh")))},_loadImage:function(){var t=this,e=this._element.querySelector(":scope > img");if(Object.keys(this._headers).length>0){var r=new XMLHttpRequest;r.responseType="blob";r.open("get",this._url.toString(),!0);Object.keys(this._headers).forEach((function(e){r.setRequestHeader(e,t._headers[e])}));r.onreadystatechange=function(t){if(r.readyState===XMLHttpRequest.DONE&&200===r.status){e.src=URL.createObjectURL(r.response);e.onload=function(){URL.revokeObjectURL(e.src)}}};r.send(null)}else e.src=this._url.toString()},refresh:function(){if(this._element.querySelector(":scope > img")){this._url.searchParams.set("r",""+Math.random());this._loadImage()}},onStateUpdate:function(t){cv.ui.structure.tile.components.Image.superclass.prototype.onStateUpdate.call(this,t)||("refresh"===t.detail.target?t.detail.state&&this.refresh():this.debug("unhandled address target",t.detail.target))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"image",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Image.$$dbClassInfo=t}();function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new S(o||[]);return n(a,"_invoke",{value:P(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function h(){}var _={};c(_,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(A([])));m&&m!==e&&r.call(m,i)&&(_=m);var v=h.prototype=p.prototype=Object.create(_);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){r(t);return}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,s,"next",t)}function s(t){asyncGeneratorStep(i,n,o,a,s,"throw",t)}a(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MRefresh":{require:!0},"cv.io.Fetch":{},"cv.io.listmodel.Registry":{},"qx.data.Array":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.List",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MRefresh],properties:{value:{refine:!0,init:[]}},members:{_target:null,_timer:null,_model:null,_getModel:null,_filterModel:null,_sortModel:null,_limit:null,_modelInstance:null,_init:function(){var t=this,e=this._element;this._model=[];var r=!1,n=e.querySelector("model");e.parentElement&&e.parentElement.classList.add("has-list");if(n){n.hasAttribute("filter")&&(this._filterModel=new Function("item","index",'"use strict"; return '+n.getAttribute("filter")));n.hasAttribute("limit")&&(this._limit=parseInt(n.getAttribute("limit")));var o,i=n.querySelectorAll(':scope > cv-address:not([mode="write"])'),a=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-address"));try{for(a.s();!(o=a.n()).done;){if("read"!==o.value.getAttribute("mode")){e.addEventListener("sendState",(function(t){var r,n=new CustomEvent("sendState",{bubbles:t.bubbles,cancelable:t.cancelable,detail:t.detail}),o=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-address"));try{for(o.s();!(r=o.n()).done;){r.value.dispatchEvent(n)}}catch(t){o.e(t)}finally{o.f()}}));break}}}catch(t){a.e(t)}finally{a.f()}if(n.hasAttribute("sort-by")){var s=n.getAttribute("sort-by"),c="desc"===n.getAttribute("sort-mode")?-1:1;this._sortModel=function(t,e){var r=t[s],n=e[s];if(r===n)return 0;if(_typeof(r)===_typeof(n))switch(_typeof(r)){case"number":return(r-n)*c;case"boolean":return(r?-1:1)*c;case"string":return r.localeCompare(n)*c;default:return JSON.stringify(r).localeCompare(JSON.stringify(n))*c}else{if(null==r)return 1*c;if(null==n)return-1*c}return 0}}if(n.hasAttribute("src")||n.hasAttribute("config-section"))this._getModel=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,o,i,a,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={ttl:t.getRefresh()};for(o=0,i=["self-signed","config-section","auth-type"];o<i.length;o++){a=i[o];n.hasAttribute(a)&&(r[a]=n.getAttribute(a))}e.next=4;return cv.io.Fetch.cachedFetch(n.getAttribute("src"),r,"true"===n.getAttribute("proxy"));case 4:s=e.sent;return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));else if(n.hasAttribute("class")){var u=cv.io.listmodel.Registry.get(n.getAttribute("class"));if(u){var l=new u;if(n.hasAttribute("parameters")){var f,p={},d=_createForOfIteratorHelper(n.getAttribute("parameters").split(","));try{for(d.s();!(f=d.n()).done;){var h=f.value.split("=").map((function(t){return t.trim()})),_=_slicedToArray(h,2),y=_[0],m=_[1];p[y]=m.startsWith("'")?m.substring(1,m.length-1):m}}catch(t){d.e(t)}finally{d.f()}l.set(p)}this._getModel=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return l.refresh();case 2:return t.abrupt("return",l.getModel());case 3:case"end":return t.stop()}}),t)})))}else this.error('clazz "cv.io.listmodel.'.concat(n.getAttribute("class"),'" not found'))}else{var v=n.querySelector(":scope > script"),b=n.querySelectorAll(":scope > cv-data");if(v){this._getModel=new Function('"use strict";let model = []; '+v.innerText.trim()+"; return model");this._model=this._getModel()}else if(i.length>0){this._getModel=this.getValue;r=!0}else{if(!(b.length>0)){this.error("cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.");return}this._model=[];this._getModel=function(){return t._model};b.forEach((function(e,r){var n,o={index:r},i=_createForOfIteratorHelper(e.attributes);try{for(i.s();!(n=i.n()).done;){var a=n.value;o[a.name]=a.value}}catch(t){i.e(t)}finally{i.f()}t._model.push(o)}))}}i.length>0&&e.addEventListener("stateUpdate",(function(e){return t.onStateUpdate(e)}));if(!r){this.isVisible()&&this.refresh();e.hasAttribute("refresh")&&this.setRefresh(parseInt(e.getAttribute("refresh")))}}else this.error("cv-list needs a model")},onStateUpdate:function(t){"refresh"===t.detail.target?this.isVisible()?this.refresh():this._lastRefresh=null:cv.ui.structure.tile.components.List.superclass.prototype.onStateUpdate.call(this,t);t.stopPropagation()},_applyValue:function(){this._lastRefresh=0;this.refresh()},refresh:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,s,c,u,l,f,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t._element;n=r.querySelector(":scope > template:not([when])");o=[];"function"==typeof t._getModel&&(o=t._getModel());if(!(o instanceof Promise)){e.next=14;break}e.prev=5;e.next=8;return o;case 8:o=e.sent;e.next=14;break;case 11:e.prev=11;e.t0=e.catch(5);t.error("error refreshing async model:",e.t0);case 14:i=r.querySelector(":scope > ul");if("false"!==n.getAttribute("wrap")){e.next=19;break}i=r;e.next=30;break;case 19:if(!n.hasAttribute("target")){e.next=29;break}e.t1=n.getAttribute("target");e.next="parent"===e.t1?23:26;break;case 23:i=r.parentElement;r.style.display="none";return e.abrupt("break",27);case 26:throw new Error("invalid target: "+n.getAttribute("target"));case 27:e.next=30;break;case 29:if(!i){(i=document.createElement("ul")).classList.add("content");r.appendChild(i)}case 30:t.debug("refreshing with new model length",o.length);if(!(Array.isArray(o)||o instanceof qx.data.Array)){e.next=54;break}"function"==typeof t._filterModel&&(o=o.filter(t._filterModel));"function"==typeof t._sortModel&&o.sort(t._sortModel);t._limit&&(o=o.slice(0,t._limit));if(0!==o.length){e.next=45;break}if(!(a=r.querySelector(':scope > template[when="empty"]'))||i.querySelector(":scope > .empty-model")){e.next=43;break}for(;i.firstElementChild&&i.firstElementChild.hasAttribute("data-row");)i.removeChild(i.firstElementChild);(s=a.content.firstElementChild.cloneNode(!0)).classList.add("empty-model");i.appendChild(s);return e.abrupt("return");case 43:e.next=47;break;case 45:(c=i.querySelector(":scope > .empty-model"))&&c.remove();case 47:u=document.createElement("template");for(l=o.length;l<t._model.length;l++)(f=i.querySelector(':scope > [data-row="'.concat(l,'"]')))&&f.remove();p=function(e,r){var n=-1;if(e.endsWith("]")){n=parseInt(e.substring(e.indexOf("[")+1,e.length-1));if(isNaN(n)){t.error("error parsing array index from "+e,e.substring(e.indexOf("[")+1,e.length-1));return""}e=e.substring(0,e.indexOf("["))}if(Object.prototype.hasOwnProperty.call(r,e)){var o=r[e];return n>=0&&Array.isArray(o)?o[n]:o}return""};o.forEach((function(t,e){var r=i.querySelector(':scope > [data-row="'.concat(e,'"]')),o=n.innerHTML.replaceAll(/\${([^}]+)}/g,(function(r,n){if("index"===n)return""+e;if(n.includes("||")){var o,i="",a=_createForOfIteratorHelper(n.split("||").map((function(t){return t.trim()})));try{for(a.s();!(o=a.n()).done;){var s=o.value;if(i=p(s,t))return i}}catch(t){a.e(t)}finally{a.f()}}return p(n,t)}));u.innerHTML=o;u.content.firstElementChild.querySelectorAll("[when]").forEach((function(t){var e=t.getAttribute("when").split("=").map((function(t){return t.trim()})),r=_slicedToArray(e,2);r[0]!=r[1]?t.parentElement.removeChild(t):t.removeAttribute("when")}));if(r){r.innerHTML=u.content.firstElementChild.innerHTML;r.setAttribute("data-row",""+e)}else{u.content.firstElementChild.setAttribute("data-row",""+e);i.appendChild(u.content.cloneNode(!0))}}));t._model=o;e.next=55;break;case 54:t.error("model must be an array",o);case 55:case"end":return e.stop()}}),e,null,[[5,11]])})))()}},destruct:function(){this._disposeObjects("_modelInstance","_timer");this._model=null;this._filterModel=null;this._sortModel=null;this._target=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"list",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.List.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.ListItem",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{_init:function(){var t=this;cv.ui.structure.tile.components.ListItem.superclass.prototype._init.call(this);this._element.fireEvent=function(e,r){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{value:r,source:t}});t._element.dispatchEvent(n)}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"listitem",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.ListItem.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"qx.event.message.Bus":{},"qx.event.Registration":{},"qx.event.Timer":{},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Menu",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{model:{check:["pages","menuItems"],apply:"_applyModel"},appearance:{check:["text","icons","dock"],init:"text",apply:"_applyAppearance"},depth:{check:"!isNaN(value) && value >= -1 && value <= 100",init:-1,apply:"_applyDepth"},domReady:{check:"Boolean",init:!1,apply:"_generateMenu"},showLabels:{check:"Boolean",init:!0}},members:{_applyAppearance:function(t,e){var r=document.querySelector("main");"dock"===e&&r.classList.remove("has-dock");"dock"===t&&r.classList.add("has-dock")},_applyDepth:function(){this.isDomReady()&&this._generateMenu()},_onDomAppended:function(){this.setDomReady(!0);qx.event.message.Bus.unsubscribe("setup.dom.append",this._onDomAppended,this)},_applyModel:function(t){var e=this;if(t){var r=document.createElement("ul");this._element.appendChild(r);if("pages"===t){var n=document.createElement("a");n.href="#";n.classList.add("menu");n.onclick=function(t){return e._onHamburgerMenu(t)};var o=document.createElement("i");n.appendChild(o);this._element.appendChild(n);qx.event.message.Bus.subscribe("setup.dom.append",this._onDomAppended,this);qx.event.message.Bus.subscribe("cv.ui.structure.tile.currentPage",this._onPageChange,this);qx.event.Registration.addListener(this._element,"swipe",this._onSwipe,this);o.classList.add("ri-menu-line")}else if("menuItems"===t){var i=document.createElement("i");i.classList.add("ri-more-2-fill");this._element.appendChild(i);this._element.onclick=function(t){return e._onHamburgerMenu(t)};r.classList.add("context-menu");this._generateMenu()}}else this.error("visual-model of type",t,"is not implemented")},_init:function(){var t=this._element,e=t.hasAttribute("model")?t.getAttribute("model"):t.querySelectorAll(":scope > cv-menu-item").length>0?"menuItems":null;if(e){"false"===t.getAttribute("show-labels")&&this.setShowLabels(!1);this.setModel(e)}else this.error("no model defined, menu will be empty")},_generateMenu:function(){var t=this;switch(this.getModel()){case"pages":var e=window.location.hash.substring(1),r=document.querySelector("main");if(r){var n=document.querySelector("cv-page");n&&(r=n.parentElement)}var o=this._element.querySelector(":scope > ul");if(o){o.replaceChildren();this.__P_78_0(o,r,e,0)}break;case"menuItems":var i=this._element.querySelector(":scope > ul");if(i){i.replaceChildren();var a,s=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > cv-menu-item"));try{var c=function(){var e=a.value,r=e.getAttribute("name")||"",n=e.getAttribute("icon")||"",o=document.createElement("li");if(n){var s=document.createElement("i");s.classList.add(n);s.title=r;o.appendChild(s)}if(t.isShowLabels()){var c=document.createTextNode(r);o.appendChild(c)}o.addEventListener("click",(function(t){e.getInstance().onClick(t)}));i.appendChild(o)};for(s.s();!(a=s.n()).done;)c()}catch(t){s.e(t)}finally{s.f()}}}},_onHamburgerMenu:function(t){var e="open";if("pages"===this.getModel()){e="responsive";var r,n=_createForOfIteratorHelper(this._element.querySelectorAll(".details"));try{for(n.s();!(r=n.n()).done;){r.value.setAttribute("open","")}}catch(t){n.e(t)}finally{n.f()}}this._element.classList.toggle(e);t.stopPropagation();if(this._element.classList.contains(e)){qx.event.Registration.addListener(document,"pointerdown",this._onPointerDown,this);qx.event.Registration.addListener(document.body.querySelector(":scope > main"),"scroll",this._closeAll,this)}},_onPointerDown:function(t){var e=t.getTarget();e.classList.contains("menu")||e.parentElement&&e.parentElement.classList.contains("menu")||"cv-menu"===e.nodeName.toLowerCase()||e.parentElement&&"cv-menu"===e.parentElement.nodeName.toLowerCase()||(".summary"!==e.tagName.toLowerCase()&&"p"!==e.tagName.toLowerCase()?qx.event.Timer.once(this._closeAll,this,500):this._closeAll(t.getTarget().parentElement))},_onSwipe:function(t){if("left"===t.getDirection()){var e=this._element.querySelector("li.active + li > a");e&&e.click()}else{var r=this._element.querySelector("li.active");if(r&&r.previousElementSibling&&"li"===r.previousElementSibling.tagName.toLowerCase()){var n=r.previousElementSibling.querySelector(":scope > a");n&&n.click()}}},_closeAll:function(t){if(this._element.classList.contains("open"))this._element.classList.remove("open");else if(this._element.classList.contains("responsive"))this._element.classList.remove("responsive");else{var e,r=_createForOfIteratorHelper(this._element.querySelectorAll(".details[open]"));try{for(r.s();!(e=r.n()).done;){var n=e.value;t&&n===t||n.removeAttribute("open")}}catch(t){r.e(t)}finally{r.f()}}if(0===this._element.querySelectorAll(".details[open]").length){qx.event.Registration.removeListener(document,"pointerdown",this._onPointerDown,this);qx.event.Registration.removeListener(document.body.querySelector(":scope > main"),"scroll",this._closeAll,this)}},_openDetail:function(t){var e=0===this._element.querySelectorAll(".details[open]").length;t.setAttribute("open","");if(e){qx.event.Registration.addListener(document,"pointerdown",this._onPointerDown,this);qx.event.Registration.addListener(document.body.querySelector(":scope > main"),"scroll",this._closeAll,this)}},_closeDetail:function(t){t.removeAttribute("open");if(0===this._element.querySelectorAll(".details[open]").length){qx.event.Registration.removeListener(document,"pointerdown",this._onPointerDown,this);qx.event.Registration.removeListener(document.body.querySelector(":scope > main"),"scroll",this._closeAll,this)}},__P_78_0:function(t,e,r,n){var o=this;if(e){var i,a=e.querySelectorAll(':scope > cv-page:not([menu="false"])'),s=_createForOfIteratorHelper(a.values());try{var c=function(){var e=i.value,a=e.getAttribute("id");if(!a){o.error("page has no id, skipping");return 1}var s=e.getAttribute("name")||"",c=e.getAttribute("icon")||"",u=document.createElement("li"),l=document.createElement("a");l.setAttribute("href","#"+a);l.setAttribute("data-page-id",a);if(c){var f=document.createElement("i");f.classList.add(c);f.title=s;l.appendChild(f)}if(o.isShowLabels()||n>0){var p=document.createTextNode(s);l.appendChild(p)}r===a&&u.classList.add("active");t.appendChild(u);var d=o.getDepth();if((d<0||d>n)&&e.querySelectorAll(':scope > cv-page:not([menu="false"])').length>0){var h=document.createElement("div");h.classList.add("details");var _=document.createElement("div");_.classList.add("summary");l.setAttribute("href","#");l.addEventListener("click",(function(t){cv.Application.structureController.scrollToPage(a);t.stopPropagation();t.preventDefault()}));var y=e.getAttribute("icon")||"";if(e.querySelector(":scope > *:not(cv-page)"))_.appendChild(l);else{var m=document.createElement("p");if(y){var v=document.createElement("i");v.classList.add(y);v.title=s;m.appendChild(v)}o.isShowLabels()&&m.appendChild(document.createTextNode(s));_.appendChild(m)}var b=document.createElement("i");b.classList.add("expander");b.classList.add("ri-arrow-down-s-line");_.appendChild(b);b.addEventListener("click",(function(t){h.hasAttribute("open")?o._closeDetail(h):o._openDetail(h)}));h.appendChild(_);var g=document.createElement("ul");h.appendChild(g);o.__P_78_0(g,e,r,n+1);u.appendChild(h)}else u.appendChild(l)};for(s.s();!(i=s.n()).done;)c()}catch(t){s.e(t)}finally{s.f()}}},_onPageChange:function(t){var e,r=t.getData(),n=_createForOfIteratorHelper(this._element.querySelectorAll("li.active, li.sub-active"));try{for(n.s();!(e=n.n()).done;){var o=e.value;o.classList.remove("active");o.classList.remove("sub-active")}}catch(t){n.e(t)}finally{n.f()}var i,a=_createForOfIteratorHelper(this._element.querySelectorAll('a[data-page-id="'.concat(r.id,'"]')));try{for(a.s();!(i=a.n()).done;)for(var s=i.value.parentElement,c="active";s&&"cv-menu"!==s.tagName.toLowerCase();){if("li"===s.tagName.toLowerCase()){s.classList.add(c);c="sub-active"}s=s.parentElement}}catch(t){a.e(t)}finally{a.f()}}},destruct:function(){qx.event.Registration.removeListener(document,"pointerdown",this._onPointerDown,this);qx.event.message.Bus.unsubscribe("cv.ui.structure.tile.currentPage",this._onPageChange,this)},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"menu",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}_createClass(n,null,[{key:"observedAttributes",get:function(){return["appearance","depth"]}}]);return n}(QxConnector))}});cv.ui.structure.tile.components.Menu.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.elements.Address":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.MenuAction",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{_currentState:null,_init:function(){var t=this;cv.ui.structure.tile.components.MenuAction.superclass.prototype._init.call(this);switch(this._element.getAttribute("action")){case"toggleState":var e,r=!1,n=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > cv-address"));try{for(n.s();!(e=n.n()).done;){var o=e.value;r=!0;"write"!==o.getAttribute("mode")&&this._element.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}))}}catch(t){n.e(t)}finally{n.f()}r||this.error('a cv-menu-item with action "toggleState" needs at least one cv-address to read the write the state,');break;case"popup":this._element.querySelector(":scope > cv-popup")||this.error('a cv-menu-item with action "popup" must have a cv-popup as child.')}},onClick:function(t){switch(this._element.getAttribute("action")){case"popup":var e=this._element.querySelector(":scope > cv-popup");e&&e.getInstance().open();t.stopPropagation();break;case"toggleState":var r,n=new CustomEvent("sendState",{detail:{value:!this._currentState,source:this}}),o=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > cv-address"));try{for(o.s();!(r=o.n()).done;){var i=r.value;"read"!==i.getAttribute("mode")&&i.dispatchEvent(n)}}catch(t){o.e(t)}finally{o.f()}t.stopPropagation()}},onStateUpdate:function(t){var e="1"==t.detail.state;if(t.detail.source instanceof cv.ui.structure.tile.elements.Address){var r=t.detail.source.getElement();r.hasAttribute("value")&&(e=t.detail.state==r.getAttribute("value"))}this._currentState=e}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"menu-item",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.MenuAction.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new S(o||[]);return n(a,"_invoke",{value:P(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function h(){}var _={};c(_,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(A([])));m&&m!==e&&r.call(m,i)&&(_=m);var v=h.prototype=p.prototype=Object.create(_);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){r(t);return}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){asyncGeneratorStep(i,n,o,a,s,"next",t)}function s(t){asyncGeneratorStep(i,n,o,a,s,"throw",t)}a(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.TemplateEngine":{},"cv.util.ScriptLoader":{},"qx.Part":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Plugin",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,statics:{PL_COUNTER:0},members:{__P_79_0:null,_init:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,a,s,c,u,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cv.ui.structure.tile.components.Plugin.superclass.prototype._init.call(t);r="";if(!(r=t._element.hasAttribute("name")?t._element.getAttribute("name"):t._element.firstElementChild.nodeName.toLowerCase())){e.next=21;break}n="plugin-"+r;e.next=7;return t.loadPluginPart(n);case 7:if(!e.sent){e.next=19;break}o=null;e.t0=_regeneratorRuntime().keys(cv.plugins);case 11:if((e.t1=e.t0()).done){e.next=18;break}if((i=e.t1.value).toLowerCase()!==r){e.next=16;break}o=cv.plugins[i];return e.abrupt("break",18);case 16:e.next=11;break;case 18:if(o){cv.ui.structure.tile.components.Plugin.PL_COUNTER++;a="id_9_"+cv.ui.structure.tile.components.Plugin.PL_COUNTER;s=new DOMParser;c=s.parseFromString(t._element.innerHTML,"application/xml");u=o.parse(c.firstElementChild,a,"","text");cv.TemplateEngine.getInstance().setDomFinished(!1);t.__P_79_0=new o(u);t._element.innerHTML='<div class="widget_container" id="'.concat(a,'" data-type="').concat(u.$$type,'">').concat(t.__P_79_0.getDomString(),"</div>");l=cv.util.ScriptLoader.getInstance();window.requestAnimationFrame((function(){l.isFinished()?cv.TemplateEngine.getInstance().setDomFinished(!0):l.addListenerOnce("finished",(function(){cv.TemplateEngine.getInstance().setDomFinished(!0)}))}))}else t.error("no main plugin class found for "+n);case 19:e.next=22;break;case 21:t.error("no plugin name provided!");case 22:case"end":return e.stop()}}),e)})))()},loadPluginPart:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=qx.Part.getInstance().getParts()[t])){r.next=3;break}return r.abrupt("return",new Promise((function(t){n.load((function(){return t(n)}),e)})));case 3:e.error("plugin",t,"does not exist");return r.abrupt("return",Promise.resolve(null));case 5:case"end":return r.stop()}}),r)})))()}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"plugin",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Plugin.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{construct:!0,require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"qx.event.message.Bus":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.RoundProgress",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MVisibility,construct:function(t){cv.ui.structure.tile.components.AbstractComponent.constructor.call(this,t);this.addListener("changeVisible",this._applyVisible,this)},properties:{progress:{check:"Number",apply:"_applyProgress"},text:{check:"String",apply:"_applyText"},type:{check:["circle","semiCircle"],init:"circle"},min:{check:"Number",init:0},max:{check:"Number",init:100}},members:{__P_80_0:null,__P_80_1:null,__P_80_2:null,__P_80_3:null,__P_80_4:null,__P_80_5:null,__P_80_6:null,__P_80_7:null,__P_80_8:null,_queuedFitText:null,_init:function(){var t=this;cv.ui.structure.tile.components.RoundProgress.superclass.prototype._init.call(this);var e=this._element,r=document.querySelector(":root").style,n=e.hasAttribute("radius"),o=this.__P_80_4=e.getAttribute("radius")||parseInt(r.getPropertyValue("--tileCellWidth"))||56,i=e.getAttribute("stroke")||8,a=this.__P_80_3=o-i/2;this.__P_80_1=2*a*Math.PI;if(e.hasAttribute("min")){var s=parseInt(e.getAttribute("min"));isNaN(s)||this.setMin(s)}if(e.hasAttribute("max")){var c=parseInt(e.getAttribute("max"));isNaN(c)||this.setMax(c)}e.hasAttribute("type")&&this.setType(e.getAttribute("type"));var u=this.getType(),l="semiCircle"===u?o:2*o,f="http://www.w3.org/2000/svg",p=document.createElementNS(f,"svg");p.setAttribute("height",l);p.setAttribute("width",""+2*o);p.setAttribute("type",u);if("circle"===u){if(!e.hasAttribute("no-background")){var d=document.createElementNS(f,"circle");d.classList.add("bg");d.setAttribute("r",""+a);d.setAttribute("cx","50%");d.setAttribute("cy","50%");d.setAttribute("fill","transparent");d.setAttribute("stroke-width",i);e.hasAttribute("background-color")&&(d.style.stroke=e.getAttribute("background-color"));p.appendChild(d)}var h=document.createElementNS(f,"circle");h.classList.add("bar");h.setAttribute("r",""+a);h.setAttribute("cx","50%");h.setAttribute("cy","50%");h.setAttribute("stroke-width",i);h.setAttribute("stroke-dasharray","".concat(this.__P_80_1," ").concat(this.__P_80_1));h.setAttribute("stroke-dashoffset",this.__P_80_1);e.hasAttribute("foreground-color")&&(h.style.stroke=e.getAttribute("foreground-color"));p.appendChild(h)}else if("semiCircle"===u){if(!e.hasAttribute("no-background")){var _=document.createElementNS(f,"path");_.classList.add("bg");_.setAttribute("d","M ".concat(i/2," ").concat(o," A ").concat(a," ").concat(a," 0 0 1 ").concat(2*o-i/2," ").concat(o));_.setAttribute("fill","transparent");_.setAttribute("stroke-width",i);e.hasAttribute("background-color")&&(_.style.stroke=e.getAttribute("background-color"));p.appendChild(_)}this.__P_80_2={x:i/2,y:o};var y=document.createElementNS(f,"path");y.classList.add("bar");y.setAttribute("d","M ".concat(i/2," ").concat(o," A ").concat(a," ").concat(a," 0 0 0 ").concat(i/2," ").concat(o));y.setAttribute("fill","transparent");y.setAttribute("stroke-width",i);e.hasAttribute("foreground-color")&&(y.style.stroke=e.getAttribute("foreground-color"));p.appendChild(y)}e.replaceChildren(p,document.createElement("label"));this.__P_80_7=2*o-2*i-24;n||qx.event.message.Bus.subscribe("cv.design.tile.cellWidthChanged",(function(r){t.__P_80_4=r.getData();t.__P_80_3=t.__P_80_4-i/2;t.__P_80_1=2*t.__P_80_3*Math.PI;l="semiCircle"===u?t.__P_80_4:2*t.__P_80_4;var n=e.querySelector(":scope > svg");n.setAttribute("height",""+l);n.setAttribute("width",""+2*t.__P_80_4);if("circle"===u)t._element.querySelectorAll(":scope > svg > circle").forEach((function(e){e.setAttribute("r",""+t.__P_80_3);if(e.classList.contains("bar")){e.setAttribute("stroke-dasharray",t.__P_80_1+" "+t.__P_80_1);e.setAttribute("stroke-dashoffset",""+t.__P_80_1)}}));else if("semiCircle"===u){t.__P_80_2.y=t.__P_80_4;var o=t._element.querySelector(":scope > svg > path.bg");o&&o.setAttribute("d","M ".concat(i/2," ").concat(t.__P_80_4," A ").concat(t.__P_80_3," ").concat(t.__P_80_3," 0 0 1 ").concat(2*t.__P_80_4-i/2," ").concat(t.__P_80_4))}t._applyProgress(t.isPropertyInitialized("progress")?t.getProgress():0)}))},__P_80_9:function(t){var e=t*(Math.PI/180);return{x:this.__P_80_4-this.__P_80_3*Math.cos(e),y:this.__P_80_4-this.__P_80_3*Math.sin(e)}},_applyProgress:function(t){if(this.isConnected()){var e,r,n=t-this.getMin(),o=Math.max(0,Math.min(100,100/(this.getMax()-this.getMin())*n));switch(this.getType()){case"circle":(e=this._element.querySelector(":scope > svg > circle.bar")).setAttribute("stroke-dashoffset",""+this.__P_80_1-o/100*this.__P_80_1);break;case"semiCircle":e=this._element.querySelector(":scope > svg > path.bar");r=this.__P_80_9(1.8*o);e.setAttribute("d",["M",this.__P_80_2.x,this.__P_80_2.y,"A",this.__P_80_3,this.__P_80_3,0,0,1,r.x,r.y].join(" "))}}},_fitText:function(){if(this.__P_80_5&&this.__P_80_5.textContent)if(this.isVisible()){if(!this.__P_80_6){this.__P_80_6=document.createElement("canvas");this.__P_80_10=this.__P_80_6.getContext("2d");var t=window.getComputedStyle(this.__P_80_5);this.__P_80_10.font=t.getPropertyValue("font");this.__P_80_8=t.getPropertyValue("font-size")}var e=this.__P_80_10.measureText(this.__P_80_5.textContent);if(e.width>this.__P_80_7){var r=this.__P_80_7/e.width;this.__P_80_5.style.fontSize=Math.floor(parseInt(this.__P_80_8)*r)+"px"}else this.__P_80_5.style.fontSize=this.__P_80_8;this._queuedFitText=!1}else this._queuedFitText=!0},_applyVisible:function(t){t.getData()&&this._queuedFitText&&this._fitText()},_applyText:function(t){if(this.isConnected()){this.__P_80_5||(this.__P_80_5=this._element.querySelector(":scope > label"));this.__P_80_5.textContent=t;t?this._fitText():this.__P_80_8&&(this.__P_80_5.style.fontSize=this.__P_80_8)}}},destruct:function(){this.__P_80_5=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"round-progress",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.RoundProgress.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Select",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{__P_81_0:null,__P_81_1:null,__P_81_2:null,_init:function(){var t=this;cv.ui.structure.tile.components.Select.superclass.prototype._init.call(this);var e=this._element;this.__P_81_0=new Map;var r=this.__P_81_2=document.createElement("div");r.classList.add("popup");e.querySelectorAll(":scope > cv-option").forEach((function(e,n){r.appendChild(e);e.hasAttribute("key")||e.setAttribute("key",""+n);t.__P_81_0.set(e.getAttribute("key"),e)}));var n=this.__P_81_1=document.createElement("span");n.classList.add("value");e.appendChild(n);e.appendChild(r);var o=document.createElement("cv-icon");o.classList.add("dropdown");o.classList.add("ri-arrow-down-s-line");e.appendChild(o);this._writeAddresses.length>0&&e.addEventListener("click",(function(e){return t.onClicked(e)}))},onClicked:function(t){for(var e=getComputedStyle(this.__P_81_2),r=t.target;r!==t.currentTarget&&"cv-option"!==r.tagName.toLowerCase();)r=r.parentElement;"cv-option"===r.tagName.toLowerCase()&&this._sendSelection(r.getAttribute("key"),!0);"none"===e.getPropertyValue("display")?this.__P_81_2.style.display="block":this.__P_81_2.style.display="none"},_sendSelection:function(t,e){var r=new CustomEvent("sendState",{detail:{value:t,source:this}});this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||"click"===t.getAttribute("on")})).forEach((function(t){return t.dispatchEvent(r)}));!0===e&&this.setValue(t)},_updateValue:function(t,e){if(this.__P_81_0.has(t)){this.__P_81_1.innerHTML="";var r=this.__P_81_0.get(t);if(r.children.length>0){var n,o=_createForOfIteratorHelper(r.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.__P_81_1.appendChild(i.cloneNode())}}catch(t){o.e(t)}finally{o.f()}}else this.__P_81_1.innerHTML=r.innerHTML}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"select",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Select.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.util.Function":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Slider",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{stepWidth:{check:"Number",init:5,apply:"_applyStepWidth"},min:{check:"Number",init:1,apply:"_applyMin"},max:{check:"Number",init:100,apply:"_applyMax"},showValue:{check:"Boolean",init:!0,apply:"_applyShowValue"},throttleInterval:{check:"Number",init:250,apply:"_applyThrottleInterval"}},members:{__P_82_0:null,__P_82_1:null,_init:function(){var t=this;cv.ui.structure.tile.components.Slider.superclass.prototype._init.call(this);var e=this._element;e.hasAttribute("throttle-interval")?this.setThrottleInterval(parseInt(e.getAttribute("throttle-interval"))):this._applyThrottleInterval(this.getThrottleInterval());var r=e.querySelector(":scope > input");if(!r){(r=document.createElement("input")).classList.add("slider");r.setAttribute("type","range");e.insertBefore(r,e.querySelector(":scope > .up"));r.oninput=function(){return t.__P_82_0.call()}}this.__P_82_1=r;e.hasAttribute("step-width")&&this.setStepWidth(parseInt(e.getAttribute("step-width")));e.hasAttribute("min")&&this.setMin(parseInt(e.getAttribute("min")));e.hasAttribute("max")&&this.setMax(parseInt(e.getAttribute("max")));e.hasAttribute("hide-value")&&"true"===e.getAttribute("hide-value")?this.setShowValue(!1):this._applyShowValue(!0);var n=e.querySelector(":scope > .decrease");n&&n.addEventListener("click",(function(e){return t.onDecrease()}));var o=e.querySelector(":scope > .increase");o&&o.addEventListener("click",(function(e){return t.onIncrease()}))},_applyThrottleInterval:function(t){var e=this;this.__P_82_0=t>0?cv.util.Function.throttle(this.onInput,t,{trailing:!0},this):{call:function(){return e.onInput()},abort:function(){}}},_applyMin:function(t){this._element.querySelector(":scope > input").setAttribute("min",""+t)},_applyMax:function(t){this._element.querySelector(":scope > input").setAttribute("max",""+t)},_applyStepWidth:function(t){this._element.querySelector(":scope > input").setAttribute("step",""+t)},_applyShowValue:function(t){var e=this._element.querySelector(":scope > label.value");if(t&&!e){(e=document.createElement("label")).classList.add("value");e.classList.add("secondary");this._element.insertBefore(e,this._element.firstChild)}},_updateValue:function(t,e){var r=this._element.querySelector(":scope > input");r&&(r.value=e);if(this.isShowValue()){var n=this._element.querySelector(":scope > label.value");n&&(n.innerText=t)}},onInput:function(){this.__P_82_2(this.__P_82_1.value)},onDecrease:function(){var t=this.getValue()-this.getStepWidth();this.__P_82_2(t,"decrease")},onIncrease:function(){var t=this.getValue()+this.getStepWidth();this.__P_82_2(t,"increase")},__P_82_2:function(t,e){var r=new CustomEvent("sendState",{detail:{value:t,source:this}});this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||t.getAttribute("on")===e})).forEach((function(t){return t.dispatchEvent(r)}))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"slider",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Slider.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Spinner",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{stepWidth:{check:"Number",init:1},mode:{check:["relative","absolute"],init:"absolute"}},members:{_init:function(){var t=this;cv.ui.structure.tile.components.Spinner.superclass.prototype._init.call(this);var e=this._element;e.hasAttribute("step-width")&&this.setStepWidth(parseFloat(e.getAttribute("step-width")));e.hasAttribute("mode")&&this.setMode(e.getAttribute("mode"));var r=e.querySelector(":scope > .value");if(!r){(r=document.createElement("label")).classList.add("value");r.classList.add("primary");e.appendChild(r)}var n=document.createElement("div");n.classList.add("clickable");n.classList.add("left");var o=document.createElement("cv-icon");o.classList.add("ri-arrow-down-s-line");n.addEventListener("click",(function(){return t.onDecrease()}));n.appendChild(o);e.insertBefore(n,r);var i=document.createElement("div");i.classList.add("clickable");i.classList.add("right");var a=document.createElement("cv-icon");a.classList.add("ri-arrow-up-s-line");i.appendChild(a);i.addEventListener("click",(function(){return t.onIncrease()}));e.appendChild(i)},onDecrease:function(){var t="absolute"===this.getMode()?this.getValue()-this.getStepWidth():-1*this.getStepWidth();this.__P_83_0(t,"decrease")},onIncrease:function(){var t="absolute"===this.getMode()?this.getValue()+this.getStepWidth():this.getStepWidth();this.__P_83_0(t,"increase")},_updateValue:function(t){var e=this._element.querySelector(".value");e&&(e.innerHTML=t)},__P_83_0:function(t,e){var r=new CustomEvent("sendState",{detail:{value:t,source:this}});this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||t.getAttribute("on")===e})).forEach((function(t){return t.dispatchEvent(r)}))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"spinner",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Spinner.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{construct:!0,require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MResize":{require:!0},"qx.util.Function":{},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Value",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MResize],construct:function(t){cv.ui.structure.tile.components.AbstractComponent.constructor.call(this,t);this.addListener("changeVisible",this._applyVisible,this)},members:{_queuedOverflowDetection:null,_debouncedDetectOverflow:null,_init:function(){cv.ui.structure.tile.components.Value.superclass.prototype._init.call(this);this._debouncedDetectOverflow=qx.util.Function.debounce(this._detectOverflow,20);var t=this._element.querySelector(".value");if(t&&"label"===t.tagName.toLowerCase()){this.setResizeTarget(this._element);this.addListener("resized",this._debouncedDetectOverflow,this)}},_applyVisible:function(t){if(t.getData())this._queuedOverflowDetection&&this._debouncedDetectOverflow();else{var e=this._element.querySelector(".value");e&&e.classList.contains("scroll")&&e.classList.remove("scroll")}},_detectOverflow:function(){var t=this._element.querySelector(".value");if(this.isVisible()){this._queuedOverflowDetection=!1;t.clientWidth>t.parentElement.clientWidth?t.classList.add("scroll"):t.classList.remove("scroll")}else this._queuedOverflowDetection=!0},_updateValue:function(t,e){var r,n="",o=_createForOfIteratorHelper(this._element.querySelectorAll(".value"));try{for(o.s();!(r=o.n()).done;){var i=r.value;switch(i.tagName.toLowerCase()){case"cv-icon":i._instance.setId(t);this._element.hasAttribute("styling")&&(n=cv.Application.structureController.styleValue(this._element.getAttribute("styling"),e,this.__P_84_0));i._instance.setStyleClass(n);break;case"meter":i.setAttribute("value",e);break;case"cv-round-progress":"string"==typeof e&&(e=parseInt(e));i._instance.setProgress(e);i._instance.setText(""+t);break;case"label":i.innerHTML=t;this._debouncedDetectOverflow()}}}catch(t){o.e(t)}finally{o.f()}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"value",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Value.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.io.BackendConnections":{},"cv.data.Model":{},"cv.Config":{},"qx.log.Logger":{},"qx.locale.Manager":{},"cv.core.notifications.Router":{},"cv.TemplateEngine":{},"qx.event.message.Bus":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Backend",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{_name:null,__P_86_0:null,_init:function(){var t=this,e=this._element,r=e.getAttribute("type");if(r&&r.startsWith("class:")){var n=r.split(":").pop();if(!cv.io.BackendConnections.isRegistered(n)){cv.io.BackendConnections.addClassLoadedListener(n,(function(){t._init()}));return}r=n}var o,i=e.hasAttribute("uri")?e.getAttribute("uri"):"";if(i)try{o=new URL(i,window.location.origin+window.location.pathname)}catch(t){this.error("Error parsing uri: "+i)}if(r){var a=null;e.hasAttribute("username")?a={username:e.getAttribute("username"),password:e.getAttribute("password")||""}:o&&o.username&&(a={username:o.username,password:o.password});var s,c=cv.data.Model.getInstance(),u=o?o.toString():null;switch(r){case"knxd":s="backendKnxdUrl";break;case"openhab":s="backendOpenHABUrl";break;case"mqtt":s="backendMQTTUrl"}s&&(cv.Config.URL[s]?u=cv.Config.URL[s]:!u&&cv.Config.server[s]&&(u=cv.Config.server[s]));var l=r;if(e.hasAttribute("name"))l=e.getAttribute("name");else if(cv.io.BackendConnections.hasClient("main")){if("config"===cv.io.BackendConnections.getClient("main").configuredIn){qx.log.Logger.warn(this,'there is already a backend registered with name "main" and type '.concat(r," skipping this one"));return}}else l="main";qx.log.Logger.debug(this,"init backend",l);if(cv.io.BackendConnections.hasClient(l)){var f={topic:"cv.config.error",title:qx.locale.Manager.tr("Config error"),message:qx.locale.Manager.tr('There already exists a backend named: "%1"',l),severity:"urgent",unique:!0,deletable:!0};cv.core.notifications.Router.dispatchMessage(f.topic,f);return}var p=cv.io.BackendConnections.addBackendClient(l,r,u,"config");this._client=p;this._name=l;this.__P_86_0=[];p.update=function(t){return c.updateFrom(l,t)};var d,h=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-resource"));try{for(h.s();!(d=h.n()).done;){var _=d.value;p.setResourcePath(_.getAttribute("name"),_.textContent.trim())}}catch(t){h.e(t)}finally{h.f()}p.login(!0,a,(function(){t.debug(l,"connected");e.hasAttribute("default")&&"true"===e.getAttribute("default")&&c.setDefaultBackendName(l);var r=function(){var e,r=_createForOfIteratorHelper(t.__P_86_0);try{for(r.s();!(e=r.n()).done;){var n=_slicedToArray(e.value,2),o=n[0],i=n[1];t.debug(l,"apply update",o,i);c.onUpdate(o,i,l)}}catch(t){r.e(t)}finally{r.f()}var a=c.getAddresses(l);t.debug(l,"subscribing to",a.length,"addresses");0!==a.length&&p.subscribe(a)};cv.TemplateEngine.getInstance().isDomFinished()?r():qx.event.message.Bus.subscribe("setup.dom.finished",(function(){r()}),t)}))}else this.error("<cv-backend> must have a type attribute")},_disconnected:function(){if(this._client){var t=cv.data.Model.getInstance();this._element.hasAttribute("default")&&"true"===this._element.getAttribute("default")&&t.resetDefaultBackendName();this._client.terminate();cv.io.BackendConnections.removeClient(this._client);this._client.dispose();this._client=null}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"backend",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Backend.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"qx.io.request.Xhr":{},"cv.Config":{},"cv.Application":{},"qx.util.Request":{},"qx.locale.Manager":{},"cv.core.notifications.Router":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Loader",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{_init:function(){var t,e=this._element,r=e.getAttribute("type"),n=e.getAttribute("src");if(n){switch(r){case"css":(t=document.createElement("link")).setAttribute("type","text/css");t.setAttribute("rel","stylesheet");t.setAttribute("href",n);break;case"js":(t=document.createElement("script")).setAttribute("type","text/javascript");t.setAttribute("src",n);break;case"templates":this.loadXml(n,r)}t&&e.appendChild(t)}},loadXml:function(t){var e=this,r=new qx.io.request.Xhr(t);r.set({accept:"application/xml",cache:!cv.Config.forceReload});r.addListenerOnce("success",(function(t){var e,r=t.getTarget().getResponse(),n=r,o=cv.Application.structureController.getRenderTarget();if(!n.documentElement.xmlns){var i=t.getTarget().getResponseText();i=i.replace("<templates",'<templates xmlns="http://www.w3.org/1999/xhtml"');n=(new DOMParser).parseFromString(i,"text/xml")}for(;e=n.documentElement.firstElementChild;)o.appendChild(e);cv.Application.structureController.registerTemplates(r)}));r.addListener("statusError",(function(t){var n=t.getTarget().getTransport().status;qx.util.Request.isSuccessful(n)?e.handleError(n,null):e.handleError("filenotfound",r.getUrl())}));r.send()},handleError:function(t,e){var r,n=qx.locale.Manager.tr("File Error!").translate().toString(),o="";switch(t){case"parsererror":o=qx.locale.Manager.tr("Invalid XML file!");break;case"filenotfound":o=qx.locale.Manager.tr("404: File not found, %1.",e).translate().toString();break;default:o=qx.locale.Manager.tr('Unhandled error of type "%1"',t).translate().toString();o+=e?": "+e:"."}var i={topic:"cv.error",title:n,message:o};r;cv.core.notifications.Router.dispatchMessage(i.topic,i);this.error(this,o.toString())}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"loader",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Loader.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{construct:!0,require:!0},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Mapping",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,construct:function(t){cv.ui.structure.tile.elements.AbstractCustomElement.constructor.call(this,t);this.__P_87_0={}},members:{__P_87_0:null,_applyConnected:function(t,e,r){cv.ui.structure.tile.elements.Mapping.superclass.prototype._applyConnected.call(this,t,e,r);this._element.tagName.toLowerCase().endsWith("mapping")&&(t?cv.Application.structureController.addMapping(this._element.getAttribute("name"),this):cv.Application.structureController.removeMapping(this._element.getAttribute("name")))},mapValue:function(t,e,r){var n=this;if(Object.prototype.hasOwnProperty.call(this.__P_87_0,t))return this.__P_87_0[t];var o=""+t,i=this._element.querySelector(':scope > entry[value="'+t+'"]'),a=this._element.hasAttribute("type")?this._element.getAttribute("type"):"string";if(i){o=this._convert(i.innerHTML.trim(),a);this.__P_87_0[t]=o;return o}var s=this._element.querySelector(":scope > formula");if(s){if(!s._formula){var c=s.textContent;s._formula=new Function("x","store","params","let y;"+c+"; return y;")}return o=this._convert(s._formula(t,e,r),a)}var u=this._element.querySelectorAll(":scope > entry"),l=null;Array.from(u).some((function(e){var r=!1,i=e.hasAttribute("default")&&"true"===e.getAttribute("default");if(e.hasAttribute("value")){var s=e.getAttribute("value");if(s===(t||"NULL")||"*"===s){o=n._convert(e.innerHTML.trim(),a);r=!0}i&&(l=n._convert(s,a))}else if(e.hasAttribute("range-min")){var c=parseFloat(e.getAttribute("range-min")),u=e.hasAttribute("range-max")?parseFloat(e.getAttribute("range-max")):Number.POSITIVE_INFINITY,f=parseFloat(t);if(c<=f&&f<=u){o=n._convert(e.innerHTML.trim(),a);r=!0}i&&(l=c)}return r}))||null===l||(o=this.mapValue(l));this.__P_87_0[t]=o;return o},_convert:function(t,e){switch(e.toLowerCase()){case"boolean":return"true"===t;case"integer":return parseInt(t);case"float":return parseFloat(t);default:return t}}},destruct:function(){this.__P_87_0=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"mapping",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Mapping.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();a=t.done;return t},e:function(t){s=!0;i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.core.notifications.Router":{},"cv.ui.NotificationCenter":{},"cv.data.Model":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.StateNotification",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{_init:function(){var t={},e=this._element,r=cv.core.notifications.Router.getTarget(e.getAttribute("target"))||cv.ui.NotificationCenter.getInstance(),n=e.querySelector("cv-addresses"),o={target:r,severity:e.getAttribute("severity"),skipInitial:"false"!==e.getAttribute("skip-initial"),deletable:"false"!==e.getAttribute("deletable"),unique:"true"===e.getAttribute("unique"),valueMapping:n.getAttribute("value-mapping"),addressMapping:n.getAttribute("address-mapping"),enabled:!e.hasAttribute("enabled")||"true"===e.getAttribute("enabled")};if(e.hasAttribute("id")){o.id=e.getAttribute("id");var i=cv.data.Model.getInstance();i.addUpdateListener("notification:".concat(o.id,":enabled"),this._onStateUpdate,this,"system");i.addUpdateListener("notification:".concat(o.id,":severity"),this._onStateUpdate,this,"system");i.onUpdate("notification:".concat(o.id,":enabled"),o.enabled,"system");i.onUpdate("notification:".concat(o.id,":severity"),o.severity,"system")}var a=e.getAttribute("name");a&&(o.topic="cv.state."+a);var s=e.getAttribute("icon");if(s){o.icon=s;var c=e.getAttribute("icon-classes");c&&(o.iconClasses=c)}var u=e.querySelector("cv-title-template");u&&(o.titleTemplate=u.innerHTML);var l=e.querySelector("cv-message-template");l&&(o.messageTemplate=l.innerHTML);var f,p=e.querySelector("cv-condition").textContent;"true"===p?p=!0:"false"===p&&(p=!1);o.condition=p;var d,h=_createForOfIteratorHelper(n.querySelectorAll(":scope > cv-address"));try{for(h.s();!(d=h.n()).done;){var _=d.value;f=_.textContent.trim();Object.prototype.hasOwnProperty.call(t,f)||(t[f]=[]);var y=Object.assign({},o),m=3;switch(_.getAttribute("mode")){case"disable":m=0;break;case"read":m=1;break;case"write":m=2;break;case"readwrite":m=3}y.addressConfig={transform:_.getAttribute("transform"),mode:m,selector:_.getAttribute("selector"),ignoreError:"true"===_.getAttribute("ignore-error"),qos:0|(_.getAttribute("qos")||0),retain:"true"===_.getAttribute("retain"),variantInfo:_.getAttribute("variant")};t[f].push(y)}}catch(t){h.e(t)}finally{h.f()}cv.core.notifications.Router.getInstance().registerStateUpdateHandler(t)},_onStateUpdate:function(t,e,r,n){var o=t.split(":"),i=_slicedToArray(o,3),a=i[1],s=i[2],c=cv.core.notifications.Router.getInstance();"enabled"===s?c.enableStateUpdateHandler(a,1==e):"severity"===s&&c.changeStateUpdateHandlerSeverity(a,e)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"state-notification",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.StateNotification.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.Mapping":{require:!0},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Styling",{extend:cv.ui.structure.tile.elements.Mapping,members:{_applyConnected:function(t,e,r){cv.ui.structure.tile.elements.Styling.superclass.prototype._applyConnected.call(this,t,e,r);t?cv.Application.structureController.addStyling(this._element.getAttribute("name"),this):cv.Application.structureController.removeStyling(this._element.getAttribute("name"))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"styling",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Styling.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"qx.event.Registration":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Group",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{_init:function(){cv.ui.structure.tile.widgets.Group.superclass.prototype._init.call(this);var t=this._element,e=null,r=null;if(t.hasAttribute("name")||t.hasAttribute("icon")){if(!(r=t.querySelector(":scope > summary"))){r=document.createElement("summary");t.insertBefore(r,t.firstChild)}if(t.hasAttribute("name")){if(!(e=t.querySelector(":scope > summary > label.title"))){(e=document.createElement("label")).classList.add("title");r.insertBefore(e,r.firstChild)}e.classList.add("last-of-title");e.textContent=t.getAttribute("name")}if(t.hasAttribute("icon")){var n=t.querySelector(":scope > summary > cv-icon.title");if(!n){(n=document.createElement("cv-icon")).classList.add("title");r.insertBefore(n,r.firstChild)}e||n.classList.add("last-of-title");n.classList.add(t.getAttribute("icon"))}}!t.querySelector(":scope > *:not(summary)")?t.classList.add("empty"):r&&qx.event.Registration.addListener(r,"click",this._toggleOpen,this)},_toggleOpen:function(){this._element.hasAttribute("open")?this._element.removeAttribute("open"):this._element.setAttribute("open","true")},onStateUpdate:function(t){if(!cv.ui.structure.tile.widgets.Group.superclass.prototype.onStateUpdate.call(this,t))if("summary"===t.detail.target){var e=this._element.querySelector(":scope > summary > label.value");if(!e){(e=document.createElement("label")).classList.add("value");this._element.querySelector(":scope > summary").appendChild(e)}e.textContent=t.detail.state}else this.debug("unhandled address target",t.detail.target)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"group",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.Group.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(r,t)};return _wrapNativeSuper(t)}function _construct(t,e,r){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));r&&_setPrototypeOf(o,r.prototype);return o};return _construct.apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.core.Environment":{defer:"load",require:!0},"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"qx.bom.client.Browser":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}},environment:{provided:[],required:{"browser.name":{className:"qx.bom.client.Browser"}}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Page",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{visibility:{refine:!0,init:"excluded"}},members:{_supportsContentVisibility:null,_visibleDisplayMode:null,_init:function(){var t=qx.core.Environment.get("browser.name");if(t.includes("firefox")||t.includes("safari")){this._element.classList.add("no-content-visibility");this._supportsContentVisibility=!1}else this._supportsContentVisibility=!0},_applyVisibility:function(t){switch(t){case"visible":this._supportsContentVisibility?this._element.style.contentVisibility="visible":this._visibleDisplayMode&&(this._element.style.display=this._visibleDisplayMode||"initial");break;case"hidden":case"excluded":if(this._supportsContentVisibility)this._element.style.contentVisibility="hidden";else{this._visibleDisplayMode=getComputedStyle(this._element).getPropertyValue("display");this._element.style.display="none"}}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"page",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector));customElements.define(cv.ui.structure.tile.Controller.PREFIX+"row",function(t){"use strict";_inherits(r,t);var e=_createSuper(r);function r(){var t;_classCallCheck(this,r);(t=e.call(this)).hasAttribute("colspan")&&t.classList.add("colspan-"+t.getAttribute("colspan"));t.hasAttribute("rowspan")&&t.classList.add("rowspan-"+t.getAttribute("rowspan"));return t}return _createClass(r)}(_wrapNativeSuper(HTMLElement)))}});cv.ui.structure.tile.widgets.Page.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MPopup":{require:!0},"qx.event.Timer":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Popup",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MPopup,statics:{openedPopups:[]},members:{_closeButton:null,_init:function(){var t=this;cv.ui.structure.tile.widgets.Popup.superclass.prototype._init.call(this);var e=this._element;if(!e.hasAttribute("closeable")||"true"===e.getAttribute("closeable")){this._closeButton=document.createElement("button");this._closeButton.classList.add("close");var r=document.createElement("i");r.classList.add("ri-close-line");this._closeButton.appendChild(r);e.insertBefore(this._closeButton,e.firstChild);this._closeButton.addEventListener("click",(function(){return t.close()}))}e.addEventListener("close",(function(e){t.close()}));if(e.hasAttribute("title")){var n=document.createElement("header");e.insertBefore(n,e.firstChild);var o=document.createElement("h2");o.textContent=e.getAttribute("title");n.appendChild(o)}if(e.hasAttribute("auto-close-timeout")){var i=parseInt(e.getAttribute("auto-close-timeout"));if(isNaN(i))this.error("invalid auto-close-timeout value:",e.getAttribute("auto-close-timeout"));else{this._autoCloseTimer=new qx.event.Timer(1e3*i);this._autoCloseTimer.addListener("interval",(function(){t._autoCloseTimer.stop();t.close()}))}}},open:function(){var t=this._element;if(!t.hasAttribute("open")){t.setAttribute("open","");t.hasAttribute("modal")&&"true"===t.getAttribute("modal")&&this.registerModalPopup();this._autoCloseTimer&&this._autoCloseTimer.start()}},close:function(){var t=this._element;if(t){t.removeAttribute("open");t.hasAttribute("modal")&&"true"===t.getAttribute("modal")&&this.unregisterModalPopup();this._autoCloseTimer&&this._autoCloseTimer.stop();t.dispatchEvent(new CustomEvent("closed"))}},onStateUpdate:function(t){if(!cv.ui.structure.tile.widgets.Popup.superclass.prototype.onStateUpdate.call(this,t))switch(t.detail.target){case"open":t.detail.state&&this.open();break;case"open-close":t.detail.state?this.open():this.close();break;case"close":t.detail.state||this.close();break;default:this.debug("unhandled address target",t.detail.target)}}},destruct:function(){this._disposeObjects("_autoCloseTimer");if(this._closeButton){this._closeButton.remove();this._closeButton=null}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"popup",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.Popup.$$dbClassInfo=t}();function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MPopup":{require:!0},"qx.util.format.DateFormat":{},"qx.locale.Date":{},"qx.event.Timer":{},"qx.util.TimerManager":{},"qx.locale.Manager":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Tile",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MPopup,properties:{backgroundImage:{check:"String",nullable:!0,apply:"_applyBackgroundImage"},popup:{check:"Boolean",init:!1,apply:"_applyPopup"},outdated:{check:"Boolean",init:!1,apply:"_applyOutdated"},checkOutdated:{check:"Boolean",init:!1,apply:"_applyCheckOutdated"},outdatedMessage:{check:"String",nullable:!0,apply:"_applyOutdatedMessage"}},events:{fullscreenChanged:"qx.event.type.Data"},members:{_fullScreenMode:null,_dateFormat:null,_checkOutdatedTimerId:null,_lastUpdate:null,_maxAge:null,_hideTimer:null,_init:function(){var t=this;cv.ui.structure.tile.widgets.Tile.superclass.prototype._init.call(this);this._dateFormat=new qx.util.format.DateFormat(qx.locale.Date.getDateFormat("medium")+" "+qx.locale.Date.getTimeFormat("medium"));this._initPopupChild();this._element.hasAttribute("background-image")&&this.setBackgroundImage(this._element.getAttribute("background-image"));this._childPopup&&this._childPopup.addEventListener("closed",(function(){t.resetPopup()}));this._element.querySelector(":scope > label.title")&&this._element.classList.add("has-title");this._hideTimer=new qx.event.Timer(5e3);this._hideTimer.addListener("interval",(function(){var e=t._element.querySelector(":scope > .outdated-value");"none"!==e.style.display&&(e.style.display="none");t._hideTimer.stop()}))},_applyBackgroundImage:function(t){if(t){this._element.style.backgroundImage="url(".concat(t,")");var e=this._element.querySelector(":scope > div.overlay");if(!e){(e=document.createElement("div")).classList.add("overlay");this._element.insertBefore(e,this._element.firstChild)}this._element.classList.add("has-bg-image")}else{this._element.style.backgroundImage="";this._element.classList.remove("has-bg-image")}},_applyOutdated:function(t){var e=this,r=this._element.querySelector(":scope > .outdated");if(t){this._element.classList.add("outdated");if(!r){(r=document.createElement("div")).classList.add("outdated");r.textContent="!";this._element.insertBefore(r,this._element.firstElementChild);r.addEventListener("pointerdown",(function(t){t.stopImmediatePropagation()}));r.addEventListener("click",(function(t){var n=e._element.querySelector(":scope > .outdated-value");if(n)n.style.display="block";else{(n=document.createElement("div")).classList.add("outdated-value");n.textContent=e.getOutdatedMessage();e._element.appendChild(n);e._element.insertBefore(n,r.nextElementSibling);n.addEventListener("pointerdown",(function(t){t.stopImmediatePropagation();n.style.display="none"}))}e._hideTimer.start()}))}r.style.display="block"}else{this._element.classList.remove("outdated");r&&(r.style.display="none")}},_applyOutdatedMessage:function(t){this._element.setAttribute("title",t);var e=this._element.querySelector(":scope > .outdated-value");e&&(e.textContent=t)},_applyCheckOutdated:function(t){var e=qx.util.TimerManager.getInstance();if(t)this._checkOutdatedTimerId=e.start(this.checkOutdated,5e3,this);else if(this._checkOutdatedTimerId){e.stop(this._checkOutdatedTimerId);this._checkOutdatedTimerId=null}},checkOutdated:function(){if(this._lastUpdate instanceof Date)if(isNaN(this._lastUpdate.getTime())){this.setOutdated(!0);this.setOutdatedMessage(qx.locale.Manager.tr("Last update: unknown"))}else{var t=Math.floor((Date.now()-this._lastUpdate.getTime())/1e3);this.setOutdated(t>this._maxAge);this.setOutdatedMessage(qx.locale.Manager.tr("Last update: %1",this._dateFormat.format(this._lastUpdate)))}else if("-"===this._lastUpdate){this.setOutdated(!0);this.setOutdatedMessage(qx.locale.Manager.tr("Last update: unknown"))}else{this.error("last-update value must be a Date object, but is of type:",_typeof(this._lastUpdate),this._lastUpdate);this.resetOutdatedMessage()}},open:function(){var t=this;if(this._childPopup)this._openPopupChild();else if(this._headerFooterParent){var e=this._headerFooterParent,r=e.querySelector(":scope > button.close");if(!r){(r=document.createElement("button")).classList.add("close");var n=document.createElement("i");n.classList.add("ri-close-line");r.appendChild(n);e.appendChild(r);r.addEventListener("click",(function(){return t.setPopup(!1)}))}r.style.display="block";e.classList.add("popup");if(this._fullScreenMode){e.classList.add("fullscreen");this.fireDataEvent("fullscreenChanged",!0)}this.registerModalPopup()}},close:function(t){t||this.setPopup(!1);if(this._childPopup)this._closePopupChild();else if(this._headerFooterParent){this._headerFooterParent.classList.remove("popup");if(this._fullScreenMode){this._headerFooterParent.classList.remove("fullscreen");this.fireDataEvent("fullscreenChanged",!0)}var e=this._headerFooterParent.querySelector(":scope > button.close");e&&(e.style.display="none");this.unregisterModalPopup()}this._autoCloseTimer&&this._autoCloseTimer.stop();this.fireEvent("closed")},_applyPopup:function(t){t?this.open():this.close(!0)},onStateUpdate:function(t){if(!cv.ui.structure.tile.widgets.Tile.superclass.prototype.onStateUpdate.call(this,t))switch(t.detail.target){case"background-image":this.setBackgroundImage(t.detail.state);break;case"popup":case"fullscreen-popup":this._fullScreenMode="fullscreen-popup"===t.detail.target;if(t.detail.addressValue){if(t.detail.addressValue==t.detail.state){this.setPopup(!0);if(!this._autoCloseTimer){this._autoCloseTimer=new qx.event.Timer(18e4);this._autoCloseTimer.addListener("interval",this.close,this)}this._autoCloseTimer.restart()}}else this.setPopup(1==t.detail.state);break;case"last-update":this._maxAge=t.detail.targetConfig&&t.detail.targetConfig.length>0?parseInt(t.detail.targetConfig.shift()):Number.POSITIVE_INFINITY;this._lastUpdate=t.detail.state;this.checkOutdated();break;default:this.debug("unhandled address target",t.detail.target)}},destruct:function(){this._disposeObjects("_dateFormat");if(this._checkOutdatedTimerId){qx.util.TimerManager.getInstance().stop(this._checkOutdatedTimerId);this._checkOutdatedTimerId=null}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"tile",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.Tile.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.WidgetPair",{extend:cv.ui.structure.tile.components.AbstractComponent,defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"widget-pair",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.WidgetPair.$$dbClassInfo=t}();qx.$$packageData[2]={locales:{},resources:{},translations:{en:{},de:{previous:"zurck",next:"vor","Communication error":"Kommunikationsfehler","URL: %1<br/><br/>Response:</br>%2":"URL: %1<br/><br/>Antwort:</br>%2",Hour:"Stunde",Day:"Tag",Week:"Woche",Month:"Monat",Year:"Jahr",today:"heute",yesterday:"gestern","CW %1":"KW %1","Config error":"Konfigurationsfehler",'There already exists a backend named: "%1"':'Es existiert bereits ein Backend mit dem Namen: "%1"',"File Error!":"Dateifehler!","Invalid XML file!":"Ungltige XML Datei!","404: File not found, %1.":"404: Datei nicht gefunden, %1.",'Unhandled error of type "%1"':'Unbekannter Fehler vom Typ "%1"',"Last update: %1":"Letzte Aktualisierung: %1"}}};
//# sourceMappingURL=package-2.js.map