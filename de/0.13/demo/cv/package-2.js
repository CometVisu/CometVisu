function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(r,t)};return _wrapNativeSuper(t)}function _construct(t,e,r){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));r&&_setPrototypeOf(o,r.prototype);return o};return _construct.apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,s=Object.create(i.prototype),a=new S(o||[]);return n(s,"_invoke",{value:P(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};c(h,i,(function(){return this}));var _=Object.getPrototypeOf,m=_&&_(_(A([])));m&&m!==e&&r.call(m,i)&&(h=m);var v=y.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,s,a){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=w(s,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(v,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,s,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function asyncGeneratorStep(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){r(t);return}a.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){asyncGeneratorStep(i,n,o,s,a,"next",t)}function a(t){asyncGeneratorStep(i,n,o,s,a,"throw",t)}s(void 0)}))}}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{construct:!0,require:!0},"cv.ui.structure.IController":{require:!0},"qx.bom.Stylesheet":{construct:!0},"qx.util.ResourceManager":{construct:!0},"cv.Config":{construct:!0},"qx.log.Logger":{defer:"runtime"},"qx.bom.History":{},"qx.event.message.Bus":{},"cv.io.BackendConnections":{},"qx.io.request.Xhr":{},"cv.TemplateEngine":{},"qx.util.Request":{},"cv.data.Model":{},"qx.locale.Manager":{},"cv.Application":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.Controller",{extend:qx.core.Object,type:"singleton",implement:cv.ui.structure.IController,construct:function(){qx.core.Object.constructor.call(this);this.__P_72_0="";qx.bom.Stylesheet.includeFile(qx.util.ResourceManager.getInstance().toUri("designs/tile-globals.scss").replace(".scss",".css")+(!0===cv.Config.forceReload?"?"+Date.now():""))},statics:{PREFIX:"cv-",__P_72_1:{},__P_72_2:{},MAPPING_PARAM_REGEX:/^(.+)\(([^)]+)\)$/,register:function(t,e){this.__P_72_1[t]=e},onComponentCreated:function(t){var e=t.tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(this,e)){var r=this.__P_72_1[e];Object.prototype.hasOwnProperty.call(this,e)||(this.__P_72_2[e]=[]);this.__P_72_2[e].push(new r(t))}else qx.log.Logger.error(this,"no QxClass registered for custom element "+e)}},properties:{renderTarget:{check:"Element",init:document.body},namespace:{check:"String",init:""}},members:{__P_72_0:null,__P_72_3:null,__P_72_4:null,getHtmlStructure:function(){return this.__P_72_0},supports:function(t,e){return!1},initLayout:function(){},__P_72_5:function(){document.location.hash?this.scrollToPage(document.location.hash.substring(1)):this.scrollToPage(this.getInitialPageId())},onHistoryRequest:function(t){t&&this.scrollToPage(t)},scrollToPage:function(t,e){if(t){var r=document.querySelector("#"+t);if(r){if(!r.classList.contains("active")){var n,o=_createForOfIteratorHelper(document.querySelectorAll("cv-page.active"));try{for(o.s();!(n=o.n()).done;){n.value.classList.remove("active")}}catch(t){o.e(t)}finally{o.f()}var i,s=_createForOfIteratorHelper(document.querySelectorAll("cv-page.sub-active"));try{for(s.s();!(i=s.n()).done;){i.value.classList.remove("sub-active")}}catch(t){s.e(t)}finally{s.f()}r.classList.add("active");for(var a=r.parentElement;a&&"main"!==a.nodeName.toLowerCase();){"cv-page"===a.nodeName.toLowerCase()&&a.classList.add("sub-active");a=a.parentElement}if(void 0===e){var c=r.getAttribute("name"),u="CometVisu";c&&(u=c+" - "+u);qx.bom.History.getInstance().addToHistory(t,u)}qx.event.message.Bus.dispatchByName("cv.ui.structure.tile.currentPage",r)}}else this.warn("no page with id",t,"found")}},parseBackendSettings:function(t){var e=this;if(0===t.querySelectorAll("cv-backend").length){cv.io.BackendConnections.initBackendClient().login(!0,cv.Config.configSettings.credentials,(function(){e.debug("logged in");cv.io.BackendConnections.startInitialRequest()}))}return!1},parseSettings:function(t){var e=this;document.body.classList.add("loading-structure");var r=cv.Config.configSettings,n=t.documentElement;r.bindClickToWidget="true"===n.getAttribute("bind_click_to_widget");this.translate(t);if(!cv.Config.cacheUsed){var o=qx.util.ResourceManager.getInstance().toUri("structures/tile/templates.xml"),i=new qx.io.request.Xhr(o);i.set({accept:"application/xml",cache:!cv.Config.forceReload});i.addListenerOnce("success",(function(t){var r,o=t.getTarget().getResponse(),i=e.getRenderTarget();e.debug("creating pages");e.registerTemplates(o);if(!o.documentElement.xmlns){var s=t.getTarget().getResponseText();s=s.replace("<templates",'<templates xmlns="http://www.w3.org/1999/xhtml"');o=(new DOMParser).parseFromString(s,"text/xml")}for(;r=o.documentElement.firstElementChild;)i.appendChild(r);for(;r=n.firstElementChild;)i.appendChild(r);document.body.classList.remove("loading-structure");e.debug("finalizing");qx.event.message.Bus.dispatchByName("setup.dom.append");e.debug("pages created");e.__P_72_5();e.debug("setup.dom.finished");qx.event.message.Bus.dispatchByName("setup.dom.finished.before");cv.TemplateEngine.getInstance().setDomFinished(!0)}));i.addListener("statusError",(function(t){var r=t.getTarget().getTransport().status;qx.util.Request.isSuccessful(r)||e.error("filenotfound",o);document.body.classList.remove("loading-structure")}));i.send()}},registerTemplates:function(t){t.querySelectorAll("templates[structure='tile'] > template").forEach((function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+t.getAttribute("id"),function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t.getAttribute("id"))}return _createClass(n)}(e))}))},preParse:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n,o;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.documentElement.hasAttribute("theme")){n=t.documentElement.getAttribute("theme");o={};if("system"===n)if(window.matchMedia){n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.documentElement.setAttribute("data-theme",n);o.theme=n;cv.data.Model.getInstance().updateFrom("system",o);window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){document.documentElement.setAttribute("data-theme",t.matches?"dark":"light");o.theme=t.matches?"dark":"light";cv.data.Model.getInstance().updateFrom("system",o)}))}else e.error("system theme detection not possible in this browser");else{document.documentElement.setAttribute("data-theme",n);o.theme=n;cv.data.Model.getInstance().updateFrom("system",o)}}return r.abrupt("return",!0);case 2:case"end":return r.stop()}}),r)})))()},createUI:function(t){},translate:function(t){for(var e=0,r=["name","label"];e<r.length;e++){var n,o=r[e],i=_createForOfIteratorHelper(t.querySelectorAll("*[".concat(o,'^="tr("]')));try{for(i.s();!(n=i.n()).done;){var s=n.value,a=/^tr\('([^']+)'\)$/.exec(s.getAttribute(o));if(a){var c=a[1],u=t.querySelector('cv-translations > language[name="'.concat(qx.locale.Manager.getInstance().getLanguage(),"\"] > tr[key='").concat(c,"']"));if(u)s.setAttribute(o,u.textContent.trim());else{s.setAttribute(o,c);this.warn("[".concat(qx.locale.Manager.getInstance().getLanguage(),'] no translation found for: "').concat(c,'"'))}}else this.warn("attribute content no valid translation string",s.getAttribute(o))}}catch(t){i.e(t)}finally{i.f()}}var l,f=_createForOfIteratorHelper(t.querySelectorAll('*[tr="true"]'));try{for(f.s();!(l=f.n()).done;){var p=l.value,d=p.textContent.trim(),y=t.querySelector('cv-translations > language[name="'.concat(qx.locale.Manager.getInstance().getLanguage(),"\"] > tr[key='").concat(d,"']"));y?p.textContent=y.textContent.trim():this.warn("[".concat(qx.locale.Manager.getInstance().getLanguage(),'] no translation found for: "').concat(d,'"'))}}catch(t){f.e(t)}finally{f.f()}},doScreenSave:function(){cv.Config.configSettings.screensave_page&&this.scrollToPage(cv.Config.configSettings.screensave_page)},getInitialAddresses:function(){return[]},getInitialPageId:function(){var t=document.querySelector("cv-page");return t?t.id:""},addMapping:function(t,e){this.__P_72_3||(this.__P_72_3={});this.__P_72_3[t]=e},removeMapping:function(t){this.__P_72_3&&delete this.__P_72_3[t]},mapValue:function(t,e,r){var n,o=[];if(null!==(n=cv.ui.structure.tile.Controller.MAPPING_PARAM_REGEX.exec(t))){try{o=JSON.parse("[".concat(n[2].replaceAll("'",'"'),"]"))}catch(e){this.error("error parsing parameters from "+t)}t=n[1]}return this.__P_72_3&&Object.prototype.hasOwnProperty.call(this.__P_72_3,t)?this.__P_72_3[t].mapValue(e,r,o):e},addStyling:function(t,e){this.__P_72_4||(this.__P_72_4={});this.__P_72_4[t]=e},removeStyling:function(t){this.__P_72_4&&delete this.__P_72_4[t]},styleValue:function(t,e,r){return this.__P_72_4&&Object.prototype.hasOwnProperty.call(this.__P_72_4,t)?this.__P_72_4[t].mapValue(e,r):e},parseLabel:function(){return""}},defer:function(t){window.cvTestMode||(cv.Application.structureController=t.getInstance())}});var e=function(t){"use strict";_inherits(r,t);var e=_createSuper(r);function r(t){var n;_classCallCheck(this,r);n=e.call(this);var o=cv.ui.structure.tile.Controller.getInstance(),i=document.getElementById(t);if(i){var s,a=["name","replaces","parent-scope"],c=i.content.cloneNode(!0),u=_createForOfIteratorHelper(c.querySelectorAll("slot"));try{var l=function(){for(var e=s.value,r=e.getAttribute("name"),i=e.hasAttribute("replaces")?e.getAttribute("replaces"):"",u=e.hasAttribute("parent-scope")?parseInt(e.getAttribute("parent-scope")):0,l=n.querySelectorAll("[slot='".concat(r,"']")),f={},p=0,d=e.attributes.length;p<d;p++)a.includes(e.attributes[p].name)||(f[e.attributes[p].name]=e.attributes[p].value);if(l.length>0){Array.from(l).forEach((function(r){var n=r.cloneNode(!0);Object.keys(f).forEach((function(e){n.hasAttribute(e)?"class"===e?n.classList.add(f[e]):qx.log.Logger.debug(o,"["+t+"] attribute",e,"already set, skipping"):n.setAttribute(e,f[e])}));n.removeAttribute("slot");e.parentNode.insertBefore(n,e)}));e.remove();i&&c.querySelectorAll(i).forEach((function(t){t.remove()}))}else{qx.log.Logger.debug(o,"["+t+"] no content for slot",r," removing");var y=e.parentNode;if(u>0){for(var h=u-1;h>0;){y=y.parentNode;h--}y&&y.remove()}else{e.remove();0===y.children.length&&y.remove()}}};for(u.s();!(s=u.n()).done;)l()}catch(t){u.e(t)}finally{u.f()}n.getAttributeNames().forEach((function(t){var e=n.getAttribute(t),r=c.querySelectorAll("[slot-"+t+"]"),o=t;t.endsWith("-mapping")?o="mapping":t.endsWith("-styling")?o="styling":t.endsWith("-format")&&(o="format");r.forEach((function(r){if(o!==t&&r.hasAttribute("slot-"+t)){r.setAttribute(t,e||r.getAttribute("slot-"+t));r.removeAttribute("slot-"+t)}else{r.setAttribute(o,e||r.getAttribute("slot-"+o));r.removeAttribute("slot-"+o)}}));r.length>0&&n.removeAttribute(t)}));c.querySelectorAll("*").forEach((function(t){_toConsumableArray(t.attributes).forEach((function(e){if(e.name.startsWith("slot-")){var r=e.name.substring(5);e.name.endsWith("-mapping")&&t.hasAttribute("slot-mapping")?r="mapping":e.name.endsWith("-styling")&&t.hasAttribute("slot-styling")?r="styling":e.name.endsWith("-format")&&t.hasAttribute("slot-format")&&(r="format");e.value&&t.setAttribute(r,e.value);t.removeAttribute(e.name)}}))}));n.innerHTML="";n.appendChild(c)}else qx.log.Logger.error(o,"["+t+"] no template found for id",t);return n}return _createClass(r)}(_wrapNativeSuper(HTMLElement));cv.ui.structure.tile.Controller.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0},"qx.event.Registration":{},"cv.util.Tree":{}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MPopup",{statics:{openedPopups:[]},events:{closed:"qx.event.type.Event"},members:{_childPopup:null,_initPopupChild:function(){var t=this._childPopup=this._element.querySelector(":scope > cv-popup");if(t){qx.event.Registration.addListener(this._element,"tap",this._openPopupChild,this);for(var e,r=t.parentElement;r;){if("cv-group"===r.tagName.toLowerCase())e.classList.add("has-popup");else if("cv-page"===r.tagName.toLowerCase())break;e=r;r=r.parentElement}}},_openPopupChild:function(){var t=this._element.querySelector(":scope > cv-popup:not([open])");t&&t.getInstance().open()},_closePopupChild:function(){var t=this._element.querySelector(":scope > cv-popup[open]");t&&t.getInstance().close()},registerModalPopup:function(){qx.event.Registration.addListener(document,"pointerdown",this._onPointerDown,this);var t=document.body.querySelector(".modal-popup-blocker");if(!t){(t=document.createElement("div")).classList.add("modal-popup-blocker");document.body.appendChild(t)}t.style.display="block";cv.ui.structure.tile.MPopup.openedPopups.push(this)},unregisterModalPopup:function(){qx.event.Registration.removeListener(document,"pointerdown",this._onPointerDown,this);var t=cv.ui.structure.tile.MPopup.openedPopups.indexOf(this);cv.ui.structure.tile.MPopup.openedPopups.splice(t,1);var e=document.body.querySelector(".modal-popup-blocker");e&&0===cv.ui.structure.tile.MPopup.openedPopups.length&&(e.style.display="none")},_onPointerDown:function(t){if(!cv.util.Tree.isChildOf(t.getTarget(),this._element)){this.close();t.preventDefault()}}},destruct:function(){qx.event.Registration.removeListener(this._element,"tap",this._openPopupChild,this);this._childPopup=null}});cv.ui.structure.tile.MPopup.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0},"qx.event.Timer":{}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MRefresh",{properties:{refresh:{check:"Number",init:0,apply:"_applyRefresh"}},members:{_refreshTimer:null,_lastRefresh:null,_applyRefresh:function(t){if(0===t)this._refreshTimer&&this._refreshTimer.stop();else if(this._refreshTimer)this._refreshTimer.restartWith(1e3*t);else{this._refreshTimer=new qx.event.Timer(1e3*t);this._refreshTimer.addListener("interval",this.__P_73_0,this);"function"==typeof this.isVisible?this.isVisible()&&this._refreshTimer.start():this._refreshTimer.start()}},_applyVisible:function(t){if(t)if(this._refreshTimer){this._refreshTimer.start();(!this._lastRefresh||Date.now()-this._lastRefresh>=this._refreshTimer.getInterval())&&this.__P_73_0()}else this._lastRefresh||this.__P_73_0();else this._refreshTimer&&this._refreshTimer.stop()},__P_73_0:function(){if("function"==typeof this.refresh){this.refresh();this._lastRefresh=Date.now()}else this.error("refresh method must be implemented!")}},destruct:function(){this._disposeObjects("_refreshTimer")}});cv.ui.structure.tile.MRefresh.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MResize",{construct:function(){var t=this;this._observer=new ResizeObserver((function(e,r){var n=t.getResizeTarget();e.some((function(e){if(e.target===n){t.fireDataEvent("resized",e);return!0}return!1}))}))},events:{resized:"qx.event.type.Data"},properties:{resizeTarget:{check:"Element",nullable:!0,apply:"_applyResizeTarget"}},members:{_observer:null,_applyResizeTarget:function(t,e){e&&this._observer.unobserve(e);t&&this._observer.observe(t)}},destruct:function(){this._observer.disconnect();this._observer=null}});cv.ui.structure.tile.MResize.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Mixin":{usage:"dynamic",require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Mixin.define("cv.ui.structure.tile.MVisibility",{construct:function(){this._observeVisibility()},statics:{observer:new IntersectionObserver((function(t,e){t.forEach((function(t){t.target._instance&&t.target._instance.setVisible(t.intersectionRatio>0)}))}))},properties:{visible:{check:"Boolean",init:!1,apply:"_applyVisible"}},members:{_observeVisibility:function(){this._element?cv.ui.structure.tile.MVisibility.observer.observe(this._element):this.warn("no element to observe defined")}}});cv.ui.structure.tile.MVisibility.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(r,t)};return _wrapNativeSuper(t)}function _construct(t,e,r){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));r&&_setPrototypeOf(o,r.prototype);return o};return _construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"qx.core.Object":{require:!0}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.AbstractCustomElement",{extend:qx.core.Object,type:"abstract",construct:function(t){this._element=t},properties:{connected:{check:"Boolean",init:!1,apply:"_applyConnected",event:"changeConnected"}},members:{_element:null,_initialized:!1,_applyConnected:function(t){if(t&&!this._initialized){this._init();this._initialized=!0}else{this._disconnected();this._initialized=!1}},_init:function(){},_disconnected:function(){},getElement:function(){return this._element}},destruct:function(){this._element=null}});var e=function(t){"use strict";_inherits(r,t);var e=_createSuper(r);function r(t){var n;_classCallCheck(this,r);n=e.call(this);if(!qx.Class.isSubClassOf(t,cv.ui.structure.tile.elements.AbstractCustomElement))throw Error(t+" must be a subclass of cv.ui.structure.tile.elements.AbstractCustomElement");n._instance=new t(_assertThisInitialized(n));n.hasAttribute("colspan")&&n.classList.add("colspan-"+n.getAttribute("colspan"));n.hasAttribute("rowspan")&&n.classList.add("rowspan-"+n.getAttribute("rowspan"));return n}_createClass(r,[{key:"getInstance",value:function(){return this._instance}},{key:"connectedCallback",value:function(){this._instance&&this._instance.setConnected(!0)}},{key:"disconnectedCallback",value:function(){this._instance&&this._instance.setConnected(!1)}},{key:"attributeChangedCallback",value:function(t,e,r){this._instance&&qx.Class.hasProperty(this._instance.constructor,t)&&this._instance.set(t,r)}}]);return r}(_wrapNativeSuper(HTMLElement));window.QxConnector=e;cv.ui.structure.tile.elements.AbstractCustomElement.$$dbClassInfo=t}();!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.Application":{},"cv.util.String":{}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.AbstractComponent",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,type:"abstract",properties:{value:{apply:"_applyValue",init:null},styleClass:{check:"String",nullable:!0,apply:"_applyStyleClass"},enabled:{check:"Boolean",init:!0,apply:"_applyEnabled"},visibility:{check:["visible","excluded","hidden"],init:"visible",apply:"_applyVisibility",event:"changeVisibility"},widget:{check:"Boolean",init:"false"}},members:{_writeAddresses:null,_visibleDisplayMode:null,__P_74_0:function(){var t=this._element.parentElement,e=!1,r=t?t.tagName.toLowerCase():"";if(r.startsWith("cv-")){e=!!document.getElementById(r.substring(3))&&1===t.childElementCount}this.setWidget(e)},_init:function(){var t=this;this.__P_74_0();var e=this._element,r=!1,n=[];Array.prototype.forEach.call(e.querySelectorAll(":scope > cv-address"),(function(t){switch(t.hasAttribute("mode")?t.getAttribute("mode"):"readwrite"){case"readwrite":r=!0;n.push(t);break;case"read":r=!0;break;case"write":n.push(t)}}));this._writeAddresses=n;r&&e.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}))},_applyValue:function(t){if(this.isConnected()){this._element.setAttribute("value",t||"");var e=t;this._element.hasAttribute("mapping")&&(e=cv.Application.structureController.mapValue(this._element.getAttribute("mapping"),t));this._element.hasAttribute("format")&&(e=cv.util.String.sprintf(this._element.getAttribute("format"),e instanceof Date?e.toLocaleString():e));this._updateValue(e,t);if(this._element.hasAttribute("styling")){var r=cv.Application.structureController.styleValue(this._element.getAttribute("styling"),t);this.setStyleClass(r)}}},_updateValue:function(t,e){},_applyStyleClass:function(t,e){var r=this._element.classList;if(e)if(r.contains(e))r.replace(e,t);else{r.add(t);r.remove(e)}else t&&r.add(t)},_applyEnabled:function(t){var e=this._element.querySelector(":scope > .blocker");if(!e){(e=document.createElement("div")).classList.add("blocker");this._element.appendChild(e);e.addEventListener("click",(function(t){t.preventDefault();t.stopPropagation()}));e.addEventListener("pointerdown",(function(t){t.preventDefault();t.stopPropagation()}));e.addEventListener("pointerup",(function(t){t.preventDefault();t.stopPropagation()}))}this._element.setAttribute("disabled",!1===t?"true":"false");e.style.display=!0===t?"none":"block"},_applyVisibility:function(t,e){var r=this.isWidget()?this._element.parentElement:this._element;"hidden"===e&&(r.style.opacity="1.0");switch(t){case"visible":this._visibleDisplayMode&&(r.style.display=this._visibleDisplayMode||"initial");break;case"hidden":r.style.opacity="0";break;case"excluded":this._visibleDisplayMode=getComputedStyle(r).getPropertyValue("display");r.style.display="none"}},onStateUpdate:function(t){switch(t.detail.target){case"enabled":this.setEnabled(t.detail.state);t.stopPropagation();return!0;case"show-exclude":this.setVisibility(t.detail.state?"visible":"excluded");t.stopPropagation();return!0;case"show-hide":this.setVisibility(t.detail.state?"visible":"hidden");t.stopPropagation();return!0;case"":this.setValue(t.detail.state);t.stopPropagation();return!0}return!1}}});cv.ui.structure.tile.components.AbstractComponent.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{construct:!0,require:!0},"qx.event.Timer":{},"cv.Application":{},"cv.ui.structure.tile.elements.Address":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Button",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,construct:function(t){cv.ui.structure.tile.elements.AbstractCustomElement.constructor.call(this,t);this.__P_75_0=new Map},properties:{type:{check:["button","trigger","push"],init:"button"},on:{check:"Boolean",init:!1,apply:"_applyOn"},onClass:{check:"String",init:"active"},offClass:{check:"String",init:"inactive"},onValue:{check:"String",init:"1"},offValue:{check:"String",init:"0"},styleClass:{check:"String",nullable:!0,apply:"_applyStyleClass"},name:{check:"String",init:"",apply:"_applyName"},progress:{check:"Number",init:-1,apply:"_applyProgress",transform:"_parseInt"}},members:{_writeAddresses:null,__P_75_1:null,__P_75_2:null,__P_75_0:null,_parseInt:function(t){var e=parseInt(t);return Number.isNaN(e)?0:e},_init:function(){var t=this,e=this._element;e.hasAttribute("type")&&this.setType(e.getAttribute("type"));e.hasAttribute("name")&&this.setName(e.getAttribute("name"));e.hasAttribute("progress")&&this.setProgress(e.getAttribute("progress"));e.hasAttribute("on-value")&&this.setOnValue(e.getAttribute("on-value"));e.hasAttribute("off-value")&&this.setOffValue(e.getAttribute("off-value"));var r=!1,n=[];Array.prototype.forEach.call(e.querySelectorAll(":scope > cv-address"),(function(t){switch(t.hasAttribute("mode")?t.getAttribute("mode"):"readwrite"){case"readwrite":r=!0;n.push(t);break;case"read":r=!0;break;case"write":n.push(t)}}));this._writeAddresses=n;if(n.length>0){var o={},i=e;if("true"===e.getAttribute("whole-tile"))for(var s=e.parentElement,a=0;a<=2;){a++;"cv-tile"===(s=s.parentElement).tagName.toLowerCase()&&(i=s).classList.add("clickable")}n.forEach((function(e){switch(e.hasAttribute("on")?e.getAttribute("on"):"click"){case"click":o.click=t.onClicked.bind(t);break;case"up":o.pointerup=t.onPointerUp.bind(t);break;case"down":o.pointerdown=t.onPointerDown.bind(t)}}));Object.getOwnPropertyNames(o).forEach((function(t){return i.addEventListener(t,(function(e){o[t](e)}))}))}if(r)e.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}));else if(e.hasAttribute("mapping")||e.hasAttribute("styling")){var c=n.filter((function(t){return t.hasAttribute("value")&&!t.hasAttribute("on")}));if(1===c.length){var u=c[0].getAttribute("value");qx.event.Timer.once((function(){t.setOn(u==t.getOnValue())}),this,1e3)}}if(r||1!==n.filter((function(t){return t.hasAttribute("value")&&!t.hasAttribute("on")})).length){var l=!1,f=!1;n.some((function(t){if(t.hasAttribute("value")&&t.hasAttribute("on")){l||(l="down"===t.getAttribute("on"));f||(f="up"===t.getAttribute("on"))}return f&&l}));f&&l&&this.setType("push")}else this.setType("trigger")},_initProgress:function(){var t=this._element;this.__P_75_2=100*Math.PI;var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100");e.setAttribute("type","circle");var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.classList.add("bar");r.setAttribute("r","49");r.setAttribute("cx","50");r.setAttribute("cy","50");r.setAttribute("stroke-width","2");r.setAttribute("stroke-dasharray",this.__P_75_2+" "+this.__P_75_2);r.setAttribute("stroke-dashoffset",""+this.__P_75_2);e.appendChild(r);t.appendChild(e);t.classList.add("progress")},_applyConnected:function(t){cv.ui.structure.tile.components.Button.superclass.prototype._applyConnected.call(this,t);t&&"trigger"!==this.getType()&&qx.event.Timer.once(this._applyOn,this,1e3)},_applyOn:function(){if(this.isConnected()){var t=this.isOn()?this.getOnValue():this.getOffValue();this._element.setAttribute("value",t||"");var e=t;this._element.hasAttribute("mapping")&&(e=cv.Application.structureController.mapValue(this._element.getAttribute("mapping"),t,this.__P_75_0));var r=this._element.querySelector(".value");r&&"cv-icon"===r.tagName.toLowerCase()?r._instance?r._instance.setId(e):r.textContent=e:this.updateValue(e);var n=this.isOn()?this.getOnClass():this.getOffClass();this._element.hasAttribute("styling")&&(n=cv.Application.structureController.styleValue(this._element.getAttribute("styling"),t,this.__P_75_0));this.setStyleClass(n)}},_applyProgress:function(t){var e=this._element.querySelector(":scope > svg > circle.bar");if(!e){this._initProgress();e=this._element.querySelector(":scope > svg > circle.bar")}if(e){this._element.hasAttribute("progress-mapping")&&(t=cv.Application.structureController.mapValue(this._element.getAttribute("progress-mapping"),t,this.__P_75_0));e.setAttribute("stroke-dashoffset",""+(this.__P_75_2-t/100*this.__P_75_2))}},_applyStyleClass:function(t,e){var r=this._element.classList;if(e)if(r.contains(e))r.replace(e,t);else{r.add(t);r.remove(e)}else t&&r.add(t)},_applyName:function(t){if(!this.__P_75_1){this.__P_75_1=document.createElement("label");this.__P_75_1.classList.add("button-label");this._element.appendChild(this.__P_75_1)}this.__P_75_1.textContent=t},updateValue:function(t){var e=this._element.querySelector("span.value");e&&(e.innerHTML=t)},onStateUpdate:function(t){var e=t.detail.state==this.getOnValue(),r=t.detail.target||"default";if(t.detail.source instanceof cv.ui.structure.tile.elements.Address){var n=t.detail.source.getElement();n.hasAttribute("value")&&(e=t.detail.state==n.getAttribute("value"))}"default"===r?this.setOn(e):"progress"===r?this.setProgress(t.detail.state):r.startsWith("store:")?this.__P_75_0.set(r.substring(6),t.detail.state):"store"===r&&this.__P_75_0.set(t.detail.address,t.detail.state)},onClicked:function(t){var e=this;this.createRipple(t);this._writeAddresses||(this._writeAddresses=Array.prototype.filter.call(this._element.querySelectorAll("addresses > cv-address"),(function(t){return!t.hasAttribute("mode")||"read"!==t.getAttribute("mode")})));var r=new CustomEvent("sendState",{detail:{value:this.isOn()?this.getOffValue():this.getOnValue(),source:this}});if("trigger"===this.getType()){this.setOn(!0);qx.event.Timer.once((function(){e.setOn(!1)}),null,250)}this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||"click"===t.getAttribute("on")})).forEach((function(t){return t.dispatchEvent(r)}));t.stopPropagation()},onPointerDown:function(){var t=this;this._writeAddresses.filter((function(t){return"down"===t.getAttribute("on")&&t.hasAttribute("value")})).forEach((function(e){e.dispatchEvent(new CustomEvent("sendState",{detail:{value:e.getAttribute("value"),source:t}}))}))},onPointerUp:function(){var t=this;this._writeAddresses.filter((function(t){return"up"===t.getAttribute("on")&&t.hasAttribute("value")})).forEach((function(e){e.dispatchEvent(new CustomEvent("sendState",{detail:{value:e.getAttribute("value"),source:t}}))}))},createRipple:function(t){var e=t.currentTarget,r=e.querySelector(":scope .ripple-container");if(!r){(r=document.createElement("div")).classList.add("ripple-container");e.appendChild(r)}var n=document.createElement("span"),o=Math.max(e.clientWidth,e.clientHeight),i=o/2;n.style.width=n.style.height="".concat(o,"px");var s=t.clientX-(e.offsetLeft+i),a=t.clientY-(e.offsetTop+i);if(e===this._element){s-=e.offsetParent.offsetLeft;a-=e.offsetParent.offsetTop}n.style.left="".concat(s,"px");n.style.top="".concat(a,"px");n.classList.add("ripple");r.querySelectorAll(".ripple").forEach((function(t){return t.remove()}));r.appendChild(n)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"button",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Button.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.data.Model":{},"cv.ui.structure.tile.components.Button":{},"cv.Transform":{},"qx.event.Timer":{},"cv.io.BackendConnections":{},"cv.Application":{},"cv.util.String":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Address",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{__P_86_0:null,__P_86_1:null,_init:function(){var t=this,e=this._element,r=e.textContent.trim();if(r){var n=cv.data.Model.getInstance(),o=e.getAttribute("backend");n.addAddress(r,e.getAttribute("id"),o);var i=e.hasAttribute("mode")?e.getAttribute("mode"):"readwrite";if("write"!==i){var s=n.getState(r,o);void 0!==s&&this.fireStateUpdate(r,s);n.addUpdateListener(r,this.fireStateUpdate,this,o)}"read"!==i&&e.addEventListener("sendState",(function(r){var n=null;Object.prototype.hasOwnProperty.call(r.detail,"value")&&(n=r.detail.value);e.hasAttribute("value")&&(n=e.getAttribute("value"));var i=r.detail.source&&r.detail.source instanceof cv.ui.structure.tile.components.Button&&("trigger"===r.detail.source.getType()||"push"===r.detail.source.getType());if(null!==n){var s=e.getAttribute("transform")||"raw",a=cv.Transform.encodeBusAndRaw({transform:s},n);if(i||!Object.prototype.hasOwnProperty.call(e,"lastSentValue")||a.raw!==e.lastSentValue)if(e.hasAttribute("delay")){var c=parseInt(e.getAttribute("delay"));t.debug("send with delay of ".concat(c,"ms"));qx.event.Timer.once((function(){cv.io.BackendConnections.getClient(o).write(e.textContent,a.bus,e);i||(e.lastSentValue=a.raw)}),t,c)}else{cv.io.BackendConnections.getClient(o).write(e.textContent,a.bus,e);i||(e.lastSentValue=a.raw)}}}))}},fireStateUpdate:function(t,e){if(this.__P_86_0!==e||"always"===this._element.getAttribute("send-mode")){var r=this._element.getAttribute("transform")||"raw",n=cv.Transform.decode({transform:r},e),o="";if(this._element.hasAttribute("mapping")){o=this._element.getAttribute("mapping");n=cv.Application.structureController.mapValue(o,n)}this._element.hasAttribute("format")&&(n=cv.util.String.sprintf(this._element.getAttribute("format"),n instanceof Date?n.toLocaleString():n));var i=new CustomEvent("stateUpdate",{bubbles:!0,cancelable:!0,detail:{address:this._element.textContent.trim(),state:n,target:this._element.getAttribute("target")||"",raw:e,mapping:o,addressValue:this._element.hasAttribute("value")?this._element.getAttribute("value"):null,source:this,variant:this._element.hasAttribute("variant")?this._element.getAttribute("variant"):null}});this.__P_86_1=n;this._element.dispatchEvent(i);this.__P_86_0=e;e!==this._element.lastSentValue&&(this._element.lastSentValue=null)}},isRead:function(){return"write"!==this._element.getAttribute("mode")},isWrite:function(){return"read"!==this._element.getAttribute("mode")},getValue:function(){return this.__P_86_1}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"address",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Address.$$dbClassInfo=t}();function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,s=Object.create(i.prototype),a=new S(o||[]);return n(s,"_invoke",{value:P(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};c(h,i,(function(){return this}));var _=Object.getPrototypeOf,m=_&&_(_(A([])));m&&m!==e&&r.call(m,i)&&(h=m);var v=y.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,s,a){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=w(s,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(v,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,s,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function asyncGeneratorStep(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){r(t);return}a.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){asyncGeneratorStep(i,n,o,s,a,"next",t)}function a(t){asyncGeneratorStep(i,n,o,s,a,"throw",t)}s(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.util.ScriptLoader":{},"qx.util.ResourceManager":{},"qx.event.Timer":{},"qx.locale.Manager":{},"cv.io.BackendConnections":{},"cv.io.Fetch":{},"cv.util.String":{},"cv.core.notifications.Router":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Chart",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MVisibility,statics:{ChartCounter:0,JS_LOADED:new Promise(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e,r){var n,o,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){return"object"===_typeof(window.d3)};t.next=3;return cv.util.ScriptLoader.includeScript(qx.util.ResourceManager.getInstance().toUri("libs/d3.min.js"));case 3:if(n())e(!0);else{o=new qx.event.Timer(50);i=0;o.addListener("interval",(function(){i++;n()?e(!0):i>5&&r(new Error("Error loaded d3 library"))}))}case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()).then((function(){if("de"===qx.locale.Manager.getInstance().getLanguage()){d3.formatDefaultLocale({decimal:",",thousands:".",grouping:[3],currency:["",""]});d3.timeFormatDefaultLocale({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]})}})),CONFIG:null},properties:{type:{check:["axis-mixed","bar","line","scatter","pie","percentage"],init:"line"}},members:{_downloadedImage:null,_url:null,_headers:null,_request:null,_chart:null,_width:null,_height:null,_loaded:null,_dataSetConfigs:null,_init:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,s,a,c,u;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t._element).hasAttribute("type")&&t.setType(r.getAttribute("type"));e.next=4;return cv.ui.structure.tile.components.Chart.JS_LOADED;case 4:t.isVisible()&&t._loadData();if(r.hasAttribute("allow-fullscreen")&&"true"===r.getAttribute("allow-fullscreen")){n="chart-"+cv.ui.structure.tile.components.Chart.ChartCounter;(o=document.createElement("cv-button")).classList.add("fullscreen");(i=document.createElement("cv-address")).setAttribute("backend","system");i.textContent="state:".concat(n,"-popup");o.appendChild(i);(s=document.createElement("cv-icon")).textContent="ri-fullscreen-line";o.appendChild(s);r.parentElement.insertBefore(o,r);(a=document.createElement("cv-address")).setAttribute("mode","read");a.setAttribute("target","fullscreen-popup");a.setAttribute("backend","system");a.setAttribute("send-mode","always");a.textContent=i.textContent;r.parentElement.appendChild(a);c=r;for(;c&&"cv-tile"!==c.nodeName.toLowerCase();)c=c.parentElement;if(c){(u=c.getInstance()).addListener("closed",(function(){var e=new CustomEvent("sendState",{detail:{value:0,source:t}});i.dispatchEvent(e)}));c.addEventListener("stateUpdate",(function(t){u.onStateUpdate(t);t.stopPropagation()}))}}cv.ui.structure.tile.components.Chart.ChartCounter++;case 7:case"end":return e.stop()}}),e)})))()},_applyVisible:function(t){t&&"object"===_typeof(window.d3)&&this._loadData()},_loadData:function(){var t=this;if(!(this._loaded&&Date.now()-this._loaded<3e5)){var e,r=cv.io.BackendConnections.getClient(),n=this._element.querySelectorAll(":scope > dataset"),o=this._element.getAttribute("series")||"day",i={};switch(o){case"hour":i.xTicks=d3.timeMinute.every(5);i.start="end-1"+o;break;case"day":i.xTicks=d3.timeHour.every(4);i.start="end-1"+o;break;case"week":i.xTicks=d3.timeDay.every(1);i.start="end-1"+o;break;case"month":i.xTicks=d3.timeDay.every(5);i.start="end-1"+o;break;case"year":i.xTicks=d3.timeDay.every(31);i.start="end-1"+o}var s=[];this._dataSetConfigs={};var a,c=_createForOfIteratorHelper(n);try{var u=function(){for(var n,o,c,u=a.value,l=Object.assign({showArea:!0,color:"#FF9900",type:"line",title:"",start:"end-1day",end:"now",xTicks:d3.timeHour.every(4),curve:"linear"},i),f=0;f<u.attributes.length;f++){o=(n=u.attributes.item(f)).name.split("-").map((function(t,e){return e>0?"".concat(t.substring(0,1).toUpperCase()).concat(t.substring(1)):t})).join("");"true"===(c=n.value)||"false"===c?c="true"===c:/^\d+$/.test(c)?c=parseInt(c):/^[\d.]+$/.test(c)&&(c=parseFloat(c));l[o]=c}var p=new Date;p.setTime(p.getTime()-864e5);if(!(e=r.getResourcePath("charts",{src:l.src,start:l.start,end:l.end})))return"continue";t._dataSetConfigs[l.src]=l;s.push(cv.io.Fetch.fetch(e,null,!1,r).then((function(t){r.hasCustomChartsDataProcessor(t)&&(t=r.processChartsData(t,l));return{data:t,ts:l}})).catch((function(r){t._onStatusError(l,e,r)})))};for(c.s();!(a=c.n()).done;)u()}catch(t){c.e(t)}finally{c.f()}Promise.all(s).then((function(e){t._onSuccess(e)}))}},_onSuccess:function(t){var e=this;if(this.isVisible()){var r,n=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=i.data;if(null!==s){var a,c=_createForOfIteratorHelper(s);try{for(c.s();!(a=c.n()).done;){var u=_slicedToArray(a.value,2),l=u[0],f=u[1];n.push({src:i.ts.src,time:i.ts.aggregationInterval>0&&"stacked-bar"===i.ts.type?Math.round(l/i.ts.aggregationInterval)*i.ts.aggregationInterval:l,value:f})}}catch(t){c.e(t)}finally{c.f()}}}}catch(t){o.e(t)}finally{o.f()}var p=d3.min(n,(function(t){return+t.value})),d=d3.max(n,(function(t){return+t.value}))+1;p>1&&(p-=1);var y=this._element.hasAttribute("y-format")?this._element.getAttribute("y-format"):"%s",h=null;if(this._element.hasAttribute("x-format")){var _=this._element.getAttribute("x-format");h=function(t){return d3.timeFormat(_)(t)}}else h=this.multiTimeFormat([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]]);this._chart=this._lineChart(n,{x:function(t){return t.time},y:function(t){return t.value},z:function(t){return t.src},color:function(t){return t&&e._dataSetConfigs[t].color},title:function(t){return cv.util.String.sprintf(y,t.value)},chartTitle:this._element.hasAttribute("title")?this._element.getAttribute("title"):null,xDomain:d3.extent(n,(function(t){return t.time})),yDomain:[p,d],showArea:function(t){return e._dataSetConfigs[t].showArea},mixBlendMode:"normal",xFormat:h});this._loaded=Date.now()}},multiTimeFormat:function(t){return function(e){return d3.timeFormat(function(e){for(var r=0,n=!1,o="%c";!n&&r<t.length;){(n=t[r][1](e))&&(o=t[r][0]);r++}return o}(e))(e)}},_onStatusError:function(t,e,r){cv.core.notifications.Router.dispatchMessage("cv.charts.error",{title:qx.locale.Manager.tr("Communication error"),severity:"urgent",message:qx.locale.Manager.tr("URL: %1<br/><br/>Response:</br>%2",JSON.stringify(e),r)});this.error("Chart _onStatusError",t,e,r)},_lineChart:function(t,e){var r=this;cv.ui.structure.tile.components.Chart.CONFIG||(cv.ui.structure.tile.components.Chart.CONFIG={x:function(t){return t[0]},y:function(t){return t[1]},z:function(){return 1},chartTitle:void 0,title:void 0,defined:void 0,curve:d3.curveLinear,marginTop:24,marginRight:24,marginBottom:24,marginLeft:30,width:392,height:192,xType:d3.scaleTime,xDomain:void 0,xRange:void 0,xFormat:void 0,yType:d3.scaleLinear,yDomain:void 0,yRange:void 0,yFormat:void 0,yLabel:void 0,zDomain:void 0,color:"currentColor",strokeLinecap:void 0,strokeLinejoin:void 0,strokeWidth:1.5,strokeOpacity:void 0,mixBlendMode:"multiply",showArea:void 0,xPadding:.1});var n=Object.assign({},cv.ui.structure.tile.components.Chart.CONFIG,e);n.xRange=[n.marginLeft,n.width-n.marginRight];n.yRange=[n.height-n.marginBottom,n.marginTop];var o=d3.map(t,n.x),i=d3.map(t,n.y),s=d3.map(t,n.z),a=d3.map(t,(function(t){return t}));void 0===n.defined&&(n.defined=function(t,e){return!isNaN(o[e])&&!isNaN(i[e])});void 0===n.xDomain&&(n.xDomain=d3.extent(o));void 0===n.yDomain&&(n.yDomain=[0,d3.max(i,(function(t){return"string"==typeof t?+t:t}))]);void 0===n.zDomain&&(n.zDomain=s);n.zDomain=new d3.InternSet(n.zDomain);var c=d3.range(o.length).filter((function(t){return n.zDomain.has(s[t])})),u=n.xType(n.xDomain,n.xRange),l=function(t){return 0},f=n.yType(n.yDomain,n.yRange),p=n.width/80,d=n.height/60,y=d3.axisBottom(u).ticks(p).tickSizeOuter(0).tickFormat(n.xFormat),h=d3.axisLeft(f).ticks(d,n.yFormat),_=void 0===n.title?s:null===n.title?null:d3.map(t,n.title);d3.select(this._element).select("svg").remove();var m,v=d3.select(this._element).append("div").style("opacity",0).attr("class","tooltip"),b=d3.select(this._element).append("svg").attr("viewBox",[0,0,n.width,n.height]).attr("style","max-width: 100%; height: auto; height: intrinsic;").style("-webkit-tap-highlight-color","transparent").on("pointerenter",(function(){$.attr("display",null);v.style("opacity",1)})).on("pointermove",(function(t){var e=d3.pointer(t),p=_slicedToArray(e,2),d=p[0],y=p[1],h=d3.least(c,(function(t){return Math.hypot(u(o[t])-d,f(i[t])-y)})),m=r._element.offsetWidth/n.width,g=r._element.offsetHeight/n.height,P=(s[h],0)+("function"==typeof l.bandwidth?l.bandwidth()/2:0);$.attr("transform","translate(".concat(u(o[h])+P,",").concat(f(i[h]),")"));if(_){var w=v.node(),C=n.xFormat(new Date(o[h])),O=y*g-w.offsetHeight-40,S=d*m+w.offsetWidth>r._element.offsetWidth?d*m-w.offsetWidth:d*m,A=s[h],x=r._dataSetConfigs[A]&&r._dataSetConfigs[A].title?r._dataSetConfigs[A].title+": ":"";v.html("".concat(C,"<br/>").concat(x).concat(_[h])).style("left",S+"px").style("top",O+"px")}b.property("value",a[h]).dispatch("input",{bubbles:!0})})).on("pointerleave",(function(t){if(t.relatedTarget!==v.node()){$.attr("display","none");b.node().value=null;b.dispatch("input",{bubbles:!0});v.style("opacity",0)}})).on("touchmove",(function(t){var e=t.targetTouches[0].clientY;if(m){var r=m.node().getBoundingClientRect();e>r.y&&e<r.y+r.height&&t.preventDefault()}}),{passive:!1}),g=this._element.hasAttribute("show-grid")?this._element.getAttribute("show-grid"):"xy";g.includes("x")&&b.append("g").attr("class","grid").attr("transform","translate(0,".concat(n.height-n.marginBottom,")")).call(d3.axisBottom(u).ticks(p).tickSize(-n.height+n.marginBottom+n.marginTop).tickFormat(""));g.includes("y")&&b.append("g").attr("class","grid").attr("transform","translate(".concat(n.marginLeft,",0)")).call(d3.axisLeft(f).ticks(d).tickSize(-n.width+n.marginRight+n.marginLeft).tickFormat(""));var P=!this._element.hasAttribute("show-x-axis")||"true"===this._element.getAttribute("show-x-axis"),w=!this._element.hasAttribute("show-y-axis")||"true"===this._element.getAttribute("show-y-axis");P&&b.append("g").attr("transform","translate(0,".concat(n.height-n.marginBottom,")")).call(y);w&&b.append("g").attr("transform","translate(".concat(n.marginLeft,",0)")).call(h).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",-n.marginLeft).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(n.yLabel)}));n.chartTitle&&b.append("text").attr("x",n.width/2).attr("y",n.marginTop).attr("class","chart-title").text(n.chartTitle);var C,O=new Map,S=new Map,A=new Map,x=new Map,E=_createForOfIteratorHelper(c);try{for(E.s();!(C=E.n()).done;){var j=C.value,T=s[j];if("line"===this._dataSetConfigs[T].type&&"function"==typeof n.showArea&&n.showArea(T)){S.has(T)||S.set(T,[]);S.get(T).push(j)}switch(this._dataSetConfigs[T].type){case"line":O.has(T)||O.set(T,[]);O.get(T).push(j);break;case"bar":A.has(T)||A.set(T,[]);A.get(T).push(j);break;case"stacked-bar":x.has(T)||x.set(T,[]);x.get(T).push(j)}}}catch(t){E.e(t)}finally{E.f()}if(O.size>0){var k,R={},L=_createForOfIteratorHelper(O.keys());try{for(L.s();!(k=L.n()).done;){var q=k.value,I=this._dataSetConfigs[q].curve||"linear";if(!Object.prototype.hasOwnProperty.call(R,I)){var M=void 0;switch(I){case"linear":M=d3.curveLinear;break;case"step":M=d3.curveStep;break;case"natural":M=d3.curveNatural}M&&(R[I]=d3.line().curve(M).x((function(t){return u(o[t])})).y((function(t){return f(i[t])})))}}}catch(t){L.e(t)}finally{L.f()}m=b.append("g").attr("fill","none").attr("stroke","string"==typeof n.color?n.color:null).attr("stroke-linecap",n.strokeLinecap).attr("stroke-linejoin",n.strokeLinejoin).attr("stroke-width",n.strokeWidth).attr("stroke-opacity",n.strokeOpacity).selectAll("path").data(O).join("path").style("mix-blend-mode",n.mixBlendMode).attr("stroke","function"==typeof n.color?function(t){return n.color(t[0])}:null).attr("d",(function(t){var e=r._dataSetConfigs[t[0]].curve||"linear";return(R[e]||R.linear)(t[1])}))}if(S.size>0){var N,B={},D=_createForOfIteratorHelper(S.keys());try{for(D.s();!(N=D.n()).done;){var F=N.value,V=this._dataSetConfigs[F].curve||"linear";if(!Object.prototype.hasOwnProperty.call(B,V)){var z=void 0;switch(V){case"linear":z=d3.curveLinear;break;case"step":z=d3.curveStep;break;case"natural":z=d3.curveNatural}z&&(B[V]=d3.area().curve(z).x((function(t){return u(o[t])})).y0((function(){return n.yRange[0]})).y1((function(t){return f(i[t])})))}}}catch(t){D.e(t)}finally{D.f()}b.append("g").attr("stroke","none").attr("fill","string"==typeof n.color?this.__P_76_0(n.color,"30"):null).selectAll("path").data(S).join("path").style("mix-blend-mode",n.mixBlendMode).attr("fill","function"==typeof n.color?function(t){return r.__P_76_0(n.color(t[0]),"30")}:null).attr("d",(function(t){var e=r._dataSetConfigs[t[0]].curve||"linear";return(B[e]||B.linear)(t[1])}))}if(A.size>0){var H=d3.scaleBand().domain(o).range(n.xRange).padding(n.xPadding);b.append("g").selectAll("g").data(A).join("g").attr("fill","function"==typeof n.color?function(t){return r.__P_76_0(n.color(t[0]),"30")}:null).selectAll("rect").data((function(t){return t[1].map((function(e){return{key:t[0],value:e}}))})).join("rect").attr("x",(function(t){return H(o[t.value])})).attr("y",(function(t){return f(i[t.value])})).attr("height",(function(t){return n.yRange[0]-f(i[t.value])})).attr("width",H.bandwidth())}var $=b.append("g").attr("display","none").attr("fill","currentColor");$.append("circle").attr("r",2.5);$.append("text").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("y",-8);return Object.assign(b.node(),{value:null})},__P_76_0:function(t,e){return t.startsWith("rgb(")?"rgba("+t.substring(4,t.length-1)+", "+(parseInt(e,16)/255).toFixed(2)+")":t.startsWith("#")&&7===t.length?t+e:t}},destruct:function(){this._chart=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"chart",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Chart.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MResize":{require:!0},"cv.parser.pure.widgets.ColorChooser":{},"cv.ui.structure.pure.ColorChooser":{},"qx.event.Timer":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Color",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MResize,properties:{throttleInterval:{check:"Number",init:250,apply:"_applyThrottleInterval"}},statics:{CC_COUNTER:0},members:{__P_77_0:null,_init:function(){var t=this,e=this._element;e.hasAttribute("throttle-interval")&&this.setThrottleInterval(parseInt(e.getAttribute("throttle-interval")));if("popup"===(e.hasAttribute("mode")?e.getAttribute("mode"):"popup")){var r=e.querySelector(":scope > cv-popup");if(!r){(r=document.createElement("cv-popup")).setAttribute("modal","true");e.hasAttribute("title")&&r.setAttribute("title",e.getAttribute("title"));var n,o={},i=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-address"));try{for(i.s();!(n=i.n()).done;){var s=n.value,a=s.textContent,c=s.getAttribute("transform"),u=3;switch(s.getAttribute("mode")){case"disable":u=0;break;case"read":u=1;break;case"write":u=2;break;case"readwrite":u=3}var l=cv.parser.pure.widgets.ColorChooser.makeAddressListFn(a,c,u,s.getAttribute("variant"));o[a.trim()]={transform:c,mode:u,variantInfo:l[1]}}}catch(t){i.e(t)}finally{i.f()}cv.ui.structure.tile.components.Color.CC_COUNTER++;var f="id_0_"+cv.ui.structure.tile.components.Color.CC_COUNTER,p={path:f,$$type:"colorchooser",classes:"widget colorchooser",layout:{colspan:1},controls:e.hasAttribute("controls")?e.getAttribute("controls"):"triangle",address:o,throttleInterval:this.getThrottleInterval()};cv.parser.pure.widgets.ColorChooser.parseAttributes(e,p);this.__P_77_0=new cv.ui.structure.pure.ColorChooser(p);this.__P_77_0.addListener("colorChanged",this._onColorChanged,this);this._onColorChanged();r.innerHTML='<div class="widget_container" style="margin-top: 24px; max-width: 100vw; width: 320px; max-height: 100vh; min-height: 320px; align-self: center" id="'.concat(f,'" data-type="colorchooser">').concat(this.__P_77_0.getDomString(),"</div>");e.appendChild(r);e.addEventListener("click",(function(t){t.path.indexOf(r)<0&&r.getInstance().open()}));qx.event.Timer.once((function(){t.__P_77_0._onDomReady()}),this,0);this.setResizeTarget(r);this.addListener("resized",(function(){t.__P_77_0.invalidateScreensize()}))}}},_onColorChanged:function(){var t=this.__P_77_0.getColor(),e=t.getComponent("rgb"),r=t.getComponent("v");this.setValue("#".concat(this.__P_77_1(e.r)).concat(this.__P_77_1(e.g)).concat(this.__P_77_1(e.b)).concat(this.__P_77_1(r)))},__P_77_1:function(t){return Math.round(255*t).toString(16).padStart(2,"0")},_updateValue:function(t,e){var r=this._element.querySelector(":scope > .value"),n=t.substring(0,7);if(r){var o=r.tagName.toLowerCase(),i=9===t.length?parseInt(t.substring(7,9),16)/255:1;if("cv-icon"===o){r.style.color=n;r.style.opacity=Math.max(i,.2)}}else this._element.style.backgroundColor=t}},destruct:function(){this._disposeObjects("__P_77_0")},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"color",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Color.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{construct:!0,require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Icon",{extend:cv.ui.structure.tile.components.AbstractComponent,construct:function(t){cv.ui.structure.tile.components.AbstractComponent.constructor.call(this,t);this._idRegex=/^[^\s]+$/},properties:{id:{check:"String",nullable:!0,apply:"_applyId",transform:"_transformId"},color:{check:"String",nullable:!0,apply:"_applyColor"}},members:{__P_78_0:!1,_idRegex:null,_transformId:function(t){if(this._idRegex.test(t))return t;this.error("invalid icon id:",t);return null},_init:function(){cv.ui.structure.tile.components.Icon.superclass.prototype._init.call(this);var t=this._element;if(t.textContent.trim()){this.__P_78_0=!0;this.setId(t.textContent.trim())}else{var e,r=t.classList.values(),n=_createForOfIteratorHelper(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.startsWith("ri-")||o.startsWith("knxuf-")){this.setId(o);break}}}catch(t){n.e(t)}finally{n.f()}}this.__P_78_0=!0},_applyId:function(t,e){var r=this._element;if(this.__P_78_0){e&&r.classList.remove(e);if(t){r.classList.add(t);r.textContent&&(r.textContent="")}}},_applyColor:function(t,e){var r=this._element;e&&r.classList.remove(e);t&&r.classList.add(t)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"icon",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}_createClass(n,null,[{key:"observedAttributes",get:function(){return["color"]}}]);return n}(QxConnector))}});cv.ui.structure.tile.components.Icon.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MRefresh":{require:!0},"cv.io.rest.Client":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Image",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MRefresh],members:{_downloadedImage:null,_url:null,_headers:null,_request:null,_init:function(){var t=this,e=this._element,r=e.querySelector(":scope > img");if(!r){r=document.createElement("img");e.appendChild(r)}e.addEventListener("click",(function(){return t.refresh()}));var n=e.getAttribute("src"),o=window.location.origin;"/"!==n.substring(0,1)&&"http"!==n.substring(0,4)&&(o+=window.location.pathname);this._url=new URL(n,o);var i=e.hasAttribute("proxy")&&"true"===e.getAttribute("proxy");if(i){this._url=new URL(cv.io.rest.Client.getBaseUrl()+"/proxy",window.location.origin);this._url.searchParams.set("url",e.getAttribute("src"))}this._headers={};if(e.hasAttribute("auth-type"))if(i)this._url.searchParams.set("auth-type",e.getAttribute("auth-type").toLowerCase());else switch(e.getAttribute("auth-type").toLowerCase()){case"basic":this._headers.Authorization="Basic "+window.btoa(e.getAttribute("username")+":"+e.getAttribute("password"));break;case"bearer":this._headers.Authorization="Bearer "+e.getAttribute("username");break;default:this.error("unknown authorization type"+e.getAttribute("auth-type"))}this._loadImage();e.hasAttribute("refresh")&&this.setRefresh(parseInt(e.getAttribute("refresh")))},_loadImage:function(){var t=this,e=this._element.querySelector(":scope > img");if(Object.keys(this._headers).length>0){var r=new XMLHttpRequest;r.responseType="blob";r.open("get",this._url.toString(),!0);Object.keys(this._headers).forEach((function(e){r.setRequestHeader(e,t._headers[e])}));r.onreadystatechange=function(t){if(r.readyState===XMLHttpRequest.DONE&&200===r.status){e.src=URL.createObjectURL(r.response);e.onload=function(){URL.revokeObjectURL(e.src)}}};r.send(null)}else e.src=this._url.toString()},refresh:function(){if(this._element.querySelector(":scope > img")){this._url.searchParams.set("r",""+Math.random());this._loadImage()}},onStateUpdate:function(t){cv.ui.structure.tile.components.Image.superclass.prototype.onStateUpdate.call(this,t)||("refresh"===t.detail.target?t.detail.state&&this.refresh():this.debug("unhandled address target",t.detail.target))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"image",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Image.$$dbClassInfo=t}();function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,s=Object.create(i.prototype),a=new S(o||[]);return n(s,"_invoke",{value:P(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};c(h,i,(function(){return this}));var _=Object.getPrototypeOf,m=_&&_(_(A([])));m&&m!==e&&r.call(m,i)&&(h=m);var v=y.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,s,a){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=w(s,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(v,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,s,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function asyncGeneratorStep(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){r(t);return}a.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){asyncGeneratorStep(i,n,o,s,a,"next",t)}function a(t){asyncGeneratorStep(i,n,o,s,a,"throw",t)}s(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MRefresh":{require:!0},"cv.io.Fetch":{},"cv.io.listmodel.Registry":{},"qx.data.Array":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.List",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MRefresh],properties:{value:{refine:!0,init:[]}},members:{_target:null,_timer:null,_model:null,_getModel:null,_filterModel:null,_sortModel:null,_limit:null,_modelInstance:null,_init:function(){var t=this,e=this._element;this._model=[];var r=!1,n=e.querySelector("model");if(n){n.hasAttribute("filter")&&(this._filterModel=new Function("item","index",'"use strict"; return '+n.getAttribute("filter")));n.hasAttribute("limit")&&(this._limit=parseInt(n.getAttribute("limit")));var o,i=n.querySelectorAll(':scope > cv-address:not([mode="write"])'),s=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-address"));try{for(s.s();!(o=s.n()).done;){if("read"!==o.value.getAttribute("mode")){e.addEventListener("sendState",(function(t){var r,n=new CustomEvent("sendState",{bubbles:t.bubbles,cancelable:t.cancelable,detail:t.detail}),o=_createForOfIteratorHelper(e.querySelectorAll(":scope > cv-address"));try{for(o.s();!(r=o.n()).done;){r.value.dispatchEvent(n)}}catch(t){o.e(t)}finally{o.f()}}));break}}}catch(t){s.e(t)}finally{s.f()}if(n.hasAttribute("sort-by")){var a=n.getAttribute("sort-by"),c="desc"===n.getAttribute("sort-mode")?-1:1;this._sortModel=function(t,e){var r=t[a],n=e[a];if(r===n)return 0;if(_typeof(r)===_typeof(n))switch(_typeof(r)){case"number":return(r-n)*c;case"boolean":return(r?-1:1)*c;case"string":return r.localeCompare(n)*c;default:return JSON.stringify(r).localeCompare(JSON.stringify(n))*c}else{if(null==r)return 1*c;if(null==n)return-1*c}return 0}}if(n.hasAttribute("src")||n.hasAttribute("config-section"))this._getModel=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,r,o,i,s;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={};for(r=0,o=["self-signed","config-section","auth-type"];r<o.length;r++){i=o[r];n.hasAttribute(i)&&(e[i]=n.getAttribute(i))}t.next=4;return cv.io.Fetch.fetch(n.getAttribute("src"),e,"true"===n.getAttribute("proxy"));case 4:s=t.sent;return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));else if(n.hasAttribute("class")){var u=cv.io.listmodel.Registry.get(n.getAttribute("class"));if(u){var l=new u;if(n.hasAttribute("parameters")){var f,p={},d=_createForOfIteratorHelper(n.getAttribute("parameters").split(","));try{for(d.s();!(f=d.n()).done;){var y=f.value.split("=").map((function(t){return t.trim()})),h=_slicedToArray(y,2),_=h[0],m=h[1];p[_]=m.startsWith("'")?m.substring(1,m.length-1):m}}catch(t){d.e(t)}finally{d.f()}l.set(p)}this._getModel=_asyncToGenerator(_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return l.refresh();case 2:return t.abrupt("return",l.getModel());case 3:case"end":return t.stop()}}),t)})))}else this.error('clazz "cv.io.listmodel.'.concat(n.getAttribute("class"),'" not found'))}else{var v=n.querySelector(":scope > script"),b=n.querySelectorAll(":scope > cv-data");if(v){this._getModel=new Function('"use strict";let model = []; '+v.innerText.trim()+"; return model");this._model=this._getModel()}else if(i.length>0){this._getModel=this.getValue;r=!0}else{if(!(b.length>0)){this.error("cv-list > model must have at least one read address, src-attribute, cv-data child or a script that fills the model.");return}this._model=[];this._getModel=function(){return t._model};b.forEach((function(e,r){var n,o={index:r},i=_createForOfIteratorHelper(e.attributes);try{for(i.s();!(n=i.n()).done;){var s=n.value;o[s.name]=s.value}}catch(t){i.e(t)}finally{i.f()}t._model.push(o)}))}}i.length>0&&e.addEventListener("stateUpdate",(function(e){return t.onStateUpdate(e)}));if(!r){this.isVisible()&&this.refresh();e.hasAttribute("refresh")&&this.setRefresh(parseInt(e.getAttribute("refresh")))}}else this.error("cv-list needs a model")},onStateUpdate:function(t){"refresh"===t.detail.target?this.isVisible()?this.refresh():this._lastRefresh=null:cv.ui.structure.tile.components.List.superclass.prototype.onStateUpdate.call(this,t);t.stopPropagation()},_applyValue:function(){this._lastRefresh=0;this.refresh()},refresh:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,s,a,c,u,l,f,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t._element;n=r.querySelector(":scope > template:not([when])");o=[];"function"==typeof t._getModel&&(o=t._getModel());if(!(o instanceof Promise)){e.next=14;break}e.prev=5;e.next=8;return o;case 8:o=e.sent;e.next=14;break;case 11:e.prev=11;e.t0=e.catch(5);t.error("error refreshing async model:",e.t0);case 14:i=r.querySelector(":scope > ul");if("false"!==n.getAttribute("wrap")){e.next=19;break}i=r;e.next=30;break;case 19:if(!n.hasAttribute("target")){e.next=29;break}e.t1=n.getAttribute("target");e.next="parent"===e.t1?23:26;break;case 23:i=r.parentElement;r.style.display="none";return e.abrupt("break",27);case 26:throw new Error("invalid target: "+n.getAttribute("target"));case 27:e.next=30;break;case 29:if(!i){(i=document.createElement("ul")).classList.add("content");r.appendChild(i)}case 30:t.debug("refreshing with new model length",o.length);if(!(Array.isArray(o)||o instanceof qx.data.Array)){e.next=54;break}"function"==typeof t._filterModel&&(o=o.filter(t._filterModel));"function"==typeof t._sortModel&&o.sort(t._sortModel);t._limit&&(o=o.slice(0,t._limit));if(0!==o.length){e.next=45;break}if(!(s=r.querySelector(':scope > template[when="empty"]'))||i.querySelector(":scope > .empty-model")){e.next=43;break}for(;i.firstElementChild&&i.firstElementChild.hasAttribute("data-row");)i.removeChild(i.firstElementChild);(a=s.content.firstElementChild.cloneNode(!0)).classList.add("empty-model");i.appendChild(a);return e.abrupt("return");case 43:e.next=47;break;case 45:(c=i.querySelector(":scope > .empty-model"))&&c.remove();case 47:u=document.createElement("template");for(l=o.length;l<t._model.length;l++)(f=i.querySelector(':scope > [data-row="'.concat(l,'"]')))&&f.remove();p=function(e,r){var n=-1;if(e.endsWith("]")){n=parseInt(e.substring(e.indexOf("[")+1,e.length-1));if(isNaN(n)){t.error("error parsing array index from "+e,e.substring(e.indexOf("[")+1,e.length-1));return""}e=e.substring(0,e.indexOf("["))}if(Object.prototype.hasOwnProperty.call(r,e)){var o=r[e];return n>=0&&Array.isArray(o)?o[n]:o}return""};o.forEach((function(t,e){var r=i.querySelector(':scope > [data-row="'.concat(e,'"]')),o=n.innerHTML.replaceAll(/\${([^}]+)}/g,(function(r,n){if("index"===n)return""+e;if(n.includes("||")){var o,i="",s=_createForOfIteratorHelper(n.split("||").map((function(t){return t.trim()})));try{for(s.s();!(o=s.n()).done;){var a=o.value;if(i=p(a,t))return i}}catch(t){s.e(t)}finally{s.f()}}return p(n,t)}));u.innerHTML=o;u.content.firstElementChild.querySelectorAll("[when]").forEach((function(t){var e=t.getAttribute("when").split("=").map((function(t){return t.trim()})),r=_slicedToArray(e,2);r[0]!=r[1]?t.parentElement.removeChild(t):t.removeAttribute("when")}));if(r){r.innerHTML=u.content.firstElementChild.innerHTML;r.setAttribute("data-row",""+e)}else{u.content.firstElementChild.setAttribute("data-row",""+e);i.appendChild(u.content.cloneNode(!0))}}));t._model=o;e.next=55;break;case 54:t.error("model must be an array",o);case 55:case"end":return e.stop()}}),e,null,[[5,11]])})))()}},destruct:function(){this._disposeObjects("_modelInstance","_timer");this._model=null;this._filterModel=null;this._sortModel=null;this._target=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"list",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.List.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.ListItem",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{_init:function(){var t=this;cv.ui.structure.tile.components.ListItem.superclass.prototype._init.call(this);this._element.fireEvent=function(e,r){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{value:r,source:t}});t._element.dispatchEvent(n)}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"listitem",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.ListItem.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"qx.event.message.Bus":{},"qx.event.Registration":{},"qx.event.Timer":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Menu",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{model:{check:["pages","menuItems"],apply:"_applyModel"},appearance:{check:["text","icons","dock"],init:"text",apply:"_applyAppearance"},depth:{check:"!isNaN(value) && value >= -1 && value <= 100",init:-1,apply:"_applyDepth"},domReady:{check:"Boolean",init:!1,apply:"_generateMenu"},showLabels:{check:"Boolean",init:!0}},members:{_applyAppearance:function(t,e){var r=document.querySelector("main");"dock"===e&&r.classList.remove("has-dock");"dock"===t&&r.classList.add("has-dock")},_applyDepth:function(){this.isDomReady()&&this._generateMenu()},_onDomAppended:function(){this.setDomReady(!0);qx.event.message.Bus.unsubscribe("setup.dom.append",this._onDomAppended,this)},_applyModel:function(t){var e=this;if(t){var r=document.createElement("ul");this._element.appendChild(r);qx.event.Registration.addListener(document,"pointerdown",this._onPointerDown,this);if("pages"===t){var n=document.createElement("a");n.href="#";n.classList.add("menu");n.onclick=function(t){return e._onHamburgerMenu(t)};var o=document.createElement("i");n.appendChild(o);this._element.appendChild(n);qx.event.message.Bus.subscribe("setup.dom.append",this._onDomAppended,this);qx.event.message.Bus.subscribe("cv.ui.structure.tile.currentPage",this._onPageChange,this);qx.event.Registration.addListener(this._element,"swipe",this._onSwipe,this);o.classList.add("ri-menu-line")}else if("menuItems"===t){var i=document.createElement("i");i.classList.add("ri-more-2-fill");this._element.appendChild(i);this._element.onclick=function(t){return e._onHamburgerMenu(t)};r.classList.add("context-menu");this._generateMenu()}}else this.error("visual-model of type",t,"is not implemented")},_init:function(){var t=this._element,e=t.hasAttribute("model")?t.getAttribute("model"):t.querySelectorAll(":scope > cv-menu-item").length>0?"menuItems":null;if(e){"false"===t.getAttribute("show-labels")&&this.setShowLabels(!1);this.setModel(e)}else this.error("no model defined, menu will be empty")},_generateMenu:function(){var t=this;switch(this.getModel()){case"pages":var e=window.location.hash.substring(1),r=document.querySelector("main");if(r){var n=document.querySelector("cv-page");n&&(r=n.parentElement)}var o=this._element.querySelector(":scope > ul");if(o){o.replaceChildren();this.__P_79_0(o,r,e,0)}break;case"menuItems":var i=this._element.querySelector(":scope > ul");if(i){i.replaceChildren();var s,a=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > cv-menu-item"));try{var c=function(){var e=s.value,r=e.getAttribute("name")||"",n=e.getAttribute("icon")||"",o=document.createElement("li");if(n){var a=document.createElement("i");a.classList.add(n);a.title=r;o.appendChild(a)}if(t.isShowLabels()){var c=document.createTextNode(r);o.appendChild(c)}o.addEventListener("click",(function(t){e.getInstance().onClick(t)}));i.appendChild(o)};for(a.s();!(s=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}}}},_onHamburgerMenu:function(t){var e="open";if("pages"===this.getModel()){e="responsive";var r,n=_createForOfIteratorHelper(this._element.querySelectorAll("details"));try{for(n.s();!(r=n.n()).done;){r.value.setAttribute("open","")}}catch(t){n.e(t)}finally{n.f()}}this._element.classList.toggle(e);t.stopPropagation()},_onPointerDown:function(t){var e=t.getTarget();e.classList.contains("menu")||e.parentElement&&e.parentElement.classList.contains("menu")||"cv-menu"===e.nodeName.toLowerCase()||e.parentElement&&"cv-menu"===e.parentElement.nodeName.toLowerCase()||("summary"!==e.tagName.toLowerCase()&&"p"!==e.tagName.toLowerCase()?qx.event.Timer.once(this._closeAll,this,100):this._closeAll(t.getTarget().parentElement))},_onSwipe:function(t){if("left"===t.getDirection()){var e=this._element.querySelector("li.active + li > a");e&&e.click()}else{var r=this._element.querySelector("li.active");if(r&&r.previousElementSibling&&"li"===r.previousElementSibling.tagName.toLowerCase()){var n=r.previousElementSibling.querySelector(":scope > a");n&&n.click()}}},_closeAll:function(t){if(this._element.classList.contains("open"))this._element.classList.remove("open");else if(this._element.classList.contains("responsive"))this._element.classList.remove("responsive");else{var e,r=_createForOfIteratorHelper(this._element.querySelectorAll("details[open]"));try{for(r.s();!(e=r.n()).done;){var n=e.value;t&&n===t||n.removeAttribute("open")}}catch(t){r.e(t)}finally{r.f()}}},__P_79_0:function(t,e,r,n){var o=this;if(e){var i,s=e.querySelectorAll(':scope > cv-page:not([menu="false"])'),a=_createForOfIteratorHelper(s.values());try{var c=function(){var e=i.value,s=e.getAttribute("id");if(!s){o.error("page has no id, skipping");return"continue"}var a=e.getAttribute("name")||"",c=e.getAttribute("icon")||"",u=document.createElement("li"),l=document.createElement("a");l.setAttribute("href","#"+s);if(c){var f=document.createElement("i");f.classList.add(c);f.title=a;l.appendChild(f)}if(o.isShowLabels()){var p=document.createTextNode(a);l.appendChild(p)}r===s&&u.classList.add("active");t.appendChild(u);var d=o.getDepth();if((d<0||d>n)&&e.querySelectorAll(':scope > cv-page:not([menu="false"])').length>0){var y=document.createElement("div");y.classList.add("details");var h=document.createElement("div");h.classList.add("summary");h.addEventListener("click",(function(t){y.hasAttribute("open")?y.removeAttribute("open"):y.setAttribute("open","")}));l.addEventListener("click",(function(t){("touch"!==t.pointerType||t.currentTarget.clientWidth-t.offsetX>=8)&&t.stopPropagation()}));var _=e.getAttribute("icon")||"";if(e.querySelector(":scope > *:not(cv-page)"))h.appendChild(l);else{var m=document.createElement("p");if(_){var v=document.createElement("i");v.classList.add(_);v.title=a;m.appendChild(v)}o.isShowLabels()&&m.appendChild(document.createTextNode(a));h.appendChild(m)}y.appendChild(h);var b=document.createElement("ul");y.appendChild(b);o.__P_79_0(b,e,r,n++);u.appendChild(y)}else u.appendChild(l)};for(a.s();!(i=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}}},_onPageChange:function(t){var e,r=t.getData(),n=_createForOfIteratorHelper(this._element.querySelectorAll("li.active, li.sub-active"));try{for(n.s();!(e=n.n()).done;){var o=e.value;o.classList.remove("active");o.classList.remove("sub-active")}}catch(t){n.e(t)}finally{n.f()}var i,s=_createForOfIteratorHelper(this._element.querySelectorAll('a[href="#'.concat(r.id,'"]')));try{for(s.s();!(i=s.n()).done;)for(var a=i.value.parentElement,c="active";a&&"cv-menu"!==a.tagName.toLowerCase();){if("li"===a.tagName.toLowerCase()){a.classList.add(c);c="sub-active"}a=a.parentElement}}catch(t){s.e(t)}finally{s.f()}}},destruct:function(){qx.event.Registration.removeListener(document,"pointerdown",this._onPointerDown,this);qx.event.message.Bus.unsubscribe("cv.ui.structure.tile.currentPage",this._onPageChange,this)},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"menu",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}_createClass(n,null,[{key:"observedAttributes",get:function(){return["appearance","depth"]}}]);return n}(QxConnector))}});cv.ui.structure.tile.components.Menu.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.elements.Address":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.MenuAction",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{_currentState:null,_init:function(){var t=this;cv.ui.structure.tile.components.MenuAction.superclass.prototype._init.call(this);switch(this._element.getAttribute("action")){case"toggleState":var e,r=!1,n=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > cv-address"));try{for(n.s();!(e=n.n()).done;){var o=e.value;r=!0;"write"!==o.getAttribute("mode")&&this._element.addEventListener("stateUpdate",(function(e){t.onStateUpdate(e);e.stopPropagation()}))}}catch(t){n.e(t)}finally{n.f()}r||this.error('a cv-menu-item with action "toggleState" needs at least one cv-address to read the write the state,');break;case"popup":this._element.querySelector(":scope > cv-popup")||this.error('a cv-menu-item with action "popup" must have a cv-popup as child.')}},onClick:function(t){switch(this._element.getAttribute("action")){case"popup":var e=this._element.querySelector(":scope > cv-popup");e&&e.getInstance().open();t.stopPropagation();break;case"toggleState":var r,n=new CustomEvent("sendState",{detail:{value:!this._currentState,source:this}}),o=_createForOfIteratorHelper(this._element.querySelectorAll(":scope > cv-address"));try{for(o.s();!(r=o.n()).done;){var i=r.value;"read"!==i.getAttribute("mode")&&i.dispatchEvent(n)}}catch(t){o.e(t)}finally{o.f()}t.stopPropagation()}},onStateUpdate:function(t){var e="1"==t.detail.state;if(t.detail.source instanceof cv.ui.structure.tile.elements.Address){var r=t.detail.source.getElement();r.hasAttribute("value")&&(e=t.detail.state==r.getAttribute("value"))}this._currentState=e}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"menu-item",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.MenuAction.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,s=Object.create(i.prototype),a=new S(o||[]);return n(s,"_invoke",{value:P(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};c(h,i,(function(){return this}));var _=Object.getPrototypeOf,m=_&&_(_(A([])));m&&m!==e&&r.call(m,i)&&(h=m);var v=y.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,s,a){var c=l(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function P(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=w(s,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function w(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(v,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,s,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function asyncGeneratorStep(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){r(t);return}a.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){asyncGeneratorStep(i,n,o,s,a,"next",t)}function a(t){asyncGeneratorStep(i,n,o,s,a,"throw",t)}s(void 0)}))}}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.TemplateEngine":{},"cv.util.ScriptLoader":{},"qx.Part":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Plugin",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,statics:{PL_COUNTER:0},members:{__P_80_0:null,_init:function(){var t=this;return _asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,n,o,i,s,a,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cv.ui.structure.tile.components.Plugin.superclass.prototype._init.call(t);r="";if(!(r=t._element.hasAttribute("name")?t._element.getAttribute("name"):t._element.firstElementChild.nodeName.toLowerCase())){e.next=21;break}n="plugin-"+r;e.next=7;return t.loadPluginPart(n);case 7:if(!e.sent){e.next=19;break}o=null;e.t0=_regeneratorRuntime().keys(cv.plugins);case 11:if((e.t1=e.t0()).done){e.next=18;break}if((i=e.t1.value).toLowerCase()!==r){e.next=16;break}o=cv.plugins[i];return e.abrupt("break",18);case 16:e.next=11;break;case 18:if(o){cv.ui.structure.tile.components.Plugin.PL_COUNTER++;s="id_9_"+cv.ui.structure.tile.components.Plugin.PL_COUNTER;a=o.parse(t._element.firstElementChild,s,"","text");cv.TemplateEngine.getInstance().setDomFinished(!1);t.__P_80_0=new o(a);t._element.innerHTML='<div class="widget_container" id="'.concat(s,'" data-type="').concat(a.$$type,'">').concat(t.__P_80_0.getDomString(),"</div>");c=cv.util.ScriptLoader.getInstance();window.requestAnimationFrame((function(){c.isFinished()?cv.TemplateEngine.getInstance().setDomFinished(!0):c.addListenerOnce("finished",(function(){cv.TemplateEngine.getInstance().setDomFinished(!0)}))}))}else t.error("no main plugin class found for "+n);case 19:e.next=22;break;case 21:t.error("no plugin name provided!");case 22:case"end":return e.stop()}}),e)})))()},loadPluginPart:function(t){var e=this;return _asyncToGenerator(_regeneratorRuntime().mark((function r(){var n;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=qx.Part.getInstance().getParts()[t])){r.next=3;break}return r.abrupt("return",new Promise((function(t){n.load((function(){return t(n)}),e)})));case 3:e.error("plugin",t,"does not exist");return r.abrupt("return",Promise.resolve(null));case 5:case"end":return r.stop()}}),r)})))()}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"plugin",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Plugin.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"qx.event.message.Bus":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.RoundProgress",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MVisibility,properties:{progress:{check:"Number",apply:"_applyProgress"},text:{check:"String",apply:"_applyText"},type:{check:["circle","semiCircle"],init:"circle"},min:{check:"Number",init:0},max:{check:"Number",init:100}},members:{__P_81_0:null,__P_81_1:null,__P_81_2:null,__P_81_3:null,__P_81_4:null,__P_81_5:null,__P_81_6:null,__P_81_7:null,__P_81_8:null,_queuedFitText:null,_init:function(){var t=this;cv.ui.structure.tile.components.RoundProgress.superclass.prototype._init.call(this);var e=this._element,r=document.querySelector(":root").style,n=e.hasAttribute("radius"),o=this.__P_81_4=e.getAttribute("radius")||parseInt(r.getPropertyValue("--tileCellWidth"))||56,i=e.getAttribute("stroke")||8,s=this.__P_81_3=o-i/2;this.__P_81_1=2*s*Math.PI;if(e.hasAttribute("min")){var a=parseInt(e.getAttribute("min"));isNaN(a)||this.setMin(a)}if(e.hasAttribute("max")){var c=parseInt(e.getAttribute("max"));isNaN(c)||this.setMax(c)}e.hasAttribute("type")&&this.setType(e.getAttribute("type"));var u=this.getType(),l="semiCircle"===u?o:2*o,f="http://www.w3.org/2000/svg",p=document.createElementNS(f,"svg");p.setAttribute("height",l);p.setAttribute("width",""+2*o);p.setAttribute("type",u);if("circle"===u){if(!e.hasAttribute("no-background")){var d=document.createElementNS(f,"circle");d.classList.add("bg");d.setAttribute("r",""+s);d.setAttribute("cx","50%");d.setAttribute("cy","50%");d.setAttribute("fill","transparent");d.setAttribute("stroke-width",i);e.hasAttribute("background-color")&&(d.style.stroke=e.getAttribute("background-color"));p.appendChild(d)}var y=document.createElementNS(f,"circle");y.classList.add("bar");y.setAttribute("r",""+s);y.setAttribute("cx","50%");y.setAttribute("cy","50%");y.setAttribute("stroke-width",i);y.setAttribute("stroke-dasharray","".concat(this.__P_81_1," ").concat(this.__P_81_1));y.setAttribute("stroke-dashoffset",this.__P_81_1);e.hasAttribute("foreground-color")&&(y.style.stroke=e.getAttribute("foreground-color"));p.appendChild(y)}else if("semiCircle"===u){if(!e.hasAttribute("no-background")){var h=document.createElementNS(f,"path");h.classList.add("bg");h.setAttribute("d","M ".concat(i/2," ").concat(o," A ").concat(s," ").concat(s," 0 0 1 ").concat(2*o-i/2," ").concat(o));h.setAttribute("fill","transparent");h.setAttribute("stroke-width",i);e.hasAttribute("background-color")&&(h.style.stroke=e.getAttribute("background-color"));p.appendChild(h)}this.__P_81_2={x:i/2,y:o};var _=document.createElementNS(f,"path");_.classList.add("bar");_.setAttribute("d","M ".concat(i/2," ").concat(o," A ").concat(s," ").concat(s," 0 0 0 ").concat(i/2," ").concat(o));_.setAttribute("fill","transparent");_.setAttribute("stroke-width",i);e.hasAttribute("foreground-color")&&(_.style.stroke=e.getAttribute("foreground-color"));p.appendChild(_)}e.replaceChildren(p,document.createElement("label"));this.__P_81_7=2*o-2*i-24;n||qx.event.message.Bus.subscribe("cv.design.tile.cellWidthChanged",(function(r){t.__P_81_4=r.getData();t.__P_81_3=t.__P_81_4-i/2;t.__P_81_1=2*t.__P_81_3*Math.PI;l="semiCircle"===u?t.__P_81_4:2*t.__P_81_4;var n=e.querySelector(":scope > svg");n.setAttribute("height",""+l);n.setAttribute("width",""+2*t.__P_81_4);if("circle"===u)t._element.querySelectorAll(":scope > svg > circle").forEach((function(e){e.setAttribute("r",""+t.__P_81_3);if(e.classList.contains("bar")){e.setAttribute("stroke-dasharray",t.__P_81_1+" "+t.__P_81_1);e.setAttribute("stroke-dashoffset",""+t.__P_81_1)}}));else if("semiCircle"===u){t.__P_81_2.y=t.__P_81_4;var o=t._element.querySelector(":scope > svg > path.bg");o&&o.setAttribute("d","M ".concat(i/2," ").concat(t.__P_81_4," A ").concat(t.__P_81_3," ").concat(t.__P_81_3," 0 0 1 ").concat(2*t.__P_81_4-i/2," ").concat(t.__P_81_4))}t._applyProgress(t.isPropertyInitialized("progress")?t.getProgress():0)}))},__P_81_9:function(t){var e=t*(Math.PI/180);return{x:this.__P_81_4-this.__P_81_3*Math.cos(e),y:this.__P_81_4-this.__P_81_3*Math.sin(e)}},_applyProgress:function(t){if(this.isConnected()){var e,r,n=t-this.getMin(),o=Math.max(0,Math.min(100,100/(this.getMax()-this.getMin())*n));switch(this.getType()){case"circle":(e=this._element.querySelector(":scope > svg > circle.bar")).setAttribute("stroke-dashoffset",""+this.__P_81_1-o/100*this.__P_81_1);break;case"semiCircle":e=this._element.querySelector(":scope > svg > path.bar");r=this.__P_81_9(1.8*o);e.setAttribute("d",["M",this.__P_81_2.x,this.__P_81_2.y,"A",this.__P_81_3,this.__P_81_3,0,0,1,r.x,r.y].join(" "))}}},_fitText:function(){if(this.__P_81_5&&this.__P_81_5.textContent)if(this.isVisible()){if(!this.__P_81_6){this.__P_81_6=document.createElement("canvas");this.__P_81_10=this.__P_81_6.getContext("2d");var t=window.getComputedStyle(this.__P_81_5);this.__P_81_10.font=t.getPropertyValue("font");this.__P_81_8=t.getPropertyValue("font-size")}var e=this.__P_81_10.measureText(this.__P_81_5.textContent);if(e.width>this.__P_81_7){var r=this.__P_81_7/e.width;this.__P_81_5.style.fontSize=Math.floor(parseInt(this.__P_81_8)*r)+"px"}else this.__P_81_5.style.fontSize=this.__P_81_8;this._queuedFitText=!1}else this._queuedFitText=!0},_applyVisible:function(t){t&&this._queuedFitText&&this._fitText()},_applyText:function(t){if(this.isConnected()){this.__P_81_5||(this.__P_81_5=this._element.querySelector(":scope > label"));this.__P_81_5.textContent=t;t?this._fitText():this.__P_81_8&&(this.__P_81_5.style.fontSize=this.__P_81_8)}}},destruct:function(){this.__P_81_5=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"round-progress",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.RoundProgress.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Select",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{__P_82_0:null,__P_82_1:null,__P_82_2:null,_init:function(){var t=this;cv.ui.structure.tile.components.Select.superclass.prototype._init.call(this);var e=this._element;this.__P_82_0=new Map;var r=this.__P_82_2=document.createElement("div");r.classList.add("popup");e.querySelectorAll(":scope > cv-option").forEach((function(e,n){r.appendChild(e);e.hasAttribute("key")||e.setAttribute("key",""+n);t.__P_82_0.set(e.getAttribute("key"),e)}));var n=this.__P_82_1=document.createElement("span");n.classList.add("value");e.appendChild(n);e.appendChild(r);var o=document.createElement("cv-icon");o.classList.add("dropdown");o.classList.add("ri-arrow-down-s-line");e.appendChild(o);this._writeAddresses.length>0&&e.addEventListener("click",(function(e){return t.onClicked(e)}))},onClicked:function(t){var e,r=getComputedStyle(this.__P_82_2),n=_createForOfIteratorHelper(t.path);try{for(n.s();!(e=n.n()).done;){var o=e.value;if("cv-option"===o.tagName.toLowerCase()){this._sendSelection(o.getAttribute("key"),!0);break}if(o===t.currentTarget)break}}catch(t){n.e(t)}finally{n.f()}"none"===r.getPropertyValue("display")?this.__P_82_2.style.display="block":this.__P_82_2.style.display="none"},_sendSelection:function(t,e){var r=new CustomEvent("sendState",{detail:{value:t,source:this}});this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||"click"===t.getAttribute("on")})).forEach((function(t){return t.dispatchEvent(r)}));!0===e&&this.setValue(t)},_updateValue:function(t,e){if(this.__P_82_0.has(t)){this.__P_82_1.innerHTML="";var r=this.__P_82_0.get(t);if(r.children.length>0){var n,o=_createForOfIteratorHelper(r.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.__P_82_1.appendChild(i.cloneNode())}}catch(t){o.e(t)}finally{o.f()}}else this.__P_82_1.innerHTML=r.innerHTML}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"select",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Select.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.util.Function":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Slider",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{stepWidth:{check:"Number",init:5},min:{check:"Number",init:1,apply:"_applyMin"},max:{check:"Number",init:100,apply:"_applyMax"},showValue:{check:"Boolean",init:!0,apply:"_applyShowValue"},throttleInterval:{check:"Number",init:250,apply:"_applyThrottleInterval"}},members:{__P_83_0:null,__P_83_1:null,_init:function(){var t=this;cv.ui.structure.tile.components.Slider.superclass.prototype._init.call(this);var e=this._element;e.hasAttribute("throttle-interval")?this.setThrottleInterval(parseInt(e.getAttribute("throttle-interval"))):this._applyThrottleInterval(this.getThrottleInterval());var r=e.querySelector(":scope > input");if(!r){(r=document.createElement("input")).classList.add("slider");r.setAttribute("type","range");e.insertBefore(r,e.querySelector(":scope > .up"));r.oninput=function(){return t.__P_83_0.call()}}this.__P_83_1=r;e.hasAttribute("step-width")&&this.setStepWidth(parseInt(e.getAttribute("step-width")));e.hasAttribute("min")&&this.setMin(parseInt(e.getAttribute("min")));e.hasAttribute("max")&&this.setMax(parseInt(e.getAttribute("max")));e.hasAttribute("hide-value")&&"true"===e.getAttribute("hide-value")?this.setShowValue(!1):this._applyShowValue(!0);var n=e.querySelector(":scope > .decrease");n&&n.addEventListener("click",(function(e){return t.onDecrease()}));var o=e.querySelector(":scope > .increase");o&&o.addEventListener("click",(function(e){return t.onIncrease()}))},_applyThrottleInterval:function(t){var e=this;this.__P_83_0=t>0?cv.util.Function.throttle(this.onInput,t,{trailing:!0},this):{call:function(){return e.onInput()},abort:function(){}}},_applyMin:function(t){this._element.querySelector(":scope > input").setAttribute("min",""+t)},_applyMax:function(t){this._element.querySelector(":scope > input").setAttribute("max",""+t)},_applyShowValue:function(t){var e=this._element.querySelector(":scope > label.value");if(t&&!e){(e=document.createElement("label")).classList.add("value");e.classList.add("secondary");this._element.insertBefore(e,this._element.firstChild)}},_updateValue:function(t,e){var r=this._element.querySelector(":scope > input");r&&(r.value=e);if(this.isShowValue()){var n=this._element.querySelector(":scope > label.value");n&&(n.innerText=t)}},onInput:function(){this.__P_83_2(this.__P_83_1.value)},onDecrease:function(){var t=this.getValue()-this.getStepWidth();this.__P_83_2(t,"decrease")},onIncrease:function(){var t=this.getValue()+this.getStepWidth();this.__P_83_2(t,"increase")},__P_83_2:function(t,e){var r=new CustomEvent("sendState",{detail:{value:t,source:this}});this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||t.getAttribute("on")===e})).forEach((function(t){return t.dispatchEvent(r)}))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"slider",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Slider.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Spinner",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{stepWidth:{check:"Number",init:1},mode:{check:["relative","absolute"],init:"absolute"}},members:{_init:function(){var t=this;cv.ui.structure.tile.components.Spinner.superclass.prototype._init.call(this);var e=this._element;e.hasAttribute("step-width")&&this.setStepWidth(parseFloat(e.getAttribute("step-width")));e.hasAttribute("mode")&&this.setMode(e.getAttribute("mode"));var r=e.querySelector(":scope > .value");if(!r){(r=document.createElement("label")).classList.add("value");r.classList.add("primary");e.appendChild(r)}var n=document.createElement("div");n.classList.add("clickable");n.classList.add("left");var o=document.createElement("cv-icon");o.classList.add("ri-arrow-down-s-line");n.addEventListener("click",(function(){return t.onDecrease()}));n.appendChild(o);e.insertBefore(n,r);var i=document.createElement("div");i.classList.add("clickable");i.classList.add("right");var s=document.createElement("cv-icon");s.classList.add("ri-arrow-up-s-line");i.appendChild(s);i.addEventListener("click",(function(){return t.onIncrease()}));e.appendChild(i)},onDecrease:function(){var t="absolute"===this.getMode()?this.getValue()-this.getStepWidth():-1*this.getStepWidth();this.__P_84_0(t,"decrease")},onIncrease:function(){var t="absolute"===this.getMode()?this.getValue()+this.getStepWidth():this.getStepWidth();this.__P_84_0(t,"increase")},_updateValue:function(t){var e=this._element.querySelector(".value");e&&(e.innerHTML=t)},__P_84_0:function(t,e){var r=new CustomEvent("sendState",{detail:{value:t,source:this}});this._writeAddresses.filter((function(t){return!t.hasAttribute("on")||t.getAttribute("on")===e})).forEach((function(t){return t.dispatchEvent(r)}))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"spinner",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Spinner.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MVisibility":{require:!0},"cv.ui.structure.tile.MResize":{require:!0},"qx.util.Function":{},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.components.Value",{extend:cv.ui.structure.tile.components.AbstractComponent,include:[cv.ui.structure.tile.MVisibility,cv.ui.structure.tile.MResize],members:{_queuedOverflowDetection:null,_debouncedDetectOverflow:null,_init:function(){cv.ui.structure.tile.components.Value.superclass.prototype._init.call(this);this._debouncedDetectOverflow=qx.util.Function.debounce(this._detectOverflow,20);var t=this._element.querySelector(".value");if(t&&"label"===t.tagName.toLowerCase()){this.setResizeTarget(this._element);this.addListener("resized",this._debouncedDetectOverflow,this)}},_applyVisible:function(t){if(t)this._queuedOverflowDetection&&this._debouncedDetectOverflow();else{var e=this._element.querySelector(".value");e&&e.classList.contains("scroll")&&e.classList.remove("scroll")}},_detectOverflow:function(){var t=this._element.querySelector(".value");if(this.isVisible()){this._queuedOverflowDetection=!1;t.clientWidth>t.parentElement.clientWidth?t.classList.add("scroll"):t.classList.remove("scroll")}else this._queuedOverflowDetection=!0},_updateValue:function(t,e){var r=this._element.querySelector(".value"),n="";if(r){switch(r.tagName.toLowerCase()){case"cv-icon":r._instance.setId(t);this._element.hasAttribute("styling")&&(n=cv.Application.structureController.styleValue(this._element.getAttribute("styling"),e,this.__P_85_0));r._instance.setStyleClass(n);break;case"meter":r.setAttribute("value",t);r.innerHTML=""+t;break;case"cv-round-progress":"string"==typeof e&&(e=parseInt(e));r._instance.setProgress(e);r._instance.setText(""+t);break;case"label":r.innerHTML=t;this._debouncedDetectOverflow()}}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"value",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.components.Value.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();s=t.done;return t},e:function(t){a=!0;i=t},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"cv.data.Model":{},"cv.Config":{},"cv.io.BackendConnections":{},"qx.log.Logger":{},"qx.locale.Manager":{},"cv.core.notifications.Router":{},"cv.TemplateEngine":{},"qx.event.message.Bus":{},"cv.Transform":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Backend",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{_name:null,__P_87_0:null,_init:function(){var t,e=this,r=this._element,n=r.getAttribute("type"),o=r.hasAttribute("uri")?r.getAttribute("uri"):"";if(o)try{t=new URL(o,window.location.origin+window.location.pathname)}catch(t){this.error("Error parsing uri: "+o)}if(n){var i=null;r.hasAttribute("username")?i={username:r.getAttribute("username"),password:r.getAttribute("password")||""}:t&&t.username&&(i={username:t.username,password:t.password});var s,a=cv.data.Model.getInstance(),c=t?t.toString():null;switch(n){case"knxd":s="backendKnxdUrl";break;case"openhab":s="backendOpenHABUrl";break;case"mqtt":s="backendMQTTUrl"}s&&(cv.Config.URL[s]?c=cv.Config.URL[s]:!c&&cv.Config.server[s]&&(c=cv.Config.server[s]));var u=n;if(r.hasAttribute("name"))u=r.getAttribute("name");else if(cv.io.BackendConnections.hasClient("main")){if("config"===cv.io.BackendConnections.getClient("main").configuredIn){qx.log.Logger.warn(this,'there is already a backend registered with name "main" and type '.concat(n," skipping this one"));return}}else u="main";qx.log.Logger.debug(this,"init backend",u);if(cv.io.BackendConnections.hasClient(u)){var l={topic:"cv.config.error",title:qx.locale.Manager.tr("Config error"),message:qx.locale.Manager.tr('There already exists a backend named: "%1"',u),severity:"urgent",unique:!0,deletable:!0};cv.core.notifications.Router.dispatchMessage(l.topic,l);return}var f=cv.io.BackendConnections.addBackendClient(u,n,c,"config");this._client=f;this._name=u;this.__P_87_0=[];f.update=function(t){return a.updateFrom(u,t)};f.login(!0,i,(function(){e.debug(u,"connected");r.hasAttribute("default")&&"true"===r.getAttribute("default")&&a.setDefaultBackendName(u);var t=function(){var t,r=_createForOfIteratorHelper(e.__P_87_0);try{for(r.s();!(t=r.n()).done;){var n=_slicedToArray(t.value,2),o=n[0],i=n[1];e.debug(u,"apply update",o,i);a.onUpdate(o,i,u)}}catch(t){r.e(t)}finally{r.f()}var s=a.getAddresses(u);e.debug(u,"subscribing to",s.length,"addresses");0!==s.length&&f.subscribe(s)};cv.TemplateEngine.getInstance().isDomFinished()?t():qx.event.message.Bus.subscribe("setup.dom.finished",(function(){t()}),e)}));var p,d=_createForOfIteratorHelper(r.querySelectorAll(":scope > cv-data"));try{for(d.s();!(p=d.n()).done;){var y=p.value;if(y.hasAttribute("address")){var h=y.textContent.trim();if(y.hasAttribute("transform")){var _=y.getAttribute("transform");h=cv.Transform.encodeBusAndRaw({transform:_},h).bus}this.__P_87_0.push([y.getAttribute("address"),h])}}}catch(t){d.e(t)}finally{d.f()}}else this.error("<cv-backend> must have a type attribute")},_disconnected:function(){if(this._client){var t=cv.data.Model.getInstance();this._element.hasAttribute("default")&&"true"===this._element.getAttribute("default")&&t.resetDefaultBackendName();this._client.terminate();cv.io.BackendConnections.removeClient(this._client);this._client.dispose();this._client=null}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"backend",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Backend.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{require:!0},"qx.io.request.Xhr":{},"cv.Config":{},"cv.Application":{},"qx.util.Request":{},"qx.locale.Manager":{},"cv.core.notifications.Router":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Loader",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,members:{_init:function(){var t,e=this._element,r=e.getAttribute("type"),n=e.getAttribute("src");if(n){switch(r){case"css":(t=document.createElement("link")).setAttribute("type","text/css");t.setAttribute("rel","stylesheet");t.setAttribute("href",n);break;case"js":(t=document.createElement("script")).setAttribute("type","text/javascript");t.setAttribute("src",n);break;case"templates":this.loadXml(n,r)}t&&e.appendChild(t)}},loadXml:function(t){var e=this,r=new qx.io.request.Xhr(t);r.set({accept:"application/xml",cache:!cv.Config.forceReload});r.addListenerOnce("success",(function(t){var e,r=t.getTarget().getResponse(),n=r,o=cv.Application.structureController.getRenderTarget();if(!n.documentElement.xmlns){var i=t.getTarget().getResponseText();i=i.replace("<templates",'<templates xmlns="http://www.w3.org/1999/xhtml"');n=(new DOMParser).parseFromString(i,"text/xml")}for(;e=n.documentElement.firstElementChild;)o.appendChild(e);cv.Application.structureController.registerTemplates(r)}));r.addListener("statusError",(function(t){var n=t.getTarget().getTransport().status;qx.util.Request.isSuccessful(n)?e.handleError(n,null):e.handleError("filenotfound",r.getUrl())}));r.send()},handleError:function(t,e){var r,n=qx.locale.Manager.tr("File Error!").translate().toString(),o="";switch(t){case"parsererror":o=qx.locale.Manager.tr("Invalid XML file!");break;case"filenotfound":o=qx.locale.Manager.tr("404: File not found, %1.",e).translate().toString();break;default:o=qx.locale.Manager.tr('Unhandled error of type "%1"',t).translate().toString();o+=e?": "+e:"."}var i={topic:"cv.error",title:n,message:o};r;cv.core.notifications.Router.dispatchMessage(i.topic,i);this.error(this,o.toString())}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"loader",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Loader.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.AbstractCustomElement":{construct:!0,require:!0},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Mapping",{extend:cv.ui.structure.tile.elements.AbstractCustomElement,construct:function(t){cv.ui.structure.tile.elements.AbstractCustomElement.constructor.call(this,t);this.__P_88_0={}},members:{__P_88_0:null,_applyConnected:function(t,e,r){cv.ui.structure.tile.elements.Mapping.superclass.prototype._applyConnected.call(this,t,e,r);this._element.tagName.toLowerCase().endsWith("mapping")&&(t?cv.Application.structureController.addMapping(this._element.getAttribute("name"),this):cv.Application.structureController.removeMapping(this._element.getAttribute("name")))},mapValue:function(t,e,r){var n=this;if(Object.prototype.hasOwnProperty.call(this.__P_88_0,t))return this.__P_88_0[t];var o=""+t,i=this._element.querySelector(':scope > entry[value="'+t+'"]'),s=this._element.hasAttribute("type")?this._element.getAttribute("type"):"string";if(i){o=this._convert(i.innerHTML.trim(),s);this.__P_88_0[t]=o;return o}var a=this._element.querySelector(":scope > formula");if(a){if(!a._formula){var c=a.textContent;a._formula=new Function("x","store","params","let y;"+c+"; return y;")}return o=this._convert(a._formula(t,e,r),s)}var u=this._element.querySelectorAll(":scope > entry"),l=null;Array.from(u).some((function(e){var r=!1,i=e.hasAttribute("default")&&"true"===e.getAttribute("default");if(e.hasAttribute("value")){var a=e.getAttribute("value");if(a===(t||"NULL")||"*"===a){o=n._convert(e.innerHTML.trim(),s);r=!0}i&&(l=n._convert(a,s))}else if(e.hasAttribute("range-min")){var c=parseFloat(e.getAttribute("range-min")),u=e.hasAttribute("range-max")?parseFloat(e.getAttribute("range-max")):Number.POSITIVE_INFINITY,f=parseFloat(t);if(c<=f&&f<=u){o=n._convert(e.innerHTML.trim(),s);r=!0}i&&(l=c)}return r}))||null===l||(o=this.mapValue(l));this.__P_88_0[t]=o;return o},_convert:function(t,e){switch(e.toLowerCase()){case"boolean":return"true"===t;case"integer":return parseInt(t);case"float":return parseFloat(t);default:return t}}},destruct:function(){this.__P_88_0=null},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"mapping",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Mapping.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.elements.Mapping":{require:!0},"cv.Application":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.elements.Styling",{extend:cv.ui.structure.tile.elements.Mapping,members:{_applyConnected:function(t,e,r){cv.ui.structure.tile.elements.Styling.superclass.prototype._applyConnected.call(this,t,e,r);t?cv.Application.structureController.addStyling(this._element.getAttribute("name"),this):cv.Application.structureController.removeStyling(this._element.getAttribute("name"))}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"styling",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.elements.Styling.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"qx.event.Registration":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Group",{extend:cv.ui.structure.tile.components.AbstractComponent,members:{_init:function(){cv.ui.structure.tile.widgets.Group.superclass.prototype._init.call(this);var t=this._element,e=null,r=null;if(t.hasAttribute("name")||t.hasAttribute("icon")){if(!(r=t.querySelector(":scope > summary"))){r=document.createElement("summary");t.insertBefore(r,t.firstChild)}if(t.hasAttribute("name")){if(!(e=t.querySelector(":scope > summary > label.title"))){(e=document.createElement("label")).classList.add("title");r.insertBefore(e,r.firstChild)}e.classList.add("last-of-title");e.textContent=t.getAttribute("name")}if(t.hasAttribute("icon")){var n=t.querySelector(":scope > summary > cv-icon.title");if(!n){(n=document.createElement("cv-icon")).classList.add("title");r.insertBefore(n,r.firstChild)}e||n.classList.add("last-of-title");n.classList.add(t.getAttribute("icon"))}}!t.querySelector(":scope > *:not(summary)")?t.classList.add("empty"):r&&qx.event.Registration.addListener(r,"click",this._toggleOpen,this)},_toggleOpen:function(){this._element.hasAttribute("open")?this._element.removeAttribute("open"):this._element.setAttribute("open","true")},onStateUpdate:function(t){if(!cv.ui.structure.tile.widgets.Group.superclass.prototype.onStateUpdate.call(this,t))if("summary"===t.detail.target){var e=this._element.querySelector(":scope > summary > label.value");if(!e){(e=document.createElement("label")).classList.add("value");this._element.querySelector(":scope > summary").appendChild(e)}e.textContent=t.detail.state}else this.debug("unhandled address target",t.detail.target)}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"group",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.Group.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(r,t)};return _wrapNativeSuper(t)}function _construct(t,e,r){_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));r&&_setPrototypeOf(o,r.prototype);return o};return _construct.apply(null,arguments)}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Page",{extend:cv.ui.structure.tile.components.AbstractComponent,properties:{visibility:{refine:!0,init:"excluded"}},members:{_supportsContentVisibility:null,_init:function(){if("undefined"!=typeof InstallTrigger){this._element.classList.add("no-content-visibility");this._supportsContentVisibility=!1}else this._supportsContentVisibility=!0},_applyVisibility:function(t){switch(t){case"visible":this._supportsContentVisibility?this._element.style.contentVisibility="visible":this._visibleDisplayMode&&(this._element.style.display=this._visibleDisplayMode||"initial");break;case"hidden":case"excluded":if(this._supportsContentVisibility)this._element.style.contentVisibility="hidden";else{this._visibleDisplayMode=getComputedStyle(this._element).getPropertyValue("display");this._element.style.display="none"}}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"page",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector));customElements.define(cv.ui.structure.tile.Controller.PREFIX+"row",function(t){"use strict";_inherits(r,t);var e=_createSuper(r);function r(){var t;_classCallCheck(this,r);(t=e.call(this)).hasAttribute("colspan")&&t.classList.add("colspan-"+t.getAttribute("colspan"));t.hasAttribute("rowspan")&&t.classList.add("rowspan-"+t.getAttribute("rowspan"));return t}return _createClass(r)}(_wrapNativeSuper(HTMLElement)))}});cv.ui.structure.tile.widgets.Page.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MPopup":{require:!0},"qx.event.Timer":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Popup",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MPopup,statics:{openedPopups:[]},members:{_closeButton:null,_init:function(){var t=this;cv.ui.structure.tile.widgets.Popup.superclass.prototype._init.call(this);var e=this._element;if(!e.hasAttribute("closeable")||"true"===e.getAttribute("closeable")){this._closeButton=document.createElement("button");this._closeButton.classList.add("close");var r=document.createElement("i");r.classList.add("ri-close-line");this._closeButton.appendChild(r);e.insertBefore(this._closeButton,e.firstChild);this._closeButton.addEventListener("click",(function(){return t.close()}))}e.addEventListener("close",(function(e){t.close()}));if(e.hasAttribute("title")){var n=document.createElement("header");e.insertBefore(n,e.firstChild);var o=document.createElement("h2");o.textContent=e.getAttribute("title");n.appendChild(o)}if(e.hasAttribute("auto-close-timeout")){var i=parseInt(e.getAttribute("auto-close-timeout"));if(isNaN(i))this.error("invalid auto-close-timeout value:",e.getAttribute("auto-close-timeout"));else{this._autoCloseTimer=new qx.event.Timer(1e3*i);this._autoCloseTimer.addListener("interval",(function(){t._autoCloseTimer.stop();t.close()}))}}},open:function(){var t=this._element;if(!t.hasAttribute("open")){t.setAttribute("open","");t.hasAttribute("modal")&&"true"===t.getAttribute("modal")&&this.registerModalPopup();this._autoCloseTimer&&this._autoCloseTimer.start()}},close:function(){var t=this._element;if(t){t.removeAttribute("open");t.hasAttribute("modal")&&"true"===t.getAttribute("modal")&&this.unregisterModalPopup();this._autoCloseTimer&&this._autoCloseTimer.stop();t.dispatchEvent(new CustomEvent("closed"))}},onStateUpdate:function(t){if(!cv.ui.structure.tile.widgets.Popup.superclass.prototype.onStateUpdate.call(this,t))switch(t.detail.target){case"open":t.detail.state&&this.open();break;case"open-close":t.detail.state?this.open():this.close();break;case"close":t.detail.state||this.close();break;default:this.debug("unhandled address target",t.detail.target)}}},destruct:function(){this._disposeObjects("_autoCloseTimer");if(this._closeButton){this._closeButton.remove();this._closeButton=null}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"popup",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.Popup.$$dbClassInfo=t}();function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){e&&_defineProperties(t.prototype,e);r&&_defineProperties(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}!function(){var t={dependsOn:{"qx.Class":{usage:"dynamic",require:!0},"cv.ui.structure.tile.components.AbstractComponent":{require:!0},"cv.ui.structure.tile.MPopup":{require:!0},"qx.event.Timer":{},"cv.ui.structure.tile.Controller":{defer:"runtime"}}};qx.Bootstrap.executePendingDefers(t);qx.Class.define("cv.ui.structure.tile.widgets.Tile",{extend:cv.ui.structure.tile.components.AbstractComponent,include:cv.ui.structure.tile.MPopup,properties:{backgroundImage:{check:"String",nullable:!0,apply:"_applyBackgroundImage"},popup:{check:"Boolean",init:!1,apply:"_applyPopup"}},members:{_fullScreenMode:null,_init:function(){var t=this;cv.ui.structure.tile.widgets.Tile.superclass.prototype._init.call(this);this._initPopupChild();this._element.hasAttribute("background-image")&&this.setBackgroundImage(this._element.getAttribute("background-image"));this._childPopup&&this._childPopup.addEventListener("closed",(function(){t.resetPopup()}))},_applyBackgroundImage:function(t){if(t){this._element.style.backgroundImage="url(".concat(t,")");var e=this._element.querySelector(":scope > div.overlay");if(!e){(e=document.createElement("div")).classList.add("overlay");this._element.insertBefore(e,this._element.firstChild)}this._element.classList.add("has-bg-image")}else{this._element.style.backgroundImage="";this._element.classList.remove("has-bg-image")}},open:function(){var t=this;if(this._childPopup)this._openPopupChild();else{var e=this._element.querySelector(":scope > button.close");if(!e){(e=document.createElement("button")).classList.add("close");var r=document.createElement("i");r.classList.add("ri-close-line");e.appendChild(r);this._element.appendChild(e);e.addEventListener("click",(function(){return t.setPopup(!1)}))}e.style.display="block";this._element.classList.add("popup");this._fullScreenMode&&this._element.classList.add("fullscreen");this.registerModalPopup()}},close:function(t){t||this.setPopup(!1);if(this._childPopup)this._closePopupChild();else{this._element.classList.remove("popup");this._fullScreenMode&&this._element.classList.remove("fullscreen");var e=this._element.querySelector(":scope > button.close");e&&(e.style.display="none");this.unregisterModalPopup()}this._autoCloseTimer&&this._autoCloseTimer.stop();this.fireEvent("closed")},_applyPopup:function(t){t?this.open():this.close(!0)},onStateUpdate:function(t){if(!cv.ui.structure.tile.widgets.Tile.superclass.prototype.onStateUpdate.call(this,t))switch(t.detail.target){case"background-image":this.setBackgroundImage(t.detail.state);break;case"popup":case"fullscreen-popup":this._fullScreenMode="fullscreen-popup"===t.detail.target;if(t.detail.addressValue){if(t.detail.addressValue==t.detail.state){this.setPopup(!0);if(!this._autoCloseTimer){this._autoCloseTimer=new qx.event.Timer(18e4);this._autoCloseTimer.addListener("interval",this.close,this)}this._autoCloseTimer.restart()}}else this.setPopup(1==t.detail.state);break;default:this.debug("unhandled address target",t.detail.target)}}},defer:function(t){customElements.define(cv.ui.structure.tile.Controller.PREFIX+"tile",function(e){"use strict";_inherits(n,e);var r=_createSuper(n);function n(){_classCallCheck(this,n);return r.call(this,t)}return _createClass(n)}(QxConnector))}});cv.ui.structure.tile.widgets.Tile.$$dbClassInfo=t}();qx.$$packageData[2]={locales:{},resources:{},translations:{en:{},de:{"Communication error":"Kommunikationsfehler","URL: %1<br/><br/>Response:</br>%2":"URL: %1<br/><br/>Antwort:</br>%2","Config error":"Konfigurationsfehler",'There already exists a backend named: "%1"':'Es existiert bereits ein Backend mit dem Namen: "%1"',"File Error!":"Dateifehler!","Invalid XML file!":"Ungltige XML Datei!","404: File not found, %1.":"404: Datei nicht gefunden, %1.",'Unhandled error of type "%1"':'Unbekannter Fehler vom Typ "%1"'}}};
//# sourceMappingURL=package-2.js.map