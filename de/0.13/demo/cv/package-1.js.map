{"version":3,"names":["qx","Class","define","type","statics","lastBodyWidth","currentPageUnavailableWidth","currentPageUnavailableHeight","currentPageNavbarVisibility","oldWidth","LAYOUT_MODE","COLSPAN_CLASS","getCurrentPageNavbarVisibility","this","left","right","top","bottom","cv","Application","structureController","pagePartsHandler","getNavbarsVisibility","getCurrentPage","getColspanClass","width","Config","maxScreenWidthColspanS","maxScreenWidthColspanM","adjustColumns","getAvailableWidth","oldClass","newClass","bodyWidth","document","documentElement","clientWidth","navbarVisibility","querySelector","widthNavbarLeft","leftRect","getBoundingClientRect","window","getComputedStyle","Math","round","core","Init","getApplication","getMobile","widthNavbarRight","rightRect","getAvailableHeight","windowHeight","clientHeight","emptyRect","topNav","bottomNav","topNavDisplay","topDisplay","bottomNavDisplay","bottomDisplay","topRect","topHeight","topNavRect","topNavHeight","bottomNavRect","bottomNavHeight","bottomRect","bottomHeight","nav_pathRect","navPathHeight","max","rowspanClass","rowspan","configSettings","usedRowspans","getWidgetColspan","widget","getColspan","getColspanS","getColspanM","getLayoutSuffix","suffix","applyColumnWidths","selector","includeNavbars","mainAreaColspan","defaultColumns","mainAreaColumns","dataset","parseInt","pageSelector","forEach","area","allContainer","querySelectorAll","length","areaColspan","areaElement","areaColumns","child","ui","structure","WidgetFactory","getInstanceByElement","ourColspan","w","min","__P_69_0","e","groupChild","util","Tree","getChildWidgets","groupColspan","parentGroupElement","getParent","parentGroupWidget","parentNode","elem","widthClassSuffix","style","classList","cssClass","startsWith","remove","add","pure","layout","Manager","$$dbClassInfo","Bootstrap","executePendingDefers","extend","Object","properties","pageSizeInvalid","check","init","event","backdropInvalid","navbarInvalid","rowspanInvalid","members","resetAll","reset","States","states","$pageSize","$navbarTop","$navbarBottom","height","__P_70_0","__P_70_1","validationQueue","__P_70_2","getPageSize","noCache","getNavbarTop","getNavbarBottom","queueJob","callback","indexOf","push","bom","AnimationFrame","request","flush","shift","apply","makeAllSizesValid","isPageSizeInvalid","makePagesizeValid","isNavbarInvalid","makeNavbarValid","isRowspanInvalid","makeRowspanValid","isBackdropInvalid","makeBackdropValid","__P_70_3","log","Logger","debug","page","getPageType","cssPosRegEx","backdrop","getDomElement","getBackdropType","backdropSVG","getSVGDocument","backdropBBox","children","getBBox","backdropNWidth","naturalWidth","backdropNHeight","naturalHeight","backdropFixed","getSize","backdropScale","backdropWidth","backdropHeight","backdropPos","getBackdropAlign","split","backdropLeftRaw","match","backdropTopRaw","backdropLeft","backdropTop","uagent","navigator","userAgent","toLowerCase","complete","Timer","once","invalidateBackdrop","getAttribute","setAttribute","widgetContainer","value","getInstanceById","id","getResponsiveLayout","scale","x","y","name","error","setBackdropInvalid","__P_70_4","setNavbarInvalid","__P_70_5","currentPageId","isInitialized","pageSizeElement","innerHTML","setPageSizeInvalid","addListenerOnce","__P_70_6","dom","Element","create","class","html","body","appendChild","__P_70_7","rect","styles","calcrowspan","removeChild","rowSpanStyle","setRowspanInvalid","self","requestAnimationFrame","invalidateNavbar","invalidateRowspan","invalidateScreensize","set","defer","Registration","addListener","ResizeHandler","AbstractWidget","include","common","Update","src","nullable","autoplay","loop","thresholdValue","_getInnerDomString","getWidth","getHeight","isAutoplay","isLoop","getId","getSrc","getActor","_update","address","applyMapping","getThresholdValue","audioWidget","paused","play","registerClass","Audio","AbstractBasicWidget","getDomString","Break","_regeneratorRuntime","t","r","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","enumerable","configurable","writable","wrap","Generator","Context","makeInvokeMethod","tryCatch","arg","call","h","l","f","s","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","isNaN","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","dependsOn","require","usage","construct","environment","provided","required","className","implement","IController","__P_59_0","__P_59_1","cache","Stylesheet","includeFile","ResourceManager","getInstance","toUri","forceReload","Date","now","currentPage","renderTarget","namespace","main_scroll","old_scroll","getHtmlStructure","parseBackendSettings","xml","settings","pagesElement","defaultBackendName","backend","URL","server","backendUrl","backendKnxdUrl","backendMQTTUrl","backendOpenHABUrl","credentials","token","username","password","data","Model","setDefaultBackendName","login","client","_this","clients","io","BackendConnections","getClients","promises","_loop","res","rej","startInitialRequest","all","parseSettings","screensave_time","screensave_page","maxMobileScreenWidth","globalClass","scrollSpeed","bindClickToWidget","minColumnWidth","preParse","_this2","_callee","metaParser","_context","parser","MetaParser","pluginsToLoad","concat","parsePlugins","parse","createUI","ScriptLoader","cacheUsed","_createPages","message","Bus","dispatchByName","TemplateEngine","setDomFinished","initLayout","path","flavour","WidgetParser","renderTemplates","parsedData","Array","isArray","createInstance","$$type","parseLabel","label","labelClass","ret_val","undefined","childNodes","nodeType","Node","ELEMENT_NODE","nodeName","IconHandler","getIconElement","TEXT_NODE","textContent","supports","feature","subfeature","getInitialAddresses","backendName","startPageAddresses","initialPage","getAddress","addr","backendType","initPagePartsHandler","navigation","PagePartsHandler","__P_59_2","setCurrentPage","PageHandler","setSpeed","DeferredCall","scrollToPage","schedule","_runTrickOMatic","IconTools","fillRecoloredIcon","_onMobileChanged","retries","_this3","svg","readyState","onload","TrickOMatic","run","doScreenSave","onHistoryRequest","anchor","target","speed","skipHistory","page_id","getPageIdByPath","treePath","rememberLastPage","Environment","get","localStorage","lastpage","headline","pageTitle","History","addToHistory","seekTo","initializeNavbars","_maintainNavbars","ev","isReady","navbars","dynamic","fadeNavbar","resetPageValues","resetCurrentPage","getInitialPageId","_this4","_callee2","_context2","_this5","_callee3","startpage","req","_context3","getItem","substr","removeItem","Uri","parseUri","location","href","substring","subscribe","page_name","scope","traversePath","getPageIdByName","root_page_id","path_scope","index","path_page_name","String","decodeHtmlEntities","decodeURI","replace","pages","from","filter","getPath","fallback","some","getClosest","innerText","pid","updateSentryScope","sentryEnabled","Sentry","setTag","getDesign","destruct","removeListener","Controller","HasChildren","props","__P_64_0","_onChangeVisible","__P_64_1","setTimeout","parentPage","getParentPage","tuple","property","defaultValue","toUpperCase","bind","setInitialized","_initOnCreate","allPages","createFinal","getRenderTarget","unsubscribe","initialized","anonymous","refine","showTopNavigation","showFooter","showNavbarTop","showNavbarBottom","showNavbarLeft","showNavbarRight","backdropAlign","backdropType","linkVisible","size","__P_64_2","__P_64_3","_applyNavbarVisibility","old","i_name","splice","getData","getBackdrop","pageType","subpage","getFlavour","container","getName","getChildrenDomString","Page","_this$getAddress$addr","_this$getAddress$addr2","applyTransform","filters","filterMatch","clientID","_step","_iterator","_createForOfIteratorHelper","_filter$match2","_slicedToArray","triggerValue","at","err","clearTimeout","sendToBackend","list","isWriteAddress","getClient","write","Transform","encode","fadeVisible","updateTopNavigation","pathNode","getPageTitle","nav","createElement","createTextNode","pageElem","contains","span","pageId","pageData","getWidgetData","pageHeadline","navbarSetSize","position","navbar","cssSize","isFinite","attributes","getShowNavbarTop","getShowNavbarBottom","getShowNavbarLeft","getShowNavbarRight","updatePageParts","showtopnavigation","showfooter","getShowTopNavigation","getShowFooter","display","removeInactiveNavbars","direction","getSpeed","initCss","targetCss","key","onAnimationEnd","entries","key_value","spec","duration","timing","getEasing","keep","keyFrames","element","Animation","animate","tree","parts","subPath","join","item","level","positions","pos","navBarPath","expr","RegExp","test","easing","currentPath","animationType","Number","getCurrentPath","pageWidget","controller","animationConfig","oldPageWidget","animationEnabled","getAnimationType","__P_71_0","overflow","setVisible","outAnim","leavePage","__P_71_1","oldPos","enterPage","__P_71_2","inAnim","SLIDE_RIGHT_IN","SLIDE_RIGHT_OUT","SLIDE_LEFT_IN","SLIDE_LEFT_OUT","updateVisibility","setCurrentPath","Operate","HasAnimatedButton","_action","actor","isCanceled","designs","designStructureMap","oldDesign","newDesign","Location","getHref","regexp","search","setHref","appendParamsToUrl","design","DesignToggle","noWidget","action","getTarget","getBubbles","stopPropagation","_onDomReady","Group","superclass","hstyle","getAlign","getClasses","getStyle","Refresh","cropTop","cropBottom","widthFit","placeholder","__P_60_0","imgStyle","getWidthFit","getCropTop","getCropBottom","__P_60_1","getPlaceholder","protocol","handleUpdate","text","valueElem","getValueElement","_applyVisible","getRefresh","Image","updateType","sendValue","getLayout","extractLayout","getUpdateType","__P_61_0","getSuffix","trim","imageChild","url","getSendValue","ImageTrigger","Info","InfoAction","HandleLongpress","downValue","shortDownValue","downLabel","upValue","shortUpValue","upLabel","isAbsolute","infoPosition","actordown","getDownLabel","actorup","getUpLabel","actorinfo","getInfoPosition","getActors","initListeners","_onPointerDown","__P_62_0","_onLongTap","__P_62_1","getCurrentTarget","isShort","isDown","getShortDownValue","getShortUpValue","getDownValue","getUpValue","bitMask","getIsAbsolute","bvalue","parseFloat","getBasicValue","getMin","getMax","variantInfo","getDownActor","getUpActor","getInfoActor","InfoTrigger","Line","showstatus","elementsPerLine","buttonConfiguration","mapping","getMapping","getElementsPerLine","config","getButtonConfiguration","sort","buttonConfig","mappedValue","defaultValueHandling","div","defaultValue2DOM","_processIncomingValue","isPressed","getActionValue","isAnonymous","MultiTrigger","visible","_navbarTop","_navbarLeft","_navbarRight","_navbarBottom","_touchX","_touchY","content","addEventListener","evt","touches","pPH","composedPath","clientX","clientY","passive","enoughDistance","abs","toRight","preventDefault","getGlobalPath","getPosition","NavBar","classes","i_right","setContainerClass","counter","hideWhenEmpty","__P_63_0","NotificationCenterBadge","center","NotificationCenter","getMessages","_onChangeCounter","_onChangeGlobalSeverity","disableBadge","_skipNextEvent","getType","toggleVisibility","__P_63_1","getSeverities","messages","isHideWhenEmpty","getCounter","activeScope","targetPath","_onScrollToPage","model","getWidgetDataByElement","getParentWidget","pageJumps","markPageJumps","parentName","getTargetPath","PageJump","wstyle","getWstyle","PageLink","addElementListener","_onPointerUp","off","PushButton","BasicUpdate","defaultUpdate","restart","reload","Reload","valElem","decode","bg","Rgb","__P_65_0","coord","toFixed","createBarPath","startAngle","startArrowPoint","endAngle","endArrowPoint","radius","startArrowPointAngle","endArrowPointAngle","clockwise","rI","rIM","rM","rMO","rO","startInner","cos","sin","startMiddle","startOuter","centerInner","centerOuter","endInner","endMiddle","endOuter","startMiddleFlag","PI","startEndFlag","endMiddleFlag","startMiddleDir","endMiddleDir","arc","start","end","flag","cw","Roundbar","rMax","isInside","rMiddle","uMiddle","lMiddle","dMiddle","createPointerPath","angle","wx","wy","thickness","tx","ty","indicators","axisradius","axiswidth","axiscolor","ranges","minorradius","minorwidth","minorspacing","minorcolor","majorradius","majorwidth","majorposition","majorcolor","labels","labelstyle","arrowtype","spacing","overflowarrow","fontsize","textx","texty","textlength","textanchor","linespace","bboxgrow","currentRatioValue","targetRatioValue","__P_65_1","__P_65_2","bboxAdd","bbox","setCurrentRatioValue","getIndicators","fill","setTargetRatioValue","getStart","getEnd","cntValues","svgMajor","svgMinor","svgLabels","svgRanges","svgIndicators","svgText","getAxisradius","getAxiswidth","sMax","eMax","indicator","startarrow","endarrow","BBox","getMinorwidth","getMinorspacing","rIn","getMinorradius","rOut","delta","cnt","getMinorcolor","getMajorwidth","_rIn","getMajorradius","_rOut","getMajorposition","getMajorcolor","getLabelstyle","getLabels","labelnumber","alignmentBaseline","textAnchor","textAngle","orientation","_textAngle","labelid","$$user_path","align","getRanges","range","sRange","eRange","rRange","wRange","thisBBox","number","LimitedRateUpdateAnimator","__P_65_3","showValue","getTexty","getTextanchor","getFontsize","getTextx","getLinespace","repeat","textDistribution","middle","textU","textD","getTextlength","getBboxgrow","getDebug","sectorPath","axisPath","stroke","getAxiscolor","_ref","domElement","getTargetRatioValue","tspan","getElementsByTagName","valueFormat","applyFormat","setTo","isVisible","ratio","indicatorNumber","getElementsByClassName","targetAngle","getOverflowarrow","isBar","__P_66_0","__P_66_1","__P_66_2","__P_66_3","__P_66_4","removeListenerById","__P_66_5","step","showInvalidValues","sendOnFinish","__P_66_6","__P_66_7","__P_66_8","__P_66_9","__P_66_10","getFormat","Slide","__P_66_11","Function","throttle","__P_66_12","trailing","transform","__P_66_13","instant","relaxDisplay","getStep","realValue","getShowInvalidValues","stepValue","floor","stepCount","factor","pow","sign","setBasicValue","displayValue","setValue","applyStyling","button","replaceChildren","actorWidth","__P_66_14","_disposeObjects","handleEvent","newRatio","boundingRect","currentTarget","computedStyle","paddingLeft","removeEventListener","newValue","getSendOnFinish","actorStyles","getPropertyValue","marginLeft","borderRadius","onValue","offValue","getOffValue","getOnValue","Switch","Text","getNextMappedValue","Toggle","shortValue","Trigger","getShortThreshold","isShortDefault","getShortValue","unknownType","parentWidget","locale","tr","getUnknownType","Unknown","params","__P_67_0","getXhr","_applyUrl","setUrl","xhr","Xhr","accept","requestData","getParams","UrlTrigger","send","video","pause","Video","frameborder","background","scrolling","webStyle","getFrameborder","getBackground","getScrolling","iframe","refreshAction","Web","variable","__P_68_0","_applyVariable","_onSuccess","executeWhenDomFinished","getRequest","getResponse","getVariable","WgPluginInfo","childObjects","WidgetInfoAction"],"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/Manager.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/States.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/ResizeHandler.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Audio.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Break.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/navigation/PagePartsHandler.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/navigation/PageHandler.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/DesignToggle.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/ImageTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Info.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Line.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/MultiTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NavBar.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NotificationCenterBadge.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageJump.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageLink.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PushButton.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Refresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Reload.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Rgb.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Roundbar.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Slide.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Switch.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Text.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Toggle.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Trigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Unknown.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/UrlTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Video.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Web.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/WgPluginInfo.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/WidgetInfoAction.js"],"sourcesContent":["/* Manager.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n */\nqx.Class.define('cv.ui.structure.pure.layout.Manager', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    // use to recognize if the screen width has crossed the maxMobileScreenWidth\n    lastBodyWidth: 0,\n    currentPageUnavailableWidth: -1,\n    currentPageUnavailableHeight: -1,\n    currentPageNavbarVisibility: null,\n    oldWidth: -1,\n\n    LAYOUT_MODE: 'DEFAULT',\n\n    COLSPAN_CLASS: null,\n\n    getCurrentPageNavbarVisibility() {\n      if (\n        this.currentPageNavbarVisibility === null ||\n        this.currentPageNavbarVisibility.left === null ||\n        this.currentPageNavbarVisibility.right === null ||\n        this.currentPageNavbarVisibility.top === null ||\n        this.currentPageNavbarVisibility.bottom === null\n      ) {\n        this.currentPageNavbarVisibility = cv.Application.structureController.pagePartsHandler.getNavbarsVisibility(\n          cv.Application.structureController.getCurrentPage()\n        );\n      }\n      return this.currentPageNavbarVisibility;\n    },\n\n    // return S, M or L depening on the passed width\n    getColspanClass(width) {\n      if (width <= cv.Config.maxScreenWidthColspanS) {\n        return 'S';\n      }\n      if (width <= cv.Config.maxScreenWidthColspanM) {\n        return 'M';\n      }\n      return 'L';\n    },\n\n    adjustColumns() {\n      const width = this.getAvailableWidth();\n      const oldClass = this.getColspanClass(this.oldWidth);\n      const newClass = this.getColspanClass(width);\n\n      this.oldWidth = width;\n      this.COLSPAN_CLASS = newClass;\n      return oldClass !== newClass;\n    },\n\n    /**\n     * return the available width for a the currently visible page\n     * the available width is calculated by subtracting the following elements widths (if they are visible) from the body width\n     * - Left-Navbar\n     * - Right-Navbar\n     */\n    getAvailableWidth() {\n      // currently this calculation is done once after every page scroll (where cv.TemplateEngine.getInstance()currentPageUnavailableWidth is reseted)\n      // if the screen width falls below the threshold which activates/deactivates the mobile.css\n      // the calculation has to be done again, even if the page hasn´t changed (e.g. switching between portrait and landscape mode on a mobile can cause that)\n      const bodyWidth = document.documentElement.clientWidth;\n      //      console.log(\"Mobile.css use changed \"+mobileUseChanged);\n      this.currentPageUnavailableWidth = 0;\n      const navbarVisibility = this.getCurrentPageNavbarVisibility();\n\n      const left = document.querySelector('#navbarLeft');\n      let widthNavbarLeft = 0;\n      if (left) {\n        const leftRect = left.getBoundingClientRect();\n        widthNavbarLeft =\n          navbarVisibility.left === true && window.getComputedStyle(left)['display'] !== 'none'\n            ? Math.round(leftRect.right - leftRect.left)\n            : 0;\n      }\n      if (widthNavbarLeft >= bodyWidth || qx.core.Init.getApplication().getMobile()) {\n        // Left-Navbar has the same size as the complete body, this can happen, when the navbar has no content\n        // maybe there is a better solution to solve this problem\n        // OR: we have a mobile device where the nav bar is floating above the other content\n        widthNavbarLeft = 0;\n      }\n      const right = document.querySelector('#navbarRight');\n      let widthNavbarRight = 0;\n      if (right) {\n        const rightRect = right.getBoundingClientRect();\n        widthNavbarRight =\n          navbarVisibility.right === true && window.getComputedStyle(right)['display'] !== 'none'\n            ? Math.round(rightRect.right - rightRect.left)\n            : 0;\n      }\n      if (widthNavbarRight >= bodyWidth || qx.core.Init.getApplication().getMobile()) {\n        // Right-Navbar has the same size as the complete body, this can happen, when the navbar has no content\n        // maybe there is a better solution to solve this problem\n        // OR: we have a mobile device where the nav bar is floating above the other content\n        widthNavbarRight = 0;\n      }\n      this.currentPageUnavailableWidth = widthNavbarLeft + widthNavbarRight + 1; // remove an additional pixel for Firefox\n      //      console.log(\"Width: \"+bodyWidth+\" - \"+widthNavbarLeft+\" - \"+widthNavbarRight);\n\n      this.lastBodyWidth = bodyWidth;\n      return bodyWidth - this.currentPageUnavailableWidth;\n    },\n\n    /**\n     * return the available height for a the currently visible page\n     * the available height is calculated by subtracting the following elements heights (if they are visible) from the window height\n     * - Top-Navigation\n     * - Top-Navbar\n     * - Bottom-Navbar\n     * - Statusbar\n     *\n     * Notice: the former way to use the subtract the main.position().top value from the total height leads to errors in certain cases\n     *         because the value of main.position().top is not reliable all the time\n     */\n    getAvailableHeight() {\n      const windowHeight = document.documentElement.clientHeight;\n      this.currentPageUnavailableHeight = 0;\n      const emptyRect = {\n        top: 0,\n        bottom: 0\n      };\n\n      const navbarVisibility = this.getCurrentPageNavbarVisibility();\n      const topNav = document.querySelector('#navbarTop');\n      const top = document.querySelector('#top');\n      const bottomNav = document.querySelector('#navbarBottom');\n      const bottom = document.querySelector('#bottom');\n      const topNavDisplay = topNav ? window.getComputedStyle(topNav)['display'] : 'none';\n      const topDisplay = top ? window.getComputedStyle(top)['display'] : 'none';\n      const bottomNavDisplay = bottomNav ? window.getComputedStyle(bottomNav)['display'] : 'none';\n      const bottomDisplay = bottom ? window.getComputedStyle(bottom)['display'] : 'none';\n      const topRect = top ? top.getBoundingClientRect() : emptyRect;\n      const topHeight = Math.round(topRect.bottom - topRect.top);\n      const topNavRect = topNav ? topNav.getBoundingClientRect() : emptyRect;\n      const topNavHeight = Math.round(topNavRect.bottom - topNavRect.top);\n      const bottomNavRect = bottomNav ? bottomNav.getBoundingClientRect() : emptyRect;\n      const bottomNavHeight = Math.round(bottomNavRect.bottom - bottomNavRect.top);\n\n      const bottomRect = bottom ? bottom.getBoundingClientRect() : emptyRect;\n      const bottomHeight = Math.round(bottomRect.bottom - bottomRect.top);\n      const nav_pathRect = document.querySelector('.nav_path').getBoundingClientRect();\n      const navPathHeight = Math.round(nav_pathRect.bottom - nav_pathRect.top);\n\n      if (topDisplay !== 'none' && topHeight > 0) {\n        this.currentPageUnavailableHeight += Math.max(topHeight, navPathHeight);\n      }\n      if (topNavDisplay !== 'none' && navbarVisibility.top === true && topNavHeight > 0) {\n        this.currentPageUnavailableHeight += topNavHeight;\n      }\n      if (bottomNavDisplay !== 'none' && navbarVisibility.bottom === true && bottomNavHeight > 0) {\n        this.currentPageUnavailableHeight += bottomNavHeight;\n      }\n      if (bottomDisplay !== 'none' && bottomHeight > 0) {\n        this.currentPageUnavailableHeight += bottomHeight;\n      }\n      if (this.currentPageUnavailableHeight > 0) {\n        this.currentPageUnavailableHeight += 1; // remove an additional pixel for Firefox\n      }\n      return windowHeight - this.currentPageUnavailableHeight;\n    },\n\n    rowspanClass(rowspan) {\n      cv.Config.configSettings.usedRowspans[rowspan] = true;\n      return 'rowspan rowspan' + rowspan;\n    },\n\n    getWidgetColspan(widget, width) {\n      if (widget.getColspan) {\n        if (width <= cv.Config.maxScreenWidthColspanS) {\n          return widget.getColspanS();\n        }\n        if (width <= cv.Config.maxScreenWidthColspanM) {\n          return widget.getColspanM();\n        }\n        return widget.getColspan();\n      }\n      return 0;\n    },\n\n    getLayoutSuffix(width) {\n      let suffix = '';\n      if (width <= cv.Config.maxScreenWidthColspanS) {\n        suffix = '-s';\n      } else if (width <= cv.Config.maxScreenWidthColspanM) {\n        suffix = '-m';\n      }\n      return suffix;\n    },\n\n    /**\n     * applies the correct width to the widgets corresponding to the given colspan setting\n     *\n     * @param selector {String?} only update elements found by the given selector\n     * @param includeNavbars {Boolean?} also update navbar elements (default: true)\n     */\n    applyColumnWidths(selector, includeNavbars) {\n      const width = this.getAvailableWidth();\n      let mainAreaColspan = cv.Config.defaultColumns;\n      const main = document.querySelector('#main');\n      if (main) {\n        const mainAreaColumns = document.querySelector('#main').dataset['columns'];\n        if (mainAreaColumns) {\n          mainAreaColspan = parseInt(mainAreaColumns);\n        }\n      }\n\n      const pageSelector = selector ? selector : '#main .activePage';\n      let selectors = [];\n\n      if (includeNavbars === true) {\n        selectors = ['#navbarTop', '#navbarLeft', pageSelector, '#navbarRight', '#navbarBottom'];\n      } else {\n        selectors = [pageSelector];\n      }\n\n      selectors.forEach(function (area) {\n        const allContainer = document.querySelectorAll(area + ' .widget_container');\n\n        if (allContainer.length > 0) {\n          let areaColspan = cv.Config.defaultColumns;\n          const areaElement = document.querySelector(area);\n          if (areaElement) {\n            const areaColumns = areaElement.dataset['columns'];\n            if (areaColumns) {\n              areaColspan = parseInt(areaColumns);\n            }\n          }\n          allContainer.forEach(function (child) {\n            const widget = cv.ui.structure.WidgetFactory.getInstanceByElement(child);\n            const ourColspan = this.getWidgetColspan(widget, width);\n\n            let w = 'auto';\n            if (ourColspan > 0) {\n              w = Math.min(100, (ourColspan / areaColspan) * 100) + '%';\n            }\n            this.__applyWidthClass(child, w);\n          }, this);\n        }\n\n        // and elements inside groups\n        const adjustableElements = document.querySelectorAll(area + ' .group .widget_container');\n\n        adjustableElements.forEach(function (e) {\n          const widget = cv.ui.structure.WidgetFactory.getInstanceByElement(e);\n          let ourColspan = this.getWidgetColspan(widget, width);\n          if (ourColspan === null) {\n            // workaround for nowidget groups\n            const groupChild = cv.util.Tree.getChildWidgets(widget, 'group')[0];\n            ourColspan = this.getWidgetColspan(groupChild, width);\n          }\n          let w = 'auto';\n          if (ourColspan > 0) {\n            let groupColspan = mainAreaColspan;\n            const parentGroupElement = cv.util.Tree.getParent(e, '.widget_container', '.group', 1)[0];\n            if (parentGroupElement) {\n              const parentGroupWidget = cv.ui.structure.WidgetFactory.getInstanceByElement(\n                parentGroupElement.parentNode\n              );\n\n              if (parentGroupWidget) {\n                groupColspan = Math.min(mainAreaColspan, this.getWidgetColspan(parentGroupWidget, width));\n              }\n            }\n            w = Math.min(100, (ourColspan / groupColspan) * 100) + '%'; // in percent\n          }\n          this.__applyWidthClass(e, w);\n        }, this);\n      }, this);\n    },\n\n    __applyWidthClass(elem, widthClassSuffix) {\n      if (widthClassSuffix === 'auto') {\n        elem.style.width = widthClassSuffix;\n      } else {\n        switch (this.LAYOUT_MODE) {\n          case 'GRID':\n            // remove all old width related classes\n            elem.classList.forEach(function (cssClass) {\n              if (cssClass.startsWith('width-')) {\n                elem.classList.remove(cssClass);\n              }\n            }, this);\n            elem.classList.add('width-' + parseInt(widthClassSuffix));\n            break;\n\n          default:\n            elem.style.width = widthClassSuffix;\n            break;\n        }\n      }\n    }\n  }\n});\n","/* States.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * This class holds all states that are maintained by the {@link cv.ui.structure.pure.layout.ResizeHandler}.\n * Other classes can use the instance of this class {@link cv.ui.structure.pure.layout.ResizeHandler.states} to listen to changes\n * to the states.\n */\nqx.Class.define('cv.ui.structure.pure.layout.States', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    pageSizeInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changePageSizeInvalid'\n    },\n\n    backdropInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeBackdropInvalid'\n    },\n\n    navbarInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeNavbarInvalid'\n    },\n\n    rowspanInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeRowspanInvalid'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    resetAll() {\n      ['pageSizeInvalid', 'backdropInvalid', 'navbarInvalid', 'rowspanInvalid'].forEach(this.reset, this);\n    }\n  }\n});\n","/* ResizeHandler.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/*\n * Make sure everything looks right when the window gets resized. This is\n * necessary as the scroll effect requires a fixed element size\n */\n/**\n * Manager for all resizing issues. It ensures that the real resizing\n * calculations are only done as often as really necessary.\n *\n */\nqx.Class.define('cv.ui.structure.pure.layout.ResizeHandler', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    states: new cv.ui.structure.pure.layout.States(),\n\n    $pageSize: null,\n    $navbarTop: null,\n    $navbarBottom: null,\n    width: 0,\n    height: 0,\n    __initial: true,\n\n    __backdropRetries: 0,\n\n    validationQueue: [],\n\n    reset() {\n      this.states.resetAll();\n      this.$pageSize = null;\n      this.$navbarTop = null;\n      this.$navbarBottom = null;\n      this.width = 0;\n      this.height = 0;\n    },\n\n    __request: null,\n\n    getPageSize(noCache) {\n      if (!this.$pageSize || noCache === true) {\n        this.$pageSize = document.querySelector('#pageSize');\n      }\n      return this.$pageSize;\n    },\n\n    getNavbarTop(noCache) {\n      if (!this.$navbarTop || noCache === true) {\n        this.$navbarTop = document.querySelector('#navbarTop');\n      }\n      return this.$navbarTop;\n    },\n\n    getNavbarBottom(noCache) {\n      if (!this.$navbarBottom || noCache === true) {\n        this.$navbarBottom = document.querySelector('#navbarBottom');\n      }\n      return this.$navbarBottom;\n    },\n\n    queueJob(callback) {\n      if (this.validationQueue.indexOf(callback) === -1) {\n        this.validationQueue.push(callback);\n      }\n      if (!this.__request) {\n        this.__request = qx.bom.AnimationFrame.request(this.flush, this);\n      }\n    },\n\n    flush() {\n      while (this.validationQueue.length) {\n        const job = this.validationQueue.shift();\n        job.apply(this);\n      }\n      this.__request = null;\n    },\n\n    makeAllSizesValid() {\n      if (this.states.isPageSizeInvalid()) {\n        this.makePagesizeValid();\n      } // must be first due to dependencies\n      if (this.states.isNavbarInvalid()) {\n        this.makeNavbarValid();\n      }\n      if (this.states.isRowspanInvalid()) {\n        this.makeRowspanValid();\n      }\n      if (this.states.isBackdropInvalid()) {\n        this.makeBackdropValid();\n      }\n    },\n\n    makeBackdropValid() {\n      this.queueJob(this.__makeBackdropValid);\n    },\n\n    __makeBackdropValid() {\n      qx.log.Logger.debug(this, 'makeBackdropValid');\n      const page = cv.Application.structureController.getCurrentPage();\n      if (!page) {\n        return;\n      }\n      // TODO use page object\n\n      if (page.getPageType() === '2d') {\n        const cssPosRegEx = /(\\d*)(.*)/;\n        const backdrop = page.getDomElement().querySelector('div > ' + page.getBackdropType());\n        try {\n          const backdropSVG = page.getBackdropType() === 'embed' ? backdrop.getSVGDocument() : null;\n          const backdropBBox = backdropSVG ? backdropSVG.children[0].getBBox() : {};\n          const backdropNWidth = backdrop.naturalWidth || backdropBBox.width || this.width;\n          const backdropNHeight = backdrop.naturalHeight || backdropBBox.height || this.height;\n          const backdropFixed = page.getSize() === 'fixed';\n          const backdropScale = backdropFixed\n            ? 1\n            : Math.min(this.width / backdropNWidth, this.height / backdropNHeight);\n\n          const backdropWidth = backdropNWidth * backdropScale;\n          const backdropHeight = backdropNHeight * backdropScale;\n          const backdropPos = page.getBackdropAlign().split(' ');\n          const backdropLeftRaw = backdropPos[0].match(cssPosRegEx);\n          const backdropTopRaw = backdropPos[1].match(cssPosRegEx);\n          const backdropLeft =\n            backdropLeftRaw[2] === '%'\n              ? ((this.width - backdropWidth) * +backdropLeftRaw[1]) / 100\n              : +backdropLeftRaw[1];\n          const backdropTop =\n            backdropTopRaw[2] === '%'\n              ? this.height > backdropHeight\n                ? ((this.height - backdropHeight) * +backdropTopRaw[1]) / 100\n                : 0\n              : +backdropTopRaw[1];\n          const uagent = navigator.userAgent.toLowerCase();\n\n          if (\n            backdrop.complete === false ||\n            (page.getBackdropType() === 'embed' && backdropSVG === null) ||\n            (backdropBBox.width === 0 && backdropBBox.height === 0) ||\n            (this.width === 0 && this.height === 0)\n          ) {\n            // backdrop not available yet - reload\n            qx.event.Timer.once(this.invalidateBackdrop, this, 100);\n            return;\n          }\n\n          // backdrop available\n          if (\n            page.getSize() === 'scaled' &&\n            page.getBackdropType() === 'embed' &&\n            backdropSVG &&\n            backdropSVG.children[0].getAttribute('preserveAspectRatio') !== 'none'\n          ) {\n            backdropSVG.children[0].setAttribute('preserveAspectRatio', 'none');\n          }\n\n          // Note 1: this here is a work around for older browsers that can't use\n          // the object-fit property yet.\n          // Currently (26.05.16) only Safari is known to not support\n          // object-position although object-fit itself does work\n          // Note 2: The embed element always needs it\n          if (\n            (page.getBackdropType() === 'embed' ||\n              (uagent.indexOf('safari') !== -1 && uagent.indexOf('chrome') === -1)) &&\n            page.getSize() !== 'scaled'\n          ) {\n            backdrop.style.width = backdropWidth + 'px';\n            backdrop.style.height = backdropHeight + 'px';\n            backdrop.style.left = backdropLeft + 'px';\n            backdrop.style.top = backdropTop + 'px';\n          }\n\n          if (backdropFixed && !backdropSVG) {\n            if (this.height < backdropHeight) {\n              backdrop.style.height = backdropHeight + 'px';\n            } else {\n              backdrop.style.height = '100%';\n            }\n          }\n\n          page\n            .getDomElement()\n            .querySelectorAll('.widget_container')\n            .forEach(function (widgetContainer) {\n              const widget = cv.ui.structure.WidgetFactory.getInstanceById(widgetContainer.id);\n\n              let value;\n              const layout = widget.getResponsiveLayout();\n              let scale = backdropScale;\n              if (layout) {\n                // this assumes that a .widget_container has only one child and this\n                // is the .widget itself\n                const style = widgetContainer.children[0].style;\n                if (layout.scale === 'false') {\n                  scale = 1.0;\n                }\n\n                if ('x' in layout) {\n                  value = layout.x.match(cssPosRegEx);\n                  if (value[2] === 'px') {\n                    style.left = backdropLeft + value[1] * scale + 'px';\n                  } else {\n                    style.left = layout.x;\n                  }\n                }\n\n                if ('y' in layout) {\n                  value = layout.y.match(cssPosRegEx);\n                  if (value[2] === 'px') {\n                    style.top = backdropTop + value[1] * scale + 'px';\n                  } else {\n                    style.top = layout.y;\n                  }\n                }\n\n                if ('width' in layout) {\n                  style.width = layout.width;\n                }\n\n                if ('height' in layout) {\n                  style.height = layout.height;\n                }\n              }\n            }, this);\n          this.__backdropRetries = 0;\n        } catch (e) {\n          if (e.name === 'NotSupportedError') {\n            if (this.__backdropRetries <= 5) {\n              qx.bom.AnimationFrame.request(this.__makeBackdropValid, this);\n              this.__backdropRetries++;\n            } else {\n              qx.log.Logger.error(this, e);\n            }\n          } else {\n            qx.log.Logger.error(this, e);\n          }\n        }\n      }\n\n      this.states.setBackdropInvalid(false);\n    },\n\n    makeNavbarValid() {\n      this.queueJob(this.__makeNavbarValid);\n    },\n\n    __makeNavbarValid() {\n      qx.log.Logger.debug(this, 'makeNavbarValid');\n      if (cv.ui.structure.pure.layout.Manager.adjustColumns()) {\n        // the amount of columns has changed -> recalculate the widgets widths\n        cv.ui.structure.pure.layout.Manager.applyColumnWidths();\n      }\n      this.states.setNavbarInvalid(false);\n    },\n\n    makePagesizeValid() {\n      if (this.__initial === true) {\n        // do not queue -> call now\n        this.__initial = false;\n        this.__makePagesizeValid();\n      } else {\n        this.queueJob(this.__makePagesizeValid);\n      }\n    },\n\n    __makePagesizeValid() {\n      if (!cv.Config.currentPageId) {\n        return;\n      }\n      qx.log.Logger.debug(this, 'makePagesizeValid');\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.currentPageId);\n\n      if (page && !page.isInitialized()) {\n        page.addListenerOnce('changeInitialized', this.__makePagesizeValid, this);\n\n        return;\n      }\n      this.width = cv.ui.structure.pure.layout.Manager.getAvailableWidth();\n      this.height = cv.ui.structure.pure.layout.Manager.getAvailableHeight();\n      const pageSizeElement = this.getPageSize();\n\n      if (pageSizeElement) {\n        pageSizeElement.innerHTML = '#main,.page{width:' + this.width + 'px;height:' + this.height + 'px;}';\n      }\n\n      this.states.setPageSizeInvalid(false);\n    },\n\n    makeRowspanValid() {\n      this.queueJob(this.__makeRowspanValid);\n    },\n\n    __makeRowspanValid() {\n      qx.log.Logger.debug(this, 'makeRowspanValid');\n      let elem = document.querySelector('#calcrowspan');\n      if (!elem) {\n        elem = qx.dom.Element.create('div', {\n          class: 'clearfix',\n          id: 'calcrowspan',\n          html: '<div id=\"containerDiv\" class=\"widget_container\"><div class=\"widget clearfix text\" id=\"innerDiv\"></div>'\n        });\n\n        document.body.appendChild(elem);\n      }\n      // use the internal div for height as in mobile view the elem uses the full screen height\n      this.__updateRowHeight(elem.querySelector('#containerDiv'));\n    },\n\n    __updateRowHeight(elem) {\n      const rect = elem.getBoundingClientRect();\n      const height = Math.round(rect.bottom - rect.top);\n      if (height === 0) {\n        // not ready try again\n        const self = this;\n        window.requestAnimationFrame(() => {\n          self.__updateRowHeight(elem);\n        });\n        return;\n      }\n      let styles = '';\n\n      for (let rowspan in cv.Config.configSettings.usedRowspans) {\n        styles += '.rowspan.rowspan' + rowspan + ' { height: ' + Math.round(rowspan * height) + 'px;}\\n';\n      }\n      const calcrowspan = document.querySelector('#calcrowspan');\n      if (calcrowspan) {\n        calcrowspan.parentNode.removeChild(calcrowspan);\n      }\n\n      // set css style\n      const rowSpanStyle = document.querySelector('#rowspanStyle');\n      if (rowSpanStyle) {\n        rowSpanStyle.innerHTML = styles;\n      }\n      this.states.setRowspanInvalid(false);\n    },\n\n    invalidateBackdrop() {\n      qx.log.Logger.debug(this, 'backdrop');\n      this.states.setBackdropInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateNavbar() {\n      qx.log.Logger.debug(this, 'invalidateNavbar');\n      this.states.setNavbarInvalid(true);\n      this.states.setPageSizeInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateRowspan() {\n      this.states.setRowspanInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateScreensize() {\n      qx.log.Logger.debug(this, 'invalidateScreensize');\n      this.states.set({\n        pageSizeInvalid: true,\n        rowspanInvalid: true,\n        navbarInvalid: true,\n        backdropInvalid: true\n      });\n\n      this.makeAllSizesValid();\n    }\n  },\n\n  defer(statics) {\n    qx.event.Registration.addListener(window, 'resize', statics.invalidateScreensize, statics);\n  }\n});\n","/* Audio.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The audio widget embeds an audio file, which can be automatically played by incoming data\n *\n * @widgetexample <settings>\n *   <screenshot name=\"audio_example\">\n *    <caption>Default example for defining an audio widget in the configuration</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n * </settings>\n * <audio id=\"audio_widget\" src=\"path/to/audio_file.mp3\">\n *   <layout colspan=\"4\" />\n *   <label>Audio</label>\n *   <address transform=\"DPT:1.001\" mode=\"read\">0/0/0</address>\n * </audio>\n *\n *\n * @author Markus Damman\n * @since 0.8.4 (2014)\n */\nqx.Class.define('cv.ui.structure.pure.Audio', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    src: { check: 'String', nullable: true },\n    id: { check: 'String', nullable: true },\n    width: { check: 'String', nullable: true },\n    height: { check: 'String', nullable: true },\n    autoplay: { check: 'Boolean', init: false },\n    loop: { check: 'Boolean', init: false },\n    thresholdValue: { check: 'Number', init: 1 }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create the main structure\n      // create the actor\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style !== '') {\n        style = 'style=\"' + style + '\"';\n      }\n      const autoplay = this.isAutoplay() ? ' autoplay ' : '';\n      const loop = this.isLoop() ? ' loop ' : '';\n      return (\n        '<div class=\"actor\"><audio id=\"' +\n        this.getId() +\n        '\" ' +\n        autoplay +\n        loop +\n        style +\n        ' controls> <source src=\"' +\n        this.getSrc() +\n        '\" > </audio> </div>'\n      );\n    },\n\n    // overridden\n    getActor() {\n      return this.getDomElement().querySelector('.actor audio');\n    },\n\n    /**\n     * Handles updates of incoming data for this widget\n     *\n     * @param address {String} Source address of the incoming data\n     * @param value {String} Incoming data\n     */\n    _update(address, value) {\n      const on = this.applyMapping(this.getThresholdValue());\n      if (value >= on) {\n        const audioWidget = this.getActor();\n        if (audioWidget.paused === true) {\n          audioWidget.play();\n        }\n      }\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('audio', statics);\n  }\n});\n","/* Break.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * A break tag is used to start in new line for a grouped and thereby tidy display of\n * elements on one page.\n *\n * <pre class=\"sunlight-highlight-xml\">\n * &lt;break/&gt;\n * </pre>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Break', {\n  extend: cv.ui.structure.pure.AbstractBasicWidget,\n\n  /*\n   ******************************************************\n     MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    getDomString() {\n      return '<br/>';\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('break', statics);\n  }\n});\n","/* Controller.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.ui.structure.pure.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct() {\n    super();\n    this.__HTML_STRUCT =\n      '<div id=\"top\" class=\"loading\"><div class=\"nav_path\">-</div></div><div id=\"navbarTop\" class=\"loading\"></div><div id=\"centerContainer\" class=\"clearfix\"><div id=\"navbarLeft\" class=\"loading page\"></div><div id=\"main\" style=\"position:relative; overflow: hidden;\" class=\"loading\"><div id=\"pages\" style=\"position:relative;clear:both;\"><!-- all pages will be inserted here --></div></div><div id=\"navbarRight\" class=\"loading page\"></div></div><div id=\"navbarBottom\" class=\"loading\"></div><div id=\"bottom\" class=\"loading\"><hr /><div class=\"footer\"></div></div>';\n    this.__supportedFeatures = {\n      cache: true\n    };\n\n    // load basic CSS rules shared by all designs that support this structure\n    qx.bom.Stylesheet.includeFile(\n      qx.util.ResourceManager.getInstance().toUri('designs/designglobals.css') +\n        (cv.Config.forceReload === true ? '?' + Date.now() : '')\n    );\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    currentPage: {\n      check: 'cv.ui.structure.pure.Page',\n      nullable: true,\n      event: 'changeCurrentPage'\n    },\n\n    renderTarget: {\n      check: 'String',\n      init: '#pages'\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __supportedFeatures: null,\n    __HTML_STRUCT: null,\n    main_scroll: null,\n    old_scroll: '',\n    pagePartsHandler: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    parseBackendSettings(xml) {\n      const settings = cv.Config.configSettings;\n      const pagesElement = xml.documentElement;\n      let defaultBackendName = '';\n      if (pagesElement.getAttribute('backend') !== null) {\n        settings.backend = pagesElement.getAttribute('backend');\n        defaultBackendName = settings.backend;\n      } else {\n        defaultBackendName = (\n          cv.Config.URL.backend ||\n          cv.Config.server.backend ||\n          'knxd'\n        ).split(',')[0];\n      }\n      if (pagesElement.getAttribute('backend-url') !== null) {\n        settings.backendUrl = pagesElement.getAttribute('backend-url');\n        this.error(\n          'The useage of \"backend-url\" is deprecated. Please use \"backend-knxd-url\", \"backend-mqtt-url\" or \"backend-openhab-url\" instead.'\n        );\n      }\n\n      if (pagesElement.getAttribute('backend-knxd-url') !== null) {\n        settings.backendKnxdUrl = pagesElement.getAttribute('backend-knxd-url');\n        if (!defaultBackendName) {\n          defaultBackendName = 'knxd';\n        }\n      }\n      if (pagesElement.getAttribute('backend-mqtt-url') !== null) {\n        settings.backendMQTTUrl = pagesElement.getAttribute('backend-mqtt-url');\n        if (!defaultBackendName) {\n          defaultBackendName = 'mqtt';\n        }\n      }\n      if (pagesElement.getAttribute('backend-openhab-url') !== null) {\n        settings.backendOpenHABUrl = pagesElement.getAttribute('backend-openhab-url');\n        if (!defaultBackendName) {\n          defaultBackendName = 'openhab';\n        }\n      }\n      if (pagesElement.getAttribute('token') !== null) {\n        settings.credentials.token = pagesElement.getAttribute('token');\n      }\n      if (pagesElement.getAttribute('username') !== null) {\n        settings.credentials.username = pagesElement.getAttribute('username');\n      }\n      if (pagesElement.getAttribute('password') !== null) {\n        settings.credentials.password = pagesElement.getAttribute('password');\n      }\n\n      // make sure that the default name is the actual type\n      if (defaultBackendName === 'default') {\n        defaultBackendName = 'knxd';\n      }\n      if (defaultBackendName) {\n        cv.data.Model.getInstance().setDefaultBackendName(defaultBackendName);\n      }\n      return true;\n    },\n\n    login() {\n      const clients = cv.io.BackendConnections.getClients();\n      let client;\n      const promises = [];\n      for (const name in clients) {\n        client = clients[name];\n        promises.push(new Promise((res, rej) => {\n          client.login(true, cv.Config.configSettings.credentials, () => {\n            this.debug(name + ' logged in');\n            cv.io.BackendConnections.startInitialRequest(name);\n            res();\n          });\n        }));\n      }\n      return Promise.all(promises);\n    },\n\n    parseSettings(xml, done) {\n      const settings = cv.Config.configSettings;\n      const pagesElement = xml.documentElement;\n      settings.screensave_time = pagesElement.getAttribute('screensave_time');\n      if (settings.screensave_time) {\n        settings.screensave_time = parseInt(settings.screensave_time, 10);\n      }\n      settings.screensave_page = pagesElement.getAttribute('screensave_page');\n\n      if (pagesElement.getAttribute('max_mobile_screen_width') !== null) {\n        settings.maxMobileScreenWidth = pagesElement.getAttribute('max_mobile_screen_width');\n\n        // override config setting\n        cv.Config.maxMobileScreenWidth = settings.maxMobileScreenWidth;\n      }\n\n      const globalClass = pagesElement.getAttribute('class');\n      if (globalClass !== null) {\n        document.querySelector('body').classList.add(globalClass);\n      }\n      if (pagesElement.getAttribute('scroll_speed') === null) {\n        settings.scrollSpeed = 400;\n      } else {\n        settings.scrollSpeed = parseInt(pagesElement.getAttribute('scroll_speed'));\n      }\n      settings.bindClickToWidget = pagesElement.getAttribute('bind_click_to_widget') === 'true';\n      if (pagesElement.getAttribute('default_columns') !== null) {\n        settings.defaultColumns = pagesElement.getAttribute('default_columns');\n      }\n      if (pagesElement.getAttribute('min_column_width') !== null) {\n        settings.minColumnWidth = pagesElement.getAttribute('min_column_width');\n      }\n    },\n\n    async preParse(xml) {\n      const settings = cv.Config.configSettings;\n      const metaParser = new cv.parser.pure.MetaParser();\n\n      // start with the plugins\n      settings.pluginsToLoad = settings.pluginsToLoad.concat(metaParser.parsePlugins(xml));\n\n      // and then the rest\n      await metaParser.parse(xml);\n      this.debug('pre parsing done');\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param xml {XMLDocument} loaded config file\n     */\n    createUI(xml) {\n      cv.util.ScriptLoader.getInstance().addListenerOnce('stylesAndScriptsLoaded', () => {\n        cv.ui.structure.pure.layout.ResizeHandler.invalidateScreensize();\n      }, this);\n\n      if (!cv.Config.cacheUsed) {\n        this.debug('creating pages');\n        const page = xml.querySelector('pages > page'); // only one page element allowed...\n\n        this._createPages(page, 'id');\n        this.debug('finalizing');\n        qx.event.message.Bus.dispatchByName('setup.dom.append');\n        this.debug('pages created');\n      }\n      this.debug('setup.dom.finished');\n      qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n      cv.TemplateEngine.getInstance().setDomFinished(true);\n\n      this.login().then(() => {\n        if (qx.core.Environment.get('qx.debug')) {\n          cv.report.Replay.start();\n        }\n      });\n\n      this.initLayout();\n    },\n\n    /**\n     * Start the parsing process\n     * @param page {Element} XML-configuration element\n     * @param path {String} internal poth\n     * @param flavour {String} inherited flavour\n     * @param type {String} page type (text, 2d, 3d)\n     */\n    _createPages(page, path, flavour, type) {\n      cv.parser.pure.WidgetParser.renderTemplates(page);\n      let parsedData = cv.parser.pure.WidgetParser.parse(page, path, flavour, type);\n\n      if (!Array.isArray(parsedData)) {\n        parsedData = [parsedData];\n      }\n      let i = 0;\n      const l = parsedData.length;\n      for (; i < l; i++) {\n        const data = parsedData[i];\n        const widget = cv.ui.structure.WidgetFactory.createInstance(data.$$type, data);\n\n        // trigger DOM generation\n        if (widget) {\n          widget.getDomString();\n        }\n      }\n    },\n\n    /**\n     * Parse a label from the config file\n     * @param label {Element} label xml element\n     * @param flavour {String?} flavour name\n     * @param labelClass {String?} CSS class name\n     * @param style {String?} additional CSS style properties\n     */\n    parseLabel(label, flavour, labelClass, style) {\n      if (!label) {\n        return '';\n      }\n      let ret_val =\n        '<div class=\"' +\n        (labelClass !== undefined ? labelClass : 'label') +\n        '\"' +\n        (style ? ' style=\"' + style + '\"' : '') +\n        '>';\n\n      Array.prototype.forEach.call(label.childNodes, function (elem) {\n        if (elem.nodeType === Node.ELEMENT_NODE && elem.nodeName.toLowerCase() === 'icon') {\n          ret_val += cv.IconHandler.getInstance().getIconElement(\n            elem.getAttribute('name'),\n            elem.getAttribute('type'),\n            elem.getAttribute('flavour') || flavour,\n            elem.getAttribute('color'),\n            elem.getAttribute('styling'),\n            '',\n            true\n          );\n        } else if (elem.nodeType === Node.TEXT_NODE) {\n          ret_val += elem.textContent;\n        }\n      });\n      return ret_val + '</div>';\n    },\n    supports(feature, subfeature) {\n      if (Object.prototype.hasOwnProperty.call(this.__supportedFeatures, feature)) {\n        if (this.__supportedFeatures[feature] === true) {\n          if (subfeature) {\n            return (\n              Object.prototype.hasOwnProperty.call(this.__supportedFeatures[feature], subfeature) &&\n              this.__supportedFeatures[feature][subfeature] === true\n            );\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    getInitialAddresses(backendName) {\n      const startPageAddresses = {};\n      const pageWidget = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.initialPage);\n\n      pageWidget.getChildWidgets().forEach(function (child) {\n        const address = child.getAddress ? child.getAddress() : {};\n        for (let addr in address) {\n          if (Object.prototype.hasOwnProperty.call(address, addr) && addr.backendType === backendName) {\n            startPageAddresses[addr] = 1;\n          }\n        }\n      }, this);\n      return Object.keys(startPageAddresses);\n    },\n\n    initPagePartsHandler() {\n      if (!this.pagePartsHandler) {\n        this.pagePartsHandler = new cv.ui.structure.pure.navigation.PagePartsHandler();\n      }\n    },\n\n    initLayout() {\n      this.initPagePartsHandler();\n      if (!cv.Config.initialPage) {\n        this.__detectInitialPage();\n      }\n      let currentPage = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.initialPage);\n\n      if (currentPage) {\n        this.setCurrentPage(currentPage);\n      } else {\n        // this page does not exist, fallback to start page\n        cv.Config.initialPage = 'id_';\n        currentPage = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.initialPage);\n      }\n\n      cv.ui.structure.pure.layout.Manager.adjustColumns();\n      cv.ui.structure.pure.layout.Manager.applyColumnWidths('#' + cv.Config.initialPage, true);\n\n      this.main_scroll = new cv.ui.structure.pure.navigation.PageHandler();\n      if (this.scrollSpeed !== undefined) {\n        this.main_scroll.setSpeed(this.scrollSpeed);\n      }\n\n      new qx.util.DeferredCall(function () {\n        this.scrollToPage(cv.Config.initialPage, 0);\n      }, this).schedule();\n\n      // run the Trick-O-Matic scripts for great SVG backdrops\n      document.querySelectorAll('embed').forEach(function (elem) {\n        this._runTrickOMatic(elem, 0);\n      }, this);\n\n      document.querySelectorAll('.icon').forEach(cv.util.IconTools.fillRecoloredIcon, cv.util.IconTools);\n      document.querySelectorAll('.loading').forEach(function (elem) {\n        elem.classList.remove('loading');\n      }, this);\n\n      qx.core.Init.getApplication().addListener('changeMobile', this._onMobileChanged, this);\n    },\n\n    _runTrickOMatic(elem, retries) {\n      if (elem && typeof elem.getSVGDocument === 'function') {\n        try {\n          const svg = elem.getSVGDocument();\n          if (svg === null || svg.readyState !== 'complete') {\n            elem.onload = cv.ui.TrickOMatic.run;\n          } else {\n            cv.ui.TrickOMatic.run.call(elem);\n          }\n        } catch (e) {\n          if (e.name === 'NotSupportedError') {\n            if (retries <= 5) {\n              retries++;\n              window.requestAnimationFrame(() => {\n                this._runTrickOMatic(elem, retries);\n              });\n            } else {\n              this.error(e);\n            }\n          } else {\n            this.error(e);\n          }\n        }\n      }\n    },\n\n    doScreenSave() {\n      this.scrollToPage();\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor, 0, true);\n      }\n    },\n\n    scrollToPage(target, speed, skipHistory) {\n      if (undefined === target) {\n        target = cv.Config.configSettings.screensave_page;\n      }\n      const page_id = this.getPageIdByPath(target);\n      if (page_id === null) {\n        return;\n      }\n      if (cv.Config.currentPageId === page_id) {\n        return;\n      }\n      cv.Config.currentPageId = page_id;\n      cv.Config.treePath = page_id;\n\n      if (undefined === speed) {\n        speed = cv.Config.configSettings.scrollSpeed;\n      }\n\n      if (cv.Config.rememberLastPage && qx.core.Environment.get('html.storage.local')) {\n        localStorage.lastpage = page_id;\n      }\n\n      // push new state to history\n      if (skipHistory === undefined) {\n        const headline = document.querySelectorAll('#' + page_id + ' h1');\n        let pageTitle = 'CometVisu';\n        if (headline.length) {\n          pageTitle = headline[0].textContent + ' - ' + pageTitle;\n        }\n        qx.bom.History.getInstance().addToHistory(page_id, pageTitle);\n      }\n\n      this.main_scroll.seekTo(page_id, speed); // scroll to it\n\n      this.pagePartsHandler.initializeNavbars(page_id);\n      this._maintainNavbars();\n    },\n\n    _onMobileChanged(ev) {\n      const app = qx.core.Init.getApplication();\n      if (app.isReady()) {\n        cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n        this._maintainNavbars();\n      }\n    },\n\n    _maintainNavbars() {\n      if (qx.core.Init.getApplication().getMobile()) {\n        switch (this.pagePartsHandler.navbars.left.dynamic) {\n          case null:\n          case true:\n            this.pagePartsHandler.fadeNavbar('Left', 'out', 0);\n            break;\n\n          case false:\n            this.pagePartsHandler.fadeNavbar('Left', 'in', 0);\n        }\n      } else {\n        this.pagePartsHandler.fadeNavbar('Left', 'in', 0);\n      }\n    },\n\n    /**\n     * Reset some values related to the current page\n     */\n    resetPageValues() {\n      this.resetCurrentPage();\n      cv.ui.structure.pure.layout.Manager.currentPageUnavailableWidth = -1;\n      cv.ui.structure.pure.layout.Manager.currentPageUnavailableHeight = -1;\n      cv.ui.structure.pure.layout.Manager.currentPageNavbarVisibility = null;\n    },\n\n    async getInitialPageId() {\n      if (!cv.Config.initialPage) {\n        await this.__detectInitialPage();\n      }\n      return cv.Config.initialPage;\n    },\n\n    async __detectInitialPage() {\n      let startpage = 'id_';\n      if (cv.Config.startpage) {\n        startpage = cv.Config.startpage;\n        if (qx.core.Environment.get('html.storage.local') === true) {\n          if (startpage === 'remember') {\n            startpage = localStorage.getItem('lastpage');\n            cv.Config.rememberLastPage = true;\n            if (typeof startpage !== 'string' || startpage.substr(0, 3) !== 'id_') {\n              startpage = 'id_'; // fix obvious wrong data\n            }\n          } else if (startpage === 'noremember') {\n            localStorage.removeItem('lastpage');\n            startpage = 'id_';\n            cv.Config.rememberLastPage = false;\n          }\n        }\n      } else {\n        const req = qx.util.Uri.parseUri(window.location.href);\n        if (req.anchor && req.anchor.substring(0, 3) === 'id_') {\n          startpage = req.anchor;\n        }\n      }\n      if (startpage.match(/^id_[0-9_]*$/) !== null) {\n        cv.Config.initialPage = startpage;\n        return startpage;\n      }\n      // wait for DOM to be ready and detect the page id then\n      return new Promise(resolve => {\n        qx.event.message.Bus.subscribe('setup.dom.finished.before', () => {\n          cv.Config.initialPage = this.getPageIdByPath(startpage) || 'id_';\n          resolve(cv.Config.initialPage);\n        });\n      });\n    },\n\n    /**\n     * Returns the id of the page the given path is associated to\n     * @param page_name {String}\n     * @param path {String}\n     * @return {String}\n     */\n    getPageIdByPath(page_name, path) {\n      if (page_name === null) {\n        return null;\n      }\n      if (page_name.match(/^id_[0-9_]*$/) !== null) {\n        // already a page_id\n        return page_name;\n      }\n      if (path !== undefined) {\n        const scope = this.traversePath(path);\n        if (scope === null) {\n          // path is wrong\n          this.error('path \\'' + path + '\\' could not be traversed, no page found');\n\n          return null;\n        }\n        return this.getPageIdByName(page_name, scope);\n      }\n      return this.getPageIdByName(page_name);\n    },\n\n    traversePath(path, root_page_id) {\n      let path_scope = null;\n      let index = path.indexOf('/');\n      if (index >= 1) {\n        // skip escaped slashes like \\/\n        while (path.substr(index - 1, 1) === '\\\\') {\n          const next = path.indexOf('/', index + 1);\n          if (next >= 0) {\n            index = next;\n          }\n        }\n      }\n      //    console.log(\"traversePath(\"+path+\",\"+root_page_id+\")\");\n      if (index >= 0) {\n        // traverse path one level down\n        const path_page_name = path.substr(0, index);\n        path_scope = this.getPageIdByName(path_page_name, root_page_id);\n        path = path.substr(path_page_name.length + 1);\n        path_scope = this.traversePath(path, path_scope);\n        //      console.log(path_page_name+\"=>\"+path_scope);\n        return path_scope;\n      }\n      // bottom path level reached\n      path_scope = this.getPageIdByName(path, root_page_id);\n      return path_scope;\n    },\n\n    getPageIdByName(page_name, scope) {\n      let page_id = null;\n      if (page_name.match(/^id_[0-9_]*$/) !== null) {\n        // already a page_id\n        return page_name;\n      }\n      // find Page-ID by name\n      // decode html code (e.g. like &apos; => ')\n      page_name = cv.util.String.decodeHtmlEntities(page_name);\n      // remove escaped slashes\n      page_name = decodeURI(page_name.replace('\\\\/', '/'));\n\n      //      console.log(\"Page: \"+page_name+\", Scope: \"+scope);\n      const selector = scope !== undefined && scope !== null ? '.page[id^=\"' + scope + '\"] h1' : '.page h1';\n      let pages = document.querySelectorAll(selector);\n      pages = Array.from(pages).filter(function (h) {\n        return h.textContent === page_name;\n      });\n      if (pages.length > 1 && this.getCurrentPage() !== null) {\n        const currentPageId = this.getCurrentPage().getPath();\n        // More than one Page found -> search in the current pages descendants first\n        let fallback = true;\n        pages.some(function (page) {\n          const p = cv.util.Tree.getClosest(page, '.page');\n          if (page.innerText === page_name) {\n            const pid = p.getAttribute('id');\n            if (pid.length < currentPageId.length) {\n              // found pages path is shorter the the current pages -> must be an ancestor\n              if (currentPageId.indexOf(pid) === 0) {\n                // found page is an ancestor of the current page -> we take this one\n                page_id = pid;\n                fallback = false;\n                //break loop\n                return true;\n              }\n            } else if (pid.indexOf(currentPageId) === 0) {\n              // found page is an descendant of the current page -> we take this one\n              page_id = pid;\n              fallback = false;\n              //break loop\n              return true;\n            }\n          }\n          return false;\n        }, this);\n        if (fallback) {\n          // take the first page that fits (old behaviour)\n          pages.some(function (page) {\n            if (page.innerText === page_name) {\n              page_id = cv.util.Tree.getClosest(page, '.page').getAttribute('id');\n\n              // break loop\n              return true;\n            }\n            return false;\n          });\n        }\n      } else {\n        pages.some(function (page) {\n          if (page.innerText === page_name) {\n            page_id = cv.util.Tree.getClosest(page, '.page').getAttribute('id');\n            // break loop\n            return true;\n          }\n          return false;\n        });\n      }\n\n      if (page_id !== null && page_id.match(/^id_[0-9_]*$/) !== null) {\n        return page_id;\n      }\n      // not found\n      return null;\n    },\n\n    updateSentryScope() {\n      if (cv.Config.sentryEnabled && window.Sentry) {\n        Sentry.setTag('ui.structure', 'pure');\n        Sentry.setTag('ui.design', cv.Config.getDesign());\n      }\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    qx.core.Init.getApplication().removeListener('changeMobile', this._onMobileChanged, this);\n  },\n\n  defer(statics) {\n    cv.Application.structureController = statics.getInstance();\n  }\n});\n","/* Page.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Creates a new sub page and adds a corresponding link to the current page.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Page', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: [cv.ui.common.HasChildren, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(props) {\n    this.__waitForProperties = ['showNavbarTop', 'showNavbarBottom', 'showNavbarLeft', 'showNavbarRight'];\n\n    super(props);\n\n    this.addListener('changeVisible', this._onChangeVisible, this);\n\n    // prevent listening to the first message to the GA in the first second\n    // as it might be of the trigger type and still be in the knxd cache\n    this.__inhibitGA4Startup = setTimeout(() => {\n      this.__inhibitGA4Startup = null;\n    }, 1000);\n\n    // break out of the constructor\n    new qx.util.DeferredCall(function () {\n      const parentPage = this.getParentPage();\n      if (!parentPage) {\n        this.__waitForProperties = [];\n      } else {\n        this.debug('binding navbar visibility from ' + parentPage.getPath() + ' to ' + this.getPath());\n      }\n      [\n        ['showTopNavigation', true],\n        ['showFooter', true],\n        ['showNavbarTop', false],\n        ['showNavbarBottom', false],\n        ['showNavbarLeft', false],\n        ['showNavbarRight', false]\n      ].forEach(function (tuple) {\n        const property = tuple[0];\n        const defaultValue = tuple[1];\n        if (this['get' + property.charAt(0).toUpperCase() + property.slice(1)]() === null) {\n          // inherit from parent\n          if (parentPage) {\n            parentPage.bind(property, this, property);\n          } else {\n            // we have not parent page, because we are the root page, use the default value\n            this['set' + property.charAt(0).toUpperCase() + property.slice(1)](defaultValue);\n          }\n        }\n        if (!parentPage) {\n          this.setInitialized(true);\n        }\n      }, this);\n    }, this).schedule();\n\n    if (this.getAddress()) {\n      this._initOnCreate = true;\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    allPages: '',\n\n    /**\n     * Append the complete generated HTML code to the DOM tree at the end of the generation process\n     */\n    createFinal() {\n      // special function - only for pages!\n      const target = cv.ui.structure.pure.Controller.getInstance().getRenderTarget();\n      document.querySelector(target).innerHTML = this.allPages;\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this.createFinal, this);\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    initialized: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeInitialized'\n    },\n\n    anonymous: {\n      refine: true,\n      init: true\n    },\n\n    name: {\n      check: 'String',\n      init: '',\n      nullable: true\n    },\n\n    showTopNavigation: {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowTopNavigation'\n    },\n\n    showFooter: {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowFooter'\n    },\n\n    showNavbarTop: {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarTop',\n      apply: '_applyNavbarVisibility'\n    },\n\n    showNavbarBottom: {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarBottom',\n      apply: '_applyNavbarVisibility'\n    },\n\n    showNavbarLeft: {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarLeft',\n      apply: '_applyNavbarVisibility'\n    },\n\n    showNavbarRight: {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarRight',\n      apply: '_applyNavbarVisibility'\n    },\n\n    backdropAlign: {\n      init: '50% 50%',\n      nullable: true\n    },\n\n    backdropType: { check: 'String', nullable: true },\n    linkVisible: { check: 'Boolean', init: true, nullable: true },\n    size: { check: 'String', nullable: true },\n    backdrop: { check: 'String', nullable: true }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __waitForProperties: null,\n    __colspanClass: null,\n    __normalizedDomId: null,\n    __inhibitGA4Startup: null,\n\n    _applyNavbarVisibility(value, old, name) {\n      if (value !== null) {\n        const i_name = this.__waitForProperties.indexOf(name);\n        if (i_name !== -1) {\n          this.__waitForProperties.splice(i_name, 1);\n        }\n        if (this.__waitForProperties.length === 0) {\n          this.setInitialized(true);\n        }\n      }\n    },\n\n    /**\n     * If the page gets visible the colspan sized must be checked\n     * @param ev {Event}\n     */\n    _onChangeVisible(ev) {\n      if (ev.getData()) {\n        if (this.__colspanClass !== cv.ui.structure.pure.layout.Manager.COLSPAN_CLASS) {\n          this.applyColumnWidths();\n        }\n        if (this.getBackdrop()) {\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateBackdrop();\n        }\n      }\n    },\n\n    /**\n     * Set children column widths\n     */\n    applyColumnWidths() {\n      cv.ui.structure.pure.layout.Manager.applyColumnWidths('#' + this.getPath(), false);\n\n      this.__colspanClass = cv.ui.structure.pure.layout.Manager.COLSPAN_CLASS;\n    },\n\n    // overridden\n    getDomString() {\n      const pageType = this.getPageType();\n\n      const subpageClass = this.getFlavour() ? ' flavour_' + this.getFlavour() : '';\n      let subpage = '<div class=\"page type_' + pageType + subpageClass + '\" id=\"' + this.getPath() + '\">';\n      let container = '<div class=\"clearfix\"><h1>' + this.getName() + '</h1>';\n\n      if (pageType === '2d') {\n        let size = 'width:100%;height:100%;';\n        switch (this.getSize()) {\n          case 'fixed':\n            size += 'object-fit:none;';\n            if (this.getBackdropAlign()) {\n              size += 'object-position:' + this.getBackdropAlign() + ';';\n            }\n            break;\n\n          case 'contained':\n            size += 'object-fit:contain;';\n            if (this.getBackdropAlign()) {\n              size += 'object-position:' + this.getBackdropAlign() + ';';\n            }\n            break;\n\n          default: // default: assume scaled\n        }\n\n        const backdrop = this.getBackdrop();\n        if (backdrop) {\n          container +=\n            '<' +\n            this.getBackdropType() +\n            ' src=\"' +\n            qx.util.ResourceManager.getInstance().toUri(backdrop) +\n            '\" style=\"position: absolute; top: 0px; left: 0px;z-index:-1;' +\n            size +\n            '\"/>';\n        }\n      } /* ---Disable 3D for 0.8---\n      else if (pageType === \"3d\" && false) {\n      var floorplan = JSFloorPlan3D( container, backdrop );\n      floorplan.moveToRoom( 'Underground', false, true, false );\n      container.data( 'JSFloorPlan3D', floorplan );\n      container.find('canvas').css({position: 'absolute', top: '0px', left: '0px', 'z-index':'-1', width:'100%',height:'100%'});\n      subpage.click( {JSFloorPlan3D:floorplan,callback:function(event){\n      var j = this.JSFloorPlan3D;\n      j.moveToRoom( j.getState('showFloor'), event.room.room, true, true, function(){\n      container.trigger( 'update3d', j );\n      });\n      }}, floorplan.translateMouseEvent );\n      $(window).bind( 'resize', function(){ floorplan.resize($('.page').width(), $('.page').height(), true);} );\n      if (page.getAttribute('azimut')) {\n      cv.TemplateEngine.getInstance().addAddress( page.getAttribute('azimut'), path + '_' );\n      address[ page.getAttribute('azimut') ] = [ 'DPT:9.001', 0, 'azimut' ];\n      }\n      if (page.getAttribute('elevation')) {\n      cv.TemplateEngine.getInstance().addAddress( page.getAttribute('elevation'), path + '_' );\n      address[ page.getAttribute('elevation') ] = [ 'DPT:9.001', 0, 'elevation' ];\n      };\n      if (page.getAttribute('floor')) {\n      cv.TemplateEngine.getInstance().addAddress( page.getAttribute('floor'), path + '_' );\n      address[ page.getAttribute('floor') ] = [ 'DPT:5.004', 0, 'floor' ];\n      };\n      $( childs ).each( function(i,a){\n      if( this.tagName === 'filter' )\n      {\n      var floorFilter = $(this).attr('floor');\n      var roomFilter  = $(this).attr('room');\n      childs.splice( i, 1 );                 // remove filter element\n      $(this).children().each( function(j){  // and add it's children\n      $(this).find('layout').attr({floorFilter:floorFilter,roomFilter:roomFilter});\n      childs.splice( i+j, 0, this );\n      });\n      }\n      });\n      } */\n\n      container += this.getChildrenDomString();\n      subpage += container + '</div></div>';\n      cv.ui.structure.pure.Page.allPages = subpage + cv.ui.structure.pure.Page.allPages;\n      return undefined;\n    },\n\n    _update(address, data) {\n      // widgetData  = cv.data.Model.getInstance().getWidgetDataByElement( element );\n      // var value = this.defaultValueHandling( ga, data, widgetData );\n      // var type = widgetData.address[ ga ][2];\n      // switch( type )\n      // {\n      //   case 'azimut':\n      //     widgetData.JSFloorPlan3D.setState('currentAzimut', value, true);\n      //     element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     break;\n      //\n      //   case 'elevation':\n      //     widgetData.JSFloorPlan3D.setState('currentElevation', value, true);\n      //     element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     break;\n      //\n      //   case 'floor':\n      //     widgetData.JSFloorPlan3D.moveToRoom( value, false, true, true, function(){\n      //       element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     });\n      //     break;\n      //\n      //   default:\n\n      if (this.__inhibitGA4Startup !== null) {\n        // ignore first bus message during this timeout\n        clearTimeout(this.__inhibitGA4Startup);\n        this.__inhibitGA4Startup = null;\n        return;\n      }\n\n      const value = this.applyTransform(address, data);\n      const filters = this.getAddress()[address]?.clients ?? '';\n      let filterMatch = parseInt(data) === 1; // fallback for old behavior\n      if (cv.Config.clientID !== null && filters !== '') {\n        // apply filter\n        filterMatch = false;\n        for (const filter of filters.split(',')) {\n          const [, id, , triggerValue] = filter.match(/ *([^: ]+) *(: *([^ ]+))? */);\n          if (id === cv.Config.clientID || (id.at(-1) === '*' && id.substring(0, id.length-1) === cv.Config.clientID.substring(0, id.length-1))) {\n            // the clientID matches the filter\n            if (triggerValue === undefined || triggerValue === `${value}`) {\n              // the value matches the filter as well\n              filterMatch = true;\n            }\n          }\n        }\n      }\n      if (filterMatch) {\n        cv.Application.structureController.scrollToPage(this.getPath());\n        // TODO: the page used to send a '0' when the page was switched.\n        // But as that was completely hard coded it is now disabled to prevent\n        // any side effects. It is also not documented.\n        // When the infrastructure for bus initiated page switches is moved\n        // from using the attribute `ga` to a full blown `address` element\n        // it can be activated again by respecting the `write` mode.\n        //this.sendToBackend('0');\n      }\n      // }\n    },\n\n    sendToBackend(value) {\n      if (this.getAddress) {\n        const list = this.getAddress();\n        for (let id in list) {\n          if (Object.prototype.hasOwnProperty.call(list, id)) {\n            const address = list[id];\n            if (cv.data.Model.isWriteAddress(address)) {\n              cv.io.BackendConnections.getClient(address.backendType).write(id, cv.Transform.encode(address, value));\n            }\n          }\n        }\n      }\n    }\n  },\n\n  defer(statics) {\n    qx.event.message.Bus.subscribe('setup.dom.append', statics.createFinal, statics);\n  }\n});\n","/* PagePartsHandler.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * @author Christian Mayer\n * @since 2010\n */\nqx.Class.define('cv.ui.structure.pure.navigation.PagePartsHandler', {\n  extend: qx.core.Object,\n\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct() {\n    this.navbars = {\n      top: {\n        dynamic: null,\n        fadeVisible: true\n      },\n\n      left: {\n        dynamic: null,\n        fadeVisible: true\n      },\n\n      right: {\n        dynamic: null,\n        fadeVisible: true\n      },\n\n      bottom: {\n        dynamic: null,\n        fadeVisible: true\n      }\n    };\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    navbars: null,\n\n    updateTopNavigation(path) {\n      path = path.split('_');\n      path.pop();\n      let id = 'id_'; //path[0];\n      const pathNode = document.querySelector('.nav_path');\n      pathNode.innerHTML = '';\n      let pageTitle = this.getPageTitle(id);\n      let nav = document.createElement('a');\n      // eslint-disable-next-line no-script-url\n      nav.setAttribute('href', 'javascript:cv.Application.structureController.scrollToPage(\\'' + id + '\\')');\n\n      nav.setAttribute('id', 'breadcrump_pagejump_' + id);\n      nav.appendChild(document.createTextNode(pageTitle));\n      pathNode.appendChild(nav);\n      for (let i = 1; i < path.length; i++) {\n        // element 0 is id_ (JNK)\n        id += path[i] + '_';\n        let pageElem = document.querySelector('#' + id);\n        if (pageElem && pageElem.classList.contains('page')) {\n          // FIXME is this still needed?!?\n          pageTitle = this.getPageTitle(id);\n          let span = document.createElement('span');\n          span.innerHTML = ' &#x25ba; ';\n          pathNode.appendChild(span);\n          nav = document.createElement('a');\n          // eslint-disable-next-line no-script-url\n          nav.setAttribute('href', 'javascript:cv.Application.structureController.scrollToPage(\\'' + id + '\\')');\n\n          nav.setAttribute('id', 'breadcrump_pagejump_' + id);\n          nav.appendChild(document.createTextNode(pageTitle));\n          pathNode.appendChild(nav);\n        }\n      }\n      // cv.TemplateEngine.getInstance().handleResize(); - TODO CM160528: why? This shouldn't have\n      //                             any effect on the page size => commented out\n    },\n\n    getPageTitle(pageId) {\n      let pageTitle = '';\n      const pageData = cv.data.Model.getInstance().getWidgetData(pageId);\n      if (pageData) {\n        pageTitle = pageData.name;\n      } else {\n        const pageHeadline = document.querySelector('#' + pageId + ' h1');\n        if (pageHeadline) {\n          pageTitle = pageHeadline.textContent;\n        }\n      }\n      return pageTitle;\n    },\n\n    /**\n     * Change the size of the selected navbar\n     *\n     * currently only \"left\" and \"right\" are implemented\n     * @param position\n     * @param size\n     */\n    navbarSetSize(position, size) {\n      const cssSize = size + (isFinite(size) ? 'px' : '');\n      let navbar;\n      switch (position) {\n        case 'left':\n          navbar = document.querySelector('#navbarLeft');\n          navbar.style.width = cssSize;\n          if (!this.navbars.left.fadeVisible) {\n            navbar.style.left = -navbar.getBoundingClientRect().width + 'px';\n          }\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n          break;\n\n        case 'right':\n          document.querySelector('#centerContainer').style['padding-right'] = cssSize;\n          navbar = document.querySelector('#navbarRight');\n          navbar.style.width = cssSize;\n          navbar.style['margin-right'] = '-' + cssSize;\n          if (!this.navbars.right.fadeVisible) {\n            navbar.style.right = -navbar.getBoundingClientRect().width + 'px';\n          }\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n          break;\n      }\n    },\n\n    getNavbarsVisibility(page) {\n      if (!page) {\n        page = cv.Application.structureController.getCurrentPage();\n      }\n      if (!page) {\n        return { top: true, bottom: true, left: true, right: true };\n      }\n      if (typeof page === 'string') {\n        page = cv.ui.structure.WidgetFactory.getInstanceById(page);\n      } else if (page.attributes) {\n        page = cv.ui.structure.WidgetFactory.getInstanceById(page.getAttribute('id'));\n      }\n\n      if (!page) {\n        return { top: true, bottom: true, left: true, right: true };\n      }\n\n      return {\n        top: page.getShowNavbarTop(),\n        bottom: page.getShowNavbarBottom(),\n        left: page.getShowNavbarLeft(),\n        right: page.getShowNavbarRight()\n      };\n    },\n\n    /**\n     * update the visibility of top-navigation, footer and navbar for this page\n     *\n     * @param page {cv.ui.structure.pure.Page} page to update the parts for\n     * @param speed {Number} animation duration for changes\n     */\n    updatePageParts(page, speed) {\n      // default values\n      let showtopnavigation = true;\n      let showfooter = true;\n\n      if (page) {\n        if (!page.isInitialized()) {\n          // page is not ready, defer this update\n          const self = this;\n          page.addListenerOnce('changeInitialized', () => {\n            self.updatePageParts(page, speed);\n          });\n          return;\n        }\n        showtopnavigation = page.getShowTopNavigation();\n        showfooter = page.getShowFooter();\n      }\n      const topDisplay = window.getComputedStyle(document.querySelector('#top'))['display'];\n      const bottomDisplay = window.getComputedStyle(document.querySelector('#bottom'))['display'];\n      if (showtopnavigation) {\n        if (topDisplay === 'none') {\n          document.querySelectorAll('#top, #top > *').forEach(function (elem) {\n            elem.style.display = 'block';\n          }, this);\n          this.removeInactiveNavbars(page.getPath());\n        }\n      } else if (topDisplay !== 'none') {\n        document.querySelector('#top').style.display = 'none';\n        this.removeInactiveNavbars(page.getPath());\n      }\n      if (showfooter) {\n        if (bottomDisplay === 'none') {\n          document.querySelector('#bottom').style.display = 'block';\n          this.removeInactiveNavbars(page.getPath());\n        }\n      } else if (bottomDisplay !== 'none') {\n        document.querySelector('#bottom').style.display = 'none';\n        this.removeInactiveNavbars(page.getPath());\n      }\n      cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n    },\n\n    /**\n     * fades in/out a navbar\n     *\n     * @param position {String}  [Top|Left|Right|Bottom]\n     * @param direction {String} [in|out]\n     * @param speed {Number} time in milliseconds\n     */\n    fadeNavbar(position, direction, speed) {\n      speed = speed !== undefined ? speed : cv.Application.structureController.main_scroll.getSpeed();\n      const initCss = {};\n      const targetCss = {};\n      const navbar = document.querySelector('#navbar' + position);\n      if (navbar) {\n        const key = position.toLowerCase();\n        const self = this;\n        const onAnimationEnd = function () {\n          self.navbars[key].fadeVisible = direction === 'in';\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n        };\n        switch (direction) {\n          case 'in':\n            if (window.getComputedStyle(navbar).display === 'none') {\n              initCss.display = 'block';\n            }\n            targetCss[key] = 0;\n            switch (position) {\n              case 'Top':\n              case 'Bottom':\n                initCss[key] = -navbar.getBoundingClientRect().height + 'px';\n                break;\n              case 'Left':\n              case 'Right':\n                initCss[key] = -navbar.getBoundingClientRect().width + 'px';\n                break;\n            }\n\n            break;\n          case 'out':\n            initCss[key] = 0;\n            switch (position) {\n              case 'Top':\n              case 'Bottom':\n                targetCss[key] = -navbar.getBoundingClientRect().height + 'px';\n                break;\n              case 'Left':\n              case 'Right':\n                targetCss[key] = -navbar.getBoundingClientRect().width + 'px';\n                break;\n            }\n\n            break;\n        }\n\n        Object.entries(initCss).forEach(function (key_value) {\n          navbar.style[key_value[0]] = key_value[1];\n        });\n        if (speed === 0) {\n          Object.entries(targetCss).forEach(function (key_value) {\n            navbar.style[key_value[0]] = key_value[1];\n          });\n          onAnimationEnd();\n        } else {\n          const spec = {\n            duration: speed,\n            timing: cv.Application.structureController.main_scroll.getEasing(),\n            keep: 100,\n            keyFrames: {\n              0: initCss,\n              100: targetCss\n            }\n          };\n\n          const anim = qx.bom.element.Animation.animate(navbar, spec);\n          anim.addListenerOnce('end', onAnimationEnd, this);\n        }\n      }\n    },\n\n    /**\n     * traverse down the page tree from root page id_ -> .. -> page_id activate\n     * all navbars in that path deactivate all others\n     *\n     * @param page_id {String}\n     */\n    initializeNavbars(page_id) {\n      const self = this;\n      this.removeInactiveNavbars(page_id);\n      const tree = Array.from(document.querySelectorAll('#id_'));\n      if (page_id !== 'id_') {\n        const parts = page_id.split('_');\n        parts.pop();\n        parts[0] = '';\n        for (let i = 0; i < parts.length; i++) {\n          const subPath = parts.slice(0, i + 1).join('_');\n          if (subPath) {\n            const item = document.querySelectorAll('#id' + subPath + '_.page');\n            if (item.length === 1) {\n              tree.push(item[0]);\n            }\n          }\n        }\n      }\n      let level = 1;\n      const size = { top: 0, right: 0, bottom: 0, left: 0 };\n      const dynamic = { top: null, right: null, bottom: null, left: null };\n      const positions = ['top', 'right', 'bottom', 'left'];\n      tree.forEach(function (elem) {\n        const id = elem.getAttribute('id');\n        positions.forEach(function (pos) {\n          const nav = document.querySelector('#' + id + pos + '_navbar');\n          if (nav) {\n            const data = cv.data.Model.getInstance().getWidgetData(id + pos + '_navbar');\n\n            if (data.scope >= 0 && tree.length - level > data.scope) {\n              // navbar that is not visible at the moment -> ignore it\n              nav.classList.remove('navbarActive');\n              return;\n            }\n            if (data.dynamic !== null) {\n              dynamic[pos] = data.dynamic;\n            }\n            self.navbars[pos].dynamic = dynamic[pos];\n            if (data.scope === undefined || data.scope < 0 || tree.length - level <= data.scope) {\n              nav.classList.add('navbarActive');\n            } else {\n              nav.classList.remove('navbarActive');\n            }\n            if (data.width !== null) {\n              size[pos] = data.width;\n            } else if (size[pos] === 0) {\n              // navbar with content but no size given so far => use default\n              size[pos] = 300;\n            }\n          }\n        });\n        level++;\n      });\n      positions.forEach(function (pos) {\n        self.navbarSetSize(pos, size[pos]);\n      });\n      cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n    },\n\n    removeInactiveNavbars(page_id) {\n      // remove all navbars that do not belong to this page\n      document.querySelectorAll('.navbar.navbarActive').forEach(function (elem) {\n        let navBarPath = elem.getAttribute('id').split('_');\n        // skip last 2 elements e.g. '_top_navbar'\n        navBarPath = navBarPath.slice(0, navBarPath.length - 2).join('_');\n        const expr = new RegExp('^' + navBarPath + '.*', 'i');\n        if (navBarPath !== page_id && !expr.test(page_id)) {\n          elem.classList.remove('navbarActive');\n        }\n      });\n    }\n  }\n});\n","/* PageHandler.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * @author Christian Mayer\n * @since 2016\n */\n// FIXME and TODO: This class is currently just a quick hack to get rid\n// of the jQuery-Tools Scrollable. It should be enhanced to allow different\n// page transition animations like blending, etc. pp.\n\nqx.Class.define('cv.ui.structure.pure.navigation.PageHandler', {\n  extend: qx.core.Object,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    // time in milliseconds\n    speed: {\n      check: 'Number',\n      init: 400\n    },\n\n    // name of the easing function\n    easing: {\n      check: 'string',\n      init: 'ease'\n    },\n\n    currentPath: {\n      check: 'String',\n      init: ''\n    },\n\n    animationType: {\n      check: ['slide', 'fade', 'flip', 'pop', 'swap', 'none'],\n      init: 'slide'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    seekTo(target, speed) {\n      if (!Number.isFinite(speed)) {\n        speed = 0;\n      }\n      const currentPath = this.getCurrentPath();\n      if (currentPath !== '') {\n        qx.event.message.Bus.dispatchByName('path.' + currentPath + '.exitingPageChange', currentPath, target);\n      }\n\n      const pageWidget = cv.ui.structure.WidgetFactory.getInstanceById(target);\n\n      if (!pageWidget || !pageWidget.getDomElement()) {\n        // check if page does exist\n        return;\n      }\n      qx.event.message.Bus.dispatchByName('path.' + target + '.beforePageChange', target);\n\n      const controller = cv.Application.structureController;\n\n      controller.resetPageValues();\n\n      controller.setCurrentPage(pageWidget);\n\n      // update visibility of navbars, top-navigation, footer\n      controller.pagePartsHandler.updatePageParts(pageWidget, speed);\n\n      // now the animation\n      let animationConfig = {};\n\n      // update reference, because the appearance might have changed\n      const oldPageWidget = currentPath ? cv.ui.structure.WidgetFactory.getInstanceById(currentPath) : null;\n\n      let direction = null;\n      let animationEnabled = speed > 0 && this.getAnimationType() !== 'none';\n\n      // browser check\n      if (\n        qx.core.Environment.get('browser.name') === 'safari' &&\n        parseInt(qx.core.Environment.get('browser.version')) <= 5\n      ) {\n        animationEnabled = false;\n      }\n      if (animationEnabled) {\n        const currentDepth = currentPath.split('_').length;\n        const targetDepth = target.split('_').length;\n        direction = currentDepth <= targetDepth ? 'down' : 'up';\n        animationConfig = this.__getAnimationConfig(direction);\n\n        // show the new page (because animations do not work on hidden elements) + hide scrollbar\n        Object.entries({\n          display: 'block',\n          overflow: 'hidden'\n        }).forEach(function (key_value) {\n          pageWidget.getDomElement().style[key_value[0]] = key_value[1];\n        });\n        // set it to visible\n        pageWidget.setVisible(true);\n      }\n\n      if (!animationEnabled) {\n        if (oldPageWidget) {\n          this.__onLeavePage(oldPageWidget);\n        }\n        this.__onEnterPage(pageWidget, 0, true);\n      } else {\n        if (oldPageWidget) {\n          const outAnim = qx.bom.element.Animation.animate(\n            oldPageWidget.getDomElement(),\n            animationConfig.leavePage,\n            speed\n          );\n\n          oldPageWidget.getDomElement().style['overflow-y'] = 'hidden';\n          outAnim.addListenerOnce('end', () => {\n            this.__onLeavePage(oldPageWidget);\n          });\n        }\n        const oldPos = window.getComputedStyle(pageWidget.getDomElement()).position;\n        pageWidget.getDomElement().style.position = 'absolute';\n        qx.bom.AnimationFrame.request(function () {\n          const animation = qx.bom.element.Animation.animate(\n            pageWidget.getDomElement(),\n            animationConfig.enterPage,\n            speed\n          );\n\n          animation.addListenerOnce('end', () => {\n            this.__onEnterPage(pageWidget, oldPos);\n          });\n        }, this);\n      }\n    },\n\n    /**\n     * Get the animation configs for the current animationType setting\n     * @param direction {String} \"up\" or \"down\"\n     */\n    __getAnimationConfig(direction) {\n      let inAnim;\n      let outAnim;\n\n      // try to find existing animation configuration\n      const type = this.getAnimationType().toUpperCase();\n      if (direction === 'up') {\n        inAnim = qx.util.Animation[type + '_RIGHT_IN'] || qx.util.Animation[type + '_IN'];\n        outAnim = qx.util.Animation[type + '_RIGHT_OUT'] || qx.util.Animation[type + '_OUT'];\n      } else if (direction === 'down') {\n        inAnim = qx.util.Animation[type + '_LEFT_IN'] || qx.util.Animation[type + '_IN'];\n        outAnim = qx.util.Animation[type + '_LEFT_OUT'] || qx.util.Animation[type + '_OUT'];\n      }\n      if (!inAnim || !outAnim) {\n        // fallback\n        switch (this.getAnimationType()) {\n          case 'slide':\n            if (direction === 'up') {\n              inAnim = qx.util.Animation.SLIDE_RIGHT_IN;\n              outAnim = qx.util.Animation.SLIDE_RIGHT_OUT;\n            } else {\n              inAnim = qx.util.Animation.SLIDE_LEFT_IN;\n              outAnim = qx.util.Animation.SLIDE_LEFT_OUT;\n            }\n            break;\n        }\n      }\n      if (inAnim) {\n        inAnim.timing = this.getEasing();\n      }\n      if (outAnim) {\n        outAnim.timing = this.getEasing();\n      }\n      return {\n        enterPage: inAnim,\n        leavePage: outAnim\n      };\n    },\n\n    /**\n     * Cleanup after page has been left\n     * @param oldPageWidget {cv.ui.structure.pure.Page}\n     */\n    __onLeavePage(oldPageWidget) {\n      oldPageWidget.getDomElement().classList.remove('pageActive', 'activePage');\n      oldPageWidget.getDomElement().style.overflow = null;\n      qx.event.message.Bus.dispatchByName(\n        'path.' + oldPageWidget.getPath() + '.afterPageChange',\n        oldPageWidget.getPath()\n      );\n\n      qx.event.message.Bus.dispatchByName('path.pageLeft', oldPageWidget.getPath());\n\n      oldPageWidget.setVisible(false);\n    },\n\n    /**\n     * Cleanup after page has been entered\n     * @param pageWidget {cv.ui.structure.pure.Page}\n     * @param oldPos {String} CSS-position value to set\n     * @param updateVisibility {Boolean} set the visibility property of the page to true or do not change it\n     */\n    __onEnterPage(pageWidget, oldPos, updateVisibility) {\n      const page = pageWidget.getDomElement();\n      const target = pageWidget.getPath();\n      page.classList.add('pageActive', 'activePage'); // show new page\n      if (updateVisibility === true) {\n        // set it to visible\n        pageWidget.setVisible(true);\n      }\n      // final stuff\n      this.setCurrentPath(target);\n      cv.Application.structureController.pagePartsHandler.updateTopNavigation(target);\n\n      qx.event.message.Bus.dispatchByName('page.' + target + '.appear', target);\n      qx.event.message.Bus.dispatchByName('path.pageChanged', target);\n      // show scrollbar after animation\n      const styles = { overflow: null, display: null };\n      if (oldPos) {\n        styles.position = oldPos;\n      }\n      Object.entries(styles).forEach(function (key_value) {\n        page.style[key_value[0]] = key_value[1];\n      });\n    }\n  }\n});\n","/* DesignToggle.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a button to toggle through the available designs\n * @widgetexample\n * <designtoggle>\n *   <layout colspan=\"6\"/>\n *   <label>Change Design</label>\n * </designtoggle>\n *\n *\n *\n * @author Christian Mayer\n * @since 0.5.3 (2010)\n */\nqx.Class.define('cv.ui.structure.pure.DesignToggle', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton],\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">' + cv.Config.getDesign() + '</div></div>';\n    },\n    /**\n     * Action performed when the widget got clicked\n     *\n     *\n     * @param path {String} - Internal path of the widget\n     * @param actor {Element} - DOMElement\n     * @param isCanceled {Boolean} - If true the action does nothing\n     */\n    _action(path, actor, isCanceled) {\n      if (isCanceled) {\n        return;\n      }\n\n      const designs = cv.Config.designStructureMap.pure;\n\n      const oldDesign = this.getDomElement().querySelector('.value').textContent;\n      const newDesign = designs[(designs.indexOf(oldDesign) + 1) % designs.length];\n\n      const URL = cv.util.Location.getHref();\n      const regexp = new RegExp('design=' + oldDesign);\n      if (URL.search(regexp) !== -1) {\n        // has URL-parameter design\n        cv.util.Location.setHref(URL.replace(regexp, 'design=' + newDesign));\n      } else {\n        const parts = cv.util.Location.getHref().split('#');\n        let req = qx.util.Uri.appendParamsToUrl(parts[0], {\n          design: newDesign\n        });\n\n        if (parts.length > 1) {\n          req += '#' + parts[1];\n        }\n        cv.util.Location.setHref(req);\n      }\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('designtoggle', statics);\n  }\n});\n","/* Group.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * A group can be used to group a couple of widgets and optionally surround them with a border or name the group.\n *\n * @widgetexample <settings selector=\".widget_container[data-type=group]\">\n *  <screenshot name=\"group_with_border\">\n *    <caption>Group with border and name</caption>\n *    <data address=\"0/0/0\">1</data>\n *    <data address=\"0/0/1\">21</data>\n *  </screenshot>\n *  </settings>\n *  <group name=\"Example Group\">\n *    <layout colspan=\"6\" />\n *    <text><label>Some Text</label></text>\n *    <switch>\n *      <layout colspan=\"3\" />\n *      <label>Switch</label>\n *      <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *    </switch>\n *    <info format=\"%.1f °C\">\n *      <layout colspan=\"3\" />\n *      <label>Temperature</label>\n *      <address transform=\"DPT:9.001\">0/0/1</address>\n *    </info>\n *  </group>\n *\n * @widgetexample <settings selector=\".widget_container[data-type=group]\">\n *  <screenshot name=\"group_without_border\">\n *    <caption>Hidden Group: no border no name</caption>\n *    <data address=\"0/0/0\">1</data>\n *    <data address=\"0/0/1\">21</data>\n *  </screenshot>\n *  </settings>\n *  <group nowidget=\"true\">\n *    <layout colspan=\"6\" />\n *    <text><label>Some Text</label></text>\n *    <switch>\n *      <layout colspan=\"3\" />\n *      <label>Switch</label>\n *      <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *    </switch>\n *    <info format=\"%.1f °C\">\n *      <layout colspan=\"3\" />\n *      <label>Temperature</label>\n *      <address transform=\"DPT:9.001\">0/0/1</address>\n *    </info>\n *  </group>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Group', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    noWidget: {\n      check: 'Boolean',\n      init: false\n    },\n\n    name: {\n      check: 'String',\n      init: ''\n    },\n\n    target: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    /**\n     * Action performed when the group got clicked. If a target is specified in the group attributes\n     * the action will switch to the page defined by the target.\n     *\n     *\n     * @param  event {Event}\n     */\n    action(event) {\n      if (this.getTarget()) {\n        cv.Application.structureController.scrollToPage(this.getTarget());\n        if (event.getBubbles()) {\n          event.stopPropagation();\n        }\n      }\n    },\n\n    // overridden, group has no actor\n    getActor() {\n      return this.getDomElement();\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n      this.getDomElement().style['z-index'] = 1;\n    },\n\n    // overridden\n    getDomString() {\n      // heading style\n      let hstyle = '';\n      if (this.getAlign()) {\n        hstyle += 'style=\"text-align:' + this.getAlign() + '\"';\n      }\n\n      let container = '<div class=\"clearfix\">';\n      if (this.getName()) {\n        container += '<h2 ' + hstyle + '>' + this.getName() + '</h2>';\n      }\n\n      container += this.getChildrenDomString();\n      container += '</div>';\n\n      return '<div class=\"' + this.getClasses() + '\" ' + this.getStyle() + '>' + container + '</div>';\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('group', statics);\n  }\n});\n","/* Image.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds an image to your visualization. Using the auto-refresh setting this widget can be used e.g. to show\n * a camera picture.\n *\n * @widgetexample\n * <image src=\"resource/icons/CometVisu_orange.png\" width=\"45px\" height=\"32px\">\n *   <layout colspan=\"2\" />\n * </image>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n * @asset(qx/static/blank.gif)\n */\nqx.Class.define('cv.ui.structure.pure.Image', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: [cv.ui.common.Refresh, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width: { check: 'String', init: '100%' },\n    height: { check: 'String', nullable: true },\n    cropTop: { check: 'String' },\n    cropBottom: { check: 'String' },\n    src: { check: 'String', init: '' },\n    widthFit: { check: 'Boolean', init: false },\n    placeholder: {\n      check: ['none', 'src', 'hide', 'exclude'],\n      init: 'none'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __src: null,\n\n    // overridden\n    _getInnerDomString() {\n      // create the actor\n      let imgStyle = '';\n      if (this.getWidth()) {\n        imgStyle += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getWidthFit() === true) {\n        imgStyle += 'max-width:100%;';\n      }\n      if (this.getHeight()) {\n        imgStyle += 'height:' + this.getHeight() + ';';\n      }\n      if (this.getCropTop() !== '' || this.getCropBottom() !== '') {\n        let top = '0%';\n        let bottom = '';\n        if (this.getCropTop() !== '') {\n          top = '-' + this.getCropTop();\n          bottom = 'margin-bottom:' + top;\n        }\n        if (this.getCropBottom() !== '') {\n          bottom = 'margin-bottom:calc(' + top + ' - ' + this.getCropBottom() + ');';\n        }\n        imgStyle += 'object-position:0% ' + top + ';' + bottom;\n      }\n\n      let src = this.__getSrc();\n      if (!src) {\n        switch (this.getPlaceholder()) {\n          case 'hide':\n            src = qx.util.ResourceManager.getInstance().toUri('qx/static/blank.gif');\n\n            break;\n\n          case 'exclude':\n            imgStyle += 'display:none;';\n            break;\n\n          case 'src':\n            this.error('no src placeholder defined');\n            break;\n        }\n      }\n      return '<div class=\"actor\"><img src=\"' + src + '\" style=\"' + imgStyle + '\" /></div>';\n    },\n\n    /**\n     * Return the real src value\n     */\n    __getSrc() {\n      if (!this.__src) {\n        let src = this.getSrc();\n        const parsedUri = qx.util.Uri.parseUri(this.getSrc());\n        if (!parsedUri.protocol && !src.startsWith('/')) {\n          // is relative URI, use the ResourceManager\n          src = qx.util.ResourceManager.getInstance().toUri(src);\n        }\n        this.__src = src || '';\n      }\n      return this.__src;\n    },\n\n    handleUpdate(text, address) {\n      const valueElem = this.getValueElement();\n      if (!text) {\n        switch (this.getPlaceholder()) {\n          case 'src':\n            text = this.__getSrc();\n            valueElem.style.display = 'inline';\n            break;\n\n          case 'hide':\n            text = qx.util.ResourceManager.getInstance().toUri('qx/static/blank.gif');\n\n            valueElem.style.display = 'inline';\n            break;\n\n          case 'exclude':\n            valueElem.style.display = 'none';\n            break;\n        }\n      } else {\n        valueElem.style.display = 'inline';\n      }\n      valueElem.setAttribute('src', text);\n    },\n\n    // overridden\n    getValueElement() {\n      return this.getDomElement().querySelector('img');\n    },\n\n    // overridden\n    _applyVisible(value) {\n      const valueElem = this.getValueElement();\n      if (!valueElem || this.getRefresh() > 0) {\n        return;\n      }\n      if (value === true) {\n        valueElem.setAttribute('src', this.__getSrc());\n      } else {\n        valueElem.setAttribute('src', '');\n      }\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('image', statics);\n  }\n});\n","/* ImageTrigger.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds an image like the {@link cv.ui.structure.pure.Image} widget, but additionally the image can be changed by incoming\n * data and can send data to the backend by clicking on it.\n * There are two modes to react on incoming data:\n *\n * <ul>\n *  <li><code>type=\"show\"</code>: Hides the image when incoming data === 0</li>\n *  <li><code>type=\"select\"</code>: Changes the image by appending the incoming data to the initial configured image source, or hide it when incoming data === 0</li>\n * </ul>\n * Example:\n * <pre class=\"sunlight-highlight-xml\">\n * &lt;imagetrigger src=\"resource/icons/comet\" suffix=\"svg\" sendValue=\"clicked\" type=\"select\"&gt;\n *    &lt;address transform=\"DPT:16.001\" mode=\"readwrite\"&gt;0/0/0&lt;/address&gt;\n * &lt;/imagetrigger&gt;\n * </pre>\n *\n * initially shows nothing. When the CometVisu receives the string <code>_icon</code> in address <code>0/0/0</code>,\n * the image <code>icons/comet_opt_icon.svg</code> is shown. When the CometVisu receives '0' on address <code>0/0/0</code>,\n * this image is hidden.\n *\n * @widgetexample <settings>\n *   <screenshot name=\"image_trigger\">\n *     <caption>Image changed by incoming data 'blue'</caption>\n *     <data address=\"0/0/0\">blue</data>\n *   </screenshot>\n *   <screenshot name=\"image_trigger_changes\">\n *     <caption>Image changed by incoming data 'grey'</caption>\n *     <data address=\"0/0/0\">grey</data>\n *   </screenshot>\n *  </settings>\n *  <imagetrigger src=\"resource/icons/CometVisu_\" suffix=\"png\" sendValue=\"clicked\" type=\"select\" width=\"45px\" height=\"32px\">\n *    <layout colspan=\"1\" />\n *    <address transform=\"DPT:16.001\" mode=\"readwrite\">0/0/0</address>\n *  </imagetrigger>\n *\n * @widgetexample <settings>\n *   <caption>Disable layout width by settings it to '0', to have widget with === image width</caption>\n *   <screenshot name=\"image_trigger_colspan0\">\n *     <data address=\"0/0/0\">1</data>\n *   </screenshot>\n *  </settings>\n *  <imagetrigger src=\"resource/icons/CometVisu_orange\" suffix=\"png\" sendValue=\"clicked\" type=\"show\" width=\"45px\" height=\"32px\">\n *    <layout colspan=\"0\" />\n *    <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *  </imagetrigger>\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.ImageTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton, cv.ui.common.Refresh, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    height: { check: 'String', nullable: true },\n    updateType: { check: 'String', init: '' },\n    width: { check: 'String', init: '100%' },\n    src: { check: 'String', nullable: true },\n    suffix: { check: 'String', nullable: true },\n    sendValue: { check: 'String', init: '' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      let style = '';\n      if (Object.keys(this.getLayout()).length === 0) {\n        style += cv.parser.pure.WidgetParser.extractLayout(this.getLayout(), this.getPageType());\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style.length > 0) {\n        style = ' style=\"' + style + '\"';\n      }\n\n      let actor = '<div class=\"actor\">';\n      if (this.getUpdateType() === 'show') {\n        actor += '<img src=\"' + this.__getUrl(this.getSrc() + '.' + this.getSuffix()) + '\"' + style.trim() + ' />';\n      } else {\n        actor += '<img src=\"\"' + style + ' />';\n      }\n\n      actor += '</div>';\n      return actor;\n    },\n\n    _update(address, value) {\n      const imageChild = this.getDomElement().querySelector('img');\n      if (this.getUpdateType() === 'show') {\n        if (value === 0) {\n          imageChild.style.display = 'none';\n        } else {\n          imageChild.setAttribute('src', this.__getUrl(this.getSrc() + '.' + this.getSuffix()));\n\n          imageChild.style.display = 'block';\n        }\n      } else if (this.getUpdateType() === 'select') {\n        if (value === 0) {\n          imageChild.style.display = 'none';\n        } else {\n          imageChild.setAttribute('src', this.__getUrl(this.getSrc() + value + '.' + this.getSuffix()));\n\n          imageChild.style.display = 'block';\n        }\n      }\n\n      //TODO: add value if mapping exists\n      //TODO: get image name from mapping\n      //TODO: add bitmask for multiple images\n      //TODO: add SVG-magics\n    },\n\n    __getUrl(url) {\n      const parsedUri = qx.util.Uri.parseUri(url);\n      if (!parsedUri.protocol && !url.startsWith('/')) {\n        // is relative URI, use the ResourceManager\n        url = qx.util.ResourceManager.getInstance().toUri(url);\n      }\n      return url;\n    },\n\n    _action() {\n      if (this.getSendValue() === '') {\n        return;\n      }\n      this.sendToBackend(this.getSendValue());\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('imagetrigger', statics);\n  }\n});\n","/* Info.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a dynamic field to the visu that can represent values from the BUS\n * (e.g. 14-byte text or temperature measurements).\n *\n * @widgetexample <settings>\n *   <caption>Show temperature in degree celsius</caption>\n *   <screenshot name=\"info_temp\">\n *     <data address=\"0/0/0\">19</data>\n *   </screenshot>\n * </settings>\n * <info format=\"%.1f °C\">\n *   <label>outside temperature</label>\n *   <address transform=\"DPT:9.001\">0/0/0</address>\n * </info>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Info', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor\"><div class=\"value\">-</div></div>';\n    }\n  }\n});\n","/* InfoAction.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The infoaction widget is a combination of an info/text widget and an \"action\"-widget, e.g. switch or trigger.\n *\n * Use case: if you have a group of lights, you can show the number of lights currently switched on\n * and control the whole group in one widget.\n *\n * @widgetexample <settings>\n *   <caption>Example combines an info widget to show the number of lights currently switched on, and an Switch to control them</caption>\n *   <screenshot name=\"infoaction_lights\">\n *     <data address=\"0/0/0\">4</data>\n *     <data address=\"0/0/1\">1</data>\n *   </screenshot>\n * </settings>\n * <meta>\n *  <mappings>\n *    <mapping name=\"OnOff\">\n *      <entry value=\"0\">Off</entry>\n *      <entry value=\"1\">On</entry>\n *    </mapping>\n *  </mappings>\n *  <stylings>\n *    <styling name=\"GreyGreen\">\n *      <entry value=\"0\">grey</entry>\n *      <entry value=\"1\">green</entry>\n *    </styling>\n *  </stylings>\n * </meta>\n * <infoaction>\n *  <layout colspan=\"4\"/>\n *  <label>Lights</label>\n *  <widgetinfo>\n *    <info>\n *     <address transform=\"DPT:9.001\">0/0/0</address>\n *    </info>\n *  </widgetinfo>\n *  <widgetaction>\n *   <switch mapping=\"OnOff\" styling=\"GreyGreen\">\n *    <layout colspan=\"3\" />\n *    <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/1</address>\n *   </switch>\n *  </widgetaction>\n * </infoaction>\n *\n *\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (as widget), 0.9.2 (as plugin)\n */\nqx.Class.define('cv.ui.structure.pure.InfoAction', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return this.getChildrenDomString();\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infoaction', statics);\n  }\n});\n","/* InfoTrigger.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds an element to the visu that contains two buttons and a value indication for feedback\n * from the BUS. (E.g. for multimedia control\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.InfoTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton, cv.ui.common.HandleLongpress],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    downValue: {\n      check: 'Number',\n      init: 0\n    },\n\n    shortDownValue: {\n      check: 'Number',\n      nullable: true\n    },\n\n    downLabel: {\n      check: 'String',\n      nullable: true\n    },\n\n    upValue: {\n      check: 'Number',\n      init: 0\n    },\n\n    shortUpValue: {\n      check: 'Number',\n      nullable: true\n    },\n\n    upLabel: {\n      check: 'String',\n      nullable: true\n    },\n\n    isAbsolute: {\n      check: 'Boolean',\n      init: false\n    },\n\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 255\n    },\n\n    infoPosition: {\n      check: ['left', 'middle', 'right'],\n      init: 'middle'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create buttons + info\n      let ret_val = '<div style=\"float:left;\">';\n\n      let actordown = '<div class=\"actor switchUnpressed downlabel\" ';\n      if (this.getAlign()) {\n        actordown += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actordown += '>';\n      actordown += '<div class=\"label\">' + (this.getDownLabel() || '-') + '</div>';\n      actordown += '</div>';\n\n      let actorup = '<div class=\"actor switchUnpressed uplabel\" ';\n      if (this.getAlign()) {\n        actorup += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorup += '>';\n      actorup += '<div class=\"label\">' + (this.getUpLabel() || '+') + '</div>';\n      actorup += '</div>';\n\n      let actorinfo = '<div class=\"actor switchInvisible\" ';\n      if (this.getAlign()) {\n        actorinfo += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorinfo += '><div class=\"value\">-</div></div>';\n\n      switch (this.getInfoPosition()) {\n        case 'middle':\n          ret_val += actordown;\n          ret_val += actorinfo;\n          ret_val += actorup;\n          break;\n        case 'right':\n          ret_val += actordown;\n          ret_val += actorup;\n          ret_val += actorinfo;\n          break;\n        default:\n          ret_val += actorinfo;\n          ret_val += actordown;\n          ret_val += actorup;\n          break;\n      }\n\n      return ret_val + '</div>';\n    },\n\n    getActors() {\n      return this.getDomElement().querySelectorAll('.actor.uplabel, .actor.downlabel');\n    },\n\n    // overridden\n    initListeners() {\n      this.getActors().forEach(function (actor) {\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    },\n\n    __findActor(element) {\n      while (!element.classList.contains('actor')) {\n        element = element.parentNode;\n        if (element.classList.contains('widget')) {\n          // thats too far\n          return null;\n        }\n      }\n      return element;\n    },\n\n    _onLongTap(event) {\n      this.__action(false, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    _action(event) {\n      this.__action(true, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    __action(isShort, isDown) {\n      let value;\n      if (isShort && this.getShortDownValue() !== null && this.getShortUpValue() !== null) {\n        value = isDown ? this.getShortDownValue() : this.getShortUpValue();\n      } else {\n        value = isDown ? this.getDownValue() : this.getUpValue();\n      }\n\n      const bitMask = isShort ? 1 : 2;\n\n      if (this.getIsAbsolute()) {\n        let bvalue = parseFloat(this.getBasicValue());\n        if (!Number.isFinite(bvalue)) {\n          bvalue = 0; // anything is better than NaN...\n        }\n        value = bvalue + value;\n        value = Math.max(value, this.getMin());\n        value = Math.min(value, this.getMax());\n      }\n      this.sendToBackend(value, function (address) {\n        return !!(address.variantInfo & bitMask);\n      });\n    },\n\n    getDownActor() {\n      return this.getDomElement().querySelector('.actor.downlabel');\n    },\n\n    getUpActor() {\n      return this.getDomElement().querySelector('.actor.uplabel');\n    },\n\n    getInfoActor() {\n      return this.getDomElement().querySelector('.actor.switchInvisible');\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infotrigger', statics);\n  }\n});\n","/* Line.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * A line tag is used to display a horizontal line in the browser to allow for a grouped and thereby tidy display of\n * elements on one page. To specify the width of the line an optional &lt;layout/&gt;-child can be added.\n *\n * @widgetexample <settings selector=\"hr\">\n *   <caption>A line tag which uses 50% of the screen size (6 of 12 available columns)</caption>\n * </settings>\n * <line><layout colspan=\"6\"/></line>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Line', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    getDomString() {\n      return '<hr ' + (this.getClasses() ? 'class=\"' + this.getClasses() + '\"' : '') + '/>';\n    }\n  }\n});\n","/* MultiTrigger.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a widget with multiple buttons to the visu.\n * Thus, e.g. change the operating mode of the heating system\n * (Comfort -> Night -> Absent -> Frost protection) or create scene functions.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.MultiTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    showstatus: {\n      check: 'Boolean',\n      init: false\n    },\n\n    elementsPerLine: {\n      check: 'Number',\n      init: 2\n    },\n\n    buttonConfiguration: {\n      check: 'Object',\n      nullable: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create the actor\n      let ret_val = '<div class=\"actor_container\" style=\"float:left\">';\n      const mapping = this.getMapping();\n      const elementsPerLine = this.getElementsPerLine();\n\n      const config = this.getButtonConfiguration();\n      const indices = Object.keys(config).sort();\n\n      indices.forEach(function (i) {\n        const buttonConfig = config[i];\n        let label = buttonConfig.label;\n        if (mapping) {\n          const mappedValue = this.defaultValueHandling(undefined, buttonConfig.value);\n\n          if (mappedValue !== buttonConfig.value || !label) {\n            const div = document.createElement('div');\n            this.defaultValue2DOM(mappedValue, div);\n            label = div.innerHTML;\n          }\n        }\n\n        if (label) {\n          ret_val += '<div class=\"actor switchUnpressed\"><div class=\"value\">' + label + '</div></div>';\n        }\n        if (elementsPerLine > 0 && i % elementsPerLine === 0) {\n          ret_val += '<br/>';\n        }\n      }, this);\n      return ret_val + '</div>';\n    },\n\n    getActors() {\n      return this.getDomElement().querySelectorAll('.actor_container .actor');\n    },\n\n    // overridden, only transform the value, do not apply it to DOM\n    _processIncomingValue(address, data) {\n      return this.applyTransform(address, data);\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     */\n    handleUpdate() {\n      const children = this.getActors();\n      const buttonConfiguration = this.getButtonConfiguration();\n      children.forEach(function (actor) {\n        const index = Array.prototype.indexOf.call(children, actor) + 1;\n        if (Object.prototype.hasOwnProperty.call(buttonConfiguration, index)) {\n          const isPressed = '' + this.getBasicValue() === '' + buttonConfiguration[index].value; // compare as string\n\n          // delay this a little bit to give the HasAnimatedButton stuff time to finish\n          // otherwise it might override the settings here\n          new qx.util.DeferredCall(function () {\n            actor.classList.remove(isPressed ? 'switchUnpressed' : 'switchPressed');\n\n            actor.classList.add(isPressed ? 'switchPressed' : 'switchUnpressed');\n          }, this).schedule();\n        }\n      }, this);\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @param event\n     */\n    getActionValue(event) {\n      const index =\n        Array.prototype.indexOf.call(\n          this.getDomElement().querySelectorAll('.actor_container .actor'),\n          event.getCurrentTarget()\n        ) + 1;\n      return this.getButtonConfiguration()[index].value;\n    },\n\n    // overridden\n    initListeners() {\n      if (this.isAnonymous()) {\n        return;\n      }\n\n      this.getActors().forEach(function (actor) {\n        qx.event.Registration.addListener(actor, 'tap', this.action, this);\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('multitrigger', statics);\n  }\n});\n","/* NavBar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * With the widget navbar, you can add a navigation menu to the entire visu.\n * The menu can be displayed on a page (top, bottom, left, right).\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.NavBar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous: {\n      refine: true,\n      init: true\n    },\n\n    name: {\n      check: 'String',\n      nullable: true\n    },\n\n    scope: {\n      check: 'Number',\n      init: -1\n    },\n\n    width: {\n      check: 'String',\n      init: '300'\n    },\n\n    position: {\n      check: ['top', 'left', 'right', 'bottom'],\n      init: 'left'\n    },\n\n    dynamic: {\n      check: 'Boolean',\n      nullable: true,\n      init: null\n    },\n\n    visible: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    _navbarTop: '',\n    _navbarLeft: '',\n    _navbarRight: '',\n    _navbarBottom: '',\n    _touchX: null,\n    _touchY: null,\n\n    /**\n     * Called on setup.dom.finished event with high priority. Adds the navbar dom string\n     * to the DOM-Tree\n     */\n    initializeNavbars() {\n      ['Top', 'Left', 'Right', 'Bottom'].forEach(function (pos) {\n        if (this['_navbar' + pos]) {\n          const elem = document.querySelector('#navbar' + pos);\n          if (elem) {\n            elem.innerHTML += this['_navbar' + pos];\n          }\n        }\n      }, this);\n\n      const self = this;\n      // Event handlers to allow navbar fade in and fade out.\n      // Currently only implemented for the major use case of a left navbar.\n      // TODO add logic for other navbars as well\n      // Logic:\n      //   To fade in the touch must start on the left screen side and then\n      //   swipe right.\n      //   To fade out all places on the screen are fine.\n      //   There is a minimum swipe distance and the direction must be mostly\n      //   horizontal (up to +/-45° tolerance is allowed)\n      //   When during a valid swipe the direction is reversed the fading\n      //   action is also reverted.\n      const content = document.body.querySelector('#centerContainer');\n      content.addEventListener(\n        'touchstart',\n        function (evt) {\n          const touches = evt.touches[0];\n          const pPH = cv.Application.structureController.pagePartsHandler;\n\n          if (\n            pPH.navbars.left.dynamic === false ||\n            (!qx.core.Init.getApplication().getMobile() && pPH.navbars.left.dynamic !== true) ||\n            (pPH.navbars.left.fadeVisible && !evt.composedPath().some(i => i.id === 'navbarLeft')) || // left navbar is visible, but the touch is somewhere else\n            (!pPH.navbars.left.fadeVisible && touches.clientX > 20)\n          ) {\n            // left navbar is not visible but the finger isn't on the left end -> not relevant\n            return;\n          }\n\n          self._touchX = touches.clientX;\n          self._touchY = touches.clientY;\n        },\n        { passive: true }\n      );\n\n      content.addEventListener(\n        'touchend',\n        function () {\n          self._touchX = null;\n          self._touchY = null;\n        },\n        false\n      );\n\n      content.addEventListener(\n        'touchmove',\n        function (evt) {\n          if (self._touchX === null) {\n            return; // early exit as this touch isn't relevant for us\n          }\n\n          const touches = evt.touches[0];\n          const x = touches.clientX - self._touchX;\n          const y = touches.clientY - self._touchY;\n          const necessaryDistance = 10;\n          const enoughDistance = Math.abs(x) > necessaryDistance;\n          const horizontal = Math.abs(x) > Math.abs(y);\n          const toRight = x > 0;\n          if (horizontal && enoughDistance) {\n            evt.preventDefault();\n            const pPH = cv.Application.structureController.pagePartsHandler;\n            if (toRight) {\n              self._touchX = touches.clientX - necessaryDistance;\n              self._touchY = touches.clientY;\n              if (!pPH.navbars.left.fadeVisible) {\n                pPH.fadeNavbar('Left', 'in', 250);\n              }\n            } else {\n              // !toRight\n              self._touchX = touches.clientX + necessaryDistance;\n              self._touchY = touches.clientY;\n              if (pPH.navbars.left.fadeVisible) {\n                pPH.fadeNavbar('Left', 'out', 250);\n              }\n            }\n          }\n        },\n        { passive: false }\n      );\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady() {},\n\n    getGlobalPath() {\n      const id = this.getPath().split('_');\n      id.pop();\n      return id.join('_') + '_' + this.getPosition() + '_navbar';\n    },\n\n    // overridden\n    getDomString() {\n      let container = '<div class=\"' + this.getClasses() + '\" id=\"' + this.getGlobalPath() + '\">';\n      if (this.getName()) {\n        container += '<h2>' + this.getName() + '</h2>';\n      }\n      container += this.getChildrenDomString();\n\n      container += '</div>';\n\n      // add this to the navbars in DOM not inside the page\n      switch (this.getPosition()) {\n        case 'top':\n          this.self(arguments)._navbarTop += container;\n          break;\n\n        case 'left':\n          this.self(arguments)._navbarLeft += container;\n          break;\n\n        case 'right':\n          this.self(arguments)._navbarRight += container;\n          break;\n\n        case 'bottom':\n          this.self(arguments)._navbarBottom += container;\n          break;\n      }\n\n      return '';\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('navbar', statics);\n    qx.event.message.Bus.subscribe('setup.dom.finished.before', statics.initializeNavbars, statics);\n  }\n});\n","/* NotificationCenterBadge.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Shows the current number of messages in {@link cv.ui.NotificationCenter} and opens it on click.\n *\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a centered text widget</caption>\n *   <screenshot name=\"text_example\" />\n * </settings>\n * <notificationcenterbadge>\n *  <layout colspan=\"0\" />\n * </notificationcenterbadge>\n *\n * @author Tobias Bräutigam\n * @since 0.11.0\n */\nqx.Class.define('cv.ui.structure.pure.NotificationCenterBadge', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(props) {\n    const classes = props.classes.trim().split(' ');\n    const i_right = classes.indexOf('right');\n\n    if (i_right !== -1) {\n      // do not align, but float the container instead\n      this.setContainerClass('float-right');\n      classes.splice(i_right, 1);\n      props.classes = classes.join(' ');\n    }\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    counter: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyCounter'\n    },\n\n    hideWhenEmpty: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __badgeElement: null,\n\n    _onDomReady() {\n      super._onDomReady();\n      const center = cv.ui.NotificationCenter.getInstance();\n      center.getMessages().addListener('changeLength', this._onChangeCounter, this);\n      this._onChangeCounter();\n      center.addListener('changedGlobalSeverity', this._onChangeGlobalSeverity, this);\n    },\n\n    // property apply\n    _applyVisible(value) {\n      // hide NotificationCenters own badge while we are visible\n      cv.ui.NotificationCenter.getInstance().disableBadge(value);\n    },\n\n    action(ev) {\n      if (this._skipNextEvent === ev.getType()) {\n        this._skipNextEvent = null;\n        return;\n      }\n      cv.ui.NotificationCenter.getInstance().toggleVisibility();\n    },\n\n    __getBadgeElement() {\n      if (!this.__badgeElement) {\n        this.__badgeElement = this.getDomElement().querySelector('.badge');\n      }\n      return this.__badgeElement;\n    },\n\n    _onChangeGlobalSeverity(ev) {\n      const classList = this.__getBadgeElement().classList;\n      classList.remove.apply(classList, cv.ui.NotificationCenter.getInstance().getSeverities());\n\n      if (ev.getData()) {\n        classList.add(ev.getData());\n      }\n    },\n\n    _onChangeCounter() {\n      const messages = cv.ui.NotificationCenter.getInstance().getMessages().length;\n      this.__getBadgeElement().innerHTML = '' + messages;\n      if (this.isHideWhenEmpty()) {\n        this.__getBadgeElement().style.display = messages === 0 ? 'none' : 'block';\n      }\n    },\n\n    // overridden\n    _getInnerDomString() {\n      let style = '';\n      if (this.isHideWhenEmpty() && this.getCounter() === 0) {\n        style = ' style=\"display: none;\"';\n      }\n      return '<div class=\"actor badge\"' + style + '>' + this.getCounter() + '</div>';\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    const center = cv.ui.NotificationCenter.getInstance();\n    center.getMessages().removeListener('changeLength', this._onChangeCounter, this);\n    center.removeListener('changedGlobalSeverity', this._onChangeGlobalSeverity, this);\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('notificationcenterbadge', statics);\n  }\n});\n","/* PageJump.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The pagejump widget can be used to link the visu pages.\n * The function is similar to hyperlinks.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.PageJump', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.HasChildren, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    if (!props.name) {\n      // when there is no name the widget has no actor as clickable subelement, so we need\n      // to bind the click events to the whole widget\n      props.bindClickToWidget = true;\n    }\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    target: {\n      check: 'String',\n      init: '0'\n    },\n\n    activeScope: {\n      check: ['target', 'path'],\n      init: 'target'\n    },\n\n    name: {\n      check: 'String',\n      nullable: true\n    },\n\n    targetPath: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Handle page change events and update the active state of this PageJump\n     *\n     * @param ev {Event}\n     * @protected\n     */\n    _onScrollToPage(ev) {\n      const page_id = ev.getData();\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(page_id);\n      const model = cv.data.Model.getInstance();\n      const name = page.getName();\n\n      // remove old active classes\n      document.querySelectorAll('.pagejump.active').forEach(function (elem) {\n        elem.classList.remove('active');\n      }, this);\n      document.querySelectorAll('.pagejump.active_ancestor').forEach(function (elem) {\n        elem.classList.remove('active_ancestor');\n      }, this);\n\n      // and set the new active ones\n      document.querySelectorAll('.pagejump').forEach(function (elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (name === data.target) {\n          elem.classList.add('active');\n        }\n      }, this);\n\n      // now set the active ancestors\n      let parentPage = cv.util.Tree.getParentWidget(page, 'page');\n      // set for all parent pages apart from the root page\n\n      const pageJumps = document.querySelectorAll('.pagejump');\n      const markPageJumps = function (parentName, elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (\n          parentName === data.target ||\n          (data.activeScope === 'path' &&\n            ((typeof data.path === 'string' && data.path.match(parentName + '$')) ||\n              (typeof data.targetPath === 'string' && data.targetPath.match(parentName + '$'))))\n        ) {\n          elem.classList.add('active_ancestor');\n        }\n      };\n\n      while (parentPage && cv.util.Tree.getParentWidget(parentPage, 'page')) {\n        pageJumps.forEach(function (elem) {\n          markPageJumps(parentPage.getName(), elem);\n        });\n        // recursively find pagejumps for parent pages\n        parentPage = cv.util.Tree.getParentWidget(parentPage, 'page');\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      let actor = '<div class=\"actor switchUnpressed';\n      if (this.getAlign()) {\n        actor += ' ' + this.getAlign();\n      }\n      actor += '\">';\n      if (this.getName()) {\n        actor += '<div class=\"value\">' + this.getName() + '</div>';\n      }\n      actor += '</div>';\n      return actor + this.getChildrenDomString();\n    },\n\n    // overridden\n    action() {\n      let target = this.getTarget();\n      if (this.getTargetPath() !== null) {\n        target = cv.Application.structureController.getPageIdByPath(target, this.getTargetPath());\n      }\n      cv.Application.structureController.scrollToPage(target);\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagejump', statics);\n    qx.event.message.Bus.subscribe('path.pageChanged', statics._onScrollToPage, statics);\n  }\n});\n","/* PageLink.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * PageLink Widget for visible pages. Do not use this directly because the pagelink widget\n * is automatically added when you use a page widget with parameter <code>visible=true</code>.\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (2017)\n */\nqx.Class.define('cv.ui.structure.pure.PageLink', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    name: {\n      check: 'String',\n      init: '',\n      nullable: true\n    },\n\n    wstyle: {\n      check: 'String',\n      init: ''\n    },\n\n    address: {\n      check: 'Object',\n      init: {}\n    },\n\n    bindClickToWidget: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    getDomString() {\n      const layout = this.getLayout();\n\n      const style =\n        typeof layout === 'object'\n          ? ''\n          : 'style=\"' + cv.parser.pure.WidgetParser.extractLayout(layout, this.getPageType()) + '\"';\n\n      let ret_val = '<div class=\"widget clearfix link pagelink ' + this.getClasses() + '\" ' + style + '>';\n      ret_val +=\n        '<div class=\"actor\" ' + this.getWstyle() + '><a href=\"javascript:void(0)\">' + this.getName() + '</a></div>';\n      ret_val += '</div>';\n      return ret_val;\n    },\n\n    // overridden\n    action() {\n      cv.Application.structureController.scrollToPage(this.getPath() + '_');\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagelink', statics);\n  }\n});\n","/* PushButton.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a button to the visu that sends a defined value to the BUS when you press and release.\n * E.g. pushing a 1 and releasing a 0. This makes it possible, for example,\n * to simulate a push button to open and close a garage door, blinds or blinds.\n *\n * @since 2013\n */\nqx.Class.define('cv.ui.structure.pure.PushButton', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    downValue: { check: 'String', init: '1' },\n    upValue: { check: 'String', init: '0' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    // overridden\n    initListeners() {\n      this.addElementListener('pointerdown', this._onPointerDown, this);\n      this.addElementListener('pointerup', this._onPointerUp, this);\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     *\n     * @param value {any} incoming data (already transformed + mapped)\n     */\n    handleUpdate(value) {\n      const actor = this.getActor();\n      // compare against the unmapped value\n      value = '' + this.getBasicValue();\n      const off = this.getUpValue();\n      actor.classList.remove(value === off ? 'switchPressed' : 'switchUnpressed');\n\n      actor.classList.add(value === off ? 'switchUnpressed' : 'switchPressed');\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @param event\n     */\n    getActionValue(event) {\n      if (event.type === 'pointerup') {\n        return this.getUpValue();\n      }\n      return this.getDownValue();\n    },\n\n    _onPointerUp() {\n      const sendValue = this.getUpValue();\n      this.sendToBackend(sendValue, function (address) {\n        return !address.variantInfo || address.variantInfo === 'up';\n      });\n    },\n\n    _onPointerDown() {\n      const sendValue = this.getDownValue();\n      this.sendToBackend(sendValue, function (address) {\n        return !address.variantInfo || address.variantInfo === 'down';\n      });\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pushbutton', statics);\n  }\n});\n","/* Refresh.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * With the widget refresh, the visu is added a switch, which allows the visu to reload the displayed data.\n *\n * @author Christian Mayer\n * @since 2014\n */\nqx.Class.define('cv.ui.structure.pure.Refresh', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton, cv.ui.common.BasicUpdate],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', nullable: true }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n      this.defaultUpdate(undefined, this.getSendValue());\n    },\n\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    _action() {\n      const clients = cv.io.BackendConnections.getClients();\n      for (const name in clients) {\n        clients[name].restart(true);\n      }\n    }\n  }\n});\n","/* Reload.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * With the reload widget, the visu is added a switch, which allows to reload the full visu in the browser.\n *\n * @author Christian Mayer\n * @since 2014\n */\nqx.Class.define('cv.ui.structure.pure.Reload', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden, return undefined to prevent widget from being renderered into DOM\n    getDomString() {\n      return;\n    },\n\n    // overridden\n    _getInnerDomString() {\n      return;\n    },\n\n    _update(address, data) {\n      const value = this.defaultValueHandling(address, data);\n      if (value > 0) {\n        cv.util.Location.reload(true);\n      }\n    }\n  }\n});\n","/* Rgb.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * With the RGB widget you can display a colour in the visu.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Rgb', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Update],\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor\"><div class=\"value\"></div></div>';\n    },\n\n    /**\n     * Updates the RGB widget by setting the background color\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const valElem = this.getValueElement();\n\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n      const styleBg = window.getComputedStyle(valElem)['background-color'];\n      let bg = styleBg.replace(/[a-zA-Z()\\s]/g, '').split(/,/);\n      if (bg.length !== 3) {\n        bg = [0, 0, 0];\n      }\n      switch (this.getAddress()[address].variantInfo) {\n        case 'r':\n          bg[0] = value;\n          break;\n        case 'g':\n          bg[1] = value;\n          break;\n        case 'b':\n          bg[2] = value;\n          break;\n      }\n\n      valElem.style['background-color'] = 'rgb(' + bg[0] + ', ' + bg[1] + ', ' + bg[2] + ')';\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('rgb', statics);\n  }\n});\n","/* Roundbar.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a display to the visu that can represent values from the BUS\n * and shows them with a round bar.\n *\n * @widgetexample <settings>\n *    <caption>Example roundbar widget</caption>\n *    <screenshot name=\"roundbar_simple\">\n *      <data address=\"3/3/1\">63.3</data>\n *    </screenshot>\n *  </settings>\n *  <roundbar>\n *      <address transform=\"DPT:9.001\" mode=\"read\">3/3/1</address>\n *  </roundbar>\n *\n * @author Christian Mayer\n * @since 0.12.0 (2020)\n */\nqx.Class.define('cv.ui.structure.pure.Roundbar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct(props) {\n    this.__indicatorDOMElement = [];\n    super(props);\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    coord(position) {\n      return position.x.toFixed(1) + ' ' + position.y.toFixed(1);\n    },\n    /**\n     * Create the SVG path for the round bar.\n     * Angle = 0 === horizontal on the right\n     *\n     * @param startAngle {Float}\n     * @param startArrowPoint {Float}\n     * @param endAngle {Float}\n     * @param endArrowPoint {Float}\n     * @param radius {Float}\n     * @param width {Float}\n     * @param getBBox {Boolean} return the bounding box instead of the path itself\n     */\n    createBarPath(startAngle, startArrowPoint, endAngle, endArrowPoint, radius, width, getBBox = false) {\n      const startArrowPointAngle = startAngle + startArrowPoint;\n      const endArrowPointAngle = endAngle + endArrowPoint;\n\n      // The path to generate is using those positions:\n      // rO             -- outer --\n      // rMO        /// outermiddle \\\\\\\n      // rM      //       middle        \\\\\n      // rIM   /        innermiddle        \\\n      // rI   /         -- inner --         \\\n      //     |        /             \\        |\n      //     |_______|               |_______|\n      //       start      center        end\n      const clockwise = startAngle > endAngle ? 1 : 0;\n      const rI = radius;\n      const rIM = radius + (width * 1) / 4;\n      const rM = radius + (width * 2) / 4;\n      const rMO = radius + (width * 3) / 4;\n      const rO = radius + width;\n      const startInner = {\n        x: Math.cos(startAngle) * rI,\n        y: -Math.sin(startAngle) * rI\n      };\n\n      const startMiddle = {\n        x: Math.cos(startArrowPointAngle) * rM,\n        y: -Math.sin(startArrowPointAngle) * rM\n      };\n\n      const startOuter = {\n        x: Math.cos(startAngle) * rO,\n        y: -Math.sin(startAngle) * rO\n      };\n\n      const centerInner = {\n        x: Math.cos((startAngle + endAngle) / 2) * rI,\n        y: -Math.sin((startAngle + endAngle) / 2) * rI\n      };\n\n      const centerOuter = {\n        x: Math.cos((startAngle + endAngle) / 2) * rO,\n        y: -Math.sin((startAngle + endAngle) / 2) * rO\n      };\n\n      const endInner = {\n        x: Math.cos(endAngle) * rI,\n        y: -Math.sin(endAngle) * rI\n      };\n\n      const endMiddle = {\n        x: Math.cos(endArrowPointAngle) * rM,\n        y: -Math.sin(endArrowPointAngle) * rM\n      };\n\n      const endOuter = {\n        x: Math.cos(endAngle) * rO,\n        y: -Math.sin(endAngle) * rO\n      };\n\n      const startMiddleFlag = Math.abs(startAngle - startArrowPointAngle) > Math.PI ? 1 : 0;\n      const startEndFlag = Math.abs(startAngle - endAngle) / 2 > Math.PI ? 1 : 0;\n      const endMiddleFlag = Math.abs(endAngle - endArrowPointAngle) > Math.PI ? 1 : 0;\n      const startMiddleDir = startAngle < startArrowPointAngle ? 1 : 0;\n      const endMiddleDir = endAngle < endArrowPointAngle ? 1 : 0;\n\n      /**\n       * @param start\n       * @param end\n       * @param r\n       * @param flag\n       * @param cw\n       */\n      function arc(start, end, r, flag, cw) {\n        return start.x === end.x && start.y === end.y\n          ? ''\n          : Math.abs(start.x - end.x) + Math.abs(start.y - end.y) < 2\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(end)\n          : ['A', r, r, 0, flag, cw, cv.ui.structure.pure.Roundbar.coord(end)].join(' ');\n      }\n\n      if (getBBox) {\n        const rMax = Math.max(rI, rO);\n        const isInside = function (a) {\n          return (startAngle < a && a < endAngle) || (startAngle > a && a > endAngle);\n        };\n        const rMiddle = isInside((-Math.PI * 4) / 2) || isInside((Math.PI * 0) / 2) ? rMax : startInner.x;\n        const uMiddle = isInside((-Math.PI * 3) / 2) || isInside((Math.PI * 1) / 2) ? -rMax : startInner.y;\n        const lMiddle = isInside((-Math.PI * 2) / 2) || isInside((Math.PI * 2) / 2) ? -rMax : startInner.x;\n        const dMiddle = isInside((-Math.PI * 1) / 2) || isInside((Math.PI * 3) / 2) ? rMax : startInner.y;\n        return {\n          u: Math.min(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, uMiddle),\n\n          d: Math.max(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, dMiddle),\n\n          l: Math.min(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, lMiddle),\n\n          r: Math.max(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, rMiddle)\n        };\n      }\n\n      // a thin bar path should just be a single line\n      if (width < 1.0) {\n        return [\n          'M',\n          cv.ui.structure.pure.Roundbar.coord(startOuter),\n          arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n          arc(centerOuter, endOuter, rO, startEndFlag, clockwise)\n        ].join('');\n      }\n\n      return [\n        'M',\n        cv.ui.structure.pure.Roundbar.coord(startInner),\n        startArrowPointAngle === startAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(startOuter)\n          : arc(startInner, startMiddle, rIM, startMiddleFlag, 1 - startMiddleDir) +\n            arc(startMiddle, startOuter, rMO, startMiddleFlag, startMiddleDir),\n        arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n        arc(centerOuter, endOuter, rO, startEndFlag, clockwise),\n        endArrowPointAngle === endAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(endInner)\n          : arc(endOuter, endMiddle, rMO, endMiddleFlag, 1 - endMiddleDir) +\n            arc(endMiddle, endInner, rIM, endMiddleFlag, endMiddleDir),\n        arc(startInner, centerInner, rI, startEndFlag, 1 - clockwise),\n        arc(centerInner, startInner, rI, startEndFlag, 1 - clockwise),\n        'Z'\n      ].join('');\n    },\n    /**\n     * Create the SVG path for an pointer.\n     * @param angle {Float}\n     * @param p {Object} Indicator object\n     */\n    createPointerPath(angle, p) {\n      const s = Math.sin(angle);\n      const c = Math.cos(angle);\n      const wx = c * p.width;\n      const wy = s * p.width;\n\n      if (p.thickness > 0) {\n        const tx = (-s * p.thickness) / 2;\n        const ty = (c * p.thickness) / 2;\n        return [\n          'M',\n          this.coord({\n            x: c * p.radius + wx - tx,\n            y: -(s * p.radius + wy - ty)\n          }),\n\n          'L',\n          this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n          'L',\n          this.coord({\n            x: c * p.radius + wx + tx,\n            y: -(s * p.radius + wy + ty)\n          })\n        ].join('');\n      }\n      return [\n        'M',\n        this.coord({ x: c * p.radius, y: -(s * p.radius) }),\n        'L',\n        this.coord({ x: c * p.radius + wx, y: -(s * p.radius + wy) })\n      ].join('');\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    type: { check: 'Array' },\n    indicators: { check: 'Array' },\n\n    min: { check: 'Number' },\n    max: { check: 'Number' },\n    axisradius: { check: 'Number' },\n    axiswidth: { check: 'Number' },\n    axiscolor: { check: 'String' },\n    ranges: { check: 'Array' },\n    minorradius: { check: 'Number' },\n    minorwidth: { check: 'Number' },\n    minorspacing: { check: 'String' },\n    minorcolor: { check: 'String' },\n    majorradius: { check: 'Number' },\n    majorwidth: { check: 'Number' },\n    majorposition: { check: 'String' },\n    majorcolor: { check: 'String' },\n    labels: { check: 'Array' },\n    labelstyle: { check: 'String' },\n    start: { check: 'Number' },\n    end: { check: 'Number' },\n    arrowtype: { check: 'Number' },\n    spacing: { check: 'Number' },\n    overflowarrow: { check: 'Boolean' },\n    fontsize: { check: 'Number' },\n    textx: { check: 'Number' },\n    texty: { check: 'Number' },\n    textlength: { check: 'Number' },\n    textanchor: { check: 'String' },\n    linespace: { check: 'Number' },\n    bboxgrow: { check: 'Object' },\n    debug: { check: 'Boolean' },\n    currentRatioValue: { check: 'Array', init: [] },\n    targetRatioValue: { check: 'Array', init: [] }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __animator: undefined,\n    __indicatorDOMElement: null,\n    __postponedUpdates: undefined,\n\n    // overridden\n    _getInnerDomString() {\n      /**\n       * Grow the bounding box to also contain the parameters x and y\n       * @param bbox {Object} The initial bounding box\n       * @param x {Float}\n       * @param y {Float}\n       * @returns {Object} The enlarged bounding box\n       */\n      function bboxAdd(bbox, x, y) {\n        if (bbox.u > y) {\n          bbox.u = y;\n        }\n        if (bbox.d < y) {\n          bbox.d = y;\n        }\n        if (bbox.l > x) {\n          bbox.l = x;\n        }\n        if (bbox.r < x) {\n          bbox.r = x;\n        }\n        return bbox;\n      }\n\n      this.setCurrentRatioValue(Array(this.getIndicators().length).fill(0));\n      this.setTargetRatioValue(Array(this.getIndicators().length).fill([0, false, false]));\n\n      const self = this;\n      const s = this.getStart();\n      const e = this.getEnd();\n      const min = this.getMin();\n      const max = this.getMax();\n      let cntValues = 0;\n      let svgMajor = '';\n      let svgMinor = '';\n      let svgLabels = '';\n      let svgRanges = '';\n      let svgIndicators = '';\n      let svgText = '';\n      const createBarPath = cv.ui.structure.pure.Roundbar.createBarPath;\n\n      // Determine the bounding box, first get the biggest radius that must fit\n      let rMax = this.getAxisradius() + this.getAxiswidth();\n      let sMax = 0;\n      let eMax = 0;\n      this.getIndicators().forEach(function (indicator) {\n        rMax = Math.max(rMax, indicator.radius, indicator.radius + indicator.width);\n\n        sMax = Math.max(sMax, indicator.startarrow);\n        eMax = Math.max(eMax, indicator.endarrow);\n      });\n      let BBox = createBarPath(s, sMax, e, eMax, rMax, 0, true);\n\n      if (this.getMinorwidth() > 0) {\n        let spacing = parseFloat(this.getMinorspacing());\n        let rIn = this.getMinorradius();\n        let rOut = this.getMinorwidth() + rIn;\n\n        if (/^[0-9]+%/.test(this.getMinorspacing())) {\n          // special case: percentage\n          spacing = ((max - min) * spacing) / 100;\n        }\n\n        svgMinor += '<path class=\"minor\" d=\"';\n        for (\n          var angle = s, delta = ((e - s) * spacing) / (max - min), cnt = (max - min) / spacing;\n          cnt >= 0;\n          angle += delta, cnt--\n        ) {\n          var sin = Math.sin(angle);\n          var cos = Math.cos(angle);\n          svgMinor += [\n            'M',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rIn,\n              y: -sin * rIn\n            }),\n\n            'L',\n            cv.ui.structure.pure.Roundbar.coord({\n              x: cos * rOut,\n              y: -sin * rOut\n            })\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n          BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n        }\n        if (this.getMinorcolor() !== '') {\n          svgMinor += '\" style=\"stroke:' + this.getMinorcolor();\n        }\n        svgMinor += '\" />';\n      }\n\n      if (this.getMajorwidth() > 0) {\n        let rIn = this.getMajorradius();\n        let rOut = this.getMajorwidth() + rIn;\n\n        svgMajor += '<path class=\"major\" d=\"';\n\n        this.getMajorposition()\n          .split(';')\n          .forEach(function (position) {\n            switch (position) {\n              case 'min':\n                position = min;\n                break;\n\n              case 'max':\n                position = max;\n                break;\n            }\n\n            const angle = s + ((e - s) * (position - min)) / (max - min);\n            const sin = Math.sin(angle);\n            const cos = Math.cos(angle);\n            svgMajor += [\n              'M',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rIn,\n                y: -sin * rIn\n              }),\n\n              'L',\n              cv.ui.structure.pure.Roundbar.coord({\n                x: cos * rOut,\n                y: -sin * rOut\n              })\n            ].join('');\n\n            BBox = bboxAdd(BBox, cos * rIn, -sin * rIn);\n            BBox = bboxAdd(BBox, cos * rOut, -sin * rOut);\n          });\n        if (this.getMajorcolor() !== '') {\n          svgMajor += '\" style=\"stroke:' + this.getMajorcolor();\n        }\n        svgMajor += '\" />';\n      }\n\n      const labelstyle = this.getLabelstyle();\n      this.getLabels().forEach(function (label, labelnumber) {\n        const angle = s + ((e - s) * (label.value - min)) / (max - min);\n        const x = label.radius * Math.cos(angle);\n        const y = label.radius * -Math.sin(angle);\n        let alignmentBaseline = '';\n        let textAnchor = '';\n        let textAngle = 0;\n\n        if (label.orientation < 3) {\n          svgLabels += '<text class=\"axislabel\" x=\"' + x + '\" y=\"' + y + '\"';\n          switch (label.orientation) {\n            default:\n            case 0: // horizontal\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              if (Math.abs(x) < 1) {\n                textAnchor = 'middle';\n              }\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n              }\n              if (Math.abs(y) < 1) {\n                alignmentBaseline = 'middle';\n              }\n              break;\n\n            case 1: {\n              // parallel\n              let textAngle = (-angle * 180) / Math.PI + 90;\n              if (y < 0) {\n                alignmentBaseline = ['baseline', 'middle', 'hanging'][label.position];\n              } else {\n                alignmentBaseline = ['hanging', 'middle', 'baseline'][label.position];\n\n                textAngle += 180;\n              }\n              textAnchor = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n            }\n\n            case 2: // perpendicular\n              textAngle = (-angle * 180) / Math.PI;\n              if (x < 0) {\n                textAnchor = ['end', 'middle', 'start'][label.position];\n                textAngle += 180;\n              } else {\n                textAnchor = ['start', 'middle', 'end'][label.position];\n              }\n              alignmentBaseline = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n          }\n\n          svgLabels += ' dominant-baseline=\"' + alignmentBaseline + '\"';\n          svgLabels += ' text-anchor=\"' + textAnchor + '\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '>' + label.name + '</text>';\n        } else {\n          // label.orientation >= 3 -> round\n          const labelid = self.$$user_path + '_label' + labelnumber;\n          const cw = s < e ? 0 : 1;\n          let path = '';\n          let align = '';\n\n          switch (label.orientation) {\n            case 3: // roundstart\n              path = [ 'M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y,\n                'A', label.radius, label.radius, 0, 0, cw, x, y ].join(' ');\n              break;\n\n            case 4: // roundmiddle\n              path = [ 'M', -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y,\n                'A', label.radius, label.radius, 0, 0, cw, -x, -y ].join(' ');\n              align = ' startOffset=\"50%\" text-anchor=\"middle\"';\n              break;\n\n            case 5: // roundend\n              path = [ 'M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y,\n                'A', label.radius, label.radius, 0, 0, cw, x, y ].join(' ');\n              align = ' startOffset=\"100%\" text-anchor=\"end\"';\n              break;\n          }\n\n          svgLabels += '<path style=\"stroke:none; fill:none; stroke-width:0\" id=\"' + labelid + '\" d=\"' + path + '\"/>';\n          svgLabels += '<text class=\"axislabel\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '><textPath href=\"#' + labelid + '\"' + align + '>' + label.name + '</textPath></text>';\n        }\n      });\n\n      this.getRanges().forEach(function (range) {\n        const sRange = ((e - s) * (range.start - min)) / (max - min) + s;\n        const eRange = ((e - s) * (range.end - min)) / (max - min) + s;\n        const rRange = range.radius || self.getAxisradius();\n        const wRange = range.width || self.getAxiswidth();\n        const thisBBox = createBarPath(sRange, 0, eRange, 0, rRange, wRange, true);\n\n        svgRanges += '<path class=\"range\" d=\"';\n        svgRanges += createBarPath(sRange, 0, eRange, 0, rRange, wRange);\n        if (range.style) {\n          svgRanges += '\" style=\"' + range.style;\n        }\n        svgRanges += '\" />';\n\n        BBox = bboxAdd(BBox, thisBBox.l, thisBBox.u);\n        BBox = bboxAdd(BBox, thisBBox.r, thisBBox.d);\n      });\n\n      this.__animator = [];\n      this.getIndicators().forEach(function (indicator, number) {\n        self.__animator.push(new cv.util.LimitedRateUpdateAnimator(self.__updateIndicatorPosition, self, number));\n\n        svgIndicators += '<path class=\"indicator\" style=\"' + indicator.style + '\" />';\n\n        if (indicator.showValue) {\n          cntValues++;\n        }\n      });\n\n      if (cntValues > 0) {\n        svgText +=\n          '<text class=\"value\" y=\"' +\n          this.getTexty() +\n          '\"' +\n          ' text-anchor=\"' +\n          this.getTextanchor() +\n          '\"' +\n          ' font-size=\"' +\n          this.getFontsize() +\n          '\">' +\n          '<tspan x=\"' +\n          this.getTextx() +\n          '\" dy=\"0\">-</tspan>' +\n          ('<tspan x=\"' + this.getTextx() + '\" dy=\"' + this.getLinespace() + '\">-</tspan>').repeat(cntValues - 1) +\n          '</text>';\n\n        const textDistribution = {\n          start: [0, 1],\n          middle: [0.5, 0.5],\n          end: [1, 0]\n        }[this.getTextanchor()] || [0, 1];\n        const textU = Math.min(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        const textD = Math.max(\n          0,\n          -this.getFontsize(),\n          this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0)\n        );\n\n        BBox = bboxAdd(BBox, this.getTextx() - textDistribution[0] * this.getTextlength(), this.getTexty() + textU);\n\n        BBox = bboxAdd(BBox, this.getTextx() + textDistribution[1] * this.getTextlength(), this.getTexty() + textD);\n      }\n\n      let html =\n        '<div class=\"actor\">' +\n        '<svg width=\"100%\" height=\"100%\" viewBox=\"' +\n        [\n          BBox.l - this.getBboxgrow().l,\n          BBox.u - this.getBboxgrow().u,\n          BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r,\n          BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d\n        ].join(' ') +\n        '\">';\n      if (this.getDebug()) {\n        html +=\n          '<rect width=\"' +\n          (BBox.r - BBox.l) +\n          '\" height=\"' +\n          (BBox.d - BBox.u) +\n          '\" x=\"' +\n          BBox.l +\n          '\" y=\"' +\n          BBox.u +\n          '\" stroke=\"blue\" fill=\"none\" />' +\n          '<rect width=\"' +\n          (BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r) +\n          '\" height=\"' +\n          (BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d) +\n          '\" x=\"' +\n          (BBox.l - this.getBboxgrow().l) +\n          '\" y=\"' +\n          (BBox.u - this.getBboxgrow().u) +\n          '\" stroke=\"green\" fill=\"none\" />' +\n          '<circle cx=\"0\" cy=\"0\" r=\"3\" fill=\"red\" />';\n      }\n\n      if (this.getAxisradius() > 0) {\n        const sectorPath = createBarPath(s, 0, e, 0, this.getAxisradius(), 0);\n        const axisPath = createBarPath(s, 0, e, 0, this.getAxisradius(), this.getAxiswidth());\n\n        const stroke = this.getAxiscolor() === '' ? undefined : this.getAxiscolor();\n        const fill = this.getAxiswidth() < 1 ? 'none' : stroke;\n        html +=\n          '<path class=\"sector\" d=\"' +\n          sectorPath +\n          ' L0 0Z\"/>' +\n          '<path class=\"axis\" d=\"' +\n          axisPath +\n          '\" style=\"' +\n          (stroke ? 'stroke:' + stroke : '') +\n          (fill ? ';fill:' + fill : '') +\n          '\"/>';\n      }\n\n      html += svgMinor + svgMajor + svgRanges + svgLabels + svgIndicators + svgText;\n      html += '</svg></div>';\n\n      return html;\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n      if (this.__postponedUpdates !== undefined) {\n        this.__postponedUpdates.forEach(({address, data}) => {\n          this._update(address, data);\n        });\n        this.__postponedUpdates = undefined;\n      }\n    },\n\n    /**\n     * Updates the roundbar widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {*} incoming data\n     */\n    _update(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const self = this;\n      const domElement = this.getDomElement();\n      // only continue when the animators are already available, i.e. the\n      // DOM is set up - otherwise just store it for later\n      if (this.__animator === undefined || !domElement) {\n        if (this.__postponedUpdates === undefined) {\n          this.__postponedUpdates = [];\n        }\n        this.__postponedUpdates.push({address, data});\n        return;\n      }\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n      const target = this.getTargetRatioValue();\n      const tspan = Array.from(domElement.getElementsByTagName('tspan'));\n\n      const valueFormat = this.applyFormat(address, value);\n\n      this.getIndicators().forEach(function (indicator, i) {\n        if (address === indicator.address) {\n          target[i] = [\n            (Math.min(Math.max(value, indicator.min), indicator.max) - indicator.min) / (indicator.max - indicator.min),\n            value < indicator.min,\n            value > indicator.max\n          ];\n\n          if (tspan[i] !== undefined) {\n            tspan[i].textContent = valueFormat;\n          }\n          self.__animator[i].setTo(target[i][0], !self.isVisible());\n        }\n      });\n\n      this.setTargetRatioValue(target);\n    },\n\n    /**\n     * Callback to update the display of the indicators.\n     *\n     * Note: It is a design decision not to pool multiple updates in one requestAnimationFrame which might be beneficial\n     * performance wise. But as it's assumed that a typical visu config is only containing one roundbar per address\n     * a pooling wouldn't make a difference on the one hand but complicate the code on the other hand.\n     * Even with a few roundbars using the same address the performance impact is negligible.\n     * @param ratio\n     * @param indicatorNumber\n     */\n    __updateIndicatorPosition(ratio, indicatorNumber) {\n      if (this.__indicatorDOMElement.length === 0) {\n        // cache\n        this.__indicatorDOMElement = Array.from(this.getDomElement().getElementsByClassName('indicator'));\n      }\n\n      const indicator = this.getIndicators()[indicatorNumber];\n      const target = this.getTargetRatioValue()[indicatorNumber];\n      const startAngle = this.getStart();\n      const endAngle = this.getEnd();\n      let targetAngle = startAngle + ratio * (endAngle - startAngle);\n      const overflowarrow = this.getOverflowarrow();\n\n      if (!overflowarrow) {\n        targetAngle =\n          endAngle > startAngle\n            ? Math.max(startAngle, targetAngle - indicator.endarrow)\n            : Math.min(startAngle, targetAngle - indicator.endarrow);\n      }\n      if (indicator.isBar) {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createBarPath(\n            startAngle,\n            overflowarrow && !(target[1] && ratio < 0.01) ? 0 : indicator.startarrow,\n            targetAngle,\n            overflowarrow && !(target[2] && ratio > 0.99) ? 0 : indicator.endarrow,\n            indicator.radius,\n            indicator.width\n          )\n        );\n      } else {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute(\n          'd',\n          cv.ui.structure.pure.Roundbar.createPointerPath(targetAngle, indicator)\n        );\n      }\n    }\n  }\n});\n","/* Slide.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a horizontal slider to the visu. This can be used, for example, to dim a light or change temperature values.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Slide', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(props) {\n    super(props);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n\n    this.__pageSizeListener = cv.ui.structure.pure.layout.ResizeHandler.states.addListener('changePageSizeInvalid', () => {\n      // Quick fix for issue https://github.com/CometVisu/CometVisu/issues/1369\n      // make sure that the `__invalidateScreensize` is delayed so that\n      // reading the available spaces is valid.\n      // Just to be sure, wait for two frames\n      window.requestAnimationFrame(() => {\n        window.requestAnimationFrame(this.__invalidateScreensize.bind(this));\n      });\n    });\n    this.__lastBusValue = {};\n  },\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct() {\n    cv.ui.structure.pure.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    min: {\n      check: 'Number',\n      init: 0\n    },\n\n    max: {\n      check: 'Number',\n      init: 100\n    },\n\n    step: {\n      check: 'Number',\n      init: 0.5\n    },\n\n    showInvalidValues: {\n      check: 'Boolean',\n      init: false\n    },\n\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __lastBusValue: null,\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined, // cache for DOM element\n    __actorWidth: undefined,\n    __buttonWidth: undefined,\n    __pageSizeListener: undefined,\n    __inDrag: false, // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n\n    // overridden\n    _getInnerDomString() {\n      const placeholder = this.getFormat() === '' ? '' : '-';\n      return (\n        `\n        <div class=\"actor ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n          <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">` +\n        placeholder +\n        `</button>\n          <div class=\"ui-slider-range value\" style=\"margin-left: 0px; width: 0px;\"></div>\n        </div>\n      `\n      );\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, 250, { trailing: true }, this);\n\n      this.getActor().addEventListener('pointerdown', this);\n    },\n\n    _update(address, data) {\n      let transform = this.getAddress()[address].transform;\n      if (this.__inDrag || this.__lastBusValue[transform] === data) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      this.__lastBusValue = {}; // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue[transform] = data;\n\n      let value = cv.Transform.decode(this.getAddress()[address], data);\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, !this.isVisible());\n    },\n\n    /**\n     * The the internal slider state and its handle and displayed value\n     * @param value {Number} The new value\n     * @param instant {Boolean} Animate or instant change\n     * @param relaxDisplay {Boolean} Let the handle move to an unstable position\n     *   to give visual feedback that something does happen during interaction\n     * @returns {Number} The real value that is respecting the configured restraints\n     * @private\n     */\n    __setSliderTo(value, instant, relaxDisplay = false) {\n      let min = this.getMin();\n      let max = this.getMax();\n      let step = this.getStep();\n      if (step === 0 || Math.abs((max - min) / step) > 10000) {\n        // limit too small step size - it's not necessary to have more than\n        // 10000 steps for the range as even the biggest screen doesn't have\n        // that many pixels\n        step = (max - min) / 10000;\n      }\n      let realValue = Math.min(Math.max(value, min), max);\n\n      if (!this.getShowInvalidValues()) {\n        // map to closest allowed value\n        let stepValue = Math.round((realValue - min) / step) * step + min;\n        // use max when the value is greater than the middle point between the\n        // biggest allowed step and the maximum\n        let maxSwitchValue = (Math.floor((max - min) / step) * step + min + max) / 2;\n        realValue = realValue < maxSwitchValue ? stepValue : max;\n      }\n\n      let ratio = max === min ? 0 : (realValue - min) / (max - min);\n\n      if (relaxDisplay) {\n        let valueRatio = max === min ? 0 : (Math.min(Math.max(value, min), max) - min) / (max - min);\n        let delta = ratio - valueRatio;\n        let stepCount = (max - min) / step;\n        let factor = (2 * stepCount) ** 3;\n        ratio -= Math.min(factor * delta ** 4, Math.abs(delta)) * Math.sign(delta);\n      }\n\n      // store it to be able to suppress sending of unchanged data\n      this.setBasicValue(realValue);\n\n      if (this.getFormat() !== '') {\n        // #2: map it to a value the user wants to see\n        let displayValue = this.applyMapping(realValue);\n\n        // #3: format it in a way the user understands the value\n        displayValue = this.applyFormat(undefined, displayValue);\n        this.setValue(displayValue);\n\n        this.applyStyling(realValue);\n\n        let button = this.getDomElement().querySelector('button');\n        button.replaceChildren(); // delete anything inside\n        this.defaultValue2DOM(displayValue, button);\n      }\n\n      this.__animator.setTo(ratio, instant);\n      return realValue;\n    },\n\n    __updateHandlePosition(ratio) {\n      if (this.__button === undefined) {\n        let element = this.getDomElement();\n        this.__button = element.querySelector('button');\n        this.__range = element.querySelector('.ui-slider-range');\n      }\n      if (this.__button === null) {\n        // most likely reason: the widget / DOM tree was deleted (e.g. due to\n        // browsing to a new page or during unit tests)\n        this._disposeObjects('__animator');\n        return;\n      }\n      const actorWidth = this.__getActorWidth();\n      let length = actorWidth >= 1e10 ? 0 : ratio * actorWidth;\n      this.__button.style.transform = 'translate3d(' + (length - this.__buttonWidth / 2) + 'px, 0px, 0px)';\n      this.__range.style.width = length + 'px';\n    },\n\n    __invalidateScreensize() {\n      let min = this.getMin();\n      let max = this.getMax();\n      this.__actorWidth = undefined; // invalidate cached values\n      this.__animator.setTo(max === min ? 0 : (this.getBasicValue() - min) / (max - min), true);\n    },\n\n    handleEvent(event) {\n      let newRatio = 0;\n\n      switch (event.type) {\n        case 'pointerdown': {\n          this.__inDrag = true;\n          document.addEventListener('pointermove', this);\n          document.addEventListener('pointerup', this);\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMin = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          newRatio = (event.clientX - this.__coordMin) / this.__getActorWidth();\n          break;\n        }\n\n        case 'pointermove':\n          if (!this.__inDrag) {\n            return;\n          }\n          newRatio = (event.clientX - this.__coordMin) / this.__getActorWidth();\n          break;\n\n        case 'pointerup':\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          newRatio = (event.clientX - this.__coordMin) / this.__getActorWidth();\n          break;\n      }\n\n      newRatio = Math.min(Math.max(newRatio, 0.0), 1.0); // limit to 0..1\n      let newValue = this.getMin() + newRatio * (this.getMax() - this.getMin());\n      const realValue = this.__setSliderTo(newValue, this.__inDrag, this.__inDrag);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call(realValue);\n      }\n    },\n\n    __onChangeValue(value) {\n      this.__lastBusValue = this.sendToBackend(value, false, this.__lastBusValue);\n    },\n\n    __getActorWidth() {\n      if (this.__actorWidth === undefined || this.__buttonWidth === undefined) {\n        if (cv.ui.structure.pure.layout.ResizeHandler.states.isPageSizeInvalid()) {\n          return 1e10; // a no valid value that doesn't break other calculations\n        }\n        let actor = this.getDomElement().querySelector('.actor');\n        let actorStyles = window.getComputedStyle(actor);\n        this.__actorWidth = parseFloat(actorStyles.getPropertyValue('width'));\n        this.__buttonWidth = parseFloat(window.getComputedStyle(this.__button).getPropertyValue('width'));\n\n        this.__range.style.marginLeft = '-' + actorStyles.getPropertyValue('padding-left');\n        this.__range.style.borderRadius = actorStyles.getPropertyValue('border-radius');\n      }\n      return this.__actorWidth;\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('slide', statics);\n  }\n});\n","/* Switch.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The switch widget shows two states (e.g. ON and OFF) and can toggle between them.\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a switch widget using mapping and styling</caption>\n *   <screenshot name=\"switch_example_on\">\n *    <caption>Switch turned on</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n *   <screenshot name=\"switch_example_off\">\n *    <caption>Switch turned off</caption>\n *    <data address=\"0/0/0\">0</data>\n *   </screenshot>\n * </settings>\n * <meta>\n *  <mappings>\n *    <mapping name=\"OnOff\">\n *      <entry value=\"0\">O</entry>\n *      <entry value=\"1\">I</entry>\n *    </mapping>\n *  </mappings>\n *  <stylings>\n *    <styling name=\"GreyGreen\">\n *      <entry value=\"0\">grey</entry>\n *      <entry value=\"1\">green</entry>\n *    </styling>\n *  </stylings>\n * </meta>\n * <switch mapping=\"OnOff\" styling=\"GreyGreen\">\n *   <layout colspan=\"3\" />\n *   <label>Switch</label>\n *   <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n * </switch>\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Switch', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n\n    offValue: {\n      check: 'String',\n      init: '0'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param value {any} incoming data (already transformed + mapped)\n     */\n    handleUpdate(value) {\n      const actor = this.getActor();\n      // compare against the unmapped value\n      value = this.getBasicValue();\n      const off = this.getOffValue();\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      actor.classList.remove(value == off ? 'switchPressed' : 'switchUnpressed');\n\n      actor.classList.add(value == off ? 'switchUnpressed' : 'switchPressed');\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @return {var}\n     */\n    getActionValue() {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      return this.getBasicValue() == this.getOffValue() ? this.getOnValue() : this.getOffValue();\n    }\n  }\n});\n","/* Text.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The text-tag defines static (non-changing) text to be displayed on a page. The content of a &lt;label&gt; with free text.\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a centered text widget</caption>\n *   <screenshot name=\"text_example\" />\n * </settings>\n * <text align=\"center\"><label>Example text</label></text>\n *\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Text', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '';\n    }\n  }\n});\n","/* Toggle.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The toggle widget is similar to the switch, but it can take more than two states.\n * Can be used to change the operating modes of the heating system.\n * Each time the toggle is pressed, the toggle takes the next possible state.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Toggle', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @return {var}\n     */\n    getActionValue() {\n      return this.getNextMappedValue(this.getBasicValue(), this.getMapping());\n    }\n  }\n});\n","/* Trigger.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a button to the visu with which exactly a defined value for a short,\n * as well as a defined value for a long key pressure, can be sent to the BUS,\n * e.g. for recalling and storing scenes or driving roller blinds. (Short = stop, long = drive).\n * The address for short and long term may vary.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Trigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.BasicUpdate,\n    cv.ui.common.HandleLongpress\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', init: '0' },\n    shortValue: { check: 'String', init: '0' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n      this.defaultUpdate(undefined, this.getSendValue(), this.getDomElement());\n    },\n\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Handle a short tap event and send the value for short pressing the trigger to the backend.\n     * If there is no short threshold set, this send the value for long presses to the backend.\n     */\n    _action() {\n      const value = this.getShortThreshold() > 0 || this.isShortDefault() ? this.getShortValue() : this.getSendValue();\n      this.sendToBackend(value, function (address) {\n        return !!(address.variantInfo & 1);\n      });\n    },\n\n    /**\n     * Handle a long tap event and send the value for long pressing the trigger to the backend.\n     */\n    _onLongTap() {\n      this.sendToBackend(this.getSendValue(), function (address) {\n        return !!(address.variantInfo & 2);\n      });\n    }\n  }\n});\n","/* Unknown.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Fallback widget shown when an unknown widget is defined in the configuration.\n * You must not use this one directly.\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Unknown', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct(props) {\n    this.set(props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    path: {\n      check: 'String',\n      init: ''\n    },\n\n    $$type: {\n      check: 'String',\n      init: 'Unknown'\n    },\n\n    unknownType: {\n      check: 'String',\n      init: ''\n    },\n\n    pageType: {\n      check: ['text', '2d', '3d'],\n      init: 'text'\n    },\n\n    parentWidget: {\n      check: 'cv.ui.structure.pure.AbstractBasicWidget',\n      init: null\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    /**\n     * Returns the DOM-Element of this widget\n     * @return {Element} the DOM element\n     */\n    getDomElement() {\n      return document.querySelector('#' + this.getPath());\n    },\n\n    /**\n     * Return the HTML string for this widget\n     * @return {String} HTML code\n     */\n    getDomString() {\n      return (\n        '<div class=\"widget clearfix\"><pre>' +\n        qx.locale.Manager.tr('unknown: %1', this.getUnknownType()) +\n        '</pre></div>'\n      );\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('unknown', statics);\n  }\n});\n","/* UrlTrigger.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * The UrlTrigger widget adds a button to the visualization that queries data from a URL in the background.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.UrlTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton, cv.ui.common.BasicUpdate],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', init: '0' },\n    params: { check: 'String', init: '' },\n    url: { check: 'String', nullable: true, apply: '_applyUrl' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __xhr: null,\n\n    getXhr() {\n      return this.__xhr;\n    },\n\n    // property apply\n    _applyUrl(value) {\n      if (value) {\n        if (!this.__xhr) {\n          const xhr = new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(value));\n\n          xhr.set({\n            method: 'GET',\n            accept: 'application/html',\n            requestData: this.getParams()\n          });\n\n          this.__xhr = xhr;\n        } else {\n          this.__xhr.setUrl(qx.util.ResourceManager.getInstance().toUri(value));\n        }\n      }\n    },\n\n    // overridden\n    _onDomReady() {\n      super._onDomReady();\n      this.defaultUpdate(undefined, this.getSendValue(), this.getDomElement());\n    },\n\n    // overridden\n    _getInnerDomString() {\n      let actor = '<div class=\"actor switchUnpressed ';\n      if (this.getAlign()) {\n        actor += this.getAlign();\n      }\n      actor += '\"><div class=\"value\"></div></div>';\n      return actor;\n    },\n\n    // overridden\n    _action() {\n      if (this.__xhr) {\n        this.__xhr.send();\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this._disposeObjects('__xhr');\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('urltrigger', statics);\n  }\n});\n","/* Video.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds a video or live stream to the visu. Currently, most sources do not support this yet.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Video', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width: { check: 'String', nullable: true },\n    height: { check: 'String', nullable: true },\n    src: { check: 'String', init: '' },\n    autoplay: { check: 'Boolean', init: false }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      // create the actor\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style !== '') {\n        style = 'style=\"' + style + '\"';\n      }\n      const autoplay = this.isAutoplay() ? ' autoplay=\"autoplay\"' : '';\n      return (\n        '<div class=\"actor\"><video src=\"' + this.getSrc() + '\" ' + style + autoplay + '  controls=\"controls\" /></div>'\n      );\n    },\n\n    // overridden\n    getValueElement() {\n      return this.getDomElement().querySelector('video');\n    },\n\n    // overridden\n    _applyVisible(value) {\n      const video = this.getValueElement();\n      if (video) {\n        if (value === true && this.isAutoplay()) {\n          video.play();\n        } else {\n          video.pause();\n        }\n      }\n    }\n  }\n});\n","/* Web.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds an area to the visu, where external websites can be displayed.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Web', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Update, cv.ui.common.Refresh],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width: {\n      check: 'String',\n      nullable: true\n    },\n\n    height: {\n      check: 'String',\n      nullable: true\n    },\n\n    frameborder: {\n      check: 'Boolean',\n      init: false\n    },\n\n    background: {\n      check: 'String',\n      nullable: true\n    },\n\n    scrolling: {\n      check: ['auto', 'yes', 'no'],\n      nullable: true\n    },\n\n    src: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString() {\n      let webStyle = this.getStyle();\n      if (webStyle !== '' && webStyle.startsWith('style=\"')) {\n        webStyle = webStyle.substring(7, webStyle.length-1);\n      }\n      if (this.getWidth()) {\n        webStyle += 'width:' + this.getWidth() + ';';\n      } else {\n        // default width is 100% of widget space (fix bug #3175343 part 1)\n        webStyle += 'width: 100%;';\n      }\n      if (this.getHeight()) {\n        webStyle += 'height:' + this.getHeight() + ';';\n      }\n      if (this.getFrameborder() === false) {\n        webStyle += 'border: 0px;';\n      }\n      if (this.getBackground()) {\n        webStyle += 'background-color:' + this.getBackground() + ';';\n      }\n      if (webStyle !== '') {\n        webStyle = 'style=\"' + webStyle + '\"';\n      }\n\n      let scrolling = '';\n      if (this.getScrolling()) {\n        scrolling = 'scrolling=\"' + this.getScrolling() + '\"';\n      } // add scrolling parameter to iframe\n      return '<div class=\"actor\"><iframe src=\"' + this.getSrc() + '\" ' + webStyle + scrolling + '></iframe></div>';\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data (already transformed + mapped)\n     */\n    _update(address, data) {\n      let addr = this.getAddress()[address];\n      if (!addr) {\n        return;\n      }\n      if (data === 1) {\n        const iframe = this.getDomElement().querySelector('iframe');\n        this.refreshAction(iframe, iframe.getAttribute('src'));\n        // reset the value\n        cv.io.BackendConnections.getClient(addr.backendType).write(address, cv.Transform.encode(addr, 0));\n      }\n    }\n  }\n});\n","/* WgPluginInfo.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * Adds an dynamic field to the visu that shows live information from a WireGate plugin.\n *\n * Note: The service helper from\n * https://raw.githubusercontent.com/OpenAutomationProject/Wiregate/master/tools/wg-plugindb/wg-plugindb.php\n * must be \"installed\" in the directory /var/www/ (i.e. the web root)\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.WgPluginInfo', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    variable: { check: 'String', nullable: true, apply: '_applyVariable' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __request: null,\n\n    // property apply\n    _applyVariable(value) {\n      if (value) {\n        if (!this.__request) {\n          // create the request\n          this.__request = new qx.io.request.Xhr('/wg-plugindb.php?name=' + value);\n\n          this.__request.set({\n            accept: 'application/json'\n          });\n\n          this.__request.addListener('success', this._onSuccess, this);\n        } else {\n          this.__request.setUrl('/wg-plugindb.php?name=' + value);\n        }\n        cv.TemplateEngine.getInstance().executeWhenDomFinished(this.__request.send, this.__request);\n      }\n    },\n\n    getRequest() {\n      return this.__request;\n    },\n\n    /**\n     * Handle successful requests from {@link qx.io.request.Xhr}\n     * @param ev {Event}\n     */\n    _onSuccess(ev) {\n      const req = ev.getTarget();\n      const data = req.getResponse();\n      this.defaultUpdate(undefined, data[this.getVariable()], this.getValueElement());\n    },\n\n    // overridden\n    _getInnerDomString() {\n      return '<div class=\"actor\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Triggers an {@link qx.io.request.Xhr} request to query the plugin value\n     */\n    handleUpdate() {\n      if (this.__request) {\n        this.__request.send();\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct() {\n    this._disposeObjects('__request');\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('wgplugin_info', statics);\n  }\n});\n","/* WidgetInfoAction.js\n *\n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n *\n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n/**\n * This is a helper class for the InfoAction widget it cannot be used directly\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (as widget), 0.9.2 (as plugin)\n */\nqx.Class.define('cv.ui.structure.pure.WidgetInfoAction', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    anonymous: {\n      refine: true,\n      init: true\n    },\n\n    childObjects: { check: 'Array', init: [] }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    getDomString() {\n      return this.getChildrenDomString();\n    }\n  },\n\n  defer(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('widgetinfo', statics);\n    cv.ui.structure.WidgetFactory.registerClass('widgetaction', statics);\n  }\n});\n"],"mappings":"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","ignoreList":[]}