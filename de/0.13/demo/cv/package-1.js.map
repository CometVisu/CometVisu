{"version":3,"sources":["/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/Manager.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/AbstractBasicWidget.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/AbstractWidget.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/States.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/layout/ResizeHandler.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Audio.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Break.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/ColorChooser.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Controller.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/navigation/PagePartsHandler.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/navigation/PageHandler.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/DesignToggle.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Group.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Image.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/ImageTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Info.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoAction.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/InfoTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Line.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/MultiTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NavBar.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/NotificationCenterBadge.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Page.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageJump.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PageLink.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/PushButton.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Refresh.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Reload.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Rgb.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Roundbar.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Slide.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Switch.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Text.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Toggle.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Trigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Unknown.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/UrlTrigger.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Video.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/Web.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/WgPluginInfo.js","/home/runner/work/CometVisu/CometVisu/source/class/cv/ui/structure/pure/WidgetInfoAction.js"],"names":["qx","Class","define","type","statics","lastBodyWidth","currentPageUnavailableWidth","currentPageUnavailableHeight","currentPageNavbarVisibility","oldWidth","LAYOUT_MODE","COLSPAN_CLASS","getCurrentPageNavbarVisibility","this","left","right","top","bottom","cv","Application","structureController","pagePartsHandler","getNavbarsVisibility","getCurrentPage","getColspanClass","width","Config","maxScreenWidthColspanS","adjustColumns","getAvailableWidth","oldClass","newClass","bodyWidth","document","documentElement","clientWidth","navbarVisibility","querySelector","widthNavbarLeft","leftRect","getBoundingClientRect","window","getComputedStyle","Math","round","widthNavbarRight","rightRect","getAvailableHeight","windowHeight","clientHeight","emptyRect","topNav","bottomNav","topNavDisplay","topDisplay","bottomNavDisplay","bottomDisplay","topRect","topHeight","topNavRect","topNavHeight","bottomNavRect","bottomNavHeight","bottomRect","bottomHeight","nav_pathRect","navPathHeight","max","rowspanClass","rowspan","configSettings","usedRowspans","getWidgetColspan","widget","getColspan","getColspanS","getColspanM","getLayoutSuffix","suffix","maxScreenWidthColspanM","applyColumnWidths","selector","includeNavbars","mainAreaColspan","defaultColumns","mainAreaColumns","dataset","parseInt","pageSelector","allContainer","querySelectorAll","area","areaColspan","areaElement","areaColumns","ui","structure","WidgetFactory","getInstanceByElement","child","ourColspan","w","min","forEach","e","groupChild","util","Tree","getChildWidgets","groupColspan","parentGroupElement","getParent","parentGroupWidget","parentNode","__P_67_0","elem","widthClassSuffix","style","classList","cssClass","startsWith","remove","add","pure","layout","Manager","$$dbClassInfo","Bootstrap","executePendingDefers","extend","core","Object","construct","props","prop","undefined","firstUp","set","properties","path","check","$$type","pageType","init","members","__P_54_0","_domElement","setDomElement","node","setParentWidget","value","getParentWidget","lazyLoading","getPath","parentData","getParentData","parent","createInstance","getDomElement","getDomString","_getInnerDomString","getParentPage","get$$type","getVisibilityParent","AbstractBasicWidget","include","common","HasStyling","constructor","call","split","shift","TemplateEngine","getInstance","isDomFinished","_onDomFinished","event","message","Bus","subscribe","DeferredCall","parentPage","bind","schedule","anonymous","flavour","nullable","label","bindClickToWidget","mapping","align","classes","colspan","transform","colspanM","colspanS","containerClass","visible","apply","responsive","events","domReady","$$domReady","__P_55_0","__P_55_1","_skipNextEvent","__P_55_2","__P_55_3","_applyVisible","old","getResponsiveLayout","isResponsive","getLayout","l","string2number","parseFloat","downaction","ev","action","isVisible","_onDomReady","addListenerOnce","initListeners","fireEvent","getActor","error","getValueElement","getWidgetElement","getInteractionElement","isBindClickToWidget","addElementListener","buttonPressed","_onPointerDown","_cancelEvent","preventDefault","stopPropagation","getCurrentTarget","Date","now","stop","Registration","addListener","_onPointerUp","_onLongTap","hasMixin","HandleLongpress","isSendLongOnRelease","getShortThreshold","clonedEv","clone","Timer","once","__P_55_4","x","getDocumentLeft","y","getDocumentTop","_onPointerMove","removeListener","upElement","getTarget","abort","abs","setCurrentTarget","callback","context","isAnonymous","removeElementListener","getClasses","getStyle","getLabel","destruct","AbstractWidget","pageSizeInvalid","backdropInvalid","navbarInvalid","rowspanInvalid","resetAll","reset","States","states","$pageSize","$navbarTop","$navbarBottom","height","__P_68_0","__P_68_1","validationQueue","__P_68_2","getPageSize","noCache","getNavbarTop","getNavbarBottom","queueJob","indexOf","push","bom","AnimationFrame","request","flush","length","makeAllSizesValid","isPageSizeInvalid","makePagesizeValid","isNavbarInvalid","makeNavbarValid","isRowspanInvalid","makeRowspanValid","isBackdropInvalid","makeBackdropValid","__P_68_3","log","Logger","debug","page","getPageType","cssPosRegEx","backdrop","getBackdropType","backdropSVG","getSVGDocument","backdropBBox","children","getBBox","backdropNWidth","naturalWidth","backdropNHeight","naturalHeight","backdropFixed","getSize","backdropScale","backdropWidth","backdropHeight","backdropPos","getBackdropAlign","backdropLeftRaw","match","backdropTopRaw","backdropLeft","backdropTop","uagent","navigator","userAgent","toLowerCase","complete","invalidateBackdrop","getAttribute","setAttribute","widgetContainer","getInstanceById","id","scale","name","setBackdropInvalid","__P_68_4","setNavbarInvalid","__P_68_5","currentPageId","isInitialized","pageSizeElement","innerHTML","setPageSizeInvalid","__P_68_6","dom","Element","create","class","html","body","appendChild","__P_68_7","rect","styles","calcrowspan","removeChild","rowSpanStyle","setRowspanInvalid","self","requestAnimationFrame","invalidateNavbar","invalidateRowspan","invalidateScreensize","defer","ResizeHandler","Update","src","autoplay","loop","thresholdValue","getWidth","getHeight","isAutoplay","isLoop","getId","getSrc","_update","address","applyMapping","getThresholdValue","audioWidget","paused","play","registerClass","Audio","Break","Operate","coord2sv","hue","radius","hue2angle","PI","Sx","sin","Sy","cos","Wx","Wy","Bx","By","WBx","WBy","SBx","SBy","CBx","CBy","uv","Color","solve2d","u","v","_this","base","getBaseColors","__P_56_0","r","g","b","__P_56_1","LimitedRateUpdateAnimator","__P_56_2","setAnimationSpeed","__P_56_3","__P_56_4","__P_56_5","Set","entries","getAddress","map","variantInfo","__P_56_6","removeListenerById","__P_56_7","controls","baseColors","sendOnFinish","__P_56_8","__P_56_9","__P_56_10","__P_56_11","__P_56_12","__P_56_13","__P_56_14","__P_56_15","__P_56_16","placeholder","getFormat","retval","historicWidth","getControls","control","parts","temperatures","rgbTmin","xy2sRGB","temperature2xy","rgbTmax","disp","c","join","colors","_this2","ColorChooser","superclass","prototype","__P_56_17","Function","throttle","__P_56_18","trailing","actor","addEventListener","data","variantType","addressObj","showInvalidDataErrorMessage","locale","tr","variant","testMode","console","toString","notifications","Router","dispatchMessage","Transform","decode","Number","isFinite","get","h","s","invCurve","curve","Map","_typeof","Y","notKnown","_defineProperty","__P_56_19","instant","copy","changeComponent","delta","setTo","newColor","actorStyle","actors","className","replace","sv_element","inner","handle","handle_hue","isLCh","contains","handle_hueTop","getPropertyValue","handle_hueWidth","innerRadius","outerRadius","button","range","buttonWidth","marginLeft","borderRadius","angle","LCh","getComponent","WSt","C","WSl","L","background","hsv","_WSt","_WSl","_angle","_LCh","_r","_g","_b","_hsv","transformOrigin","ratioComponent","clipPath","handleEvent","relCoordX","relCoordY","actorType","currentTarget","boundingRect","computedStyle","__P_56_20","paddingLeft","__P_56_21","clientX","clientY","sv","distSqrd","pow","clearlyOnWheel","closeToInerior","closeToTriangleCorners","atan2","boxSize","_sv","ratio","buttons","removeEventListener","_type","_type2","_actor","_radius","_sv2","_boxSize","_sv3","getSendOnFinish","_this3","typeCategory","includes","sendToBackend","t","implement","IController","__P_57_0","__P_57_1","cache","Stylesheet","includeFile","ResourceManager","toUri","forceReload","currentPage","renderTarget","namespace","main_scroll","old_scroll","getHtmlStructure","parseBackendSettings","xml","settings","pagesElement","backend","backendUrl","backendKnxdUrl","backendMQTTUrl","backendOpenHABUrl","credentials","token","username","password","login","io","BackendConnections","getClient","startInitialRequest","parseSettings","done","screensave_time","screensave_page","maxMobileScreenWidth","globalClass","scrollSpeed","minColumnWidth","preParse","_asyncToGenerator","regeneratorRuntime","mark","_callee","metaParser","wrap","_context","prev","next","parser","MetaParser","pluginsToLoad","concat","parsePlugins","parse","createUI","cacheUsed","_createPages","dispatchByName","setDomFinished","initLayout","WidgetParser","renderTemplates","parsedData","Array","isArray","i","parseLabel","labelClass","ret_val","childNodes","nodeType","Node","ELEMENT_NODE","nodeName","IconHandler","getIconElement","TEXT_NODE","textContent","supports","feature","subfeature","hasOwnProperty","getInitialAddresses","startPageAddresses","initialPage","addr","keys","initPagePartsHandler","navigation","PagePartsHandler","__P_57_2","setCurrentPage","PageHandler","setSpeed","scrollToPage","svg","readyState","onload","TrickOMatic","run","IconTools","fillRecoloredIcon","Init","getApplication","_onMobileChanged","doScreenSave","onHistoryRequest","anchor","target","speed","skipHistory","page_id","getPageIdByPath","treePath","rememberLastPage","Environment","localStorage","lastpage","headline","pageTitle","History","addToHistory","seekTo","initializeNavbars","_maintainNavbars","isReady","getMobile","navbars","dynamic","fadeNavbar","resetPageValues","resetCurrentPage","getInitialPageId","_callee2","_context2","abrupt","_this4","_callee3","startpage","req","_context3","getItem","substr","removeItem","Uri","parseUri","location","href","substring","Promise","resolve","page_name","scope","traversePath","getPageIdByName","root_page_id","path_scope","index","path_page_name","String","decodeHtmlEntities","decodeURI","pages","from","filter","fallback","some","p","getClosest","innerText","pid","Controller","fadeVisible","updateTopNavigation","pop","pathNode","getPageTitle","nav","createElement","createTextNode","pageElem","span","pageId","pageData","Model","getWidgetData","pageHeadline","navbarSetSize","position","size","navbar","cssSize","attributes","getShowNavbarTop","getShowNavbarBottom","getShowNavbarLeft","getShowNavbarRight","updatePageParts","showtopnavigation","showfooter","getShowTopNavigation","getShowFooter","display","removeInactiveNavbars","direction","getSpeed","initCss","targetCss","key","onAnimationEnd","key_value","spec","duration","timing","getEasing","keep","keyFrames","0","100","element","Animation","animate","tree","subPath","slice","item","level","positions","pos","navBarPath","expr","RegExp","test","easing","currentPath","animationType","getCurrentPath","pageWidget","controller","animationConfig","oldPageWidget","animationEnabled","getAnimationType","__P_69_0","overflow","setVisible","outAnim","leavePage","__P_69_1","oldPos","enterPage","__P_69_2","inAnim","toUpperCase","SLIDE_RIGHT_IN","SLIDE_RIGHT_OUT","SLIDE_LEFT_IN","SLIDE_LEFT_OUT","updateVisibility","setCurrentPath","HasAnimatedButton","store","Json","rest","Client","getBaseUrl","setAvailableDesigns","getData","availableDesigns","getDesign","_action","isCanceled","designs","getAvailableDesigns","oldDesign","newDesign","URL","Location","getHref","regexp","search","setHref","appendParamsToUrl","design","DesignToggle","HasChildren","noWidget","getBubbles","Group","hstyle","getAlign","container","getName","getChildrenDomString","Refresh","cropTop","cropBottom","widthFit","__P_58_0","imgStyle","getWidthFit","getCropTop","getCropBottom","__P_58_1","getPlaceholder","protocol","handleUpdate","text","valueElem","getRefresh","Image","updateType","sendValue","extractLayout","getUpdateType","__P_59_0","getSuffix","trim","imageChild","url","getSendValue","ImageTrigger","Info","refine","InfoAction","downValue","shortDownValue","downLabel","upValue","shortUpValue","upLabel","isAbsolute","infoPosition","actordown","getDownLabel","actorup","getUpLabel","actorinfo","getInfoPosition","getActors","__P_60_0","__P_60_1","isShort","isDown","getShortDownValue","getShortUpValue","getDownValue","getUpValue","bitMask","getIsAbsolute","bvalue","getBasicValue","getMin","getMax","getDownActor","getUpActor","getInfoActor","InfoTrigger","Line","showstatus","elementsPerLine","buttonConfiguration","getMapping","getElementsPerLine","config","getButtonConfiguration","sort","buttonConfig","mappedValue","defaultValueHandling","div","defaultValue2DOM","_processIncomingValue","applyTransform","isPressed","getActionValue","MultiTrigger","_navbarTop","_navbarLeft","_navbarRight","_navbarBottom","_touchX","_touchY","content","evt","touches","pPH","composedPath","passive","enoughDistance","toRight","getGlobalPath","getPosition","NavBar","i_right","setContainerClass","splice","counter","hideWhenEmpty","__P_61_0","NotificationCenterBadge","center","NotificationCenter","getMessages","_onChangeCounter","_onChangeGlobalSeverity","disableBadge","getType","toggleVisibility","__P_61_1","getSeverities","messages","isHideWhenEmpty","getCounter","__P_62_0","_onChangeVisible","tuple","property","defaultValue","charAt","setInitialized","_initOnCreate","allPages","createFinal","getRenderTarget","unsubscribe","initialized","showTopNavigation","showFooter","showNavbarTop","showNavbarBottom","showNavbarLeft","showNavbarRight","backdropAlign","backdropType","linkVisible","__P_62_1","__P_62_2","_applyNavbarVisibility","i_name","getBackdrop","subpage","getFlavour","Page","ga","list","isWriteAddress","write","encode","activeScope","targetPath","_onScrollToPage","model","getWidgetDataByElement","pageJumps","markPageJumps","parentName","getTargetPath","PageJump","wstyle","getWstyle","PageLink","off","PushButton","BasicUpdate","defaultUpdate","restart","reload","Reload","valElem","bg","Rgb","__P_63_0","coord","toFixed","createBarPath","startAngle","startArrowPoint","endAngle","endArrowPoint","arguments","startArrowPointAngle","endArrowPointAngle","clockwise","rI","rIM","rM","rMO","rO","startInner","startMiddle","startOuter","centerInner","centerOuter","endInner","endMiddle","endOuter","startMiddleFlag","startEndFlag","endMiddleFlag","startMiddleDir","endMiddleDir","arc","start","end","flag","cw","Roundbar","rMax","isInside","a","rMiddle","uMiddle","lMiddle","dMiddle","d","createPointerPath","wx","wy","thickness","tx","ty","indicators","axisradius","axiswidth","axiscolor","ranges","minorradius","minorwidth","minorspacing","minorcolor","majorradius","majorwidth","majorposition","majorcolor","labels","labelstyle","arrowtype","spacing","overflowarrow","fontsize","textx","texty","textlength","textanchor","linespace","bboxgrow","currentRatioValue","targetRatioValue","__P_63_1","bboxAdd","bbox","setCurrentRatioValue","getIndicators","fill","setTargetRatioValue","getStart","getEnd","cntValues","svgMajor","svgMinor","svgLabels","svgRanges","svgIndicators","svgText","getAxisradius","getAxiswidth","sMax","eMax","indicator","startarrow","endarrow","BBox","getMinorwidth","getMinorspacing","rIn","getMinorradius","rOut","cnt","getMinorcolor","getMajorwidth","_rIn","getMajorradius","_rOut","getMajorposition","getMajorcolor","getLabelstyle","getLabels","labelnumber","alignmentBaseline","textAnchor","textAngle","orientation","_textAngle","labelid","$$user_path","getRanges","sRange","eRange","rRange","wRange","thisBBox","number","__P_63_2","showValue","getTexty","getTextanchor","getFontsize","getTextx","getLinespace","repeat","textDistribution","middle","textU","textD","getTextlength","getBboxgrow","getDebug","sectorPath","axisPath","stroke","getAxiscolor","getTargetRatioValue","tspan","getElementsByTagName","valueFormat","applyFormat","indicatorNumber","getElementsByClassName","targetAngle","getOverflowarrow","isBar","__P_64_0","__P_64_1","__P_64_2","__P_64_3","__P_64_4","__P_64_5","step","showInvalidValues","__P_64_6","__P_64_7","__P_64_8","__P_64_9","__P_64_10","Slide","__P_64_11","__P_64_12","__P_64_13","relaxDisplay","getStep","realValue","getShowInvalidValues","stepValue","floor","stepCount","factor","sign","setBasicValue","displayValue","setValue","applyStyling","replaceChildren","actorStyles","_disposeObjects","newRatio","newValue","onValue","offValue","getOffValue","getOnValue","Switch","Text","getNextMappedValue","Toggle","shortValue","Trigger","isShortDefault","getShortValue","unknownType","parentWidget","getUnknownType","Unknown","params","__P_65_0","getXhr","_applyUrl","setUrl","xhr","Xhr","method","accept","requestData","getParams","UrlTrigger","send","video","pause","Video","frameborder","scrolling","webStyle","getFrameborder","getBackground","getScrolling","iframe","refreshAction","Web","variable","__P_66_0","_applyVariable","_onSuccess","executeWhenDomFinished","getRequest","getResponse","getVariable","WgPluginInfo","childObjects","WidgetInfoAction"],"mappings":"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","sourcesContent":["/* Manager.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n */\nqx.Class.define('cv.ui.structure.pure.layout.Manager', {\n\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    // use to recognize if the screen width has crossed the maxMobileScreenWidth\n    lastBodyWidth: 0,\n    currentPageUnavailableWidth: -1,\n    currentPageUnavailableHeight: -1,\n    currentPageNavbarVisibility: null,\n    oldWidth: -1,\n\n    LAYOUT_MODE: 'DEFAULT',\n\n    COLSPAN_CLASS: null,\n\n    getCurrentPageNavbarVisibility: function () {\n      if (this.currentPageNavbarVisibility === null ||\n        this.currentPageNavbarVisibility.left === null ||\n        this.currentPageNavbarVisibility.right === null ||\n        this.currentPageNavbarVisibility.top === null ||\n        this.currentPageNavbarVisibility.bottom === null\n      ) {\n        this.currentPageNavbarVisibility = cv.Application.structureController.pagePartsHandler.getNavbarsVisibility(cv.Application.structureController.getCurrentPage());\n      }\n      return this.currentPageNavbarVisibility;\n    },\n\n    // return S, M or L depening on the passed width\n    getColspanClass: function (width) {\n      if (width <= cv.Config.maxScreenWidthColspanS) {\n        return 'S';\n      }\n      if (width <= cv.Config.maxScreenWidthColspanM) {\n        return 'M';\n      }\n      return 'L';\n    },\n\n    adjustColumns: function () {\n      const width = this.getAvailableWidth();\n      const oldClass = this.getColspanClass(this.oldWidth);\n      const newClass = this.getColspanClass(width);\n\n      this.oldWidth = width;\n      this.COLSPAN_CLASS = newClass;\n      return oldClass !== newClass;\n    },\n\n    /**\n     * return the available width for a the currently visible page\n     * the available width is calculated by subtracting the following elements widths (if they are visible) from the body width\n     * - Left-Navbar\n     * - Right-Navbar\n     */\n    getAvailableWidth: function () {\n      // currently this calculation is done once after every page scroll (where cv.TemplateEngine.getInstance()currentPageUnavailableWidth is reseted)\n      // if the screen width falls below the threshold which activates/deactivates the mobile.css\n      // the calculation has to be done again, even if the page hasn´t changed (e.g. switching between portrait and landscape mode on a mobile can cause that)\n      const bodyWidth = document.documentElement.clientWidth;\n      //      console.log(\"Mobile.css use changed \"+mobileUseChanged);\n      this.currentPageUnavailableWidth = 0;\n      const navbarVisibility = this.getCurrentPageNavbarVisibility();\n\n      const left = document.querySelector('#navbarLeft');\n      let widthNavbarLeft = 0;\n      if (left) {\n        const leftRect = left.getBoundingClientRect();\n        widthNavbarLeft = navbarVisibility.left === true && window.getComputedStyle(left)['display'] !== 'none' ? Math.round(leftRect.right - leftRect.left) : 0;\n      }\n      if (widthNavbarLeft >= bodyWidth || qx.core.Init.getApplication().getMobile()) {\n        // Left-Navbar has the same size as the complete body, this can happen, when the navbar has no content\n        // maybe there is a better solution to solve this problem\n        // OR: we have a mobile device where the nav bar is floating above the other content\n        widthNavbarLeft = 0;\n      }\n      const right = document.querySelector('#navbarRight');\n      let widthNavbarRight = 0;\n      if (right) {\n        const rightRect = right.getBoundingClientRect();\n        widthNavbarRight = navbarVisibility.right === true && window.getComputedStyle(right)['display'] !== 'none' ? Math.round(rightRect.right - rightRect.left) : 0;\n      }\n      if (widthNavbarRight >= bodyWidth || qx.core.Init.getApplication().getMobile()) {\n        // Right-Navbar has the same size as the complete body, this can happen, when the navbar has no content\n        // maybe there is a better solution to solve this problem\n        // OR: we have a mobile device where the nav bar is floating above the other content\n        widthNavbarRight = 0;\n      }\n      this.currentPageUnavailableWidth = widthNavbarLeft + widthNavbarRight + 1; // remove an additional pixel for Firefox\n      //      console.log(\"Width: \"+bodyWidth+\" - \"+widthNavbarLeft+\" - \"+widthNavbarRight);\n\n      this.lastBodyWidth = bodyWidth;\n      return bodyWidth - this.currentPageUnavailableWidth;\n    },\n\n    /**\n     * return the available height for a the currently visible page\n     * the available height is calculated by subtracting the following elements heights (if they are visible) from the window height\n     * - Top-Navigation\n     * - Top-Navbar\n     * - Bottom-Navbar\n     * - Statusbar\n     *\n     * Notice: the former way to use the subtract the main.position().top value from the total height leads to errors in certain cases\n     *         because the value of main.position().top is not reliable all the time\n     */\n    getAvailableHeight: function () {\n      const windowHeight = document.documentElement.clientHeight;\n      this.currentPageUnavailableHeight = 0;\n      const emptyRect = {\n        top: 0,\n        bottom: 0\n      };\n      const navbarVisibility = this.getCurrentPageNavbarVisibility();\n      const topNav = document.querySelector('#navbarTop');\n      const top = document.querySelector('#top');\n      const bottomNav = document.querySelector('#navbarBottom');\n      const bottom = document.querySelector('#bottom');\n      const topNavDisplay = topNav ? window.getComputedStyle(topNav)['display'] : 'none';\n      const topDisplay = top ? window.getComputedStyle(top)['display'] : 'none';\n      const bottomNavDisplay = bottomNav ? window.getComputedStyle(bottomNav)['display'] : 'none';\n      const bottomDisplay = bottom ? window.getComputedStyle(bottom)['display'] : 'none';\n      const topRect = top ? top.getBoundingClientRect() : emptyRect;\n      const topHeight = Math.round(topRect.bottom - topRect.top);\n      const topNavRect = topNav ? topNav.getBoundingClientRect() : emptyRect;\n      const topNavHeight = Math.round(topNavRect.bottom - topNavRect.top);\n      const bottomNavRect = bottomNav ? bottomNav.getBoundingClientRect() : emptyRect;\n      const bottomNavHeight = Math.round(bottomNavRect.bottom - bottomNavRect.top);\n      const bottomRect = bottom ? bottom.getBoundingClientRect() : emptyRect;\n      const bottomHeight = Math.round(bottomRect.bottom - bottomRect.top);\n      const nav_pathRect = document.querySelector('.nav_path').getBoundingClientRect();\n      const navPathHeight = Math.round(nav_pathRect.bottom - nav_pathRect.top);\n\n      if (topDisplay !== 'none' && topHeight > 0) {\n        this.currentPageUnavailableHeight += Math.max(topHeight, navPathHeight);\n      }\n      if (topNavDisplay !== 'none' && navbarVisibility.top === true && topNavHeight > 0) {\n        this.currentPageUnavailableHeight += topNavHeight;\n      }\n      if (bottomNavDisplay !== 'none' && navbarVisibility.bottom === true && bottomNavHeight > 0) {\n        this.currentPageUnavailableHeight += bottomNavHeight;\n      }\n      if (bottomDisplay !== 'none' && bottomHeight > 0) {\n        this.currentPageUnavailableHeight += bottomHeight;\n      }\n      if (this.currentPageUnavailableHeight > 0) {\n        this.currentPageUnavailableHeight += 1;// remove an additional pixel for Firefox\n      }\n      return windowHeight - this.currentPageUnavailableHeight;\n    },\n\n    rowspanClass: function (rowspan) {\n      cv.Config.configSettings.usedRowspans[rowspan] = true;\n      return 'rowspan rowspan' + rowspan;\n    },\n\n    getWidgetColspan: function(widget, width) {\n      if (widget.getColspan) {\n        if (width <= cv.Config.maxScreenWidthColspanS) {\n          return widget.getColspanS();\n        }\n        if (width <= cv.Config.maxScreenWidthColspanM) {\n          return widget.getColspanM();\n        }\n        return widget.getColspan();\n      }\n      return 0;\n    },\n\n    getLayoutSuffix: function (width) {\n      let suffix = '';\n      if (width <= cv.Config.maxScreenWidthColspanS) {\n        suffix = '-s';\n      } else if (width <= cv.Config.maxScreenWidthColspanM) {\n        suffix = '-m';\n      }\n      return suffix;\n    },\n\n    /**\n     * applies the correct width to the widgets corresponding to the given colspan setting\n     *\n     * @param selector {String?} only update elements found by the given selector\n     * @param includeNavbars {Boolean?} also update navbar elements (default: true)\n     */\n    applyColumnWidths: function (selector, includeNavbars) {\n      const width = this.getAvailableWidth();\n      let mainAreaColspan = cv.Config.defaultColumns;\n      const main = document.querySelector('#main');\n      if (main) {\n        const mainAreaColumns = document.querySelector('#main').dataset['columns'];\n        if (mainAreaColumns) {\n          mainAreaColspan = parseInt(mainAreaColumns);\n        }\n      }\n\n      const pageSelector = selector ? selector : '#main .activePage';\n      let selectors = [];\n\n      if (includeNavbars === true) {\n        selectors = ['#navbarTop', '#navbarLeft', pageSelector, '#navbarRight', '#navbarBottom'];\n      } else {\n        selectors = [pageSelector];\n      }\n\n      selectors.forEach(function (area) {\n        const allContainer = document.querySelectorAll(area + ' .widget_container');\n        if (allContainer.length > 0) {\n          let areaColspan = cv.Config.defaultColumns;\n          const areaElement = document.querySelector(area);\n          if (areaElement) {\n            const areaColumns = areaElement.dataset['columns'];\n            if (areaColumns) {\n              areaColspan = parseInt(areaColumns);\n            }\n          }\n          allContainer.forEach(function(child) {\n            const widget = cv.ui.structure.WidgetFactory.getInstanceByElement(child);\n            const ourColspan = this.getWidgetColspan(widget, width);\n\n            let w = 'auto';\n            if (ourColspan > 0) {\n              w = Math.min(100, ourColspan / areaColspan * 100) + '%';\n            }\n            this.__applyWidthClass(child, w);\n          }, this);\n        }\n\n        // and elements inside groups\n        const adjustableElements = document.querySelectorAll(area + ' .group .widget_container');\n        adjustableElements.forEach(function (e) {\n          const widget = cv.ui.structure.WidgetFactory.getInstanceByElement(e);\n          let ourColspan = this.getWidgetColspan(widget, width);\n          if (ourColspan === null) {\n            // workaround for nowidget groups\n            const groupChild = cv.util.Tree.getChildWidgets(widget, 'group')[0];\n            ourColspan = this.getWidgetColspan(groupChild, width);\n          }\n          let w = 'auto';\n          if (ourColspan > 0) {\n            let groupColspan = mainAreaColspan;\n            const parentGroupElement = cv.util.Tree.getParent(e, '.widget_container', '.group', 1)[0];\n            if (parentGroupElement) {\n              const parentGroupWidget = cv.ui.structure.WidgetFactory.getInstanceByElement(parentGroupElement.parentNode);\n              if (parentGroupWidget) {\n                groupColspan = Math.min(mainAreaColspan, this.getWidgetColspan(parentGroupWidget, width));\n              }\n            }\n            w = Math.min(100, ourColspan / groupColspan * 100) + '%'; // in percent\n          }\n          this.__applyWidthClass(e, w);\n        }, this);\n      }, this);\n    },\n\n    __applyWidthClass: function (elem, widthClassSuffix) {\n      if (widthClassSuffix === 'auto') {\n        elem.style.width = widthClassSuffix;\n      } else {\n        switch (this.LAYOUT_MODE) {\n          case 'GRID':\n            // remove all old width related classes\n            elem.classList.forEach(function (cssClass) {\n              if (cssClass.startsWith('width-')) {\n                elem.classList.remove(cssClass);\n              }\n            }, this);\n            elem.classList.add('width-' + parseInt(widthClassSuffix));\n            break;\n\n          default:\n            elem.style.width = widthClassSuffix;\n            break;\n        }\n      }\n    }\n  }\n});\n","/* AbstractBasicWidget.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n *\n */\nqx.Class.define('cv.ui.structure.pure.AbstractBasicWidget', {\n  extend: qx.core.Object,\n  type: 'abstract',\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    for (let prop in props) {\n      if (this['set' + qx.Bootstrap.firstUp(prop)] !== undefined) {\n        this.set(prop, props[prop]);\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    /**\n     * Internal path to the widget\n     */\n    path : {\n      check: 'String'\n    },\n\n    /**\n     * The widget type\n     */\n    $$type : {\n      check: 'String'\n    },\n\n    /**\n     * The parents page type\n     */\n    pageType  : {\n      check: ['text', '2d', '3d'],\n      init: 'text'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __parentWidget: null,\n    _domElement: null,\n\n    /**\n     * Override DomElement\n     * @param node {Node}\n     */\n    setDomElement: function (node) {\n      this._domElement = node;\n    },\n\n    setParentWidget: function(value) {\n      this.__parentWidget = value;\n    },\n\n    getParentWidget: function() {\n      if (cv.Config.lazyLoading === true && this.__parentWidget === null && this.getPath() !== 'id_') {\n        // creating parent widget on demand\n        const parentData = cv.util.Tree.getParentData(this.getPath());\n        // console.log(parentData.$$type + \" (\" + parentData.path + \") is parent of \" + this.get$$type() + \" (\" + this.getPath() + \")\");\n        const parent = cv.ui.structure.WidgetFactory.createInstance(parentData.$$type, parentData);\n        this.setParentWidget(parent);\n      }\n      return this.__parentWidget;\n    },\n\n    /**\n     * Returns the DOMElement of this widget\n     * @return {Element}\n     */\n    getDomElement: function() {\n      if (!this._domElement) {\n        this._domElement = document.querySelector('#'+this.getPath());\n      }\n      return this._domElement;\n    },\n\n    /**\n     * Generates the DOM string for this widget\n     * @return {String|null}\n     */\n    getDomString : function() {\n      return this._getInnerDomString ? this._getInnerDomString() : undefined;\n    },\n\n    /**\n     * Get the widgets parent page. This might not be the same as the parent widget.\n     * @return {cv.ui.structure.pure.Page|null}\n     */\n    getParentPage: function() {\n      let parent = this.getParentWidget();\n      while (parent) {\n        if (parent.get$$type() === 'page') {\n          return parent;\n        }\n        parent = parent.getParentWidget();\n      }\n      return null;\n    },\n\n    /**\n     * Get the parent element that defines if this widget is visible. Can be either a page or a navbar\n     * @return {cv.ui.structure.pure.Page|cv.ui.structure.pure.NavBar|null}\n     */\n    getVisibilityParent: function () {\n      let parent = this.getParentWidget();\n      while (parent) {\n        if (parent.get$$type() === 'page' || parent.get$$type() === 'navbar') {\n          return parent;\n        }\n        parent = parent.getParentWidget();\n      }\n      return null;\n    }\n  }\n});\n","/* AbstractWidget.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n//noinspection JSUnusedGlobalSymbols,JSUnusedLocalSymbols,JSHint\n/**\n * This class defines all the building blocks for a Visu in the \"Pure\" design\n */\nqx.Class.define('cv.ui.structure.pure.AbstractWidget', {\n  extend: cv.ui.structure.pure.AbstractBasicWidget,\n  include: cv.ui.common.HasStyling,\n  type: 'abstract',\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.base(arguments, props);\n    const parts = this.getPath().split('_');\n    parts.shift();\n    // var prio = parseInt(parts.join(\"\"))*-1;\n    // var broker = cv.MessageBroker.getInstance();\n    if (cv.TemplateEngine.getInstance().isDomFinished()) {\n      this._onDomFinished();\n    } else {\n      qx.event.message.Bus.subscribe('setup.dom.finished', this._onDomFinished, this);\n    }\n\n    // this.debug(props.$$type+\" INIT [\"+props.path+\"]\");\n    // bind visibility to parent page\n    new qx.util.DeferredCall(function() {\n      if (cv.Config.lazyLoading === true && !this.getParentWidget()) {\n        // initialize the ancestors\n        const parentData = cv.util.Tree.getParentData(props.path);\n        if (parentData) {\n          // console.log(parentData.$$type + \" (\" + parentData.path + \") is parent of \" + props.$$type + \" (\" + props.path + \")\");\n          const parent = cv.ui.structure.WidgetFactory.createInstance(parentData.$$type, parentData);\n          this.setParentWidget(parent);\n        }\n      }\n      const parentPage = this.get$$type() === 'page' || this.get$$type() === 'navbar' ? null : this.getVisibilityParent();\n      if (parentPage) {\n        parentPage.bind('visible', this, 'visible');\n      }\n    }, this).schedule();\n  },\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    /**\n     * If true this widget does not automatically apply any listeners\n     */\n    anonymous : {\n      check: 'Boolean',\n      init: false\n    },\n    flavour           : { check: 'String', init: '', nullable: true },\n    layout            : { check: 'Object', nullable: true},\n    label             : { check: 'String', init: '', nullable: true },\n    bindClickToWidget : { check: 'Boolean', init: false },\n    mapping           : { check: 'String', nullable: true },\n    align             : { check: 'String', nullable: true },\n    classes           : { check: 'String', init: '', nullable: true },\n    style             : { check: 'String', init: ''},\n    colspan           : { check: 'Number', init: 6, transform: 'string2number' },\n    colspanM          : { check: 'Number', init: 6, transform: 'string2number' },\n    colspanS          : { check: 'Number', init: 6, transform: 'string2number' },\n    rowspanClass      : { check: 'String', init: '' },\n    containerClass    : { check: 'String', nullable: true },\n    visible           : {\n      check: 'Boolean',\n      init: false,\n      event: 'changeVisible',\n      apply: '_applyVisible'\n    },\n    responsive        : { check: 'Boolean', init: false }\n  },\n\n  /*\n  ******************************************************\n    EVENTS\n  ******************************************************\n  */\n  events: {\n    'domReady': 'qx.event.type.Event'\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    $$domReady: null,\n    __pointerDownElement: null,\n    __pointerDownTime: null,\n    _skipNextEvent: null,\n    __longPressTimer: null,\n    __pointerDownPoint: null,\n\n    // property apply\n    _applyVisible: function(value, old) {\n    },\n\n    getResponsiveLayout: function (width) {\n      if (!this.isResponsive()) {\n        return this.getLayout();\n      }\n      if (!width) {\n        width = cv.ui.structure.pure.layout.Manager.getAvailableWidth();\n      }\n      const layout = this.getLayout();\n      const suffix = cv.ui.structure.pure.layout.Manager.getLayoutSuffix(width);\n      if (suffix) {\n        const l = {};\n        ['x', 'y', 'width', 'scale'].forEach(function (prop) {\n          if (layout[prop]) {\n            // use default value\n            l[prop] = layout[prop];\n          }\n          if (layout[prop + suffix]) {\n            // override default value\n            l[prop] = layout[prop + suffix];\n          }\n        });\n        return l;\n      }\n      return layout;\n    },\n\n    /**\n     * Property transformaon helper\n     * @param value {String}\n     * @return {Number}\n     */\n    string2number: function(value) {\n      return parseFloat(value);\n    },\n\n    /**\n     * Default action for pointerdown events, does nothing but can be overridden\n     * by subclasses\n     * @param ev {Event} pointerdown event\n     */\n    downaction: function(ev) {}, // jshint ignore:line\n\n    /**\n     * Default action for tap events, does nothing but can be overridden\n     * by subclasses\n     * @param ev {Event} tap event\n     */\n    action: function(ev) {}, // jshint ignore:line\n\n    /**\n     * Triggered by the <code>setup.dom.finished</code> bus event\n     */\n    _onDomFinished: function() {\n      if (!this.isVisible()) {\n        this.addListenerOnce('changeVisible', this._onDomFinished, this);\n        return;\n      }\n      this._onDomReady();\n    },\n\n    /**\n     * Called when all widgets are available in the DOM tree\n     */\n    _onDomReady: function() {\n      if (!this.$$domReady) {\n        this.initListeners();\n        this.fireEvent('domReady');\n        this.$$domReady = true;\n      }\n    },\n\n    /**\n     * Return the widgets actor element\n     * @return {Element}\n     */\n    getActor: function() {\n      const elem = this.getDomElement();\n      if (elem) {\n        return elem.querySelector('.actor');\n      }\n      this.error('no dom element found for', this.get$$type(), this.getPath());\n      return null;\n    },\n\n    /**\n     * Return the widgets value element\n     * @return {Element}\n     */\n    getValueElement: function() {\n      const elem = this.getDomElement();\n      if (elem) {\n        return elem.querySelector('.value');\n      }\n      return null;\n    },\n\n    /**\n     * Return the widgets widget element\n     * @return {Element}\n     */\n    getWidgetElement: function() {\n      const elem = this.getDomElement();\n      if (elem) {\n        return elem.querySelector('.widget');\n      }\n      return null;\n    },\n\n    /**\n     * Return the element which should be used to attach listeners too.\n     * Unsually this would be the actor but if bindClickToWidget is true\n     * it would be the DomElement (aka widget-container)\n     * @return {Element}\n     */\n    getInteractionElement: function() {\n      return this.isBindClickToWidget() ? this.getDomElement() : this.getActor();\n    },\n\n    /**\n     * Initialize the widgets listeners\n     */\n    initListeners: function() {\n      this.addElementListener('tap', this.action, this);\n\n      // we need to listen to pointerdown to detect taps with\n      if (this.buttonPressed) {\n        this.addElementListener('pointerdown', this._onPointerDown, this);\n        this.addElementListener('contextmenu', this._cancelEvent, this);\n      }\n    },\n\n    _cancelEvent: function (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    },\n\n    _onPointerDown: function(ev) {\n      // listen to pointerup globally\n      this.__pointerDownElement = ev.getCurrentTarget();\n      this.__pointerDownTime = Date.now();\n      if (this.__longPressTimer) {\n        this.__longPressTimer.stop();\n        this.__longPressTimer = null;\n      }\n      qx.event.Registration.addListener(document, 'pointerup', this._onPointerUp, this);\n      if (this._onLongTap &&\n        qx.Class.hasMixin(this.constructor, cv.ui.common.HandleLongpress) &&\n        !this.isSendLongOnRelease() &&\n        this.getShortThreshold() > 0) {\n        const clonedEv = ev.clone();\n        this.__longPressTimer = qx.event.Timer.once(function () {\n          this._onLongTap(clonedEv);\n          this._skipNextEvent = 'tap';\n          this.__abort();\n        }, this, this.getShortThreshold());\n\n        this.__pointerDownPoint = {\n          x: ev.getDocumentLeft(),\n          y: ev.getDocumentTop()\n        };\n        // also listen to move events to detect if the pointer is moved away from the widget (or scrolled)\n        qx.event.Registration.addListener(document, 'pointermove', this._onPointerMove, this);\n      }\n    },\n\n    __abort: function () {\n      qx.event.Registration.removeListener(document, 'pointerup', this._onPointerUp, this);\n      qx.event.Registration.removeListener(document, 'pointermove', this._onPointerMove, this);\n      this.__pointerDownTime = null;\n      this.__pointerDownPoint = null;\n      if (this.__longPressTimer) {\n        this.__longPressTimer.stop();\n        this.__longPressTimer = null;\n      }\n    },\n\n    _onPointerMove: function(ev) {\n      let upElement = ev.getTarget();\n      const distance = Math.max(Math.abs(this.__pointerDownPoint.x - ev.getDocumentLeft()), Math.abs(this.__pointerDownPoint.y - ev.getDocumentTop()));\n      let abort = distance > 5;\n\n      if (!abort) {\n        while (upElement && upElement !== this.__pointerDownElement) {\n          upElement = upElement.parentNode;\n          if (upElement === this.getDomElement()) {\n            break;\n          }\n        }\n        abort = !upElement || upElement !== this.__pointerDownElement;\n      }\n      if (abort) {\n        this.__abort();\n      }\n    },\n\n    _onPointerUp: function(ev) {\n      if (this.__pointerDownTime === null) {\n        // ignore pointer ups when the pointerdown has not set a start time\n        return;\n      }\n      let upElement = ev.getTarget();\n      while (upElement && upElement !== this.__pointerDownElement) {\n        upElement = upElement.parentNode;\n        if (upElement === this.getDomElement()) {\n          break;\n        }\n      }\n      if (upElement && upElement === this.__pointerDownElement) {\n        this._skipNextEvent = 'tap';\n        // both events happened on the same element\n        ev.setCurrentTarget(upElement);\n        if (this._onLongTap &&\n          qx.Class.hasMixin(this.constructor, cv.ui.common.HandleLongpress) &&\n          this.getShortThreshold() > 0 &&\n          (Date.now() - this.__pointerDownTime) >= this.getShortThreshold()) {\n          // this is a longpress\n          this._onLongTap(ev);\n        } else {\n          this.action(ev);\n        }\n      }\n      this.__abort();\n    },\n\n    /**\n     * Add a listener to the widgets interaction element\n     * @param type {String} event type to listen to\n     * @param callback {Function} called when the event occurs\n     * @param context {Object} this context for the callback\n     * @return {var} the listener id\n     */\n    addElementListener: function(type, callback, context) {\n      if (this.isAnonymous()) {\n        return null;\n      }\n      const widget = this.getInteractionElement();\n      if (widget) {\n        widget.dataset['longtapable'] = type !== 'longtap';\n        return qx.event.Registration.addListener(widget, type, callback, context);\n      }\n      return null;\n    },\n\n    /**\n     * Remove a listener from the widgets interaction element\n     * @param type {String} event type\n     * @param callback {Function}\n     * @param context {Object} this context\n     * @return {Boolean} Whether the event was removed..\n     */\n    removeElementListener: function(type, callback, context) {\n      if (this.isAnonymous()) {\n        return false;\n      }\n      const widget = this.getInteractionElement();\n      if (widget) {\n        return qx.event.Registration.removeListener(widget, type, callback, context);\n      }\n      return false;\n    },\n\n    /**\n     * Generates the DOM string for this widget\n     *\n     * @return {String} The widgets DOM representation as string\n     */\n    getDomString : function() {\n      return '<div class=\"'+this.getClasses()+'\" ' + this.getStyle() + '>' + this.getLabel() +\n        this._getInnerDomString() +'</div>';\n    },\n\n    /**\n     * Return the inner DOM string for this widget\n     * @return {String} HTML code as string\n     */\n    _getInnerDomString: function() {\n      return '';\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    qx.event.Registration.removeListener(document, 'pointerup', this._onPointerUp, this);\n  }\n});\n","/* States.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * This class holds all states that are maintained by the {@link cv.ui.structure.pure.layout.ResizeHandler}.\n * Other classes can use the instance of this class {@link cv.ui.structure.pure.layout.ResizeHandler.states} to listen to changes\n * to the states.\n */\nqx.Class.define('cv.ui.structure.pure.layout.States', {\n  extend: qx.core.Object,\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    pageSizeInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changePageSizeInvalid'\n    },\n\n    backdropInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeBackdropInvalid'\n    },\n\n    navbarInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeNavbarInvalid'\n    },\n\n    rowspanInvalid: {\n      check: 'Boolean',\n      init: true,\n      event: 'changeRowspanInvalid'\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    resetAll: function () {\n      ['pageSizeInvalid', 'backdropInvalid', 'navbarInvalid', 'rowspanInvalid'].forEach(this.reset, this);\n    }\n  }\n});\n","/* ResizeHandler.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/*\n * Make sure everything looks right when the window gets resized. This is\n * necessary as the scroll effect requires a fixed element size\n */\n/**\n * Manager for all resizing issues. It ensures that the real resizing\n * calculations are only done as often as really necessary.\n *\n */\nqx.Class.define('cv.ui.structure.pure.layout.ResizeHandler', {\n  type: 'static',\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    states: new cv.ui.structure.pure.layout.States(),\n\n    $pageSize: null,\n    $navbarTop: null,\n    $navbarBottom: null,\n    width: 0,\n    height: 0,\n    __initial: true,\n\n    __backdropRetries: 0,\n\n    validationQueue: [],\n\n    reset: function() {\n      this.states.resetAll();\n      this.$pageSize = null;\n      this.$navbarTop = null;\n      this.$navbarBottom = null;\n      this.width = 0;\n      this.height = 0;\n    },\n\n    __request : null,\n\n    getPageSize: function (noCache) {\n      if (!this.$pageSize || noCache === true) {\n        this.$pageSize = document.querySelector('#pageSize');\n      }\n      return this.$pageSize;\n    },\n\n    getNavbarTop: function (noCache) {\n      if (!this.$navbarTop || noCache === true) {\n        this.$navbarTop = document.querySelector('#navbarTop');\n      }\n      return this.$navbarTop;\n    },\n\n    getNavbarBottom: function (noCache) {\n      if (!this.$navbarBottom || noCache === true) {\n        this.$navbarBottom = document.querySelector('#navbarBottom');\n      }\n      return this.$navbarBottom;\n    },\n\n    queueJob: function(callback) {\n      if (this.validationQueue.indexOf(callback) === -1) {\n        this.validationQueue.push(callback);\n      }\n      if (!this.__request) {\n        this.__request = qx.bom.AnimationFrame.request(this.flush, this);\n      }\n    },\n\n    flush: function() {\n      while (this.validationQueue.length) {\n        const job = this.validationQueue.shift();\n        job.apply(this);\n      }\n      this.__request = null;\n    },\n\n    makeAllSizesValid : function() {\n      if (this.states.isPageSizeInvalid()) {\n        this.makePagesizeValid();\n      } // must be first due to dependencies\n      if (this.states.isNavbarInvalid()) {\n        this.makeNavbarValid();\n      }\n      if (this.states.isRowspanInvalid()) {\n        this.makeRowspanValid();\n      }\n      if (this.states.isBackdropInvalid()) {\n        this.makeBackdropValid();\n      }\n    },\n\n    makeBackdropValid: function () {\n      this.queueJob(this.__makeBackdropValid);\n    },\n\n    __makeBackdropValid: function () {\n      qx.log.Logger.debug(this, 'makeBackdropValid');\n      const page = cv.Application.structureController.getCurrentPage();\n      if (!page) {\n        return;\n      }\n      // TODO use page object\n\n      if (page.getPageType() === '2d') {\n        const cssPosRegEx = /(\\d*)(.*)/;\n        const backdrop = page.getDomElement().querySelector('div > ' + page.getBackdropType());\n        try {\n          const backdropSVG = page.getBackdropType() === 'embed' ? backdrop.getSVGDocument() : null;\n          const backdropBBox = backdropSVG ? backdropSVG.children[0].getBBox() : {};\n          const backdropNWidth = backdrop.naturalWidth || backdropBBox.width || this.width;\n          const backdropNHeight = backdrop.naturalHeight || backdropBBox.height || this.height;\n          const backdropFixed = page.getSize() === 'fixed';\n          const backdropScale = backdropFixed ? 1 : Math.min(this.width / backdropNWidth, this.height / backdropNHeight);\n          const backdropWidth = backdropNWidth * backdropScale;\n          const backdropHeight = backdropNHeight * backdropScale;\n          const backdropPos = page.getBackdropAlign().split(' ');\n          const backdropLeftRaw = backdropPos[0].match(cssPosRegEx);\n          const backdropTopRaw = backdropPos[1].match(cssPosRegEx);\n          const backdropLeft = backdropLeftRaw[2] === '%' ? (((this.width - backdropWidth) * (+backdropLeftRaw[1]) / 100)) : +backdropLeftRaw[1];\n          const backdropTop = backdropTopRaw[2] === '%' ? (this.height > backdropHeight ? ((this.height - backdropHeight) * (+backdropTopRaw[1]) / 100) : 0) : +backdropTopRaw[1];\n          const uagent = navigator.userAgent.toLowerCase();\n\n          if (backdrop.complete === false ||\n            (page.getBackdropType() === 'embed' && backdropSVG === null) ||\n            (backdropBBox.width === 0 && backdropBBox.height === 0) ||\n            (this.width === 0 && this.height === 0)\n          ) {\n            // backdrop not available yet - reload\n            qx.event.Timer.once(this.invalidateBackdrop, this, 100);\n            return;\n          }\n\n          // backdrop available\n          if (\n            page.getSize() === 'scaled' && page.getBackdropType() === 'embed' &&\n            backdropSVG &&\n            backdropSVG.children[0].getAttribute('preserveAspectRatio') !== 'none'\n          ) {\n            backdropSVG.children[0].setAttribute('preserveAspectRatio', 'none');\n          }\n\n          // Note 1: this here is a work around for older browsers that can't use\n          // the object-fit property yet.\n          // Currently (26.05.16) only Safari is known to not support\n          // object-position although object-fit itself does work\n          // Note 2: The embed element always needs it\n          if (\n            (page.getBackdropType() === 'embed' ||\n            (uagent.indexOf('safari') !== -1 && uagent.indexOf('chrome') === -1)) &&\n            page.getSize() !== 'scaled'\n          ) {\n            backdrop.style.width = backdropWidth + 'px';\n            backdrop.style.height = backdropHeight + 'px';\n            backdrop.style.left = backdropLeft + 'px';\n            backdrop.style.top = backdropTop + 'px';\n          }\n\n          if (backdropFixed && !backdropSVG) {\n            if (this.height < backdropHeight) {\n              backdrop.style.height = backdropHeight + 'px';\n            } else {\n              backdrop.style.height = '100%';\n            }\n          }\n\n          page.getDomElement().querySelectorAll('.widget_container').forEach(function (widgetContainer) {\n            const widget = cv.ui.structure.WidgetFactory.getInstanceById(widgetContainer.id);\n            let value;\n            const layout = widget.getResponsiveLayout();\n            let scale = backdropScale;\n            if (layout) {\n              // this assumes that a .widget_container has only one child and this\n              // is the .widget itself\n              const style = widgetContainer.children[0].style;\n              if (layout.scale === 'false') {\n                scale = 1.0;\n              }\n\n              if ('x' in layout) {\n                value = layout.x.match(cssPosRegEx);\n                if (value[2] === 'px') {\n                  style.left = (backdropLeft + value[1] * scale) + 'px';\n                } else {\n                  style.left = layout.x;\n                }\n              }\n\n              if ('y' in layout) {\n                value = layout.y.match(cssPosRegEx);\n                if (value[2] === 'px') {\n                  style.top = (backdropTop + value[1] * scale) + 'px';\n                } else {\n                  style.top = layout.y;\n                }\n              }\n\n              if ('width' in layout) {\n                style.width = layout.width;\n              }\n\n              if ('height' in layout) {\n                style.height = layout.height;\n              }\n            }\n          }, this);\n          this.__backdropRetries = 0;\n        } catch (e) {\n          if (e.name === 'NotSupportedError') {\n            if (this.__backdropRetries <= 5) {\n              qx.bom.AnimationFrame.request(this.__makeBackdropValid, this);\n              this.__backdropRetries++;\n            }\n          }\n          qx.log.Logger.error(this, e);\n        }\n      }\n\n      this.states.setBackdropInvalid(false);\n    },\n\n    makeNavbarValid: function () {\n      this.queueJob(this.__makeNavbarValid);\n    },\n\n    __makeNavbarValid: function() {\n      qx.log.Logger.debug(this, 'makeNavbarValid');\n      if (cv.ui.structure.pure.layout.Manager.adjustColumns()) {\n        // the amount of columns has changed -> recalculate the widgets widths\n        cv.ui.structure.pure.layout.Manager.applyColumnWidths();\n      }\n      this.states.setNavbarInvalid(false);\n    },\n\n    makePagesizeValid: function () {\n      if (this.__initial === true) {\n        // do not queue -> call now\n        this.__initial = false;\n        this.__makePagesizeValid();\n      } else {\n        this.queueJob(this.__makePagesizeValid);\n      }\n    },\n\n    __makePagesizeValid: function() {\n      if (!cv.Config.currentPageId) {\n        return;\n      }\n      qx.log.Logger.debug(this, 'makePagesizeValid');\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.currentPageId);\n      if (page && !page.isInitialized()) {\n        page.addListenerOnce('changeInitialized', this.__makePagesizeValid, this);\n        return;\n      }\n      this.width = cv.ui.structure.pure.layout.Manager.getAvailableWidth();\n      this.height = cv.ui.structure.pure.layout.Manager.getAvailableHeight();\n      const pageSizeElement = this.getPageSize();\n\n      if (pageSizeElement) {\n        pageSizeElement.innerHTML = '#main,.page{width:' + this.width + 'px;height:' + this.height + 'px;}';\n      }\n\n      this.states.setPageSizeInvalid(false);\n    },\n\n    makeRowspanValid: function () {\n      this.queueJob(this.__makeRowspanValid);\n    },\n\n    __makeRowspanValid: function () {\n      qx.log.Logger.debug(this, 'makeRowspanValid');\n      let elem = document.querySelector('#calcrowspan');\n      if (!elem) {\n        elem = qx.dom.Element.create('div', {\n          'class': 'clearfix',\n          'id': 'calcrowspan',\n          'html': '<div id=\"containerDiv\" class=\"widget_container\"><div class=\"widget clearfix text\" id=\"innerDiv\"></div>'\n        });\n        document.body.appendChild(elem);\n      }\n      // use the internal div for height as in mobile view the elem uses the full screen height\n      this.__updateRowHeight(elem.querySelector('#containerDiv'));\n    },\n\n    __updateRowHeight: function(elem) {\n      const rect = elem.getBoundingClientRect();\n      const height = Math.round(rect.bottom - rect.top);\n      if (height === 0) {\n        // not ready try again\n        const self = this;\n        window.requestAnimationFrame(() => {\n          self.__updateRowHeight(elem);\n        });\n        return;\n      }\n      let styles = '';\n\n      for (let rowspan in cv.Config.configSettings.usedRowspans) {\n        styles += '.rowspan.rowspan' + rowspan + ' { height: ' + Math.round(rowspan * height) + 'px;}\\n';\n      }\n      const calcrowspan = document.querySelector('#calcrowspan');\n      if (calcrowspan) {\n        calcrowspan.parentNode.removeChild(calcrowspan);\n      }\n\n      // set css style\n      const rowSpanStyle = document.querySelector('#rowspanStyle');\n      if (rowSpanStyle) {\n        rowSpanStyle.innerHTML = styles;\n      }\n      this.states.setRowspanInvalid(false);\n    },\n\n    invalidateBackdrop: function () {\n      qx.log.Logger.debug(this, 'backdrop');\n      this.states.setBackdropInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateNavbar: function () {\n      qx.log.Logger.debug(this, 'invalidateNavbar');\n      this.states.setNavbarInvalid(true);\n      this.states.setPageSizeInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateRowspan: function () {\n      this.states.setRowspanInvalid(true);\n      this.makeAllSizesValid();\n    },\n    invalidateScreensize: function () {\n      qx.log.Logger.debug(this, 'invalidateScreensize');\n      this.states.set({\n        pageSizeInvalid: true,\n        rowspanInvalid: true,\n        navbarInvalid: true,\n        backdropInvalid: true\n      });\n      this.makeAllSizesValid();\n    }\n  },\n\n  defer: function(statics) {\n    qx.event.Registration.addListener(window, 'resize', statics.invalidateScreensize, statics);\n  }\n});\n","/* Audio.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The audio widget embeds an audio file, which can be automatically played by incoming data\n *\n * @widgetexample <settings>\n *   <screenshot name=\"audio_example\">\n *    <caption>Default example for defining an audio widget in the configuration</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n * </settings>\n * <audio id=\"audio_widget\" src=\"path/to/audio_file.mp3\">\n *   <layout colspan=\"4\" />\n *   <label>Audio</label>\n *   <address transform=\"DPT:1.001\" mode=\"read\">0/0/0</address>\n * </audio>\n *\n *\n * @author Markus Damman\n * @since 0.8.4 (2014)\n */\n  qx.Class.define('cv.ui.structure.pure.Audio', {\n    extend: cv.ui.structure.pure.AbstractWidget,\n\n    include: cv.ui.common.Update,\n\n    /*\n    ******************************************************\n      PROPERTIES\n    ******************************************************\n    */\n    properties: {\n      src: { check: 'String', nullable: true },\n      id: { check: 'String', nullable: true },\n      width: { check: 'String', nullable: true },\n      height: { check: 'String', nullable: true },\n      autoplay: { check: 'Boolean', init: false },\n      loop: { check: 'Boolean', init: false },\n      thresholdValue: { check: 'Number', init: 1 }\n    },\n\n    /*\n    ******************************************************\n      MEMBERS\n    ******************************************************\n    */\n    members: {\n\n      // overridden\n      _getInnerDomString: function () {\n        // create the main structure\n        // create the actor\n        let style = '';\n        if (this.getWidth()) {\n style += 'width:' + this.getWidth() + ';'; \n}\n        if (this.getHeight()) {\n style += 'height:' + this.getHeight() + ';'; \n}\n        if (style !== '') {\n style = 'style=\"' + style + '\"'; \n}\n        const autoplay = (this.isAutoplay()) ? ' autoplay ' : '';\n        const loop = (this.isLoop()) ? ' loop ' : '';\n        return '<div class=\"actor\"><audio id=\"' + this.getId() + '\" ' + autoplay + loop + style + ' controls> <source src=\"' + this.getSrc()+ '\" > </audio> </div>';\n      },\n\n      // overridden\n      getActor: function() {\n        return this.getDomElement().querySelector('.actor audio');\n      },\n\n      /**\n       * Handles updates of incoming data for this widget\n       *\n       * @param address {String} Source address of the incoming data\n       * @param value {String} Incoming data\n       */\n      _update: function (address, value) {\n        const on = this.applyMapping(this.getThresholdValue());\n        if (value >= on) {\n          const audioWidget = this.getActor();\n          if (audioWidget.paused === true) {\n            audioWidget.play();\n          }\n        }\n      }\n    },\n\n    defer: function(statics) {\n      cv.ui.structure.WidgetFactory.registerClass('audio', statics);\n    }\n  });\n","/* Break.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A break tag is used to start in new line for a grouped and thereby tidy display of\n * elements on one page.\n *\n * <pre class=\"sunlight-highlight-xml\">\n * &lt;break/&gt;\n * </pre>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Break', {\n  extend: cv.ui.structure.pure.AbstractBasicWidget,\n\n  /*\n   ******************************************************\n     MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    getDomString: function () {\n      return '<br/>';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('break', statics);\n  }\n});\n","/* ColorChooser.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The ColorChooser let you select and display a color, e.g. for lighting effects.\n * It supports a RGB light source with red, green and blue light components as well\n * as a RGBW light source that also has a white channel.\n *\n * @widgetexample\n * <settings>\n *      <screenshot name=\"colorchooser_example\">\n *          <caption>ColorChooser, simple example</caption>\n *      </screenshot>\n * </settings>\n * <colorchooser>\n *   <layout colspan=\"6\" rowspan=\"4\"/>\n *   <label>RGB kitchen</label>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"r\">1/2/59</address>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"g\">1/2/60</address>\n *   <address transform=\"DPT:5.001\" mode=\"readwrite\" variant=\"b\">1/2/61</address>\n * </colorchooser>\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.ColorChooser', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Calculate the saturation and value from (x,y) relative widget coordinates\n     * based on a centered SV-triangle.\n     * @param x position for the calculation\n     * @param y position for the calculation\n     * @param hue value for the orientation of the triangle\n     * @param radius (outside) radius of the triangle\n     */\n    coord2sv: function(x, y, hue, radius) {\n      const hue2angle = 2 * Math.PI;\n      // coordinates of the triangle corners\n      const Sx = 0.5 - Math.sin(hue2angle * (-hue)) * radius; // 100% saturation\n      const Sy = 0.5 - Math.cos(hue2angle * (-hue)) * radius;\n      const Wx = 0.5 - Math.sin(hue2angle * (2/3-hue)) * radius; // 100% white\n      const Wy = 0.5 - Math.cos(hue2angle * (2/3-hue)) * radius;\n      const Bx = 0.5 - Math.sin(hue2angle * (1/3-hue)) * radius; // 100% black\n      const By = 0.5 - Math.cos(hue2angle * (1/3-hue)) * radius;\n      // differences to determine (u,v) coordinates of (x,y)\n      const WBx = Wx - Bx;\n      const WBy = Wy - By;\n      const SBx = Sx - Bx;\n      const SBy = Sy - By;\n      const CBx = x - Bx;\n      const CBy = y - By;\n      const uv = cv.util.Color.solve2d(WBx, WBy, SBx, SBy, CBx, CBy);\n      const u = Math.min(Math.max(0, uv[0]), 1);\n      const v = Math.min(Math.max(0, uv[1]), 1);\n      // convert (u,v) to S and V\n      const value = u + v;\n      const saturation = Math.abs(value) < 1e-3 ? 0 : v/value;\n      return [saturation, value];\n    }\n  },\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.base(arguments, props);\n\n    const base = this.getBaseColors();\n    this.__color = new cv.util.Color(base.r, base.g, base.b, base.w);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n    this.__animator.setAnimationSpeed(100, 0.5);\n    this.__pageSizeListener = cv.ui.structure.pure.layout.ResizeHandler.states.addListener('changePageSizeInvalid', () => {\n      this.__invalidateScreensize();\n    });\n    this.__components = new Set(Object.entries(this.getAddress()).map(v => v[1].variantInfo));\n    this.__lastBusValue = {};\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    cv.ui.structure.pure.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    controls: {\n      check: 'String'\n    },\n    baseColors: {\n      check: 'Object'\n    },\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __mode: '',\n    __colorOld: undefined,      // the color where the animation started\n    __colorCurrent: undefined,  // the current color of the running animation\n    __color: undefined,         // the current color of the widget, also the target for the animation\n    __lastBusValue: undefined,  // initialize with empty object in the constructor to prevent object being shared between instances\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined,  // cache for DOM element\n    __actors: undefined,\n    __pageSizeListener: undefined,\n    __components: undefined, // set of all color components required to send\n    __inDrag: false,       // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n    __Tmin: 2000,   // minimal color temperature to show in slider\n    __Tmax: 12500,  // maximal color temperature to show in slider\n\n    // overridden\n    _getInnerDomString: function () {\n      const placeholder = this.getFormat() === '' ? '' : '-';\n      const self = this;\n      let retval = '';\n      const historicWidth = this.getLayout().colspan === undefined ? ' style=\"width:195px\"' : '';\n      let controls = this.getControls().split(';');\n      if (controls[0] === '') {\n        controls[0] = 'box';\n      }\n      controls.forEach(function(control) {\n        switch (control) {\n          case 'box':\n          case 'LCh-box': {\n            let hue_type = control === 'box' ? 'hsv_hue' : 'lch_hue';\n            retval += '<div class=\"actor cc_box\"><div class=\"hue ' + hue_type;\n            retval += '\"></div><div class=\"handle_hue\"></div><div class=\"sv_box\"><div class=\"inner\"></div><div class=\"handle\"></div></div></div>';\n            break;\n          }\n\n          case 'triangle':\n          case 'LCh-triangle': {\n            let hue_type = control === 'triangle' ? 'hsv_hue' : 'lch_hue';\n            retval += '<div class=\"actor cc_wheel\"><div class=\"hue ' + hue_type;\n            retval += '\"></div><div class=\"sv_triangle\"><div class=\"inner\"></div><div class=\"handle_hue\"></div><div class=\"handle\"></div></div></div>';\n            break;\n          }\n\n          case 'RGB-r':\n          case 'RGB-g':\n          case 'RGB-b':\n          case 'RGBW-r':\n          case 'RGBW-g':\n          case 'RGBW-b':\n          case 'RGBW-w':\n          case 'h':\n          case 's':\n          case 'v':\n          case 'LCh-L':\n          case 'LCh-C':\n          case 'LCh-h':\n          case 'Y':\n            retval += '<div class=\"actor cc_' + control + ` ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n              <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">`+placeholder+`</button>\n              <div class=\"ui-slider-range\" style=\"margin-left: 0px; clip-path: inset(0 100% 0 0);\"></div>\n            </div>`;\n            break;\n\n          default: {\n            let parts = control.split(':');\n            if (parts[0] === 'T') {\n              const temperatures = (parts[1] || '-').split('-');\n              self.__Tmin = Math.max(1667, Math.min(temperatures[0] || 2500, 25000));\n              self.__Tmax = Math.max(1667, Math.min(temperatures[1] || 9000, 25000));\n              const rgbTmin = cv.util.Color.xy2sRGB(cv.util.Color.temperature2xy(self.__Tmin));\n              const rgbTmax = cv.util.Color.xy2sRGB(cv.util.Color.temperature2xy(self.__Tmax));\n              const disp = c => [Math.round(255 * c.r), Math.round(255 * c.g), Math.round(255 * c.b)].join(',');\n              const colors = 'rgb(' + disp(rgbTmin) + '), rgb(' + disp(rgbTmax) + ')';\n\n              retval += `<div class=\"actor cc_T ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n                <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">` + placeholder + `</button>\n                <div class=\"ui-slider-range\" style=\"margin-left: 0px; clip-path: inset(0 100% 0 0);background: linear-gradient(90deg, ` + colors + `);\"></div>\n              </div>`;\n            }\n          }\n        }\n      });\n      return '<div class=\"actors\"'+historicWidth+'>' + retval + '</div>';\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, 250, {trailing: true}, this);\n\n      this.getDomElement().querySelectorAll('.actor').forEach(actor => actor.addEventListener('pointerdown', this));\n    },\n\n    _update: function (address, data) {\n      const addressObj = this.getAddress()[address];\n      const showInvalidDataErrorMessage = function () {\n        const message = qx.locale.Manager.tr(\n          'Updating ColorChooser with invalid data<br/>Address: \"%1\"<br/>transform: \"%2\"<br/>selector: \"%3\"<br/>variant: \"%4\"<br/>data: \"%5\"',\n          address,\n          addressObj.transform,\n          addressObj.selector,\n          addressObj.variant,\n          data\n        );\n        if (cv.Config.testMode === true) {\n          // eslint-disable-next-line no-console\n          console.error(message.toString());\n        }\n        cv.core.notifications.Router.dispatchMessage('cv.config.error', {message});\n      };\n\n      const transform = addressObj.transform;\n      let variant = addressObj.variantInfo;\n\n      let variantType;\n      let value = cv.Transform.decode(addressObj, data);\n      let base;\n\n      switch (variant) {\n        case 'h':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value /= 360;\n          variantType = 'hsv-single';\n          break;\n\n        case 's':\n        case 'v':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value /= 100;\n          variantType = 'hsv-single';\n          break;\n\n        case 'hsv':\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = { h: value.get('h')/360, s: value.get('s')/100, v: value.get('v')/100 };\n          variantType = 'hsv';\n          break;\n\n        case 'RGB-r':\n        case 'RGB-g':\n        case 'RGB-b':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          base = this.getBaseColors()[variant.split('-')[1]];\n          value = cv.util.Color.invCurve(value, base.curve, base.scale);\n          variantType = 'rgb-single';\n          break;\n\n        case 'rgb':\n          base = this.getBaseColors();\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            r: cv.util.Color.invCurve(value.get('r'), base.r.curve, base.r.scale),\n            g: cv.util.Color.invCurve(value.get('g'), base.g.curve, base.g.scale),\n            b: cv.util.Color.invCurve(value.get('b'), base.b.curve, base.b.scale)\n          };\n          variantType = 'rgb';\n          break;\n\n        case 'RGBW-r':\n        case 'RGBW-g':\n        case 'RGBW-b':\n        case 'RGBW-w':\n          if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          base = this.getBaseColors()[variant.split('-')[1]];\n          value = cv.util.Color.invCurve(value, base.curve, base.scale);\n          variantType = 'rgbw-single';\n          break;\n\n        case 'rgbw':\n          base = this.getBaseColors();\n          if (value.get === undefined) {\n            showInvalidDataErrorMessage();\n            return;\n          }\n          value = {\n            r: cv.util.Color.invCurve(value.get('r'), base.r.curve, base.r.scale),\n            g: cv.util.Color.invCurve(value.get('g'), base.g.curve, base.g.scale),\n            b: cv.util.Color.invCurve(value.get('b'), base.b.curve, base.b.scale),\n            w: cv.util.Color.invCurve(value.get('w'), base.w.curve, base.w.scale)\n          };\n          variantType = 'rgbw';\n          break;\n\n        case 'x':\n        case 'y':\n          variantType = 'xyY';\n          break;\n\n        case 'Y':\n          if (value instanceof Map && value.get('YValid') !== false) {\n            value = value.get('Y');\n          } else if (!Number.isFinite(value)) {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n\n        case 'xy':\n          if (value instanceof Map && value.get('cValid') !== false) {\n            value = { x: value.get('x'), y: value.get('y') };\n          } else if (!(typeof value === 'object' && 'x' in value && 'y' in value)) {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n\n        case 'xyY':\n          if (value instanceof Map) {\n            variant = (value.get('cValid') !== false ? 'xy' : '') + (value.get('YValid') !== false ? 'Y' : '');\n            value = {\n              x: value.get('x'),\n              y: value.get('y'),\n              Y: value.get('Y')\n            };\n            if (variant === '') {\n              return; // no valid data in the value\n            }\n          } else {\n            showInvalidDataErrorMessage();\n            return; // nothing that can be done with this data\n          }\n          variantType = 'xyY';\n          break;\n      }\n\n      if (this.__inDrag || (this.__lastBusValue[variantType] && this.__lastBusValue[variantType][variant] && this.__lastBusValue[variantType][variant][transform] === data)) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      const notKnown = this.__lastBusValue[variantType] === undefined;\n      if (notKnown) {\n        this.__lastBusValue[variantType] = {};\n      }\n\n      // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue = {[variantType]: this.__lastBusValue[variantType]};\n      this.__lastBusValue[variantType][variant] = {[transform]: data};\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, variant, !this.isVisible() || notKnown);\n    },\n\n    /**\n     * The the internal slider state and its handle and displayed value\n     * @param {number} value The new value\n     * @param {string} variant The color component to change\n     * @param {boolean} instant Animate or instant change\n     * @private\n     */\n    __setSliderTo: function(value, variant, instant) {\n      this.__colorOld = this.__colorCurrent === undefined ? this.__color.copy() : this.__colorCurrent.copy();\n      this.__color.changeComponent(variant, value);\n      instant = instant || this.__color.delta(this.__colorOld) < 0.5;\n      if (!instant) {\n        this.__animator.setTo(this.__colorOld, true, false);\n      }\n      this.__animator.setTo(this.__color, instant);\n    },\n\n    __updateHandlePosition: function (newColor) {\n      // check cache\n      if (this.__actors === undefined) {\n        let actors = {};\n        let actorStyle;\n        this.getDomElement().querySelectorAll('.actor').forEach(function (actor) {\n          let type = actor.className.replace(/.*cc_([^ ]*).*/, '$1');\n          switch (type) {\n            case 'box':\n            case 'wheel': {\n              actorStyle = window.getComputedStyle(actor);\n              let sv_element = type === 'box' ? actor.querySelector('.sv_box') : actor.querySelector('.sv_triangle');\n              let inner = sv_element.querySelector('.inner');\n              let handle = actor.querySelector('.handle');\n              let handle_hue = actor.querySelector('.handle_hue');\n              let hue = actor.querySelector('.hue');\n              actors[type] = {\n                isLCh: hue.classList.contains('lch_hue'),\n                sv_element: sv_element,\n                inner: inner,\n                handle: handle,\n                handle_hue: handle_hue,\n                handle_hueTop: parseFloat(window.getComputedStyle(handle_hue).getPropertyValue('top')),\n                handle_hueWidth: parseFloat(window.getComputedStyle(handle_hue).getPropertyValue('width')),\n                width: parseFloat(actorStyle.getPropertyValue('width')),\n                height: parseFloat(actorStyle.getPropertyValue('padding-top')),\n                innerRadius: parseFloat(window.getComputedStyle(sv_element).getPropertyValue('width')),\n                outerRadius: parseFloat(window.getComputedStyle(hue).getPropertyValue('width'))\n              };\n              break;\n            }\n\n            default: {\n              actorStyle = window.getComputedStyle(actor);\n              let button = actor.querySelector('button');\n              let range = actor.querySelector('.ui-slider-range');\n              actors[type] = {\n                button: button,\n                range: range,\n                width: parseFloat(actorStyle.getPropertyValue('width')),\n                buttonWidth: parseFloat(window.getComputedStyle(button).getPropertyValue('width'))\n              };\n              range.style.marginLeft = '-' + actorStyle.getPropertyValue('padding-left');\n              range.style.borderRadius = actorStyle.getPropertyValue('border-radius');\n            }\n          }\n        });\n        this.__actors = actors;\n      }\n\n      this.__colorCurrent = newColor;\n      // move handles\n      for (let type in this.__actors) {\n        let actor = this.__actors[type];\n        if (type === 'wheel') {\n          const Bt = 75;\n          const St = 0;\n          const Wt = 75;\n          const Bl = 50-85/2;\n          const Sl = 50;\n          const Wl = 50+85/2;\n          let angle;\n          if (actor.isLCh) {\n            let LCh = this.__colorCurrent.getComponent('LCh');\n            let r = cv.util.Color.curve(LCh.h, [246, 255,  46,   0, 246], 1);\n            let g = cv.util.Color.curve(LCh.h, [ 27, 224, 255, 136,  27], 1);\n            let b = cv.util.Color.curve(LCh.h, [136,  32, 224, 245, 136], 1);\n            angle = (LCh.h*360)+'deg';\n            const WSt = LCh.C*St + (1-LCh.C)*Wt;\n            const WSl = LCh.C*Sl + (1-LCh.C)*Wl;\n            actor.handle.style.top  = (LCh.L*WSt + (1-LCh.L)*Bt) + '%';\n            actor.handle.style.left = (LCh.L*WSl + (1-LCh.L)*Bl) + '%';\n            actor.inner.style.background = 'linear-gradient(210deg, transparent 45%, black 90%),linear-gradient(150deg, transparent 45%, white 90%),rgb('+[r, g, b].join(',')+')';\n          } else {\n            let hsv = this.__colorCurrent.getComponent('hsv');\n            angle = (hsv.h*360)+'deg';\n            const WSt = hsv.s*St + (1-hsv.s)*Wt;\n            const WSl = hsv.s*Sl + (1-hsv.s)*Wl;\n            actor.handle.style.top  = (hsv.v*WSt + (1-hsv.v)*Bt) + '%';\n            actor.handle.style.left = (hsv.v*WSl + (1-hsv.v)*Bl) + '%';\n            actor.inner.style.background = 'linear-gradient(210deg, transparent 45%, black 90%),linear-gradient(150deg, transparent 45%, white 90%),hsl('+angle+' 100% 50%)';\n          }\n          actor.sv_element.style.transform = 'rotate('+angle+')';\n        } else if (type === 'box') {\n          let angle;\n          if (actor.isLCh) {\n            let LCh = this.__colorCurrent.getComponent('LCh');\n            let r = cv.util.Color.curve(LCh.h, [246, 255,  46,   0, 246], 1);\n            let g = cv.util.Color.curve(LCh.h, [ 27, 224, 255, 136,  27], 1);\n            let b = cv.util.Color.curve(LCh.h, [136,  32, 224, 245, 136], 1);\n            angle = (LCh.h*360)+'deg';\n            actor.handle.style.top = (1-LCh.L) * 100 + '%';\n            actor.handle.style.left = (1-LCh.C) * 100 + '%';\n            actor.inner.style.background = 'linear-gradient(0deg, black 0%, transparent 50%, white 100%), linear-gradient(90deg,rgb('+[r, g, b].join(',')+'), #808080 100%)';\n          } else {\n            let hsv = this.__colorCurrent.getComponent('hsv');\n            angle = (hsv.h*360)+'deg';\n            actor.handle.style.top = (1-hsv.v) * 100 + '%';\n            actor.handle.style.left = (1-hsv.s) * 100 + '%';\n            actor.inner.style.background = 'linear-gradient(0deg, black 0%, transparent 50%, white 100%), linear-gradient(90deg,hsl('+angle+' 100% 50%), #808080 100%)';\n          }\n          actor.handle_hue.style.transform = 'rotate('+angle+')';\n          actor.handle_hue.style.transformOrigin = actor.handle_hueWidth/2 + 'px '+(actor.width/2 - actor.handle_hueTop)+'px'; //calc(195px / 2 - 3px)';\n        } else {\n          let ratioComponent = this.__colorCurrent.getComponent(type);\n          if (type === 'T') {\n            ratioComponent = (ratioComponent - this.__Tmin)/(this.__Tmax - this.__Tmin);\n          }\n          let length = Math.max(0, Math.min(ratioComponent, 1)) * actor.width;\n          actor.button.style.transform = 'translate3d(' + (length-actor.buttonWidth/2) + 'px, 0px, 0px)';\n          actor.range.style.clipPath = 'inset(0 ' + (1-ratioComponent)*100 + '% 0 0)';\n        }\n      }\n    },\n\n    __invalidateScreensize: function () {\n      this.__actors = undefined; // invalidate cached values\n      this.__animator.setTo(this.__color, true /* tmp */);\n    },\n\n    handleEvent: function (event) {\n      let relCoordX = 0;\n      let relCoordY = 0;\n      let actor;\n\n      switch (event.type) {\n        case 'pointerdown': {\n          let actorType = event.currentTarget.className.replace(/.*cc_([^ ]*).*/, '$1');\n          actor = this.__actors[actorType];\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMinX = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          this.__coordMinY = boundingRect.top;\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          if (actorType === 'wheel') {\n            let radius = actor !== undefined ? (0.5 * actor.innerRadius / actor.outerRadius) : 1;\n            let sv = cv.ui.structure.pure.ColorChooser.coord2sv(relCoordX, relCoordY, this.__color.getComponent(actor.isLCh ? 'LCh' : 'hsv').h, radius);\n            let distSqrd = (relCoordX - 0.5)**2 + (relCoordY - 0.5)**2;\n            if (distSqrd < (0.5*1.07)**2) { // ignore clicks outside of the wheel, with 7% safety margin on the outside\n              const clearlyOnWheel = (radius * 1.10)**2 < distSqrd; // with 10% safety margin to the interior triangle\n              const closeToInerior = radius**2 < distSqrd && !clearlyOnWheel;\n              const closeToTriangleCorners = (sv[1] < 0.01) || (sv[0] < 0.01 && sv[1] > 0.99) || (sv[0] > 0.99 && sv[1] > 0.99);\n              if (clearlyOnWheel || (closeToInerior && !closeToTriangleCorners)) {\n                this.__mode = 'wheel_h';\n                this.__color.changeComponent(actor.isLCh ? 'LCh-h' : 'h', 0.5 + Math.atan2(-relCoordX + 0.5, relCoordY - 0.5) / 2 / Math.PI);\n                this.__inDrag = true;\n              } else {\n                this.__mode = 'wheel_sv';\n                this.__color.changeComponent(actor.isLCh ? 'LCh-CL' : 'sv', sv);\n                this.__inDrag = true;\n              }\n            }\n          } else if (actorType === 'box') {\n            let boxSize = actor !== undefined ? (0.5 * actor.innerRadius / actor.outerRadius) : 1;\n            let x = relCoordX - 0.5;\n            let y = relCoordY - 0.5;\n            let sv = [-x / boxSize / 2 + 0.5, -y / boxSize / 2 + 0.5];\n            if ((Math.abs(x) < boxSize) && (Math.abs(y) < boxSize)) {\n              this.__mode = 'box_sv';\n              this.__color.changeComponent(actor.isLCh ? 'LCh-CL' : 'sv', sv);\n              this.__inDrag = true;\n            } else {\n              this.__mode = 'box_h';\n              this.__color.changeComponent(actor.isLCh ? 'LCh-h' : 'h', 0.5 + Math.atan2(-x, y) / 2 / Math.PI);\n              this.__inDrag = true;\n            }\n          } else {\n            let ratio = relCoordX;\n            if (actorType === 'T') {\n              ratio = this.__Tmin + ratio * (this.__Tmax - this.__Tmin);\n            }\n            this.__mode = actorType;\n            this.__color.changeComponent(actorType, ratio);\n            this.__inDrag = true;\n          }\n          if (this.__inDrag) {\n            document.addEventListener('pointermove', this);\n            document.addEventListener('pointerup', this);\n          } else {\n            this.__mode = undefined;\n          }\n          break;\n        }\n\n        case 'pointermove': {\n          if (!this.__inDrag) {\n            return;\n          }\n          if (event.buttons === 0) { // move with no button could only happen during debug sessions\n            this.__inDrag = false;\n            document.removeEventListener('pointermove', this);\n            document.removeEventListener('pointerup', this);\n          }\n          let type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n          actor = this.__actors[type];\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          break;\n        }\n\n        case 'pointerup': {\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          const type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n          actor = this.__actors[type];\n          relCoordX = (event.clientX - this.__coordMinX) / actor.width;\n          relCoordY = (event.clientY - this.__coordMinY) / actor.height;\n          break;\n        }\n      }\n\n      if (event.type !== 'pointerdown') {\n        let type = this.__mode.split('_')[0]; // clamp \"wheel_*\" to \"wheel\"\n        let actor = this.__actors[type];\n        switch (this.__mode) {\n          case 'wheel_sv': {\n            const radius = actor !== undefined ? (0.5 * actor.innerRadius / actor.outerRadius) : 1;\n            const sv = cv.ui.structure.pure.ColorChooser.coord2sv(relCoordX, relCoordY, this.__color.getComponent(actor.isLCh ? 'LCh' : 'hsv').h, radius);\n            this.__color.changeComponent(actor.isLCh ? 'LCh-CL' : 'sv', [Math.min(Math.max(sv[0], 0), 1), Math.min(Math.max(sv[1], 0), 1)]);\n            break;\n          }\n          case 'box_sv': {\n            const boxSize = actor !== undefined ? (0.5 * actor.innerRadius / actor.outerRadius) : 1;\n            const x = relCoordX - 0.5;\n            const y = relCoordY - 0.5;\n            const sv = [-x / boxSize / 2 + 0.5, -y / boxSize / 2 + 0.5];\n            this.__color.changeComponent(actor.isLCh ? 'LCh-CL' : 'sv', [Math.min(Math.max(sv[0], 0), 1), Math.min(Math.max(sv[1], 0), 1)]);\n            break;\n          }\n          case 'wheel_h':\n          case 'box_h':\n            this.__color.changeComponent(actor.isLCh?'LCh-h':'h', 0.5 + Math.atan2(-relCoordX + 0.5, relCoordY - 0.5) / 2 / Math.PI);\n            break;\n          case 'T':\n            this.__color.changeComponent('T', this.__Tmin + Math.max(0, Math.min(relCoordX, 1)) * (this.__Tmax - this.__Tmin));\n            break;\n          default:\n            this.__color.changeComponent(this.__mode, relCoordX);\n        }\n      }\n      this.__animator.setTo(this.__color, true);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call();\n      }\n    },\n\n    __onChangeValue: function() {\n      this.__components.forEach(type => {\n        let value = this.__color.getComponent(['xyY', 'x', 'y'].includes(type) ? 'xy' : type);\n        let typeCategory;\n        let base;\n\n        switch (type) {\n          case 'h':\n            value *= 360;\n            typeCategory = 'hsv-single';\n            break;\n\n          case 's':\n          case 'v':\n            value *= 100;\n            typeCategory = 'hsv-single';\n            break;\n\n          case 'hsv':\n            value = new Map([['h', value.h*360], ['s', value.s*100], ['v', value.v*100]]);\n            typeCategory = 'hsv';\n            break;\n\n          case 'RGB-r':\n          case 'RGB-g':\n          case 'RGB-b':\n            base = this.getBaseColors()[type.split('-')[1]];\n            value = cv.util.Color.curve(value, base.curve, base.scale);\n            typeCategory = 'rgb-single';\n            break;\n\n          case 'RGBW-r':\n          case 'RGBW-g':\n          case 'RGBW-b':\n          case 'RGBW-w':\n            base = this.getBaseColors()[type.split('-')[1]];\n            value = cv.util.Color.curve(value, base.curve, base.scale);\n            typeCategory = 'rgbw-single';\n            break;\n\n          case 'rgb':\n            base = this.getBaseColors();\n            value = new Map([\n              ['r', cv.util.Color.curve(value.r, base.r.curve, base.r.scale)],\n              ['g', cv.util.Color.curve(value.g, base.g.curve, base.g.scale)],\n              ['b', cv.util.Color.curve(value.b, base.b.curve, base.b.scale)]\n            ]);\n            typeCategory = 'rgb';\n            break;\n\n          case 'rgbw':\n            base = this.getBaseColors();\n            value = new Map([\n              ['r', cv.util.Color.curve(value.r, base.r.curve, base.r.scale)],\n              ['g', cv.util.Color.curve(value.g, base.g.curve, base.g.scale)],\n              ['b', cv.util.Color.curve(value.b, base.b.curve, base.b.scale)],\n              ['w', cv.util.Color.curve(value.w, base.w.curve, base.w.scale)]\n            ]);\n            typeCategory = 'rgbw';\n            break;\n\n          case 'xy':\n            value = new Map([\n              ['x', value.x],\n              ['y', value.y]\n            ]);\n            typeCategory = 'xyY';\n            break;\n\n          case 'xyY': {\n            let Y = this.__color.getComponent('Y');\n            value = new Map([\n              ['x', value.x],\n              ['y', value.y],\n              ['Y', Y]\n            ]);\n            typeCategory = 'xyY';\n            break;\n          }\n\n          case 'Y':\n            typeCategory = 'xyY';\n            break;\n\n          case 'x':\n          case 'y':\n            value = value[type];\n            typeCategory = 'xyY';\n            break;\n        }\n        if (this.__lastBusValue[typeCategory] === undefined) {\n          this.__lastBusValue[typeCategory] = {};\n        }\n        this.__lastBusValue[typeCategory][type] = this.sendToBackend(value, t => t.variantInfo===type, this.__lastBusValue[typeCategory][type]);\n      });\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('colorchooser', statics);\n  }\n});\n","/* Controller.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\nqx.Class.define('cv.ui.structure.pure.Controller', {\n  extend: qx.core.Object,\n  type: 'singleton',\n  implement: cv.ui.structure.IController,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function () {\n    this.base(arguments);\n    this.__HTML_STRUCT = '<div id=\"top\" class=\"loading\"><div class=\"nav_path\">-</div></div><div id=\"navbarTop\" class=\"loading\"></div><div id=\"centerContainer\" class=\"clearfix\"><div id=\"navbarLeft\" class=\"loading page\"></div><div id=\"main\" style=\"position:relative; overflow: hidden;\" class=\"loading\"><div id=\"pages\" style=\"position:relative;clear:both;\"><!-- all pages will be inserted here --></div></div><div id=\"navbarRight\" class=\"loading page\"></div></div><div id=\"navbarBottom\" class=\"loading\"></div><div id=\"bottom\" class=\"loading\"><hr /><div class=\"footer\"></div></div>';\n    this.__supportedFeatures = {\n      cache: true\n    };\n    // load basic CSS rules shared by all designs that support this structure\n    qx.bom.Stylesheet.includeFile(qx.util.ResourceManager.getInstance().toUri('designs/designglobals.css') + (cv.Config.forceReload === true ? '?'+Date.now() : ''));\n  },\n\n  /*\n  ***********************************************\n    PROPERTIES\n  ***********************************************\n  */\n  properties: {\n    currentPage: {\n      check: 'cv.ui.structure.pure.Page',\n      nullable: true,\n      event: 'changeCurrentPage'\n    },\n    renderTarget: {\n      check: 'String',\n      init: '#pages'\n    },\n\n    /**\n     * Namespace for path ids\n     */\n    namespace: {\n      check: 'String',\n      init: ''\n    }\n  },\n\n  /*\n  ***********************************************\n    MEMBERS\n  ***********************************************\n  */\n  members: {\n    __supportedFeatures: null,\n    __HTML_STRUCT: null,\n    main_scroll : null,\n    old_scroll : '',\n    pagePartsHandler: null,\n\n    getHtmlStructure() {\n      return this.__HTML_STRUCT;\n    },\n\n    parseBackendSettings(xml) {\n      const settings = cv.Config.configSettings;\n      const pagesElement = xml.documentElement;\n      if (pagesElement.getAttribute('backend') !== null) {\n        settings.backend = pagesElement.getAttribute('backend');\n      }\n      if (pagesElement.getAttribute('backend-url') !== null) {\n        settings.backendUrl = pagesElement.getAttribute('backend-url');\n        this.error('The useage of \"backend-url\" is deprecated. Please use \"backend-knxd-url\", \"backend-mqtt-url\" or \"backend-openhab-url\" instead.');\n      }\n      if (pagesElement.getAttribute('backend-knxd-url') !== null) {\n        settings.backendKnxdUrl = pagesElement.getAttribute('backend-knxd-url');\n      }\n      if (pagesElement.getAttribute('backend-mqtt-url') !== null) {\n        settings.backendMQTTUrl = pagesElement.getAttribute('backend-mqtt-url');\n      }\n      if (pagesElement.getAttribute('backend-openhab-url') !== null) {\n        settings.backendOpenHABUrl = pagesElement.getAttribute('backend-openhab-url');\n      }\n      if (pagesElement.getAttribute('token') !== null) {\n        settings.credentials.token = pagesElement.getAttribute('token');\n      }\n      if (pagesElement.getAttribute('username') !== null) {\n        settings.credentials.username = pagesElement.getAttribute('username');\n      }\n      if (pagesElement.getAttribute('password') !== null) {\n        settings.credentials.password = pagesElement.getAttribute('password');\n      }\n      return true;\n    },\n\n    login() {\n      const client = cv.io.BackendConnections.getClient('main');\n      client.login(true, cv.Config.configSettings.credentials, () => {\n        this.debug('logged in');\n        cv.io.BackendConnections.startInitialRequest();\n      });\n    },\n\n    parseSettings(xml, done) {\n      const settings = cv.Config.configSettings;\n      const pagesElement = xml.documentElement;\n      settings.screensave_time = pagesElement.getAttribute('screensave_time');\n      if (settings.screensave_time) {\n        settings.screensave_time = parseInt(settings.screensave_time, 10);\n      }\n      settings.screensave_page = pagesElement.getAttribute('screensave_page');\n\n      if (pagesElement.getAttribute('max_mobile_screen_width') !== null) {\n        settings.maxMobileScreenWidth = pagesElement.getAttribute('max_mobile_screen_width');\n        // override config setting\n        cv.Config.maxMobileScreenWidth = settings.maxMobileScreenWidth;\n      }\n\n      const globalClass = pagesElement.getAttribute('class');\n      if (globalClass !== null) {\n        document.querySelector('body').classList.add(globalClass);\n      }\n      if (pagesElement.getAttribute('scroll_speed') === null) {\n        settings.scrollSpeed = 400;\n      } else {\n        settings.scrollSpeed = parseInt(pagesElement.getAttribute('scroll_speed'));\n      }\n      settings.bindClickToWidget = pagesElement.getAttribute('bind_click_to_widget') === 'true';\n      if (pagesElement.getAttribute('default_columns') !== null) {\n        settings.defaultColumns = pagesElement.getAttribute('default_columns');\n      }\n      if (pagesElement.getAttribute('min_column_width') !== null) {\n        settings.minColumnWidth = pagesElement.getAttribute('min_column_width');\n      }\n    },\n\n    async preParse(xml) {\n      const settings = cv.Config.configSettings;\n      const metaParser = new cv.parser.pure.MetaParser();\n\n      // start with the plugins\n      settings.pluginsToLoad = settings.pluginsToLoad.concat(metaParser.parsePlugins(xml));\n      // and then the rest\n      await metaParser.parse(xml);\n      this.debug('pre parsing done');\n    },\n\n    /**\n     * Generate the UI code from the config file\n     * @param xml {XMLDocument} loaded config file\n     */\n    createUI(xml) {\n      if (!cv.Config.cacheUsed) {\n        this.debug('creating pages');\n        const page = xml.querySelector('pages > page'); // only one page element allowed...\n\n        this._createPages(page, 'id');\n        this.debug('finalizing');\n        qx.event.message.Bus.dispatchByName('setup.dom.append');\n        this.debug('pages created');\n      }\n      this.debug('setup.dom.finished');\n      qx.event.message.Bus.dispatchByName('setup.dom.finished.before');\n      cv.TemplateEngine.getInstance().setDomFinished(true);\n\n      this.login();\n\n      this.initLayout();\n    },\n\n    /**\n     * Start the parsing process\n     * @param page {Element} XML-configuration element\n     * @param path {String} internal poth\n     * @param flavour {String} inherited flavour\n     * @param type {String} page type (text, 2d, 3d)\n     */\n    _createPages: function (page, path, flavour, type) {\n      cv.parser.pure.WidgetParser.renderTemplates(page);\n      let parsedData = cv.parser.pure.WidgetParser.parse(page, path, flavour, type);\n      if (!Array.isArray(parsedData)) {\n        parsedData = [parsedData];\n      }\n      let i = 0;\n      const l = parsedData.length;\n      for (; i < l; i++) {\n        const data = parsedData[i];\n        const widget = cv.ui.structure.WidgetFactory.createInstance(data.$$type, data);\n\n        // trigger DOM generation\n        if (widget) {\n          widget.getDomString();\n        }\n      }\n    },\n\n    /**\n     * Parse a label from the config file\n     * @param label {Element} label xml element\n     * @param flavour {String?} flavour name\n     * @param labelClass {String?} CSS class name\n     * @param style {String?} additional CSS style properties\n     */\n    parseLabel(label, flavour, labelClass, style) {\n      if (!label) {\n        return '';\n      }\n      let ret_val = '<div class=\"' + (labelClass !== undefined ? labelClass : 'label') + '\"' +\n        (style ? (' style=\"' + style + '\"') : '') + '>';\n\n      Array.prototype.forEach.call(label.childNodes, function (elem) {\n        if (elem.nodeType === Node.ELEMENT_NODE && elem.nodeName.toLowerCase() === 'icon') {\n          ret_val += cv.IconHandler.getInstance().getIconElement(\n            elem.getAttribute('name'),\n            elem.getAttribute('type'),\n            elem.getAttribute('flavour') || flavour,\n            elem.getAttribute('color'),\n            elem.getAttribute('styling'),\n            '',\n            true);\n        } else if (elem.nodeType === Node.TEXT_NODE) {\n          ret_val += elem.textContent;\n        }\n      });\n      return ret_val + '</div>';\n    },\n    supports(feature, subfeature) {\n      if (Object.prototype.hasOwnProperty.call(this.__supportedFeatures, feature)) {\n        if (this.__supportedFeatures[feature] === true) {\n          if (subfeature) {\n            return Object.prototype.hasOwnProperty.call(this.__supportedFeatures[feature], subfeature) && this.__supportedFeatures[feature][subfeature] === true;\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    getInitialAddresses() {\n      const startPageAddresses = {};\n      const pageWidget = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.initialPage);\n      pageWidget.getChildWidgets().forEach(function(child) {\n        const address = child.getAddress ? child.getAddress() : {};\n        for (let addr in address) {\n          if (Object.prototype.hasOwnProperty.call(address, addr)) {\n            startPageAddresses[addr] = 1;\n          }\n        }\n      }, this);\n      return Object.keys(startPageAddresses);\n    },\n\n    initPagePartsHandler() {\n      if (!this.pagePartsHandler) {\n        this.pagePartsHandler = new cv.ui.structure.pure.navigation.PagePartsHandler();\n      }\n    },\n\n    initLayout() {\n      this.initPagePartsHandler();\n      if (!cv.Config.initialPage) {\n        this.__detectInitialPage();\n      }\n      let currentPage = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.initialPage);\n      if (currentPage) {\n        this.setCurrentPage(currentPage);\n      } else {\n        // this page does not exist, fallback to start page\n        cv.Config.initialPage = 'id_';\n        currentPage = cv.ui.structure.WidgetFactory.getInstanceById(cv.Config.initialPage);\n      }\n\n      cv.ui.structure.pure.layout.Manager.adjustColumns();\n      cv.ui.structure.pure.layout.Manager.applyColumnWidths('#'+cv.Config.initialPage, true);\n\n      this.main_scroll = new cv.ui.structure.pure.navigation.PageHandler();\n      if (this.scrollSpeed !== undefined) {\n        this.main_scroll.setSpeed(this.scrollSpeed);\n      }\n\n      new qx.util.DeferredCall(function() {\n        this.scrollToPage(cv.Config.initialPage, 0);\n      }, this).schedule();\n\n      // run the Trick-O-Matic scripts for great SVG backdrops\n      document.querySelectorAll('embed').forEach(function(elem) {\n        if (typeof elem.getSVGDocument === 'function') {\n          const svg = elem.getSVGDocument();\n          if (svg === null || svg.readyState !== 'complete') {\n            elem.onload = cv.ui.TrickOMatic.run;\n          } else {\n            cv.ui.TrickOMatic.run.call(elem);\n          }\n        }\n      });\n\n      document.querySelectorAll('.icon').forEach(cv.util.IconTools.fillRecoloredIcon, cv.util.IconTools);\n      document.querySelectorAll('.loading').forEach(function(elem) {\n        elem.classList.remove('loading');\n      }, this);\n\n      qx.core.Init.getApplication().addListener('changeMobile', this._onMobileChanged, this);\n    },\n\n    doScreenSave() {\n      this.scrollToPage();\n    },\n\n    onHistoryRequest(anchor) {\n      if (anchor) {\n        this.scrollToPage(anchor, 0, true);\n      }\n    },\n\n    scrollToPage (target, speed, skipHistory) {\n      if (undefined === target) {\n        target = cv.Config.configSettings.screensave_page;\n      }\n      const page_id = this.getPageIdByPath(target);\n      if (page_id === null) {\n        return;\n      }\n      if (cv.Config.currentPageId === page_id) {\n        return;\n      }\n      cv.Config.currentPageId = page_id;\n      cv.Config.treePath = page_id;\n\n      if (undefined === speed) {\n        speed = cv.Config.configSettings.scrollSpeed;\n      }\n\n      if (cv.Config.rememberLastPage && qx.core.Environment.get('html.storage.local')) {\n        localStorage.lastpage = page_id;\n      }\n\n      // push new state to history\n      if (skipHistory === undefined) {\n        const headline = document.querySelectorAll('#' + page_id + ' h1');\n        let pageTitle = 'CometVisu';\n        if (headline.length) {\n          pageTitle = headline[0].textContent+ ' - '+pageTitle;\n        }\n        qx.bom.History.getInstance().addToHistory(page_id, pageTitle);\n      }\n\n      this.main_scroll.seekTo(page_id, speed); // scroll to it\n\n      this.pagePartsHandler.initializeNavbars(page_id);\n      this._maintainNavbars();\n    },\n\n    _onMobileChanged(ev) {\n      const app = qx.core.Init.getApplication();\n      if (app.isReady()) {\n        cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n        this._maintainNavbars();\n      }\n    },\n\n    _maintainNavbars() {\n      if (qx.core.Init.getApplication().getMobile()) {\n        switch (this.pagePartsHandler.navbars.left.dynamic) {\n          case null:\n          case true:\n            this.pagePartsHandler.fadeNavbar('Left', 'out', 0);\n            break;\n\n          case false:\n            this.pagePartsHandler.fadeNavbar('Left', 'in', 0);\n        }\n      } else {\n        this.pagePartsHandler.fadeNavbar('Left', 'in', 0);\n      }\n    },\n\n    /**\n     * Reset some values related to the current page\n     */\n    resetPageValues: function () {\n      this.resetCurrentPage();\n      cv.ui.structure.pure.layout.Manager.currentPageUnavailableWidth = -1;\n      cv.ui.structure.pure.layout.Manager.currentPageUnavailableHeight = -1;\n      cv.ui.structure.pure.layout.Manager.currentPageNavbarVisibility = null;\n    },\n\n    async getInitialPageId() {\n      if (!cv.Config.initialPage) {\n        await this.__detectInitialPage();\n      }\n      return cv.Config.initialPage;\n    },\n\n    async __detectInitialPage() {\n      let startpage = 'id_';\n      if (cv.Config.startpage) {\n        startpage = cv.Config.startpage;\n        if (qx.core.Environment.get('html.storage.local') === true) {\n          if (startpage === 'remember') {\n            startpage = localStorage.getItem('lastpage');\n            cv.Config.rememberLastPage = true;\n            if (typeof (startpage) !== 'string' || startpage.substr(0, 3) !== 'id_') {\n              startpage = 'id_'; // fix obvious wrong data\n            }\n          } else if (startpage === 'noremember') {\n            localStorage.removeItem('lastpage');\n            startpage = 'id_';\n            cv.Config.rememberLastPage = false;\n          }\n        }\n      } else {\n        const req = qx.util.Uri.parseUri(window.location.href);\n        if (req.anchor && req.anchor.substring(0, 3) === 'id_') {\n          startpage = req.anchor;\n        }\n      }\n      if (startpage.match(/^id_[0-9_]*$/) !== null) {\n        cv.Config.initialPage = startpage;\n        return startpage;\n      }\n      // wait for DOM to be ready and detect the page id then\n      return new Promise(resolve => {\n        qx.event.message.Bus.subscribe('setup.dom.finished.before', () => {\n          cv.Config.initialPage = this.getPageIdByPath(startpage) || 'id_';\n          resolve(cv.Config.initialPage);\n        });\n      });\n    },\n\n    /**\n     * Returns the id of the page the given path is associated to\n     * @param page_name {String}\n     * @param path {String}\n     * @return {String}\n     */\n    getPageIdByPath: function (page_name, path) {\n      if (page_name === null) {\n        return null;\n      }\n      if (page_name.match(/^id_[0-9_]*$/) !== null) {\n        // already a page_id\n        return page_name;\n      }\n      if (path !== undefined) {\n        const scope = this.traversePath(path);\n        if (scope === null) {\n          // path is wrong\n          this.error('path \\'' + path + '\\' could not be traversed, no page found');\n          return null;\n        }\n        return this.getPageIdByName(page_name, scope);\n      }\n      return this.getPageIdByName(page_name);\n    },\n\n    traversePath: function (path, root_page_id) {\n      let path_scope = null;\n      let index = path.indexOf('/');\n      if (index >= 1) {\n        // skip escaped slashes like \\/\n        while (path.substr(index - 1, 1) === '\\\\') {\n          const next = path.indexOf('/', index + 1);\n          if (next >= 0) {\n            index = next;\n          }\n        }\n      }\n      //    console.log(\"traversePath(\"+path+\",\"+root_page_id+\")\");\n      if (index >= 0) {\n        // traverse path one level down\n        const path_page_name = path.substr(0, index);\n        path_scope = this.getPageIdByName(path_page_name, root_page_id);\n        path = path.substr(path_page_name.length + 1);\n        path_scope = this.traversePath(path, path_scope);\n        //      console.log(path_page_name+\"=>\"+path_scope);\n        return path_scope;\n      }\n      // bottom path level reached\n      path_scope = this.getPageIdByName(path, root_page_id);\n      return path_scope;\n    },\n\n    getPageIdByName: function (page_name, scope) {\n      let page_id = null;\n      if (page_name.match(/^id_[0-9_]*$/) !== null) {\n        // already a page_id\n        return page_name;\n      }\n      // find Page-ID by name\n      // decode html code (e.g. like &apos; => ')\n      page_name = cv.util.String.decodeHtmlEntities(page_name);\n      // remove escaped slashes\n      page_name = decodeURI(page_name.replace('\\\\\\/', '/'));\n\n      //      console.log(\"Page: \"+page_name+\", Scope: \"+scope);\n      const selector = (scope !== undefined && scope !== null) ? '.page[id^=\"' + scope + '\"] h1' : '.page h1';\n      let pages = document.querySelectorAll(selector);\n      pages = Array.from(pages).filter(function(h) {\n        return h.textContent === page_name;\n      });\n      if (pages.length > 1 && this.getCurrentPage() !== null) {\n        const currentPageId = this.getCurrentPage().getPath();\n        // More than one Page found -> search in the current pages descendants first\n        let fallback = true;\n        pages.some(function (page) {\n          const p = cv.util.Tree.getClosest(page, '.page');\n          if (page.innerText === page_name) {\n            const pid = p.getAttribute('id');\n            if (pid.length < currentPageId.length) {\n              // found pages path is shorter the the current pages -> must be an ancestor\n              if (currentPageId.indexOf(pid) === 0) {\n                // found page is an ancestor of the current page -> we take this one\n                page_id = pid;\n                fallback = false;\n                //break loop\n                return true;\n              }\n            } else if (pid.indexOf(currentPageId) === 0) {\n              // found page is an descendant of the current page -> we take this one\n              page_id = pid;\n              fallback = false;\n              //break loop\n              return true;\n            }\n          }\n          return false;\n        }, this);\n        if (fallback) {\n          // take the first page that fits (old behaviour)\n          pages.some(function (page) {\n            if (page.innerText === page_name) {\n              page_id = cv.util.Tree.getClosest(page, '.page').getAttribute('id');\n              // break loop\n              return true;\n            }\n            return false;\n          });\n        }\n      } else {\n        pages.some(function (page) {\n          if (page.innerText === page_name) {\n            page_id = cv.util.Tree.getClosest(page, '.page').getAttribute('id');\n            // break loop\n            return true;\n          }\n          return false;\n        });\n      }\n\n      if (page_id !== null && page_id.match(/^id_[0-9_]*$/) !== null) {\n        return page_id;\n      }\n      // not found\n      return null;\n    }\n  },\n\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    qx.core.Init.getApplication().removeListener('changeMobile', this._onMobileChanged, this);\n  },\n\n  defer: function (statics) {\n    cv.Application.structureController = statics.getInstance();\n  }\n});\n","/* PagePartsHandler.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * @author Christian Mayer\n * @since 2010\n */\nqx.Class.define('cv.ui.structure.pure.navigation.PagePartsHandler', {\n  extend: qx.core.Object,\n\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct: function () {\n    this.navbars = {\n      top: {\n        dynamic: null,\n        fadeVisible: true\n      },\n      left: {\n        dynamic: null,\n        fadeVisible: true\n      },\n      right: {\n        dynamic: null,\n        fadeVisible: true\n      },\n      bottom: {\n        dynamic: null,\n        fadeVisible: true\n      }\n    };\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    navbars: null,\n\n    updateTopNavigation: function (path) {\n      path = path.split('_');\n      path.pop();\n      let id = 'id_'; //path[0];\n      const pathNode = document.querySelector('.nav_path');\n      pathNode.innerHTML = '';\n      let pageTitle = this.getPageTitle(id);\n      let nav = document.createElement('a');\n      // eslint-disable-next-line no-script-url\n      nav.setAttribute('href', 'javascript:cv.Application.structureController.scrollToPage(\\'' + id + '\\')');\n      nav.setAttribute('id', 'breadcrump_pagejump_' + id);\n      nav.appendChild(document.createTextNode(pageTitle));\n      pathNode.appendChild(nav);\n      for (let i = 1; i < path.length; i++) { // element 0 is id_ (JNK)\n        id += path[i] + '_';\n        let pageElem = document.querySelector('#'+id);\n        if (pageElem && pageElem.classList.contains('page')) { // FIXME is this still needed?!?\n          pageTitle = this.getPageTitle(id);\n          let span = document.createElement('span');\n          span.innerHTML = ' &#x25ba; ';\n          pathNode.appendChild(span);\n          nav = document.createElement('a');\n          // eslint-disable-next-line no-script-url\n          nav.setAttribute('href', 'javascript:cv.Application.structureController.scrollToPage(\\'' + id + '\\')');\n          nav.setAttribute('id', 'breadcrump_pagejump_' + id);\n          nav.appendChild(document.createTextNode(pageTitle));\n          pathNode.appendChild(nav);\n        }\n      }\n      // cv.TemplateEngine.getInstance().handleResize(); - TODO CM160528: why? This shouldn't have\n      //                             any effect on the page size => commented out\n    },\n\n    getPageTitle: function (pageId) {\n      let pageTitle = '';\n      const pageData = cv.data.Model.getInstance().getWidgetData(pageId);\n      if (pageData) {\n        pageTitle = pageData.name;\n      } else {\n        const pageHeadline = document.querySelector('#' + pageId + ' h1');\n        if (pageHeadline) {\n          pageTitle = pageHeadline.textContent;\n        }\n      }\n      return pageTitle;\n    },\n\n    /**\n     * Change the size of the selected navbar\n     *\n     * currently only \"left\" and \"right\" are implemented\n     * @param position\n     * @param size\n     */\n    navbarSetSize: function (position, size) {\n      const cssSize = size + (isFinite(size) ? 'px' : '');\n      let navbar;\n      switch (position) {\n        case 'left':\n          navbar = document.querySelector('#navbarLeft');\n          navbar.style.width = cssSize;\n          if (!this.navbars.left.fadeVisible) {\n            navbar.style.left = -navbar.getBoundingClientRect().width + 'px';\n          }\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n          break;\n\n        case 'right':\n          document.querySelector('#centerContainer').style['padding-right'] = cssSize;\n          navbar = document.querySelector('#navbarRight');\n          navbar.style.width = cssSize;\n          navbar.style['margin-right'] = '-' + cssSize;\n          if (!this.navbars.right.fadeVisible) {\n            navbar.style.right = -navbar.getBoundingClientRect().width + 'px';\n          }\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n          break;\n      }\n    },\n\n    getNavbarsVisibility: function (page) {\n      if (!page) {\n        page = cv.Application.structureController.getCurrentPage();\n      }\n      if (!page) {\n        return {top: true, bottom: true, left: true, right: true};\n      }\n      if (typeof page === 'string') {\n        page = cv.ui.structure.WidgetFactory.getInstanceById(page);\n      } else if (page.attributes) {\n        page = cv.ui.structure.WidgetFactory.getInstanceById(page.getAttribute('id'));\n      }\n\n      if (!page) {\n        return {top: true, bottom: true, left: true, right: true};\n      }\n\n      return {\n        top: page.getShowNavbarTop(),\n        bottom: page.getShowNavbarBottom(),\n        left: page.getShowNavbarLeft(),\n        right: page.getShowNavbarRight()\n      };\n    },\n\n    /**\n     * update the visibility of top-navigation, footer and navbar for this page\n     *\n     * @param page {cv.ui.structure.pure.Page} page to update the parts for\n     * @param speed {Number} animation duration for changes\n     */\n    updatePageParts: function (page, speed) {\n      // default values\n      let showtopnavigation = true;\n      let showfooter = true;\n\n      if (page) {\n        if (!page.isInitialized()) {\n          // page is not ready, defer this update\n          const self = this;\n          page.addListenerOnce('changeInitialized', function () {\n            self.updatePageParts(page, speed);\n          }, this);\n          return;\n        }\n        showtopnavigation = page.getShowTopNavigation();\n        showfooter = page.getShowFooter();\n      }\n      const topDisplay = window.getComputedStyle(document.querySelector('#top'))['display'];\n      const bottomDisplay = window.getComputedStyle(document.querySelector('#bottom'))['display'];\n      if (showtopnavigation) {\n        if (topDisplay === 'none') {\n          document.querySelectorAll('#top, #top > *').forEach(function(elem) {\n            elem.style.display = 'block';\n          }, this);\n          this.removeInactiveNavbars(page.getPath());\n        }\n      } else if (topDisplay !== 'none') {\n        document.querySelector('#top').style.display = 'none';\n        this.removeInactiveNavbars(page.getPath());\n      }\n      if (showfooter) {\n        if (bottomDisplay === 'none') {\n          document.querySelector('#bottom').style.display = 'block';\n          this.removeInactiveNavbars(page.getPath());\n        }\n      } else if (bottomDisplay !== 'none') {\n        document.querySelector('#bottom').style.display = 'none';\n        this.removeInactiveNavbars(page.getPath());\n      }\n      cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n    },\n\n    /**\n     * fades in/out a navbar\n     *\n     * @param position {String}  [Top|Left|Right|Bottom]\n     * @param direction {String} [in|out]\n     * @param speed {Number} time in milliseconds\n     */\n    fadeNavbar: function (position, direction, speed) {\n      speed = (speed !== undefined) ? speed : cv.Application.structureController.main_scroll.getSpeed();\n      const initCss = {};\n      const targetCss = {};\n      const navbar = document.querySelector('#navbar' + position);\n      if (navbar) {\n        const key = position.toLowerCase();\n        const self = this;\n        const onAnimationEnd = function () {\n          self.navbars[key].fadeVisible = direction === 'in';\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n        };\n        switch (direction) {\n          case 'in':\n            if (window.getComputedStyle(navbar).display === 'none') {\n              initCss.display = 'block';\n            }\n            targetCss[key] = 0;\n            switch (position) {\n              case 'Top':\n              case 'Bottom':\n                initCss[key] = -navbar.getBoundingClientRect().height + 'px';\n                break;\n              case 'Left':\n              case 'Right':\n                initCss[key] = -navbar.getBoundingClientRect().width + 'px';\n                break;\n            }\n            break;\n          case 'out':\n            initCss[key] = 0;\n            switch (position) {\n              case 'Top':\n              case 'Bottom':\n                targetCss[key] = -navbar.getBoundingClientRect().height + 'px';\n                break;\n              case 'Left':\n              case 'Right':\n                targetCss[key] = -navbar.getBoundingClientRect().width + 'px';\n                break;\n            }\n            break;\n        }\n        Object.entries(initCss).forEach(function (key_value) {\n          navbar.style[key_value[0]] = key_value[1];\n        });\n        if (speed === 0) {\n          Object.entries(targetCss).forEach(function (key_value) {\n            navbar.style[key_value[0]] = key_value[1];\n          });\n          onAnimationEnd();\n        } else {\n          const spec = {\n            duration: speed,\n            timing:  cv.Application.structureController.main_scroll.getEasing(),\n            keep: 100,\n            keyFrames: {\n              0: initCss,\n              100: targetCss\n            }\n          };\n          const anim = qx.bom.element.Animation.animate(navbar, spec);\n          anim.addListenerOnce('end', onAnimationEnd, this);\n        }\n      }\n    },\n\n    /**\n     * traverse down the page tree from root page id_ -> .. -> page_id activate\n     * all navbars in that path deactivate all others\n     *\n     * @param page_id {String}\n     */\n    initializeNavbars: function (page_id) {\n      const self = this;\n      this.removeInactiveNavbars(page_id);\n      const tree = Array.from(document.querySelectorAll('#id_'));\n      if (page_id !== 'id_') {\n        const parts = page_id.split('_');\n        parts.pop();\n        parts[0] = '';\n        for (let i = 0; i < parts.length; i++) {\n          const subPath = parts.slice(0, i + 1).join('_');\n          if (subPath) {\n            const item = document.querySelectorAll('#id' + subPath + '_.page');\n            if (item.length === 1) {\n              tree.push(item[0]);\n            }\n          }\n        }\n      }\n      let level = 1;\n      const size = {top: 0, right: 0, bottom: 0, left: 0};\n      const dynamic = {top: null, right: null, bottom: null, left: null};\n      const positions = ['top', 'right', 'bottom', 'left'];\n      tree.forEach(function (elem) {\n        const id = elem.getAttribute('id');\n        positions.forEach(function (pos) {\n          const nav = document.querySelector('#' + id + pos + '_navbar');\n          if (nav) {\n            const data = cv.data.Model.getInstance().getWidgetData(id + pos + '_navbar');\n            if (data.scope >= 0 && tree.length-level > data.scope) {\n              // navbar that is not visible at the moment -> ignore it\n              nav.classList.remove('navbarActive');\n              return;\n            }\n            if (data.dynamic !== null) {\n              dynamic[pos] = data.dynamic;\n            }\n            self.navbars[pos].dynamic = dynamic[pos];\n            if (data.scope === undefined || data.scope < 0 || tree.length - level <= data.scope) {\n              nav.classList.add('navbarActive');\n            } else {\n              nav.classList.remove('navbarActive');\n            }\n            if (data.width !== null) {\n              size[pos] = data.width;\n            } else if (size[pos] === 0) {\n              // navbar with content but no size given so far => use default\n              size[pos] = 300;\n            }\n          }\n        });\n        level++;\n      });\n      positions.forEach(function (pos) {\n        self.navbarSetSize(pos, size[pos]);\n      });\n      cv.ui.structure.pure.layout.ResizeHandler.invalidateNavbar();\n    },\n\n    removeInactiveNavbars: function (page_id) {\n      // remove all navbars that do not belong to this page\n      document.querySelectorAll('.navbar.navbarActive').forEach(function (elem) {\n        let navBarPath = elem.getAttribute('id').split('_');\n        // skip last 2 elements e.g. '_top_navbar'\n        navBarPath = navBarPath.slice(0, navBarPath.length - 2).join('_');\n        const expr = new RegExp('^' + navBarPath + '.*', 'i');\n        if (navBarPath !== page_id && !expr.test(page_id)) {\n          elem.classList.remove('navbarActive');\n        }\n      });\n    }\n  }\n});\n","/* PageHandler.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * @author Christian Mayer\n * @since 2016\n */\n// FIXME and TODO: This class is currently just a quick hack to get rid\n// of the jQuery-Tools Scrollable. It should be enhanced to allow different\n// page transition animations like blending, etc. pp.\n\nqx.Class.define('cv.ui.structure.pure.navigation.PageHandler', {\n  extend: qx.core.Object,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    // time in milliseconds\n    speed : {\n      check: 'Number',\n      init: 400\n    },\n    // name of the easing function\n    easing : {\n      check: 'string',\n      init: 'ease'\n    },\n\n    currentPath : {\n      check: 'String',\n      init: ''\n    },\n\n    animationType: {\n      check: ['slide', 'fade', 'flip', 'pop', 'swap', 'none'],\n      init: 'slide'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n\n    seekTo : function(target, speed) {\n      if (!Number.isFinite(speed)) {\n        speed = 0;\n      }\n      const currentPath = this.getCurrentPath();\n      if (currentPath !== '') {\n        qx.event.message.Bus.dispatchByName('path.'+currentPath+'.exitingPageChange', currentPath, target);\n      }\n\n      const pageWidget = cv.ui.structure.WidgetFactory.getInstanceById(target);\n\n      if (!pageWidget || !pageWidget.getDomElement()) { // check if page does exist\n        return;\n      }\n      qx.event.message.Bus.dispatchByName('path.'+target+'.beforePageChange', target);\n\n      const controller = cv.Application.structureController;\n\n      controller.resetPageValues();\n\n      controller.setCurrentPage(pageWidget);\n\n      // update visibility of navbars, top-navigation, footer\n      controller.pagePartsHandler.updatePageParts(pageWidget, speed);\n\n      // now the animation\n      let animationConfig = {};\n\n      // update reference, because the appearance might have changed\n      const oldPageWidget = currentPath ? cv.ui.structure.WidgetFactory.getInstanceById(currentPath) : null;\n\n      let direction = null;\n      let animationEnabled = speed > 0 && this.getAnimationType() !== 'none';\n\n      // browser check\n      if (qx.core.Environment.get('browser.name') === 'safari' && parseInt(qx.core.Environment.get('browser.version')) <= 5) {\n        animationEnabled = false;\n      }\n      if (animationEnabled) {\n        const currentDepth = currentPath.split('_').length;\n        const targetDepth = target.split('_').length;\n        direction = currentDepth<=targetDepth ? 'down' : 'up';\n        animationConfig = this.__getAnimationConfig(direction);\n\n        // show the new page (because animations do not work on hidden elements) + hide scrollbar\n        Object.entries({\n          'display': 'block',\n          'overflow': 'hidden'\n        }).forEach(function(key_value) {\n          pageWidget.getDomElement().style[key_value[0]]=key_value[1];\n        });\n        // set it to visible\n        pageWidget.setVisible(true);\n      }\n\n      if (!animationEnabled) {\n        if (oldPageWidget) {\n          this.__onLeavePage(oldPageWidget);\n        }\n        this.__onEnterPage(pageWidget, 0, true);\n      } else {\n        if (oldPageWidget) {\n          const outAnim = qx.bom.element.Animation.animate(oldPageWidget.getDomElement(), animationConfig.leavePage, speed);\n          oldPageWidget.getDomElement().style['overflow-y'] = 'hidden';\n          outAnim.addListenerOnce('end', function() {\n            this.__onLeavePage(oldPageWidget);\n          }, this);\n        }\n        const oldPos = window.getComputedStyle(pageWidget.getDomElement()).position;\n        pageWidget.getDomElement().style.position = 'absolute';\n        qx.bom.AnimationFrame.request(function() {\n          const animation = qx.bom.element.Animation.animate(pageWidget.getDomElement(), animationConfig.enterPage, speed);\n          animation.addListenerOnce('end', function() {\n            this.__onEnterPage(pageWidget, oldPos);\n          }, this);\n        }, this);\n      }\n    },\n\n    /**\n     * Get the animation configs for the current animationType setting\n     * @param direction {String} \"up\" or \"down\"\n     */\n    __getAnimationConfig: function(direction) {\n      let inAnim;\n      let outAnim;\n\n      // try to find existing animation configuration\n      const type = this.getAnimationType().toUpperCase();\n      if (direction === 'up') {\n        inAnim = qx.util.Animation[type+'_RIGHT_IN'] || qx.util.Animation[type+'_IN'];\n        outAnim = qx.util.Animation[type+'_RIGHT_OUT'] || qx.util.Animation[type+'_OUT'];\n      } else if (direction === 'down') {\n        inAnim = qx.util.Animation[type+'_LEFT_IN'] || qx.util.Animation[type+'_IN'];\n        outAnim = qx.util.Animation[type+'_LEFT_OUT'] || qx.util.Animation[type+'_OUT'];\n      }\n      if (!inAnim || !outAnim) {\n        // fallback\n        switch (this.getAnimationType()) {\n          case 'slide':\n            if (direction === 'up') {\n              inAnim = qx.util.Animation.SLIDE_RIGHT_IN;\n              outAnim = qx.util.Animation.SLIDE_RIGHT_OUT;\n            } else {\n              inAnim = qx.util.Animation.SLIDE_LEFT_IN;\n              outAnim = qx.util.Animation.SLIDE_LEFT_OUT;\n            }\n            break;\n        }\n      }\n      if (inAnim) {\n        inAnim.timing = this.getEasing();\n      }\n      if (outAnim) {\n        outAnim.timing = this.getEasing();\n      }\n      return {\n        enterPage: inAnim,\n        leavePage: outAnim\n      };\n    },\n\n    /**\n     * Cleanup after page has been left\n     * @param oldPageWidget {cv.ui.structure.pure.Page}\n     */\n    __onLeavePage: function(oldPageWidget) {\n      oldPageWidget.getDomElement().classList.remove('pageActive', 'activePage');\n      oldPageWidget.getDomElement().style.overflow = null;\n      qx.event.message.Bus.dispatchByName('path.' + oldPageWidget.getPath() + '.afterPageChange', oldPageWidget.getPath());\n      qx.event.message.Bus.dispatchByName('path.pageLeft', oldPageWidget.getPath());\n      oldPageWidget.setVisible(false);\n    },\n\n    /**\n     * Cleanup after page has been entered\n     * @param pageWidget {cv.ui.structure.pure.Page}\n     * @param oldPos {String} CSS-position value to set\n     * @param updateVisibility {Boolean} set the visibility property of the page to true or do not change it\n     */\n    __onEnterPage: function(pageWidget, oldPos, updateVisibility) {\n      const page = pageWidget.getDomElement();\n      const target = pageWidget.getPath();\n      page.classList.add('pageActive', 'activePage');// show new page\n      if (updateVisibility === true) {\n        // set it to visible\n        pageWidget.setVisible(true);\n      }\n      // final stuff\n      this.setCurrentPath(target);\n      cv.Application.structureController.pagePartsHandler.updateTopNavigation(target);\n\n      qx.event.message.Bus.dispatchByName('page.' + target + '.appear', target);\n      qx.event.message.Bus.dispatchByName('path.pageChanged', target);\n      // show scrollbar after animation\n      const styles = {'overflow': null, 'display': null};\n      if (oldPos) {\n        styles.position = oldPos;\n      }\n      Object.entries(styles).forEach(function(key_value) {\n        page.style[key_value[0]]=key_value[1];\n      });\n    }\n  }\n});\n","/* DesignToggle.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a button to toggle through the available designs\n * @widgetexample\n * <designtoggle>\n *   <layout colspan=\"6\"/>\n *   <label>Change Design</label>\n * </designtoggle>\n *\n *\n *\n * @author Christian Mayer\n * @since 0.5.3 (2010)\n */\nqx.Class.define('cv.ui.structure.pure.DesignToggle', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton],\n\n  /*\n   ******************************************************\n   CONSTRUCTOR\n   ******************************************************\n   */\n  construct: function(props) {\n    this.base(arguments, props);\n    const store = new qx.data.store.Json(cv.io.rest.Client.getBaseUrl() + '/data/designs');\n    store.addListener('loaded', function (ev) {\n      this.setAvailableDesigns(ev.getData());\n    }, this);\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    availableDesigns: { check: 'Array', init: [] }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">' + cv.Config.getDesign() + '</div></div>';\n    },\n    /**\n     * Action performed when the widget got clicked\n     *\n     *\n     * @param path {String} - Internal path of the widget\n     * @param actor {Element} - DOMElement\n     * @param isCanceled {Boolean} - If true the action does nothing\n     */\n    _action: function(path, actor, isCanceled) {\n      if (isCanceled) {\n return; \n}\n\n      const designs = this.getAvailableDesigns();\n\n      const oldDesign = this.getDomElement().querySelector('.value').textContent;\n      const newDesign = designs.getItem((designs.indexOf(oldDesign) + 1) % designs.length);\n\n      const URL = cv.util.Location.getHref();\n      const regexp = new RegExp('design=' + oldDesign);\n      if (URL.search(regexp) !== -1) { // has URL-parameter design\n        cv.util.Location.setHref(URL.replace(regexp, 'design='+newDesign));\n      } else {\n        const parts = cv.util.Location.getHref().split('#');\n        let req = qx.util.Uri.appendParamsToUrl(parts[0], {design: newDesign});\n        if (parts.length > 1) {\n          req += '#'+parts[1];\n        }\n        cv.util.Location.setHref(req);\n      }\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('designtoggle', statics);\n  }\n});\n","/* Group.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A group can be used to group a couple of widgets and optionally surround them with a border or name the group.\n *\n * @widgetexample <settings selector=\".widget_container[data-type=group]\">\n *  <screenshot name=\"group_with_border\">\n *    <caption>Group with border and name</caption>\n *    <data address=\"0/0/0\">1</data>\n *    <data address=\"0/0/1\">21</data>\n *  </screenshot>\n *  </settings>\n *  <group name=\"Example Group\">\n *    <layout colspan=\"6\" />\n *    <text><label>Some Text</label></text>\n *    <switch>\n *      <layout colspan=\"3\" />\n *      <label>Switch</label>\n *      <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *    </switch>\n *    <info format=\"%.1f °C\">\n *      <layout colspan=\"3\" />\n *      <label>Temperature</label>\n *      <address transform=\"DPT:9.001\">0/0/1</address>\n *    </info>\n *  </group>\n *\n * @widgetexample <settings selector=\".widget_container[data-type=group]\">\n *  <screenshot name=\"group_without_border\">\n *    <caption>Hidden Group: no border no name</caption>\n *    <data address=\"0/0/0\">1</data>\n *    <data address=\"0/0/1\">21</data>\n *  </screenshot>\n *  </settings>\n *  <group nowidget=\"true\">\n *    <layout colspan=\"6\" />\n *    <text><label>Some Text</label></text>\n *    <switch>\n *      <layout colspan=\"3\" />\n *      <label>Switch</label>\n *      <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *    </switch>\n *    <info format=\"%.1f °C\">\n *      <layout colspan=\"3\" />\n *      <label>Temperature</label>\n *      <address transform=\"DPT:9.001\">0/0/1</address>\n *    </info>\n *  </group>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Group', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    noWidget: {\n      check: 'Boolean',\n      init: false\n    },\n    name: {\n      check: 'String',\n      init: ''\n    },\n    target: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n\n    /**\n     * Action performed when the group got clicked. If a target is specified in the group attributes\n     * the action will switch to the page defined by the target.\n     *\n     *\n     * @param  event {Event}\n     */\n    action: function (event) {\n      if (this.getTarget()) {\n        cv.Application.structureController.scrollToPage(this.getTarget());\n        if (event.getBubbles()) {\n          event.stopPropagation();\n        }\n      }\n    },\n\n    // overridden, group has no actor\n    getActor: function() {\n      return this.getDomElement();\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.getDomElement().style['z-index'] = 1;\n    },\n\n    // overridden\n    getDomString: function () {\n      // heading style\n      let hstyle = '';\n      if (this.getAlign()) {\n        hstyle += 'style=\"text-align:' + this.getAlign() + '\"';\n      }\n\n      let container = '<div class=\"clearfix\">';\n      if (this.getName()) {\n        container += '<h2 ' + hstyle + '>' + this.getName() + '</h2>';\n      }\n\n      container += this.getChildrenDomString();\n      container += '</div>';\n\n      return '<div class=\"' + this.getClasses() + '\" ' + this.getStyle() + '>' + container + '</div>';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('group', statics);\n  }\n});\n","/* Image.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an image to your visualization. Using the auto-refresh setting this widget can be used e.g. to show\n * a camera picture.\n *\n * @widgetexample\n * <image src=\"resource/icons/CometVisu_orange.png\" width=\"45px\" height=\"32px\">\n *   <layout colspan=\"2\" />\n * </image>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n * @asset(qx/static/blank.gif)\n */\nqx.Class.define('cv.ui.structure.pure.Image', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: [cv.ui.common.Refresh, cv.ui.common.Update ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width      : { check: 'String', init: '100%' },\n    height     : { check: 'String', nullable: true },\n    cropTop    : { check: 'String' },\n    cropBottom : { check: 'String' },\n    src        : { check: 'String', init: '' },\n    widthFit   : { check: 'Boolean', init: false },\n    placeholder: {\n      check: ['none', 'src', 'hide', 'exclude'],\n      init: 'none'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __src: null,\n\n    // overridden\n    _getInnerDomString: function () {\n      // create the actor\n      let imgStyle = '';\n      if (this.getWidth()) {\n        imgStyle += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getWidthFit() === true) {\n        imgStyle += 'max-width:100%;';\n      }\n      if (this.getHeight()) {\n        imgStyle += 'height:' + this.getHeight() + ';';\n      }\n      if (this.getCropTop() !== '' || this.getCropBottom() !== '') {\n        let top = '0%';\n        let bottom = '';\n        if (this.getCropTop() !== '') {\n          top = '-' + this.getCropTop();\n          bottom = 'margin-bottom:' + top;\n        }\n        if (this.getCropBottom() !== '') {\n          bottom = 'margin-bottom:calc(' + top + ' - ' + this.getCropBottom() + ');';\n        }\n        imgStyle += 'object-position:0% ' + top + ';' + bottom;\n      }\n\n      let src = this.__getSrc();\n      if (!src) {\n        switch (this.getPlaceholder()) {\n          case 'hide':\n            src = qx.util.ResourceManager.getInstance().toUri('qx/static/blank.gif');\n            break;\n\n          case 'exclude':\n            imgStyle += 'display:none;';\n            break;\n\n          case 'src':\n            this.error('no src placeholder defined');\n            break;\n        }\n      }\n      return '<div class=\"actor\"><img src=\"' + src + '\" style=\"' + imgStyle + '\" /></div>';\n    },\n\n    /**\n     * Return the real src value\n     */\n    __getSrc: function() {\n      if (!this.__src) {\n        let src = this.getSrc();\n        const parsedUri = qx.util.Uri.parseUri(this.getSrc());\n        if (!parsedUri.protocol && !src.startsWith('/')) {\n          // is relative URI, use the ResourceManager\n          src = qx.util.ResourceManager.getInstance().toUri(src);\n        }\n        this.__src = src || '';\n      }\n      return this.__src;\n    },\n\n    handleUpdate: function(text, address) {\n      const valueElem = this.getValueElement();\n      if (!text) {\n        switch (this.getPlaceholder()) {\n          case 'src':\n            text = this.__getSrc();\n            valueElem.style.display = 'inline';\n            break;\n\n          case 'hide':\n            text = qx.util.ResourceManager.getInstance().toUri('qx/static/blank.gif');\n            valueElem.style.display = 'inline';\n            break;\n\n          case 'exclude':\n            valueElem.style.display = 'none';\n            break;\n        }\n      } else {\n        valueElem.style.display = 'inline';\n      }\n      valueElem.setAttribute('src', text);\n    },\n\n    // overridden\n    getValueElement: function() {\n      return this.getDomElement().querySelector('img');\n    },\n\n    // overridden\n    _applyVisible: function(value) {\n      const valueElem = this.getValueElement();\n      if (!valueElem || this.getRefresh() > 0) {\n        return;\n      }\n      if (value === true) {\n        valueElem.setAttribute('src', this.__getSrc());\n      } else {\n        valueElem.setAttribute('src', '');\n      }\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('image', statics);\n  }\n});\n","/* ImageTrigger.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an image like the {@link cv.ui.structure.pure.Image} widget, but additionally the image can be changed by incoming\n * data and can send data to the backend by clicking on it.\n * There are two modes to react on incoming data:\n *\n * <ul>\n *  <li><code>type=\"show\"</code>: Hides the image when incoming data === 0</li>\n *  <li><code>type=\"select\"</code>: Changes the image by appending the incoming data to the initial configured image source, or hide it when incoming data === 0</li>\n * </ul>\n * Example:\n * <pre class=\"sunlight-highlight-xml\">\n * &lt;imagetrigger src=\"resource/icons/comet\" suffix=\"svg\" sendValue=\"clicked\" type=\"select\"&gt;\n *    &lt;address transform=\"DPT:16.001\" mode=\"readwrite\"&gt;0/0/0&lt;/address&gt;\n * &lt;/imagetrigger&gt;\n * </pre>\n *\n * initially shows nothing. When the CometVisu receives the string <code>_icon</code> in address <code>0/0/0</code>,\n * the image <code>icons/comet_opt_icon.svg</code> is shown. When the CometVisu receives '0' on address <code>0/0/0</code>,\n * this image is hidden.\n *\n * @widgetexample <settings>\n *   <screenshot name=\"image_trigger\">\n *     <caption>Image changed by incoming data 'blue'</caption>\n *     <data address=\"0/0/0\">blue</data>\n *   </screenshot>\n *   <screenshot name=\"image_trigger_changes\">\n *     <caption>Image changed by incoming data 'grey'</caption>\n *     <data address=\"0/0/0\">grey</data>\n *   </screenshot>\n *  </settings>\n *  <imagetrigger src=\"resource/icons/CometVisu_\" suffix=\"png\" sendValue=\"clicked\" type=\"select\" width=\"45px\" height=\"32px\">\n *    <layout colspan=\"1\" />\n *    <address transform=\"DPT:16.001\" mode=\"readwrite\">0/0/0</address>\n *  </imagetrigger>\n *\n * @widgetexample <settings>\n *   <caption>Disable layout width by settings it to '0', to have widget with === image width</caption>\n *   <screenshot name=\"image_trigger_colspan0\">\n *     <data address=\"0/0/0\">1</data>\n *   </screenshot>\n *  </settings>\n *  <imagetrigger src=\"resource/icons/CometVisu_orange\" suffix=\"png\" sendValue=\"clicked\" type=\"show\" width=\"45px\" height=\"32px\">\n *    <layout colspan=\"0\" />\n *    <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n *  </imagetrigger>\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.ImageTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.Refresh,\n    cv.ui.common.Update\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    height: { check: 'String', nullable: true },\n    updateType: {check: 'String', init: ''},\n    width: {check: 'String', init: '100%'},\n    src: { check: 'String', nullable: true },\n    suffix: { check: 'String', nullable: true },\n    sendValue: { check: 'String', init: ''}\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      let style = '';\n      if (Object.keys(this.getLayout()).length === 0) {\n        style += cv.parser.pure.WidgetParser.extractLayout(this.getLayout(), this.getPageType());\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style.length > 0) {\n        style = ' style=\"'+style+'\"';\n      }\n\n      let actor = '<div class=\"actor\">';\n      if (this.getUpdateType() === 'show') {\n        actor += '<img src=\"' + this.__getUrl(this.getSrc() + '.' + this.getSuffix()) + '\"' + style.trim() + ' />';\n      } else {\n        actor += '<img src=\"\"' + style + ' />';\n      }\n\n      actor += '</div>';\n      return actor;\n    },\n\n    _update: function(address, value) {\n      const imageChild = this.getDomElement().querySelector('img');\n      if (this.getUpdateType() === 'show') {\n        if (value === 0) {\n          imageChild.style.display = 'none';\n        } else {\n          imageChild.setAttribute('src', this.__getUrl(this.getSrc() + '.' + this.getSuffix()));\n          imageChild.style.display = 'block';\n        }\n      } else if (this.getUpdateType() === 'select') {\n        if (value === 0) {\n          imageChild.style.display = 'none';\n        } else {\n          imageChild.setAttribute('src', this.__getUrl(this.getSrc() + value + '.' + this.getSuffix()));\n          imageChild.style.display = 'block';\n        }\n      }\n\n      //TODO: add value if mapping exists\n      //TODO: get image name from mapping\n      //TODO: add bitmask for multiple images\n      //TODO: add SVG-magics\n    },\n\n    __getUrl: function(url) {\n      const parsedUri = qx.util.Uri.parseUri(url);\n      if (!parsedUri.protocol && !url.startsWith('/')) {\n        // is relative URI, use the ResourceManager\n        url = qx.util.ResourceManager.getInstance().toUri(url);\n      }\n      return url;\n    },\n\n    _action: function() {\n      if (this.getSendValue() === '') {\n return; \n}\n      this.sendToBackend(this.getSendValue());\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('imagetrigger', statics);\n  }\n});\n","/* Info.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a dynamic field to the visu that can represent values from the BUS\n * (e.g. 14-byte text or temperature measurements).\n *\n * @widgetexample <settings>\n *   <caption>Show temperature in degree celsius</caption>\n *   <screenshot name=\"info_temp\">\n *     <data address=\"0/0/0\">19</data>\n *   </screenshot>\n * </settings>\n * <info format=\"%.1f °C\">\n *   <label>outside temperature</label>\n *   <address transform=\"DPT:9.001\">0/0/0</address>\n * </info>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Info', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor\"><div class=\"value\">-</div></div>';\n    }\n  }\n});\n\n","/* InfoAction.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The infoaction widget is a combination of an info/text widget and an \"action\"-widget, e.g. switch or trigger.\n *\n * Use case: if you have a group of lights, you can show the number of lights currently switched on\n * and control the whole group in one widget.\n *\n * @widgetexample <settings>\n *   <caption>Example combines an info widget to show the number of lights currently switched on, and an Switch to control them</caption>\n *   <screenshot name=\"infoaction_lights\">\n *     <data address=\"0/0/0\">4</data>\n *     <data address=\"0/0/1\">1</data>\n *   </screenshot>\n * </settings>\n * <meta>\n *  <mappings>\n *    <mapping name=\"OnOff\">\n *      <entry value=\"0\">Off</entry>\n *      <entry value=\"1\">On</entry>\n *    </mapping>\n *  </mappings>\n *  <stylings>\n *    <styling name=\"GreyGreen\">\n *      <entry value=\"0\">grey</entry>\n *      <entry value=\"1\">green</entry>\n *    </styling>\n *  </stylings>\n * </meta>\n * <infoaction>\n *  <layout colspan=\"4\"/>\n *  <label>Lights</label>\n *  <widgetinfo>\n *    <info>\n *     <address transform=\"DPT:9.001\">0/0/0</address>\n *    </info>\n *  </widgetinfo>\n *  <widgetaction>\n *   <switch mapping=\"OnOff\" styling=\"GreyGreen\">\n *    <layout colspan=\"3\" />\n *    <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/1</address>\n *   </switch>\n *  </widgetaction>\n * </infoaction>\n *\n *\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (as widget), 0.9.2 (as plugin)\n */\nqx.Class.define('cv.ui.structure.pure.InfoAction', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    }\n  },\n\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return this.getChildrenDomString();\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infoaction', statics);\n  }\n});\n","/* InfoTrigger.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an element to the visu that contains two buttons and a value indication for feedback\n * from the BUS. (E.g. for multimedia control\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.InfoTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.Update,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.HandleLongpress\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    'downValue': {\n      check: 'Number',\n      init: 0\n    },\n    'shortDownValue': {\n      check: 'Number',\n      nullable: true\n    },\n    'downLabel': {\n      check: 'String',\n      nullable: true\n    },\n    'upValue': {\n      check: 'Number',\n      init: 0\n    },\n    'shortUpValue': {\n      check: 'Number',\n      nullable: true\n    },\n    'upLabel': {\n      check: 'String',\n      nullable: true\n    },\n    'isAbsolute': {\n      check: 'Boolean',\n      init: false\n    },\n    'min': {\n      check: 'Number',\n      init: 0\n    },\n    'max': {\n      check: 'Number',\n      init: 255\n    },\n    'infoPosition': {\n      check: ['left', 'middle', 'right'],\n      init: 'middle'\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      // create buttons + info\n      let ret_val = '<div style=\"float:left;\">';\n\n      let actordown = '<div class=\"actor switchUnpressed downlabel\" ';\n      if (this.getAlign()) {\n        actordown += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actordown += '>';\n      actordown += '<div class=\"label\">' + (this.getDownLabel() || '-') + '</div>';\n      actordown += '</div>';\n\n      let actorup = '<div class=\"actor switchUnpressed uplabel\" ';\n      if (this.getAlign()) {\n        actorup += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorup += '>';\n      actorup += '<div class=\"label\">' + (this.getUpLabel() || '+') + '</div>';\n      actorup += '</div>';\n\n      let actorinfo = '<div class=\"actor switchInvisible\" ';\n      if (this.getAlign()) {\n        actorinfo += 'style=\"text-align: ' + this.getAlign() + '\" ';\n      }\n      actorinfo += '><div class=\"value\">-</div></div>';\n\n      switch (this.getInfoPosition()) {\n        case 'middle':\n          ret_val += actordown;\n          ret_val += actorinfo;\n          ret_val += actorup;\n          break;\n        case 'right':\n          ret_val += actordown;\n          ret_val += actorup;\n          ret_val += actorinfo;\n          break;\n        default:\n          ret_val += actorinfo;\n          ret_val += actordown;\n          ret_val += actorup;\n          break;\n      }\n\n      return ret_val + '</div>';\n    },\n\n    getActors: function() {\n      return this.getDomElement().querySelectorAll('.actor.uplabel, .actor.downlabel');\n    },\n\n    // overridden\n    initListeners: function() {\n      this.getActors().forEach(function(actor) {\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    },\n\n    __findActor: function (element) {\n      while (!element.classList.contains('actor')) {\n        element = element.parentNode;\n        if (element.classList.contains('widget')) {\n          // thats too far\n          return null;\n        }\n      }\n      return element;\n    },\n\n    _onLongTap: function(event) {\n      this.__action(false, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    _action: function(event) {\n      this.__action(true, this.__findActor(event.getCurrentTarget()).classList.contains('downlabel'));\n    },\n\n    __action: function (isShort, isDown) {\n      let value;\n      if (isShort && this.getShortDownValue() !== null && this.getShortUpValue() !== null) {\n        value = isDown ? this.getShortDownValue() : this.getShortUpValue();\n      } else {\n        value = isDown ? this.getDownValue() : this.getUpValue();\n      }\n\n      const bitMask = (isShort ? 1 : 2);\n\n      if (this.getIsAbsolute()) {\n        let bvalue = parseFloat(this.getBasicValue());\n        if (!Number.isFinite(bvalue)) {\n          bvalue = 0; // anything is better than NaN...\n        }\n        value = bvalue + value;\n        value = Math.max(value, this.getMin());\n        value = Math.min(value, this.getMax());\n      }\n      this.sendToBackend(value, function(address) {\n        return !!(address.variantInfo & bitMask);\n      });\n    },\n\n    getDownActor: function() {\n      return this.getDomElement().querySelector('.actor.downlabel');\n    },\n\n    getUpActor: function() {\n      return this.getDomElement().querySelector('.actor.uplabel');\n    },\n\n    getInfoActor: function() {\n      return this.getDomElement().querySelector('.actor.switchInvisible');\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('infotrigger', statics);\n  }\n});\n","/* Line.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * A line tag is used to display a horizontal line in the browser to allow for a grouped and thereby tidy display of\n * elements on one page. To specify the width of the line an optional &lt;layout/&gt;-child can be added.\n *\n * @widgetexample <settings selector=\"hr\">\n *   <caption>A line tag which uses 50% of the screen size (6 of 12 available columns)</caption>\n * </settings>\n * <line><layout colspan=\"6\"/></line>\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Line', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    getDomString: function () {\n      return '<hr ' + (this.getClasses() ? 'class=\"'+this.getClasses()+'\"' : '') + '/>';\n    }\n  }\n});\n","/* MultiTrigger.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a widget with multiple buttons to the visu.\n * Thus, e.g. change the operating mode of the heating system\n * (Comfort -> Night -> Absent -> Frost protection) or create scene functions.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.MultiTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    showstatus: {\n      check: 'Boolean',\n      init: false\n    },\n    elementsPerLine: {\n      check: 'Number',\n      init: 2\n    },\n    buttonConfiguration: {\n      check: 'Object',\n      nullable: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      // create the actor\n      let ret_val = '<div class=\"actor_container\" style=\"float:left\">';\n      const mapping = this.getMapping();\n      const elementsPerLine = this.getElementsPerLine();\n\n      const config = this.getButtonConfiguration();\n      const indices = Object.keys(config).sort();\n\n      indices.forEach(function (i) {\n        const buttonConfig = config[i];\n        let label = buttonConfig.label;\n        if (mapping) {\n          const mappedValue = this.defaultValueHandling(undefined, buttonConfig.value);\n          if (mappedValue !== buttonConfig.value || !label) {\n            const div = document.createElement('div');\n            this.defaultValue2DOM(mappedValue, div);\n            label = div.innerHTML;\n          }\n        }\n\n        if (label) {\n          ret_val += '<div class=\"actor switchUnpressed\"><div class=\"value\">' + label + '</div></div>';\n        }\n        if (elementsPerLine > 0 && i % elementsPerLine === 0) {\n          ret_val+= '<br/>';\n        }\n      }, this);\n      return ret_val + '</div>';\n    },\n\n    getActors: function() {\n      return this.getDomElement().querySelectorAll('.actor_container .actor');\n    },\n\n    // overridden, only transform the value, do not apply it to DOM\n    _processIncomingValue: function (address, data) {\n      return this.applyTransform(address, data);\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     */\n    handleUpdate: function () {\n      const children = this.getActors();\n      const buttonConfiguration = this.getButtonConfiguration();\n      children.forEach(function(actor) {\n        const index = Array.prototype.indexOf.call(children, actor) + 1;\n        if (Object.prototype.hasOwnProperty.call(buttonConfiguration, index)) {\n          const isPressed = ('' + this.getBasicValue()) === ('' + buttonConfiguration[index].value); // compare as string\n\n          // delay this a little bit to give the HasAnimatedButton stuff time to finish\n          // otherwise it might override the settings here\n          new qx.util.DeferredCall(function () {\n            actor.classList.remove(isPressed ? 'switchUnpressed' : 'switchPressed');\n            actor.classList.add(isPressed ? 'switchPressed' : 'switchUnpressed');\n          }, this).schedule();\n        }\n      }, this);\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @param event\n     */\n    getActionValue: function (event) {\n      const index = Array.prototype.indexOf.call(this.getDomElement().querySelectorAll('.actor_container .actor'), event.getCurrentTarget()) + 1;\n      return this.getButtonConfiguration()[index].value;\n    },\n\n    // overridden\n    initListeners: function() {\n      if (this.isAnonymous()) {\n return; \n}\n\n      this.getActors().forEach(function(actor) {\n        qx.event.Registration.addListener(actor, 'tap', this.action, this);\n        qx.event.Registration.addListener(actor, 'pointerdown', this._onPointerDown, this);\n      }, this);\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('multitrigger', statics);\n  }\n});\n","/* NavBar.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the widget navbar, you can add a navigation menu to the entire visu.\n * The menu can be displayed on a page (top, bottom, left, right).\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.NavBar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    name: {\n      check: 'String',\n      nullable: true\n    },\n    scope: {\n      check: 'Number',\n      init: -1\n    },\n    width: {\n      check: 'String',\n      init: '300'\n    },\n    position: {\n      check: ['top', 'left', 'right', 'bottom'], \n      init: 'left'\n    },\n    dynamic: {\n      check: 'Boolean',\n      nullable : true,\n      init: null\n    },\n    visible: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    _navbarTop: '',\n    _navbarLeft: '',\n    _navbarRight: '',\n    _navbarBottom: '',\n    _touchX: null,\n    _touchY: null,\n\n    /**\n     * Called on setup.dom.finished event with high priority. Adds the navbar dom string\n     * to the DOM-Tree\n     */\n    initializeNavbars: function() {\n      ['Top', 'Left', 'Right', 'Bottom'].forEach(function(pos) {\n        if (this['_navbar'+pos]) {\n          const elem = document.querySelector('#navbar' + pos);\n          if (elem) {\n            elem.innerHTML += this['_navbar' + pos];\n          }\n        }\n      }, this);\n\n      const self = this;\n      // Event handlers to allow navbar fade in and fade out.\n      // Currently only implemented for the major use case of a left navbar.\n      // TODO add logic for other navbars as well\n      // Logic:\n      //   To fade in the touch must start on the left screen side and then\n      //   swipe right.\n      //   To fade out all places on the screen are fine.\n      //   There is a minimum swipe distance and the direction must be mostly\n      //   horizontal (up to +/-45° tolerance is allowed)\n      //   When during a valid swipe the direction is reversed the fading\n      //   action is also reverted.\n      const content = document.body.querySelector('#centerContainer');\n      content.addEventListener('touchstart', function (evt) {\n        const touches = evt.touches[0];\n        const pPH = cv.Application.structureController.pagePartsHandler;\n\n        if (pPH.navbars.left.dynamic === false ||\n          (!qx.core.Init.getApplication().getMobile() && pPH.navbars.left.dynamic !== true) ||\n          (pPH.navbars.left.fadeVisible && !evt.composedPath().some(i => i.id==='navbarLeft')) || // left navbar is visible, but the touch is somewhere else\n          (!pPH.navbars.left.fadeVisible && touches.clientX > 20)) { // left navbar is not visible but the finger isn't on the left end -> not relevant\n          return;\n        }\n\n        self._touchX = touches.clientX;\n        self._touchY = touches.clientY;\n      }, {passive: true});\n      content.addEventListener('touchend', function () {\n        self._touchX = null;\n        self._touchY = null;\n      }, false);\n      content.addEventListener('touchmove', function (evt) {\n        if (self._touchX === null) {\n          return; // early exit as this touch isn't relevant for us\n        }\n\n        const touches = evt.touches[0];\n        const x = touches.clientX - self._touchX;\n        const y = touches.clientY - self._touchY;\n        const necessaryDistance = 10;\n        const enoughDistance = Math.abs(x) > necessaryDistance;\n        const horizontal = Math.abs(x) > Math.abs(y);\n        const toRight = x > 0;\n        if (horizontal && enoughDistance) {\n          evt.preventDefault();\n          const pPH = cv.Application.structureController.pagePartsHandler;\n          if (toRight) {\n            self._touchX = touches.clientX - necessaryDistance;\n            self._touchY = touches.clientY;\n            if (!pPH.navbars.left.fadeVisible) {\n              pPH.fadeNavbar('Left', 'in', 250);\n            }\n          } else { // !toRight\n            self._touchX = touches.clientX + necessaryDistance;\n            self._touchY = touches.clientY;\n            if (pPH.navbars.left.fadeVisible) {\n              pPH.fadeNavbar('Left', 'out', 250);\n            }\n          }\n        }\n      }, {passive: false});\n    }\n  },\n  \n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n    },\n    \n    getGlobalPath: function () {\n      const id = this.getPath().split('_');\n      id.pop();\n      return id.join('_') + '_' + this.getPosition() + '_navbar';\n    },\n\n    // overridden\n    getDomString: function () {\n      let container = '<div class=\"' + this.getClasses() + '\" id=\"' + this.getGlobalPath() + '\">';\n      if (this.getName()) {\n        container += '<h2>' + this.getName() + '</h2>';\n      }\n      container += this.getChildrenDomString();\n\n      container += '</div>';\n\n      // add this to the navbars in DOM not inside the page\n      switch (this.getPosition()) {\n        case 'top':\n          this.self(arguments)._navbarTop += container;\n          break;\n\n        case 'left':\n          this.self(arguments)._navbarLeft += container;\n          break;\n\n        case 'right':\n          this.self(arguments)._navbarRight += container;\n          break;\n\n        case 'bottom':\n          this.self(arguments)._navbarBottom += container;\n          break;\n      }\n\n      return '';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('navbar', statics);\n    qx.event.message.Bus.subscribe('setup.dom.finished.before', statics.initializeNavbars, statics);\n  }\n});\n","/* NotificationCenterBadge.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Shows the current number of messages in {@link cv.ui.NotificationCenter} and opens it on click.\n *\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a centered text widget</caption>\n *   <screenshot name=\"text_example\" />\n * </settings>\n * <notificationcenterbadge>\n *  <layout colspan=\"0\" />\n * </notificationcenterbadge>\n *\n * @author Tobias Bräutigam\n * @since 0.11.0\n */\nqx.Class.define('cv.ui.structure.pure.NotificationCenterBadge', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    const classes = props.classes.trim().split(' ');\n    const i_right = classes.indexOf('right');\n\n    if (i_right !== -1) {\n      // do not align, but float the container instead\n      this.setContainerClass('float-right');\n      classes.splice(i_right, 1);\n      props.classes = classes.join(' ');\n    }\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    counter: {\n      check: 'Number',\n      init: 0,\n      apply: '_applyCounter'\n    },\n    hideWhenEmpty: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __badgeElement: null,\n\n    _onDomReady: function() {\n      this.base(arguments);\n      const center = cv.ui.NotificationCenter.getInstance();\n      center.getMessages().addListener('changeLength', this._onChangeCounter, this);\n      this._onChangeCounter();\n      center.addListener('changedGlobalSeverity', this._onChangeGlobalSeverity, this);\n    },\n\n    // property apply\n    _applyVisible: function(value) {\n      // hide NotificationCenters own badge while we are visible\n      cv.ui.NotificationCenter.getInstance().disableBadge(value);\n    },\n\n    action: function(ev) {\n      if (this._skipNextEvent === ev.getType()) {\n        this._skipNextEvent = null;\n        return;\n      }\n      cv.ui.NotificationCenter.getInstance().toggleVisibility();\n    },\n\n    __getBadgeElement: function() {\n      if (!this.__badgeElement) {\n        this.__badgeElement = this.getDomElement().querySelector('.badge');\n      }\n      return this.__badgeElement;\n    },\n\n    _onChangeGlobalSeverity: function(ev) {\n      const classList = this.__getBadgeElement().classList;\n      classList.remove.apply(classList, cv.ui.NotificationCenter.getInstance().getSeverities());\n      if (ev.getData()) {\n        classList.add(ev.getData());\n      }\n    },\n\n    _onChangeCounter: function() {\n      const messages = cv.ui.NotificationCenter.getInstance().getMessages().length;\n      this.__getBadgeElement().innerHTML = ''+messages;\n      if (this.isHideWhenEmpty()) {\n        this.__getBadgeElement().style.display = messages === 0 ? 'none' : 'block';\n      }\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      let style = '';\n      if (this.isHideWhenEmpty() && this.getCounter() === 0) {\n        style = ' style=\"display: none;\"';\n      }\n      return '<div class=\"actor badge\"'+style+'>'+this.getCounter()+'</div>';\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    const center = cv.ui.NotificationCenter.getInstance();\n    center.getMessages().removeListener('changeLength', this._onChangeCounter, this);\n    center.removeListener('changedGlobalSeverity', this._onChangeGlobalSeverity, this);\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('notificationcenterbadge', statics);\n  }\n});\n","/* Page.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Creates a new sub page and adds a corresponding link to the current page.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Page', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  include: [\n    cv.ui.common.HasChildren,\n    cv.ui.common.Update\n  ],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.__waitForProperties = ['showNavbarTop', 'showNavbarBottom', 'showNavbarLeft', 'showNavbarRight'];\n    this.base(arguments, props);\n\n    this.addListener('changeVisible', this._onChangeVisible, this);\n\n    // break out of the constructor\n    new qx.util.DeferredCall(function() {\n      const parentPage = this.getParentPage();\n      if (!parentPage) {\n        this.__waitForProperties = [];\n      } else {\n        this.debug('binding navbar visibility from ' + parentPage.getPath() + ' to ' + this.getPath());\n      }\n      [\n        ['showTopNavigation', true],\n        ['showFooter', true],\n        ['showNavbarTop', false],\n        ['showNavbarBottom', false],\n        ['showNavbarLeft', false],\n        ['showNavbarRight', false]\n      ].forEach(function (tuple) {\n        const property = tuple[0];\n        const defaultValue = tuple[1];\n        if (this['get' + property.charAt(0).toUpperCase() + property.substr(1)]() === null) {\n          // inherit from parent\n          if (parentPage) {\n            parentPage.bind(property, this, property);\n          } else {\n            // we have not parent page, because we are the root page, use the default value\n            this['set' + property.charAt(0).toUpperCase() + property.substr(1)](defaultValue);\n          }\n        }\n        if (!parentPage) {\n          this.setInitialized(true);\n        }\n      }, this);\n    }, this).schedule();\n\n    if (this.getAddress()) {\n      this._initOnCreate = true;\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    allPages : '',\n\n    /**\n     * Append the complete generated HTML code to the DOM tree at the end of the generation process\n     */\n    createFinal: function() { // special function - only for pages!\n      const target = cv.Application.structureController.getRenderTarget();\n      document.querySelector(target).innerHTML = this.allPages;\n      qx.event.message.Bus.unsubscribe('setup.dom.append', this.createFinal, this);\n    }\n\n  },\n\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    initialized: {\n      check: 'Boolean',\n      init: false,\n      event: 'changeInitialized'\n    },\n\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    name: {\n      check: 'String',\n      init: '', nullable: true\n    },\n    showTopNavigation : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowTopNavigation'\n    },\n    showFooter        : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowFooter'\n    },\n    showNavbarTop : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarTop',\n      apply: '_applyNavbarVisibility'\n    },\n    showNavbarBottom : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarBottom',\n      apply: '_applyNavbarVisibility'\n    },\n    showNavbarLeft : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarLeft',\n      apply: '_applyNavbarVisibility'\n    },\n    showNavbarRight : {\n      check: 'Boolean',\n      nullable: true,\n      event: 'changeShowNavbarRight',\n      apply: '_applyNavbarVisibility'\n    },\n    backdropAlign     : {\n      init: '50% 50%',\n      nullable: true\n    },\n    backdropType      : { check: 'String', nullable: true },\n    linkVisible       : { check: 'Boolean', init: true, nullable: true },\n    size              : { check: 'String', nullable: true },\n    backdrop          : { check: 'String', nullable: true }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    __waitForProperties: null,\n    __colspanClass: null,\n    __normalizedDomId: null,\n\n    _applyNavbarVisibility: function(value, old, name) {\n      if (value !== null) {\n        const i_name = this.__waitForProperties.indexOf(name);\n        if (i_name !== -1) {\n          this.__waitForProperties.splice(i_name, 1);\n        }\n        if (this.__waitForProperties.length === 0) {\n          this.setInitialized(true);\n        }\n      }\n    },\n\n    /**\n     * If the page gets visible the colspan sized must be checked\n     * @param ev {Event}\n     */\n    _onChangeVisible: function(ev) {\n      if (ev.getData()) {\n        if (this.__colspanClass !== cv.ui.structure.pure.layout.Manager.COLSPAN_CLASS) {\n          this.applyColumnWidths();\n        }\n        if (this.getBackdrop()) {\n          cv.ui.structure.pure.layout.ResizeHandler.invalidateBackdrop();\n        }\n      }\n    },\n\n    /**\n     * Set children column widths\n     */\n    applyColumnWidths: function() {\n      cv.ui.structure.pure.layout.Manager.applyColumnWidths('#'+this.getPath(), false);\n      this.__colspanClass = cv.ui.structure.pure.layout.Manager.COLSPAN_CLASS;\n    },\n\n    // overridden\n    getDomString: function() {\n      const pageType = this.getPageType();\n\n      const subpageClass = this.getFlavour() ? (' flavour_' + this.getFlavour()) : '';\n      let subpage = '<div class=\"page type_' + pageType + subpageClass + '\" id=\"' + this.getPath() + '\">';\n      let container = '<div class=\"clearfix\"><h1>' + this.getName() + '</h1>';\n\n      if (pageType === '2d') {\n        let size = 'width:100%;height:100%;';\n        switch (this.getSize()) {\n          case 'fixed':\n            size += 'object-fit:none;';\n            if (this.getBackdropAlign()) {\n              size += 'object-position:' + this.getBackdropAlign() + ';';\n            }\n            break;\n\n          case 'contained':\n            size += 'object-fit:contain;';\n            if (this.getBackdropAlign()) {\n              size += 'object-position:' + this.getBackdropAlign() + ';';\n            }\n            break;\n\n          default: // default: assume scaled\n        }\n\n        const backdrop = this.getBackdrop();\n        if (backdrop) {\n          container += '<' + this.getBackdropType() + ' src=\"' + qx.util.ResourceManager.getInstance().toUri(backdrop) + '\" style=\"position: absolute; top: 0px; left: 0px;z-index:-1;' + size + '\"/>';\n        }\n      } /* ---Disable 3D for 0.8---\n      else if (pageType === \"3d\" && false) {\n         var floorplan = JSFloorPlan3D( container, backdrop );\n         floorplan.moveToRoom( 'Underground', false, true, false );\n         container.data( 'JSFloorPlan3D', floorplan );\n         container.find('canvas').css({position: 'absolute', top: '0px', left: '0px', 'z-index':'-1', width:'100%',height:'100%'});\n         subpage.click( {JSFloorPlan3D:floorplan,callback:function(event){\n         var j = this.JSFloorPlan3D;\n         j.moveToRoom( j.getState('showFloor'), event.room.room, true, true, function(){\n         container.trigger( 'update3d', j );\n         });\n         }}, floorplan.translateMouseEvent );\n         $(window).bind( 'resize', function(){ floorplan.resize($('.page').width(), $('.page').height(), true);} );\n         if (page.getAttribute('azimut')) {\n         cv.TemplateEngine.getInstance().addAddress( page.getAttribute('azimut'), path + '_' );\n         address[ page.getAttribute('azimut') ] = [ 'DPT:9.001', 0, 'azimut' ];\n         }\n         if (page.getAttribute('elevation')) {\n         cv.TemplateEngine.getInstance().addAddress( page.getAttribute('elevation'), path + '_' );\n         address[ page.getAttribute('elevation') ] = [ 'DPT:9.001', 0, 'elevation' ];\n         };\n         if (page.getAttribute('floor')) {\n         cv.TemplateEngine.getInstance().addAddress( page.getAttribute('floor'), path + '_' );\n         address[ page.getAttribute('floor') ] = [ 'DPT:5.004', 0, 'floor' ];\n         };\n\n         $( childs ).each( function(i,a){\n         if( this.tagName === 'filter' )\n         {\n         var floorFilter = $(this).attr('floor');\n         var roomFilter  = $(this).attr('room');\n         childs.splice( i, 1 );                 // remove filter element\n         $(this).children().each( function(j){  // and add it's children\n         $(this).find('layout').attr({floorFilter:floorFilter,roomFilter:roomFilter});\n         childs.splice( i+j, 0, this );\n         });\n         }\n         });\n      } */\n      container += this.getChildrenDomString();\n      subpage += container + '</div></div>';\n      cv.ui.structure.pure.Page.allPages = subpage + cv.ui.structure.pure.Page.allPages;\n      return undefined;\n    },\n\n    _update: function(ga, data) {\n      // widgetData  = cv.data.Model.getInstance().getWidgetDataByElement( element );\n      // var value = this.defaultValueHandling( ga, data, widgetData );\n      // var type = widgetData.address[ ga ][2];\n      // switch( type )\n      // {\n      //   case 'azimut':\n      //     widgetData.JSFloorPlan3D.setState('currentAzimut', value, true);\n      //     element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     break;\n      //\n      //   case 'elevation':\n      //     widgetData.JSFloorPlan3D.setState('currentElevation', value, true);\n      //     element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     break;\n      //\n      //   case 'floor':\n      //     widgetData.JSFloorPlan3D.moveToRoom( value, false, true, true, function(){\n      //       element.trigger( 'update3d', widgetData.JSFloorPlan3D );\n      //     });\n      //     break;\n      //\n      //   default:\n      // TODO: data comparision has to be refactored to use DPT and a value\n      if (parseInt(data) === 1) {\n        cv.Application.structureController.scrollToPage(this.getPath());\n        this.sendToBackend('0');\n      }\n      // }\n    },\n\n    sendToBackend: function (value) {\n      if (this.getAddress) {\n        const list = this.getAddress();\n        for (let id in list) {\n          if (Object.prototype.hasOwnProperty.call(list, id)) {\n            const address = list[id];\n            if (cv.data.Model.isWriteAddress(address)) {\n              cv.io.BackendConnections.getClient().write(id, cv.Transform.encode(address, value));\n            }\n          }\n        }\n      }\n    }\n  },\n\n  defer: function(statics) {\n    qx.event.message.Bus.subscribe('setup.dom.append', statics.createFinal, statics);\n  }\n});\n","/* PageJump.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The pagejump widget can be used to link the visu pages.\n * The function is similar to hyperlinks.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.PageJump', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.HasChildren,\n    cv.ui.common.HasAnimatedButton\n  ],\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (props) {\n    if (!props.name) {\n      // when there is no name the widget has no actor as clickable subelement, so we need\n      // to bind the click events to the whole widget\n      props.bindClickToWidget = true;\n    }\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    target : {\n      check: 'String',\n      init: '0'\n    },\n    activeScope : {\n      check: ['target', 'path'],\n      init: 'target'\n    },\n    name : {\n      check: 'String',\n      nullable: true\n    },\n    targetPath : {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    /**\n     * Handle page change events and update the active state of this PageJump\n     *\n     * @param ev {Event}\n     * @protected\n     */\n    _onScrollToPage: function(ev) {\n      const page_id = ev.getData();\n      const page = cv.ui.structure.WidgetFactory.getInstanceById(page_id);\n      const model = cv.data.Model.getInstance();\n      const name = page.getName();\n\n      // remove old active classes\n      document.querySelectorAll('.pagejump.active').forEach(function(elem) {\n        elem.classList.remove('active');\n      }, this);\n      document.querySelectorAll('.pagejump.active_ancestor').forEach(function(elem) {\n        elem.classList.remove('active_ancestor');\n      }, this);\n\n      // and set the new active ones\n      document.querySelectorAll('.pagejump').forEach(function(elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (name === data.target) {\n          elem.classList.add('active');\n        }\n      }, this);\n\n      // now set the active ancestors\n      let parentPage = cv.util.Tree.getParentWidget(page, 'page');\n      // set for all parent pages apart from the root page\n\n      const pageJumps = document.querySelectorAll('.pagejump');\n      const markPageJumps = function (parentName, elem) {\n        const data = model.getWidgetDataByElement(elem);\n        if (parentName === data.target || (data.activeScope === 'path' && (\n            (typeof data.path === 'string') && data.path.match(parentName + '$') ||\n            (typeof data.targetPath === 'string') && data.targetPath.match(parentName + '$'))\n        )) {\n          elem.classList.add('active_ancestor');\n        }\n      };\n\n      while (parentPage && cv.util.Tree.getParentWidget(parentPage, 'page')) {\n        pageJumps.forEach(function(elem) {\n          markPageJumps(parentPage.getName(), elem);\n        });\n        // recursively find pagejumps for parent pages\n        parentPage = cv.util.Tree.getParentWidget(parentPage, 'page');\n      }\n    }\n  },\n\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n\n    // overridden\n    _getInnerDomString: function() {\n      let actor = '<div class=\"actor switchUnpressed';\n      if (this.getAlign()) {\n        actor += ' ' + this.getAlign();\n      }\n      actor += '\">';\n      if (this.getName()) {\n        actor += '<div class=\"value\">' + this.getName() + '</div>';\n      }\n      actor += '</div>';\n      return actor + this.getChildrenDomString();\n    },\n\n    // overridden\n    action: function() {\n      let target = this.getTarget();\n      if (this.getTargetPath() !== null) {\n        target = cv.Application.structureController.getPageIdByPath(target, this.getTargetPath());\n      }\n      cv.Application.structureController.scrollToPage(target);\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagejump', statics);\n    qx.event.message.Bus.subscribe('path.pageChanged', statics._onScrollToPage, statics);\n  }\n});\n","/* PageLink.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * PageLink Widget for visible pages. Do not use this directly because the pagelink widget\n * is automatically added when you use a page widget with parameter <code>visible=true</code>.\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (2017)\n */\nqx.Class.define('cv.ui.structure.pure.PageLink', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    name : {\n      check: 'String',\n      init: '',\n      nullable: true\n    },\n    wstyle : {\n      check: 'String',\n      init: ''\n    },\n    address : {\n      check: 'Object',\n      init: {}\n    },\n    bindClickToWidget: {\n      refine: true,\n      init: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    getDomString: function() {\n      const layout = this.getLayout();\n\n      const style = typeof layout === 'object' ? '' : 'style=\"' + cv.parser.pure.WidgetParser.extractLayout(layout, this.getPageType()) + '\"';\n\n      let ret_val = '<div class=\"widget clearfix link pagelink ' + this.getClasses() + '\" ' + style + '>';\n      ret_val += '<div class=\"actor\" ' + this.getWstyle() + '><a href=\"javascript:void(0)\">' + this.getName() + '</a></div>';\n      ret_val += '</div>';\n      return ret_val;\n    },\n\n    // overridden\n    action: function() {\n      cv.Application.structureController.scrollToPage(this.getPath() + '_');\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pagelink', statics);\n  }\n});\n","/* PushButton.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a button to the visu that sends a defined value to the BUS when you press and release.\n * E.g. pushing a 1 and releasing a 0. This makes it possible, for example,\n * to simulate a push button to open and close a garage door, blinds or blinds.\n *\n * @since 2013\n */\nqx.Class.define('cv.ui.structure.pure.PushButton', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    'downValue': {check: 'String', init: '1'},\n    'upValue': {check: 'String', init: '0'}\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    // overridden\n    initListeners: function() {\n      this.addElementListener('pointerdown', this._onPointerDown, this);\n      this.addElementListener('pointerup', this._onPointerUp, this);\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     *\n     * @param value {any} incoming data (already transformed + mapped)\n     */\n    handleUpdate: function (value) {\n      const actor = this.getActor();\n      // compare against the unmapped value\n      value = '' + this.getBasicValue();\n      const off = this.getUpValue();\n      actor.classList.remove(value === off ? 'switchPressed' : 'switchUnpressed');\n      actor.classList.add(value === off ? 'switchUnpressed' : 'switchPressed');\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @param event\n     */\n    getActionValue: function (event) {\n      if (event.type === 'pointerup') {\n        return this.getUpValue();\n      } \n        return this.getDownValue();\n    },\n\n    _onPointerUp: function () {\n      const sendValue = this.getUpValue();\n      this.sendToBackend(sendValue, function (address) {\n        return (!address.variantInfo || address.variantInfo === 'up');\n      });\n    },\n\n    _onPointerDown: function () {\n      const sendValue = this.getDownValue();\n      this.sendToBackend(sendValue, function (address) {\n        return (!address.variantInfo || address.variantInfo === 'down');\n      });\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('pushbutton', statics);\n  }\n});\n","/* Refresh.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the widget refresh, the visu is added a switch, which allows the visu to reload the displayed data.\n *\n * @author Christian Mayer\n * @since 2014\n */\nqx.Class.define('cv.ui.structure.pure.Refresh', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.HasAnimatedButton, cv.ui.common.BasicUpdate],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', nullable: true }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.defaultUpdate(undefined, this.getSendValue());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    _action: function() {\n      cv.io.BackendConnections.getClient().restart(true);\n    }\n  }\n});\n","/* Reload.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the reload widget, the visu is added a switch, which allows to reload the full visu in the browser.\n *\n * @author Christian Mayer\n * @since 2014\n */\nqx.Class.define('cv.ui.structure.pure.Reload', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Update\n  ],\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden, return undefined to prevent widget from being renderered into DOM\n    getDomString: function() {\n      return;\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return;\n    },\n\n    _update: function (address, data) {\n      const value = this.defaultValueHandling(address, data);\n      if (value > 0) {\n        cv.util.Location.reload(true);\n      }\n    }\n  }\n});\n","/* Rgb.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * With the RGB widget you can display a colour in the visu.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Rgb', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Update],\n\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor\"><div class=\"value\"></div></div>';\n    },\n\n    /**\n     * Updates the RGB widget by setting the background color\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update: function(address, data) {\n      if (data === undefined || address === undefined) {\n        return;\n      }\n      const valElem = this.getValueElement();\n\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n\n      let bg = window.getComputedStyle(valElem)['background-color'].replace(/[a-zA-Z()\\s]/g, '').split(/,/);\n      if (bg.length !== 3) {\n        bg = [0, 0, 0];\n      }\n      switch (this.getAddress()[address].variantInfo) {\n        case 'r':\n          bg[0] = value;\n          break;\n        case 'g':\n          bg[1] = value;\n          break;\n        case 'b':\n          bg[2] = value;\n          break;\n      }\n      valElem.style['background-color'] = 'rgb(' + bg[0] + ', ' + bg[1] + ', ' + bg[2] + ')';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('rgb', statics);\n  }\n});\n","/* Roundbar.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a display to the visu that can represent values from the BUS\n * and shows them with a round bar.\n *\n * @widgetexample <settings>\n *    <caption>Example roundbar widget</caption>\n *    <screenshot name=\"roundbar_simple\">\n *      <data address=\"3/3/1\">63.3</data>\n *    </screenshot>\n *  </settings>\n *  <roundbar>\n *      <address transform=\"DPT:9.001\" mode=\"read\">3/3/1</address>\n *  </roundbar>\n *\n * @author Christian Mayer\n * @since 0.12.0 (2020)\n */\nqx.Class.define('cv.ui.structure.pure.Roundbar', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n  /*\n  ***********************************************\n    CONSTRUCTOR\n  ***********************************************\n  */\n  construct: function (props) {\n    this.__indicatorDOMElement = [];\n    this.base(arguments, props);\n  },\n\n  /*\n  ******************************************************\n    STATICS\n  ******************************************************\n  */\n  statics: {\n    coord: function(position) {\n      return position.x.toFixed(1) + ' ' + position.y.toFixed(1);\n    },\n    /**\n     * Create the SVG path for the round bar.\n     * Angle = 0 === horizontal on the right\n     *\n     * @param startAngle {Float}\n     * @param startArrowPoint {Float}\n     * @param endAngle {Float}\n     * @param endArrowPoint {Float}\n     * @param radius {Float}\n     * @param width {Float}\n     * @param getBBox {Boolean} return the bounding box instead of the path itself\n     */\n    createBarPath: function(startAngle, startArrowPoint, endAngle, endArrowPoint, radius, width, getBBox = false) {\n      const startArrowPointAngle = startAngle + startArrowPoint;\n      const endArrowPointAngle = endAngle + endArrowPoint;\n\n      // The path to generate is using those positions:\n      // rO             -- outer --\n      // rMO        /// outermiddle \\\\\\\n      // rM      //       middle        \\\\\n      // rIM   /        innermiddle        \\\n      // rI   /         -- inner --         \\\n      //     |        /             \\        |\n      //     |_______|               |_______|\n      //       start      center        end\n      const clockwise = startAngle > endAngle ? 1 : 0;\n      const rI = radius;\n      const rIM = radius + width * 1 / 4;\n      const rM = radius + width * 2 / 4;\n      const rMO = radius + width * 3 / 4;\n      const rO = radius + width;\n      const startInner = {x: Math.cos(startAngle) * rI, y: -Math.sin(startAngle) * rI};\n      const startMiddle = {x: Math.cos(startArrowPointAngle) * rM, y: -Math.sin(startArrowPointAngle) * rM};\n      const startOuter = {x: Math.cos(startAngle) * rO, y: -Math.sin(startAngle) * rO};\n      const centerInner = {\n        x: Math.cos((startAngle + endAngle) / 2) * rI,\n        y: -Math.sin((startAngle + endAngle) / 2) * rI\n      };\n      const centerOuter = {\n        x: Math.cos((startAngle + endAngle) / 2) * rO,\n        y: -Math.sin((startAngle + endAngle) / 2) * rO\n      };\n      const endInner = {x: Math.cos(endAngle) * rI, y: -Math.sin(endAngle) * rI};\n      const endMiddle = {x: Math.cos(endArrowPointAngle) * rM, y: -Math.sin(endArrowPointAngle) * rM};\n      const endOuter = {x: Math.cos(endAngle) * rO, y: -Math.sin(endAngle) * rO};\n      const startMiddleFlag = Math.abs(startAngle - startArrowPointAngle) > Math.PI ? 1 : 0;\n      const startEndFlag = Math.abs(startAngle - endAngle) / 2 > Math.PI ? 1 : 0;\n      const endMiddleFlag = Math.abs(endAngle - endArrowPointAngle) > Math.PI ? 1 : 0;\n      const startMiddleDir = startAngle < startArrowPointAngle ? 1 : 0;\n      const endMiddleDir = endAngle < endArrowPointAngle ? 1 : 0;\n\n      /**\n       * @param start\n       * @param end\n       * @param r\n       * @param flag\n       * @param cw\n       */\n      function arc(start, end, r, flag, cw) {\n        return (start.x===end.x) && (start.y===end.y)\n          ? ''\n          : (Math.abs(start.x-end.x)+Math.abs(start.y-end.y) < 2)\n            ? 'L' + cv.ui.structure.pure.Roundbar.coord(end)\n            : ['A', r, r, 0, flag, cw, cv.ui.structure.pure.Roundbar.coord(end)].join(' ');\n      }\n\n      if (getBBox) {\n        const rMax = Math.max(rI, rO);\n        const isInside = function (a) {\n          return (startAngle < a && a < endAngle) || (startAngle > a && a > endAngle);\n        };\n        const rMiddle = isInside(-Math.PI * 4 / 2) || isInside(Math.PI * 0 / 2) ? rMax : startInner.x;\n        const uMiddle = isInside(-Math.PI * 3 / 2) || isInside(Math.PI * 1 / 2) ? -rMax : startInner.y;\n        const lMiddle = isInside(-Math.PI * 2 / 2) || isInside(Math.PI * 2 / 2) ? -rMax : startInner.x;\n        const dMiddle = isInside(-Math.PI * 1 / 2) || isInside(Math.PI * 3 / 2) ? rMax : startInner.y;\n        return {\n          u: Math.min(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, uMiddle),\n          d: Math.max(startInner.y, startMiddle.y, startOuter.y, endInner.y, endMiddle.y, endOuter.y, dMiddle),\n          l: Math.min(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, lMiddle),\n          r: Math.max(startInner.x, startMiddle.x, startOuter.x, endInner.x, endMiddle.x, endOuter.x, rMiddle)\n        };\n      }\n\n      // a thin bar path should just be a single line\n      if (width < 1.0) {\n        return [\n          'M', cv.ui.structure.pure.Roundbar.coord(startOuter),\n          arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n          arc(centerOuter, endOuter, rO, startEndFlag, clockwise)\n        ].join('');\n      }\n\n      return ['M', cv.ui.structure.pure.Roundbar.coord(startInner),\n        startArrowPointAngle === startAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(startOuter)\n          : arc(startInner, startMiddle, rIM, startMiddleFlag, 1-startMiddleDir) +\n            arc(startMiddle, startOuter, rMO, startMiddleFlag, startMiddleDir),\n        arc(startOuter, centerOuter, rO, startEndFlag, clockwise),\n        arc(centerOuter, endOuter, rO, startEndFlag, clockwise),\n        endArrowPointAngle === endAngle\n          ? 'L' + cv.ui.structure.pure.Roundbar.coord(endInner)\n          : arc(endOuter, endMiddle, rMO, endMiddleFlag, 1-endMiddleDir) +\n            arc(endMiddle, endInner, rIM, endMiddleFlag, endMiddleDir),\n        arc(startInner, centerInner, rI, startEndFlag, 1-clockwise),\n        arc(centerInner, startInner, rI, startEndFlag, 1-clockwise),\n        'Z'\n      ].join('');\n    },\n    /**\n     * Create the SVG path for an pointer.\n     * @param angle {Float}\n     * @param p {Object} Indicator object\n     */\n    createPointerPath: function(angle, p) {\n      const s = Math.sin(angle);\n      const c = Math.cos(angle);\n      const wx = c * p.width;\n      const wy = s * p.width;\n\n      if (p.thickness > 0) {\n        const tx = -s * p.thickness / 2;\n        const ty = c * p.thickness / 2;\n        return [\n          'M', this.coord({x:c*p.radius+wx-tx, y: -(s*p.radius+wy-ty)}),\n          'L', this.coord({x:c*p.radius, y: -(s*p.radius)}),\n          'L', this.coord({x:c*p.radius+wx+tx, y: -(s*p.radius+wy+ty)})\n        ].join('');\n      } \n        return [\n          'M', this.coord({x:c*p.radius, y: -(s*p.radius)}),\n          'L', this.coord({x:c*p.radius+wx, y: -(s*p.radius+wy)})\n        ].join('');\n    }\n  },\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    type: { check: 'Array' },\n    indicators: { check: 'Array' },\n\n    min: { check: 'Number' },\n    max: { check: 'Number' },\n    axisradius: { check: 'Number' },\n    axiswidth: { check: 'Number' },\n    axiscolor: { check: 'String' },\n    ranges: { check: 'Array' },\n    minorradius: { check: 'Number' },\n    minorwidth: { check: 'Number' },\n    minorspacing: { check: 'String' },\n    minorcolor: { check: 'String' },\n    majorradius: { check: 'Number' },\n    majorwidth: { check: 'Number' },\n    majorposition: { check: 'String' },\n    majorcolor: { check: 'String' },\n    labels: { check: 'Array' },\n    labelstyle: { check: 'String' },\n    start: { check: 'Number' },\n    end: { check: 'Number' },\n    arrowtype: { check: 'Number' },\n    spacing: { check: 'Number' },\n    overflowarrow: { check: 'Boolean' },\n    fontsize: { check: 'Number' },\n    textx: { check: 'Number' },\n    texty: { check: 'Number' },\n    textlength: { check: 'Number' },\n    textanchor: { check: 'String' },\n    linespace: { check: 'Number' },\n    bboxgrow: { check: 'Object' },\n    debug: { check: 'Boolean' },\n    currentRatioValue: { check: 'Array', init: [] },\n    targetRatioValue: { check: 'Array', init: [] }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __animator: undefined,\n    __indicatorDOMElement: null,\n\n    // overridden\n    _getInnerDomString: function () {\n      /**\n       * Grow the bounding box to also contain the parameters x and y\n       * @param bbox {Object} The initial bounding box\n       * @param x {Float}\n       * @param y {Float}\n       * @returns {Object} The enlarged bounding box\n       */\n      function bboxAdd(bbox, x, y) {\n        if (bbox.u > y) {\n bbox.u = y; \n}\n        if (bbox.d < y) {\n bbox.d = y; \n}\n        if (bbox.l > x) {\n bbox.l = x; \n}\n        if (bbox.r < x) {\n bbox.r = x; \n}\n        return bbox;\n      }\n\n      this.setCurrentRatioValue(Array(this.getIndicators().length).fill(0));\n      this.setTargetRatioValue(Array(this.getIndicators().length).fill([0, false, false]));\n\n      const self = this;\n      const s = this.getStart();\n      const e = this.getEnd();\n      const min = this.getMin();\n      const max = this.getMax();\n      let cntValues = 0;\n      let svgMajor = '';\n      let svgMinor = '';\n      let svgLabels = '';\n      let svgRanges = '';\n      let svgIndicators = '';\n      let svgText = '';\n      const createBarPath = cv.ui.structure.pure.Roundbar.createBarPath;\n\n      // Determine the bounding box, first get the biggest radius that must fit\n      let rMax = this.getAxisradius() + this.getAxiswidth();\n      let sMax = 0;\n      let eMax = 0;\n      this.getIndicators().forEach(function (indicator) {\n        rMax = Math.max(rMax, indicator.radius, indicator.radius+indicator.width);\n        sMax = Math.max(sMax, indicator.startarrow);\n        eMax = Math.max(eMax, indicator.endarrow);\n      });\n      let BBox = createBarPath(s, sMax, e, eMax, rMax, 0, true);\n\n      if (this.getMinorwidth() > 0) {\n        let\n          spacing = parseFloat(this.getMinorspacing());\n          let rIn = this.getMinorradius();\n          let rOut = this.getMinorwidth() + rIn;\n\n        if (/^[0-9]+%/.test(this.getMinorspacing())) { // special case: percentage\n          spacing = (max-min) * spacing / 100;\n        }\n\n        svgMinor += '<path class=\"minor\" d=\"';\n        for (var angle=s, delta = (e-s)*spacing/(max-min), cnt=(max-min)/spacing; cnt >= 0; angle+=delta, cnt--) {\n          var\n            sin = Math.sin(angle);\n            var cos = Math.cos(angle);\n          svgMinor += [\n            'M', cv.ui.structure.pure.Roundbar.coord({x:cos*rIn, y:-sin*rIn }),\n            'L', cv.ui.structure.pure.Roundbar.coord({x:cos*rOut, y:-sin*rOut})\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos*rIn, -sin*rIn);\n          BBox = bboxAdd(BBox, cos*rOut, -sin*rOut);\n        }\n        if (this.getMinorcolor() !== '') {\n svgMinor += '\" style=\"stroke:' + this.getMinorcolor(); \n}\n        svgMinor += '\" />';\n      }\n\n      if (this.getMajorwidth() > 0) {\n        let\n          rIn = this.getMajorradius();\n          let rOut = this.getMajorwidth() + rIn;\n\n        svgMajor += '<path class=\"major\" d=\"';\n\n        this.getMajorposition().split(';').forEach(function (position) {\n          switch (position) {\n            case 'min':\n              position = min;\n              break;\n\n            case 'max':\n              position = max;\n              break;\n          }\n          const angle = s + (e - s) * (position - min) / (max - min);\n          const sin = Math.sin(angle);\n          const cos = Math.cos(angle);\n          svgMajor += [\n            'M', cv.ui.structure.pure.Roundbar.coord({x:cos*rIn, y:-sin*rIn }),\n            'L', cv.ui.structure.pure.Roundbar.coord({x:cos*rOut, y:-sin*rOut})\n          ].join('');\n\n          BBox = bboxAdd(BBox, cos*rIn, -sin*rIn);\n          BBox = bboxAdd(BBox, cos*rOut, -sin*rOut);\n        });\n        if (this.getMajorcolor() !== '') {\n svgMajor += '\" style=\"stroke:' + this.getMajorcolor(); \n}\n        svgMajor += '\" />';\n      }\n\n      const labelstyle = this.getLabelstyle();\n      this.getLabels().forEach(function (label, labelnumber) {\n        const angle = s + (e - s) * (label.value - min) / (max - min);\n        const x = label.radius * Math.cos(angle);\n        const y = label.radius * -Math.sin(angle);\n        let alignmentBaseline = '';\n        let textAnchor = '';\n        let textAngle = 0;\n\n        if (label.orientation < 3) {\n          svgLabels += '<text class=\"axislabel\" x=\"' + x + '\" y=\"' + y + '\"';\n          switch (label.orientation) {\n            default:\n            case 0: // horizontal\n              if (x < 0) {\n                textAnchor = (['end', 'middle', 'start'])[label.position];\n              } else {\n                textAnchor = (['start', 'middle', 'end'])[label.position];\n              }\n              if (Math.abs(x) < 1) {\n                textAnchor = 'middle';\n              }\n              if (y < 0) {\n                alignmentBaseline = (['baseline', 'middle', 'hanging'])[label.position];\n              } else {\n                alignmentBaseline = (['hanging', 'middle', 'baseline'])[label.position];\n              }\n              if (Math.abs(y) < 1) {\n                alignmentBaseline = 'middle';\n              }\n              break;\n\n            case 1: { // parallel\n              let textAngle = -angle * 180 / Math.PI + 90;\n              if (y < 0) {\n                alignmentBaseline = (['baseline', 'middle', 'hanging'])[label.position];\n              } else {\n                alignmentBaseline = (['hanging', 'middle', 'baseline'])[label.position];\n                textAngle += 180;\n              }\n              textAnchor = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n            }\n\n            case 2: // perpendicular\n              textAngle = -angle * 180 / Math.PI;\n              if (x < 0) {\n                textAnchor = (['end', 'middle', 'start'])[label.position];\n                textAngle += 180;\n              } else {\n                textAnchor = (['start', 'middle', 'end'])[label.position];\n              }\n              alignmentBaseline = 'middle';\n              svgLabels += ' transform=\"rotate(' + textAngle + ',' + x + ',' + y + ')\"';\n              break;\n          }\n          svgLabels += ' dominant-baseline=\"' + alignmentBaseline + '\"';\n          svgLabels += ' text-anchor=\"' + textAnchor + '\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '>' + label.name + '</text>';\n        } else { // label.orientation >= 3 -> round\n          const labelid = self.$$user_path + '_label' + labelnumber;\n          const cw = s < e ? 0 : 1;\n          let path = '';\n          let align = '';\n\n          switch (label.orientation) {\n            case 3: // roundstart\n              path = ['M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y].join(' ');\n              break;\n\n            case 4: // roundmiddle\n              path = ['M', -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y].join(' ');\n              align = ' startOffset=\"50%\" text-anchor=\"middle\"';\n              break;\n\n            case 5: // roundend\n              path = ['M', x, y, 'A', label.radius, label.radius, 0, 0, cw, -x, -y, 'A', label.radius, label.radius, 0, 0, cw, x, y].join(' ');\n              align = ' startOffset=\"100%\" text-anchor=\"end\"';\n              break;\n          }\n          svgLabels += '<path style=\"stroke:none; fill:none; stroke-width:0\" id=\"' + labelid + '\" d=\"' + path + '\"/>';\n          svgLabels += '<text class=\"axislabel\"';\n\n          if (labelstyle !== '') {\n            svgLabels += ' style=\"' + labelstyle + '\"';\n          }\n\n          svgLabels += '><textPath href=\"#'+labelid+'\"' + align + '>' + label.name + '</textPath></text>';\n        }\n      });\n\n      this.getRanges().forEach(function (range) {\n        const sRange = (e - s) * (range.start - min) / (max - min) + s;\n        const eRange = (e - s) * (range.end - min) / (max - min) + s;\n        const rRange = range.radius || self.getAxisradius();\n        const wRange = range.width || self.getAxiswidth();\n        const thisBBox = createBarPath(sRange, 0, eRange, 0, rRange, wRange, true);\n        svgRanges += '<path class=\"range\" d=\"';\n        svgRanges += createBarPath(sRange, 0, eRange, 0, rRange, wRange);\n        if (range.style) {\n          svgRanges += '\" style=\"' + range.style;\n        }\n        svgRanges += '\" />';\n\n        BBox = bboxAdd(BBox, thisBBox.l, thisBBox.u);\n        BBox = bboxAdd(BBox, thisBBox.r, thisBBox.d);\n      });\n\n      this.__animator = [];\n      this.getIndicators().forEach(function (indicator, number) {\n        self.__animator.push(new cv.util.LimitedRateUpdateAnimator(self.__updateIndicatorPosition, self, number));\n        svgIndicators += '<path class=\"indicator\" style=\"' + indicator.style + '\" />';\n\n        if (indicator.showValue) {\n cntValues++; \n}\n      });\n\n      if (cntValues>0) {\n        svgText += '<text class=\"value\" y=\"'+this.getTexty()+'\"' +\n          ' text-anchor=\"' + this.getTextanchor() +'\"' +\n          ' font-size=\"' + this.getFontsize() + '\">' +\n          '<tspan x=\"'+this.getTextx()+'\" dy=\"0\">-</tspan>' +\n          ('<tspan x=\"'+this.getTextx()+'\" dy=\"' + this.getLinespace() + '\">-</tspan>').repeat(cntValues-1) +\n          '</text>';\n\n        const textDistribution = ({start: [0, 1], middle: [0.5, 0.5], end: [1, 0]})[this.getTextanchor()] || [0, 1];\n        const textU = Math.min(0, -this.getFontsize(), this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0));\n        const textD = Math.max(0, -this.getFontsize(), this.getLinespace() * (cntValues - 1) - (this.getLinespace() < 0 ? this.getFontsize() : 0));\n        BBox = bboxAdd(BBox, this.getTextx()-textDistribution[0]*this.getTextlength(), this.getTexty()+textU);\n        BBox = bboxAdd(BBox, this.getTextx()+textDistribution[1]*this.getTextlength(), this.getTexty()+textD);\n      }\n\n      let html = '<div class=\"actor\">' +\n        '<svg width=\"100%\" height=\"100%\" viewBox=\"' + [\n          BBox.l - this.getBboxgrow().l,\n          BBox.u - this.getBboxgrow().u,\n          BBox.r - BBox.l + this.getBboxgrow().l + this.getBboxgrow().r,\n          BBox.d - BBox.u + this.getBboxgrow().u + this.getBboxgrow().d\n        ].join(' ') + '\">';\n      if (this.getDebug()) {\n        html += '<rect width=\"'+(BBox.r-BBox.l)+'\" height=\"'+(BBox.d-BBox.u)+'\" x=\"'+(BBox.l)+'\" y=\"'+(BBox.u)+'\" stroke=\"blue\" fill=\"none\" />' +\n          '<rect width=\"'+(BBox.r-BBox.l + this.getBboxgrow().l + this.getBboxgrow().r)+'\" height=\"'+(BBox.d-BBox.u + this.getBboxgrow().u + this.getBboxgrow().d)+'\" x=\"'+(BBox.l - this.getBboxgrow().l)+'\" y=\"'+(BBox.u - this.getBboxgrow().u)+'\" stroke=\"green\" fill=\"none\" />' +\n          '<circle cx=\"0\" cy=\"0\" r=\"3\" fill=\"red\" />';\n      }\n\n      if (this.getAxisradius() > 0) {\n        const sectorPath = createBarPath(s, 0, e, 0, this.getAxisradius(), 0);\n        const axisPath = createBarPath(s, 0, e, 0, this.getAxisradius(), this.getAxiswidth());\n        const stroke = this.getAxiscolor() === '' ? undefined : this.getAxiscolor();\n        const fill = this.getAxiswidth() < 1 ? 'none' : stroke;\n        html +=\n          '<path class=\"sector\" d=\"'+sectorPath+' L0 0Z\"/>' +\n          '<path class=\"axis\" d=\"'+axisPath+'\" style=\"' +\n          (stroke ? 'stroke:'+stroke : '') +\n          (fill ? ';fill:' +fill : '') +\n          '\"/>';\n      }\n\n      html += svgMinor + svgMajor + svgRanges + svgLabels + svgIndicators + svgText;\n      html += '</svg></div>';\n\n      return html;\n    },\n\n    /**\n     * Updates the roundbar widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data\n     */\n    _update: function(address, data) {\n      if (data === undefined || address === undefined) {\n return; \n}\n      const self = this;\n      const value = cv.Transform.decode(this.getAddress()[address], data);\n      const target = this.getTargetRatioValue();\n      const tspan = Array.from(this.getDomElement().getElementsByTagName('tspan'));\n      const valueFormat = this.applyFormat(address, value);\n\n      this.getIndicators().forEach(function(indicator, i) {\n        if (address === indicator.address) {\n          target[i] = [\n            (Math.min(Math.max(value, indicator.min), indicator.max)-indicator.min)/(indicator.max-indicator.min),\n            value < indicator.min,\n            value > indicator.max\n          ];\n          if (tspan[i] !== undefined) {\n            tspan[i].textContent = valueFormat;\n          }\n          self.__animator[i].setTo(target[i][0], !self.isVisible());\n        }\n      });\n\n      this.setTargetRatioValue(target);\n    },\n\n    /**\n     * Callback to update the display of the indicators.\n     *\n     * Note: It is a design decision not to pool multiple updates in one requestAnimationFrame which might be beneficial\n     * performance wise. But as it's assumed that a typical visu config is only containing one roundbar per address\n     * a pooling wouldn't make a difference on the one hand but complicate the code on the other hand.\n     * Even with a few roundbars using the same address the performance impact is negligible.\n     * @param ratio\n     * @param indicatorNumber\n     */\n    __updateIndicatorPosition: function (ratio, indicatorNumber) {\n      if (this.__indicatorDOMElement.length === 0) {\n        // cache\n        this.__indicatorDOMElement = Array.from(this.getDomElement().getElementsByClassName('indicator'));\n      }\n\n      const indicator = this.getIndicators()[indicatorNumber];\n      const target = this.getTargetRatioValue()[indicatorNumber];\n      const startAngle = this.getStart();\n      const endAngle = this.getEnd();\n      let targetAngle = startAngle + ratio * (endAngle - startAngle);\n      const overflowarrow = this.getOverflowarrow();\n\n      if (!overflowarrow) {\n        targetAngle = (endAngle > startAngle)\n          ? Math.max(startAngle, targetAngle - indicator.endarrow)\n          : Math.min(startAngle, targetAngle - indicator.endarrow);\n      }\n      if (indicator.isBar) {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute('d',\n          cv.ui.structure.pure.Roundbar.createBarPath(\n            startAngle,\n            (overflowarrow&&!(target[1]&&ratio<0.01)) ? 0 : indicator.startarrow,\n            targetAngle,\n            (overflowarrow&&!(target[2]&&ratio>0.99)) ? 0 : indicator.endarrow,\n            indicator.radius,\n            indicator.width\n          )\n        );\n      } else {\n        this.__indicatorDOMElement[indicatorNumber].setAttribute('d',\n          cv.ui.structure.pure.Roundbar.createPointerPath(targetAngle, indicator)\n        );\n      }\n    }\n  }\n});\n\n","/* Slide.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a horizontal slider to the visu. This can be used, for example, to dim a light or change temperature values.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Slide', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.base(arguments, props);\n    this.__animator = new cv.util.LimitedRateUpdateAnimator(this.__updateHandlePosition, this);\n    this.__pageSizeListener = cv.ui.structure.pure.layout.ResizeHandler.states.addListener('changePageSizeInvalid', () => {\n      this.__invalidateScreensize();\n    });\n    this.__lastBusValue = {};\n  },\n  /*\n  ***********************************************\n    DESTRUCTOR\n  ***********************************************\n  */\n  destruct: function () {\n    cv.ui.structure.pure.layout.ResizeHandler.states.removeListenerById(this.__pageSizeListener);\n    this.__pageSizeListener = null;\n    this.__button = null;\n  },\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    min: {\n      check: 'Number',\n      init: 0\n    },\n    max: {\n      check: 'Number',\n      init: 100\n    },\n    step: {\n      check: 'Number',\n      init: 0.5\n    },\n    showInvalidValues: {\n      check: 'Boolean',\n      init: false\n    },\n    sendOnFinish: {\n      check: 'Boolean',\n      init: false\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __lastBusValue: null,\n    __animator: null,\n    __button: undefined, // cache for DOM element\n    __range: undefined, // cache for DOM element\n    __actorWidth: undefined,\n    __buttonWidth: undefined,\n    __pageSizeListener: undefined,\n    __inDrag: false, // is the handle currently dragged?\n    __coordMin: undefined, // minimal screen coordinate of slider\n\n    // overridden\n    _getInnerDomString: function () {\n      const placeholder = this.getFormat() === '' ? '' : '-';\n      return `\n        <div class=\"actor ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\" style=\"touch-action: pan-y;\">\n          <button class=\"ui-slider-handle ui-state-default ui-corner-all\" draggable=\"false\" unselectable=\"true\" style=\"transform: translate3d(0px, 0px, 0px);\">`+placeholder+`</button>\n          <div class=\"ui-slider-range value\" style=\"margin-left: 0px; width: 0px;\"></div>\n        </div>\n      `;\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n\n      this.__throttled = cv.util.Function.throttle(this.__onChangeValue, 250, {trailing: true}, this);\n\n      this.getActor().addEventListener('pointerdown', this);\n    },\n\n    _update: function (address, data) {\n      let transform = this.getAddress()[address].transform;\n      if (this.__inDrag || this.__lastBusValue[transform] === data) {\n        // slider in use -> ignore value from bus\n        // internal state unchanged -> also do nothing\n        return;\n      }\n      this.__lastBusValue = {}; // forget all other transforms as they might not be valid anymore\n      this.__lastBusValue[transform] = data;\n\n      let value = cv.Transform.decode(this.getAddress()[address], data);\n\n      // animate when visible, otherwise jump to the target value\n      this.__setSliderTo(value, !this.isVisible());\n    },\n\n    /**\n     * The the internal slider state and its handle and displayed value\n     * @param value {Number} The new value\n     * @param instant {Boolean} Animate or instant change\n     * @param relaxDisplay {Boolean} Let the handle move to an unstable position\n     *   to give visual feedback that something does happen during interaction\n     * @private\n     */\n    __setSliderTo: function(value, instant, relaxDisplay = false) {\n      let min = this.getMin();\n      let max = this.getMax();\n      let step = this.getStep();\n      if (step === 0 || Math.abs((max-min)/step) > 10000) {\n        // limit too small step size - it's not necessary to have more than\n        // 10000 steps for the range as even the biggest screen doesn't have\n        // that many pixels\n        step = (max-min)/10000;\n      }\n      let realValue = Math.min(Math.max(value, min), max);\n\n      if (!this.getShowInvalidValues()) {\n        // map to closest allowed value\n        let stepValue = Math.round((realValue - min) / step) * step + min;\n        // use max when the value is greater than the middle point between the\n        // biggest allowed step and the maximum\n        let maxSwitchValue = (Math.floor((max - min) / step) * step + min + max) / 2;\n        realValue = realValue < maxSwitchValue ? stepValue : max;\n      }\n\n      let ratio = max===min ? 0 : (realValue-min)/(max-min);\n\n      if (relaxDisplay) {\n        let valueRatio = max===min ? 0 : (Math.min(Math.max(value, min), max)-min)/(max-min);\n        let delta = ratio - valueRatio;\n        let stepCount = (max - min) / step;\n        let factor = (2*stepCount) ** 3;\n        ratio -= Math.min(factor * delta**4, Math.abs(delta)) * Math.sign(delta);\n      }\n\n      // store it to be able to suppress sending of unchanged data\n      this.setBasicValue(realValue);\n\n      if (this.getFormat() !== '') {\n        // #2: map it to a value the user wants to see\n        let displayValue = this.applyMapping(realValue);\n\n        // #3: format it in a way the user understands the value\n        displayValue = this.applyFormat(undefined, displayValue);\n        this.setValue(displayValue);\n\n        this.applyStyling(realValue);\n\n        let button = this.getDomElement().querySelector('button');\n        button.replaceChildren(); // delete anything inside\n        this.defaultValue2DOM(displayValue, button);\n      }\n\n      this.__animator.setTo(ratio, instant);\n    },\n\n    __updateHandlePosition: function (ratio) {\n      if (this.__button === undefined) {\n        let element = this.getDomElement();\n        this.__button = element.querySelector('button');\n        this.__range = element.querySelector('.ui-slider-range');\n      }\n      if (this.__button === null) {\n        // most likely reason: the widget / DOM tree was deleted (e.g. due to\n        // browsing to a new page or during unit tests)\n        this._disposeObjects('__animator');\n        return;\n      }\n      if (this.__actorWidth === undefined || this.__buttonWidth === undefined) {\n        let\n          actor = this.getDomElement().querySelector('.actor');\n          let actorStyles = window.getComputedStyle(actor);\n        this.__actorWidth = parseFloat(actorStyles.getPropertyValue('width'));\n        this.__buttonWidth = parseFloat(window.getComputedStyle(this.__button).getPropertyValue('width'));\n        this.__range.style.marginLeft = '-' + actorStyles.getPropertyValue('padding-left');\n        this.__range.style.borderRadius = actorStyles.getPropertyValue('border-radius');\n      }\n      let length = ratio * this.__actorWidth;\n      this.__button.style.transform = 'translate3d(' + (length-this.__buttonWidth/2) + 'px, 0px, 0px)';\n      this.__range.style.width = length + 'px';\n    },\n\n    __invalidateScreensize: function () {\n      let min = this.getMin();\n      let max = this.getMax();\n      this.__actorWidth = undefined; // invalidate cached values\n      this.__animator.setTo(max===min ? 0 : (this.getBasicValue()-min)/(max-min), true);\n    },\n\n    handleEvent: function (event) {\n      let newRatio = 0;\n\n      switch (event.type) {\n        case 'pointerdown': {\n          this.__inDrag = true;\n          document.addEventListener('pointermove', this);\n          document.addEventListener('pointerup', this);\n          let boundingRect = event.currentTarget.getBoundingClientRect();\n          let computedStyle = window.getComputedStyle(event.currentTarget);\n          this.__coordMin = boundingRect.left + parseFloat(computedStyle.paddingLeft);\n          newRatio = (event.clientX - this.__coordMin) / this.__actorWidth;\n          break;\n        }\n\n        case 'pointermove':\n          if (!this.__inDrag) {\n            return;\n          }\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n\n        case 'pointerup':\n          this.__inDrag = false;\n          document.removeEventListener('pointermove', this);\n          document.removeEventListener('pointerup', this);\n          newRatio = (event.clientX - this.__coordMin)/this.__actorWidth;\n          break;\n      }\n\n      newRatio = Math.min(Math.max(newRatio, 0.0), 1.0); // limit to 0..1\n      let newValue = this.getMin() + newRatio * (this.getMax() - this.getMin());\n      this.__setSliderTo(newValue, this.__inDrag, this.__inDrag);\n      if (!this.getSendOnFinish() || event.type === 'pointerup') {\n        this.__throttled.call(newValue);\n      }\n    },\n\n    __onChangeValue: function(value) {\n      this.__lastBusValue = this.sendToBackend(value, false, this.__lastBusValue);\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('slide', statics);\n  }\n});\n","/* Switch.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The switch widget shows two states (e.g. ON and OFF) and can toggle between them.\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a switch widget using mapping and styling</caption>\n *   <screenshot name=\"switch_example_on\">\n *    <caption>Switch turned on</caption>\n *    <data address=\"0/0/0\">1</data>\n *   </screenshot>\n *   <screenshot name=\"switch_example_off\">\n *    <caption>Switch turned off</caption>\n *    <data address=\"0/0/0\">0</data>\n *   </screenshot>\n * </settings>\n * <meta>\n *  <mappings>\n *    <mapping name=\"OnOff\">\n *      <entry value=\"0\">O</entry>\n *      <entry value=\"1\">I</entry>\n *    </mapping>\n *  </mappings>\n *  <stylings>\n *    <styling name=\"GreyGreen\">\n *      <entry value=\"0\">grey</entry>\n *      <entry value=\"1\">green</entry>\n *    </styling>\n *  </stylings>\n * </meta>\n * <switch mapping=\"OnOff\" styling=\"GreyGreen\">\n *   <layout colspan=\"3\" />\n *   <label>Switch</label>\n *   <address transform=\"DPT:1.001\" mode=\"readwrite\">0/0/0</address>\n * </switch>\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Switch', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update],\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    onValue: {\n      check: 'String',\n      init: '1'\n    },\n    offValue: {\n      check: 'String',\n      init: '0'\n    }\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param value {any} incoming data (already transformed + mapped)\n     */\n    handleUpdate: function(value) {\n      const actor = this.getActor();\n      // compare against the unmapped value\n      value = this.getBasicValue();\n      const off = this.getOffValue();\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      actor.classList.remove(value == off ? 'switchPressed' : 'switchUnpressed'); // jshint ignore:line\n      actor.classList.add(value == off ? 'switchUnpressed' : 'switchPressed'); // jshint ignore:line\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @return {var}\n     */\n    getActionValue: function () {\n      // using == comparisons to make sure that e.g. 1 equals \"1\"\n      return (this.getBasicValue() == this.getOffValue() ? this.getOnValue() : this.getOffValue()); // jshint ignore:line\n    }\n  }\n});\n","/* Text.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The text-tag defines static (non-changing) text to be displayed on a page. The content of a &lt;label&gt; with free text.\n *\n * @widgetexample <settings>\n *   <caption>Configuration example of a centered text widget</caption>\n *   <screenshot name=\"text_example\" />\n * </settings>\n * <text align=\"center\"><label>Example text</label></text>\n *\n *\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Text', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '';\n    }\n  }\n});\n","/* Toggle.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The toggle widget is similar to the switch, but it can take more than two states.\n * Can be used to change the operating modes of the heating system.\n * Each time the toggle is pressed, the toggle takes the next possible state.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Toggle', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [cv.ui.common.Operate, cv.ui.common.Update, cv.ui.common.HasAnimatedButton],\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Get the value that should be send to backend after the action has been triggered\n     * @return {var}\n     */\n    getActionValue: function () {\n      return this.getNextMappedValue(this.getBasicValue(), this.getMapping());\n    }\n  }\n});\n","/* Trigger.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a button to the visu with which exactly a defined value for a short,\n * as well as a defined value for a long key pressure, can be sent to the BUS,\n * e.g. for recalling and storing scenes or driving roller blinds. (Short = stop, long = drive).\n * The address for short and long term may vary.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Trigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.BasicUpdate,\n    cv.ui.common.HandleLongpress\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', init: '0' },\n    shortValue: { check: 'String', init: '0' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.defaultUpdate(undefined, this.getSendValue(), this.getDomElement());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor switchUnpressed\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Handle a short tap event and send the value for short pressing the trigger to the backend.\n     * If there is no short threshold set, this send the value for long presses to the backend.\n     */\n    _action: function() {\n      const value = (this.getShortThreshold() > 0 || this.isShortDefault()) ? this.getShortValue() : this.getSendValue();\n      this.sendToBackend(value, function(address) {\n        return !!(address.variantInfo & 1);\n      });\n    },\n\n    /**\n     * Handle a long tap event and send the value for long pressing the trigger to the backend.\n     */\n    _onLongTap: function() {\n      this.sendToBackend(this.getSendValue(), function(address) {\n        return !!(address.variantInfo & 2);\n      });\n    }\n  }\n});\n","/* Unknown.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Fallback widget shown when an unknown widget is defined in the configuration.\n * You must not use this one directly.\n *\n * @author Christian Mayer\n * @since 0.8.0 (2012)\n */\nqx.Class.define('cv.ui.structure.pure.Unknown', {\n  extend: qx.core.Object,\n\n  /*\n  ******************************************************\n    CONSTRUCTOR\n  ******************************************************\n  */\n  construct: function(props) {\n    this.set(props);\n  },\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    path: {\n      check: 'String',\n      init: ''\n    },\n    $$type: {\n      check: 'String',\n      init: 'Unknown'\n    },\n    unknownType: {\n      check: 'String',\n      init: ''\n    },\n    pageType: {\n      check: ['text', '2d', '3d'],\n      init: 'text'\n    },\n    parentWidget: {\n      check: 'cv.ui.structure.pure.AbstractBasicWidget',\n      init: null\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    /**\n     * Returns the DOM-Element of this widget\n     * @return {Element} the DOM element\n     */\n    getDomElement: function () {\n      return document.querySelector('#' + this.getPath());\n    },\n\n    /**\n     * Return the HTML string for this widget\n     * @return {String} HTML code\n     */\n    getDomString: function () {\n      return '<div class=\"widget clearfix\"><pre>'+qx.locale.Manager.tr('unknown: %1', this.getUnknownType()) + '</pre></div>';\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('unknown', statics);\n  }\n});\n\n","/* UrlTrigger.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * The UrlTrigger widget adds a button to the visualization that queries data from a URL in the background.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.UrlTrigger', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Operate,\n    cv.ui.common.HasAnimatedButton,\n    cv.ui.common.BasicUpdate\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    sendValue: { check: 'String', init: '0' },\n    params: { check: 'String', init: '' },\n    url: { check: 'String', nullable: true, apply: '_applyUrl' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __xhr: null,\n\n    getXhr: function () {\n      return this.__xhr;\n    },\n\n    // property apply\n    _applyUrl: function(value) {\n      if (value) {\n        if (!this.__xhr) {\n          const xhr = new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(value));\n          xhr.set({\n            method: 'GET',\n            accept: 'application/html',\n            requestData: this.getParams()\n          });\n          this.__xhr = xhr;\n        } else {\n          this.__xhr.setUrl(qx.util.ResourceManager.getInstance().toUri(value));\n        }\n      }\n    },\n\n    // overridden\n    _onDomReady: function() {\n      this.base(arguments);\n      this.defaultUpdate(undefined, this.getSendValue(), this.getDomElement());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      let actor = '<div class=\"actor switchUnpressed ';\n      if (this.getAlign()) {\n        actor += this.getAlign();\n      }\n      actor += '\"><div class=\"value\"></div></div>';\n      return actor;\n    },\n\n    // overridden\n    _action: function() {\n      if (this.__xhr) {\n        this.__xhr.send();\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this._disposeObjects('__xhr');\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('urltrigger', statics);\n  }\n});\n","/* Video.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds a video or live stream to the visu. Currently, most sources do not support this yet.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Video', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    width   : { check: 'String', nullable: true },\n    height  : { check: 'String', nullable: true },\n    src     : { check: 'String', init: '' },\n    autoplay: { check: 'Boolean', init: false }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      // create the actor\n      let style = '';\n      if (this.getWidth()) {\n        style += 'width:' + this.getWidth() + ';';\n      }\n      if (this.getHeight()) {\n        style += 'height:' + this.getHeight() + ';';\n      }\n      if (style !== '') {\n style = 'style=\"' + style + '\"'; \n}\n      const autoplay = this.isAutoplay() ? ' autoplay=\"autoplay\"' : '';\n      return '<div class=\"actor\"><video src=\"' + this.getSrc() + '\" ' + style + autoplay + '  controls=\"controls\" /></div>';\n    },\n\n    // overridden\n    getValueElement: function() {\n      return this.getDomElement().querySelector('video');\n    },\n\n    // overridden\n    _applyVisible: function(value) {\n      const video = this.getValueElement();\n      if (video) {\n        if (value === true && this.isAutoplay()) {\n          video.play();\n        } else {\n          video.pause();\n        }\n      }\n    }\n  }\n});\n","/* Web.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an area to the visu, where external websites can be displayed.\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.Web', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: [\n    cv.ui.common.Update,\n    cv.ui.common.Refresh\n  ],\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n\n    width: {\n      check: 'String',\n      nullable: true\n    },\n    height: {\n      check: 'String',\n      nullable: true\n    },\n    frameborder: {\n      check: 'Boolean',\n      init: false\n    },\n    background: {\n      check: 'String',\n      nullable: true\n    },\n    scrolling: {\n      check: ['auto', 'yes', 'no'],\n      nullable: true\n    },\n    src: {\n      check: 'String',\n      nullable: true\n    }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    // overridden\n    _getInnerDomString: function () {\n      let webStyle = this.getStyle();\n      if (this.getWidth()) {\n        webStyle += 'width:' + this.getWidth() + ';';\n      } else { // default width is 100% of widget space (fix bug #3175343 part 1)\n        webStyle += 'width: 100%;';\n      }\n      if (this.getHeight()) {\n        webStyle += 'height:' + this.getHeight() + ';';\n      }\n      if (this.getFrameborder() === false) {\n        webStyle += 'border: 0px ;';\n      }\n      if (this.getBackground()) {\n        webStyle += 'background-color:' + this.getBackground() + ';';\n      }\n      if (webStyle !== '') {\n        webStyle = 'style=\"' + webStyle + '\"';\n      }\n\n      let scrolling = '';\n      if (this.getScrolling()) {\n        scrolling = 'scrolling=\"' + this.getScrolling() + '\"';\n      } // add scrolling parameter to iframe\n      return '<div class=\"actor\"><iframe src=\"' + this.getSrc() + '\" ' + webStyle + scrolling + '></iframe></div>';\n    },\n\n    /**\n     * Handles the incoming data from the backend for this widget\n     *\n     * @param address {String} KNX-GA or openHAB item name\n     * @param data {var} incoming data (already transformed + mapped)\n     */\n    _update: function(address, data) {\n      let addr = this.getAddress()[address];\n      if (!addr) {\n        return;\n      }\n      if (data === 1) {\n        const iframe = this.getDomElement().querySelector('iframe');\n        this.refreshAction(iframe, iframe.getAttribute('src'));\n        // reset the value\n        cv.io.BackendConnections.getClient().write(address, cv.Transform.encode(addr, 0));\n      }\n    }\n  }\n});\n\n","/* WgPluginInfo.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * Adds an dynamic field to the visu that shows live information from a WireGate plugin.\n * \n * Note: The service helper from\n * https://raw.githubusercontent.com/OpenAutomationProject/Wiregate/master/tools/wg-plugindb/wg-plugindb.php\n * must be \"installed\" in the directory /var/www/ (i.e. the web root)\n *\n * @author Christian Mayer\n * @since 2012\n */\nqx.Class.define('cv.ui.structure.pure.WgPluginInfo', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.Update,\n\n\n  /*\n  ******************************************************\n    PROPERTIES\n  ******************************************************\n  */\n  properties: {\n    variable   : { check: 'String', nullable: true, apply: '_applyVariable' }\n  },\n\n  /*\n  ******************************************************\n    MEMBERS\n  ******************************************************\n  */\n  members: {\n    __request: null,\n\n    // property apply\n    _applyVariable: function(value) {\n      if (value) {\n        if (!this.__request) {\n          // create the request\n          this.__request = new qx.io.request.Xhr('/wg-plugindb.php?name=' + value);\n          this.__request.set({\n            accept: 'application/json'\n          });\n          this.__request.addListener('success', this._onSuccess, this);\n        } else {\n          this.__request.setUrl('/wg-plugindb.php?name=' + value);\n        }\n        cv.TemplateEngine.getInstance().executeWhenDomFinished(this.__request.send, this.__request);\n      }\n    },\n\n    getRequest: function () {\n      return this.__request;\n    },\n\n    /**\n     * Handle successful requests from {@link qx.io.request.Xhr}\n     * @param ev {Event}\n     */\n    _onSuccess: function(ev) {\n      const req = ev.getTarget();\n      const data = req.getResponse();\n      this.defaultUpdate(undefined, data[this.getVariable()], this.getValueElement());\n    },\n\n    // overridden\n    _getInnerDomString: function () {\n      return '<div class=\"actor\"><div class=\"value\">-</div></div>';\n    },\n\n    /**\n     * Triggers an {@link qx.io.request.Xhr} request to query the plugin value\n     */\n    handleUpdate: function() {\n      if (this.__request) {\n        this.__request.send();\n      }\n    }\n  },\n\n  /*\n  ******************************************************\n    DESTRUCTOR\n  ******************************************************\n  */\n  destruct: function() {\n    this._disposeObjects('__request');\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('wgplugin_info', statics);\n  }\n});\n","/* WidgetInfoAction.js \n * \n * copyright (c) 2010-2022, Christian Mayer and the CometVisu contributers.\n * \n * This program is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the Free\n * Software Foundation; either version 3 of the License, or (at your option)\n * any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n * more details.\n *\n * You should have received a copy of the GNU General Public License along\n * with this program; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA\n */\n\n\n/**\n * This is a helper class for the InfoAction widget it cannot be used directly\n *\n * @author Tobias Bräutigam\n * @since 0.10.0 (as widget), 0.9.2 (as plugin)\n */\nqx.Class.define('cv.ui.structure.pure.WidgetInfoAction', {\n  extend: cv.ui.structure.pure.AbstractWidget,\n  include: cv.ui.common.HasChildren,\n\n  /*\n   ******************************************************\n   PROPERTIES\n   ******************************************************\n   */\n  properties: {\n    anonymous : {\n      refine: true,\n      init: true\n    },\n    childObjects: {check: 'Array', init: []}\n  },\n\n  /*\n   ******************************************************\n   MEMBERS\n   ******************************************************\n   */\n  members: {\n    // overridden\n    getDomString: function () {\n      return this.getChildrenDomString();\n    }\n  },\n\n  defer: function(statics) {\n    cv.ui.structure.WidgetFactory.registerClass('widgetinfo', statics);\n    cv.ui.structure.WidgetFactory.registerClass('widgetaction', statics);\n  }\n});\n"]}