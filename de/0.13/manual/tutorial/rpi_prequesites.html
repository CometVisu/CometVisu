<!DOCTYPE html>
<html class="writer-html4" lang="de" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raspberry Pi: Vorbereitung &mdash; CometVisu</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
    <link rel="canonical" href="https://www.cometvisu.org/CometVisu/de/0.13/manual/tutorial/rpi_prequesites.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/versions.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="Raspberry Pi: Client einrichten (Kiosk Modus)" href="rpi_kiosk.html" />
    <link rel="prev" title="Tutorials" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> CometVisu<img src="../_static/comet_webapp_icon_android_48.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.13.0-dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation der CometVisu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Konfiguration der CometVisu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../colab/index.html">Hilf dem CometVisu Projekt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/index.html">Informationen für Entwickler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Raspberry Pi: Vorbereitung</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#warum-raspberry-pi">Warum Raspberry Pi?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#was-wird-benotigt">Was wird benötigt?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#minimale-ausstattung">Minimale Ausstattung</a></li>
<li class="toctree-l4"><a class="reference internal" href="#empfohlene-ausstattung">Empfohlene Ausstattung</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ausstattungsbeispiel">Ausstattungsbeispiel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setup-der-hardware">Setup der Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-der-software">Setup der Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#betriebssystem">Betriebssystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#netzwerkzugriff-teil-1">Netzwerkzugriff - Teil 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usb-boot-einrichten-optional">USB Boot einrichten (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basisadministration">Basisadministration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#netzwerkzugriff-teil-2">Netzwerkzugriff - Teil 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#weiteres-optional">Weiteres (optional)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ausblick">Ausblick</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cheat-sheet">Cheat Sheet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rpi_kiosk.html">Raspberry Pi: Client einrichten (Kiosk Modus)</a></li>
<li class="toctree-l2"><a class="reference internal" href="rpi_docker.html">Raspberry Pi: Docker installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="rpi_cometvisu.html">Raspberry Pi: CometVisu in Docker installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="rpi_nodered.html">Raspberry Pi: Node-RED in Docker installieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html">Tutorial: Erste Schritte - eine Visu in einer halben Minute</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CometVisu</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Tutorials</a> &raquo;</li>
      <li>Raspberry Pi: Vorbereitung</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition caution">
<p class="first admonition-title">Vorsicht</p>
<p class="last">Dies ist die Dokumentation des aktuellen Entwicklungszweigs der CometVisu.
Es besteht daher die Möglichkeit, dass einige der hier beschriebenen Features
mit dem aktuellsten Release der CometVisu nicht genutzt werden können.</p>
</div>
<div class="section" id="raspberry-pi-vorbereitung">
<h1>Raspberry Pi: Vorbereitung<a class="headerlink" href="#raspberry-pi-vorbereitung" title="Link zu dieser Überschrift">¶</a></h1>
<p>Im ersten Teil des Tutorials wird der Raspberry Pi (RPi) so vorbereitet, dass
dieser mit minimalem Betriebssystem läuft und von einem Arbeitsrechner über
das Netzwerk erreichbar ist. Wer eine andere Plattform als einen Raspberry Pi
verwenden möchte, wie z.B. einen NUC, kann problemlos den Rechner selbst
vorbereiten und diesen Teil des Tutorials überspringen um bei einem der
späteren Teile einzusteigen.</p>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p>Dieser erste Tutorial-Teil ist sehr ausführlich gehalten um auch Einsteigern
ohne jegliche Erfahrung in der Administration von Linux basierten Rechnern
einen problemlosen Start zu ermöglichen.</p>
<p class="last">Je nach Vorwissen mag es jedoch notwendig sein selbständig zu den einzelnen
Themen noch etwas Hintergrundinformationen zu suchen. Dies dazu notwendigen
Stichworte sind jedoch in diesen Tutorial bereits enthalten.</p>
</div>
<div class="section" id="warum-raspberry-pi">
<h2>Warum Raspberry Pi?<a class="headerlink" href="#warum-raspberry-pi" title="Link zu dieser Überschrift">¶</a></h2>
<p>Der Raspberry Pi ist ein kleiner, sparsamer Einplatinen-Computer, bei dem alles
wichtige für den Betrieb bereits auf der Platine enthalten ist. Ursprünglich
für Bastel- und Ausbildungsprojekte gedacht hat sich der Raspberry Pi in den
letzten Jahren auch im professionellen Umfeld einen Namen gemacht und seinen
Platz gefunden.</p>
<p>Für ein Projekt im Bereich der Gebäudeautomatisierung, wie eben auch im Smart
Home, ist er aufgrund seiner Universalität, Stabilität und des geringen
Stromverbrauchs prädestiniert. Ein weiter Vorteil sind die geringen Kosten
für die Hardware und dessen frei verfügbares Betriebssystem.</p>
</div>
<div class="section" id="was-wird-benotigt">
<h2>Was wird benötigt?<a class="headerlink" href="#was-wird-benotigt" title="Link zu dieser Überschrift">¶</a></h2>
<p>Neben dem Raspberry Pi selbst, in diesem Tutorial wird die 2021 aktuelle
Version <strong>Raspberry Pi 4 Model B</strong> verwendet. Zusätzlich wird nur noch eine
Stromversorgung und ein Speichermedium benötigt.</p>
<p>Weitere Ausstattung wie Netzwerkkabel, HDMI-Kabel, Displays, … sind jeweils
spezifisch für den Anwendungsfall und werden hier als vorhanden vorausgesetzt.</p>
<div class="section" id="minimale-ausstattung">
<h3>Minimale Ausstattung<a class="headerlink" href="#minimale-ausstattung" title="Link zu dieser Überschrift">¶</a></h3>
<ul class="simple">
<li>Raspberry Pi 4 Model B, 2 GB</li>
<li>USB-C Spannungsversorgung</li>
<li>microSD Karte</li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="../_images/rpi_minimum.jpg"><img alt="../_images/rpi_minimum.jpg" src="../_images/rpi_minimum.jpg" style="width: 1000.0px; height: 583.5px;" /></a>
</div>
</div>
<div class="section" id="empfohlene-ausstattung">
<h3>Empfohlene Ausstattung<a class="headerlink" href="#empfohlene-ausstattung" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die größte Schwachstelle bei dauerhaften Betrieb eines Raspberry Pi ist die
Lebensdauer der SD-Karte, da diese nicht auf die dabei auftretende hohe Anzahl
an Schreibzyklen ausgelegt ist. Hier empfiehlt es sich statt der microSD Karte
ein USB Massenspeicher zu verwenden (<strong>keinen</strong> USB-Stick, diese sind sogar meist
mit Flash-Speicher von noch geringerer Qualität ausgestattet). Die
Spannungsversorgung muss ausreichend dimensioniert sein um auf den USB Speicher
versorgen zu können - oder es muss ein entsprechender Speicher mit externer
Versorgung verwendet werden.</p>
<p>Wenn der Raspberry Pi für zukünftige Erweiterungen noch bisschen Luft haben,
so kann auch die Version mit 4 GB RAM verwendet werden.</p>
<p>Für den professionellen, langfristigen Betrieb ist außerdem noch ein Gehäuse
empfohlen, dass auch die CPU kühlen kann.</p>
<ul class="simple">
<li>Raspberry Pi 4 Model B, 4 GB</li>
<li>USB-C Spannungsversorgung</li>
<li>microSD Karte - wird nur temporär benötigt</li>
<li>USB Speicher mit langer Lebensdauer</li>
<li>Gehäuse</li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="../_images/rpi_recomended.jpg"><img alt="../_images/rpi_recomended.jpg" src="../_images/rpi_recomended.jpg" style="width: 1000.0px; height: 545.5px;" /></a>
</div>
</div>
<div class="section" id="ausstattungsbeispiel">
<h3>Ausstattungsbeispiel<a class="headerlink" href="#ausstattungsbeispiel" title="Link zu dieser Überschrift">¶</a></h3>
<p>Dieses Tutorial wurde anhand dieser Ausstattung erstellt:</p>
<ul class="simple">
<li>Raspberry Pi 4 Model B, 4 GB</li>
<li>original Raspberry Pi USB-C Spannungsversorgung (3 Ampere)</li>
<li>microSD Karte - wird nur temporär benötigt</li>
<li>Kingston M.2 SSD A400 240GB</li>
<li>Argon ONE M.2 Gehäuse</li>
</ul>
<p>Anschaffungspreis (2021) waren keine 150 Euro.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../_images/rpi_housing.jpg"><img alt="../_images/rpi_housing.jpg" src="../_images/rpi_housing.jpg" style="width: 1000.0px; height: 750.0px;" /></a>
</div>
</div>
</div>
<div class="section" id="setup-der-hardware">
<h2>Setup der Hardware<a class="headerlink" href="#setup-der-hardware" title="Link zu dieser Überschrift">¶</a></h2>
<p>Der Zusammenbau der Hardware erfolgt nach den jeweiligen Bedienungsanleitungen.</p>
</div>
<div class="section" id="setup-der-software">
<h2>Setup der Software<a class="headerlink" href="#setup-der-software" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="betriebssystem">
<h3>Betriebssystem<a class="headerlink" href="#betriebssystem" title="Link zu dieser Überschrift">¶</a></h3>
<p>Als Betriebssystem wird <strong>Raspberry Pi OS Lite</strong> der <a class="reference external" href="https://www.raspberrypi.org/">Raspberry Pi Foundation</a>
verwendet. Angeboten wird dieses unter: <a class="reference external" href="https://www.raspberrypi.org/software/">https://www.raspberrypi.org/software/</a></p>
<p>Dieses Betriebssystem ist nun auf die SD-Karte und, wenn vorhanden, auf den
USB-Speicher zu installieren, z.B. mit dem Raspberry Pi Imager:</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; height: auto; margin-bottom: 24px;">
  <iframe src="https://www.youtube-nocookie.com/embed/ntaXWS8Lk34" style="position:absolute;width:100%;height:100%" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div><div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p class="last">Wenn der USB-Speicher verwendet werden soll, so muss in diesem Schritt
das Betriebssystem-Image sowohl auf die SD-Card als auch den USB-Speicher
installiert werden, denn die SD-Card wird nur benötigt um die Firmware des
Raspberry Pi darauf vorzubereiten später von dem USB-Speicher zu starten.</p>
</div>
</div>
<div class="section" id="netzwerkzugriff-teil-1">
<h3>Netzwerkzugriff - Teil 1<a class="headerlink" href="#netzwerkzugriff-teil-1" title="Link zu dieser Überschrift">¶</a></h3>
<div class="section" id="clients">
<h4>Clients<a class="headerlink" href="#clients" title="Link zu dieser Überschrift">¶</a></h4>
<p>Um den Raspberry Pi warten zu können ist es wichtig über das Netzwerk auf diesen
zugreifen zu können. Dies geschieht, wie üblich, über die <a class="reference external" href="https://de.wikipedia.org/wiki/Secure_Shell">Secure Shell (SSH)</a>.
Linux-Anwender können dann normal über das Terminal zugreifen, Windows-Anwender
nutzen hierfür am einfachsten <a class="reference external" href="https://de.wikipedia.org/wiki/PuTTY">PuTTY</a>.
Aber auch für Mac OS, Android, … sind kostenlose SSH Clients verfügbar.</p>
</div>
<div class="section" id="ssh-aktivieren">
<h4>SSH aktivieren<a class="headerlink" href="#ssh-aktivieren" title="Link zu dieser Überschrift">¶</a></h4>
<p>Um direkt per SSH auf den Raspberry Pi zugreifen zu können muss noch <strong>vor</strong>
dem ersten Start in der ersten Partition der SD-Card (und des USB Speichers)
eine (leere) Datei mit dem Namen <code class="docutils literal notranslate"><span class="pre">ssh</span></code> angelegt werden.</p>
</div>
<div class="section" id="erster-start">
<h4>Erster Start<a class="headerlink" href="#erster-start" title="Link zu dieser Überschrift">¶</a></h4>
<p>Nun ist der Raspberry Pi bereit für den ersten Start, es müssen nur die Speicher,
das Netzwerk-Kabel und anschließend die Spannungsversorgung verbunden werden.</p>
<p>Wurde auch ein Monitor verbunden, so ist auf diesem die Boot-Sequenz sichtbar.
An deren Ende erscheint die Netzwerk-Adresse, die über DHCP bezogen wurde und
unter der der Raspberry Pi zu erreichen ist. Alternativ kann in der Regel auch
über den DHCP-Server (meist Bestandteil des Internet-Routers) die IP-Adresse
in Erfahrung gebracht werden.</p>
</div>
<div class="section" id="erster-zugriff">
<h4>Erster Zugriff<a class="headerlink" href="#erster-zugriff" title="Link zu dieser Überschrift">¶</a></h4>
<p>Über den SSH-Client kann nun auf den Raspberry Pi zugegriffen werden. Der initial
angelegte Benutzer für das Login ist <code class="docutils literal notranslate"><span class="pre">pi</span></code> mit dem Passwort <code class="docutils literal notranslate"><span class="pre">raspberry</span></code>.</p>
</div>
</div>
<div class="section" id="usb-boot-einrichten-optional">
<h3>USB Boot einrichten (optional)<a class="headerlink" href="#usb-boot-einrichten-optional" title="Link zu dieser Überschrift">¶</a></h3>
<p>Für das empfohlene Setup für langfristigen Betrieb ohne SD-Karte müssen
nach dem Einloggen auf den <cite>root</cite>-User gewechselt, die Pakete (auf der SD-Karte)
aktualisiert und ggf. die Firmware aktualisiert werden. Im Anschluss wird das
Raspberry Pi Software Configuration Tool gestartet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">s</span>
<span class="n">apt</span> <span class="n">update</span>
<span class="n">apt</span> <span class="n">full</span><span class="o">-</span><span class="n">upgrade</span>
<span class="n">rpi</span><span class="o">-</span><span class="n">eeprom</span><span class="o">-</span><span class="n">update</span>
<span class="n">raspi</span><span class="o">-</span><span class="n">config</span>
</pre></div>
</div>
<p>In dem Software Konfigurations-Tool wird nun die Boot-Reihenfolge auf USB Boot
geändert:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">6</span> <span class="pre">Advanced</span> <span class="pre">Options</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">A6</span> <span class="pre">Boot</span> <span class="pre">Order</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">B2</span> <span class="pre">USB</span> <span class="pre">Boot</span></code></li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p>Das installierte Raspberry OS kennt, wie jedes andere Linux auch, mehrere
Benutzer. Als normaler Nutzer ist der Account <code class="docutils literal notranslate"><span class="pre">pi</span></code> angelegt worden, dieser
hat aber - bewusst! - nur eingeschränkte Rechte. Werden für administrative
Aufgaben erweiterte Rechte benötigt, so müssen diese mit dem Account <code class="docutils literal notranslate"><span class="pre">root</span></code>
durchgeführt werden. Aus Sicherheitsgründen kann man sich normalerweise
nicht direkt als <code class="docutils literal notranslate"><span class="pre">root</span></code> anmelden, sondern geht über einen normalen Account
(wie <code class="docutils literal notranslate"><span class="pre">pi</span></code>) und wechselt dann von dort auf den <code class="docutils literal notranslate"><span class="pre">root</span></code>-Account.</p>
<p class="last">Für einen einzelnen Befehl geschieht dies, in dem <code class="docutils literal notranslate"><span class="pre">sudo</span></code> vor den Befehl
geschrieben wird. Wenn mehrere Befehlen als <code class="docutils literal notranslate"><span class="pre">root</span></code> ausgeführt werden sollen,
so kann über <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-s</span></code> der Account auf den <code class="docutils literal notranslate"><span class="pre">root</span></code> Account gewechselt
werden. Durch ein <code class="docutils literal notranslate"><span class="pre">exit</span></code> wird wieder zurück gewechselt.</p>
</div>
<p>Der Raspberry Pi kann nun über <code class="docutils literal notranslate"><span class="pre">shutdown</span> <span class="pre">-h</span> <span class="pre">now</span></code> herunter gefahren werd, die
Spannungsversorgung getrennt, die SD-Karte entfernt und anschließend über das
Wiedereinstecken der Spannungsversorgung wieder gestartet werden.</p>
</div>
<div class="section" id="basisadministration">
<h3>Basisadministration<a class="headerlink" href="#basisadministration" title="Link zu dieser Überschrift">¶</a></h3>
<div class="section" id="passwort-andern">
<h4>Passwort ändern<a class="headerlink" href="#passwort-andern" title="Link zu dieser Überschrift">¶</a></h4>
<p>Als erster Schritt in der finalen Umgebung sollte das Passwort des Users <code class="docutils literal notranslate"><span class="pre">pi</span></code>
geändert werden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">passwd</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p>Das Passwort kann gerne lange und kompliziert gewählt werden, da dieses
später durch den „ssh key exchange“ nicht mehr eingegeben werden muss.</p>
<p class="last">Wenn dennoch ein „unsicheres“ Passwort gewünscht wird - wovon dringend
abgeraten wird - so lässt sich über <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">passwd</span> <span class="pre">pi</span></code> der Komplexitäts-Schutz
umgehen.</p>
</div>
</div>
<div class="section" id="system-aktuell-halten">
<h4>System aktuell halten<a class="headerlink" href="#system-aktuell-halten" title="Link zu dieser Überschrift">¶</a></h4>
<p>Seit dem Erstellen des Betriebssystem-Paketes gab es bereits Aktualisierungen
von einzelnen Software-Bestandteilen. Alle Updates werden installiert über:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">full</span><span class="o">-</span><span class="n">upgrade</span>
</pre></div>
</div>
<p>Diese Befehle sollte man später im Rahmen der allgemeinen Systemwartung
regelmäßig wiederholen um alle Bug-Fixes und Sicherheits-Patches zu bekommen.</p>
</div>
<div class="section" id="komfort-optional">
<h4>Komfort (optional)<a class="headerlink" href="#komfort-optional" title="Link zu dieser Überschrift">¶</a></h4>
<p>Um sich das Leben etwas leichter zu machen können nun ein paar grundlegende
Einstellungen vorgenommen werden.</p>
<div class="section" id="editor">
<h5>Editor<a class="headerlink" href="#editor" title="Link zu dieser Überschrift">¶</a></h5>
<p>Standardmäßig ist bereits der Editor <code class="docutils literal notranslate"><span class="pre">nano</span></code> installiert, eine gerade auch
für Einsteiger gute Wahl. Editieren von (Text-)Dateien geht sehr einfach, in
dem <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">&lt;Dateiname&gt;</span></code> aufgerufen wird. Änderungen werden dann mit „^O“
gespeichert, d.h. mit <kbd class="kbd docutils literal notranslate">Strg</kbd> + <kbd class="kbd docutils literal notranslate">O</kbd>. Der Editor wird mit „^X“,
also <kbd class="kbd docutils literal notranslate">Strg</kbd> + <kbd class="kbd docutils literal notranslate">X</kbd>, wieder beendet.</p>
<p>Sollte jedoch ein anderer Editor bevorzugt werden, so kann dieser jetzt
installiert werden, z.B. für <a class="reference external" href="https://de.wikipedia.org/wiki/Vim">vim</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">install</span><span class="o">-</span><span class="n">recommends</span> <span class="n">vim</span>
</pre></div>
</div>
<p>Auch kann dieser nun konfiguriert werden, z.B. wenn bei <cite>vim</cite> die Mausintegration
über das Terminal stören sollte:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;set mouse=&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">vim</span><span class="o">/</span><span class="n">vimrc</span><span class="o">.</span><span class="n">local</span>
<span class="n">echo</span> <span class="s2">&quot;set ttymouse=&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">vim</span><span class="o">/</span><span class="n">vimrc</span><span class="o">.</span><span class="n">local</span>
</pre></div>
</div>
</div>
<div class="section" id="dateianzeige">
<span id="bashrc"></span><h5>Dateianzeige<a class="headerlink" href="#dateianzeige" title="Link zu dieser Überschrift">¶</a></h5>
<p>Für die schnelle und komfortable Anzeige der Dateien im Terminal haben sich
Abkürzungen etabliert, die noch in der Datei <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> aktiviert werden
müssen. Hierzu öffnet man diese Datei im Editor (z.B. mit <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">~/.bashrc</span></code>)
und Passt, relativ am Ende, die Zeilen an auf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alias</span> <span class="n">ll</span><span class="o">=</span><span class="s1">&#39;ls -alF&#39;</span>
<span class="n">alias</span> <span class="n">la</span><span class="o">=</span><span class="s1">&#39;ls -A&#39;</span>
<span class="n">alias</span> <span class="n">l</span><span class="o">=</span><span class="s1">&#39;ls -CF&#39;</span>
</pre></div>
</div>
<p>Im Terminal kann so nun über <code class="docutils literal notranslate"><span class="pre">ll</span></code> mit entsprechend bunter Hervorhebung der
Inhalt des aktuellen Ordners angezeigt werden.</p>
<p>Diese Einstellung ist für jeden Account individuell. D.h. diese müsste sowohl
für den User <code class="docutils literal notranslate"><span class="pre">pi</span></code> als auch für <code class="docutils literal notranslate"><span class="pre">root</span></code> vorgenommen werden.</p>
</div>
</div>
<div class="section" id="basiseinstellungen">
<h4>Basiseinstellungen<a class="headerlink" href="#basiseinstellungen" title="Link zu dieser Überschrift">¶</a></h4>
<p>Über <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">raspi-config</span></code> lassen sich nun grundlegende Einstellungen des
Raspberry Pi vornehmen, z.B. nicht benötigte Hardware-Treiber ausschalten
oder, wenn wider Erwarten notwendig, die HDMI Ausgänge konfigurieren.</p>
</div>
</div>
<div class="section" id="netzwerkzugriff-teil-2">
<h3>Netzwerkzugriff - Teil 2<a class="headerlink" href="#netzwerkzugriff-teil-2" title="Link zu dieser Überschrift">¶</a></h3>
<div class="section" id="netzwerkadresse-andern">
<h4>Netzwerkadresse ändern<a class="headerlink" href="#netzwerkadresse-andern" title="Link zu dieser Überschrift">¶</a></h4>
<p>Bis jetzt hat sich der Raspberry Pi selbst eine Netzwerkadresse besorgt. Damit
dieser aber als Server immer unter der gleichen Adresse zu erreichen ist muss
entweder im DCHP-Server (in der Regel im Internet-Router integriert) für den
Pi eine feste Adresse festgelegt werden - oder man vergibt eine statische
Adresse außerhalb des DHCP Bereichs.</p>
<p>Für eine statische IP Adresse muss in die Datei <code class="docutils literal notranslate"><span class="pre">/etc/dhcpcd.conf</span></code> um
die entsprechenden Zeilen ergänzt werden. In diesem Beispiel wird dem
Ethernet-Interface <code class="docutils literal notranslate"><span class="pre">eth0</span></code> die statische Adresse <code class="docutils literal notranslate"><span class="pre">192.168.0.52</span></code> mit
dem Router und DNS-Server <code class="docutils literal notranslate"><span class="pre">192.168.0.1</span></code> zugewiesen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interface</span> <span class="n">eth0</span>
<span class="n">static</span> <span class="n">ip_address</span><span class="o">=</span><span class="mf">192.168.0.52</span><span class="o">/</span><span class="mi">24</span>
<span class="n">static</span> <span class="n">routers</span><span class="o">=</span><span class="mf">192.168.0.1</span>
<span class="n">static</span> <span class="n">domain_name_servers</span><span class="o">=</span><span class="mf">192.168.0.1</span>
</pre></div>
</div>
<p>Die einfachste Möglichkeit um diese Einstellungen zu aktivieren ist ein
Neustart, z.B. mit <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">shutdown</span> <span class="pre">-r</span> <span class="pre">now</span></code>.</p>
</div>
<div class="section" id="wlan-und-bluetooth-entfernen-optional">
<h4>WLAN (und Bluetooth) entfernen (optional)<a class="headerlink" href="#wlan-und-bluetooth-entfernen-optional" title="Link zu dieser Überschrift">¶</a></h4>
<p>Wenn der Raspberry Pi über Ethernet und nicht über WLAN mit dem Netzwerk
verbunden ist (sehr empfohlen!), so kann dies komplett abgeschaltet werden.</p>
<p>Hierzu muss die Datei <code class="docutils literal notranslate"><span class="pre">/boot/config.txt</span></code> am Ende um die Zeile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dtoverlay</span><span class="o">=</span><span class="n">disable</span><span class="o">-</span><span class="n">wifi</span>
</pre></div>
</div>
<p>erweitert werden. Wenn auch Bluetooth deaktiviert werden soll, so ist zusätzlich
noch die Zeile</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dtoverlay</span><span class="o">=</span><span class="n">disable</span><span class="o">-</span><span class="n">bt</span>
</pre></div>
</div>
<p>hinzuzufügen. Nach einem Neustart kann nun noch über
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">autopurge</span> <span class="pre">wpasupplicant</span></code>
der <code class="docutils literal notranslate"><span class="pre">wpasupplicant</span></code> Service entfernt werden.</p>
</div>
<div class="section" id="ssh-key-exchange">
<h4>SSH Key Exchange<a class="headerlink" href="#ssh-key-exchange" title="Link zu dieser Überschrift">¶</a></h4>
<p>Für einen komfortablem Zugriff über SSH wird ein <cite>SSH Key Exchange</cite> durchgeführt.
Nach einem Key Exchange wird kein Passwort mehr benötigt, sondern es wird
direkt ein lokal vorliegender kryptographischer Schlüssel verwendet. Dieser
Schlüssel kann wiederum mit einem (ggf. anderen) Passwort geschützt werden.</p>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p>Wird der Key Exchange mit einem Arbeitsrechner durchgeführt, so sollte in der
Regel ein Passwort für den Schlüssel vergeben werden. Wenn der Key Exchange
mit einem Automatisierungsserver (z.B. einer Node-Red Instanz) durchgeführt
wird, um so z.B. von außen den Bildschirm aktivieren zu können, so wird dieser
meist ohne extra Passwort durchgeführt.</p>
<p class="last">In einer geschützten, privaten Umgebung kann dies ausreichend sein. In einer
professionellen Umgebung wird die Entscheidung über einen notwendigen
Passwortschutz anhand einer Gefahrenanalyse getroffen.</p>
</div>
<p>Auf dem Client (Arbeitsrechner, Automatisierungsserver) muss zuerst ein lokaler
SSH-Schlüssel erzeugt werden, sollte noch keiner vorhanden sein. Bei der
Erzeugung des lokalen Schlüssels wird dann auch das Passwort für diesen Schlüssel
(also nicht das Passwort für den Raspberry Pi!) angegeben. Der lokale,
öffentliche Schlüssel liegt auf dem Client-Rechner in der Text-Datei <code class="docutils literal notranslate"><span class="pre">id_rsa.pub</span></code>.</p>
<p>Auf dem Raspberry Pi muss nun im Home-Verzeichnis des entsprechenden Users (also
<code class="docutils literal notranslate"><span class="pre">pi</span></code> oder <code class="docutils literal notranslate"><span class="pre">root</span></code>) das Unterverzeichnis <code class="docutils literal notranslate"><span class="pre">.ssh</span></code> angelegt werden und der
öffentliche Schlüssel dann in die Datei <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> kopiert werden.
Für einen Key Exchange mit <code class="docutils literal notranslate"><span class="pre">root</span></code> wird erst über <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-s</span></code> der Benutzer
gewechselt. Anschließend dann:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">~/.</span><span class="n">ssh</span>
<span class="n">nano</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">authorized_keys</span>
</pre></div>
</div>
<p>Im Editor kann dann der Text aus der lokalen Datei <code class="docutils literal notranslate"><span class="pre">id_rsa.pub</span></code> hinein kopiert
werden.</p>
<p>Im Anschluss bietet es sich an gleich die Verbindung zu testen. Dazu beendet man
über <code class="docutils literal notranslate"><span class="pre">exit</span></code> die aktuelle <code class="docutils literal notranslate"><span class="pre">ssh</span></code>-Session und startet diese wieder neu.
Bei einem Schlüssel ohne Passwort sollte man nun direkt verbunden sein, bei einem
mit muss nur das lokale Passwort (und nicht das Passwort des Users <code class="docutils literal notranslate"><span class="pre">pi</span></code>)
eingegeben werden.</p>
</div>
</div>
<div class="section" id="weiteres-optional">
<h3>Weiteres (optional)<a class="headerlink" href="#weiteres-optional" title="Link zu dieser Überschrift">¶</a></h3>
<p>Anschließend können noch finale Konfigurationen durchgeführt werden, wie
beispielsweise die Treiber für das Argon Gehäuse. In diesem konkreten Fall
würde über</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">argon40</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">argon1</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">bash</span>
</pre></div>
</div>
<p>der Treiber installiert werden und über <code class="docutils literal notranslate"><span class="pre">argonone-config</span></code> eingerichtet werden.</p>
</div>
</div>
<div class="section" id="ausblick">
<h2>Ausblick<a class="headerlink" href="#ausblick" title="Link zu dieser Überschrift">¶</a></h2>
<p>Der erste Teil des Tutorials zur grundsätzlichen Vorbereitung des Raspberry Pi
für eine professionelle, langfristige Nutzung ist nun abgeschlossen. Als
nächstes muss nun die Software installiert werden, durch die der Pi produktiv
nutzbar wird.</p>
<p>Dies kann die CometVisu selbst sein, die dazu am einfachsten in einer
Docker-Umgebung läuft: <a class="reference internal" href="rpi_docker.html"><span class="doc">Raspberry Pi: Docker installieren</span></a> und
<a class="reference internal" href="rpi_cometvisu.html"><span class="doc">Raspberry Pi: CometVisu in Docker installieren</span></a>.</p>
<p>Es kann aber auch sein, dass der Raspberry Pi als CometVisu Client laufen soll
und den Browser mit der CometVisu auf einem Touchscreen darstellen soll:
<a class="reference internal" href="rpi_kiosk.html"><span class="doc">Client einrichten (Kiosk Modus)</span></a>.</p>
<p>Genau so ist es möglich den Raspberry Pi als Automatisierungs-Server für
OpenHAB oder Node-Red zu verwenden.</p>
<p>Gerade wenn der Raspberry Pi mit „etwas Luft“ gekauft wurde, so kann dieser
leicht mehrere dieser Aufgaben gleichzeitig übernehmen, da dieser ja sowieso
rund um die Uhr Durchläuft.</p>
</div>
<div class="section" id="cheat-sheet">
<h2>Cheat Sheet<a class="headerlink" href="#cheat-sheet" title="Link zu dieser Überschrift">¶</a></h2>
<p>Für die Einrichtung und grundlegende Administration des Raspberry Pi über die
Kommandozeile werden nicht viele Befehle benötigt. In dieser Liste sind die
wichtigsten zusammengefasst.</p>
<p>Allgemeine Befehle:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">&lt;Pfad&gt;</span></code></dt><dd>Wechsel des Verzeichnisses, <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code> wechselt ein Verzeichnis „nach oben“.
<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~</span></code> wechselt in das Heimat-Verzeichnis des aktuellen Accounts.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ls</span></code> oder (<a class="reference internal" href="#bashrc"><span class="std std-ref">wenn eingerichtet</span></a>) mit mehr Komfort <code class="docutils literal notranslate"><span class="pre">ll</span></code></dt><dd>Aktuellen Inhalt des Verzeichnisses anzeigen.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">whoami</span></code></dt><dd>Anzeige des aktuellen Accounts (<code class="docutils literal notranslate"><span class="pre">pi</span></code> oder <code class="docutils literal notranslate"><span class="pre">root</span></code>).</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">&lt;Befehl&gt;</span></code></dt><dd>Führt <code class="docutils literal notranslate"><span class="pre">&lt;Befehl&gt;</span></code> als User <code class="docutils literal notranslate"><span class="pre">root</span></code> aus.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-s</span></code></dt><dd>Führt alle weiteren Befehle als <code class="docutils literal notranslate"><span class="pre">root</span></code> aus, bis dies durch <code class="docutils literal notranslate"><span class="pre">exit</span></code> wieder
beendet wird.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">exit</span></code></dt><dd>Beendet die aktuelle „Anmeldung“, also z.B. die aktuelle SSH-Session oder
den Wechsel des Accounts über <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-s</span></code>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shutdown</span> <span class="pre">-h</span> <span class="pre">now</span></code></dt><dd>Sofortiges Herunterfahren und anschließendes Halten. Bei einem Raspberry Pi
muss zum anschließenden neuen Start die Spannungsversorgung getrennt und
wieder neu verbunden werden.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shutdown</span> <span class="pre">-r</span> <span class="pre">now</span></code></dt><dd>Sofortiges Herunterfahren und anschließender Neustart.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nano</span></code> oder <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">&lt;Dateiname&gt;</span></code></dt><dd>Öffnet den Editor <code class="docutils literal notranslate"><span class="pre">nano</span></code>.</dd>
</dl>
<p>Befehle speziell für den Raspberry Pi:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">raspi-config</span></code></dt><dd>Grundlegendste Systemeinstellungen, vergleichbar mit BIOS Einstellungen
bei einem normalen PC.</dd>
</dl>
<p>Sollte die Boot-Partition in den Systemeinstellungen als <cite>Read-Only</cite>
konfiguriert worden sein, so kann diese temporär mit
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">mount</span> <span class="pre">-o</span> <span class="pre">remount,rw</span> <span class="pre">/boot</span></code> beschreibbar gemacht werden.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rpi_kiosk.html" class="btn btn-neutral float-right" title="Raspberry Pi: Client einrichten (Kiosk Modus)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2010-2022 Christian Mayer and the CometVisu contributers.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Version</span>
      v: 0.13.0-dev
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../0.10/manual">0.10.2</a></dd>
        
          <dd><a href="../../0.11/manual">0.11.2</a></dd>
        
          <dd><a href="../../0.12/manual">0.12.0</a></dd>
        
          <dd><a href="../../0.13/manual">0.13.0-dev</a></dd>
        
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>