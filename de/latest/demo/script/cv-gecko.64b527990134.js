qx.$$packageData['4']={"locales":{},"resources":{"plugins/upnpcontroller/mute.php":"cv","plugins/upnpcontroller/next.php":"cv","plugins/upnpcontroller/pause.php":"cv","plugins/upnpcontroller/play.php":"cv","plugins/upnpcontroller/playlists.php":"cv","plugins/upnpcontroller/prev.php":"cv","plugins/upnpcontroller/status.php":"cv","plugins/upnpcontroller/upnpcontroller.css":"cv","plugins/upnpcontroller/upnpctrl_util.php":"cv","plugins/upnpcontroller/volume.php":"cv"},"translations":{"de":{},"en":{}}};
qx.Part.$$notifyLoad("4", function() {
(function(){var a="</div>",b="application/json",c="_prev' class='actor switchUnpressed center'><div class='value'>prev</div></div>",d="_volume' class='actor center switchInvisible' style='text-align: center;'><div class='value'>20</div></div>",e='volume',f='_album div.value',g="_getplaylists' class='actor switchUnpressed center'><div class='value'>play lists</div></div></div>",h="traceFlag",j="volume          : ",k='_getplaylists',l="_playlistsresult'><div class='value'></div></div></div>",m='unpressed',n='plugins/upnpcontroller/upnpcontroller.css',o='play',p=':',q="<div id='",r='pause',s="'>",t="playerIp",u='Play',v='true',w='#',x="Number",y="secondsProcessed: ",z="click callvolumedown",A="tap",B="html",C="url: ",D="text",E="_time' class='upnplabelgroup'><div class='upnplabel'></div><div class='value'>-</div></div>",F="_volumedown' class='actor center switchUnpressed'><div class='value'>-</div></div>",G="_title' class='upnplabelgroup'><div class='upnplabel'>Title</div><div class='value'>-</div></div>",H="_progress'  max='100' value='0'></progress></div>",I='value',J="_muteButton' class='actor switchUnpressed center'><div class='value'>-</div></div></div>",K="title           : ",L="playerPort  : ",M='next',N="currentValue: ",O='_muteButton',P="calculateSongProcessed",Q="success",R="plugins/upnpcontroller/",S="click callgetplaylists",T=' of ',U="&port=",V="<div>",W="_playButton",X="plugins/upnpcontroller/selectplaylist.php?player_ip_addr=",Y='_volume div.value',cs="_muteButton",ct="upnpcontroller",cu='_playlistsresult div.value',co='_playButton div.value',cp="click prev",cq='prev',cr="click play",cA="Boolean",cB="</a></br>",cC="<div class=\"actor\"><div class=\"upnpcontroller\" id=\"",cD="debug     : ",cw="click mute",cx="GET",cy='switchUnpressed',cz="name: ",cH='status',di="upnpcontroller_",dD='_progress',cI="secondsTotal    : ",cE="playerPort: ",cF="reltime         : ",dz="click callvolumeup",cG='switchPressed',cJ="<div style='float: left;'><div id='",cK="<div style='float: left;'><progress id='",cL='_artist div.value',cP='cv.plugins.UpnpController',cQ="_volumeup' class='actor center switchUnpressed'><div class='value'>+</div></div></div>",cR="durationResponse: ",cM="&listurl=",cN="\">",dy='pressed',cO='_time div.value',cV="_album' class='upnplabelgroup'><div class='upnplabel'>Album</div><div class='value'>-</div></div>",cW="playerPort",cX='playlists',cY="totalMatches: ",cS="_volumedown",cT="_artist' class='upnplabelgroup'><div class='upnplabel'>Artist</div><div class='value'>-</div></div>",dA="true",cU='',dd="_next' class='actor switchUnpressed center'><div class='value'>next</div></div></div>",de="current playValue: ",dC="_next",df="interval",da="playerIp  : ",db="click next",dB="value",dc="data: ",dg='_title div.value',dh="String",dt='_muteButton div.value',ds="_getplaylists",dr="",dx="song_process_rel: ",dw="_prev",dv="current muteValue: ",du=".php",dm='mute',dl='div.value',dk="_volumeup",dj="_playButton' class='actor switchUnpressed center'><div class='value'>-</div></div>",dq='_playButton',dp="<a href='",dn="currentVolume: ";qx.Class.define(cP,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Refresh],statics:{parse:function(dE,dI,dG,dF){var dH=cv.parser.WidgetParser.parseElement(this,dE,dI,dG,dF,this.getAttributeToPropertyMappings());cv.parser.WidgetParser.parseRefresh(dE,dI);return dH;},getAttributeToPropertyMappings:function(){return {'debug':{target:h,transform:function(dJ){return dJ===dA;}},'label':{},'player_ip_addr':{target:t},'player_port':{target:cW,transform:function(dK){return dK?parseInt(dK):1440;}}};},uniqid:function(){var dL=new Date();return dL.getTime();}},properties:{traceFlag:{check:cA,init:false},playerIp:{check:dh,nullable:true},playerPort:{check:x,init:1440}},members:{upnpcontroller_uid:null,upnpcontroller_song_process_rel:null,_getInnerDomString:function(){var dO=di+this.self(arguments).uniqid();this.upnpcontroller_uid=dO;var dM=cC+dO+cN;var dN=V;dN+=q+dO+G;dN+=q+dO+cT;dN+=q+dO+cV;dN+=q+dO+E;dN+=cK+dO+H;dN+=cJ+dO+F+q+dO+d+q+dO+cQ;dN+=cJ+dO+dj+q+dO+J;dN+=cJ+dO+c+q+dO+dd;dN+=cJ+dO+g;dN+=cJ+dO+l;dN+=a;return dM+dN;},_onDomReady:function(){cv.ui.structure.AbstractWidget.prototype._onDomReady.call(this);this.refreshUpnpcontroller();},initListeners:function(){var dP=qx.event.Registration;dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+cs)[0],A,this.toggleMute);dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+W)[0],A,this.togglePlay);dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+dC)[0],A,this.callNext);dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+dw)[0],A,this.callPrev);dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+cS)[0],A,this.callvolumedown);dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+dk)[0],A,this.callvolumeup);dP.addListener(qx.bom.Selector.query(w+this.upnpcontroller_uid+ds)[0],A,this.callgetplaylists);},_setupRefreshAction:function(){if(this.getRefresh()&&this.getRefresh()>0){this._timer=new qx.event.Timer(this.getRefresh());this._timer.addListener(df,function(){this.refreshUpnpcontroller();},this);this._timer.start();};},refreshUpnpcontroller:function(){var dR=this.getPlayerIp();var dQ=this.getPlayerPort();this.trace(cD+this.isTraceFlag());this.trace(da+dR);this.trace(cE+dQ);this.__tC(cH,{},function(dS){var dT=dS.getTarget().getResponse();this.trace(j+dT.volume);this.trace(cF+dT.reltimeResponse);this.trace(cR+dT.durationResponse);this.trace(K+dT.title);this.__tB(dT.volume,dT.muteState,dT.transportState,dT.title,dT.reltimeResponse,dT.durationResponse,dT.artist,dT.album);});},__tB:function(ea,dX,dV,dW,dY,eb,ec,dU){var ed=this.upnpcontroller_uid;if(dX===0){qx.bom.element.Class.replace(qx.bom.Selector.query(w+ed+O)[0],cG,cy);}else {qx.bom.element.Class.replace(qx.bom.Selector.query(w+ed+O)[0],cy,cG);};if(dV===u){qx.bom.element.Class.replace(qx.bom.Selector.query(w+ed+dq)[0],cG,cy);}else {qx.bom.element.Class.replace(qx.bom.Selector.query(w+ed+dq)[0],cy,cG);};qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+dt)[0],D,dX);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+co)[0],D,dV);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+Y)[0],D,ea);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+dg)[0],D,dW);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+cL)[0],D,ec);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+f)[0],D,dU);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+cO)[0],D,dY+T+eb);this.upnpcontroller_song_process_rel=this.calculateSongProcessed(dY,eb);this.trace(dx+this.upnpcontroller_song_process_rel);qx.bom.element.Attribute.set(qx.bom.Selector.query(w+ed+dD)[0],dB,this.upnpcontroller_song_process_rel);},__tC:function(eg,eh,ee){var ef=new qx.io.request.Xhr(qx.util.ResourceManager.getInstance().toUri(R+eg+du));if(!eh){eh={};};eh=qx.lang.Object.mergeWith(eh,{player_ip_addr:this.getPlayerIp(),port:this.getPlayerPort()});ef.set({requestData:eh,accept:b,method:cx});ef.addListener(Q,ee,this);ef.send();},calculateSongProcessed:function(en,el){if(en===undefined||el===undefined){return;};this.trace(P);var ek=el.split(p);var em=Number(ek[2])+Number(ek[1])*60+Number(ek[0])*60*60;var ej=en.split(p);var ei=Number(ej[2])+Number(ej[1])*60+Number(ej[0])*60*60;this.trace(cI+em);this.trace(y+ei);return Math.floor(ei*100/em);},callgetplaylists:function(){this.trace(S);var ep=qx.bom.Selector.query(w+this.upnpcontroller_uid+k)[0];var er=qx.bom.element.Attribute.get(ep,I);var eq=this.getPlayerIp();var eo=this.getPlayerPort();this.trace(N+er);this.trace(L+eo);this.__tC(cX,{},function(es){var et=cU;this.trace(cY+es.totalMatches);for(var i=0;i<es.playLists.length;i++ ){et+=dp+X+eq+cM+es.playLists[i].urlenc+U+eo+s+es.playLists[i].name+cB;if(this.isTraceFlag()===v){this.debug(cz+es.playLists[i].name);this.debug(C+es.playLists[i].url);};};if(er!==dy){qx.bom.element.Attribute.set(qx.bom.Selector.query(w+this.upnpcontroller_uid+cu)[0],B,et);qx.bom.element.Attribute.set(et,I,dy);qx.bom.element.Class.replace(et,cy,cG);}else {qx.bom.element.Attribute.set(qx.bom.Selector.query(w+this.upnpcontroller_uid+cu)[0],D,dr);qx.bom.element.Attribute.set(et,I,m);qx.bom.element.Class.replace(et,cy,cG);};});},callvolumedown:function(){this.trace(z);var eu=qx.bom.element.Attribute.get(qx.bom.Selector.query(w+this.upnpcontroller_uid+Y)[0],D);this.trace(dn+eu);var ew=Number(eu)-5;this.__tC(e,{volume:ew},function(ex){this.trace(dc+ex);});},callvolumeup:function(){this.trace(dz);var ey=qx.bom.element.Attribute.get(qx.bom.Selector.query(w+this.upnpcontroller_uid+Y)[0],D);this.trace(dn+ey);var ez=Number(ey)+5;this.__tC(e,{volume:ez},function(eA){this.trace(dc+eA);});},callNext:function(){this.trace(db);this.__tC(M,{},function(eB){this.trace(dc+eB);});},callPrev:function(){this.trace(cp);this.__tC(cq,{},function(eC){this.trace(dc+eC);});},toggleMute:function(){this.trace(cw);var eE=qx.bom.Selector.query(w+this.upnpcontroller_uid+O)[0];var eD=qx.bom.element.Attribute.get(qx.bom.Selector.query(dl,eE)[0],D);this.trace(dv+eD);if(eD===0){eD=1;qx.bom.element.Class.replace(eE,cy,cG);}else {eD=0;qx.bom.element.Class.replace(eE,cG,cy);};this.__tC(dm,{mute:eD},function(eF){this.trace(dc+eF);});this.refreshUpnpcontroller();},togglePlay:function(){this.trace(cr);var eG=qx.bom.element.Attribute.get(qx.bom.Selector.query(w+this.upnpcontroller_uid+co)[0],D);var eH;this.trace(de+eG);var eI=qx.bom.Selector.query(w+this.upnpcontroller_uid+dq)[0];if(eG===u){eH=r;qx.bom.element.Class.replace(eI,cy,cG);}else {eH=o;qx.bom.element.Class.replace(eI,cG,cy);};this.__tC(eH,{},function(eJ){this.trace(dc+eJ);});this.refreshUpnpcontroller();},trace:function(eK){if(this.isTraceFlag()){this.debug(eK);};}},defer:function(eL){var eM=cv.util.ScriptLoader.getInstance();eM.addStyles(n);cv.parser.WidgetParser.addHandler(ct,cv.plugins.UpnpController);cv.ui.structure.WidgetFactory.registerClass(ct,eL);}});})();
});