qx.$$packageData['524288']={"locales":{},"resources":{"plugins/calendarlist/calendarlist.php":"cv"},"translations":{"de":{},"en":{}}};
qx.Part.$$notifyLoad("524288", function() {
(function(){var a='</span>',b='POST',d='<div class="calendarList_inline" id="calendarList',f='</div>',g='format',h='',j='</span><br>',k='calendarListlocal: no src URL',l=' - ',m="width:",n='cv.plugins.CalendarList',p='calendarname',q='#FFFFFF',r="plugins/calendarlist/calendarlist.php",s="height:",t='magiccookie',u='color',v='<div class="actor calendarListBody">',w="String",x='calendar',y='<span>{date}: {text}{where}</span>',z='li',A="",B=', ',C='userid',D='">',E='C: #%s, Error: %s, calendarList: %s',F='<span style="color:',G='type',H='{date}: {text}{where}',I='json',J='" style="',K=' (',L="calendarlist",M=')',N='id',O=";",P='"></div>',Q='days',R='<span>',S='00:00';qx.Class.define(n,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Refresh],properties:{width:{check:w,init:h},height:{check:w,init:h},src:{check:w,init:r},days:{check:w,init:h}},statics:{calendars:null,parse:function(T,X,V,U){var W=cv.parser.WidgetParser.parseElement(this,T,X,V,U,this.getAttributeToPropertyMappings());cv.parser.WidgetParser.parseRefresh(T,X);this.calendars=[];qx.bom.Selector.query(x,T).forEach(function(ba){var Y={type:ba.getAttribute(G),userid:ba.getAttribute(C),magiccookie:ba.hasAttribute(t)?ba.getAttribute(t):h,days:ba.hasAttribute(Q)?ba.getAttribute(Q):W.days};this.calendars.push(Y);},this);return W;},getAttributeToPropertyMappings:function(){return {'width':{transform:function(bb){return bb?m+bb+O:A;}},'height':{transform:function(bc){return bc?s+bc+O:A;}},'maxquantity':{},'days':{},'refresh':{}};}},members:{_getInnerDomString:function(){return v+d+this.getPath()+J+this.getHeight()+this.getWidth()+P+f;},_onDomReady:function(){cv.ui.structure.AbstractWidget.prototype._onDomReady.call(this);this.refreshAction();},_refreshAction:function(){var be=this.getActor();var bd=this.getSrc();var bg=this.getMaxquantity();var bf=this.getCalendars();$(function(){$(be).calendarListlocal({src:qx.util.ResourceManager.getInstance().toUri(bd),maxquantity:bg,calendar:bf});});return false;}},defer:function(bh){cv.parser.WidgetParser.addHandler(L,bh);cv.ui.structure.WidgetFactory.registerClass(L,bh);}});(function($){jQuery.fn.extend({calendarListlocal:function(bi){var bj={src:h,days:30,html:y,wrapper:z,dataType:I,datetime:true};bi=jQuery.extend(bj,bi);return this.each(function(){var o=bi;var c=jQuery(this);if(o.src===h){console.log(k);return;};var bl={'maxquantity':o.maxquantity};for(var i=0;i<o.calendar.length;i++ ){var bm=p+i;var bp=G+i;var bn=C+i;var bk=t+i;var bo=Q+i;bl[bm]=i;bl[bp]=o.calendar[i].type;bl[bn]=o.calendar[i].userid;bl[bk]=o.calendar[i].magiccookie;bl[bo]=o.calendar[i].days;};jQuery.ajax({url:o.src,type:b,data:bl,dataType:o.dataType,error:function(bq,status,e){console.log(E,$(c).attr(N),e,o.src);},success:function(bx){c.html(h);var bu=bx.calendarList.calendarListEntries;var bs=bu.length;var bz=h;var bw,bt,bA;for(var i=0;i<bs;i++ ){var by=bu[i];var bB=o.html;bw=q;for(var br=0;br<o.calendar.length;br++ ){if(by.calendarName===br){if(o.calendar[br].hasAttribute(u)===true){bw=o.calendar[br].getAttribute(u);}else {bw=q;};if(o.calendar[br].hasAttribute(g)===true){bt=o.calendar[br].getAttribute(g);}else {bt=H;};bB=R+bt+a;};};bz=by.StartDate;if(by.StartTime!==S){bz=bz+B+by.StartTime;};if(by.StartDate!==by.EndDate||by.StartTime!==by.EndTime){bz=bz+l;};if(by.StartDate!==by.EndDate){bz=bz+by.EndDate+B+by.EndTime;}else {if(by.StartTime!==by.EndTime){bz=bz+by.EndTime;};};bB=bB.replace(/\{text\}/,by.description);if(by.where!==h){bA=K+by.where+M;}else {bA=by.where;};bB=bB.replace(/\{where\}/,bA);bB=bB.replace(/\{date\}/,bz);var bv=$(F+bw+D).append(bB).append(j);c.append(bv);};}});});}});})(jQuery);})();
});