qx.$$packageData['256']={"locales":{},"resources":{"plugins/clock/clock_pure.svg":[100,100,"svg","cv"]},"translations":{"de":{},"en":{}}};
qx.Part.$$notifyLoad("256", function() {
(function(){var a='#Hour',b='drag',c='svg',d='HotSpotMinute',e='minute',f='dragstop',g='HotSpotHour',h=':',i="transform",j='rotate(',k="clock",l='hour',m='<div class="actor" style="width:200px; height: 200px"></div>',n='resource/libs/jquery.svg.min.js',o='plugins/clock/clock_pure.svg',p='resource/libs/jquery-ui.min.js',q=':00',r=',50,50)',s='cv.plugins.Clock',t='#Minute',u='transform';qx.Class.define(s,{extend:cv.ui.structure.AbstractWidget,include:[cv.ui.common.Update],construct:function(v){v.value=new Date();cv.ui.structure.AbstractWidget.call(this,v);},statics:{parse:function(w,C,A,z){var B=cv.parser.WidgetParser.parseElement(this,w,C,A,z);cv.parser.WidgetParser.parseFormat(w,C);cv.parser.WidgetParser.parseAddress(w,C);return B;}},members:{_getInnerDomString:function(){return m;},_onDomReady:function(){cv.ui.structure.AbstractWidget.prototype._onDomReady.call(this);var D=$(this.getActor());D.svg({loadURL:qx.util.ResourceManager.getInstance().toUri(o),onLoad:function(E){$(E.root().getElementById(g)).draggable().bind(b,{type:l,actor:D},this.dragHelper.bind(this)).bind(f,{actor:D},this.dragAction.bind(this));$(E.root().getElementById(d)).draggable().bind(b,{type:e,actor:D},this.dragHelper.bind(this)).bind(f,{actor:D},this.dragAction.bind(this));Object.getOwnPropertyNames(this.getAddress()).filter(function(F){return cv.data.Model.isReadAddress(this.getAddress()[F]);}.bind(this)).forEach(function(G){this._update(G,this.getValue().getHours()+h+this.getValue().getMinutes()+q);},this);}.bind(this)});},initListeners:function(){},_update:function(M,O){var K=this.getDomElement();var J=this.defaultValueHandling(M,O);var H=qx.bom.Selector.query(c,K)[0];var L=J.split(h);var N=qx.bom.Selector.query(a,H)[0];var I=qx.bom.Selector.query(t,H)[0];qx.bom.element.Attribute.set(N,i,j+((L[0]%12)*360/12+L[1]*30/60)+r);qx.bom.element.Attribute.set(I,i,j+(L[1]*6)+r);},dragHelper:function(event){var S=event.data.actor;var Q=S.find(c);var x=event.originalEvent.pageX-Q.offset().left-50;var y=50-(event.originalEvent.pageY-Q.offset().top);var R=(Math.atan2(x,y)*180/Math.PI+360)%360;var V=this.getValue();var W;if(event.data.type===l){var U=V.getHours();var X=U>=12;var P=Math.floor(R/30);W=(R%30)*2;if(U%12>9&&P<3){if(X){X=false;V.setDate(V.getDate()+1);}else {X=true;};}else if(P>9&&U%12<3){if(X){X=false;}else {X=true;V.setDate(V.getDate()-1);};};V.setHours(P+X*12);V.setMinutes(W);}else {W=Math.round(R/6);var T=V.getMinutes();if(T>45&&W<15){V.setHours(V.getHours()+1);}else if(W>45&&T<15){V.setHours(V.getHours()-1);};V.setMinutes(W);};S.find(a).attr(u,j+((V.getHours()%12)*360/12+V.getMinutes()*30/60)+r);S.find(t).attr(u,j+(V.getMinutes()*6)+r);},dragAction:function(){var ba=this.getAddress();for(var Y in ba){if(ba[Y][1]===true){continue;};cv.TemplateEngine.getInstance().visu.write(Y,cv.Transform.encode(ba[Y][0],this.getValue()));};}},defer:function(bb){cv.parser.WidgetParser.addHandler(k,cv.plugins.Clock);cv.ui.structure.WidgetFactory.registerClass(k,bb);var bc=cv.util.ScriptLoader.getInstance();{bc.addScripts([p,n],[0]);};}});})();
});