(function(e){var t={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(e,t){}}},n=function(e){this.tipPosition={x:0,y:0},this.init(e)};n.prototype.init=function(t){function r(e){var t={};t.x=e.pageX,t.y=e.pageY,n.updateTooltipPosition(t)}function i(e,t,r){var i=n.getDomElement();if(r){var s;s=n.stringFormat(n.tooltipOptions.content,r),i.html(s),n.updateTooltipPosition({x:t.pageX,y:t.pageY}),i.css({left:n.tipPosition.x+n.tooltipOptions.shifts.x,top:n.tipPosition.y+n.tooltipOptions.shifts.y}).show(),typeof n.tooltipOptions.onHover=="function"&&n.tooltipOptions.onHover(r,i)}else i.hide().html("")}var n=this;t.hooks.bindEvents.push(function(t,s){n.plotOptions=t.getOptions();if(n.plotOptions.tooltip===!1||typeof n.plotOptions.tooltip=="undefined")return;n.tooltipOptions=n.plotOptions.tooltipOpts;var o=n.getDomElement();e(t.getPlaceholder()).bind("plothover",i),e(s).bind("mousemove",r)}),t.hooks.shutdown.push(function(t,n){e(t.getPlaceholder()).unbind("plothover",i),e(n).unbind("mousemove",r)})},n.prototype.getDomElement=function(){var t;return e("#flotTip").length>0?t=e("#flotTip"):(t=e("<div />").attr("id","flotTip"),t.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&t.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),t},n.prototype.updateTooltipPosition=function(t){var n=e("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,r=e("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;t.x-e(window).scrollLeft()>e(window).innerWidth()-n&&(t.x-=n),t.y-e(window).scrollTop()>e(window).innerHeight()-r&&(t.y-=r),this.tipPosition.x=t.x,this.tipPosition.y=t.y},n.prototype.stringFormat=function(e,t){var n=/%p\.{0,1}(\d{0,})/,r=/%s/,i=/%x\.{0,1}(\d{0,})/,s=/%y\.{0,1}(\d{0,})/,o="%x",u="%y",a=t.datapoint[0],f=t.datapoint[1];t.series.label===null&&t.series.originSeries&&(t.series.label=t.series.originSeries.label),typeof e=="function"&&(e=e(t.series.label,a,f,t)),typeof t.series.percent!="undefined"&&(e=this.adjustValPrecision(n,e,t.series.percent)),typeof t.series.label!="undefined"?e=e.replace(r,t.series.label):e=e.replace(r,""),this.isTimeMode("xaxis",t)&&this.isXDateFormat(t)&&(e=e.replace(i,this.timestampToDate(a,this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",t)&&this.isYDateFormat(t)&&(e=e.replace(s,this.timestampToDate(f,this.tooltipOptions.yDateFormat))),typeof a=="number"&&(e=this.adjustValPrecision(i,e,a)),typeof f=="number"&&(e=this.adjustValPrecision(s,e,f)),typeof t.series.xaxis.ticks!="undefined"&&t.series.xaxis.ticks.length>t.dataIndex&&!this.isTimeMode("xaxis",t)&&(e=e.replace(i,t.series.xaxis.ticks[t.dataIndex].label));if(typeof t.series.yaxis.ticks!="undefined")for(var l in t.series.yaxis.ticks)if(t.series.yaxis.ticks.hasOwnProperty(l)){var c=this.isCategoriesMode("yaxis",t)?t.series.yaxis.ticks[l].label:t.series.yaxis.ticks[l].v;c===f&&(e=e.replace(s,t.series.yaxis.ticks[l].label))}return typeof t.series.xaxis.tickFormatter!="undefined"&&(e=e.replace(o,t.series.xaxis.tickFormatter(a,t.series.xaxis).replace(/\$/g,"$$"))),typeof t.series.yaxis.tickFormatter!="undefined"&&(e=e.replace(u,t.series.yaxis.tickFormatter(f,t.series.yaxis).replace(/\$/g,"$$"))),e},n.prototype.isTimeMode=function(e,t){return typeof t.series[e].options.mode!="undefined"&&t.series[e].options.mode==="time"},n.prototype.isXDateFormat=function(e){return typeof this.tooltipOptions.xDateFormat!="undefined"&&this.tooltipOptions.xDateFormat!==null},n.prototype.isYDateFormat=function(e){return typeof this.tooltipOptions.yDateFormat!="undefined"&&this.tooltipOptions.yDateFormat!==null},n.prototype.isCategoriesMode=function(e,t){return typeof t.series[e].options.mode!="undefined"&&t.series[e].options.mode==="categories"},n.prototype.timestampToDate=function(t,n){var r=new Date(t*1);return e.plot.formatDate(r,n,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},n.prototype.adjustValPrecision=function(e,t,n){var r,i=t.match(e);return i!==null&&RegExp.$1!==""&&(r=RegExp.$1,n=n.toFixed(r),t=t.replace(e,n)),t};var r=function(e){new n(e)};e.plot.plugins.push({init:r,options:t,name:"tooltip",version:"0.6.6"})})(jQuery);